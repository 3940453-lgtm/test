var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={helpPath:function(){var A=mstrApp.helpLocaleId||mstrApp.displayLocaleId||mstrApp.localeId;return(mstrApp.helpUrl||"../help/")+"MSTRWeb/WebHelp/Lang_"+A+"/Content/";},helpPathMobileAdmin:function(){var A=mstrApp.helpLocaleId||mstrApp.displayLocaleId||mstrApp.localeId;return(mstrApp.helpUrl||"../help/")+"MobileAdmin/WebHelp/Lang_"+A+"/";},upgradeHelpPath:function(){var A=mstrApp.helpLocaleId||mstrApp.displayLocaleId||mstrApp.localeId;return(mstrApp.upgradeHelpUrl||"../help/")+"WebHelp/Lang_"+A+"/Content/";},descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},tstid:function(B){var A;if(B){if(typeof (B)==="object"){A=B.tstid;}else{A=B;}}return A?'tstid="'+A+'"':"";},getMissingFn:function getMissingFn(){return function(){var C=this.scriptClass,A;try{for(A in this){if(this[A]===arguments.callee){C+="."+A;break;}}}catch(B){}throw new Error("Missing abstract method: "+C);};},now:function now(){return new Date().getTime();},usesFrames:false,getObj:function getObj(A){if(!A||A.destroyed){return null;}return A;},inClosureProps:{inClosure:true}};(function(){mstrmojo.global=(function(){var F=function(){return this;};return F.call(null);}());mstrmojo.dbg=mstrmojo.emptyFn;mstrmojo.dbg_stack=mstrmojo.emptyFn;mstrmojo.dbg_xhr=mstrmojo.emptyFn;mstrmojo.dbg_profile=mstrmojo.emptyFn;mstrmojo.debugBundles=(function(){return(window.mstrConfig&&(mstrConfig.debugFlags!==undefined)&&((mstrConfig.debugFlags&4)>0));})();mstrmojo.platform={};mstrmojo.prompt={};mstrmojo.settings={};mstrmojo.models={datasets:{},template:{}};mstrmojo.ui={editors:{controls:{}},menus:{},pathbar:{}};mstrmojo.prefs={};mstrmojo.ACL={};mstrmojo.CMS={};mstrmojo.storage={};mstrmojo.maps={};mstrmojo.maps.androidmap={};mstrmojo.maps.jsmap={};mstrmojo.graph={};mstrmojo.sm={};mstrmojo.sort={};mstrmojo.customviz={};mstrmojo.ME={};mstrmojo.architect={ui:{editors:{},panels:{},factories:{}},obj:{},menu:{},projectmanagement:{}};mstrmojo.warehouse={ui:{editors:{}},obj:{},dbroles:{},menu:{}};mstrmojo.plugins={};mstrmojo.AS={};mstrmojo.DI={controller:{},model:{},ui:{dialogs:{}}};mstrmojo.Refine={};mstrmojo.qb={bigquery:{},es:{},mdx:{},menu:{},thirdParty:{},s4hana:{},cc:{},};mstrmojo.rb={loaders:{}};mstrmojo.WH={};mstrmojo.fe={};mstrmojo.txEditor={};mstrmojo.condTx={};mstrmojo.threshold={};mstrmojo.express={ui:{}};mstrmojo.rw={model:{},xtab:{}};mstrmojo.util={ui:{}};mstrmojo.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{nativebar:{}}},selectors:{},ui:{},nativedialog:{}};mstrmojo.mobile={vi:{ui:{rw:{xtab:{}}}},kpicard:{},mapbox:{},customviz:{},netviz:{},gm:{},ngm:{},gmaps:{layer:{mapbox:{}}},ag:{ui:{}},ui:{}};mstrmojo.vi={controllers:{},factories:{},models:{editors:{},validation:{}},enums:{},ui:{menus:{},editors:{fe:{},cm:{},nlp:{},user:{},ai:{},cf:{}},rw:{selectors:{},xtab:{}},tabs:{},toolbars:{}},viz:{},util:{}};mstrmojo.ag={models:{editors:{},template:{}},ui:{},chart:{}};mstrmojo.onetier={controllers:{},vi:{acl:{},prefs:{model:{}},ui:{}}};mstrmojo.config={vi:{},onetier:{}};mstrmojo.chart={common:{},enums:{},model:{enums:{}}};mstrmojo.nativeandroid={};mstrmojo.gm={touch:{}};mstrmojo.ngm={};mstrmojo.heatmap={vi:{}};mstrmojo.netviz={};mstrmojo.imagelayout={};mstrmojo.kpicard={layout:{},editors:{}};mstrmojo.surveys={};mstrmojo.iphone={};mstrmojo.winphone={};mstrmojo.mstr={search:{}};mstrmojo.mstr.ui={};mstrmojo.gmaps={basemap:{},graphic:{},geometry:{},layer:{svg:{},canvas:{},mapbox:{}}};mstrmojo.esrimap={};mstrmojo.mapbox={ui:{selectors:{}}};mstrmojo.examples={};mstrmojo.home={controllers:{},models:{},views:{},ui:{}};mstrmojo.workstation={pages:{}};mstrmojo.timefilter={};mstrmojo.pendo={};mstrmojo.err=function D(I,H){var G=I.name+': "'+I.message+'"';if(mstrmojo.debug){if(I.fileName){G+=" at\n    "+I.fileName;}if(I.hasOwnProperty("lineNumber")){G+=": "+I.lineNumber;}else{if(I.hasOwnProperty("line")&&I.sourceURL){var F=I.sourceURL.split("/");G+="("+F[F.length>1?F.length-1:0]+":"+I.line+")";}}}this.dbg(G);if(mstrmojo.Dialog){mstrmojo.error({longDesc:I.message,code:I.code},H,{title:I.name});}else{window.alert(G);}};mstrmojo.confirm=function B(F){return window.confirm(F);};mstrmojo.alert=function E(F){window.alert(F);};var C=!!(/return true/.test(String(function(){return true;})));mstrmojo.mixin=function A(J,H){if(J){H=H||{};var I=/this\.\_super/;var G=function(N,M){return function L(){var P=this._super;this._super=M;var O=N.apply(this,arguments||[]);this._super=P;return O;};};var F=J.__onmixin__;if(F){delete J.__onmixin__;}var K;for(K in J){if((typeof J[K]==="function")&&(!C||I.test(J[K]))){H[K]=G(J[K],H[K]);}else{H[K]=J[K];}}if(F){J.__onmixin__=F;}}return H;};}());(function(){var $XHR;var NEW_FORMAT_JS_REGEX=/\/plugins\/.+\/formatPanelBundles\/format\.js$/;var $MISSING={};var getApp=function(){return mstrmojo.global.mstrApp||{};},getJsRoot=function(){return getApp().jsRoot||"../javascript/";},getJsBundlesRoot=function(){return getJsRoot()+"bundles/";},getJsMojoRoot=function(){return getApp().jsMojoRoot||"../javascript/mojo/js/source/";},getPluginRoot=function(){return getApp().pluginRoot||(mstrConfig&&mstrConfig.pluginRoot)||"../plugins/";},getPluginMojoRoot=function(){return getApp().pluginMojoRoot||getJsMojoRoot();},isIE=!!document.all;function getXHR(){$XHR=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function shouldSkipError4Path(filePath){if(typeof filePath!=="string"){return false;}return !!filePath.match(NEW_FORMAT_JS_REGEX);}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){if(params.hasOwnProperty(p)){url[++x]=p+"="+encodeURIComponent(params[p]);}}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!$XHR){getXHR();}if($XHR){try{var m=null,app=window.mstrApp;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(app&&app.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}$XHR.open(method,appendUrlParams(method,baseUrl,params),false);$XHR.setRequestHeader("X-Requested-With","XMLHttpRequest");if(method!=="POST"){params=null;}else{params=encodeParams(params);$XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");}$XHR.send(params);result=$XHR.responseText||null;}catch(localerr){if(window.console){window.console.log(localerr);}}}return result;}var evalCounter=0;function _jsGet(file,nullCheck){var js=mstrmojo.loadFileSync(file);if(js&&!mstrmojo.dynamicBundleUtils.unitTestMode){var scriptTag=document.createElement("script");scriptTag.innerHTML=js;document.head.appendChild(scriptTag);return nullCheck?!!verifyJsLoaded(nullCheck):true;}else{if(js){try{eval('"mojo: _jsGet. '+file.substr(file.length-25,25)+'";');}catch(err){}try{eval(js);mstrmojo.dynamicBundleUtils.outputEvalWarn("eval in _jsGet is called: ",file);return nullCheck?!!verifyJsLoaded(nullCheck):true;}catch(localerr){if(shouldSkipError4Path(file)){return false;}window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}}return false;}mstrmojo.requiresBundle=function reqBundle(bundleNames){var bundles=(bundleNames||"").split(",");return bundles.every(function(bundleName){bundleName=getJsBundlesRoot()+bundleName.trim();var loaded=reqCache[bundleName]||mstrmojo.dynamicBundleUtils.isBundleLoaded(bundleName);if(!loaded&&_jsGet(bundleName)){reqCache[bundleName]=true;loaded=true;}return loaded;});};mstrmojo.requiresDepLib=function requiresDepLib(file,AMD){if(reqCache[file]||mstrmojo.dynamicBundleUtils.isBundleLoaded(file)){return true;}function isAMD(){return"function"===typeof define&&define.amd;}var AMDCache=window.define;if(!AMD&&isAMD()){delete window.define;}var value=_jsGet(file);reqCache[file]=true;window.define=AMDCache;return value;};mstrmojo.loadFileSync=function loadFileSync(file){var result=null;if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",mstrmojo.util.version.getResourcePathWithVersion(file),false);$XHR.setRequestHeader("X-Requested-With","XMLHttpRequest");$XHR.send(null);if($XHR.status===200||$XHR.status===0){result=$XHR.responseText||null;}}catch(localerr){}if(!isIE&&$XHR.abort){$XHR.abort();}}return result;};mstrmojo.loadScript=function loadScript(file,onload,onerror){var script=document.createElement("script");script.onload=function(){if(onload){onload();}};script.onerror=function(){if(onerror){onerror("Failed to load: "+file);}};script.src=file;document.head.appendChild(script);};mstrmojo.insertCSSLinks=function insertCSSLinks(files,onLoadFn){var css,firsthead;if(files&&files.length>0){firsthead=document.getElementsByTagName("head")[0];files.forEach(function(file){css=document.createElement("link");css.setAttribute("id",file.replace(/[^a-zA-Z0-9]/g,""));css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",file);if(onLoadFn){css.addEventListener("load",function(){onLoadFn(file);});}firsthead.appendChild(css);});}};mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var isLoaded=!!verifyJsLoaded(fqcn);if(isLoaded){this.loaded[fqcn]=true;}return isLoaded;},load:function ld(fqcn){if($MISSING[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)||mstrmojo.dynamicBundleUtils.isBundleLoaded(this.fqcnToFile(fqcn))){return true;}if(_jsGet(this.fqcnToFile(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}$MISSING[fqcn]=true;return false;},fqcnToFile:function fqcnToFile(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17)),pluginFile=pluginName+"/javascript/"+getPluginMojoRoot()+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode()&&mstrConfig.dossierServerPluginNames&&mstrConfig.dossierServerPluginNames.indexOf(pluginName)>-1){fqcn=mstrApp.dossierServerBaseUrl+"plugins/"+pluginFile;}else{fqcn=getPluginRoot()+pluginFile;}}else{if(fqcn.match(/^mstrmojo\./)){fqcn=getJsMojoRoot()+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=getJsRoot()+fqcn.replace(/\./gm,"/");}}return fqcn+".js";},loadBundleWithCss:function loadBundleWithCss(jsClass,bundlePath,cssPaths,callback,onJsBundleLoaded){if(this.isLoaded(jsClass)){callback();return ;}var cbFn=function(){if((typeof onJsBundleLoaded!=="undefined")&&onJsBundleLoaded){onJsBundleLoaded();}if(cssPaths&&cssPaths.length){mstrmojo.insertCSSLinks(cssPaths,callback);}else{if(callback){callback();}}};if(mstrmojo.dynamicBundleUtils.isAsyncLoadingEnabled()){var allBundles={};allBundles[getJsBundlesRoot()+bundlePath]={type:mstrmojo.dynamicBundleUtils.BUNDLE_TYPE.BUNDLE};if(jsClass==="mstrmojo.threshold.ThresholdController"){allBundles[getJsRoot()+mstrmojo.dynamicBundleUtils.BUNDLE_PATH.NUMERAL]={type:mstrmojo.dynamicBundleUtils.BUNDLE_TYPE.DEPLIB,isAMD:false};}mstrmojo.dynamicBundleUtils.dynamicLoadAllScripts(allBundles,cbFn);}else{mstrmojo.requiresBundle(bundlePath);cbFn();}}};var $LOADER=mstrmojo.loader,isLoaded=$LOADER.loaded;var reqCache={},addPackagesToReqCache=function addPkg(n,ns){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!reqCache[s]){ns.push(s);reqCache[s]=true;}}},loadInputScripts=function loadInputScripts(ns){var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!$LOADER.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}};mstrmojo.requiresCls=function reqCls(){var argLen=arguments.length,ns=[],i,len;for(i=0,len=argLen;i<len;i++){var n=arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){addPackagesToReqCache(n,ns);}ns.push(n);reqCache[n]=true;}loadInputScripts(ns);return true;};mstrmojo.requiresClsP=function reqClsP(){var argLen=arguments.length,ns=[],pkgName=arguments[0],i,len;addPackagesToReqCache(pkgName,ns);for(i=1,len=argLen;i<len;i++){var n=pkgName+"."+arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){ns.push(n);reqCache[n]=true;}}loadInputScripts(ns);return true;};var $DESCRIPTORS=mstrmojo.descriptors,descPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];$DESCRIPTORS[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;populateDescriptors(mstrConfig.customDescs&&mstrConfig.customDescs.descriptors);mstrConfig.customDescs=null;}if(window.mstrApp!==undefined){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var requestDescriptor=function(prefix,ids){var ns=[],len=ids.length,i;var displayLocaleId=window.mstrApp&&window.mstrApp.displayLocaleId,isLibrary=window.mstrApp&&(window.mstrApp.isDossier===true||window.mstrApp.isDossier===false),isNativeEmbedded=window.mstrApp&&window.mstrApp.isNativeEmbedded;for(i=0;i<len;i++){var k=ids[i];if(k&&!($DESCRIPTORS.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var params={taskId:"getDescriptors",keys:ns.join(","),prefix:prefix};if((isLibrary||isNativeEmbedded)&&displayLocaleId){params.localeID=displayLocaleId;}var response=syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",params);if(response){var r=JSON.parse(response.replace(/\\'/g,"'"));populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var args=[].slice.call(arguments);args[0]=null;requestDescriptor(prefix,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice&&!mstrConfig.inExportService){requestDescriptor(descPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if($DESCRIPTORS.hasOwnProperty(descPrefix+descID)){return $DESCRIPTORS[descPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";$DESCRIPTORS[descPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if($DESCRIPTORS.hasOwnProperty(prefix+descID)){return $DESCRIPTORS[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";$DESCRIPTORS[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){isLoaded[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){reqCache[fqcn]=false;isLoaded[fqcn]=false;this.invalidateJsLoaded(fqcn);};var mx=mstrmojo.mixin;mstrmojo.declare=function declare(SuperCls,mixins,config){function Constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){Constr.prototype=new SuperCls({dontInit:true});Constr.prototype.constructor=Constr;}var proto=Constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){isLoaded[config.scriptClass]=true;}}return Constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getCSRFToken(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}if(this.isUrlExternal(url)){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>-1){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};mstrmojo.isUrlExternal=function isUrlExternal(url){var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf("?")===0||url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));return !isSameWebApp;};mstrmojo.resolveFeature=function resolveFeature(feature){var features=mstrApp.features;return features&&features[feature];};mstrmojo.getStyleRoot=function getStyleRoot(){var c=mstrConfig||{},styleRoot=c.styleRoot||"../style";return styleRoot;};mstrmojo.getJsRoot=getJsRoot;function verifyJsLoaded(name){name=name.trim();var path=name.split(".");var o=window;for(var i=0;i<path.length;i++){o=o[path[i]];if(!o){break;}}return o;}mstrmojo.invalidateJsLoaded=function invalidateJsLoaded(name){var path=name&&name.trim().split("."),len=(path&&path.length)||0,tmp=window,i;for(i=0;i<len-1;i++){if(!tmp){return ;}tmp=tmp[path[i]];}if(tmp&&path[i]){tmp[path[i]]=undefined;}};mstrmojo.util.version=mstrmojo.provide("mstrmojo.util.version",{getResourcePathWithVersion:function(filePath){var versionStr="";if(window.mstrConfig){if(mstrConfig.webVersion){versionStr="?v="+mstrConfig.webVersion+(filePath.indexOf("plugins/")>=0&&mstrConfig.appVersion?"&apv="+mstrConfig.appVersion:"");}}return filePath+versionStr;}});mstrmojo.dynamicBundleUtils={STATUS:{NOT_EXIST:0,LOADING:1,LOADED:2,LOAD_ERROR:3,LOAD_ERROR_SKIP:4},BUNDLE_PATH:{JSON_SCHEMA_VALIDATOR:"libraries/json-schema-validator.js",AG_GRID:"libraries/ag-grid-enterprise.min.js",AG_GRID_29_3_0:"libraries/ag-grid-enterprise.min.js",QUILL:"libraries/quill/quill.min.js",QUILL_CSS:"libraries/quill/quill.bubble.css",SPARKLINE:"libraries/jquery.sparkline.min.js",D3_V4:"libraries/d3.v4.js",NUMERAL:"libraries/numeral.js.2.0.6/numeral.min.js",DOSSIER_FORMAT:"dossier-format-react.js",VI_CUSTOMVIS:"vi-customvis.js",VI_DI:"vi-di.js",VI_GM:"vi-gm.js",NLP:"libraries/nlp_compromise.min.js",DOSSIER_REACT:"mstr-vi-react-main.js",FFLATE:"libraries/fflate.min.js",ARROW:"libraries/apache-arrow.min.js",},CSS_PATH:{VI_CUSTOMVIS:"mojo/css/vi-customvis.css",PLUGIN_GLOBAL:"style/global.css",PLUGIN_HTML5VIPAGE:"style/Html5ViPage.css",NGM:"../VisFramework/ngm/dist/css/ngm.css",VI_HEATMAP:"mojo/css/vi-heatmap.css",VI_NETWORK:"mojo/css/vi-network.css",VI_KPI:"mojo/css/vi-kpi.css",VI_ICONS:"mojo/css/font/vi/css/vi_icons.css"},BUNDLE_TYPE:{DEPLIB:1,BUNDLE:2,CLASS:3},bundleCache:{},scriptCache:{},evalCounter:0,unitTestMode:false,agGridLicenseHelper:function(){agGrid.LicenseManager.setLicenseKey("Using_this_{AG_Grid}_Enterprise_key_{AG-056165}_in_excess_of_the_licence_granted_is_not_permitted___Please_report_misuse_to_legal@ag-grid.com___For_help_with_changing_this_key_please_contact_info@ag-grid.com___{MicroStrategy_Incorporated}_is_granted_a_{Single_Application}_Developer_License_for_the_application_{TECH}_only_for_{50}_Front-End_JavaScript_developers___All_Front-End_JavaScript_developers_working_on_{TECH}_need_to_be_licensed___{TECH}_has_been_granted_a_Deployment_License_Add-on_for_{Unlimited}_Production_Environments___This_key_works_with_{AG_Grid}_Enterprise_versions_released_before_{27_April_2026}____[v3]_[01]_MTc3NzI0NDQwMDAwMA==02742ce74e90fc0de8165fccaa165052");},_removeCssRulesBySelectors:function removeCssRulesBySelectors(cssRules,selectors){for(var i=cssRules.length-1;i>=0;i--){const rule=cssRules[i];if(rule.selectorText&&selectors.includes(rule.selectorText)){rule.parentStyleSheet.deleteRule(i);}}},enableAGGridLegacyStyles:function(){try{var self=this;document.querySelectorAll('head style[data-ag-scope="legacy"]').forEach(function(style){if(style.disabled){style.disabled=false;}if(!style._deletedRules){style._deletedRules=true;var selectors=[".ag-cell-range-selected-1:not(.ag-cell-focus), .ag-cell-range-selected-1.ag-cell-range-chart, .ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing)",".ag-cell-range-selected:not(.ag-cell-focus), .ag-cell-range-selected.ag-cell-range-chart, .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing)",".ag-ltr .ag-cell-focus:not(.ag-cell-range-selected):focus-within, .ag-ltr .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected), .ag-ltr .ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group, .ag-ltr .ag-cell-range-single-cell, .ag-ltr .ag-cell-range-single-cell.ag-cell-range-handle, .ag-rtl .ag-cell-focus:not(.ag-cell-range-selected):focus-within, .ag-rtl .ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected), .ag-rtl .ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group, .ag-rtl .ag-cell-range-single-cell, .ag-rtl .ag-cell-range-single-cell.ag-cell-range-handle",".ag-row-hover.ag-row-selected::before",".ag-cell-inline-editing",".ag-spanned-cell-wrapper > .ag-spanned-cell",".ag-ltr .ag-cell",".ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left):not(.ag-cell-range-single-cell)"];self._removeCssRulesBySelectors(style.sheet.cssRules,selectors);}});}catch(e){}},disableAGGridLegacyStyles:function(){try{document.querySelectorAll('head style[data-ag-scope="legacy"]').forEach(function(style){style.disabled=true;});}catch(e){}},outputEvalWarn:function(content,fileName){if(this.isAsyncLoadingEnabled()||(window.localStorage&&!!parseInt(window.localStorage.getItem("mojoEnableEvalWarning")||0,10))){evalCounter++;console.warn(content+fileName+" "+evalCounter);}},initBundleCache:function(){var contextPath=window.dossierConfig&&window.dossierConfig.contextPath;if(!contextPath){return ;}var allScripts=document.getElementsByTagName("script"),LOADED=mstrmojo.dynamicBundleUtils.STATUS.LOADED,i,script,startIdx,endIdx,scriptKeyStr;for(i=0;i<allScripts.length;i++){script=allScripts[i];if(script.parentElement===document.head){startIdx=script.src.indexOf(contextPath);endIdx=script.src.indexOf("?");if(startIdx!==-1&&endIdx!==-1){scriptKeyStr=script.src.substring(startIdx,endIdx);this.bundleCache[scriptKeyStr]=LOADED;}}}},updateBundleCache:function(absolutePath){this.bundleCache[absolutePath]=mstrmojo.dynamicBundleUtils.STATUS.LOADED;},isAsyncLoadingEnabled:function(){var isLocalStorageFlagEnabled=!!parseInt((window.localStorage&&window.localStorage.getItem("mojoEnableAsyncScriptLoading"))||0,10),isFeatureEnabled=!!(window.dossierConfig&&window.dossierConfig.features&&window.dossierConfig.features["mojo-async-loading"]);return !this.unitTestMode&&(isLocalStorageFlagEnabled||isFeatureEnabled);},isBundleLoaded:function(file){return this.isAsyncLoadingEnabled()&&this.bundleCache[file]===this.STATUS.LOADED;},_loadSingleScript:function(file,onload,onerror){var utils=mstrmojo.dynamicBundleUtils,STATUS=utils.STATUS,script,onLoadWrapper=function(wrapFn){return function(){if(wrapFn){wrapFn();}utils.bundleCache[file]=STATUS.LOADED;if(onload){onload();}};},onErrorWrapper=function(wrapFn){return function(localError){if(wrapFn){wrapFn(localError);}utils.bundleCache[file]=STATUS.LOAD_ERROR;if(shouldSkipError4Path(file)){if(onerror){onerror(file,localError);}utils.bundleCache[file]=STATUS.LOAD_ERROR_SKIP;if(onload){onload();}return ;}utils.bundleCache[file]=STATUS.LOAD_ERROR;if(onerror){onerror(file,localError);}};};if(utils.bundleCache[file]===STATUS.LOADING){script=utils.scriptCache[file];if(script){var preOnload=script.onload,preOnerror=script.onerror;script.onload=onLoadWrapper(preOnload);script.onerror=onErrorWrapper(preOnerror);}else{window.alert("JavaScript loading error:\n\nFile: "+file+"\n\nError: no script tag found for this file");}}else{script=document.createElement("script");script.async=false;script.onload=onLoadWrapper();script.onerror=onErrorWrapper();script.src=mstrmojo.util.version.getResourcePathWithVersion(file);utils.bundleCache[file]=STATUS.LOADING;utils.scriptCache[file]=script;document.head.appendChild(script);}},dynamicLoadAllScripts:function(bundlesMap,callback,isAMDLoading){var utils=mstrmojo.dynamicBundleUtils,allBundleNames=[],callbackFired=false,bundleName,wrappedCb;var AMDBundlesMap={},hasAMDBundle=false,AMDCache;var specialFormatConfig=[],additionalLoadClasses=[];var currentIsAMD=function(){return"function"===typeof define&&define.amd;};var commonOnLoad=function(){if(!callbackFired){var allBundlesDone=true;for(bundleName in bundlesMap){if(!utils.bundleCache[bundleName]||utils.bundleCache[bundleName]===utils.STATUS.LOADING){allBundlesDone=false;break;}}if(allBundlesDone){callbackFired=true;if(!isAMDLoading){window.define=AMDCache;}if(specialFormatConfig.length>0||additionalLoadClasses.length>0){var toLoadBundles={},i;for(i=0;i<additionalLoadClasses.length;i++){toLoadBundles[$LOADER.fqcnToFile(additionalLoadClasses[i])]={type:utils.BUNDLE_TYPE.CLASS,fqcn:additionalLoadClasses[i]};}for(i=0;i<specialFormatConfig.length;i++){toLoadBundles[specialFormatConfig[i].bundleName]={type:specialFormatConfig[i].type,isAMD:specialFormatConfig[i].isAMD};}utils.dynamicLoadAllScripts(toLoadBundles,wrappedCb,false);}else{wrappedCb();}}}};var commonOnError=function(file,err){window.alert("JavaScript loading error:\n\nFile: "+file+"\n\nError: "+err.message);};var loadBundlesFn=function(bundles){if(!isAMDLoading){AMDCache=window.define;if(currentIsAMD()){delete window.define;}}bundles.forEach(function(b){var bundleObj=bundlesMap[b],originalRequiredClassList=bundleObj.requiredClassList,requiredClassList=originalRequiredClassList&&Array.from(new Set(originalRequiredClassList));if(requiredClassList){requiredClassList.forEach(function(cls){if(!$LOADER.isLoaded(cls)){additionalLoadClasses.push(cls);}});}if(bundleObj.fallbackFormatConfig&&utils.bundleCache[b]===utils.STATUS.LOAD_ERROR_SKIP){specialFormatConfig.push(bundleObj.fallbackFormatConfig);}});bundles.forEach(function(b){if(!utils.bundleCache[b]||utils.bundleCache[b]===utils.STATUS.LOADING){var onload,onerror;if(bundlesMap[b].onload){onload=function(){bundlesMap[b].onload();commonOnLoad.bind(b)();};}else{onload=commonOnLoad.bind(b);}if(bundlesMap[b].onerror){onerror=function(file,err){bundlesMap[b].onerror(file,err);commonOnError(file,err);};}else{onerror=commonOnError;}if(bundlesMap[b].fallbackFormatConfig){onerror=function(){specialFormatConfig.push(bundlesMap[b].fallbackFormatConfig);};}utils._loadSingleScript(b,onload,onerror);}else{commonOnLoad.bind(b)();}});};if(window.mstr_profile){mstr_profile.log({bundlesMap:bundlesMap});}if(!isAMDLoading){for(bundleName in bundlesMap){if(!!bundlesMap[bundleName].isAMD){hasAMDBundle=true;AMDBundlesMap[bundleName]=bundlesMap[bundleName];delete bundlesMap[bundleName];}}}if(hasAMDBundle){wrappedCb=function(){utils.dynamicLoadAllScripts(AMDBundlesMap,callback,true);};}else{wrappedCb=callback;}for(bundleName in bundlesMap){allBundleNames.push(bundleName);var bundleDetail=bundlesMap[bundleName];if(!utils.bundleCache[bundleName]||utils.bundleCache[bundleName]===utils.STATUS.LOADING){if(bundleDetail.type===utils.BUNDLE_TYPE.CLASS){if($LOADER.isLoaded(bundleDetail.fqcn)){utils.bundleCache[bundleName]=utils.STATUS.LOADED;}}else{if(reqCache[bundleName]){utils.bundleCache[bundleName]=utils.STATUS.LOADED;}}}else{if(utils.bundleCache[bundleName]===utils.STATUS.LOAD_ERROR){window.alert("JavaScript loading error:\n\nFile: "+bundleName+"\n\nError: loading failure for this file");}}}loadBundlesFn(allBundleNames);},loadCSSLinks:function loadCSSLinks(cssLinksArray){if(cssLinksArray&&cssLinksArray.length>0){var utils=mstrmojo.dynamicBundleUtils,notLoadedCSSLinks=cssLinksArray.filter(function(name){return !utils.bundleCache[name];});notLoadedCSSLinks.forEach(function(name){utils.bundleCache[name]=utils.STATUS.LOADING;});mstrmojo.insertCSSLinks(notLoadedCSSLinks,function(name){utils.bundleCache[name]=utils.STATUS.LOADED;});}},getCustomVisCssFiles:function getCustomVisCssFiles(visName){try{var customCssFiles=(typeof mstrConfig!=="undefined"&&mstrConfig.customCssFilesObj)||[];var customCssFilesWithoutCustomVis=(typeof mstrConfig!=="undefined"&&mstrConfig.customCssFilesObjWithoutCustomVis)||[];var filteredCssFiles=customCssFiles.filter(function(cssPath){return customCssFilesWithoutCustomVis.indexOf(cssPath)===-1;});var visPattern="/"+visName+"/";var matchedFiles=[];filteredCssFiles.forEach(function(cssPath){if(cssPath.indexOf(visPattern)!==-1){matchedFiles.push(cssPath);}});var finalFiles=[];var contextPath=mstrmojo.hash.walk("mstrdossier.dossierConfig.contextPath",window)||mstrmojo.hash.walk("dossierConfig.contextPath",window)||"";matchedFiles.forEach(function(cssPath){var fullCssPath=contextPath+"/"+cssPath;var cssLinkWithVersion=mstrmojo.util.version.getResourcePathWithVersion(fullCssPath);finalFiles.push(cssLinkWithVersion);});return finalFiles;}catch(e){return[];}},getCSSLink:function getCSSLink(path,visName){var CSS_PATH=mstrmojo.dynamicBundleUtils.CSS_PATH;var pluginRoot=mstrApp&&mstrApp.getPluginsRoot()||"../plugins/";var link;if(path===CSS_PATH.PLUGIN_GLOBAL||path===CSS_PATH.PLUGIN_HTML5VIPAGE){link=pluginRoot+visName+"/"+path;}else{link=mstrmojo.getJsRoot()+path;}return mstrmojo.util.version.getResourcePathWithVersion(link);}};mstrmojo.dynamicBundleUtils.initBundleCache();}());var isNode=function(){try{return this===global;}catch(A){return false;}};if(isNode()){module.exports=mstrmojo;
/* -- 
    Mojo JavaScript Library
    Copyright (C) 2026 Strategy Inc. All Rights Reserved. Confidential.
-- */
}mstrmojo.chart.model.enums.EnumDSSAxisName={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5,DssAxisDropZoneIndexRoot:8,DssAxisDropZoneIndexEnd:8+255,DssAxisDynamicShortcutRoot:300,DssAxisDynamicShortcutEnd:300+255};mstrmojo.ag.chart.EnumInlineChartType={BAR:"bar",SPARKLINE:"sparkline",TRENDBAR:"trendBar",BULLET:"bullet",PIE:"pie",BOXPLOT:"boxPlot"};mstrmojo.EnumDSSDisplayMode={RESERVED:0,GRID:1,GRAPH:2,ENGINE:3,TEXT:4,DATAMART:5,BASE:6,GRIDGRAPH:7,NONINTERACTIVE:8};(function(){mstrmojo.vi.ui._IsUnitContainerTitleBar=mstrmojo.provide("mstrmojo.vi.ui._IsUnitContainerTitleBar",{_mixinName:"mstrmojo.vi.ui._IsUnitContainerTitleBar",layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},xt:true},setDimensions:function A(D,C){return this._super("auto",C);},getTitleChildrenLayoutOffsets:function B(){return{h:0,w:12};}});}());mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5,TOC_CHAPTER:6,TOC_PAGES_LIST:7,VIZ_LAYER:8,VIZ_GALLERY:9,VIZ_PAGE_BY:10,REPORT_OBJECT_BROWSER:11};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.vi.enums.ParameterEnums={PARAMETER_PORTLET_NAME:"parametersList",NEW_ID_PLACE_HOLDER:"$GUID_135",EDITOR_TYPE:{INVALID:"invalid",VALUE:"value",ATTRIBUTE_ELEMENT:"attributeElement",OBJECT:"object",},PARAMETER_TYPE:{LONG:2,STRING:3,DOUBLE:4,DATE:5,OBJECT:6,ELEMENTS:7,EXPRESSION:8,BIG_DECIMAL:16},ALLOWED_VALUE_TYPE:{RESERVED:0,USER_INPUT:1,FIXED_LIST:2,RANGE:3},DATA_TYPE:{VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_DATE:7,VT_BSTR:8,VT_BOOL:11,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23},PARAM_DATA_TYPE_MAP:{2:3,3:8,4:5,5:7,7:13,16:8},PARAM_TYPE_SUBTYPE_MAP:{2:2562,3:2563,4:2564,5:2565,6:2566,7:2567,16:2571}};mstrmojo.mstr.EnumDSSXMLSemanticRoles={13:"date",14:"time",28:"email",29:"phoneno",33:"currency",36:"percentage",personRole:{ids:[22,23,24,25,26,27],name:"person"},newGeoRole:{ids:[2,3,4,5,6,7,8,9,10].concat(15),name:"geo"},};mstrmojo.vi.enums.EnumDSSAccessRightFlags={DssAccessRightReservedFlag:0,DssAccessRightBrowseFlag:1,DssAccessRightUseExecuteFlag:2,DssAccessRightReadFlag:4,DssAccessRightWriteFlag:8,DssAccessRightDeleteFlag:16,DssAccessRightControlFlag:32,DssAccessRightUseFlag:64,DssAccessRightExecuteFlag:128,DssAccessRightFullControlFlag:255,DssAccessRightInheritable:536870912,DssAccessRightAudit:1073741824,DssAccessRightAuditInheritable:1610612736};(function(){var E=new RegExp("^[A-Z0-9]{8}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{12}$","i");var A=2147483648;var G=Array.apply(null,Array(256)).map(function(I,J){return(J<16?"0":"")+J.toString(16).toUpperCase();});var F=(window.crypto&&window.crypto.getRandomValues)?function(){var I=new Uint32Array(4);window.crypto.getRandomValues(I);return{d0:I[0],d1:I[1],d2:I[2],d3:I[3]};}:function(){return{d0:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d1:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d2:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d3:Math.abs(Math.floor(Math.random()*A)^(+new Date()))};};function D(I){var M=I.d0,L=I.d1,K=I.d2,J=I.d3;return G[M&255]+G[M>>8&255]+G[M>>16&255]+G[M>>24&255]+G[L&255]+G[L>>8&255]+G[L>>16&15|64]+G[L>>24&255]+G[K&63|128]+G[K>>8&255]+G[K>>16&255]+G[K>>24&255]+G[J&255]+G[J>>8&255]+G[J>>16&255]+G[J>>24&255];}function H(){var I;if(window.crypto&&crypto.randomUUID){I=crypto.randomUUID().toUpperCase().replaceAll("-","");}return I;}mstrmojo.UUID=mstrmojo.provide("mstrmojo.UUID",{create:function C(I){var J;if(I){J=H();if(J){return J;}}return D(F());},isUUID:function B(I){return I&&E.test(I.toString());}});mstrmojo.UUID.EMPTY="00000000000000000000000000000000";}());mstrmojo.warehouse.EnumDatabaseType={SAP:1200,MSAS:1500,EssBase:1600,TM1:2900,XQuery:3000,SAPHana:4000,BDE:5400,SearchEngineSOLR:5500,Hive:3100,Impala:4100,SearchEngineSPLUNK:5600,Pig:6400,PHOENIX:6800,IBMBigInsights:700,Drill:7300,DB_TYPE_NEWDB_1:8100,SAPHANAMDX:18300,KYVOSMDX:18800,KYLIGENCEMDX:18900,DB_TYPE_NEWDB_5:8500,AzureCosmosDB:8700,StreamingDB:19100,PythonQuery:19500,};mstrmojo.ag.EnumSectionDisplayMode={RESERVED:0,COMPOUND_GRID:1,MICRO_CHART:2};mstrmojo.mstr.EnumDSSXMLObjectSubTypes={Unknown:-1,Reserved:0,Filter:256,CustomGroup:257,Template:512,ReportGrid:768,ReportGraph:769,ReportEngine:770,ReportText:771,ReportDatamart:772,ReportBase:773,ReportGridAndGraph:774,ReportNonInteractive:775,ReportCube:776,ReportIncrementalRefresh:777,ReportTransaction:778,ReportEmmaCube:779,ReportEmmaIncrementalRefresh:780,Metric:1024,SubtotalDefinition:1025,SystemSubtotal:1026,MetricDMX:1027,DssSubTypeMetricTraining:1028,DssSubTypeFactMetric:1033,Style:1536,AggMetric:1792,Folder:2048,Device:2304,Prompt:2560,PromptBoolean:2561,PromptLong:2562,PromptString:2563,PromptDouble:2564,PromptDate:2565,PromptObjects:2566,PromptElements:2567,PromptExpression:2568,PromptExpressionDraft:2569,PromptDimty:2570,PromptBigDecimal:2571,Function:2816,Attribute:3072,AttributeRole:3073,AttributeTransformation:3074,AttributeAbstract:3075,AttributeRecursive:3076,AttributeSmart:3078,Fact:3328,DimensionSystem:3584,DimensionUser:3585,DimensionOrdered:3586,DimensionUserHierarchy:3587,Table:3840,TablePartitionMD:3841,TablePartitionWH:3842,DatamartReport:4096,FactGroup:4352,Resolution:4864,AttributeForm:5376,FormSystem:5377,FormNormal:5378,Schema:5632,Format:5888,Catalog:6144,CatalogDefn:6400,Column:6656,PropertyGroup:6912,PropertySet:7168,DBRole:7424,DBRoleDataImport:7425,DBRoleOAuth:7427,DBRoleGenericDataConnector:7430,DBLogin:7680,DBConnection:7936,Project:8192,ServerDef:8448,User:8704,UserGroup:8705,Transmitter:8705,Configuration:9216,Request:9472,Search:9984,SearchFolder:10240,Datamart:10496,FunctionPackageDefinition:10752,Role:11008,RoleTransformation:11009,SecurityRole:11264,InBox:11520,InBoxMsg:11776,Consolidation:12032,ConsolidationManaged:12033,ConsolidationElement:12288,ScheduleEvent:12544,ScheduleObject:12800,ScheduleTrigger:13056,Link:13312,DBTable:13568,DBTablePMT:13569,TableSource:13824,DocumentDefinition:14080,ReportWritingDocument:14081,DocumentTheme:14082,ChatBot:14084,DrillMap:14336,DBMS:14592,MDSecurityFilter:14848,MonitorPerformance:15104,MonitorJobs:15105,MonitorUserConnections:15106,MonitorDBConnections:15107,PromptAnswer:15232,PromptAnswers:15360,PromptAnswerBoolean:15233,PromptAnswerLong:15234,PromptAnswerString:15235,PromptAnswerDouble:15236,PromptAnswerDate:15237,PromptAnswerObjects:15238,PromptAnswerElements:15239,PromptAnswerExpression:15240,PromptAnswerExpressionDraft:15241,PromptAnswerDimty:15242,PromptAnswerBigDecimal:15243,PromptAnswerInt64:15244,GraphStyle:15616,ChangeJournalSearch:15872,BlobUnknown:16128,BlobOther:16129,BlobImage:16130,BlobProjectPackage:16131,BlobExcel:16132,BlobHTMLTemplate:16133,DashboardTemplate:16384,Flag:16640,ChangeJournal:16896,ExternalShortcutUnknown:17152,ExternalShortcutURL:17153,ExternalShortcutSnapshot:17154,ExternalShortcutTarget:17408,Reconciliation:17664,DerivedAttribute:3077,PaletteSystem:17920,PaletteCustom:17921,Thresholds:18432,UnstructuredData:23042,SubscriptionAddress:65281,SubscriptionContact:65282,SubscriptionInstance:65283};mstrmojo.timefilter.EnumDSSLastTimeFilterUnit={DssLastTimeFilterUnitSecond:1,DssLastTimeFilterUnitMinute:2};mstrmojo.customviz.CustomVisEnums={};mstrmojo.customviz.CustomVisEnums.LEGEND_PROPERTY_SET="sdk_legend";mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS={SHOW_LEGEND:"showLegend",LEGEND_BG_COLOR:"fillColor",LEGEND_BG_FILL_TRANSPARENCY:"fillAlpha",LEGEND_FONT_SIZE:"fontSize",LEGEND_FONT_FAMILY:"fontFamily",LEGEND_FONT_COLOR:"fontColor",LEGEND_FONT_WEIGHT:"fontWeight",LEGEND_FONT_ITALIC:"fontItalic",LEGEND_FONT_UNDERLINE:"fontUnderline",LEGEND_FONT_LINE_THROUGH:"fontLineThrough",LEGEND_MODE:"mode",LEGEND_POSITION:"position",LEGEND_WIDTH_SCALE:"widthRatio"};mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_FORMATTING_PROPERTY=[mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS.LEGEND_FONT_COLOR,mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS.LEGEND_FONT_LINE_THROUGH,mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS.LEGEND_FONT_UNDERLINE,mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS.LEGEND_BG_COLOR,mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPS.LEGEND_BG_FILL_TRANSPARENCY];mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_PROPERTY_TYPE={showLegend:"Boolean",fontWeight:"Boolean",fontItalic:"Boolean",fontUnderline:"Boolean",fontLineThrough:"Boolean",fillAlpha:"Integer",mode:"Integer",position:"Integer",widthRatio:"Float"};mstrmojo.customviz.CustomVisEnums.DEFAULT_LEGEND_PROP_VALUE={defaultTheme:{showLegend:true,fillColor:"#EEEEEE",fillAlpha:0,fontSize:"8pt",fontFamily:"Open Sans",fontColor:"#3A3835",mode:1,position:2},classicTheme:{showLegend:true,fillColor:"#EEEEEE",fillAlpha:0,fontSize:"8pt",fontFamily:"Arial",fontColor:"#747474",mode:1,position:2}};mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_DATA_TYPE={COLOR_BY:1,SIZE_BY:2};mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_DISPLAY_MODE={RESTORED:1,MINIMIZED:2};mstrmojo.customviz.CustomVisEnums.ENUM_LEGEND_SLOT={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.customviz.CustomVisEnums.ENUM_FONT_STYLE={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){var B={NetworkVisualizationStyle:{b:"vi-network.js",s:"VisualizationServerJsonDataStyle",c:"netviz.VisNetwork",oivmb:"oivm-network.js",vib:"vi-network.js"},ReportTimelineAjaxVisualizationStyle:{s:"TimelineMojoVisualizationDataStyle",c:"VisTimeline"},visAjaxDatePicker:{s:"AjaxDatePickerReportStyle",c:"VisDateSelection"},SurveyVisualizationStyle:{s:"VisualizationDataStyle",c:"SurveyVis"},KPICardVisualizationStyle:{b:"vi-kpi.js",s:"VisualizationServerJsonDataStyle",c:"kpicard.VisKPICard",lib:'[["libraries/echarts.common.min.js"],["libraries/slick/slick.min.js"]]'},VIHeatMapVisualizationStyle:{b:"vi-heatmap.js",s:"VisualizationServerJsonDataStyle",c:"heatmap.vi.VisHeatMap",oivmb:"oivm-heatmap.js",vib:"vi-heatmap.js"},GraphMatrixVisualizationStyle:{b:"vi-gm.js",s:"VisualizationServerJsonDataStyle",c:"gm.VisGraphMatrix",oivmb:"oivm-gm.js",vib:"vi-gm.js"},ESRIMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase",lib:'[["libraries/hammer.min.js"]]'},MapboxVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"mapbox.VisMapbox",lib:'[["libraries/mapbox/mapbox-gl.js"],["libraries/mapbox/supercluster.min.js"],["libraries/mapbox/turf.min.js"]]'},NewGraphMatrixVisualizationStyle:{b:"vi-gm.js,vi-ngm.js",s:"VisualizationServerJsonDataStyle",c:"ngm.VisNewGraphMatrix",lib:'[["../VisFramework/ngm/dist/bundle/ngm.js"]]',oivmb:"oivm-gm.js,oivm-ngm.js",vib:"vi-gm.js,vi-ngm.js"},GoogleMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase",lib:'[["libraries/hammer.min.js"]]'}};var E={"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer":"ESRIMapVisualizationStyle","com.microstrategy.web.vf.viewer.HeatMapApplicationViewer":"VIHeatMapVisualizationStyle","com.microstrategy.flex.viewer.GraphMatrixViewer":"GraphMatrixVisualizationStyle","com.microstrategy.flex.viewer.NewGraphMatrixViewer":"NewGraphMatrixVisualizationStyle","com.microstrategy.web.vf.viewer.DatePickerApplicationViewer":"visAjaxDatePicker","com.microstrategy.flex.viewer.NetViz":"NetworkVisualizationStyle"};mstrmojo.ExpressVisList=mstrmojo.provide("mstrmojo.ExpressVisList",{getVis:function D(F){return B[F]||(mstrConfig&&mstrConfig.pluginsVisList&&mstrConfig.pluginsVisList[F])||null;},findVisName:function(F){return E[F]||(mstrConfig&&mstrConfig.pluginsWidgetVisMap[F])||null;},findWidgetName:function C(H){var G;for(var F in E){if(E.hasOwnProperty(F)&&E[F]===H){G=F;break;}}if(!G&&mstrConfig&&mstrConfig.pluginsWidgetVisMap){for(var F in mstrConfig.pluginsWidgetVisMap){if(mstrConfig.pluginsWidgetVisMap.hasOwnProperty(F)&&mstrConfig.pluginsWidgetVisMap[F]===H){G=F;break;}}}return G;},getVisClass:function A(F,G){if(G.txi&&G.t===115){F=mstrmojo.DynamicClassFactory.newComponent(F,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab]);}return F;}});}());(function(){mstrmojo.requiresDescs(2121,2122,2125,2127,2123,2124,2126,2128,2129,2130);var A=mstrmojo.desc;mstrmojo.EnumSubtotals={};mstrmojo.EnumSubtotals.TYPES=[{n:A(2121,"Total"),v:-10},{n:A(2122,"Average"),v:-12},{n:A(2125,"Maximum"),v:-14},{n:A(2127,"Minimum"),v:-13},{n:A(2123,"Count"),v:-11},{n:A(2124,"Geometric Mean"),v:-20},{n:A(2126,"Median"),v:-16},{n:A(2128,"Mode"),v:-17},{n:A(2129,"Product"),v:-15},{n:A(2130,"Standard Deviation"),v:-18},{n:A(2132,"Variance"),v:-19}];mstrmojo.EnumSubtotals.CUSTOM_SUBTOTAL_TYPE=-9;mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_RESERVED=0;mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_FIRST=2;mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_LAST=3;mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_INHERIT=4;})();mstrmojo.vi.models.EnumPanelTypes={GENERIC:0,FILTERS:1,VIS_CONTENT:2,PAGEBY:3,VISUALIZATION:4};mstrmojo.vi.models.EnumPanelStackTypes={PANEL_STACK:0,SELECTOR_PANEL:1,FORM_PANEL:2};(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){mstrmojo.requiresDescs(2131,2122,2127,2125,9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,acceptFileTypes:".xls,.xlsx,.csv,.txt,.tsv,.prn,.json,.sas7bdat,.geojson,.kml,.xml",acceptFileTypesMatcher:/(\.xls|\.xlsx|\.csv|\.txt|\.tsv|\.prn|\.json|\.sas7bdat|\.geojson|\.kml|\.xml)$/i,importFileLimit:{MAX_FILE_SIZE:4*1024*1024},sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12,newDatasetImportSource:13,newDatasetRefreshData:14,autoModelImportSource:15,autoModelRefreshData:16,},ccActions:{data:1,logout:2},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048,linkedAttributes:4096,streamingInfo:1048576,cloudPathForLocalFile:2097152,},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,cloudConnector:600,kafka:500,realtime:432,dataModel:192|256,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"XML",v:"XML"},{n:"PARQ",v:"PARQUET",visible:false},{n:"DATA_LAKE_DELTA",v:"DELTA",custom:true},{n:"SHAREPOINT_LIST",v:"SHAREPOINT_LIST",visible:false,custom:true},{n:"XLS",v:"XLS",visible:false},{n:"XLSX",v:"XLSX",visible:false},{n:"ADOBE_ANALYTICS",v:"ADOBE_ANALYTICS",visible:false,custom:true},{n:"JIRA_CLOUD",v:"JIRA_CLOUD",visible:false,custom:true},],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18,dbRoleOAuth:19,ccOAuth:20},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,mstrConnector:25,dbRoleOAuth:26,s4hana:27,amazonS3:28,azureDataLake:29,ccOAuth:30,googleCloudStorage:31,bw4hana:32,sapBW:33,sapECC:34,salesforceSandbox:35,python:36,kafka:37,sharepointAndOneDrive:38,adobeAnalytics:39,pythonQuery:40,jiraCloud:41,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,s4hana:393217,bw4hana:393218,sapBW:393219,sapECC:393220,python:458753},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,mstrConnector:21,s4hana:22,amazonS3:23,azureDataLake:24,googleCloudStorage:25,bw4hana:26,sapBW:27,sapECC:28,financialforce:29,veevacrm:30,servicemax:31,nativeSDKConnector:32,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32,s4hana:33,cloudConnector:34,python:35,main:39},dbRoleType:{DssDBRoleReserved:0,DssDBRoleNormal:1,DssDBRoleDataImport:2,DssDBRoleDataImportPrimary:3,DssDBRoleOAuth:4,DssDBRoleRemoteDataSource:5,DssDBRoleURLAuth:6,DssDBRoleGenericDataConnector:7,DssDBRoleDataImportServer:8,DssDBRoleCloudElement:9,DssDBRoleScript:10},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544,objectNotFound:-2147216373,clientSecretNotFound:-2147180962,retrieveRefreshTokenFailed:-2147202857,cancelPublishFailed:-2147463843,invalidArgumentError:-2147024809,accessDenied:-2147214570,driverDisabled:-2147464166,driverRetired:-2147464165,},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44,DESCRIPTION:45,EDIT_PROJECT_ATTRIBUTE:46,LINK_TO_EVENT_HIER:47,REPLACE_IN_EVENT_HIER:48,INHERIT_SECURITY_FILTER:49,AGGREGATE_BY:50,AGGREGATE_ON_EVENT_TIME:51,REMOVE_SECURITY_FILTER:52,},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},eventHierType:{NORMAL:0,REALTIME:1,EVENTTIME_LINKED_TO_NORMAL:2,EVENTTIME_NO_LINK:3,},aggByTypes:[{n:mstrmojo.desc(2131,"Sum"),v:-10},{n:mstrmojo.desc(2122,"Average"),v:-12},{n:mstrmojo.desc(2127,"Minimum"),v:-13},{n:mstrmojo.desc(2125,"Maximum"),v:-14}],idFormGuid:"45C11FA478E745FEA08D781CEA190FE5",columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38,objectDescDialog:39,mstrConnectorConfigDialog:40,nativeSDKConnectorOAuthConfigDialog:41,sharepointFilesConfigDialog:42,salesforceEnvironmentDialog:43,workdayConfigDialog:44,inheritSecurityFilter:45,},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned",IMPORTED_DATA_CHANGED:"importedDataChanged"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},displayOption:{relational:1,mdx:2,SearchEngine:4,webServices:8,bigData:16,hadoop:32},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,MEMSQL:6700,URL:7700,newConnector:7900,LOCALFILE:8200,SAPHANAMDX:18300,SNOWFLAKE:7600,SAPS4HANA:11300,SAPBW4HANA:11500,SAPBW:13700,SAPECC:13800,MicrosoftDynamics365:13900,STARBURST:14200,CLOUD_GATEWAY_S3:18500,CLOUD_GATEWAY_ADLS2:18600,CLOUD_GATEWAY_GCS:18700,KYVOSMDX:18800,KYLIGENCEMDX:18900,KAFKA:19100,TRINO:14300,CLOUD_GATEWAY_SHAREPOINT_ONEDRIVE:19300,CLOUD_GATEWAY_ADOBE_ANALYTICS:19400,PYTHON_QUERY:19500,CLOUD_GATEWAY_JIRA:19600,STRATEGY:15500,},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232,268],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},formCategoryName:{ID:"ID",DESC:"DESC",GEOMETRY:"Geometry"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",s4AuthDBMSId:"E4A10C0974334E5F985F941A78E43987",bw4AuthDBMSId:"CAEDBBE4FF43473A932592DD58034DF7",sapBWAuthDBMSId:"F51360595B6A4A49A3576479BC358E58",sapECCAuthDBMSId:"4E9D233B34134347A5C61AC5D1CBBE91",dbms:{Azure_DW:"19AF6FB465F04552A872D7FB5CC79952",cloudGatewayS3:"CD24C7F473194C5984A0B2F8AEF688F7",cloudGatewayGCS:"0ED3A7C42FF3452ABB22F0E18297E98C",cloudGatewayADLS2:"D649DA37F4514289AA44D93B128F3BD5",GoogleBigQuery:"FA1A3DF8333141AF9DC87B30B91F6401",Snowflake:"86AC7FD44D2B4B0FB65AE948EF19BDD0",SQLDataBaseforWindowsAzure:"68CD44338CF911D5801122C04F780609",MicrosoftDynamics365:"3531E703AC1A4646A76993D0EE60AC64"},hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},shouldHideTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&!mstrApp.isPopup&&!A;},setNativeWindow:function(C,F){var B=1010,E=552,D=parseInt(C,10),A=parseInt(F,10);if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,UNAME:1,OAUTH:2,CC:3},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",UNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL=",CC:"AuthMode=CC;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},scheduleTemp:{CUSTOM:"Custom",EXISTED:"Existed",NONE:"None"},clockMode:[{n:"AM",v:"am"},{n:"PM",v:"pm"}],twelveHourOfDay:[{n:"12:00",v:"12:00"},{n:"1:00",v:"1:00"},{n:"2:00",v:"2:00"},{n:"3:00",v:"3:00"},{n:"4:00",v:"4:00"},{n:"5:00",v:"5:00"},{n:"6:00",v:"6:00"},{n:"7:00",v:"7:00"},{n:"8:00",v:"8:00"},{n:"9:00",v:"9:00"},{n:"10:00",v:"10:00"},{n:"11:00",v:"11:00"},],mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-TIBCODataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-TIBCODataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",158:"ds-CDataOData",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",197:"ds-Starburst",200:"ds-Trino",201:"ds-PalantirFoundry",202:"ds-SAP",},dbId:{WebServices:15,GBQ_JDBC:157,SalesforceSOQL:179,DATABRICKS:196,CDataOData:158,IBMNPS:171,IBMNPS_JDBC:172,SQLServer:10,SQLServer_JDBC:59,PostgreSQL:6,PostgreSQL_JDBC:65,MEMSQL:77,MEMSQL_JDBC:88,},TREE_SPLIT_CHARACTER:".",dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database","BigData","Hadoop"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",SAMPLE_FILE:"sampleFile",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},salesforceEnvironmentIDP:{3:4,35:5,},salesforceDBRoleID:{0:"AC41E217C55342DC871C511E77EBE4D0",3:"136A993630BE4A72B6E24C8029DC7FEE",35:"B1FC634FBB214FF8884C0ADEBED36AA0"},oAuthSourceStaticDBRoleID:{GOOGLE_DRIVE:"4FC38D1FC0E140EB8FCD2CBAA235E1DE",DROPBOX:"897B0012B9A24BF9AB297BA654F21482",},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},ObjectType:{REPORT:3,ATTRIBUTE:12,},DSSSubType:{DSSSUBTYPEREPORTCUBE:776,DSSSUBTYPEREPORTEMMACUBE:779,DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076,DSSSUBTYPEATTRIBUTETIMEZONE:3078},DSSExType:{DSSEXDISPARK:416,DSSAUTOMODEL:448,DSSLIVECUBE:4097,},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},privileges:[17,23,41,57,58,112,122,163,164,171,201,218,223,224,232,233,239,252,257,297,303,],featureFlags:["5244A2433B504C3E85B50BB6EDA00E25","B60F88B80B4047AEBEE09A36D0E36D65","CCAC5160463E472469A588A63C883C82","2371D5E44A5FC386EF4FD68BBF159EE8","E225A58949E710C617BE2898ADE43F7D","56E1B07D46C6E39177BDEA9DA22B6A6D","18A5C9D3A4C6492CA816ED911A3FA3C0","29B3C7B149A0C7223A0AB2BAE094A89F","AFF68FAF4E43B45B9CE685942F616931","0FE28102C6D444DB920586EDD3682E31",],Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,},fileTypesDesc:{DB_FILE_TYPE_EXCEL:"DB_FILE_TYPE_EXCEL",DB_FILE_TYPE_CSV:"DB_FILE_TYPE_CSV",DB_FILE_TYPE_HTML:"DB_FILE_TYPE_HTML",DB_FILE_TYPE_JSON:"DB_FILE_TYPE_JSON",DB_FILE_TYPE_SAS:"DB_FILE_TYPE_SAS"},mimeType:{JSON:"application/json",},autoModelBackendFileTypes:{JSON:"json",},FormThatDisableGeo:{Latitude:"Latitude",Longitude:"Longitude",Geometry:"Geometry"},DSSViewMedia:{dssViewMediaAvailablePushDataAPI:1048576,dssViewMediaAvailableServeAsModel:65536,dssViewMediaExportTablet:262144},multiSheetFileTypes:["PARQUET","AVRO","ORC","JSON",],storageType:{CSV:"CSV",DATA_LAKE_DELTA:"DATA_LAKE_DELTA",MULTI_SHEET:"MULTI_SHEET",UNKNOWN:"UNKNOWN"},dbmsObjectsFetchedEvt:"serverDBMSObjectsFetched",nativeAppOAuth2Solution:{NOT_SUPPORTED:0,LOOPBACK_INTERFACE_REDIRECTION:1,MANUAL_COPY_PASTE:2},nativeSDKConnectorEvt:{MSTR_CONN_1ST_SAVE:"dbRole1stTimeSlientSave",NATIVESDK_DBROLE_FETCHED:"NativeSDKConnectorDBRolesFetched"},nativeSDKConnectors:{mstr:"F72DF5DBDBB44F85B8FC4218523CA398",surveyMonkey:"7EAF57EA11EB493A8E4EFF2050274D05",surveyGizmo:"EB6F5F098F2B4928AB34D8A9734237B8",box:"BD033C929B064691AB0B3040EEEAA49C",onedrive:"3BEC897ADE7C48E1A30DC3CAF4C8E58C",sharepointFiles:"2AB8423295094B6D998DB5E53371884A",workday:"E88B20C1F30443E0AA8DEA709F2356BC"},nativeAndManagedUrlDBRoleEvt:"nativeAndManagedDBRFetched",noGatewayAgentDBs:[15,41,32,157,127,128,86,87,151,180,39,183,210,37,38,36,170,195,196],mciDisabledDBs:[0,5,8,13,14,15,17,19,20,23,25,27,29,31,51,52,54,55,58,77,78,81,111,113,122,123,129,131,139,140,143,144,145,146,147,148,149,150,158,161,166,171,194],mciDisabledURLPatterns:[/.*?:\/\/127\.0\.0\.1/i,/.*?:\/\/localhost/i,/.*?:\/\/0\.0\.0\.0/i,/.*?:\/\/\[::\]/i,/.*?:\/\/0000::1/i,/.*?:\/\/2130706433/i],QBImportOptions:{HADOOP_FILES:"0",SELECT_TABLES:"1",BUILD_A_QUERY:"2",TYPE_A_QUERY:"3"},cancelStatus:{NOT_START:0,ON_LOADING:1,},hadoopGatewayFeature:"mstrApp.diParams.hadoopGatewayFeature",deploymentType:{OnPrem:0,MCI:1,MCP:2,MCE:3,MCG:4},cubeType:{dda:0,inmemory:1,optimizeDDA:2},VLDB_REPORT:"VLDB Report",LIVE_CONNECT_TABLE_CACHE_USAGE_NAME:"Live Connect Table Cache Usage",feature:{CC_TABLE_VERSIONS:"CC/TableVersions",FIPS:"features.enable-only-fips-gateways",PYTHON:"GD/PythonConnector",REALTIME_ANALYTICS:"GD/RealtimeAnalytics",WORKDAY:"GD/Workday",IAM:"GD/IAM",NEW_DATASET_MGMT:"NEW_DATASET_MGMT"},sensitiveFields:["REFRESHTOKEN","CLIENTSECRET","OAUTHREFRESHTOKEN","OAUTHCLIENTSECRET"],defaultScheduleTriggers:{0:"1F1CB6555A044B199CB320E8CCA0BE8A",1:"297A791FAA5A462EA92F925FC507521E",2:"473AC7C12B524BD9B7932D49565F1F2D",3:"6D12BF67BB324E358ECB9CDBB0A5EC6D",4:"BBB47C25619D4401B44DA06126927ADC",5:"0CDF19F6C327421C88BE1D0F87F1703C",6:"B585FB2A299E4D42B82713B31DFEF285",7:"ABBCC90BAC4B49E0A2F952CAE1B7FA29",8:"F64E91C4CE314BE79F23CCB9E9C7368D",9:"55558DC52B7942AF9528B93FB8E8729B",10:"C002B0F5E75C4958AAC472CE9E12FE50",11:"725649D3CC8E4E5CB608610A9DE56B4C",12:"F0D51E65224741F9BE95080CE4C54917",13:"FAE0B2D2844E4DBF89D8A1724F7BE36B",14:"24E7B18DDA1C4480AFC9A14B0D549927",15:"C90D253D749A4AD99126124C599B514D",16:"7835BCA90A3C464DAD2F7738927E9F6C",17:"A7C73679F727411EAC947E5AAF4CF6CF",18:"8CC62F71CC7B42C18D2D6A3E77A4B695",19:"43E72B80DEE844F9B779CF874A107ED2",20:"537DF2B73F324AE5A01AA95FBCA79FB4",21:"F56D5A0F76EB4F088B0128A3D404C399",22:"92A6AB9D954F40A8B8F7A50AC585753C",23:"ACD5F308B2D64D7C97057581AC2475DB"},Client:{MSTR_WEB:1,LIBRARY_WEB:2,DESKTOP:3,WORKSTATION:4,MICROSTRATEGY_APP:5},languageCode:{zh_TW:1028,da_DK:1030,de_DE:1031,en_US:1033,fr_FR:1036,it_IT:1040,ja_JP:1041,ko_KR:1042,nl_NL:1043,pl_PL:1045,ru_RU:1049,sv_SE:1053,zh_CN:2052,en_GB:2057,es_ES:3082},googleAnalyticsVersion:{UA:"UA",GA4:"GA4"},MSTR_OA_STORAGE_KEY:"MSTR_OA_STORAGE_KEY",});}());mstrmojo.vi.models.EnumCopyMoveTypes={FIELD:0,VIS:1,PANELSTACK:2,MIXED:3};mstrmojo.vi.enums.EnumExtendedPromptType={PARAMETER:1};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75,GRAPHMATRIXVERTICALHISTOGRAM:76,GRAPHMATRIXGRIDCHART:78,GRAPHMATRIXVERTICALBOXPLOT:79,GRAPHMATRIXHORIZONTALBOXPLOT:80,GRAPHMATRIXVERTICALWATERFALL:81,GRAPHMATRIXHORIZONTALWATERFALL:82,KPICARD:83,VERTICALSYNCHRONIZEDAXISBAR:84,HORIZONTALSYNCHRONIZEDAXISBAR:85,VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:86,VERTICALDUALAXISLINECHART:87,HORIZONTALDUALAXISLINECHART:88};var T=mstrmojo.vi.viz.EnumVisualizationTemplates;mstrmojo.vi.viz.EnumAggregatedVisTemplates={COMBOCHART:[T.GRAPHHORIZONTALBARDUALAXISCLUSTERED,T.GRAPHHORIZONTALBARDUALAXISABSOLUTE,T.GRAPHHORIZONTALLINEDUALAXISABSOLUTE,T.GRAPHHORIZONTALAREADUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISCLUSTERED,T.GRAPHVERTICALBARDUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISSTACKED,T.GRAPHVERTICALLINEDUALAXISABSOLUTE,T.GRAPHVERTICALLINEDUALAXISSTACKED,T.GRAPHVERTICALAREADUALAXISABSOLUTE,T.GRAPHVERTICALAREADUALAXISSTACKED,T.GRAPHCOMBINATIONBARAREADUALAXIS,T.GRAPHCOMBINATIONBARAREA],BUBBLECHART:[T.GRAPHMATRIXSCATTERCIRCLEMM,T.GRAPHMATRIXSCATTERGRIDCIRCLEAA,T.GRAPHMATRIXBUBBLECIRCLEMM,T.GRAPHMATRIXBUBBLEGRIDCIRCLEAA,T.GRAPHMATRIXSCATTERSQUAREAM,T.GRAPHMATRIXSCATTERSQUAREMM,T.GRAPHMATRIXSCATTERGRIDSQUAREAA,T.GRAPHMATRIXBUBBLESQUAREAM,T.GRAPHMATRIXBUBBLESQUAREMM,T.GRAPHMATRIXBUBBLEGRIDSQUAREAA],BARCHART:[T.GRAPHHORIZONTALBARCLUSTERED,T.GRAPHVERTICALBARCLUSTERED,T.GRAPHHORIZONTALBARABSOLUTE,T.GRAPHHORIZONTALBARPERCENT,T.GRAPHHORIZONTALBARSTACKED,T.GRAPHVERTICALBARABSOLUTE,T.GRAPHVERTICALBARPERCENT,T.GRAPHVERTICALBARSTACKED,],VERTICALBARCHART:[T.GRAPHMATRIXVERTICALBARAUTOMATIC],HORIZONTALBARCHART:[T.GRAPHMATRIXHORIZONTALBARAUTOMATIC],VERTICALCLUSTEREDBARCHART:[T.GRAPHMATRIXVERTICALBARCLUSTERED],VERTICALSTACKEDBARCHART:[T.GRAPHMATRIXVERTICALBARSTACKED],VERTICALPERCENTBARCHART:[T.GRAPHMATRIXVERTICALBARPERCENT],HORIZONTALCLUSTEREDBARCHART:[T.GRAPHMATRIXHORIZONTALBARCLUSTERED],HORIZONTALSTACKEDBARCHART:[T.GRAPHMATRIXHORIZONTALBARSTACKED],HORIZONTALPERCENTBARCHART:[T.GRAPHMATRIXHORIZONTALBARPERCENT],SYNCAXISBARCHART:[T.VERTICALSYNCHRONIZEDAXISBAR,T.HORIZONTALSYNCHRONIZEDAXISBAR,T.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR],MatrixBarCHART:[T.GRAPHMATRIXGRIDCHART],LINECHART:[T.GRAPHMATRIXVERTICALLINESTACKED,T.GRAPHMATRIXVERTICALLINECLUSTERED,T.GRAPHMATRIXVERTICALLINEPERCENT,T.GRAPHMATRIXHORIZONTALLINESTACKED,T.GRAPHMATRIXHORIZONTALLINECLUSTERED,T.GRAPHMATRIXHORIZONTALLINEPERCENT,T.GRAPHHORIZONTALLINEABSOLUTE,T.GRAPHVERTICALLINEABSOLUTE,T.GRAPHVERTICALLINESTACKED,T.GRAPHVERTICALLINEPERCENT,T.GRAPHMATRIXVERTICALLINEAUTOMATIC,T.GRAPHMATRIXHORIZONTALLINEAUTOMATIC],DUALAXISLINECHART:[T.VERTICALDUALAXISLINECHART,T.HORIZONTALDUALAXISLINECHART],PIECHART:[T.PIE,T.GRAPHMATRIXPIE,],RINGCHART:[T.RING,T.GRAPHMATRIXRING],AREACHART:[T.GRAPHHORIZONTALAREAABSOLUTE,T.GRAPHVERTICALAREAABSOLUTE,T.GRAPHVERTICALAREAPERCENT,T.GRAPHVERTICALAREASTACKED],STACKEDAREACHART:[T.GRAPHMATRIXVERTICALAREASTACKED,T.GRAPHMATRIXVERTICALAREAPERCENT,T.GRAPHMATRIXHORIZONTALAREASTACKED,T.GRAPHMATRIXHORIZONTALAREAPERCENT,T.GRAPHMATRIXVERTICALAREAAUTOMATIC,T.GRAPHMATRIXHORIZONTALAREAAUTOMATIC],ABSOLUTEAREACHART:[T.GRAPHMATRIXVERTICALAREACLUSTERED,T.GRAPHMATRIXHORIZONTALAREACLUSTERED],HISTOGRAM:[T.GRAPHMATRIXVERTICALHISTOGRAM,],BOXPLOT:[T.GRAPHMATRIXVERTICALBOXPLOT,T.GRAPHMATRIXHORIZONTALBOXPLOT],WATERFALL:[T.GRAPHMATRIXVERTICALWATERFALL,T.GRAPHMATRIXHORIZONTALWATERFALL]};mstrmojo.vi.viz.EnumVisualizationTemplatesName={};var V=mstrmojo.vi.viz.EnumVisualizationTemplatesName;V[T.GRID]=mstrmojo.desc(114,"Grid");V[T.GRAPHMATRIXVERTICALBARAUTOMATIC]=mstrmojo.desc(18354,"Vertical Bar Chart");V[T.GRAPHMATRIXHORIZONTALBARAUTOMATIC]=mstrmojo.desc(18356,"Horizontal Bar Chart");V[T.GRAPHMATRIXVERTICALBARCLUSTERED]=mstrmojo.desc(18357,"Vertical Clustered Bar Chart");V[T.GRAPHMATRIXHORIZONTALBARCLUSTERED]=mstrmojo.desc(18358,"Horizontal Clustered Bar Chart");V[T.GRAPHMATRIXVERTICALBARSTACKED]=mstrmojo.desc(18359,"Vertical Stacked Bar Chart");V[T.GRAPHMATRIXHORIZONTALBARSTACKED]=mstrmojo.desc(18355,"Horizontal Stacked Bar Chart");V[T.GRAPHMATRIXVERTICALBARPERCENT]=mstrmojo.desc(18362,"Vertical Percent Bar Chart");V[T.GRAPHMATRIXHORIZONTALBARPERCENT]=mstrmojo.desc(18360,"Horizontal Percent Bar Chart");V[T.VERTICALSYNCHRONIZEDAXISBAR]=V[T.HORIZONTALSYNCHRONIZEDAXISBAR]=V[T.HORIZONTALSYNCHRONIZEDAXISBAR]=mstrmojo.desc(18361,"Synchronized Axis Bar Chart");V[T.GRAPHMATRIXGRIDCHART]=mstrmojo.desc(18931,"Matrix Bar Chart");V[T.GRAPHCOMBINATIONBARAREADUALAXIS]=mstrmojo.desc(11824,"Combo Chart");V[T.GRAPHMATRIXVERTICALLINEAUTOMATIC]=V[T.GRAPHMATRIXHORIZONTALLINEAUTOMATIC]=mstrmojo.desc(8121,"Line Chart");V[T.VERTICALDUALAXISLINECHART]=V[T.HORIZONTALDUALAXISLINECHART]=mstrmojo.desc(19130,"Dual Axis Line Chart");V[T.GRAPHMATRIXVERTICALAREASTACKED]=V[T.GRAPHMATRIXHORIZONTALAREASTACKED]=mstrmojo.desc(15233,"Stacked Area Chart");V[T.GRAPHMATRIXVERTICALAREACLUSTERED]=V[T.GRAPHMATRIXHORIZONTALAREACLUSTERED]=mstrmojo.desc(15236,"Absolute Area Chart");V[T.GRAPHMATRIXPIE]=mstrmojo.desc(11823,"Pie Chart");V[T.GRAPHMATRIXRING]=mstrmojo.desc(8296,"Ring Chart");V.MapboxVisualizationStyle=V.GoogleMapVisualizationStyle=V.ESRIMapVisualizationStyle=mstrmojo.desc(7736,"Map");V.KPICardVisualizationStyle=mstrmojo.desc(15800,"KPI");V[T.GRAPHMATRIXVERTICALWATERFALL]=V[T.GRAPHMATRIXVERTICALWATERFALL]=mstrmojo.desc(5594,"Waterfall");V.VIHeatMapVisualizationStyle=mstrmojo.desc(11819,"Heat Map");V[T.GRAPHMATRIXBUBBLECIRCLEMM]=mstrmojo.desc(11822,"Bubble Chart");V[T.GRAPHMATRIXVERTICALHISTOGRAM]=mstrmojo.desc(350,"Histogram");V[T.GRAPHMATRIXVERTICALBOXPLOT]=V[T.GRAPHMATRIXHORIZONTALBOXPLOT]=mstrmojo.desc(3156,"Box Plot");V.NetworkVisualizationStyle=mstrmojo.desc(11827,"Network");V.AutoNarratives=mstrmojo.desc(28088,"Auto Narratives");mstrmojo.vi.enums.EnumParameterFetchInfo={ParameterFetchInfoBasic:1,ParameterFetchInfoGetElements:2,ParameterFetchInfoGetElementsAndBasic:3};mstrmojo.vi.enums.EnumDSSSmartAttribute={DssSmartAttributeReserved:-1,DssSmartAttributeBase:0,DssSmartAttribute15MinInterval:1,DssSmartAttribute30MinInterval:2,DssSmartAttributeHourInterval:3,DssSmartAttributeDayInterval:4,DssSmartAttributeWeekInterval:5,DssSmartAttributeMonthInterval:6,DssSmartAttributeQuarterInterval:7,DssSmartAttributeYearInterval:8,DssSmartAttributeHourOfDayGroup:9,DssSmartAttributeDayOfWeekGroup:10,DssSmartAttributeQuarterHourOfDayGroup:11,DssSmartAttribute1SecInterval:12,DssSmartAttribute5SecInterval:13,DssSmartAttribute15SecInterval:14,DssSmartAttribute30SecInterval:15,DssSmartAttribute1MinInterval:16,DssSmartAttribute5MinInterval:17,DssSmartAttributeLast:18};mstrmojo.vi.enums.EnumDSSTimeIntervalAttribute={DssSmartAttribute15MinInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute15MinInterval,DssSmartAttribute30MinInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute30MinInterval,DssSmartAttributeHourInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeHourInterval,DssSmartAttributeDayInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeDayInterval,DssSmartAttributeWeekInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeWeekInterval,DssSmartAttributeMonthInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeMonthInterval,DssSmartAttributeQuarterInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeQuarterInterval,DssSmartAttributeYearInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttributeYearInterval,DssSmartAttribute1SecInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute1SecInterval,DssSmartAttribute5SecInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute5SecInterval,DssSmartAttribute15SecInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute15SecInterval,DssSmartAttribute30SecInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute30SecInterval,DssSmartAttribute1MinInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute1MinInterval,DssSmartAttribute5MinInterval:mstrmojo.vi.enums.EnumDSSSmartAttribute.DssSmartAttribute5MinInterval};mstrmojo.vi.enums.EnumVisFilterType={KEEP_ONLY:0,ADV_QUALIFICATION:1,LINKING:2,DRILLING:3,DOSSIER_LINKING:4};(function(){mstrmojo.vi._MonitorsLayoutMode=mstrmojo.provide("mstrmojo.vi._MonitorsLayoutMode",{onLayoutModeChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("layoutModeChange",this.id,"onLayoutModeChange");}}});}());(function(){var A=400,B=1500;mstrmojo._CanHandleTwoClicks=mstrmojo.provide("mstrmojo._CanHandleTwoClicks",{firstClickTimeStamp:undefined,firstClickTarget:undefined,onclick:function(D){var E=new Date(),C=E.getTime();if(E-this.firstClickTimeStamp<B&&E-this.firstClickTimeStamp>A){D.secondTarget=D.getTarget();D.firstTarget=this.firstClickTarget;this.onTwoClicks(D);D.cancel();}else{this.firstClickTarget=D.getTarget();this.firstClickTimeStamp=C;}if(this._super){this._super(D);}},onTwoClicks:mstrmojo.emptyFn});}());mstrmojo.vi.enums.EnumFeatures={SUPPORT_RESPONSIVE:"support-responsive",LOCK_FILTER:"support-lock-filter",INFO_WINDOW:"support-info-window",APPLYING_ADDITIONAL_FILTER:"support-applying-additional-filter",PANEL_STACK:"support-dossier-panelstack",PANEL_STACK_COPY_MOVE:"support-dossier-panelstack-copy-move",X_PANEL_STACK_MOVE:"support-dossier-move-across-panelstack",SUPPORT_RESPONSIVE_RESIZING:"support-responsive-resizing",SUPPORT_GHOST_IMG:"support-ghost-img",SUPPORT_NLP:"use-natural-language",SUPPORT_CONDITION_METRIC:"support_condition_metric",USE_WORKSTATION_NAMING_STYLE:"use-workstation-naming-style",SUPPORT_TOC_UPDATEPOISITION:"support-toc-updatePosition",SUPPORT_LIVEMODE:"support-livemode",SUPPORT_FREE_FORM_LAYOUT:"support-free-form-layout",NUMBER_FORMATTING:"number-formatting",SAVE_ANALYSIS:"save-analysis",INSERT_NEW_METRIC:"insert-new-metric",DATA_ENGINE_VERSION:"data-engine-version",WEB_DRILL_AND_LINK:"web-drill-and-link",WEB_IMPORT_DATABASE:"web-import-database",APPSCHEMA:"enable-app-schema",USE_METRIC_EDITOR:"use-metric-editor",USE_SUPER_GRID:"use-super-grid",USE_SUPER_GRID_DEV:"use-super-grid-dev",USE_MICROCHART:"use-microchart",SUPPORT_METRICS_IN_ROWS:"support-metrics-in-rows",SUPPORT_MULTI_XTAB_DUPLICATE:"support-multi-xtab-duplicate",CREATE_APP_OBJ:"create-app-object",SUPPORT_AMSELECTOR:"support-amselector",DOSSIER_LINKING:"dossier_linking",TEXT_IMAGE_DOSSIER_LINKING:"text_image_dossier_linking",SET_ATTRIBUTEFORM_DISPLAY:"set-attributeform-display",CREATE_SURVEY:"create-survey",M2020_VERSION:"m2020-version",DUP_FIELD:"duplicate-field",DYNAMIC_SEL_AND_SORT:"dynamic-sel-and-sort",GRID_PROPERTY:"grid-Props",COMPOUND_GRID_LINKING:"compound-grid-linking",SUPPORT_DATA_SOURCE_STATE:"support-data-source-state",DOSSIER_LEVEL_FILTER:"dossier-level-filter",DOSSIER_PDF_TABLE_OF_CONTENTS:"dossier-pdf-toc",DOSSIER_PDF_GRID_PAGING_MODE:"dossier-pdf-grid-paging-mode",DOSSIER_REACT_FORMAT_PANEL:"show-react-dossier-format",PDF_SETTINGS_AT_DASHBOARD_LEVEL:"pdf-settings-at-dashboard-level",RICH_TEXT:"use-richtextbox",FILL_OPACITY:"fill-opacity",SHOW_VIEW_IN_LIBRARY:"show-view-in-library",SUPPORT_ANSWER_PROMPT_WITH_FILTER_PANEL_SELECTIONS:"support-answer-prompt-with-filter-panel-selections",MODIFY_ALLOW_HTML_CONTENT:"modify-allow-html-content",CREATE_HTML_CONTAINER:"create-html-container",ENCODE_HTML_CONTENT:"encode-html-content",SERVER_CAN_RESTRICT_HTML_CONTENT:"server-can-restrict-html-content",ALLOW_DOSSIER_TIMEZONE:"allow-dossier-timezone",SUPPORT_DEFAULT_PDF_EXPORT_OPTIONS:"features.supportDefaultPDFExportOptions",ALLOWED_EXPORT_FORMATS:"features.allowedExportFormats",ENABLE_SURVEY:"features.dossier-survey-widget",ENV_ALLOWS_CUSTOM_HTML:"features.dossier-custom-html-js",MAP_ESRI:"features.mapping-esri",MAP_GOOGLE:"features.mapping-google",MAP_MAPBOX:"features.mapping-mapbox",DOSSIER_STRICT_IMAGE_VALIDATION:"features.dossier-strict-image-validation",DOSSIER_TRANSACTION:"features.dossier-transaction",CONFIGURE_TRANSACTION:"configure-transactions",EXECUTE_TRANSACTION:"execute-transactions",TRANSACTION_NEW_ENTRYPOINT:"features.transaction-new-entrypoint",FORM_TRANSACTION:"features.form-transaction",NEW_FORM_TRANSACTION:"new-form-transaction",PYTHON_TRANSACTION:"features.python-transaction",SHOW_TXN_FIRST_USER_EXPERIENCE:"features.transaction-first-user-experience",SUPPORT_TRANSACTION_SLIDER:"support-transaction-slider",DRILL_IN_OUT:"drill-in-out",EDIT_IVE:"edit-ive",SHOW_TOTALS:"show-totals",USE_BASEORADV_THRESHOLD_EDITOR:"use-basoradv-threshold-editor",UNIT_LEVEL_FORMATTING:"unit-level-formatting",SUPPORT_ACROSS_PANEL_TARGET_SELECTION:"support-x-panel-target-selections",SUPPORT_COPY_MOVE_INFORMATION_WINDOW:"support-copy-move-information-window",USE_FILTER_ENHANCEMENT:"use-filter-enhancement",WEB_SORT:"web-sort",PREVIEW_FEATURES:"preview-features",ALLOW_REMOVE_FROM_GRID:"allow-remove-from-grid",REPORT_CONTEXTUAL_LINKING:"report-contextual-linking",TEMPLATE_SMARTATT_FORMAT:"template-smartatt-format",USE_SCRIPT_PYTHON:"use-script-python",DOSSIER_THEME:"features.dossierTheme.enabled",USE_AGGRID_V29_3_0:"use-ag-grid-v29_3_0",USE_AGGRID_SERVER_SIDE:"modern-grid-use-client-merge-cells",SUPPORT_REALTIME:"05317C94D0394702A6418C2375A217B2",SUPPORT_COPY_PASTE_FORMAT:"support-copy-paste-format",SUPPORT_AUTO_LAYOUT_MULTI_SELECTION:"support-auto-layout-multi-selection",SUPPORT_INSIGHTS_CATEGORY:"support-insights-category",PYTHON_REMOTE_EXECUTION:"features.python-remote-execution",TRUSTED_PYTHON_REMOTE_EXECUTION:"features.trusted.python-remote-execution",SUPPORT_PARAMETERS:"support-parameters",SUPPORT_DEFAULT_AI_CONFIG_SETTINGS:"support-default-ai-config-settings",SUPPORT_PARAMETERS_IN_FILTER_PANEL:"support-params-in-filter-panel",SUPPORT_AIBOT_INFO_SETTING:"support-aibot-info-setting",SUPPORT_FIXED_RATIO:"support-fixed-ratio",SUPPORT_AI_CREATE_PAGE:"support-ai-create-page",SUPPORT_TOC_ACL:"support-toc-acl",AI_CHATBOT:"0E07F4EDECD647A4B5C163ED2E7A904F",CONDITIONAL_FORMAT:"conditional-format",PUSH_DOWN_FILTER:"push-down-filter",SCOPE_FILTER:"scope-filter",SUPPORT_MODERN_GRID_ENHANCEMENTS:"support-modern-grid-enhancements",DISABLE_LEGACY_GRIDS:"disable-legacy-grids",MAKE_MODERN_GRID_DEFAULT:"make-modern-grid-default-viz",SUPPORT_AUTO_NARRATIVES:"support-auto-narratives",SUPPORT_ACTION_BUTTON:"features.support-action-button",CROSS_PROJECT_CONTEXTUAL_LINKING:"cross-project-contextual-linking",SUPPORT_MULTI_COLUMNSET_QUERY_DETAILS:"support-multi-columnset-query-details",SUPPORT_HTML_WHITELIST:"support-html-whitelist",SUPPORT_AUTO_MODEL_EDIT_REFRESH:"support-auto-model-edit-refresh",SUPPORT_COLUMN_LEVEL_FORMATTING:"support-column-level-formatting",SUPPORT_NO_DATA_MESSAGE:"support-no-data-message",SUPPORT_VIZ_TARGET_DDIC:"support-viz-target-ddic",SUPPORT_SELECTION_MODE_PER_TARGET:"support-selection-mode-per-target",SUPPORT_CANCEL_PROMPT:"support-cancel-prompt",SUPPORT_AGGRID_PREFETCH:"support-modern-grid-prefetch",SUPPORT_NEW_PADDING:"support-new-padding",SUPPORT_SUBTITLE_AND_TITLE_BUTTONS:"support-subtitles",SUPPORT_RADIUS_AND_SPACING:"support-radius-and-spacing",SUPPORT_NEW_DASHBOARD_SETTINGS:"support-new-dashboard-settings",SUPPORT_CONTAINER_SHADOW:"support-container-shadow",SUPPORT_ICS_HIDEMENU:"support-ics-hidemenu",SUPPORT_ADV_SUBTOTAL:"support-adv-subtotal",SUPPORT_PAGE_BACKGROUND_COLOR:"support-page-background-color",CANCEL_EXECUTION:"features.cancel-execution.enabled",CANCEL_REVERSE_UNDO_DASHBOARD_AUTHORING:"features.cancel-reverse-undo-dashboard-authoring.enabled",VIZ_BINARY_DATA:"viz-binary-data",DISPLAY_FONT_DIALOG:"displayMissingFontDialog",SUPPRESS_FONT_DIALOG_WEB:"suppress-missing-font-dialog",SUPPRESS_FONT_DIALOG:"features.suppressMissingFontDialog",CONTEXTUAL_LINKING_FILTER_MULTI_TARGETS:"contextual-linking-filter-multi-targets",MONO_FONTS_FALLBACK:"mono-fonts-fallback",DYNAMIC_SELECTION_ON_OBJECT_PARAMETER:"dynamic-selection-on-object-parameter",REACT_INTEGRATION_ENABLED:"features.react-integration-enabled",SUPPORT_PARALLEL_RENDERING:"749902F631724C9FBFB55A619C03727D",SELECTOR_PANEL:"selector-panel",SUPPORT_AUTHORING_SCALE:"support-authoring-scale",AUTHORING_SCALE:"features.supportAuthoringScale",JOINT_ELEMENT:"joint-element",SUPPORT_ENHANCED_KPI:"features.supportEnhancedKPI",SUPPORT_MULTIPLE_CARDS_ENHANCED_KPI:"support-multiple-cards-enhanced-kpi",SHOW_SELECTOR_ADVANCED_STYLING:"showSelectorAdvancedStyling",SELECTOR_ADVANCED_STYLING:"features.selectorAdvancedStylingEnabled",SELECTOR_ADVANCED_STYLING_WEB:"enable-selector-advanced-styling",SUPPORT_SELECTOR_FORMAT:"support-selector-format",SUPPORT_PAGE_BACKGROUND_IMAGE:"support-page-background-image",SUPPORT_MAXIMIZE_VIZ_MODE:"support-maximize-viz-mode",DATASET_PANEL_SHOW_LINK_MODEL:"dataset-panel-show-link-model",SUPPORT_HORIZONTAL_TOC:"support-horizontal-toc",SUPPORT_ADVANCED_DYNAMIC_TIME_RANGE_IN_FILTER_PANEL:"support-advanced-dynamic-time-range-in-filter-panel",SHOULD_LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY:"shouldLimitMdxIcsSingleSelectionOnly",LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY:"features.limitMdxIcsSingleSelectionOnly",LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY_WEB:"limit-mdx-ics-single-selection-only",MODERN_GRID_MAINTAIN_OUTLINE:"features.modern-grid-maintain-outline.enabled",MODERN_GRID_MAINTAIN_OUTLINE_WEB:"enable-modern-grid-maintain-outline",SUPPORT_AG_OUTLINE_SAVE:"support-ag-outline-save",MODERN_GRID_USE_NEW_LAYOUT_ALGORITHM:"modern-grid-use-new-layout-algorithm",SUPPORT_ASO_OBJECT_LINK:"support-aso-object-link",SUPPORT_GLOBAL_LEGEND:"features.supportGlobalLegend"};mstrmojo.vi.enums.DefaultFeatureValues={"features.mapping-esri":true,"features.mapping-google":true,"features.mapping-mapbox":true,"features.dossier-survey-widget":true,"features.dossier-custom-html-js":true,"features.dossier-strict-image-validation":false,"features.dossier-transaction":false,"features.transaction-first-user-experience":false,"features.transaction-new-entrypoint":false,"features.form-transaction":false,"features.python-transaction":true,"features.dossierTheme.enabled":false,"features.python-remote-execution":false,"features.trusted.python-remote-execution":false,"features.support-action-button":true,"features.allowedExportFormats":true,"features.react-integration-enabled":true,"features.supportAuthoringScale":true};mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeParameter:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){if(!mstrmojo.LoadedExternalJSURLs){mstrmojo.LoadedExternalJSURLs={};}var D={LOADING:0,LOADED:1};function C(G){if(G.substr(0,7)==="file://"){G=G.substr(7);}else{if(mstrApp.isSingleTier&&G.substr(0,4)!=="http"){G="http:"+G;}}return G;}window.LoadScriptsExternalJSCallback=function(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]={status:D.LOADED};mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;};if(!mstrmojo._LoadsScript){mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function A(H){if(!H){return false;}if(typeof this[H]==="function"){return true;}var G=this[H]||(this.methods&&(this.methods[H]||this.methods["*"]));if(typeof G==="string"){this.requiresCls(G);return typeof this[H]==="function";}return false;},requiresCls:function B(K,O){if(K){if(typeof K==="string"){K=[K];}mstrmojo.requiresCls.apply(mstrmojo,K);var G=this.constructor.prototype,I=G.mixins;if(!I){G.mixins={};I=G.mixins;}var N=mstrmojo.mixin,J,L;for(J=0,L=K.length;J<L;J++){var M=K[J];if(!I[M]){var H=mstrmojo.hash.walk(M,window);if(H){N(H,G);I[M]=true;if(H.__onmixin__){H.__onmixin__.apply(this,[]);}}}}if(O){O.apply(this,[]);}}},requiresContrib:function E(I,H){var G=this[I];if(G){var K,J=false;if(typeof G==="string"){K=mstrmojo.registry.ref(G);this[I]=K;J=true;}else{K=G;}if(K&&(J||H)){K.parent=this;if(K.startup){K.startup();}}return K;}return null;},requiresExternalScripts:function F(S,R,I){if(S&&S instanceof Array){if(S.length===0){if(R){R.call(I);}return false;}var L=S[0],Q=L&&L.url,O=mstrmojo.LoadedExternalJSURLs[Q],G=function(){S.splice(0,1);return this.requiresExternalScripts(S,R,I);}.bind(this);if(L&&L.forceReload===false&&O){if(O.status===D.LOADED){return G();}return O.onLoadedCallbacks.push(G);}var P=document.createElement("script"),J=!!document.all,M=L.onError;P.type="text/javascript";P.src=C(Q);if(M){P.onerror=function(){if(M&&M.callback&&I){M.callback.call(I,M.params);}};}var H=L.callbackParamName;if(!H){var K=function(){var X=mstrmojo.LoadedExternalJSURLs[L.url],W=X&&X.onLoadedCallbacks;X.status=D.LOADED;G();if(X&&W.length>0){var U=0;for(;U<W.length;U++){W[U]();}X.onLoadedCallbacks=[];}};if(J){P.onreadystatechange=function(){if(P.readyState==="loaded"||P.readyState==="complete"){P.onreadystatechange=null;P.onerror=null;K();}};}else{P.onload=function(){P.error=null;P.onload=null;K();};}}else{if(H.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var N=this;window.setTimeout(function(){N.requiresExternalScripts(S,R,I);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;P.src+="&"+H+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=S;mstrmojo._LoadsScript.callback=R;mstrmojo._LoadsScript.esScritsContext=I;}}mstrmojo.LoadedExternalJSURLs[Q]={status:D.LOADING,onLoadedCallbacks:[]};document.getElementsByTagName("head")[0].appendChild(P);}}});}}());(function(){mstrmojo.util.PlatformHelper=mstrmojo.provide("mstrmojo.util.PlatformHelper",{isLibraryConsumption:function F(){return window.mstrApp&&mstrApp.isDossier===true;},isLibraryAuthoring:function D(){return window.mstrApp&&mstrApp.isDossier===false;},isLibrary:function A(){return this.isLibraryConsumption()||this.isLibraryAuthoring();},isWorkstation:function H(){return window.mstrApp&&mstrApp.isSingleTier;},isWSLocalMode:function C(){return window.mstrApp&&mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode();},isWSLiveMode:function L(){return this.isWorkstation()&&!this.isWSLocalMode();},isAIBotAdvancedMode:function J(){return window.mstrApp&&mstrApp.isInAIBotAdvancedMode;},isAIDatasetCollectionMode:function B(){return window.mstrApp&&mstrApp.isInAIDataCollectionMode;},isUslBotEnabledAndHasPartiallyDumpedDataset:function K(){var N=mstrApp&&mstrApp.getRootController&&mstrApp.getRootController(),M=N&&N.docCtrl,O=M&&M.model;var P=O&&O.hasPartiallyDumpedDataset&&O.hasPartiallyDumpedDataset();return !!(window.mstrApp&&mstrApp.uslBotEnabled&&P);},isLibraryOrWS:function I(){return this.isLibrary()||this.isWorkstation();},isContextualLinkDisabledMode:function E(){return this.isPPTorExcelOfficeAddIn();},isPPTorExcelOfficeAddIn:function G(){try{if(window.parent&&window.parent.navigator&&window.parent.navigator.userAgent){return window.parent.navigator.userAgent.indexOf("MSTRPowerPoint")!==-1||window.parent.navigator.userAgent.indexOf("MSTRExcel")!==-1;}return false;}catch(M){return false;}}});})();(function(){var E=2147762227,A=2147762262,D=2147762890,B=2147762269;mstrmojo.RaErrorHandler=mstrmojo.provide("mstrmojo.RaErrorHandler",{embeddedErrStr:'<div class="{@cssClass}"><div class="error-content"><div class="text ra-limit-err-title" style="padding-top: 0">'+mstrmojo.desc(16605,"QueryEngine encountered error:")+'</div><div class="text">'+mstrmojo.desc(16606,"Maximum number of result rows retrieved per MDX Query was exceeded. Please filter your data.")+"</div></div></div>",handleRAPopUpError:function C(G){var F=parseInt(G.code,10)+4294967296;if(F!==E&&F!==A&&F!==B){if(F===D){var H={shortDesc:'<div style ="font-weight:bold">'+mstrmojo.desc(16605,"QueryEngine encountered error:")+"</div>",longDesc:mstrmojo.desc(16606,"Maximum number of result rows retrieved per MDX Query was exceeded. Please filter your data.")};mstrmojo.error(H);}else{mstrmojo.alert(G.message);}}}});}());mstrmojo.gmaps.MapEnums={};mstrmojo.gmaps.EnumBaseMapType={Reserved:"-1",Esri:"1",Google:"2",Image:"3",Mapbox:"4"};mstrmojo.gmaps.EnumDefaultMapStyle={Esri:"Light Gray Map",Google:"0",Image:"",Mapbox:"mapbox://styles/microstrategy/cj4fnd0xu1ax82rnuq287rwvu"};mstrmojo.gmaps.EnumLanguagePattern={"{name}":["coalesce",["get","name"],["get","name_en"]],"{name_en}":["coalesce",["get","name_en"],["get","name"]],"{name_en}\n{name}":["concat",["coalesce",["get","name_en"],["get","name"]],"\n",["coalesce",["get","name"],["get","name_en"]]]};mstrmojo.gmaps.EnumLanguageType={Local:"{name}",English:"{name_en}",Both:"{name_en}\n{name}"};mstrmojo.gmaps.LANGUAGE_TYPE_REG={Both:/\{name_en\}[\s\S]*\{name\}/};mstrmojo.gmaps.EnumGraphicType={Marker:"1",Bubble:"2",Area:"3",Density:"4",Path:"5"};mstrmojo.gmaps.EnumMarkerType={Pin:"1",Square:"2",Diamond:"3",Image:"4",Circle:"5"};mstrmojo.gmaps.EnumPolygonSource={Cloud:"1",Custom:"2",MapBoxPolygon:"3",MapboxCustomShape:"4"};mstrmojo.gmaps.EnumShapeType={polygon:"polygon",multiPolygon:"multipolygon"};mstrmojo.gmaps.EnumGeometryType={Point:"Point",Extent:"2",Polygon:"Polygon"};mstrmojo.gmaps.EnumExtraCfgTaskId={Esri:"getESRIExtraConfig",Google:"getGoogleExtraConfig"};mstrmojo.gmaps.EnumGlobalCfgName={Esri:"esriConfig",Google:"googleConfig"};mstrmojo.gmaps.EnumThresholdType={Default:-1,Number:2,Text:3,Image:4,Url:5,QuickSymbol:10};mstrmojo.gmaps.EnumPropertyType={applyThreshold:"at",clusterMode:"mc",clusterRadius:"cr",clusterMaxZoom:"cmz",shapeFile:"lid",mapStyle:"dv",languageType:"lang",themeType:"dms",markerType:"mtp",zoomSetting:"rosa",legendSwitch:"ls",tooltipSwitch:"ts",legendWidthScale:"lwr",imageUrl:"mstyl",needMapToolbar:"mt",attributeId:"atf",useAttributeForm:"af",showZoomBtns:"zb",showAffinityLines:"da",showArcsLines:"dal",maxLineThickness:"lwm",maxBubbleSize:"mbs",useAbsolute:"mss",customInfoWinTpl:"iwd",pathColor:"pcp",affinityLineGrid:"ag",collapseLegend:"clgd",legendSize:"lgds",satf:"satf",dm:"dm",mvo:"mvo",baseMapType:"bmt",editingLayerIdx:"elx",mapGeoExtent:"mext",graphicType:"gtp",layerName:"ln",layerIdx:"lx",isRemoved:"ird",isHidden:"ih",enableZoomThroughLayer:"eztl",minLayerZoomLvl:"minlzl",maxLayerZoomLvl:"maxlzl",freezePanAndZoom:"fpz",MAX_SIZE_TYPE:"maxst",MAX_SIZE_VALUE:"maxsv",MIN_SIZE_TYPE:"minst",MIN_SIZE_VALUE:"minsv",showMapLable:"mlb",mapLabelOnTop:"mlbt",distUnit:"mdu",geoAttribute:"ga",latitude:"lat",longitute:"lng",slice:"slc",angle:"amt",colorby:"cmt",sizeby:"smt",tooltip:"tooltip",geometry:"gmt",keepZoomAndPos:"kzp",zoomLevel:"mz",mapCenter:"mp",mapBearing:"mbr",mapPitch:"mpt",dirtyVp:"dirtyVp",plotMapBasedOn:"pmbo",tooltipForms:"ttpmf",colorByOpacity:"cbo"};mstrmojo.gmaps.EnumGeographicRole={EnumGeographicRoleNone:"0",EnumGeographicRoleCity:"1",EnumGeographicRoleState:"2",EnumGeographicRoleCountry:"3",EnumGeographicRoleLocation:"4",EnumGeographicRoleLatitiude:"5",EnumGeographicRoleLongitude:"6",EnumGeographicRoleOther:"7",EnumGeographicRoleZipCode:"8",EnumGeographicRoleCounty:"9",EnumGeographicRoleLastOne:"10",EnumGeographicRoleGeometry:"11"};mstrmojo.gmaps.EnumClusterMode={MOBILE_OFF:"0",MOBILE_ON:"1",ON:"2",OFF:"3",PIE:"4"};mstrmojo.gmaps.EnumZoomBehavior={Keep:"0",Automatic:"1"};mstrmojo.gmaps.EnumDistUnitType={KM:"0",Miles:"1"};mstrmojo.gmaps.EnumDataLabel={DATA_LABEL_SHOW:"dlShw",DATA_LABEL_SHOW_ALL:"dlShwAll",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",DATA_LABEL_FONT_HALO_COLOR:"dlFntHaloClr",DATA_LABEL_FONT_HALO_WIDTH:"dlFntHaloWidth"};mstrmojo.gmaps.EnumShapeFormatting={SHAPE_FORMAT_FILL_COLOR:"shapeClr",SHAPE_FORMAT_FILL_OPACITY:"shapeFillTrans",SHAPE_FORMAT_BORDER_COLOR:"shapeLineClr",SHAPE_FORMAT_BORDER_STYLE:"shapeLineStyle"};mstrmojo.gmaps.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gmaps.EnumDefaultShapeFormatStyle={FILL_COLOR:"#436CD3",FILL_OPACITY:"85",FILL_OPACITY_VALUE:"0.85",FILL_OPACITY_FACTOR_HOVER:0.75,FILL_OPACITY_FACTOR_UNSEL:0.5,BORDER_STYLE:mstrmojo.gmaps.EnumCombinedLineStyle.THIN,BORDER_STYLE_CIRCLE:mstrmojo.gmaps.EnumCombinedLineStyle.NONE,BORDER_COLOR:"#FFFFFF",BORDER_WIDTH:"1"};mstrmojo.gmaps.DEFAULT_DATA_LABEL_PROPS={dlShw:[0],dlShwAll:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[0]};mstrmojo.gmaps.EnumDataLabelShowOption={NONE:0,SHOW_TEXT:1,SHOW_VALUE:2,SHOW_BOTH:3};mstrmojo.gmaps.MarkerAlignOption={CENTER:0,TOP:1,LEFT:2,RIGHT:3,BOTTOM:4,TOP_LEFT:5,TOP_RIGHT:6,BOTTOM_LEFT:7,BOTTOM_RIGHT:8};mstrmojo.gmaps.EnumToolbarButtonType={DRILL:1,SINGLE_SELECT:2,RECTANGLE_SELECT:4,EDIT_INFO_WINDOW:8,CLEAR_ALL:16,AFFINITY:32,FREE_SELECT:64,CIRCLE_SELECT:128,ZOOM:256,LAYERS_SELECT:512,KEEP_ONLY:1024,EXCLUDE:2048,SHOW_DATA:4096,SEARCH_BAR:8192,MAP_STYLE:16384};mstrmojo.gmaps.EnumToolbarState={NORMAL:0,SINGLE_SELECT:1,RECTANGLE_SELECT:2,ZOOM:3,AFFINITY:4,FREE_SELECT:5,CIRCLE_SELECT:6,CLEAR_ALL:7,LAYERS_SELECT:8,MARKERTYPE:9,CLUSTER:10,MAP_TYPE:11};mstrmojo.gmaps.TARGET_MAPOPTIONS=1;mstrmojo.gmaps.TARGET_FORMATTING_LAYERS=2;mstrmojo.gmaps.SelectionHashType={PRIMARY:0,TEMPLATE_SELECTION:1,EDITING_LAYER:2,RMC_LAYER:3};mstrmojo.gmaps.EnumTransformState={ReadyToUse:-1,UseExistingLine:0,CrossFromExistingToNewLine:1,UseNewLine:2,CrossFromNewToExistingLine:3};mstrmojo.gmaps.EnumDrillLinkAnswerType={SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9};mstrmojo.gmaps.EnumMinSizeType={PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3};mstrmojo.gmaps.EnumMaxSizeType={AUTOMATIC:1,MANUAL:2};mstrmojo.gmaps.EnumDynamicZoomStatus={INIT:0,NO_GEO_ATTR:1,FIRST_ADD_GEO_ARR:2,FIRST_GEO_ADD_FINISHED:3};mstrmojo.gmaps.ZoomAnimationDelta=0.15;mstrmojo.gmaps.LAYER_INDEX_MAX=100;mstrmojo.gmaps.LASSOLAYER_ZINDEX=mstrmojo.gmaps.LAYER_INDEX_MAX+1;mstrmojo.gmaps.ZOOMBTN_ZINDEX=mstrmojo.gmaps.LAYER_INDEX_MAX+50;mstrmojo.gmaps.ENABLE_MAX_MIN_SIZE_CONTROL=true;mstrmojo.gmaps.EnumRenderMethod={svg:"svg",canvas:"canvas",mapbox:"mapbox"};mstrmojo.gmaps.EnumLayerZoneSource={DROP_ZONE:"dzpn",PROPERTY_PANEL:"pppn"};mstrmojo.gmaps.CustomShapeId="3000";mstrmojo.gmaps.MapStyleToolips={Basic:mstrmojo.desc(18348,"Make different land types pop with topography-based colors."),White:mstrmojo.desc(18339,"Stand out against a darker background."),Light:mstrmojo.desc(18342,"Display data on a gray color palette."),Dark:mstrmojo.desc(18346,"Match the map to a dark background."),Street:mstrmojo.desc(18344,"Highlight all street data for a classic navigational look."),Topographic:mstrmojo.desc(18349,"Show terrain and landscape details."),Physical:mstrmojo.desc(18350,"Show the Earth's features, like landscapes, mountains, deserts, rivers, lakes, and oceans."),Relief:mstrmojo.desc(18343,"Show the elevation and depression of a given area."),Satellite:mstrmojo.desc(18341,"Display what Earth looks like from outer space."),SatelliteStreet:mstrmojo.desc(18347,"Display what Earth looks like from outer space with street data."),Border:mstrmojo.desc(18351,"Only show geographic borders."),Focused:mstrmojo.desc(18336,"Focus only on the geographic area where you have data.")};mstrmojo.gmaps.STYLES_MAP={"mapbox://styles/microstrategy/cj4huc3z734b32sqpcyursd8s":"mapbox://styles/microstrategy/ck8zbihxj08ij1iqgj5g9tcf1","mapbox://styles/microstrategy/cj4fnd0xu1ax82rnuq287rwvu":"mapbox://styles/microstrategy/ck9i5q6ja1hsv1jphvxmqzrt5","mapbox://styles/microstrategy/cj8o35v4u8ayz2rqutqgwhvxp":"mapbox://styles/microstrategy/ck9i6pst74k6r1imxbfxq4rmh","mapbox://styles/microstrategy/cj4gonmj72rih2ss2n132hwla":"mapbox://styles/microstrategy/ck9i7d7l11m1s1ilzj8ieqqa5","mapbox://styles/microstrategy/cj4fdoz771jrx2rmhajhl8yxv":"mapbox://styles/microstrategy/ck9i9pa3j68ax1iml8bqyt1af","mapbox://styles/microstrategy/cj4gpwfca95l52so2gkz3y2is":"mapbox://styles/microstrategy/ckbiqy01o0f841imq8qtkvsj0","mapbox://styles/microstrategy/cj4grefys96zg2smv7okfp8c5":"mapbox://styles/microstrategy/ck9jelaz30qfr1io6mv3tnerp","mapbox://styles/microstrategy/cj4guy8nn2y7e2so0c9h2uiav":"mapbox://styles/microstrategy/ck9jhftrm0sxo1jpndrnww4rl","mapbox://styles/microstrategy/cj621ujgo32ve2rmpuxixebjq":"mapbox://styles/microstrategy/ck9jjrsqu007s1ip5lnukt0qp","mapbox://styles/microstrategy/cj4gnpv6t2r9m2rpe417d51s1":"mapbox://styles/microstrategy/ck9je20z80ppn1ipl3hgih06s"};mstrmojo.gmaps.MapboxKeyStyles={V7_DEFAULT:"mapbox://styles/microstrategy/cj4fnd0xu1ax82rnuq287rwvu",V8_DEFAULT:"mapbox://styles/microstrategy/ck9i5q6ja1hsv1jphvxmqzrt5",BORDER:"mapbox://styles/microstrategy/ckdgsxrq70j6g1jpcr6apfyp4",FOCUSED:"mapbox://styles/microstrategy/cke29lrdk0pkd19mjlevkrgug"};mstrmojo.gmaps.MAPBOX_FMTS_DEFAULT={fillColor:mstrmojo.gmaps.EnumDefaultShapeFormatStyle.FILL_COLOR,fillOpacity:0.85,strokeColor:mstrmojo.gmaps.EnumDefaultShapeFormatStyle.BORDER_COLOR,strokeWidth:parseInt(mstrmojo.gmaps.EnumDefaultShapeFormatStyle.BORDER_WIDTH),strokeOpacity:0.8,strokeColorSelection:"#000000",fillOpacitySelection:1,hoverOpacity:0.9};var MapboxGeoRoleBoundaryMapping={};MapboxGeoRoleBoundaryMapping[mstrmojo.gmaps.EnumGeographicRole.EnumGeographicRoleCountry]="adm0";MapboxGeoRoleBoundaryMapping[mstrmojo.gmaps.EnumGeographicRole.EnumGeographicRoleState]="adm1";MapboxGeoRoleBoundaryMapping[mstrmojo.gmaps.EnumGeographicRole.EnumGeographicRoleCounty]="adm2";MapboxGeoRoleBoundaryMapping[mstrmojo.gmaps.EnumGeographicRole.EnumGeographicRoleCity]="adm2";MapboxGeoRoleBoundaryMapping[mstrmojo.gmaps.EnumGeographicRole.EnumGeographicRoleZipCode]="pos4";mstrmojo.gmaps.MapboxGeoRoleBoundaryMapping=MapboxGeoRoleBoundaryMapping;mstrmojo.gmaps.MapboxV1ToV4BoundaryMapping={2101:"adm0",2102:"adm1",2103:"adm2",2104:"adm3",2105:"adm4",2106:"adm4",2107:"pos4"};mstrmojo.gmaps.EsriFieldType={esriFieldTypeBlob:0,esriFieldTypeDate:0,esriFieldTypeGeometry:0,esriFieldTypeGlobalID:0,esriFieldTypeGUID:0,esriFieldTypeOID:0,esriFieldTypeRaster:0,esriFieldTypeString:0,esriFieldTypeXML:0,esriFieldTypeDouble:1,esriFieldTypeInteger:1,esriFieldTypeSingle:1,esriFieldTypeSmallInteger:1};mstrmojo.gmaps.EnumFeatureFlags={ftFgGrpA:{EsriMapArcGISV4:1}};mstrmojo.gmaps.MapboxShapes=[{desc:mstrmojo.desc(27727,"Administrative"),boundary:[{id:"adm0",desc:mstrmojo.desc(25286,"e.g. country, territory")},{id:"adm1",desc:mstrmojo.desc(25141,"e.g. state, province")},{id:"adm2",desc:mstrmojo.desc(25420,"e.g. county, city")},{id:"adm3",desc:mstrmojo.desc(25222,"e.g. district")},{id:"adm4",desc:mstrmojo.desc(25260,"e.g. municipality")}]},{desc:mstrmojo.desc(25485,"Postal"),boundary:[{id:"pos1",desc:mstrmojo.desc(25208,"postcode area level 1")},{id:"pos2",desc:mstrmojo.desc(25501,"postcode area level 2")},{id:"pos3",desc:mstrmojo.desc(25386,"postcode area level 3")},{id:"pos4",desc:mstrmojo.desc(25409,"postcode area level 4")}]},{desc:mstrmojo.desc(25442,"Statistical"),boundary:[{id:"sta1",desc:mstrmojo.desc(25110,"e.g. NUTS 1, province")},{id:"sta2",desc:mstrmojo.desc(25495,"e.g. NUTS 2, division")},{id:"sta3",desc:mstrmojo.desc(25428,"e.g. NUTS 3, subdivision")},{id:"sta4",desc:mstrmojo.desc(25164,"e.g. tract")},{id:"sta5",desc:mstrmojo.desc(25250,"e.g. block")}]}];(function(){var N={Selector:1001,Panel_Selector:1002,Sort:1006,Keep_Only_Exclude:1012,Show_Total:1013,Drill:1015,viewFilters:-1,};var L=";";var G={actionTypeId:"",visName:"",manipOn:"",manipValue:""};function C(Z){var X="mstrmojo-UnitContainer";var W="title-text";var U=Z;try{while(K(U)){U=U.parentNode;if(U.classList.contains(X)){return U.getElementsByClassName(W)[0].innerText;}}}catch(Y){console.error("TelemetryUtil: Failed to get visualization name: ",Y);}return"Unknown";}function K(W){if(!W){return false;}if(W.nodeName.toLowerCase()==="body"){return false;}var U="mstrd-DossierViewContainer";return !W.classList.contains(U);}mstrmojo.util.TelemetryUtil=mstrmojo.provide("mstrmojo.util.TelemetryUtil",{CLIENT_ACTION_TYPE:N,getVisName:C,curManipInfo:Object.assign({},G),getCurManipInfo:function P(){return this.curManipInfo;},resetManipInfo:function F(){this.curManipInfo=Object.assign({},G);return this.curManipInfo;},updateCurManipInfo:function J(U){this.curManipInfo=Object.assign(this.curManipInfo,U);return this.curManipInfo;},sortInitManipInfo:function H(U,W){this.resetManipInfo();var X=W?"Ascending":"Descending";return this.updateCurManipInfo({actionTypeId:this.CLIENT_ACTION_TYPE.Sort,manipOn:U.v,manipValue:X});},sortUpdateManipInfo:function M(U){return this.updateCurManipInfo({visName:this.getVisName(U)});},clearSortInitManipInfo:function B(U){this.resetManipInfo();return this.updateCurManipInfo({actionTypeId:this.CLIENT_ACTION_TYPE.Sort,manipOn:U.v,manipValue:"Clear"});},drillInitManipInfo:function E(W,X,U){this.resetManipInfo();return this.updateCurManipInfo({actionTypeId:N.Drill,visName:this.getVisName(U),manipOn:W,manipValue:X});},keepOnlyExcludeInitManipInfo:function R(Z,Y){if(Z.length==0){return ;}this.resetManipInfo();try{var b=Z[Z.length-1];var W=[];for(var X=0;X<b.data.length;X++){W.push(b.data[X][0].v);}var a=b.keepOnly?"Keep Only":"Exclude";}catch(U){console.error("TelemetryUtil: Failed to get Keep Only / Exclude information: ",U);}return this.updateCurManipInfo({actionTypeId:N.Keep_Only_Exclude,visName:this.getVisName(Y),manipOn:W.join(L),manipValue:a});},selectorInitManipInfo:function I(X){this.resetManipInfo();var b=this.getVisName(X.domNode);var Z=X.items;var U=X.selectedIndices;var Y=X.cs;if(Y&&Y.length>0){var d=[];for(var W=0;W<Y.length;W++){var c=Y[W].v;d.push(c);}return this.updateCurManipInfo({actionTypeId:N.Selector,visName:b,manipOn:b,manipValue:d.join(L)});}if(Z&&(U&&Object.keys(U).length==0)){var d=[];for(var W=0;W<Z.length;W++){var c=Z[W]&&Z[W].n||"";d.push(c);}return this.updateCurManipInfo({actionTypeId:N.Selector,visName:b,manipOn:b,manipValue:d.join(L)});}try{var d=[];var e=Object.keys(U);for(var W=0;W<e.length;W++){if(U[e[W]]){d.push(Z[e[W]].n);}}}catch(a){console.error("TelemetryUtil: Failed to get selector information: ",a);}return this.updateCurManipInfo({actionTypeId:N.Selector,visName:b,manipOn:b,manipValue:d.join(L)});},panelSelectorUpdateManipInfo:function S(){if(this.getCurManipInfo().actionTypeId==N.Selector){return this.updateCurManipInfo({actionTypeId:N.Panel_Selector});}},showTotalsInitManipInfo:function O(Z,W,X,U){this.resetManipInfo();try{var c=[];var d=Object.keys(W);for(var Y=0;Y<d.length;Y++){if(W[d[Y]]){c.push(Z[d[Y]].n);}}}catch(a){console.error("TelemetryUtil: Failed to get Show Totals information: ",a);}var b=this.getVisName(X);return this.updateCurManipInfo({actionTypeId:N.Show_Total,visName:b,manipOn:U,manipValue:c.join(L)});},showTotalsToggleInitManipInfo:function Q(U){this.resetManipInfo();return this.updateCurManipInfo({actionTypeId:N.Show_Total,manipOn:U,});},showTotalsToggleUpdateManipInfo:function D(U,W){return this.updateCurManipInfo({visName:this.getVisName(W),manipValue:U?"Show Totals":"Hide Totals",});},viewFiltersInitManipInfo:function A(W,U){this.resetManipInfo();var X=this.getVisName(W);return this.updateCurManipInfo({actionTypeId:N.viewFilters,visName:X,manipOn:X,manipValue:U});}});})();mstrmojo.chart.model.enums.EnumDSSDynamicShortcut={DssDynamicShortcutReserved:0,DssDynamicShortcutAuto:1,DssDynamicShortcutAcrossThenDown:2,DssDynamicShortcutDownThenAcross:3,DssDynamicShortcutColumns:4,DssDynamicShortcutRows:5,DssDynamicShortcutCell:6,DssDynamicShortcutShape:7,DssDynamicShortcutLastOne:8,DssDynamicShortcutRangeEnd:255};mstrmojo.mstr.EnumDSSXMLTokenTypes={EndOfInput:-1,Reserved:0,Error:1,Unknown:2,Empty:3,ExclamationPoint:33,NumberSign:35,Dollar:36,Percent:37,Ampersand:38,LeftParen:40,RightParen:41,Asterisk:42,PlusSign:43,Comma:44,MinusSign:45,Dot:46,FwdSlash:47,Colon:58,Semicolon:59,LeftAngleBracket:60,EqualSign:61,RightAngleBracket:62,QuestionMark:63,AtSign:64,LeftSquareBracket:91,RightSquareBracket:93,Caret:94,Underscore:95,LeftAccolade:123,VerticalBar:124,RightAccolade:125,Tilda:126,Literal:258,Identifier:259,Reserved1:260,DoubleQString:261,Integer:262,Float:263,AttrRef:264,DimRef:265,MetricRef:266,AggMetricRef:267,FactRef:268,ReportRef:269,FilterRef:270,RoleRef:271,TableRef:272,PromptRef:273,ColumnRef:274,AttrFormRef:275,DimFormRef:276,SimpInfixFun1:277,SimpInfixFun2:278,SimpPrefixFun:279,AggFun:280,RelativeFun:281,CompareFun:282,AndFun:283,OrFun:284,NotFun:285,BoolPrefixFun:286,IntersectFun:287,Reserved2:288,InSetFun:289,BetweenFun:290,LikeFun:291,EnhCompareFun:292,EnhBetweenFun:293,ArrowUp:294,ArrowDown:295,ArrowUpDown:296,AggFirstInFact:297,AggLastInFact:298,KwdTrue:299,KwdFalse:300,KwdBreakBy:301,KwdSortBy:302,KwdFactID:303,DateTime:304,CaseFun:305,FreeVariable:306,LongNumber:307,RWMetricRef:308,CSQLRef:309,ConsolidationRef:310,DssTokenTypeKwdCSIUpdate:312,DssTokenTypeKwdCSISet:313,DssTokenTypeKwdCSIInsert:314,DssTokenTypeKwdCSIDelete:315,DssTokenTypeKwdCSIWhere:316,DssTokenTypeKwdCSIInto:317,DssTokenTypeKwdCSIValues:318,DssTokenTypeKwdCSIFrom:319,DssTokenTypeCSIFieldUnit:321,Elements:323,ConsolidationElementRef:324,EndOfTypes:340};(function(){mstrmojo.vi.ui.rw._VisDnDHelpers=mstrmojo.provide("mstrmojo.vi.ui.rw._VisDnDHelpers",{_mixinName:"mstrmojo.vi.ui.rw._VisDnDHelpers",canDropItem:function A(B){return B&&(!B.isParameter||B.st===2566);}});})();mstrmojo.EnumRWSelectorType={ELEMENT:1,METRIC:2,PANEL:3};mstrmojo.ag.EnumColumnDefnValues={PIN_LEFT:"left",PIN_RIGHT:"right"};(function(){if(!mstrmojo.PerformanceLogOutput){var G={},D=true;mstrmojo.PerformanceLogOutput=mstrmojo.provide("mstrmojo.PerformanceLogOutput",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function C(L,K){if(this.mUseTimer){if(K&&this.getTimerIdByName(K)>=0){return ;}var J=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:J,desc:L.functionName+": "+L.purpose});if(K){G[K]=J;}return J;}},getTimerIdByName:function F(J){var K=G[J];return isNaN(K)?-1:K;},endTimer:function A(M){var K;if(typeof M==="string"){K=this.getTimerIdByName(M);}else{K=M;}if(this.mUseTimer){var J,P=this.mTimers;if(K===undefined){J=P.pop();}else{var L,R;for(L=0;L<P.length;L++){R=P[L];if(R.timerId===K){J=R;P.splice(L,1);break;}}}if(J){var O=J.desc;var N=new Date()-J.timeStamp;var Q=[O,N];this.visPrint("%c"+J.desc+": "+N+"ms","color: blue");H(Q);delete G[M];}}},visPrint:function I(){if(D&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},recordJSHeapMemory:function E(L){var N=window.performance,M=N&&N.memory;if(this.mUseTimer&&M){L=L?(L+": "):"";var K=["usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit"],J=this;K.forEach(function(P){var Q=L+P,O=M[P]/1000;J.visPrint("%c"+Q+": "+O+"KB","color: blue");H([Q,O]);});}},exportToCsv:function B(){var K=mstrApp.rootCtrl.docCtrl.model.n+".csv",P=window.perfResults;var Q=function(X,U){var W="";var S=X[U]===null?"":X[U].toString();if(X[U] instanceof Date){S=X[U].toLocaleString();}var R=S.replace(/"/g,'""');if(R.search(/("|,|\n)/g)>=0){R='"'+R+'"';}W+=R;return W+",";};var O="";for(var M=0;M<P.length;M++){O+=Q(P[M],0);}O+="\n";for(var M=0;M<P.length;M++){O+=Q(P[M],1);}O+="\n";var J=new Blob([O],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob){navigator.msSaveBlob(J,K);}else{var N=document.createElement("a");if(N.download!==undefined){var L=URL.createObjectURL(J);N.setAttribute("href",L);N.setAttribute("download",K);N.style.visibility="hidden";document.body.appendChild(N);N.click();document.body.removeChild(N);}}window.perfResults=[];}});function H(K){var J=window.perfResults;if(!J){J=window.perfResults=[];}J.push(K);}}})();(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&this.mMaximum===1){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum+=M;this.mMinimum-=M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};(function(){mstrmojo._IsSelectorTarget=mstrmojo.provide("mstrmojo._IsSelectorTarget",{_mixinName:"mstrmojo._IsSelectorTarget",setDirty:function A(C){var D=(C?"add":"remove")+"DirtyKey",B=this.parent;if(B&&B[D]){this.parent[D](this.k);}}});}());(function(){function D(I){var G,J={};for(G=0;G<I.attributes.length;G++){var H=I.attributes[G];J[H.nodeName]=H.value;}for(G=0;G<I.childNodes.length;G++){var K=I.childNodes[G],F;if(K.nodeType===1){F=K.localName;J[F]=J[F]||[];J[F].push(D(K));}}return J;}function A(F){var G=new window.DOMParser();return G.parseFromString(F,"text/xml");}mstrmojo.XMLParser=mstrmojo.declare(null,null,{xml2DOM:function E(F){return A(F);},xml2Object:function C(G){var F=A(G);if(F){return D(F.documentElement);}return null;},file2Object:function B(F){var G=mstrmojo.loadFileSync(F);if(G){return this.xml2Object(G);}return null;}});}());(function(){function E(H,G,F){return H>=G&&H<=F;}function A(G,F){return{start:G,end:F};}function C(I,G){var L=this.renderedRowsArr,K=B.call(this,I,1),J=K.index,H=L[J],F;if(!K.between){if(H&&I>H.end+1){J++;L.splice(J,0,A(I,G));}else{L.splice(J,0,A(I,G));}H=L[J];}else{H.end=Math.max(H.end,G);}while(J<L.length-1){J++;F=L[J];if(H.end+1>=F.start){H.end=Math.max(H.end,F.end);L.splice(J,1);J--;}else{break;}}}function B(G,L){var K=this.renderedRowsArr,H=0,I=K.length-1,F,J;while(H<=I){F=(H+I)/2|0;J=K[F];if(E(G,J.start,J.end+L||0)){return{between:true,index:F};}if(G<J.start){I=F-1;}else{H=F+1;}}return{between:false,index:F};}mstrmojo._RowRendTracker=mstrmojo.provide("mstrmojo._RowRendTracker",{_mixinName:"mstrmojo._RowRendTracker",renderedRowsArr:undefined,init:function D(F){this._super(F);this.renderedRowsArr=[];},markPages:function(G,F){C.call(this,G,F);},searchRow:function(H){var G=B.call(this,H,0),F;if(G.between){F=this.renderedRowsArr[G.index];return{rendered:true,min:F.start,max:F.end};}return null;},unMarkAllPages:function(){this.renderedRowsArr.length=[];}});}());mstrmojo.EnumAuthenticationModes={DEFAULT:0,STANDARD:1,NTCREDENTIAL:2,PASSTHRU:4,ANONYMOUS:8,LDAP:16,DATABASE:32,PLUGIN:64,INTEGRATED:128,USHER:256};mstrmojo.pendo.PendoParameterEnums={EVENT_NAME:{PARAMETER_CREATION:"Dashboard | Parameter | Creation",PARAMETER_ADDITION_TO_VIZ:"Dashboard | Parameter | Addition to Visualization",PARAMETER_SELECTOR_CREATION:"Dashboard | Parameter | Selector Creation",PARAMETER_SELECTOR_INTERACTION:"Dashboard | Parameter | Selector Interaction"},PARAMETER_LEVEL:{DASHBOARD:"Dashboard",DATASET:"Dataset"},PARAMETER_TYPE:{VALUE:"Value",ELEMENT_LIST:"Element List",OBJECT:"Object"},OBJECT_SELECTED:{ATTRIBUTES:"Attributes",METRICS:"Metrics"},DATASET_TYPE_ASSOCIATION:{REPORT_AS_DATASET:"Report as dataset",NONE:"None"},VIZ_TYPE:{GRID:"Grid",BAR_CHART:"Bar Chart",LINE_CHART:"Line Chart",PIE_CHART:"Pie Chart",BUBBLE_CHART:"Bubble Chart"},SELECTOR_STYLE:{DROPDOWN:"Drop-down",SLIDER:"Slider",LISTBOX:"List Box",RADIO_BUTTONS:"Radio Buttons",CHECKBOXES:"Check Boxes",BUTTON_BAR:"Button Bar",LINK_BAR:"Link Bar",SEARCH_BOX:"Search Box",TEXT_BOX:"Text Box",CALENDAR:"Calendar"},SELECTOR_LOCATION:{IN_CANVAS:"In-canvas",FILTER_PANEL:"Filter Panel"},SELECTOR_CONFIGURATIONS:{DEFAULT:"Default",HIDE_TITLE_BAR:"Hide Title Bar",SHOW_TITLE_BAR:"Show Title Bar",CHECK_SELECTION_REQUIRED:"Check Selection Required",UNCHECK_SELECTION_REQUIRED:"Uncheck Selection Required",CHANGE_STYLE:"Change Style to #",CHECK_DISABLE_INTERACTIONS_IN_LIBRARY:"Check Disable Interactions in Library",UNCHECK_DISABLE_INTERACTIONS_IN_LIBRARY:"Uncheck Disable Interactions in Library",},ALLOWED_VALUE:{USER_INPUT:"User Input",FIXED_LIST:"Fixed List",RANGE:"Range"},DATA_TYPE:{NUMBER:"Number",BIG_DECIMAL:"Big Decimal",TIME:"Time",STRING:"String"}};(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(K){var J,M,L;if(K.binaryData){J=K.binaryData.getChildAt(K.colInd).get(K.rowInd);M=K.binaryData.schema.fields[K.colInd].name.split(" ")[0];L=K.binaryData.schema.fields.findIndex(function(N){return N.name===M+" (45C11FA478E745FEA08D781CEA190FE5)";});this.infoFromBinary={name:J,elementId:"h"+K.binaryData.getChildAt(L).get(K.rowInd)+";"+M,objectId:M,rowIndex:K.rowInd};this.t=K.t;return ;}this.h=K.h;this.t=K.t;},getName:function A(){if(this.infoFromBinary){return this.infoFromBinary.name;}return D.call(this,"n");},getElementId:function I(){if(this.infoFromBinary){return this.infoFromBinary.elementId;}return D.call(this,"id");},getObjectId:function B(){if(this.infoFromBinary){return this.infoFromBinary.objectId;}return D.call(this,"oid");},getElementIndex:function G(){if(this.infoFromBinary){return this.infoFromBinary.rowIndex;}return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){if(this.infoFromBinary){return undefined;}return this.h.fi;}});}());(function(){mstrmojo.ui.editors._HostsControls=mstrmojo.provide("mstrmojo.ui.editors._HostsControls",{_mixinName:"mstrmojo.ui.editors._HostsControls",setFormatSource:function E(G){this.throwAbstractMethodError("setFormatSource");},syncControls:function A(G){var H=this._sync;this._sync=true;G.call(this);this._sync=H;},raiseFormatValueChange:function F(H,I,G){if(this._sync){return false;}this.onGroupValueChange(H,I,G);return true;},raiseCanvasSizeChange:function D(H,G){if(this._sync){return false;}this.onCanvasSizeChange(H,G);return true;},raiseFormatLayoutChange:function B(H,I,G){if(this._sync){return false;}this.onGroupLayoutChange(H,I,G);return true;},onGroupValueChange:function C(H,I,G){},onGroupLayoutChange:mstrmojo.emptyFn});}());mstrmojo.EnumDSSTemplateCalculationType={DSSTemplateTypeCalculationReservedType:0,DSSTemplateCalculationDesignTemplate:1,DSSTemplateCalculationKeyDriverAlgorithm:2,DSSTemplateCalculationImpactAlgorithm:4,DSSTemplateCalculationDetailAlgorithm:8,DSSTemplateCalculationSeasonalityAlgorithm:16,DSSTemplateCalculationTrendAlgorithm:32,DSSTemplateCalculationOutlierAlgorithm:64,DSSTemplateCalculationForecastAlgorithm:128};mstrmojo.EnumDSSGetElementsResultFlags={TerseElementID:1,GetElementsFromCubeInDoc:512};mstrmojo.timefilter.EnumDSSTimeFilterType={DssTimeFilterTypeLast:1,DssTimeFilterTypeCurrent:2};(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}if(D.visible){return this._super(D);}var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});}());mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function showStatus(A,G,D){var C=this._STATUS;if(!this.hasRendered||!C){return ;}var E=C.style;if(!A){if(this.showingStatus){E.display="none";}}else{if(C){var F=this._STATUS_TXT;if(F){F.innerHTML=G||"";}var B=this._STATUS_BAR;if(B){B.style.width=(D||0)+"%";}if(!this.isStatusBarPositioned){E.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.display="block";}}}this.showingStatus=A;},updateStatus:function updateStatus(A,B){this.showStatus(this.showingStatus,A,B);}});mstrmojo.mstr.EnumWebAPIErrorCodes={MSI_INBOX_MSG_NOT_FOUND:-2147468986,MSI_GRAPH_NO_DATA:-2147468857,POOL_OBJECT_NOT_FOUND_BY_ID:-2147467398,DOCDATA_PREPARE_TASK_REPORT_INCOMP:-2147466604,AUTHEN_E_LOGIN_FAIL_EXPIRED_PWD:-2147216963,AUTHEN_E_LOGIN_FAILED_NEW_PASSWORD_REQD:-2147216960,AUTHEN_E_LOGIN_FAIL:-2147216959,E_INVALID_EXPRESSION:-2147214839,MSI_ADDUSERJOB_ERROR:-2147209185,E_MSI_USERMGR_USER_NOTFOUND:-2147209051,MSI_SERVER_NOT_FOUND:-2147206923,DFC_QRYENG_RES_TRUNC:-2147205488,MSI_CUBE_NOT_PUBLISHED:-2147072488,MDSVR_E_NO_ID:-2147216373,E_TARGET_PAGE_NOT_FOUND:-2147156940,E_UNUSED:4294967295,MSI_JOB_CANCELED_ERROR:-2147209196,UICMD_DEFAULT_ERROR:10,MDX_LIMIT_ERROR:-2147204406,XJOIN_ERROR:-2147179489,DSSCOM_E_FEATURE_NOT_SUPPORTED_IN_MSWEB:-2147156364,SEC_E_SELECTOR_EXECUTION_ACCESS:-2147214563,SEC_E_VIZ_EXECUTION_ACCESS:-2147214564,NO_FOLDER_READ_ACCESS:-2147214568,MSI_REPORT_INCOMPLETE_OP:-2147156018};(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());mstrmojo.vi.enums.EnumFilterClearActionType={CLEAR_ALL:0,CLEAR_KEEP_ONLY:1,CLEAR_ADV_QUALIFICATION:2,CLEAR_LINKING:3,CLEAR_KEEP_ONLY_AND_LINKING:4,CLEAR_DRILLING:5,CLEAR_DOSSIER_LINKING:6,CLEAR_DRILLING_IN_COLUMNSET:7};mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap={DssXmlAxisNone:0,DssXmlAxisRowsBit:1,DssXmlAxisColumnsBit:2,DssXmlAxisPagesBit:4,DssXmlAxisChaptersBit:8};mstrmojo.vi.enums.EnumCanvasSizeType={AUTOMATIC:1,FIXED_VALUE_RESOLUTION:2,RANGE_RESOLUTION:3,FIXED_ASPECT_RATIO:4};(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.classList.contains("mstrd-Page")?0:I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.ag.EnumRefreshActions={CONTINUE:0,SKIP_REFRESH:1,REDRAW_ROWS:2,HANDLE_FMT_CHANGE:3,HANDLE_DATA_CHANGE:4,SKIP_REFRESH_INC_FETCH:5,RESIZE_GRID:6,FORCE_RECREATE:7,SKIP_REFRESH_RESIZE_COLUMN:8,};(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());mstrmojo.vi.enums.SelectorEnums={ENUM_CONTROL_ORIENTATION:{HORIZONTAL:1,VERTICAL:0},ENUM_ORIENTATION_VALUES:{HORIZONTAL:"h",VERTICAL:"v"}};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_DATA_LABEL_BAR_TOTAL:"data-label-total-bar",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b",KPI_V_SCROLLBAR:"kpi-vertical-scrollbar",KPI_H_SCROLLBAR:"kpi-horizontal-scrollbar"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000,AREA_MAP:1000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumSingleLegendMode:{RESTORE:1,COLLAPSE:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3,DATA_NOT_READY:4},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"},TOOLTIP_STATE:{STATE_DEFAULT:0,STATE_SUMMARY:1,STATE_COMBINED:2,STATE_VERTICAL:3,STATE_EMPTY_CONTENT:4},OBJECT_HIGHLIGHT_STATE:{HIGHLIGHT_CONTEXTMENU:0,HIGHLIGHT_SELECTION:1,HIGHLIGHT_COMBINED:2},EnumFeatureFlags:{ftFgGrpA:{HideLegendByDefault:1}}};mstrmojo.ag.EnumColumnVisibility={HIDE_IN_AUTHORING_MODE:1,HIDE_IN_CONSUMPTION_MODE:2,};mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18,Metric:19,Trend:20,Geometry:21};(function(){mstrmojo._SupportPagination=mstrmojo.provide("mstrmojo._SupportPagination",{_mixinName:"mstrmojo._SupportPagination",supportPagination:true,getPaginationContainer:function D(){return this.domNode;},preExport:function C(){var J=this.getPaginationContainer();if(!J){return ;}var Q=Math.ceil(J.scrollHeight/J.clientHeight)*J.clientHeight,M=Math.ceil(J.scrollWidth/J.clientWidth)*J.clientWidth,N=1,K=1,L=this.canScrollRight()&&Math.abs(M-J.scrollWidth)>N,O=this.canScrollDown()&&Math.abs(Q-J.scrollHeight)>N,P=Math.abs(J.scrollWidth-J.clientWidth)>N,H=Math.abs(J.scrollHeight-J.clientHeight)>N;if(!O||!H){Q=K;}if(!L||!P){M=K;}if(L||O){var I=document.createElement("div");I.innerHTML='<div style="display: inline-block; width: '+M+"px; height: "+Q+'px; visibility: hidden; position: absolute; left: 0; top: 0"></div>';J.appendChild(I.firstElementChild);}},postExport:mstrmojo.emptyFn,canScrollDown:function E(){var H=this.getPaginationContainer();return H&&Math.ceil(H.scrollTop+H.clientHeight)<Math.floor(H.scrollHeight);},canScrollRight:function G(){var H=this.getPaginationContainer();return H&&Math.ceil(H.scrollLeft+H.clientWidth)<Math.floor(H.scrollWidth);},prePrint:mstrmojo.emptyFn,postPrint:mstrmojo.emptyFn,scrollToNextVerticalPage:function B(){if(!this.canScrollDown()){return Promise.reject(new Error("Scrolled to the end vertically."));}var H=this.getPaginationContainer();if(!H){return Promise.reject(new Error("Failed to get container node."));}var I=H.scrollTop;H.scrollTop+=H.clientHeight;if(Math.abs(H.scrollTop-I)<1){return Promise.reject(new Error("Try to scroll down but failed."));}else{return new Promise(function(K,J){setTimeout(K,0);});}},scrollToNextHorizontalPage:function F(){if(!this.canScrollRight()){return Promise.reject(new Error("Scrolled to the end horizontally."));}var H=this.getPaginationContainer();if(!H){return Promise.reject(new Error("Failed to get container node."));}var I=H.scrollLeft;H.scrollLeft+=H.clientWidth;if(Math.abs(H.scrollLeft-I)<1){return Promise.reject(new Error("Try to scroll right but failed."));}else{return new Promise(function(K,J){setTimeout(K,0);});}},scrollToFirstHorizontalPage:function A(){var H=this.getPaginationContainer();if(!H){return Promise.reject(new Error("Failed to get container node."));}return new Promise(function(J,I){H.scrollLeft=0;setTimeout(function(){if(H.scrollLeft===0){J();}else{I(new Error("Try to scroll to leftmost side but failed."));}},0);});},});}());(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());mstrmojo.chart.model.enums.EnumShapeRadiusDirection={NONE:0,TOP_LEFT:8,TOP_RIGHT:4,BOTTOM_RIGHT:2,BOTTOM_LEFT:1,ALL:15};mstrmojo.vi.enums.EnumPromptType={RESERVED:0,CONSTANT:1,ATTRIBUTE_LELMENT_LSIT:2,EXPRESSION:3,OBJECTS:4,DIMENSIONALITY:5};(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G=String.fromCharCode;function D(H){H=H.replace(/\r\n/g,"\n");var I="";for(var K=0;K<H.length;K++){var J=H.charCodeAt(K);if(J<128){I+=G(J);}else{if((J>127)&&(J<2048)){I+=G((J>>6)|192);I+=G((J&63)|128);}else{I+=G((J>>12)|224);I+=G(((J>>6)&63)|128);I+=G((J&63)|128);}}}return I;}function F(L){var H="",J=0,M=0,K=0,I=0;while(J<L.length){M=L.charCodeAt(J);if(M<128){H+=G(M);J++;}else{if((M>191)&&(M<224)){K=L.charCodeAt(J+1);H+=G(((M&31)<<6)|(K&63));J+=2;}else{K=L.charCodeAt(J+1);I=L.charCodeAt(J+2);H+=G(((M&15)<<12)|((K&63)<<6)|(I&63));J+=3;}}}return H;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function E(K){var I=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(K&&K.indexOf("=?UTF-8?B?")===0){var J="",H;while((H=I.exec(K))!==null){J+=mstrmojo.base64.decode(H[1]);}return J;}return K;},encode:function B(J){var H="";var Q,O,M,P,N,L,K;var I=0;J=D(J);while(I<J.length){Q=J.charCodeAt(I++);O=J.charCodeAt(I++);M=J.charCodeAt(I++);P=Q>>2;N=((Q&3)<<4)|(O>>4);L=((O&15)<<2)|(M>>6);K=M&63;if(isNaN(O)){L=K=64;}else{if(isNaN(M)){K=64;}}H+=A.charAt(P)+A.charAt(N)+A.charAt(L)+A.charAt(K);}return H;},decode:function C(J){var H="",I=0;var Q,O,M,P,N,L,K;J=J.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(I<J.length){P=A.indexOf(J.charAt(I++));N=A.indexOf(J.charAt(I++));L=A.indexOf(J.charAt(I++));K=A.indexOf(J.charAt(I++));Q=(P<<2)|(N>>4);O=((N&15)<<4)|(L>>2);M=((L&3)<<6)|K;H+=G(Q);if(L!==64){H+=G(O);}if(K!==64){H+=G(M);}}H=F(H);return H;}});})();(function(){function c(f){var g=[].slice.call(f),h=g[g.length-1],i=function(k,j){return k===j;};if(/function|string/.test(typeof h)){i=typeof h==="function"?h:function(k,j){return k[h]===j[h];};g=g.slice(0,g.length-1);}return{sets:g,compareFunc:i};}mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function E(g,j){var f=(g&&g.length)||0,h;for(h=0;h<f;h++){if(g[h]==j){return h;}}return -1;},includes:function(f,g){if(!f||!f.length){return false;}return f.indexOf(g)>-1;},indexOfMulti:function Y(f,g){var k=[],j={},i=0,h=this;h.forEach(f,function(m,l){h.forEach(g,function(n,o){var p=(n===m);if(p){k[o]=j[o]=l;i++;}return !p;});});return{indices:k.length?k:null,map:j,count:i};},forEach:function W(h,m,k){var g=(h&&h.length)||0,j;for(j=0;j<g;j++){var l=j===(g-1);if(k){if(m.call(k,h[j],j,h,l)===false){break;}}else{if(m(h[j],j,h,l)===false){break;}}}return h;},map:function d(h,l){var g=(h&&h.length)||0,j=[],k;for(k=0;k<g;k++){j[k]=l(h[k],k);}return j;},filter:function M(h,j,k){var n=[],m=0,g=(h&&h.length)||0,f=(k&&k.max)||0,l;for(l=0;l<g;l++){if(j(h[l],l,h)){n[m]=h[l];m++;if(f&&m>=f){break;}}}return n;},filterOne:function O(f,g){var h=this.filter(f,g,{max:1});if(h.length){return h[0];}return null;},ensureArray:function S(f){return[].concat(f||[]);},find:function P(g,l,h){var f=(g&&g.length)||0,j;for(j=0;j<f;j++){var k=g[j];if(k&&k[l]==h){return j;}}return -1;},findLast:function B(g,l,h){var f=(g&&g.length)||0,j;for(j=f-1;j>-1;j--){var k=g[j];if(k&&k[l]===h){return j;}}return -1;},distinct:function C(g,l){if(g.reduce&&!l){return g.reduce(function(m,i){if(m.indexOf(i)<0){m.push(i);}return m;},[]);}var f=(g&&g.length)||0,h,k,j=[];for(h=0;h<f;h++){k=g[h];if((k!==undefined)&&((l&&this.find(j,l,k[l])<0)||(!l&&this.indexOf(j,k)<0))){j.push(k);}}return j;},findBin:function F(i,o,q,g){var n=(g||i.length)-1,j=0,f,k=o[q];while(n-j>1){if(i[f=n+j>>1][q]<k){j=f;}else{n=f;}}if(i[j][q]===k){return j;}return i[n][q]===k?n:-1;},search:function K(s,j,n){var k=s.length,i=-1,g,q=j.toUpperCase(),f=j.length;while(k-i>1){if(s[g=k+i>>1][n].substr(0,f).toUpperCase()<q){i=g;}else{k=g;}}return k;},findMulti:function U(o,g,q){if(!q){return{indices:null,map:{},count:0};}var p=q.length,u=[],f={},s=0,l=(o&&o.length)||0,m;for(m=0;m<l;m++){var t=o[m][g],h;for(h=0;h<p;h++){if(q[h][g]===t){u[h]=m;f[h]=m;s++;break;}}}return{indices:u,map:f,count:s};},removeItem:function b(f,h){var g=this.indexOf(f,h);if(g>-1){this.removeIndices(f,g,1);}return g;},removeItems:function Q(f,l,g){var h=this.findMulti(f,l,g);if(h.count){var k=h.indices.concat().sort(this.numSorter).slice(0,h.count),j;for(j=k.length-1;j>-1;j--){f.splice(k[j],1);}}},numSorter:function e(g,f){return Number(g)-Number(f);},stringSorter:function L(h,g){var f=h.toLowerCase(),i=g.toLowerCase();if(f<i){return -1;}if(f>i){return 1;}return 0;},objectKeySorter:function(g,f){if(typeof f==="undefined"){f="asc";}return function(i,h){if(!i.hasOwnProperty(g)||!h.hasOwnProperty(g)){return 0;}var k=(typeof i[g]==="string")?i[g].toUpperCase():i[g];var j=(typeof h[g]==="string")?h[g].toUpperCase():h[g];var l=0;if(k>j){l=1;}else{if(k<j){l=-1;}}return((f==="asc")?l:(l*-1));};},removeIndices:function R(f,h,g){f.splice(h,g);},insert:function G(g,f,h){if(!g){g=[];}if(f===null||f===undefined){f=g.length;}Array.prototype.splice.apply(g,[f,0].concat(h));return g;},hash:function D(g,k){k=k||{};var f=(g&&g.length)||0,j;for(j=0;j<f;j++){k[g[j]]=true;}return k;},get:function Z(g,k){if(!k){return null;}var h=[],f=k.length,j;for(j=0;j<f;j++){h[j]=g[k[j]];}return h;},deepSortArr:function I(g,i,f,h){return g.sort(function(l,j){var m=l[f][i],k=j[f][i];if(!h){return(m<=k);}return(m>k)?-1:1;});},isArray:function(f){var g=Array.isArray;if(g){return g(f);}return Object.prototype.toString.call(f)==="[object Array]";},some:function N(g,h){if(!g){return false;}if(g.some){return g.some(h);}var f=false;this.forEach(g,function(j,i){f=h(j,i,g);return !f;});return f;},difference:function a(){if(arguments.length<2){throw new Error("difference should get at least 2 parameters");}var i=c(arguments),g=i.sets,h=i.compareFunc,j=g[0],f=[].concat.apply([],g.slice(1));return j.filter(function(k){return !f.some(function(l){return h(k,l);});});},intersection:function X(){if(arguments.length<2){throw new Error("intersection should get at least 2 parameters");}var j=c(arguments),h=j.sets,i=j.compareFunc,f=h[0],g=h.slice(1);g.forEach(function(k){f=f.filter(function(l){return k.some(function(m){return i(l,m);});});});return f;},fnReduceNumber:function A(f,g){return f+g;},applyLargeArray:function J(i,l,n,o){var j=i.length,m=1000,f,g,h,k=n;if(j){for(f=0,g=m;f<j;f=g,g+=m){h=l.apply(o,i.slice(f,g));k=l.apply(o,[k,h]);}}else{k=l.apply(o,i);}return k;},shuffle:function H(g){var j,h,f,i;if(!this.isArray(g)||g.length===0){return[];}j=[].concat(g);h=j.length;while(h!==0){f=Math.floor(Math.random()*h);h--;i=j[h];j[h]=j[f];j[f]=i;}return j;}});}());(function(){function Ab(BJ,BK){return BK||(BJ||window).event;}function AC(BJ){var BK=parseInt(BJ,10);return BK===null||isNaN(BK)?0:BK;}mstrmojo.PositionType=null;var BE=!!document.all,AZ=document.documentMode,AI=navigator.userAgent,AB=false,y=false,w=false,u=false,a=false,Y=!BE&&"ActiveXObject" in window,AK=false;BE=BE||Y;if(BE){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){AB=!!AI.match(/MSIE 6/);y=((!!AI.match(/MSIE 7/)&&!AZ)||AZ===7);w=(AZ===8);u=(AZ===9);a=(AZ===10);AK=(!AZ||AZ<=9);}else{AB=!!AI.match(/MSIE 6/);y=!!AI.match(/MSIE 7/);w=!!AI.match(/MSIE 8/);u=!!AI.match(/MSIE 9/);a=!!AI.match(/MSIE 10/);AK=!a;}}var t=!BE&&!!AI.match(/Firefox/),AD=0,AJ=!!AI.match(/Android/),BD=!!AI.match(/DossierMobile/),A3=!!AI.match(/iPad/),Ai=!!AI.match(/iPhone/),o=!!AI.match(/Macintosh/)&&"ontouchend" in document,Aq=!!document.createTouch||AJ,AH=!!AI.match(/PlayBook/),W=!!AI.match(/Windows Phone/),BF=!BE&&!!AI.match(/Trident.*rv/),s=t?"-moz-":(BE||BF)?"":"-webkit-",Aa=t?"Moz":(a||BF)?"":BE?"ms":"webkit",An=((a||BF)?"t":"T"),AS="transitionend",Af="animationend",Ah=Aa+An+"ransition";var p="mstrevent",C="mstreventmark",i=null;function A8(){return Aa+An+"ransform";}function AX(){return Ah+"Property";}function c(){return Ah+"Duration";}function U(){return AS;}function x(){return Aa+"BoxShadow";}var BB=A8(),Aw=AX(),AR=c(),A=U(),AF=x();function Am(){if(!AD&&t){var BJ=AI.match(/.*Firefox\/([\d|\.]*).*/);if(BJ){AD=parseFloat(BJ[1]);}}return AD;}function As(){var BK=0,BO=0,BL=window,BM=document,BJ=BM.body,BN=BM.documentElement;if(typeof BL.pageYOffset==="number"){BO=BL.pageYOffset;BK=BL.pageXOffset;}else{if(BJ&&(BJ.scrollLeft||BJ.scrollTop)){BO=BJ.scrollTop;BK=BJ.scrollLeft;}else{if(BN&&(BN.scrollLeft||BN.scrollTop)){BO=BN.scrollTop;BK=BN.scrollLeft;}}}return{x:BK,y:BO};}function AY(BJ){BJ=BJ||0;BJ=String(BJ);return((BJ.indexOf("%",0))!==-1)?BJ:(BJ+"px");}function Ak(BL,BP,BO,BN,BM){if(!mstrmojo.dom.isWinPhone){BN=(BN||false||this.isHWAccelerated);}else{BN=false;}var BK=BM+(BN?"3d":"")+"(",BJ=BN?(","+BO+")"):")";return BK+BL+","+BP+BJ;}var Az=2,h=3;function AL(BR,BP,BT,BK,BU){var BS=BR.style,BN=BS.display,BO=this.windowDim(),BM=As();BS.display="block";var BQ=BO.w-(BK||BR.clientWidth),BV=Math.max(BO.h-(BU||BR.clientHeight),0),BJ={4:0,5:BQ,3:BQ/2},BL={1:0,3:BV/2,2:BV};BS.left=BJ[BP]+BM.x+"px";BS.top=BL[BT]+BM.y+"px";BS.display=BN;}function AE(BM,BL,BN,BJ){if(BM.addEventListener){return BM.addEventListener(BL,BN,!!BJ);}BN._id=BN._id||AE.guid++;BM.events=BM.events||{};var BK=BM.events[BL];if(!BK){BK=BM.events[BL]={};if(BM["on"+BL]){BK[0]=BM["on"+BL];}}BK[BN._id]=BN;function BO(BR){BR=BR||window.event;var BQ=this.events[BR.type],BP;for(BP in BQ){BQ[BP].call(this,BR);}}BM["on"+BL]=BO;}AE.guid=1;function z(BL,BK,BM,BJ){if(!BL){return ;}if(BL.removeEventListener){BL.removeEventListener(BK,BM,!!BJ);}else{if(BL.events&&BL.events[BK]){delete BL.events[BK][BM._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:AI,isIE:BE,isIE6:AB,isIE7:y,isIE8:w,isIE9:u,isIE10:a,isIE11:Y,isIEW3C:BF,isNSIE:AK,isDXIE:AK,isFF:t,isWK:!!AI.match(/AppleWebKit/),isSafari:!!AI.match(/Safari/)&&!AI.match(/Chrome/),isChrome:!!AI.match(/AppleWebKit/)&&AI.match(/Chrome/),isEdge:!!AI.match(/Edge/),isHWAccelerated:!AJ,isAndroid:AJ,isAndroidLibrary:BD,isIPad:A3,isIPhone:Ai,isPlayBook:AH,isWinPhone:W,isMobile:A3||Ai||W||AJ,isIOSTouch:(A3||Ai||o)&&!window.MSStream,supportsTouches:Aq,TOUCHSTART:Aq?"touchstart":"mousedown",TOUCHMOVE:Aq?"touchmove":"mousemove",TOUCHEND:Aq?"touchend":"mouseup",TOUCHCANCEL:Aq?"touchcancel":"",RESIZE:Aq?"orientationchange":"resize",ANDROID_VIRTUAL_KEYBOARD_MIN_HEIGHT:180,CSS3_PREFIX:s,CSS3_BOXSHADOW:AF,CSS3_TRANSFORM:BB,CSS3_TRANSITION:Ah,CSS3_TRANSITION_PROPERTY:Aw,CSS3_TRANSITION_DURATION:AR,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh",INNER_TEXT:"innerText"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},isTouchOptimizationEnabled:function AQ(){return BD;},supports:function B(BJ){var BK=this.isFF&&Am();switch(BJ){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||BK>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||BK>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);case this.cssFeatures.INNER_TEXT:return !this.isFF||BK>44;}return false;},getOSInfo:function Aj(){var BJ="Unknown",BK=navigator.appVersion,BR=navigator.userAgent,BL=BJ;var BQ=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chromebook",r:/\bCrOS\b/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var BN;for(BN=0;BN<BQ.length;BN++){var BP=BQ[BN];if(BP.r.test(BR)){BL=BP.s;break;}}var BM=BJ,BO;if(/Windows/.test(BL)){BO=/Windows (.*)/.exec(BL);BM=BO&&BO[1];BL="Windows";}else{switch(BL){case"Mac OS":BO=/Macintosh.* (\d+[\.\_\d]+)/.exec(BR);BM=BO&&BO[1];break;case"Android":BO=/Android ([\.\_\d]+)/.exec(BR);BM=BO&&BO[1];break;case"iOS":BO=/OS (\d+)_(\d+)_?(\d+)?/.exec(BK);BM=BO&&(BO[1]+"."+BO[2]+"."+(BO[3]|0));break;}}return{name:BL,version:BM||BJ};},transitionend:AS,closest:function A0(BK,BJ){if(!BK){return null;}if(BK.closest){return BK.closest(BJ);}if(!BK.matches){BK.matches=BK.msMatchesSelector||BK.webkitMatchesSelector;}do{if(BK.matches(BJ)){return BK;}BK=BK.parentElement||BK.parentNode;}while(BK!==null&&BK.nodeType===1);return null;},animationend:Af,replace:function AG(BL,BJ){if(BL&&BJ){var BK=BL.parentNode;if(BK){BK.replaceChild(BJ,BL);}}return BJ;},attachEvent:function k(BL,BK,BM,BJ){if(BL.addEventListener){return BL.addEventListener(BK,BM,!!BJ);}return BL.attachEvent("on"+BK,BM);},detachEvent:function Au(BL,BK,BM,BJ){if(!BL){return ;}if(BL.removeEventListener){BL.removeEventListener(BK,BM,!!BJ);}else{BL.detachEvent("on"+BK,BM);}},attachMarkupEvent:function AN(BM,BL,BJ){var BK=function(BN){mstrmojo.all[BM].captureDomEvent(BJ,window,BN);};this.attachEvent(BL,BJ,BK);return BK;},attachOneTimeEvent:function j(BM,BK,BN,BJ){var BL=function(BO){BN(BO);if(BJ){z(this,BK,BL);}else{mstrmojo.dom.detachEvent(this,BK,BL);}};if(BJ){AE(BM,BK,BL);}else{this.attachEvent(BM,BK,BL);}BM=null;return BL;},attachMouseMoveEvents:function E(BM,BJ){var BL=this,BK=function(BN){if(BJ){BJ(BN);}BL.detachEvent(document,"mousemove",BM);BL.detachEvent(document,"mouseup",BK);};BL.attachEvent(document,"mousemove",BM);BL.attachEvent(document,"mouseup",BK);},captureDomEvent:function Ag(BO,BM,BK,BN,BL){var BJ=mstrmojo.all[BO];if(BJ){BJ.captureDomEvent(BM,BK,BN,BL);}},captureEventInfo:function Ae(BM){var BK=mstrmojo.hash.copy(BM,{}),BL=BK.hWin=BK.hWin||window,BJ=BK.e=BK.e||BL.event;BK.node=this.eventTarget(BL,BJ);BK.pos=this.getMousePosition(BJ,BL);return BK;},translate:function R(BL,BK,BO,BN,BJ,BM){BJ=(BJ&&" "+BJ)||"";BL.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(BK,BO,BN,BM)+BJ;},createTranslateString:function X(BJ,BM,BL,BK){BJ=AY(BJ);BM=AY(BM);BL=AY(BL);return Ak(BJ,BM,BL,BK,"translate");},createScaleString:function AM(BJ,BM,BL,BK){BJ=BJ||0;BM=BM||0;BL=BL||0;return Ak(BJ,BM,BL,BK,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function D(BL,BJ,BM,BO){var BK=BL.id+"-"+BJ,BN=this._bufferConnects[BK];if(!BN){BN=this._bufferConnects[BK]={elId:BL.id,eventName:BJ,timer:null,bufferSize:BO,listeners:[],callback:function(BP){mstrmojo.dom._callback(BP,mstrmojo.global,BK);return true;}};this.attachEvent(BL,BJ,BN.callback);}BN.listeners.push(BM);},_callback:function A7(BN,BJ,BL){var BM=this._bufferConnects[BL],BO=BM&&BM.timer;if(BM&&!BO){var BK=(BM.bufferSize===null)?this._bufferSize:BM.bufferSize;if(BM.bufferSize){BM.timer=BJ.setTimeout(function(){mstrmojo.dom.updateBuffers(BL);},BK);}else{mstrmojo.dom.updateBuffers(BL);}}},updateBuffers:function L(BM){var BN=this._bufferConnects[BM],BK=BN&&BN.listeners,BJ=(BK&&BK.length)||0,BL;for(BL=0;BL<BJ;BL++){BK[BL]();}if(BN&&BN.timer){delete BN.timer;}},detachBufferedEvent:function AV(BK,BO,BP){if(!BK){return ;}var BR=BK.id+"-"+BO,BL=this._bufferConnects[BR],BN=BL&&BL.listeners,BQ=(BN&&BN.length)||0,BM;if(BQ){for(BM=BQ-1;BM>-1;BM--){if(BN[BM]===BP){BN.splice(BM,1);}}if(!BN.length){this.detachEvent(BK,BO,BL.callback);delete this._bufferConnects[BR];if(BL.timer){var BJ=mstrmojo.global;BJ.clearTimeout(BL.timer);}}}},eventTarget:function AT(BJ,BK){BK=Ab(BJ,BK);return BK&&(BK.target||BK.srcElement);},isMac:function AP(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isChromebook:function AO(){return this.getOSInfo().name.toLowerCase().indexOf("chromebook")>=0;},isMetaKey:function O(BJ,BM){var BL=this.isMac(),BK=Ab(BJ,BM)||{};return(BK.ctrlKey&&!BL)||(BK.metaKey&&BL);},ctrlKey:function BA(BJ,BK){return(Ab(BJ,BK)||{}).ctrlKey;},shiftKey:function AU(BJ,BK){return(Ab(BJ,BK)||{}).shiftKey;},metaKey:function m(BJ,BK){return(Ab(BJ,BK)||{}).metaKey;},getButton:function Ao(BJ,BK){return((Number(Ab(BJ,BK).button))===2)?2:1;},isPrimaryMouseBtn:function A4(BK,BJ){return this.getButton(BJ||window,BK)===1;},isRMC:function Ay(BK,BJ){return BK&&(BK.button===2||BK.type==="contextmenu"||this.isMac()&&this.ctrlKey(BJ,BK)&&BK.button===0);},getMousePosition:function AA(BM,BL){BL=BL||window;var BK,BP;if(mstrmojo.dom.isIE){BM=BM||BL.event;var BN=document,BJ=BN.body,BO=BN.documentElement;BK=BM.clientX+BJ.scrollLeft+(BO.scrollLeft||0);BP=BM.clientY+BJ.scrollTop+(BO.scrollTop||0);}else{BK=BM.pageX;BP=BM.pageY;}return{x:BK,y:BP};},scalePosition:function A1(BJ,BL){var BK=mstrmojo.hash.clone(BJ);if(!BL){return BK;}Object.keys(BK).forEach(function(BM){if(!Number.isNaN(BK[BM])){BK[BM]/=BL;}});return BK;},positionWithScale:function n(BJ,BK,BL){return this.scalePosition(this.position(BJ,BK,true),BL);},position:function Ap(BK,BQ,BM){var BJ={x:0,y:0,w:0,h:0};if(BK&&BK.getBoundingClientRect){try{BJ=BK.getBoundingClientRect();}catch(BN){BJ={left:0,top:0,right:0,bottom:0,height:0,width:0};}if(BM){BJ.x=BJ.left;BJ.y=BJ.top;BJ.w=BJ.right-BJ.left;BJ.h=BJ.bottom-BJ.top;}else{BJ={x:BJ.left,y:BJ.top,w:BJ.right-BJ.left,h:BJ.bottom-BJ.top};}if(this.isIE6||this.isIE7){var BR=BK.ownerDocument;if(BR){var BP=BR.documentElement,BO=BP.getBoundingClientRect();BJ.x-=BO.left;BJ.y-=BO.top;}}}if(BQ){var BL=As();BJ.x+=BL.x;BJ.y+=BL.y;}return BJ;},deltaWithScale:function I(BM,BJ,BN){var BL=BJ||document.body;var BK=this.positionWithScale(BM,undefined,BN),BO=this.positionWithScale(BL,undefined,BN);return{x:Math.round(BK.x-BO.x),y:Math.round(BK.y-BO.y)};},delta:function I(BL,BJ){BJ=BJ||document.body;var BK=this.position(BL),BM=this.position(BJ);return{x:Math.round(BK.x-BM.x),y:Math.round(BK.y-BM.y)};},windowDim:function Z(){var BJ=0,BL=0,BM=window,BN=document,BO=BN.documentElement,BK=BN.body;if(typeof (BM.innerWidth)==="number"&&typeof (BM.innerHeight)==="number"){BJ=BM.innerWidth;BL=BM.innerHeight;}else{if(BO&&(BO.clientWidth||BO.clientHeight)){BJ=BO.clientWidth;BL=BO.clientHeight;}else{if(BK&&(BK.clientWidth||BK.clientHeight)){BJ=BK.clientWidth;BL=BK.clientHeight;}}}return{w:BJ,h:BL};},center:function Ad(BL,BK,BJ){AL.call(this,BL,h,h,BK,BJ);},bottomCenter:function F(BJ){AL.call(this,BJ,h,Az);},clearBrowserHighlights:function P(BJ){BJ=BJ||self;if(!BJ.getSelection){var BP=BJ.document,BO=BP&&BP.selection,BM=BO&&BO.empty;if(BM){try{BO.empty();}catch(BL){}}}else{var BK=BJ.getSelection,BN=BK&&BJ.getSelection();if(BN&&!BN.isCollapsed){if(BN.empty){BN.empty();}else{if(BN.removeAllRanges){BN.removeAllRanges();}}}}},findAncestorByAttr:function Al(BN,BL,BK,BJ){var BO=BK?BN:BN&&BN.parentNode;while(BO&&(BO!==BJ)){var BM=BO.getAttribute&&BO.getAttribute(BL);if(BM!=null){return{node:BO,value:BM};}BO=BO.parentNode;}return null;},findAncestorByName:function A9(BL,BO,BK,BJ){BO=BO&&BO.toLowerCase();var BM=BK?BL:BL&&BL.parentNode;while(BM&&(BM!==BJ)){var BN=BM.nodeName;if(BN&&(BN.toLowerCase()===BO)){return BM;}BM=BM.parentNode;}return null;},findAncestorByClassName:function H(BM,BL,BK,BJ){if(!BL||!BL.length){return BM;}var BN=BK?BM:BM&&BM.parentNode;while(BN&&(BN!==BJ)){var BO=typeof BN.className==="string"&&BN.className.indexOf(BL)!==-1;if(BO){return BN;}BN=BN.parentNode;}},contains:function N(BM,BN,BK,BJ){var BL=BN;if(!BK){BL=BL.parentNode;}while(BL){if(BL===BM){return true;}if(BL===BJ){break;}BL=BL.parentNode;}return false;},toggleSelection:function BG(BK,BJ){BK.setAttribute("unselectable",BJ?"off":"on");mstrmojo.css.toggleClass(BK,"unselectable",!BJ);BK.onselectstart=function(){return BJ;};if(!BJ){this.clearBrowserHighlights();}},preventDefault:function e(BJ,BK){BK=BK||BJ.event;if(BK.preventDefault){BK.preventDefault();}else{BK.returnValue=false;}},stopPropogation:function S(BJ,BK){BK=BK||BJ.event;if(BK.stopPropagation){BK.stopPropagation();}else{BK.cancelBubble=true;}},firstTouch:function Ar(BJ,BK){return BK&&BK.touches&&BK.touches.length?BK.touches[0]:(BK||BJ.event);},firstChangedTouch:function A2(BJ,BK){return BK&&BK.changedTouches&&BK.changedTouches.length?BK.changedTouches[0]:(BK||BJ.event);},isLandscape:function d(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function At(BJ){while(BJ){var BK=BJ.mstrmojoId;if(BK!==null&&BK!==undefined){return mstrmojo.all[BK];}BJ=BJ.parentNode;}return null;},findPanel:function Ax(BM){var BK=function BK(BN){var BP=BN&&BN.mstrmojoId,BO=mstrmojo.hash.walk("classList.0",BN);if(!BO||BO.indexOf("DocPanel-wrapper")===-1){return null;}if(BP!==null&&BP!==undefined){return mstrmojo.all[BP];}return null;};var BJ=BK(BM),BL;if(!BJ&&BM.parentNode){BL=BM.parentNode;BJ=BK(BL);if(!BJ&&BL.parentNode){BJ=BK(BL.parentNode);}}return BJ;},isBelongsToTarget:function b(BJ,BK){if(!BK||!BJ){return false;}while(BJ){if(BJ===BK){return true;}BJ=BJ.parentNode;}return false;},setCaret:function J(BJ,BL){if(BJ.setSelectionRange){BJ.focus();BJ.setSelectionRange(BL,BL);}else{if(BJ.createTextRange){var BK=BJ.createTextRange();BK.move("character",BL);BK.select();}}},setInputSelection:function l(BJ){if(BJ.select){BJ.focus();BJ.select();}else{if(BJ.createTextRange){BJ.createTextRange().select();}}},setElementSelection:function q(BL){if(window.getSelection){var BJ=document.createRange(),BK=window.getSelection();BJ.selectNodeContents(BL);BK.removeAllRanges();BK.addRange(BJ);}else{if(document.body.createTextRange){var BM=document.body.createTextRange();BM.moveToElementText(BL);BM.select();}}},getHorizontalScroll:function BC(){return As().x;},getVerticalScroll:function AW(){return As().y;},getMaxScrollHeight:function K(){return mstrmojo.dom.windowDim().h-22;},getComputedScrollbarWidth:function A5(BK){if(BK){var BJ=mstrmojo.css.getComputedStyle(BK);if(BJ){return(BK.offsetWidth-AC(BJ.borderLeftWidth)-AC(BJ.borderRightWidth)-BK.clientWidth);}}return null;},removeNode:function A6(BL){var BK=document.getElementById(BL),BJ=BK&&BK.parentNode;if(BJ){return BJ.removeChild(BK);}},redirectUrlToFormWrapper:function Av(BM){var BL=function BL(BO){BO.preventDefault();var BQ=BO.target,BP=BQ&&BQ.href;if(BP&&window&&window.FormWrapper){window.FormWrapper.openPage(BP.replace(/ /g,"%20"));}};var BN=BM&&BM.getElementsByTagName("a"),BK=BN.length;for(var BJ=0;BJ<BK;BJ++){if(!BN[BJ].openWithFormWrapper){BN[BJ].addEventListener("click",BL,true);BN[BJ].openWithFormWrapper=true;}}},redirectSvgUrlToFormWrapper:function Ac(BN){var BK,BO,BM,BL,BJ=function(BP){return function BQ(BR){if(BP&&window&&window.FormWrapper){BR.preventDefault();window.FormWrapper.openPage(BP.replace(/ /g,"%20"));}};};if(!(BN instanceof SVGElement)){return ;}if(BN instanceof SVGAElement){BO=[BN];BM=1;}else{BO=BN&&BN.getElementsByTagName("a");BM=BO&&BO.length||0;}for(BL=0;BL<BM;BL++){if(!BO[BL].openWithFormWrapper){BK=BO[BL].getAttribute("href")||BO[BL].getAttribute("xlink:href");BO[BL].addEventListener("click",BJ(BK),true);BO[BL].openWithFormWrapper=true;}}},checkTagName:function BI(BK,BJ){return BK&&BK.tagName&&BK.tagName.toLowerCase()===BJ;},getComputedMargin:function G(BK){var BJ=mstrmojo.css.getComputedStyle(BK);return[parseInt(BJ.marginTop,10)||0,parseInt(BJ.marginRight,10)||0,parseInt(BJ.marginBottom,10)||0,parseInt(BJ.marginLeft,10)||0];},emptyNode:function f(BJ){while(BJ&&BJ.firstChild){BJ.removeChild(BJ.firstChild);}},inIframe:function g(){try{return window.self!==window.top;}catch(BJ){return true;}},isCSPEnabled:function BH(){if(i===null){try{i=!!mstrmojo.hash.walk("features.contentSecurityPolicy",dossierConfig||null);}catch(BJ){i=false;}}return i;},recursiveReplaceInlineEventListeners:function M(BK,BJ,BM){if(!this.isCSPEnabled()){return ;}var BL=this;function BN(BZ,BR){var BX=BR&&BR.id,BY=BZ.getAttribute&&BZ.getAttribute(p),BP=BZ.getAttribute&&BZ.getAttribute(C),BS=BR&&BR.eventHandlerMap,BW;if(BY){var BO=BY.split(" ");for(BW=0;BW<BO.length;BW++){var BV=BO[BW],BT="on"+BV;if(BP){if(BS){var BQ=BS[BP]&&BS[BP][BV];if(BQ){BL.singleReplaceInlineEventListenersByMap(BZ,BV,BR,BQ);}}}else{if(BJ){BL.attachEvent(BZ,BV,function(Ba){BL.captureDomEvent(this.wId,this.evtName,self,Ba);}.bind({wId:BX,evtName:BV}));}}}BZ.removeAttribute(p);BZ.removeAttribute(C);}if(BZ.hasChildNodes()){var BU=BZ.childNodes;for(BW=0;BW<BU.length;BW++){BN(BU[BW],BR);}}}BN(BK,BM);},singleReplaceInlineEventListenersByMap:function Q(BN,BQ,BP,BJ){var BK=BJ.requiredParams,BO="on"+BQ;if(BK&&BK.length!==0){var BM={},BL;for(BL=0;BL<BK.length;BL++){BM[BK[BL]]=BP[BK[BL]];}this.attachEvent(BN,BQ,BJ.handlerFn(BM));}else{this.attachEvent(BN,BQ,BJ.handlerFn());}if(BN.hasAttribute(BO)){BN.removeAttribute(BO);}}});}());mstrmojo.timefilter.EnumDSSCurrentTimeFilterValue={DssCurrentTimeFilterValue15Minutes:1,DssCurrentTimeFilterValue30Minutes:2,DssCurrentTimeFilterValueHour:3,DssCurrentTimeFilterValueDay:4};mstrmojo.vi.controllers.EnumEvents={UPDATE_TOC:"updateTOC",MANIPULATE_LAYOUT:"layoutManipulation",MANIPULATE_PANEL:"panelManipulation",LAST_MODIFIED_CHANGE:"lastModifiedChange",CHANGE_COVER_IMAGE:"changeCoverImage",WSITEM_DRAG_OVER:"WSItemDragOver",WSITEM_DRAG_ENTER:"WSItemDragEnter",WSITEM_DRAG_EXIT:"WSItemDragExit",WSITEM_DROP:"WSItemDrop",CONTENTS_PANEL_VISIBILITY_CHANGE:"contentPanelVisibilityChange",DO_LAYOUT:"doLayout",SELECT_PAGE:"viPageSelected",SELECT_UNIT:"viUnitSelected",ADD_UNIT:"viUnitAdded",UNIT_DROP_ZONE_MODIFIED:"viUnitDropZoneModified",UNIT_TYPE_CHANGED:"viUnitTypeChanged",UNIT_MOVED:"viUnitMoved",REDO_UNDO:"redoUndo",SAVE_SUCCESS:"saveSuccess",ICONIC_VIZ_DROP_ZONE_MODIFIED:"iconicVizDropZoneModified"};(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Parameter:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,Nuggets:90};mstrmojo.vi.models.EnumFieldTypes={SHAPE:1,IMAGE:2,TEXT:3,HTML_CONTAINER:10,BUTTON:11};mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function P(Z,Y){if(Z){Y=Y||{};var a;for(a in Z){Y[a]=Z[a];}}return Y;},copyProps:function M(a,c,Y){Y=Y||{};if(c){var b=(a&&a.length)||0,Z;for(Z=0;Z<b;Z++){var d=a[Z];if(c[d]!==undefined){Y[d]=c[d];}}}return Y;},forEach:function S(b,a,Z){if(b){var Y;for(Y in b){if(Z){if(a.call(Z,b[Y],Y,b)===false){break;}}else{if(a(b[Y],Y,b)===false){break;}}}}return b;},walk:function U(c,Z){if(!Z){Z=mstrmojo.global;}var b=c.split(".");if(b.length===1){return Z[c];}var a=(b&&b.length)||0,Y;for(Y=0;Y<a;Y++){Z=Z[b[Y]];if(!Z){break;}}return Z;},walkModify:function D(d,Z,b){if(!Z){Z=mstrmojo.global;}var c=d.split(".");if(c.length===1){Z[d]=b;return true;}var a=(c&&c.length)||0,Y;for(Y=0;Y<a-1;Y++){Z=Z[c[Y]];if(!Z){return false;}}Z[c[a-1]]=b;return true;},isEmpty:function I(Z){if(!Z){return true;}var Y;for(Y in Z){if(Z[Y]!==null&&Z[Y]!==undefined){return false;}}return true;},clear:function L(Z){if(Z){var Y;for(Y in Z){delete Z[Y];}}return Z;},clearProps:function J(a,Z){if(a){Z=Z||[];var Y;for(Y in a){if(Z.indexOf(Y)>-1){delete a[Y];}}}return a;},any:function H(b,c){var a;if(b){var Z=this.keyarray(b);if(Z.length>0){var Y=Z[0];a=c?Y:b[Y];}}return a;},clone:function W(d){if(!d){return null;}var f;if(d.constructor===Array){f=d.concat();var e=f[0];if(e&&typeof e==="object"){var Y=f.length,b;for(b=0;b<Y;b++){f[b]=this.clone(d[b]);}}}else{f={};var a;for(a in d){var Z=d[a];if(Z&&typeof Z==="object"){f[a]=this.clone(Z);}else{f[a]=Z;}}}return f;},cloneArray:function Q(Z){var a=[],Y=(Z&&Z.length)||0,b;for(b=0;b<Y;b++){a[b]=this.clone(Z[b]);}return a;},cloneNoCycle:function F(a){var Z=new Map();function Y(f){if(f===null||typeof f!=="object"){return f;}if(Z.get(f)){return Z.get(f);}var c=Array.isArray(f)?[]:{};Z.set(f,c);var e=Object.keys(f),b=e.length;for(var d=0;d<b;d++){c[e[d]]=Y(f[e[d]]);}return c;}return Y(a);},cloneArrayNoCycle:function G(Z){var a=[],Y=(Z&&Z.length)||0,b;for(b=0;b<Y;b++){a[b]=this.cloneNoCycle(Z[b]);}return a;},keyarray:function A(a,b){var Y=[],Z;if(a){if(Object.keys&&!b){Y=Object.keys(a);}else{for(Z in a){Y.push(b?Number(Z):Z);}}}return Y;},valarray:function K(a){var Y=[];if(a){var Z;for(Z in a){Y.push(a[Z]);}}return Y;},equals:function X(f,e){var Z=mstrmojo.hash,d=(f&&e)||(!f&&!e&&(f===e));if(d&&f){d=(f.constructor===e.constructor);if(d){if(f.constructor===Array){var c=f.length;d=(c===e.length);if(d&&c){var a;for(a=0;a<c;a++){d=d&&Z.equals(f[a],e[a]);}}}else{if(typeof f==="object"){var g=Z.keyarray(f),b=Z.keyarray(e);d=g.length===b.length;if(d){var Y;for(Y in f){d=d&&(Z.equals(f[Y],e[Y]));}}}else{d=(f===e);}}}}return d;},obj2array:function O(d){var e;for(e in d){var c=d[e];if(c&&typeof c==="object"){d[e]=this.obj2array(c);}}var Z=d.isArray;if(Z!==undefined&&Z===true){var b=[],Y=d.length,a;for(a=0;a<Y;a++){b.push(d[a]);}return b;}return d;},min:function N(b,c,d){var Y=null,a;if(b){for(a in b){var Z=c?b[a]:a;if(d){Z=Number(Z);}if((Y===null)||(Z<Y)){Y=Z;}}}return Y;},max:function R(b,c,d){var Y=null,a;if(b){for(a in b){var Z=c?b[a]:a;if(d){Z=Number(Z);}if((Y===null)||(Z>Y)){Y=Z;}}}return Y;},make:function C(Z,a,Y){if(!Z||!a){return null;}if(Z.attachEventListener){return Z;}if(a.makeObservable){Z=a.makeObservable(Z,Y)||Z;}else{this.copy(a.prototype,Z);if(Z.init){Z=Z.init(Y)||Z;}}return Z;},mergeHashes:function B(Y,Z){Y=this.clone(Y)||{};if(Z){mstrmojo.array.forEach(mstrmojo.array.distinct(this.keyarray(Z).concat(this.keyarray(Y))),function(a){var c=Y[a],b=Z[a];if(c===undefined){Y[a]=b;}else{if(c!==undefined&&b!==undefined){if(typeof c==="object"&&c!==null){if(c.constructor===Array){Y[a]=c.concat(b);}else{Y[a]=this.mergeHashes(c,b);}}else{Y[a]=b;}}}},this);}return Y;},invert:function(Z){var a={};if(Z){var Y;for(Y in Z){if(Z.hasOwnProperty(Y)){if(typeof Y==="number"||typeof Y==="string"){a[Z[Y].toString()]=Y;}}}}return a;},syncObjects:function(Z,a){var Y=this.clone(a);Object.keys(Y).forEach(function(b){if(Y.hasOwnProperty(b)){Z[b]=Y[b];}});Object.keys(Z).forEach(function(b){if(!a.hasOwnProperty(b)){delete Z[b];}});},recursiveCopy:function E(Z,Y){if(Z){Y=Y||{};Object.keys(Z).forEach(function(b){var c=Z[b];if(typeof c==="object"){if(c.constructor===Array){if(Y[b]===undefined){Y[b]=[];}for(var a=0;a<c.length;a++){if(Y[b][a]===undefined){Y[b][a]={};}E(c[a],Y[b][a]);}}else{if(Y[b]===undefined){Y[b]={};}E(c,Y[b]);}}else{Y[b]=c;}});}return Y;}});}());(function(){const B="45C11FA478E745FEA08D781CEA190FE5";mstrmojo.ArrowUtils=mstrmojo.provide("mstrmojo.ArrowUtils",{alertMultipleBatches:function A(D){const E=Object.values(D).length;if(E===0){throw new Error("No batches found in the stream.");}if(E===1){return ;}throw new Error("Multiple batches detected ("+E+")");},printBatchSchema:function C(D){console.log("Batch with "+D.numRows+" rows and "+D.numCols+" columns");console.log("Schema:",D.schema.toString());}});}());mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle",NEW_GRAPH_MATRIX:"NewGraphMatrixVisualizationStyle",MAPBOX:"MapboxVisualizationStyle",KPICARD:"KPICardVisualizationStyle",KEYDRIVER:"KeyDriver",MULTIMETRICKPI:"MultiMetricKPI",INSIGHT_LINE_CHART:"InsightLineChart",AUTONARRATIVES:"AutoNarratives",IMAGEENHANCEDKPI:"ImageEnhancedKPI"};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphNestedBracket:777,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11,DssBaseFormPhoneNumber:12};(function(){mstrmojo.vi.ui.rw._SupportChatPanel=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportChatPanel",{_mixinName:"mstrmojo.vi.ui.rw._SupportChatPanel",isInChatPanel:true,initSupportChatPanel:function C(){this.set("editable",false);if(this.boxContent){if(mstrApp.isAppStateDefault&&mstrApp.isAppStateDefault()){this.boxContent.draggable=false;}this.boxContent.skipUpdateOverlay=true;}},shouldShowCustomizeContextMenu:function A(){return false;},toggleFloatingButtonCSS:mstrmojo.emptyFn,setMenuButtonVisibility:function B(){var E=this.menuBtnInfo,D=E&&E.btn;if(D){D.style.display="none";}},toggleSelectorVisibility:mstrmojo.emptyFn,updateSelectorPosition:mstrmojo.emptyFn});}());mstrmojo.EnumRWUnitType={PLACEHOLDER:-1,LAYOUT:0,CHAPTER:1,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,UNITCONDITION:11,IWPARENTSECTION:14,KEYDRIVER:15,TIMESERIES:16,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,SHAPE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SURVEYCONTAINER:108,BUTTONFIELD:109,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115,REPORTPAGEBY:9463};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7,MAPBOX:8,KPICARD:9};(function(){function Q(W,R,S){if(W.nodeType===3&&R){return W;}var U=(R&&W.nodeType===1&&W.lastChild)?W.lastChild:F(W,S);return U?D(U,S):null;}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}return D(F(S,R));}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(W,R,S){if(W.nodeType===3&&R){return W;}var U=(R&&W.nodeType===1&&W.firstChild)?W.firstChild:B(W,S);return U?E(U,S):null;}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}return E(B(S,R));}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(U,W){var R=0,S;if(U.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(U);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(U);R=S.text.length;}}else{R=I(U).length;}return W===R?this.EDGE.EDGE_END:(W===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(W,S){if(!W.offsetParent){return ;}var U=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(W);R.collapse(S);U.removeAllRanges();U.addRange(R);}else{R.moveToElementText(W);R.collapse(S);R.select();}},collapseOnTextNode:function L(W,X){var U=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(W,true);S.setStart(R,X);S.collapse(true);U.removeAllRanges();U.addRange(S);}else{S.moveToElementText(W);S.collapse(true);S.move("character",X);S.select();}},collapseOnTextNodeIE:function C(S,U){var W=M(S,true),R;while(W!==null){R=I(W).length;if(R>=U){this.collapseOnTextNode(W,U);break;}else{U-=R;W=M(W,false);}}},getRangeInfo:function J(Z,g){var b=null,l,e=this.getRange(),d;if(Z&&Z===e.startContainer){var i=e.startContainer.firstChild,W=i&&i.firstChild,f=W&&W.firstChild;if(f){e.setStart(f,e.startOffset);e.setEnd(f,e.endOffset);}}if(window.getSelection){var Y=function(n,p,o){var m=n.cloneRange();m.collapse(o);m.setStartBefore(p);return m.toString().length;},S=e.startContainer,h=e.startOffset;if(S.nodeType===1){h=Y(e,S,true);}b={collapsed:e.collapsed,startContainer:S,startOffset:g?g.startOffset:h};if(!e.collapsed){var X=e.endContainer,R=e.endOffset;if(X.nodeType===1){R=Y(e,X,false);}b.endContainer=X;b.endOffset=R;}b.range=e;}else{var k,c,a=function(p,q){var o=p.duplicate(),m=document.body.createTextRange(),n;o.collapse(q);n=o.parentElement();m.moveToElementText(n);m.setEndPoint("EndToStart",o);return{container:n,offset:m.text.length};},j=a(e,true),U;b={collapsed:(e.compareEndPoints("StartToEnd",e)===0),startContainer:j.container,startOffset:j.offset};if(!b.collapsed){U=a(e,false);b.endContainer=U.container;b.endOffset=U.offset;}}return b;},collapse:function O(S){if(window.getSelection){var U=this.getSelection();if(S){U.collapseToStart();}else{U.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(U){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(U);R.select();}},selectMultipleNodes:function N(Y,S,Z,W){var X=this.getSelection(),U=this.getRange();if(window.getSelection){U.setStart(Y,S);U.setEnd(Z,W);X.removeAllRanges();X.addRange(U);}else{Y=(Y.nodeType===3)?Y.parentNode:Y;U.moveToElementText(Y);U.move("character",S);Z=(Z.nodeType===3)?Z.parentNode:Z;var R=document.body.createTextRange();R.moveToElementText(Z);R.move("character",W);U.setEndPoint("EndToStart",R);U.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}return document.selection;},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}return document.createRange();}return document.selection.createRange();}});}());mstrmojo.mstr.EnumDSSConsolidationType={DssNormal:0,DssDerivedElement:1,DssRecursiveDerivedElement:2};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){mstrmojo.requiresDescs(5774,2266,2287,2496,2495,2493,2267,2498,2500,2279,2491,2476,2271,2478,2268,2492,2273,2280,2490,2488,2494,2487,2269,2477,2499,2292,2489,2281,2484,2483,2480,2497,2274,2485,2486,2282,2481,2479,2482,2290,2293);var B=[{n:mstrmojo.desc(5774,"No Fill"),id:"transparent"},{n:mstrmojo.desc(2266,"Black"),id:"#000000"},{n:mstrmojo.desc(2287,"Brown"),id:"#993300"},{n:mstrmojo.desc(2496,"Olive Green"),id:"#333300"},{n:mstrmojo.desc(2495,"Dark Green"),id:"#003300"},{n:mstrmojo.desc(2493,"Dark Teal"),id:"#003366"},{n:mstrmojo.desc(2267,"Dark Blue"),id:"#000080"},{n:mstrmojo.desc(2498,"Indigo"),id:"#333399"},{n:mstrmojo.desc(2500,"Grey-80%"),id:"#333333"},{n:mstrmojo.desc(2279,"Dark Red"),id:"#800000"},{n:mstrmojo.desc(2491,"Orange"),id:"#ff6600"},{n:mstrmojo.desc(2476,"Dark Yellow"),id:"#808000"},{n:mstrmojo.desc(2271,"Green"),id:"#008000"},{n:mstrmojo.desc(2478,"Teal"),id:"#008080"},{n:mstrmojo.desc(2268,"Blue"),id:"#0000ff"},{n:mstrmojo.desc(2492,"Blue-Grey"),id:"#666699"},{n:mstrmojo.desc(2273,"Grey-50%"),id:"#808080"},{n:mstrmojo.desc(2280,"Red"),id:"#ff0000"},{n:mstrmojo.desc(2490,"Light Orange"),id:"#ff9900"},{n:mstrmojo.desc(2488,"Lime"),id:"#99cc00"},{n:mstrmojo.desc(2494,"Sea Green"),id:"#339966"},{n:mstrmojo.desc(2487,"Aqua"),id:"#33cccc"},{n:mstrmojo.desc(2269,"Light Blue"),id:"#3366ff"},{n:mstrmojo.desc(2477,"Violet"),id:"#800080"},{n:mstrmojo.desc(2499,"Grey-40%"),id:"#969696"},{n:mstrmojo.desc(2292,"Pink"),id:"#ff00ff"},{n:mstrmojo.desc(2489,"Gold"),id:"#ffcc00"},{n:mstrmojo.desc(2281,"Yellow"),id:"#ffff00"},{n:mstrmojo.desc(2484,"Bright Green"),id:"#00ff00"},{n:mstrmojo.desc(2483,"Turquoise"),id:"#00ffff"},{n:mstrmojo.desc(2480,"Sky Blue"),id:"#00ccff"},{n:mstrmojo.desc(2497,"Plum"),id:"#993366"},{n:mstrmojo.desc(2274,"Grey-25%"),id:"#c0c0c0"},{n:mstrmojo.desc(2485,"Rose"),id:"#ff99cc"},{n:mstrmojo.desc(2486,"Tan"),id:"#ffcc99"},{n:mstrmojo.desc(2282,"Light Yellow"),id:"#ffff99"},{n:mstrmojo.desc(2481,"Light Green"),id:"#ccffcc"},{n:mstrmojo.desc(2479,"Light Turquoise"),id:"#ccffff"},{n:mstrmojo.desc(2482,"Pale Blue"),id:"#99ccff"},{n:mstrmojo.desc(2290,"Lavender"),id:"#cc99ff"},{n:mstrmojo.desc(2293,"White"),id:"#ffffff"}];var F=[];mstrmojo.util.ui.ColorPicker={getBasicColors:function C(){return B.slice();},getCustomColors:function E(){return F.slice();},addCustomColor:function D(I,H){var G=function(J){return J.id===I;};if(!B.filter(G)[0]&&!F.filter(G)[0]){F.push({n:I,id:I});if(!H){if(F.length>8){F.shift();}}}},removeCustomColor:function A(G){F=F.filter(function(H){return !mstrmojo.hash.equals(H.id,G);});}};}());(function(){mstrmojo.JSONSchemaUtils=mstrmojo.provide("mstrmojo.JSONSchemaUtils",{loadSchemaValidator:function B(){if(mstrmojo.JSONSchemaValidator){return ;}mstrmojo.requiresDepLib(mstrmojo.getJsRoot()+mstrmojo.dynamicBundleUtils.BUNDLE_PATH.JSON_SCHEMA_VALIDATOR);},validateJSONConfig:function A(F,C){if(!mstrmojo.JSONSchemaValidator){console.error("JSON Schema Validator not loaded!");return false;}if(!F||!C){return false;}var E=mstrmojo.JSONSchemaValidator&&mstrmojo.JSONSchemaValidator[F];if(!E){return false;}var D=E(C);return D;}});}());mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionConcatAgg:177,FunctionNullToEmpty:186,FunctionTuple:1000};mstrmojo.EnumLocaleInfo={"zh-TW":{datetime:{MONTHNAME_SHORT:{"0":"1","1":"2","2":"3","3":"4","4":"5","5":"6","6":"7","7":"8","8":"9","9":"10","10":"11","11":"12",length:12,isArray:true},MONTHNAME_FULL:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"",length:12,isArray:true},dayShortNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},dayNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yyyy/M/d","1":"yyyy-MM-dd","2":"M/d","3":"M/d/yy",isArray:true,length:4},TIMEINPUTFORMATS:{"0":"H:m:s","1":"H:m","2":"h:m a","3":"H:m:s a","4":"a hh:mm:ss",isArray:true,length:5},DATEOUTPUTFORMAT:"yyyy/MM/dd",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"yyyy/M/d",TIMEDISPLAYFORMAT:"a hh:mm:ss",AM_NAME:"",PM_NAME:"",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"",v:"#000000"},{n:"",v:"#993300"},{n:"",v:"#333300"},{n:"",v:"#003300"},{n:"",v:"#003366"},{n:"",v:"#000080"},{n:"",v:"#333399"},{n:"-80%",v:"#333333"},{n:"",v:"#800000"},{n:"",v:"#FF6600"},{n:"",v:"#808000"},{n:"",v:"#008000"},{n:"",v:"#008080"},{n:"",v:"#0000FF"},{n:"",v:"#666699"},{n:"-50%",v:"#808080"},{n:"",v:"#FF0000"},{n:"",v:"#FF9900"},{n:"",v:"#99CC00"},{n:"",v:"#339966"},{n:"",v:"#33CCCC"},{n:"",v:"#3366FF"},{n:"",v:"#800080"},{n:"-40%",v:"#969696"},{n:"",v:"#FF00FF"},{n:"",v:"#FFCC00"},{n:"",v:"#FFFF00"},{n:"",v:"#00FF00"},{n:"",v:"#00FFFF"},{n:"",v:"#00CCFF"},{n:"",v:"#993366"},{n:"-25%",v:"#C0C0C0"},{n:"",v:"#FF99CC"},{n:"",v:"#FFCC99"},{n:"",v:"#FFFF99"},{n:"",v:"#CCFFCC"},{n:"",v:"#CCFFFF"},{n:"",v:"#99CCFF"},{n:"",v:"#CC99FF"},{n:"",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:""},{did:"2",n:""}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"NOT"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:""},{did:"20",n:""}],ExprType:[{did:"2",n:""},{did:"5",n:""}],DimtyLevels:[{did:"1",n:""},{did:"2",n:""},{did:"3",n:""}],Attribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,76",n:"",tp:1},{did:"1,79",n:"",tp:1},{did:"1,77",n:"",tp:1},{did:"1,80",n:"",tp:1},{did:"1,78",n:"",tp:1},{did:"1,81",n:"",tp:1},{did:"1,18",n:"",tp:1},{did:"1,43",n:"",tp:1},{did:"1,54",n:"",tp:1},{did:"1,55",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],Metric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,54",n:"",tp:1},{did:"1,55",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"2,1",n:"",tp:2},{did:"2,2",n:"",tp:2},{did:"3,1",n:"%",tp:3},{did:"3,2",n:"%",tp:3}],MDXAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],MDXMetric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1}],SAPAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1}],MetricRP:[{did:"2,13",n:"",tp:2},{did:"2,4",n:"",tp:2},{did:"2,3",n:"",tp:2},{did:"2,5",n:"",tp:2},{did:"3,13",n:"%",tp:3},{did:"3,4",n:"%",tp:3},{did:"3,3",n:"%",tp:3},{did:"3,5",n:"%",tp:3}],Element:[{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}]},validation:{requiredFieldError:"",invalidCharError:" # ",invalidDateStringError:"/",invalidNumericFormatError:"",invalidValueInListError:" (#) ",outofRangeError:" #  ##  ### ",noLessMinError:" #  ##",noGreaterMaxError:" #  ###",failRegexTestError:"",integerDataType:"",numericDataType:"",dateDataType:"/"}},"da-DK":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mar","3":"Apr","4":"Maj","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Okt","10":"Nov","11":"Dec",length:12,isArray:true},MONTHNAME_FULL:{"0":"Januar","1":"Februar","2":"Marts","3":"April","4":"Maj","5":"Juni","6":"Juli","7":"August","8":"September","9":"Oktober","10":"November","11":"December",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"T","3":"O","4":"T","5":"F","6":"L",length:7,isArray:true},dayNames:{"0":"Sndag","1":"Mandag","2":"Tirsdag","3":"Onsdag","4":"Torsdag","5":"Fredag","6":"Lrdag",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd-MM-yyyy","1":"dd-MM-yy","2":"yyyy-MM-dd","3":"yyyy MM dd",isArray:true,length:4},TIMEINPUTFORMATS:{"0":"HH:mm:ss","1":"H:mm:ss","2":"HH:mm",isArray:true,length:3},DATEOUTPUTFORMAT:"dd-MM-yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd-MM-yyyy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Sort",v:"#000000"},{n:"Brun",v:"#993300"},{n:"Olivengrn",v:"#333300"},{n:"Mrkegrn",v:"#003300"},{n:"Dybbl",v:"#003366"},{n:"Mrkebl",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Gr-80%",v:"#333333"},{n:"Rdbrun",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Olivengul",v:"#808000"},{n:"Grn",v:"#008000"},{n:"Blgrn",v:"#008080"},{n:"Bl",v:"#0000FF"},{n:"Bl-Gr",v:"#666699"},{n:"Gr-50%",v:"#808080"},{n:"Rd",v:"#FF0000"},{n:"Lys orange",v:"#FF9900"},{n:"Limegrn",v:"#99CC00"},{n:"Havgrn",v:"#339966"},{n:"Akvamarin",v:"#33CCCC"},{n:"Lysebl",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Gr-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gylden",v:"#FFCC00"},{n:"Gul",v:"#FFFF00"},{n:"Knaldgrn",v:"#00FF00"},{n:"Turkis",v:"#00FFFF"},{n:"Himmelbl",v:"#00CCFF"},{n:"Blomme",v:"#993366"},{n:"Gr-25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Gyldenbrun",v:"#FFCC99"},{n:"Lysegul",v:"#FFFF99"},{n:"Lysegrn",v:"#CCFFCC"},{n:"Lys turkis",v:"#CCFFFF"},{n:"Blegbl",v:"#99CCFF"},{n:"Lavendel",v:"#CC99FF"},{n:"Hvid",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Medtag"},{did:"2",n:"Udelad"}],BranchQual:[{did:"19",n:"OG"},{did:"20",n:"OR"},{did:"21",n:"Ikke"},{did:"19_21",n:"OG IKKE"},{did:"20_21",n:"ELLER IKKE"}],RootOperator:[{did:"19",n:"Alle markeringer"},{did:"20",n:"Vilkrlig markering"}],ExprType:[{did:"2",n:"Kvalificer"},{did:"5",n:"Vlg"}],DimtyLevels:[{did:"1",n:"Standard"},{did:"2",n:"Beregning"},{did:"3",n:"Rapport"}],Attribute:[{did:"1,6",n:"Er lig med",tp:1},{did:"1,7",n:"Er forskellig fra",tp:1},{did:"1,8",n:"Strre end",tp:1},{did:"1,10",n:"Strre end eller lig med",tp:1},{did:"1,9",n:"Mindre end",tp:1},{did:"1,11",n:"Mindre end eller lig med",tp:1},{did:"1,17",n:"Mellem",tp:1},{did:"1,44",n:"Ikke mellem",tp:1},{did:"1,76",n:"Indeholder",tp:1},{did:"1,79",n:"Indeholder ikke",tp:1},{did:"1,77",n:"Begynder med",tp:1},{did:"1,80",n:"Begynder ikke med",tp:1},{did:"1,78",n:"Slutter med",tp:1},{did:"1,81",n:"Slutter ikke med",tp:1},{did:"1,18",n:"Ligner",tp:1},{did:"1,43",n:"Ligner ikke",tp:1},{did:"1,54",n:"Er null",tp:1},{did:"1,55",n:"Er ikke null",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Ikke i",tp:1}],Metric:[{did:"1,6",n:"Er lig med",tp:1},{did:"1,7",n:"Er forskellig fra",tp:1},{did:"1,8",n:"Strre end",tp:1},{did:"1,10",n:"Strre end eller lig med",tp:1},{did:"1,9",n:"Mindre end",tp:1},{did:"1,11",n:"Mindre end eller lig med",tp:1},{did:"1,17",n:"Mellem",tp:1},{did:"1,44",n:"Ikke mellem",tp:1},{did:"1,54",n:"Er null",tp:1},{did:"1,55",n:"Er ikke null",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Ikke i",tp:1},{did:"2,1",n:"Hjeste",tp:2},{did:"2,2",n:"Laveste",tp:2},{did:"3,1",n:"Hjeste%",tp:3},{did:"3,2",n:"Laveste%",tp:3}],MDXAttribute:[{did:"1,6",n:"Er lig med",tp:1},{did:"1,7",n:"Er forskellig fra",tp:1},{did:"1,8",n:"Strre end",tp:1},{did:"1,10",n:"Strre end eller lig med",tp:1},{did:"1,9",n:"Mindre end",tp:1},{did:"1,11",n:"Mindre end eller lig med",tp:1},{did:"1,17",n:"Mellem",tp:1},{did:"1,44",n:"Ikke mellem",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Ikke i",tp:1}],MDXMetric:[{did:"1,6",n:"Er lig med",tp:1},{did:"1,7",n:"Er forskellig fra",tp:1},{did:"1,8",n:"Strre end",tp:1},{did:"1,10",n:"Strre end eller lig med",tp:1},{did:"1,9",n:"Mindre end",tp:1},{did:"1,11",n:"Mindre end eller lig med",tp:1},{did:"1,17",n:"Mellem",tp:1}],SAPAttribute:[{did:"1,6",n:"Er lig med",tp:1},{did:"1,7",n:"Er forskellig fra",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Ikke i",tp:1},{did:"1,8",n:"Strre end",tp:1},{did:"1,10",n:"Strre end eller lig med",tp:1},{did:"1,9",n:"Mindre end",tp:1},{did:"1,11",n:"Mindre end eller lig med",tp:1},{did:"1,17",n:"Mellem",tp:1}],MetricRP:[{did:"2,13",n:"Rang mellemhjeste",tp:2},{did:"2,4",n:"Udelad hjeste",tp:2},{did:"2,3",n:"Rang mellem laveste",tp:2},{did:"2,5",n:"Udelad laveste",tp:2},{did:"3,13",n:"Mellem hjeste...%",tp:3},{did:"3,4",n:"Udelad hjeste%",tp:3},{did:"3,3",n:"Mellem laveste...%",tp:3},{did:"3,5",n:"Udelad laveste%",tp:3}],Element:[{did:"1,22",n:"P liste",tp:1},{did:"1,57",n:"Ikke p liste",tp:1}]},validation:{requiredFieldError:"Fltet r obligatoriskt.",invalidCharError:"Dit veld bevat ongeldige tekens voor #",invalidDateStringError:"Dit veld bevat een ongeldige datum/tijd-tekenreeks",invalidNumericFormatError:"Dit veld bevat een numerieke waarde met een onjuiste indeling",invalidValueInListError:"Een van de waarden (#) in deze lijst is ongeldig",outofRangeError:"Detta flt ska vara # mellan ## och ###.",noLessMinError:"Detta flt ska vara # strre n eller lika med ##.",noGreaterMaxError:"Detta flt ska vara # mindre n eller lika med ###.",failRegexTestError:"Detta flt underkndes i verifieringen av vanliga uttryck.",integerDataType:"ett heltal",numericDataType:"ett siffervrde",dateDataType:"een datum/tijd-waarde"}},"de-DE":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mrz","3":"Apr","4":"Mai","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Okt","10":"Nov","11":"Dez",length:12,isArray:true},MONTHNAME_FULL:{"0":"Januar","1":"Februar","2":"Mrz","3":"April","4":"Mai","5":"Juni","6":"Juli","7":"August","8":"September","9":"Oktober","10":"November","11":"Dezember",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"D","3":"M","4":"D","5":"F","6":"S",length:7,isArray:true},dayNames:{"0":"Sonntag","1":"Montag","2":"Dienstag","3":"Mittwoch","4":"Donnerstag","5":"Freitag","6":"Samstag",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d.M.yy","1":"d.M.yyyy","2":"yyyy-M-d",isArray:true,length:3},TIMEINPUTFORMATS:{"0":"HH:mm","1":"HH:mm:ss","2":"HH:mm 'Uhr'","3":"HH:mm:ss z",isArray:true,length:4},DATEOUTPUTFORMAT:"dd.MM.yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd.MM.yy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Schwarz",v:"#000000"},{n:"Braun",v:"#993300"},{n:"Olivgrn",v:"#333300"},{n:"Dunkelgrn",v:"#003300"},{n:"Krickentengrn",v:"#003366"},{n:"Dunkelblau",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grau - 80 %",v:"#333333"},{n:"Dunkelrot",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dunkelgelb",v:"#808000"},{n:"Grn",v:"#008000"},{n:"Krickentengrn",v:"#008080"},{n:"Blau",v:"#0000FF"},{n:"Blaugrau",v:"#666699"},{n:"Grau - 50 %",v:"#808080"},{n:"Rot",v:"#FF0000"},{n:"Hellorange",v:"#FF9900"},{n:"Limone",v:"#99CC00"},{n:"Seegrn",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Hellblau",v:"#3366FF"},{n:"Violett",v:"#800080"},{n:"Grau - 40 %",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Gelb",v:"#FFFF00"},{n:"Leuchtend grn",v:"#00FF00"},{n:"Trkis",v:"#00FFFF"},{n:"Himmelblau",v:"#00CCFF"},{n:"Pflaume",v:"#993366"},{n:"Grau - 25 %",v:"#C0C0C0"},{n:"Ros",v:"#FF99CC"},{n:"Hellbraun",v:"#FFCC99"},{n:"Hellgelb",v:"#FFFF99"},{n:"Hellgrn",v:"#CCFFCC"},{n:"Helltrkis",v:"#CCFFFF"},{n:"Bla",v:"#99CCFF"},{n:"Lavendel",v:"#CC99FF"},{n:"Wei",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Einschlieen"},{did:"2",n:"Ausschlieen"}],BranchQual:[{did:"19",n:"UND"},{did:"20",n:"ODER"},{did:"21",n:"Nicht"},{did:"19_21",n:"UND NICHT"},{did:"20_21",n:"ODER NICHT"}],RootOperator:[{did:"19",n:"Gesamte Auswahl"},{did:"20",n:"Beliebige Auswahl"}],ExprType:[{did:"2",n:"Qualifizieren"},{did:"5",n:"Auswahl"}],DimtyLevels:[{did:"1",n:"Standard"},{did:"2",n:"Metrik"},{did:"3",n:"Berichte"}],Attribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,76",n:"Enthlt",tp:1},{did:"1,79",n:"enthlt nicht",tp:1},{did:"1,77",n:"Beginnt mit",tp:1},{did:"1,80",n:"beginnt nicht mit",tp:1},{did:"1,78",n:"Endet auf",tp:1},{did:"1,81",n:"endet nicht mit",tp:1},{did:"1,18",n:"hnlich",tp:1},{did:"1,43",n:"Nicht hnlich",tp:1},{did:"1,54",n:"Ist NULL",tp:1},{did:"1,55",n:"Ist nicht NULL",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1}],Metric:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,54",n:"Ist NULL",tp:1},{did:"1,55",n:"Ist nicht NULL",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1},{did:"2,1",n:"Hchste",tp:2},{did:"2,2",n:"Niedrigste",tp:2},{did:"3,1",n:"Hchste%",tp:3},{did:"3,2",n:"Niedrigste%",tp:3}],MDXAttribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1}],MDXMetric:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1}],SAPAttribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1}],MetricRP:[{did:"2,13",n:"Rangfolge zwischen hchsten",tp:2},{did:"2,4",n:"Hchsten ausschlieen",tp:2},{did:"2,3",n:"Rangfolge zwischen niedrigsten",tp:2},{did:"2,5",n:"Niedrigsten ausschlieen",tp:2},{did:"3,13",n:"Zwischen hchsten%",tp:3},{did:"3,4",n:"Hchsten ausschlieen%",tp:3},{did:"3,3",n:"Zwischen niedrigsten%",tp:3},{did:"3,5",n:"Niedrigsten ausschlieen%",tp:3}],Element:[{did:"1,22",n:"in der Liste enthalten",tp:1},{did:"1,57",n:"nicht in der Liste enthalten",tp:1}]},validation:{requiredFieldError:"Dieses Feld ist erforderlich.",invalidCharError:"Dieses Feld enthlt ungltige Zeichen fr #",invalidDateStringError:"Dieses Feld enthlt ungltigen Datums-/Zeit-String",invalidNumericFormatError:"Dieses Feld beinhaltet numerischen Wert mit falschem Format",invalidValueInListError:"Einer der Werte (#) in dieser Liste ist nicht gltig",outofRangeError:"Dieses Feld sollte # zwischen ## und ### sein.",noLessMinError:"Dieses Feld sollte # grer oder gleich ## sein.",noGreaterMaxError:"Dieses Feld sollte # kleiner oder gleich ### sein.",failRegexTestError:"Dieses Feld hat die regulre Ausdrucksberprfung nicht bestanden.",integerDataType:"ein Ganzzahlwert",numericDataType:"ein numerischer Wert",dateDataType:"ein Datums-/Zeitwert"}},"en-US":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mar","3":"Apr","4":"May","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Oct","10":"Nov","11":"Dec",length:12,isArray:true},MONTHNAME_FULL:{"0":"January","1":"February","2":"March","3":"April","4":"May","5":"June","6":"July","7":"August","8":"September","9":"October","10":"November","11":"December",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"T","3":"W","4":"T","5":"F","6":"S",length:7,isArray:true},dayNames:{"0":"Sunday","1":"Monday","2":"Tuesday","3":"Wednesday","4":"Thursday","5":"Friday","6":"Saturday",length:7,isArray:true},DATEINPUTFORMATS:{"0":"M/d/yy","1":"M/d/yyyy","2":"MMM d, yy","3":"yyyy-MM-dd",isArray:true,length:4},TIMEINPUTFORMATS:{"0":"h:mm a","1":"H:mm","2":"h:mm:ss a","3":"H:mm:ss","4":"h:mm:ss a z",isArray:true,length:5},DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss a",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Include"},{did:"2",n:"Exclude"}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"Not"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"All selections"},{did:"20",n:"Any selection"}],ExprType:[{did:"2",n:"Qualify"},{did:"5",n:"Select"}],DimtyLevels:[{did:"1",n:"Default"},{did:"2",n:"Metric"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,76",n:"Contains",tp:1},{did:"1,79",n:"Does not contain",tp:1},{did:"1,77",n:"Begins with",tp:1},{did:"1,80",n:"Does not begin with",tp:1},{did:"1,78",n:"Ends with",tp:1},{did:"1,81",n:"Does not end with",tp:1},{did:"1,18",n:"Like",tp:1},{did:"1,43",n:"Not Like",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1}],Metric:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"2,1",n:"Highest",tp:2},{did:"2,2",n:"Lowest",tp:2},{did:"3,1",n:"Highest%",tp:3},{did:"3,2",n:"Lowest%",tp:3}],MDXAttribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1}],MDXMetric:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1}],SAPAttribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1}],MetricRP:[{did:"2,13",n:"Rank between highest",tp:2},{did:"2,4",n:"Exclude highest",tp:2},{did:"2,3",n:"Rank between lowest",tp:2},{did:"2,5",n:"Exclude lowest",tp:2},{did:"3,13",n:"Between highest%",tp:3},{did:"3,4",n:"Exclude highest%",tp:3},{did:"3,3",n:"Between lowest%",tp:3},{did:"3,5",n:"Exclude lowest%",tp:3}],Element:[{did:"1,22",n:"In List",tp:1},{did:"1,57",n:"Not In List",tp:1}]},validation:{requiredFieldError:"This field is required.",invalidCharError:"This field contains invalid characters for #",invalidDateStringError:"This field contains invalid date/time string",invalidNumericFormatError:"This field contains numeric value with incorrect format",invalidValueInListError:"One of the value (#) in this list is not valid",outofRangeError:"This field should be # between ## and ###.",noLessMinError:"This field should be # greater than or equal to ##.",noGreaterMaxError:"This field should be # less than or equal to ###.",failRegexTestError:"This field failed regular expression validation.",integerDataType:"an Integer value",numericDataType:"a Number value",dateDataType:"a Date/Time value"}},"es-ES":{datetime:{MONTHNAME_SHORT:{"0":"Ene","1":"Feb","2":"Mar","3":"Abr","4":"May","5":"Jun","6":"Jul","7":"Ago","8":"Sep","9":"Oct","10":"Nov","11":"Dic",length:12,isArray:true},MONTHNAME_FULL:{"0":"Enero","1":"Febrero","2":"Marzo","3":"Abril","4":"Mayo","5":"Junio","6":"Julio","7":"Agosto","8":"Septiembre","9":"Octubre","10":"Noviembre","11":"Diciembre",length:12,isArray:true},dayShortNames:{"0":"D","1":"L","2":"M","3":"M","4":"J","5":"V","6":"S",length:7,isArray:true},dayNames:{"0":"Domingo","1":"Lunes","2":"Martes","3":"Mircoles","4":"Jueves","5":"Viernes","6":"Sbado",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d/M/yyyy","1":"d/M/yy","2":"d-M-yy","3":"d.M.yy","4":"yyyy-M-d",isArray:true,length:5},TIMEINPUTFORMATS:{"0":"H:mm","1":"H:mm:ss","2":"H'H'mm''","3":"H:mm:ss z",isArray:true,length:4},DATEOUTPUTFORMAT:"d/MM/yyyy",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"d/MM/yy",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Negro",v:"#000000"},{n:"Marrn",v:"#993300"},{n:"Verde aceituna",v:"#333300"},{n:"Verde oscuro",v:"#003300"},{n:"Verde azulado oscuro",v:"#003366"},{n:"Azul oscuro",v:"#000080"},{n:"ndigo",v:"#333399"},{n:"Gris-80%",v:"#333333"},{n:"Rojo oscuro",v:"#800000"},{n:"Naranja",v:"#FF6600"},{n:"Amarillo claro",v:"#808000"},{n:"Verde",v:"#008000"},{n:"Azul cerceta",v:"#008080"},{n:"Azul",v:"#0000FF"},{n:"Gris azulado",v:"#666699"},{n:"Gris 50%",v:"#808080"},{n:"Rojo",v:"#FF0000"},{n:"Naranja claro",v:"#FF9900"},{n:"Lima",v:"#99CC00"},{n:"Verde mar",v:"#339966"},{n:"Agua",v:"#33CCCC"},{n:"Azul claro",v:"#3366FF"},{n:"Violeta",v:"#800080"},{n:"Gris-40%",v:"#969696"},{n:"Rosa",v:"#FF00FF"},{n:"Dorado",v:"#FFCC00"},{n:"Amarillo",v:"#FFFF00"},{n:"Verde brillante",v:"#00FF00"},{n:"Turquesa",v:"#00FFFF"},{n:"Azul cielo",v:"#00CCFF"},{n:"Ciruela",v:"#993366"},{n:"Gris 25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Tostado",v:"#FFCC99"},{n:"Amarillo claro",v:"#FFFF99"},{n:"Verde claro",v:"#CCFFCC"},{n:"Turquesa claro",v:"#CCFFFF"},{n:"Azul plido",v:"#99CCFF"},{n:"Lavanda",v:"#CC99FF"},{n:"Blanco",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Incluir"},{did:"2",n:"Excluir"}],BranchQual:[{did:"19",n:"Y"},{did:"20",n:"OR"},{did:"21",n:"No"},{did:"19_21",n:"Y NO"},{did:"20_21",n:"O NO"}],RootOperator:[{did:"19",n:"Todas las selecciones"},{did:"20",n:"Cualquier seleccin"}],ExprType:[{did:"2",n:"Calificar"},{did:"5",n:"Seleccionar"}],DimtyLevels:[{did:"1",n:"Por defecto"},{did:"2",n:"Indicador"},{did:"3",n:"Informe"}],Attribute:[{did:"1,6",n:"Es igual a",tp:1},{did:"1,7",n:"Es diferente a",tp:1},{did:"1,8",n:"Mayor que",tp:1},{did:"1,10",n:"Mayor o igual que",tp:1},{did:"1,9",n:"Menor que",tp:1},{did:"1,11",n:"Menor o igual que",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No entre",tp:1},{did:"1,76",n:"Contiene",tp:1},{did:"1,79",n:"No contiene",tp:1},{did:"1,77",n:"Que comience con",tp:1},{did:"1,80",n:"No inicie con",tp:1},{did:"1,78",n:"Termina en",tp:1},{did:"1,81",n:"No termine con",tp:1},{did:"1,18",n:"Como",tp:1},{did:"1,43",n:"No como",tp:1},{did:"1,54",n:"Es nula",tp:1},{did:"1,55",n:"No es nula",tp:1},{did:"1,22",n:"En",tp:1},{did:"1,57",n:"No en",tp:1}],Metric:[{did:"1,6",n:"Es igual a",tp:1},{did:"1,7",n:"Es diferente a",tp:1},{did:"1,8",n:"Mayor que",tp:1},{did:"1,10",n:"Mayor o igual que",tp:1},{did:"1,9",n:"Menor que",tp:1},{did:"1,11",n:"Menor o igual que",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No entre",tp:1},{did:"1,54",n:"Es nula",tp:1},{did:"1,55",n:"No es nula",tp:1},{did:"1,22",n:"En",tp:1},{did:"1,57",n:"No en",tp:1},{did:"2,1",n:"El(los) primero(s)",tp:2},{did:"2,2",n:"El(los) ltimo(s)",tp:2},{did:"3,1",n:"El(los) primero(s)%",tp:3},{did:"3,2",n:"El(los) ltimo(s)%",tp:3}],MDXAttribute:[{did:"1,6",n:"Es igual a",tp:1},{did:"1,7",n:"Es diferente a",tp:1},{did:"1,8",n:"Mayor que",tp:1},{did:"1,10",n:"Mayor o igual que",tp:1},{did:"1,9",n:"Menor que",tp:1},{did:"1,11",n:"Menor o igual que",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No entre",tp:1},{did:"1,22",n:"En",tp:1},{did:"1,57",n:"No en",tp:1}],MDXMetric:[{did:"1,6",n:"Es igual a",tp:1},{did:"1,7",n:"Es diferente a",tp:1},{did:"1,8",n:"Mayor que",tp:1},{did:"1,10",n:"Mayor o igual que",tp:1},{did:"1,9",n:"Menor que",tp:1},{did:"1,11",n:"Menor o igual que",tp:1},{did:"1,17",n:"Entre",tp:1}],SAPAttribute:[{did:"1,6",n:"Es igual a",tp:1},{did:"1,7",n:"Es diferente a",tp:1},{did:"1,22",n:"En",tp:1},{did:"1,57",n:"No en",tp:1},{did:"1,8",n:"Mayor que",tp:1},{did:"1,10",n:"Mayor o igual que",tp:1},{did:"1,9",n:"Menor que",tp:1},{did:"1,11",n:"Menor o igual que",tp:1},{did:"1,17",n:"Entre",tp:1}],MetricRP:[{did:"2,13",n:"Clasificacin entre mayores",tp:2},{did:"2,4",n:"Excluir el ms alto",tp:2},{did:"2,3",n:"Clasificacin entre ms bajos",tp:2},{did:"2,5",n:"Excluir el ms bajo",tp:2},{did:"3,13",n:"Entre mayores%",tp:3},{did:"3,4",n:"Excluir el ms alto%",tp:3},{did:"3,3",n:"Entre ms bajos%",tp:3},{did:"3,5",n:"Excluir el ms bajo%",tp:3}],Element:[{did:"1,22",n:"En la lista",tp:1},{did:"1,57",n:"No est en la lista",tp:1}]},validation:{requiredFieldError:"Este campo es obligatorio.",invalidCharError:"Este campo contiene caracteres no vlidos para #",invalidDateStringError:"Este campo contiene una cadena de fecha/hora no vlida",invalidNumericFormatError:"Este campo contiene un valor numrico con formato incorrecto",invalidValueInListError:"Uno de los valores (#) en esta lista no es vlido",outofRangeError:"Este campo debe ser # entre ## y ###.",noLessMinError:"Este campo debe ser # mayor o igual que ##.",noGreaterMaxError:"Este campo debe ser # menor o igual que ###.",failRegexTestError:"No se pudo realizar la validacin de la expresin normal para este campo.",integerDataType:"un valor entero",numericDataType:"un valor numrico",dateDataType:"un valor de fecha/hora"}},"fr-FR":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Fv","2":"Mar","3":"Avr","4":"Mai","5":"Jun","6":"Jul","7":"Ao","8":"Sep","9":"Oct","10":"Nov","11":"Dc",length:12,isArray:true},MONTHNAME_FULL:{"0":"Janvier","1":"Fvrier","2":"Mars","3":"Avril","4":"Mai","5":"Juin","6":"Juillet","7":"Aot","8":"Septembre","9":"Octobre","10":"Novembre","11":"Dcembre",length:12,isArray:true},dayShortNames:{"0":"D","1":"L","2":"M","3":"M","4":"J","5":"V","6":"S",length:7,isArray:true},dayNames:{"0":"Dimanche","1":"Lundi","2":"Mardi","3":"Mercredi","4":"Jeudi","5":"Vendredi","6":"Samedi",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d/M/yy","1":"d/M/yyyy","2":"d.M.yy","3":"d-M-yy","4":"yyyy-M-d",isArray:true,length:5},TIMEINPUTFORMATS:{"0":"H:m","1":"H:m:s","2":"H 'h' m","3":"H:m:s z",isArray:true,length:4},DATEOUTPUTFORMAT:"dd/MM/yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd/MM/yy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:" "},color:{colors:[{n:"Noir",v:"#000000"},{n:"Marron",v:"#993300"},{n:"Vert olive",v:"#333300"},{n:"Vert fonc",v:"#003300"},{n:"Sarcelle fonc",v:"#003366"},{n:"Bleu fonc",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Gris-80%",v:"#333333"},{n:"Rouge fonc",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Jaune fonc",v:"#808000"},{n:"Vert",v:"#008000"},{n:"Sarcelle",v:"#008080"},{n:"Bleu",v:"#0000FF"},{n:"Bleu-gris",v:"#666699"},{n:"Gris-50%",v:"#808080"},{n:"Rouge",v:"#FF0000"},{n:"Orange clair",v:"#FF9900"},{n:"Citron",v:"#99CC00"},{n:"Vert de mer",v:"#339966"},{n:"Bleu-vert",v:"#33CCCC"},{n:"Bleu clair",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Gris-40%",v:"#969696"},{n:"Rose",v:"#FF00FF"},{n:"Or",v:"#FFCC00"},{n:"Jaune",v:"#FFFF00"},{n:"Vert brillant",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Bleu ciel",v:"#00CCFF"},{n:"Prune",v:"#993366"},{n:"Gris-25%",v:"#C0C0C0"},{n:"Rose clair",v:"#FF99CC"},{n:"Brun clair",v:"#FFCC99"},{n:"Jaune clair",v:"#FFFF99"},{n:"Vert clair",v:"#CCFFCC"},{n:"Turquoise clair",v:"#CCFFFF"},{n:"Bleu ple",v:"#99CCFF"},{n:"Lavande",v:"#CC99FF"},{n:"Blanc",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Inclure"},{did:"2",n:"Exclure"}],BranchQual:[{did:"19",n:"ET"},{did:"20",n:"OU"},{did:"21",n:"Non"},{did:"19_21",n:"ET NON"},{did:"20_21",n:"OU NON"}],RootOperator:[{did:"19",n:"Toutes les slections."},{did:"20",n:"Quelle que soit la slection."}],ExprType:[{did:"2",n:"Qualifier"},{did:"5",n:"Slectionner"}],DimtyLevels:[{did:"1",n:"Par dfaut"},{did:"2",n:"Mesure"},{did:"3",n:"Rapport"}],Attribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,76",n:"Contient",tp:1},{did:"1,79",n:"Ne contient pas",tp:1},{did:"1,77",n:"Commence par",tp:1},{did:"1,80",n:"Ne commence pas par",tp:1},{did:"1,78",n:"Finit par",tp:1},{did:"1,81",n:"Ne finit pas par",tp:1},{did:"1,18",n:"Comme",tp:1},{did:"1,43",n:"Diffrent",tp:1},{did:"1,54",n:"Est nul",tp:1},{did:"1,55",n:"N'est pas nul",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1}],Metric:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,54",n:"Est nul",tp:1},{did:"1,55",n:"N'est pas nul",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1},{did:"2,1",n:"Au plus haut",tp:2},{did:"2,2",n:"Au plus bas",tp:2},{did:"3,1",n:"Au plus haut%",tp:3},{did:"3,2",n:"Au plus bas%",tp:3}],MDXAttribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1}],MDXMetric:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1}],SAPAttribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1}],MetricRP:[{did:"2,13",n:"Parmi les rangs les plus levs",tp:2},{did:"2,4",n:"Exclure le plus haut",tp:2},{did:"2,3",n:"Parmi les rangs les plus bas",tp:2},{did:"2,5",n:"Exclure le plus bas",tp:2},{did:"3,13",n:"Parmi les valeurs les plus leves%",tp:3},{did:"3,4",n:"Exclure le plus haut%",tp:3},{did:"3,3",n:"Parmi les valeurs les plus basses%",tp:3},{did:"3,5",n:"Exclure le plus bas%",tp:3}],Element:[{did:"1,22",n:"Dans la liste",tp:1},{did:"1,57",n:"Pas dans la liste",tp:1}]},validation:{requiredFieldError:"Ce champ est requis.",invalidCharError:"Ce champ contient des caractres non valides pour #",invalidDateStringError:"Ce champ contient une chane de date/d'heure non valide",invalidNumericFormatError:"Ce champ contient une valeur numrique au format non valide",invalidValueInListError:"Une des valeurs (#) dans cette liste n'est pas valide",outofRangeError:"Ce champ doit tre # entre ## et ###.",noLessMinError:"Ce champ doit tre # suprieur ou gal  ##.",noGreaterMaxError:"Ce champ doit tre # infrieur ou gal  ###.",failRegexTestError:"chec de la validation d'expression rgulire pour ce champ.",integerDataType:"une valeur entire",numericDataType:"une valeur numrique",dateDataType:"une valeur Date/Heure"}},"it-IT":{datetime:{MONTHNAME_SHORT:{"0":"Gen","1":"Feb","2":"Mar","3":"Apr","4":"Mag","5":"Giu","6":"Lug","7":"Ago","8":"Set","9":"Ott","10":"Nov","11":"Dic",length:12,isArray:true},MONTHNAME_FULL:{"0":"Gennaio","1":"Febbraio","2":"Marzo","3":"Aprile","4":"Maggio","5":"Giugno","6":"Luglio","7":"Agosto","8":"Settembre","9":"Ottobre","10":"Novembre","11":"Dicembre",length:12,isArray:true},dayShortNames:{"0":"D","1":"L","2":"M","3":"M","4":"G","5":"V","6":"S",length:7,isArray:true},dayNames:{"0":"domenica","1":"luned","2":"marted","3":"mercoled","4":"gioved","5":"venerd","6":"sabato",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d/M/yy","1":"d/M/yyyy","2":"d.M.yy","3":"yyyy-M-d",isArray:true,length:4},TIMEINPUTFORMATS:{"0":"H.mm","1":"H.mm.ss","2":"H.mm.ss z","3":"H:mm:ss",isArray:true,length:4},DATEOUTPUTFORMAT:"dd/MM/yyyy",TIMEOUTPUTFORMAT:"H.mm.ss",DATEDISPLAYFORMAT:"dd/MM/yy",TIMEDISPLAYFORMAT:"H.mm.ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Nero",v:"#000000"},{n:"Marrone",v:"#993300"},{n:"Verde oliva",v:"#333300"},{n:"Verde militare",v:"#003300"},{n:"Verde acqua scuro",v:"#003366"},{n:"Blu scuro",v:"#000080"},{n:"Indaco",v:"#333399"},{n:"Grigio-80%",v:"#333333"},{n:"Rosso scuro",v:"#800000"},{n:"Arancio chiaro",v:"#FF6600"},{n:"Giallo scuro",v:"#808000"},{n:"Verde",v:"#008000"},{n:"Verde acqua scuro",v:"#008080"},{n:"Blu",v:"#0000FF"},{n:"Blu-grigio",v:"#666699"},{n:"Grigio-50%",v:"#808080"},{n:"Rosso",v:"#FF0000"},{n:"Arancione chiaro",v:"#FF9900"},{n:"Verde limone",v:"#99CC00"},{n:"Verde mare",v:"#339966"},{n:"Color acqua",v:"#33CCCC"},{n:"Blu chiaro",v:"#3366FF"},{n:"Violetto chiaro",v:"#800080"},{n:"Grigio-40%",v:"#969696"},{n:"Rosa",v:"#FF00FF"},{n:"Giallo oro",v:"#FFCC00"},{n:"Giallo",v:"#FFFF00"},{n:"Verde brillante",v:"#00FF00"},{n:"Turchese vivo",v:"#00FFFF"},{n:"Celeste",v:"#00CCFF"},{n:"Prugna chiaro",v:"#993366"},{n:"Grigio-25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Marrone chiaro",v:"#FFCC99"},{n:"Giallo lucente",v:"#FFFF99"},{n:"Verde lucente",v:"#CCFFCC"},{n:"Turchese chiaro",v:"#CCFFFF"},{n:"Celeste chiaro",v:"#99CCFF"},{n:"Lavanda",v:"#CC99FF"},{n:"Bianco",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Includi"},{did:"2",n:"Escludi"}],BranchQual:[{did:"19",n:"E"},{did:"20",n:"O"},{did:"21",n:"Not"},{did:"19_21",n:"E NON"},{did:"20_21",n:"O NON"}],RootOperator:[{did:"19",n:"Tutte le selezioni"},{did:"20",n:"Qualsiasi selezione"}],ExprType:[{did:"2",n:"Qualifica"},{did:"5",n:"Seleziona"}],DimtyLevels:[{did:"1",n:"Predefinito"},{did:"2",n:"Metrica"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,76",n:"Contiene",tp:1},{did:"1,79",n:"Non contiene",tp:1},{did:"1,77",n:"Inizia con",tp:1},{did:"1,80",n:"Non inizia per",tp:1},{did:"1,78",n:"Termina con",tp:1},{did:"1,81",n:"Non finisce per",tp:1},{did:"1,18",n:"Simile a",tp:1},{did:"1,43",n:"Non simile a",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1}],Metric:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1},{did:"2,1",n:"Massimo",tp:2},{did:"2,2",n:"Minimo",tp:2},{did:"3,1",n:"Massimo%",tp:3},{did:"3,2",n:"Minimo%",tp:3}],MDXAttribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1}],MDXMetric:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1}],SAPAttribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1}],MetricRP:[{did:"2,13",n:"Classifica tra i pi alti",tp:2},{did:"2,4",n:"Escludi massimo",tp:2},{did:"2,3",n:"Classifica tra i pi bassi",tp:2},{did:"2,5",n:"Escludi minimo",tp:2},{did:"3,13",n:"Tra i pi alti%",tp:3},{did:"3,4",n:"Escludi massimo%",tp:3},{did:"3,3",n:"Tra i pi bassi%",tp:3},{did:"3,5",n:"Escludi minimo%",tp:3}],Element:[{did:"1,22",n:"Nell'elenco",tp:1},{did:"1,57",n:"Non in elenco",tp:1}]},validation:{requiredFieldError:"Campo obbligatorio.",invalidCharError:"Il campo contiene caratteri non validi per #",invalidDateStringError:"Il campo contiene una stringa di data/ora non valida",invalidNumericFormatError:"Il campo contiene un valore numerico di formato errato",invalidValueInListError:"Uno dei valori (#) in questo elenco non  valido",outofRangeError:"Questo campo deve essere # compreso tra ## e ###.",noLessMinError:"Questo campo deve essere # maggiore o uguale a ##.",noGreaterMaxError:"Questo campo deve essere # minore o uguale a ###.",failRegexTestError:"Convalida dell'espressione regolare non riuscita per questo campo.",integerDataType:"un valore intero",numericDataType:"un valore numerico",dateDataType:"un valore di Data/Ora"}},"ja-JP":{datetime:{MONTHNAME_SHORT:{"0":"1","1":"2","2":"3","3":"4","4":"5","5":"6","6":"7","7":"8","8":"9","9":"10","10":"11","11":"12",length:12,isArray:true},MONTHNAME_FULL:{"0":"1 ","1":"2 ","2":"3 ","3":"4 ","4":"5 ","5":"6 ","6":"7 ","7":"8 ","8":"9 ","9":"10 ","10":"11 ","11":"12 ",length:12,isArray:true},dayShortNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},dayNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yy/MM/dd","1":"yyyy/MM/dd","2":"yy/MM/dd (E)","3":"yyyy/MM/dd (E)","4":"yyyy-MM-dd",isArray:true,length:5},TIMEINPUTFORMATS:{"0":"H:mm","1":"H:mm:ss","2":"H:mm:ss:z",isArray:true,length:3},DATEOUTPUTFORMAT:"yyyy/MM/dd",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"yy/MM/dd",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"",PM_NAME:"",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"",v:"#000000"},{n:"",v:"#993300"},{n:" ",v:"#333300"},{n:"",v:"#003300"},{n:"",v:"#003366"},{n:"",v:"#000080"},{n:"",v:"#333399"},{n:"-80%",v:"#333333"},{n:"",v:"#800000"},{n:"",v:"#FF6600"},{n:"",v:"#808000"},{n:"",v:"#008000"},{n:"",v:"#008080"},{n:"",v:"#0000FF"},{n:" ",v:"#666699"},{n:"-50%",v:"#808080"},{n:"",v:"#FF0000"},{n:" ",v:"#FF9900"},{n:"",v:"#99CC00"},{n:"",v:"#339966"},{n:"",v:"#33CCCC"},{n:"",v:"#3366FF"},{n:"",v:"#800080"},{n:"-40%",v:"#969696"},{n:"",v:"#FF00FF"},{n:"",v:"#FFCC00"},{n:"",v:"#FFFF00"},{n:"",v:"#00FF00"},{n:"",v:"#00FFFF"},{n:" ",v:"#00CCFF"},{n:"",v:"#993366"},{n:"-25%",v:"#C0C0C0"},{n:"",v:"#FF99CC"},{n:"",v:"#FFCC99"},{n:"",v:"#FFFF99"},{n:"",v:"#CCFFCC"},{n:" ",v:"#CCFFFF"},{n:"",v:"#99CCFF"},{n:"",v:"#CC99FF"},{n:"",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:""},{did:"2",n:""}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"Not"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"AND "},{did:"20",n:"OR "}],ExprType:[{did:"2",n:""},{did:"5",n:""}],DimtyLevels:[{did:"1",n:""},{did:"2",n:""},{did:"3",n:""}],Attribute:[{did:"1,6",n:"=",tp:1},{did:"1,7",n:"<>",tp:1},{did:"1,8",n:">",tp:1},{did:"1,10",n:">=",tp:1},{did:"1,9",n:"<",tp:1},{did:"1,11",n:"<=",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not Between",tp:1},{did:"1,76",n:"",tp:1},{did:"1,79",n:"",tp:1},{did:"1,77",n:"",tp:1},{did:"1,80",n:"",tp:1},{did:"1,78",n:"",tp:1},{did:"1,81",n:"",tp:1},{did:"1,18",n:"Like",tp:1},{did:"1,43",n:"Not Like",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"IN",tp:1},{did:"1,57",n:"Not In",tp:1}],Metric:[{did:"1,6",n:"=",tp:1},{did:"1,7",n:"<>",tp:1},{did:"1,8",n:">",tp:1},{did:"1,10",n:">=",tp:1},{did:"1,9",n:"<",tp:1},{did:"1,11",n:"<=",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not Between",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"IN",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"2,1",n:"",tp:2},{did:"2,2",n:"",tp:2},{did:"3,1",n:"%",tp:3},{did:"3,2",n:"%",tp:3}],MDXAttribute:[{did:"1,6",n:"=",tp:1},{did:"1,7",n:"<>",tp:1},{did:"1,8",n:">",tp:1},{did:"1,10",n:">=",tp:1},{did:"1,9",n:"<",tp:1},{did:"1,11",n:"<=",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not Between",tp:1},{did:"1,22",n:"IN",tp:1},{did:"1,57",n:"Not In",tp:1}],MDXMetric:[{did:"1,6",n:"=",tp:1},{did:"1,7",n:"<>",tp:1},{did:"1,8",n:">",tp:1},{did:"1,10",n:">=",tp:1},{did:"1,9",n:"<",tp:1},{did:"1,11",n:"<=",tp:1},{did:"1,17",n:"Between",tp:1}],SAPAttribute:[{did:"1,6",n:"=",tp:1},{did:"1,7",n:"<>",tp:1},{did:"1,22",n:"IN",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"1,8",n:">",tp:1},{did:"1,10",n:">=",tp:1},{did:"1,9",n:"<",tp:1},{did:"1,11",n:"<=",tp:1},{did:"1,17",n:"Between",tp:1}],MetricRP:[{did:"2,13",n:" Between ",tp:2},{did:"2,4",n:"",tp:2},{did:"2,3",n:" Between ",tp:2},{did:"2,5",n:"",tp:2},{did:"3,13",n:"%",tp:3},{did:"3,4",n:"%",tp:3},{did:"3,3",n:"%",tp:3},{did:"3,5",n:"%",tp:3}],Element:[{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}]},validation:{requiredFieldError:"",invalidCharError:"# ",invalidDateStringError:"/",invalidNumericFormatError:"",invalidValueInListError:" 1  (#) ",outofRangeError:"##  ###  # ",noLessMinError:"##  # ",noGreaterMaxError:"###  # ",failRegexTestError:"",integerDataType:"",numericDataType:"",dateDataType:"/"}},"ko-KR":{datetime:{MONTHNAME_SHORT:{"0":"1","1":"2","2":"3","3":"4","4":"5","5":"6","6":"7","7":"8","8":"9","9":"10","10":"11","11":"12",length:12,isArray:true},MONTHNAME_FULL:{"0":"1","1":"2","2":"3","3":"4","4":"5","5":"6","6":"7","7":"8","8":"9","9":"10","10":"11","11":"12",length:12,isArray:true},dayShortNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},dayNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yy-M-d","1":"yyyy-M-d",isArray:true,length:2},TIMEINPUTFORMATS:{"0":"H:m","1":"H:m:s","2":"a h:m","3":"a h:m:s",isArray:true,length:4},DATEOUTPUTFORMAT:"yyyy-MM-dd",TIMEOUTPUTFORMAT:"a h:mm:ss",DATEDISPLAYFORMAT:"yy-M-d",TIMEDISPLAYFORMAT:"a h:m:s",AM_NAME:"",PM_NAME:"",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"(Black)",v:"#000000"},{n:"(Brown)",v:"#993300"},{n:"(Olive Green)",v:"#333300"},{n:"(Dark Green)",v:"#003300"},{n:" (Dark Teal)",v:"#003366"},{n:"(Dark Blue)",v:"#000080"},{n:"(Indigo)",v:"#333399"},{n:"-80%",v:"#333333"},{n:"(Dark Red)",v:"#800000"},{n:"(Orange)",v:"#FF6600"},{n:"(Dark Yellow)",v:"#808000"},{n:"(Green)",v:"#008000"},{n:"(Teal)",v:"#008080"},{n:"(Blue)",v:"#0000FF"},{n:"(Blue-Grey)",v:"#666699"},{n:"-50%",v:"#808080"},{n:"(Red)",v:"#FF0000"},{n:"(Light Orange)",v:"#FF9900"},{n:"(Lime)",v:"#99CC00"},{n:"(Sea Green)",v:"#339966"},{n:"(Aqua)",v:"#33CCCC"},{n:"(Light Blue)",v:"#3366FF"},{n:"(Violet)",v:"#800080"},{n:"-40%",v:"#969696"},{n:"(Pink)",v:"#FF00FF"},{n:"(Gold)",v:"#FFCC00"},{n:"(Yellow)",v:"#FFFF00"},{n:" (Bright Green)",v:"#00FF00"},{n:"(Turquoise)",v:"#00FFFF"},{n:"(Sky Blue)",v:"#00CCFF"},{n:"(Plum)",v:"#993366"},{n:"-25%",v:"#C0C0C0"},{n:"(Rose)",v:"#FF99CC"},{n:"(Tan)",v:"#FFCC99"},{n:"(Light Yellow)",v:"#FFFF99"},{n:"(Light Green)",v:"#CCFFCC"},{n:"(Light Turquoise)",v:"#CCFFFF"},{n:" (Pale Blue)",v:"#99CCFF"},{n:" (Lavender)",v:"#CC99FF"},{n:"(White)",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:""},{did:"2",n:""}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"Not"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:" "},{did:"20",n:" "}],ExprType:[{did:"2",n:""},{did:"5",n:""}],DimtyLevels:[{did:"1",n:""},{did:"2",n:""},{did:"3",n:""}],Attribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:" ",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:" ",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,76",n:"",tp:1},{did:"1,79",n:" ",tp:1},{did:"1,77",n:"",tp:1},{did:"1,80",n:" ",tp:1},{did:"1,78",n:"",tp:1},{did:"1,81",n:" ",tp:1},{did:"1,18",n:"",tp:1},{did:"1,43",n:" ",tp:1},{did:"1,54",n:"Null ",tp:1},{did:"1,55",n:"Null ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],Metric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:" ",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:" ",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,54",n:"Null ",tp:1},{did:"1,55",n:"Null ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"2,1",n:" ",tp:2},{did:"2,2",n:" ",tp:2},{did:"3,1",n:" %",tp:3},{did:"3,2",n:" %",tp:3}],MDXAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:" ",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:" ",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],MDXMetric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:" ",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:" ",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1}],SAPAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"1,8",n:" ",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:" ",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1}],MetricRP:[{did:"2,13",n:"   ",tp:2},{did:"2,4",n:"  ",tp:2},{did:"2,3",n:"   ",tp:2},{did:"2,5",n:"  ",tp:2},{did:"3,13",n:" %",tp:3},{did:"3,4",n:"  %",tp:3},{did:"3,3",n:" %",tp:3},{did:"3,5",n:"  %",tp:3}],Element:[{did:"1,22",n:"",tp:1},{did:"1,57",n:" ",tp:1}]},validation:{requiredFieldError:"  .",invalidCharError:"  #     .",invalidDateStringError:"   /   .",invalidNumericFormatError:"       .",invalidValueInListError:"  (#)  .",outofRangeError:"  ##  ###  #()  .",noLessMinError:"  ##   #()  .",noGreaterMaxError:"  ###   #()  .",failRegexTestError:"     .",integerDataType:" ",numericDataType:" ",dateDataType:"/ "}},"nl-NL":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mrt","3":"Apr","4":"Mei","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Okt","10":"Nov","11":"Dec",length:12,isArray:true},MONTHNAME_FULL:{"0":"Januari","1":"Februari","2":"Maart","3":"April","4":"Mei","5":"Juni","6":"Juli","7":"Augustus","8":"September","9":"Oktober","10":"November","11":"December",length:12,isArray:true},dayShortNames:{"0":"Z","1":"M","2":"D","3":"W","4":"D","5":"V","6":"Z",length:7,isArray:true},dayNames:{"0":"Zondag","1":"Maandag","2":"Dinsdag","3":"Woensdag","4":"Donderdag","5":"Vrijdag","6":"Zaterdag",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d-M-yy","1":"dd-MM-yy","2":"dd.MM.yy","3":"dd/MM/yy","4":"yyyy-MM-dd","5":"d-M-yyyy",isArray:true,length:6},TIMEINPUTFORMATS:{"0":"H:mm:ss","1":"HH:mm:ss","2":"H:mm","3":"H.mm","4":"HH.mm.ss' uur'","5":"HH:mm:ss' uur'",isArray:true,length:6},DATEOUTPUTFORMAT:"d-M-yyyy",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"d-M-yyyy",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Zwart",v:"#000000"},{n:"Bruin",v:"#993300"},{n:"Olijfgroen",v:"#333300"},{n:"Donkergroen",v:"#003300"},{n:"Donker Teal",v:"#003366"},{n:"Donkerblauw",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grijs-80%",v:"#333333"},{n:"Donkerrood",v:"#800000"},{n:"Oranje",v:"#FF6600"},{n:"Donkergeel",v:"#808000"},{n:"Groen",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blauw",v:"#0000FF"},{n:"Grijs-blauw",v:"#666699"},{n:"Grijs-50%",v:"#808080"},{n:"Rood",v:"#FF0000"},{n:"Licht oranje",v:"#FF9900"},{n:"Limoen",v:"#99CC00"},{n:"Zeegroen",v:"#339966"},{n:"Waterblauw",v:"#33CCCC"},{n:"Lichtblauw",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grijs-40%",v:"#969696"},{n:"Roze",v:"#FF00FF"},{n:"Goudkleurig",v:"#FFCC00"},{n:"Geel",v:"#FFFF00"},{n:"Heldergroen",v:"#00FF00"},{n:"Turkoois",v:"#00FFFF"},{n:"Hemelsblauw",v:"#00CCFF"},{n:"Donkerrood",v:"#993366"},{n:"Grijs-25%",v:"#C0C0C0"},{n:"Licht Roze",v:"#FF99CC"},{n:"Geelbruin",v:"#FFCC99"},{n:"Lichtgeel",v:"#FFFF99"},{n:"Lichtgroen",v:"#CCFFCC"},{n:"Licht turkoois",v:"#CCFFFF"},{n:"Vaalblauw",v:"#99CCFF"},{n:"Lavendel",v:"#CC99FF"},{n:"Wit",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Insluiten"},{did:"2",n:"Uitsluiten"}],BranchQual:[{did:"19",n:"EN"},{did:"20",n:"OR"},{did:"21",n:"Niet"},{did:"19_21",n:"EN NIET"},{did:"20_21",n:"OF NIET"}],RootOperator:[{did:"19",n:"Alle selecties"},{did:"20",n:"En of meer selecties"}],ExprType:[{did:"2",n:"Kwalificeren"},{did:"5",n:"Selecteren"}],DimtyLevels:[{did:"1",n:"Standaard"},{did:"2",n:"Metrisch"},{did:"3",n:"Rapport"}],Attribute:[{did:"1,6",n:"Gelijk aan",tp:1},{did:"1,7",n:"Ongelijk aan",tp:1},{did:"1,8",n:"Groter dan",tp:1},{did:"1,10",n:"Groter of gelijk aan",tp:1},{did:"1,9",n:"Minder dan",tp:1},{did:"1,11",n:"Minder of gelijk aan",tp:1},{did:"1,17",n:"Tussen",tp:1},{did:"1,44",n:"Niet tussen",tp:1},{did:"1,76",n:"Bevat",tp:1},{did:"1,79",n:"Bevat niet",tp:1},{did:"1,77",n:"Begint met",tp:1},{did:"1,80",n:"Begint niet met",tp:1},{did:"1,78",n:"Eindigt met",tp:1},{did:"1,81",n:"Eindigt niet met",tp:1},{did:"1,18",n:"Zoals",tp:1},{did:"1,43",n:"Niet zoals",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Niet Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Niet in",tp:1}],Metric:[{did:"1,6",n:"Gelijk aan",tp:1},{did:"1,7",n:"Ongelijk aan",tp:1},{did:"1,8",n:"Groter dan",tp:1},{did:"1,10",n:"Groter of gelijk aan",tp:1},{did:"1,9",n:"Minder dan",tp:1},{did:"1,11",n:"Minder of gelijk aan",tp:1},{did:"1,17",n:"Tussen",tp:1},{did:"1,44",n:"Niet tussen",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Niet Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Niet in",tp:1},{did:"2,1",n:"Hoogste",tp:2},{did:"2,2",n:"Laagste",tp:2},{did:"3,1",n:"Hoogste%",tp:3},{did:"3,2",n:"Laagste%",tp:3}],MDXAttribute:[{did:"1,6",n:"Gelijk aan",tp:1},{did:"1,7",n:"Ongelijk aan",tp:1},{did:"1,8",n:"Groter dan",tp:1},{did:"1,10",n:"Groter of gelijk aan",tp:1},{did:"1,9",n:"Minder dan",tp:1},{did:"1,11",n:"Minder of gelijk aan",tp:1},{did:"1,17",n:"Tussen",tp:1},{did:"1,44",n:"Niet tussen",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Niet in",tp:1}],MDXMetric:[{did:"1,6",n:"Gelijk aan",tp:1},{did:"1,7",n:"Ongelijk aan",tp:1},{did:"1,8",n:"Groter dan",tp:1},{did:"1,10",n:"Groter of gelijk aan",tp:1},{did:"1,9",n:"Minder dan",tp:1},{did:"1,11",n:"Minder of gelijk aan",tp:1},{did:"1,17",n:"Tussen",tp:1}],SAPAttribute:[{did:"1,6",n:"Gelijk aan",tp:1},{did:"1,7",n:"Ongelijk aan",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Niet in",tp:1},{did:"1,8",n:"Groter dan",tp:1},{did:"1,10",n:"Groter of gelijk aan",tp:1},{did:"1,9",n:"Minder dan",tp:1},{did:"1,11",n:"Minder of gelijk aan",tp:1},{did:"1,17",n:"Tussen",tp:1}],MetricRP:[{did:"2,13",n:"Rangschikken tussen hoogste",tp:2},{did:"2,4",n:"Hoogste uitsluiten",tp:2},{did:"2,3",n:"Rangschikken tussen laagste",tp:2},{did:"2,5",n:"Laagste uitsluiten",tp:2},{did:"3,13",n:"Tussen hoogste%",tp:3},{did:"3,4",n:"Hoogste uitsluiten%",tp:3},{did:"3,3",n:"Tussen laagste%",tp:3},{did:"3,5",n:"Laagste uitsluiten%",tp:3}],Element:[{did:"1,22",n:"In lijst",tp:1},{did:"1,57",n:"Niet in de lijst",tp:1}]},validation:{requiredFieldError:"Dit veld is verplicht.",invalidCharError:"Dit veld bevat ongeldige tekens voor #",invalidDateStringError:"Dit veld bevat een ongeldige datum/tijd-tekenreeks",invalidNumericFormatError:"Dit veld bevat een numerieke waarde met een onjuiste indeling",invalidValueInListError:"Een van de waarden (#) in deze lijst is ongeldig",outofRangeError:"Dit veld moet # tussen ## en ### bevatten.",noLessMinError:"Dit veld moet # bevatten dat groter dan of gelijk aan ## is.",noGreaterMaxError:"Dit veld moet # bevatten dat kleiner dan of gelijk aan ### is.",failRegexTestError:"De validatie van de reguliere uitdrukking voor dit veld is mislukt.",integerDataType:"een geheel getal",numericDataType:"een getal",dateDataType:"een datum/tijd-waarde"}},"pl-PL":{datetime:{MONTHNAME_SHORT:{"0":"Sty","1":"Lut","2":"Mar","3":"Kwi","4":"Maj","5":"Cze","6":"Lip","7":"Sie","8":"Wrz","9":"Pa","10":"Lis","11":"Gru",length:12,isArray:true},MONTHNAME_FULL:{"0":"Stycze","1":"Luty","2":"Marzec","3":"Kwiecie","4":"Maj","5":"Czerwiec","6":"Lipiec","7":"Sierpie","8":"Wrzesie","9":"Padziernik","10":"Listopad","11":"Grudzie",length:12,isArray:true},dayShortNames:{"0":"N","1":"P","2":"W","3":"","4":"C","5":"P","6":"S",length:7,isArray:true},dayNames:{"0":"Niedziela","1":"Poniedziaek","2":"Wtorek","3":"roda","4":"Czwartek","5":"Pitek","6":"Sobota",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yyyy-MM-dd","1":"yy-MM-dd","2":"dd.MM.yyyy",isArray:true,length:3},TIMEINPUTFORMATS:{"0":"HH:mm:ss","1":"H:mm:ss",isArray:true,length:2},DATEOUTPUTFORMAT:"yyyy-MM-dd",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"yyyy-MM-dd",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:" "},color:{colors:[{n:"Czarny",v:"#000000"},{n:"Brzowy",v:"#993300"},{n:"Oliwkowozielony",v:"#333300"},{n:"Ciemnozielony",v:"#003300"},{n:"Ciemnoszafirowy",v:"#003366"},{n:"Granatowy",v:"#000080"},{n:"Indygo",v:"#333399"},{n:"Szary-80%",v:"#333333"},{n:"Ciemnoczerwony",v:"#800000"},{n:"Pomaraczowy",v:"#FF6600"},{n:"Ciemny ty",v:"#808000"},{n:"Zielony",v:"#008000"},{n:"Szafirowy",v:"#008080"},{n:"Niebieski",v:"#0000FF"},{n:"Bkitnoszary",v:"#666699"},{n:"Szary-50%",v:"#808080"},{n:"Czerwony",v:"#FF0000"},{n:"Jasnopomaraczowy",v:"#FF9900"},{n:"Seledynowy",v:"#99CC00"},{n:"Morska Ziele",v:"#339966"},{n:"Morski",v:"#33CCCC"},{n:"Jasnoniebieski",v:"#3366FF"},{n:"Fioletowy",v:"#800080"},{n:"Szary-40%",v:"#969696"},{n:"Rowy",v:"#FF00FF"},{n:"Zoty",v:"#FFCC00"},{n:"ty",v:"#FFFF00"},{n:"Jasnozielony",v:"#00FF00"},{n:"Turkusowy",v:"#00FFFF"},{n:"Bkitny",v:"#00CCFF"},{n:"liwkowy",v:"#993366"},{n:"Szary-25%",v:"#C0C0C0"},{n:"Rowy",v:"#FF99CC"},{n:"Jasnobrzowy",v:"#FFCC99"},{n:"Jasnoty",v:"#FFFF99"},{n:"Jasnozielony",v:"#CCFFCC"},{n:"Jasnoturkusowy",v:"#CCFFFF"},{n:"Bladoniebieski",v:"#99CCFF"},{n:"Lawendowy",v:"#CC99FF"},{n:"Biay",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Uwzgldnij"},{did:"2",n:"Wyklucz"}],BranchQual:[{did:"19",n:"ORAZ"},{did:"20",n:"LUB"},{did:"21",n:"Nie"},{did:"19_21",n:"ORAZ NIE"},{did:"20_21",n:"LUB NIE"}],RootOperator:[{did:"19",n:"Wszystkie wybory"},{did:"20",n:"Dowolny wybr"}],ExprType:[{did:"2",n:"Kwalifikuj"},{did:"5",n:"Wybierz"}],DimtyLevels:[{did:"1",n:"Domylny"},{did:"2",n:"Metryka"},{did:"3",n:"Raport"}],Attribute:[{did:"1,6",n:"Rwne",tp:1},{did:"1,7",n:"Nierwne",tp:1},{did:"1,8",n:"Wiksze od",tp:1},{did:"1,10",n:"Wiksze lub rwne",tp:1},{did:"1,9",n:"Mniejsze od",tp:1},{did:"1,11",n:"Mniejsze lub rwne",tp:1},{did:"1,17",n:"Pomidzy",tp:1},{did:"1,44",n:"Nie pomidzy",tp:1},{did:"1,76",n:"Zawiera",tp:1},{did:"1,79",n:"Nie zawiera",tp:1},{did:"1,77",n:"Zaczyna si od",tp:1},{did:"1,80",n:"Nie zaczyna si od",tp:1},{did:"1,78",n:"Koczy si na",tp:1},{did:"1,81",n:"Nie koczy si",tp:1},{did:"1,18",n:"Like",tp:1},{did:"1,43",n:"Not Like",tp:1},{did:"1,54",n:"Wynosi Null",tp:1},{did:"1,55",n:"Nie wynosi Null",tp:1},{did:"1,22",n:"W",tp:1},{did:"1,57",n:"Nie w",tp:1}],Metric:[{did:"1,6",n:"Rwne",tp:1},{did:"1,7",n:"Nierwne",tp:1},{did:"1,8",n:"Wiksze od",tp:1},{did:"1,10",n:"Wiksze lub rwne",tp:1},{did:"1,9",n:"Mniejsze od",tp:1},{did:"1,11",n:"Mniejsze lub rwne",tp:1},{did:"1,17",n:"Pomidzy",tp:1},{did:"1,44",n:"Nie pomidzy",tp:1},{did:"1,54",n:"Wynosi Null",tp:1},{did:"1,55",n:"Nie wynosi Null",tp:1},{did:"1,22",n:"W",tp:1},{did:"1,57",n:"Nie w",tp:1},{did:"2,1",n:"Najwyszy",tp:2},{did:"2,2",n:"Najniszy",tp:2},{did:"3,1",n:"Najwyszy%",tp:3},{did:"3,2",n:"Najniszy%",tp:3}],MDXAttribute:[{did:"1,6",n:"Rwne",tp:1},{did:"1,7",n:"Nierwne",tp:1},{did:"1,8",n:"Wiksze od",tp:1},{did:"1,10",n:"Wiksze lub rwne",tp:1},{did:"1,9",n:"Mniejsze od",tp:1},{did:"1,11",n:"Mniejsze lub rwne",tp:1},{did:"1,17",n:"Pomidzy",tp:1},{did:"1,44",n:"Nie pomidzy",tp:1},{did:"1,22",n:"W",tp:1},{did:"1,57",n:"Nie w",tp:1}],MDXMetric:[{did:"1,6",n:"Rwne",tp:1},{did:"1,7",n:"Nierwne",tp:1},{did:"1,8",n:"Wiksze od",tp:1},{did:"1,10",n:"Wiksze lub rwne",tp:1},{did:"1,9",n:"Mniejsze od",tp:1},{did:"1,11",n:"Mniejsze lub rwne",tp:1},{did:"1,17",n:"Pomidzy",tp:1}],SAPAttribute:[{did:"1,6",n:"Rwne",tp:1},{did:"1,7",n:"Nierwne",tp:1},{did:"1,22",n:"W",tp:1},{did:"1,57",n:"Nie w",tp:1},{did:"1,8",n:"Wiksze od",tp:1},{did:"1,10",n:"Wiksze lub rwne",tp:1},{did:"1,9",n:"Mniejsze od",tp:1},{did:"1,11",n:"Mniejsze lub rwne",tp:1},{did:"1,17",n:"Pomidzy",tp:1}],MetricRP:[{did:"2,13",n:"Ranga midzy najwyszymi",tp:2},{did:"2,4",n:"Wycz najwyszy",tp:2},{did:"2,3",n:"Ranga midzy najniszymi",tp:2},{did:"2,5",n:"Wycz najniszy",tp:2},{did:"3,13",n:"Midzy najwyszymi%",tp:3},{did:"3,4",n:"Wycz najwyszy%",tp:3},{did:"3,3",n:"Midzy najniszymi%",tp:3},{did:"3,5",n:"Wycz najniszy%",tp:3}],Element:[{did:"1,22",n:"W licie",tp:1},{did:"1,57",n:"Nie w licie",tp:1}]},validation:{requiredFieldError:"To pole jest wymagane.",invalidCharError:"To pole zawiera nieprawidowe znaki #",invalidDateStringError:"To pole zawiera nieprawidowy wpis daty/czasu",invalidNumericFormatError:"To pole zawiera warto numeryczn w nieprawidowym formacie",invalidValueInListError:"Jedna z wartoci (#) na tej licie nie jest prawidowa",outofRangeError:"W tym polu naley wpisa warto z zakresu od ## do ###.",noLessMinError:"W tym polu naley wpisa warto o # wiksz lub rwn ##.",noGreaterMaxError:"W tym polu naley wpisa warto o # mniejsz lub rwn ###.",failRegexTestError:"To pole zawiera bdne wyraenie regularne.",integerDataType:"warto cakowita",numericDataType:"warto liczbowa",dateDataType:"warto pola Data/czas"}},"pt-BR":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Fev","2":"Mar","3":"Abr","4":"Mai","5":"Jun","6":"Jul","7":"Ago","8":"Set","9":"Out","10":"Nov","11":"Dez",length:12,isArray:true},MONTHNAME_FULL:{"0":"Janeiro","1":"Fevereiro","2":"Maro","3":"Abril","4":"Maio","5":"Junho","6":"Julho","7":"Agosto","8":"Setembro","9":"Outubro","10":"Novembro","11":"Dezembro",length:12,isArray:true},dayShortNames:{"0":"D","1":"S","2":"T","3":"Q","4":"Q","5":"S","6":"S",length:7,isArray:true},dayNames:{"0":"Domingo","1":"Segunda-feira","2":"Tera-feira","3":"Quarta-feira","4":"Quinta-feira","5":"Sexta-feira","6":"Sbado",length:7,isArray:true},DATEINPUTFORMATS:{"0":"d/M/yy","1":"d/M/yyyy","2":"d-M-yy","3":"d-M-yyyy","4":"d.M.yy","5":"d.M.yyyy","6":"yyyy.M.d","7":"yyyy-M-d","8":"dd/MM/yy","9":"dd-MM-yy","10":"dd-MM-yyyy","11":"dd.MM.yy","12":"dd.MM.yyyy","13":"dd.MMM.yyyy","14":"yyyy-MM-dd","15":"dd/MM/yyyy",isArray:true,length:16},TIMEINPUTFORMATS:{"0":"H:mm","1":"HH:mm:ss","2":"H:mm:ss","3":"H:mm:ss z",isArray:true,length:4},DATEOUTPUTFORMAT:"dd/MM/yyyy",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"dd/MM/yyyy",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.#########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:"."},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Verde oliva",v:"#333300"},{n:"Verde escuro",v:"#003300"},{n:"Azul-petrleo escuro",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"ndigo",v:"#333399"},{n:"Cinza-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Laranja",v:"#FF6600"},{n:"Amarelo escuro",v:"#808000"},{n:"Green",v:"#008000"},{n:"Azul-petrleo",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Cinza-azulado",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Laranja claro",v:"#FF9900"},{n:"Lima",v:"#99CC00"},{n:"Verde-mar",v:"#339966"},{n:"Verde-gua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violeta",v:"#800080"},{n:"Cinza-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Dourado",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Verde brilhante",v:"#00FF00"},{n:"Turquesa",v:"#00FFFF"},{n:"Azul-cu",v:"#00CCFF"},{n:"Ameixa",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Marrom",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Verde claro",v:"#CCFFCC"},{n:"Turquesa claro",v:"#CCFFFF"},{n:"Azul plido",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Incluir"},{did:"2",n:"Excluir"}],BranchQual:[{did:"19",n:"E"},{did:"20",n:"OU"},{did:"21",n:"No"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"Todas as selees"},{did:"20",n:"Qualquer seleo"}],ExprType:[{did:"2",n:"Qualificar"},{did:"5",n:"Selecionar"}],DimtyLevels:[{did:"1",n:"Padro"},{did:"2",n:"Mtrica"},{did:"3",n:"Relatrio"}],Attribute:[{did:"1,6",n:"Igual",tp:1},{did:"1,7",n:"No  igual a",tp:1},{did:"1,8",n:"Maior do que",tp:1},{did:"1,10",n:"Maior ou igual a",tp:1},{did:"1,9",n:"menor do que",tp:1},{did:"1,11",n:"Menor ou igual a",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No est entre",tp:1},{did:"1,76",n:"Contm",tp:1},{did:"1,79",n:"No contm",tp:1},{did:"1,77",n:"comea com",tp:1},{did:"1,80",n:"No comea com",tp:1},{did:"1,78",n:"Termina com",tp:1},{did:"1,81",n:"No termina com",tp:1},{did:"1,18",n:"Como",tp:1},{did:"1,43",n:"No  como",tp:1},{did:"1,54",n:"Nulo",tp:1},{did:"1,55",n:"No  Nulo",tp:1},{did:"1,22",n:"Em",tp:1},{did:"1,57",n:"No em",tp:1}],Metric:[{did:"1,6",n:"Igual",tp:1},{did:"1,7",n:"No  igual a",tp:1},{did:"1,8",n:"Maior do que",tp:1},{did:"1,10",n:"Maior ou igual a",tp:1},{did:"1,9",n:"menor do que",tp:1},{did:"1,11",n:"Menor ou igual a",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No est entre",tp:1},{did:"1,54",n:"Nulo",tp:1},{did:"1,55",n:"No  Nulo",tp:1},{did:"1,22",n:"Em",tp:1},{did:"1,57",n:"No em",tp:1},{did:"2,1",n:"Maior",tp:2},{did:"2,2",n:"Menor",tp:2},{did:"3,1",n:"Maior%",tp:3},{did:"3,2",n:"Menor%",tp:3}],MDXAttribute:[{did:"1,6",n:"Igual",tp:1},{did:"1,7",n:"No  igual a",tp:1},{did:"1,8",n:"Maior do que",tp:1},{did:"1,10",n:"Maior ou igual a",tp:1},{did:"1,9",n:"menor do que",tp:1},{did:"1,11",n:"Menor ou igual a",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"No est entre",tp:1},{did:"1,22",n:"Em",tp:1},{did:"1,57",n:"No em",tp:1}],MDXMetric:[{did:"1,6",n:"Igual",tp:1},{did:"1,7",n:"No  igual a",tp:1},{did:"1,8",n:"Maior do que",tp:1},{did:"1,10",n:"Maior ou igual a",tp:1},{did:"1,9",n:"menor do que",tp:1},{did:"1,11",n:"Menor ou igual a",tp:1},{did:"1,17",n:"Entre",tp:1}],SAPAttribute:[{did:"1,6",n:"Igual",tp:1},{did:"1,7",n:"No  igual a",tp:1},{did:"1,22",n:"Em",tp:1},{did:"1,57",n:"No em",tp:1},{did:"1,8",n:"Maior do que",tp:1},{did:"1,10",n:"Maior ou igual a",tp:1},{did:"1,9",n:"menor do que",tp:1},{did:"1,11",n:"Menor ou igual a",tp:1},{did:"1,17",n:"Entre",tp:1}],MetricRP:[{did:"2,13",n:"Classificar entre os maiores",tp:2},{did:"2,4",n:"Excluir mais alto",tp:2},{did:"2,3",n:"Classificar entre os menores",tp:2},{did:"2,5",n:"Excluir mais baixo",tp:2},{did:"3,13",n:"Entre os maiores%",tp:3},{did:"3,4",n:"Excluir mais alto%",tp:3},{did:"3,3",n:"Entre os menores%",tp:3},{did:"3,5",n:"Excluir mais baixo%",tp:3}],Element:[{did:"1,22",n:"Na lista",tp:1},{did:"1,57",n:"No relacionado",tp:1}]},validation:{requiredFieldError:"Este campo  necessrio.",invalidCharError:"Este campo contm caracteres invlidos para #",invalidDateStringError:"Este campo contm string invlida de data/hora",invalidNumericFormatError:"Este campo contm valor numrico com formato incorreto",invalidValueInListError:"Um dos valores (#) nesta lista no  vlido",outofRangeError:"Este campo deve ser # entre ## e ###.",noLessMinError:"Este campo deve ser # maior do que ou igual a ##.",noGreaterMaxError:"Este campo deve ser # menor do que ou igual a ###.",failRegexTestError:"Este campo no passou pela validao da expresso normal.",integerDataType:"um valor de Inteiro",numericDataType:"um valor de Nmero",dateDataType:"um valor Data/Hora"}},"ru-RU":{datetime:{MONTHNAME_SHORT:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"",length:12,isArray:true},MONTHNAME_FULL:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"",length:12,isArray:true},dayShortNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},dayNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd.MM.yyyy","1":"dd.MM.yy","2":"d.M.yyyy","3":"dd/MM/yy","4":"yyyy-MM-dd",isArray:true,length:5},TIMEINPUTFORMATS:{"0":"H:mm:ss","1":"HH:mm:ss",isArray:true,length:2},DATEOUTPUTFORMAT:"dd.MM.yyyy",TIMEOUTPUTFORMAT:"H:mm:ss",DATEDISPLAYFORMAT:"dd.MM.yyyy",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:" "},color:{colors:[{n:"",v:"#000000"},{n:"",v:"#993300"},{n:"-",v:"#333300"},{n:"-",v:"#003300"},{n:"-",v:"#003366"},{n:"-",v:"#000080"},{n:"",v:"#333399"},{n:"-80%",v:"#333333"},{n:"-",v:"#800000"},{n:"",v:"#FF6600"},{n:"-",v:"#808000"},{n:"",v:"#008000"},{n:"",v:"#008080"},{n:"",v:"#0000FF"},{n:"-",v:"#666699"},{n:"-50%",v:"#808080"},{n:"",v:"#FF0000"},{n:"-",v:"#FF9900"},{n:"",v:"#99CC00"},{n:"  ",v:"#339966"},{n:"",v:"#33CCCC"},{n:"-",v:"#3366FF"},{n:"",v:"#800080"},{n:"-40%",v:"#969696"},{n:"-",v:"#FF00FF"},{n:"",v:"#FFCC00"},{n:"",v:"#FFFF00"},{n:"-",v:"#00FF00"},{n:"-",v:"#00FFFF"},{n:"-",v:"#00CCFF"},{n:"-",v:"#993366"},{n:"-25%",v:"#C0C0C0"},{n:"",v:"#FF99CC"},{n:"",v:"#FFCC99"},{n:"-",v:"#FFFF99"},{n:"-",v:"#CCFFCC"},{n:"-",v:"#CCFFFF"},{n:"-",v:"#99CCFF"},{n:"",v:"#CC99FF"},{n:"",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:""},{did:"2",n:":"}],BranchQual:[{did:"19",n:""},{did:"20",n:""},{did:"21",n:""},{did:"19_21",n:" "},{did:"20_21",n:" "}],RootOperator:[{did:"19",n:" "},{did:"20",n:" "}],ExprType:[{did:"2",n:""},{did:"5",n:""}],DimtyLevels:[{did:"1",n:" "},{did:"2",n:""},{did:"3",n:""}],Attribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,76",n:"",tp:1},{did:"1,79",n:" ",tp:1},{did:"1,77",n:" ",tp:1},{did:"1,80",n:"  ",tp:1},{did:"1,78",n:" ",tp:1},{did:"1,81",n:"  ",tp:1},{did:"1,18",n:"",tp:1},{did:"1,43",n:"",tp:1},{did:"1,54",n:" ",tp:1},{did:"1,55",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:" ",tp:1}],Metric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,54",n:" ",tp:1},{did:"1,55",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:" ",tp:1},{did:"2,1",n:"",tp:2},{did:"2,2",n:"",tp:2},{did:"3,1",n:"%",tp:3},{did:"3,2",n:"%",tp:3}],MDXAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:" ",tp:1}],MDXMetric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1}],SAPAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:" ",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:" ",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:" ",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:" ",tp:1},{did:"1,17",n:"",tp:1}],MetricRP:[{did:"2,13",n:"   ",tp:2},{did:"2,4",n:" ",tp:2},{did:"2,3",n:"   ",tp:2},{did:"2,5",n:" ",tp:2},{did:"3,13",n:" %",tp:3},{did:"3,4",n:" %",tp:3},{did:"3,3",n:" %",tp:3},{did:"3,5",n:" %",tp:3}],Element:[{did:"1,22",n:" ",tp:1},{did:"1,57",n:"  ",tp:1}]},validation:{requiredFieldError:"   .",invalidCharError:"      #",invalidDateStringError:"       ",invalidNumericFormatError:"       ",invalidValueInListError:"   (#)    ",outofRangeError:"    #   ##  ### .",noLessMinError:"     #    ##.",noGreaterMaxError:"     #    ###.",failRegexTestError:"      .",integerDataType:" ",numericDataType:" ",dateDataType:" '  '"}},"sv-SE":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mar","3":"Apr","4":"Maj","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Okt","10":"Nov","11":"Dec",length:12,isArray:true},MONTHNAME_FULL:{"0":"Januari","1":"Februari","2":"Mars","3":"April","4":"Maj","5":"Juni","6":"Juli","7":"Augusti","8":"September","9":"Oktober","10":"November","11":"December",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"T","3":"O","4":"T","5":"F","6":"L",length:7,isArray:true},dayNames:{"0":"sndag","1":"mndag","2":"tisdag","3":"onsdag","4":"torsdag","5":"fredag","6":"lrdag",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yy-M-d","1":"yyyy-M-d",isArray:true,length:2},TIMEINPUTFORMATS:{"0":"H:m","1":"H:m:s","2":"H:m:s z",isArray:true,length:3},DATEOUTPUTFORMAT:"yyyy-MM-dd",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"yyyy-MM-dd",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:",",THOUSANDSEPARATOR:" "},color:{colors:[{n:"Svart",v:"#000000"},{n:"Brun",v:"#993300"},{n:"Olivgrn",v:"#333300"},{n:"Mrkgrn",v:"#003300"},{n:"Mrkt grnbl",v:"#003366"},{n:"Mrkbl",v:"#000080"},{n:"Indigo-bl",v:"#333399"},{n:"Gr-80%",v:"#333333"},{n:"Mrkrd",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Mrkgul",v:"#808000"},{n:"Grn",v:"#008000"},{n:"Kricka",v:"#008080"},{n:"Bl",v:"#0000FF"},{n:"Blgr",v:"#666699"},{n:"Gr-50%",v:"#808080"},{n:"Rd",v:"#FF0000"},{n:"Ljusorange",v:"#FF9900"},{n:"Lemon",v:"#99CC00"},{n:"Sjgrn",v:"#339966"},{n:"Akva",v:"#33CCCC"},{n:"Ljusbl",v:"#3366FF"},{n:"Violett",v:"#800080"},{n:"Gr-40%",v:"#969696"},{n:"Skr",v:"#FF00FF"},{n:"Guld",v:"#FFCC00"},{n:"Gul",v:"#FFFF00"},{n:"Ljusgrn",v:"#00FF00"},{n:"Turkos",v:"#00FFFF"},{n:"Himmelsbl",v:"#00CCFF"},{n:"Plommon",v:"#993366"},{n:"Gr-25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Gulbrun",v:"#FFCC99"},{n:"Ljusgul",v:"#FFFF99"},{n:"Ljusgrn",v:"#CCFFCC"},{n:"Ljusturkos",v:"#CCFFFF"},{n:"Svagt bl",v:"#99CCFF"},{n:"Lavendel",v:"#CC99FF"},{n:"Vit",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Inkludera"},{did:"2",n:"Uteslut"}],BranchQual:[{did:"19",n:"OCH"},{did:"20",n:"ELLER"},{did:"21",n:"Inte"},{did:"19_21",n:"OCH INTE"},{did:"20_21",n:"ELLER INTE"}],RootOperator:[{did:"19",n:"Alla val"},{did:"20",n:"Ngot val"}],ExprType:[{did:"2",n:"kvalificera"},{did:"5",n:"Vlj"}],DimtyLevels:[{did:"1",n:"Standard"},{did:"2",n:"Mttenhet"},{did:"3",n:"Rapport"}],Attribute:[{did:"1,6",n:"r lika med",tp:1},{did:"1,7",n:"r inte lika med",tp:1},{did:"1,8",n:"Strre n",tp:1},{did:"1,10",n:"Strre n eller lika med",tp:1},{did:"1,9",n:"Mindre n",tp:1},{did:"1,11",n:"Mindre n eller lika med",tp:1},{did:"1,17",n:"Mellan",tp:1},{did:"1,44",n:"Inte mellan",tp:1},{did:"1,76",n:"Innehller",tp:1},{did:"1,79",n:"Innehller inte",tp:1},{did:"1,77",n:"Brjar p",tp:1},{did:"1,80",n:"Brjar inte med",tp:1},{did:"1,78",n:"Slutar med",tp:1},{did:"1,81",n:"Avslutas inte med",tp:1},{did:"1,18",n:"Som",tp:1},{did:"1,43",n:"Inte Som",tp:1},{did:"1,54",n:"r null",tp:1},{did:"1,55",n:"r inte null",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Inte inne",tp:1}],Metric:[{did:"1,6",n:"r lika med",tp:1},{did:"1,7",n:"r inte lika med",tp:1},{did:"1,8",n:"Strre n",tp:1},{did:"1,10",n:"Strre n eller lika med",tp:1},{did:"1,9",n:"Mindre n",tp:1},{did:"1,11",n:"Mindre n eller lika med",tp:1},{did:"1,17",n:"Mellan",tp:1},{did:"1,44",n:"Inte mellan",tp:1},{did:"1,54",n:"r null",tp:1},{did:"1,55",n:"r inte null",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Inte inne",tp:1},{did:"2,1",n:"Hgsta",tp:2},{did:"2,2",n:"Lgsta",tp:2},{did:"3,1",n:"Hgsta%",tp:3},{did:"3,2",n:"Lgsta%",tp:3}],MDXAttribute:[{did:"1,6",n:"r lika med",tp:1},{did:"1,7",n:"r inte lika med",tp:1},{did:"1,8",n:"Strre n",tp:1},{did:"1,10",n:"Strre n eller lika med",tp:1},{did:"1,9",n:"Mindre n",tp:1},{did:"1,11",n:"Mindre n eller lika med",tp:1},{did:"1,17",n:"Mellan",tp:1},{did:"1,44",n:"Inte mellan",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Inte inne",tp:1}],MDXMetric:[{did:"1,6",n:"r lika med",tp:1},{did:"1,7",n:"r inte lika med",tp:1},{did:"1,8",n:"Strre n",tp:1},{did:"1,10",n:"Strre n eller lika med",tp:1},{did:"1,9",n:"Mindre n",tp:1},{did:"1,11",n:"Mindre n eller lika med",tp:1},{did:"1,17",n:"Mellan",tp:1}],SAPAttribute:[{did:"1,6",n:"r lika med",tp:1},{did:"1,7",n:"r inte lika med",tp:1},{did:"1,22",n:"I",tp:1},{did:"1,57",n:"Inte inne",tp:1},{did:"1,8",n:"Strre n",tp:1},{did:"1,10",n:"Strre n eller lika med",tp:1},{did:"1,9",n:"Mindre n",tp:1},{did:"1,11",n:"Mindre n eller lika med",tp:1},{did:"1,17",n:"Mellan",tp:1}],MetricRP:[{did:"2,13",n:"Rankning mellan hgsta",tp:2},{did:"2,4",n:"Tag bort hgsta",tp:2},{did:"2,3",n:"Rankning mellan lgsta",tp:2},{did:"2,5",n:"Tag bort lgsta",tp:2},{did:"3,13",n:"Mellan hgsta%",tp:3},{did:"3,4",n:"Tag bort hgsta%",tp:3},{did:"3,3",n:"Mellan lgsta%",tp:3},{did:"3,5",n:"Tag bort lgsta%",tp:3}],Element:[{did:"1,22",n:"I lista",tp:1},{did:"1,57",n:"Inte i lista",tp:1}]},validation:{requiredFieldError:"Fltet r obligatoriskt.",invalidCharError:"Det hr fltet innehller ogiltiga tecken fr #",invalidDateStringError:"Det hr fltet innehller en ogiltig datum-/tidstrng",invalidNumericFormatError:"Det hr fltet innehller ett numeriskt vrde med felaktigt format",invalidValueInListError:"Ett av vrdena (#) i den hr listan r inte giltigt",outofRangeError:"Detta flt ska vara # mellan ## och ###.",noLessMinError:"Detta flt ska vara # strre n eller lika med ##.",noGreaterMaxError:"Detta flt ska vara # mindre n eller lika med ###.",failRegexTestError:"Detta flt underkndes i verifieringen av vanliga uttryck.",integerDataType:"ett heltal",numericDataType:"ett siffervrde",dateDataType:"ett datum-/tidvrde"}},"zh-CN":{datetime:{MONTHNAME_SHORT:{"0":"1","1":"2","2":"3","3":"4","4":"5","5":"6","6":"7","7":"8","8":"9","9":"10","10":"11","11":"12",length:12,isArray:true},MONTHNAME_FULL:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"","7":"","8":"","9":"","10":"","11":"",length:12,isArray:true},dayShortNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},dayNames:{"0":"","1":"","2":"","3":"","4":"","5":"","6":"",length:7,isArray:true},DATEINPUTFORMATS:{"0":"yy-M-d","1":"yyyy-M-d","2":"yyyy/M/d",isArray:true,length:3},TIMEINPUTFORMATS:{"0":"H:m","1":"H:m:s","2":"a h:m","3":"a h:m:s",isArray:true,length:4},DATEOUTPUTFORMAT:"yyyy-MM-dd",TIMEOUTPUTFORMAT:"a h:mm:ss",DATEDISPLAYFORMAT:"yy-M-d",TIMEDISPLAYFORMAT:"H:mm:ss",AM_NAME:"",PM_NAME:"",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"",v:"#000000"},{n:"",v:"#993300"},{n:"",v:"#333300"},{n:"",v:"#003300"},{n:"",v:"#003366"},{n:"",v:"#000080"},{n:"",v:"#333399"},{n:"-80%",v:"#333333"},{n:"",v:"#800000"},{n:"",v:"#FF6600"},{n:"",v:"#808000"},{n:"",v:"#008000"},{n:"",v:"#008080"},{n:"",v:"#0000FF"},{n:"",v:"#666699"},{n:"-50%",v:"#808080"},{n:"",v:"#FF0000"},{n:"",v:"#FF9900"},{n:"",v:"#99CC00"},{n:"",v:"#339966"},{n:"",v:"#33CCCC"},{n:"",v:"#3366FF"},{n:"",v:"#800080"},{n:"-40%",v:"#969696"},{n:"",v:"#FF00FF"},{n:"",v:"#FFCC00"},{n:"",v:"#FFFF00"},{n:"",v:"#00FF00"},{n:"",v:"#00FFFF"},{n:"",v:"#00CCFF"},{n:"",v:"#993366"},{n:"-25%",v:"#C0C0C0"},{n:"",v:"#FF99CC"},{n:"",v:"#FFCC99"},{n:"",v:"#FFFF99"},{n:"",v:"#CCFFCC"},{n:"",v:"#CCFFFF"},{n:"",v:"#99CCFF"},{n:"",v:"#CC99FF"},{n:"",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:""},{did:"2",n:""}],BranchQual:[{did:"19",n:""},{did:"20",n:""},{did:"21",n:"NOT"},{did:"19_21",n:""},{did:"20_21",n:""}],RootOperator:[{did:"19",n:""},{did:"20",n:""}],ExprType:[{did:"2",n:""},{did:"5",n:""}],DimtyLevels:[{did:"1",n:""},{did:"2",n:""},{did:"3",n:""}],Attribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,76",n:"",tp:1},{did:"1,79",n:"",tp:1},{did:"1,77",n:"",tp:1},{did:"1,80",n:"",tp:1},{did:"1,78",n:"",tp:1},{did:"1,81",n:"",tp:1},{did:"1,18",n:"",tp:1},{did:"1,43",n:"",tp:1},{did:"1,54",n:"",tp:1},{did:"1,55",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],Metric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,54",n:"",tp:1},{did:"1,55",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"2,1",n:"",tp:2},{did:"2,2",n:"",tp:2},{did:"3,1",n:"%",tp:3},{did:"3,2",n:"%",tp:3}],MDXAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1},{did:"1,44",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}],MDXMetric:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1}],SAPAttribute:[{did:"1,6",n:"",tp:1},{did:"1,7",n:"",tp:1},{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1},{did:"1,8",n:"",tp:1},{did:"1,10",n:"",tp:1},{did:"1,9",n:"",tp:1},{did:"1,11",n:"",tp:1},{did:"1,17",n:"",tp:1}],MetricRP:[{did:"2,13",n:"",tp:2},{did:"2,4",n:"",tp:2},{did:"2,3",n:"",tp:2},{did:"2,5",n:"",tp:2},{did:"3,13",n:"%",tp:3},{did:"3,4",n:"%",tp:3},{did:"3,3",n:"%",tp:3},{did:"3,5",n:"%",tp:3}],Element:[{did:"1,22",n:"",tp:1},{did:"1,57",n:"",tp:1}]},validation:{requiredFieldError:"",invalidCharError:" # ",invalidDateStringError:"/",invalidNumericFormatError:"",invalidValueInListError:"(#)",outofRangeError:" #  ##  ### ",noLessMinError:" #  ##",noGreaterMaxError:" #  ###",failRegexTestError:"",integerDataType:"",numericDataType:"",dateDataType:"/"}},"de-CH":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mrz","3":"Apr","4":"Mai","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Okt","10":"Nov","11":"Dez",length:12,isArray:true},MONTHNAME_FULL:{"0":"Januar","1":"Februar","2":"Mrz","3":"April","4":"Mai","5":"Juni","6":"Juli","7":"August","8":"September","9":"Oktober","10":"November","11":"Dezember",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"D","3":"M","4":"D","5":"F","6":"S",length:7,isArray:true},dayNames:{"0":"Sonntag","1":"Montag","2":"Dienstag","3":"Mittwoch","4":"Donnerstag","5":"Freitag","6":"Samstag",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd.MM.yyyy","1":"dd.MM.yy","2":"d.MM.yy","3":"dd. M. yy","4":"d.M.yy","5":"yyyy-MM-dd",isArray:true,length:6},TIMEINPUTFORMATS:{"0":"HH:mm:ss","1":"H:mm:ss","2":"H.mm' h'","3":"HH.mm' h'","4":"H.mm' Uhr'",isArray:true,length:5},DATEOUTPUTFORMAT:"dd.MM.yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd.MM.yyyy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:"'"},color:{colors:[{n:"Schwarz",v:"#000000"},{n:"Braun",v:"#993300"},{n:"Olivgrn",v:"#333300"},{n:"Dunkelgrn",v:"#003300"},{n:"Krickentengrn",v:"#003366"},{n:"Dunkelblau",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grau - 80 %",v:"#333333"},{n:"Dunkelrot",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dunkelgelb",v:"#808000"},{n:"Grn",v:"#008000"},{n:"Krickentengrn",v:"#008080"},{n:"Blau",v:"#0000FF"},{n:"Blaugrau",v:"#666699"},{n:"Grau - 50 %",v:"#808080"},{n:"Rot",v:"#FF0000"},{n:"Hellorange",v:"#FF9900"},{n:"Limone",v:"#99CC00"},{n:"Seegrn",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Hellblau",v:"#3366FF"},{n:"Violett",v:"#800080"},{n:"Grau - 40 %",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Gelb",v:"#FFFF00"},{n:"Leuchtend grn",v:"#00FF00"},{n:"Trkis",v:"#00FFFF"},{n:"Himmelblau",v:"#00CCFF"},{n:"Pflaume",v:"#993366"},{n:"Grau - 25 %",v:"#C0C0C0"},{n:"Ros",v:"#FF99CC"},{n:"Hellbraun",v:"#FFCC99"},{n:"Hellgelb",v:"#FFFF99"},{n:"Hellgrn",v:"#CCFFCC"},{n:"Helltrkis",v:"#CCFFFF"},{n:"Bla",v:"#99CCFF"},{n:"Lavendel",v:"#CC99FF"},{n:"Wei",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Einschlieen"},{did:"2",n:"Ausschlieen"}],BranchQual:[{did:"19",n:"UND"},{did:"20",n:"ODER"},{did:"21",n:"Nicht"},{did:"19_21",n:"UND NICHT"},{did:"20_21",n:"ODER NICHT"}],RootOperator:[{did:"19",n:"Gesamte Auswahl"},{did:"20",n:"Beliebige Auswahl"}],ExprType:[{did:"2",n:"Qualifizieren"},{did:"5",n:"Auswahl"}],DimtyLevels:[{did:"1",n:"Standard"},{did:"2",n:"Metrik"},{did:"3",n:"Berichte"}],Attribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,76",n:"Enthlt",tp:1},{did:"1,79",n:"enthlt nicht",tp:1},{did:"1,77",n:"Beginnt mit",tp:1},{did:"1,80",n:"beginnt nicht mit",tp:1},{did:"1,78",n:"Endet auf",tp:1},{did:"1,81",n:"endet nicht mit",tp:1},{did:"1,18",n:"hnlich",tp:1},{did:"1,43",n:"Nicht hnlich",tp:1},{did:"1,54",n:"Ist NULL",tp:1},{did:"1,55",n:"Ist nicht NULL",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1}],Metric:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,54",n:"Ist NULL",tp:1},{did:"1,55",n:"Ist nicht NULL",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1},{did:"2,1",n:"Hchste",tp:2},{did:"2,2",n:"Niedrigste",tp:2},{did:"3,1",n:"Hchste%",tp:3},{did:"3,2",n:"Niedrigste%",tp:3}],MDXAttribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1},{did:"1,44",n:"Nicht zwischen",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1}],MDXMetric:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1}],SAPAttribute:[{did:"1,6",n:"Gleich",tp:1},{did:"1,7",n:"Ungleich",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Nicht in",tp:1},{did:"1,8",n:"Grer als",tp:1},{did:"1,10",n:"Grer oder gleich",tp:1},{did:"1,9",n:"Kleiner als",tp:1},{did:"1,11",n:"Kleiner oder gleich",tp:1},{did:"1,17",n:"Zwischen",tp:1}],MetricRP:[{did:"2,13",n:"Rangfolge zwischen hchsten",tp:2},{did:"2,4",n:"Hchsten ausschlieen",tp:2},{did:"2,3",n:"Rangfolge zwischen niedrigsten",tp:2},{did:"2,5",n:"Niedrigsten ausschlieen",tp:2},{did:"3,13",n:"Zwischen hchsten%",tp:3},{did:"3,4",n:"Hchsten ausschlieen%",tp:3},{did:"3,3",n:"Zwischen niedrigsten%",tp:3},{did:"3,5",n:"Niedrigsten ausschlieen%",tp:3}],Element:[{did:"1,22",n:"in der Liste enthalten",tp:1},{did:"1,57",n:"nicht in der Liste enthalten",tp:1}]},validation:{requiredFieldError:"Dieses Feld ist erforderlich.",invalidCharError:"Dieses Feld enthlt ungltige Zeichen fr #",invalidDateStringError:"Dieses Feld enthlt ungltigen Datums-/Zeit-String",invalidNumericFormatError:"Dieses Feld beinhaltet numerischen Wert mit falschem Format",invalidValueInListError:"Einer der Werte (#) in dieser Liste ist nicht gltig",outofRangeError:"Dieses Feld sollte # zwischen ## und ### sein.",noLessMinError:"Dieses Feld sollte # grer oder gleich ## sein.",noGreaterMaxError:"Dieses Feld sollte # kleiner oder gleich ### sein.",failRegexTestError:"Dieses Feld hat die regulre Ausdrucksberprfung nicht bestanden.",integerDataType:"ein Ganzzahlwert",numericDataType:"ein numerischer Wert",dateDataType:"ein Datums-/Zeitwert"}},"en-GB":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Feb","2":"Mar","3":"Apr","4":"May","5":"Jun","6":"Jul","7":"Aug","8":"Sep","9":"Oct","10":"Nov","11":"Dec",length:12,isArray:true},MONTHNAME_FULL:{"0":"January","1":"February","2":"March","3":"April","4":"May","5":"June","6":"July","7":"August","8":"September","9":"October","10":"November","11":"December",length:12,isArray:true},dayShortNames:{"0":"S","1":"M","2":"T","3":"W","4":"T","5":"F","6":"S",length:7,isArray:true},dayNames:{"0":"Sunday","1":"Monday","2":"Tuesday","3":"Wednesday","4":"Thursday","5":"Friday","6":"Saturday",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd/MM/yy","1":"dd/MM/yyyy","2":"dd-MMM-yy","3":"dd MMMM yy","4":"yyyy-M-d",isArray:true,length:5},TIMEINPUTFORMATS:{"0":"HH:mm","1":"HH:mm:ss","2":"HH:mm:ss z",isArray:true,length:3},DATEOUTPUTFORMAT:"dd/MM/yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd/MM/yy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Include"},{did:"2",n:"Exclude"}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"Not"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"All selections"},{did:"20",n:"Any selection"}],ExprType:[{did:"2",n:"Qualify"},{did:"5",n:"Select"}],DimtyLevels:[{did:"1",n:"Default"},{did:"2",n:"Metric"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,76",n:"Contains",tp:1},{did:"1,79",n:"Does not contain",tp:1},{did:"1,77",n:"Begins with",tp:1},{did:"1,80",n:"Does not begin with",tp:1},{did:"1,78",n:"Ends with",tp:1},{did:"1,81",n:"Does not end with",tp:1},{did:"1,18",n:"Like",tp:1},{did:"1,43",n:"Not Like",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1}],Metric:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"2,1",n:"Highest",tp:2},{did:"2,2",n:"Lowest",tp:2},{did:"3,1",n:"Highest%",tp:3},{did:"3,2",n:"Lowest%",tp:3}],MDXAttribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1},{did:"1,44",n:"Not between",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1}],MDXMetric:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1}],SAPAttribute:[{did:"1,6",n:"Equals",tp:1},{did:"1,7",n:"Does not equal",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Not In",tp:1},{did:"1,8",n:"Greater than",tp:1},{did:"1,10",n:"Greater than or equal to",tp:1},{did:"1,9",n:"Less than",tp:1},{did:"1,11",n:"Less than or equal to",tp:1},{did:"1,17",n:"Between",tp:1}],MetricRP:[{did:"2,13",n:"Rank between highest",tp:2},{did:"2,4",n:"Exclude highest",tp:2},{did:"2,3",n:"Rank between lowest",tp:2},{did:"2,5",n:"Exclude lowest",tp:2},{did:"3,13",n:"Between highest%",tp:3},{did:"3,4",n:"Exclude highest%",tp:3},{did:"3,3",n:"Between lowest%",tp:3},{did:"3,5",n:"Exclude lowest%",tp:3}],Element:[{did:"1,22",n:"In List",tp:1},{did:"1,57",n:"Not In List",tp:1}]},validation:{requiredFieldError:"This field is required.",invalidCharError:"This field contains invalid characters for #",invalidDateStringError:"This field contains invalid date/time string",invalidNumericFormatError:"This field contains numeric value with incorrect format",invalidValueInListError:"One of the value (#) in this list is not valid",outofRangeError:"This field should be # between ## and ###.",noLessMinError:"This field should be # greater than or equal to ##.",noGreaterMaxError:"This field should be # less than or equal to ###.",failRegexTestError:"This field failed regular expression validation.",integerDataType:"an Integer value",numericDataType:"a Number value",dateDataType:"a Date/Time value"}},"fr-BE":{},"it-CH":{datetime:{MONTHNAME_SHORT:{"0":"Gen","1":"Feb","2":"Mar","3":"Apr","4":"Mag","5":"Giu","6":"Lug","7":"Ago","8":"Set","9":"Ott","10":"Nov","11":"Dic",length:12,isArray:true},MONTHNAME_FULL:{"0":"Gennaio","1":"Febbraio","2":"Marzo","3":"Aprile","4":"Maggio","5":"Giugno","6":"Luglio","7":"Agosto","8":"Settembre","9":"Ottobre","10":"Novembre","11":"Dicembre",length:12,isArray:true},dayShortNames:{"0":"D","1":"L","2":"M","3":"M","4":"G","5":"V","6":"S",length:7,isArray:true},dayNames:{"0":"domenica","1":"luned","2":"marted","3":"mercoled","4":"gioved","5":"venerd","6":"sabato",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd.MM.yyyy","1":"dd.MM.yy","2":"dd. MM. yy","3":"d/M/yy","4":"dd.M.yy","5":"yyyy-MM-dd","6":"d MMM yyyy",isArray:true,length:7},TIMEINPUTFORMATS:{"0":"HH:mm:ss","1":"H:mm:ss","2":"H.mm' h'",isArray:true,length:3},DATEOUTPUTFORMAT:"dd.MM.yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd.MM.yyyy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:"'"},color:{colors:[{n:"Nero",v:"#000000"},{n:"Marrone",v:"#993300"},{n:"Verde oliva",v:"#333300"},{n:"Verde militare",v:"#003300"},{n:"Verde acqua scuro",v:"#003366"},{n:"Blu scuro",v:"#000080"},{n:"Indaco",v:"#333399"},{n:"Grigio-80%",v:"#333333"},{n:"Rosso scuro",v:"#800000"},{n:"Arancio chiaro",v:"#FF6600"},{n:"Giallo scuro",v:"#808000"},{n:"Verde",v:"#008000"},{n:"Verde acqua scuro",v:"#008080"},{n:"Blu",v:"#0000FF"},{n:"Blu-grigio",v:"#666699"},{n:"Grigio-50%",v:"#808080"},{n:"Rosso",v:"#FF0000"},{n:"Arancione chiaro",v:"#FF9900"},{n:"Verde limone",v:"#99CC00"},{n:"Verde mare",v:"#339966"},{n:"Color acqua",v:"#33CCCC"},{n:"Blu chiaro",v:"#3366FF"},{n:"Violetto chiaro",v:"#800080"},{n:"Grigio-40%",v:"#969696"},{n:"Rosa",v:"#FF00FF"},{n:"Giallo oro",v:"#FFCC00"},{n:"Giallo",v:"#FFFF00"},{n:"Verde brillante",v:"#00FF00"},{n:"Turchese vivo",v:"#00FFFF"},{n:"Celeste",v:"#00CCFF"},{n:"Prugna chiaro",v:"#993366"},{n:"Grigio-25%",v:"#C0C0C0"},{n:"Rosa",v:"#FF99CC"},{n:"Marrone chiaro",v:"#FFCC99"},{n:"Giallo lucente",v:"#FFFF99"},{n:"Verde lucente",v:"#CCFFCC"},{n:"Turchese chiaro",v:"#CCFFFF"},{n:"Celeste chiaro",v:"#99CCFF"},{n:"Lavanda",v:"#CC99FF"},{n:"Bianco",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Includi"},{did:"2",n:"Escludi"}],BranchQual:[{did:"19",n:"E"},{did:"20",n:"O"},{did:"21",n:"Not"},{did:"19_21",n:"E NON"},{did:"20_21",n:"O NON"}],RootOperator:[{did:"19",n:"Tutte le selezioni"},{did:"20",n:"Qualsiasi selezione"}],ExprType:[{did:"2",n:"Qualifica"},{did:"5",n:"Seleziona"}],DimtyLevels:[{did:"1",n:"Predefinito"},{did:"2",n:"Metrica"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,76",n:"Contiene",tp:1},{did:"1,79",n:"Non contiene",tp:1},{did:"1,77",n:"Inizia con",tp:1},{did:"1,80",n:"Non inizia per",tp:1},{did:"1,78",n:"Termina con",tp:1},{did:"1,81",n:"Non finisce per",tp:1},{did:"1,18",n:"Simile a",tp:1},{did:"1,43",n:"Non simile a",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1}],Metric:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,54",n:"Is Null",tp:1},{did:"1,55",n:"Is Not Null",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1},{did:"2,1",n:"Massimo",tp:2},{did:"2,2",n:"Minimo",tp:2},{did:"3,1",n:"Massimo%",tp:3},{did:"3,2",n:"Minimo%",tp:3}],MDXAttribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1},{did:"1,44",n:"Non tra",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1}],MDXMetric:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1}],SAPAttribute:[{did:"1,6",n:" uguale a",tp:1},{did:"1,7",n:"Non  uguale a",tp:1},{did:"1,22",n:"In",tp:1},{did:"1,57",n:"Non in",tp:1},{did:"1,8",n:"Maggiore di",tp:1},{did:"1,10",n:"Maggiore o uguale a",tp:1},{did:"1,9",n:"Minore di",tp:1},{did:"1,11",n:"Minore o uguale a",tp:1},{did:"1,17",n:"Tra",tp:1}],MetricRP:[{did:"2,13",n:"Classifica tra i pi alti",tp:2},{did:"2,4",n:"Escludi massimo",tp:2},{did:"2,3",n:"Classifica tra i pi bassi",tp:2},{did:"2,5",n:"Escludi minimo",tp:2},{did:"3,13",n:"Tra i pi alti%",tp:3},{did:"3,4",n:"Escludi massimo%",tp:3},{did:"3,3",n:"Tra i pi bassi%",tp:3},{did:"3,5",n:"Escludi minimo%",tp:3}],Element:[{did:"1,22",n:"Nell'elenco",tp:1},{did:"1,57",n:"Non in elenco",tp:1}]},validation:{requiredFieldError:"Campo obbligatorio.",invalidCharError:"Il campo contiene caratteri non validi per #",invalidDateStringError:"Il campo contiene una stringa di data/ora non valida",invalidNumericFormatError:"Il campo contiene un valore numerico di formato errato",invalidValueInListError:"Uno dei valori (#) in questo elenco non  valido",outofRangeError:"Questo campo deve essere # compreso tra ## e ###.",noLessMinError:"Questo campo deve essere # maggiore o uguale a ##.",noGreaterMaxError:"Questo campo deve essere # minore o uguale a ###.",failRegexTestError:"Convalida dell'espressione regolare non riuscita per questo campo.",integerDataType:"un valore intero",numericDataType:"un valore numerico",dateDataType:"un valore di Data/Ora"}},"fr-CH":{datetime:{MONTHNAME_SHORT:{"0":"Jan","1":"Fv","2":"Mar","3":"Avr","4":"Mai","5":"Jun","6":"Jul","7":"Ao","8":"Sep","9":"Oct","10":"Nov","11":"Dc",length:12,isArray:true},MONTHNAME_FULL:{"0":"Janvier","1":"Fvrier","2":"Mars","3":"Avril","4":"Mai","5":"Juin","6":"Juillet","7":"Aot","8":"Septembre","9":"Octobre","10":"Novembre","11":"Dcembre",length:12,isArray:true},dayShortNames:{"0":"D","1":"L","2":"M","3":"M","4":"J","5":"V","6":"S",length:7,isArray:true},dayNames:{"0":"Dimanche","1":"Lundi","2":"Mardi","3":"Mercredi","4":"Jeudi","5":"Vendredi","6":"Samedi",length:7,isArray:true},DATEINPUTFORMATS:{"0":"dd.MM.yyyy","1":"dd.MM.yy","2":"dd. M. yy","3":"d.M.yy","4":"yyyy.MM.dd","5":"d MMM yyyy","6":"yyyy-M-d",isArray:true,length:7},TIMEINPUTFORMATS:{"0":"HH:mm:ss","1":"H:mm:ss","2":"H.mm' h'",isArray:true,length:3},DATEOUTPUTFORMAT:"dd.MM.yyyy",TIMEOUTPUTFORMAT:"HH:mm:ss",DATEDISPLAYFORMAT:"dd.MM.yyyy",TIMEDISPLAYFORMAT:"HH:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###","1":"0.###E0"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:"'"},color:{colors:[{n:"Noir",v:"#000000"},{n:"Marron",v:"#993300"},{n:"Vert olive",v:"#333300"},{n:"Vert fonc",v:"#003300"},{n:"Sarcelle fonc",v:"#003366"},{n:"Bleu fonc",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Gris-80%",v:"#333333"},{n:"Rouge fonc",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Jaune fonc",v:"#808000"},{n:"Vert",v:"#008000"},{n:"Sarcelle",v:"#008080"},{n:"Bleu",v:"#0000FF"},{n:"Bleu-gris",v:"#666699"},{n:"Gris-50%",v:"#808080"},{n:"Rouge",v:"#FF0000"},{n:"Orange clair",v:"#FF9900"},{n:"Citron",v:"#99CC00"},{n:"Vert de mer",v:"#339966"},{n:"Bleu-vert",v:"#33CCCC"},{n:"Bleu clair",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Gris-40%",v:"#969696"},{n:"Rose",v:"#FF00FF"},{n:"Or",v:"#FFCC00"},{n:"Jaune",v:"#FFFF00"},{n:"Vert brillant",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Bleu ciel",v:"#00CCFF"},{n:"Prune",v:"#993366"},{n:"Gris-25%",v:"#C0C0C0"},{n:"Rose clair",v:"#FF99CC"},{n:"Brun clair",v:"#FFCC99"},{n:"Jaune clair",v:"#FFFF99"},{n:"Vert clair",v:"#CCFFCC"},{n:"Turquoise clair",v:"#CCFFFF"},{n:"Bleu ple",v:"#99CCFF"},{n:"Lavande",v:"#CC99FF"},{n:"Blanc",v:"#ffffff"}],userPalette:[{n:"",v:""}]},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Inclure"},{did:"2",n:"Exclure"}],BranchQual:[{did:"19",n:"ET"},{did:"20",n:"OU"},{did:"21",n:"Non"},{did:"19_21",n:"ET NON"},{did:"20_21",n:"OU NON"}],RootOperator:[{did:"19",n:"Toutes les slections."},{did:"20",n:"Quelle que soit la slection."}],ExprType:[{did:"2",n:"Qualifier"},{did:"5",n:"Slectionner"}],DimtyLevels:[{did:"1",n:"Par dfaut"},{did:"2",n:"Mesure"},{did:"3",n:"Rapport"}],Attribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,76",n:"Contient",tp:1},{did:"1,79",n:"Ne contient pas",tp:1},{did:"1,77",n:"Commence par",tp:1},{did:"1,80",n:"Ne commence pas par",tp:1},{did:"1,78",n:"Finit par",tp:1},{did:"1,81",n:"Ne finit pas par",tp:1},{did:"1,18",n:"Comme",tp:1},{did:"1,43",n:"Diffrent",tp:1},{did:"1,54",n:"Est nul",tp:1},{did:"1,55",n:"N'est pas nul",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1}],Metric:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,54",n:"Est nul",tp:1},{did:"1,55",n:"N'est pas nul",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1},{did:"2,1",n:"Au plus haut",tp:2},{did:"2,2",n:"Au plus bas",tp:2},{did:"3,1",n:"Au plus haut%",tp:3},{did:"3,2",n:"Au plus bas%",tp:3}],MDXAttribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1},{did:"1,44",n:"Pas entre",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1}],MDXMetric:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1}],SAPAttribute:[{did:"1,6",n:"gal ",tp:1},{did:"1,7",n:"Non gal ",tp:1},{did:"1,22",n:"Dans",tp:1},{did:"1,57",n:"Non inclus",tp:1},{did:"1,8",n:"Suprieur ",tp:1},{did:"1,10",n:"Suprieur ou gal ",tp:1},{did:"1,9",n:"Infrieur ",tp:1},{did:"1,11",n:"Infrieur ou gal ",tp:1},{did:"1,17",n:"Entre",tp:1}],MetricRP:[{did:"2,13",n:"Parmi les rangs les plus levs",tp:2},{did:"2,4",n:"Exclure le plus haut",tp:2},{did:"2,3",n:"Parmi les rangs les plus bas",tp:2},{did:"2,5",n:"Exclure le plus bas",tp:2},{did:"3,13",n:"Parmi les valeurs les plus leves%",tp:3},{did:"3,4",n:"Exclure le plus haut%",tp:3},{did:"3,3",n:"Parmi les valeurs les plus basses%",tp:3},{did:"3,5",n:"Exclure le plus bas%",tp:3}],Element:[{did:"1,22",n:"Dans la liste",tp:1},{did:"1,57",n:"Pas dans la liste",tp:1}]},validation:{requiredFieldError:"Ce champ est requis.",invalidCharError:"Ce champ contient des caractres non valides pour #",invalidDateStringError:"Ce champ contient une chane de date/d'heure non valide",invalidNumericFormatError:"Ce champ contient une valeur numrique au format non valide",invalidValueInListError:"Une des valeurs (#) dans cette liste n'est pas valide",outofRangeError:"Ce champ doit tre # entre ## et ###.",noLessMinError:"Ce champ doit tre # suprieur ou gal  ##.",noGreaterMaxError:"Ce champ doit tre # infrieur ou gal  ###.",failRegexTestError:"chec de la validation d'expression rgulire pour ce champ.",integerDataType:"une valeur entire",numericDataType:"une valeur numrique",dateDataType:"une valeur Date/Heure"}}};mstrmojo.EnumLocaleInfo["fr-BE"]=mstrmojo.EnumLocaleInfo["fr-FR"];mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;this.isBinaryData=J.isBinaryData||false;this.binaryTitleHeaders=J.binaryTitleHeaders;this.idFormIndex=J.idFormIndex||0;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){if(this.isBinaryData){if(this.binaryTitleHeaders.length===0){return ;}var J=[];var L,K=this.binaryTitleHeaders.length*this.binaryTitleHeaders[0].length;for(L=0;L<K;++L){J.push({n:this.getHeaderName(L),id:this.getHeaderId(L)});}return J;}return this.title.es;},getHeaderName:function F(L){var J,K;if(this.isBinaryData){J=parseInt(L/this.binaryTitleHeaders.length,10);K=parseInt(L%this.binaryTitleHeaders.length,10);return this.binaryTitleHeaders[K][J];}return this.title.es[L].n;},getHeaderId:function F(K){var J;if(this.isBinaryData){J=parseInt(K/this.binaryTitleHeaders.length,10);return"h"+this.binaryTitleHeaders[this.idFormIndex][J]+";"+this.getUnitId();}return this.title.es[K].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}this.destroy();}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function E(H){var G=this.gridData=H.data,F=G.gts;this.titles=H.isRow?F.row:F.col;this.isBinaryData=H.isBinaryData||false;this.binaryData=H.binaryData;this.isRow=H.isRow||false;},size:function D(){return this.titles.length;},getAttributeTitleHeadersFromBinary:function A(K){var J=this.titles[K].id,H=this.binaryData,G=(H&&H.schema&&H.schema.fields)||[],F=G.filter(function(L){return L.name.includes(J);}).map(function(L){return G.findIndex(function(M){return M.name===L.name;});});var I=F.findIndex(function(L){return G[L].name.includes("45C11FA478E745FEA08D781CEA190FE5");});return new mstrmojo.models.template.Title({title:this.titles[K],isBinaryData:this.isBinaryData,idFormIndex:I,binaryTitleHeaders:F.map(function(L){var N=H.getChildAt(L);var O=new Set();var M=0;for(;M<N.length;M++){O.add(N.get(M));}return Array.from(O);})});},getTitle:function C(F){if(this.isBinaryData&&this.isRow){return this.getAttributeTitleHeadersFromBinary(F);}return new mstrmojo.models.template.Title({title:this.titles[F]});},getCSS:function B(F){return this.gridData.css[this.titles[F].cni].n;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.EnumLocaleInfo");mstrmojo.requiresDescs(521,522,523,524,525,526,529,530,534,535,546,547,587,686,687,688,696,746,949,950,952,953,954,955,956,1035,1101,1102,1375,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,2171,2202,2203,2204,2219,2220,2295,2784,2785,2786,2795,2796,2816,2903,3086,3344,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3945,3946,4406,4407,4737,4738,4739,4740,4998,5282,5283,5924,5925,6047,6076,6077,6078,6079,6080,6081,6082,6114,7899,7900,7901,7902,7903,9379,9380,9381,9382,9383,9384,9385,12298,13889,13890,13896,13897);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(D){var B=this;if(this.isLoaded){D();D=null;}else{var C={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){C.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(E){B.update(E);D();D=null;if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(E){alert(E.getResponseHeader("X-MSTR-TaskFailureMsg"));}},C);}B.loadSmartAttFormatLists();},loadLocalesIfNeeded:function(){var B=this;if(!this.isLoaded){var C={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){C.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(D){B.update(D);},failure:function(){}},C);}},loadSmartAttFormatLists:function(){var B=this;if(B.smartAttFormatLists&&B.smartAttFormatLists.length){return ;}if(mstrApp.isDossier===false){mstrApp.fetchRestApi&&mstrApp.fetchRestApi("languages/baseLocaleDefaultFormats/"+mstrApp.localeId).then(function(D){B.setSmartAttFormatLists(D.smartAttributeDefaultFormats);});}var C=mstrApp&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode();if(C){mstrApp.fetchRestApiWithProject&&mstrApp.fetchRestApiWithProject("languages/baseLocaleDefaultFormats/"+mstrApp.localeId).then(function(D){B.setSmartAttFormatLists(D.smartAttributeDefaultFormats);});}},update:function(B){if(B){mstrmojo.hash.copy(mstrmojo.hash.obj2array(B),this);}},isRTL:function A(B){return false;switch(B){case"1025":case"5121":case"15361":case"3073":case"2049":case"11265":case"13313":case"12289":case"4097":case"6145":case"8193":case"16385":case"10241":case"7169":case"14337":case"9217":case"1125":case"1065":case"1037":case"1114":case"1056":case"2080":return true;default:return false;}},setSmartAttFormatLists:function(B){if(B){this.smartAttFormatLists=B;}},getSmartAttFormatList:function(C){if(!this.smartAttFormatLists){return[];}var B=(this.smartAttFormatLists||[]).find(function(D){return D.smartAttributeType==C;});return B?B.defaultFormats:[];},setLocaleDefaultFormats:function(B){if(B.timeIntervalAttributes){this.timeIntervalAttributes=B.timeIntervalAttributes;}},getLocaleDefaultFormat:function(B){return this.timeIntervalAttributes.find(function(C){return C.smat===B;});},isSmartAttributeLocaleFormatEnabled:function(D){var C=mstrApp&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode();var B=mstrApp.isDossier===false||C;if(!B){return false;}if(!Array.isArray(this.timeIntervalAttributes)){return false;}if(!this.getLocaleDefaultFormat(D)){return false;}return true;},getTargetLocaleInfo:function(B){var C=mstrmojo.EnumLocaleInfo[B];if(!C){C=mstrmojo.EnumLocaleInfo["en-US"];}return C;},timeIntervalAttributes:[],smartAttFormatLists:[],isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:[mstrmojo.desc(1968,"S"),mstrmojo.desc(1969,"M"),mstrmojo.desc(1970,"T"),mstrmojo.desc(1971,"W"),mstrmojo.desc(1972,"T"),mstrmojo.desc(1973,"F"),mstrmojo.desc(1974,"S")],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},location:{LOCALE_TO_LANG:{"2052":mstrmojo.desc(2816,"Chinese (Simplified)"),"1028":mstrmojo.desc(2903,"Chinese (Traditional)"),"1030":mstrmojo.desc(4998,"Danish"),"1043":mstrmojo.desc(4737,"Dutch (Netherlands)"),"1031":mstrmojo.desc(949,"German"),"1033":mstrmojo.desc(950,"English (US)"),"2057":mstrmojo.desc(2295,"English (UK)"),"1036":mstrmojo.desc(952,"French"),"4108":mstrmojo.desc(4738,"French (Switzerland)"),"2060":mstrmojo.desc(6114,"French (Belgium)"),"2055":mstrmojo.desc(4739,"German (Switzerland)"),"1040":mstrmojo.desc(953,"Italian"),"2064":mstrmojo.desc(4740,"Italian (Switzerland)"),"1041":mstrmojo.desc(954,"Japanese"),"1042":mstrmojo.desc(955,"Korean"),"1045":mstrmojo.desc(6047,"Polish"),"1046":mstrmojo.desc(1035,"Portugese (Brasil)"),"3082":mstrmojo.desc(1375,"Spanish"),"1053":mstrmojo.desc(956,"Swedish")}},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:mstrmojo.desc(3945,"Include")},{did:"2",n:mstrmojo.desc(3946,"Exclude")}],BranchQual:[{did:"19",n:mstrmojo.desc(5282,"AND")},{did:"20",n:mstrmojo.desc(5283,"OR")},{did:"21",n:mstrmojo.desc(12298,"NOT")},{did:"19_21",n:mstrmojo.desc(5924,"AND NOT")},{did:"20_21",n:mstrmojo.desc(5925,"OR NOT")}],RootOperator:[{did:"19",n:mstrmojo.desc(534,"All selections")},{did:"20",n:mstrmojo.desc(535,"Any selection")}],ExprType:[{did:"2",n:mstrmojo.desc(546,"Qualify")},{did:"5",n:mstrmojo.desc(547,"Select")}],DimtyLevels:[{did:"1",n:mstrmojo.desc(2171,"Default")},{did:"2",n:mstrmojo.desc(3086,"Metric")},{did:"3",n:mstrmojo.desc(3344,"Report")}],Attribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,76",n:mstrmojo.desc(686,"Contains"),t:1,tp:1},{did:"1,79",n:mstrmojo.desc(2784,"Does not contain"),t:1,tp:1},{did:"1,77",n:mstrmojo.desc(687,"Begins with"),t:1,tp:1},{did:"1,80",n:mstrmojo.desc(2785,"Does not begin with"),t:1,tp:1},{did:"1,78",n:mstrmojo.desc(688,"Ends with"),t:1,tp:1},{did:"1,81",n:mstrmojo.desc(2786,"Does not end with"),t:1,tp:1},{did:"1,18",n:mstrmojo.desc(525,"Like"),t:1,tp:1},{did:"1,43",n:mstrmojo.desc(526,"Not Like"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],Metric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"2,1",n:mstrmojo.desc(529,"Highest"),t:2,tp:2},{did:"2,2",n:mstrmojo.desc(530,"Lowest"),t:2,tp:2},{did:"3,1",n:mstrmojo.desc(4407,"Highest %"),t:3,tp:3},{did:"3,2",n:mstrmojo.desc(4406,"Lowest %"),t:3,tp:3}],MetricRP:[{did:"2,13",n:mstrmojo.desc(13897,"Rank between highest"),t:2,tp:2},{did:"2,4",n:mstrmojo.desc(1101,"Exclude highest"),t:2,tp:2},{did:"2,3",n:mstrmojo.desc(13896,"Rank between lowest"),t:2,tp:2},{did:"2,5",n:mstrmojo.desc(1102,"Exclude lowest"),t:2,tp:2},{did:"3,13",n:mstrmojo.desc(13890,"Between highest")+"%",t:3,tp:3},{did:"3,4",n:mstrmojo.desc(1101,"Exclude highest")+"%",t:3,tp:3},{did:"3,3",n:mstrmojo.desc(13889,"Between lowest")+"%",t:3,tp:3},{did:"3,5",n:mstrmojo.desc(1102,"Exclude lowest")+"%",t:3,tp:3}],MDXAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],MDXMetric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],SAPAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],Element:[{did:"1,22",n:mstrmojo.desc(2219,"In List"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2220,"Not In List"),t:1,tp:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumDataType");var A={};var C=mstrmojo.mstr.EnumDataType;mstrmojo.NumberFormat={applicableDT:[C.DataTypeReserved,C.DataTypeInteger,C.DataTypeUnsigned,C.DataTypeNumeric,C.DataTypeDecimal,C.DataTypeReal,C.DataTypeDouble,C.DataTypeFloat,C.DataTypeBinary,C.DataTypeVarBin,C.DataTypeLongVarBin,C.DataTypeDate,C.DataTypeTime,C.DataTypeTimeStamp,C.DataTypeShort,C.DataTypeLong,C.DataTypeBigDecimal,C.DataTypeCellFormatData,C.DataTypeInt64],isNumberFormatDT:function D(E){return E===undefined||E===null||this.applicableDT.indexOf(E)!==-1;},getInstance:function B(H,I){var G=H+"--"+I;if(G in A){return A[G];}var E={parse:function(J){},format:function(J){}};if(H==="."&&I===","){E.parse=function(J){if(!J){return NaN;}var K=J.replace(/,/g,"");return Number(K);};E.format=function(J){return Number(J).toString();};}else{var F=new RegExp("\\"+I,"g");E.parse=function(K){if(!K){return NaN;}var J=K.replace(F,"").replace(H,".");return Number(J);};E.format=function(K){var J=Number(K).toString();return J.replace(".",H);};}A[G]=E;return E;},parse:function(G,F,H){if(!G){return NaN;}F=F||mstrConfig.decimalSep;H=H||mstrConfig.thousandsSep;if(F==="."&&H===","){return Number(G.replace(/,/g,""));}var E=G.replace(new RegExp("\\"+H,"g"),"").replace(F,".");return Number(E);},format:function(H,F,G){F=F||mstrConfig.decimalSep;G=G||mstrConfig.thousandsSep;if(F==="."&&G===","){return Number(H).toString();}var E=Number(H).toString();return E.replace(".",F);}};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDataType");var D=mstrmojo.array,B=mstrmojo.mstr.EnumDataType;mstrmojo.models.TransactionsInterface=mstrmojo.provide("mstrmojo.models.TransactionsInterface",{getTxnActionsById:function A(L,K){var G=this,H,E=[],I=[G.ENUM_TRANSACTION_ACTION_TYPES.UPDATE,G.ENUM_TRANSACTION_ACTION_TYPES.INSERT,G.ENUM_TRANSACTION_ACTION_TYPES.SELECT_OR_DELETE],M;if(!L||!K){return E;}for(var J in L){var F=L[J];if(F.trid===K){H=F;break;}}if(!H){return E;}if(H.actions){return H.actions;}D.forEach(I,function(N){M=H.sexprs.find(function(O){return O.at===N;});if(M){E.push({at:N,n:M.act_name||G.ENUM_TRANSACTION_TYPE_LABELS[N]});}});return E;},getParsedTextValue:function C(H,F){var G=mstrmojo.hash.walk("decimalSep",mstrConfig)||".",E=mstrmojo.hash.walk("thousandsSep",mstrConfig)||",";if(F===B.DataTypeBigDecimal){return""+mstrmojo.NumberFormat.parse(H,G,E);}return H;},ENUM_TRANSACTION_ACTION_TYPES:{RESERVED:0,UPDATE:1,SELECT_OR_DELETE:2,INSERT:4},ENUM_TRANSACTION_TYPE_LABELS:{1:mstrmojo.desc(20461,"Update Data"),2:mstrmojo.desc(16770,"Delete Data"),4:mstrmojo.desc(20471,"Insert Data")},ENUM_TRANSACTION_INPUT_FLAGS:{RESERVED:0,EDITABLE:1,REQUIRED:268435456,BOTH:268435457,NEWDATA_REQUIRED:536870912,},ENUM_INPUT_CONTROL_TYPES:{NONE:"0",TEXTBOX:"1",DROPDOWN:"3",},ENUM_INPUT_VALUE_TYPES:{CALCULATED:"0",MANUAL:"1",DATASET:"2",},ENUM_TRANSACTION_CONFIG_TYPE:{SQL:1,PYTHON:2,},ENUM_TRANSACTION_SOURCE_TYPE:{XTAB:0,FIELD_GROUP:1,},ENUM_RESTRICTION_TYPES:{AS_TARGET:{type:1,message:mstrmojo.desc(25871,"To configure transaction service, you must remove the information window, contextual link and visualizations as targets defined on this grid.")},SINGLE_COLUMNSET:{type:2,message:mstrmojo.desc(20489,"Transaction can only be configured on grids with a single column set.")},EMPTY:{type:3,message:""}},ENUM_AFTER_SUBMISSION_ACTION:{NO_ACTION:0,DISPLAY_MESSAGE:1,REFRESH_DOSSIER:8,RUN_ANOTHER_DOSSIER:16,},});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.EnumRWUnitType");var B=mstrmojo.hash,J=mstrmojo.EnumRWUnitType;mstrmojo.vi.ui._CanFreeformGroup=mstrmojo.provide("mstrmojo.vi.ui._CanFreeformGroup",{_mixinName:"mstrmojo.vi.ui._CanFreeformGroup",notifyGroup:function G(){this.raiseEvent({name:"member_changed",unit_box:this});},updateByGroup:function E(Q){var Y=Q.delta,P=this.parent,X=P.boxLayoutConfig,U=this.domNode.style,W=parseFloat(U.left),S=parseFloat(U.top),R=this.getBoxBorderWidth?this.getBoxBorderWidth():0;P.updateChildNode(this,{newLayout:{left:(W+Y.x)+"px",top:(S+Y.y)+"px",width:parseFloat(U.width)+R+"px",height:parseFloat(U.height)+R+"px"}});},updateConfigNode:function C(S){var P=this.parent,R=P.getFloatGroupTree();if(R){var Q=P.groupTreeLayoutConfig.getFloatGroupTreeNode(this.k);if(Q.node){P.groupTreeLayoutConfig.updateConfigNode(Q.node,S);}}},updateFreeformLayout:function F(R){var Q=this,P=this.parent;P.snapGuide.boxIntervalOperations(Q,"delete");Q.raiseEvent({name:"member_snap_guide_changed_pre"});P.boxLayoutConfig.updateFloatLayout(R,Q);P.applyGroupTree(undefined,Q.getPUKeys(false));Q.updateSelfSplitter();P.snapGuide.boxIntervalOperations(Q,"insert");Q.raiseEvent({name:"member_snap_guide_changed_post"});},createGroup:function I(P){return this.parent.groupTreeLayoutConfig.createGroup(P);},getPUKeys:function M(Q){var R=this.getParentGroup(),P=this.k;if(!R){return null;}if(!R.parent){return[P];}if(Q){return[R.k].concat(R.children.map(function(S){return S.k;}));}return[R.k,P];},isGrouped:function N(){var Q=this.parent,P=false,S=Q.getFloatGroupTree();if(S){var R=Q.groupTreeLayoutConfig.findGroupByKey(S.k);if(R&&R.children.indexOf(this)<0){P=true;}}return P;},getParentGroup:function L(){var P=this.parent,Q=P.groupTreeLayoutConfig.getFloatGroupTreeNode(this.k);return P.groupTreeLayoutConfig.findGroupByKey(Q&&Q.parent&&Q.parent.k);},selectGroup:function A(){this.parent.groupTreeLayoutConfig.selectGroupByChild(this);},moveToGroup:function D(R){var P=this.parent,Q=P.groupTreeLayoutConfig;R.addGroupMemberNode(Q.getFloatGroupTreeNode(this.k).node);},unGroup:function K(P){if(!P){P=this.parent;}var S=P.getFloatGroupTree(),Q=P.groupTreeLayoutConfig.unGroup(this.k);if(Q){if(Q.children.length===1&&Q.k!==S.k){var R=P.groupTreeLayoutConfig.findGroupByKey(S.k);R.addGroupMemberNode(P.groupTreeLayoutConfig.getFloatGroupTreeNode(Q.children[0].k).node);}}},onvisibleChange:function O(R){var U=this,Q=this.parent,W=R.value,P=R.valueWas,S=W?"insert":"delete";if(P===W){return ;}if(W){U.set("visible",W);Q.snapGuide.boxIntervalOperations(U,S);}else{Q.snapGuide.boxIntervalOperations(U,S);U.set("visible",W);}},updateNodeHiddenHandler:function H(P){if(P){this.onlyRedraw=true;this.refresh();this.onlyRedraw=false;if(B.walk("defn.t",this)===J.TEXTFIELD){this.rebuildBoxContent();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(X,U){var Y=[],Q=X.selectedIndices,P=X.allIdx;var R,S,W=X.items;if(X.multiSelect&&(P>-1)&&(K.indexOf(U,X.allIdx)>-1)){for(R=0,S=W.length;R<S;R++){if(!Q[R]){Y.push(R);Q[R]=true;X.selectedIndex=R;X.selectedItem=W[R];}}}else{for(R=0,S=U.length;R<S;R++){var Z=U[R];if(!Q[Z]&&(!mstrApp.isWorkstationPlugin||W)){Q[Z]=true;Y.push(Z);X.selectedIndex=Z;X.selectedItem=W[Z];}}}return Y;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(X,W){var S=[],Q=X.selectedIndices,Z=K.indexOf,P=X.allIdx;if(X.multiSelect&&(P>-1)&&(Z(W,P)>-1)){return J(X);}if(W.length>0&&Q[P]){if(Z(W,P)<0){W.push(P);}}var U=W.length,R;for(R=0;R<U;R++){var Y=W[R];if(Q[Y]){delete Q[Y];S.push(Y);if(X.selectedIndex===Y){X.selectedIndex=-1;X.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var W=S.selectedIndex,U=[],X,Q;for(Q in P){if(!R[Q]){X=parseInt(Q,10);delete P[Q];U.push(X);if(W===X){S.selectedIndex=-1;S.selectedItem=null;}}}var Z=[],Y=S.items;for(Q in R){if(!P[Q]){X=parseInt(Q,10);P[Q]=true;Z.push(X);S.selectedIndex=X;S.selectedItem=Y&&Y[X];}}return{add:Z,rmv:U};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(Y,U,S){var R=U&&(typeof U==="object"),X=this.itemIdField,Q=-1,W=this.items;if(R&&X!=null){Q=K.find(W,X,U[X]);}else{if(U!=null){Q=K.indexOf(W,U);}}if((Q===-1)&&(U!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(W&&W.length)||0;}Q=P;this.add([U],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(U,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(U){this._set_selectedIndices(null,U,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,f){if(!Q||!Q.length){return ;}var S=this.items||[],w=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),X=Q.length,U=X-w.count,t=this.allowUnlistedValues,e=this.insertUnlistedValuesAt,Z=(t&&(e>-1))?U:0;if(e<0){e=S.length;}var R=[],W=[],h=w.map;if(U&&t){var s=0,g;for(g=0;g<X;g++){if(h[g]==null){R.push(Q[g]);W.push(e+s++);}}this.add(R,e);}var Y=[],o;for(o in h){var q=h[o];if(q>=e){q+=Z;}Y.push(q);}var u=Y.concat(W),a=this.addSelect(u,!f);if(!f){var b=K.hash(a),l=this.selectedIndices,d=[],p;for(p in l){if(!b[p]){d.push(parseInt(p,10));}}var P=this.removeSelect(d,true);G(this,a,P);}}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var U=mstrmojo.hash,I="containerNode",H="auto",R="px";var J={v:H,c:undefined,sv:H};function E(f,i,h){var j=this._layoutWidgets[i],m=f.slot||I,k=j.f,l=j.p,g=(k&&k[m]!==undefined),e=(l&&l[m]!==undefined);if(m&&((!h&&g)||e)){return g?k[m]:(j.x*parseInt(l[m],10)/100)+R;}return f[(i==="h")?"height":"width"];}function L(k,g,e){if(k.ignoreLayout){return ;}var f=(g===H)||g==="NaNpx",j=(e===H)||e==="NaNpx";var i=k.getLayoutOffsets&&k.getLayoutOffsets();if(i){if(!f){g=(parseInt(g,10)-i.h)+R;}if(!j){e=(parseInt(e,10)-i.w)+R;}}if(k.setDimensions){k.setDimensions(g,e);}else{if(k.set){if(!f){k.set("height",g);}if(!j){k.set("width",e);}}}}function c(j){var f=this.children,l,n;for(l=0,n=(f&&f.length)||0;l<n;l++){var g=f[l],o=g.slot||I;if(o){var m=E.call(this,g,"h",j),p=E.call(this,g,"w",j);this.setSlotDimensions(o,m,p);L(g,m,p);var e=E.call(this,g,"h",j),k=E.call(this,g,"w",j);if(e!==m||k!==p){L(g,e,k);}this.setSlotDimensions(o,e,k);}}this.afterLayout();}function B(){var f=this.children,e=this._layoutWidgets;U.forEach(this.slotNames,function(k,l){if(!k||this.skipsSlotLayout(l)){return ;}var j=(e.h&&e.h.getSlotSizeInfo(l,f))||J,g=(e.w&&e.w.getSlotSizeInfo(l,f))||J,i=j.c||g.c;mstrmojo.array.forEach(i,function(h){L(h,j.v,g.v);});this.setSlotDimensions(l,j.sv,g.sv);},this);this.afterLayout();}function D(f){var e=this.layoutConfig.xt?B:c;e.call(this,f);}function W(l,h,j){var k=l.slot||I,i=h&&h.a;if(!i||i[k]===undefined){return ;}var g=this[k],e=g["offset"+j],f=i[k];if(!this.hasDimensionChanged(g,j,e,f)){return ;}h.x-=(e-f);i[k]=e;}function K(e){this.beforeLayout();var f=this._layoutWidgets,g=e.src;W.call(this,g,f.h,"Height");W.call(this,g,f.w,"Width");D.call(this,true);}function P(f,AB){if(!f){return null;}var q=this.children,AC=this.getScale?this.getScale()||1:1,j=AB.toLowerCase(),x=parseInt(this[j],10),k=x,w={},g={},o={},e={},n={},y,z,l,p,h;for(h in f){if(!f.hasOwnProperty(h)){continue;}p=f[h];if(p.match(/px$/)){x-=parseInt(p,10);w[h]=p;}else{if(p.match(/%$/)){g[h]=p;}else{if(p.match(/all/)){n[h]=k;}else{o[h]=p;}}}}if(!U.isEmpty(o)&&!U.isEmpty(g)){for(y=0,z=(q&&q.length)||0;y<z;y++){l=q[y];h=l.slot||I;if(h&&o[h]&&!l.ignoreLayout){if(l.hasRendered){var AA=this[h],m=(h==="titlebarNode"||h==="subtitlebarNode"),t=(h==="titlebarNode"),u=(AB.toLowerCase()==="height"),s=this.actualTitleBarHeight&&this.actualTitleBarHeight()||0;e[h]=AA.getBoundingClientRect?Math.round(AA.getBoundingClientRect()[AB.toLowerCase()]/AC):AA["offset"+AB];if(u&&s>0&&m){if(t){x-=s;}}else{x-=e[h];}}else{e[h]=0;l.attachEventListener((l instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,K);}}}}return{f:U.isEmpty(w)?undefined:w,p:U.isEmpty(g)?undefined:g,a:U.isEmpty(e)?undefined:e,n:U.isEmpty(n)?undefined:n,x:x,getSlotSizeInfo:function(AJ,AE){if(!f[AJ]){return J;}var AD=mstrmojo.array.filter(AE,function(AL){var AK=AL.slot;return AK===AJ||(AJ===I&&!AK);}),AH,AI;var i=w[AJ];if(i){AI=i;}var AG=g[AJ];if(AG){AI=(this.x*parseInt(AG,10)/100)+R;}if(o[AJ]){AI=e[AJ];if(AI){AI+=R;}else{AI=H;}AH=H;}var AF=n[AJ];if(AF){AI=AH=AF+R;}AI=AI||"0px";return{v:AI,c:AD,sv:AH||AI};}};}function S(f){var e=this.domNode;if(!e||!this.layoutConfig){return ;}e.style[f]=this[f];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,forceLayout:false,layoutConfig:null,init:function Y(e){this._super(e);this.layoutConfig=U.clone(this.layoutConfig);},preBuildRendering:function C(){var g=this.cssText||"";var e=this.height;if(e&&e!==H){g+="height:"+this.height+";";}var f=this.width;if(f&&f!==H){g+="width:"+this.width+";";}this.cssText=g;return(this._super)?this._super():true;},postBuildRendering:function Z(){this.doLayout();return this._super();},modifyLayoutConfig:function b(g,f){var e=this.layoutConfig=this.layoutConfig||{};e.h=U.copy(g,e.h);e.w=U.copy(f,e.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function Q(g,e){var f=this._super(g,e);if(g==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return f;},doLayout:function A(){var e=this.layoutConfig;if(!e||(this.height===H&&this.width===H)){return ;}if(e.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:P.call(this,e.h,"Height"),w:P.call(this,e.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(e){this.setDimensions(e.h,e.w);return true;},onwidthChange:function O(){S.call(this,"width");},onheightChange:function N(){S.call(this,"height");},skipsSlotLayout:function(e){return false;},adjustParentDimensions:function M(){var f=this.parent,e=f&&f._layoutWidgets;if(e){W.call(f,this,e.h,"Height");W.call(f,this,e.w,"Width");}},hasDimensionChanged:function G(f,h,g,e){return g!==e;},setDimensions:function X(i,f){var g=(i===H)||i==="NaNpx",j=(f===H)||f==="NaNpx";if((!g&&parseInt(this.height,10)!==parseInt(i,10))||(!j&&parseInt(this.width,10)!==parseInt(f,10))||this.forceLayout){if(!g&&parseInt(this.height,10)!==parseInt(i,10)){this.height=i;}if(!j&&parseInt(this.width,10)!==parseInt(f,10)){this.width=f;}var e=this.domNode,k=e&&e.style;if(k){if(!g&&parseInt(k.height,10)!==parseInt(i,10)){k.height=i;}if(!j&&parseInt(k.width,10)!==parseInt(f,10)){k.width=f;}this.doLayout();}return true;}return false;},setSlotDimensions:function a(i,g,f){var e=this[i]&&this[i].style;if(!e){return ;}if(g!==H&&g!==undefined&&g!=="NaNpx"&&e.height!==g&&parseInt(g)>=0){e.height=g;}if(f!==H&&f!==undefined&&f!=="NaNpx"&&e.width!==f&&parseInt(f)>=0){e.width=f;}}});mstrmojo._HasLayout.getSlotSize=function d(i,j){var f=i&&i.prototype.layoutConfig;if(f){var g=f.h,e=f.w;return{h:(g&&g[j])||undefined,w:(e&&e[j])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.hash","mstrmojo.UUID","mstrmojo.ag.chart.EnumInlineChartType","mstrmojo.ag.EnumColumnVisibility");var L=mstrmojo.array,W=mstrmojo.mstr.EnumDSSXMLObjectTypes,P=mstrmojo.hash,G=mstrmojo.UUID,c=mstrmojo.ag.chart.EnumInlineChartType,B={OBJECT_ID:"oi",NODE_KEY:"nk",ELEMENT_ID:"ei"},D=["objmps","nkmps","eimps"],J=1,N=2,A={id:G.EMPTY,type:0};function X(d){var e=G.create(true);return d+"-"+e;}function a(d){var e;if(d._e&&d.otp!==W.Metric){if(d._e.otp===W.Metric){e=d._e.oid;}else{e=d._e.id;}}else{e=d.id;}if(d.isObjHeader&&(!e||(d.axis===N&&d.setIdx===-1))){e=A.id;}return e;}function F(d,f){var e;if(!d){return ;}Object.keys(d).forEach(function(g){e=d[g];if(e&&(typeof e==="object")&&Object.keys(e).length>0){F(e,f);}if(f[g]){f[g]=false;}});}function Y(d){return d.indexOf(B.OBJECT_ID)===0||d.indexOf(B.ELEMENT_ID)===0||d.indexOf(B.NODE_KEY)===0;}mstrmojo.util.XtabHelper=mstrmojo.provide("mstrmojo.util.XtabHelper",{isDisplayOutline:function S(e,d){return e&&e.olm&&!(e.rw&&e.rw.row.bc>0)&&(d&&!d.txi);},getOutlineSubMode:function R(d){var e=d.gridProps||{};if(e.olmt){return e.olmt;}return mstrmojo.util.XtabHelper.ENUM_OUTLINE_SUB_MODE.COMPACT;},getCellDepth:function H(d,e){var g=d.dpt||1,f=d.ui;if(!d.dpt){d=d._p;while(d){if(d.dpt){g+=d.dpt;break;}if(d.ui!==f||e[d.tui].otp===W.Filter){f=d.ui;g++;}d=d._p;}}return g;},isMultiFormRowHeaderCell:function E(d){return d&&d.isObjHeader&&d.axis===J&&d.hasAttrForms;},getCellForm:function M(d){if(this.isMultiFormRowHeaderCell(d)&&d.fid){if(d.fs&&d.fs.length>0){for(var e=0;e<d.fs.length;e++){if(d.fs[e].id===d.fid){return d.fs[e];}}}}return d&&d.fs&&d.fs[0];},getInteractiveCellByParams:function C(f,g){var d=P.clone(f[g.ei]);if(d.isObjHeader&&d.axis===J&&g.hasAttrForms&&g.fid){d.fid=g.fid;if(d.fs&&d.fs.length>0){for(var e=0;e<d.fs.length;e++){if(d.fs[e].id===g.fid){d.fix=e+1;break;}}}if(d.fix===undefined){d.fix=g.fi||1;}d.hasAttrForms=true;}return d;},generateRFMap:function Z(h,f){var g=[],d,i,e;Object.keys(h).forEach(function(j){i=h[j];d={key:i,value:j};if(i.indexOf(B.OBJECT_ID)===0){e=f.gts.row.find(function(k){if(k.fs&&k.fs.some(function(l){return l.id===j;})){d.type=W.AttributeForm;}return(k.id===j)||(k.fid===j)||(j===A.id);});if(!e){f.gsi.some(function(k){e=k.mx.find(function(l){return l.did===j;});return !!e;});}if(j===A.id){d.type=A.type;}else{if(e){if(e.fid===j){d.type=W.AttributeForm;}else{d.type=e.otp||e.t;}}}if(d.type!==undefined){g.push(d);}if(e&&e.hc){d.cont_did=e.datasetId;d.cont_tp=W.ReportDefinition;}}else{g.push(d);}});return g;},modifyColInfoByColumn:function b(n,f,s,t){var q=P.walk("gridProps.colInfo",n)||{},j=s.axis===J,d=f||{},e=s.isFromAttributeForm?s.id:a(s),k=d[e],g,i,h,m,o=function(w,x){var u=x.cols.length;switch(w.chartType){case c.BULLET:return u===1;case c.SPARKLINE:case c.TRENDBAR:default:return u===2;}},p=function(u){var w=u.otp||(u._e&&u._e.otp);return w===W.Metric;};if(e===A.id&&!j){j=true;}if(e!==undefined&&!k){k=X(j||p(s)?B.OBJECT_ID:B.ELEMENT_ID);d[e]=k;}if(!j&&s.setIdx>-1){g=n.gsi[s.setIdx].k;i=d[g];if(!i){i=X(B.NODE_KEY);d[g]=i;}}var l=this;m=function(y,w){var u=d[y];if(!u){u=X(B.OBJECT_ID);d[y]=u;}var x=q[w]||{};x=x[u];if(!x){x={};x[u]=t;}else{P.copy(t,x);}if(q[w]){if(!q[w][u]){P.copy(x,q[w]);}}else{q[w]=x;}};h=function(AE){var AF,AH,x,AC,AD=function(){if(q[i]){x=q[i];}else{x=q[i]={};}},w,z=0;if(AE.isActionButton){AD();P.copy(t,x);return x;}if(AE._p&&!AE.isFromAttributeForm){if(AE.isMicrochartCell){AD();P.copy(t,x);return x;}x=h(AE._p);}AF=AE.isFromAttributeForm?AE.id:a(AE);AH=d[AF];if(j){w=AE.fix!==undefined&&e!==A.id;var AI=P.walk("gts.row",n)||[];if(w){AI.some(function(AJ){if(AJ.id===e){z++;}else{if(z>0){return true;}}return false;});w=z>1;}var y=false,AB=false;if(l.isMultiFormRowHeaderCell(AE)){var AA=t.pfv===1,AG=t.pfv>1,u=t.hide>0;AB=AG||u||AA;AI.some(function(AJ){if(AJ.id===e){y=AJ.fs&&AJ.fs.length>1;return true;}return false;});}w=w||y&&!AB||AE.isFromAttributeForm;if(w){AC=AE.fid;m(AC,AH);}else{x=q[AH]||{};P.copy(t,x);q[AH]=x;}return q;}if(!AH){AH=X(p(AE)?B.OBJECT_ID:B.ELEMENT_ID);d[AF]=AH;}if(!x){AD();}if(!(AE.isMicrochart&&o(AE,n.gsi[AE.setIdx]))){if(!x[AH]){x[AH]={};}x=x[AH];}if(AF===e){P.copy(t,x);}return x;};h(s);n.gridProps.colInfo=q;},modifyColInfoByProps:function K(h,e,g,i){var l=P.walk("gridProps.colInfo",h)||{},d=e||{},j,f={},k;if(!g||g.length===0){return ;}j=function(m){var n;Object.keys(m).forEach(function(p){var o=false;n=m[p];k=g[0].name;if(n===null||typeof n!=="object"){return ;}if(i){P.forEach(g,function(q){if(n.hasOwnProperty(q.name)){o=true;return false;}});}if((n[k]&&!i)||o){g.forEach(function(q){if(q.value!==undefined){n[q.name]=q.value;}else{if((i&&n.hasOwnProperty(q.name))||!i){if(q.deletePredicate){if(q.deletePredicate(n[q.name])){delete n[q.name];}}else{delete n[q.name];}}}});if(i&&o&&Object.keys(n).length){j(n);}}else{j(n);}if(Object.keys(n).length===0){delete m[p];f[p]=true;}});};j(l);if(Object.keys(f).length>0){F(l,f);F(P.walk("gridProps.barChartProps",h),f);Object.keys(f).forEach(function(m){if(f[m]){Object.keys(d).forEach(function(n){if(d[n]===m){delete d[n];}});}});}h.gridProps.colInfo=l;},clearPropsByColumn:function Q(j,g,n){var m=P.walk("gridProps.colInfo",j),e=g||{},k=j.gsi,i={},l,f=a(n)||n.did,h={},d=!!n.isColSet;if(!m||Object.keys(m).length===0||!e||Object.keys(e).length===0){return ;}Object.keys(e).forEach(function(o){i[e[o]]=o;});l=function(p,o){Object.keys(p).forEach(function(s){var t=p[s],q=i[s];if(s.indexOf(B.NODE_KEY)===0&&n.setIdx>-1&&k[n.setIdx].k===q){if(n.isMicrochart){delete p[s];h[s]=true;}else{if(!d){l(t,true);}delete p[s];h[s]=true;}}else{if(s.indexOf(B.OBJECT_ID)===0||s.indexOf(B.ELEMENT_ID)===0){l(t,o);}if(f===q||o){delete p[s];h[s]=true;}}});};l(m);if(Object.keys(h).length>0){F(m,h);F(P.walk("gridProps.barChartProps",j),h);Object.keys(h).forEach(function(o){if(h[o]){Object.keys(e).forEach(function(p){if(e[p]===o){delete e[p];}});}});}j.gridProps.colInfo=m;},generateColInfoProps:function I(n,k){var t=P.walk("gridProps.colInfo",n),m=k||{},o=n.gsi,i={},d={},l={},q={},j,f,h=false,s;if(!m||Object.keys(m).length===0){return{};}var g=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation();var p=mstrmojo.ag.EnumColumnVisibility;D.forEach(function(u){(m[u]||[]).forEach(function(w){d[w.value]=w.key;l[w.key]=w.value;});});if(!t||Object.keys(t).length===0){var e=function(AA,x){var y={},u,z,w;for(u in AA){y[u]=true;for(z in AA[u]){y[z]=true;}}for(w in x){if(!y[x[w]]){delete d[w];}}};e(P.walk("gridProps.barChartProps",n),d);return{referenceIdMap:d};}o.forEach(function(w,u){i[w.k]=u;});s=function(w,u){Object.keys(u).forEach(function(z){var AA=u[z],x=l[z],AB,y;if(!x&&Y(z)){return ;}if(!Y(z)){w[z]=AA;return ;}if(AA.pfv&&j===undefined){j=AA.pfv>1;f=!j;}if(g&&AA.hide===p.HIDE_IN_CONSUMPTION_MODE){h=true;}if(!g&&AA.hide){h=true;}if(z.indexOf(B.NODE_KEY)===0){if(!w[x]){w[x]={children:[]};}y=w[x];s(y,AA);}else{if(w.children){AB={};AB[x]={children:[]};w.children.push(AB);y=AB[x];}else{if(!w[x]){w[x]={children:[]};}y=w[x];}s(y,AA);}});if(w.children&&w.children.length===0){delete w.children;}};s(q,t);return{colInfoProps:{isPinEnabled:!!j,isFreezeEnabled:!!f,hasHiddenColumns:h,colInfoMap:q},referenceIdMap:d};},clearPinFreezeProps:function(e,d,g,h){var f=[{name:"pfv"}];if(g){f.push({name:"idx"});}if(h){f.push({name:"width"});}this.modifyColInfoByProps(e,d,f,!!h);},clearWidthProps:function(e,d){var f=[{name:"width"},{name:"isResizedColumn"}];this.modifyColInfoByProps(e,d,f);},clearMinMaxWidthProps:function(e,d,g){var f=[{name:"width"},{name:"minWidth"},{name:"maxWidth"},{name:"isResizedColumn"}];this.modifyColInfoByProps(e,d,f,g);},getSingleBarChartProps:function O(d,i,j){var g=P.walk("gridProps.barChartProps",d)||{},f={},h=P.walk("gsi."+j+".k",d),e=d.gridPropsRMs||{};D.forEach(function(k){(e[k]||[]).forEach(function(l){f[l.value]=l.key;});});return P.walk(f[h]+"."+f[i],g);},setSingleBarChartProps:function U(n,l,d,h,e){var g=n.gridProps,m=n.gridPropsRMs||{},d=d||{},k,j,f,i=g&&g.barChartProps;if(!i){g.barChartProps={};i=g.barChartProps;}D.forEach(function(o){(m[o]||[]).forEach(function(p){d[p.value]=p.key;});});k=P.walk("k",n.gsi[e]);j=d[k];if(!j){j=X(B.NODE_KEY);d[k]=j;}i[j]=i[j]||{};f=d[h];if(!f){f=X(B.OBJECT_ID);d[h]=f;}i[j][f]=l;return l;},clearSingleBarChartProps:function(m,e,h,f){var k=P.walk("k",m.gsi[f]),i=P.walk("gridProps.barChartProps",m),n=P.walk("gridProps.colInfo",m),l={},j=e[k],g=e[h],d;d=i[j];if(d){delete d[g];l[g]=true;if(Object.keys(d).length===0){delete i[j];l[j]=true;}if(Object.keys(i).length===0){delete m.gridProps.barChartProps;}}F(n,l);F(i,l);Object.keys(l).forEach(function(o){if(l[o]){Object.keys(e).forEach(function(p){if(e[p]===o){delete e[p];}});}});return m.gridProps;},ENUM_GROUP_HEADER_ID:"outlineModeGroup",ENUM_GROUP_ROW_SPAN_CELL_VALUE:-1,ENUM_GROUP_CELL_VALUE_SPLITTER:";OUTLINE_SPLITTER;",ENUM_OUTLINE_ELE_SPLITTER:";;",ENUM_OUTLINE_SUB_MODE:{COMPACT:1,STANDARD:2},ENUM_GRID_PROPS:{SHOW_DEF_GRID_DZ:"shwdgdz",OUTLINE_SUB_MODE:"olmt"},ENUM_PIN_FREEZE_VALUES:{FREEZE:1,PIN_LEFT:2,PIN_RIGHT:4}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(W){if(W!==null){return(W.constructor!==Array)?[W]:W;}return null;}function F(g,e,a){if(!e){return null;}var h=[],X=g.selectedIndices,W=g.allIdx,c=g.noneIdx;if(g.multiSelect&&(c>-1)&&(I.indexOf(e,c)>-1)){return h;}var Z,b,f=g.items,d=g.itemIdField,Y=g.selectedItems,k;if(g.multiSelect&&(W>-1)&&(I.indexOf(e,g.allIdx)>-1)){for(Z=0,b=f.length;Z<b;Z++){if(!X[Z]){h.push(Z);X[Z]=true;g.selectedIndex=Z;g.selectedItem=f[Z];}}}else{for(Z=0,b=e.length;Z<b;Z++){var j=e[Z];if(!X[j]){X[j]=true;if(a){h.push({idx:j,positions:a});}else{h.push(j);}g.selectedIndex=j;k=g.selectedItem=f[j];if(Y){Y[k[d]]=k;}}}}return h;}function D(Z,W){var Y=[],a=Z.selectedIndices,b=Z.selectedItems,X;for(X in a){delete a[X];if(W){Y.push({idx:parseInt(X,10),positions:W});}else{Y.push(parseInt(X,10));}}Z.selectedIndex=-1;Z.selectedItem=null;if(b){Z.selectedItems={};}return Y;}function U(g,f,a){if(!f){return null;}var c=[],X=g.selectedIndices,j=I.indexOf,W=g.allIdx,d=g.noneIdx,e=g.itemIdField,Y=g.selectedItems;if(g.multiSelect&&(((W>-1)&&(j(f,W)>-1))||((d>-1)&&(j(f,d)>-1)))){return D(g);}if(f.length>0&&X[W]){if(j(f,W)<0){f.push(W);}}var b=f.length,Z;for(Z=0;Z<b;Z++){var h=f[Z];if(X[h]){delete X[h];if(a){c.push({idx:h,positions:a});}else{c.push(h);}if(Y){delete Y[g.items[h][e]];}if(g.selectedIndex===h){g.selectedIndex=-1;g.selectedItem=null;}}}return c;}function C(Z,a,X,W){if(W){return ;}if(this.raiseEvent){if((Z&&Z.length)||(a&&a.length)){try{this.raiseEvent({name:"selectionChange",added:Z,removed:a});}catch(Y){U(this,Z);F(this,a);throw Y;}}}}function B(X){var Y=this.itemIdField,W=this.items;if(typeof X==="object"&&Y){return I.find(W,Y,X[Y]);}return I.indexOf(W,X);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(W){this._super(W);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(f){f=J(f);if(!f){return ;}var c=this.items,W=this.items.length,Y=this.selectedItems,a=[],X;c=this.items=c.concat(f);X=c.length;if(Y){var b=this.itemIdField,Z,e;for(Z=W;Z<c.length;Z++){e=c[Z];if(Y[e[b]]){a.push(Z);}}}if(a&&a.length){F(this,a);}if(X>W){var d=this.itemsContainerNode;if(d){d.innerHTML+=this._buildItemsMarkup(W,X-1).join("");}}},addSelectedItems:function S(W){this.selectItems(W,false);},setSelectedItems:function L(W){this.selectItems(W,true);},selectItems:function R(e,g){e=J(e);if(!e){return ;}if(g&&this.selectedItems){this.selectedItems={};}var Y=this.selectedItems,c=this.itemIdField,W=[],a=this.items.length,b=[],X=this.allowUnlistedValues,f,d,Z;for(Z=0;Z<e.length;Z++){f=e[Z];d=B.call(this,f);if(d<0){if(Y===null){if(X){W.push(f);d=a++;b.push(d);}}else{Y[f[c]]=f;}}else{b.push(d);}}if(W.length>0){this.addItems(W);}if(b.length>0){if(g){this.select(b);}else{this.addSelect(b);}}},unselectItems:function A(X){X=J(X);if(!X){return ;}var c=this.selectedItems,Y=[],b=this.itemIdField,a,W,Z;if(c===null){return ;}for(Z=0;Z<X.length;Z++){a=X[Z];if(c){delete c[a[b]];}W=B.call(this,a);if(W<0){Y.push(W);}}if(Y.length>0){this.removeSelect(Y);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(X,Y,W){if(X!==-1){this.select([X],Y,W);}},singleSelectByField:function O(X,Y,W){this.singleSelect(I.find(this.items,Y,X),W);},toggleSelect:function Q(W){var Y,X;if(this.selectedIndices[W]){X=U(this,[W]);}else{Y=F(this,[W]);}C.call(this,Y,X,[W]);},select:function(Y,X,W){Y=J(Y);if(!Y){return ;}var a=D(this,W),c=F(this,Y,W),Z;if(this.selectionPolicy!=="reselect"){for(Z=a.length-1;Z>=0;Z--){var b=I.indexOf(c,a[Z]);if(b>-1){a.splice(Z,1);c.splice(b,1);}}}C.call(this,c,a,Y,X);},rangeSelect:function H(X,W){var c=this.selectedIndex,a=c,b=this.allIdx,Y=[],Z;if(X===b||this.selectedIndices[b]){Y.push(b);}else{if(a===-1&&this.selectedIndices){for(Z in this.selectedIndices){a=parseInt(Z,10);break;}}a=a===-1?0:a;if(a>X){a=X;X=c;}for(Z=a;Z<=X;Z++){Y.push(Z);}}this.select(Y,W);this.selectedIndex=c;},clearSelect:function(W){C.call(this,null,D(this),[],W);if(!W){this.raiseEvent({name:"clearSelection"});if(this.parent){this.parent.raiseEvent({name:"clearSelection"});}}},addSelect:function(Z,W,X){Z=J(Z);if(!Z){return ;}var Y=F(this,Z,X),b=null,a=this.noneIdx;if(this.multiSelect&&(a>-1&&I.indexOf(Z,a)>-1)){b=U(this,Z);}C.call(this,Y,b,Z,W);},removeSelect:function(Y,W,X){Y=J(Y);if(!Y){return ;}C.call(this,null,U(this,Y,X),Y,W);},_set_selectedIndices:function P(Y,e,W){if(this.selectedItems){this.selectedItems={};}var X=this.selectedIndices;if(X===e){return false;}if(!X){X={};this.selectedIndices=X;}if(!e){e={};}var c=this.selectedIndex,b=[],d;for(d in X){if(!e[d]){d=parseInt(d,10);delete X[d];b.push(d);if(c===d){this.selectedIndex=-1;this.selectedItem=null;}}}var h=[],f=this.items,a=this.itemIdField,g;for(d in e){if(!X[d]){d=parseInt(d,10);X[d]=true;h.push(d);this.selectedIndex=d;g=this.selectedItem=f[d];if(this.selectedItems){this.selectedItems[g[a]]=g;}}}if(W!==true){var Z=[];for(d in e){if(X[d]){d=parseInt(d,10);Z.push(d);}}C.call(this,h,b,Z);}return(h.length||b.length);},_set_selectedIndex:function N(Z,X,W){var Y={};if(X>-1){Y[X]=true;}return this._set_selectedIndices("selectedIndices",Y,W);},_set_selectedItem:function E(Z,Y,X){var W=B.call(this,Y);if((W<0)&&(Y!==null&&Y!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(Y));W=this.items.length-1;}return this._set_selectedIndex("selectedIndex",W,X);},_addSelections:function(W){return F(this,W);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var G=function(c){var b=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";if(c.getTemplateKey){return c.getTemplateKey()+"-"+b;}return c.k+"-"+b;},O={},K=mstrmojo.array,S=mstrmojo.hash;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function J(){this._super();this.setup();this.initialHighlight();},initialHighlight:function B(){if(!this.getExp()){if(O[G(this)]){this.highlight.apply(this,O[G(this)]);}else{if(this.isVisMap){this.highlight("allLayers",this.genSelectionMapping(),true);}else{if(S.walk("model.docModel.lastSelection.selectedPanelEntryPoint",this)){this.highlightWithCachedData();}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}}}},getExp:function(){var b=this.model.data,c=b&&b.sc&&b.sc.exp;return c;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function a(){var b=this.defn&&this.defn.an;return b&&b.length>0?b:[];},hasAssociatedNodes:function M(){var b=this.getAssociatedNodes();return b.length>0;},getDocModelForEvent:function H(){return this.model&&this.model.docModel;},setup:function R(){var b=this.getDocModelForEvent(),c=this.id;if(b){[this.brushSub,this.clearSub].forEach(function(d){if(d){d.clear();}});this.brushSub=b.attachEventListener("brushing",c,this.onBrushing);this.clearSub=b.attachEventListener("clearBrush",c,this.onClearBrushing);}},handlesMultiSelection:function F(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function P(){var e=[],c=[],d=this.getAssociatedNodes(),f=this;d.forEach(function(g){e.push(g.k);});var b=this.getDocModelForEvent();c=mstrmojo.array.filter(e,function(h){var g=b&&b.getVisUnitByKeyFromMojoAll&&b.getVisUnitByKeyFromMojoAll(h);return g&&b.getHighlightInTargetSelectionMode&&b.getHighlightInTargetSelectionMode(f.parent,g);});return c;},onSelectionChange:function L(b){var c=false;if(this._super){c=this._super(b);}return this.clearHighlightForSelectionChange(c);},onContextMenuSelectionChange:function I(b){var c=false;if(this._super){c=this._super(b);}return this.clearHighlightForSelectionChange(c);},clearHighlightForSelectionChange:function Z(d){var b=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){b.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()){var c=this.getHighlightKeys();if(c&&c.length>0){b.raiseEvent({name:"brushing",from:this,keys:c});}return true;}return false;},onBrushing:function A(l){var d=l.keys.slice();var e=false,k=d.indexOf(this.k)!==-1;if(!k){var g=this.getDocModelForEvent(),i=g.getNodePath(this.k,g.getLayoutKeyByUnitKey(this.k))||"";e=d.filter(function(f){return i.indexOf(f)>-1;}).length>0;}if(k||e){if(this.highlight){var h=l.from,b=l.selectionType||h.getSelectionType&&h.getSelectionType(),j=l.selectionHash||h.getSelectionHash&&h.getSelectionHash(),c=this.isVIXtab&&h.isVIXtab&&h.getSelectionType()==="att"&&this.model.hasRecursiveAttribute()&&h.model.hasRecursiveAttribute();this.highlight(b,j,c,true);d.push(h.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:d});this.cacheLastSelectionForTargets(d,b,j,c,h.k);}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function Y(c){var b=false;if(K.indexOf(c.excludeKeys,this.k)===-1){if(this._super){b=this._super(c);}if(!b){var d=this.getAssociatedNodes();if(K.find(d,"k",c.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function E(){O[G(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function C(){delete O[G(this)];if(this._super){this._super.apply(this,arguments);}},clearAllHighlightsCache:function(){O={};},clearCxtMnuSelection:function D(){if(this._super){this._super.apply(this);}},clearHighlightsCache:function W(){delete O[G(this)];},updateAssociatedNodesOnMove:function N(){this.clearSelections(true);this.endSelections();if(this.isLinkedFilter&&this.isLinkedFilter()){return ;}delete this.defn.an;},cacheLastSelectionForTargets:function X(j,g,h,b,f){var c=this.getDocModelForEvent(),e,d;if(c){if(!c.lastSelection){c.lastSelection={selections:{},selectedPanelEntryPoint:null};}e=c.lastSelection.selections;for(d=0;d<j.length;d+=1){e[j[d]]={lastSelectionType:g,lastSelectionData:h,visAsFilter:b,skipScroll:j[d]===f};}}},highlightWithCachedData:function U(){var b=S.walk("model.docModel.lastSelection",this),c;if(b){c=b.selections[b.selectedPanelEntryPoint];b.selectedPanelEntryPoint=null;}if(c){this.highlight(c.lastSelectionType,c.lastSelectionData,false);}},highlightGridWithCachedData:function Q(){var b=S.walk("model.docModel.lastSelection",this);var c;if(b){c=b.selections[this.k];}if(c&&!c.skipScroll){this.highlight(c.lastSelectionType,c.lastSelectionData,c.visAsFilter,true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var P=/\{\@(en@)?([^\}]+)\}/gm,L=/\</gm,Y=/\>/gm,F=/\S/,W=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],G=new RegExp("(\\"+W.join("|\\")+")","g"),Z={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;","\u0009":"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},d={"&amp;":"&","&lt;":"<","&gt;":">","&#x09;":"\u0009","&#x0A;":"\n","&#x0D;":"\r","&quot;":'"',"&#039;":"'"},D={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#39;",'"':"&#34;"},O={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#39;":"'","&#039;":"'","&#34;":'"',"&quot;":'"',},E={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","\u20ac":"&#8364;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&#34;":'"',"&#8364;":"\u20ac"},S=160;var N=function(e){if(e===null){return"null";}var f=typeof e;if(f!=="object"){return f;}if(e.length===undefined){return"object";}return"array";};var b={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function I(f,i,h){var e;h=h||[];if(!f){return"";}var g=[];for(e in i){if(mstrmojo.array.indexOf(h,e)===-1){g.push(e.k||e);}}return f.replace(new RegExp(g.join("|"),"g"),function(j){var k=i[j];return k.v||k;});},trim:function U(e){return e&&e.trim?e.trim():e;},startsWith:function c(f,e){return f.length>=e.length&&f.substring(0,e.length)===e;},endsWith:function X(f,e){return f.length>=e.length&&f.substring(f.length-e.length)===e;},ellipsize:function A(g,f){var e=this.trim(g.substr(0,(f||1)-1));if(e!==g){e+="&hellip;";}return e;},isEmpty:function K(e){return(e===null)||(e===undefined)||!(F.test(e));},regEscape:function R(e){return e.replace(G,"\\$1");},escapeIllegalXML:function C(e){if(!e||!e.replace){return e;}var f=/\u001a/gm,g="";return e.replace(f,g);},encodeXMLAttribute:function(e){return mstrmojo.string.multiReplace(e,Z);},decodeXMLAttribute:function(e){return mstrmojo.string.multiReplace(e,d);},encodeHtmlString:function(f,e,g){if(!f||!f.replace){return f;}if(g){return mstrmojo.string.multiReplace(f,E);}return mstrmojo.string.multiReplace(f,D,e?[" "]:[]);},decodeHtmlString:function(f,e){return e?mstrmojo.string.multiReplace(f,M):mstrmojo.string.multiReplace(f,O);},htmlAngles:function(e){if(!mstrmojo.string.isEmpty(e)){e=String(e);return e.replace(L,"&lt;").replace(Y,"&gt;");}return e;},apply:function J(e,g){if(!e){return"";}var f=this;return e.replace(P,function h(k,l,m){var i;try{i=mstrmojo.hash.walk(m,g);if(typeof i==="function"){i=i.call(g);}}catch(j){}i=(i===null||i===undefined)?"":i;return(!!l)?f.encodeHtmlString(i,true):i;});},json2xml:function(e,x,y){if(!(x instanceof Array)){x=[x];}var f=y&&y.isSerializable,w=(y.convertBoolean!==false),AA=y&&y.skipFunctions,u,l;var o=[],j=[],m,h,k;for(u=0,l=x.length;u<l;u++){var s=x[u];for(m in s){if(AA&&typeof s[m]==="function"){continue;}if(f){var z=f(m,x,u);if(z!==true){if(z===false){continue;}else{if(z.att){o.push(z.att);}if(z.child){j.push(z.child);}continue;}}}h=s[m];k=N(h);switch(k){case"array":var p,q;j.push("<"+m+">");for(p=0,q=h.length;p<q;p++){var g=y.getArrItemName(m,h,p)||p;j.push(this.json2xml(g,h[p],y));}j.push("</"+m+">");break;case"object":j.push(this.json2xml(m,h,y));break;case"string":o.push(m+'="'+mstrmojo.string.encodeXMLAttribute(h)+'"');break;case"boolean":o.push(m+'="'+(w?(h?"-1":"0"):h)+'"');break;case"null":if(!y.skipNull){o.push(m+'="'+y.nullValue+'"');}break;default:o.push(m+'="'+h+'"');break;}}}return"<"+e+" "+o.join(" ")+">"+j.join("")+"</"+e+">";},escape4HTMLText:function B(l){if(!l||!l.replace){return l;}var i=/"/gm;var g="&quot;";var m=/&/gm;var k="&amp;";var j=/</gm;var e="&lt;";var h=/>/gm;var f="&gt;";return l.replace(m,k).replace(i,g).replace(j,e).replace(h,f);},parseUri:function(j,f){f=f||b;var e=f.parser[((f.strictMode)?"strict":"loose")].exec(j),h={},g=14;while(g--){h[f.key[g]]=e[g]||"";}h[f.q.name]={};h[f.key[12]].replace(f.q.parser,function(k,i,l){if(i){h[f.q.name][i]=l;}});return h;},removeSpecialChars:function(e){return e.replace(/[^a-zA-Z0-9]/g,"");},hashCode:function Q(e){return e.split("").reduce(function(g,f){g=((g<<5)-g)+f.charCodeAt(0);return g&g;},0);},splitFirst:function a(g,e){var f=g.indexOf(e);if(f===-1){return[g];}return[g.slice(0,f),g.slice(f+e.length)];},replaceWithCurMsgID:function H(e,j,f){if(!e||!j||!f){return j;}var g="originMessageID=",n=new RegExp(g,"i"),h=e.split(n),m=j.split(n),o=/^[a-fA-F0-9]{32}$/;for(var k=0;k<h.length;k++){if(h[k].toLowerCase().startsWith("{&documentmessageid}")&&k<m.length){var l=m[k].substring(0,32);if(o.test(l)){m[k]=f+m[k].substring(32);}}}return m.join(g);}});mstrmojo.string.NBSP_CODE=S;})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");mstrmojo.customviz.PICKED_TYPE={ATTR:"attribute",METRIC:"metric",BOTH:"both"};mstrmojo.customviz.PICKED_CRITERIA={SUBSET:"subset",INTERSECTION:"intersection"};var P=mstrmojo,K=P.hash,H=P.array;mstrmojo.customviz.GraphicModel=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.customviz.GraphicModel",_$_$_$_sysProperties:null,init:function M(){this._$_$_$_sysProperties={uniqueId:null,graphicCenter:null,selector:null,isAttrSelector:null,groupHeaders:null,drillFromHeader:null,updateDropZoneActions:null};},setCustomProperties:function F(S){K.copy(S,this);},getCustomProperty:function E(S){return this[S];},setSelector:function Q(S,U){this._$_$_$_sysProperties.selector=S;this._$_$_$_sysProperties.isAttrSelector=U;},getSelector:function L(){return this._$_$_$_sysProperties.selector;},isAttributeSelector:function D(){return this._$_$_$_sysProperties.isAttrSelector;},setId:function R(S){this._$_$_$_sysProperties.uniqueId=S;},getId:function I(){return this._$_$_$_sysProperties.uniqueId;},setGroupOptions:function A(S){this._$_$_$_sysProperties.groupHeaders=H.ensureArray(S);},getGroupHeaders:function O(){return this._$_$_$_sysProperties.groupHeaders;},setDrillOptions:function N(U,S){this._$_$_$_sysProperties.drillFromHeader=U;this._$_$_$_sysProperties.updateDropZoneActions=S;},getDrillHeader:function C(){return this._$_$_$_sysProperties.drillFromHeader;},getUpdateDropZoneActions:function J(){return this._$_$_$_sysProperties.updateDropZoneActions;},setGraphicCenter:function G(U,S){this._$_$_$_sysProperties.graphicCenter={x:U,y:S};},getGraphicCenter:function B(){return this._$_$_$_sysProperties.graphicCenter;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A=null;function B(D){return mstrmojo.DICFactory.createDIC(C.copy({dic:this.dic,owner:this.owner,group:this},D));}mstrmojo.DICFactory=mstrmojo.provide("mstrmojo.DICFactory",{createDIC:function(G){var E=G.dic,F=mstrmojo.DICConfig.getDICClass(E),D;if(F){if(G.k===undefined){G.k=G.opener&&G.opener.id;}G.showByDefault=mstrmojo.DICConfig.showDICByDefault(G.dic,G.openerType);G.hasPreview=mstrmojo.DICConfig.hasDICPreview(G.dic,G.openerType);G.canSlice=mstrmojo.DICConfig.canSlice(G.dic,G.openerType);D=new F(G);}return D;},createDICPopup:function(D,E){return mstrmojo.DICPopup.getInstance(D,E);},createDICGroup:function(F){var I=C.copy(F,{scriptClass:"mstrmojo.Widget",widgetsMap:{},dic:null,owner:null,groupMembers:{},postCreate:function(){var L=this.dic,K=this.openerType,J=mstrmojo.DICConfig;this.showByDefault=J.showDICByDefault(L,K);this.hasPreview=J.hasDICPreview(L,K);},addDIC:function D(J,K){this.groupMembers[J]=K;},showPopupDIC:function H(K){if(!this.showByDefault){var J=this.widgetsMap[K],L=this.groupMembers[K];if(!L){return ;}if(!J){J=this.widgetsMap[K]=B.call(this,L);}J.showInPopup();}},render:function G(){if(this.showByDefault||this.hasPreview){var L=this.groupMembers,K=this,J;C.forEach(L,function(N,M){if(!N.hasRendered){K.widgetsMap[M]=J=B.call(K,N);if(K.showByDefault){J.render();}else{if(K.hasPreview&&J.enabled){J.renderPreview();}}N.hasRendered=true;}});}},destroy:function E(){C.forEach(this.widgetsMap,function(J){J.destroy();});this.widgetsMap={};}});return mstrmojo.insert(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var W=this.vscrollNode,X=W&&W.style;if(!X){return ;}if(this.vscrollVisible){var U=this.maxPos,Y=this.clientSize;X.height=Math.round(Y.y*Y.y/U.y)+"px";X.left=(Y.x-5)+"px";X.display="block";X.opacity=0.5;}else{X.opacity=0;}},onhscrollVisibleChange:function(){var X=this.hscrollNode,W=X&&X.style;if(!W){return ;}if(this.hscrollVisible){var U=this.maxPos,Y=this.clientSize;W.width=Math.round(Y.x*Y.x/U.x)+"px";W.top=(Y.y-5)+"px";W.display="block";W.opacity=0.5;}else{W.opacity=0;}}};var M=L.copy({onposChange:function(){var X=this.clientSize,W=this.maxPos,U=0,Y=0;if(this.scrollsVert){Y=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((X.y-(X.y*X.y/W.y))*this.pos.y/W.y)+"px)";}}if(this.scrollsHoriz){U=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((X.x-(X.y*X.x/W.x))*this.pos.x/W.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(U,10)+"px, -"+parseInt(Y,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var X=this.clientSize,W=this.maxPos,U=0,Z=0,Y=this.scrollboxNode;if(this.scrollsVert){Z=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((X.y-(X.y*X.y/W.y))*this.pos.y/W.y)+"px";}Y.scrollTop=parseInt(Z,10);}if(this.scrollsHoriz){U=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((X.x-(X.y*X.x/W.x))*this.pos.x/W.x)+"px";}Y.scrollLeft=parseInt(U,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var Y=this.scrollboxNode,X=this.itemsContainerNode||Y.firstChild;if(Y&&Y!==X){this.scrollChild=X;var U=Y.style;U.position="relative";U.overflow="hidden";var W=X.style;W.position="absolute";W.left=0;W.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(U){if(this.usesTouches){this.detachTouchEvents();}this._super(U);},attachTouchEvents:function(){var W=this.touchNode||this.scrollboxNode;if(W){if(!this._tsCallback){var U=this;this._tsCallback=function(X){U.touchesBegin(self,X);};this._tmCallback=function(X){U.touchesMoved(self,X);};this._teCallback=function(X){U.touchesEnd(self,X);};}D.attachEvent(W,D.TOUCHSTART,this._tsCallback);this._tsNode=W;}},detachTouchEvents:function(){var U=this._tsNode;if(U){D.detachEvent(U,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(U,X){var W=X.target&&X.target.tagName;if(W&&(W==="SELECT"||W==="INPUT")){return ;}D.preventDefault(U,X);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(U,X),U);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(d,g){var b=D.getMousePosition(D.firstTouch(d,g),d);D.preventDefault(d,g);if(!this.dragging){var U=5,j=Math.abs;if((this.scrollsHoriz&&j(b.x-this.pos.x)>U)||(this.scrollsVert&&j(b.y-this.pos.y)>U)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=b;var X=this.scrollboxNode,a={x:X.clientWidth,y:X.clientHeight},h={x:X.scrollWidth,y:X.scrollHeight};this.clientSize=a;this.scrollSize=h;this.maxPos={x:Math.max(h.x-a.x,0),y:Math.max(h.y-a.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(d,g);var f=this.startTimePos,Z=this.startTouchPos,c=this.maxPos;var Y={x:this.scrollsHoriz?Math.max(Math.min(f.x-(b.x-Z.x),c.x),0):0,y:this.scrollsVert?Math.max(Math.min(f.y-(b.y-Z.y),c.y),0):0};this.set("pos",Y);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=b;var W=new Date(),i=this.lastDragTime;this.nextLastDragTime=i;this.lastDragTime=W;if((W-i)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:Y.x,y:Y.y};this.startTouchPos=b;}}},touchesEnd:function I(U,W){D.preventDefault(U,W);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(U,W);if((new Date())-this.lastDragTime<=R){this.startDeceleration(U,W);}else{this.hideScroll();}}},startDeceleration:function B(a,b){var Y=D.getMousePosition(D.firstChangedTouch(a,b),a),f=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||Y,d={x:Y.x-f.x,y:Y.y-f.y},U=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),g=U?(new Date())-U:0,X={x:g?Number(d.x*O*F/g).toFixed(2):0,y:g?Number(d.y*O*F/g).toFixed(2):0};var c=this,W=function(e){return(c.scrollsHoriz&&Math.abs(e.x)>=G)||(c.scrollsVert&&Math.abs(e.y)>=G);};if(W(X)){this.velocity=X;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var Z=function(){c.decelerate();if(!W(c.velocity)){c.stopDeceleration();c=null;}};Z();if(this.decelerating){this.decelerationTimer=window.setInterval(Z,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var Y=this.pos,X=this.velocity,W=this.friction,b=this.maxPos,Z={x:Y.x-X.x,y:Y.y-X.y},d=this.bounces,U=this.BOUNCEFRICTION;var c=Z.x;if(c<0||c>b.x){Z.x=(c<0)?0:b.x;X.x*=d?-U:0;W.x=U;}var a=Z.y;if(a<0||a>b.y){Z.y=(a<0)?0:b.y;X.y*=d?-U:0;W.y=U;}this.set("pos",Z);this.velocity={x:W.x*X.x,y:W.y*X.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var U=this.maxPos;if(this.scrollsVert&&U.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&U.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.Event=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Event",init:function A(B){if(B&&!B.name){B.name=B.type;}mstrmojo.hash.copy(B,this);},name:"",src:null});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash,A=mstrmojo.util.PlatformHelper;mstrmojo.requiresDescs(2213,3326,3327,3329,4531,13283,13284,13285,13286);mstrmojo.ME.Enum={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};},FBFlag:{Automatic:0,Manual:3},AFB:{Automatic:-1,False:0,True:1},SFB:{Automatic:-1,False:1,True:2},UI_OBJECT_TYPE:{Dimty:-1,Sub_Expression:-2,Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},UI_DATA_TYPE:{Sortby:-1,Breakby:-2,Level:-4,Condition:-5,Transformation:-6},SHORTCUT_FUNCTIONS:{Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},DYNAMIC_DIMTY:{CODES:{auto:{n:mstrmojo.desc(4531,"Automatic"),did:"@auto",t:-1},page:{n:mstrmojo.desc(3329,"Grand Total"),did:"@p",t:-1},byCol:{n:mstrmojo.desc(3326,"By Columns"),did:"@cols",t:-1},byRow:{n:mstrmojo.desc(3327,"By Rows"),did:"@rows",t:-1},byCell:{n:mstrmojo.desc(13283,"By Cell"),did:"@cell",t:-1},byShape:{n:mstrmojo.desc(13284,"By Shape"),did:"@shape",t:-1},downCross:{n:mstrmojo.desc(13285,"Down, Then Across"),did:"@cr",t:-1},crossDown:{n:mstrmojo.desc(13286,"Across, Then Down"),did:"@rc",t:-1}},getItems:function E(H){var G=this.CODES,F=[];switch(H){case"breakby":F=[G.auto,B.copy({n:mstrmojo.desc(2057,"None")},B.copy(G.page)),B.copy({n:mstrmojo.desc(122,"Columns")},B.copy(G.byCol)),B.copy({n:mstrmojo.desc(2968,"Rows")},B.copy(G.byRow)),B.copy({n:mstrmojo.desc(13399,"Cell")},B.copy(G.byCell)),B.copy({n:mstrmojo.desc(2923,"Shape")},B.copy(G.byShape))];break;case"level":if(A.isAIDatasetCollectionMode()){F=[G.auto,G.page,];}else{F=[G.auto,G.page,G.byCol,G.byRow,G.byCell,G.byShape];}break;case"sortby":F=[G.auto,G.downCross,G.crossDown];}return F;},getAutomaticDimtyObject:function D(){return B.copy(this.CODES.auto);},getDimtyObject:function C(F,I){var G=null;var H=false;if(I){B.forEach(mstrmojo.ME.Enum.DYNAMIC_DIMTY.CODES,function(J){if(J.did===F){G=B.copy(J);H=true;return false;}});}if(!H){G={n:F,t:-1,dimty:true};}return G;}},NonExposableParams:["IsNewOLAP","OLAPPattern","OLAPHasWindow"]};mstrmojo.ME.Enum.DEFAULT_MPS={mps:{afb:mstrmojo.ME.Enum.AFB.False,sfb:mstrmojo.ME.Enum.SFB.False,fbf:mstrmojo.ME.Enum.FBFlag.Automatic}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.all={};var E=mstrmojo.all,G=mstrmojo.hash;var A=0;function D(){var I;while(!I){var H="mstr"+(A++);if(!E[H]){I=H;}}return I;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function F(H){if(!H){return ;}var I=H.id;if(!I){H.id=I=D();}else{if(E[I]){throw new Error("Tried to register 2 objects with same id: "+I);}}E[I]=H;},remove:function C(H){if(H&&H.id){delete E[H.id];}},dumpAll:function(){var H;for(H in E){var I=E[H].id;if(I){mstrmojo.dbg(I+"("+(E[H].scriptClass||"[unknown class]")+")");}}},ref:function B(I,H){H=H||{};if(I){var L=I;while(L){switch(typeof L){case"string":if(H.skipLoadChecks!==true){mstrmojo.requiresCls(L);}L=G.walk(L,window);break;case"function":return(H.dontInst!==true)?new L():L;case"object":if(L.constructor===Object){var K=L.scriptClass;if(K){if(H.skipLoadChecks!==true){mstrmojo.requiresCls(K);}var J=G.walk(K,window);if(J){return new J((H.clone===true)?G.clone(L):L);}return null;}return L;}return L;default:return null;}}}return null;}});mstrmojo.insert=mstrmojo.registry.ref;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.mstr.EnumWebAPIErrorCodes");mstrmojo.vi.ui.rw.SelectionType={EMPTY:"empty",ATTS:"att",METRICS:"metric",COL_HEADERS:"col-headers",ROW_HEADERS:"row-headers",METRIC_VALUES:"metric-values"};var A=function(AH){var AF=(mstrApp&&mstrApp.docModelData&&mstrApp.docModelData.mid)||"",AG=AH.k||AH.key;return AG+"-"+AF;},S=function(AG){var AF=AG.k||AG.key;return AF+"-";},H={},w={},Y=mstrmojo.hash,d=mstrmojo.array,G=mstrmojo.mstr.EnumWebAPIErrorCodes,O=function(AH){var AF=Y.keyarray(AH).sort(),AG=[],AI;d.forEach(AF,function(AJ){AI=[];d.forEach(AH[AJ],function(AK){AI.push(this.model.getNormalizedFormElementId(AK.id));},this);AG.push(AJ+"-"+AI.sort().join("@"));},this);return AG.join("#");},N=function(AF){var AG=O.call(this,AF);if(!this._viSelections[AG]){this._viSelections[AG]=AF;if(mstrApp&&mstrApp.isInVFConfigMode){return ;}H[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}},AE=function(AF){var AG=O.call(this,AF);if(!this._viContextMenuSelections[AG]){this._viContextMenuSelections[AG]=AF;}},t=function(AG){var AH=O.call(this,AG),AF=this._viSelections[AH];if(AF){delete this._viSelections[AH];if(mstrApp&&mstrApp.isInVFConfigMode){return ;}H[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}return AF;},i=function(AG){var AH=O.call(this,AG),AF=this._viContextMenuSelections[AH];if(AF){delete this._viContextMenuSelections[AH];}return AF;},o=function(){var AF=A(this);w=w||{};if(H[AF]){w[AF]=Y.clone(H[AF]);}},AD=function(AI,AH,AM,AJ,AF,AL,AG){var AK={};AK[AI]=[{id:AH,n:AM,fm:AG,ui:AJ,o:AF,axis:AL}];return AK;},I=mstrmojo.vi.ui.rw.SelectionType;mstrmojo.vi.ui.rw._HasVisSelections=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisSelections",{_mixinName:"mstrmojo.vi.ui.rw._HasVisSelections",init:function(AF){if(this._super){this._super(AF);}this._viSelections={};},update:function h(AG){var AF=true;if(this._super){AF=this._super(AG);}this.clearViSelection();if(!mstrApp.isInVFConfigMode){Y.copy(H[A(this)],this);}if(!this.updateForInteractiveMode){o.call(this);}return AF;},onSelectionChange:function M(AF){if(this._super){this._super(AF);}},_viSelections:{},_viContextMenuSelections:{},_selectionType:I.EMPTY,_contextMenuSelectionType:I.EMPTY,_cellSelections:[],getSelectionType:function(){return this._selectionType;},getContextMenuSelectionType:function(){return this._contextMenuSelectionType;},isSingleAttrSelection:function(){var AG=null,AF;if(this.getSelectionType()===I.ATTS){AF=this.getSelections();if(AF.length>1){return !AF.some(function(AH){if(!AG){AG=AH[0].tid;return false;}return AG!=AH[0].tid;},this);}return true;}return false;},isSingleContextMenuAttrSelection:function(){var AG=null,AF;if(this.getContextMenuSelectionType()===I.ATTS){AF=this.getContextMenuSelections();if(AF.length>1){return !AF.some(function(AH){if(!AG){AG=AH[0].tid;return false;}return AG!=AH[0].tid;},this);}return true;}return false;},isSingleSelection:function(){return(this._viSelections&&Y.keyarray(this._viSelections).length===1);},isSingleContextMenuSelection:function(){return(this._viContextMenuSelections&&Y.keyarray(this._viContextMenuSelections).length===1);},getSelectionSize:function x(){return(this._viSelections&&Y.keyarray(this._viSelections).length)||0;},getCxtMnuSelectionSize:function C(){return(this._viContextMenuSelections&&Y.keyarray(this._viContextMenuSelections).length)||0;},getSelectionHash:function X(){return this._viSelections;},getContextMenuSelectionHash:function n(){return this._viContextMenuSelections;},getSelectionCache:function B(){var AG=A(this),AF=H[AG];if(!AF&&Y.walk("node.data.pfec",this)===G.SEC_E_VIZ_EXECUTION_ACCESS){AF=H[S(this)];}return AF;},setSelectionCache:function b(AF){H[A(this)]=AF;},getPrevSelectionInfo:function L(){return w[A(this)];},getSelections:function s(){var AF=[],AG;Y.forEach(this.getSelectionHash(),function(AH){AG=[];AF.push(AG);Y.forEach(AH,function(AI,AJ){d.forEach(AI,function(AK){AG.push({tid:AJ,eid:AK.id,v:AK.n,level:AK.level});});});});return AF;},getContextMenuSelections:function g(){var AF=[],AG;Y.forEach(this.getContextMenuSelectionHash(),function(AH){AG=[];AF.push(AG);Y.forEach(AH,function(AI,AJ){d.forEach(AI,function(AK){AG.push({tid:AJ,eid:AK.id,fm:AK.fm,v:AK.n,axis:AK.axis,o:AK.o,ui:AK.ui});});});});return AF;},isMetricValueSelected:function z(AF){return !!this._viSelections[O.call(this,AF)];},isAttSelected:function Z(AG,AF){return this.isMetricValueSelected(AD(AG,AF));},isCtxMnuMetricValueSelected:function D(AF){return !!this._viContextMenuSelections[O.call(this,AF)];},isCtxMnuAttSelected:function AC(AG,AF){return this.isCtxMnuMetricValueSelected(AD(AG,AF));},addAttributeSelection:function l(AG,AF,AH){if(this._selectionType!==I.ATTS){this.clearSelections();this._selectionType=I.ATTS;}var AI=AD.call(this,AG,AF,AH);N.call(this,AI);return AI[AG];},addContextMenuAttributeSelection:function j(AI,AH,AL,AJ,AF,AK,AG){if(this._contextMenuSelectionType!==I.ATTS){this.clearCxtMnuSelection();this._contextMenuSelectionType=I.ATTS;}var AM=AD.call(this,AI,AH,AL,AJ,AF,AK,AG);AE.call(this,AM);return AM[AI];},removeAttributeSelection:function K(AG,AF){return t.call(this,AD.call(this,AG,AF));},removeContextMenuAttributeSelection:function a(AG,AF){return i.call(this,AD.call(this,AG,AF));},addMetricValueSelection:function q(AF){if(this._selectionType!==I.METRICS){this.clearSelections();this._selectionType=I.METRICS;}N.call(this,AF);},addContextMenuMetricValueSelection:function q(AF){if(this._contextMenuSelectionType!==I.METRICS){this.clearCxtMnuSelection();this._contextMenuSelectionType=I.METRICS;}AE.call(this,AF);},addAttrOrMetricCellSelection:function AA(AH,AG,AF){this._cellSelections.push({parentElementIds:AH,target:{selectionType:AF?I.ATTS:I.METRICS,id:AG}});},getCellSelections:function m(){var AF=this;AF.clearCellSelections();var AG=function(AI,AH){var AJ=[];if(AI){while(AH.hasOwnProperty("_p")){AJ.push(AH._p._e.id);AH=AH._p;}}else{var AK=AF.model.getCellDataUnion(AH);d.forEach(AK,function(AL){AJ.push(AL.eid);});}return AJ;};d.forEach(AF.highlights,function(AL){var AH=AF.getCellForNode(AL),AM=!AH.hasOwnProperty("mix")&&AH._e&&!AH.fi,AK=AG(AM,AH);if(AM){var AI=AH._e.id;AF.addAttrOrMetricCellSelection(AK,AI,true);}else{var AJ=AH._tp._e.oid;AF.addAttrOrMetricCellSelection(AK,AJ,false);}});return this._cellSelections;},removeMetricValueSelection:function Q(AF){return t.call(this,AF);},removeContextMenuMetricValueSelection:function R(AF){return i.call(this,AF);},clearSelections:function f(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=I.EMPTY;this._viSelections={};this._selectionType=I.EMPTY;if(typeof this.clearSelectedGraphicInfo==="function"){this.clearSelectedGraphicInfo();}},clearViSelection:function J(){this._viSelections={};this._selectionType=I.EMPTY;},clearCxtMnuSelection:function y(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=I.EMPTY;},clearCellSelections:function U(){this._cellSelections=[];},clearSelectionsCache:function W(){H={};},clearUnitSelections:function f(AG){if(this._super){this._super();}var AF={};Y.forEach(this._viSelections,function(AI,AH){if(Y.keyarray(AI)[0]!==AG){AF[AH]=AI;}});this._viSelections=AF;},clearAllSelectionsAndHighlight:function k(){this.clearSelections(true);this.endSelections();},endSelections:function F(){if(mstrApp&&mstrApp.isInVFConfigMode){return ;}H[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};this.raiseGraphicsSelectedEvent(this);if(this.isInFilterPanel()&&mstrApp&&mstrApp.isDossier){this.raiseGraphicsSelectionChangeEvent();return ;}this.onSelectionChange(this.getSelectionHash());},generateSelectionHashKey:function P(AF){return O.call(this,AF);},isInFilterPanel:function E(){var AF=this.node&&this.node.defn;return AF&&AF.iifp;},addSelectionsFromExpression:function AB(AH){this.clearSelections();this._selectionType=AH.type;var AF=this,AG=function(AN){var AO=20,AL=19,AM=function(AP){return(AP.nds||[]).length===1?AO:AP.fn;},AK=function(AP){return parseInt(AP.et,10)===5||parseInt(AM(AP),10)===AL;},AI=function(AP){d.forEach(AP.es,function(AQ){AF.addAttributeSelection(AP.a.did,AQ.v,AQ.n);});},AJ=function(AR){var AQ={},AP=function(AS){d.forEach(AS.es,function(AT){Y.copy(AD.call(AF,AS.a.did,AT.v,AT.n),AQ);});};if(AR.nds){d.forEach(AR.nds,AP);}else{if(AR.es){AP(AR);}}AF.addMetricValueSelection(AQ);};if(AK(AN)){AN={nds:[AN]};}d.forEach(AN.nds,function(AP){if(AK(AP)){if(AH.type===I.ATTS){AI(AP);}else{AJ(AP);}}else{AG(AP);}});};AG(AH.data);},raiseGraphicsSelectedEvent:function u(){if(window.mstrApp&&window.mstrApp.isEmbeddedEnvironment&&window.mstrApp.isEmbeddedEnvironment()){var AL=this,AK=AL.model,AJ=AK&&AK.data,AH=AJ&&AJ.k,AF=AJ&&AJ.gts,AP=AF&&AF.row,AI=AF&&AF.col,AM=d.ensureArray(AP).concat(AI||[]),AG=function(AR){var AQ;d.forEach(AM,function(AS){if(AS&&AS.id===AR){AQ=AS.n;return false;}});return AQ;},AN=[],AO=this.getSelectionHash();Y.forEach(AO,function(AR){var AQ=[];Y.forEach(AR,function(AU,AT){var AS=AG(AT);d.forEach(AU,function(AV){AQ.push({n:AS,nid:AT,v:AV.n,vid:AV.id});});});AN.push(AQ);});mstrApp.raiseEvent({name:"graphicsSelected",value:{graphics:AN,vizKey:AH}});}},raiseGraphicsSelectionChangeEvent:function e(){if(mstrApp&&(typeof mstrApp.raiseEvent==="function")){mstrApp.raiseEvent({name:"graphicsSelectionChange",value:{selections:H[A(this)],vizKey:this.k}});}},copyToContextMenuSelection:function p(){this._contextMenuSelectionType=this._selectionType;Y.copy(this._viSelections,this._viContextMenuSelections);}});mstrmojo.vi.ui.rw._HasVisSelections.VisSelectionType=null;mstrmojo.vi.ui.rw._HasVisSelections.clearAllSelectionsCache=function c(){H={};w={};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var E=mstrmojo.hash;var B=function(G){return(mstrmojo.now()-G.getTime());};mstrmojo.storage.DOMStorage=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.storage.DOMStorage",mIsSupported:false,mStorageObj:null,itemTimeToLive:3600,init:function F(G){E.copy(G,this);return this;},isSupported:function C(){return this.mIsSupported;},checkVersion:function A(G){var H=this.getItem("__version__");if(H&&H<G){mstrmojo.dbg("DOMStorage data is old - clearing, v="+H);this.clear();}this.setItem("__version__",G,-1);return this;},length:function(){return(this.mIsSupported?this.mStorageObj.length:0);},_keyExpired:function D(G){return(G&&(G.ts>0)&&(mstrmojo.now()>G.ts));},key:function(G){return(this.mIsSupported?this.mStorageObj.key(G):null);},getItemAsString:function(H){var G=this.getItem(H);if(G){if(typeof G==="object"){G=JSON.stringify(G);}else{G+="";}}return G;},getItem:function(H){var G=null;if(this.mIsSupported){var J=this.mStorageObj.getItem(H);if(J){try{J=JSON.parse(J);}catch(I){}if(this._keyExpired(J)){this.removeItem(H);}else{G=J.data;}}}return G;},setItem:function(H,J,G){G=G||this.itemTimeToLive;try{if(this.mIsSupported){this.mStorageObj.removeItem(H);var L=(G>0)?(mstrmojo.now()+(G*1000)):-1;var I={ts:L,data:J};this.mStorageObj.setItem(H,JSON.stringify(I));}}catch(K){if(K!==QUOTA_EXCEEDED_ERR){throw K;}}finally{}return this;},removeItem:function(G){if(this.mIsSupported){this.mStorageObj.removeItem(G);}return this;},clear:function(){if(this.mIsSupported){this.mStorageObj.clear();}return this;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var Y=this._sourceFn;if(!Y){var X=this.source;if(X!=null){if(typeof (X)==="string"){try{if(!(X.match("return "))&&!(X.match(/\;\s*\S/))){X="return "+X;}Y=new Function(X);}catch(a){console.log('CSP is enabled for current web-server.  The customization code is using the Binding code using the string "'+this.source+'".\nPlease update your customization to use a function for binding code instead of the string for customization code to work properly or CSP need to be disabled for this functionality to work as is.');}}else{if(typeof (X)==="function"){Y=X;}}this._sourceFn=Y;}}var S,Z=this.parent;if(Y){try{S=Y.apply(Z,[]);}catch(W){}}var U=this.setter,b=this.destination;if(U==null){Z[b]=S;}else{if(typeof (U)==="string"){Z[U](b,S);}else{if(typeof (U)==="function"){U.apply(Z,[b,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var U=this._chains;if(!U){this._parseChains();U=this._chains;}for(var S in U){this._attachChain(U[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var U=this._chains;if(U){for(var S in U){this._detachChain(U[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var W=this._chains;var U=this.source;if(U&&(typeof (U)==="function")){U=U.toString&&U.toString();}if(!U){return ;}function S(d,g,X,Z){var Y=d,b;while(b=Y.match(g)){var e=b[0],c=e.length,f=true;e=e.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var a in W){if(a.substr(0,c)===e){f=false;break;}else{if(e.indexOf(a)===0){delete W[a];}}}if(f){W[e]={host:(X==null)?null:b[X],parts:b[Z].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}Y=Y.substr(b.index+c);}}if(D.test(U)){S(U,O,null,1);}if(R.test(U)){S(U,M,1,2);}if(B.test(U)){S(U,L,1,2);}},_attachChain:function Q(S,W){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var f=S.evt2idx,j=S.idx2evt,b=S.parts;var g=(W>=0)?W:0,d=this.id,Y=mstrmojo.all,e=(W>0)?Y[j[g-1].context][b[g-1]]:(S.host?Y[S.host]:this.parent),U=b[g];var X=mstrmojo.array;while(e&&U){if(e.attachEventListener){var h=e[U+"_bindEvents"]||(U+"Change");if(typeof (h)==="string"){h=[h];}var a=[];for(var c=0,Z=h.length;c<Z;c++){a[c]=e.attachEventListener(h[c],d,"_callback");}for(var c=0;c<h.length;c++){f[e.id+"_"+h[c]]=g;}j[g]={context:e.id,evts:h,subs:a};}e=e[U];U=S.parts[++g];}},_detachChain:function G(S,U){var W=mstrmojo.all,l=S.idx2evt,f=S.evt2idx,c=this.id;var a=(U>-1)?U:0,d=l.length;if(a<d){for(;a<d;a++){var b=l[a];if(!b){break;}var Y=b.context,e=W[Y],k=b.evts;if(e&&e.detachEventListener){var m=b.subs;for(var h=0,X=m.length;h<X;h++){e.detachEventListener(m[h]);}}l[a]=null;for(var Z=0,g=k.length;Z<g;Z++){delete f[Y+"_"+k[Z]];}}}},_callback:function I(U){this.exec();if(!U||!U.name||!U.src){return ;}var W=U.src.id+"_"+U.name,Y=this._chains;for(var Z in Y){var X=Y[Z],S=X.evt2idx[W];if(S!=null){this._detachChain(X,S+1);this._attachChain(X,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}delete E[I];}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(F){var D=(F&&F.gts&&F.gts.col)||[],H=(F&&F.gts&&F.gts.row)||[],E=[];var G=C.filter(D.concat(H),function(I){return I.otp===-1;});C.forEach(G,function(I){E=E.concat(I.es);});return{tpltProp:F.prop,mxProp:C.map(E||[],function(I){var J={};J[I.oid]=mstrmojo.hash.copy(I.prop,{n:I.n,t:I.otp});return J;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);this.raiseEvent({name:"gridInfoUpdated"});}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,X){var U=R[X];if(U===undefined){delete Q[X];return true;}S=Q[X]=D(S);U=R[X]=D(U);if(J(S)&&J(U)){throw (G);}else{if(J(U)){delete R[X];if(J(R[X])){E(R,Q);}}else{if(J(S)){delete R[X];if(J(R[X])){E(R,Q);}}else{try{E(R[X],Q[X]);}catch(W){switch(W){case G:R[X]=Q[X]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(W,S){var U=W.include,Y=W.exclude;if(J(U)||J(Y)){return true;}if(!J(U)&&!J(Y)){try{E(Y,U);}catch(X){switch(X){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(W,U){if(W===true||J(W)){Q.push(R+U);}else{F(W,R+U+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(W,S){var U=[];F(W.include,"",U);F(W.exclude,"!",U);R[S]=U.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,W){var U=R[W];if(U!==undefined){if(S!==true&&U!==true){K(S,U);}else{if(S===true&&U!==true){R[W]=true;}else{if(S!==true&&U===true){Q[W]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(a,U){var Y=S[U];if(Y){var W=a.include,b=a.exclude,Z=Y.include,X=Y.exclude;if(!J(X)&&!J(b)){Q=false;return Q;}if(!J(Z)&&!J(W)){K(Z,W);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(Y,W,U,X){R[Y]=X?true:{};R=R[Y];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,U){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(U){if(L(Q,U)){S[R]=B.mergeHashes(Q,U);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(U){var Q={},W={},S={};H.forEach(U,function R(Y){var X=Y.partialRetrieval;if(X){H.forEach(X.nodes,function(Z){W[Z]=true;});S=B.mergeHashes(S,X.filters);delete Y.partialRetrieval;}H.forEach(Y.actions,R);});if(!J(W)){Q.nodes=B.keyarray(W);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(U){var S={};B.forEach(U,function(Y,X){var W=S[X]={serialized:Y,include:{},exclude:{}};H.forEach(Y.split(";"),function(a){var Z=a.indexOf("!")===0;a=Z?a.slice(1):a;C(a,Z?W.exclude:W.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var F=mstrmojo.hash;mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function G(H){if(!H||!H.length){return mstrmojo.emptyFn;}return function(){var I=H.length,J;for(J=0;J<I;J++){H[J].apply(this,arguments);}};},wrapMethods:function E(M,K){function L(O,N){N=N||{};mstrmojo.hash.forEach(O,function(P,Q){N[Q]=(N.hasOwnProperty(Q)&&typeof P==="function")?mstrmojo.func.composite([P,N[Q]]):P;});return N;}if(arguments.length<3){return L(M,K);}var I=arguments.length,J=[].slice.call(arguments,0,I-1).reverse(),H=arguments[I-1];mstrmojo.array.forEach(J,function(N){H=L(N,H);});return H;},wrapMethodHandlers:function C(M,K){function L(Q,N){N=N||{};var P=Q.handlerName,O=N.handlerName;if(!N.hasOwnProperty("removeHandler")){N.removeHandler=function(S,X){var R=N[X+"Array"],W=mstrmojo.array.find(R,"handlerName",this.curHandlerName),U;if(W>-1){for(U=W+1;U<R.length;U++){if(R[U].handlerName===S){R.splice(U,1);break;}}}};}mstrmojo.hash.forEach(Q,function(R,U){if(typeof R==="function"&&U!=="removeHandler"){var S=U+"Array";Q[S]=Q[S]||[{handlerName:P,fn:R}];if(!N[U]){N[U]=function(){var X=N[S],W;for(W=0;W<X.length;W++){this.curHandlerName=X[W].handlerName;X[W].fn.apply(this,arguments);}};}}});mstrmojo.hash.forEach(N,function(S,W){if(typeof S==="function"&&W!=="removeHandler"){var U=W+"Array",R=N[U]=(Q[U]||[]).concat(N[U]||[{handlerName:O,fn:S}]);N[W]=function(){var Y=R,X;for(X=0;X<Y.length;X++){this.curHandlerName=Y[X].handlerName;Y[X].fn.apply(this,arguments);}};}});return N;}if(arguments.length<3){return L(M,K);}var I=arguments.length,J=[].slice.call(arguments,0,I-1).reverse(),H=arguments[I-1];mstrmojo.array.forEach(J,function(N){H=L(N,H);});return H;},override:function B(J,H){var I=function(M,L){return function K(){var O=this._super,N;this._super=L||mstrmojo.emptyFn;try{N=M.apply(this,arguments||[]);}finally{this._super=O;}return N;};};H=H||{};mstrmojo.hash.forEach(J,function(K,L){H[L]=I(K,H[L]);});return H;},throttle:function(J,L,H){var I,N,Q,O=null,M=0,P=H||{};var K=function(){M=P.leading===false?0:mstrmojo.date.now();O=null;Q=J.apply(I,N);I=N=null;};return function(){var R=mstrmojo.date.now();if(!M&&P.leading===false){M=R;}var S=L-(R-M);I=this;N=arguments;if(S<=0){clearTimeout(O);O=null;M=R;Q=J.apply(I,N);I=N=null;}else{if(!O&&P.trailing!==false){O=setTimeout(K,S);}}return Q;};},debounce:function(K,M,J){var P,O,I,N,Q,H=mstrmojo.date.now;var L=function(){var R=H()-N;if(R<M){P=setTimeout(L,M-R);}else{P=null;if(!J){Q=K.apply(I,O);I=O=null;}}};return function(){I=this;O=arguments;N=H();var R=J&&!P;if(!P){P=setTimeout(L,M);}if(R){Q=K.apply(I,O);I=O=null;}return Q;};},addMethods:function D(I,H){H=H||{};mstrmojo.hash.forEach(I,function(J,K){if(!H.hasOwnProperty(K)&&typeof J==="function"){H[K]=J;}});return H;},safeCall:function A(L,J){var N=F.walk(L,J),M=L.split("."),I=J,K;if(N&&N instanceof Function){if(M.length>1){M.pop();K=M.join(".");I=F.walk(K,J);}return function H(){return N.apply(I,arguments);};}return mstrmojo.emptyFn;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.hash");var K=mstrmojo.array,B=mstrmojo.hash,E="u;",D="-1",C="hid";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function G(U,S,Y){var R,Q;for(Q in U){R=U[Q];if(R.v){var W=R.v.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f");var X=W.split(";");if(X&&X.length>1){X[1]=S;if(Y&&X.length>2){X.pop();}R.v=X.join(";").replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");}}}return U;},buildElemsCountStr:function M(X,S,R){X=(!X||!X.length)?[]:X;S=(!S||!S.length)?[]:S;function W(Y){return Y.filter(function(Z){return !Z[C];});}var U=W(X).length,Q=W(S).length;if(K.find(S,"v",E)>-1){Q-=1;}if(K.find(S,"v",D)>-1){Q-=1;}if(R){U=(U<Q)?Q-U:0;}if(K.find(X,"v",E)>-1||K.indexOf(X,E)>-1){U=Q;}return this.buildElemsCountStrByNum(U,Q);},buildElemsCountStrByNum:function M(R,Q){if(R===Q){if(Q===0){return"";}return Q.toString();}if(Q===0){return R+" "+mstrmojo.desc(514);}if(R>Q){return"("+Q+")";}return mstrmojo.desc(4891,"").replace("##",String(R)).replace("###",String(Q));},browseElements:function H(R,S,Q){mstrApp.serverRequest(mstrmojo.hash.copy(Q,S),R,{doNotHold:!(Q&&mstrApp.serverProxy),silent:true});},getIdPresentation:function L(U){if(U){var S=U.charAt(0),Q,R,W;if((S>="g"&&S<="w")||(S>="V"&&S<="Z")){R=false;for(W=1;W<U.length;++W){if(R){R=false;}else{switch(U.charAt(W)){case";":return"terseLong";case"\\":R=true;break;}}}return"terse";}if(S>="B"&&S<="Q"){if(U.length>2){Q=U.charAt(1);if(Q>="A"&&Q<="Q"){if(U.charAt(2)===":"){return"oldLong";}}}}if(U.length>=33&&U.charAt(32)===":"){return"old";}}return null;},terseLong2OldShort:function P(R){if(this.getIdPresentation(R)!=="terseLong"){return R;}var Q=R.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f"),S=Q.substring(1,Q.length).split(";");return(S[1]+":"+S[0]).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");},oldShort2terseLong:function N(R,W){if(this.getIdPresentation(R)!=="old"){return R;}var Q=R.replace(/\\\\/g,"\u001e").replace(/\\\:/g,"\u001f"),U=Q.split(":"),S=U.shift();return(W||"h")+(U.join(":")+";"+S).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\:");},isNullElem:function J(Q){if(!Q){return true;}var U=this.getIdPresentation(Q),R=false,S;switch(U){case"terse":case"terseLong":S=Q.substring(1,Q.length).split(";");R=S[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":R=Q.indexOf(this.OLD_NULL)>-1;break;}return R;},normalizedFormElementId:function I(a,g,Z){var c=g||this.getIdPresentation(a),h,Q;switch(c){case"terse":case"terseLong":a=a.replace(/\\;/g,"*ESCAPESEMICOLON*");h=a.split(";");return(h[0]+";"+h[1]+(Z?";"+Z:"")).replace(/\*ESCAPESEMICOLON\*/g,"\\;");case"old":var S="",X=2;a=a.replace(/\*:/g,"*COLON*").replace(/\\/g,"\\\\").replace(/;/g,"\\;");h=a.split(":");while(h[X]){S+=":"+h[X];X++;}return("h"+h[1]+S+";"+h[0]+(Z?";"+Z:"")).replace(/\*COLON\*/g,"\\:");case"oldLong":var R=0,f,Y,b=[],k=[],e,d,W,U=function(){if(R<0){return null;}var m=false,i=-1,n,j=null;for(e=R;e<a.length;e++){n=a.charAt(e);if(n==="*"&&!m){m=true;}else{if(n===":"&&!m){i=e;break;}else{m=false;}}}if(i===-1){j=a.substring(R);R=-1;}else{j=a.substring(R,i);R=i+1;}return j;};W=U();if(W!=="BB"&&W!=="BF"){return a;}Q=U();if(W==="BF"){Q=U();}f=parseInt(U(),10);Y=parseInt(U(),10);for(d=0;d<Y;d++){k[d]=parseInt(U(),10);U();}for(d=0;d<Y;d++){var l=U();if(k[d]<f&&k[d]>=0){b[k[d]]=l.replace(/\\/g,"\\\\").replace(/\*:/g,"\\:").replace(/;/g,"\\;");}}return"h"+b.join(":")+";"+Q+(Z?";"+Z:"");}return a;},isNonGroupNull:function(S){var Q=S.eid||(S._e&&S._e.id),R=Q&&Q.split(":")[0];return R&&R===this.NON_GROUP_NULL;},getAttributeId:function O(S){var R,Q;if(S){Q=S.split(";");R=Q[1];}return R;},getElementValue:function A(R){var S,Q;if(R){Q=R.split(";");if(Q.length>2){S=Q[0]+" "+Q[2];}else{S=Q[0];}}return S;},isAttributeIdsLinked:function F(R,Q,S){var W=false,U=B.keyarray(S);K.forEach(U,function(X){if(X===R){K.forEach(S[X],function(Y){if(Y===Q){W=true;return false;}});}if(W){return false;}});return W;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000",ELEM_ALL:{t:mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeDimension,v:"u;",n:"(All)"}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(H,F){var D=!!H&&(typeof H==="string")&&!H.match(/\./)&&!!this[H],E=mstrmojo.registry.ref(D?this[H]:H);if(E&&E.open){if(D){this[H]=E;}if(E.disposable!==false){this.addDisposable(E);}var K=E.slot&&this[E.slot];if(K){if(E.parent!==this){if(this.addChildren){this.addChildren([E]);}else{var J=false,G=E.domNode||E.placeholder;if(G&&typeof G==="string"){G=document.getElementById(G);}if(!G){J=true;G=document.createElement("span");E.placeholder=G;}if(J||(G.parentNode!==K)){K.appendChild(G);}}}}try{E.open(this,F);}catch(I){console.log("Error opening popup: "+I);}this._lastOpened=E;if(mstrApp.isNativeEmbedded&&mstrApp.popupContainer&&C.walk("domNode.parentElement.parentElement",E)===document.body){mstrApp.popupContainer.appendChild(E.domNode.parentElement);}}},closePopup:function B(){var D=this._lastOpened;if(D&&D.visible&&D.close){D.close();delete this._lastOpened;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var P=mstrmojo.dom,R=mstrmojo.hash,e,Y=mstrmojo.global.document,A="mousedown",F="mousemove",h="mouseup",M="dragstart",c="dragenter",W="dragover",E="dragend",i="drop",U=3,j=10,d=10,C=0,Q=0;function o(t){if(P.isPrimaryMouseBtn(t)){e.startDragCheck(self,t);}}function B(t){e.isHtml5Drag=true;t.dataTransfer.setData("text/html","mstrmojo.dnd");t.dataTransfer.dropEffect="move";t.dataTransfer.effectAllowed="move";if(window.isMstrCrossTabFromReportEditor){t.dataTransfer.dropEffect="copy";t.dataTransfer.effectAllowed="all";}e.createContext(self,t);e.stopDragCheck(self,t);e.timeoutId=setTimeout(function(){e.startDrag(self,t);},0);return false;}var O,g,p="mstrmojo-dnd-avatar",q;function H(u,t){if(t!==undefined&&t!==null){g.innerHTML=t;}q.left=u.x+"px";q.top=u.y+"px";}function s(u,t){if(!O){O=Y.createElement("div");q=O.style;O.className=p;O.innerHTML='<div class="'+p+'-inner"></div>';g=O.firstChild;Y.body.appendChild(O);}H(u,t);q.display="block";}function J(){if(q){q.display="none";}}function k(t){if(e.isHtml5Drag){return ;}var u=++e.ctxt.moveCount;if(u>=e.minMoves){e.stopDragCheck();if((t.buttons===1||t.buttons===undefined||P.isIE9)&&(t.which===1||t.button===0||P.isIE8)){e.isHtml5Drag=false;e.startDrag(self,t);}}}function a(t){if(P.isPrimaryMouseBtn(t)){e.stopDragCheck();delete e.ctxt;}}function f(){e.stopDragCheck();delete e.ctxt;e.isHtml5Drag=false;}function N(t){if(e.isHtml5Drag){return ;}e.onDragMove(self,t);}function G(t){if(!e.isHtml5Drag){return ;}P.preventDefault(window,t);return false;}function K(t){if(!e.isHtml5Drag){return ;}P.preventDefault(window,t);e.timeoutId=setTimeout(function(){e.onDragMove(self,t);},0);return false;}function Z(t){if(P.isPrimaryMouseBtn(t)){e.stopDrag(window,t);}}function n(t){if(!e.isHtml5Drag){return ;}P.preventDefault(window,t);e.timeoutId=setTimeout(function(){e.stopDrag(window,t);},0);return false;}function m(t){if(!e.isHtml5Drag){return ;}P.preventDefault(window,t);e.timeoutId=setTimeout(function(){e.stopDrag(window,t);e.isHtml5Drag=false;},0);return false;}function D(u){var t=P.findWidget(u);while(t){if(t.draggable){return t;}t=t.parent;}return null;}function I(t){var w=t.src,u=D(w.node);if(!u){return null;}if(u.getDragAction){t.action=u.getDragAction(t);}w.widget=u;w.data=u.getDragData&&u.getDragData(t);if(u.isDragValid){if(!u.isDragValid(t)){if(!mstrApp.isInVFInteractMode&&(!u.shouldDragBubble||u.shouldDragBubble(t)===true)){t.src.node=u.domNode.parentNode;return I(t);}return null;}}if(u.ondragstart){u.ondragstart(t);}return u;}function b(x,u){var t=P.findWidget(x),y=u.tgt&&u.tgt.widget;while(t){if(t.dropZone){if(t===y){return t;}if(t.allowDrop&&t.allowDrop(u)){return t;}}t=t.parent;}return null;}function l(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:U,supportsHtml5Drag:false,isHtml5Drag:false,timeoutId:null,setSupportsHtml5Drag:function S(t){e.supportsHtml5Drag=t;if(t){e.minMoves=U;P.attachEvent(Y,M,B);}else{e.minMoves=j;P.detachEvent(Y,M,B);}},enable:function(){if(!mstrmojo.dndEnabled){P.attachEvent(Y,A,o);if(e.supportsHtml5Drag){P.attachEvent(Y,M,B);}mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;P.detachEvent(Y,A,o);if(e.supportsHtml5Drag){P.detachEvent(Y,M,B);}},createContext:function L(t,u){delete this.ctxt;var w=P.captureEventInfo({hWin:t,e:u});this.ctxt={src:w,moveCount:0,last:R.copy(w.pos),getDirection:function(x){return !!this.dir[x];},getCtxtDragData:function(){var x=this.src;return(x&&x.data)||{};},getCtxtDropData:function(){var x=this.tgt;return(x&&x.data)||{};}};},startDragCheck:function(t,u){this.createContext(t,u);if(this.minMoves){P.attachEvent(Y,F,k);P.attachEvent(Y,h,a);if(e.supportsHtml5Drag){P.attachEvent(Y,E,f);}}else{this.startDrag(t,u);}},stopDragCheck:function(){P.detachEvent(Y,F,k);P.detachEvent(Y,h,a);if(e.supportsHtml5Drag){P.detachEvent(Y,E,f);}},startDrag:function X(t,x){if(e.supportsHtml5Drag&&x.type===M){e.isHtml5Drag=true;}var u=this.ctxt;u.id=mstrmojo.now();var w=I(u);if(!w){return ;}P.clearBrowserHighlights(t);if(e.supportsHtml5Drag){P.attachEvent(Y,c,G);P.attachEvent(Y,W,K);P.attachEvent(Y,E,n);P.attachEvent(Y,i,m);}P.attachEvent(Y,F,N);P.attachEvent(Y,h,Z);C=Date.now();Q=0;if(!e.isHtml5Drag){P.preventDefault(self,x);}var z=window.mstrApp;if(z&&z.setInteractive){this._changeAppStatus=z.setInteractive(false);}if(!w.ownAvatar){var y=u.src;s(y.pos,y.data&&y.data.html);}},stopDrag:function(t,AO){var AK=e.supportsHtml5Drag&&(AO.type===E||AO.type===i);var AI;if(AK){e.isHtml5Drag=true;}if(e.supportsHtml5Drag){P.detachEvent(Y,c,G);P.detachEvent(Y,W,K);P.detachEvent(Y,E,n);P.detachEvent(Y,i,m);}P.detachEvent(Y,F,N);P.detachEvent(Y,h,Z);if(e.timeoutId){clearTimeout(e.timeoutId);delete e.timeoutId;}var z=this.ctxt,AB=z.tgt||{},AC=P.captureEventInfo({hWin:t,e:AO,data:AB.data}),AA=b(AC.node,z);if(AO.type===E&&AB){AA=AB.widget;}AC.widget=AA;z.tgt=AC;if(AA){var AH=window.mstrApp&&window.mstrApp.isLibraryReport&&window.workstation;var u=false;var AF=false;if(AH){var AN=z&&z.last;var AL=Q*1000;var AD=d;var AE=AD;if(AL>100){AE=AD+Math.min(90,Math.floor(AL/100)*10);}var AP=(t&&(t.innerWidth||(t.document&&t.document.documentElement&&t.document.documentElement.clientWidth)))||0;var AG=(t&&(t.innerHeight||(t.document&&t.document.documentElement&&t.document.documentElement.clientHeight)))||0;var AM=(t&&t.pageXOffset)||(t&&t.document&&t.document.documentElement&&t.document.documentElement.scrollLeft)||0;var x=(t&&t.pageYOffset)||(t&&t.document&&t.document.documentElement&&t.document.documentElement.scrollTop)||0;var y=AN?AN.x-AM:0;var w=AN?AN.y-x:0;u=y<0||y>AP||w<0||w>AG;AF=AN&&AP>0&&y>AP-AE;}if((u||AF)){}else{l.call(AA);if(AA.ondrop){AA.ondrop(z);}else{l.call(AA);}}}else{AI=P.findPanel(AC.node);if(AI&&z.src&&P.isBelongsToTarget(z.src.node,AC.node)){AI.dropOnPanelEdge(z);}}var AJ=z.src.widget;if(AJ&&AJ.ondragend){AJ.ondragend(z);}if(AJ&&!AJ.ownAvatar){J();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}if(AK){e.isHtml5Drag=false;}},onDragMove:function(t,AP){if(e.supportsHtml5Drag&&AP.type===W){e.isHtml5Drag=true;}if(P.isSafari){P.clearBrowserHighlights();}var z=this.ctxt,AB=z.tgt||{},AJ=AB.widget,AL=P.captureEventInfo({hWin:t,e:AP,data:AB.data}),x=AL.widget=b(AL.node,z),AK=z.last,AI=AL.pos,y=z.targetPanelNode,u,AH;z.dir={x:AI.x>AK.x,y:AI.y>AK.y};var AG=window.mstrApp&&window.mstrApp.isLibraryReport&&window.workstation;if(AG){var AO=Date.now();if(C>0){var AM=AO-C;if(AM>0){var AF=AI.x-AK.x;var AE=AI.y-AK.y;var AA=Math.sqrt(AF*AF+AE*AE);var AD=AA/AM;if(AD>Q){Q=AD;}}}C=AO;}z.last=R.copy(AL.pos);z.tgt=AL;if(z.src&&P.isBelongsToTarget(z.src.node,AL.node)){u=P.findPanel(AL.node);}z.targetPanelNode=u;var AC=AJ!==null&&AJ!==undefined;var w=x!==null&&x!==undefined;if(y&&!u&&y.updateDropCueForPanelEdge){y.updateDropCueForPanelEdge(z,true);}if(AJ!==x&&(AC||w)){if(AJ){if(AJ.ondragleave){AJ.ondragleave(z);}else{l.call(AJ);}}if(x){z.tgt.data=(x.getDropData&&x.getDropData(z))||{};if(x.ondragenter){x.ondragenter(z);}else{if(x.set){x.set("allowingDrop",true);}}}}if(u&&u.updateDropCueForPanelEdge){u.updateDropCueForPanelEdge(z,false);}if(x){if(x.ondragover){x.ondragover(z);}}var AN=z.src.widget;if(AN&&AN.ondragmove){AN.ondragmove(z);}if(AN&&!AN.ownAvatar){H(AL.pos);}}});e=mstrmojo.dnd;e.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.enums.EnumParameterFetchInfo");var G=mstrmojo.array,F=mstrmojo.hash,A=mstrmojo.vi.enums.EnumParameterFetchInfo.ParameterFetchInfoBasic;mstrmojo.vi.controllers.ParameterController=mstrmojo.provide("mstrmojo.vi.controllers.ParameterController",{getParameterDefinition:function B(H,N,J,M,I){var K=mstrApp&&mstrApp.getMsgID&&mstrApp.getMsgID(),L={taskId:"getParameterDefinition",parameterId:H,msgId:K,fpi:I||A};if(J){L.datasetId=J;if(M){L.datasetType=M;}}mstrApp.serverRequest(L,N);},getSelectedElements:function E(M,L){var N=M.unset,H=M.include,K=M.es,J,I={};if(N||(H===false&&K.length===0)){return L;}if(!M.elementsInfromation){this.addElementsInformationToParameterDefinition(M,L);}J=M.elementsInfromation.esInAttributeFormat;I=M.elementsInfromation.elementsLookup;if(H===undefined){return J;}return G.filter(L,function(O){return I[O.v];});},addElementsInformationToParameterDefinition:function C(K){var J=K.es,I,H={};I=G.map(J,function(M){var O=M.v.split(";"),N=O[1],L=O[0].substring(1);return{v:N+":"+L,n:M.n};});G.forEach(I,function(L){H[L.v]=true;});K.elementsInfromation={elementsLookup:H,esInAttributeFormat:I};},convertElementsToAttributeFormat:function D(H){return G.map(H,function(J){var L=J.v.split(";"),K=L[1],I=L[0].substring(1);return{v:K+":"+I,n:J.n};});}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],U=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){U.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(U);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var F=mstrmojo.dom;function H(K){return(K&&K.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function G(M,L){var K=this.scrollboxNode;K.scrollLeft=M.x;K.scrollTop=M.y;if(L){this.notifyScrollListeners(M);}},connectScrollbox:function E(L){if(!H(L)){return ;}var M=this.scrollListeners,K=L.id;if(!M){M={};this.scrollListeners=M;}if(!M[K]){M[K]=L;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(L){if(!H(L)){return ;}var M=this.scrollListeners,K=L.id;if(M&&M.hasOwnProperty(K)){delete this.scrollListeners[K];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(N){var Q=N||this.getScrollPos(),P=Q.y,O=Q.x,K=P-this.scrollboxTop,M=O-this.scrollboxLeft;this.scrollboxTop=P;this.scrollboxLeft=O;this.scrollboxRight=O+this.scrollboxWidth;this.scrollboxBottom=P+this.scrollboxHeight;var L=this.scrollListeners,R;for(R in L){L[R].onscroll(this,{deltaX:M,deltaY:K});}},getScrollPos:function I(){var K=this.scrollboxNode;return{x:K.scrollLeft,y:K.scrollTop};},_attachScrollDom:function A(){var P=this.scrollboxNode;if(P){var O=this.usesTouches;if(!O){if(!this.scrollCallback){var N=this.id;this.scrollCallback=function(){mstrmojo.all[N].notifyScrollListeners();};}var K=false,L=this.scrollCallback;if(F.isSafari){this.wheelCallback=function(){L();K=true;};this.scrollCallback=function(){if(K){K=false;return ;}L();};F.attachBufferedEvent(P,"wheel",this.wheelCallback,this.scrollInterval);}F.attachBufferedEvent(P,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=O?0:P.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=O?0:P.scrollLeft;}var M=function(S){var R=S.toLowerCase();var Q=P.style[R];return(!isNaN(Q)&&Q.charAt(Q.length-1)!=="%")?parseInt(Q,10):P["client"+S];};if(this.scrollboxHeight===null){this.scrollboxHeight=M("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=M("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=P;}},_detachScrollDom:function J(){var K=this._attachedScrollbox;if(K&&this.scrollCallback){if(F.isSafari){F.detachBufferedEvent(K,"wheel",this.wheelCallback,this.scrollInterval);}F.detachBufferedEvent(K,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(!J||!J.offsetHeight){J=H.scrollNode||H.domNode||G;}if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var F=mstrmojo.array,D=mstrmojo.dom;mstrmojo._IsDocXtab={_mixinName:"mstrmojo._IsDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function H(){var J=this.getFormats(),M="",L=function L(N){if(J[N]){var O=this[N]||J[N];this[N]=O;if(this.isFullScreenWidget){J[N]=O;}this[N+"Limit"]=parseInt(O,10);}};L.call(this,"height");L.call(this,"width");var K=function(Q,P){var N=J[Q];if(N&&N.charAt(N.length-1)!=="%"){var O=parseInt(N,10);if(!isNaN(O)){if(P){O-=P;}M+=Q+":"+O+"px;";}}return null;};K("height",0);K("width",0);this.scrollboxNodeCssText=M;return this._super();},postBuildRendering:function A(){var K=this._super();var J=this.gridData;if((J.afw||J.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return K;},resize:function B(){this.clearCache();var L=this.getFormats(),K=parseInt(L.height,10),J=parseInt(L.width,10);if(J>0&&K>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}F.forEach([this.scrollboxNode,this.viewport],function(N){var M=N.style;M.height=K+"px";M.width=J+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=K&&(K!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(K,10);this.heightLimit=this.scrollboxHeight;this.scrollboxBottom=this.scrollboxTop+K;}if(J>0){this.widthLimit=J;}if(this.lockHeadersCase){this.resizeScrollBox(D.isIE);}}this.delegateGridAction(function(M){if(M&&M.onscroll){M.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg!==undefined)){this.onGridWidthChanged();if(this.refreshResizeHandlers){this.refreshResizeHandlers();}}if(this.lockHeadersCase){this._refreshClonedNodes();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function E(){this.clearCache();this.unrender();this.render();},unrender:function G(J){this.clearCache();if(this._super){this._super(J);}},attachLoadEventHandlerToImages:function I(J,K){var L=function(){this.style.height=parseInt((this.style.height||0),10)>0?this.style.height:K*this.offsetHeight+"px";};F.forEach(J,function(M){mstrmojo.dom.attachEvent(M,"load",L);});},defaultAction:function C(O,J){if(this._super(O,J)){var N=this.model.sti,M=N&&N.titleId,L=N&&N.deselectCurrent;this._currentSelectedTD=L?undefined:O;if(M){var K=this.zone;this.delegateGridAction(function(Q){var P=Q.domNode,R=P&&P.firstChild;if(!K&&R&&(O.offsetParent===R||O.offsetParent===P)){K=Q;}},"defaultClickAction");if(K){K.clearHilites(M);if(!L){K.setHilites(M,O);}K.hiliteKey=M;this.model.sti=null;}}return true;}return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(Y){mstrmojo.hash.copy(Y,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var Y=this;this.delayTimer=window.setTimeout(function(){Y._start();Y=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function W(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var Y=this.ease;if(typeof Y==="string"){this.ease=mstrmojo.registry.ref(Y);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var Z=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function a(){if(Z){Z.exec();Z.counter++;if(Z.counter>=Z.steps){Z._end();Z=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function U(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var Z=this.target;if(Z&&this.slot&&Z.scriptClass){var a=Z[this.slot];if(a){this.widget=Z;this.target=a;}}}}}if(!this.target){var Y=this;while(Y=Y.parent){if(!Y||Y.domNode){break;}}if(Y){this.widget=Y;this.target=Y[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(b,c){var Z=b.children,Y=(Z&&Z.length)||0,a;for(a=0;a<Y;a++){Z[a][c]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(b){this._super(b);var a=this.children;mstrmojo.registry.refArray(a);var Y=(a&&a.length)||0,Z;for(Z=0;Z<Y;Z++){a[Z].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function W(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var a=this.props,b;for(b in a){var Z=a[b],Y=Z.ease;if(typeof Y==="string"){Z.ease=mstrmojo.registry.ref(Y,{dontInst:true});}}this._super();},exec:function P(){var b=this.props,c;for(c in b){var Z=b[c],Y=(Z.ease||mstrmojo.ease.sin)(this.counter,Z.start,Z.stop-Z.start,this.steps-1);if(Z.fn){Y=Z.fn(Y);}if(Z.suffix){Y+=Z.suffix;}var a=Z.isStyle===false?this.target:this.target.style;a[c]=Y;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var c=this.srcProp,a;if(c){var Y=this.widget||this.parent;a=Y&&Y[c];if((a!=null)&&(typeof (a)!=="string")){a=String(a);}}this.stop=a;this._dynStop=true;}if(this.stop==null){this.stop="";}var b=this.target,d=null,Z=1;if(b){b.innerHTML="";d=document.createTextNode("");b.appendChild(d);Z=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=d;this.charGroupSize=Z;},exec:function(){var Z=this.targetTextNode;if(!Z){return ;}var Y;if(this.counter>=this.steps-1){Y=this.stop;}else{if(this.counter===0){Y="";}else{Y=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}Z.nodeValue=Y;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function W(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(Y){if(Y==null){Y=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(Y*100,10)+")";}else{this.target.style.opacity=Y;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function W(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function X(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(a,Z,b){var Y=Math.pow(10,b||2);if(Z){return parseInt(Y*a/Z,10)/Y;}return parseInt(Y*a,10)/Y;}mstrmojo.ease={linear:function L(Z,Y,e,a){if(Z===a){return Y+e;}if(Z===0){return Y;}return Y+e*I(Z,a);},sin:function A(Z,Y,e,a){return Y+e*Math.sin((Math.PI/2)*Z/a);},cos:function B(Z,Y,e,a){return Y+e*Math.cos((Math.PI/2)*(1-Z/a));},sincos:function K(Z,Y,e,a){if(Z>a/2){return Y+e*Math.cos((Math.PI/2)*(1-Z/a));}return Y+e*Math.sin((Math.PI/2)*Z/a);},cossin:function Q(Z,Y,e,a){if(Z>a/2){return Y+e*Math.sin((Math.PI/2)*Z/a);}return Y+e*Math.cos((Math.PI/2)*(1-Z/a));},bounce:function G(Z,Y,e,a){if((Z/=a)<(1/2.75)){return e*(7.5625*Z*Z)+Y;}if(Z<(2/2.75)){return e*(7.5625*(Z-=(1.5/2.75))*Z+0.75)+Y;}if(Z<(2.5/2.75)){return e*(7.5625*(Z-=(2.25/2.75))*Z+0.9375)+Y;}return e*(7.5625*(Z-=(2.625/2.75))*Z+0.984375)+Y;},shake:function J(Z,Y,e,a){if(Z<a/2){return Y+e*I(Math.sin(2*Math.PI*Z/8),null,2)*2*Z/a;}return Y+e*I(Math.sin(2*Math.PI*Z/8),null,2)*2*(1-Z/a);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var D=mstrmojo.dom;var G=mstrmojo.array;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function F(I){if(I){return{w:I.innerWidth,h:I.innerHeight};}var H=D.windowDim(),J=(D.isFF||D.isWK)?0:2;return{w:Math.max(H.w,0)+"px",h:Math.max(H.h-J,0)+"px"};},preBuildRendering:function B(){var J=this._super(),I=this.getBrowserDimensions();if(!this.browserResized||this.browserResized(I)!==true){this.height=I.h;this.width=I.w;}if(!this._listenerProc){var L=this.id,K=null,H=this._listenerProc=function(N){if(mstrApp&&mstrApp.isExporting){var M=N||window.event;mstrmojo.all[L].monitorWindow(M);}else{window.clearTimeout(K);K=window.setTimeout(function(){var O=N||window.event;mstrmojo.all[L].monitorWindow(O);},150);}};D.attachEvent(window,"resize",H);}return J;},destroy:function C(H){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(H);},getResizeDimensions:function A(H){var K=H.currentTarget,J=this.getBrowserDimensions(),I={w:(K?K.innerWidth+"px":J.w),h:(K?K.innerHeight+"px":J.h)};return I;},monitorWindow:function E(I){var J=this.getResizeDimensions(I);var H=["iframe","video"],N=[],M=false,L=this,K=document.fullscreenElement;if(K){G.forEach(H,function(O){N=N.concat([].slice.call(L.domNode.getElementsByTagName(O)));});G.forEach(N,function(O){if(O===K){M=true;return false;}});}if((J.h===this.height&&J.w===this.width)||parseInt(J.h,10)<=20||parseInt(J.w,10)<=20||M){return ;}if(!this.browserResized||this.browserResized(J,true)!==true){if(J.h!==this.height){this.set("height",J.h);}if(J.w!==this.width){this.set("width",J.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var G=mstrmojo.dom;var Y="touchstart",K="mousedown",Q=G.isIOSTouch,D=G.isTouchOptimizationEnabled(),U=(Q||D)?Y:K;function Z(b){var a=b[b.hotSlot||"domNode"];if(a){if(!b._closeCallback){var d=b.id,c=function(e){return function(g){var f=mstrmojo.all[d];if(f&&!f.ignoreHover){f["auto"+e](g,self);}};};b._uncloseCallback=c("Unclose");b._closeCallback=c("Close");}G.attachEvent(a,"mouseover",b._uncloseCallback);G.attachEvent(a,"mouseout",b._closeCallback);}}function C(b){if(b._closeCallback){var a=b[b.hotSlot||"domNode"];if(a){G.detachEvent(a,"mouseover",b._uncloseCallback);G.detachEvent(a,"mouseout",b._closeCallback);}}}function H(d,b){var a=d,c;while(a){if(a.open||a.openPopup){c=a.ignoreHoverCount||0;c=b?(c+1):(c>0?c-1:c);a.ignoreHoverCount=c;if(a.set){a.set("ignoreHover",(c>0));}else{a.ignoreHover=(c>0);}}a=a.opener||a.parent;if(a&&a.shouldPropagateLockHover&&!a.shouldPropagateLockHover()){break;}}}function F(){var c=this._lockHoverCallback,b=this.curtainNode,e=this._onClickChange;if(c){G.detachEvent(document.body,U,c,true);delete this._lockHoverCallback;}if(!b||!e){return ;}var a=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||Q,d=a?Y:K;G.detachEvent(b,d,e);delete this._onClickChange;}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function W(){this._super();if(this.autoCloses){Z(this);}this.oncloseOnClickChange();},onautoClosesChange:function O(){var a=(this.autoCloses)?Z:C;a(this);},oncloseOnClickChange:function J(){if(!this.curtainNode){return ;}var c=this,a=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||Q,b=a?Y:K;this._onClickChange=function(){c.close();if(a){mstrmojo.touchManager.notify([]);}};G.attachEvent(c.curtainNode,b,this._onClickChange);},autoUnclose:function I(){var a=this._autoCloseTimer;if(a){self.clearTimeout(a);delete this._autoCloseTimer;}},autoClose:function M(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var a=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[a].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function X(a){F.call(this);this._super(a);},moveLockHoverToBack:function(){if(this._lockHoverCallback){G.detachEvent(document.body,U,this._lockHoverCallback,true);G.attachEvent(document.body,U,this._lockHoverCallback,true);}},lockHover:function S(){H(this,true);if(!this._lockHoverCallback){var b=this.id,a=this._lockHoverCallback=function(c){mstrmojo.all[b]._unlockHoverCheck(c,self);};if((G.isIE7||G.isIE8)&&window.event&&(window.event.type===U)&&this.opener){this.opener._ignoreMousedown=true;}G.attachEvent(document.body,U,a,true);}},unlockHover:function P(){H(this,false);F.call(this);},hoverLock:function(a){H(this,a);},suppressClose:function B(a){return G.contains(this.domNode,a,true,document.body);},_unlockHoverCheck:function E(d,a){var b=this.opener;if(b&&b._ignoreMousedown){delete b._ignoreMousedown;return ;}var c=G.eventTarget(a,d);if(!this.suppressClose(c)){if(this.isWithinParentWidget(c)){return ;}if(b&&b.onPopupAutoClosed){b.onPopupAutoClosed(d,a);}this.close(c);}},isWithinParentWidget:function R(b){var a=G.findWidget(b);while(a){if(a===this){return true;}a=a.parent||a.opener;}return false;},open:function L(b,a){if(this.autoCloses){this.autoUnclose();}this._super(b,a);if(this.locksHover){this.lockHover();}},close:function N(a){if(this.locksHover){this.unlockHover();}this._super(a);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var J=mstrmojo.array,R=mstrmojo.desc(2412,"Default"),Q=mstrmojo.desc(3433,"Font"),L=mstrmojo.desc(3434,"Number"),D=mstrmojo.desc(3435,"Alignment"),O=mstrmojo.desc(2886,"Borders"),F=mstrmojo.desc(3905,"Background"),S="-1,234.12",C="1,234.12",N="(1,234.12)",I="-$1,234.12",B="$1,234.12",K="($1,234.12)";var P=[{n:R,v:"pru"}];J.forEach(["Anton","Archivo Black","Comic Neue","Courgette","Courier Prime","Dancing Script","DM Serif Text","EB Garamond","Fredoka","Inter","Monoton","Mulish","Noto Sans","Noto Sans JP","Noto Sans Math","Noto Sans SC","Noto Sans Symbols","Noto Sans TC","Noto Serif KR","Oleo Script","Open Sans","Open Sans SemiBold","Oswald","Roboto","Roboto Condensed","Roboto Mono","Rubik Dirt","Rubik Mono One","Sen","Tinos"],function(U){P.push({n:U,v:U,symbolic:true});});var H=[];J.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Wingdings 2","Wingdings 3"],function(U){H.push({n:U,v:U,symbolic:true});});function G(W,U,X){return(U&&U>=W)?G(W,U-X,X).concat(U):[];}var A=G(2,12,1);A=A.concat(G(14,24,2));A=A.concat(G(36,48,12));A=A.concat(G(72,72,1));var E=[{n:R,v:"pru"}];J.forEach(A,function(U){E.push({n:String(U),v:String(U)});});mstrmojo._FormatDefinition={Formats:[{n:Q},{n:L},{n:D},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:L},{n:D},{n:Q},{n:O},{n:F}],MetricHeaderFormats:[{n:L},{n:D},{n:Q},{n:O},{n:F},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0",TextBreak:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0",FillOpacity:"100"}},Families:P,MonotypeFamilies:H,FontFamilyConfig:{},Sizes:E,SizesInVI:E.slice(7,19),Styles:[{n:R,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:R,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],AdditionalCategory:[{n:mstrmojo.desc(2379,"Special"),v:8}],MaxNegativeDidigts:30,FixedNegative:[{n:S,v:1,f:"#,##0.00"},{n:S,r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:C,r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:N,v:3,f:"#,##0.00;(#,##0.00)"},{n:N,r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:I,v:1,f:'"$"#,##0.00'},{n:I,r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:B,r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:K,v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:K,r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/16"),v:"m/d"},{n:mstrmojo.desc(2232,"04/16"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/16/20"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/16/20"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/16/2020"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(19695,"16/04/2020"),v:"dd/mm/yyyy"},{n:mstrmojo.desc(2236,"16-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"16-Apr-20"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-20"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '20"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 2020"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/16/20 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/16/20 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 16, 2020"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/16/20 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/16/20 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/16/20 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/16/20 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],Special:[{n:mstrmojo.desc(2737,"Zip Code"),v:"00000",t:"12345"},{n:mstrmojo.desc(2738,"Extended Zip Code"),v:"00000-0000",t:"12345-6789"},{n:mstrmojo.desc(26480,"Phone Number (123) 456-7890"),v:"(000) 000-0000",t:"(123) 456-7890"},{n:mstrmojo.desc(26481,"Phone Number 123-456-7890"),v:"000-000-0000",t:"123-456-7890"},{n:mstrmojo.desc(8986,"Social Security Number"),v:"000-00-0000",t:"123-45-6789"},],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:R,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:R,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(15361,"Double"),v:6}],extractModel:function(X,Z,W){var b=W||this.DefaultFormat,a;for(a in X){var U=X[a];if(!U.attachEventListener){if(!mstrmojo.hash.isEmpty(U)){Z[a]=U;}}else{var Y;for(Y in U){if(b[a]&&b[a][Y]){if(!Z[a]){Z[a]={};}Z[a][Y]=U[Y];}}}}},getAvailableFonts:function M(){var U={success:function(X){if(X.name==="fontPicker"){mstrmojo._FormatDefinition.haveFontsLoaded=true;var W=[{n:R,v:"pru"}];J.forEach(X.shortcuts,function(Z){var a=Z.attributes,b=J.filterOne(a,function(c){return c.value;}),Y=J.filterOne(a,function(c){return c.symbolic;});W.push({n:b&&b.value,v:b&&b.value,symbolic:(Y&&Y.symbolic||"false").toUpperCase()==="TRUE"});});mstrmojo._FormatDefinition.Families=W;mstrmojo._FormatDefinition.FontFamilyConfig={fontXML:X.shortcuts};if(mstrApp&&mstrApp.raiseEvent){mstrApp.raiseEvent({name:"fontsLoaded"});}}}};if(!this.haveFontsLoaded){mstrmojo.xhr.request("POST",mstrConfig.taskURL,U,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);}else{if(mstrApp&&mstrApp.raiseEvent){mstrApp.raiseEvent({name:"fontsLoaded"});}}},getStandardFormat:function(W,U){var Y=mstrmojo.hash.clone(U||this.DefaultFormat),X;W=W||{};for(X in Y){W[X]=W[X]||{};}for(X in W){if(!W[X].attachEventListener){W[X]=mstrmojo.hash.make(W[X],mstrmojo.Obj);}}return W;},saveFormatModel:function(Z,f,W,g){var e=g||this.DefaultFormat,b,U;for(b=0;b<W.length;b++){var a=W[b],Y=f[a]||null,d=Z[a];if(d===undefined){delete f[a];continue;}for(U in e){var c=e[U],X;if((!Y&&!d)||(Y&&!Y[U]&&!d[U])){continue;}for(X in c){if(d[U]===undefined||d[U]===""||d[U][X]==="pru"||d[U][X]===undefined){if(Y&&Y[U]&&(Y[U][X]!==undefined&&Y[U][X]!==null&&Y[U][X]!=="pru")){Y[U][X]="pru";}}else{Y=Y||{};Y[U]=Y[U]||{};Y[U][X]=d[U][X];}}}if(Y){f[a]=Y;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E="*",A=".",C="-",J="_",H="<";var M=new RegExp("[\\"+E+"\\"+A+"\\"+C+"\\"+J+"\\"+H+"]","g"),G=E+"$&";mstrmojo.Serializer={scriptClass:"mstrmojo.Serializer",serializeValueGroup:function F(B){mstrmojo.array.forEach(B,function(D,K){B[K]=mstrmojo.Serializer.serializeValues(D);});return C+this.serializeValues(B)+J;},serializeValues:function I(D){var B=[];mstrmojo.array.forEach(D,function(K){if(typeof K==="Boolean"){K=K?"1":"0";}B.push(String(K).replace(M,G));});return B.join(A);}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumAuthenticationModes","mstrmojo.UUID","mstrmojo.array","mstrmojo.mstr.EnumDSSXMLObjectSubTypes");var I=mstrmojo.EnumAuthenticationModes,G=mstrmojo.array;function D(M,K,N){var L=document.createElement("form");L.action=K;L.method="POST";L.target=M;L.id="form"+M;if(N){var J=document.createElement("input");J.type="hidden";J.name="idToken";J.value=N;L.appendChild(J);}document.body.appendChild(L);L.submit();setTimeout(function(){document.getElementById(L.id).parentNode.removeChild(L);},0);}function B(M){var L,N,K,J={success:function(O){N=O.identityToken;},complete:function(){D(K,M,N);if(L){L.opener=null;}}};if(mstrConfig.seamlessLoginEnabled){if(mstrConfig.authMode===I.INTEGRATED.toString()){M+="?loginMode="+I.INTEGRATED;window.open(M,"_blank","noopener,noreferrer");}else{K=mstrmojo.UUID.create();L=window.open("",K);mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,{taskId:"createIdentityToken"});}}else{window.open(M,"_blank","noopener,noreferrer");}}function C(){return mstrConfig&&mstrConfig.features&&mstrConfig.features["show-dossier-library-link"]&&!!mstrConfig.libraryWebBaseURL;}function E(K){var J=mstrConfig.libraryWebBaseURL+"app";if(K){J+="/"+mstrConfig.projectId+"/"+K;}return J;}function H(K,J){var N=false,M=K.browsableTypes||K.objectTypes,L=J;G.forEach(M,function(O){if(O===mstrmojo.mstr.EnumDSSXMLObjectSubTypes.ChatBot){N=true;return false;}});if(!N){L=G.filter(J,function(O){return(O.st!==mstrmojo.mstr.EnumDSSXMLObjectSubTypes.ChatBot);});}return L;}function F(J){var K=65536;return G.filter(J,function(M){var L=M.vwm&&(M.vwm&K);return !L;});}function A(L,J){var K=448;return G.filter(J,function(N){var M=N.et&&(N.et===K);return !M;});}mstrmojo.util.LibraryHelper=mstrmojo.provide("mstrmojo.util.LibraryHelper",{createTokenAndOpenLink:B,isLibraryConfigured:C,constructLibraryUrl:E,removeAIBotObjectsFromList:H,removeDDAFromList:F,removeMosaicModelFromList:A});})();(function(){mstrmojo.requiresCls("mstrmojo.array");var E=mstrmojo.array;mstrmojo._BindTargetChildren=mstrmojo.provide("mstrmojo._BindTargetChildren",{target:null,targetProps:null,addTabButtons:null,removeTabButtons:null,clearButtons:null,ontargetChange:function D(L){var M=L&&L.valueWas;if(M){var J=this._targetSubs;if(J){M.detachEventListener(J.add);M.detachEventListener(J.rem);M.detachEventListener(J.sel);}this.clearButtons();}var N=this.target;if(N){var I=this.targetProps,H=(I&&I.children)||"children",F=N[H];this.addTabButtons(F,0);this._onTargetSelChg();if(N.attachEventListener){var G=this.id,K="attachEventListener";this._targetSubs={add:N[K]("addChild",G,"_onTargetAddChild"),rem:N[K]("removeChild",G,"_onTargetRemoveChild"),sel:N[K]("selectedChange",G,"_onTargetSelChg")};}}this._ontargetChange();},_ontargetChange:mstrmojo.emptyFn,_onTargetAddChild:function A(F){var G=F&&F.value;if(G&&G.length){this.addTabButtons(G,F.index);}this._postTargetAddChild();},_postTargetAddChild:mstrmojo.emptyFn,_onTargetRemoveChild:function B(G){var F=G&&G.value,H;for(H=((F&&F.length)||0)-1;H>-1;H--){this.removeTabButton(F[H]);}this._postTargetRemoveChild();},_postTargetRemoveChild:mstrmojo.emptyFn,_onTargetSelChg:function C(L){var G=this.targetProps||{},F=this[G.names||"children"],J=function(O,P){if(O.set){O.set("selected",P);}else{O.selected=P;}};if(L){var H=L.valueWas,K=H?E.find(F,"target",H):-1;if(K>-1){J(F[K],false);}}var M=this.target,N=M&&M.selected,I=N?E.find(F,"target",N):-1;if(I>-1){J(F[I],true);}this._postTargetSelChg();},_postTargetSelChg:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo,D=A.array;mstrmojo.vi.util.TemplateUtils=mstrmojo.provide("mstrmojo.vi.util.TemplateUtils",{getTemplateUnits:function B(G){if(D.isArray(G)){var F=[];D.forEach(G,function(H){F=F.concat(B(H));});return F;}var E=[].concat(G.mx||[]);(G.rows||[]).concat(G.cols||[]).forEach(function(H){if(H.did!=="-1"){E.push({did:H.did,t:H.t,n:H.n});}});return E;},findUnitsById:function C(H,F){var E=mstrmojo.vi.util.TemplateUtils.getTemplateUnits(H),G=[];D.ensureArray(F).forEach(function(K){var J=D.find(E,"did",K),I=J>-1?E[J]:null;if(I){G.push(I);}});return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var P=mstrmojo.array,L="#000000",G=Math.round;function b(l,k,j){return !isNaN(l)&&!isNaN(k)&&!isNaN(j);}function U(j){return("0"+Math.max(0,Math.min(255,parseInt(j,10))).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{hexToBBGGRRDecimal:function h(k){var l=k.replace("#",""),j=l.slice(4,6)+l.slice(2,4)+l.slice(0,2);return parseInt(j,16);},BBGGRRdecimalToHex:function a(l){var k=("000000"+l.toString(16)).slice(-6),j=k.slice(4,6)+k.slice(2,4)+k.slice(0,2);return"#"+j;},rgbStr2rgb:function f(j){if(!j){return[];}if(j==="transparent"){return["0","0","0"];}return j.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);},rgbStr2hex:function J(j){if(j&&j.indexOf("rgb")>=0){var k=this.rgbStr2rgb(j);return"#"+this.rgb2hex(k[0],k[1],k[2]);}return j;},rgb2rgba:function g(j,k){if(!j){return j;}var l=j.charAt(0)==="#"?this.hex2rgb(j):this.rgbStr2rgb(j);if(!P.isArray(l)||l.length!==3){return j;}if(isNaN(k)){k=100;}l.push(k/100);return"rgba("+l.join(",")+")";},rgb2hex:function B(l,k,j){if(!b(l,k,j)){return"";}return U(l)+U(k)+U(j);},rgb2hsv:function e(j,o,q){if(!b(j,o,q)){return[];}var m=Math.min(j,o,q),t=Math.max(j,o,q),n=0,x,w;w=t/255;x=(t!==0)?(parseFloat(t)-parseFloat(m))/parseFloat(t):0;if(x===0){n=0;}else{var p=t-m,k=(t-j)/p,l=(t-o)/p,u=(t-q)/p;if(j===t){n=u-l;}else{if(o===t){n=2+k-u;}else{n=4+l-k;}}n/=6;if(n<0){n+=1;}}return[G(n*360),G(x*100),G(w*100)];},rgb2hsl:function E(j,o,p){if(!b(j,o,p)){return[];}j/=255;o/=255;p/=255;var q=Math.max(j,o,p),m=Math.min(j,o,p),k=(q+m)/2,n,u;if(q===m){n=u=0;}else{var t=q-m;u=k>0.5?t/(2-q-m):t/(q+m);switch(q){case j:n=(o-p)/t+(o<p?6:0);break;case o:n=(p-j)/t+2;break;case p:n=(j-o)/t+4;break;}n/=6;}return[n,u,k];},hsl2rgb:function D(t,x,o){if(!b(t,x,o)){return[];}var n=function n(y,s,l){if(l<0){l+=1;}if(l>1){l-=1;}if(l<1/6){return y+(s-y)*6*l;}if(l<1/2){return s;}if(l<2/3){return y+(s-y)*(2/3-l)*6;}return y;},j,u,w;if(x===0){j=u=w=o;}else{var k=o<0.5?o*(1+x):o+x-o*x,m=2*o-k;j=n(m,k,t+1/3);u=n(m,k,t);w=n(m,k,t-1/3);}return[G(j*255),G(u*255),G(w*255)];},hsl2hex:function M(m,k,j){if(!b(m,k,j)){return"";}return"#"+P.map(this.hsl2rgb(m,k,j),function(l){return U(l);}).join("");},hex2rgb:function X(m){if(!m){return[];}var j=this.fixFullHexValue("#"+m.replace("#","")),k=[],l;j=j.replace("#","");for(l=0;l<3;l++){k.push(parseInt(j.substr(l*2,2),16));}return k;},hex2bgr:function O(j){return this.hex2rgb(j).reverse();},hex2hsv:function c(k){var j=this.hex2rgb(k);return this.rgb2hsv(j[0],j[1],j[2]);},hex2hsl:function i(j){return this.rgb2hsl.apply(this,this.hex2rgb(j));},hsv2rgb:function K(w,AC,AA){if(!b(w,AC,AA)){return[];}w/=360;AC/=100;AA/=100;var j,x,z;if(AC===0){j=AA*255;x=AA*255;z=AA*255;}else{var m=w*6;if(m===6){m=0;}var u=Math.floor(m);var l=AA*(1-AC);var k=AA*(1-AC*(m-u));var AB=AA*(1-AC*(1-(m-u)));var y,n,o;switch(u){case 0:y=AA;n=AB;o=l;break;case 1:y=k;n=AA;o=l;break;case 2:y=l;n=AA;o=AB;break;case 3:y=l;n=k;o=AA;break;case 4:y=AB;n=l;o=AA;break;default:y=AA;n=l;o=k;break;}j=y*255;x=n*255;z=o*255;}return[G(j),G(x),G(z)];},hsv2hex:function Q(m,l,j){var k=this.hsv2rgb(m,l,j);return this.rgb2hex(k[0],k[1],k[2]);},isDarkColor:function H(k){var j=this.hex2rgb(k);return((j[0]*299)+(j[1]*587)+(j[2]*114))/1000<125;},getContrastingColor:function S(l,k,j){return this.isDarkColor(l)?(k||"#ffffff"):(j||"#000000");},getLuminance:function I(k){var j=this.hex2rgb(k);return 0.2126*j[0]+0.7152*j[1]+0.0722*j[2];},getHighlightColor:function Z(s,p){if(!s||!s.length){return"";}var j,q,t,u,w=this.hex2rgb(!p?"#FFCE7F":"#EFE6D8"),o=parseInt(s[0],10),l=parseInt(s[1],10),y=parseInt(s[2],10),n=parseInt(w[0],10),k=parseInt(w[1],10),x=parseInt(w[2],10);j=(o*n)/255;q=(l*k)/255;t=(y*x)/255;u=o*0.3+l*0.59+y*0.11;if(u<85){j+=(63*(85-u)/85);j=j>255?255:j;q+=(63*(85-u)/85);q=q>255?255:q;t+=(63*(85-u)/85);t=t>255?255:t;}var m=this.rgb2hex(G(j),G(q),G(t));if(m){m="#"+m;}return m;},get3DBorderColor:function Y(l,o){if(!l||!b(l[0],l[1],l[2])){return"";}var k=parseInt(l[0],10)*0.3+parseInt(l[1],10)*0.59+parseInt(l[2],10)*0.11;var n=parseInt(l[0],10);var m=parseInt(l[1],10);var j=parseInt(l[2],10);switch(o){case"light":if(k>150){n*=0.9;m*=0.9;j*=0.9;}else{n=n*0.6+102;m=m*0.6+102;j=j*0.6+102;}break;case"dark":if(k>10){n*=0.4;m*=0.4;j*=0.4;}else{n=n*0.8+30;m=m*0.8+30;j=j*0.8+30;}break;}return"#"+this.rgb2hex(G(n),G(m),G(j));},encodeColor:function N(j,k){if(k!==undefined&&(j===null||j===undefined||j.length===0||j==="undefined")){j=k;}if(j==="transparent"){return -1;}if(parseInt(j,10)===-2){return -2;}if(!j){return 0;}if(j.substring(0,1)==="#"){j=j.substring(1);}if(isNaN(parseInt(j,16))){return 0;}return parseInt(j.substring(4)+j.substring(2,4)+j.substring(0,2),16);},decodeColor:function A(j){j=parseInt(j,10);if(j===0){return L;}var k=16777216+(j&255)*65536+(j&65280)+(j&16711680)/65536;return"#"+k.toString(16).substring(1).toUpperCase();},fixFullHexValue:function d(j){if(j&&j.length===4){return j.replace(/([0-9a-f])/ig,"$1$1");}return j;},findMidColorHex:function W(m,l){var n=this.hex2rgb(m),j=this.hex2rgb(l),k=[];n.forEach(function(o,p){k.push(parseInt((o+j[p])/2,10));});return("#"+this.rgb2hex(k[0],k[1],k[2]));},lightenHex:function C(o,n){var k=parseInt(o.replace("#",""),16),p=Math.round(2.55*n),m=(k>>16)+p,l=(k&255)+p,j=(k>>8&255)+p;return"#"+(16777216+(m<255?m<1?0:m:255)*65536+(j<255?j<1?0:j:255)*256+(l<255?l<1?0:l:255)).toString(16).slice(1);},applyOpacityToHex:function R(k,l){if(isNaN(l)||l>=100){return k;}var j=Math.round(l*2.55).toString(16);return k+j.padStart(2,"0");},getResponsiveFontColor:function F(o){var n=o?o.c1||o:"",j=this.getLuminance(n),l=255,q=121.71921,k=Math.max(l/j,j/l),p=Math.max(q/j,j/q),m="#fff",s="#35383a";if(k>=p){return m;}return s;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var F=mstrmojo.array,E={},A={},C={},G="72px",H="abcdefghijklmnopqrstuvwxyz0123456789";function B(K){return K.name+":"+(K.isItalic?"i":"n")+(K.isBold?"7":"4");}mstrmojo.util.FontLoader=mstrmojo.provide("mstrmojo.util.FontLoader",{load:function J(O,N,S){var Q=this,P=[],K;F.forEach(N,function(W){if(!Q.isFontInstalled(W)){K=B(W);if(!E[K]&&!A[K]){P.push(K);}}});if(!window.WebFont||P.length===0){return true;}var U=O,R;F.forEach(P,function(W){U=U+";"+W;});this.cancelLoadRequests(U,false);R={active:S.success,inactive:S.failure};C[U]=R;window.WebFont.load({custom:{families:P},fontactive:function(X,W){E[X+":"+W]=true;},fontinactive:function(X,W){A[X+":"+W]=true;},active:function M(){if(R.active){R.active();delete C[U];}},inactive:function L(){if(R.inactive){R.inactive();delete C[U];}}});return false;},cancelLoadRequests:function D(M,N){var L;if(N){var K;for(K in C){if(C.hasOwnProperty(K)&&K.indexOf(M)===0){L=C[K];L.active=null;L.inactive=null;delete C[K];}}}else{if(C.hasOwnProperty(M)){L=C[M];L.active=null;L.inactive=null;delete C[M];}}},isFontInstalled:function I(L){var M=document.createElement("canvas"),N=M.getContext("2d"),R=L.isItalic?"italic":"normal",K=L.isBold?"bold":"normal",P=R+" "+K+" "+G,Q,O;N.font=P+" monospace";Q=N.measureText(H).width;N.font=P+" '"+L.name+"', monospace";O=N.measureText(H).width;M=null;return Q!==O;}});})();(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G,F,M=this.i=K.i,N=0,I,P;if(K.binaryData&&O){this.binaryData=K.binaryData;this.headerSize=0;for(P=0;P<this.binaryData.schema.fields.length;P++){if(this.binaryData.schema.fields[P].typeId===-1){this.headerSize++;}}this.titles=O?L.row:L.col;this.missingTitles=this.titles?(this.headerSize-this.titles.length):0;return ;}G=J.ghs;F=this.hs=O?G.rhs:G.chs;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;this.missingTitles=this.titles&&this.headers?(this.headers.length-this.titles.length):0;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;if(this.binaryData){return this.headerSize;}return(!E?0:E.length);},getHeader:function C(H){var F,G,E;if(this.binaryData){E=this.titles.findIndex(function(I){return this.binaryData.schema.fields[H].name.includes(I.id);},this);return new mstrmojo.models.template.Header({binaryData:this.binaryData,rowInd:this.i,colInd:H,t:this.titles[E<0?H:E]});}F=this.headers;G=F&&F[H];E=H;if(G&&this.missingTitles){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?E:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.util.PlatformHelper");mstrmojo.url=mstrmojo.provide("mstrmojo.url",{isAbsoluteURL:function K(L){return(/^(http|https|ftp|file):\/\//i.test(L));},isHttpsAbsoluteURL:function H(L){return(/^https:\/\//i.test(L));},isImageDataURL:function J(L){return(L.indexOf("data:image/")===0);},isQueryURL:function A(L){return(L.indexOf("?")!==-1);},isRelativeStaticImageURL:function C(L){return !(this.isImageDataURL(L)||this.isAbsoluteURL(L)||this.isQueryURL(L));},isAllowedAbsoluteURL:function G(O){try{var L=new URL(O);if(mstrConfig.allowedLinkToURLScheme){var N=mstrConfig.allowedLinkToURLScheme.split(",");return N.some(function(P){return L.protocol===P.concat(":");});}}catch(M){return true;}return false;},getAbsoluteURL:function E(L,M){if(this.isAbsoluteURL(L)){return L;}if(M){return M+(/\/$/.test(M)?"":"/")+L;}return"http://"+L;},getRealURL:function F(M){var L=M;if(mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode()){L=this.getAbsoluteURL(M,this.getWebServerUrl());}return L;},getWebServerUrl:function B(P){var U=null;if(P){if(mstrApp!==undefined&&mstrApp.getConfiguration){U=mstrApp.getConfiguration().getCurrentProjectWebServerUrl();}}else{if(mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode()){U=mstrApp.env.getDossierServerURL();}else{var N=document.location&&document.location.href;if(N){var O=N.toLowerCase();var M="/app/",X="/servlet/",W="/asp/";var L=O.indexOf(M),R=O.indexOf(X),S=O.indexOf(W);if(L>=0){U=N.substr(0,L+1);}else{if(R>=0){if(S<0){U=N.substr(0,R+1);}else{if(S>=0){var Q=(R>S)?S:R;U=N.substr(0,Q+1);}}}else{if(R<0){if(S>=0){U=N.substr(0,S+1);}}}}}}}return U;},getFullPath:function I(a){var R=a,Z=mstrApp&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode(),N=mstrmojo.util.PlatformHelper.isLibrary(),X,P,W=/^(\/|\\)/;if(mstrApp&&mstrApp.isMCG&&mstrApp.isExpress&&!mstrmojo.imageUtils.isURLValid(a)){return"blockedImage";}if(!(mstrApp&&N||Z)||!a||a.indexOf("data:image")===0){return a;}if(this.isAbsoluteURL(a.trim().toLowerCase())){R=a;}else{var U=/^(\.\/|\.\\)+/;var S=/^(\.\.\/|\.\.\\)/;a=a.replace(U,"");a=a.replace(S,"");if(W.test(a)){var Y=/^(\/|\\)(MicroStrategyLibrary|MicroStrategy)/,M=/^(\/|\\)(servlet)/,Q="";if(Z){var L=mstrApp.env.getDossierServerURL().split("/");Q=L[L.length-2];}else{Q=mstrApp.contextPath;}if(a.indexOf(Q)===1){a=a.replace(W,"");a=a.replace(Q,"");}a=a.replace(Y,"");a=a.replace(M,"");a=a.replace(W,"");}if(mstrApp&&mstrApp.getConfiguration){var O=Z?mstrApp.env.getDossierServerURL():this.getWebServerUrl(this.isTablet);if(!O){R=a;}else{R=this.getAbsoluteURL(a,O);}}}return R;},getPlaceholderImageURL:function D(){return mstrmojo.getJsRoot()+"../images/1ptrans.gif";}});}());(function(){mstrmojo.requiresCls("mstrmojo.DI.DIConstants");mstrmojo.vi.util.DIUtils=mstrmojo.provide("mstrmojo.vi.util.DIUtils",{DIConstants:mstrmojo.DI.DIConstants,loadDIBundleAsync:function C(K){var G=mstrmojo.dynamicBundleUtils.BUNDLE_PATH.VI_DI,F=mstrmojo.getJsRoot(),H=F+"bundles/"+G;var I=function(){mstrmojo.func.safeCall("mstrApp.raiseEvent")({name:"diBundleLoaded",});K();};if(!mstrmojo.loader.isLoaded("mstrmojo.DI.DIContainer")){if(mstrmojo.dynamicBundleUtils.isAsyncLoadingEnabled()){var J={};J[H]={type:mstrmojo.dynamicBundleUtils.BUNDLE_TYPE.BUNDLE};mstrmojo.dynamicBundleUtils.dynamicLoadAllScripts(J,I);}else{mstrmojo.requiresBundle(G);I();}}else{I();}},loadDIBundle:function D(){if(!mstrmojo.loader.isLoaded("mstrmojo.DI.DIContainer")){mstrmojo.requiresBundle(mstrmojo.dynamicBundleUtils.BUNDLE_PATH.VI_DI);}},createClass:function E(F){mstrmojo.vi.util.DIUtils.loadDIBundle();return mstrmojo.getInstance({scriptClass:F});},insertDIContainer:function B(){mstrmojo.vi.util.DIUtils.loadDIBundle();return mstrmojo.insert({scriptClass:"mstrmojo.DI.DIContainer"});},DIHelpers:{standardizeDBRolesFormat:function A(F){mstrmojo.vi.util.DIUtils.loadDIBundle();return mstrmojo.DI.DIHelpers.standardizeDBRolesFormat(F);}}});}());mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1,CUSTOM:7};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46),SYNC_AXIS_SCALE:Math.pow(2,47)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8,TOP_LEFT:9,TOP_CENTER:10,TOP_RIGHT:11,BOTTOM_LEFT:12,BOTTOM_CENTER:13,BOTTOM_RIGHT:14,TOP:15,BOTTOM:16};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7,HISTOGRAM:8,BOXPLOT:9,WATERFALL:10,RING:11};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE_90:3,HORI_DROP:4,ROTATE_30:5,ROTATE_45:6,ROTATE_60:7,WRAPPED:8};mstrmojo.gm.EnumABLDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20,GET_EXTRA_X_AXIS_WIDTH:21,BUILD_MERGED_TITLE:22};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",VIS_TYPE:"visType",USER_VIS_TYPE:"userVisType",DATA_LABEL:"DataLabel",BAR_DATA_LABEL_POSITION:"bdlp",PIE_DATA_LABEL_POSITION:"pdlp",PIE_DATA_LABEL_LEADER_LINE:"pdlll",PIE_USE_NEW_SIZE_RATIO:"pnsr",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",DATA_LABELS_ROTATE:"dlrtt",ORDINAL_XAXIS_LABEL_ROTATION:"oxalr",GM_OPT_1132:"opt1132",SET_FEATURE_FLAG:"featureFlag",DATA_LABEL_FONT_SIZE_CONSTRAINT:"DataLabelFontSizeConstraint",DATA_LABEL_TEXT_ANGLE:"DataLabelTextAngle",AXIS_RATIO_LIMIT_X:"arlx",AXIS_RATIO_LIMIT_Y:"arly",BANDING:"Banding",SHOW_ALL_LABELS:"ShwAllLbl",LEGEND_VISIBLE:"LegendVisibleness",LEGEND_TITLE_HIDE:"LegendTitleHide",LEGEND_SIZEBY_HIDE:"LegendSizeByHide",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_LEGEND_HEIGHT:"lhr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",PIE_SORT_ORDER:"pso",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_SYNC_MODE:"AxisScaleSyncMode",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",SHAPE_RADIUS_STYLE:"shpRadiusStyle",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",SHADE_SHOW:"shdShw",SHADE_COLOR:"shdClr",SHADE_OPACITY:"shdOpac",SHADE_EXTENT_MODE:"shdExt",SHADE_EXTENT_VALUE:"shdExtVal",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn",SHOW_BOTH_TOTALS:"totalShw:intSumShw"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",PALETTE_FILL_COLOR:"pltFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",SHAPE_RADIUS:"shpRadius",SHAPE_SMOOTH:"shpSmooth",SHAPE_SMOOTH_STRENGTH:"shpSmoothStrength",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",DATA_LABELS_TOTAL_FONT_FAMILY:"dlTtFntFml",DATA_LABELS_TOTAL_FONT_SIZE:"dlTtFntSz",DATA_LABELS_TOTAL_FONT_STYLE:"dlTtFntStyle",DATA_LABELS_TOTAL_FONT_COLOR:"dlTtFntClr",ALL_DATA_LABELS_FONT_FAMILY:"allDlFntFml",ALL_DATA_LABELS_FONT_SIZE:"allDlFntSz",ALL_DATA_LABELS_FONT_STYLE:"allDlFntStyle",ALL_DATA_LABELS_FONT_COLOR:"allDlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",AXIS_DISABLE_DRAG:"axDisableDrag",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_ROTATION_CUSTOM_ANGLE:"xAxLbAng",X_AXIS_LABELS_WRAP_TEXT:"xAxLbWrapText",X_AXIS_LABELS_SHOW:"xAxLbShw",X_AXIS_NESTED_LABEL:"xAxLbNestedLabel",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_NGM_GRID_LINES_SHOW:"allNGMGridLnShw",X_GRID_LINES_SHOW:"xGridLnShw",Y_GRID_LINES_SHOW:"yGridLnShw",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr",SELECTION_LIMIT:"slctnLmt",CONTAINER_FIT_MODE:"cntrFitMode",SHOW_MODEBAR:"showModeBar",MEAN_SD:"meanSD",POINT_SIZE:"ptSize",PTSZ_TYPE:"ptSzType",JITTER:"jitter",JTR_TYPE:"jtrType",POINT_POS:"ptPos",PTPOS_TYPE:"ptPosType",SHOW_OUTLIERS:"shwOutliers",CUSTOM_BINS_MODE:"custMode",MANUAL_BINS_MODE:"manualBinsMode",RANGE_TYPE:"rangeType",NUM_BINS:"numBins",XBINS_START:"xBinsStart",XBINS_END:"xBinsEnd",XBINS_SIZE:"xBinsSize",HAS_UNCHECKED_AUTO:"hasUncheckedAuto",HAS_UNCHECKED_DATASET_RANGE:"hasUncheckedDstRng",DISPLAY_MODE:"displayMode",CONNECTION_LINE_STYLE:"connectionLnStyle",TOTAL_SHOW:"totalShw",TOTAL_LABEL:"totalLabel",INT_SUM_SHOW:"intSumShw",POSITIVE_COLOR:"posClr",NEGATIVE_COLOR:"negClr",START_COLOR:"startClr",TOTAL_COLOR:"totalClr",INT_SUM_COLOR:"intSumClr",INT_SUM_FULL:"intSumFull"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4,DASHED_THICK:5};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4,SYNCHRONIZE:5};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:4,SHOW_BOTH_TEXT_VALUE:6,SHOW_PERCENT_ONLY:8,SHOW_BOTH_VALUE_PERCENT:10,SHOW_BOTH_TEXT_PERCENT:12,SHOW_TEXT_VALUE_PERCENT:14,STACKED_BAR_TOTAL:16,STACKED_BAR_TOTAL_AND_VALUE:18,STACKED_BAR_TOTAL_AND_TEXT:20,STACKED_BAR_TOTAL_AND_VALUE_AND_TEXT:22};mstrmojo.gm.EnumBarDataLabelPosition={AUTO:0,OUTSIDE_END:1,INSIDE_END:2,INSIDE_BASE:3};mstrmojo.gm.EnumPieDataLabelPosition={INSIDE:1,OUTSIDE:2};mstrmojo.gm.EnumLeaderLineMode={AUTO:1,SHOW:2,HIDE:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.EnumNGMGridLines={SHOW_Y:1,SHOW_X:2,SHOW:3,HIDE:4,AUTO:5};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumShapeRadiusStyle={SEPARATE:0,COMBINE:1};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.gm.EnumNGMSubtype={CLUSTERED:0,STACKED:1,PERCENT:2};mstrmojo.gm.EnumBoxPlotMean={NO_MEAN:0,ONLY_MEAN:1,MEAN_STDEV:2};mstrmojo.gm.EnumBoxPlotOutliers={OUTLIERS:0,ALL_POINTS:1,JITTER:0,JTR_MAN:0.5,POINT_POS:0,POS_MAN:-1.8,POINT_SIZE:6,SIZE_MAN:10,MANUAL:1};mstrmojo.gm.EnumHistogram={AUTOMATIC:1,MANUAL:0,CUST_INPUT:2,DATASET:3,BY_BIN_SIZE:4,BY_BIN_NUMBER:5};mstrmojo.gm.EnumContainerFitModes={AUTOMATIC:0,FIT_TO_CONTAINER:1,FIT_TO_CONTENT:2};mstrmojo.gm.GMConstants={DP_WARNING_THRESHOLD:2000};mstrmojo.gm.EnumShadeShow={HIDE:0,SHOW:1};mstrmojo.gm.EnumShadeExtentMode={AUTO:0,MANUAL:1};mstrmojo.gm.EnumDefaultProperty={PIE_DATA_LABEL_LEADER_LINE:mstrmojo.gm.EnumLeaderLineMode.AUTO,PIE_USE_NEW_SIZE_RATIO:1,ORDINAL_XAXIS_LABEL_ROTATION:1,X_AXIS_LABELS_WRAP_TEXT:true,PIE_SORT_ORDER:4,BAR_DATA_LABEL_POSITION:mstrmojo.gm.EnumBarDataLabelPosition.AUTO,X_AXIS_NESTED_LABEL:true,GM_OPT_1132:true,ROW_HEADER_TEXT_FONT_SIZE:"8pt",COLUMN_HEADER_TEXT_FONT_SIZE:"8pt",ROW_VAVLUE_TEXT_FONT_SIZE:"8pt",COLUMN_VAVLUE_TEXT_FONT_SIZE:"8pt",LEGEND_FONT_SIZE:"8pt",DATA_LABELS_FONT_SIZE:"8pt",DATA_LABELS_TOTAL_FONT_SIZE:"8pt",REF_LABELS_FONT_SIZE:"8pt",X_AXIS_TITLE_FONT_SIZE:"8pt",X_AXIS_LABELS_FONT_SIZE:"8pt",Y_AXIS_TITLE_FONT_SIZE:"8pt",Y_AXIS_LABELS_FONT_SIZE:"8pt"};mstrmojo.gm.EnumDefaultProperty4GM={Y_AXIS_LINE_STYLE:mstrmojo.chart.enums.EnumLineStyle.LS_NONE,Y_AXIS_LINE_THICKNESS:0,X_AXIS_LINE_STYLE:mstrmojo.chart.enums.EnumLineStyle.LS_NONE,X_AXIS_LINE_THICKNESS:0,MAJOR_GRID_LINES_STYLE:mstrmojo.chart.enums.EnumLineStyle.LS_DASH,MINER_GRID_LINES_STYLE:mstrmojo.chart.enums.EnumLineStyle.LS_DASH};mstrmojo.gm.EnumFeatureFlags={ftFgGrpA:{ApplyOriginalFitTo:1<<0,UseWaterfallNewMode:1<<1,EnableSmartOrdinalXAxisLabel:1<<2,HideGMLegendByDefault:1<<3,ApplyMetricNamesOnAxisToRowColumn:1<<4,DataLabelMultiInfo:1<<5,EnableYLabelWrap:1<<6,DataLabelOpt:1<<7,ClusterBarSpecialCaseNewWidth:1<<8,ValueAxisLabelRotation:1<<9,DisplayAxisWithOnlyZeroElement:1<<10,ShowBarTotalDataLabel:1<<11,ReadBackgroundColorFromDefn:1<<12,GmSpaceOpt:1<<13,LegendDefaultPositionBottomRight:1<<14,ForceDisplayExtremeTickForValueAxis:1<<15,RefineBarAutoMarkerSize:1<<16,NgmSpaceOpt:1<<17}};(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumDSSDisplayMode");mstrmojo.requiresDescs(981);var B=mstrmojo.vi.viz;mstrmojo.vi.viz.KnownVisualizations={CUSTOM:-2,UNKNOWN:-1,GRID:0,ESRIMAP:2,GRAPHMATRIX:3,NEWGRAPHMATRIX:13,IMAGELAYOUT:4,HEATMAP:16,GOOGLEMAP:17,NETWORK:18,MAPBOX:19,KPICARD:20,getDefinition:function A(E){var F=B.KnownVisualizations,H={Grid:{id:F.GRID,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,title:mstrmojo.desc(981,"Grid")},visAjaxDatePicker:{id:1},ESRIMapVisualizationStyle:{id:F.ESRIMAP,mobileVIStyles:{IPhoneVisualization:"ViEsriMapAdapter",IPadVisualization:"ViEsriMapAdapter"}},GraphMatrixVisualizationStyle:{id:F.GRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},NewGraphMatrixVisualizationStyle:{id:F.NEWGRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},ImageLayoutVisualizationStyle:{id:F.IMAGELAYOUT,mobileVIStyles:{IPadVisualization:"IPhoneImageMapStyle",ATabletVisualization:"AndroidImageMapStyle"}},SurveyVisualizationStyle:{id:8,mobileVIStyles:{IPadVisualization:"SurveyVisualizationStyle"}},VIHeatMapVisualizationStyle:{id:F.HEATMAP,mobileVIStyles:{IPadVisualization:"IPadHeatMapStyle",ATabletVisualization:"HeatMapVisualizationStyle"}},GoogleMapVisualizationStyle:{id:F.GOOGLEMAP,mobileVIStyles:{IPhoneVisualization:"IPhoneMapStyle",IPadVisualization:"IPadMapStyle"}},MapboxVisualizationStyle:{id:F.MAPBOX,mobileVIStyles:{IPhoneVisualization:"IPhoneMapboxStyle",IPadVisualization:"IPhoneMapboxStyle"}},NetworkVisualizationStyle:{id:F.NETWORK,mobileVIStyles:{IPadVisualization:"IPhoneNetVizStyle"}},KPICardVisualizationStyle:{id:F.KPICARD,mobileVIStyles:{IPadVisualization:"IPhoneKPICardStyle"}},MultiMetricKPI:{id:F.CUSTOM},InsightLineChart:{id:F.CUSTOM},KeyDriver:{id:F.CUSTOM},AutoNarratives:{id:F.CUSTOM}};var G=H[E];if(!G){var C=mstrConfig.pluginsVisList,D=C&&C[E];G={id:D?F.CUSTOM:F.UNKNOWN};G.mobileVIStyles=(D&&D.mobileVIStyles)||{};}return G;}};}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums");var J=mstrmojo.gm,I=J.EnumGraphType,K=J.EnumDataLabels,A=J.EnumLegend,L=J.EnumMinSizeType,H=J.EnumFitTo,B=J.EnumContainerFitModes,D=J.EnumNGMGridLines,N=J.EnumSubtype;var M="Arial",F="Open Sans",E="ALL";var C={DEFAULT:"spatial",CLASSIC:"classic"};var O={THEME_STYLE:C.CLASSIC,LAYOUT:{allFF:M,titleFF:M,dlvPadding:2,dlvMargin:4,dlvLOH_Compensation:1,ucTBLOHeight:1,drpChildPadding:4,drpLOHW_Compensation:0,drpWidthExtraPadding:0,cueBottomOffset:1},GRID:{paddingSize:5,mRatio:2,lRatio:3,gridTemplateVisible:false,defaultVerticalRatio:0.5},HEATMAP:{smallGap:2,middleGap:4,largeGap:6,largerGap:8},NGM:{GENERAL_PROPS:(function(){var P={};P[E]={dataLabels:K.HIDE};return P;}()),DEFAULT_PROPS:(function(){var P={};P[E]={cntrFitMode:B.AUTOMATIC};return P;}())},OGM:{GENERAL_PROPS:(function(){var P={};P[E]={dataLabels:K.HIDE,minRowHeight:20,fitTo:H.AUTOMATIC};return P;}()),DEFAULT_PROPS:(function(){var P={};P[E]={};P[I.BAR]={shpBdrThk:1,shpBdrStyle:0};P[I.PIE]={shpBdrThk:1,shpBdrStyle:0};P[I.GRID]={shpFillTrans:70};return P;}())},KPI:{fontFamily:M,defaultFontClr:{1:"#444649",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}},G={THEME_STYLE:C.DEFAULT,LAYOUT:{allFF:F,titleFF:F,dlvPadding:0,dlvMargin:0,dlvLOH_Compensation:0,ucTBLOHeight:0,drpChildPadding:12,drpLOHW_Compensation:12,drpWidthExtraPadding:4,cueBottomOffset:-2},GRID:{paddingSize:4.52,mRatio:1050/452,lRatio:1205/452,gridTemplateVisible:true,defaultVerticalRatio:0.5},HEATMAP:{smallGap:1,middleGap:3,largeGap:5,largerGap:5,cellTextSize:11,fontFamily:"Open Sans SemiBold",leftPadding:4,topPadding:4,lineHeightTime:1.3,marginTop:"3px"},NGM:{GENERAL_PROPS:(function(){var P={};P[E]={dataLabels:K.HIDE};P[I.WATERFALL]={dataLabels:K.HIDE};return P;}()),DEFAULT_PROPS:(function(){var P={};P[E]={dlFntFml:F,rfLnFntFml:F,lgdFntFml:F,xAxTtFntFml:F,xAxLbFntFml:F,yAxTtFntFml:F,yAxLbFntFml:F,allTxtFntFml:F,rwHdrTxtFntFml:F,colHdrTxtFntFml:F,rwVlTxtFntFml:F,colVlTxtFntFml:F,ttlFntFml:F,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt",bgFillClr:"16777215",rwHdrTxtFntClr:"3815477",colHdrTxtFntClr:"3815477",rwVlTxtFntClr:"3815477",colVlTxtFntClr:"3815477",lgdFntClr:"3815477",rfLnFntClr:"5066061",allAxTtFntClr:"3815477",allAxLbFntClr:"3815477",xAxTtFntClr:"3815477",xAxLbFntClr:"3815477",yAxTtFntClr:"3815477",yAxLbFntClr:"3815477",xAxTtFntStyle:"1",yAxTtFntStyle:"1",dlFntClr:"3815477",lgdBgFillClr:"16185078",lgdBgFillStyle:"0",rwHdrFillClr:"16777215",rwHdrFillStyle:"0",colHdrFillClr:"16777215",colHdrFillStyle:"0",lgdBgFillTrans:"0",vMatrixLnClr:"14737632",hMatrixLnClr:"14737632",xAxLnClr:"14737632",yAxLnClr:"14737632",xAxOriLnClr:"14737632",yAxOriLnClr:"14737632",majorGridLnClr:"16053492",minerGridLnClr:"16053492",outBdrClr:"13553358",trdRefLnThk:"1",trdRefLnClr:"5066061",trdRefLnStyle:"0"};P[I.WATERFALL]={yGridLnShw:D.AUTO,xGridLnShw:D.AUTO};return P;}())},OGM:{GENERAL_PROPS:(function(){var P={};P[E]={dataLabels:K.HIDE,minRowHeight:20};P[I.PIE]={legend:A.HIDE,legendShow:false,dataLabels:K.SHOW_TEXT_ONLY};P[I.SCATTER]={minSizeType:L.AUTO};return P;}()),DEFAULT_PROPS:(function(){var Q={};Q[E]={rwHdrShw:false,colHdrShw:false,dlFntFml:F,dlTtFntFml:F,rfLnFntFml:F,lgdFntFml:F,xAxTtFntFml:F,xAxLbFntFml:F,yAxTtFntFml:F,yAxLbFntFml:F,allTxtFntFml:F,rwHdrTxtFntFml:F,colHdrTxtFntFml:F,rwVlTxtFntFml:F,colVlTxtFntFml:F,ttlFntFml:F,dlFntClr:3815477,dlTtFntClr:3815477,rfLnFntClr:3815477,lgdFntClr:3815477,xAxTtFntClr:3815477,xAxLbFntClr:3815477,yAxTtFntClr:3815477,yAxLbFntClr:3815477,allTxtFntClr:3815477,rwHdrTxtFntClr:3815477,colHdrTxtFntClr:3815477,rwVlTxtFntClr:3815477,colVlTxtFntClr:3815477,ttlFntClr:3815477,yAxTtFntStyle:1,xAxTtFntStyle:1,rwHdrTxtFntStyle:1,colHdrTxtFntStyle:1,dlFntSz:"9pt",dlTtFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};Q[I.AREA]={shpBdrThk:1,shpBdrClr:15461355,};var P=Q[I.AREA];P["SUBTYPE_"+N.ABSOLUTE]={shpFillTrans:70};P["SUBTYPE_"+N.AUTO]={shpFillTrans:100};P["SUBTYPE_"+N.STACKED]={shpFillTrans:100};P["SUBTYPE_"+N.CLUSTERED]={shpFillTrans:100};P["SUBTYPE_"+N.PERCENT]={shpFillTrans:100};Q[I.BAR]={shpBdrClr:15461355,shpBdrStyle:0,shpBdrThk:1,shpFillTrans:100,};Q[I.LINE]={shpFillTrans:100};Q[I.PIE]={shpBdrThk:1,shpBdrStyle:0,shpFillTrans:100,shpBdrClr:15461355};Q[I.SCATTER]={shpBdrStyle:99,shpFillTrans:40};Q[I.BUBBLE]={shpBdrStyle:99,shpFillTrans:40};Q[I.GRID]={shpBdrThk:1,shpFillTrans:100};return Q;}())},KPI:{fontFamily:F,defaultFontClr:{1:"#35383A",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}};mstrmojo.vi.enums.EnumThemeProperties={CLASSIC_THEME_PROPS:O,DEFAULT_THEME_PROPS:G};mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE={GRID:"GRID",LAYOUT:"LAYOUT",HEATMAP:"HEATMAP"};mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME=C;mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE={DEFAULT:0,CARD:1,FLAT:2};mstrmojo.vi.enums.EnumThemeProperties.ENUM_SHADOW_STYLE={VISIBLE:0,HIDDEN:1};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.url","mstrmojo.string","mstrmojo.vi.enums.EnumFeatures");var A=mstrmojo.func,G=mstrmojo.url,C=mstrmojo.string,F=mstrmojo.vi.enums.EnumFeatures;mstrmojo.imageUtils=mstrmojo.provide("mstrmojo.imageUtils",{compress:function(L,Q,P){var N="image/jpeg";if(P==="png"||P==="image/png"){N="image/png";}var M=parseInt(Q);M=M>1&&M<=100?M:100;var O=document.createElement("canvas");if(O.getContext&&O.getContext("2d")){O.width=L.naturalWidth;O.height=L.naturalHeight;O.getContext("2d").drawImage(L,0,0);var K=O.toDataURL(N,M/100);var J=new Image();J.src=K;return J;}return L;},dataURLToBlob:function(P){var J=";base64,",O,Q,K;P=P||"";if(P.indexOf(J)===-1){O=P.split(",");Q=O[0].split(":")[1];K=decodeURIComponent(O[1]);return new Blob([K],{type:Q});}O=P.split(J);Q=O[0].split(":")[1];K=window.atob(O[1]);var N=K.length;var M=new Uint8Array(N);for(var L=0;L<N;++L){M[L]=K.charCodeAt(L);}return new Blob([M],{type:Q});},isInStrictImageMode:function D(){return mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(F.DOSSIER_STRICT_IMAGE_VALIDATION);},isURLValid:function B(J){if(this.isInStrictImageMode()){return !!(G.isHttpsAbsoluteURL(J)||G.isRelativeStaticImageURL(J));}return true;},isImageAccessible:function H(M,N,L){var K=document.createElement("img");var J=function(){K=null;};if(mstrApp&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode()&&M.indexOf(";base64,")===-1){K.src=G.getAbsoluteURL(M,mstrApp.env.getDossierServerURL());}else{K.src=M;if(L&&!G.isAbsoluteURL(M)){K.src=G.getAbsoluteURL(M,L);}}K.onload=A.composite([N&&N.success||mstrmojo.emptyFn,J]);K.onerror=A.composite([N&&N.failure||mstrmojo.emptyFn,J]);},generateImageMarkup:function E(L,J,K){if(K===undefined){K="";}if(J!==undefined){return'<img src="'+L+'" alt="'+C.encodeHtmlString(J)+'" '+K+"></img>";}else{return'<img src="'+L+'" '+K+"></img>";}},decodeImageFromArrayBuffer:function I(K){var R=new Uint8Array(K),N=R.length,S,Q,P,J="image/png",M="",L,O;if(N<3){return null;}S=R[0];Q=R[1];P=R[2];if(S===255&&Q===216){J="image/jpeg";}else{if(S===71&&Q===73&&P===70){J="image/gif";}else{if(S===82&&Q===73){J="image/webp";}else{if(S===66&&Q===77){J="image/bmp";}}}}for(L=0;L<N;L++){M+=String.fromCharCode(R[L]);}O=window.btoa(M);return"data:"+J+";base64,"+O;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom;mstrmojo.TreeBrowserSelector=mstrmojo.provide("mstrmojo.TreeBrowserSelector",mstrmojo.hash.copy({premousedown:function B(F,I,E){if(A.isPrimaryMouseBtn(E.e)){var D=E.hWin,H=E.e,G=A.eventTarget(D,H),C=F.listMapper.findIndex(F,I,G);if(C>-1){F.toggleSelect(C);}}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dnd","mstrmojo.EnumRWUnitType","mstrmojo.vi.enums.EnumCanvasSizeType","mstrmojo.util.PlatformHelper");var L=mstrmojo.array,N=mstrmojo.hash,Ab=L.fnReduceNumber,q=mstrmojo.EnumRWUnitType,F={none:0,edit:1,preview:2,excel:4};mstrmojo.vi.ui.BoxLayoutType=null;var AV="c";var g="flc";var A="b";var AD="g";var Y="h";var D="v";var d=["ifwChildren","canvasSize","floatChildren"];var AJ={ifwTopPerc:25,ifwLeftPerc:25,ifwWidth:50,ifwHeight:50,leftPerc:10,topPerc:5,defaultWidthPerc:30,defaultHeightPerc:30,panelStackWidthPerc:50,panelStackHeightPerc:50,imageWidthPerc:40,imageHeightPerc:12,textWidthPerc:40,textHeightPerc:12,selectorWidthPerc:65,selectorHeightPerc:12,sizeAbs:200,posAbs:0},Q=5;var w="|";var O=false;function AO(Ad){mstrmojo.all[this.hostId].buildBoxLayout(Ad);}function j(Ad){var Ae=this.hostId&&mstrmojo.all[this.hostId];if(Ae&&Ae.toggleFloatChild){Ae.toggleFloatChild(Ad);}}function AI(Ad,Ae){if(!Ae){return ;}["height","left","width","top"].forEach(function(Af){if(Ae[Af]){Ad[Af]=Ae[Af];}});}function n(Ae){Ae=Ae||"";var Ad=Ae.split(w);return{target:parseInt(Ad.pop(),10),parentPathArray:Ad,parentPath:Ad.join(w)};}function W(Ag,Ae){if(!Ag){return undefined;}Ae=Ae||this.box;var Af=n(Ag),Ad=Ae;Af.parentPathArray.forEach(function(Ai){Ad=Ad.children[Ai];});var Ah=function(Aj,An,Al){var Ap=An.children,Ai=Ap[Aj],Ao=function(At,Ar,As){if(At.t===AV){return mstrmojo.all[At.id].getMinBoxSize(An.o)+(As?this.padding:0);}var Aq=At.children.map(function(Au){return Ao(Au,Ar,As);});if(At.o===Ar){return Aq.reduce(Ab);}return Math.max.apply(null,Aq);}.bind(this),Am=function(Ar,At,Aq,As){return Ar.map(function(Av,Au){return Ah(Au+At,Aq||An,(As===0||As==="0")?0:(As||Al));});},Ak=function(Ar){var Aq=[0,Aj];if(Ar){Aq=[Aj+1];}return Am(Array.prototype.slice.apply(Ap,Aq),Ar?Aj+1:0);};return{idx:Aj,path:(Al||parseInt(Al)===0)?(Al+w+Aj):Aj,parent:An,parentPath:Al,siblings:Ap,box:Ai,getBoxLength:function(){return Ai[An.o==="v"?"h":"w"];},getSiblings:function(){return Am(Ap,0);},getPreviousSiblings:function(){return Ak();},getNextSiblings:function(){return Ak(true);},getMinimumBoxSize:function(Aq,Ar){return Ao(Ai,Aq,Ar);},getChildren:function(){return Am(Ai.children||[],0,Ai,this.path);}};}.bind(this);if(Ad&&Ad.children){return Ah(Af.target,Ad,Af.parentPath);}return undefined;}function I(Ad){return Ad.filter(function(Ae){return !Ae.f;});}function b(Ad){return !Ad.some(function(Ae){return !Ae.f;});}function f(Ai,Ad,Ah){if(Ai.length){var Af=Ah?0:Ad,Ag=Ah?Ad:0,Ae=Ai[0];Ai.forEach(function(Ak){var Aj=Math.round((Ak.l/(100-Af))*Ad);Ak.l+=Ah?-Aj:Aj;Ag+=Ak.l;Ae=Ak;});Ae.l+=100-Ag;}}function s(Af,Ae){var Ad=I(Af);Ae=Ae||Math.round(100/(Ad.length+1));f(Ad,Ae,true);return Ae;}function M(Ae,Ad){f(I(Ae),Ad);}function a(Ai,Af){var Ag=Ai.children,Ae=Ag.reduce(function(Aj,Ak){return Ak.l+Aj;},0);Ag.forEach(function(Aj){delete Aj.f;Aj.l=Math.round((Aj.l/Ae)*100);});if(Ai!==this.box){Ai.f=true;Ai.l=Ai[Ai.o==="h"?"h":"w"];if(Af){var Ad=W.call(this,Af),Ah=Ad.box;if(b(Ah.children)){a.call(this,Ah,Ad.parentPath);}}}}function R(Ai,Ae){var Am=Ai.children,Ad=0,Ak=this;Am.filter(function(An){return An.t===AV;}).forEach(function(An){Ad+=An.l;An.f=true;An.l=Ak.getSizeForOrientation(An.id,Ai.o);});I(Am).forEach(function(An){An.l=Math.round(An.l*(100/(Ad||100)));});var Aj=this.box;if(Ai!==Aj){var Ah=Ae&&W.call(this,Ae),Ag=(Ah&&Ah.box)||Aj;if(this.shouldAllChildrenBeFixed(Ag)){R.call(this,Ag,Ah&&Ah.parentPath);return ;}var Af=Ag.children,Al=Af.indexOf(Ai);delete Ai.f;Af.splice(Al,1);Ai.l=s(Af);Af.splice(Al,0,Ai);}}function B(Ad){if(typeof Ad!=="string"){return undefined;}return parseInt(Ad,10);}function AG(Ad,Ag){var Ae=false;var Af=B(Ad);if(Af!==undefined){Ad=Af;Ae=true;}return{f:Ae,l:Ad===undefined?100:Ad,r:!!Ag};}function u(Ad){return function(Ae,Af){if(Ad){Ae.push(Af);}else{Ae.splice(0,0,Af);}return Ae;};}function AX(Ad){if(O){console.log(JSON.stringify({t:Ad,cfg:this.box}));}}function Ac(Ao,An,Ak,Am){var Ad=this.getNewRootBox(Ao===D),Ah=this.box,Aj=Ah.children,Ai=Ah.canvasSize,Ag=this.box.floatChildren,Af=this.box.ifwChildren,Ae=Aj[0];if(Aj.length>1){Ae=Object.keys(Ah).reduce(function(Ap,Aq){if(d.indexOf(Aq)===-1){Ap[Aq]=Ah[Aq];}return Ap;},{});}if((this.isSelectorPanel()||this.isFormPanel())&&Aj.length===2){var Al=mstrmojo.vi.ui.rw.ButtonBox.boxConfiguration.f.v||42;Ae.f=true;Ae.h=Al;Ae.l=Al;An.l=100;}else{An.l=Am||100/((Ae?1:0)+1);if(Ae){Ae.l=Am?100:50;}}Ad.children=Ak([Ae].filter(function(Ap){return Ap;}),An);Ad.floatChildren=Ag;Ad.ifwChildren=Af;Ad.canvasSize=Ai;this.box=Ad;}function H(Ad,Ak,Ag,Ah){var Aj=this.identifier,Ae=this.box,Af=Ae.children,Al={t:AV,f:false,l:100,id:Ad.id},Ai=u(Ah);Al[Aj]=Ad[Aj];if(this.shouldAllChildrenBeFixed(Ae)){if(Ak){Ak=0;}else{R.call(this,Ae);}}Al.f=!!Ak;if(Ag){if(Ag===Ae.o){Al.l=Ak||s(Af);Ai(Af,Al);}else{Ac.call(this,Ag,Al,Ai,Ak);}}else{Al.l=Ak||s(Af);Ai(Af,Al);}AX.call(this,"addRootChild");}mstrmojo.vi.ui.BoxLayoutConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.ui.BoxLayoutConfig",identifier:"k",padding:4,hostId:"",box:null,boxTree:[],boxPaths:null,percentageExcludesSpacing:false,init:function AF(Ad){N.copy(Ad,this);},validateBoxLayout:function AQ(Ad,Af){Af=Af||this.box;var Ai=this.identifier,Ae=this,Ag=function(Al){var Ak=Al.children,Am=Ak.filter(function(An){return An.t===A;});var Aj=Ak.length;if(Aj===Am.length&&Aj===1){return false;}return Am.map(Ag).reduce(function(An,Ao){return An&&Ao;},true);},Ah=function(){var An=Ad.map(function(Ap){return Ap[Ai];}),Ao=function(Ar){var Aq=[];Ar.children.forEach(function(At){if(At.t===A){Aq=Aq.concat(Ao(At));}else{Aq.push(At[Ai]);}});var Ap=mstrmojo.all[Ae.hostId].groupTreeLayoutConfig,As;if(Ar.floatChildren){if(Ar.floatChildren.length!==undefined){As=Ar.floatChildren;}else{if(Ap&&Ap.getFloatGroupTree()){As=Ap.getLeafNodeArray(true);}}}if(!As){As=[];}As.forEach(function(At){if(At.t==="flc"){Aq.push(At[Ai]);}});return Aq;},Al=Ao(Af);if(Af.floatChildren){var Am=function(Ap){var Aq=[];if(Ap){Ap.forEach(function(Ar){if(!Ar.children&&An.indexOf(Ar.k)===-1){Aq.push(Ar);L.removeItem(Al,Ar.k);}if(Ar.children){Am(Ar.children);}});L.forEach(Aq,function(Ar){L.removeItem(Ap,Ar);});}};var Aj;if(L.isArray(Af.floatChildren)){Aj=Af.floatChildren;}else{Aj=Af.floatChildren.children;}Am(Aj);}var Ak=(Al.length!==0||An.length===0)&&Al.every(function(Ap){return An.indexOf(Ap)>-1;});return Ak;};return Ag(Af)&&Ah();},useDefaultBox:function(Ag,Aj){var Af=this.identifier,Ae=Math.round(100/Ag.length),Ah=this.getNewRootBox(this.box&&this.box.o===D),Ad=0,Ai=null;Ah.children=Ag.map(function(Aq,An){var Al={t:AV},Am=Ae,Ao=false;if(Aj){Am=Aj[An];var Ap=B(Am);if(Ap!==undefined){Am=Ap;Ao=true;}}if(!Ao){Ad+=Am;Ai=Al;}Al.l=Am;Al.f=Ao;Al[Af]=Aq[Af];return Al;});if(Ai){var Ak=100-Ad;if(Ak){Ai.l+=Ak;}}this.box=Ah;return Ah;},getNewRootBox:function AR(Ad){return{t:A,o:Ad?D:Y,children:[],floatChildren:[],ifwChildren:[],canvasSize:{sizeType:mstrmojo.vi.enums.EnumCanvasSizeType.AUTOMATIC,containerLocked:true,sizeSetting:null}};},convertBoxChildToIfwChild:function h(Ad){var Ag=this.box,Af=[],Ae=[];L.forEach(Ag.children,function(Ah){var Ai=Ad.getTargetDefn(Ah.k)[Ah.k];if(Ai&&Ai.ifw){Ae.push(this.getDefaultIfwLayout(Ah));}else{Af.push(Ah);}},this);Ag.children=Af;Ag.ifwChildren=Ae;},applyLayoutToIfwNode:function t(Ae,Ad){L.forEach(this.box.ifwChildren,function(Af){if(Af.k===Ae){AI(Af,Ad);}},this);},getDefaultIfwLayout:function X(Ag){var Ah=AJ.ifwWidth,Ae=AJ.ifwHeight,Al=AJ.ifwTopPerc,Ak=AJ.ifwLeftPerc,Am=mstrmojo.all[this.hostId],Aj=Am.getContainerNodeMargin(),Ad=parseInt(Am.width,10)-2*Aj,Ai=parseInt(Am.height,10)-2*Aj;var Af={fixed:"0",k:Ag.k,t:"flc",hidden:0};Af.width=Ah+"|"+Ah/100*Ad+"px";Af.height=Ae+"|"+Ae/100*Ai+"px";Af.left=Ak+"|"+Ak/100*Ad+"px";Af.top=Al+"|"+Al/100*Ai+"px";AI(Af,Ag._preservedLayout);delete Ag._preservedLayout;return Af;},getDefaultFloatLayout:function AM(Ak,Ax,A1){var A4,A5,Ap=this.box,Av=Ak.model.getSelectedViUnit()||null,Ao=mstrmojo.all[this.hostId],Am=Ao.getContainerNodeMargin(),A3=mstrmojo.func.safeCall("getPageSizeWidthAndHeight",Ao)()||{},Ad=A3.width||parseInt(Ao.width,10)-2*Am,Ae=A3.height||parseInt(Ao.height,10)-2*Am,As=Ao.groupTreeLayoutConfig,Ag=As.getLeafNodeArray(),Ai,Ah=Ak.left,Ay=typeof Ah==="string"&&Ah.indexOf("|")!==-1,Aj=Av&&Av.parent,A2=!!(Aj&&Ao.k===Aj.k);switch(N.walk("defn.t",Ak)){case q.TEXTFIELD:case q.BUTTONFIELD:A4=AJ.textWidthPerc;A5=AJ.textHeightPerc;break;case q.IMAGE:A4=AJ.imageWidthPerc;A5=AJ.imageHeightPerc;break;case q.SELECTOR:if(N.walk("defn.ct",Ak)==="4"){A4=AJ.textWidthPerc;A5=AJ.textHeightPerc;}else{A4=AJ.selectorWidthPerc;A5=AJ.selectorHeightPerc;}break;case q.PANELSTACK:A4=AJ.panelStackWidthPerc;A5=AJ.panelStackHeightPerc;break;default:A4=AJ.defaultWidthPerc;A5=AJ.defaultHeightPerc;}if(Ax&&Aj&&Aj.getFloatGroupTree()){var Af=Aj.groupTreeLayoutConfig,An=Af&&Af.getLeafNodeArray(),Ar=L.find(An,"k",Av.k);if(Ar!==-1){Ai=Af.parseConfigNode(An[Ar]);}}var Au,At=As.parseConfigNode(A1);if(Ag.length>0){Au=parseFloat(Ag.sort(function(A7,A6){return parseFloat(A7.zIndex)-parseFloat(A6.zIndex);})[Ag.length-1].zIndex);}else{Au=2;}Ak.unDocked=true;var Aq={fixed:"0",k:Ak.k,rk:Ak.parent&&Ak.parent.k,l:Ap.o===D?A5:A4,zIndex:Au+"",t:"flc",hidden:0},Aw,Al=function(A7){var BA=Ao.hasRendered?Ao.getScrollPosition():{scrollTop:0,scrollLeft:0},A9=Ad/2-parseFloat(A7.width.split("|")[1])/2,A8=Ae/2-parseFloat(A7.height.split("|")[1])/2,A6=function(BC,BB){return Math.floor(Math.random()*BC)-(BB?BC/2:0);};A9+=BA.scrollLeft+A6(Ad*0.3,true);A8+=BA.scrollTop+A6(Ae*0.3,true);A9=A9<0?A6(50,false):A9;A8=A8<0?A6(50,false):A8;return{top:A8,left:A9};};if(Ai){Aq.width=Ai.width[0]+"|"+(Ai.width[0]/100*At.width[1])+"px";Aq.height=Ai.height[0]+"|"+(Ai.height[0]/100*At.height[1])+"px";if(!A2){Aq.left=Ai.left[0]+"|"+(Ai.left[0]/100*At.width[1])+"px";Aq.top=Ai.top[0]+"|"+(Ai.top[0]/100*At.height[1])+"px";}else{Aw=Al(Aq);Aq.left=(Aw.left/At.width[1]*100)+"|"+Aw.left+"px";Aq.top=(Aw.top/At.height[1]*100)+"|"+Aw.top+"px";}}else{var Az=A4/100*Ad,A0=A5/100*Ae;Aq.width=(Az/At.width[1]*100)+"|"+Az+"px";Aq.height=(A0/At.height[1]*100)+"|"+A0+"px";if(Ay){Aq.left=Ak.left;Aq.top=Ak.top;}else{Aw=Al(Aq);Aq.left=(Aw.left/At.width[1]*100)+"|"+Aw.left+"px";Aq.top=(Aw.top/At.height[1]*100)+"|"+Aw.top+"px";}}AI(Aq,Ak._preservedLayout);delete Ak._preservedLayout;return Aq;},getDefaultBoxSize:function AW(Ae,Ad){return{width:AJ.defaultWidthPerc/100*Ae,height:AJ.defaultHeightPerc/100*Ad};},buildBoxTree:function C(Ad){var Ae={},Ag={},Af=this.boxTree=[],Ah=this.box.floatChildren;if(!Ah){return ;}Ah.forEach(function(Ai){(Ae[Ai.rk]=Ae[Ai.rk]||[]).push(Ai.k);if(Ai.rk){Ag[Ai.rk]=(Ag[Ai.rk]||0);}Ag[Ai.k]=(Ag[Ai.k]||0)+1;});Object.keys(Ag).forEach(function(Ai){if(Ai&&!Ag[Ai]){var Aj=this.getBoxTreeRoots(Ad,Ai);Aj.k=Ai;Aj.children=[];Af.push(Aj);}},this);this.buildHelper(Af,Ae,Ah);},buildHelper:function AZ(Ad,Ae,Af){Ad.forEach(function(Ag){(Ae[Ag.k]||[]).forEach(function(Ah){var Ai=N.copy(Af[L.find(Af,"k",Ah)]);Ai.children=[];Ag.children.push(Ai);});this.buildHelper(Ag.children,Ae,Af);},this);},getBoxTreeRoots:function AH(Ad,Ae){var Ag;if(Ae===Ad.k){var Ah=Ad.getCanvasWidthAndHeight();Ag={left:0,top:0,width:Ah.width,height:Ah.height};}else{var Af=Ad.getUnitByKey(Ae).domNode.style;Ag=["left","top","width","height"].reduce(function(Aj,Ak,Ai){Aj[Ak]=Ai&2?parseFloat(Af[Ak])-(Ad.panelPadding*2||0):Af[Ak];return Aj;},{});}return Ag;},newObjInBoxTree:function c(Af){var Ae=Af.domNode.style,Ad=this.boxTree;return Ad[Ad.push({left:Ae.left,top:Ae.top,width:parseFloat(Ae.width),height:parseFloat(Ae.height),k:Af.k,children:[]})-1];},findTargetNodeInBoxTree:function o(Ag,Ad){var Af;for(var Ae=0;Ae<Ad.length;++Ae){if(Ad[Ae].k===Ag.k){return Ad[Ae];}Af=this.findTargetNodeInBoxTree(Ag,Ad[Ae].children);if(Af){return Af;}}},findTargetParentInBoxTree:function AP(Ag,Ad){var Af;for(var Ae=0;Ae<Ad.length;++Ae){if(Ad[Ae].children.length&&Ad[Ae].children.find(function(Ah){return Ah.k===Ag.k;})){return Ad[Ae];}Af=this.findTargetParentInBoxTree(Ag,Ad[Ae].children);if(Af){return Af;}}},moveBoxToRelative:function e(Ag,Ad){var Af=this.boxTree,Ae=this.findTargetParentInBoxTree(Ag,Af),Ah=Ae.children.splice(L.find(Ae.children,"k",Ag.k),1)[0];(this.findTargetNodeInBoxTree(Ad,Af)||this.newObjInBoxTree(Ad)).children.push(Ah);this.updateAttrInFloatChildren(Ag,Ad,Ah);},updateAttrInFloatChildren:function k(Ah,Ae,Aj){if(this.findFloatKey(Ah)){var Ai=this.box.floatChildren,Ad=Ai[L.find(Ai,"k",Ah.k)],Af=Ae.domNode.style,Ag=Ah.domNode.style;[Ad,Aj].forEach(function(Ak){N.copy(["left","top","width","height"].reduce(function(An,Ap,Am){var Ao=parseFloat(Ag[Ap]),Al=parseFloat(Af[Ap])||0;An[Ap]=Am&2?Ao/Al*100+"|"+Ao:(Ao-Al)/(Am?parseFloat(Af.height):parseFloat(Af.width))*100+"|"+(Ao-Al)+"px";return An;},{}),Ak);});Ad.rk=Ae.k;}},addFloat:function AU(Af,Ad){var Ae=this.box.floatChildren;Ae.children.push(this.getDefaultFloatLayout(Af,Ad,Ae));},addIfwLayoutNode:function U(Ad){this.box.ifwChildren=this.box.ifwChildren||[];this.box.ifwChildren.push(this.getDefaultIfwLayout(Ad));},updateFloatLayout:function K(Af,Ae){var Ad=mstrmojo.all[this.hostId];Ad.updateChildNode(Ae,{newLayout:Af});Ae.notifyGroup();},updateIfwLayout:function Aa(Af,Ae){var Ad=mstrmojo.all[this.hostId];Ad.updateIfwNode(Ae,{newLayout:Af});},addNewChild:function AL(Af,Ae,Ah,Ag){var Ad=AG(Ae,Ag);Ad.t=AV;Ad[this.identifier]=Ah;Af.children.push(Ad);},getBoxState:function E(){return JSON.parse(JSON.stringify(this.box));},getResizeBoundaries:function AN(Ah,Af){var Ae={min:0,max:0},Ad=function(Aj,Ai){if(!Ai){return ;}Ai.getPreviousSiblings().forEach(function(Ak){Ae.min+=Ak.getMinimumBoxSize(Af,true);});Ai.getNextSiblings().forEach(function(Ak){Ae.max+=Ak.getMinimumBoxSize(Af,true);});Aj.pop();Aj.pop();Ad(Aj,W.call(this,Aj.join(w)));}.bind(this);var Ag=W.call(this,Ah);Ae.min+=Ag.getMinimumBoxSize(Af,true)-this.padding;Ad(Ah.split(w),Ag);return Ae;},resizeBox:function i(Ai,Aj){var Ad=0,Ak=1,Ag=2,Ae=function(An,Av,At,Ar){var Ap=Math.abs(At),Ao,As,Aq;Aq=At=-Ap;Ao=An.map(function(Aw){return Aw.box.l;}).reduce(Ab,0);if(Ao===0){Ao=100;}An.forEach(function(Az){var Ay=Az.box,A0=Az.getBoxLength(),Aw=0;if(At){As=!Ay.f?(Aq*Ay.l/Ao):Aq/An.length;var Ax=Math.max(A0+As,Az.getMinimumBoxSize(Az.parent.o,false));Aw=A0-Ax;At+=Aw;A0=Ax;}Ar.push({idx:Az.idx,l:A0,f:Az.box.f,d:-Aw});});var Au={};Ao=Av.map(function(Aw){return Aw.box.l;}).reduce(Ab,0);if(Ao===0){Ao=100;}Av.forEach(function(Ay,Aw){var Ax=Ay.getMinimumBoxSize(),Az=Ay.getBoxLength();if(Az<Ax&&Ap>0){Au[Aw]=Math.min(Ax-Az,Ap);Ap-=Au[Aw];}});Av.forEach(function(Az,Ax){var Ay=Az.box,Aw=0,A0=Az.getBoxLength();if(Au[Ax]){A0+=Au[Ax];}As=!Ay.f?(Ap*Ay.l/Ao):Ap/Av.length;Aw=As;A0+=Aw;Ar.push({idx:Az.idx,l:A0,f:Az.box.f,d:Aw});});return At;},Ah=function(An,As,Aq,Ar){var Ao=Math.abs(Aq);Aq=-Ao;An.forEach(function(Av){var Aw=Av.getBoxLength(),At=0;if(Aq){var Au=Av.getMinimumBoxSize(Av.parent.o,false);if(Aw+Aq>=Au){Aw+=Aq;At=Math.abs(Aq);Aq=0;}else{At=Aw-Au;Aq+=At;Aw=Au;}}Ar.push({idx:Av.idx,l:Aw,f:Av.box.f,d:-At});});var Ap={};As.forEach(function(Av,At){var Au=Av.getMinimumBoxSize(),Aw=Av.getBoxLength();if(Aw<Au&&Ao>0){Ap[At]=Math.min(Au-Aw,Ao);Ao-=Ap[At];}});As.forEach(function(Av,Au){var Aw=Av.getBoxLength(),At=0;if(Au===0){At=Ao;Aw+=Ao;}Ar.push({idx:Av.idx,l:Aw,f:Av.box.f,d:At});});return Aq;},Af=function(Ap,Ao,Aq,An){var As=W.call(this,Ap),At=As.getPreviousSiblings().concat(As),Ar=At,Au=As.getNextSiblings();At.reverse();if(Ao>=0){Ar=Au;Au=At;}return An?Ah(Ar,Au,Ao,Aq):Ae(Ar,Au,Ao,Aq);},Al=function(Ao,An){return function(Ar,Aq,As,Ap){var Au=W.call(this,Ar),Av=Au.getSiblings(),At=Av,Aw=[];if(Ao){Av.reverse();}if(An){At=[];Aw=Av;}return Ap?Ah(At,Aw,Aq,As):Ae(At,Aw,Aq,As);};},Am=function(A0,A2,A1,Ap,A3){var A5=W.call(this,A0);if(!A5){return ;}var At=A5.idx,As=A5.getSiblings(),Ar=[],Au=A1.call(this,A0,A2,Ar,A3),Aw=0,A4=0,An=0,Av=false,Ax=this.padding,A6=Ar.length-1,Aq=this.percentageExcludesSpacing;var Ao=Ar.filter(function(A7){return !A7.f;}).map(function(A7){if(!Aq){A7.l+=A7.idx===A6?0:Ax;}return A7;}),Az=Ao.map(function(A7){return A7.l;}).reduce(Ab,0);Ao.forEach(function(A7){A7.l=(A7.l/Az)*100;Aw=A7.d;A4=Aw?(Aw<0?-1:1):0;if(!Av&&!An){Av=true;An=A4;}if(An!==A4){Av=false;}});Ar.forEach(function(A9){var BB=A9.idx,A8=As[BB],A7=A9.d;if(A7!==0&&(Ap!==Ag||BB!==At)){var BA=Al(BB<At,A7>0);A8.getChildren().forEach(function(BC){if(BC.box.t===A){Am(BC.path+w+"0",A7,BA,Ak,false);}});}if(A3||!Av||A9.f){A8.box.l=A9.l;}});if(Ap!==Ak&&Au){var Ay=A0.split(w);Ay.pop();Ay.pop();if(Ay.length){Am(Ay.join(w),A2<0?Au:-Au,Af,Ag,true);}}}.bind(this);Am(Ai,Aj,Af,Ad,true);},insertNewRootChild:function AT(Ah,Ag,Aj,Ad){var Ae=Ah.getBoxConfiguration();if(!this.box.children.length){delete Ae.f;}var Af=Ae.o,Ai=Ae.addToEnd;if(Ag){if(Ag.charAt(0)==="p"){Ag=Ag.slice(1);}Af=Ag==="Left"||Ag==="Right"?"h":"v";Ai=Ag==="Right"||Ag==="Bottom";}if(this.isSelectorPanel()||this.isFormPanel()){Ai=false;}if(N.walk("defn.ifw",Ah)){this.addIfwLayoutNode(Ah);}else{if(Aj){this.addFloat(Ah,Ad);}else{H.call(this,Ah,(Ae.f&&Ae.f[Af])||0,Af,Ai);}}},isSelectorPanel:function Z(){return this.hostId&&mstrmojo.all[this.hostId]&&mstrmojo.all[this.hostId].parent&&mstrmojo.all[this.hostId].parent.isSelectorPanel;},isFormPanel:function AA(){return this.hostId&&mstrmojo.all[this.hostId]&&mstrmojo.all[this.hostId].parent&&mstrmojo.all[this.hostId].parent.isFormPanel;},insertExistingRootChild:function AE(Ah,Ai){var Ae=Ah.src.widget,Ag=Ah.box.oldPathInfo,Ad=Ae.getBoxConfiguration(),Af=Ai==="Left"||Ai==="Right"?"h":"v",Aj=(Ad.f&&Ad.f[Af])||0;if(Aj&&Ag.parent.o===Af){Aj=Ag.box.l;}H.call(this,Ae,Aj,Af,Ai==="Right"||Ai==="Bottom");Ah.dropSuccessful=true;AO.call(this);},getBoxOrientation:function p(Ae){var Ad=W.call(this,Ae);return Ad&&Ad.parent&&Ad.parent.o;},updateBoxPaths:function x(){var Ae=[],Af=this,Ag=this.boxPaths={};var Ad=function(Ah,Ai){if(Ae.length===Ai){Ae[Ai]=-1;}Ah.children.forEach(function(Aj){var Al=Aj.t;Ae[Ai]=Ae[Ai]+1;var Ak=Al===g?null:Ae.join("|");if(Al===AV||Al===g){Ag[Aj[Af.identifier]]=Ak;}else{if(Al===A){Ad.call(this,Aj,Ai+1);Ae.splice(Ai+1);}}},this);};Ad.call(this,Af.box,0);},getBoxPath:function y(Ad){return this.boxPaths[Ad[this.identifier]];},getSizeForOrientation:function S(Af,Ae){var Ad=mstrmojo.all[Af].getBoxConfiguration().f;return Ad&&Ad[Ae];},shouldAllChildrenBeFixed:function l(Ah){var Ag=mstrmojo.all[this.hostId],Af=Ag.children,Ae={},Ad=function(Ai){return !Ai.children.some(function(Ak){if(Ak.t===AV){var Aj=mstrmojo.all[Ak.id]||mstrmojo.all[Ae[Ak.k]];return !Aj.getBoxConfiguration().f;}return !Ad(Ak);});};L.forEach(Af,function(Ai){Ae[Ai.k]=Ai.id;});return Ad(Ah);},deleteBox:function AB(Ad,Aw,Ay){var Av=W.call(this,this.getBoxPath(Ad));if(!Av){return ;}if(!Ay){var Ar=this.boxTree,Ai=this.findTargetNodeInBoxTree(Ad,Ar);if(Ai){var Am=Ad.parent;Ai.children.forEach(function(A3){var A2=Am.getUnitByKey(A3.k);this.moveBoxToRelative(A2,Am);},this);var Af=this.findTargetParentInBoxTree(Ad,Ar);if(Af){Af.children.splice(L.find(Af.children,"k",Ad.k),1);}}}var Aq=Av.box,Az=Av.idx,Ag=Av.parent,Ak=Av.parentPath,Ao=W.call(this,Ak),Al=Av.siblings;Al.splice(Az,1);if(Al.length>1){if(b(Al)){a.call(this,Ag,Ak);}else{if(!Aq.f){M(Al,Aq.l);}}}else{var A0=Al[0],Aj=A0&&(A0.t===A),A1=A0&&A0.f;if(Ao){var An=Ao.parent,Au=this.shouldAllChildrenBeFixed(An),Ap=[];if(Aj){Ap=A0.children;if(Au){R.call(this,An,n(An.parentPath).parentPath);}if(A1){var As=A0.ps,Ax;Ap.forEach(function(A2){A2.f=true;if(As){Ax=Math.round((A2.l/100)*As);}else{Ax=A2[A0.o==="v"?"h":"w"];}A2.l=Ax;});}else{I(Ap).forEach(function(A2){A2.l=Math.round((A2.l/100)*Ag.l);});}}else{Ap.push(A0);var Ae=this.getSizeForOrientation(A0.id,An.o);if(!Au&&Ae){A1=A0.f=true;}if(A1){A0.l=Ae;}else{A0.l=Ag.l;}}var At=An.children;At.splice.apply(At,[Ao.idx,1].concat(Ap));}else{var Ah=this.box;if(Aj){Ah.children=A0.children;Ah.o=A0.o;if(A1){a.call(this,Ah);}}else{if(A0){delete A0.f;A0.l=100;}}}}AX.call(this,"delete");if(!Aw){AO.call(this,true);}else{this.updateBoxPaths();}},findFloatKey:function AY(Af){var Ae=Af.k||Af,Ad=mstrmojo.all[this.hostId];return Ad.getFloatGroupTree&&Ad.getFloatGroupTree()&&Ad.getFloatGroupTreeNode(Ae).node!==undefined;},findIfwKey:function AC(Ag){var Ae=Ag.k||Ag,Ad=mstrmojo.all[this.hostId],Af=N.walk("boxLayoutConfig.box.ifwChildren",Ad)||[];if(!Af.length){return false;}return L.find(Af,"k",Ae)!==-1;},refreshToolbar:function AK(Ae){var Ad=Ae.parent,Af=Ad.groupTreeLayoutConfig.getLeafNodeArray(true);Af.forEach(function(Ag){Ad.getUnitByKey(Ag.k).generateToolbar();});},beginBoxMove:function J(Ad,Ag,Aj){this.isMoving=true;var Ak=this.findFloatKey(Ag),Af=this.findIfwKey(Ag);if(Ak||Af){Ag.parent.turnMask();mstrmojo.func.safeCall("updateParentRect",Ag.parent)();var Al=Ag.parent.parentRect||Ag.domNode.parentNode.getBoundingClientRect(),Ae=mstrmojo.func.safeCall("getScale",Ag.parent)()||1;Ad.box={initState:this.getBoxState(),boxId:Ag.id,startX:Ad.last.x,startY:Ad.last.y,originX:parseFloat(Ag.domNode.style.left)*Ae,originY:parseFloat(Ag.domNode.style.top)*Ae,minX:Al.left,maxX:Al.right,minY:Al.top,maxY:Al.bottom,parentRect:Al};if(Ak){Ag.preBoxOp();Ad.highLight=Ag.createGuidesDiv(Ad.box.parentRect);Ag.toggleGuidesDiv(Ad.highLight,true);Ad.delay=1;Ad.floatIndex=Ag.domNode.style.zIndex;}}else{var Ai=W.call(this,this.getBoxPath(Ag)),Ah;if(Ai){Ah=Ai.box;}j.call(this,false);Ad.box={initState:this.getBoxState(),oldPathInfo:Ai,boxId:Ag.id,parentPath:Ai.parentPath,length:Ah.l,orientation:Ai.parent.o};if(!Aj){this.deleteBox(Ag,null,true);}}},addDropBox:function AS(An,Am,Aj){this.isMoving=false;var Al=(Am==="Right"||Am==="Bottom"),Ap=(Am==="Top"||Am==="Bottom")?D:Y,A3=this.identifier,Ai=W.call(this,this.getBoxPath(An)),Aq=Ai.idx,At=Ai.parent,Aw=Ai.siblings,Az=Ai.parentPath,A0=this.shouldAllChildrenBeFixed(At),As=At.f,Af=Aj.box,Ag=Af.boxId,A1=mstrmojo.all[Ag],Av=A1.getBoxConfiguration(),A2=Av.f&&Av.f[Ap],Ah=A1.getMinBoxSize(Ap),Au=this.getSizeForOrientation(An.id,Ap),Ax=An.getMinBoxSize(Ap),Ad=Af.length,Ae={t:AV,f:!!A2,l:A2,id:Ag,r:!!Av.r};Ae[A3]=A1[A3];if(A2&&Af.orientation===Ap){A2=Ad;}if(!A2&&A0){R.call(this,At,n(Az).parentPath);As=false;}if(Ap===At.o){if(A2){if(A0){delete Ae.f;A2=undefined;}}if(Az!==Af.parentPath){Ad=undefined;}Ae.l=A2||s(Aw,Ad);Aw.splice(Al?Aq+1:Aq,0,Ae);}else{if(At===this.box&&Aw.length===1){Ac.call(this,Ap,Ae,u(Al),A2);}else{var Ay=Ai.box,Ao=Ay.f;var Ar={l:Ay.l,f:Ao,o:Ap,t:A};var Ak=Ar.children=[Ae,Ay];Aw.splice(Aq,1);if(Al){Ak.reverse();}if(As){if(A2){if(Au){At.l=Math.max(At.l,A2+Au);Ae.l=Ay.l=50;delete Ae.f;delete Ay.f;}else{At.l=Math.max(At.l,A2+Ax);Ae.l=A2;Ay.l=100;}}else{if(Au){Ae.l=100;Ay.l=Au;At.l=Math.max(At.l,Ah+Au);}else{At.l=Math.max(At.l,Ah+Ax);Ae.l=Ay.l=50;}}}else{if(A2&&Ao){Ar.h=Ay.h;Ar.w=Ay.w;Ae.l=A2;Ay.l=Au;a.call(this,Ar,Az);}else{if(A2){Ae.l=A2;Ay.l=100;}else{if(Au){Ay.l=Au;Ae.l=100;if(!Ar.f){Ar.l=s(Aw,null);}}else{Ay.f=false;Ay.l=100;Ae.l=s([Ay]);}}}}Aw.splice(Aq,0,Ar);}}A1.postDropBox();AX.call(this,"drop");j.call(this,true);AO.call(this);Aj.dropSuccessful=true;},cancelBoxMove:function m(Ae){this.isMoving=false;var Ad,Ai=mstrmojo.all[this.hostId],Ah=Ai.groupTreeLayoutConfig,Af=N.walk("boxLayoutConfig.box.ifwChildren",Ai)||[];if(Ah&&Ah.getFloatGroupTree()){Ad=Ah.getLeafNodeArray();}if(L.find(Ad,this.identifier,(Ae.src.widget||[]).k)!==-1){Ae.src.widget.parent.turnMask();if(Ae.highLight){var Ag=Ae.src.widget;Ag.toggleGuidesDiv(Ae.highLight,false);delete Ae.highLight;Ag.parent.snapGuide.boxIntervalOperations(Ag,"insert");}}if(L.find(Af,this.identifier,(Ae.src.widget||[]).k)!==-1){Ae.src.widget.parent.turnMask();}j.call(this,true);this.revertBoxState(Ae.box.initState);},revertBoxState:function G(Ad){N.clear(this.box);N.copy(Ad,this.box);AO.call(this);},getBoxChildClass:function z(Ad){var Af=Ad.id,Ae=Af&&mstrmojo.all[Af];if(Ae){return Ae.scriptClass;}return"";},replaceLayoutXmlKeys:function P(Ah,Ag){var Af=false,Ae=mstrmojo.all[this.hostId];var Ad=function(Ap){if(!Ap){return ;}var Am=Ap.floatChildren,At=Ap.ifwChildren,Ai;if(Am){if(Am.length!==undefined){Ai=Am.length?Am:Ap.children;}else{Ai=Ae.groupTreeLayoutConfig.getLeafNodeArray(true);}}else{Ai=Ap.children;}if(At&&At.length){Ai=Ai.concat(At);}var Al=Ai&&Ai.length,Ak;for(Ak=0;Al&&Ak<Al;Ak++){var An=Ai[Ak];switch(An.t){case A:Ad(An);break;case g:case AV:var As=An.k,Aq=Ah[As]||Ah["default"],Ar=mstrApp?mstrApp.primaryScdpMap:null,Aj=(Ar&&Ar[Aq])||[];var Ao=L.indexOf(Aj,As)!==-1;if(Aq&&!Ao){An.k=Aq;Af=true;}break;}}};Ad(this.box);Ad(Ag);return Af;}});mstrmojo.vi.ui.BoxLayoutConfig.getMinimumChildSizes=function(Af,Ai,Aj){var Ae=Aj.getBoxChildClass(Af);if(!Ae){var Ag=mstrmojo.util.PlatformHelper.isLibraryConsumption();var Ah=Af.k==="ReportEditorPageByKey";if(Ag&&Ah){return{};}throw"BoxLayoutConfig::getMinimumChildSizes - unable to obtain script class for box.";}var Ad=mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums(Ae);if(Af.f){Ad[Ai]=Af.l;}return Ad;};mstrmojo.vi.ui.BoxLayoutConfig.BoxInfoType=null;mstrmojo.vi.ui.BoxLayoutConfig.BoxAddContextType=null;mstrmojo.vi.ui.BoxLayoutConfig.EnumBoxType={BOX_TYPE_BOX:A,BOX_TYPE_CHILD:AV,BOX_TYPE_FLOAT_CHILD:g,BOX_TYPE_GROUP:AD};mstrmojo.vi.ui.BoxLayoutConfig.EnumModeHidden=F;mstrmojo.vi.ui.BoxLayoutConfig.__UNIT_TEST__={applyLayoutToNode:AI};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.vi.enums.EnumFeatures");var K=mstrmojo.array,E=mstrmojo.hash,A=mstrmojo.func,C=mstrmojo.mstr.EnumDSSXMLBaseFormType;var I={SANITIZE_NAMED_PROPS:true,RETURN_DOM_FRAGMENT:true,ADD_ATTR:["target"]};var H={SANITIZE_NAMED_PROPS:true,ADD_ATTR:["target"]};function L(){var N=window.DOMPurify;if(N&&N.addHook&&!N.mstrCustomHookAdded){N.mstrCustomHookAdded=true;N.addHook("afterSanitizeAttributes",function(O){if(O.getAttribute("target")==="_blank"){O.setAttribute("rel","noopener noreferrer");}});}}function F(N){var O="^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|",P=N.join("|");O+=P;return new RegExp(O+"):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))","i");}mstrmojo.HTMLSanitizeUtil=mstrmojo.provide("mstrmojo.HTMLSanitizeUtil",{whitelistConfig:null,getHtmlWhitelistConfig:function J(){var N=E.walk("rootCtrl.docCtrl.model",mstrApp)||E.walk("docModel",mstrApp),S=N&&N.htmlWhitelist,O=[],R=[],Q=[],P={};if(this.whitelistConfig){return this.whitelistConfig;}if(!S){return null;}S.split(";").forEach(function(U){var W=U.split(":");switch(W[0]){case"tag":R.push(W[1]);break;case"attr":Q.push(W[1]);break;case"uri":O.push(W[1]);break;default:break;}});if(O.length>0){P.ALLOWED_URI_REGEXP=F(O);}if(R.length>0){P.ADD_TAGS=R;}if(Q.length>0){P.ADD_ATTR=Q;}this.whitelistConfig=P;return P;},shouldEncodeHtmlContent:function G(){var N=E.walk("rootCtrl.docCtrl.model",mstrApp)||E.walk("docModel",mstrApp);return A.safeCall("shouldEncodeHtmlContent",N)();},sanitizeHTMLByDOMPurify:function B(R,O,N){var S=window.DOMPurify,Q=O?H:I,P=this.getHtmlWhitelistConfig();if(S){try{L();if(N){Q=E.mergeHashes(Q,N);}if(P){Q=E.mergeHashes(Q,P);}return S.sanitize(R,Q);}catch(U){}}return R;},shouldShowHTML:function M(P){var Q=this.shouldEncodeHtmlContent(),N,O;if(!Q&&P){N=K.ensureArray(P.formTypes);O=K.includes(N,C.DssXmlBaseFormHTMLTag);return O||(P.mft===1);}return false;},sanitizeUnitText:function D(O,N){if(typeof O==="string"&&O.length>0&&this.shouldShowHTML(N)){return this.sanitizeHTMLByDOMPurify(O);}return O;}});mstrmojo.HTMLSanitizeUtil.addDOMPurifyCustomHook=L;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash","mstrmojo.string","mstrmojo.dom");mstrmojo.XhrCallbackType=null;function M(e){var c=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(e&&e.indexOf("=?UTF-8?B?")===0){var d="",b;while((b=c.exec(e))!==null){d+=mstrmojo.base64.decode(b[1]);}return d;}return e;}function J(e){var b=-1,c=[],d;if(e){for(d in e){c[++b]=d+"="+encodeURIComponent(e[d]);}}return c.join("&");}function R(d,b,c){if(d!=="GET"||!c){return b;}return b+"?"+J(c);}function U(d,c){var b=c.xhrHeaders;if(b){if(c.requiresAppendProjectId&&c.projectId){c.xhrHeaders["X-MSTR-ProjectID"]=c.projectId;}for(var e in b){d.setRequestHeader(e,b[e]);}delete c.xhrHeaders;}}function W(h,i,e,g){i=i.toUpperCase();var f=mstrApp,b=window.microstrategy;if(this.isTask){g=mstrmojo.addCSRFTokenToTaskParams(g);g.taskContentType=g.taskContentType||"json";g.taskEnv=g.taskEnv||"xhr";g.xts=new Date().getTime();g[mstrApp.name]=mstrApp.servletState||mstrConfig.servletState||"";e=e||mstrConfig.taskURL;}var d=g.hasUserDefinedMimeType;delete g.hasUserDefinedMimeType;var c=f.persistTaskParams||(b&&b.persistParams);if(c){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(c,g);}h.open(i,R(i,e,g),this.async);if(d){h.overrideMimeType("text/plain; charset=x-user-defined");}U(h,g);if(i!=="POST"){h.send(null);}else{h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(J(g));}if(this.async===false){h.onreadystatechange();}}function B(){var b=[function(){var e=new XMLHttpRequest();var h=e.open;e.open=function(){h.apply(e,arguments);};return e;},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],d=b.length,c;for(c=0;c<d;c++){var g;try{g=b[c]();}catch(f){continue;}B=b[c];return g;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function F(c){var b=document.createElement("script");b.textContent=c;document.head.append(b);document.head.removeChild(b);}function A(b){if(b===""){return"";}var d=null;try{d=JSON.parse(b);}catch(c){try{F("mstrmojo.xhr.tmpRes = ("+b+")");if(mstrmojo.xhr.tmpRes!==undefined){d=mstrmojo.xhr.tmpRes;mstrmojo.xhr.tmpRes=undefined;}else{d=b&&mstrmojo.string.trim(b);}}catch(c){d=b&&mstrmojo.string.trim(b);}}return d;}var X=2147760371,O=2147760372,N=2147758245,G=2147759877,K=4098;function Z(b){if(b.status===401){return true;}var d=b&&b.getResponseHeader("X-MSTR-TaskErrorCode");d=(d<0)?(4294967296+parseInt(d,10)):d;switch(d){case X:case O:case N:case G:return true;}return false;}function H(b){var d=(b&&b.getResponseHeader("X-MSTR-TaskErrorCode"))||"0";d=parseInt(d,10);if(d===K){return true;}return false;}function a(b){return !mstrmojo.dom.isSafari&&!!(b&&b.upload&&b.upload.onprogress);}function E(b){if(typeof b==="string"){return b.length;}return 0;}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function Q(b){mstrmojo.hash.copy(b,this);},onreadystatechange:function I(l,k,n){var m;if(l.readyState!==4){return ;}if(typeof k!=="object"){return ;}try{if((l.status===200)||(l.status===304)){this.response=k.textResponse?l.responseText:A(l.responseText);try{m=Number(l.getResponseHeader("Content-Length"));}catch(f){m=0;}if(this.response&&typeof this.response==="object"){this.response._responseLength=m||E(l.responseText)*2;}if(typeof k.success==="function"){k.success(this.response,l);}}else{if(l.status!==0||(!l.isAborted&&n.params.displayNoResErr)){var d=mstrApp,j=d&&d.onSessionExpired;if(H(l)&&mstrConfig&&mstrConfig.validateRandNum){var b=window.location.href;var h=b.indexOf("?");if(h>0){b=b.substring(0,h);}b+="?pg=CSRFConfirmation";window.location.href=b;}if(j&&Z(l)){j.call(d,n);}else{var i=l.getResponseHeader;l.getResponseHeader=function(e){return M(i.apply?i.apply(l,[e]):i(e));};if(typeof k.failure==="function"){k.failure(l);}}}}}catch(g){mstrmojo.err(g);throw g;}finally{if(typeof k.complete==="function"){k.complete();}if(!Z(l)&&!n.params.notRestartSessionManager){var c=mstrApp.sessionManager;if(c&&c.restart){c.restart();}}}},cancel:function(){var b=false;var c=this.xhr;if(c){delete c.onreadystatechange;c.isAborted=true;if(c.readyState<4){c.abort();b=true;}this.xhr=null;}return b;},request:function D(i,e,h,g,b,c,d){if(b){if(c===true){if(!g){g={};}g.srcURL=R("POST",b,d);this.request(i,e,h,g);}else{mstrmojo.jsonp.request(b,g,h);}}else{var f=B();f.onreadystatechange=(function(k,j,m,l){return function(){k.onreadystatechange(j,m,l);};}(this,f,h,{method:i,baseUrl:e,callback:h,params:g}));if(a(f)&&h.progress){f.onprogress=(function(k,j,l){return function(m){l.progress.call(k,m);};}(this,f,h));}this.xhr=f;W.call(this,f,i,e,g);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestCount:0,retryDelay:1,lookup:null,cancel:function C(){var d=this._super();while(this.queue.length){var c=this.queue.pop();var b=c.callback;if(b&&b.complete){b.complete();}}this.queue=[];this.requestCount--;return d;},init:function Q(){this.queue=[];this.lookup=[];},request:function D(b,j,l,i,e,d,g,f,c){if(d){if(g===true){if(!i){i={};}i.srcURL=R("POST",d,f);this.request(b,j,l,i);}else{mstrmojo.jsonp.request(d,i,l);}}else{if(this.requestCount>0&&!e){this.queue.push({method:b,baseUrl:j,callback:l,params:i});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var h=null,n=null;if(c){h=this._searchForCacheRequest(i);n=mstrmojo.hash.copy(i);}if(h){try{if(l.success){window.setTimeout(function(){l.success(h.res);},10);}}catch(k){mstrmojo.err(k);throw k;}finally{if(l.complete){l.complete();}this.advanceQueue();}}else{var m=this.xhr=B();l=mstrmojo.func.wrapMethods(l,{complete:(function(o){return function(){o.advanceQueue();};}(this)),success:(function(o){return function(){if(c){o.lookup.push({params:n,res:o.response});}};}(this))});m.onreadystatechange=(function(p,o,s,q){return function(){p.onreadystatechange(o,s,q);};}(this,m,l,{method:b,baseUrl:j,callback:l,params:i}));if(a(m)&&l.progress){m.onprogress=(function(p,o,q){return function(s){q.progress.call(p,s);};}(this,m,l));}W.call(this,m,b,j,i);}}}},upload:function S(d,b,f,q,u,t,j,w,m){if(this.isTask){q=mstrmojo.addCSRFTokenToTaskParams(q);}if(this.requestCount>0&&!j){this.queue.push({method:d,baseUrl:b,callback:f,params:q,data:u,config:t});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var h=null,p=null;if(m){h=this._searchForCacheRequest(q);p=mstrmojo.hash.copy(q);}if(h){try{if(f.success){window.setTimeout(function(){f.success(h.res);},10);}}catch(o){mstrmojo.err(o);throw o;}finally{if(f.complete){f.complete();}this.advanceQueue();}}else{var i=this.xhr=B();var k=this;f=mstrmojo.func.wrapMethods(f,{complete:(function(y){return function(){y.advanceQueue.call(y);};}(this)),success:(function(y){return function(){if(m){y.lookup.push({params:p,res:y.response});}};}(this))});var l=function(y){f.progress(y,t);};var e=b;var g=!!(t&&t.async);i.open("POST",e,g);var c=typeof (mstrConfig)!==undefined&&mstrConfig.requestHeaders;if(c){for(var x in c){i.setRequestHeader(x,c[x]);}}U(i,q);if(t&&t.authToken){i.setRequestHeader("X-MSTR-AuthToken",t.authToken);if("projectId" in q){i.setRequestHeader("X-MSTR-ProjectId",q.projectId);}}var n=new FormData();var s;for(s in q){n.append(s,q[s]);}if(u){if(q.fileName){n.append(q.fileFieldName?q.fileFieldName:"myFile",u,q.fileName);}else{n.append(q.fileFieldName?q.fileFieldName:"myFile",u);}}if(a(i)&&f.progress){i.upload.onprogress=l;}i.onreadystatechange=(function(z,y,AB,AA){return function(){z.onreadystatechange(y,AB,AA);};}(k,i,f,{method:d,baseUrl:b,callback:f,params:q}));i.send(n);}}},advanceQueue:function P(){this.requestCount--;if(this.queue.length===0){this.requestCount=0;return ;}var b=this.queue.shift();if(b.params.taskId==="importFile"||b.params.taskId==="arch.sparkFileUpload"){this.upload(b.method,b.baseUrl,b.callback,b.params,b.data,b.config);}else{this.request(b.method,b.baseUrl,b.callback,b.params,true);}},_searchForCacheRequest:function Y(c){var b;for(b in this.lookup){if(mstrmojo.hash.equals(c,this.lookup[b].params)){return this.lookup[b];}}return null;},hasRequests:function L(){return this.requestCount>0||mstrmojo.jsonp.hasRequests();}});mstrmojo.xhr={};mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,requestCount:0,request:function(c,f,g){var d=document.getElementsByTagName("head")[0]||document.documentElement,e="jsonp"+(this.jsc++),b=document.createElement("script");f.jsonp=e+"(@R@);";f.taskContentType="jsonp";f.taskEnv="jsonp";f.xts=new Date().getTime();window[e]=function(h){mstrmojo.jsonp.requestCount--;if(!h){if(g.timeout){g.timeout();}}else{if(h.status===200){g.success(h.content);}else{var i={status:h.status,getResponseHeader:function(k){switch(k){case"X-MSTR-TaskFailureMsg":return h.errorMsg;case"X-MSTR-TaskErrorCode":return h.errorCode;}}};if(mstrApp.onSessionExpired&&Z(i)){if(g.onSessionExpired){g.onSessionExpired();}else{mstrApp.onSessionExpired();}}else{g.failure(i);}}}if(window[e]){if(g.complete){g.complete();}window[e]=undefined;try{delete window[e];}catch(j){}d.removeChild(b);}};d.insertBefore(b,d.firstChild);this.requestCount++;b.src=R("GET",c,f);setTimeout(function(){var h=window[e];if(h){h();}},this.timeToWait);},hasRequests:function(){return this.requestCount>0;}};mstrmojo.xhr.createXHR=B;}());(function(){mstrmojo.requiresCls("mstrmojo.array");mstrmojo.requiresCls("mstrmojo.func");var G=mstrmojo.array;var A=mstrmojo.func;mstrmojo._HasBuilder={builder:null,postBuildRendering:function B(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function H(){return this.model.getChildren(this.node,false);},getBuiltChildrenWidget:function F(){return this.builder.build(this.getChildren(),this.model,this.getBuildConfig());},buildChildren:function C(J){if(!this.builder||!this.model){return false;}var L=this.children;if(L&&L.length){this.set("children",[]);}var K=this.getBuiltChildrenWidget();if(!J){this.addChildren(K);}this.builtChildren=true;return J?K:true;},getBuildConfig:function D(){var K=this._super&&this._super();var J=this.buildConfig=(this.buildConfig||K||{});J.pk=this.k;J.fgk=this.defn&&this.defn.fgk;return J;},rebuildChildren:function E(L){var S=this.children.slice(0),N=this.model,M=[],K,J=this,O=mstrApp.restoreVFKey,P,R;L=L||S.slice(0);L.forEach(function(X){var U=G.indexOf(S,X),W=X.k;if(U===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(X);X.destroy();M.push(W);},this);if(mstrApp.isInVFConfigMode&&(mstrApp.showBandingInVFConfigMode||mstrApp.showOutlineInVFConfigMode)&&!!L&&L.length===1&&!!L[0]&&L[0].k===O){delete mstrApp.showBandingInVFConfigMode;delete mstrApp.showOutlineInVFConfigMode;P=N.insertVizBox(O,J,{});N.selectVIUnit(P.id,true,{});K=[P];}else{R=N.getChildrenByKey(this.node,false,M);G.forEach(R,function(W){var U=A.safeCall("controller.hasPredefinedNLGObjects",N)(W);if(U){W.defn.isPredefinedNLGInfoWindow=true;}});if(R.length<M.length&&this.defn&&this.defn.isFilterPanel){R=R.concat(N.getScopeFilters(this.node,M));}K=this.builder.build(R,N,this.getBuildConfig());var Q={};G.forEach(L,function(U){Q[U.k]=U.isNewUnitContainer;});G.forEach(K,function(U){U.isNewUnitContainer=Q[U.k];});this.addChildren(K);}return K;},rebuildChild:function I(J){return this.rebuildChildren([J])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.util.PlatformHelper");function J(R){return mstrmojo.func.safeCall("ReactComponents.ReactComponentUtils.detectFontAvailabilityInIframe",window)(R);}var Q=[{unLicensed:"Arial",replacement:"Open Sans"},{unLicensed:"Arial Black",replacement:"Archivo Black"},{unLicensed:"Arial Narrow",replacement:"Roboto Condensed"},{unLicensed:"Arial Unicode MS",replacement:"Noto Sans"},{unLicensed:"Batang",replacement:"Noto Serif KR"},{unLicensed:"Book Antiqua",replacement:"Tinos"},{unLicensed:"Bookman Old Style",replacement:"Tinos"},{unLicensed:"Bookshelf Symbol 1",replacement:"Open Sans"},{unLicensed:"Bookshelf Symbol 2",replacement:"Open Sans"},{unLicensed:"Bookshelf Symbol 3",replacement:"Open Sans"},{unLicensed:"Comic Sans MS",replacement:"Comic Neue"},{unLicensed:"Courier New",replacement:"Courier Prime"},{unLicensed:"Garamond",replacement:"EB Garamond"},{unLicensed:"Haettenschweiler",replacement:"Anton"},{unLicensed:"Helvetica",replacement:"Inter"},{unLicensed:"Impact",replacement:"Anton"},{unLicensed:"Lucida Console",replacement:"Roboto Mono"},{unLicensed:"Lucida Sans Unicode",replacement:"Noto Sans"},{unLicensed:"Map Symbols",replacement:"Open Sans"},{unLicensed:"Marlett",replacement:"Open Sans"},{unLicensed:"Monotype Corsiva",replacement:"Dancing Script"},{unLicensed:"Monotype Sorts",replacement:"Open Sans"},{unLicensed:"MS Gothic",replacement:"Noto Sans JP"},{unLicensed:"MS Outlook",replacement:"Open Sans"},{unLicensed:"Microsoft Sans Serif",replacement:"Noto Sans"},{unLicensed:"MT Extra",replacement:"Open Sans"},{unLicensed:"Symbol",replacement:"Open Sans"},{unLicensed:"Tahoma",replacement:"Noto Sans"},{unLicensed:"Times New Roman",replacement:"Tinos"},{unLicensed:"Trebuchet MS",replacement:"Mulish"},{unLicensed:"Verdana",replacement:"Noto Sans"},{unLicensed:"Webdings",replacement:"Open Sans"},{unLicensed:"Wingdings",replacement:"Open Sans"},{unLicensed:"Wingdings 2",replacement:"Open Sans"},{unLicensed:"Wingdings 3",replacement:"Open Sans"},];var K=[['"ff"',"'ff'","font"],['"font"',"'font'",'\\"ff\\"',"\\'ff\\'"],['"FormattingFont"',"'FormattingFont'"],['FntFml"',"FntFml'"],['"fontFamily"',"'fontFamily'"],['"family"',"'family'"],['"font-family"',"'font-family'"],["font-family"],];function H(R,b){var c=R.indexOf(b);while(c!==-1){var a=R.substring(c);var S=true;for(var X=0;X<Q.length&&S;X++){var Z=Q[X].unLicensed;if(Z.indexOf(b)===0&&Z.length>b.length&&a.indexOf(Z)===0){S=false;}}if(S){var e=c;while(e>0&&R[e]!==":"){e--;}if(R[e]===":"){for(var W=0;W<K.length;W++){var U=K[W];var d=R.substring(e-U[0].length,e);if(U.indexOf(d)!==-1){if(C(R,c,e,b)){return true;}}}var Y=e-1;while(Y>0&&R[Y]!=='"'&&R[Y]!=="'"){Y--;}if(R[Y]==='"'||R[Y]==="'"){var d=R.substring(Y+1,Y+11);if(d==="fontFamily"){if(C(R,c,e,b)){return true;}}}}}c=R.indexOf(b,c+b.length);}return false;}function C(R,S,b,X){var U=b+1;while(U<R.length&&(R[U]===" "||R[U]==="\t"||R[U]==="\n"||R[U]==="\r")){U++;}var W=A(R,U);var a=R.substring(U,W).trim();if((a.charAt(0)==='"'&&a.charAt(a.length-1)==='"')||(a.charAt(0)==="'"&&a.charAt(a.length-1)==="'")){a=a.substring(1,a.length-1);}var Y=a.split(",");if(Y.length>0){var c=Y[0].trim();if((c.charAt(0)==='"'&&c.charAt(c.length-1)==='"')||(c.charAt(0)==="'"&&c.charAt(c.length-1)==="'")){c=c.substring(1,c.length-1);}var Z=L(c);if(Z!==c){c=Z;}return c===X;}return false;}function A(R,S){var a=S;var b=false;var Y="";var U=0;while(a<R.length){var W=R[a];if(!b&&(W==='"'||W==="'")){b=true;Y=W;}else{if(b&&W===Y){var Z=0;var X=a-1;while(X>=0&&R[X]==="\\"){Z++;X--;}if(Z%2===0){b=false;Y="";}}else{if(!b){if(W==="("){U++;}else{if(W===")"){U--;}else{if(U===0&&(W===";"||W==="}"||(W===","&&M(R,a)))){return a;}}}}}}a++;}return R.length;}function M(U,W){var R=W+1;while(R<U.length&&(U[R]===" "||U[R]==="\t"||U[R]==="\n"||U[R]==="\r")){R++;}var S=R;while(R<U.length&&/[a-zA-Z-]/.test(U[R])){R++;}if(R>S){while(R<U.length&&(U[R]===" "||U[R]==="\t"||U[R]==="\n"||U[R]==="\r")){R++;}return U[R]===":";}return false;}function L(Y){var X=Y.trim();var W=X.split(/\s+/);if(W.length<2){return Y;}var Z=false;for(var U=0;U<W.length;U++){if(F(W[U])){Z=true;break;}}if(!Z){return Y;}var R=X.match(/(['"])(.*?)\1/);if(R){return R[2];}for(var U=W.length-1;U>=0;U--){var S=W[U];if(!F(S)){return S;}}return Y;}function F(X){var Y=/^\d+(\.\d+)?(px|pt|em|rem|%|ex|ch|vw|vh|vmin|vmax|cm|mm|in|pc)$/i;if(Y.test(X)){return true;}var U=["xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];if(U.indexOf(X.toLowerCase())!==-1){return true;}var S=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"];if(S.indexOf(X.toLowerCase())!==-1){return true;}var W=["normal","italic","oblique"];if(W.indexOf(X.toLowerCase())!==-1){return true;}var R=["normal","small-caps"];if(R.indexOf(X.toLowerCase())!==-1){return true;}return false;}function P(a,Y){var X=Date.now();var Z=[];var W=[];var U=',"font":"10pt \'Tahoma\'","ttl":{';while(a.indexOf(U)!==-1){a=a.replace(U,"");}var S='"font":"8pt \'Arial\'",';while(a.indexOf(S)!==-1){a=a.replace(S,"");}var R=',"ff":"Arial",';while(a.indexOf(R)!==-1){a=a.replace(R,"");}Q.forEach(function(c){if(c.unLicensed==="Arial"){return ;}if(H(a,c.unLicensed)){if(Y&&Array.isArray(Y)){var b=Y.some(function(d){return d.desc===c.unLicensed;});if(b){return ;}}Z.push({font:c.unLicensed,replacement:c.replacement,foundInSource:true,});W.push(c.unLicensed);}});if(W.length===0){return Promise.resolve([]);}return J(W).then(function(c){var b=Z.map(function(e){var d=c[e.font];return{font:e.font,replacement:e.replacement,foundInSource:true,availableOnSystem:d,};});return b;});}function B(W,S,Y){try{var X=localStorage.getItem("dashboard_missing_font_show");if(!X){return false;}var R=JSON.parse(X);return R[W]&&R[W][S]&&R[W][S][Y]===1;}catch(U){return false;}}function I(W,S,Y){try{var X=localStorage.getItem("dashboard_missing_font_show");var R=X?JSON.parse(X):{};if(!R[W]){R[W]={};}if(!R[W][S]){R[W][S]={};}R[W][S][Y]=1;localStorage.setItem("dashboard_missing_font_show",JSON.stringify(R));}catch(U){}}function G(S,R){return P(S,R).then(function(U){var W=[];U.forEach(function(X){if(X.foundInSource&&!X.availableOnSystem){W.push({missing:X.font,replacement:X.replacement,});}});return W;});}function O(X,U){if(!U){U=[];}if(X===null||X===undefined){return U;}if(Array.isArray(X)){for(var S=0;S<X.length;S++){O(X[S],U);}}else{if(typeof X==="object"){if(X.hasOwnProperty("gsi")){U.push({gsi:X.gsi,});}else{var W=Object.keys(X);for(var R=0;R<W.length;R++){O(X[W[R]],U);}}}}return U;}function E(S){if(!S){return[];}const R=O(S,[]);return R;}function N(W,X){try{var U=E(X);var R=JSON.stringify(W)+JSON.stringify(U);return R;}catch(S){return"";}}mstrmojo.vi.util.FontDetectionUtils=mstrmojo.provide("mstrmojo.vi.util.FontDetectionUtils",{checkAndShowMissingFontDialog:function D(U,R){var Y=mstrApp.userID,Z=mstrApp.projectId||mstrConfig.projectId||mstrApp.projectName,b=U.oid,X=U.dvwm,a=U.defn,W=U.data;if(b===undefined||X===undefined||!a||!W){return ;}if(mstrmojo.util.PlatformHelper.isLibraryConsumption()||mstrmojo.util.PlatformHelper.isAIDatasetCollectionMode()||mstrApp.isExporting||X!==1879072805||!mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.DISPLAY_FONT_DIALOG)||B(Y,Z,b)){return ;}if(!window.ReactComponents||!window.ReactComponents.ReactComponentUtils||!window.ReactComponents.ReactComponentUtils.detectFontAvailabilityInIframe){return ;}var S=N(a,W);if(!S){return ;}G(S,R).then(function(c){if(Array.isArray(c)&&c.length>0){setTimeout(function(){mstrmojo.MissingFontDialog.show(c);I(Y,Z,b);},100);}});},});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func");const E=mstrmojo.hash;const A=mstrmojo.func;const N={INIT:0,IN_PROGRESS:1,SUCCESS:2,FAILED:3};const G={INC_FETCH_NOT_SUPPORTED:1,MODE_NOT_SUPPORTED:2,INVALID_START_VALUE:3,INVALID_COUNT_VALUE:4,FETCH_IN_PROGRESS:5,INVALID_BLOCK_COUNT:6,END_OF_RESULT_SET:7,FETCH_ERROR:8};const F={GENERAL:1,BLOCKS:2};function O(S,Q,R){if(!this.supportIncrementalFetch){this.set("incFetchError",{code:G.INC_FETCH_NOT_SUPPORTED,message:"Incremental Fetch is not Supported for this widget."});return false;}if(R!==F.GENERAL){this.set("incFetchError",{code:G.MODE_NOT_SUPPORTED,message:"Mode is not supported"});return false;}if(!(Number.isInteger(S)&&S>=1)){this.set("incFetchError",{code:G.INVALID_START_VALUE,message:"Invalid start value. It should be an integer and greater than or equal to 1."});return false;}if(!(Number.isInteger(Q)&&Q>=-1)){this.set("incFetchError",{code:G.INVALID_COUNT_VALUE,message:"Invalid count value. It should be an integer and greater than or equal to -1."});return false;}return true;}function B(W,Y){const a=W.row;const Q=W.col;const R=a.start;const X=a.count;const S=a.mode||F.GENERAL;const U=Q.start;const Z=Q.count;if(this.incFetchStatus===N.IN_PROGRESS){this.set("incFetchError",{code:G.FETCH_IN_PROGRESS,message:"Fetch is in progress."});return false;}this.controller.onDownloadGridData(this,this.model.getDownloadAction(R,X,U,Z,this.id,S,Y));if(this.lockPageOnFetch){A.safeCall("showWait",window.mstrApp)();}this.set("incFetchStatus",N.IN_PROGRESS);return true;}mstrmojo._SupportIncrementalFetch=mstrmojo.provide("mstrmojo._SupportIncrementalFetch",{_mixinName:"mstrmojo._SupportIncrementalFetch",EnumFetchStatus:N,EnumFetchErrorCode:G,supportIncrementalFetch:true,lockPageOnFetch:true,incFetchStatus:N.INIT,incFetchError:null,incFetchBlockIndex:1,getRowSize:function L(){const R=this.getData();const Q=E.walk("rw.row.tc",R);return Q||0;},onmodelChange:function D(Q){if(this._super){this._super(Q);}if(this.supportIncrementalFetch&&!this.incFetchDataChangeListener){const R=this.id;this.incFetchDataChangeListener=this.model.docModel.attachEventListener("gjsSuccessWithPUKeys",this.id,function(U){const S=mstrmojo.all[R];if(!S){return ;}const X=E.walk("actions.0.act",U);const Y=X==="gridIncrementalFetch";if(Y){return ;}const a=E.walk("res.pukeys",U);if(!a){return ;}const W=a.split("\u001E");const Z=W.indexOf(S.k)>=0;if(!Z){return ;}S.incFetchBlockIndex=1;});}},fetchRows:function J(S,Q){const W=S.start;const R=S.count;const U=S.mode||F.GENERAL;if(!O.call(this,W,R,U)){return false;}return B.call(this,{row:{start:W,count:R,mode:U},col:{start:-1,count:-1}},Q);},hasNextRowSet:function C(){const R=this.getData();const Q=E.walk("rw.row.tc",R);const S=E.walk("rw.row.bc",R);if(!(Number.isInteger(S)&&S>0)){return false;}return Q>S*this.incFetchBlockIndex;},fetchNextRowSet:function H(){const R=this.getData();const S=E.walk("rw.row.bc",R);if(!(Number.isInteger(S)&&S>0)){this.set("incFetchError",{code:G.INVALID_BLOCK_COUNT,message:"Invalid block count. It should be an integer and greater than 0."});return false;}if(!this.hasNextRowSet()){this.set("incFetchError",{code:G.END_OF_RESULT_SET,message:"The end of the result set is reached."});return false;}const Q={blockNum:this.incFetchBlockIndex+1};return this.fetchRows({start:this.incFetchBlockIndex*S+1,count:S},Q);},dataDownloaded:function P(R,Q){this.set("incFetchStatus",N.SUCCESS);if(this.lockPageOnFetch){A.safeCall("hideWait",window.mstrApp)();}if(Q&&Q.blockNum){this.incFetchBlockIndex=Q.blockNum;}this.onDataFetched(R.data,Q);},dataDownloadErr:function M(Q){this.set("incFetchStatus",N.FAILED);this.set("incFetchError",{code:G.FETCH_ERROR,message:Q.message});if(this.lockPageOnFetch){A.safeCall("hideWait",window.mstrApp)();}},onDataFetched:function I(X,R){if(!X){return ;}try{const S=this.getData();const Q=E.walk("rw.row.bc",S);const W=E.walk("rw.col.bc",S);const U=E.walk("gts.row.length",S);if(W>0||Q<=0||U!==1){return ;}if(!X.ghs.rhs.items){X.ghs.rhs.items=[];}S.gts.row[0].es=S.gts.row[0].es.concat(X.gts.row[0].es);S.gvs.items=S.gvs.items.concat(X.gvs.items);S.ghs.rhs.items=S.ghs.rhs.items.concat(X.ghs.rhs.items);S.ghs.rhs.items.forEach(function(a,Z){a.items[0].idx=Z;});this.refresh();}catch(Y){console.error(Y);}},destroy:function K(Q){if(this.incFetchDataChangeListener){this.model.docModel.detachEventListener(this.incFetchDataChangeListener);}this._super(Q);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.util.PlatformHelper");var O=mstrmojo.func,I=mstrmojo.util.PlatformHelper;var F="REST API is not supported in current environment, please execute this on Library Web.";var D="Your dashboard contains unsupported dataset, please execute this on Library Web.";function L(a,X,Y,W,Z){var U=Y||{};if(!this.isFetchRestApiSupported()){mstrApp.onerror({message:F});return ;}if(mstrApp.fetchRestApi){if(X&&X.body){X.body=JSON.stringify(X.body);}mstrApp.fetchRestApi(a,false,X).then(function(b){O.safeCall("success",U)(b);},function(b){O.safeCall("failure",U)(b);});return ;}if(!W&&mstrApp.fetchRestApiWithProjectAsync){window.setTimeout(function(){if(Z&&mstrApp.fetchRestApiWithoutProjectAsync){mstrApp.fetchRestApiWithoutProjectAsync(a,X,U);}else{mstrApp.fetchRestApiWithProjectAsync(a,X,U);}},0);}}mstrmojo.vi.ui._RestApiHelper=mstrmojo.provide("mstrmojo.vi.ui._RestApiHelper",{isFetchRestApiSupported:function J(){return !!(window.mstrApp&&(mstrApp.fetchRestApi||mstrApp.fetchRestApiWithProjectAsync||mstrApp.fetchRestApiWithoutProjectAsync));},getHTMLWhitelist:function R(U){L.call(this,"config/clientSettings?fields=htmlWhitelist",{},U);},getCubeDefinition:function S(U,W){L.call(this,"cubes/"+U,I.isWorkstation()?{}:{headers:{"X-MSTR-ProjectID":mstrApp.projectId}},W);},deleteNuggets:function A(W,X,U){L.call(this,"nuggets/"+W,{method:"DELETE"},X,U);},getNugget:function P(W,X,U){L.call(this,"nuggets/"+W,{method:"GET"},X,U);},getNuggetsStatus:function M(U,W){L.call(this,"nuggets/status/query",{method:"POST",headers:{"X-MSTR-ProjectID":mstrApp.projectId,"Content-Type":"application/json"},body:U},W);},getDatasetIndexingStatus:function E(X,Y,U,Z,W){L.call(this,"/aiservice/elements/nuggets/status",{method:"POST",headers:{"X-MSTR-ProjectID":mstrApp.projectId,"X-MSTR-Date":new Date().getTime(),"Content-Type":"application/json"},body:{cubeType:X,cubeInstanceId:Y,attributeIds:U}},Z,W);},triggerElementIndexing:function Q(Y,a,X,W,Z,U){L.call(this,"/dashboards/"+Y+"/instances/"+a+"/datasets/"+X+"/instances/"+W+"/index",{method:"POST",headers:{"X-MSTR-ProjectId":mstrApp.projectId,"Content-Type":"application/json"},body:{indexType:"element"}},Z,U);},getDataModelFolders:function C(X,U,W,Y){if(!I.isLibraryOrWS()){mstrApp.onerror({message:D});return ;}L.call(this,"/dashboards/"+X+"/instances/"+U+"/datasets/"+W+"/folderView",I.isWorkstation()?{}:{headers:{"X-MSTR-ProjectID":mstrApp.projectId}},Y);},getLinkModelTables:function B(W,U){if(!I.isLibraryOrWS()){mstrApp.onerror({message:D});return ;}L.call(this,"/model/dataModels/"+W+"/tableView",I.isWorkstation()?{}:{headers:{"X-MSTR-ProjectID":mstrApp.projectId}},U);},getDashboardLinkingInfo:function H(Y,X,U,Z,W,a){L.call(this,"dashboards/"+Y+"/instances/"+X+"/chapters/"+U+"/pages/"+Z+"/linkingInfo"+W,{headers:{Prefer:"respond-async"}},a);},getRecipients:function K(U,Y){var W="collaboration/recipients?searchTerm="+U+"&searchPattern=CONTAINS&enabledStatus=ENABLED_ONLY&offset=0&limit=-1";var X=true;L.call(this,W,{},Y,false,X);},getObjectInfoApi:function G(X){var U=this.model,W=U.oid;L.call(this,"objects/"+W+"?type=55",I.isWorkstation()?{}:{headers:{"X-MSTR-ProjectID":mstrApp.projectId}},X);},getAICubesStatus:function N(U,W){L.call(this,"v2/bots/cubes/status",{method:"POST",headers:{"X-MSTR-ProjectId":mstrApp.projectId,"Content-Type":"application/json"},body:{cubeIds:U}},W,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.func");var C=mstrmojo.publisher,F=mstrmojo.func;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function G(O,I){var H=false,L=this["_set_"+O],J=this[O];if(L){H=L.apply(this,arguments);}else{this[O]=I;H=(J!==I);}if(H){var M=O+"Change",N=this.audibles||{},K=(N[O]===true)||((N[O]!==false)&&(N["*"]!==false));if(K&&(this["pre"+M]||this["on"+M]||this["post"+M]||C.hasSubs(this.id,M))){this.raiseEvent({name:M,prop:O,value:I,valueWas:J});}}return this;},raiseEvent:function B(I){var N=I&&I.name;if(!N){return null;}I.src=this;this.preHandleEvent(I);var L=["pre","on","post"],M=false,J,H;for(J=0,H=L.length;J<H;J++){var K=L[J]+N;if(this[K]){if(this[K](I)===false){M=true;break;}}}if(!M){this.postHandleEvent(I);C.publish(this.id,N,I);}return I;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(H,I,J){return C.subscribe(this.id,H,J,I);},detachEventListener:function E(H){C.unsubscribe(H);},attachEventListenerOnce:function(H,J,K){var I=C.subscribe(this.id,H,F.composite([function(){C.unsubscribe(I);},K]),J);return I;},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(U,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var W=G(U,Q[R]);if(!W){continue;}S.push(W);L(U,W);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var U=R[Q];if(U&&U.destroy){U.destroy(S);if(!S){N(this,U);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(W,Q,R){if(!W){return W;}var U=W.constructor===Array,P=A(this,U?W:[W]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return U?P:(P&&P[0]);},removeChildren:function J(X,R){var U=this.children,W=X?[X]:(this.children||[]).concat(),Q=W.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,W[S]);}if(X){P=K.removeItem(U,X);}else{if(U){U.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:W,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMSessionStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMSessionStorage",init:function(B){this._super(B);try{this.mIsSupported=("sessionStorage" in window)&&(window.sessionStorage!==null);this.mStorageObj=this.mIsSupported?window.sessionStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$SS=mstrmojo.global.sessionStore=new mstrmojo.storage.DOMSessionStorage();})();(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMLocalStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMLocalStorage",init:function(B){this._super(B);try{this.mIsSupported=("localStorage" in window)&&(window.localStorage!==null);this.mStorageObj=this.mIsSupported?window.localStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$LS=mstrmojo.global.localStore=new mstrmojo.storage.DOMLocalStorage({itemTimeToLive:(3600*24)});})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.vi.enums.EnumFeatures");var K=mstrmojo.string,F=mstrmojo.dom,G=mstrmojo.vi.enums.EnumFeatures;mstrmojo.CustomVisUtility=mstrmojo.provide("mstrmojo.CustomVisUtility",{encodeHtmlString:function(O,N){return K.encodeHtmlString(O,N);},decodeHtmlString:function(N){return K.decodeHtmlString(N);},isInPauseMode:function(){return(mstrConfig&&mstrConfig.resolveOnly)||(mstrApp&&mstrApp.isAppStatePause&&mstrApp.isAppStatePause());},isRWDExpressMode:function B(){return !!(mstrApp&&mstrApp.isExpress);},isVI:function E(){return mstrApp&&mstrApp.isVI;},isVIPresentationMode:function L(){return this.isVI()&&mstrApp.isAppStatePresentation();},isDesktop:function D(){return !!(mstrApp&&mstrApp.isSingleTier);},isWorkstation:function M(){return !!(mstrApp&&mstrApp.isWorkstation);},isWSLiveMode:function I(){if(mstrApp&&typeof mstrApp.supportFeature==="function"){return mstrApp.supportFeature(G.SUPPORT_LIVEMODE)&&(typeof mstrApp.getWSLiveMode==="function")&&mstrApp.getWSLiveMode();}return false;},isWSLocalMode:function C(){return this.isDesktop()&&!this.isWSLiveMode();},isLibrary:function A(){return !!(mstrApp&&mstrApp.isDossier);},isMobile:function H(){return F.isMobile;},parseBoolean:function J(N){return N===true||N==="true";},log:function(){Function.prototype.apply.call(console.log,console,arguments);},warn:function(){Function.prototype.apply.call(console.warn,console,arguments);},error:function(){Function.prototype.apply.call(console.error,console,arguments);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var R=mstrmojo.locales,M=mstrmojo.string,W=window.mstrConfig,I=mstrmojo.array,E=W&&W.units,Y={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},B={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},H={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,SPECIAL:8,GENERAL:9},O=["[black]","[blue]","[cyan]","[green]","[magenta]","[red]","[white]","[yellow]"];var K=96;var G=/^(\d{4})-(\d{2})-(\d{2})$/;String.prototype.reverse=function(){if(typeof this!=="string"&&!(this instanceof String)){return"";}var c="",b;for(b=this.length;b>0;--b){c+=this.charAt(b-1);}return c;};function Q(b,d){b=b||"";d=d||b.match(/\".+?\"/g)||[];for(var c=0;c<d.length;c++){b=b.replace(d[c],d[c].substring(1,d[c].length-1).replace(/\$/g,"$$$$"));}return b;}function Z(j,f){var h=86400000,b=new Date(1900,0,1,0,0,0,0),i=b.getTime(),c=8640000000000000,l=Math.floor(j)-1,e=j-l-1,g,d=function(m){if(f){if(m<i){return i;}else{if(m>c){return c;}}}return m;};if(j>=59){l--;}g=d(b.getTime()+(l*h));var k=new Date(g);g=d(k.getTime()+e*h+500);k.setTime(g);return k;}function J(l,m){var e=[];var f=/^d/i,b=/^m/i,c=/^y/i;if(typeof m==="string"&&m.indexOf(".")>-1){var h=/^[\d]+$/;e=m.split(".");var n=window.SSF&&window.SSF.parse_date_code(l);if(!n){return l;}var k=n.d,g=n.m,j=n.y;for(var d=0;d<e.length;d++){if(f.test(e[d])){if(e[d].length>1&&k<10){e[d]="0"+k;}else{e[d]=k;}}if(b.test(e[d])){if(e[d].length>1&&g<10){e[d]="0"+g;}else{e[d]=g;}}if(c.test(e[d])){if(e[d].length===2){e[d]=j.toString().slice(2,j.length);}else{e[d]=j;}}}if(!e.every(function(i){return h.test(i);})){return l;}return e.join(".");}return l;}function L(f,q,t,j){var g={"d+":f.getDate(),"h+|H":f.getHours(),"s+":f.getSeconds()},b=R.datetime,h,m="\u001E",p=false;if(j){b=R.getTargetLocaleInfo(j).datetime;}if(/(y+)/.test(q)){var e=f.getFullYear().toString(),o=RegExp.$1,d=o.length===2,c=e.length;q=q.replace(o,e.substr(d?c-2:0,d?2:c));}if(/(^\[h\])/.test(q)&&t){q=q.replace(RegExp.$1,""+(Math.floor(t*24)));}if(/(\"?:\"?mm)/.test(q)){var i=f.getMinutes();q=q.replace(RegExp.$1,":"+(RegExp.$1.length===1?i:("00"+i).substr(i.toString().length)));}if(/(AM\/PM)/.test(q)){var s=g["h+|H"],l=s>11;g["h+|H"]=s%12||12;p=!l;q=q.replace(RegExp.$1,m);}for(h in g){if(new RegExp("("+h+")").test(q)){q=q.replace(RegExp.$1,RegExp.$1.length===1?g[h]:("00"+g[h]).substr((g[h].toString()).length));}}if(/(mmmm)/.test(q)){q=q.replace(RegExp.$1,b.MONTHNAME_FULL[f.getMonth()]);}else{if(/(mmm)/.test(q)){q=q.replace(RegExp.$1,b.MONTHNAME_SHORT[f.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(q)){var n=(f.getMonth()+1).toString();q=q.replace(RegExp.$1,RegExp.$1.length===1?n:("00"+n).substr(n.length));}}}if(q.indexOf(m)!==-1){q=q.replace(m,p?b.AM_NAME:b.PM_NAME);}return Q(q);}function S(c,f){var d=0,b=f.length,e=0;for(;d<b;d++){if(f[d]==="0"){e++;}else{if(f[d]==="#"){if(e<c){e++;}}else{continue;}}}return e;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function F(b){var e=this.getThousand(),d=new RegExp("^(-)?[0-9]{1,3}(\\"+e+"[0-9]{3})*$"),c=new RegExp("^(-)?[0-9]+$");return(String(b).indexOf(e)&&d.test(b))||c.test(b);},isNumeric:function U(g,j,d){var f=this.getDecimal(d),h=this.getThousand(d),i=j?"%?":"",b=new RegExp("^(-)?[0-9]{1,3}(\\"+h+"[0-9]{3})*(\\"+f+"[0-9]+)?"+i+"$"),e=new RegExp("^(-)?[0-9]*(\\"+f+")?[0-9]+"+i+"$"),c=new RegExp("^(-)?[0-9]{1}(\\"+f+")[1-9]+[eE]{1}[-]{0,1}[0-9]+"+i+"$");return(String(g).indexOf(h)&&b.test(g))||e.test(g)||c.test(g);},isBigDecimal:function(c){if(!c){return false;}var b=String(c).match(/^#([^#]+)#$/);if(!b||b.length<=1){return false;}var d=b[1];return this.isNumeric(d);},parseInteger:function P(b,c){if(!this.isInt(b)){return Number.NaN;}return parseInt(this.toString(b,true),c);},parseNumeric:function D(c,b){if(!this.isNumeric(c,false,b)){return Number.NaN;}return parseFloat(this.toString(c,true,b));},parseEnhNumeric:function A(b){if(!this.isNumeric(b,true)){return Number.NaN;}if(b.indexOf("%")!==-1){return parseFloat(this.toString(b.replace("%",""),true))/100;}return parseFloat(this.toString(b,true));},parseBigDecimal:function(b){return String(b).match(/^#(.+)#$/)[1];},inNumericRange:function X(c,d,b){c=this.parseNumeric(c);b=(b!=null)?this.parseNumeric(this.toLocaleString(b)):Number.NaN;d=(d!=null)?this.parseNumeric(this.toLocaleString(d)):Number.NaN;if(b!=Number.NaN&&(c>b||isNaN(c))){return 1;}if(d!=Number.NaN&&(c<d||isNaN(c))){return -1;}return 0;},convertToUSUnits:function(e,d,c){var b=e;d=d||E;switch(parseInt(d,10)){case Y.CM:b=parseFloat(this.toString(e))/2.54+"";break;case Y.MM:b=parseFloat(this.toString(e))/25.4+"";break;case Y.PT:b=parseFloat(this.toString(e))/72+"";break;case Y.PC:b=parseFloat(this.toString(e))/6+"";break;case Y.PX:b=parseFloat(this.toString(e))/K+"";break;}return c?b:this.toLocaleString(b);},convertToLocalUnits:function(e,d,c){var b;d=d||E;switch(parseInt(d,10)){case Y.CM:b=(parseFloat(this.toString(e))*2.54).toFixed(4)+"";break;case Y.MM:b=(parseFloat(this.toString(e))*25.4).toFixed(4)+"";break;case Y.PT:b=(parseFloat(this.toString(e))*72).toFixed(4)+"";break;case Y.PC:b=(parseFloat(this.toString(e))*6).toFixed(4)+"";break;case Y.PX:e=parseFloat(this.toString(e))*K;b=parseInt(e)==e?e+"":e.toFixed(4)+"";break;default:b=parseFloat(this.toString(e)).toFixed(4)+"";}return c?b:this.toLocaleString(b);},convertUnits:function(c,d,b){return this.convertToLocalUnits(this.convertToUSUnits(b,c,true),d,true);},toLocaleString:function(d,c,b){var e=(d+"").replace(".",this.getDecimal(b));if(c){return this.addSeparators(e,this.getThousand(b));}return e;},toString:function(e,c,b){if(c===true){var d=this.getThousandSepRegex(b);if(d){e=String(e).replace(d,"");}}return String(e).replace(this.getDecimal(b),".");},getThousandSepRegex:function(b){if(this.thousandSeparatorRegex==null||b){var c=new RegExp(this.getThousand(b).replace(/(\W){1}/g,"\\$1"),"g");if(!b){this.thousandSeparatorRegex=c;}return c;}return this.thousandSeparatorRegex;},addSeparators:function(d,c){var b=c;if(c=="."||c=="*"||c=="\\"){b="\\"+c;}return d.reverse().replace(/(\d{3})/g,"$1"+c).reverse().replace(new RegExp("^(-)?"+b),"$1");},addSeparators2:function(e,d){var b=e,c=/(\d+)(\d{3})/;while(c.test(b)){b=b.replace(c,"$1"+d+"$2");}return b;},format:function(f,e,j,b){var h="",g=(e>0)?".":"",c=[];j=(j)||"";for(var d=0;d<e;d++){c.push("0");}c=c.join("");switch(f){case H.GENERAL:h="0.00";break;case H.PERCENT:h="0"+g+c+"%";break;case H.SCIENTIFIC:h="0"+g+c+"E+00";break;default:h='"'+j+'"#,##0'+g+c;}return this.formatByMask(h,b);},getDecimalLength:function N(d){var b=d.indexOf("."),e=0;if(b!==-1){var c=d.substr(b+1,d.length).match(/\d+/);if(c&&c.length>0){e=c[0].length;}}return e;},hasColorInFormat:function C(c){if(typeof c!=="string"){return false;}const b=c.toLowerCase();return O.some(function(d){return b.includes(d);});},getColorFromFormat:function a(f,b){var e;if(!this.hasColorInFormat(f)){return e;}if(isNaN(b)){return e;}const d=window.SSF&&window.SSF.chooseFmt&&window.SSF.chooseFmt(f,b);const c=d&&d[1];if(typeof c==="string"){const g=c.toLowerCase();e=O.find(function(h){return g.includes(h);});if(e){e=e.substring(1,e.length-1);}}return e;},formatByMask:function(AS,Ak,AQ,AK,AG){var AJ,x="",AC,Ao=false;if(isNaN(Ak)){AJ=new Date(Ak);if(AG&&AG.ignoreTimeZone&&Ak){var f=Ak.match(G);if(f){AJ=new Date(Ak+" 00:00:00");}}if(isNaN(AJ)||!Date.parse(Ak)){return Ak;}AC=true;}if(AS==="General"){if(String(parseFloat(Ak)).indexOf(".")>-1){var AO=AQ?String(parseFloat(Ak)):String(parseFloat(Ak).toFixed(2));x=AO.split(".");if(x.length===2){return x.join(this.getDecimal(AK));}return AO;}if(isNaN(Ak)){return Ak;}return String(parseFloat(Ak));}var AB=String(AS).split(";"),e=AB[0],t="\u00A4",Ad=/"[^"]*"/g,w=(AS&&AS.replace(Ad,t).replace(/\[.*\]/g,t))||"",Aj=["m","y","d","h","s"],AY=false;I.forEach(Aj,function(i){AY=AY||w.toLowerCase().indexOf(i,0)!==-1;});if(AY){if(window.SSF&&!Ao&&!AK){x=this.formatBySSF(AS,Ak,undefined,J,AG);Ao=true;}if(x!==""){return x;}return L(AC?AJ:Z(Ak,!!AK),AS,Ak,AK);}var AW=e.indexOf("E+"),o=e.indexOf("%"),AF=e.match(/\".+?\"/g),AN=e.match(/\[([=<>]*)(-?\d+(\.\d*)?)\]/),AH=e.indexOf("?/?")>-1,AP=(AW!=-1)?H.SCIENTIFIC:((o!=-1)?H.PERCENT:((AF&&!AN)?H.CURR:AH?H.FRACTION:H.FIXED)),AA="",Af="",y=false,c=new String(Ak),n=parseFloat(Ak)||this.parseNumeric(Ak,AK?"en-US":undefined);if(AF){if(e.match(/\[\$.+?\]/g)){for(var p=0;p<AF.length;p++){e=e.replace(AF[p],AF[p].substring(1,AF[p].length-1));if(AF[p].match(/\[\$.+?\]/g)){AF[p]=AF[p].replace(/\[\$.+?\]/g,AF[p][AF[p].indexOf("[$")+2]);}}e=e.replace(/\[\$.+?\]/g,'"#"'.replace("#",e[e.indexOf("[$")+2]));}AA=Q(e,AF);AA=AA.replace(e.replace(/\".+?\"/g,""),t);}if(n<0){c=c.substring(1,c.length);n=-n;y=true;if(AB.length>1){var k=AB[1].replace(/\[.*\]/,"");Af=Q(k.replace(AB[0],t));}}var u=this,l=function(m,i){var j=i&&i.replace(t,m);if(i&&(j===i)&&window.SSF){if(Ao){return m;}Ao=true;return u.formatBySSF(i,n,undefined,undefined,AG);}return(i)?j:"-"+m;};if(AP===H.FRACTION){var Ab,Aa,Ai,z=10,AI,AE=0,AU,Ae,g,d=false,AR;if(AS.indexOf("# ")>-1){d=true;}for(Ab=5;Ab>0;Ab--){AR="/";for(Aa=0;Aa<Ab;Aa++){AR+="?";}if(AS.indexOf(AR)>-1){for(Aa=1;Aa<Ab;Aa++){z*=10;}break;}}if(d){AE=Math.floor(Number(n));n-=AE;}Ae=z/2;Ai=-1;AU=n*z;for(Ab=z-1;Ab>=2;Ab--){g=(AU*Ab)/z;g-=Math.floor(g);g*=z;if(Math.abs(g-z)<g){g=Math.abs(g-z);}g/=Ab;if(g<Ae){Ae=g;Ai=Ab;}else{if((g==Ae)&&(g==0)){Ae=g;Ai=Ab;}}}AI=Math.round(Ai*AU/z);for(Ab=Ai;Ab>=2;Ab--){if((AI%Ab==0)&&(Ai%Ab==0)){AI/=Ab;Ai/=Ab;break;}}if(Ai==z){Ai=1;AI=0;}if(AI==0){Ai=1;}if(AI==Ai){if(d){x=""+(AE+1);}else{x="1";}}else{if(d&&AE>0){if(AI==0){x=AE;}else{x=AE+" "+AI+"/"+Ai;}}else{if(AI==0){x="0";}else{x=AI+"/"+Ai;}}}if(y){x=l(x,Af);}}else{if(AP==H.SCIENTIFIC){if(n!=0){var Am=Math.floor(Math.log(n)/Math.LN10),AZ=n/Math.pow(10,Am),An=e.substring(0,AW),s=An.indexOf("."),AT=e.length-e.indexOf("E+")-(""+Math.abs(Am)).length-2,Ab,b=Am<0;Am=Math.abs(Am);for(Ab=0;Ab<AT;Ab++){Am="0"+Am;}x+=Number(AZ).toFixed((s!=-1)?An.length-s-1:0);x=((y)?l(x,Af):x)+"E"+(b?"-":"+")+Am;}else{x="0";}}else{if(AP==H.PERCENT){e=e.substring(0,e.length-1);c=String(n*100);}var s=e.indexOf("."),h=0,Ah,AD=s>=0?e.substring(0,s):e,AL=s>=0?e.substring(s+1,e.length):"",q=false;if(AD.match(/[#0\?],$/)){if(AP!==H.CURR){n/=1000;}c=String(n);}else{if(AL.match(/^[#0]*,/)){var AM=0;q=true;while(AM<AL.length){if(AL[AM]==="0"||AL[AM]==="#"){AM++;}else{if(AL[AM]===","){n/=1000;c=String(n);AM++;}else{break;}}}}}Ah=this.getDecimalLength(c);if(s!=-1){h=S(Ah,e.substr(s+1,e.length));}if(c.indexOf("e")===-1||c.indexOf("e-")>-1){x=String((+(Math.round(+(c.indexOf("e")>0?String(parseFloat(c).toFixed(Math.min(h+2,20))):c+"e"+Math.min(h,20)))+"e"+-Math.min(h,20))).toFixed(Math.min(h,20)));}else{x=c;var Al=x.split("e");Al[0]=parseFloat(Al[0]).toFixed(2).toString();x=Al.join("e");if(AP==H.CURR){x=AA.replace(t,x);if(x===AA&&window.SSF){x=this.formatBySSF(AS,Ak,x,undefined,AG);Ao=true;}}if(AP==H.PERCENT){x+="%";}if(y){x=l(x,Af);}return x;}if(AP===H.FIXED&&window.SSF){var Ac;if(/[\[\]><=A-Za-z]|,{2}/.test(e)){Ac=this.formatBySSF(AS,Ak,undefined,undefined,AG);x=Ac!==""?Ac:x;Ao=true;}var AX=y?Af:e;if(/^\s*[\+-]{1}[#,.0]+/.test(AX)){Ac=this.formatBySSF(AX,Math.abs(Ak),undefined,undefined,AG);x=Ac!==""?Ac:x;Ao=true;}if(AG&&AG.numberCategory===H.SPECIAL){Ac=this.formatBySSF(AX,Ak,undefined,undefined,AG);x=Ac!==""?Ac:x;Ao=true;}}var Ag=x.split(".");var AV=e.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AV!==null){if(AP===H.CURR){Ag[0]=(this.formatBySSF((q?AV[0]&&AV[0].trim():AV.input&&AV.input.trim()),parseFloat(Ag[0]),undefined,undefined,AG)||"").split(".")[0];Ao=true;}if(Ag[0].indexOf(",")>=0){Ag[0]=Ag[0].replace(/,/g,this.getThousand(AK));}else{if(!(this.getThousand(AK)===","&&Ag[0].search(this.getThousand(AK))>0)){Ag[0]=this.addSeparators2(Ag[0],this.getThousand(AK));}}}x=Ag.join(this.getDecimal(AK));if(AP==H.CURR){x=AA.replace(t,x);if(x===AA&&window.SSF){x=this.formatBySSF(AS,Ak,x,undefined,AG);Ao=true;}}if(AP==H.PERCENT){x+="%";}if(y){x=l(x,Af);}}}return x;},formatBySSF:function(d,c,h,g,j){var b=(h!==undefined&&h!==null)?h:"";if(typeof c==="string"){c=parseFloat(c);}try{b=window.SSF.format(d,c,j);}catch(i){if(window.mstr_profile){window.mstr_profile.log(i);}var f=(h||c).toString();b=g instanceof Function?g(f,d):f;}return b;},validateFormat:function(b){var c=true,d=String(b).split(";");if(d[1]&&d[1].indexOf(d[0])<0){c=false;}return c;},generateUniqueID:function(b){var d="0123456789ABCDEF".split(""),e=[];for(var c=0;c<b;c++){e[c]=d[0|Math.random()*16];}return e.join("");},countOfDecimals:function(c,d){var b=String(c);return b.length-(b.indexOf(d!==undefined?d:this.getDecimal())+1);},getThousand:function(b){if(b){var c=mstrmojo.locales.getTargetLocaleInfo(b);return c.number.THOUSANDSEPARATOR;}return mstrmojo.locales.number.THOUSANDSEPARATOR;},getDecimal:function(b){if(b){var c=mstrmojo.locales.getTargetLocaleInfo(b);return c.number.DECIMALSEPARATOR;}return mstrmojo.locales.number.DECIMALSEPARATOR;}});mstrmojo.num.UNIT=Y;mstrmojo.num.UNIT_SYMBOL=B;})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;return this;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var B=mstrmojo.string;var A=function A(D){return B.startsWith(D,"http://")||B.startsWith(D,"https://");};mstrmojo.vi.ui._IsValidURL=mstrmojo.provide("mstrmojo.vi.ui._IsValidURL",{_mixinName:"mstrmojo.vi.ui._IsValidURL",isValidURL:function C(D){var E=!!D&&D.toLowerCase().replaceAll(" ","");return !!E&&(E.indexOf("javascript:")===-1)&&(!mstrApp.isSingleTier||A(E));}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.vi.ui.rw.linkingExprHelper=mstrmojo.provide("mstrmojo.vi.ui.rw.linkingExprHelper",{makeBold:function B(C){return"<span style='font-weight:bold;'>"+C+"</span>";},getLinkingSelectorExpr:function A(F,E){var G=[],H="",D=true,I=mstrmojo.desc(5283,"OR"),C=F.keepOnly?"##":mstrmojo.desc(13232,"Not ##");if(E){I=this.makeBold(I);}F.data.every(function(J){[].concat(J).every(function(K){if(H===""){H=K.tn;}return(D=(H===K.tn));});return D;});F.data.forEach(function(L,J){var K=[];if(D){if(J>0){K.push(I);}else{K.push(C.replace("##",H+" = "));}}[].concat(L).forEach(function(O){var N=E?mstrmojo.string.encodeHtmlString(O.v):O.v,M=E?mstrmojo.string.encodeHtmlString(O.tn):O.tn;K.push((D?"":(M+" = "))+(N||mstrmojo.desc(14323,"NULL")));});G.push(K.join(" "));});return G.join(" ");}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var Y=mstrmojo.dom,L=mstrmojo.string,c=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{REMOVE_STYLE:"__mstrmojo_remove_style__",DISPLAY_TABLE:Y.isNSIE?"block":"table",DISPLAY_CELL:Y.isNSIE?"block":"table-cell",MINHEIGHT:Y.isIE6?"height":"minHeight",addClass:function M(j,h){if(j){if(h.constructor!==Array){h=[h];}var e=j.className||"",l=" "+e+" ",f=false,d=h.length,g;for(g=0;g<d;g++){var k=h[g];if(!l.match(new RegExp("\\s"+k+"\\s"))){e+=" "+k;f=true;}}if(f){j.className=L.trim(e);}}return j;},removeClass:function O(h,g){if(!h){return ;}if(g.constructor!==Array){g=[g];}var e=" "+(h.className||"")+" ",d=g.length,f;for(f=0;f<d;f++){e=e.replace(new RegExp("\\s"+g[f]+"\\s","g")," ");}h.className=L.trim(e);},addWidgetCssClass:function N(j,g){var e=j.cssClass,h=(e&&e.split(" "))||[],f;g=[].concat(g);for(f=0;f<g.length;f++){var d=g[f];if(c.indexOf(h,d)===-1){h.push(d);}}j.cssClass=h.join(" ");},removeWidgetCssClass:function G(k,h){var e=k.cssClass,j=(e&&e.split(" "))||[],g;h=[].concat(h);for(g=0;g<h.length;g++){var d=h[g];var f=c.indexOf(j,d);if(f!==-1){j.splice(f,1);}}k.cssClass=j.join(" ");},toggleClass:function X(f,e,d){if(d){this.addClass(f,e);}else{this.removeClass(f,e);}},hasClass:function A(e,f){if(e){var d=" "+(e.className||"")+" ";return !!d.match(new RegExp("\\s"+f+"\\s"));}return false;},applyShadow:function H(h,i,g,f,d){var e=h.style;if(Y.isDXIE){e.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+i+"px, OffY="+g+"px, Color='"+d+"')";}else{if(Y.isFF||Y.isWK||Y.isIE10){e[Y.CSS3_BOXSHADOW]=i+"px "+g+"px "+f+"px "+d;}}},removeShadow:function C(e){var d=e.style;if(Y.isFF||Y.isWK||Y.isIE10){d[Y.CSS3_BOXSHADOW]="";}},setOpacity:function Z(e,g){if(Y.isDXIE&&!Y.isIE9){var h=e.currentStyle.filter;var d=null;if(h.length>0){d=e.filters["DXImageTransform.Microsoft.Alpha"];}if(d){d.opacity=g;d.enabled=(g!==100);}else{if(g<100){var f="progid:DXImageTransform.Microsoft.Alpha(Opacity="+g+")";e.style.filter=(h||"")+" "+f;}}}else{e.style.opacity=g/100-(Y.isIE9?0.00001:0);}},buildGradient:function P(e,g,d){if(Y.supports(Y.cssFeatures.GRADIENTS)){var f={};if(Y.isDXIE){f.n="filter";f.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+",StartColorStr='"+g+"',EndColorStr='"+d+"')";}else{if(Y.isFF){f.n="background-image";f.v="-moz-linear-gradient("+((e===0)?"top":"left")+","+g+","+d+")";}else{if(Y.isIE10||Y.isIEW3C||Y.isIE11||Y.isEdge||Y.isWK){f.n="background";f.v="linear-gradient("+((e===0)?"to bottom":"to right")+","+g+","+d+")";}}}return f;}return null;},buildRoundCorners:function R(j,h){if(Y.supports(Y.cssFeatures.ROUND_CORNERS)){var e=j+"px";var l=e+(h?" "+e+" 0 0":"")+";";if(Y.isFF||Y.isWinPhone||Y.isIE10){return"border-radius:"+l;}if(Y.isWK){if(!h){return"-webkit-border-radius:"+e+";";}var k=["left","right"],g=[],d=-1,f;for(f=0;f<2;f++){g[++d]="-webkit-border-top-"+k[f]+"-radius:"+e;g[++d]="-webkit-border-bottom-"+k[f]+"-radius:0";}return g.join(";");}}return"";},getBorderWidthsOrPaddings:function E(e,h){var j={t:0,r:0,b:0,l:0,h:0,w:0};if(!e){return j;}var f=e.split(" "),d=f.length,g;for(g=0;g<d;g++){f[g]=Math.round(h*parseFloat(f[g])/72);}if(d<4){if(d===1){f[1]=f[2]=f[3]=f[0];}else{f[3]=f[1];if(d===2){f[2]=f[0];}}}j.t=f[0];j.r=f[1];j.b=f[2];j.l=f[3];j.h=j.t+j.b;j.w=j.l+j.r;return j;},getBorderWidths:function I(e,d){return this.getBorderWidthsOrPaddings(e,d);},getPaddings:function D(e,d){return this.getBorderWidthsOrPaddings(e,d);},parkAfterFade:function B(d){var e=d.target.style;if(e.opacity===0){e.left="-10000px";window.setTimeout(function(){e.opacity=0.99;},0);return true;}return false;},getStyleValue:function J(d,h){var f=(h==="float"),g;if(d.currentStyle){h=f?"styleFloat":h;g=d.currentStyle[h];}else{if(document.defaultView&&document.defaultView.getComputedStyle){h=f?"cssFloat":h;var e=document.defaultView.getComputedStyle(d,null);g=e?e[h]:null;}}return g;},getComputedStyle:function W(d,f){var e=(window.getComputedStyle)?function(g,h){return window.getComputedStyle(g,h||null);}:function(g){return g.currentStyle||{};};mstrmojo.css.getComputedStyle=e;return e(d,f);},getCssTextFromObj:function F(f){var e="",d;for(d in f){e+=d+":"+f[d]+";";}return e;},onTransitionEnd:function b(e,d){Y.attachOneTimeEvent(e,Y.transitionend,d);},onAnimationEnd:function U(e,d){Y.attachEvent(e,Y.animationend,d);},flashClass:function Q(e,d,g){this.toggleClass(e,d,true);var f=this;window.setTimeout(function(){f.toggleClass(e,d,false);},g);},convertCssToCamelCase:function K(d){return d.replace(/\-([a-z])/gi,function(e,f){return f.toUpperCase();});},printCSSInfo:function a(h){var n=document.styleSheets,q=n.length,k,l;for(l=0;l<q;l++){var m=n[l],o=m.cssRules,f=o?o.length:0,p=0;for(k=0;k<f;k++){var d=o[k].selectorText;if(d){try{p+=d.split(",").length;}catch(g){}}}var e=m.href;if(!h||(e&&e.indexOf(h)>-1)){console.log("Stylesheet: "+e||"Inline CSS Block");console.log("Total rules: "+f);console.log("Total selectors: "+p);}}},cssEscape:function S(j){if(arguments.length===0){throw new TypeError("`CSS.escape` requires an argument.");}var g=String(j),i=g.length,f=-1,h,d="",e=g.charCodeAt(0);while(++f<i){h=g.charCodeAt(f);if(h==0){d+="\uFFFD";continue;}if((h>=1&&h<=31)||h==127||(f==0&&h>=48&&h<=57)||(f==1&&h>=48&&h<=57&&e==45)){d+="\\"+h.toString(16)+" ";continue;}if(f==0&&i==1&&h==45){d+="\\"+g.charAt(f);continue;}if(h>=128||h==45||h==95||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122){d+=g.charAt(f);continue;}d+="\\"+g.charAt(f);}return d;},setElementsStyle:function(d,g){for(var f in g){for(var e=0;e<d.length;e++){if(g[f]&&d[e]&&d[e].style){d[e].style[f]=g[f]===mstrmojo.css.REMOVE_STYLE?null:g[f];}}}},setElementCSSVariables:function(f,d){if(f&&f.style&&f.style.setProperty){for(var e in d){f.style.setProperty(e,d[e]===undefined?null:d[e]);}}},setElementClasses:function(e,f){if(e&&e.classList&&e.classList.toggle){for(var d in f){e.classList.toggle(d,Boolean(f[d]));}}},addCssText:function(e,f){if(!e){e="";}else{if(!e.endsWith(";")){e+=";";}}for(var d in f){if(f[d]){e+=d+": "+f[d]+";";}}return e;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var O=mstrmojo.string,M=mstrmojo.hash,F=mstrmojo.dom;var U=mstrmojo.usesFrames?null:document.createElement("span");var L=/mstrAttach:([\w,]+)/g,N="mstrevent";var S;function Y(e,f){if(S===undefined){S=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return e.replace(L,function d(l,n){var h=n.split(","),j=[],g=h.length,k;for(k=0;k<g;k++){var m=h[k];if(m){if(S){if(m.indexOf("mouse")>-1){continue;}else{if(m==="click"){m="touchend";}}}j.push("on"+m+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+m+"', self, event)\"");}}return j.join(" ");});}function A(e){if(S===undefined){S=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}var f;f=e.replace(L,function d(l,n){var h=n.split(","),g=h.length,j=[],k;for(k=0;k<g;k++){var m=h[k];if(m){if(S){if(m.indexOf("mouse")>-1){continue;}else{if(m==="click"){m="touchend";}}}j.push(m);}}return N+'="'+j.join(" ")+'"';});return f;}var P="preBuildRendering",D="buildRendering",C="postBuildRendering";function b(g){var j=F.isCSPEnabled();var f=g.markupString;if(f.match(/mstrAttach:/)){f=j?A(f):Y(f,g);if(g.markupString===g.constructor.prototype.markupString){g.constructor.prototype.markupString=f;}}var e=O.apply(f,g);if(e){if(e.indexOf(j?"contextmenu":"oncontextmenu")>-1){g.hasContextMenuEvent=true;}if(mstrmojo.usesFrames){var h=(g.domNode&&g.domNode.ownerDocument)||window.document;if(!U||U.ownerDocument!==h){U=h.createElement("span");}}U.innerHTML=e;var i=U.removeChild(U.firstChild);i.mstrmojoId=g.id;F.recursiveReplaceInlineEventListeners(i,true,g);return i;}return null;}function B(f){var e=f.markupSlots,d,g;if(e){d={};for(g in e){d[g]=typeof e[g]==="string"?f.domNode.querySelector(e[g]):e[g].call(f);}}return d;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function c(){if((this[P]&&this[P]()===false)||(this[D]()===false)||(this[C]&&this[C]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var d="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,d)){this.raiseEvent({name:d});}return true;},buildDom:function X(){return b(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function G(){var d=this.domNode,e=this.buildDom();this.domNode=e;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(B(this));this.paint();if(e){var h=d;if(!h){h=this.placeholder;if(h){if(typeof h==="string"){h=document.getElementById(h);}delete this.placeholder;}}if(h){F.replace(h,e);}}var f="onchildRenderingChange",g=this.parent;if(g&&g[f]){g[f](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function W(f){if(this.hasRendered){if(!f){try{var d=this.domNode;if(d.parentNode){d.parentNode.removeChild(d);}}catch(e){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var e=this.markupMethods;if(!e){return ;}var h=this,j=function(m){var l=e[m];if(l){try{l.apply(h,[true]);}catch(i){throw new Error(["Error in markup method.","Script class: "+h.scriptClass,"Widget id: "+h.id,"Method name: "+m,"Err: "+i.message].join("\n\n"));}}};var g=e.sequence,d,f,k;if(g){d=g.length||0;for(f=0;f<d;f++){j(g[f]);}}else{for(k in e){j(k);}}},redraw:function R(){return false;},refresh:function E(d){if(this.hasRendered){if(this.redraw()!==true){var e=this.domNode;this.unrender(true);this.placeholder=e;if(d){d();}this.render();}}},set:function J(h,d){this._super(h,d);if(this.domNode){var e=this.markupMethods,g=e&&e["on"+h+"Change"];if(g){g.apply(this);}}return this;},slotNames:null,addSlots:function H(e){var d=this.slotNames,f;if(!d){d={};this.slotNames=d;}for(f in e){this[f]=e[f];d[f]=true;}},removeSlots:function I(d){if(d){var e=this.slotNames,f;for(f in d){delete this[f];if(e){delete e[f];}}}},captureDomEvent:function a(g,d,h,f){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(g,d,h||d.event,f));}},playEffect:function Z(e){var d=this[e];if(d&&d.constructor===Object){d=mstrmojo.insert(mstrmojo.hash.clone(d));d.widget=this;this[e]=d;}if(d){d.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function Q(e,d){e.prototype.markupMethods=M.copy(d,M.copy(e.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(g,d,f,e){return{name:g,hWin:d,e:f,config:e,ctrlKey:F.ctrlKey(d,f),shiftKey:F.shiftKey(d,f),metaKey:F.isMetaKey(d,f),cancel:function(){F.stopPropogation(d,f);},preventDefault:function(){F.preventDefault(d,f);},getTarget:function(){return F.eventTarget(d,f);}};};}());mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.timefilter.EnumDSSCurrentTimeFilterValue","mstrmojo.timefilter.EnumDSSLastTimeFilterUnit","mstrmojo.timefilter.EnumDSSTimeFilterType");var $HASH=mstrmojo.hash;mstrmojo._SupportRealtimeStreaming=mstrmojo.provide("mstrmojo._SupportRealtimeStreaming",{_mixinName:"mstrmojo._SupportRealtimeStreaming",renderRealtimeData:function renderRealtimeData(A){},onRealtimeTopicChanged:function onRealtimeTopicChanged(A){},isRealtimeStreamingEnabled:function isRealtimeStreamingEnabled(){return this.supportRealtimeStreaming&&!!(this.dataInterface&&this.dataInterface.data.realtimeQueryInfo);},supportRealtimeStreaming:true,getRealtimeFilterInfo:function getRealtimeFilterInfo(){return this.dataInterface&&this.dataInterface.data.rttifs;},getRealtimeUpdateFrequency:function getRealtimeUpdateFrequency(){return this.dataInterface&&this.dataInterface.data.updateFrequency;},getRealtimeTopicId:function getRealtimeTopicId(){if(!this.isRealtimeStreamingEnabled()){throw new Error("The realtime streaming is not enabled!");}var A=this.dataInterface.data.realtimeQueryInfo;return A.topicId||A.topic;},getRealtimeQueryId:function getRealtimeQueryId(){if(!this.isRealtimeStreamingEnabled()){throw new Error("The realtime streaming is not enabled!");}var A=this.dataInterface.data.realtimeQueryInfo;return A.queryId||A.id;},getRealtimeSecretToken:function getRealtimeSecretToken(){if(!this.isRealtimeStreamingEnabled()){throw new Error("The realtime streaming is not enabled!");}var A=this.dataInterface.data.realtimeQueryInfo;return A.secretToken;},registerRealtimeTopic:function registerRealtimeTopic(){mstrApp.raiseEvent({name:"registerRealtimeTopic",value:{queryId:this.getRealtimeQueryId(),topicId:this.getRealtimeTopicId(),secretToken:this.getRealtimeSecretToken(),visKey:this.dataInterface.data.k,}});},unregisterRealtimeTopic:function unregisterRealtimeTopic(B,A,C){mstrApp.raiseEvent({name:"unregisterRealtimeTopic",value:{queryId:B||this.getRealtimeQueryId(),topicId:A||this.getRealtimeTopicId(),secretToken:C||this.getRealtimeSecretToken(),visKey:this.dataInterface.data.k,}});},attachRealtimeListeners:function attachRealtimeListeners(){if(!this.isRealtimeStreamingEnabled()){throw new Error("The realtime streaming is not enabled!");}this._realtimeDataReceivedListener=mstrApp.attachEventListener("realtimeDataReceived",this.id,function(A){if(!this.isRealtimeStreamingEnabled()){return ;}var B=A.value.topicId;if(this.getRealtimeTopicId()===B){this.renderRealtimeData(A.value.data);}});this._realtimeErrorListener=mstrApp.attachEventListener("realtimeError",this.id,function(B){if(this.isRealtimeStreamingEnabled()&&$HASH.walk("value.topicId",B)&&this.getRealtimeTopicId()===B.value.topicId){var A=this.domNode.parentElement;this.destroy();if(A&&$HASH.walk("value.message",B)){A.innerHTML='<div class="mstrmojo-UnitContainer-Realtime-error"><span class="mstrmojo-UnitContainer-Realtime-error-icon"></span>'+mstrmojo.string.encodeHtmlString(B.value.message)+"<div>";}}});this._realtimeConnectionRestoredListener=mstrApp.attachEventListener("realtimeConnectionRestored",this.id,function(A){if(!this.isRealtimeStreamingEnabled()){return ;}});},detachRealtimeListeners:function detachRealtimeListeners(){if(this._realtimeDataReceivedListener){mstrApp.detachEventListener(this._realtimeDataReceivedListener);delete this._realtimeDataReceivedListener;}if(this._realtimeErrorListener){mstrApp.detachEventListener(this._realtimeErrorListener);delete this._realtimeErrorListener;}if(this._realtimeConnectionRestoredListener){mstrApp.detachEventListener(this._realtimeConnectionRestoredListener);delete this._realtimeConnectionRestoredListener;}},update:function update(E){var A="",B="",F="";if(this.isRealtimeStreamingEnabled()){A=this.getRealtimeTopicId();B=this.getRealtimeQueryId();F=this.getRealtimeSecretToken();}function D(){if(A&&B&&F){this.unregisterRealtimeTopic(B,A,F);}}this._super(E);var C="";if(this.isRealtimeStreamingEnabled()){C=this.getRealtimeTopicId();if(C!==A){D.call(this);this.registerRealtimeTopic();}if(!this._realtimeDataReceivedListener){this.attachRealtimeListeners();}}else{D.call(this);this.detachRealtimeListeners();}if(C!==A){this.onRealtimeTopicChanged(A);}},destroy:function destroy(){if(this.isRealtimeStreamingEnabled()){this.unregisterRealtimeTopic();this.detachRealtimeListeners();}this._super();},});(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array","mstrmojo.hash");var I=mstrmojo,G=I.array,E=I.hash,A="00000000000000000000000000000000",F=-1;function K(L){return L&&(L.t===4||L.t===10&&L.targetType===4)&&L.id!==A;}function H(M){var L,N=(M&&M.length)||0;if(N===0){return false;}for(L=0;L<N;L++){if(!K(M[L])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function J(L){},isMetric:function(L){return K(L);},isMetricZone:function(L){return H(L);},getMetricCountInZone:function D(M){var L=0;G.forEach(M,function(N){if(K(N)){L++;}});return L;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(L){return(parseInt(L.did,10)===F)||(L.id===A)||(L.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var a=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function b(e,i,d){var g=this.parseDate(e,d);var h=!!(g&&this.doesDateExist(g.month,g.day,g.year));if(i){if(h){var f=this.formatDateInfo(g,a().DATEOUTPUTFORMAT);if(d){return{match:g.match,formatted:f};}return f;}return null;}return !!h;},formatDateInfo:function S(g,i){if(!i){return"";}var d=g.day,h=g.month,f=g.year;var e=i.replace(/dd/g,this.formatInteger(d,2)).replace(/d/g,Number(d)).replace(/yyyy/g,Number(f)).replace(/yy/g,this.formatInteger(Number(f)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,a().MONTHNAME_FULL[Number(h)-1]).replace(/\~\~\~\~/g,a().MONTHNAME_SHORT[Number(h)-1]).replace(/\@\@/g,this.formatInteger(h,2)).replace(/\^/g,Number(g.month));return e;},_sortFormats:function N(d){return d;},parseDate:function c(q,j,o){if(q==null){return false;}if(typeof q!=="string"){q=String(q);}q=L.trim(q);var n;if(o){n=[].concat(o);}else{n=[].concat(a().DATEINPUTFORMATS);n.unshift(a().DATEOUTPUTFORMAT);}n=this._sortFormats(n);var d=this.CACHE.PARSEDATE[j?"CONTAINS":"EQUALS"],k=n.join()+q,f=d[k];if(f||(f===null)){return f;}var e=null;var g,h;for(g=0,h=n.length;g<h;g++){var m=this._buildRegExp4DateFormat(n[g]),p=m&&q.match(j?m.reContains:m.reEquals);if(p){var l={match:p[0],year:m.yearIndex&&this.fourDigitYear(p[m.yearIndex]),day:m.dayIndex&&parseInt(Number(p[m.dayIndex]),10),month:m.monthIndex&&this.numericMonth(p[m.monthIndex])};if(l.month<1||l.month>12){continue;}if(l.day<1||l.day>31){continue;}e=l;break;}}d[k]=e;return e;},isTime:function I(e,h,d){var i=this.parseTime(e,d);var g=!!(i&&this.doesTimeExist(i.hour,i.min,i.sec));if(h){if(g){var f=this.formatTimeInfo(i,a().TIMEOUTPUTFORMAT);if(d){return{match:i.match,formatted:f};}return f;}return null;}return !!g;},parseTime:function J(q,j,o){if(q==null){return false;}if(typeof q!=="string"){q=String(q);}q=L.trim(q);var n;if(o){n=[].concat(o);}else{n=[].concat(a().TIMEINPUTFORMATS);n.unshift(a().TIMEOUTPUTFORMAT);}var d=this.CACHE.PARSETIME[j?"CONTAINS":"EQUALS"],k=n.join()+q,f=d[k];if(f||(f===null)){return f;}var e=null;var g,h;for(g=0,h=n.length;g<h;g++){var m=this._buildRegExp4TimeFormat(n[g]),p=m&&q.match(j?m.reContains:m.reEquals);if(p){var l=m.ampmIndex&&p[m.ampmIndex];e={match:p[0],hour:m.hourIndex&&this.capitalHour(p[m.hourIndex],l),min:m.minIndex&&parseInt(Number(p[m.minIndex]),10),sec:m.secIndex&&parseInt(Number(p[m.secIndex]),10)};break;}}d[k]=e;return e;},formatTimeInfo:function U(g,e){if(!e){return"";}var f=!(Number(g.hour)%12)?12:(Number(g.hour)%12),d=e.replace(/HH/g,this.formatInteger(g.hour,2)).replace(/H/g,Number(g.hour)).replace(/hh/g,this.formatInteger(f,2)).replace(/h/g,f).replace(/mm/g,this.formatInteger(Number(g.min)||0,2)).replace(/m/g,Number(g.min)||0).replace(/ss/g,this.formatInteger(Number(g.sec)||0,2)).replace(/s/g,Number(g.sec)||0).replace(/a/g,(Number(g.hour)<12)?a().AM_NAME:a().PM_NAME).replace(/tt\b/g,(Number(g.hour)<12)?a().AM_NAME:a().PM_NAME).replace(/AM\/PM/g,(Number(g.hour)<12)?a().AM_NAME:a().PM_NAME);return d;},doesTimeExist:function G(j,e,i){var g=parseInt(j,10);if(g>=0&&g<=23){var d=parseInt(e,10);if(d>=0&&d<=59){if(!i){return true;}var f=parseInt(i,10);if(f>=0&&f<=59){return true;}}}return false;},capitalHour:function C(d,e){d=parseInt(Number(d),10);if(e&&(e.match(a().AM_NAME)||e.match(/AM/i))){return d%12;}if(e&&(e.match(a().PM_NAME)||e.match(/PM/i))){return 12+(d%12);}return d;},getTimeStamp:function P(){var e=new Date();var d=[e.getMonth()+1,e.getDate(),e.getFullYear()];var h=[e.getHours(),e.getMinutes(),e.getSeconds()];var g=(h[0]<12)?"AM":"PM";h[0]=(h[0]<12)?h[0]:h[0]-12;h[0]=h[0]||12;for(var f=1;f<3;f++){if(h[f]<10){h[f]="0"+h[f];}}return d.join("-")+" "+h.join("")+" "+g;},isDateAndOrTime:function Y(d,e){return this.isDateTime(d,e)||this.isDate(d,e)||this.isTime(d,e);},isDateTime:function B(m,d){var h=this.parseDateAndOrTime(m),k=h&&h.date,g=h&&h.time,j=!!k&&!!g&&this.doesDateExist(k.month,k.day,k.year)&&this.doesTimeExist(g.hour,g.min,g.sec);if(d){if(j){var e=this.formatDateInfo(k,a().DATEOUTPUTFORMAT),f=this.formatTimeInfo(g,a().TIMEOUTPUTFORMAT),l=m.indexOf(k.match),i=m.indexOf(g.match);return(i<l)?f+" "+e:e+" "+f;}return null;}return !!j;},parseDateAndOrTime:function R(e,d,i){var f=this.parseDate(e,true,d);var g=L.trim((f&&f.match)?e.replace(f.match,""):e),h=this.parseTime(g,false,i);if(!f&&!h){return null;}return{date:f,time:h};},inDateTimeRange:function Q(f,h,k){var e=this.parseDateAndOrTime(f),i=e&&e.date,l=e&&e.time;if(!i&&!l){return 0;}if(h!=null){var g=this.parseDateAndOrTime(h);if(i&&g&&g.date){var m=this.compareDate(i,g.date);if(m<0){return -1;}if(m==0){if(l&&g.time&&(this.compareTime(l,g.time)<0)){return -1;}}}}if(k!=null){var d=this.parseDateAndOrTime(k);if(i&&d&&d.date){var j=this.compareDate(i,d.date);if(j>0){return 1;}if(j==0){if(l&&d.time&&(this.compareTime(l,d.time)>0)){return 1;}}}}return 0;},compareDate:function A(f,d){if(f===d){return 0;}var g=typeof f==="string"?this.parseDate(f):f,e=typeof d==="string"?this.parseDate(d):d;if(!g){return -1;}if(!e){return 1;}return(g.year-e.year)||(g.month-e.month)||(g.day-e.day)||0;},compareTime:function K(e,d){if(e===d){return 0;}var g=typeof e==="string"?this.parseTime(e):e,f=typeof d==="string"?this.parseTime(d):d;if(!g){return -1;}if(!f){return 1;}return(g.hour-f.hour)||(g.min-f.min)||(g.sec-f.sec)||0;},compareDateTime:function X(e,d){return this.compareDate(e,d)||this.compareTime(e,d);},compareDateAndOrTime:function E(k,i){if(k===i){return 0;}var e=typeof k==="string"?this.parseDateAndOrTime(k):k,d=typeof i==="string"?this.parseDateAndOrTime(i):i;if(!e){return -1;}if(!d){return 1;}var j=e.date,h=d.date,g=e.time,f=d.time;return this.compareDate(j,h)||this.compareTime(g,f);},_buildRegExp4DateFormat:function O(f){if(!f){return null;}var h=this.REGEXPS.DATES[f];if(!h){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=a().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=a().MONTHNAME_SHORT.join("|");}h=this.REGEXPS.DATES[f]={};h.formatStr=f;var e=h.reStr=f.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");h.reEquals=new RegExp("^"+e+"$");if(e.endsWith("\\.")){h.reContains=new RegExp("^"+e);}else{h.reContains=new RegExp("^"+e+"\\b");}var j=[{key:"monthIndex",index:f.indexOf("M")},{key:"dayIndex",index:f.indexOf("d")},{key:"yearIndex",index:f.indexOf("y")}];j.sort(function(k,i){return k.index-i.index;});var d=1,g;for(g=0;g<3;g++){h[j[g].key]=j[g].index>-1?d++:null;}}return h;},_buildRegExp4TimeFormat:function F(g){if(!g){return null;}var j=this.REGEXPS.TIMES[g];if(!j){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[a().AM_NAME,a().PM_NAME,String(a().AM_NAME).toLowerCase(),String(a().PM_NAME).toLowerCase()].join("|");}j=this.REGEXPS.TIMES[g]={};j.formatStr=g;var f=g.replace(/\'\'/g,'"');var k=f.match(/\'(.+?)\'/g);f.replace(/\'(.+?)\'/g,"*");f=f.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt\b/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var h,d;for(h=1,d=(k&&k.length)||0;h<d;h++){f=f.replace(/\*/,k[h]);}f=f.replace(/\"/g,"'");j.reEquals=new RegExp("^"+f+"$");j.reContains=new RegExp(f);var l=[{key:"hourIndex",index:g.search(/h|H/)},{key:"minIndex",index:g.indexOf("m")},{key:"secIndex",index:g.indexOf("s")},{key:"ampmIndex",index:g.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:g.search(/z|Z/)}];l.sort(function(m,i){return m.index-i.index;});var e=1;for(h=0;h<5;h++){j[l[h].key]=l[h].index>-1?e++:null;}}return j;},doesDateExist:function M(g,d,e){var f=new Date(e,g-1,d);return e==f.getFullYear()&&g==f.getMonth()+1&&d==f.getDate();},fourDigitYear:function W(e){e=parseInt(Number(e),10);if(!isNaN(e)){var d=(a().TWODIGITYEARSTART%100)||0;if(e>=0&&e<=d){e=2000+e;}else{if(e>d&&e<100){e=1900+e;}}}return e;},numericMonth:function Z(h){var g=parseInt(Number(h),10),f=mstrmojo.array;if(!isNaN(g)){return g;}var d=(h&&h.length)||0,e=-1;if(d){if(d<=3){e=f.indexOf(a().MONTHNAME_SHORT,h);}if(e===-1){e=f.indexOf(a().MONTHNAME_FULL,h);}}return e+1;},formatInteger:function H(f,e){var j=String(f),h=Math.max(e-j.length,0);if(h>0){var d=[j],g;for(g=1;g<=h;g++){d.push("0");}j=d.reverse().join("");}return j;},getFirstDateOfMonth:function(e,d){return new Date(e,d-1,1);},getDateObject:function(j,e,i,g,h,f){j=j||0;e=e||1;i=i||1;g=g||0;h=h||0;f=f||0;return new Date(j,e-1,i,g,h,f);},getDateFromDateInfo:function(d){return this.getDateObject(d.date&&d.date.year,d.date&&d.date.month,d.date&&d.date.day,d.time&&d.time.hour,d.time&&d.time.min,d.time&&d.time.sec);},getDateJson:function(d){return{year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate(),hour:d.getHours(),min:d.getMinutes(),sec:d.getSeconds()};},isLeapYear:function(d){return !(d%400)||(!(d%4)&&!!(d%100));},getDaysOfMonth:function(f,d){var e=[31,28,31,30,31,30,31,31,30,31,30,31];if(d==2&&this.isLeapYear(f)){return 29;}return e[d-1];},getPreMonth:function(e,d){if(d===1){return{y:e-1,m:12};}return{y:e,m:d-1};},getNextMonth:function(e,d){if(d===12){return{y:e+1,m:1};}return{y:e,m:d+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.locales");var f=mstrmojo.array,Q=mstrmojo.meta.TP,I=mstrmojo.meta.STP,P=mstrmojo.hash,G={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},C={};var Z;for(Z in G){C[G[Z]]=true;}var d={};d[G.AQ]="a";d[G.AL]="a";d[G.AC]="a";d[G.AE]="a";d[G.MQ]="m";d[G.MC]="m";d[G.F]="f";d[G.R]="r";d[G.XML]="p";d[G.ANDOR]="nds";var L={};L[G.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];L[G.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];L[G.AE]=["not","a","fn","es","a2","fm2","p"];L[G.AQ]=["not","a","fm","fn","cs"];L[G.AL]=["not","a","fm","fn","cs"];L[G.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];L[G.R]=["not","r"];L[G.F]=["not","f"];L[G.XML]=["not","n","p"];L[G.ANDOR]=["not","node","nds","fn"];var N={};N[G.MQ]="METRIC_FNS";N[G.MC]="METRIC_FNS";N[G.AQ]="FORM_FNS";N[G.AL]="FORM_FNS";N[G.AC]="FORM_FNS";N[G.AE]="ELEM_FNS";var O={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,PARAMETER:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47,OLD_DE:48,UNSTRUCTURED_DATA:90},e={FILTER:256,CUSTOMGROUP:257,FOLDER:2048,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,PARAMETER_LONG:2562,PARAMETER_STRING:2563,PARAMETER_DOUBLE:2564,PARAMETER_DATE:2565,PARAMETER_OBJECT:2566,PARAMETER_ELEMENTS:2567,PARAMETER_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,FACT_METRIC:1033,METRIC:1024,ATTR:3072,RECURSIVE_ATTR:3076,DERIVED_ATTR:3077,SMART_ATTR:3078,CONS:12032,NDE:12033},W={a:O.ATTR,a2:O.ATTR,m:O.METRIC,m2:O.METRIC,r:O.REPORT,f:O.FILTER,p:O.PROMPT},X={f:e.FILTER};var Y={};Y[G.MQ]=O.METRIC;Y[G.MC]=O.METRIC;Y[G.AQ]=O.ATTR;Y[G.AL]=O.ATTR;Y[G.AC]=O.ATTR;Y[G.AE]=O.ATTR;Y[G.F]=O.FILTER;Y[G.R]=O.REPORT;var K=function(g){var H=g.length,j={},h;for(h=0;h<H;h++){var k=g[h];j[k.did]=k.n;}return j;},F=function(h){var H=h.length,j;for(j=0;j<H;j++){var g=h[j];if("tp" in g){g.t=g.tp;}}return h;},a=function(h,k){var H=h.length,j;for(j=0;j<H;j++){var g=h[j];if("tp" in g){if(k){g.t=k;}else{delete g.t;}}}return h;},c=function(g,j){if(!j){j=[];}j.length=0;var h,H;for(h=0,H=g.length;h<H;h++){j[h]=g[h];}return j;},M={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var S={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:G,ETs:C,ET2TGT:d,ET2COND:L,ET2TP:Y,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158,DESCENDANT:187,CONTAINS:76,DOES_NOT_CONTAIN:79,BEGINS_WITH:77,DOES_NOT_BEGIN_WITH:80,END_WITH:78,DOES_NOT_END_WITH:81,LIKE:18,NOT_LIKE:43,IN:22,NOT_IN:57},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:O,STP:e,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30,NUMERICALLOWSPERCENTAGE:49},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":e.PROMPT,1:e.PROMPT_LONG,2:e.PROMPT_LONG,3:e.PROMPT_LONG,4:e.PROMPT_DOUBLE,5:e.PROMPT_DOUBLE,6:e.PROMPT_DOUBLE,7:e.PROMPT_DOUBLE,8:e.PROMPT_STRING,9:e.PROMPT_STRING,10:e.PROMPT_STRING,14:e.PROMPT_DATE,15:e.PROMPT_DATE,16:e.PROMPT_DATE,21:e.PROMPT_LONG,22:e.PROMPT_LONG,23:e.PROMPT_STRING,24:e.PROMPT_BOOLEAN,30:e.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function B(h,g){var i=this.FN,j=this.FN_MRP,H=this.FNT;if(g===H.DEF||g===undefined){switch(h){case i.BETWEEN:case i.NOT_BETWEEN:return 2;case i.IS_NULL:case i.IS_NOT_NULL:return 0;}}else{if(g===H.PER||g===H.RANK){switch(h){case j.BETWEEN:case j.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function U(g,H){var h=this.FN;return g==h.IN_LIST||g==h.NOT_IN_LIST;},fn_AC_MC:function b(g,H){var h=this.FN;return(g==h.EQUAL)||(g==h.NOT_EQUAL)||(g==h.GREATER)||(g==h.LESS)||(g==h.GREATER_EQUAL)||(g==h.LESS_EQUAL);},fn_PRM:function A(H){var g=this.FN;switch(H){case g.CONTAINS:case g.DOES_NOT_CONTAIN:case g.BEGINS_WITH:case g.DOES_NOT_BEGIN_WITH:case g.END_WITH:case g.DOES_NOT_END_WITH:case g.LIKE:case g.NOT_LIKE:case g.IN:case g.NOT_IN:return true;default:}return false;},fnName:function R(l,k,g,j){var H=this[N[l]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[j]]||H["*"];}if(l===G.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var h=f.find(H,"did",(g||1)+this.FN_SEP+k);if(h>-1){return H[h].n;}return"";},findTargets:function J(q,l,w){if(!w){w={};}if(q){var p;for(p in W){var AC=q[p];if(AC){if(!AC[Q]){AC[Q]=W[p];}if(!AC[I]&&X[p]){AC[I]=X[p];}w[AC[l]]=AC;}}if(q.dmy){var n=this.TP.ATTR,x=this.DMY_TP.ATTR,j=q.dmy.uts,AB,g;for(AB=0,g=(j&&j.length)||0;AB<g;AB++){var o=j[AB];if(o&&o.utp===x){var m=o.utgt;if(!m.t){m.t=n;}w[m[l]]=m;}}}var H=q.nds,s,z;for(s=0,z=(H&&H.length)||0;s<z;s++){this.findTargets(H[s],l,w);}var y=q.cs,AA=y&&y.length;if(AA){for(s=0;s<AA;s++){this.findTargets(y[s],l,w);}}}return w;},onLocaleUpdated:function(){var g=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=P.copy(K(g.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=c(a(g.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":a(f.filter(g.Metric.concat(g.MetricRP),function(h){return h.did&&(f.find(S["0"],"did",h.did)<0);}))};H.FORM_FNS={0:a(f.filter(g.Attribute,function(h){return h.did&&(f.find(M["0"],"did",h.did)<0);})),1:a(f.filter(g.Attribute,function(h){return h.did&&(f.find(M["1"],"did",h.did)<0);})),2:a(f.filter(g.Attribute,function(h){return h.did&&(f.find(M["0"],"did",h.did)<0)&&(f.find(M["1"],"did",h.did)<0);}))};H.DIMTYLEVELS=c(a(g.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function E(j){var h=-1,H=0,g=1,i=2;function k(l){switch(l.t){case O.METRIC:return g;case O.ATTR:case O.DIM:case O.CONS:return H;case O.FILTER:return l.st===e.CUSTOMGROUP?H:i;case -1:return h;default:return i;}}j=f.map(j||[],function(l){return P.copy(l,{});});return j.sort(function(p,o){var q=k(p)-k(o);if(q){return q;}var n=p.n.toUpperCase(),m=o.n.toUpperCase(),l=n.localeCompare(m);if(l){return l;}return p.n.localeCompare(o.n);});},mapBaseFormTypeToDataType:function D(h){h=parseInt(h);if(h===NaN){return -1;}var g=this.BFTP,H=this.DTP;switch(h){case g.DATETIME:return H.TIMESTAMP;case g.DATE:return H.DATE;case g.TIME:return H.TIME;case g.NUMBER:return H.REAL;case g.TEXT:return H.CHAR;case g.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.func");var H=mstrmojo.array,J=mstrmojo.hash,O=mstrmojo.expr,P=mstrmojo.func,W=O.TP,R=O.STP,M=W.METRIC,I=W.ATTR,L=W.PARAMETER,E="-1";mstrmojo.vi.ui.rw.xtab._SupportXtabThresholds=mstrmojo.provide("mstrmojo.vi.ui.rw.xtab._SupportXtabThresholds",{_mixinName:"mstrmojo.vi.ui.rw.xtab._SupportXtabThresholds",getClearThresholdAction:function C(a,Y,Z){return{act:"clearThreshold",unitId:a,unitType:Y,tid:Z};},addClearActions:function F(b,Z,a,c,Y){Z.reverse().forEach(function(d){c.push(b.model.getClearThresholdAction(a,Y,d.tid));});},getCreateSimpleThresholdAction:function A(d,b,Y,c,a,Z){return{act:"threshold",nodeKey:b,thresholds:d,thresholdType:c,basedOnId:a||Y,did:Y,objType:Z};},getThresholdTargets:function Q(d){var a=this,Z=J.clone(d.mx),b=[],Y=H.filter(d.pages||[],function(e){return e.did!==E;}),c=d.rows.concat(d.cols).concat(Y);Z.forEach(function(e){e.t=4;});if(P.safeCall("supportFeature",mstrApp)($FEATURES.SUPPORT_PARAMETERS)){b=H.map(a.docModel.parameters,function(e){return J.copy(e,{isParameter:true,t:L,ttp:e.n});});}c=c.concat(Z).concat(b).filter(function(g){var e=g.t,h=g.st,f=g.did;return !((e===W.FILTER&&h===R.CUSTOMGROUP)||(e===W.CONS&&h===R.CONS)||(a.hasDerivedElements(f))||(f===E)||(e===W.DIM));});return c;},cleanupThresholdTargets:function S(a){var Y=this.docModel.datasets;function Z(b,c){for(var f in Y){var g=Y[f],e=c===M?g.mx:g.att;for(var d=0;d<e.length;d++){if(e[d].did===b){return e[d];}}}return null;}a.forEach(function(d){var c;if(d.t===I){c=this.getObjectInfo(d.did)||Z(d.did,d.t);d.da=c?c.da:undefined;d.nonAggregatable=c?c.nonAggregatable:undefined;}else{if(d.t===W.CONS&&d.st===R.NDE){c=this.getObjectInfo(d.did)||Z(d.did,d.t);d.ndetype=c&&c.ndetype;}else{if(d.t===M){var b=this.getFullObjectInfo(d.did)||Z(d.did,d.t);d.dt=b&&b.dt;}}}},this);},getThresholdSupportsFeatureCallback:function D(Y,d,c){var a=mstrmojo.threshold.ThresholdModel.FEATURES,Z=this;c=c||{};return function b(g){switch(g){case a.SHOW_ADVANCED_EDITOR:return !Y;case a.SHOW_BASED_ON:return !Y;case a.SHOW_IMAGE:return d;case a.SHOW_COLOR_TREND:return c.canSupportColorTrend;case a.SHOW_MC_ADVANCED_EDITOR:return c.canShowMCAdvancedEditor;case a.SHOW_VALUE_ITEM:var f=Z.getFullObjectInfo(this.model.basedOnId),h=f&&f.dt,e=[8,9,10,14,15,16,30];return !h||e.indexOf(h)===-1;}};},getThresholdSubmitActionsCallback:function B(){var Y=this,Z=Y.xtab;return function(j,c,b,d,h,i,a){var g=this,f=Z.k,e=[];if(c){Y.addClearActions(Z,c,b,e,a);}e.push(Y.getCreateSimpleThresholdAction(j,f,b,h,d,a));Z.controller.submitUndoRedoTemplateUpdates(Z,e,{success:function(){if(i){g.set("data",Y.data);g.openEditor();i=false;}}});};},getThresholdSaveCallback:function G(){return function(a,Y,Z,c,b){this.dataService.saveThresholds(J.copy(c,{thresholds:JSON.stringify(a),basedOnId:Y,thresholdType:Z}),b,{hideFailureErr:true});};},getThresholdLoadCallback:function N(){var Y=this;return function(a,b){var Z=this.model;this.dataService.getThresholds({thresholdsID:b},{success:function(h){var g=h.thresholds,d=[],c,i,f={};H.forEach(g||[],function(j){c=O.findTargets(j.expr,"did");i=true;J.forEach(c,function(k,l){if(!Y.getObjectInfo(l)){f[l]=k.n;i=false;}});if(i){d.push(j);}});if(!J.isEmpty(f)){var e=J.valarray(f);mstrmojo.alert(mstrmojo.desc(15431,"The following objects: # are not on the visualization, so some thresholds will not be loaded...").replace("#",e.join(",")));}Z.addThresholds(d);}});};},getThresholdControllerParams:function U(h,b,f,Y,c,Z){var a=this,g=a.docModel,e=a.data,d=h.did||h.id;return{metricId:d,objectType:h.t,title:Y,data:e,targets:c,messageId:g.mid,datasets:g.datasets,dataService:g.getDataService(),supportsFeature:this.getThresholdSupportsFeatureCallback(b,f,Z),onSubmitActions:this.getThresholdSubmitActionsCallback(),onSaveThresholds:this.getThresholdSaveCallback(),onLoadThresholds:this.getThresholdLoadCallback()};},openThresholdEditor:function K(b,Y,d){var c=b.did||b.id,Z=mstrmojo.desc(3647,"Thresholds"),a=function(){if(b.t===M||b.t===I){var f=this.getThresholdTargets(this.data.gsi);this.cleanupThresholdTargets(f);if(c!==E){Z+=" - "+b.n;}var g=mstrmojo.threshold.ThresholdController;var e=new g(this.getThresholdControllerParams(b,Y,d,Z,f));if(b.t===I){e.model.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.ADVANCED_EDITOR;}e.openEditor();}}.bind(this);mstrmojo.loader.loadBundleWithCss("mstrmojo.threshold.ThresholdController","html5-vi-editor-all.js",[mstrmojo.getJsRoot()+"mojo/css/html5-vi-editor-all.css"],a);},buildThresholdMenuOptions:function X(e,Z,d,k){var c=this,m=Z.item,j=m.did,Y=c.xtab,i=c.data,l=i.gsi,b=l.thresholds,h=b&&b[j],f=mstrmojo.desc(13261,"Clear Thresholds"),g=Y.excludeData,a=Y.isBinaryData;if((!g&&m.t===M)||m.t===I&&!c.docModel.isOldDEObject(j)){e.addMenuItem(h?mstrmojo.desc(19946,"Edit Thresholds..."):mstrmojo.desc(6050,"Thresholds..."),"",function(){c.openThresholdEditor(m,d,k);},this);if(j!==E){if(h&&!a){e.addMenuItem(f,"",function(){var n=Y.controller,o=[];c.addClearActions(Y,h,j,o,m.t);n.submitUndoRedoTemplateUpdates(Y,o);},this);}}}},});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.vi.enums.ParameterEnums","mstrmojo.vi.enums.EnumParameterFetchInfo");var L=mstrmojo.array,M=mstrmojo.hash,P=mstrmojo.expr,G=mstrmojo.vi.enums.ParameterEnums.ALLOWED_VALUE_TYPE,U=P.STP,X=P.TP;mstrmojo.models.ParametersInterface=mstrmojo.provide("mstrmojo.models.ParametersInterface",{isParameterItem:function Z(b){return b&&b.t===X.PARAMETER;},isObjectParameterItem:function A(b){return this.isParameterItem(b)&&b&&b.st===U.PARAMETER_OBJECT;},isDashboardParameterItem:function O(d,b){const c=b&&b.parameters;return this.isParameterItem(d)&&L.find(c,"did",d.id)>-1;},isCanceledObjectParameterItem:function a(b){return this.isObjectParameterItem(b)&&b&&b.canceled;},isMetricParameterItem:function E(b){return this.isObjectParameterItem(b)&&b&&b.targetType===X.METRIC;},isValueParameterItem:function S(b){return this.isParameterItem(b)&&b&&b.st!==U.PARAMETER_ELEMENTS&&b.st!==U.PARAMETER_OBJECT;},isElementListParameterItem:function Y(b){return this.isParameterItem(b)&&b&&b.st===U.PARAMETER_ELEMENTS;},isDateParameterItem:function N(b){return this.isParameterItem(b)&&b&&b.st===U.PARAMETER_DATE;},isNumericParameterItem:function B(b){var c=b&&b.st;return this.isParameterItem(b)&&c===U.PARAMETER_LONG||c===U.PARAMETER_DOUBLE||c===U.PARAMETER_BIGDECIMAL;},isTextParameterItem:function D(b){return this.isParameterItem(b)&&b&&b.st===U.PARAMETER_STRING;},isUserInputType:function J(b){return this.isParameterItem(b)&&b&&b.allowedValueType===G.USER_INPUT;},isFixedListType:function I(b){return this.isParameterItem(b)&&b&&b.allowedValueType===G.FIXED_LIST;},isRangeType:function W(b){return this.isParameterItem(b)&&b&&b.allowedValueType===G.RANGE;},getParameterItem:function Q(g,b,f){var e,d,c=function(){L.some(d,function(h){if(h.did===g){e=h;return true;}return false;});};if(f){d=M.walk("datasets."+f,b);c();}if(!e){d=b.parameters||[];c();}if(!e){M.forEach(b.datasets,function(h){if(h.parameters){d=h.parameters;c();if(e){return false;}}});}return e;},polishGSIParameterLayout:function K(d,c){function b(i,g){for(var h in i){if(i.hasOwnProperty(h)&&!g.hasOwnProperty(h)&&h!=="_renderIdx"){if(i[h]!==null&&typeof i[h]==="object"){g[h]=M.clone(i[h]);}else{g[h]=i[h];}}}}if(d&&c&&c.docModel){var f=["rows","cols","mx"];var e=d.parameterLayout||{};L.forEach(f,function(j){var h=e[j];if(h){for(var g=0;g<h.length;g++){if(!h[g].isParameter){var k=this.getParameterItem(h[g].did,c.docModel);if(k){b(k,h[g]);}}}}},this);}},polishDZParameterLayout:function C(f,c,j){if(!f){return ;}var d=[];if(j){const k=["rows","cols","mx"];for(var e=0;e<k.length;e++){const h=k[e];d=d.concat(j[h]);}}for(var b in f){if(f.hasOwnProperty(b)){const g=["TemplateUnit","TemplateMetric"];L.forEach(g,function(p){const m=f[b][p];if(!m){return ;}for(var n=0;n<m.length;n++){const o=m[n];if(this.isParameterItem(o)&&!o.isParameter&&o.id){const q=this.getParameterItem(o.id,c.docModel);M.copy(q,o);const l=L.filterOne(d,function(i){return i.did===o.id;});if(l&&l.n){o.n=l.n;}}}},this);}}},isSingleSelection:function H(h,g){if(!h||!g){return false;}var f=g instanceof Array?g:[g];for(var e=0;e<f.length;e++){var b=0;var c=(f[e].rows||[]).concat(f[e].cols||[],f[e].mx||[]);for(var d=0;d<c.length;d++){if(c[d].paraId===h){b++;if(b>1){return false;}}}if(b===1){return true;}}return false;},dropOPSelection:function R(b){if(!Array.isArray(b)){return b;}return b.filter(function(c){return !c.paraId;});},hasOPInGrid:function F(d){if(!d){return false;}function f(j){var g=(j.rows||[]).concat(j.cols||[],j.mx||[]);for(var h=0;h<g.length;h++){if(g[h].t===X.PARAMETER){return true;}}return false;}if(Array.isArray(d)){for(var c=0;c<d.length;c++){var b=d[c]||{},e=b.parameterLayout||{};if(f(e)){return true;}}return false;}else{return f(d.parameterLayout||{});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8,INVALID_BAD_MIN_MAX:9},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var I=mstrmojo.validation,C=I.TRIGGER,f=I.STATUSCODE,B={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5,49:7};I.VALIDATOR={DEMO:function O(i){var h=parseInt(i,10),j=mstrmojo.validation.STATUSCODE;if(h===0||h===1||h>10){return{code:j.VALID};}return{code:j.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function K(h){var i=String(h).replace(/[^\d]/g,"");if(i.length<10){return{code:f.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!I.REGEXP.PHONE_NUMBER.test(h)){return{code:f.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:f.VALID};},VALIDATE_ZIPCODE:function H(h){var j="",i=this.dtp;if(!I.REGEXP.US_ZIP.test(h)){if(I.isNumeric(i)||I.isInt(i)){j=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(I.isString(i)){j=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:f.INVALID,msg:j};}return{code:f.VALID};},VALIDATE_EMAIL:function W(h){var i=h.indexOf("@");if(i===-1){return{code:f.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(h.substring(i).indexOf(".")===-1){return{code:f.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return I.REGEXP.EMAIL_ADDRESS.test(h)?{code:f.VALID}:{code:f.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function R(h){var j=this.dtp,i;if(I.isNumeric(j)||I.isInt(j)){i=String(h).replace(/[^\d]/g,"");if(i.length!==9){return{code:f.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!I.REGEXP.SOCIAL_SECURITY_NUMBER.test(h)){return{code:f.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:f.VALID};}};I.isInt=function E(h){return B[h]===1;};I.isNumeric=function c(h){return B[h]===2||B[h]===5;};I.isEnhNumeric=function J(h){return B[h]===7;};I.isString=function L(h){return B[h]===3;};I.isDateTime=function A(h){return B[h]===6;};var U=mstrmojo.expr,N=U.DTP,d=mstrmojo.num,X=mstrmojo.string,G=mstrmojo.date;function Q(q,s){var m=q.dtp,p=q.constraints,u=p.allowedFormatChars||"",k=I.isInt(m),h=I.isNumeric(m),l=I.isEnhNumeric(m),i=I.isDateTime(m),t=mstrmojo.locales.number.THOUSANDSEPARATOR,j=mstrmojo.locales.number.DECIMALSEPARATOR,o,n=this.listSep;if(k){if(!q._intRegExp){u+="0-9-"+(q.isList?n:"")+t;q._intRegExp=new RegExp("[^"+u+"]");}o=q._intRegExp;}if(h){if(!q._numericRegExp){u+="0-9-#"+(q.isList?n:"")+j+t;q._numericRegExp=new RegExp("[^"+u+"]");}o=q._numericRegExp;}if(l){if(!q._percentageRegExp){u+="0-9-#"+(q.isList?n:"")+j+t+"%";q._percentageRegExp=new RegExp("[^"+u+"]");}o=q._percentageRegExp;}return !!o&&o.test(s);}function g(q,t){var n=q.dtp,p=q.constraints,k=I.isInt(n),h=I.isNumeric(n),l=I.isEnhNumeric(n),i=I.isDateTime(n),j=p.min,s=p.max,o;if(j===undefined&&s===undefined){return false;}if(k||h){if(d.isBigDecimal(t)){return d.inNumericRange(d.parseBigDecimal(t),j,s)!==0;}return d.inNumericRange(t,j,s)!==0;}if(i){return G.inDateTimeRange(t,j,s)!==0;}if(l){var m=d.toLocaleString(d.parseEnhNumeric(t));j=d.parseEnhNumeric(d.toLocaleString(j));s=d.parseEnhNumeric(d.toLocaleString(s));return d.inNumericRange(m,j,s)!==0;}return false;}function M(i,h){return !d.isNumeric(h)&&!d.isBigDecimal(h);}function D(i,h){return !d.isNumeric(h,true);}function S(k,i){var j=(k.dtp===N.DATE),h=(k.dtp===N.TIME);return(j?!G.isDate(i):(h?!G.isTime(i):!G.isDateAndOrTime(i)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:N.INTEGER,isList:false,autoFormat:false,suffix:"",validationStatus:null,listSep:mstrConfig.listSep,init:function a(h){this._super(h);if(!this.constraints){this.constraints={};}var i=this.constraints;if(!i.hasOwnProperty("trigger")){i.trigger=C.NONE;}},_set_value:function(m,j){var k=this.value,i=(k!==j);if(i){this.value=j;var l=this.constraints.trigger,h=(l&C.VALUESET)>0;if(h){this.validate(j);}}return i;},getValueList:function Z(h){return this.isList?h.split(this.listSep):[h];},validate:function P(){var k=(this.value!==null&&this.value!==undefined)?this.value:"",n=this.getValueList(k),m,j,o,h=n.length,l;for(l=0;l<h;l++){m=this.doValidation(n[l]);j=(m.code>f.VALID);if(j){if(h>1){m.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",n[l]||" ");}break;}}o=j?"onInvalid":"onValid";if(!j&&this.autoFormat){this.format();}this.set("validationStatus",m);if(this[o]){this[o](m);}},format:function b(){if(this.suffix!==""&&!this.value.endsWith(this.suffix)){this.set("value",this.value+this.suffix);return ;}var n=this.dtp,k=I.isDateTime(n);if(!k){return ;}var p=this.listSep,t=this.value||"",j=this.isList?t.split(p):[t],s=n===14,q=[],h,l=mstrmojo.locales.datetime,o=j.length,m;for(m=0;m<o;m++){t=j[m];h=G.parseDateAndOrTime(t);if(h){if(s&&h.date){q.push(G.formatDateInfo(h.date,l.DATEOUTPUTFORMAT));}else{q.push((h.date?G.formatDateInfo(h.date,l.DATEOUTPUTFORMAT):"")+" "+(h.time?G.formatTimeInfo(h.time,l.TIMEOUTPUTFORMAT):""));}}}this.set("value",q.join(p));},isValid:function Y(){var h=this.validationStatus;if(!h){this.validate();}return this.validationStatus.code===f.VALID;},clearValidation:function e(){this.set("validationStatus",{code:f.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function F(w){var s=this.constraints,t=s.regExp,j=s.validator,h={id:this.id,code:f.VALID,msg:""},q=this.dtp,o=I.isInt(q),i=I.isNumeric(q),p=I.isEnhNumeric(q),k=I.isString(q),l=I.isDateTime(q),n=X.isEmpty(w),u=String(w).length,m="",y=mstrmojo.locales.validation;if(this.required&&n){h.code=f.INVALID_EMPTY;h.msg=y.requiredFieldError;return h;}w=X.trim(w);if(this.autoFormat&&this.suffix!==""&&w.endsWith(this.suffix)){w=w.slice(0,-this.suffix.length);}if(!n&&Q(this,w)){if(o){m=y.integerDataType;}if(i){m=y.numericDataType;}if(l){m=y.dateDataType;}h.code=f.INVALID_CHAR;h.msg=y.invalidCharError.replace("#",m);return h;}if(!n&&l&&S(this,w)){h.code=f.INVALID_BAD_DATESTRING;h.msg=y.invalidDateStringError;return h;}if(!n&&(i||o)&&M(this,w)){h.code=f.INVALID_BAD_NUMERICFORMAT;h.msg=y.invalidNumericFormatError;return h;}if(!n&&p&&D(this,w)){h.code=f.INVALID_BAD_NUMERICFORMAT;h.msg=y.invalidNumericFormatError;return h;}if(!n&&(o||i||l||p)&&g(this,w)){h.code=f.INVALID_OUTOFRANGE;if(s.min!==null&&s.max!==null){m=y.outofRangeError.replace("# ","").replace("##",d.toLocaleString(s.min)).replace("###",d.toLocaleString(s.max));}else{if(s.min!==null){m=y.noLessMinError.replace("##",d.toLocaleString(s.min)).replace("# ","");}else{if(s.max!==null){m=y.noGreaterMaxError.replace("###",d.toLocaleString(s.max)).replace("# ","");}}}h.msg=m;return h;}if(k&&s.minLen!==null&&s.maxLen!==null){if(u<s.minLen||u>s.maxLen){h.code=f.INVALID;h.msg=mstrmojo.desc(9211).replace(/#/,s.minLen).replace(/##/,s.maxLen);return h;}}if(t&&!t.test(w)){h.code=f.INVALID_REGEX;h.msg=mstrmojo.desc(9205);return h;}var x=j&&j.apply(this,[w]);if(x){h.code=x.code;h.msg=x.msg;return h;}return h;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType","mstrmojo.vi.enums.EnumExtendedPromptType");mstrmojo.requiresDescs(308,5923,7930,5282,5283,2793,2787,2788,12298);var D=mstrmojo.string,d=mstrmojo.expr,S=d.ET,R=mstrmojo.array,c=mstrmojo.hash;var g=d.FN,G=d.STP,e=d.DTP,Q=d.BRANCH_FNS[g.NOT],k=mstrmojo.mstr.EnumDSSXMLObjectTypes,L=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,U=mstrmojo.mstr.EnumDSSConsolidationType,Z=mstrmojo.vi.enums.EnumExtendedPromptType.PARAMETER,I=55,W=5;function C(l){return D.htmlAngles(l)||"";}var A={betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),andText:mstrmojo.desc(5282,"AND"),orText:mstrmojo.desc(5283,"OR"),boldandText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5282,"AND")+"</span>",boldorText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5283,"OR")+"</span>",whereText:mstrmojo.desc(2793,"Where (##)"),notText:mstrmojo.desc(12298,"NOT")};var j={"*":function(m,l){return{html:m?('<span class="mstrmojo-unknown">'+(C(m.n||m.xml)||"...")+"</span>"):null,text:m?(C(m.n||m.xml)||"..."):null};}};function h(l){return !!l.not||l.fn===g.NOT_EQUAL||l.fn===g.NOT_IN_LIST||l.fn===g.NOT_BETWEEN||l.fn===g.NOT;}function M(l){if(l&&l.not){return{html:'<span class="mstrmojo-text mstrmojo-not">'+Q+"</span>",text:Q+" "};}return{html:"",text:""};}function f(o,m){var l=o&&((m?'<span class="mstrmojo-ListIcon t'+m+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+C(o)+"</span>");return{html:l,text:o&&((m?m+" ":"")+C(o))};}function b(l,n){var m=n&&n.trim().split(" ")||[];if(l.t===k.Attribute&&l.st===L.AttributeRecursive){m.push("recursive");}else{if(l.t===k.Consolidation&&l.st===L.ConsolidationManaged){m.push("derived");if(l.ndetype===U.DssRecursiveDerivedElement){m.push("recursive");}}}return m.join(" ");}function K(m,l){var n=C(m.n);return{html:'<span class="mstrmojo-text mstrmojo-attr '+b(m,l)+'">'+n+"</span>",text:n};}function P(s,m,u,q){var n=u&&u.length||0;if(n){s.push('<span class="mstrmojo-elems">');m.push("[");var o=s.length,p="";for(var t=0;t<n;t++){s[o++]='<span class="mstrmojo-text mstrmojo-elem">';p=C(u[t].n);s[o++]=p;m.push(p);if(t<n-1){s[o++]=", ";m.push(", ");}s[o++]="</span>";}s[o++]="</span>";m.push("]");}else{s.push('<span class="mstrmojo-text mstrmojo-emptyelems">'+q+"</span>");m.push(q);}}function X(q,p){var o=[],l=[],n=(p&&p.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")",m=C(q.p.n),t=p&&(p.include===false||p.unset===true)?mstrmojo.desc(2220,"Not In List"):mstrmojo.desc(2219,"In List"),s=q.p.es;o.push('<span class="mstrmojo-text mstrmojo-parameter">'+m+"</span>");l.push(m);o.push('<span class="mstrmojo-text mstrmojo-fn">'+t+"</span>");l.push(" "+t+" ");P(o,l,s,n);return{html:o.join(""),text:l.join("")};}j[S.R]=function(m,l){return f(m.r&&m.r.n,m.r&&m.r.t);};j[S.F]=function(m,l){return f(m.f&&m.f.n,m.f&&m.f.t);};j[S.XML]=function(n,m){var l=n.p&&(n.p.isParameter||n.p.pet===Z);if(l){return X(n,m);}return f(n.n||n.p&&n.p.n||n.xml,n.p&&n.p.t);};j[S.AE]=function(q,m){var o=[],l=[],n=(m&&m.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")";if(q&&q.a&&q.a.n){var p=K(q.a);o.push(p.html);l.push("{"+p.text+"}");var s=C(d.fnName(q.et,q.fn,q.fnt));o.push('<span class="mstrmojo-text mstrmojo-fn">'+s+"</span>");l.push(" "+s+" ");P(o,l,q.es,n);}return{html:o.join(""),text:l.join("")};};j[S.AQ]=function(AG,n){var AE=[],u=[];if(AG&&AG.a&&AG.a.n){var p=K(AG.a);AE.push(p.html);u.push("{"+p.text+"}");if(AG.fm&&AG.fm.n){var AI=C(AG.fm.n);AE.push('<span class="mstrmojo-text mstrmojo-form">'+AI+"</span>");u.push("("+AI+")");if(AG.fn!=null){var w=C(d.fnName(AG.et,AG.fn,AG.fnt,AG.fm.dtp));AE.push('<span class="mstrmojo-text mstrmojo-fn">'+w+"</span>");u.push(" "+w+" ");var x=d.fnCstCount(AG.fn,AG.fnt);if(AG.et===S.AC){if(x>=1){if(AG.a2&&AG.a2.n){var AB=C(AG.a2.n);AE.push('<span class="mstrmojo-text mstrmojo-attr2">'+AB+"</span>");u.push("{"+AB+"}");if(AG.fm2&&AG.fm2.n){var AF=C(AG.fm2.n);AE.push('<span class="mstrmojo-text mstrmojo-form2">'+AF+"</span>");u.push("("+AF+")");}}if(x>1){AE.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");u.push(" "+A.betweenText+" ");if(AG.a3&&AG.a3.n){var m=C(AG.a3.n);AE.push('<span class="mstrmojo-text mstrmojo-attr3">'+m+"</span>");u.push("{"+m+"}");if(AG.fm3&&AG.fm3.n){var o=C(AG.fm3.n);AE.push('<span class="mstrmojo-text mstrmojo-form3">'+o+"</span>");u.push("("+o+")");}}}}}else{if(AG.et===S.AL){var l=AG.cs||[],q=[];for(var AC=0,AD=l.length;AC<AD;AC++){q.push(C(l[AC].v));}var z=q.join(mstrConfig.listSep);AE.push('<span class="mstrmojo-text mstrmojo-c1">'+z+"</span>");u.push("["+z+"]");}else{if(c.walk("cs.0.p.isParameter",AG)||c.walk("cs.0.p.pet",AG)===Z){var l=AG.cs,AA=l&&l[0],AH=C(c.walk("p.n",AA));AE.push('<span class="mstrmojo-text mstrmojo-parameter">'+AH+"</span>");u.push(AH);}else{if(x>=1){var l=AG.cs,AA=l&&l[0];var AH=C(AA&&AA.p&&AA.p.n||AA&&AA.v);AE.push('<span class="mstrmojo-text mstrmojo-c1">'+AH+"</span>");u.push(AH);if(x>1){var y=l&&l[1];AE.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");u.push(" "+A.betweenText+" ");var s=C(y&&y.p&&y.p.n||y&&y.v);AE.push('<span class="mstrmojo-text mstrmojo-c1">'+s+"</span>");u.push(s);}}}}}}}}return{html:AE.join(""),text:u.join("")};};j[S.AC]=j[S.AQ];j[S.AL]=j[S.AQ];j[S.MQ]=function(AH,AJ){var AG=[],y=[],AC=AH&&AH.m,AL=AC&&AC.n;if(AL){var m=AH.fnt,q=d.FNT.PER,AF=d.FNT.RANK;AL=m===q?mstrmojo.desc(2787,"Percentage of ##").replace("##",AL):m===AF?mstrmojo.desc(2788,"Rank of ##").replace("##",AL):AL;AG.push('<span class="mstrmojo-text mstrmojo-metric">'+C(AL)+"</span>");y.push(C(AL));if(AH.fn!=null){var z=C(d.fnName(AH.et,AH.fn,m,d.DTP.REAL));AG.push('<span class="mstrmojo-text mstrmojo-fn">'+z+"</span>");y.push(" "+z+" ");var AA=d.fnCstCount(AH.fn,m);if(AH.et==d.ET.MC){if(AA>=1){var AK=(AH.m2&&AH.m2.n)||(AH.c2&&AH.c2.v)||"?";AG.push('<span class="mstrmojo-text mstrmojo-m2">'+C(AK)+"</span>");y.push(C(AK));if(AA>1){AG.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");y.push(" "+A.betweenText+" ");var o=(AH.m3&&AH.m3.n)||(AH.c3&&AH.c3.v)||"?";AG.push('<span class="mstrmojo-text mstrmojo-m3">'+C(o)+"</span>");y.push(C(o));}}}else{if(c.walk("cs.0.p.isParameter",AH)||c.walk("cs.0.p.pet",AH)===Z){var n=AH.cs,AD=n&&n[0],AI=C(c.walk("p.n",AD));AG.push('<span class="mstrmojo-text mstrmojo-parameter">'+AI+"</span>");y.push(AI);}else{if(AA>=1){var n=AH.cs,AD=n&&n[0];var l=function(AM){var u=AM.v;if(AH.fnt==q){if(u.replace){AM.v=u.replace(/%$/,"");}u=AM.v+"%";}return u;};var w=C(AD&&AD.p&&AD.p.n||AD&&AD.v&&l(AD));AG.push('<span class="mstrmojo-text mstrmojo-c1">'+w+"</span>");y.push(w);if(AA>1){var AB=n&&n[1],x=C(AB&&AB.p&&AB.p.n||AB&&AB.v&&l(AB));AG.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");y.push(" "+A.betweenText+" ");AG.push('<span class="mstrmojo-text mstrmojo-c2">'+x+"</span>");y.push(x);}}}}var AE=AH.dmy&&AH.dmy.uts,t=AE&&AE.length;if(t){AG.push('<span class="mstrmojo-text mstrmojo-at">'+A.atText+"</span>");y.push(" "+A.atText+" ");AG.push('<span class="mstrmojo-dmy">');for(var s=0;s<t;s++){var p=AE[s];AG.push('<span class="mstrmojo-text mstrmojo-dmyunit">');AG.push(C(p.utgt?p.utgt.n:p.n));y.push(C(p.utgt?p.utgt.n:p.n));if(s<t-1){AG.push(",");y.push(",");}AG.push("</span>");}AG.push("</span>");}}}return{html:AG.join(""),text:y.join("")};};j[S.MC]=j[S.MQ];j[S.ANDOR]=function(u,n){var s=[],q=[],m=(n&&n.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")",o=c.valarray(d.findTargets(u,"did"))[0],p=true;function w(x){if(!p){s.push('<span class="spliter"></span>');q.push(", ");}p=false;if(x){q.push(mstrmojo.desc(12298,"NOT")+" ");}}if(!o){return{html:'<span class="mstrmojo-text mstrmojo-emptyelems">'+m+"</span>",text:m};}var l=K(o,"andor");s.push(l.html);q.push("{"+l.text+"}");s.push("<span>:</span>");q.push(" : ");s.push('<span class="mstrmojo-elems">');q.push("[");R.forEach(u.nds,function t(z){if(!z){return ;}var x=h(z),AF=z.fm,AC=z.cs,AA,AD,y,AB;switch(z.et){case S.ANDOR:R.forEach(z.nds,t);break;case S.AE:switch(z.fn){case g.IN_LIST:case g.NOT_IN_LIST:R.forEach(z.es,function(AG){w(x);AA=x?" not":"";AD=C(AG.n);s.push('<span class="mstrmojo-text mstrmojo-elem single'+AA+'">'+AD+"</span>");q.push(AD);});break;case g.DESCENDANT:var AE=(z.es||[]).slice();if(AE.length===0){AE.push({n:m});}R.forEach(AE,function(AH){w(x);AA=x?" not":"";AD=C(AH.n);if(AC&&AC[0]){var AG;AB=AC[0].v;if(isNaN(AB)){y=AB.substr(AB.indexOf(";")+1);}else{y=mstrmojo.desc(493,"Level")+" "+(parseInt(AB,10)+1);}AG=y+" "+mstrmojo.desc(12853,"of")+" "+AD;s.push('<span class="mstrmojo-text mstrmojo-elem level'+AA+'">');s.push(AG);q.push(AG);}else{s.push('<span class="mstrmojo-text mstrmojo-elem descendant'+AA+'">');s.push(C(AH.n));q.push(AD);}s.push("</span>");});break;}break;case S.AQ:R.forEach(z.cs,function(AG){w(x);AA=x?" not":"";AB=AG.v;y=(AF&&AF.n)?C(AF.n+" "+AB):"";if(AF&&AF.n==="LEVEL_NUMBER"){AA+=" level";if(isNaN(AB)){y=AB.substr(AB.indexOf(";")+1);}else{y=mstrmojo.desc(493,"Level")+" "+(parseInt(AB,10)+1);}}s.push('<span class="mstrmojo-text mstrmojo-elem constant'+AA+'">'+y+"</span>");q.push(y);});break;}});s.push("</span>");q.push("]");return{html:s.join(""),text:q.join("")};};function Y(q,p){var n=j[q&&q.et]||j["*"],m=M(q),o=n&&n(q,p),l=p&&p.emptyText||A.emptyText;return{html:m&&m.html+((o&&o.html)||('<span class="mstrmojo-text empty-cond">'+l+"</span>")),text:m&&m.text+((o&&o.text)||l)};}function H(l){return Y(l).text;}function O(q,p,n){if(!q){return null;}var AB=q.et,y=q.fn,m=q.nds;if(AB===S.ANDOR){var AC=n?"bold":"",l=y===g.AND?A[AC+"andText"]:(y===g.OR?A[AC+"orText"]:"");m=[].concat(m);if(m.length<1){return null;}var x=[],AD;R.forEach(m,function(AE){AD=O(AE,false,n);if(AD){x.push(AD);}});var AA,z=x.length;if(z<1){return null;}if(z===1){AA=x[0];}else{AA=x.join(" "+l+" ");}AA=p||q.not?AA:"("+AA+")";return q.not?A.notText+" "+AA:AA;}if(AB===S.RLS){var w=q.dmy&&q.dmy.uts||[],t=[],s;R.forEach(w,function(AE){t.push("{"+AE.n+"}");});s=t.join(", ");var o=q.nds&&q.nds[0],u=O(o,false,n);if(u){return"("+s+" "+A.whereText.replace(/\(##\)/g,"").replace(/'##'/g,"")+u+")";}return null;}return H(q);}function B(l){if(mstrmojo.fe.FilterUtils.isExprEmpty(l)){return{et:14,fn:19};}((l&&l.nds)||[]).forEach(function(n,m){l.nds[m]=B(n);});return l;}function F(o){var m;if(o){R.forEach(["a","a1","a2","a3","m","m1","m2","m3","p"],function(p){if(o[p]&&o[p].accessible===false){m=c.copy(o[p]);return false;}});if(!m){var l=c.walk("dmy.uts",o);if(l){R.forEach(l,function(p){if(c.walk("utgt.accessible",p)===false){m=c.copy(p.utgt);return false;}});}}if(!m){var n=c.walk("relation.guide",o);if(n&&n.accessible===false){m=c.copy(n);}}if(!m&&o.nds){R.forEach(o.nds,function(p){var q=F(p);if(q){m=q;return false;}});}}return m;}mstrmojo.fe.FilterUtils=mstrmojo.provide("mstrmojo.fe.FilterUtils",{getExprXml:function(t,p,n){var s="<exp>",o="</exp>",q={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,conid:true,desc:true,did:true,attId:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true,relation:true,applySubExpr:true,useSchema:true,guide:true,rsTp:true,joTp:true,paTp:true,erTp:true,exTp:true,exp:true,joAttrs:true,ph:true,idx:true,idc:true,idcsi:true,ucfg:true,node:true,cont_did:true,cont_tp:true},l={getArrItemName:function(w){return w.substr(0,w.length-1);},isSerializable:function(AG,AE,AD){var x=AE[AD],AC,AH;if(AG==="xml"){var y=x.xml;return{att:'hasXML = "-1"',child:y};}if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],AG)>-1){var AI=AE[AD][AG];if(!AI){return{};}var AA="<"+AG+">";for(var AF in AI){AA+="<prs n='"+AF+"'>";var z=AI[AF];for(var w in z){var AB=z[w];AA+="<pr n='"+w+"' v='"+(AB==="pru"?"":AB)+"'";AA+=AB==="pru"?' pru="1"':"";AA+="/>";}AA+="</prs>";}AA+="</"+AG+">";return{child:AA};}if(AG==="cs"){AC=AE[AD][AG];AH=(c.walk("0.p.pet",AC)===Z||c.walk("0.p.isParameter",AC))&&AC[0].p;if(x&&x.fnt&&x.fnt==d.FNT.PER&&AC){if(AC[0]){AC[0].v+="%";}if(AC[1]){AC[1].v+="%";}}if(AH){if(AH.st===G.PARAMETER_DATE){AC[0].dtp=e.DATE;}else{if(AH.st===G.PARAMETER_BIGDECIMAL){AC[0].dtp=e.BIGDECIMAL;}}}return true;}if(AG==="c2"||AG==="c3"){if(x&&x.et==d.ET.MC&&(x.fn==d.FN.BETWEEN||x.fn==d.FN.NOT_BETWEEN)){return true;}return false;}if(AG==="p"){AH=(c.walk("p.pet",x)===Z||c.walk("p.isParameter",x))&&x.p;if(AH){AH.cont_did=c.walk("rootCtrl.docCtrl.model.oid",mstrApp);AH.cont_tp=I;AH.exTp=W;if(AH.es){delete AH.es;}}}if(n){n(AG,AE,AD);}return !!(q[AG]);},skipNull:true},m=B(t);c.copy(p,q);if(!m||m.et!=S.ANDOR||m.fn===g.NOT||m.not){m={et:S.ANDOR,fn:d.FN.AND,nds:m?[m]:[]};}var u=D.json2xml("nd",[{},m],l);return s+u+o;},isExprEmpty:function(l){return(!l||(l.et===S.ANDOR&&(l.nds||[]).length<1));},getExprConditionNodeHtml:function E(l){return Y(l).html;},getExprConditionNodeText:function H(l){return Y(l).text;},getExprNodeHtmlAndText:function a(m,l){return Y(m,l);},getExprText:function i(m,l){return O(m,true,l);},getInaccessibleObjectInExpr:function N(l){return F(l);},getNonExecutableErrMsg:function J(m,s,l){var o=c.walk("mstrApp.projectId",window),n=c.walk("mstrApp.projectName",window),q=c.walk("mstrApp.rootCtrl.docCtrl.model.returnDetailedNoExecuteErrMsg",window),p;if(q||q===undefined){if(l&&o&&n){p=mstrmojo.desc(28188,"User does not have Execute access to the object '{ObjectName}' with ID '{ObjectID}' in project '{ProjectName}' with ID '{ProjectID}'.").replace("{ObjectName}",s).replace("{ObjectID}",m).replace("{ProjectName}",n).replace("{ProjectID}",o);}else{p=mstrmojo.desc(28187,"User does not have Execute access to the object '{ObjectName}' with ID '{ObjectID}'.").replace("{ObjectName}",s).replace("{ObjectID}",m);}}else{p=mstrmojo.desc(28756,"No access");}return p;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.expr");var H=mstrmojo.array,D=mstrmojo.hash,A=mstrmojo.func,G=mstrmojo.expr,C=G.TP,L=G.STP;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function B(O,N){var M=[];N=N||[];D.forEach(N,function(P){H.forEach(P.att||[],function(Q){if(Q.did===O){M=M.concat(Q.fs||[]);return false;}});});M=H.filter(M,function(P){return !!P.obf;});return H.distinct(M,"fid");},getObjectInfoFromDataset:function J(M,O){var N;D.forEach(O,function(P){if(!N){N=H.filterOne(P.mx.concat(P.att,P.parameters||[]),function(Q){return Q.did===M;});}});return N;},getAllDatasetObjects:function E(P,N,Q){var M=[],O=[];P=P||[];function R(U,X,Z,S,W,Y){H.forEach(U||[],function(c){var a={},b=Z||Y(c);if(W&&W(c)||b===null){return ;}if(X){a.datasetId=X;}D.copyProps(S,c,a);b.push(a);});}D.forEach(P,function(U,S){R(U.att,S,M,["t","n","did","da","ndetype"],function(W){return N&&W.paraId;});R(U.mx,S,O,["t","n","did","um"],function(W){return N&&W.paraId;});if(N){R(U.parameters,S,null,["t","n","did","targetType"],null,function(W){if(W.st===L.PROMPT_OBJECTS){return W.targetType===C.METRIC?O:M;}return null;});}});R(Q,null,null,["t","n","did","targetType"],null,function(S){if(S.st===L.PROMPT_OBJECTS){return S.targetType===C.METRIC?O:M;}return null;});return{attribute:M,metric:O};},getAttributeInfoFromDatasets:function I(O,M){var N,P={};D.forEach(M,function(S,R){var Q;if(N){return false;}Q=S.att.concat(S.mx);N=H.filterOne(Q,function(U){return U.did===O;});if(N){P=D.clone(N);P.datasetId=R;}});return P;},getAttributeDatasetId:function F(O,N){var M=[],P=[];H.forEach(Object.values(N),function(Q){M=Q.att;if(Array.isArray(M)&&M.some(function(R){return R.did===O;})){P.push(Q.did);}});return P;},convertCubeDefnToDatasetDefn:function K(N,O,X,W){var S=D.walk("result.definition.availableObjects",N),R={did:N.id,name:N.name},M=[],P=[],Q=[],U=[];H.forEach(S.attributes,function(Y){M.push(Y.id);P.push(C.ATTR);});H.forEach(S.metrics,function(Y){M.push(Y.id);P.push(C.METRIC);});X.dataService.getObjectInfo({objectIDs:M.join(","),objectTypes:P.join(","),includeDetails:true},A.wrapMethods({success:function(Y){H.forEach(Y.objects,function(Z){if(Z.t===C.ATTR){Q.push(Z);}else{U.push(Z);}});R.att=Q;R.mx=U;O.cubeDefn=R;},failure:function(Y){mstrApp.onerror(Y);}},W));}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.num","mstrmojo.locales","mstrmojo.date","mstrmojo.hash","mstrmojo._FormatDefinition");var H=mstrmojo.array,I=mstrmojo.num,F=mstrmojo.locales,A=mstrmojo.date,C=mstrmojo.hash,G=mstrmojo._FormatDefinition;mstrmojo.vi.util.NumberFormatUtility=mstrmojo.provide("mstrmojo.vi.util.NumberFormatUtility",{applyFormatToNumber:function D(X,Y,L,M,b){var N="\u00A4",R=/"[^"]*"/g,K=X.match(R),Q=X.replace(R,N),W=["m","y","d","h","s"],U=L||false,J=new Date(),S=J.getFullYear(),P=J.getMonth(),O=J.getDay(),a=F.datetime,Z;H.forEach(W,function(c){U=U||Q.indexOf(c,0)!==-1;});if(M){if(I.isNumeric(Y,false,"en-US")){return I.formatByMask(X,I.parseNumeric(Y,"en-US"),false,M,b);}else{if(U){return I.formatByMask(X,Y,false,M,b);}}return Y;}if(U){Q=Q.replace(/y{3,}/g,S).replace(/y{1,2}/g,S.toString().slice(2,4));Q=Q.replace(/m{4,}/g,a.MONTHNAME_FULL[P-1]).replace(/m{3}/g,a.MONTHNAME_SHORT[P-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");Q=Q.replace(/d{4,}/g,a.dayNames[O-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");Q=Q.replace(/hh/g,"08").replace(/h/g,"8");Q=Q.replace(/ss/g,"04").replace(/s/g,"4");Q=Q.split(N);Z=Q[0];H.forEach(K,function(d,c){Z+=d+Q[c+1];});return Z;}if(I.isNumeric(Y)){return I.formatByMask(X,I.parseNumeric(Y));}return Y;},getNegativeList:function E(U,O,N,Z,S){var Y=C.clone(U),K=O>0?F.number.DECIMALSEPARATOR:"",L=O>0?".":"",M=G.DefaultFormat.FormattingNumber,W=new RegExp("\\"+F.number.THOUSANDSEPARATOR,"g"),J=new RegExp("\\"+F.number.DECIMALSEPARATOR+"\\d{2}","g"),Q,X={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};for(Q=0;Q<O;Q++){K+=Q%9;L+="0";}for(Q=0;Q<Y.length;Q++){var R=Y[Q];R.n=R.n.replace(/,/g,"@");R.n=R.n.replace(/\./g,F.number.DECIMALSEPARATOR);R.n=R.n.replace(/@/g,F.number.THOUSANDSEPARATOR);if(N){R.n=R.n.replace(W,"");R.f=R.f.replace(/,/g,"");}if(Z&&Z!==M.CurrencyPosition){switch(Z){case X.RIGHT:R.n=R.n.replace(/\$/g,"").replace(J,F.number.DECIMALSEPARATOR+"12$");R.f=R.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case X.LEFT_WITH_SPACE:R.n=R.n.replace(/\$/g,"$ ");R.f=R.f.replace(/\$/g,"$ ");break;case X.RIGHT_WITH_SPACE:R.n=R.n.replace(/\$/g,"").replace(J,F.number.DECIMALSEPARATOR+"12 $");R.f=R.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}R.n=R.n.replace(J,K);R.f=R.f.replace(/\.\d{2}/g,L);if(S&&S!==M.CurrencySymbol){var P=S.replace(/\$/g,"$$$$");R.n=R.n.replace(/\$/g,P);R.f=R.f.replace(/\$/g,P);}R.cls=R.r?"red":null;}return Y;},getLocaleDatetimeSamples:function B(){var N=mstrApp.isSingleTier&&!mstrmojo.dom.isMac(),L,K;if(N||mstrApp.isVI){var S=F.datetime,Q={day:16,month:4,year:2020},P={hour:9,min:41,sec:46},M=S&&S.DATEINPUTFORMATS,O=S&&S.TIMEINPUTFORMATS,R={};L=[];K=[];M.forEach(function(U){R[U.toLowerCase()]=1;L.push({v:U,n:A.formatDateInfo(Q,U)});});O.forEach(function(U){K.push({v:U,n:A.formatTimeInfo(P,U)});});K=G.Time;var J=G.Date.filter(function(U){return !R[U.v&&U.v.toLowerCase()];});L=L.concat(J);return{date:L,time:K};}L=G.Date;K=G.Time;return{date:L,time:K};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(U){if(!U||!U.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var X=23242571;var R=-693593;if(U.ifTime>X){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=U.ifTime-Math.floor(U.ifTime);}else{if(U.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(U.ifTime)+Math.ceil(U.ifTime);}else{if(U.ifTime>0){var Y=this.DAYSToYMD(Math.floor(U.ifTime));this.mnYear=Y.year;this.mnMonth=Y.month;this.mnDay=Y.day;S=U.ifTime-Math.floor(U.ifTime);}else{if(U.ifTime<0){var Y=this.DAYSToYMD(Math.ceil(U.ifTime));this.mnYear=Y.year;this.mnMonth=Y.month;this.mnDay=Y.day;S=Math.abs(U.ifTime)+Math.ceil(U.ifTime);}}}}S*=H;var W=S+0.5;if(W==H){W--;}if(W>0){this.mnHour=Math.floor(W/A);W-=this.mnHour*A;this.mnMinute=Math.floor(W/L);W-=this.mnMinute*L;this.mnSecond=Math.floor(W/C);W-=this.mnSecond*C;this.mnMillisecond=Math.floor(W);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S+=H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var U=(S-R*H)/H;if(U<0){R--;U+=1;}return R>=0?R+U:R-U;},DAYSToYMD:function N(U){var Y=0;var a=0;var S=0;U+=693959;var X=Math.floor(U/365);var W=U-X*365;var Z=Math.floor(X/4)-Math.floor(X/100)+Math.floor(X/400);W-=Z;if(W<0){X--;W+=365;while(W<=0){X--;W+=365;}}var R=U-(X*365+Math.floor(X/4)+(X%4?1:0)-Math.floor((X-1)/100)+Math.floor((X-1)/400));if(R==365&&!this.IsLeapYear(X)){Y=X+1;a=1;S=1;return{year:Y,month:a,day:S};}if(R==-1){Y=X-1;a=12;S=31;return{year:Y,month:a,day:S};}Y=X;a=12;while(R<B.DaysBeforeMonth[a-1]){a--;}S=R-B.DaysBeforeMonth[a-1]+1;if(a>2&&this.IsLeapYear(Y)){S--;if(S==0){a--;S=B.DaysInMonth[a-1];if(a==2){S++;}}}return{year:Y,month:a,day:S};},YMDToDAYS:function G(W,U,S){if(U<1||U>12){return 0;}var R=W*365+Math.floor(W/4)+(W%4?1:0)-Math.floor((W-1)/100)+Math.floor((W-1)/400);R+=B.DaysBeforeMonth[U-1];if(U>2&&this.IsLeapYear(W)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}return S-R;},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}if(this.mnYear<R.mnYear){return -1;}if(this.mnMonth>R.mnMonth){return 1;}if(this.mnMonth<R.mnMonth){return -1;}if(this.mnDay>R.mnDay){return 1;}if(this.mnDay<R.mnDay){return -1;}if(this.mnHour>R.mnHour){return 1;}if(this.mnHour<R.mnHour){return -1;}if(this.mnMinute>R.mnMinute){return 1;}if(this.mnMinute<R.mnMinute){return -1;}if(this.mnSecond>R.mnSecond){return 1;}if(this.mnSecond<R.mnSecond){return -1;}if(this.mnMillisecond>R.mnMillisecond){return 1;}if(this.mnMillisecond<R.mnMillisecond){return -1;}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._HasMarkup");var J=mstrmojo.dom,D=mstrmojo._HasMarkup,P,Q=mstrmojo.global.document,K,A="touchstart",C="touchmove",I="touchend",N="contextmenu";function O(S){var R=J.findWidget(S);while(R){if(R.hasContextMenuEvent){return R;}R=R.parent;}return null;}function M(R){var U=R.src,S=O(U&&U.node);if(!S){return null;}return S;}function H(R){if(R&&R.touches.length===1){P.startTapHoldCheck(self,R);}}function B(){var R=++P.ctxt.moveCount;if(R>P.minMoves){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}}function L(){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}mstrmojo.taphold=mstrmojo.taphold||mstrmojo.provide("mstrmojo.taphold",{timeThreshold:750,minMoves:3,startTapHoldCheck:function G(R,S){delete this.ctxt;var U=J.captureEventInfo({hWin:R,e:S});this.ctxt={src:U,moveCount:0};J.attachEvent(Q,C,B);J.attachEvent(Q,I,L);S.name=N;K=window.setTimeout(function(){P.stopTapHoldCheck();var W=D.newDomEvent(N,window,S),X;for(X in S){if(!W[X]){W[X]=S[X];}}W.type=N;P.triggerContextMenu(W);},this.timeThreshold);},triggerContextMenu:function F(R){var S=this.ctxt,U=M(S);if(!U){return ;}if(U.raiseEvent){U.raiseEvent(R);}},stopTapHoldCheck:function E(){J.detachEvent(Q,C,B);J.detachEvent(Q,I,L);},enable:function(){if(J.isIOSTouch){J.attachEvent(Q,A,H);}},disable:function(){J.detachEvent(Q,A,H);}});P=mstrmojo.taphold;P.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.css","mstrmojo.hash");var A=mstrmojo.color,E=mstrmojo.css,B=mstrmojo.hash;function G(J){J=D(J);if(isNaN(J)){J=0;}J%=16777216;return{b:J%(1<<8),g:(J%(1<<16))>>8,r:(J%(1<<24))>>16};}function F(N,O,M){N=D(N);M=B.copy(M,{retainGradientObject:false});if(C(N)){var L=F(N.c1,O),J=F(N.c2,O);if(M.retainGradientObject){return{c1:L,c2:J,or:N.or};}return E.buildGradient(N.or,L,J).v;}if(typeof O==="number"){var K=G(N);if(isNaN(N)){O=0;}return"rgba("+K.r+" ,"+K.g+" ,"+K.b+" ,"+O+" )";}if(isNaN(N)){N=0;}return"#"+(16777216+N%16777216).toString(16).substring(1,7);}function D(L){var K=L.c1,J=L.c2;if(C(L)){return{c1:D(K),c2:D(J),or:L.or};}if(typeof L==="number"){return L;}if(typeof L!=="string"){return NaN;}if(L[0]!=="#"){return parseInt(L,10);}if(L.length===4){L=L[0]+L[1]+L[1]+L[2]+L[2]+L[3]+L[3];}return parseInt(L.substring(1,7),16);}function I(L,J){var O=L.value,Q=L.opacity;if(C(O)){return["c1","c2"].reduce(function(X,Y,W){var Z=I({value:O[Y],opacity:Q},J);X.value[Y]=Z.value;if(W===0){X.opacity=Z.opacity;}return X;},{value:{or:O.or}});}if(O==="transparent"){L.value=J.value;}var N=A.hex2rgb(F(L.value)),M=A.hex2rgb(F(J.value)),U=L.opacity,S=J.opacity,R=1-U,P,K;K=U+S*R;P=N.map(function(W,X){return(W*U+M[X]*S*R)/K;});return{value:"#"+A.rgb2hex.apply(undefined,P),opacity:K};}function C(J){return J&&["c1","c2","or"].every(function(K){return J.hasOwnProperty(K);});}mstrmojo.util.color=mstrmojo.provide("mstrmojo.util.color",{getCSSColorString:F,getColorValue:D,mix:I,isGradientColor:C,getRGB:G,isBrightColor:function H(N){var L=N>>16,K=(N&65280)>>8,J=(N&255),M=(L*299+K*587+J*114)/1000;return M>150;},createCanvasFillPattern:function(L,R,K,Q,J,P){var M=L.value,O=L.opacity,N;if(C(M)){N=R.createLinearGradient(K,Q,J,P);N.addColorStop(0,F(M.c1,O));N.addColorStop(1,F(M.c2,O));}else{N=F(M,O);}return N;},convertRC3ColorToNormalColor:function(K){var J=K;if(C(J)){return J;}else{if(typeof J==="string"){return J;}}if(J.colorB!==undefined){J.c1=J.color;J.c2=J.colorB;J.or=J.direction==="horizontal"?0:1;}else{J=J.color;}return J;},convertNormalColorToRC3Color:function(J){var K=J;if(K&&typeof K==="object"){if(K.colorB!==undefined&&K.direction!==undefined){return K;}else{if(K.color!==undefined&&K.colorB===undefined&&K.direction===undefined){return K;}}}if(C(K)){K.color=K.c1;K.colorB=K.c2;K.direction=K.or===0?"horizontal":"vertical";}else{K={color:K};}return K;},});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.CustomVisUtility","mstrmojo.customviz.GraphicModel");mstrmojo.GRAPHIC_SELECTION_TYPES={ATTR:1,METRIC:2,EMPTY:0,MIXED:4};var P=mstrmojo.array,X=mstrmojo.hash,E=mstrmojo.GRAPHIC_SELECTION_TYPES,U=mstrmojo.CustomVisUtility,d=U.log;var e=function(m){var k=X.keyarray(m).sort(),l=[],n;P.forEach(k,function(o){n=[];P.forEach(m[o],function(p){n.push(this.model.getNormalizedFormElementId(p.id));},this);l.push(o+"-"+n.sort().join("@"));},this);return l.join("#");},R=function(l,k,n){var m={};m[l]=[{id:k,n:n}];return m;},j=function(m,k){if(m&&k){var l=e.call(this,m);if(!this._customVizSelExtraInfo[l]){this._customVizSelExtraInfo[l]=k;}}},B=function(m,k){if(m&&k){var l=e.call(this,m);if(!this._customVizContextMenuSelExtraInfo[l]){this._customVizContextMenuSelExtraInfo[l]=k;}}},J=function(m){var l=e.call(this,m),k=this._customVizSelExtraInfo[l];if(k){delete this._customVizSelExtraInfo[l];}return k;},a=function(m){var l=e.call(this,m),k=this._customVizContextMenuSelExtraInfo[l];if(k){delete this._customVizContextMenuSelExtraInfo[l];}return k;};mstrmojo.customviz._HasExtraSelectionInfo=mstrmojo.provide("mstrmojo.customviz._HasExtraSelectionInfo",{_mixinName:"mstrmojo.customviz._HasExtraSelectionInfo",_customVizSelExtraInfo:{},_customVizContextMenuSelExtraInfo:{},misMatchWithVisSelection:false,graphicSelectionType:null,init:function c(k){this._super(k);this._customVizSelExtraInfo={};this._customVizContextMenuSelExtraInfo={};this.misMatchWithVisSelection=false;this.graphicSelectionType=E.EMPTY;},isSelectionEmpty:function H(){var k;for(k in this._customVizSelExtraInfo){return false;}return true;},getSelExtraInfo:function N(){return X.valarray(this._customVizSelExtraInfo);},getContextMenuSelExtraInfo:function M(){return X.valarray(this._customVizContextMenuSelExtraInfo);},clearCxtMnuSelection:function K(k){if(!k){this._super();}this._customVizContextMenuSelExtraInfo={};},clearSelections:function G(k){if(!k){this._super();}else{this.misMatchWithVisSelection=true;}this._customVizSelExtraInfo={};this.graphicSelectionType=E.EMPTY;},addMetricValueSelection:function Q(l,m,k){if(!k){this._super(l);}else{this.misMatchWithVisSelection=true;}switch(this.graphicSelectionType){case E.METRIC:break;case E.ATTR:if(k){this.graphicSelectionType=E.MIXED;}else{this.clearSelections(true);this.graphicSelectionType=E.METRIC;}break;case E.EMPTY:this.graphicSelectionType=E.METRIC;break;default:break;}j.call(this,l,m);},removeMetricValueSelection:function b(l,m,k){if(!k){this._super(l);}else{this.misMatchWithVisSelection=true;}J.call(this,l);if(this.isSelectionEmpty()){this.graphicSelectionType=E.EMPTY;}},addContextMenuMetricValueSelection:function D(l,m,k){if(!k){this._super(l);}B.call(this,l,m);},removeContextMenuMetricValueSelection:function i(l,m,k){if(!k){this._super(l);}a.call(this,l);},addAttributeSelection:function Y(m,l,q,o,k){var s=R.call(this,m,l,q),n;if(!k){n=this._super(m,l,q);}else{this.misMatchWithVisSelection=true;}switch(this.graphicSelectionType){case E.ATTR:break;case E.METRIC:if(k){this.graphicSelectionType=E.MIXED;}else{this.clearSelections(true);this.graphicSelectionType=E.ATTR;}break;case E.EMPTY:this.graphicSelectionType=E.ATTR;break;default:break;}j.call(this,s,o);return n;},removeAttributeSelection:function h(m,l,p,o,k){var n;if(!k){n=this._super(m,l,p);}else{this.misMatchWithVisSelection=true;}J.call(this,R.call(this,m,l));if(this.isSelectionEmpty()){this.graphicSelectionType=E.EMPTY;}return n;},addContextMenuAttributeSelection:function I(m,l,q,o,k){var s=R.call(this,m,l,q),n;if(!k){n=this._super(m,l,q);}B.call(this,s,o);return n;},removeContextMenuAttributeSelection:function W(m,l,p,o,k){var n;if(!k){n=this._super(m,l,p);}a.call(this,R.call(this,m,l));return n;},getGraphicModelsBySelector:function g(){},isSelectorsEqual:function Z(l,k){if(l.isSelectAttr===k.isSelectAttr){return this.getSelectorHash(l)===this.getSelectorHash(k);}return false;},getSelectorHash:function C(k){if(k.isSelectAttr){return e.call(this,R.call(this,k.tid,k.eid,k.n));}return e.call(this,k);},copyToContextMenuSelection:function S(){this._super();X.copy(this._customVizSelExtraInfo,this._customVizContextMenuSelExtraInfo);},synchronizeContextMenuSelection:function A(){this.clearCxtMnuSelection();this.copyToContextMenuSelection();},needHighlight:function F(l,k){if(l){return !!this._customVizSelExtraInfo[e.call(this,R.call(this,k.tid,k.eid,k.n))];}return !!this._customVizSelExtraInfo[e.call(this,k)];},needContextMenuHighlight:function O(l,k){if(l){return !!this._customVizContextMenuSelExtraInfo[e.call(this,R.call(this,k.tid,k.eid,k.n))];}return !!this._customVizContextMenuSelExtraInfo[e.call(this,k)];},synchronizeToVisSelection:function L(){var m=this.getSelExtraInfo(),l=this,n=this.graphicSelectionType,k;this.clearSelections();this.misMatchWithVisSelection=false;if(n===E.ATTR){P.forEach(m,function(o){k=o.getSelector();l.addAttributeSelection(k.tid,k.eid,k.n,o);});}else{if(n===E.METRIC){P.forEach(m,function(o){l.addMetricValueSelection(o.getSelector(),o);});}}},addSelectionBySingleSelector:function f(u,t,m,o,w){var s=this,n,l,p,k,q={xTotal:0,yTotal:0,count:0};n=s.getGraphicModelsBySelector(u,t);n=P.ensureArray(n);if(n.length>0){P.forEach(n,function(x){l=x.isAttributeSelector();p=x.getSelector();if(l){o?s.addContextMenuAttributeSelection(p.tid,p.eid,p.n,x,m):s.addAttributeSelection(p.tid,p.eid,p.n,x,m);}else{o?s.addContextMenuMetricValueSelection(x.getSelector(),x,m):s.addMetricValueSelection(x.getSelector(),x,m);}if(w){k=x.getGraphicCenter();if(k){q.xTotal+=k.x;q.yTotal+=k.y;}++q.count;}});}else{if(!this.isBinaryData){d('We did not get any graphic model by the selector given what may lead to the functionality of selection and highlight not work, please check the function "getGraphicModelBySelector()" you have implemented.');}}return q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,G=100,L=700;var B="mojo-safari-hide-nativeTooltip",H=mstrmojo.css;function M(O,N){return function(Q){var P=mstrmojo.all[O];if(P.customTooltipHandler){P.customTooltipHandler(Q);}P[(N?"move":"show")+"Tooltip"](Q,self);};}function A(){var O=this.tooltipNode||this.domNode,Q=this.id,N,P="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(R){mstrmojo.all[Q].hideTooltip(R,self);};}if(!this[P]){this[P]=M(Q,this.isDynamicTooltip);}O=[].concat(O);for(N=0;N<O.length;N++){O[N].removeAttribute("title");C.attachEvent(O[N],(this.isDynamicTooltip?"mousemove":"mouseover"),this[P]);C.attachEvent(O[N],"mouseout",this._ontooltipout);}}function I(){var Q=this.tooltipNode||this.domNode,P;if(Q&&Q.constructor!==Array){Q=[Q];}if(Q){var R=this._ontooltipover,O=this._ontooltipout,N=this._ontooltipmove;for(P=0;P<Q.length;P++){if(R){C.detachEvent(Q[P],"mouseover",R);}if(O){C.detachEvent(Q[P],"mouseout",O);}if(N){C.detachEvent(Q[P],"mousemove",N);}}}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,isIgnoreTooltipCloseDelay:false,hasWidgetContent:false,tooltipCloseDelay:G,hasOpenTooltip:false,postBuildRendering:function(){var N=this._super();if(this.useRichTooltip){A.call(this);}return N;},onuseRichTooltipChange:function K(){if(this.hasRendered){if(this.useRichTooltip){A.call(this);}else{I.call(this);this.hideTooltip();}}},showTooltip:function J(Q,P){var O=this;if(!O.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(Q);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var S={};for(var N in Q){S[N]=Q[N];}Q=S;}var U=this.richTooltip?this.richTooltip.areaId:undefined;if(C.isSafari&&Q){var R=Q.srcElement;if(window.getComputedStyle(R)["text-overflow"]==="ellipsis"){this.baseElement=R;H.toggleClass(R,B,true);}}this._tooltipTimeOut=window.setTimeout(function(){var W=O.richTooltip;if(O._closeTooltipTimeout){window.clearTimeout(O._closeTooltipTimeout);delete O._closeTooltipTimeout;}mstrmojo.tooltip.open(O,Q,P);O.tooltip.onmouseover=function(){if(O.richTooltip&&O.richTooltip.enableHover){window.clearTimeout(O._closeTooltipTimeout);window.clearTimeout(O._deactivationTimeout);if(O.tooltip){O.tooltip.onmouseout=function(X){var Y=X.e;if((!Y.toElement&&!Y.relatedTarget)||!C.contains(this.domNode,X.e.toElement||X.e.relatedTarget)){O.hideTooltip();}};}}};O.tooltip.allowOtherTooltips=O.allowOtherTooltips;if(W&&W.onClose){O.tooltip.onClose=W.onClose;}O.hasOpenTooltip=true;O._hasActiveArea=true;O._tooltipAreaId=U;window.clearTimeout(O._deactivationTimeout);delete O._deactivationTimeout;},(this._hasActiveArea&&U&&U===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function D(N,P){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var R=this,O=N,Q=P;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(R,O,Q);},this.tooltipOpenDelay);},hideTooltip:function F(){var N=this;if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);}if(C.isSafari&&this.baseElement){H.toggleClass(this.baseElement,B,false);}if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete N._deactivationTimeout;delete N._hasActiveArea;delete N._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if((!this.isIgnoreTooltipCloseDelay)&&N.richTooltip&&N.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete N._closeTooltipTimeout;},N.richTooltip.tooltipCloseDelay||this.tooltipCloseDelay);}else{if(N.tooltip){this.isIgnoreTooltipCloseDelay=false;mstrmojo.tooltip.close();}}this.hasOpenTooltip=false;},unrender:function E(N){I.call(this);this.hideTooltip();this._super(N);}});mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY=L;mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY=G;}());(function(){mstrmojo.requiresCls("mstrmojo.css");var G=mstrmojo.css,E="px",L="hasOwnAvatar",K={x:0,y:0};function B(N){var M=this.createAvatar(N.src.node,N);if(M){G.addClass(M,[this.avatarCssClass,L]);this.avatar=N.avatar=document.body.appendChild(M);}}function C(){var M=this.avatar;if(M){M.parentNode.removeChild(M);delete this.avatar;G.removeClass(M,[this.avatarCssClass,L]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function I(M){if(this._super){return this._super(M);}return false;},ondragstart:function D(M){B.call(this,M);this.positionAvatar(M.src.pos,M);if(this._super){this._super(M);}},ondragmove:function A(M){this.positionAvatar(M.tgt.pos,M);if(this._super){this._super(M);}},ondragend:function F(M){C.call(this);if(this._super){this._super(M);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function H(Q,N){if(this.avatar){var P=this.avatar.style,O=this.restrictedToAxis,M=(N&&N.dragOffsets)||K;if(O!=="y"){P.left=Q.x+M.x+E;}if(O!=="x"){P.top=Q.y+M.y+E;}}},recreateAvatar:function J(M){C.call(this);B.call(this,M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash");var M=1,D=2,B=1;function P(S,R){return F(S,R)&&S.o===R.o;}function F(S,R){return S&&R&&S.ui===R.ui&&S.axis===R.axis&&S.mix===R.mix;}function C(X,S,U){var W=U.getCellTitleId(S),R=U.getCellUnitIndex(S);U.selections[W]=U.selections[W]||{};U.selections[W][R]=U.selections[W][R]||[];U.selections[W][R].push(X);O(X,S,U);}function O(X,S,U){if(S){var W=U.getCellTitleId(S),R=U.getCellUnitIndex(S);if(!U.selectionsForCopy){U.selectionsForCopy={};}U.selectionsForCopy[W]=U.selectionsForCopy[W]||{};U.selectionsForCopy[W][R]=U.selectionsForCopy[W][R]||[];U.selectionsForCopy[W][R].push(X);E(X);}}function Q(S){var Y=S.selectionsForCopy;for(var X in Y){for(var W in Y[X]){for(var U=0,R=Y[X][W].length;U<R;U++){L(Y[X][W][U]);}}}S.selections={};S.selectionsForCopy={};}function E(R){mstrmojo.css.setOpacity(R,50);if(R.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(R,"showGridBorder");}}function L(R){mstrmojo.css.setOpacity(R,100);if(R.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(R,"showGridBorder");}}function H(U,W){if(U.mix===undefined){var Z=W.gridData.gts[U.axis===M?"row":"col"],S=Z[U.tui||U.ui],Y=0;for(var X=0,R=Z.length;X<R;X++){if(Z[X].id===S.id){Y++;}}return Y;}return 0;}function J(){var S="_xtabSelectionsHiddenField",R;R=document.getElementById(S);if(!R){R=document.createElement("textarea");R.id=S;R.style.opacity=0;R.style.position="absolute";R.style.top=0;R.style.height=0;R.style.width=0;document.body.appendChild(R);}return R;}function I(){var a="",c={},U,f=[],j=[],S={},W={},R=this.selectionsForCopy,Z=mstrmojo.hash,b=mstrmojo.array,h=function(k,l){if(k.hasOwnProperty("mix")){return l.es[k.mix].n;}return l.n;},X,d,Y,i,g,e=0;Z.forEach(R,function(k){Z.forEach(k,function(l){b.forEach(l,function(m){e++;d=m.offsetLeft;Y=m.offsetTop;if(!c[d]){c[d]={};}U=c[d];U[Y]=m.innerText;if(b.indexOf(f,d)===-1){f.push(d);}if(b.indexOf(j,Y)===-1){j.push(Y);}i=this.getCellForNode(m);g=this.model.getCellTitleInfo(i).title;if((!g.id&&g.axis===M)||(g.id&&g.axis===D)){W[Y]=h.call(this,i,g);}else{S[d]=h.call(this,i,g);}},this);},this);},this);f.sort(function(l,k){return l-k;});j.sort(function(l,k){return l-k;});if(e>1&&!Z.isEmpty(W)){a="\t";}if(e>1&&!Z.isEmpty(S)){b.forEach(f,function(k){a+=(S[k]||"")+"\t";});a+="\n";}b.forEach(j,function(k){if(e>1&&!Z.isEmpty(W)){a+=(W[k]||"")+"\t";}b.forEach(f,function(l){a+=(c[l][k]||"")+(e>1?"\t":"");});if(e>1){a+="\n";}});X=J();X.value=a;X.focus();X.select();}mstrmojo._XtabSelections={lastSelectedTD:null,singleSelectForCopy:function K(R){var Z=this.getCellForNode(R),c=R.parentElement.rowIndex,g,h,e,f=Z&&Z.mix!=undefined,W=function(j,i){i=i||{};j=j||{};if(f){return j.mix==i.mix;}return j.mix==i.mix&&j.ui==i.ui;};if(!Z){return ;}if(Z.mix===undefined&&(this.lockHeadersCase&B)&&this.clonedRowHeader.isRendered()){e=this.clonedRowHeader.getTableNode();}else{e=this.zone?this.zone.tableNode:mstrmojo.dom.findAncestorByName(R,"table",false);}h=e.rows;for(var Y=0,a=h.length;Y<a;Y++){var d=h[Y].cells;for(var X=0,U=d.length;X<U;X++){var S=d[X],b=this.getCellForNode(S);if(b!=Z&&W(b,Z)){O(S,b,this);}}}},updateSelectionsForCopy:function A(c){var R=this.selectionsForCopy,Z,X,W,S,U,Y,a,b;for(Z in R){for(X in R[Z]){S=R[Z][X].length;for(W=0;W<S;W++){U=R[Z][X][W];Y=this.getCellForNode(U);if(Y.mix===undefined){R[Z][X][W]=c.rows[U.parentElement.rowIndex].cells[U.cellIndex];}}}}},singleSelect:function G(S,c){var a=this.getCellForNode(S),l=S.parentNode;if(c){var Z=this.getCellTitleId(a),f=this.getCellUnitIndex(a);selectedTitle=this.selections[Z];selectedUnit=selectedTitle&&selectedTitle[f];if(selectedUnit){for(var b=0,d=selectedUnit.length;b<d;b++){L(selectedUnit[b]);}delete selectedTitle[f];return ;}}var Y=H(a,this);if(a.axis===M){for(var b=0,R=0,d=l.cells.length;b<d&&R<Y;b++){var W=l.cells[b],e=this.getCellForNode(W);if(P(e,a)){C(W,e,this);R++;}}}else{if(a.axis===D){var h=mstrmojo.dom.findAncestorByName(S,"table",false),k=h.rows;for(var b=0,R=0,d=k.length;b<d&&R<Y;b++){var g=k[b].cells;for(var X=0,U=g.length;X<U;X++){var W=g[X],e=this.getCellForNode(W);if(P(e,a)){C(W,e,this);R++;break;}}}}else{C(S,a,this);}}},rangeSelect:function N(n,o){var k=this.getCellForNode(n),R=this.getCellForNode(o);if(F(k,R)){if(k.o>R.o||k._ei>R._ei){var s=n;n=o;k=this.getCellForNode(n);o=s;R=this.getCellForNode(o);}var e=H(k,this),S=k.axis,p=mstrmojo.dom.findAncestorByName(n,"table",false),b=p.rows,l=n.parentNode,t=l.rowIndex,d=l.cells,g=o.parentNode.rowIndex;if(S===M){for(var h=t;h<=g;h++){var U=b[h].cells,W=false;for(var f=0,m=U.length,X=0;f<m&&X<e;f++){var Z=U[f],c=this.getCellForNode(Z);if(F(c,k)){C(Z,c,this);X++;}}}}else{if(S===D){for(var h=0,m=b.length,q=0;h<m&&q<e;h++){var U=b[h].cells,a=false;for(var f=0,Y=U.length;f<Y;f++){var Z=U[f],c=this.getCellForNode(Z);if(P(c,k)){a=true;}if(a){C(Z,c,this);}if(P(c,R)){break;}}if(a){q++;}}}else{if(t==g){for(var h=n.cellIndex,m=o.cellIndex;h<=m;h++){var Z=d[h],c=this.getCellForNode(Z);C(Z,c,this);}}else{for(var h=t,m=g;h<=m;h++){var U=b[h].cells;for(var f=0,Y=U.length;f<Y;f++){var Z=U[f],c=this.getCellForNode(Z);if(F(c,k)){C(Z,c,this);break;}}}}}}}},doSelection:function(a,Z,X){var b=mstrmojo.dom,R=b.isMetaKey(Z,a),S=b.shiftKey(Z,a);if(!R){Q(this);}this.clearAllHighlights();var Y=this.getCellForNode(X);var U=Y&&(Y.mix===undefined&&Y.o!==undefined),W=Y&&(Y.mix!==undefined&&(Y._lp||Y._tp));if(U||W){if(S){this.rangeSelect(this.lastSelectedTD,X);}else{this.singleSelect(X,R);this.lastSelectedTD=X;}}else{this.singleSelectForCopy(X,R);}I.call(this);},clearAllHighlights:function(){var S=this.getCellForNode(this.lastSelectedCell),W=S&&this.gridData.gts[S.axis===1?"row":"col"],R=W&&W[S.tui||S.ui];var U=R&&R.sc&&R.sc.tks&&R.sc.tks.split("\x1E");if(U&&this.model.docModel.getTargetInfoWin(U).length==U.length){this.clearHighlights();}}};})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.EnumRWUnitType");mstrmojo.vi.ui._HasSkeleton=mstrmojo.provide("mstrmojo.vi.ui._HasSkeleton",{_mixinName:"mstrmojo.vi.ui._HasSkeleton",isSkeletonContainer:false,defaultMaskColor:"#DEE0E0",getSkeletonMaskColor:mstrmojo.emptyFn,allowSkeletonLoading:function A(){return true;},toggleSkeleton:function B(D){if(this.isSkeletonContainer){var E=this.getSkeletonChildren();mstrmojo.array.forEach(E,function(F){mstrmojo.func.safeCall("toggleSkeleton",F)(D);});}else{if(this.skeletonNode&&this.allowSkeletonLoading()){mstrmojo.css.toggleClass(this.skeletonNode,"enabled",D);if(this.skeletonNode&&this.domNode){this.skeletonNode.style.position="absolute";this.skeletonNode.style.inset="0px";this.skeletonNode.style.borderRadius=this.domNode.style.borderRadius;this.skeletonNode.style.overflow="hidden";}if(this.skeletonMaskNode){this.skeletonMaskNode.style.backgroundColor=this.getSkeletonMaskColor();}}}},getSkeletonChildren:function C(){return[];}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G&&G.popupConfig?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(J,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,J,G);const I=E(J);C.addClass(I,D);if(I&&I.hasAttribute("aria-expanded")){I.setAttribute("aria-expanded","true");}};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){const G=E(this._lastOpened);C.removeClass(G,D);if(G&&G.hasAttribute("aria-expanded")){G.setAttribute("aria-expanded","false");}mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.css");var D=mstrmojo.css;function C(){var F=this.maskNode,G=this.isMasked;F.style.display=G?"block":"none";D.toggleClass(F,"masked",G);}mstrmojo.vi.ui._HasMask=mstrmojo.provide("mstrmojo.vi.ui._HasMask",{_mixinName:"mstrmojo.vi.ui._HasMask",isMasked:false,postBuildRendering:function E(){if(this._super){this._super();}C.call(this);},disableMask:function B(){var F=this.maskNode;F.style.display="none";D.removeClass(F,"masked");this.isMasked=false;},onisMaskedChange:function A(){if(!this.hasRendered){return ;}C.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.array,E=mstrmojo.css,C=mstrmojo.hash,H="focus-visible",B=["menuitem","option","listitem","radio","tab","menuitemcheckbox"];mstrmojo._IsAccessibleList=mstrmojo.provide("mstrmojo._IsAccessibleList",{_mixinName:"mstrmojo._IsAccessibleList",listRole:"listbox",listRoleDesc:"",itemContainerRole:"",itemRole:"option",itemTabIndex:-1,itemSelectedAriaProp:"aria-selected",buildItemAriaLabel:mstrmojo.emptyFn,enableA11y:function D(J){if(!J){this.domNode.setAttribute("role",this.listRole);if(this.listRoleDesc){this.domNode.setAttribute("aria-roledescription",this.listRoleDesc);}if(this.multiSelect&&this.itemRole!=="checkbox"){this.domNode.setAttribute("aria-multiselectable","true");}if(this.itemContainerRole&&this.itemsContainerNode){this.itemsContainerNode.setAttribute("role",this.itemContainerRole);}}var O=this,N=this.selectedIndices||{},L=(this.items&&this.items.length)||0,Q=F.indexOf(B,this.itemRole)>-1,P=this.itemsContainerNode&&this.itemsContainerNode.childNodes,K=this.buildItemAriaLabel,M=this.itemSelectedAriaProp&&!(this.itemSelectedAriaProp==="aria-current"&&this.multiSelect);F.forEach(P,function(U,R){if(!J||(J&&!U.grabFocus)){if(U.getAttribute("data-protect-tabindex")!=="true"){U.setAttribute("tabindex",O.itemTabIndex);}U.setAttribute("role",O.itemRole);if(K){var S=K.call(this,U,R);if(S){U.setAttribute("aria-label",S);}}if(Q&&O.itemRole!=="checkbox"){U.setAttribute("aria-setsize",L);U.setAttribute("aria-posinset",R+1);}if(M){U.setAttribute(O.itemSelectedAriaProp,!!N[R]);}}});},postBuildRendering:function A(){if(this._super){this._super();}if(this.enableAccessibility){this.enableA11y();}},setA11yAttribute:function(L,K){if(!this.enableAccessibility||!L){return ;}var J=this.itemSelectedAriaProp&&!(this.itemSelectedAriaProp==="aria-current"&&this.multiSelect);if(J){L.setAttribute(this.itemSelectedAriaProp,K);}},getFocusNode:function I(J){return C.walk("parent.navList."+J,this);},isTabItemHighlighting:function G(){var K=this.parent,L,J;if(!this.enableAccessibility||!K.canTab){return false;}L=this.getFocusNode(K.tabIndex);J=this.getFocusNode(K.tabIndex-1);if(L&&L instanceof Element&&E.hasClass(L,H)){return true;}if(J&&J instanceof Element&&E.hasClass(J,H)){return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.color","mstrmojo.css","mstrmojo.vi.enums.EnumFeatures","mstrmojo.dom");var M={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width","radius"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","background-opacity","fx"],S:["shadow-color","shadow-opacity","shadow-size","shadow-angle","shadow-distance"],RW:[]};M.RW=["z-index"].concat(M.T.concat(M.D));var K=mstrmojo.array,Q=mstrmojo.color,U=mstrmojo.css,D=mstrmojo.vi.enums.EnumFeatures,E=mstrmojo.dom;function R(b,d,a){var c=b[d]||[];c.push(a);b[d]=c;}function O(e,d){var c=((e&&e.fmts)||null);if(d){var g=e.thresholds,b=g&&g[d];if(b){var f={},h;for(h in c){f[h]=b[h]||c[h];}for(h in b){var a=b[h];f[h]=(typeof a==="string")?(a+" !important"):a;}c=f;}}return c;}function Y(b,a){if(b==="transparent"){return b;}if(typeof a==="undefined"||a===null||a<0||a>=100){return b;}return Q.rgb2rgba(b,a);}function L(c,b){var a=(c*Math.PI)/180;var d=Math.round(b*Math.cos(a));var e=Math.round(b*Math.sin(a));return{x:d,y:e};}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function F(){return"css_cache"+(this.thresholdId||"");},update:function H(b){var a=true;this.invisible=!!(b&&b.data&&b.data.invisible);if(this._super){a=this._super(b);}return a;},buildCSSFormatString:function I(n,k){var g=(this.getAdjustedFormatHandlers&&this.getAdjustedFormatHandlers()||this.formatHandlers)[n],AA=g.isTitleButton?this.getTitleButtonFormats&&this.getTitleButtonFormats(g.src):(g.src?k[g.src]:k);if(!AA){return null;}var e=g.props||g;if(!e){return null;}var s=[],q=-1,i=100,AB=100,p=0,t=0,a=0;var m=e.length-1;for(m;m>=0;m--){var j=e[m];var d=M[j]||[j];var o=d.length-1;for(o;o>=0;o--){j=d[o];var w=AA[j];if(w!==undefined){switch(j){case"fx":var u=w,c={};var b=u.gd;if(b){this.formatGradient(b,c);}var y=parseInt(u.rt,10);if(y){if(y===1||y===3){this.formatTextRotation(u.rt,c);}}if(u.ds){this.formatDropShadow(u,c);}var l;for(l in c){s[++q]=l+":"+c[l].join(" ");}break;case"background-opacity":if(mstrApp.supportFeature(D.SUPPORT_RADIUS_AND_SPACING)){i=(n==="titlebarNode"||n==="subtitlebarNode")&&this.titleBarContainerExtendedBackgroundNodeCssText?0:w;}else{i=w;}break;case"background-color":s[++q]=j+":"+Y(w,i);break;case"radius":s[++q]="border-radius:"+w+"px";break;case"shadow-color":var h=L(t,a);if(n==="customShadowHoverNode"){if(w==="transparent"){s[++q]="box-shadow: "+h.x+"px "+h.y+"px 10px 0px "+Y("#9A9B9C",60);}else{s[++q]="box-shadow: "+h.x+"px "+h.y+"px 10px 0px "+Y(w,60);}}else{s[++q]="box-shadow: "+h.x+"px "+h.y+"px "+p+"px 0px "+Y(w,AB);}break;case"shadow-opacity":AB=w;break;case"shadow-size":p=w;break;case"shadow-angle":t=w;break;case"shadow-distance":a=w;break;default:s[++q]=j+":"+w;}}else{if(j==="shadow-color"&&n==="customShadowHoverNode"){var h=L(t,a);s[++q]="box-shadow: "+h.x+"px "+h.y+"px 10px 0px "+Y("#9A9B9C",60);}}}}if(this.invisible){s.push("visibility:hidden");}return s.join(";")+";";},applyCSSFormatToNode:function J(d,a){var e=this[d],c=e&&e.style;if(c){var b=this.buildCSSFormatString(d,a)||"";b.split(";").forEach(function(f){var g=f.split(":");c[U.convertCssToCamelCase(g[0])]=g[1];});return b;}},clearSlotBackgroundCSS:function G(b){var c=this[b],a=c&&c.style;if(a){a.background="transparent none 0 0 no-repeat";a.filter="none";}},preBuildRendering:function B(){this._super();var d=this.getAdjustedFormatHandlers&&this.getAdjustedFormatHandlers()||this.formatHandlers,a=this.getFormats();if(d&&a){var e=this.defn=this.defn||{},f=this.getCacheKey(),c=e[f];if(!c){c=e[f]={};for(var b in d){var h=b+"CssText";this[h]=c[h]=this.buildCSSFormatString(b,a)||"";}}else{var g;for(g in c){this[g]=c[g];}}}return true;},formatGradient:function X(a,c){var b=U.buildGradient(a.t,a.sc,a.ec);if(b){R(c,b.n,b.v);}},formatDropShadow:function N(e,c){if(E.supports(E.cssFeatures.DROP_SHADOW)){var d=e.ds;if(E.isDXIE){R(c,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+d+",OffY="+d+")");}else{var a=[d,d],b=parseInt(e.rt,10);if(b===1||b===3){a[((b===1)?1:0)]=-d;}R(c,(E.isWK?"-webkit-":"")+"box-shadow",a.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(b,a){if(E.supports(E.cssFeatures.TEXT_ROTATION)){if(E.isDXIE){R(a,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+b+")");}else{var c=(b===1)?90:-90;R(a,E.CSS3_PREFIX+"transform-origin","top left");R(a,E.CSS3_PREFIX+"transform","rotate("+c+"deg)");if(E.isFF){R(a,"transform-origin","top left");R(a,"transform","rotate("+c+"deg)");}}}},getFormats:function Z(){if(!this.fmts){this.fmts=O.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function W(){delete this.defn[this.getCacheKey()];},destroy:function S(){if(this.defn){this.clearCache();}this._super&&this._super();},unrender:function P(a){if(this.thresholdId){this.fmts=null;}this._super(a);}});mstrmojo._Formattable.getBorderWidths=function(g){var e=g.getFormats(),a=(e.border)?e.border.match(/(\d*|\d*\.\d*)pt/)[0]:e["border-width"],d=g.model,c=d.docModel;return U.getBorderWidths(a,(c&&c.dpi)||d.dpi);};mstrmojo._Formattable.getBgColor=Y;mstrmojo._Formattable.getShadowOffsets=L;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.num","mstrmojo.color","mstrmojo.hash","mstrmojo.array","mstrmojo.string");var AL=mstrmojo.color,BA=mstrmojo.hash,BL=mstrmojo.array,CH=mstrmojo.css,B=mstrmojo.num,BR=mstrmojo.string;var CR=1,AJ=2,B8=3,AX=4,BP=5,Bt=6;var AG="FormattingFont",Y="FormattingAppearance",Ao="FormattingAlignment",l="FormattingSize",Bj="FormattingPatterns",C0="FormattingBorder",CI="FormattingOrder",A5="FormattingView",W="FormattingSelector",CK="Template Formatting",BB="FormattingPadding",Ct="AnalyticalEngineProperties",As="RWDocumentProperties",d="FormattingPage",AT="Mobile",R="VLDB Select",CS="FormattingNumber",B0="RWDExecution",Bb="ConfigurationProperties",BN="GeneralReportProperties",CC="Visualization";var Bl=1;var Bh="n",Cb="h",AP="w",CD="wm",Al="pw",BZ="ml",Cp="mr",A4="upwalw",BY="ff",CQ="fsz",Ae="fw",u="fit",Cn="fun",C3="fst",BK="fc",Z="atp",f="alh",AE="alv",BD="atw",Au="atd",AD="autoSizeText",CJ="textOverflow",Q="textFieldType",AO="textStyle",BC="bc",O="bo",B5="bgs",Cr="btc",B1="brc",CZ="bbc",BT="blc",s="bts",Cj="brs",e="bbs",CL="bls",CT="borderColor",X="borderStyle",A3="radius",A9="shadowStyle",AI="shadowColor",U="shadowOpacity",Aj="shadowSize",Az="shadowAngle",BO="shadowDistance",AS="ButtonBorderStyle",J="ButtonBorderColor",Ah="zIndex",C="showTitleBar",Af="useAsInfoWindow",CX="useAsSelectorPanel",AF="useAsFormPanel",S="PanelStackUXType",CB="TabCloseToDismissInfoWindow",Be="title",Bi="StyleForSwitchingPanel",Cu="InformationWindowPlacement",CY="TitleBarDisplay",AQ="ctrlIFW",Cq="ctrlStyle",A8="ctrlOrientation",AV="ctrlOrientationBehavior",Cc="ctrlMultiselect",BQ="ctrlAutoSearchEnabled",Ak="ciwm",Ci="cmcy",Cs="sec",p="easow",F="cacs",Cw="ccfa",BM="SelectorAppearance",BW="layoutXml",C7="lockAspectRatio",b="ism",N="shw",A7="mg",Bq="lhv",Br="rowslhv",Ce="colslhv",Aq="gridVPadding",CM="gridHPadding",BG="ln",C8="papo",CV="sar",C4="hnv",A0="iw",CA="ih",Ab="tsp",Am="visible",Cy="rf",B6="jad",w="jdc",CP="ode",i="mvm",P="enableDossierAIAssistant",B7="libraryExportOptions",Cm="pageSize",At="viewMode",I="showBaseViewInLibrary",CN="oddp",m="allowHtmlExecution",Co="showCtlDesc",Bp="allowCreateFiltersInConsumptionMode",Bw="noDataReturn",BF="fs",CF="lockTimezoneInLibrary",AH="f-version",Cx="s-lkbAlign",Av="s-border-color",Bg="s-borderStyle",Cz="s-bg-color",K="s-width",c="s-radius",H="s-slider-color",Aa="s-label-posi",Cd="text-decoration",C5="ssc",M="sstyle",Ck="sbc",q="sbs",y="color",Ai="slfc",AR="s-range",AZ="sro",B3="smfc",h="smbc",A="hgl",DA="ins",k="nct",A2="ncp",BJ="ncs",CE="ndp",AA="nfs",E="nnn",A1="nth",Cg="gi",Cl="st",BX="stfurh",G="stfuch",C1="stfuva",o="ch",Ch="rh",Aw="va",AU="olm",D="gdc",AB="gda",Cv="layoutstyle",Bm="hideVizBoxShadow",B9="stroke",Bz="strokeWidth",BH="strokeDasharray",AC="fill",Ac="fillOpacity",Bs="AvailableViewModes",Bv="containerPadding",L="paddingMode",CW="Transparency",C9="btnsz",Ay="btnrd",x="buttonProps",Bo="panelPadding",Ag="pinFilter",AW="pinToc",n="incRenderVizEn",Ax="panelBackgroundImageLevel",BI="tocInConsumption";var Ca={SOLID_COLOR:0,NO_FILL:1,GRADIENT:2},Ba={bgs:Ca.NO_FILL,bc:"transparent"},j={NONE:0,SOLID:1,DASHED:3,DOTTED:4,THICK:5,DOUBLE:6,HAIR:7};function C2(DB){return DB;}function Ap(DB){return parseInt(DB,10);}var By={name:"encode",_def:C2};By[B8]=function(DB){return DB?1:0;};By[AJ]=function(DB){if(DB==="transparent"){return -1;}if(DB.length===4){DB=DB.replace(/([0-9a-f])/ig,"$1$1");}DB=AL.rgbStr2hex(DB);return parseInt(DB.substring(5)+DB.substring(3,5)+DB.substring(1,3),16);};By[AX]=Ap;By[CR]=function(DB){if(typeof DB==="number"){return B.toLocaleString(DB);}if(typeof DB==="boolean"){return DB?"True":"False";}return C2(DB);};By[Bt]=function(DD){if(DD==="none"){return j.NONE;}var DC=DD.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],DB=DD.match(/pt ([\w\W]*)/)[1];if(DC==="2pt"){return j.THICK;}if(DC==="0.5pt"){return j.HAIR;}switch(DB){case"solid":return j.SOLID;case"double":return j.DOUBLE;case"dashed":return j.DASHED;case"dotted":return j.DOTTED;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BS={name:"decode",_def:C2};BS[B8]=function(DB){return parseInt(DB,10)===1;};BS[AJ]=function(DB){if(DB===-1){return"transparent";}if(typeof DB==="number"){return AL.decodeColor(DB);}if(DB.length===4){return DB.replace(/([0-9a-f])/ig,"$1$1");}return AL.rgbStr2hex(DB);};BS[AX]=Ap;BS[Bt]=function(DD){if(DD===undefined||DD===j.NONE){return"none";}var DC="1pt",DB="solid";if(DD===j.THICK){DC="2pt";}else{if(DD===j.HAIR){DC="0.5pt";}}if(DD===j.DASHED){DB="dashed";}else{if(DD===j.DOTTED){DB="dotted";}else{if(DD===j.DOUBLE){DB="double";}}}return DC+" "+DB;};function BE(){return this.pn.toLowerCase();}function Cf(DB,DD,DE){var DC=document.createElement("div");DC.style[DE||DD]=DB[DD];return DC;}function Bf(DB){return function(){return AL.rgbStr2hex(DB.apply(this,arguments));};}function BV(){var DB=BE.call(this);return DB==="underline"?DB:"line-through";}var An={name:"extract"},B2=An._def=function(DB,DD,DE){var DC=Cf(DB,DD||this.getFormatBlockName(),DE);return DC.style[this.getCssName()];};An[AJ]=Bf(B2);function Bd(DB){return B2.call(this,DB,this.getFormatBlockName())===BE.call(this);}function Bc(DB){var DC=B2.call(this,DB,this.getFormatBlockName(),this.getCssName());return DC.indexOf(BV.call(this))>-1;}function A6(DB){var DC=this.getFormatBlockName();return AL.rgbStr2hex(B2.call(this,DB,DC,DC+this.pn));}var CU={name:"resolve"},Ad=CU._def=function(DB,DE,DD,DF){DD=DD||this.getFormatBlockName();var DC=Cf(DB,DD);DC.style[DF||this.getCssName()]=DE;return DC.style[CH.convertCssToCamelCase(DD)];};CU[AJ]=function(DB,DD,DC,DE){if(DD.or!==undefined){return DD;}return AL.rgbStr2hex(Ad.call(this,DB,DD,DC,DE));};function B4(DB,DC){return BR.multiReplace(Ad.call(this,DB,DC?BE.call(this):"normal"),{'"':"'"});}function Ar(DB,DC){return BR.multiReplace(Ad.call(this,DB,DC),{'"':"'"});}function AK(DC,DE){var DD=(DC[this.getFormatBlockName()]||"").split(" "),DB=BV.call(this);if(DE){if(DD.indexOf(DB)===-1){DD.push(DB);}}else{DD=DD.filter(function(DF){return DF!==DB;});}return Ad.call(this,DC,DD.join(" "));}var a={name:"update"},Bx=a._def=function(DB,DC){DB[this.getFormatBlockName()]=this.resolve(DB,DC);return DB;};var Bk={};Bk[Bh]={ps:Y,pn:"Name",pt:CR};Bk[Cb]={ps:l,pn:"Height",pt:CR};Bk[AP]={ps:l,pn:"Width",pt:CR};Bk[CD]={ps:l,pn:"WidthMode",pt:AX};Bk[Al]={ps:d,pn:"PageWidth",pt:CR};Bk[BZ]={ps:d,pn:"MarginLeft",pt:CR,fn:"margin-left"};Bk[Cp]={ps:d,pn:"MarginRight",pt:CR,fn:"margin-right"};Bk[A4]={ps:d,pn:"UsePageWidthAsLayoutWidth",pt:B8};Bk[BY]={ps:AG,pn:"Name",pt:CR,fn:"font",cn:"fontFamily",extract:function(){return B2.apply(this,arguments).replace(/['"]/g,"");},resolve:function(DB,DD){var DC=Cf(DB,"font");DC.style.fontFamily="'"+DD+"'";return BR.multiReplace(DC.style.font,{'"':"'"});}};Bk[CQ]={ps:AG,pn:"Size",pt:AX,fn:"font",cn:"fontSize",resolve:Ar};Bk[Ae]={ps:AG,pn:"Bold",pt:B8,fn:"font",cn:"fontWeight",extract:Bd,resolve:B4};Bk[u]={ps:AG,pn:"Italic",pt:B8,fn:"font",cn:"fontStyle",extract:Bd,resolve:B4};Bk[Cn]={ps:AG,pn:"Underline",pt:B8,fn:"text-decoration",extract:Bc,resolve:AK};Bk[C3]={ps:AG,pn:"Strikeout",pt:B8,fn:"text-decoration",extract:Bc,resolve:AK};Bk[BK]={ps:AG,pn:"Color",pt:AJ};Bk[AO]={ps:Bj,pn:"TextStyle",pt:AX};Bk[Z]={ps:BB,pn:[["TopPadding","BottomPadding"],["LeftPadding","RightPadding"]],pt:CR};Bk[Bv]={ps:BB,pn:["TopPadding","BottomPadding","LeftPadding","RightPadding"],pt:CR};Bk[L]={ps:BB,pn:"PaddingMode",pt:AX};Bk[f]={ps:Ao,pn:"Horizontal",pt:AX,fn:"text-align"};Bk[BD]={ps:Ao,pn:"TextWrap",pt:B8,fn:"white-space"};Bk[Au]={ps:Ao,pn:"TextDirection",pt:AX};Bk[AE]={ps:Ao,pn:"Vertical",pt:AX};Bk[AD]={ps:l,pn:"AutoSizeText",pt:B8};Bk[CJ]={ps:l,pn:"TextOverflow",pt:B8};Bk[Q]={ps:Y,pn:"TextFieldType",pt:B8};Bk[BC]={ps:Bj,pn:"FillColor",pt:AJ,x:Bl,fn:"background-color",update:function(DB,DD){var DC=DB.fx;if(DD.or!==undefined){if(!DC){DC=DB.fx={};}var DE=DC.gd=DC.gd||{};DE.ec=DD.c2;DE.sc=DD.c1;DE.t=DD.or;delete DB[this.getFormatBlockName()];DB.fx=DC;}else{if(DC){delete DC.gd;}Bx.call(this,DB,DD);}return DB;}};Bk[O]={ps:Bj,pn:"FillOpacity",pt:AX,fn:"background-opacity"};Bk[B5]={ps:Bj,pn:"FillStyle",pt:AX};Bk[AH]={ps:Y,pn:"FormatVersionControl",pt:AX};Bk[Cx]={ps:Ao,pn:"SelectorLinkBarTextAlign",pt:AX};Bk[Av]={ps:C0,pn:"SelectorBorderColor",pt:AJ};Bk[Bg]={ps:C0,pn:"SelectorBorderStyle",pt:AX};Bk[Cz]={ps:Bj,pn:"SelectorBackgroundColor",pt:AJ};Bk[K]={ps:l,pn:"SelectorWidth",pt:AX};Bk[c]={ps:A5,pn:"SelectorRadius",pt:AX};Bk[H]={ps:Bj,pn:"SelectorSliderColor",pt:AJ};Bk[Aa]={ps:W,pn:"SelectorDataLabelPosition",pt:AX},Bk[Cd]={ps:AG,pn:"Underline",pt:B8,fn:"text-decoration",extract:Bc,resolve:AK};Bk[C5]={ps:Bj,pn:"SelectorSelectionColor",pt:AJ};Bk[M]={ps:Bj,pn:"SelectorSelectionFillStyle",pt:AX};Bk[Ck]={ps:C0,pn:"SelectorSelectionBorderColor",pt:AJ};Bk[q]={ps:C0,pn:"SelectorSelectionBorderStyle",pt:AX};Bk[y]={ps:AG,pn:"Color",pt:AJ};Bk[Ai]={ps:Bj,pn:"SelectorSelectionSliderFontColor",pt:AJ};Bk[AR]={ps:Bj,pn:"SelectorSelectionRangeColor",pt:AJ,x:Bl};Bk[AZ]={ps:Bj,pn:"SelectorSelectionRangeOrientation",pt:AX};Bk[B3]={ps:Bj,pn:"SelectorSelectionMarkerColor",pt:AJ};Bk[h]={ps:C0,pn:"SelectorSelectionMarkerBorderColor",pt:AJ};Bk[Cr]={ps:C0,pn:"TopColor",pt:AJ,fn:"border",extract:A6};Bk[B1]={ps:C0,pn:"RightColor",pt:AJ,fn:"border",extract:A6};Bk[CZ]={ps:C0,pn:"BottomColor",pt:AJ,fn:"border",extract:A6};Bk[BT]={ps:C0,pn:"LeftColor",pt:AJ,fn:"border",extract:A6};Bk[CT]={ps:C0,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:AJ,fn:"border",extract:A6,resolve:Bf(function(DB,DD){var DE=this.getFormatBlockName(),DC=Ad.call(this,DB,DD,DE,DE+"Color"),DF=DC.indexOf("rgb");if(DF>-1){DC=DC.slice(0,DF)+AL.rgbStr2hex(DC.slice(DF));}return DC;})};Bk[X]={ps:C0,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:Bt,fn:"border",extract:A6,resolve:function(DB,DE){var DC=DE.split(" "),DF=this.getFormatBlockName();if(!DB[DF]){DB[DF]="transparent";}DB[DF]=Ad.call(this,DB,DC[0],DF,DF+"Width");var DD=Ad.call(this,DB,DC[1]||"none",DF,DF+"Style"),DG=DD.indexOf("rgb");if(DG>-1){DD=DD.slice(0,DG)+AL.rgbStr2hex(DD.slice(DG));}return DD;}};Bk[s]={ps:C0,pn:"TopStyle",pt:Bt,fn:"border",extract:A6};Bk[Cj]={ps:C0,pn:"RightStyle",pt:Bt,fn:"border"};Bk[e]={ps:C0,pn:"BottomStyle",pt:Bt,fn:"border",extract:A6};Bk[CL]={ps:C0,pn:"LeftStyle",pt:Bt,fn:"border",extract:A6};Bk[A3]={ps:A5,pn:"Radius",pt:AX};Bk[A9]={ps:Bj,pn:"ShadowStyle",pt:AX};Bk[AI]={ps:Bj,pn:"ShadowFillColor",pt:AJ,x:Bl,fn:"shadow-color",update:function(DB,DD){var DC=DB.fx;if(DD===undefined){delete DB[this.getFormatBlockName()];}else{if(DD.or!==undefined){if(!DC){DC=DB.fx={};}var DE=DC.gd=DC.gd||{};DE.ec=DD.c2;DE.sc=DD.c1;DE.t=DD.or;delete DB[this.getFormatBlockName()];DB.fx=DC;}else{if(DC){delete DC.gd;}Bx.call(this,DB,DD);}}return DB;}};Bk[U]={ps:Bj,pn:"ShadowFillOpacity",pt:AX,fn:"shadow-opacity"};Bk[Aj]={ps:Bj,pn:"ShadowSize",pt:AX,fn:"shadow-size"};Bk[Az]={ps:Bj,pn:"ShadowAngle",pt:AX,fn:"shadow-angle"};Bk[BO]={ps:Bj,pn:"ShadowDistance",pt:AX,fn:"shadow-distance"};Bk[AS]={ps:C0,pn:"ButtonBorderStyle",pt:Bt,fn:"border",extract:A6};Bk[J]={ps:C0,pn:"ButtonBorderColor",pt:AJ,fn:"border",extract:A6};Bk[Ah]={ps:CI,pn:"ZIndex",pt:AX,fn:"z-index"};Bk[S]={ps:A5,pn:"PanelStackUXType",pt:AX};Bk[Af]={ps:A5,pn:"UseAsInformationWindow",pt:B8};Bk[CX]={ps:A5,pn:"UseAsSelectorPanel",pt:B8};Bk[AF]={ps:A5,pn:"UseAsFormPanel",pt:B8};Bk[C]={ps:A5,pn:"ShowTitleBar",pt:B8};Bk[Be]={ps:A5,pn:"Title",pt:CR};Bk[Bi]={ps:A5,pn:"StyleForSwitchingPanel",pt:AX};Bk[Cu]={ps:A5,pn:"InformationWindowPlacement",pt:AX};Bk[CB]={ps:A5,pn:"TabCloseToDismissInfoWindow",pt:B8};Bk[CY]={ps:A5,pn:"TitleBarDisplay",pt:AX};Bk[AQ]={ps:W,pn:"InformationWindowTarget",pt:CR};Bk[Cq]={ps:W,pn:"Style",pt:AX};Bk[A8]={ps:W,pn:"Orientation",pt:AX};Bk[DA]={ps:W,pn:"IndependentNodeSelector",pt:AX};Bk[AV]={ps:W,pn:"OrientationBehavior",pt:AX};Bk[Cc]={ps:W,pn:"Multiselect",pt:B8};Bk[BQ]={ps:W,pn:"AutoSearchEnabled",pt:B8};Bk[Ak]={ps:W,pn:"ItemWidthMode",pt:AX};Bk[Ci]={ps:W,pn:"MetricConditionType",pt:AX};Bk[Cs]={ps:W,pn:"ShowElementCount",pt:AX};Bk[p]={ps:W,pn:"ExportAsShownOnWeb",pt:AX};Bk[F]={ps:W,pn:"SelectorStatus",pt:AX};Bk[Cw]={ps:W,pn:"ContextForAuto",pt:CR};Bk[BM]={ps:W,pn:"SelectorAppearance",pt:CR};Bk[BW]={ps:l,pn:"LayoutXML",pt:BP};Bk[C7]={ps:l,pn:"LockAspectRatio",pt:B8};Bk[b]={ps:l,pn:"ImageSizeMode",pt:AX};Bk[CA]={ps:l,pn:"ImageHeight",pt:CR};Bk[A0]={ps:l,pn:"ImageWidth",pt:CR};Bk[Ab]={ps:As,pn:"layoutBarPosition",pt:CR};Bk[BF]={ps:As,pn:"ExecutionFullScreenMode",pt:B8};Bk[Cv]={ps:As,pn:"LayoutStyle",pt:AX};Bk[Bm]={ps:As,pn:"hideVizBoxShadow",pt:AX};Bk[Am]={ps:Y,pn:"Visible",pt:B8};Bk[BG]={ps:CK,pn:"LongNames",pt:CR};Bk[C8]={ps:CK,pn:"ParentPosition",pt:CR};Bk[AU]={ps:CK,pn:"Indented",pt:AX};Bk[CV]={ps:Ct,pn:"ShowAllRows",pt:CR};Bk[C4]={ps:Ct,pn:"HideNullZeroValues",pt:CR};Bk[CM]={ps:BB,pn:["LeftPadding","RightPadding"],pt:CR};Bk[Aq]={ps:BB,pn:["TopPadding","BottomPadding"],pt:CR};Bk.rowsshw={ps:CK,pn:"ShowRowHeaders",pt:CR};Bk.rowsmg={ps:CK,pn:"MergeCells",pt:CR};Bk[Br]={ps:CK,pn:"LockRowHeaders",pt:CR};Bk.colsshw={ps:CK,pn:"ShowColumnHeaders",pt:CR};Bk.colsmg={ps:CK,pn:"MergeColumnCells",pt:CR};Bk[Ce]={ps:CK,pn:"LockColumnHeaders",pt:CR};Bk[BX]={ps:CK,pn:"SubtotalFormatUseRowHeaders",pt:CR};Bk[G]={ps:CK,pn:"SubtotalFormatUseColumnHeaders",pt:CR};Bk[C1]={ps:CK,pn:"SubtotalFormatUseValues",pt:CR};Bk[Cy]={ps:AT,pn:"RefreshFrequency",pt:AX};Bk[B6]={ps:R,pn:"Join Across Datasets",pt:AX};Bk[w]={ps:R,pn:"MCE Join To Get Data Combination",pt:AX};Bk[n]={ps:As,pn:"RenderVizIncrementally",pt:AX,};Bk[CP]={ps:B0,pn:"OnDemandEvaluation",pt:AX};Bk[i]={ps:As,pn:"MaximizeVizMode",pt:AX};Bk[P]={ps:Bb,pn:"EnableDossierAIAssistant",pt:B8};Bk[B7]={ps:As,pn:"LibraryExportOptions",pt:BP};Bk[Cm]={ps:As,pn:"PageSize",pt:BP};Bk[At]={ps:As,pn:"ViewMode",pt:AX};Bk[I]={ps:Bb,pn:"ShowBaseViewInLibrary",pt:AX};Bk[CN]={ps:B0,pn:"OnDemandDUPopulation",pt:AX};Bk[m]={ps:BN,pn:"AllowHtmlExecution",pt:AX};Bk[Co]={ps:As,pn:"ShowControlDescription",pt:BP};Bk[Bp]={ps:As,pn:"AllowCreateFiltersInConsumptionMode",pt:BP};Bk[CF]={ps:BN,pn:"LockTimezoneInLibrary",pt:AX};Bk[A]={ps:Y,pn:"Highlight",pt:AX};Bk[k]={ps:CS,pn:"Category",pt:AX};Bk[AA]={ps:CS,pn:"Format",pt:CR};Bk[BJ]={ps:CS,pn:"CurrencySymbol",pt:CR};Bk[CE]={ps:CS,pn:"DecimalPlaces",pt:AX};Bk[A2]={ps:CS,pn:"CurrencyPosition",pt:AX};Bk[E]={ps:CS,pn:"NegativeNumbers",pt:AX};Bk[A1]={ps:CS,pn:"ThousandSeparator",pt:AX};Bk[Cg]={ps:Y,pn:"GroupInfo",pt:CR};Bk[CW]={ps:Y,pn:"Transparency",pt:AX};Bk[D]={ps:Bj,pn:"GradientColor",pt:AJ};Bk[AB]={ps:Bj,pn:"GradientAngle",pt:AX};Bk[Bs]={ps:d,pn:"AvailableViewModes",pt:BP};Bk[C9]={ps:A5,pn:"ButtonSize",pt:AX};Bk[Ay]={ps:A5,pn:"ButtonRadius",pt:AX};Bk[x]={ps:CC,pn:"ButtonProps",pt:CR};Bk[Bo]={ps:BB,pn:"AllPadding",pt:AX};Bk[Ag]={ps:As,pn:"PinFilterPanel",pt:BP};Bk[AW]={ps:As,pn:"PinTOCPanel",pt:BP};Bk[Ax]={ps:Bj,pn:"BackgroundImageLevel",pt:AX};Bk[BI]={ps:As,pn:"ApplyTOCLayoutInConsumption",pt:B8};BL.forEach(BA.keyarray(Bk),function(DB){var DC=Bk[DB];DC.getFormatBlockName=function(){var DE=this.fn;if(!DE){var DD=this.pn;DE=DD.charAt(0).toLowerCase()+DD.substr(1);}return DE;};DC.getCssName=function(){var DD=this.getFormatBlockName.call(this),DE=this.cn;if(!DE){DE=CH.convertCssToCamelCase(DD);}return DE;};BL.forEach([By,BS,An,CU,a],function(DD){var DE=DD.name;DC[DE]=DC[DE]||DD[DC.pt]||DD._def;});});function C6(DD,DB,DC){var DG=DC[DD.ps]=DC[DD.ps]||{},DJ=DD.pn,DI=BL.isArray(DJ)&&BL.isArray(DJ[0]);DB=DD.encode(DB);if(DI){for(var DH=0;DH<DJ.length;DH++){var DF=DB&&DB.split(" ")[DH]||DB,DE=DJ[DH];BL.forEach([].concat(DE),function(DK){DG[DK]=DF;});}}else{BL.forEach([].concat(DJ),function(DK){DG[DK]=DB;});}return DC;}function t(DE,DB,DD){var DF=DE.x;if(DF){if((DF&Bl)>0){if(DB&&DB.color!==undefined){DB=mstrmojo.util.color.convertRC3ColorToNormalColor(DB);}var DG=!!DB.c1,DC=DE.pn==="ShadowFillColor",DI=DE.pn==="SelectorSelectionRangeColor",DJ=Ca.SOLID_COLOR;if(DG){C6(DE,DB.c1,DD);var DH=DD[Bj];DJ=Ca.GRADIENT;if(DI){DH.SelectorSelectionRangeColor2=DB.c2!==undefined?DE.encode(DB.c2):undefined;DH.SelectorSelectionRangeOrientation=DB.or;return C6(Bk[AZ],DB.or,DD);}else{DH.GradientColor=DE.encode(DB.c2);DH.GradientAngle=DB.or?0:90;DH.GradientXOffset=0;DH.GradientYOffset=0;}}else{if(DE.encode(DB)===-1){DJ=Ca.NO_FILL;}else{C6(DE,DB,DD);}}return C6(Bk[DC?A9:B5],DJ,DD);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function g(DC,DF,DB){var DE=Bk[DC];if(!DE){throw new Error("Invalid property "+DC+" in FormatModel::getFormatUpdate.");}DB=DB||{};var DD=t.call(this,DE,DF,DB);if(DD){return DD;}return C6(DE,DF,DB);},createUpdateToUnsetProperty:function BU(DC,DD,DB){DB=DB||{};DB.unset=this.getFormatUpdate(DC,DD,DB.unset);return DB;},getFormatPropertyInfo:function CG(DB){return Bk[DB];},getValueFromUpdate:function z(DC,DD){var DF=Bk[DC],DB=null;try{DB=DD[DF.ps][DF.pn];}catch(DE){}return DB;},getGradientValues:function Bu(DC){var DB=DC.fx&&DC.fx.gd;if(DB){var DE={c1:DB.sc,c2:DB.ec,or:DB.t};return DE;}if(DC[B5]===2){if(DC.bc.c1){return DC.bc;}var DD={c1:DC.bc,c2:DC.gdc,or:DC.gda===90?0:1};return DD;}return null;},decodeGradientValue:function Bn(DB){if(DB&&DB.c1){DB.c1=this.decodeValue(D,DB.c1);DB.c2=this.decodeValue(D,DB.c2);return DB;}return null;},decodeValue:function AN(DB,DC){return Bk[DB].decode(DC);},encodeValue:function AM(DB,DC){return Bk[DB].encode(DC);},updateFormatBlock:function AY(DB,DC,DD){return Bk[DC].update(DB,DD);},getFormatBlockValue:function CO(DB,DC){return Bk[DC].extract(DB);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:Bh,HEIGHT:Cb,WIDTH:AP,WIDTH_MODE:CD,PAGE_WIDTH:Al,MARGIN_LEFT:BZ,MARGIN_RIGHT:Cp,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:A4,FONT_FAMILY:BY,FONT_SIZE:CQ,FONT_WEIGHT:Ae,FONT_STYLE:u,UNDERLINE:Cn,LINE_THROUGH:C3,COLOR:BK,TEXT_PADDING:Z,TEXT_ALIGN:f,VERTICAL_ALIGN:AE,TEXT_WRAP:BD,TEXT_DIRECTION:Au,AUTO_SIZE_TEXT:AD,TEXT_OVERFLOW:CJ,TEXT_TYPE:Q,TEXT_STYLE:AO,BACKGROUND_COLOR:BC,FILL_OPACITY:O,FILL_STYLE:B5,GRADIENT_COLOR:D,GRADIENT_ANGLE:AB,BORDER_TOP_COLOR:Cr,BORDER_RIGHT_COLOR:B1,BORDER_BOTTOM_COLOR:CZ,BORDER_LEFT_COLOR:BT,BORDER_TOP_STYLE:s,BORDER_RIGHT_STYLE:Cj,BORDER_BOTTOM_STYLE:e,BORDER_LEFT_STYLE:CL,BORDER_COLOR:CT,BORDER_STYLE:X,RADIUS:A3,SHADOW_STYLE:A9,SHADOW_COLOR:AI,SHADOW_OPACITY:U,SHADOW_SIZE:Aj,SHADOW_DISTANCE:BO,SHADOW_ANGLE:Az,BUTTON_BORDER_STYLE:AS,BUTTON_BORDER_COLOR:J,Z_INDEX:Ah,USE_AS_INFO_WINDOW:Af,USE_AS_SELECTOR_PANEL:CX,USE_AS_FORM_PANEL:AF,USE_AS_FORM:S,TAB_CLOSE_TO_DISMISS_INFO_WINDOW:CB,SHOW_TITLE_BAR:C,TITLE:Be,CONTROL_IFW:AQ,CONTROL_STYLE:Cq,CONTROL_ORIENTATION:A8,INDEPENDENT_NODE_SELECTOR:DA,CONTROL_ORIENTATION_BEHAVIOR:AV,CONTROL_MULTISELECT:Cc,CONTROL_AUTOSEARCH:BQ,CONTROL_ITEM_WIDTH_MODE:Ak,CONTROL_METRIC_CONDITION_TYPE:Ci,CONTROL_SHOW_ELEMENT_COUNT:Cs,CONTROL_EXPORT_AS_SHOWN_ON_WEB:p,CONTROL_SELECTOR_STATUS:F,LAYOUT_XML:BW,LOCK_ASPECT_RATIO:C7,IMAGE_SIZE_MODE:b,SHOW_HEADER:N,MERGE_HEADER:A7,LOCK_HEADER:Bq,LOCK_ROW_HEADER:Br,LOCK_COL_HEADER:Ce,LONG_NAME:BG,PARENT_POSITION:C8,SHOW_ALL_ROWS:CV,HIDE_NULL:C4,IMAGE_WIDTH:A0,IMAGE_HEIGHT:CA,VISIBLE:Am,LAYOUT_TAB_POSITION:Ab,GRID_VERTICAL_PADDING:Aq,GRID_HORIZONTAL_PADDING:CM,REFRESH:Cy,JOIN_ACROSS_DATASET:B6,MCE_JOIN_TO_GET_DATA_COMBINATION:w,ON_DEMAND_EVALUATION:CP,MAXIMIZE_VISUALIZATION:i,ENABLE_DOSSIER_AI_ASSISTANT:P,LIBRARY_EXPORT_OPTIONS:B7,DASHBOARD_PAGE_SIZE:Cm,DASHBOARD_VIEW_MODE:At,BASE_VIEW_IN_LIBRARY:I,OPTIMIZE_DERIVED_OBJ:CN,ALLOW_HTML_JS:m,SHOW_CONTROL_DESCRIPTION:Co,ALLOW_CREATE_FILTERS_IN_CONSUMPTION_MODE:Bp,FULL_SCREEN_MODE:BF,LOCK_TIME_ZONE:CF,SELECTOR_LINKBAR_TEXT_ALIGNMENT:Cx,SELECTOR_LABEL_POSITION:Aa,SELECTOR_SELECTION_FONT_UNDERLINE:Cd,SELECTOR_SELECTION_COLOR:C5,SELECTOR_SELECTION_FILL_STYLE:M,SELECTOR_CONTEXT_FOR_AUTO:Cw,SELECTOR_SELECTION_FONT_COLOR:y,VIZ_HIGHLIGHTING:A,GROUP_INFO:Cg,SUBTOTAL:Cl,SUBTOTAL_FORMAT_USE_ROWHEADERS:BX,SUBTOTAL_FORMAT_USE_COLUMNHEADERS:G,SUBTOTAL_FORMAT_USE_VALUES:C1,FMT_COL_HEADER:o,FMT_ROW_HEADER:Ch,FMT_VALUES:Aw,OUTLINE:AU,LAYOUT_STYLE:Cv,VIZ_BOX_SHADOW_HIGHLIGHT:Bm,SVG_STROKE:B9,SVG_STROKE_WIDTH:Bz,SVG_STROKE_DASHARRAY:BH,SVG_FILL:AC,SVG_FILL_OPACITY:Ac,STYLE_FOR_SWITCHING_PANEL:Bi,INFO_WINDOW_PLACEMENT:Cu,TITLE_SRC:CY,AVAILABLE_VIEW_MODES:Bs,CONTAINER_PADDING:Bv,PADDING_MODE:L,BUTTON_SIZE:C9,BUTTON_RADIUS:Ay,BUTTON_PROPS:x,ALLOW_NO_DATA_RETURN:Bw,PANEL_PADDING:Bo,PIN_FILTER_PANEL:Ag,PIN_TOC_PANEL:AW,ENABLE_PARALLEL_RENDERING:n,PANEL_BACKGROUND_IMAGE_LEVEL:Ax,APPLY_TOC_LAYOUT_IN_CONSUMPTION:BI},ENUM_PROPERTY_SETS:{FORMATTING_NUMBER:CS},ENUM_NUMBER_FORMAT_KEYS_OBJ:{CATEGORY:k,CURRENCY_POSITION:A2,CURRENCY_SYMBOL:BJ,DECIMAL_PLACES:CE,FORMAT:AA,NEGATIVE_NUMBERS:E,THOUSAND_SEPARATOR:A1},ENUM_REACT_FORMAT_TABS:{PROPERTY_TAB:"PROPERTY_TAB",TEXT_FORMAT_TAB:"TEXT_FORMAT_TAB",TITLE_TAB:"TITLE_TAB"},RADIUS_PADDING_RATIO:0.5,ENUM_FMT_BG_STYLE:Ca,NO_FILL_CONFIG:Ba};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.func","mstrmojo.array","mstrmojo.dom");var D=mstrmojo.css,F=mstrmojo.array,C=mstrmojo.dom,G="focus-visible";mstrmojo.vi.util.A11yUtility=mstrmojo.provide("mstrmojo.vi.util.A11yUtility",{enableAccessibility:function(O,Q,L){var N=O.domNode,K=O.widget||N,P=O.focusNode||N,J=O.loseFocusCallback,M=O.grabFocusCallback;if(!N){return ;}K.grabFocus=function(R,U){if(R){N.focus();var S=N&&N.tagName;if(typeof S==="string"&&S.toUpperCase()==="INPUT"){N.select();}if(M instanceof Function){M(U);}}D.addClass(P,G);};K.loseFocus=function(R){if(R){N.blur();}if(J instanceof Function){J();}D.removeClass(P,G);};N.onblur=mstrmojo.func.composite([N.onblur||mstrmojo.emptyFn,function(){D.removeClass(P,G);}]);if(N.getAttribute("data-protect-tabindex")!=="true"){N.setAttribute("tabindex","-1");}if(Q){N.setAttribute("role",Q);}if(typeof L==="string"){N.setAttribute("aria-label",L);}else{if(typeof L==="object"){F.forEach(Object.keys(L),function(R){if(L[R]){N.setAttribute(R,L[R]);}});}}},addAccessibilityProps:function E(K,L,J){if(!K){return ;}if(L){K.setAttribute("role",L);}if(typeof J==="string"){K.setAttribute("aria-label",J);}else{if(typeof J==="object"){F.forEach(Object.keys(J),function(M){if(J[M]){K.setAttribute(M,J[M]);}});}}},hideNodesFromA11yTree:function H(K,J){if(!K){return ;}var L=function(M){if(M&&typeof M.setAttribute==="function"){M.setAttribute("role","presentation");M.setAttribute("aria-hidden","true");M.removeAttribute("aria-label");}};if(!J){L(K);}else{F.forEach(K.childNodes,function(M){L(M);});}},isKeyBoardEvent:function B(J){return J&&J.type==="keydown";},removeTabIndex:function(J,L){if(!J){return ;}var K=J.querySelectorAll('[tabindex="0"]'),M,N="mstrmojo-DocTextfield-valueNode";F.forEach(K,function(O){if(O.getAttribute("data-protect-tabindex")!=="true"&&!C.findAncestorByClassName(O,N,true,J)){O.removeAttribute("tabindex");}});if(L){M=J.querySelectorAll("input, a, textarea");F.forEach(M,function(O){O.setAttribute("tabindex","-1");});}},focusFirstTabbableElement:function I(J){var L=mstrmojo.vi.util.A11yUtility.getTabbableElements(J);var K=L[0];if(K){setTimeout(function(){K.focus();},0);}else{console.warn("No focusable elements found in the container.");}},getTabbableElements:function A(J){if(!J||!(J instanceof HTMLElement)){console.error("Invalid container element provided.");return[];}var K='button:not([tabindex="-1"]), [href]:not([tabindex="-1"]), input:not([tabindex="-1"]),select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])';return Array.from(J.querySelectorAll(K));}});mstrmojo.vi.util.A11yUtility.CSS_FOCUS_VISIBLE=G;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(X){if(!X.pageSize||X.pageSize<=0){var Y=X.scrollboxNode;X.pageSize=Y&&Y.clientHeight||0;}return X.pageSize;}function U(X,Y){if(X.usePaging){X.totalPages=1;var a=X.itemsContainerNode,Z=B(X);if(X.usePaging&&a&&Z){X.totalPages=Math.ceil((a.clientHeight-parseInt(a.style&&a.style.paddingBottom||0,10))/Z);}if(a){X.itemsContainerNode.style.paddingBottom=Z+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(X){return'<div class="'+this.getWrapperCss(X)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(X){return X&&X.childNodes;},wrapperParentNode:function D(X){return X;},createWrapperNode:function G(X){var Y=X&&X.ownerDocument,Z=Y.createElement("div");return Z;},findScrollRange:function N(m,b,l,q,Y,e,s,o){if(!b){return{start:0,end:0};}var g=this.wrapperNodes(m),k=parseInt(b/2,10),a=parseInt(Math.log(b)/Math.log(2),10),Z=0,X=b-1,j=l+q,f=g[0].offsetTop,d;for(var n=1;n<=a;n++){d=g[k].offsetTop-f+o;if(d<l){Z=k;}else{if(d>j){X=k;}}var c=Math.round(b/Math.pow(2,n+1));k+=(d>l)?-c:c;k=Math.min(Math.max(0,k),b-1);}return{start:Z,end:X};},findWrapper:function L(Z,X){var Y=this.wrapperNodes(Z);return Y&&Y[X];},findIndex:function F(X,a,Z){var Y=this._nd2iw(X,a,Z);return Y?this._iw2idx(X,a,Y):-1;},itemOffsetTop:function W(Y,c,X,a){if(!a){var Z=this.wrapperNodes(c);a=Z&&Z[X];if(!a){return 0;}}var b=c.firstChild;if(!b||(b===a)){return 0;}return a.offsetTop-b.offsetTop;},whereDrop:function S(e,X,Z,d,Y){var a=this._nd2iw(e,X,Z),f,c,g;if(a){c=this._iw2idx(e,X,a);f=c;g=this.itemOffsetTop(e,X,null,a);var b=a.offsetHeight;if(d.y>Y.top+g+b/2){f++;g+=b;}}else{return e.dropCuePos;}return{left:0,top:g,idx:f,idxActual:c};},getWrapperCss:function(X){return K;},postBuildRendering:function(b,a,Z,Y,X){U(Y,this);},buildItemWrappers:function P(g,d,l,f,c,m){var n=this.itemWrapperPrefix(l),i=this.itemWrapperSuffix,b=n+this.itemWrapperPrefill+i,a=[this.markupPrefix],Y=1,X=l.selectedIndices||{},p=function o(k,j){for(var q=k;q<j;q++){a[Y++]=n;var t=d.build(l,f,g[q],q);if(X[q]){t=t.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}a[Y++]=t;a[Y++]=i;}};var e=(g&&g.length)||0;c=c&&d?Math.min(c,e):0;if(c){p(0,c);}m=m&&d?Math.min(m,e-c):0;var h=e-m;for(var Z=c;Z<h;Z++){a[Y++]=b;}if(m){p(h,e);}a.push(this.markupSuffix);return a;},fillItemWrappers:function H(Z,j,f,o,h,Y,d,n){var g=(j&&j.length)||0,m=this.wrapperNodes(Z),q=h.itemStatus,X=mstrmojo.css,b=o.selectedIndices||{};for(var e=Y,l=Math.min(d+1,g),c=0;e<l;e++){if(q[e]!==A){m[e].innerHTML=f.build(o,h,j[e],e);if(b[e]){var a=m[e].firstChild;if(a){X.addClass(a,["selected"]);}}c++;if(c===n){break;}}}return c;},onadd:function O(g,X,b,h){if(X&&h){var d=h.value.length,e=this.wrapperNodes(X),f=e[h.index],a=this.getWrapperCss(g);for(var Z=0;Z<d;Z++){var Y=this.createWrapperNode(X);Y.className=a;Y.innerHTML=J;if(f){this.wrapperParentNode(X).insertBefore(Y,f);}else{this.wrapperParentNode(X).appendChild(Y);}}U(g,this);}},onremove:function Q(a,e,X,Z){if(e&&Z){var d=this.wrapperNodes(e);if(d){var f=Z.value.length;for(var b=Z.index+f-1,Y=Z.index;b>=Y;b--){if(d[b]){this.wrapperParentNode(e).removeChild(d[b]);}}}U(a,this);}},onchange:function R(k,Z,e,m){if(Z&&m){var f=this.wrapperNodes(Z);if(f){var Y=mstrmojo.css,n=e.itemStatus,l;for(var d=0,X=m.removed,h=X&&X.length;d<h;d++){l=X[d];if(n[l]){Y.removeClass(f[l].firstChild,["selected"]);}}for(var c=0,g=m.added,b=g&&g.length;c<b;c++){l=g[c];if(n[l]){Y.addClass(f[l].firstChild,["selected"]);}}}}},_nd2iw:function E(Y,b,a){b=this.wrapperParentNode(b);if(b&&a&&b!==a){var X=Y.domNode,Z=a.parentNode;while(Z){if(Z===b){return a;}if(Z===X){break;}a=Z;Z=a.parentNode;}}return null;},_iw2idx:function M(Z,d,c){var Y=Z.items&&Z.items.length,a=this.wrapperNodes(d),X=I.findBin(a,c,"offsetTop",Y);for(var b=X;b<Y;b++){if(a[b].offsetHeight){return b;}}return -1;},toPage:function(X,Z){var Y=X.scrollboxNode;if(X.usePaging&&Y){Y.scrollTop=Z*B(X);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(X){var Y=X.scrollboxNode,Z=B(X);return Math.round((Y&&Z&&Y.scrollTop/Z)||0);},toItem:function(b,d){var Z=b&&b.itemsContainerNode,g=b.scrollboxNode,X=this.itemOffsetTop(b,Z,d),e=this.wrapperNodes(Z)[d].clientHeight,Y=g.clientHeight,f=g.scrollTop,a=f;if(X<f){a=X;}else{if(f+Y-e<X){a=Math.min(X,X-Y+e);}}g.scrollTop=a;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash");var E=mstrmojo.dom,X=mstrmojo.css,N=mstrmojo.hash,C=false,Z=3.5,K=5,D=1,W=2;function O(o,c){var h=c.parentRect.x||c.parentRect.left,l=c.parentRect.y||c.parentRect.top,i={},g=c.info&&c.info.min,n=c.info&&c.info.max,k=c.target,m=k&&k.getAttribute("pos"),p=m&&parseInt(m,10),f=k&&!k.isSide,e=mstrmojo.func.safeCall("getScale",c.targetContainer)()||1;i.x=Math.min(Math.max(g.x,E.getMousePosition(o,window).x),n.x);i.y=Math.min(Math.max(g.y,E.getMousePosition(o,window).y),n.y);var b=c.skipGuideOperation,j=c.targetContainer.snapGuide,a=!b?j.findIntersect((i.y-l)/e,"y"):null,d=!b?j.findIntersect((i.x-h)/e,"x"):null;i.y=a?parseFloat(a.mid)*e+l:i.y;i.x=d?parseFloat(d.mid)*e+h:i.x;i.shouldYSnap=a!==null;i.shouldXSnap=!!d&&((p===W)||(f&&p===D));return i;}function F(a,c){var p=c.parentRect,y=mstrmojo.func.safeCall("getScale",c.targetContainer)()||1,d=c.parentScrollPos,u=(p.x||p.left)+d.scrollLeft,e=(p.y||p.top)+d.scrollTop,g=c.targetBox,x=c.targetContainer.snapGuide,n=(a.x-u)/y,i=a.width/y,k=n+i,j=(a.y-e)/y,q=a.height/y,s=j+q,AA=[n,k,null,j,s,null].reduce(function(h,l,b){var t=null;if(l!==null&&!c.skipGuideOperation){t=x.findIntersect(l,Math.floor(b/3)?"y":"x");}h.push(t);return h;},[]);if(!c.skipGuideOperation){g.updateGuidesDiv(c.highLight,AA,p);}[].forEach.call(c.boxOverlay.children,function(h,b){mstrmojo.hash.copy({left:((b%2?a.x-u:b?a.x-u+a.width:a.x-u))/y+"px",top:((b%2?b&2?a.y-e+a.height:a.y-e:a.y-e))/y+"px",width:(b%2?a.width/y:3)+"px",height:(b%2?3:a.height/y)+"px"},h.style);});if(E.isIE11){var m=mstrmojo.hash.walk("targetContainer.containerNode",c),z=m&&m.getBoundingClientRect(),f=m&&Math.floor(z.left),o=m&&Math.floor(z.top);[].forEach.call(c.boxOverlay.children,function(b){b.style.transform="translate("+f+"px, "+o+"px)";});}}function P(c,a,b){return function(d){c.call(mstrmojo.all[a],d,b);};}function I(k,a,j){var i={},d=a.targetBox,b=mstrmojo.func.safeCall("getScale",a.targetContainer)()||1,e=(d&&!!d.getBoxBorderWidth)?d.getBoxBorderWidth()/2*b:0,c=Z*b,f=K*b;var g=k.y+a.parentScrollPos.scrollTop,h=k.x+a.parentScrollPos.scrollLeft;i.width=Math.abs(h-a.info.axis.x);i.height=Math.abs(g-a.info.axis.y);if(a.isSide){if(a.isV){i.x=h>a.info.axis.x?a.info.axis.x-e:h;i.y=a.info.axis.y-e;i.height=a.boxRect.height;if(j){i.width+=k.shouldXSnap?0:(a.info.considerSplitterWidthX?0:c);}else{i.width-=k.shouldXSnap?c:0;}}else{i.x=a.info.axis.x-e;i.y=g>a.info.axis.y?a.info.axis.y-e:g;i.width=a.boxRect.width;if(j){i.height+=k.shouldYSnap?0:(a.info.considerSplitterWidthY?0:c);}else{i.height-=k.shouldYSnap?c:0;}}}else{i.x=h>a.info.axis.x?a.info.axis.x-e:h;i.y=g>a.info.axis.y?a.info.axis.y-e:g;if(j){i.width+=k.shouldXSnap?0:(a.info.considerSplitterWidthX?0:f);i.height+=k.shouldYSnap?0:(a.info.considerSplitterWidthY?0:f);}else{i.width-=k.shouldXSnap?f:0;i.height-=k.shouldYSnap?f:0;}}return i;}function M(a,b){var c=O(a,b);if(this.isPredefinedNLGInfoWindow){return ;}F(I(c,b,false),b);}function Q(j,a){if(!C){return ;}E.detachEvent(window.document,"mousemove",a.fnMove);E.detachEvent(window.document,"mouseup",a.fnUp);C=false;mstrApp.setInteractive(true);(this.children||[]).forEach(function(k){k.domNode.style.pointerEvents="inherit";});var h=O(j,a),g=I(h,a,true),c=a.targetBox,b=mstrmojo.func.safeCall("getScale",a.targetContainer)()||1,d=(c&&!!c.getBoxBorderWidth)?c.getBoxBorderWidth()/2*b:0,f=a.target,e;if(d!==0&&f&&c){if(f.className==="resizer"&&c.resizerCache){e=c.resizerCache.indexOf(f);if(e<=1){g.height+=d;}if(e===0||e===3){g.width+=d;}}else{if(f.className==="edge"&&c.splitterCache){e=c.splitterCache.indexOf(f);if(e===0){g.width+=d;}else{if(e===1){g.height+=d;}}}}}this.resizerMouseUp(g,a);var i=a.highLight;if(i){this.toggleGuidesDiv(i,false);delete a.highLight;}delete a.fnMove;delete a.fnUp;delete a.boxOverlay;}function G(h){if(C){return ;}if(!this.resizable){return ;}if(this.boxContentDisAllowResizing&&this.boxContentDisAllowResizing()){return ;}mstrApp.setInteractive(false);var b={},f=E.eventTarget(window,h),a=this.getContainer();b.boxRect=this.domNode.getBoundingClientRect();if(a.updateParentRect){a.updateParentRect();}b.info=this.getResizerInfo(f.getAttribute("pos")^2,f.isSide);b.startPos=E.getMousePosition(h,window);b.target=f;if(f.isSide){b.isSide=f.isSide;}b.isV=f.isV;(this.children||[]).forEach(function(i){i.domNode.style.pointerEvents="none";});var j=this.getContainerRect()||this.domNode.parentNode.getBoundingClientRect();b.highLight=this.createGuidesDiv(j);this.toggleGuidesDiv(b.highLight,true);b.boxOverlay=document.createElement("div");b.targetContainer=this.getContainer();b.targetBox=this;for(var e=0;e<4;++e){var c=document.createElement("div");c.setAttribute("pos",e);c.style.position="fixed";c.style.background="#4286f4";c.style.zIndex=f.style.zIndex;b.boxOverlay.appendChild(c);}this.resizerMouseDown(b);var d=P(M,this.id,b),g=P(Q,this.id,b);E.attachEvent(window.document,"mousemove",d);E.attachEvent(window.document,"mouseup",g);b.fnMove=d;b.fnUp=g;C=true;h.stopPropagation();}mstrmojo.vi.ui.rw._boxCornerResizer=mstrmojo.provide("mstrmojo.vi.ui.rw._boxCornerResizer",{_mixinName:"mstrmojo.vi.ui.rw._boxCornerResizer",registerResizerHandler:function A(a){this.resizerEvtMouseDownHandler=P(G,this.id);E.attachEvent(a,"mousedown",this.resizerEvtMouseDownHandler);},unregisterResizerHandler:function L(a){if(this.resizerEvtMouseDownHandler){E.detachEvent(a,"mousedown",this.resizerEvtMouseDownHandler);}},calculateContainerRect:function H(){if(!this.domNode){return ;}var a=this,b=this.getSplitterHost().getBoundingClientRect();["left","top","right","bottom"].forEach(function(c,d){(a.splittersInfo=a.splittersInfo||[]).push({left:(d%2?b.left:b[c]-3.5)+"px",top:(d%2?b[c]-3.5:b.top)+"px",width:(d%2?b.width:7)+"px",height:(d%2?7:b.height)+"px"});(a.resizerInfo=a.resizerInfo||[]).push({left:((d===0||d===3)?b.left:(b.right-5))+"px",top:(d&2?b.bottom-5:b.top-5)+"px",width:"7px",height:"7px"});});},getNewNode:function R(a,b){var c=document.createElement("div");c.setAttribute("unselectable","on");c.className=a;c.setAttribute("pos",b%4);return c;},getContainerRect:function B(){return this.getContainer().parentRect;},getResizerInfo:function Y(e,b){var a=this.getContainer();if(a){var i=this.getContainerRect(),j=(a.getScrollPosition&&a.getScrollPosition())||{scrollLeft:0,scrollTop:0},g=b?this.splitterCache[e].getBoundingClientRect():this.resizerCache[e].getBoundingClientRect(),c=this.getScale(),h=g.left+j.scrollLeft,f=g.top+j.scrollTop,d={min:{x:i.left+4,y:i.top+4},max:{x:i.right-4,y:i.bottom-4},axis:{x:(b&&e===RIGHT_SPLITTER||!(b&&e===LEFT_SPLITTER))?h:h+Z*c,y:(b&&(e===RIGHT_SPLITTER||e===LEFT_SPLITTER))?f:b?f+Z*c:f+K*c}};d.considerSplitterWidthX=d.axis.x-h>0;d.considerSplitterWidthY=d.axis.y-f>0;return d;}},resizerMouseUp:function S(d,b){var a=b.parentRect,c=b.parentScrollPos,f=mstrmojo.func.safeCall("getScale",b.targetContainer)()||1,e={left:(d.x-a.left-c.scrollLeft)+"px",top:(d.y-a.top-c.scrollTop)+"px",width:d.width,height:d.height};this.getSplitterHost().removeChild(b.boxOverlay);this.postResizerMouseUp(e);},getScale:function J(){var a=mstrmojo.func.safeCall("model.getDocVIVisualizationsMainPanel.getScale",this)()||mstrmojo.func.safeCall("panel.getScale",this)();return a||1;},updateSplitters:function U(){if(!this.splittersInfo){return ;}var f=this,a=this.splitterCache=this.splitterCache||[],i=this.resizerCache=this.resizerCache||[],e=this.splittersInfo,d=this.resizerInfo,h=this.getSplitterHost(),j=this.getSplitterHost().getBoundingClientRect(),c=this.parent.maximizedBox,b=this.getScale();if(N.walk("domNode.style.padding",this)){var g=N.walk("domNode.style.padding",this)||"0";g=parseInt(g,10)*b;j.left-=g;j.top-=g;j.right+=g;j.bottom+=g;j.x-=g;j.y-=g;j.width+=g*2;j.height+=g*2;}if(h){[].concat(e,d).forEach(function(o,m){var l=m&1<<2?"resizer":"edge",k=l==="resizer"?"resizer":"splitter",p=this[k+"Cache"]||[],n=p[m%4];if(!n){p[m%4]=n=this.getNewNode(l,m);if(l==="edge"){n.style.position="absolute";n.isV=false;if((m%2)===0){X.addClass(n,["v"]);n.isV=true;}n.style.cursor=f.resizable?(m%2?"ns":"ew")+"-resize":"auto";n.isSide=true;this.registerResizerHandler(n);}else{n.style.position="absolute";n.style.cursor=f.resizable?(m&2?"s":"n")+(m===4||m===7?"w":"e")+"-resize":"auto";this.registerResizerHandler(n);}if(!n.parentNode){h.appendChild(n);}}o.left=(parseFloat(o.left)-j.left)/b+"px";o.top=(parseFloat(o.top)-j.top)/b+"px";o.width=parseFloat(o.width)/b+"px";o.height=parseFloat(o.height)/b+"px";N.copy(o,n.style);if(this.isGroup()){n.style.display="none";}else{n.style.display=this.isPredefinedNLGInfoWindow||(this.unDocked&&!mstrApp.isAppStatePresentation()&&!c&&!mstrApp.isLayoutModePreview())?"block":"none";}n.style.zIndex=this.getZIndex();},this);this.splittersInfo=this.resizerInfo=null;}},postResizerMouseUp:mstrmojo.emptyFn,getContainer:mstrmojo.emptyFn,resizerMouseDown:mstrmojo.emptyFn,getSplitterHost:mstrmojo.emptyFn,getZIndex:mstrmojo.emptyFn,isGroup:mstrmojo.emptyFn,});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.dom");mstrmojo.mobile.MobileTouchEvents=mstrmojo.provide("mstrmojo.mobile.MobileTouchEvents",{SHOW_OFFLINE_DIALOG_EVENT:"showOfflineDialog",FORWARD_EVENT_TO_ANDROID_EVENT:"forwardEventToAndroid",NETWORK_CHANGED_EVENT:"networkChanged",WEB_RENDER_FINISH:"webRenderFinish",MOJO_OBJECTS_RENDER_EVENT:"mojoObjectsRenderEvent"});}());(function(){mstrmojo.requiresClsP("mstrmojo","dom","hash","array","css","func","desc");var P=mstrmojo.dom,C=mstrmojo.css,Q=mstrmojo.hash,d=mstrmojo.array,o=mstrmojo.func,L=mstrmojo.desc;var K,F=[],AA="moving";mstrmojo.requiresDescs(15934,15935,15936,15937,15938,15939,15940,1006);function R(AE,AD){var AC=AE&&AE.length||0;AD=AD===undefined?30:AD;return AE+Array(Math.max(AD-AC,0)+1).join(" ");}function B(AC){if(K){window.clearTimeout(K);K=null;}G();d.forEach(AC,function(AD){C.toggleClass(AD,AA,true);});F=[].concat(AC);K=window.setTimeout(G,1000);}function G(){d.forEach(F,function(AC){C.toggleClass(AC,AA,false);});F=[];}function i(AK,AI,AC,AG){var AL=AK.rows,AD=AL.length,AF;if(AI<0||AI>=AD||AC<0||AC>AD){AF=false;}else{if(AC===AI||AC===AI+1){AF=true;}else{var AH=AL[AI],AE=AK.insertRow(AC);P.replace(AE,AH);if(mstrmojo.debugBundles&&console){console.log("move "+R('"'+AH.cells[0].textContent.trim()+'"')+' after "'+AK.rows[AH.rowIndex-1].textContent.trim()+'"');}if(!AG){B(Array.apply(null,AH.cells));}if(AI===1||AC===1){var AJ=this.getViz();AJ.offsetCellNode=S.call(this).rows[1].cells[0];}AF=true;}}return AF;}function y(AC){var AD=P.findAncestorByName(AC,"tr");return AD&&AD.rowIndex;}function H(AE,AF){var AC;if(AE){var AG=P.findAncestorByName(AE,"tr"),AD=AG&&AG.rowIndex;AC=AD+(AF?0:1);}else{if(AF){AC=S.call(this).rows.length;}else{AC=1;}}return AC;}function s(AE,AD){var AC;if(AE){AC=AE.ordinal;}else{if(AD){AC=Z.call(this)-1;}else{AC=0;}}return AC;}function Z(){var AC=this.getViz();dataBlocks=AC.dataBlocks,tc=0;d.filterOne(dataBlocks,function(AD){tc=AD&&AD.rw.row.tc;return tc!==undefined;});return tc;}function AB(AJ,AD){var AK=u.call(this),AN=AK.rowsPerPage,AL=Math.ceil((AJ+2)/AN)-1,AF=AK.pageStatus[AL],AE=[],AG;for(AG=AK.numPagesRendered;AG<AL;AG++){AE.push({idx:AG,fill:false});}var AI,AC;if(!AF||!AF.filled){if(AF&&AF.isOnDemand()){if(!AF.isDownloading&&!AK.isDownloading){var AM=AL*AN-1,AH=(AL+1)*AN-2;AF.isDownloading=true;AK.isDownloading=true;AK.cp.download(AM,AH);AI=true;AC=AH-AM+1;if(mstrmojo.debugBundles&&console){console.log("load data from orddinal "+AM+" to "+AH+" for page index "+AL+" and ordinal "+AJ);}}AE.push({idx:AL,fill:false});}else{AE.push({idx:AL,fill:true});}}if(AI&&AD){AK.parent.showDownloadStatus(AC);}else{AK.parent.closeDownloadStatus();}return AE;}function S(){var AC=u.call(this);return AC.tableNode;}function u(){var AC=this.getViz();return AC.zone;}function b(AF){var AD=this.getViz(),AC=AD.scrollboxLeft,AE=AD.scrollboxTop;if(AC!==AF.x||AE!==AF.y){AD.scrollTo(AF);}}mstrmojo.vi.controllers.CustomSortModeActionMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.CustomSortModeActionMgr",actions:null,pos:-1,historicalUnsilentActions:null,csDisplayPanel:null,init:function p(AC){Q.copy(AC,this);this.actions=[];this.historicalUnsilentActions=[];},appendHistUnsilentActions:function e(AC){this.historicalUnsilentActions=this.historicalUnsilentActions.concat(AC);},getViz:function c(){return this.csDisplayPanel.getVizBox().boxContent;},wrapCustomSortAction:function I(AD,AF,AC){var AG=this,AE=this.getViz();return{silent:true,submitAction:AD,srcEle:this.getOrdinalInfo(AF),tgtEle:this.getOrdinalInfo(AC),srcRefOrdinal:this.getRefOrdinal(AF),perform:function(AM,AP,AN){var AJ=this,AL=AJ.srcEle,AI=AJ.tgtEle,AK=AJ.submitAction.before,AQ=function(){var AV=AG.getNodeForOrdinal(AL.ordinal),AU=AG.getViz(),AS=AU.getCellForNode(AV),AR=AI&&AG.getNodeForOrdinal(AI.ordinal),AT=AR&&AU.getCellForNode(AR);if(AG.hasFailedSorts()||AS._e.id!==AL.id||AT&&AT._e.id!==AI.id){AG.addFailedSorts(AL.n,AI&&AI.n,AK);}else{i.call(AG,S.call(AG),y(AV),H.call(AG,AR,AK),AN);if(!AM){b.call(AG,{x:AU.scrollboxLeft||0,y:AG.getScrollYForGoldenSectionPoint(AV)});}}if(AP){AP();}};if(AM){AG.resetFailedSorts();AQ();}else{var AH=AJ.srcEle.ordinal,AO=s.call(AG,AJ.tgtEle,AK);if(AG.hasFailedSorts()){AG.addFailedSorts(AL.n,AI&&AI.n,AK);if(AP){AP();}}else{AG.prepareDataAndPages([AH,AO],AQ);}}},undo:function(){var AL=AG.getNodeForOrdinal(this.srcEle.ordinal),AJ=y(AL),AI=AG.getNodeForOrdinal(this.srcRefOrdinal),AH=H.call(AG,AI,false),AK=S.call(AG);i.call(AG,AK,AJ,AH);b.call(AG,{x:AG.getViz().scrollboxLeft||0,y:AG.getScrollYForGoldenSectionPoint(AL)});}};},prepareDataAndPages:function M(AH,AJ){var AF=0,AC=AH.length,AD=u.call(this),AG=this,AI=0;var AE=function(){self.setTimeout(function(){try{var AK=AB.call(AG,AH[AF]);if(AK.length>0){mstrApp.showWait();AD.preRenderPages();AD.renderPages(AK);AD.postRenderPages();AD._postPagesClearup=true;}else{if(AD._postPagesClearup){AD.postRenderPagesCleanup();AD.configureActions();AD._postPagesClearup=false;}if(AD.isRenderingComplete()){AD.postRenderingCleanup();}AF++;}if(AK.length>0||AF<AC){AI=AD.renderPause;AE();}else{AG.dpPreparingCleanUp();if(AJ){AJ();}}}catch(AL){AG.dpPreparingCleanUp();mstrApp.hideWait(true);throw AL;}},AI);};AD.renderingRows=true;AE();},dpPreparingCleanUp:function E(){u.call(this).renderingRows=false;},getRefOrdinal:function a(AE){var AG=this.getViz(),AC=AG.zone.tableNode.getElementsByTagName("tr"),AD=AE.cellIndex,AH=AE.parentElement.rowIndex,AF=AC[AH-1].cells[AD];return AG.getCellForNode(AF).o;},getOrdinalInfo:function z(AD){var AC=this.getViz().getCellForNode(AD);if(AC&&AC._e){return{id:AC._e.id,n:AC._e.n,ordinal:AC.o};}},getNodeForOrdinal:function q(AC){var AF=S.call(this).rows;if(AC>=0){var AD=AC+1,AE;AE=d.filterOne(AF,function(AG){return parseInt(AG.firstElementChild.getAttribute("r"),10)===AD;});return AE.firstElementChild;}return AF[0].firstElementChild;},getScrollYForGoldenSectionPoint:function U(AG){var AD=0.618,AI=this.getViz(),AC=AI.tableContainerNode.getBoundingClientRect(),AF=AC.top+AC.height*(1-AD),AE=AG.getBoundingClientRect(),AH=AE.top+AE.width/2;return(AI.scrollboxTop||0)+AH-AF;},wrapUnsilentAction:function X(AD,AC,AF,AE){var AG=this;return{silent:false,needDataReady:!!(AE&&AE.needDataReady),submitActions:d.ensureArray(AD),undoCallback:AC,perform:function(AI,AK){var AH=[],AI=d.ensureArray(AI),AL=AG.getViz(),AM=AL.model.getDataService(),AJ;if(AI.length>0){AH=AH.concat(AI);}AH=AH.concat(this.submitActions);AJ=AL.controller._getXtabCallback(AL,Q.copy(AC));if(AK){AJ=o.wrapMethods(AJ,AK);}AF=Q.copy(AF||{});AF.hideCancel=true;AF.noUpdate=true;AF.preserveStid=true;AF.noDeltaXML=true;AM.submitUpdates(AM.getUpdateTemplateAction(AL.k,AH),AJ,AF);}};},addAction:function w(AC){var AD=this.actions,AE=this.pos;AD.splice(AE+1);AD.push(AC);this.pos=AD.length-1;this.csDisplayPanel.updateStatus();},execute:function g(AD){this.addAction(AD);if(AD.silent){AD.perform(true);}else{var AC=this.getCustomSortActAhead();AD.perform(d.ensureArray(AC));}},undo:function W(){var AD=this.actions[this.pos];if(!AD){return ;}this.pos--;this.csDisplayPanel.updateStatus();if(AD.silent){AD.undo();}else{var AC=this.getActionParts4Undo();this.csDisplayPanel.recreateCSVizForUndo(AC.splitUTActions,AC.silentActions,AD.undoCallback);}},getActionParts4Undo:function m(){var AI=[],AK=[AI],AH=[],AF=this.actions,AG=this.pos,AD,AJ;while(AG>=0){AD=AF[AG];if(AD&&AD.silent){AH=[AD].concat(AH);}else{break;}AG--;}while(AG>=0){AD=AF[AG];if(AD){if(AD.silent){AJ=this.getCustomSortActAhead(AG+1);AI.unshift(AJ);AG-=(AJ.actions.length-1);}else{AI.unshift.apply(AI,AD.submitActions);if(AD.needDataReady){AI=[];AK.unshift(AI);}}}AG--;}var AE=this.historicalUnsilentActions,AC;AG=AE.length-1;while(AG>=0){AC=AE[AG];AI.unshift.apply(AI,AC.submitActions);if(AC.needDataReady){AI=[];AK.unshift(AI);}AG--;}return{splitUTActions:AK,silentActions:AH};},redo:function O(){var AD=this.actions[this.pos+1];if(!AD){return ;}this.pos++;this.csDisplayPanel.updateStatus();if(AD.silent){this.resetFailedSorts();var AC=this;AD.perform(false,function(){mstrApp.hideWait(true);if(AC.hasFailedSorts()){AC.actions.splice(AC.pos);AC.pos--;AC.csDisplayPanel.updateStatus();AC.showFailedSortsAndReset();}});}else{AD.perform(this.getCustomSortActAhead());}},getContSlientActionsBehind:function Y(){var AC=this.actions.length,AD,AE=[],AF;for(AD=this.pos+1;AD<AC;AD++){AF=this.actions[AD];if(AF&&AF.silent){AE.push(AF);}else{break;}}return AE;},getContSlientActionsBefore:function f(){var AF=this.actions,AC,AD=[],AE;for(AC=this.pos;AC>=0;AC--){AE=AF[AC];if(AE&&AE.silent){AD=[AE].concat(AD);}else{break;}}return AD;},getSlientActionsBefore:function A(){var AC=this.actions.slice(0,this.pos+1);return d.filter(AC,function(AD){return AD&&AD.silent;});},getUnslientActionsBefore:function l(){var AC=this.actions.slice(0,this.pos+1);return d.filter(AC,function(AD){return AD&&!AD.silent;});},getCustomSortActAhead:function k(AG){var AC=[],AD=(AG===undefined?this.pos:AG)-1,AF=this.actions;while(AD>=0){var AE=AF[AD];if(AE.silent){AC=[AE.submitAction].concat(AC);}else{break;}AD--;}if(AC.length>0){return this.csDisplayPanel.wrapCustomSortAction(AC,true);}},isCurrentActionSilent:function N(){return this.actions[this.pos]&&this.actions[this.pos].silent;},reset:function j(){this.actions=[];this.pos=-1;this.csDisplayPanel.updateStatus();},getActionsCount:function t(){return(this.actions||[]).length;},getFailedSortsCount:function h(){return(this.failedSorts||[]).length;},resetFailedSorts:function n(){this.failedSorts=[];},hasFailedSorts:function J(){return(this.failedSorts||[]).length>0;},addFailedSorts:function D(AD,AE,AC){this.failedSorts=this.failedSorts||[];this.failedSorts.push({srcName:AD,tgtName:AE,isPost:AC});},showFailedSortsAndReset:function x(){if(this.hasFailedSorts()){var AD=this.failedSorts.length,AF,AI,AC,AG,AH=L(15934,"Below sorting manipulations fail due to change in source data:")+" ";for(var AE=0;AE<AD;AE++){AF=this.failedSorts[AE];AI=AF.srcName;AC=AF.tgtName;AG=AF.isPost;if(AC){AH+=AG?L(15935,'move "#" before "##"').replace("#",AI).replace("##",AC):L(15936,'move "#" after "##"').replace("#",AI).replace("##",AC);}else{AH+=AG?L(15937,'move "#" to the end').replace("#",AI):L(15938,'move "#" to the top').replace("#",AI);}if(AE===AD-1){AH+=L(1006,".")+" ";}else{AH+=L(15939,",")+" ";}}AH+=L(15940,"Please manually do these sortings if necessary.");mstrmojo.err({message:AH});this.resetFailedSorts();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var F=mstrmojo.dom,I=mstrmojo.css,C="active";var A=false;mstrmojo.util.ui.SplitterParamsType=null;function H(N,R){var P=R.info,O=P&&P.min,M=P&&P.max,Q=R.scale||1,L=R.start+(F.getMousePosition(N,window)[R.mouseProp]-R.mousePosition)/Q*(P&&!!P.isReverseMove?-1:1);if(O!==undefined){L=Math.max(L,O);}if(M!==undefined){L=Math.min(L,M);}return L;}function G(M,L,N){return function(O){M.call(mstrmojo.all[L],O,N);};}function B(L,M){M.target.style[M.styleProp]=H(L,M)+"px";}function K(L,N){if(!A){return ;}var M=window.document;F.detachEvent(M,"mousemove",N.fnMove);F.detachEvent(M,"mouseup",N.fnUp);delete N.fnMove;delete N.fnUp;A=false;mstrApp.setInteractive(true);I.removeClass(N.target,C);this.splitterMoved(H(L,N)-N.start,N.info);(this.children||[]).forEach(function(O){O.domNode.style.pointerEvents="inherit";});this.splitterMouseUp();}function J(X){if(A){return ;}mstrApp.setInteractive(false);var L=this.id,M,N,Q=F.eventTarget(window,X),S=(Q.className.indexOf("v")===-1),R=S?"y":"x",P={};P.target=Q;P.info=this.getSplitterInfo(Q);N=P.info&&!!P.info.isReverseMove;M=S?"Top":N?"Right":"Left";P.start=N?parseInt(Q.style.right):Q["offset"+M];P.mouseProp=R;P.mousePosition=F.getMousePosition(X,window)[R];P.styleProp=M.toLowerCase();P.scale=mstrmojo.func.safeCall("getScale",this)()||1;(this.children||[]).forEach(function(Y){Y.domNode.style.pointerEvents="none";});this.splitterMouseDown(P);I.addClass(Q,C);var O=G(B,L,P),W=G(K,L,P);var U=window.document;F.attachEvent(U,"mousemove",O);F.attachEvent(U,"mouseup",W);P.fnMove=O;P.fnUp=W;A=true;}mstrmojo.util.ui._HostsSplitter=mstrmojo.provide("mstrmojo.util.ui._HostsSplitter",{_mixinName:"mstrmojo.util.ui._HostsSplitter",registerSplitter:function E(L){this.splitterEvtMouseDownHandler=G(J,this.id);F.attachEvent(L,"mousedown",this.splitterEvtMouseDownHandler);},unRegisterSplitter:function D(L){if(this.splitterEvtMouseDownHandler){F.detachEvent(L,"mousedown",this.splitterEvtMouseDownHandler);}},getSplitterInfo:mstrmojo.emptyFn,splitterMoved:mstrmojo.emptyFn,splitterMouseDown:mstrmojo.emptyFn,splitterMouseUp:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var C=mstrmojo.css,J=mstrmojo.dom,S=mstrmojo.array,U={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},D="scrollingMode",k="scrolling",i=3;var e=J.isMac();function H(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function f(n,o){return(typeof this.getScrollDimension==="function"&&this.getScrollDimension(n))||o;}function l(s,o){var q=this.scrollNode,n=H.call(this),p={v:s,h:o};S.forEach(["v","h"],function(u){var t=U[u];C.toggleClass(n,t.hostCls,p[u]);C.toggleClass(q,t.scrollNodeCls,p[u]);});}function c(x,s){var o=this.getScale(),t=J.eventTarget(s,x),p=this.scrollNode,w=J.positionWithScale(p,undefined,o),u=this.scrollTrackNodes,n=this.scrollBarNodes,q=function q(AF){var AD=t===u[AF];if(AD){var AG=U[AF],y=n[AF],AH=J.positionWithScale(y,undefined,o),AA=J.getMousePosition(x,s)[AG.position],AB=AA-AH[AG.position],z=AB>0?1:-1,AE=f.call(this,AF,p[AG.scrollDimension]),AI=Math.abs(AB-(AH.h/2))*(AE/w[AG.dimension]),AC={};AC[AG.scroll]={isStyle:false,start:p[AG.scroll],stop:p[AG.scroll]+(z*Math.min(AE/3,500,AI)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:AC,duration:200,interval:10,target:p})).play();}};q.call(this,"h");q.call(this,"v");}function h(o,n){var s=this.scrollNode,q=o.type==="mousewheel",p=q?-1:1;mstrmojo.array.forEach(["h","v"],function(AA){var y=U[AA],u=q?"wheelDelta":"delta",x=o[u+{h:"X",v:"Y"}[AA]]*p,w=Math.abs(x),t=x/w,z=w===3&&J.isFF&&!e;s[y.scroll]+=z?t*40:x;});J.stopPropogation(n,o);J.preventDefault(n,o);}function I(t){var w=this.getScale(),s=U[t],q=this.scrollNode,p=J.positionWithScale(q,undefined,w),o=p[s.dimension],u=f.call(this,t,q[s.scrollDimension]),n=m.call(this,o,u,w);return Z(n,o,u);}function Z(o,n,p){return(!isNaN(o)&&o<1)&&(Math.abs(n-p)>i);}function m(n,p,o){if(o){return n/p;}return Math.ceil(n)/p;}function Q(AN){var AQ=this.getScale(),AG="px",z=U[AN],s=this.scrollNode,AA=H.call(this),AP=J.positionWithScale(s,undefined,AQ),AB=AP[z.dimension],AI=f.call(this,AN,s[z.scrollDimension]),q=m.call(this,AB,AI,AQ),AM=this.scrollBarNodes,x=AM[AN],AE=this.scrollTrackNodes,AF=AE[AN],AK=Z(q,AB,AI),t=z.cls;if(!x){AF=AE[AN]=document.createElement("div");var u=this,AD=function(AS){c.call(u,AS);},y=function(AS){h.call(u,AS);},AJ=function(AU,AS,AT){J.attachEvent(AU,AS,AT);u.installedEventListeners.push({e:AU,evt:AS,fn:AT});};AJ(AF,"click",AD);AF.className="mstrmojo-scrolltrack "+t;x=AM[AN]=document.createElement("div");x.className="mstrmojo-scrollbar "+t;AF.appendChild(x);AA.appendChild(AF);var AL=mstrApp.isSingleTier?"mousewheel":"wheel";AJ(AF,AL,y);AJ(x,AL,y);}var AR=x.style,w=(s[z.scroll]/f.call(this,AN,s[z.scrollDimension])),o=J.deltaWithScale(s,H.call(this),AQ)[z.position],AH=AF.style;if(AK){AH[z.styleDir]=o+AG;AH[z.styleDim]=AP[z.dimension]+AG;var p=q*AB,AC=35,AO=AB*w,n=AB-35;AR[z.styleDim]=(p<AC?AC:p)+AG;AR[z.styleDir]=(AO>n?n:AO)+AG;}return AK;}function R(){return !(mstrApp.isSingleTier&&e);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function g(n){this._super(n);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=R();}this.installedEventListeners=[];},getScale:mstrmojo.emptyFn,onRender:function B(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function P(){var o=this.scrollNode,p=J.isFF&&!e;if(o){var n=J.attachMarkupEvent(this.id,o,"scroll");this.installedEventListeners.push({e:o,evt:"scroll",fn:n});}if(p){C.addClass(o,"firefox-on-windows");}else{if(J.isEdge){C.addClass(o,"ms-edge");}}if(!this.hasCustomScrollbar){C.addClass(H.call(this),"mstrmojo-sb-host-show-default");C.addClass(o,"mstrmojo-sb-show-default");return ;}if(o){C.addClass(H.call(this),"mstrmojo-scrollbar-host");C.addClass(o,"mstrmojo-scrollNode");}},updateScrollbars:function d(){if(!this.hasRendered){return ;}this.setupScrollNodes();var n,p=false;if(!this.hasCustomScrollbar){if(this.scrollNode){n=this.scrollNode.style;n.overflowY=I.call(this,"v")?"scroll":"hidden";n.overflowX=I.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};l.call(this,p,p);n=this.scrollNode.style;var q=Q.call(this,"v"),o=Q.call(this,"h");n.overflowY=q?"scroll":"hidden";n.overflowX=o?"scroll":"hidden";l.call(this,q,o);}},addNoSwipeClass:function N(){if(J.isTouchOptimizationEnabled()&&this.hasRendered&&this.scrollNode&&I.call(this,"h")){C.addClass(this.domNode,"mstrmojo-no-swipe");}},onscroll:function b(){var t=this.scrollNode,q=this.getScale();if(t&&this.hasCustomScrollbar){var AB=function AB(AC){var AD=parseInt(AC);return AD===null||isNaN(AD)?0:AD;},z=J.positionWithScale(t,undefined,q),y=z.h-AB(C.getStyleValue(t,"padding-bottom")),p=z.w-AB(C.getStyleValue(t,"padding-right")),s=f.call(this,"h",t.scrollWidth),AA=f.call(this,"v",t.scrollHeight),u=AA-y,n=s-p,o=this.scrollBarNodes,w=o.v,x=o.h;if(u>0){w.style.top=((y-J.positionWithScale(w,undefined,q).h)*(t.scrollTop/(u)))+"px";}if(n>0){if(this.isRTL){x.style.right=((J.positionWithScale(x,undefined,q).w-p)*(t.scrollLeft/(n)))+"px";}else{x.style.left=((p-J.positionWithScale(x,undefined,q).w)*(t.scrollLeft/(n)))+"px";}}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function W(o){var t=this.getScale(),s=this.scrollNode,q=J.positionWithScale(s,undefined,t),p=o.src.node,n=this.scrollBarNodes;if(this.isDraggingScrollBar(o)){return{isScrollBar:true,direction:p===n.v?"v":"h",scrollTop:s.scrollTop,scrollLeft:s.scrollLeft,conversionRatio:{y:s.scrollHeight/q.h,x:s.scrollWidth/q.w}};}return(this._super&&this._super(o));},isDragValid:function O(n){return this.isDraggingScrollBar(n)||(this._super&&this._super(n))||false;},isDraggingScrollBar:function X(o){var p=o.src.node,n=this.scrollBarNodes;return !!n&&(p===n.v||p===n.h);},ondragstart:function Y(n){if(this.isDraggingScrollBar(n)){C.addClass(n.src.node,k);C.addClass(H.call(this),D);}if(this._super){this._super(n);}},shouldDragBubble:function F(n){var o=n.src.node,p=this.scrollTrackNodes;return !(!!p&&(o===p.v||o===p.h));},ondragmove:function G(o){if(this.isDraggingScrollBar(o)){var y=o.tgt,n=o.src,z=y.pos,p=n.pos,u=n.node,t=this.scrollNode,x=this.scrollBarNodes,w=n.data,s={y:(z.y-p.y),x:(z.x-p.x)},q=w.conversionRatio;if(u===x.v){t.scrollTop=w.scrollTop+(s.y*q.y);}else{t.scrollLeft=w.scrollLeft+(s.x*q.x);}}if(this._super){this._super(o);}},ondragend:function E(n){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(n)){C.toggleClass(n.src.node,k,false);C.toggleClass(H.call(this),D,false);}if(this._super){this._super(n);}},widgetResized:function j(){if(this._super){this._super();}this.updateScrollbars();},unrender:function A(n){S.forEach(this.installedEventListeners,function(o){J.detachEvent(o.e,o.evt,o.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(n);},getDefaultScrollBarProps:function M(n){return U[n];},disableScroll:function a(n,q){var p=this.scrollNode,o=H.call(this);S.forEach(["v","h"],function(t){var s=U[t];C.toggleClass(o,s.hostCls,false);C.toggleClass(p,s.scrollNodeCls,false);});if(p){if(q||q===undefined){p.style.overflowY="hidden";}else{if(p.style.overflowY==="hidden"){p.style.overflowY="auto";}}if(n||n===undefined){p.style.overflowX="hidden";}}},disableScrollWithoutClearTheCls:function L(n,s){var q=this.scrollNode,o=H.call(this),p;if(q){if(s||s===undefined){q.style.overflowY="hidden";p=U.v;C.toggleClass(o,p.hostCls,false);}else{if(q.style.overflowY==="hidden"){q.style.overflowY="auto";}}if(n||n===undefined){p=U.h;C.toggleClass(o,p.hostCls,false);q.style.overflowX="hidden";}}},enableScroll:function K(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=I.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(s){var q=this.getScale(),y=this.scrollNode,u=s.clientHeight,t=y.clientHeight,o=J.positionWithScale(s,undefined,q).y,w=J.positionWithScale(y,undefined,q).y,p=o-w,n=p<0,x=p+u>t;if(n||x){y.scrollTop+=p+u/2-t/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(U){if(this._editComplete){return ;}var Z,R=false,Y=this.text,W=false;if(U===C){Z=Y;W=true;R=true;}if((!U&&U!==0)||(!this.allowNewLine&&U===L)){var S=this[this.editableSlot],X=S&&(S.innerText||S.textContent)||"";if(!this.allowNewLine){Z=X.replace(/\n/g,"");}else{Z=X;}R=true;if(!this.allowEmptyText&&Z.length===0){Z=Y;W=true;}}if(R){this._editComplete=true;Z=Z.replace(/\u00A0/g,"\u0020");this.text=Z;this.set("isEditing",false);this.onTextEditComplete(Z!==Y,Y);delete this._editComplete;}if(W){this.refresh();}}function E(R){var S={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[S[R.name]]||(R.name==="click"&&this.editOnTwoClicks)&&R.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(U,S,R){if(typeof S["on"+R]!=="function"){H.attachMarkupEvent(U,S,R);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,editOnTwoClicks:false,firstClickTime:undefined,allowEmptyText:false,allowTrimming:true,allowNewLine:false,editOnDoubleClick:false,onTextEditBegin:mstrmojo.emptyFn,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var U=this.editableSlot,R=this[U],W=this[this.editButtonSlot||U];K.addClass(R,"hasEditableText");this.text=this.text||R.innerText||R.textContent||"";R.innerHTML=this.getEditableTextInnerHTML();var S=this.id;if(this.editOnClick||this.editOnTwoClicks){F(S,W,"click");}F(S,W,"dblclick");F(S,R,"blur");F(S,R,"keyup");F(S,R,"keydown");},getEditableTextInnerHTML:function Q(){return this.allowHTML?this.text:N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");},onclick:function P(R){if(this.editOnClick){E.call(this,R);}if(this._super){this._super(R);}},onTwoClicks:function(R){if(this.editOnTwoClicks){E.call(this,R);}if(this._super){this._super(R);}},ondblclick:function G(R){E.call(this,R);},onblur:function M(){I.call(this);},onkeyup:function B(S){var R=window.event||S.e;I.call(this,R.keyCode);},onkeydown:function J(S){var R=window.event||S.e;if(R.keyCode===L){I.call(this,R.keyCode);S.cancel();}},_set_text:function D(U,R){var S=this.text;this.text=R;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(R||"",true);}return(S!==R);},onisEditingChange:function O(){if(this.hasRendered){var R=this[this.editableSlot],S=!!this.isEditing;R.contentEditable=S;R.spellcheck=false;K.toggleClass(R,"editable",S);if(S){R.focus();H.setElementSelection(R);this.onTextEditBegin();}else{R.blur();R.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var F=mstrmojo.dom,R=mstrmojo.css,C=mstrmojo.string,J="selected",M="hidden";function Q(Y,Z,a,X,c){var b=c.listHooks[Y];if(b&&b.call(c,Z,a,X)){return ;}R.toggleClass(Z,J,Y==="select");}function H(a,Z,Y){var b=this[a],X=b?b.split(Z):[];this[a]=mstrmojo.array.distinct(X.concat(Y.split(Z))).join(Z);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,allowHTML:false,init:function O(X){this._super(X);this._shiftStartIndex=-1;},getItemMarkup:function E(Y,X){var Z=(this.allowHTML?"":"@en");return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{'+Z+'@title}" {@attrs}>{'+Z+"@n}</{@tag}>";},getItemDisplayName:function N(X){return X.n||"";},getItemProps:function S(b,X){var Y=!!this.selectedIndices[X],c={tag:"div",sel:Y,cls:"",n:this.getItemDisplayName(b),style:"",idx:X,addCls:function Z(e){H.call(this,"cls"," ",e);},addStyle:function a(e){H.call(this,"style",";",e);},title:b.title||"",attrs:(b.attrs||[]).join(" ")};if(c.n&&C.isEmpty(c.n)){c.n=C.decodeHtmlString("<br/>");}if(Y){c.addCls(J);}var d=b.cls;if(d){c.addCls(d);}if(b.hid){c.addCls(M);}return c;},itemRenderer:{render:function U(Y,X,Z){Y._renderIdx=X;return mstrmojo.string.apply(Z.getItemMarkup(Y,X),Z.getItemProps(Y,X));},select:function L(Y,Z,X,a){Q("select",Y,Z,X,a);},unselect:function I(Y,Z,X,a){Q("unselect",Y,Z,X,a);}},onclick:function W(X){try{var Z=this.getItemFromTarget(X.getTarget());if(Z){X.cancel();this.doItemSelect(Z,X||{});}}catch(Y){mstrApp.onerror(Y);}},getItemIndex:function B(Y,X){return Y._renderIdx;},doItemSelect:function D(m,l){var f=l.hWin,g=l.e,j=this.getItemIndex(m,l),h=m._positionIdx,Y=F.isMetaKey(f,g),d=F.shiftKey(f,g),Z=this.multiSelect,c=this.useListModKeys,k=this._shiftStartIndex,a=this.selectedIndices;if(Z&&c&&d&&k>-1){var X=[],b=[];this.processContinuousSelection(X,b,j);this.addSelect(X);this.removeSelect(b);}else{if(Z&&(!c||Y)){var i=(a[j])?"removeSelect":"addSelect";this[i](j,false,h);}else{this.singleSelect(j,false,h);}this._shiftStartIndex=j;}},processContinuousSelection:function K(Z,Y,X){var e=this._shiftStartIndex,d=this.selectedIndices,c=Math.min(e,X),b=Math.max(e,X),a;for(a=0;a<this.items.length;a++){if(c<=a&&a<=b){if(!d[a]){Z.push(a);}}else{if(d[a]){Y.push(a);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function G(Y){var X=F.findAncestorByAttr(Y,"idx",true,this.domNode);return(X&&X.node)||null;},getItemFromTarget:function P(Z){var Y=this.getItemNodeFromTarget(Z),X=Y&&parseInt(Y.getAttribute("idx"),10);if(X!==null&&!isNaN(X)&&this.items){return this.items[X];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=J;mstrmojo._IsList.HIDDEN_CLS=M;}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.hash","mstrmojo.string","mstrmojo.array","mstrmojo._FormatDefinition");var B=mstrmojo.num,G=mstrmojo.hash,F=mstrmojo.string,C=mstrmojo.array,E=mstrmojo._FormatDefinition.NumberFormatCategory;mstrmojo.MetricSelectorUtility=mstrmojo.provide("mstrmojo.MetricSelectorUtility",{_GENERIC:1,_RANK:2,_PERCENT:3,OP:{_EQUALS:0,_NOT_EQUALS:1,_GREATER:2,_GREATER_EQUAL:3,_LESS:4,_LESS_EQUAL:5,_BETWEEN:6,_NOT_BETWEEN:7,_IN:8,_NOT_IN:9,_IS_NULL:10,_IS_NOT_NULL:11},OP_NAMES:[{n:mstrmojo.desc(2795,"Equals"),v:0},{n:mstrmojo.desc(2796,"Does not equals"),v:1},{n:mstrmojo.desc(521,"Greater than"),v:2},{n:mstrmojo.desc(522,"Greater than or equal to"),v:3},{n:mstrmojo.desc(523,"Less than"),v:4},{n:mstrmojo.desc(524,"Less than or equal to"),v:5},{n:mstrmojo.desc(696,"Between"),v:6},{n:mstrmojo.desc(746,"Not between"),v:7},{n:mstrmojo.desc(587,"In"),v:8},{n:mstrmojo.desc(2204,"Not In"),v:9},{n:mstrmojo.desc(2202,"Is null"),v:10},{n:mstrmojo.desc(2203,"Is not null"),v:11}],RANK_OP_NAMES:[{n:mstrmojo.desc(529,"Highest"),v:1},{n:mstrmojo.desc(530,"Lowest"),v:2},{n:mstrmojo.desc(4407,"Highest %"),v:3},{n:mstrmojo.desc(4406,"Lowest %"),v:4}],Q:{_G:0,_RT:1,_RB:2,_PT:3,_PB:4},MRPFN:{TOP:1,BOTTOM:2,BETWEEN:3,EXCLUDETOP:4,EXCLUDEBOTTOM:5,NOTBETWEEN:6,EQUALS:7,DIFFERENTFROM:8,EQUALSDESCENDING:15,NOTEQUALSDESCENDING:16,GREATERTHANDESCENDING:4,GREATERTHANEQUALSDESCENDING:18,LESSTHANDESCENDING:20,LESSTHANEQUALSDESCENDING:1,BETWEENDESCENDING:13,NOTBETWEENDESCENDING:14,INDESCENDING:22,NOTINDESCENDING:24,EQUALSASCENDING:7,NOTEQUALSASCENDING:8,GREATERTHANASCENDING:5,GREATERTHANEQUALSASCENDING:17,LESSTHANASCENDING:19,LESSTHANEQUALSASCENDING:2,BETWEENASCENDING:3,NOTBETWEENASCENDING:6,INASCENDING:21,NOTINASCENDING:23},FN:{EQUALS:6,NOTEQUALS:7,GREATERTHAN:8,GREATERTHANEQUALS:10,LESSTHAN:9,LESSTHANEQUALS:11,BETWEEN:17,NOTBETWEEN:44,ISNULL:54,ISNOTNULL:55,IN:22,NOTIN:57,CONTAINS:76,NOTCONTAINS:79,BEGINSWITH:77,NOTBEGINSWITH:80,ENDSWITH:78,NOTENDSWITH:81,LIKE:18,NOTLIKE:43,AND:19,OR:20,NOT:21,RANK:23,RANKPERCENT:59,TUPLE:1000},F:[[6,7,8,10,9,11,17,44,22,57,54,55],[15,16,4,18,20,1,13,14,22,24],[7,8,5,17,19,2,3,6,21,23]],EnumNumberCategory:{Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10},typeHelperCls:{0:"MetricValueSliderHelper",defaultCls:"MetricRankSliderHelper"},ErrorType:{_GENERIC:mstrmojo.desc(11689,"Invalid Number"),_RANK:mstrmojo.desc(11856,"Please enter value between ## and ###.")},ErrorCode:{EmptyValue:"emptyValueVIWarning",InvalidValue:"invalidValueVIWarning",OutOfRange:"outOfRangeVIWarning",NotInteger:"notIntegerVIWarning"},getQuaByFunc:function(L,M){var I=this.F,H=this.Q,K=H._G,J=function(N){return C.indexOf(I[1],N)!==-1;};if(J(L)){K=(M===this._RANK)?H._RT:H._PT;}else{K=(M===this._RANK)?H._RB:H._PB;}return K;},getFuncInfo:function(K,L){var J={},I=this.Q,H=this.F;J[I._G]={ft:this._GENERIC,f:H[0][K]};J[I._RT]={ft:this._RANK,f:H[1][K]};J[I._RB]={ft:this._RANK,f:H[2][K]};J[I._PT]={ft:this._PERCENT,f:H[1][K]};J[I._PB]={ft:this._PERCENT,f:H[2][K]};return J[L]||{};},getOpIdxByfunc:function(J,K){if(!J||!K){return -1;}var H=this.F,I=-1;switch(K){case this._GENERIC:I=C.indexOf(H[0],J);break;case this._RANK:case this._PERCENT:I=C.indexOf(H[1],J);if(I===-1){I=C.indexOf(H[2],J);}break;}return I;},getIncludeByOp:function(I){var H=this.OP;return I===H._EQUALS||I===H._GREATER_EQUAL||I===H._LESS_EQUAL||I===H._BETWEEN||I===H._IN;},formatNumber:function(J,L,I){var M,K=this.Q,N=I.fm,H=I.cat;if(!B.validateFormat(N)){N="#,##0.00;(#,##0.00)";}if(J===K._G){M=(N)?B.formatByMask(N,L):B.format(I.cat,I.dp,I.curr,L);}else{if(J===K._RB||J===K._RT){M=String(parseInt(L,10));}else{if(J===K._PB||J===K._PT){M=parseFloat(L)+"%";}}}if((H===E.Fixed||H===E.Currency||H===E.Percentage)&&L<0&&!F.startsWith(M,"(")&&!F.startsWith(M,"-")){M="-"+M;}return M;},doValidation:function(W,M,R,O){var P=M.qua,S=M.low,L=M.high,N=this.Q,X=P===N._RT||P===N._RB,H=P===N._PT||P===N._PB,U="",K,J=this.ErrorCode,I;if(F.isEmpty(W)){U=J.EmptyValue;}else{if(!(B.isNumeric(W)||(H&&String(W).match(/^\d+(\.\d+)?%$/))||(O&&!H&&B.isBigDecimal(W)))){U=J.InvalidValue;}else{if((P===N._PT||P===N._PB)&&B.inNumericRange(parseFloat(W),S,L)){U=J.OutOfRange;K=H?["0","100%"]:[S,L];}else{if(X&&(!B.isInt(W)||B.parseInteger(W,10)<0)){U=J.NotInteger;}}}}if(!U&&M.typeHelper&&M.typeHelper.doExtraValidation){I=M.typeHelper.doExtraValidation(W,S,L);U=I.errorCode;K=I.errorArgs;}return G.copy(R,{invalid:!!U,errorCode:U,args:K||[]});},restoreMetricSelectorProps:function D(I,H){if(!I||!H){return ;}G.copyProps(["max","min","cnt","dt","nov"],H,I);},restoreMetricSelectorSelections:function A(I,H){if(!I||!H){return ;}G.copyProps(["f","ft","cs"],H,I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.num","mstrmojo.color");const O=mstrmojo.hash;const b="45C11FA478E745FEA08D781CEA190FE5";const C="\\N";const I="~!@@~~!@@~";function Z(AE,AG){const AC=[];for(var AD=0;AD<AE.length;AD++){const AF=AE[AD].get(AG);AC.push(AF);}return AC.join("|");}function l(AC,AH){const AF=[];for(var AE=0;AE<AH.length;AE++){const AG=AH[AE];const AD=AC.binaryDataInterface.getIdFormVector(AG);if(AD){AF.push(AD);}}return AF;}function w(AC,AG,AD){const AJ=new Set();const AH=l(AC,AD);for(var AF=0;AF<AG.length;AF++){const AI=AG[AF];const AE=Z(AH,AI);AJ.add(AE);}return AJ;}function G(AM,AD){const AE=[];const AO=AD.attributeIds;const AJ=AM.binaryDataInterface.getAttributeIds(AM);const AF=AO.filter(function(AP){return AJ.includes(AP);});const AH=mstrmojo.all[AD.srcId];const AK=AD.selectedIndices;const AC=w(AH,AK,AF);const AG=l(AM,AF);const AI=AM.binaryDataInterface.getRowCount();for(var AL=0;AL<AI;AL++){const AN=Z(AG,AL);if(AC.has(AN)){AE.push(AL);}}return AE;}function o(){return{isLowestPercent:true,thresholdsInfo:[{flr:0,ceil:20,color:"#d70e12"},{flr:20,ceil:40,color:"#fa660f"},{flr:40,ceil:60,color:"#fecb34"},{flr:60,ceil:80,color:"#4bc995"},{flr:80,ceil:100,color:"#1aae6b"}]};}function P(AD){const AC=AD[0];const AF=AC.ttp===1;const AE=AD.map(function(AG){return{flr:AG.flr,ceil:AG.ceil,color:AG.fmt.bc};});return{isLowestPercent:AF,thresholdsInfo:AE};}function U(AD,AF){if(!AF){return null;}const AE=AD.getData().gsi.thresholds;const AC=AE&&AE[AF];if(!AC){return o();}return P(AC);}function n(AC,AE){const AD=AC.binaryDataInterface.getColorPalette();const AF=AD.length;return function(AI){const AG=AC.binaryDataInterface.getElementIndex(AE,AI);const AH=AG%AF;return AD[AH];};}function z(AJ,AD,AI,AH){if(AI===AD){return AH.thresholdsInfo[0].color;}var AF=((AJ-AD)/(AI-AD))*100;if(!AH.isLowestPercent){AF=100-AF;}for(var AE=0;AE<AH.thresholdsInfo.length;AE++){const AG=AH.thresholdsInfo[AE].flr;const AK=AH.thresholdsInfo[AE].ceil;const AC=AH.thresholdsInfo[AE].color;if(AF>=AG&&AF<AK){return AC;}}return AH.thresholdsInfo[AH.thresholdsInfo.length-1].color;}function k(AD,AF){const AC=U(AD,AF);const AE=AD.binaryDataInterface.getMinMaxValue(AF);return function(AH){const AG=AD.binaryDataInterface.getMetricValue(AF,AH);return z(AG,AE.min,AE.max,AC);};}function x(AJ,AG,AD,AK,AF){AF.push('<es cc="0" pcc="2" ste="1" bs="0">');for(var AE=0;AE<AD.length;AE++){const AH=AD[AE];const AC=AJ.binaryDataInterface.getInternalElementId(AH.did,AG);const AI=mstrmojo.string.encodeXMLAttribute(AC);AF.push('<e emt="1" ei="',AI,'" art="1">','<at rfd="',AK[AH.did],'" />',"</e>");}AF.push("</es>");}function g(AF,AD,AE){AE.push("<in>");for(var AG=0;AG<AF.length;AG++){const AC=AF[AG];AE.push('<oi id="',AD[AC.did],'" did="',AC.did,'" tp="',AC.t,'" stp="',AC.st,'" />');}AE.push("</in>");}function B(AE,AH,AG,AJ,AF){const AD={};for(var AI=0;AI<AG.length;AI++){const AC=AG[AI];AD[AC.did]=AJ.getOid();}AF.push('<mi mnri="3" mxri="23">');g(AG,AD,AF);x(AE,AH,AG,AD,AF);AF.push("</mi>");}function AA(AC,AF,AE,AG,AD){AD.push('<nd et="1" nt="2" dmt="1" ddt="-1" is_indp_csi="1" cc="0">');B(AC,AF,AE,AG,AD);AD.push("</nd>");}function q(AC,AI,AE,AH,AD){for(var AG=0;AG<AI.length;AG++){const AF=AI[AG];AA(AC,AF,AE,AH,AD);}}function m(AF,AE,AD){AD.push('<nd et="1" nt="4" dmt="1" ddt="-1" is_indp_csi="1" cc="2">');for(var AH=0;AH<AF.length;AH++){const AC=AF[AH];const AG=mstrmojo.string.encodeXMLAttribute(AC.n||"");AD.push('<nd et="1" nt="5" dmt="1" ddt="-1" is_indp_csi="1" cc="0">','<at rfd="',AE[AC.did],'">',AG,"</at>","</nd>");}AD.push('<op fnt="1000" fg="0" apply_order="0" node="0" />',"</nd>");}function L(AD,AH,AF,AG,AC,AE){AE.push('<exp nc="5">','<nd jee="1" et="7" nt="4" dmt="1" ddt="-1" is_indp_csi="1" cc="2">');m(AF,AC,AE);q(AD,AH,AF,AG,AE);AE.push('<op fnt="22" fg="0" apply_order="0" node="0"/>',"</nd>",'<tifs tift="0" ltifv="0" ltifu="0" ctifv="0" />',"</exp>");}function j(AF,AE,AD){AD.push("<in>");for(var AG=0;AG<AF.length;AG++){const AC=AF[AG];AD.push('<oi id="',AE[AC.did],'" did="',AC.did,'" tp="',AC.t,'" stp="',AC.st,'" />');}AD.push("</in>");}function S(AE,AJ,AG,AI,AF){AF.push("<mi>");const AD={};for(var AH=0;AH<AG.length;AH++){const AC=AG[AH];AD[AC.did]=AI.getOid();}j(AG,AD,AF);L(AE,AJ,AG,AI,AD,AF);AF.push("</mi>");}function f(AC,AI){const AE=AC.getData().gsi.rows;const AG={id:0,getOid:function AH(){return this.id++;}};const AD=[];AC.addLog("Build filter expression for "+AI.length+" tuples Started");S(AC,AI,AE,AG,AD);const AF=AD.join("");AC.addLog("Build filter expression for "+AI.length+" tuples Finished");return AF;}mstrmojo.models.template.BinaryDataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.BinaryDataInterface",binaryData:null,viz:null,init:function s(AC){this.binaryData=AC.binaryData;this.viz=AC.viz;},getRowCount:function E(){return this.binaryData.numRows;},getAttributes:function Q(){const AD=this.viz.getData();const AC=O.walk("gts.row",AD)||[];return AC.map(function(AE){return{id:AE.id,name:AE.n,type:AE.otp,};});},getAttributeIds:function h(){const AC=this.getAttributes();return AC.map(function(AD){return AD.id;});},getMetrics:function J(){const AD=this.viz.getData();const AC=O.walk("gts.col.0.es",AD)||[];return AC.map(function(AE){return{id:AE.oid,name:AE.n,type:4,};});},getUnits:function p(){const AC=this.getAttributes();const AD=this.getMetrics();return AC.concat(AD);},isMetricUnit:function y(AC){return AC&&AC.type===4;},getUnitName:function t(AI){const AC=this.viz;const AG=AC.getData();const AH=O.walk("gts.col.0.es",AG)||[];const AE=AH.find(function(AJ){return AJ.oid===AI;});if(AE){return AE.n;}const AD=O.walk("gts.row",AG)||[];const AF=AD.find(function(AJ){return AJ.id===AI;});if(AF){return AF.n;}return"";},getIdFormVector:function e(AC){const AD=AC+" ("+b+")";return this.binaryData.getChild(AD);},getElementId:function N(AE,AF){const AC=this.getIdFormVector(AE);var AD=AC.get(AF);if(AD===null){AD=C;}return"h"+AD+";"+AE;},getInternalElementId:function D(AE,AF){const AC=this.getIdFormVector(AE);var AD=AC.get(AF);if(AD===null){AD=I;}return AE+":"+AD;},getElementIndex:function H(AD,AE){const AC=this.getIdFormVector(AD);return AC.data[0].values[AE];},getElementName:function AB(AH,AJ){const AG=this.viz.getData().gts.row.find(function(AK){return AK.id===AH;});if(!AG||!AG.id||!AG.fs){return"";}var AC="";for(var AD=0;AD<AG.fs.length;AD++){const AF=AG.fs[AD];const AI=AG.id+" ("+AF.id+")";const AE=this.viz.binaryData.getChild(AI).get(AJ);if(!AC){AC=AE;}else{AC=AC+" "+AE;}}return AC;},getElementIdsNames:function F(AN,AT){const AL=[];const AW=new Set();const AE=this.getIdFormVector(AN);if(!AE){return ;}for(var AP=0;AP<AT.length;AP++){const AH=AT[AP];const AM=AE.get(AH);if(!AW.has(AM)){AW.add(AM);AL.push(AH);}}const AJ=this.viz.getData().gts.row.find(function(AX){return AX.id===AN;});if(!AJ||!AJ.id||!AJ.fs){return ;}const AD=AJ.fs;const AR=AD.map(function(AX){const AY=AJ.id+" ("+AX.id+")";return this.viz.binaryData.getChild(AY);}.bind(this));const AO=[];const AU=[];for(var AS=0;AS<AL.length;AS++){const AC=AL[AS];var AV=AE.get(AC);if(AV===null){AV=C;}const AI="h"+AV+";"+AN;AO.push(AI);var AF="";for(var AQ=0;AQ<AR.length;AQ++){const AK=AR[AQ];const AG=AK.get(AC);if(!AF){AF=AG;}else{AF=AF+" "+AG;}}AU.push(AF);}return{eids:AO,enames:AU};},getMetricDataInterface:function R(AE){const AC=this.binaryData.getChild(AE);return{numRows:this.getRowCount(),getValue:function AD(AF){return Number(AC.get(AF));}};},getMetricValue:function M(AD,AG){const AC=this.binaryData.getChild(AD);const AE=AC.get(AG);const AF=Number(AE);if(isNaN(AF)){return AE;}return AF;},getFormattedMetricValue:function i(AE,AG){const AF=this.getMetricValue(AE,AG);const AD=this.viz.getData().gsi.mx.findIndex(function(AH){return AH.did===AE;});const AC=mstrmojo.VisUtility.getNumberFormat(this.viz.getData(),AD);return mstrmojo.num.formatByMask(AC,AF);},getMinMaxValue:function a(AD){const AC=this.viz.getData().gsi.mx.find(function(AE){return AE.did===AD;});return{min:AC?AC.min:0,max:AC?AC.max:0};},generateCandidate:function K(AE,AI){const AG={};for(var AF=0;AF<AE.length;AF++){const AC=AE[AF];const AH=AC.id;const AD=this.viz.binaryDataInterface.getElementId(AH,AI);AG[AH]=[{id:AD,n:""}];}return AG;},buildJointElementExpression:function u(AD){const AC=f(this.viz,AD);return AC;},getNewHighlightTargetKeys:function c(){const AC=this.viz;const AD=AC.getHighlightKeys();return AD.filter(function(AE){var AF;try{AF=AC.getDocModel().getNodeDataByKey(AE);}catch(AG){return false;}return O.walk("data.vis.rbr",AF)===true;});},getOldHighlightTargetKeys:function d(){const AC=this.viz;const AD=AC.getHighlightKeys();return AD.filter(function(AE){var AF;try{AF=AC.getDocModel().getNodeDataByKey(AE);}catch(AG){return false;}return !O.walk("data.vis.rbr",AF);});},generateSelectionExpression:function Y(AH){const AG=this;const AD=this.getAttributes();const AF={};AD.forEach(function(AI){const AJ=AG.viz.binaryDataInterface.getIdFormVector(AI.id);if(AJ){AF[AI.id]=AJ;}});const AE={};const AC=Object.keys(AH);AC.forEach(function(AK){const AI=AF[AK];if(!AI){return ;}const AJ=AH[AK];if(!AJ||!Array.isArray(AJ)){return ;}AE[AK]=new Set();AJ.forEach(function(AM){const AL=AI.get(AM);AE[AK].add(AL);});});return AE;},findMatchingRows:function W(AE){const AO=this.viz;AO.addLog("Find Matching Started");if(AE.attributeIds){const AP=G(AO,AE);AO.addLog("Find Matching Finished");return AP;}const AQ=Object.keys(AE);const AM=AO.binaryDataInterface.getRowCount();const AD=[];const AG={};for(var AI=0;AI<AQ.length;AI++){const AL=AQ[AI];const AF=AO.binaryDataInterface.getIdFormVector(AL);if(AF){AD.push(AL);AG[AL]=AF;}}if(AD.length===0){AO.addLog("Find Matching Finished");return[];}const AK=new Set();for(var AN=0;AN<AM;AN++){var AC=false;for(var AI=0;AI<AD.length;AI++){const AH=AD[AI];if(AE[AH].has(AG[AH].get(AN))){AC=true;break;}}if(AC){AK.add(AN);}}const AJ=Array.from(AK);AO.addLog("Find Matching Finished");return AJ;},getColorFunction:function X(AH){const AD=this.viz;const AF=AH&&AH.colorByType;const AG=AH&&AH.colorByUnitId;if(AF===mstrmojo.CustomVisBase.ENUM_BINARY_COLORBY_TYPE.ATTRIBUTE){return n(AD,AG);}if(AF===mstrmojo.CustomVisBase.ENUM_BINARY_COLORBY_TYPE.METRIC){return k(AD,AG);}const AE=this.getColorPalette();const AC=AE[0];return function(){return AC;};},getColorPalette:function A(){const AC=this.viz;const AD=AC.getDocModel().plt.colors;return AD.map(function(AE){return mstrmojo.color.decodeColor(AE);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,U){if(U){var N=P.itemWidgets,L,O,I,R;for(O=0,I=U.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=U.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M&&M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(!K){return ;}if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(J,H,G){var E=mstrmojo.all[J],I=D[H]=new mstrmojo.SimpleXHR(),F;$MAPF(true,B,"transportRequest");if(G.params&&!G.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){G.params.sessionState=mstrApp.sessionState;}I.request(G.config.method||"POST",G.taskURL||mstrConfig.taskURL,{success:function(K){F=0;if(typeof K==="string"&&K[0]==="{"){F=K.length*2;try{K=JSON.parse(K);}catch(L){}}if(K&&typeof K==="object"&&!K.hasOwnProperty("_responseLength")){K._responseLength=F;}if(K.mstrerr){K.code=K.mstrerr.code;K.message=K.mstrerr.message;}E&&E.response(H,true,K);},failure:function(M){var N=M.status,L=M.getResponseHeader("X-MSTR-TaskErrorCode"),K;if(N===0){N=L||N;K=mstrmojo.desc(15666,"The connection to the Web Server failed. Please wait a few minutes and then attempt to reload the page. If the condition persists, please contact your administrator.");}else{N=L||N||"-999";K=M.getResponseHeader("X-MSTR-TaskFailureMsg")||M.responseText||"Unexpected error, please contact your administrator";}E&&E.response(H,false,{code:N,message:K});},complete:function(){delete D[H];},textResponse:G.callback.textResponse},G.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.BoxLayoutConfig");mstrmojo.vi.ui._SupportLayerNode=mstrmojo.provide("mstrmojo.vi.ui._SupportLayerNode",{_mixinName:"mstrmojo.vi.ui._SupportLayerNode",selectFromLayer:mstrmojo.emptyFn,renameFromLayer:mstrmojo.emptyFn,deleteFromLayer:mstrmojo.emptyFn,formatFromLayer:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");mstrmojo.touchManager=new mstrmojo.Obj(mstrmojo.hash.copy(mstrmojo.inClosureProps,{notify:function(w,x){return this.raiseEvent({name:"touchesBegin",srcId:w,touch:x});}}));var Y=mstrmojo.dom,s=Y.attachEvent,t=Y.detachEvent,B=Math,Z=window.mstrConfig,Q=false,J=null,k=Z&&Z.allowDefaultTouches;var j=5,D=250,F=400,b=100;var i="Begin",N="End",f="Move",U="Cancel";var o=1,p=2,C=3,P=4;var K={};K[o]="Select";K[p]="Swipe";K[C]="Multi";K[P]="Tap";if(document&&document.body){s(document.body,"touchmove",function(w){if(!Z||!Z.allowDefaultTouches){if(w.preventDefault){w.preventDefault();return false;}}return true;});}function a(w){var x=w.identifier;return(x===undefined)?1:x;}function l(z,AA,y,x){if(Q){var w=x?a(x)+" ":"";window.console.log(z+":"+(y?" "+y.scriptClass+" "+y.id:"")+" "+w+(AA||""));}}function m(w){return(J===w);}function W(w){if(!m(w)){return ;}l("detachWinEvts","",w);t(window,Y.TOUCHMOVE,w._tmCallback,true);t(window,Y.TOUCHEND,w._teCallback,true);t(window,Y.TOUCHCANCEL,w._teCallback,true);J=null;}function X(w){if(m(w)){return ;}var x=J;if(x){l("forced deactivation","",x);W(x);}l("attachWinEvts","",w);s(window,Y.TOUCHMOVE,w._tmCallback,true);s(window,Y.TOUCHEND,w._teCallback,true);s(window,Y.TOUCHCANCEL,w._teCallback,true);J=w;}function M(x,w){return"touch"+((w&&K[w])||"")+(x||"");}function c(y,z,x){var w=M(z,x);return(y[w]!==undefined)?w:"";}function q(z,AB,AC,y,x){x=x||z.gestures[AC.id];var AA=(x&&x.bubbleTarget)||z,w=c(AA,AB,y);if(w){l("fire",w,AA);AC.methodName=w;return AA[w](AC);}l("no handler",M(AB,y),AA);return true;}function g(AE,AF,w,AA){var AB=w.pageX,z=w.pageY,AC=AE.timeStamp,x=a(w),AJ={x:B.round(AB-AF.pageX),y:B.round(z-AF.pageY)};var AI={id:x,evt:AE,pageX:AB,pageY:z,clientX:w.clientX,clientY:w.clientY,target:w.target,delta:AJ,date:AC,stop:function(){l("event stopped",x);AE.stopPropagation();AE.cancelBubble=true;}};if(AA){var y=AC-AA.date,AH=AA.delta,AD={x:B.abs(AJ.x-AH.x),y:B.abs(AJ.y-AH.y)};AI.velocity={x:AD.x/y,y:AD.y/y};AI.isVertical=(AD.y>AD.x);AI.accelDelta=AD;var AG=AI.direction={};if(AB!==AA.pageX){AG.x=(AB<AA.pageX);}else{if(AB!==AF.pageX){AG.x=(AB<AF.pageX);}}if(z!==AA.pageY){AG.y=(z<AA.pageY);}else{if(AB!==AF.pageX){AG.y=(z<AF.pageY);}}}return AI;}function I(z,w,y,x){return{s:z,p1:w,p2:y,evt:x,target:x.target};}function L(x,w){if(x){x.gestures[w]=null;}}function d(x,w){W(x);q(x,N,w);}function G(w){if(w._selectHandle){window.clearTimeout(w._selectHandle);delete w._selectHandle;l("cancelSelect","",w);}}function n(w){if(w.stopPropagation){w.stopPropagation();}if(w.preventDefault){w.preventDefault();}R(w);w.cancelBubble=true;return false;}function R(x){var w=document.activeElement;if(x&&w&&w!==document.body&&x.target!==w){if(w.blur){w.blur();}}}function H(AC,AE){var AA=AE.which;if(AA&&AA===3){l("ignore","right mouse click",AC);return ;}var AD=AC.gestures,AB=AE.touches||[AE],w=(AE.changedTouches&&AE.changedTouches[0])||AE,AH=m(AC),AI=g(AE,w,w),AG=I(AI,AI,AI,AE);l("touchBegin","",AC,w);if(Y.isTouchOptimizationEnabled()&&AC.ontouchstart){AC.ontouchstart(AE);}if(AB.length>1){if(!AH){AI.stop();l("ignore","cross widget multitouch",AC,w);var z=J;if(z&&z.onCrossWidgetMultitouch!==undefined){l("call onCrossWidgetMultitouch for","",z);z.onCrossWidgetMultitouch();}return false;}}else{if(AH){l("forced deactivation","",AC,w);W(AC);AH=false;}}if(AC.singleNode&&w.target!==AC._tn){l("ignore","target is not touch node",AC,w);return ;}if(mstrmojo.touchManager.notify(AC.id,AI).ignore){AI.stop();return ;}if(!AH){var y=AI.target.tagName;y=y&&y.toLowerCase();if(y==="select"||y==="input"){l("ignore","target is input or select",AC,w);if(AC.monitorInputs){q(AC,null,AI,P);}return ;}}AD[AI.id]=AG;if(AH){if(!AC.multiTouch){G(AC);var x=AB[AB.length-2],AF=AD[a(x)];q(AC,U,x,AF.action,AF);}else{AG.action=C;if(AC._singleTouch){G(AC);AC._singleTouch.action=C;delete AC._singleTouch.bubbleTarget;delete AC._singleTouch;q(AC,i,AI,C);}}AI.stop();return ;}if(!Y.contains(AC._tn,AE.target,true,AC.domNode)){delete AD[AI.id];return ;}AC._singleTouch=AG;if(q(AC,i,AI)===false){return ;}if(!mstrmojo.dom.isTouchOptimizationEnabled()){AI.stop();}if(c(AC,i,o)){AC._selectHandle=window.setTimeout(function(){AG.action=o;if(q(AC,i,AI,o)===false){d(AC,AI);}delete AC._selectHandle;},F);}X(AC);if(!AC.enableBubble&&!AC.isPredefinedNLG){n(AE);}}function u(AA,AB){var AD=(AB.changedTouches&&AB.changedTouches[0])||AB,x=AA.gestures[a(AD)];if(!x){return ;}var y=g(AB,x.s,AD,x.p2),z=x.action;x.p2=x.p1;x.p1=y;if(!z&&(B.abs(y.delta.x)>j||B.abs(y.delta.y)>j)){z=x.action=p;G(AA);if(!c(AA,i,z)&&!c(AA,f,z)){y.methodName=M(i,z);return AA.bubbleTouchEvent(y);}if(q(AA,i,y,z)===false){d(AA,y);return ;}}if(z){var w=x.lastMove||x.s.date,AC=y.date-w;if(mstrApp.isTouchApp&&!mstrApp.isTouchApp()||AC>=b){x.lastMove=y.date;q(AA,f,y,z);}}if(!AA.enableBubble){n(AB);}}function E(AA,AC){var w=(AC.changedTouches&&AC.changedTouches[0])||AC,AD=(AC.touches&&AC.touches.length)||0,AB=AA.gestures,AG=a(w),AF=AB[AG];if(!AF){l("No gesture",AG,AA,w);return ;}var z=AF.action,AH=g(AC,AF.s,w,AF.p2);if(!z){G(AA);if(!AF.wasMulti){z=P;}}if(AD===0){W(AA);AA.gestures=[];l("gestures","clear all",AA,w);}else{AB[AG]=null;l("gestures","clear single",AA,w);}L(AF.bubbleTarget,AG);switch(z){case p:case o:if(!mstrmojo.dom.isTouchOptimizationEnabled()){AH.stop();}q(AA,N,AH,z,AF);break;case C:if(AD<2){q(AA,N,AH,z,AF);if(AD===1){var y=AC.touches[0],AE=g(AC,y,y),x=I(AE,AE,AE,AC);x.wasMulti=true;AB[a(y)]=x;AA._singleTouch=x;}}if(AD>0){return ;}break;case P:if(!c(AA,null,z)){break;}var AI=AA._tapHandler;if(AI){window.clearTimeout(AI.h);}if(AH.date-AF.s.date<F){if(q(AA,"Before",AH,z,AF)===false){break;}if(!AA.multiTap){AH.count=1;q(AA,null,AH,z,AF);}else{if(AI){AI.count++;}else{AI=AA._tapHandler={count:1};}AI.h=window.setTimeout(function(){var AJ=Y.isTouchOptimizationEnabled();if(AJ){AA.tapElement=AH.target;}AH.count=AI.count;q(AA,null,AH,z,AF);delete AA._tapHandler;if(AJ){delete AA.tapElement;}},D);}}else{delete AA._tapHandler;}break;}q(AA,N,AH,undefined,AF);if(!AA.enableBubble){n(AC);}}function e(x){var w=x._tn;if(!w){return ;}if(!x._tmCallback){x._tsCallback=function(y){H(x,y);};x._tmCallback=function(y){u(x,y);};x._teCallback=function(y){E(x,y);};}s(w,Y.TOUCHSTART,x._tsCallback);}mstrmojo._TouchGestures=mstrmojo.provide("mstrmojo._TouchGestures",{_mixinName:"mstrmojo._TouchGestures",singleNode:false,multiTouch:false,touchNode:null,multiTap:true,enableBubble:true,monitorInputs:false,postBuildRendering:function O(){if(this._super){this._super();}this._tn=this.touchNode||this.domNode;this.gestures=[];e(this);},bubbleTouchEvent:function h(AC){var z=AC.methodName,w=AC.id,x=this.gestures[w],y=this.parent;while(y){var AB=y[z],AA=y.touchBegin;if(AB&&(!AA||q(y,i,AC)!==false)){AC.methodName=z;L(x.bubbleTarget,w);x.bubbleTarget=y;y.gestures[w]=x;l("bubble",((this.k)?" "+this.k:"")+"] bubbled "+z+" to ["+y.scriptClass+((y.k)?" "+y.k:"")+"]",this,AC);return AB.call(y,AC);}y=y.parent;}return false;},unrender:function A(x){if(m(this)){W(this);}var w=this._tn;if(w){Y.detachEvent(w,Y.TOUCHSTART,this._tsCallback);}this._super(x);},restoreDefaultTouches:function S(w){if(Z){Z.allowDefaultTouches=w&&k;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",maxLengthField:"maxLength",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(E,F,D){if(mstrApp&&mstrApp.serverRequest&&!D){mstrApp.serverRequest(E,F,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,F,E,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(D.projectId&&mstrApp&&D.projectId!==mstrApp.projectId){G.projectId=D.projectId;G.requiresAppendProjectId=true;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(F){var D={taskId:"getRecentSaveAsFolders"};var E=window.mstrApp&&mstrApp.isDossier&&mstrApp.isInAIBot;this.serverRequest(D,F,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,handleVerticalOverflow:mstrmojo.emptyFn,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.vi.enums.EnumPromptType");var B=mstrmojo.string,A=mstrmojo.vi.enums.EnumPromptType;mstrmojo.ResSetLink=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ResSetLink",SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9,USE_FILTER_PANEL_SELECTIONS:10,toXml:function C(){var O=this,F=function(W,X){return" "+W+'="'+X+'"';},E=function(W,X){return F(W,mstrmojo.string.encodeXMLAttribute(X));},J=new mstrmojo.StringBuffer(),H=function(X,Y){var W=mstrmojo.string.multiReplace(Y.disp_n,{"&nbsp;":" "});X.append("<e"+E("ei",B.decodeXMLAttribute(Y.ei))+E("disp_n",B.decodeXMLAttribute(W))+F("emt",Y.emt)+"/>");};var M=this.prms,D=M&&M.length;if(D||O.aopam!=O.DO_NOT_ANSWER){J.append("<hl"+F("mid",O.mid)+F("srct",O.srct)+F("aopam",O.aopam)+">");if(D){J.append("<prms>");for(var I=0;I<D;I++){var U=M[I];J.append("<prm"+F("id",U.id)+F("am",U.am)+F("pt",U.pt));if(U.orid){J.append(F("orid",U.orid)+F("ortp",U.ortp));}J.append(">");switch(U.am){case O.DO_NOT_ANSWER:case O.CLOSE:case O.USE_DEFAULT_ANSWER:case O.SAME_PROMPT:break;case O.STATIC:J.append('<pa ia="1"><es>');var S=U.pa.es,R=S&&S.length||0;for(var N=R-1;N>=0;--N){var L=S[N];H(J,L);}J.append("</es></pa>");break;case O.DYNAMIC:case O.CURRENT_UNIT:case O.DYNAMIC_OR_SAME_PROMPT:var Q=U.pa;if(Q){J.append('<pa ia="1">');var P=Q.a;if(P){J.append("<a"+F("id",P.id)+E("n",P.n)+">");}if(U.pt===A.CONSTANT){J.append(mstrmojo.string.encodeXMLAttribute(Q.v));}else{J.append("<es"+F("dispForms",P&&P.dispForms>=0?P.dispForms:"")+">");var S=Q.es;R=S&&S.length||0;for(var N=R-1;N>=0;--N){var L=S[N];H(J,L);}J.append("</es>");if(P){J.append("</a>");}}J.append("</pa>");}break;case O.USE_FILTER_PANEL_SELECTIONS:var Q=U.pa;if(Q&&U.pt===A.EXPRESSION){J.append('<pa ia="1">');J.append(JSON.stringify(Q.exp));J.append("</pa>");}break;case O.ALL_VALID_UNITS:var Q=U.pa;if(Q){J.append('<pa ia="1">');var P=Q.a,K=(P&&P.length)||0,G;if(K===0&&U.pt===A.CONSTANT){J.append(mstrmojo.string.encodeXMLAttribute(Q.v));}else{J.append("<attGroups><attGroup>");for(G=0;G<K;G++){J.append("<a"+F("id",P[G].id)+E("n",P[G].n)+">");if(U.pt===A.CONSTANT){J.append(mstrmojo.string.encodeXMLAttribute(Q.v));}else{J.append("<es"+F("dispForms",P[G].dispForms>=0?P[G].dispForms:"")+">");H(J,Q.es[G]);J.append("</es>");}J.append("</a>");}J.append("</attGroup></attGroups>");}J.append("</pa>");}break;default:break;}J.append("</prm>");}J.append("</prms>");}else{J.append("<prms/>");}J.append("</hl>");}return J.toString();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");function D(K,J){this.raiseEvent({name:"viCompBuilt",type:K,widget:J});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function H(J){this._super(J);this.relativePanels={};this.comps={};},addRelativePanel:function G(J){this.relativePanels[J]=true;},isRelativePanel:function F(J){return !!this.relativePanels[J];},isComponent:function E(K,J){return this.getComponentKey(K)===J;},getComponent:function C(J){return this.comps[J];},setComponent:function I(K,J){this.comps[K]=J;},getComponentKey:function B(K){var J=this.getComponent(K);return(J&&J.k)||"";},createComponent:function A(M,L,K){D.call(this,M);var J=new L(K);this.setComponent(M,J);D.call(this,M,J);return J;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.mobile.MobileTouchEvents","mstrmojo.array");var H=mstrmojo.dom,B=mstrmojo.css,a=mstrmojo.array,P=mstrmojo.mobile.MobileTouchEvents,G="mstrmojo-ListBase mstrmojo-ui-Menu",L="mstrmojo-ui-Menu-item",l="mstrmojo-ui-Menu-item-container",N="vis-tooltip",j="new-vis-tooltip",U="vis-tooltip-menu-row-container",A="vis-tooltip-menu",Q="mstrMobileDossierContextMenu",Z="dossier-contextmenu-container",O="mobile-dossier-contextmenu-menu",Y="count",C="separator",f="clear-transaction-edit",E="confirm-transaction-edit";function K(){return mstrApp&&typeof (mstrApp.isAndroidAppOffline)==="function"&&mstrApp.isAndroidAppOffline();}mstrmojo.mobile.SupportMobileTouchInterface=mstrmojo.provide("mstrmojo.mobile.SupportMobileTouchInterface",{ENUM_MOBILE_OFFLINE_CLASS:{ENABLED_MENU_CLASS:"enabledOffline",OFFLINE_CLASS:"offline"},ENUM_CONTEXT_MENU_ACTION:{KEEP_ONLY:1,EXCLUDE:2,DRILL:3,SHOW_DATA:4,TRANS_UPDATE_DATA:5,TRANS_DELETE_ROW:6,SERVER_SORT:7,SHOW_TOTALS:8,REPLACE_WITH:9,COPY:10,LINKING:11},ENUM_OFFLINE_ERROR_DIALOG_TYPE:{OFFLINE_ERROR_DIALOG_NORMAL:"OFFLINE_ERROR_DIALOG_NORMAL",OFFLINE_ERROR_DIALOG_SUBMIT:"OFFLINE_ERROR_DIALOG_SUBMIT",},isTransactionMode:function F(){return mstrApp&&mstrApp.isAppStateTransactionMode();},registerNetworkChangedListener:function X(o){var n=o;var m=this;if(!mstrApp||!mstrApp.attachEventListener){return ;}o.networkChangedListener=mstrApp.attachEventListener(P.NETWORK_CHANGED_EVENT,o.id,function(p){var q=n.parent;if(q&&q.updateToolbarForNetworkChanged){q.updateToolbarForNetworkChanged();}m.updateContextMenuItemNetworkState();m.updateVisTooltipMenuItemNetworkState();m.updateMobileContextMenuNetworkState();if(o&&(typeof o.onNetworkConnectivityChanged)==="function"){o.onNetworkConnectivityChanged(mstrmojo.mobile.SupportMobileTouchInterface.isAndroidAppOffline());}});},unregisterNetworkChangedListener:function R(m){if(m.networkChangedListener){if(mstrApp&&mstrApp.detachEventListener){mstrApp.detachEventListener(m.networkChangedListener);}delete m.networkChangedListener;}},isContextActionEnabledOffline:function c(n){if(!n){return false;}var m=this.ENUM_CONTEXT_MENU_ACTION;switch(n){case m.COPY:case m.LINKING:return true;default:return false;}},addEnabledOfflineClassForMenuItem:function i(p,o){if(!H.isTouchOptimizationEnabled()){return p;}var n=this.isContextActionEnabledOffline(o);if(n){var m=p||"";if((typeof m)==="string"&&m.length>0){m+=" ";}return m+this.ENUM_MOBILE_OFFLINE_CLASS.ENABLED_MENU_CLASS;}return p;},updateContextMenuItemNetworkState:function k(m){this.updateMenuItemNetworkState(m,G,l,L);},updateVisTooltipMenuItemNetworkState:function M(m){var n=this.updateMenuItemNetworkState(m,N,U,A);if(!n){this.updateMenuItemNetworkState(m,j,U,A);}},updateMobileContextMenuNetworkState:function h(m){this.updateMenuItemNetworkState(m,Q,Z,O);},getFirstVisibleElement:function d(o){if(!o||!o.length||o.length===0){return ;}for(var n=0;n<o.length;n++){var m=o[n],p=m&&m.getBoundingClientRect&&m.getBoundingClientRect();if(p&&p.width>0&&p.height>0){return m;}}},updateMenuItemNetworkState:function D(o,AC,AB,AA){if(!H.isTouchOptimizationEnabled()){return ;}var w;if(o&&B.hasClass(o,AC)){w=o;}else{var u=o||document;w=u&&u.getElementsByClassName(AC);if(u===document){w=this.getFirstVisibleElement(w);if(!w){return ;}}else{if(w&&w.length>0){w=w[0];}else{return ;}}}var n=w.getElementsByClassName(AB);if(!n||n.length===0){return ;}for(var z=0;z<n.length;z++){var t=n[z],s=t.getElementsByClassName(AA);if(!s||s.length===0){return ;}var q=mstrmojo.mobile.SupportMobileTouchInterface.isAndroidAppOffline();for(var y=0;y<s.length;y++){var m=s[y];var x=B.hasClass(m,Y)||B.hasClass(m,C);if(x){continue;}var p=B.hasClass(m,this.ENUM_MOBILE_OFFLINE_CLASS.ENABLED_MENU_CLASS);if(p){continue;}B.toggleClass(m,this.ENUM_MOBILE_OFFLINE_CLASS.OFFLINE_CLASS,q);}}return true;},raiseTransactionCellClickedOffline:function I(){return mstrmojo.mobile.SupportMobileTouchInterface.showOfflineDialogInAndroid();},isTouchOnViewWithClassNames:function e(q,p){if(q&&p&&p.length>0){var o=q.target&&q.target.className;var n=o&&(typeof o.includes)==="function";var m=false;if(n){a.forEach(p,function(s){m=o.includes(s);return !m;});}return m;}},isTouchOnTrancationButton:function g(m){return this.isTouchOnViewWithClassNames(m,[f,E]);},isTouchOnAgGridOutlineIcon:function b(n){var m=mstrmojo.ag.AgXtabBase.OUTLINE_MODE_ICONS;return this.isTouchOnViewWithClassNames(n,[m.EXPANDED_ICON_CLASS,m.COLLAPSED_ICON_CLASS]);}});mstrmojo.mobile.SupportMobileTouchInterface.isAndroidAppOffline=function J(){return K.call(this);};mstrmojo.mobile.SupportMobileTouchInterface.raiseEventToAndroid=function W(m,n){if(H.isTouchOptimizationEnabled()&&typeof m==="string"&&window.mstrApp&&mstrApp.raiseEvent){mstrApp.raiseEvent({name:P.FORWARD_EVENT_TO_ANDROID_EVENT,value:{eventValue:m,payload:n}});}};mstrmojo.mobile.SupportMobileTouchInterface.showOfflineDialogInAndroid=function S(n){var m=mstrmojo.mobile.SupportMobileTouchInterface.isAndroidAppOffline();if(m&&mstrApp&&mstrApp.raiseEvent){mstrmojo.mobile.SupportMobileTouchInterface.raiseEventToAndroid(P.SHOW_OFFLINE_DIALOG_EVENT,{offlineErrorDialogType:n});return true;}return false;};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(W,L,S,Z,I,P,a,Y){var Q=this.wrapperNodes(W),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,U=I+P,M=Q[0].offsetLeft,O;for(var X=1;X<=K;X++){O=Q[R].offsetLeft-M+a;if(O<=I){J=R;}else{if(O>=U){H=R;}}var N=Math.round(L/Math.pow(2,X+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}if(J===H){break;}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.vi.util.A11yUtility");var J=mstrmojo.array,O=mstrmojo.hash,Z=mstrmojo.css,G=mstrmojo.dom,L=mstrmojo.vi.util.A11yUtility;function M(){if(this.canTab&&!this.hasTabFocus){this.tabIndex=this.initialTabIndex;this.hasTabFocus=true;}}function N(){if(this.isRefocusingViaTab){return ;}if(this.canTab&&this.hasTabFocus){this.tabIndex=this.initialTabIndex;this.hasTabFocus=false;}}function I(k){var b=this.navList,d=this.tabIndex,c=d,g=this.tabWrap,h=b.length,i=h>0,e=k?-1:1,f=h,j;while(!this.isValidTarget(j)&&f>=0){d+=e;f--;if(d>=b.length){if(g){d=0;}else{d=i?h-1:0;}}else{if(d<0){if(g){d=i?h-1:0;}else{d=0;}}}if(d===c){break;}j=this.getNavListItem(d);}if(!this.isValidTarget(j)){j=null;}return{idx:d,item:j,foundItem:!!j};}mstrmojo.vi.ui.rw._SupportTabNav=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportTabNav",{_mixinName:"mstrmojo.vi.ui.rw._SupportTabNav",canTab:true,tabParent:null,initialTabIndex:0,tabIndex:0,navList:[],tabWrap:true,tabBubbles:true,hasTabFocus:false,isRefocusingViaTab:false,initTabNavigation:function S(c){var b=c||{},d=this.parent;while(d&&!d.canTab){d=d.parent;}this.tabParent=d;if(!this.focusEventFn){this.focusEventFn=M.bind(this);}G.detachEvent(this.domNode,"focusin",this.focusEventFn);G.attachEvent(this.domNode,"focusin",this.focusEventFn);if(b.watchForBlur){if(!this.blurEventFn){this.blurEventFn=N.bind(this);}G.detachEvent(this.domNode,"focusout",this.blurEventFn);G.attachEvent(this.domNode,"focusout",this.blurEventFn);}if(typeof b.initialTabIndex==="number"){this.initialTabIndex=b.initialTabIndex;}this.buildNavList();},postBuildRendering:function X(){if(this._super){this._super();}this.initTabNavigation();},destroy:function Y(){if(this._super){this._super();}if(this.navList){delete this.navList;}if(this.focusEventFn){G.detachEvent(this.domNode,"focusin",this.focusEventFn);delete this.focusEventFn;}this.tabParent=null;},changeTabTarget:function F(h,e){var d=typeof h==="string",g=typeof h==="number",c=this.navList,b=this.tabIndex,f=c.length;J.forEach(c,function(j,i){if(d){if(j.k===h){b=i;return false;}}else{if(g){if(i===h){b=i;return false;}}else{if(j===h){b=i;return false;}}}});if(e){b--;if(b<0){if(this.tabWrap){b=f>0?f-1:0;}else{b=0;}}}this.tabIndex=b;},resetTabNav:function R(b){this.tabIndex=this.initialTabIndex;this.buildNavList();if(b!==undefined){this.changeTabTarget(b);}},buildNavList:function H(){var b=[],c=this.children;J.forEach(c,function(d){if(d.canTab){b.push(d);}});this.navList=b;},isValidTarget:function A(b){return !(b===undefined||b===null||(b instanceof HTMLElement&&(Z.getStyleValue(b,"display")==="none"||!b.hasAttribute("tabindex")||b.hasAttribute("disabled"))));},handleTab:function P(b,d){var e=b.e||b,c=e.key;if(!this.canTab){return false;}if(c==="Tab"){if(!this.hasTabFocus){return true;}b.preventDefault();e.stopPropagation();if(d){this.changeTabTarget(d);}try{this.isRefocusingViaTab=true;if(this.model){this.model.isA11yNavigating=true;}if(!b.shiftKey){this.navigateNext();}else{this.navigatePrevious();}}finally{this.isRefocusingViaTab=false;if(this.model){delete this.model.isA11yNavigating;}}return true;}return false;},navigateToFirstValidTarget:function B(){var c,b;this.tabIndex=-1;c=I.call(this,false);if(c.foundItem){this.tabIndex=c.idx;b=c.item;if(b&&b.grabFocus){b.grabFocus(true);}}},navigateNext:function a(){var i=this.tabParent,c=this.tabIndex,f=this.navList,e=this.tabBubbles,g=c,d,h,b;d=I.call(this,false);if(d.foundItem){this.tabIndex=d.idx;h=this.getNavListItem(g);if(h!==this&&h&&h.loseFocus){h.loseFocus(true);}b=d.item;if(b&&b.grabFocus){b.grabFocus(true);}}else{if(f.length===1){}else{if(i&&i.canTab&&e){if(this.loseFocus){this.loseFocus(true);}i.changeTabTarget(this);i.navigateNext();}}}},navigatePrevious:function W(){var i=this.tabParent,c=this.tabIndex,f=this.navList,e=this.tabBubbles,g=c,d,h,b;d=I.call(this,true);if(d.foundItem){this.tabIndex=d.idx;h=this.getNavListItem(g);if(h!==this&&h&&h.loseFocus){h.loseFocus(true);}b=d.item;if(b&&b.grabFocus){b.grabFocus(true);}}else{if(f.length===1){}else{if(i&&i.canTab&&e){if(this.loseFocus){this.loseFocus(true);}i.changeTabTarget(this);i.navigatePrevious();}}}},navigateToParent:function U(d,c){var b=this.tabParent;if(b&&b.canTab){b.changeTabTarget(this,d);if(this.loseFocus){this.loseFocus(true);}if(c&&b.enterUnit){b.enterUnit();}else{if(b.grabFocus){b.grabFocus(true);}}return b;}return undefined;},grabFocus:function K(){this.hasTabFocus=true;},loseFocus:function E(){this.hasTabFocus=false;},restoreFocus:function D(){if(O.walk("navList."+this.tabIndex+".grabFocus",this)){this.getNavListItem(this.tabIndex).grabFocus(true);}},getFocusedTarget:function Q(){return O.walk("navList."+this.tabIndex,this);},getNavListItem:function C(b){var c,d=this.navList[b];if(d instanceof Function){c=d();d=c&&c.domNode;if(d&&(!d.grabFocus||(d instanceof HTMLElement&&!d.hasAttribute("tabindex")))){L.enableAccessibility(c,c.role,c.ariaProps);}}return d;}});mstrmojo.vi.ui.rw._SupportTabNav.nextValidItem=I;})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.vi.util.A11yUtility","mstrmojo.css");var G=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.dom,E=mstrmojo.vi.util.A11yUtility;function C(){var U=this,d=this.navMode||(this.popupConfig&&this.popupConfig.navMode),O=this.itemsContainerNode,g=(O&&O.childNodes)||[],Q=this.multiSelect===true,M=(typeof this.cssClass==="string")&&this.cssClass.indexOf("mnu--vi-container")>=0,a,J,f,R=this.initFocusItemIdx,S=function(){for(a=0;a<g.length;a++){f=g[a];if(f===document.activeElement){f.blur();A.removeClass(f,E.CSS_FOCUS_VISIBLE);A.addClass(f,"ignore-hover");break;}}},H=function(h){if(d){A.addClass(h.target,E.CSS_FOCUS_VISIBLE);}},e=function(h){if(d){A.removeClass(h.target,E.CSS_FOCUS_VISIBLE);}},Y=function(h){if(d){S();U.navMode=d=false;}else{J=h.target.parentElement;if(!J.classList.contains("separator")){J.focus();A.removeClass(J,E.CSS_FOCUS_VISIBLE);}for(a=0;a<g.length;a++){f=g[a];A.removeClass(f,"ignore-hover");}}},L=function(h){if(d){J=h.target.parentElement;if(!J.classList.contains("separator")){A.removeClass(f,"ignore-hover");}}},Z=function(h){var j=h.code==="ArrowUp",i=h.code==="ArrowDown";if(!j&&!i){return ;}if(d){J=h.target;var k=parseInt(J.getAttribute("idx"),10)+(j?-1:1);while(k>=0&&k<=g.length&&g[k]&&g[k].classList.contains("separator")){k+=(j?-1:1);}for(a=0;a<g.length;a++){f=g[a];if(a===k){A.removeClass(f,"ignore-hover");}else{A.addClass(f,"ignore-hover");}}}else{S();U.navMode=d=true;}},N=function(h){h.setAttribute("tabindex","-1");if(h.classList.contains("pop")){h.setAttribute("aria-haspopup","true");h.setAttribute("aria-expanded","false");}h.setAttribute("aria-disabled",false);if(h.classList.contains("disabled")){h.setAttribute("aria-disabled",true);}h.onfocus=H;h.onblur=e;h.onmouseover=Y;h.onmouseout=L;h.onkeydown=Z;if(d&&R){if(R===a){h.focus();}}else{if(d&&a===0){h.focus();}}};if(Q){for(a=0;a<g.length;a++){f=g[a];f.setAttribute("role","menuitemcheckbox");var P=f.classList.contains("selected");f.setAttribute("aria-checked",P);var c=this.parent&&this.parent.btnNode&&this.parent.btnNode.children||[];G.forEach(c,function(h){h.setAttribute("role","button");});N(f);}}else{var X=1,W=G.filter(g,function(h){return !h.classList.contains("separator");}).length;for(a=0;a<g.length;a++){f=g[a];if(f.classList.contains("separator")){f.removeAttribute("aria-posinset");f.removeAttribute("aria-setsize");E.hideNodesFromA11yTree(f,false);}else{if(M){var K=G.filterOne(f.childNodes,function(h){return h.classList.contains("mtxt");}),b=(K&&K.textContent)||"";if(b){f.setAttribute("aria-label",b);E.hideNodesFromA11yTree(f,true);}}if(f.hasAttribute("aria-checked")){f.setAttribute("role","menuitemcheckbox");}else{if(f.hasAttribute("aria-selected")){f.setAttribute("role","option");}else{f.setAttribute("role","menuitem");}}f.setAttribute("aria-posinset",X);f.setAttribute("aria-setsize",W);X+=1;}N(f);}}var I=this.scriptClass==="mstrmojo.vi.ui.InteractiveUnitList"?this.getListContainer():this.domNode;if(I){I.setAttribute("role","menu");if(!U.onkeydown){F.attachEvent(I,"keydown",function(h){F.captureDomEvent(this.id,this.evtName,U,h);}.bind({id:I.mstrmojoId,evtName:"keydown"}));}}}mstrmojo._IsAccessibleMenu=mstrmojo.provide("mstrmojo._IsAccessibleMenu",{_mixinName:"mstrmojo._IsAccessibleMenu",hasAccessibility:true,_focusFirstFocusableElement:function B(I){if(!I||!(I instanceof HTMLElement)){console.error("Invalid container element provided.");return ;}const J='button:not([tabindex="-1"]), [href]:not([tabindex="-1"]), input:not([tabindex="-1"]),select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])';const H=I.querySelector(J);if(H){setTimeout(function(){H.focus();},0);}else{console.warn("No focusable elements found in the container.");}},enableAccessibility:function D(){if(this._super){this._super();}var I="popup-mid-render";var H=(this.children&&this.children[0])||this;if(H.accessibilityMenuContainer){var J=H.accessibilityMenuContainer();A.removeClass(this.domNode,I);C.call(J);}else{if(H.scriptClass==="mstrmojo.vi.ui.NumberFormatter"){if(H.domNode){this._focusFirstFocusableElement(H.domNode);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.fe.FilterUtils","mstrmojo.vi.enums.EnumFilterClearActionType","mstrmojo.vi.enums.EnumVisFilterType","mstrmojo.vi.ui.rw.linkingExprHelper");var H=mstrmojo.array,K=mstrmojo.hash,A=mstrmojo.string,M=mstrmojo.vi.ui.rw.linkingExprHelper,E=mstrmojo.vi.enums.EnumFilterClearActionType,J=mstrmojo.vi.enums.EnumVisFilterType;function D(W){if(W.vfl){return K.valarray(W.vfl)[0].tpl;}return W.tpl;}mstrmojo.vi.ui.rw._SupportViewFilterInVizBox=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",{_mixinName:"mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",getSelectorObjectsFromTemplateLimit:function G(){return this.getSelObjsFromTemlateLimitHandler();},getInaccessibleSelectorObjectsFromTemplateLimit:function U(){var X=this,W=X.node.data,Y=W&&D(W);return mstrmojo.fe.FilterUtils.getInaccessibleObjectInExpr(Y);},getSelectorObjectsFromViewFilter:function P(){return this.getSelObjsFromVFHandler();},getSelObjsFromVFHandler:function L(){var Y=this,W=Y.model,X=Y.node.data,Z=X&&X.vfexpr;return W&&W.getSelectorDataFromViewFilter(Z);},getSelObjsFromTemlateLimitHandler:function O(){var Y=this,W=Y.model,X=Y.node.data,Z=X&&D(X);return W&&W.getSelectorDataFromTemplateLimit(Z);},makeBold:function F(W){return M.makeBold(W);},getSelectorExpr:function B(a,Z){var b=[],c="",Y=true,X=a.keepOnly?"##":mstrmojo.desc(13232,"Not ##"),W,d=mstrmojo.desc(5283,"OR");if(Z){d=this.makeBold(d);}a.data.every(function(e){[].concat(e).every(function(f){if(c===""){c=f.tn;}return(Y=(c===f.tn));});return Y;});a.data.forEach(function(g,e){if(e>0){b.push(d);}var f=[];[].concat(g).forEach(function(j){var i=Z?A.encodeHtmlString(j.v):j.v,h=Z?A.encodeHtmlString(j.tn):j.tn;f.push((Y?"":(h+" = "))+(i||mstrmojo.desc(14323,"NULL")));});b.push(f.join(" "));});if(b.length>0){W=X.replace("##",(Y?(Z?A.encodeHtmlString(c):c)+" = ":"")+b.join(" "));}return W;},getLinkingSelectorExpr:function S(X,W){return M.getLinkingSelectorExpr(X,W);},getFilterMenuPairs:function N(W){var Y=this,Z=[],X=mstrmojo.desc(2827,"Clear");if(W instanceof Array){W.forEach(function(d,c){var b=Y.getSelectorExpr(d),a=Y.getSelectorExpr(d,true);Z.push({menuString:X+' "'+b+'"',menuTtpString:X+' "'+a+'"',ctxt:c,isBranch:d.isBranch});});}return Z;},filterMenuHandler:function Q(W,Z){var Y=this,X=Y.controller;switch(W.type){case E.CLEAR_KEEP_ONLY:W=W.idx;if(!W&&W!==0){X.clearFiltersForVis(Y,[J.KEEP_ONLY],Z);break;}else{X.applyKeepOnly(Y,Z,undefined,W,false);}break;case E.CLEAR_ALL:X.clearFiltersForVis(Y,[J.KEEP_ONLY,J.LINKING,J.DRILLING,J.DOSSIER_LINKING],Z);break;case E.CLEAR_ADV_QUALIFICATION:X.clearFiltersForVis(Y,[J.ADV_QUALIFICATION],Z);break;case E.CLEAR_KEEP_ONLY_AND_LINKING:X.clearFiltersForVis(Y,[J.KEEP_ONLY,J.LINKING],Z);break;case E.CLEAR_LINKING:X.clearLinkingFilter(W,Z);break;case E.CLEAR_DRILLING:X.clearFiltersForVis(Y,[J.DRILLING],Z);break;case E.CLEAR_DOSSIER_LINKING:X.clearFiltersForVis(Y,[J.DOSSIER_LINKING],Z);break;case E.CLEAR_DRILLING_IN_COLUMNSET:X.clearFiltersForColumnSets(Y,[W.columnSetKey],Z);break;default:break;}},hasKeepOnly:function C(W,X){return W===null||W.length>0||!!X;},hasJointElementKeepOnly:function R(){const Z=7;const Y=K.walk("node.data.tpl.nds.0.et",this);if(Y===Z){return true;}const X=K.walk("node.data.vfl",this);if(!X){return false;}const W=Object.values(X);return W.some(function(a){const b=K.walk("tpl.nds.0.et",a);return b===Z;});},getSelectorDataForKeepOnly:function I(X,b){var Z=this,Y=Z.model,a=Z.model.data||Z.node.data,W=D(a),c;if(b===-1){c=[];}else{c=[].concat(Y.getSelectorDataFromTemplateLimit(W));if(b===-2){c=H.filter(c,function(d){return !d.keepOnly;});}else{if(b>=0){c.splice(b,1);}}}if(X){c=c.concat(X);}return c;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.desc","mstrmojo.hash","mstrmojo.array","mstrmojo.vi.enums.EnumFeatures","mstrmojo.fe.FilterUtils");mstrmojo.requiresDescs(27084);var M=mstrmojo.vi.enums.EnumFeatures,D=mstrmojo.hash,B=mstrmojo.func,E=mstrmojo.desc,I=mstrmojo.array,K="warning-item";mstrmojo.vi.ui.rw._SupportConditionalFormat=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportConditionalFormat",{_mixinName:"mstrmojo.vi.ui.rw._SupportConditionalFormat",freeformHidden:false,isConditionalHidden:function C(){var O=B.safeCall("isAppStatePresentation",window.mstrApp)(),R=window.mstrApp&&mstrApp.isExporting,N=D.walk("boxContent.node.data.conditionalHidden",this),W=this.parent&&this.parent.k,Q=this.model,U=false;try{var P=Q.getPanel(W);U=P&&P.isManualMode();}catch(S){}return(O||R)&&N&&U;},setFreeformHidden:function G(N){this.freeformHidden=N;},updateTriggerByChild:function F(){this.set("visible",!(this.freeformHidden||this.isConditionalHidden()));},canEditConditionalFormat:function H(){if(!this.allowConditionalFormat){return false;}var N=B.safeCall("supportFeature",window.mstrApp)(M.CONDITIONAL_FORMAT),O=B.safeCall("parent.isManualMode",this)(),Q=!B.safeCall("isAppStatePresentation",window.mstrApp)(),P=B.safeCall("isWSLocalMode",window.mstrApp)();return(N||P)&&Q&&O;},hasInaccessibleNode:function A(){var O=false;const N=D.walk("boxContent.defn.thresholds",this);if(N){O=I.some(N,function(P){return !!mstrmojo.fe.FilterUtils.getInaccessibleObjectInExpr(P.expr);});}return O;},addConditionalFormatMenuItem:function L(N){var O=this.id;if(this.canEditConditionalFormat()){N.addSeparator();N.addMenuItem(E(27084,"Conditional Display..."),this.hasInaccessibleNode()?K:"confmt",function(){var P=mstrmojo.all[O];P.openCFEditor();});N.addSeparator();}},openCFEditor:function J(){var P=this.id,O=function N(){var R=mstrmojo.vi.ui.editors.cf.ConditionalFormatController,S=mstrmojo.all[P],Q=new R({host:S});Q.openEditor();};mstrmojo.loader.loadBundleWithCss("mstrmojo.vi.ui.editors.cf.ConditionalFormatController","html5-vi-editor-all.js",[mstrmojo.getJsRoot()+"mojo/css/html5-vi-editor-all.css"],O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.models.ParametersInterface","mstrmojo.pendo.PendoParameterEnums","mstrmojo.vi.viz.EnumVisualizationTemplates");var E=mstrmojo.chart.model.enums.EnumDSSBaseFormType,B=mstrmojo.vi.viz.EnumVisualizationTemplates,H=mstrmojo.pendo.PendoParameterEnums,O=mstrmojo.models.ParametersInterface,I=0,C=2,A=3,D=4,G=5,F=6,J=7,N=9,M=1,L=11,K=10;mstrmojo.pendo.PendoHelper=mstrmojo.provide("mstrmojo.pendo.PendoHelper",{isPendoEnabled:function(){return !!(window.pendo&&window.pendo.isReady&&window.pendo.isReady());},resolveGraphType:function(S){var U=S.GMController,P=U&&U.isBar,Q=U&&U.isLine,R=U&&U.isPie,W=U&&U.getVisType()===B.GRAPHMATRIXBUBBLECIRCLEMM,X;if(P){X=H.VIZ_TYPE.BAR_CHART;}else{if(Q){X=H.VIZ_TYPE.LINE_CHART;}else{if(R){X=H.VIZ_TYPE.PIE_CHART;}else{if(W){X=H.VIZ_TYPE.BUBBLE_CHART;}}}}return X;},resolveParameterType:function(P){if(O.isElementListParameterItem(P)){return H.PARAMETER_TYPE.ELEMENT_LIST;}if(O.isObjectParameterItem(P)){return H.PARAMETER_TYPE.OBJECT;}return H.PARAMETER_TYPE.VALUE;},resolveFormDataType:function(P){var Q;switch(P){case E.DssBaseFormDateTime:case E.DssBaseFormDate:case E.DssBaseFormTime:Q=H.DATA_TYPE.TIME;break;case E.DssBaseFormBigDecimal:Q=H.DATA_TYPE.BIG_DECIMAL;break;case E.DssBaseFormNumber:Q=H.DATA_TYPE.NUMBER;break;default:Q=H.DATA_TYPE.STRING;}return Q;},resolveSelectorStyle:function(P){switch(P){case I:return H.SELECTOR_STYLE.DROPDOWN;case M:case J:return H.SELECTOR_STYLE.SLIDER;case C:return H.SELECTOR_STYLE.LISTBOX;case A:return H.SELECTOR_STYLE.RADIO_BUTTONS;case D:return H.SELECTOR_STYLE.CHECKBOXES;case G:return H.SELECTOR_STYLE.BUTTON_BAR;case F:return H.SELECTOR_STYLE.LINK_BAR;case N:return H.SELECTOR_STYLE.SEARCH_BOX;case K:return H.SELECTOR_STYLE.TEXT_BOX;case L:return H.SELECTOR_STYLE.CALENDAR;default:return"";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.mobile.SupportMobileTouchInterface","mstrmojo.mobile.MobileTouchEvents","mstrmojo.dom");var F=mstrmojo.mobile.SupportMobileTouchInterface,E=mstrmojo.mobile.MobileTouchEvents;mstrmojo.mobile.VisRenderProfiler=mstrmojo.provide("mstrmojo.mobile.VisRenderProfiler",{});mstrmojo.mobile.VisRenderProfiler.MARKS={NORMAL_VIEW_UPDATE:"NormalViewUpdate",SELECTOR_CHANGE:"SelectorChange",DOCUMENT_RENDER:"DocumentRender",RESPONSE_RETURNED:"ResponseReturned"};mstrmojo.mobile.VisRenderProfiler.components=[];mstrmojo.mobile.VisRenderProfiler.onRenderFinishFromPostRendering=function G(J){if(J&&J.profileBySelf&&J.profileBySelf()){return ;}mstrmojo.mobile.VisRenderProfiler.onRenderFinish(J);},mstrmojo.mobile.VisRenderProfiler.onRenderFinish=function A(N,O){var M=mstrmojo.mobile.VisRenderProfiler;if(!M.isProfileEnabled()||!N){return ;}var P=100;if(O&&typeof O==="number"){P+=O;}var L=N.id||N,K=M.components,J=K.indexOf(L);if(J<0){return ;}setTimeout(function(){J=K.indexOf(L);if(J<0){return ;}K.splice(J,1);if(K.length===0){F.raiseEventToAndroid(E.WEB_RENDER_FINISH);if(window.mstrApp&&mstrApp.raiseEvent){mstrApp.raiseEvent({name:E.MOJO_OBJECTS_RENDER_EVENT,value:{isStart:false}});}if(M.isVisRenderProfilerEnabled()&&M.startTime!==undefined){console.log("VisRenderProfilerDossier, renderTime: "+(Date.now()-M.startTime)+"ms");M.startTime=undefined;var Q=mstrApp.projectId;var U=mstrApp.rootCtrl.docCtrl.model.oid;var S=Q+"_"+U;var R=window.VisRenderProfilerDossier&&window.VisRenderProfilerDossier[S];if(!isNaN(R)){console.log("VisRenderProfilerDossier, "+S+" E2ETime: "+(Date.now()-R)+"ms");}delete window.VisRenderProfilerDossier[S];}}},P);},mstrmojo.mobile.VisRenderProfiler.onRenderStart=function H(M){var L=mstrmojo.mobile.VisRenderProfiler;if(!L.isProfileEnabled()||!M){return ;}var K=M.id||M,J=L.components.indexOf(K);if(J<0){L.components.push(K);if(L.components.length===1&&window.mstrApp&&mstrApp.raiseEvent){mstrApp.raiseEvent({name:E.MOJO_OBJECTS_RENDER_EVENT,value:{isStart:true}});if(L.isVisRenderProfilerEnabled()){L.startTime=Date.now();console.log("VisRenderProfilerDossier start Render");}}}},mstrmojo.mobile.VisRenderProfiler.triggerRenderProfile=function B(L){var K=mstrmojo.mobile.VisRenderProfiler,J=L||K.MARKS.NORMAL_VIEW_UPDATE;if(!K.isProfileEnabled()||K.components.length>0){return ;}K.onRenderStart(J);K.onRenderFinish(J);},mstrmojo.mobile.VisRenderProfiler.getTimeString=function D(){var K=new Date();var J=K.toLocaleTimeString("en-US",{hour12:false,hour:"numeric",minute:"numeric",second:"numeric",mm:"numeric"})+":"+K.getMilliseconds();return J;},mstrmojo.mobile.VisRenderProfiler.isVisRenderProfilerEnabled=function C(){var J=window.localStorage&&localStorage.getItem("VisRenderProfiler");return J==="1"||J==="true";},mstrmojo.mobile.VisRenderProfiler.isProfileEnabled=function I(){if(window.mojoObjectsRenderLogEnabled){return true;}var Q=mstrmojo.mobile.VisRenderProfiler.isVisRenderProfilerEnabled();if(Q){return true;}if(window.mobileProfilerEnabled===undefined){var J=document.cookie;var O=J&&J.split(";");var P;if(O){for(var M=0;M<O.length;M++){var L=O[M];L=L&&L.trim();var K=L&&L.split("=");if(K&&K.length===2){var N=K[0];N=N&&N.trim();if(N==="mobileProfilerEnabled"){P=K[1];P=P&&P.trim();break;}}}}window.mobileProfilerEnabled=P||"0";}return window.mobileProfilerEnabled==="1";};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.url");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:-1,cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@en@tooltip}" aria-labelledby="{@id}_label" mstrAttach:keydown tabIndex="{@tabIndex}" role="checkbox"><input id="{@id}_input" role="presentation" type="{@type}" name="{@name}" value="{@value}" mstrAttach:click tstid="{@tstid}"/><label id="{@id}_label" for="{@id}_input">{@en@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;if(this.domNode){this.domNode.setAttribute("aria-checked",this.checked);this.domNode.setAttribute("role","checkbox");}}},checked:false,onkeydown:function D(E){var G=E.e||E,F=G.key;if(this._super){this._super(E);}if(F==="Enter"||F===" "){G.preventDefault();G.stopPropagation();if(this.type==="radio"&&this.inputNode.checked&&this.canCheckOnly){return ;}this.inputNode.checked=!this.inputNode.checked;this.preclick();}},preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||mstrmojo.url.getPlaceholderImageURL();if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",canCheckOnly:false,postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var I=mstrmojo.hash,N=mstrmojo.array,L=mstrmojo.boxmodel,K=mstrmojo.dom;function X(AC,AE,AB){var AD=AC.listSelector;if(AD){AD[AE](AC,AC.itemsContainerNode,AB);}}function a(AC,AB){var AD=AC.lastPagePos;if(!AD||AD.dragId!==AB){AD=L.offset(AC.itemsContainerNode);AD.dragId=AB;AC.lastPagePos=AD;var AE=AC.scrollboxNode;AC.lastScrollPos={left:AE.scrollLeft,top:AE.scrollTop,width:AE.clientWidth,height:AE.clientHeight};}}function P(AE,AH,AC){var AD=AH&&AH.node;if(AD===AE.dropCueNode||AD===AE.dropCueNode.firstChild){return AE.dropCuePos;}var AF=AE.listMapper;var AB=AF&&AF.whereDrop(AE,AE.itemsContainerNode,AD,AH.pos,{left:AE.lastPagePos.left-AE.lastScrollPos.left,top:AE.lastPagePos.top-AE.lastScrollPos.top,width:AE.lastScrollPos.width,height:AE.lastScrollPos.height});var AG=AE.dropCuePos;return((AC!==false)&&AG&&AB&&(AG.idx===AB.idx)&&(AG.left===AB.left)&&(AG.top===AB.top))?AG:AB;}var G="attachEventListener";function Y(AC,AB){if(AC.makeObservable){AB=AB||[];if(!AB[G]){mstrmojo.hash.make(AB,AC.itemsScriptClass||mstrmojo.Arr);}}return AB;}function Z(AC,AB){if(AB&&AB[G]){AC._sub_its=AB;AC._sub_add=AB[G]("add",AC.id,"preadd");AC._sub_rmv=AB[G]("remove",AC.id,"preremove");}}function l(AB){if(AB._sub_its){var AC=mstrmojo.publisher;AC.unsubscribe(AB._sub_add);AC.unsubscribe(AB._sub_rmv);delete AB._sub_add;delete AB._sub_rmv;delete AB._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function b(){return this.domNode;},itemsContainerNode:function H(){return this.domNode.firstChild;},dropCueNode:function u(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function e(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function W(){var AC=this.dropCueNode,AB=AC&&AC.style;if(!AB){return ;}var AE=this.dropCuePos,AD=!!AE;if(AD){AB.left=AE.left+"px";AB.top=AE.top+"px";}AB.display=AD?"block":"none";},onpageChange:function J(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function O(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function x(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function y(AE){this._super(AE);this.items=this.initItems(this.items);var AD=this.selectedIndices,AB=this.selectedIndicesList,AC=this.selectedIndex,AF=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(AD||AB||(AC>-1)||AF){this.initSelections(AD,AB,AC,AF);}if(this.postInitItems){this.postInitItems();}},initItems:function o(AB){return Y(this,AB);},preBuildRendering:function A(){var AF=this.listBuilder,AI=AF.newContext(this);this.ctxtBuilder=AI;var AC=this.markupSlots,AE=!!(this.renderOnScroll&&this.renderBlockSize&&AC&&AC.scrollboxNode),AD=this.items,AB=(AD&&AD.length)||0,AG=AE?this.firstRenderBlockSize:AB,AH=AE?this.firstRenderBlockSize:0;this._eros=AE;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(AD,AF,this,AI,AG,AH).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function d(){delete this.itemsHtml;var AF=this.listMapper;if(AF&&AF.postBuildRendering){AF.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}Z(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var AH=this.id;this._cb_scroll=function(){var AI=mstrmojo.all[AH];AI.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var AD=0,AC=["itemsEffect","scrollEffect"],AB=AC.length;AD<AB;AD++){var AG=AC[AD],AE=this[AG];if(AE&&AE.constructor===Object){AE=mstrmojo.insert(mstrmojo.hash.clone(AE));AE.widget=this;this[AG]=AE;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function B(AE){l(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var AC=0,AD=["itemsEffect","scrollEffect"],AB=AD.length;AC<AB;AC++){var AF=this[AD[AC]];if(AF&&AF.isPlaying){AF.cancel();}}this._super(AE);},pauseScrollRendering:function i(AD,AB,AC){if(AD!==false){AD=true;}if(this.paused===!!AD){return ;}this.paused=!!AD;if(AD){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(AB,AC);}},onscroll:function w(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var AB=this;this._fillTmr=self.setTimeout(function(){AB.fill();AB=null;},50);}}if(this._super){this._super();}},fill:function S(AB,AF){try{if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var AG=(this.items&&this.items.length)||0;if(!AG){if(AF){AF();}}else{var AD=this.scrollboxNode,AH=this.itemsContainerNode,AE=mstrmojo.boxmodel.offset(AH,AD),AK=this.listMapper;if(AD){var AI=AK.findScrollRange(AH,AG,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||AD.scrollTop,AD.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||AD.scrollLeft,AD.clientWidth,AE.left,AE.top);if(this.fillAt(AI.start,AI.end)){if(AB){AB();}var AC=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[AC].fill(AB,AF);},100);}else{if(AF){AF();}}}}}catch(AJ){console.error(AJ);}},fillAt:function M(AD,AC){var AB=this.listMapper;if(AB){return AB.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,AD,AC,this.renderBlockSize);}return false;},add:function D(AC,AB){if(!AC||!AC.length){return -1;}var AD=this.items;if(AB==null){AB=I.min(this.selectedIndices,false,true);if(AB!==null&&AB!==undefined){AB++;}}if(AB==null||AB===-1){AB=(AD&&AD.length)||0;}if(AD&&AD.add){AD.add(AC,AB);}else{this.set("items",AD?N.insert(AD.concat(),AB,AC):AC);}return AB;},preadd:function E(AD){if(this.hasRendered){var AG=this.listMapper;if(AG){AG.onadd(this,this.itemsContainerNode,this.ctxtBuilder,AD);}var AF=this.listBuilder;if(AF){AF.onadd(this,this.ctxtBuilder,AD);}var AC=this.listSelector;if(AC){AC.onadd(this,AD);}if(this._eros){this.onscroll();}else{var AE=AD.index,AB=AD.value.length;this.fillAt(AE,AE+AB-1);}}if(this.onadd){this.onadd(AD);}if(this._super){this._super(AD);}},remove:function j(AB){if(AB==null){return -1;}if(AB.constructor!==Array){return this._remove(AB);}var AD=this.items;if(AD){var AC;if(AD.remove){for(AC=AB.length-1;AC>-1;AC--){AD.remove(AB[AC],1);}}else{AD=AD.concat();for(AC=AB.length-1;AC>-1;AC--){AD.splice(AB[AC],1);}this.set("items",AD);}return AB[0];}return -1;},_remove:function t(AD){var AC=this.items;if(!AC||(AD==null)){return -1;}var AB;if(!isNaN(AD)){AB=AD;}else{AB=this.itemIndex(AD);}if(AB>-1){if(AC.remove){AC.remove(AB,1);}else{AC=AC.concat();AC.splice(AB,1);this.set("items",AC);}}return AB;},duplicate:function k(AG,AC,AD){var AE=this.items,AB=-1;if(!AE||(AG==null)){return -1;}if(!isNaN(AG)){if(AC===null||AC===undefined){AC=AG+1;}AG=AE[AG];}else{if(AC===null||AC===undefined){AC=this.itemIndex(AG)+1;}}if(AG){var AF;AF=I.copy(AD,I.clone(AG));AB=this.add([AF],AC);}return AB;},preremove:function c(AC){if(this.hasRendered){var AE=this.listMapper;if(AE){AE.onremove(this,this.itemsContainerNode,this.ctxtBuilder,AC);}var AD=this.listBuilder;if(AD){AD.onremove(this,this.ctxtBuilder,AC);}var AB=this.listSelector;if(AB){AB.onremove(this,AC);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(AC);}if(this._super){this._super(AC);}},move:function Q(AE,AJ){function AH(AL,AK){return AJ>=AL&&AJ<=AL+AK;}var AI=(this.items&&this.items.length)||0;if(AJ===-1||AJ==null||isNaN(AJ)){AJ=AI;}else{AJ=Math.min(AJ,AI);}var AD,AB,AG,AF;if(AE.constructor===Array){AB=AE;AG=AE;AF=(AB&&AB.length)||0;if(AH(AE[0],AE.length)){return false;}AD=N.get(this.items,AE);}else{if(typeof (AE)==="object"){AD=[AE];AF=1;AB=this.itemIndex(AD[0]);AG=[AB];if(AH(AB,1)){return false;}}else{AB=AE;AG=[AE];AF=1;if(AH(AB,1)){return false;}AD=[this.items[AB]];}}for(var AC=0;AC<AF;AC++){if(AG[AC]<=AJ){AJ--;}}if(AD[0]!=null){this.remove(AB);this.add(AD,AJ);}return true;},itemIndex:function q(AB){if(AB==null){return -1;}var AC=this.itemIdField;return AC?N.find(this.items,AC,AB[AC]):N.indexOf(this.items,AB);},prechange:function z(AD){if(this.hasRendered){var AC=[this.listBuilder,this.listMapper];for(var AE=0,AB=AC.length;AE<AB;AE++){var AF=AC[AE];if(AF&&AF.onchange){AF.onchange(this,this.itemsContainerNode,this.ctxtBuilder,AD);}}}},makeObservable:false,_set_items:function U(AG,AB){var AF=this.items;AB=this.initItems(AB);this.items=AB;if(AF!==AB){var AE=this,AD=function(){if(AE.autoHide){AE.set("visible",!!(AB&&AB.length));}AE=null;},AC=this.hasRendered;if(AC){this.refresh(AD);}else{AD();}}return AF!==AB;},premousedown:function g(AB){X(this,"premousedown",AB);},premouseup:function f(AB){X(this,"premouseup",AB);},scrollTo:function AA(AC){var AB,AD=this.listMapper;if(AD&&AD.toItem){if(!isNaN(AC)){AB=AC;}else{AB=this.itemIndex(AC);}if(AB>=0){AD.toItem(this,AB);}}},draggable:false,getDragData:function p(AF){a(this,AF.id);var AD=P(this,AF.src),AC=AD&&AD.idxActual;if((AC>-1)&&this.selectedIndices[AC]){var AE=this.sortSelectedIndices(),AB=N.get(this.items,AE)||[];switch(AB.length){case 1:return I.copy({html:AB[0][this.itemDisplayField],index:AE[0]},I.copy(AB[0]));case 0:return null;default:return I.copy({html:AB.length+" selections",indices:AE},AB);}}},dropZone:false,ondragenter:function F(AB){a(this,AB.id);this.set("dropCuePos",P(this,AB.tgt));},ondragover:function n(AB){this.set("dropCuePos",P(this,AB.tgt));},ondragleave:function R(AB){this.set("dropCuePos",null);},isDragValid:function h(AB){return AB&&AB.src&&AB.src.data;},ondragstart:function s(AB){if(!(AB&&AB.src&&AB.src.data)){return false;}},allowCopy:false,ondragend:function C(AE){var AC=AE&&AE.tgt,AB=AC&&AC.widget;if(AB===this){}else{if(this.tree&&AB&&AB.tree===this.tree){if(!this.allowCopy||!K.ctrlKey(AC.hWin,AC.e)){var AD=AE.src&&AE.src.data;if(AD&&(AD.indices||(AD.index!==null))){this.remove(AD.indices||AD.index);}}}}},ondrop:function m(AJ){var AM=AJ&&AJ.src,AI=AM&&AM.data;if(AI){var AD=P(this,AJ.tgt,false),AK=AD&&AD.idx,AE=(AI&&AI.constructor===Array),AC=this.sortSelectedIndices();var AG=this.items;AK=Math.min(AK,AG&&AG.length)||0;var AL=true;if(AM.widget===this){AL=this.move(AC,AK);N.forEach(AC,function(AN){if(AN<=AK){AK--;}});}else{this.add(AE?AI:[AI],AK);}if(AL){var AH=AE?AI.length:1,AB={};for(var AF=0;AF<AH;AF++){AB[AK+AF]=true;}this.set("selectedIndices",AB);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.boxmodel","mstrmojo.models.FormatModel","mstrmojo.Widget");var a=mstrmojo.hash,i=mstrmojo.css,L=mstrmojo.dom,f="animate",j=mstrmojo.models.FormatModel,P="px";function d(k){return a.copy((mstrApp.isAuthoringDashboardNewLayout?a.walk(k,window).boxConfigurationNewLayout:undefined)||((mstrApp.isWSStyling)?a.walk(k,window).boxConfigurationWS:undefined)||a.walk(k,window).boxConfiguration||mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration);}function H(m){var l=m.boxCache,n=l&&l[this.id],k=false;if(!n){k=this.domNode.className.indexOf(f)>-1;this.cacheCtxtBoxPosition(m);}m.boxAnimating=k;}mstrmojo.vi.ui._IsBoxLayoutChild=mstrmojo.provide("mstrmojo.vi.ui._IsBoxLayoutChild",{_mixinName:"mstrmojo.vi.ui._IsBoxLayoutChild",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||1;}},id:null,left:"0px",top:"0px",zIndex:1,draggable:false,dropZone:false,getBoxConfiguration:function C(){return d(this.scriptClass);},getBoxBorderWidth:function I(){return 0;},getMinBoxSize:function A(k){return mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums(this.scriptClass)[k];},getIdentifier:function Q(){return this.id;},getBoxPaddingWidth:function X(m){var l=this.getActualRadius&&this.getActualRadius(m)||0;var k=j.RADIUS_PADDING_RATIO;return l?2*Math.ceil(k*parseInt(l,10)):0;},updateLayout:function O(o,k,q){var l=mstrmojo.func.safeCall("getScale",this)()||1,t={top:parseFloat(o.top)/l+P,left:parseFloat(o.left)/l+P,height:l===1?parseInt(o.height,10)/l+P:parseFloat(o.height,10)/l+P,width:l===1?parseInt(o.width,10)/l+P:parseFloat(o.width,10)/l+P};if(!t||(!q&&a.equals(t,this._currentLayout))){return ;}mstr_profile.log(this.title+" layout update.");var m=this.domNode,s=this.getBoxBorderWidth(),p=Math.min(parseInt(t.width,10),parseInt(t.height,10));s+=this.getBoxPaddingWidth(p);if(m&&k){i.addClass(m,f);i.onTransitionEnd(m,function(){i.removeClass(m,f);});}var n=this._currentLayout;this._currentLayout=a.copy(t);this.applyBoxSize(Math.max(parseInt(t.height,10)-s,0)+P,Math.max(parseInt(t.width,10)-s,0)+P,t.top,t.left);if(this.adjustPaddingForBorderRadius){this.adjustPaddingForBorderRadius(p);}if(this.hasRendered&&this.doLayout){this.doLayout();}this.postUpdateLayout(n,q);},postUpdateLayout:function D(){},applyBoxSize:function b(k,n,p,o){this.height=k;this.width=n;this.top=p;this.left=o;var m=this.domNode;if(m){var l=this.domNode.style;l.top=p;l.left=o;l.height=k;l.width=n;if(parseInt(k,10)<=0||parseInt(n,10)<=0){l.borderWidth="0";}}},createAvatar:function Y(){return this.offsetAvatar(this.domNode);},offsetAvatar:function U(k){k.style.margin="20px 0 0 20px";return k;},setMaskVisibility:function S(k){var l=this.maskNode.style;l.display=k?"block":"none";if(!k){this.resetMask();}},isDragValid:function F(k){return true;},initializeDrag:function G(k){},ondragstart:function h(k){this.initializeDrag(k);delete this._currentLayout;this.parent.beginBoxMove(k,this);if(!this.unDocked){this._super(k);}},ondragend:function N(k){if(!this.unDocked){this._super(k);}this.parent.endBoxMove(k,this);if(!k.dropSuccessful){this.parent.cancelBoxMove(k);}var l=this.domNode;l.style.margin="0";},allowDrop:function K(k){var m=k.src,l=m&&m.widget;return(l&&l.parent===this.parent);},wasDropped:function M(k){},cancelBoxMove:function J(k){return false;},ondragenter:function W(k){this.setMaskVisibility(true);},ondragover:function Z(k){H.call(this,k);this.highlightMask(this.parent.getPanelTargetEdge(k)||this.getTargetDropZone(k),k);if(k.boxAnimating){delete k.boxCache[this.id];}},cacheCtxtBoxPosition:function E(l){var k=l.boxCache=l.boxCache||{};k[this.id]=L.position(this.domNode);},ondrop:function e(k){H.call(this,k);var m=k.src.widget;if(m.wasDropped){m.wasDropped(k);}var l=this.parent;if(m.parent===l){l.dropBox(k,this,this.maskNode.zone,true);}this.setMaskVisibility(false);},ondragleave:function B(){this.setMaskVisibility(false);},highlightMask:function g(n,m){var k=this.maskNode,l=m.boxAnimating;if(n!==k.zone||l||k.isAnimating!==l){k.zone=n;k.isAnimating=l;this.parent.updateDropCue(n,m,m.boxCache[this.id]);}},getTargetDropZone:function R(k){return mstrmojo.boxmodel.getEdgeQuadrantByPoint(k.boxCache[this.id],k.tgt.pos);},resetMask:function c(){this.parent.updateDropCue("");var k=this.maskNode;delete k.zone;delete k.isAnimating;},getBoxDimension:mstrmojo.emptyFn,postDropBox:mstrmojo.emptyFn});mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration={addToEnd:true};mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums=function(k){var l=d(k);return a.copy(l.minSize||l.f||{h:75,v:75});};mstrmojo.vi.ui._IsBoxLayoutChild.BoxConfigurationType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.util.PlatformHelper","mstrmojo.util.LibraryHelper");var G=mstrmojo.css,H=mstrmojo.array,F=mstrmojo.util.PlatformHelper,I=mstrmojo.util.LibraryHelper;function E(J,L){var K={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[J]||{};if(typeof L==="object"){mstrmojo.hash.copy(L,K);}return K;}var C="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function B(J){var L=this;var K=L.searchTimer;if(K){window.clearTimeout(K);}L.searchTimer=window.setTimeout(function(){L.onkeyupDelayed(J);delete L._searchTimer;},parseInt(J.e.keyCode||J.e.charCode,10)===13?0:L.searchDelay);},onkeyupDelayed:function D(K){var J=K.hWin,M=K.e||J.event;var L=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){G.toggleClass(this.searchNode,["clear"],L.length>0);}this.showTaskError=false;this.click2Search=false;if(L.length==0||this.autoSubmit||this.onEnter&&M.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(K){var J=K.hWin,M=K.e||J.event,O=M.target||M.srcElement,N=O&&O.id;switch(N.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var L=this.optionNode.parentNode.style;L.display=L.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";G.removeClass(this.searchNode,["clear"]);var K=this.searchCache,J=this.rootID;if(K&&K[J]){K[J][C]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var K=this.searchCache[this.rootID];if(K){var J=K[C]||"";this.inputNode.value=J;if(J.length>0){if(J.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(K){var J=this.contentWidget||this;J.set("items",K[0]);if(this.supportIncFetch){var L=K[1],N=K[2],M=this.blockCount;J.set("ifs",{np:Math.floor(L/M)+((L%M>0)?1:0),cp:Math.floor(N/M)+((N%M>0)?1:0)});}},_onsearch:function(J){this.getRootID();this._setupCache();var M=mstrmojo.string.trim(this.inputNode.value);if(M.length===0){J=true;}var N=this.token[this.taskId];if(N.test(M)){}if(this.searchPattern==M&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var O=this.rootID,L=this.searchCache[O];if((M.length<this.minSearchLength&&!this.click2Search)&&!J){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(L[O]);this.searchPattern=M;}}else{this.searchPattern=M;L[C]=this.searchPattern;var K=this.filterCache(M,L,J);if((this.click2Search||K===null)&&!J){this.blockBegin=1;this.fetch();return ;}this._notifyContentWidget(K);}L[C]=M;},_setupCache:function(L){var M=this.searchCache,K=this.rootID;if(M&&(L||!M[K])){M[K]=M[K]||{};var J=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];M[K][K]=[J,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function A(J,K){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(J,K);}else{mstrmojo.xhr.request("POST",this.path,K,J,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var J=this,K=E.apply(this,[this.taskId]);K.searchPattern=this.searchPattern;this.onUpdateSearchParams(K);var L={success:function(N){var O=N.items||N.es||[],M=N.totalSize||N.sz||0;if(H.isArray(O)){if(F.isLibrary()){O=I.removeAIBotObjectsFromList(J,O);M=O.length;}if(F.isAIBotAdvancedMode()){O=I.removeDDAFromList(O);M=O.length;}}O=[O,M,N.blockBegin||N.bb];mstrmojo.all[J.id].searchCache[J.rootID][(K.searchPattern.length==0?J.rootID:J.buildIndex(K.searchPattern))]=O;J._notifyContentWidget(O);},failure:function(M){if(J.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+M.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(J.spinnerNode){J.spinnerNode.style.display="none";}if(J.postFetch){J.postFetch();}}};this.serverRequest(K,L);},fetchPage:function(J){this.blockBegin=J*this.blockCount+1;this.fetch();},filterCache:function(L,O,K){var J=O&&O[K?this.rootID:this.buildIndex(L)];if(J){return J;}var M=this.token[this.taskId];if(M.test(L)||this.totalSize>this.blockCount){return null;}var Q=L.replace(/.$/,"");J=O&&O[this.buildIndex(Q)];while(J===undefined&&(Q=Q.replace(/.$/,"")).length>0){J=O&&O[this.buildIndex(Q)];}if(J!==undefined){if(J[1]>this.blockCount){return null;}var N=J[0],P=[];H.forEach(N,function(R){if(R.n.search(new RegExp(L,this.matchCase?"":"i"))>-1){P.push(R);}});this.totalSize=P.length;return(O[this.buildIndex(L)]=[P,P.length,this.blockBegin].concat());}return null;},buildIndex:function(J){if(J.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?J.toUpperCase():J+"::0";},init:function(J){if(this._super){this._super(J);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";G.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",ariaLabel:"",ariaRole:"",tabIndex:-1,markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" role="{@ariaRole}" aria-label="{@getAriaLabel}" tabIndex="{@tabIndex}" style="{@cssText}" title="{@title}" mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;if(!this.ariaLabel){this.domNode.setAttribute("aria-label",this.getAriaLabel());}},onariaLabelChange:function(){this.domNode.setAttribute("aria-label",this.getAriaLabel());},ontextChange:function(){var D=this.text;D=B.isEmpty(D)?"":D.toString();this.domNode.innerHTML=this.allowHTML?D:B.encodeHtmlString(B.decodeHtmlString(D),true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(F,D){if(this.autoHide){this.set("visible",(D!==null)&&(D!=="")&&(D!==undefined));}var E=this.text;this.text=D;return(E!==D);},getAriaLabel:function C(){return B.encodeHtmlString(this.ariaLabel||this.text,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Widget");var A=mstrmojo.css;mstrmojo.TabButton=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.TabButton",cssDisplay:"inline",markupString:'<span id="{@id}" class="mstrmojo-TabButton {@cssClass}" style="{@cssText}" mstrAttach:click></span>',markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod,ontitleChange:function(){this.domNode.innerHTML=this.title||"";},onbackgroundColorChange:function(){this.domNode.style.backgroundColor=this.backgroundColor||"";},onselectedChange:function(){A.toggleClass(this.domNode,["selected"],!!this.selected);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@en@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}" mstreventmark="selectNode" mstrevent="change" onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',eventHandlerMap:{selectNode:{change:{requiredParams:["id"],handlerFn:function(D){return function(){mstrmojo.all[D.id].set("selected",this.options[this.selectedIndex].value);};}}}},markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo._ListSelections");var F=mstrmojo.dom,G=mstrmojo.css,O=mstrmojo.string,M=mstrmojo.Enum_Keys;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" aria-label="{@en@ariaLabel}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu,keydown><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function K(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onariaLabelChange:function(){this.domNode.setAttribute("aria-label",O.encodeHtmlString(this.ariaLabel,true));}},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,keydownIndex:0,enableAccessibility:false,ariaLabel:"",init:function P(R){this._super(R);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function E(){this.itemsHtml="";var R=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(R){this.itemsHtml=this._buildItemsMarkup(0,R-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(R,W,d,S,e,U){var f=[],Z=0;f[Z++]=d||"";var Y=this.itemRenderer,c=Y&&Y.render;if(c&&typeof c==="function"){var a=this.items,b=Math.min(W+1,((a&&a.length)||0)),X,g;for(X=R;X<b;X++){g=a[X];if(!g||g.skip){continue;}f[Z++]=e||"";f[Z++]=c(g,X,this);f[Z++]=U||"";}}f[Z+1]=S||"";return f;},setA11yAttribute:mstrmojo.emptyFn,onselectionChange:function L(f){if(!f){return ;}var b=this.itemRenderer;if(!b){return ;}var d=this.items;if(f.added&&f.added.length>0&&d.length>0&&!mstrmojo.array.some(f.added,function(i){return !d[i]||!d[i].dsbld;})){return ;}var X=b.unselect,a=this.items||[],g=f.removed,W,U,S,Y,h;if(X&&g){for(Y=0,h=g.length;Y<h;Y++){W=g[Y];if(typeof (W)==="object"){U=(W.idx==0)?0:W.positions;W=W.idx;}else{U=W;}S=this._getItemNode(U);if(S){X(S,a[W],U,this);this.setA11yAttribute(S,false);}}}var R=b.select,e=f.added,Z,c;if(R&&e){for(Z=0,c=e.length;Z<c;Z++){W=e[Z];if(typeof (W)==="object"){U=(W.idx==0)?0:W.positions;W=W.idx;}else{U=W;}S=this._getItemNode(U);if(S){R(S,a[W],U,this);this.setA11yAttribute(S,true);}}}if(this.onchange){this.onchange({added:f.added,removed:f.removed});}},_set_items:function C(W,R){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(R&&R.length));}var U=this.items;this.items=R;if(U!==R){var S=this.hasRendered;if(S){this.unrender(false);}this.clearSelect();if(S){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function J(R){F.preventDefault(window,R.e);var U=R.getTarget(),S=this.getItemFromTarget&&this.getItemFromTarget(U);if(S){if(this.onItemContextMenu(S,R)){R.cancel();}}},getA11yCSS:mstrmojo.emptyFn,arrowKeySupported:function(R){return false;},updateItemStyle:function I(U){if(!this.enableAccessibility){return ;}var R=this.getA11yCSS(),S=this.getSelectedNode(this.keydownIndex);if(S){S[U?"focus":"blur"]();G.toggleClass(S,R,U);}},onkeydown:function H(S){var R=S.hWin,W=S.e||R.event,U=W.keyCode;if(!this.enableAccessibility||!this.arrowKeySupported(U)){return false;}if(U===M.DOWN_ARROW||U===M.RIGHT_ARROW||U===M.END){S.cancel();S.preventDefault();this.updateItemStyle(false);if(U===M.END){this.keydownIndex=this.items.length-1;}else{this.keydownIndex=(this.keydownIndex+1)%this.items.length;}this.updateItemStyle(true);if(this.syncSelectedIndex){this.set("selectedIndex",this.keydownIndex);}this.scrollToSelectedItem(this.keydownIndex);return true;}if(U===M.UP_ARROW||U===M.LEFT_ARROW||U===M.HOME){S.cancel();S.preventDefault();this.updateItemStyle(false);if(U===M.HOME){this.keydownIndex=0;}else{this.keydownIndex=(this.keydownIndex>0)?(this.keydownIndex-1):(this.items.length-1);}this.updateItemStyle(true);if(this.syncSelectedIndex){this.set("selectedIndex",this.keydownIndex);}this.scrollToSelectedItem(this.keydownIndex);return true;}return false;},getSelectedNode:function Q(R){var S=this.itemsContainerNode&&this.itemsContainerNode.childNodes;return S&&S[R!==undefined?R:this.selectedIndex];},scrollToSelectedItem:function D(W){var Z=this.getSelectedNode(W);if(Z){var S=this.scrollNode,Y=S.clientHeight,X=Z.offsetTop,R=S.clientWidth,U=Z.offsetLeft;if(X-S.scrollTop+Z.offsetHeight>Y){S.scrollTop=X+Z.offsetHeight-Y;}else{if(X<S.scrollTop){S.scrollTop=Math.max(X-10,0);}}if(U-S.scrollLeft+Z.offsetWidth>R){S.scrollLeft=U+Z.offsetWidth-R;}else{if(U<S.scrollLeft){S.scrollLeft=Math.max(U-10,0);}}}},_getItemNode:function N(R){var S=this.itemsContainerNode;return(S&&S.childNodes[R])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.vi.util.A11yUtility","mstrmojo.css");var E=mstrmojo.Widget,B=mstrmojo.vi.util.A11yUtility;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",ariaLabel:"",markupString:'<div id="{@id}" role="checkbox" aria-label="{@en@ariaLabel}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click,keydown></div>',markupMethods:{onvisibleChange:E.visibleMarkupMethod,oncheckedChange:function D(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);if(this.domNode){this.domNode.setAttribute("aria-checked",this.checked);}},onenabledChange:E.enabledMarkupMethod},checked:false,onclick:function A(F){this.actionByKeyboard=B.isKeyBoardEvent(F&&F.e);this.set("checked",!this.checked);},onkeydown:function C(F){var H=F.e||F,G=H.key;if(this._super){this._super(F);}if(G==="Enter"||G===" "){H.preventDefault();H.stopPropagation();this.onclick(F);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.color","mstrmojo.models.FormatModel","mstrmojo.Widget","mstrmojo.func","mstrmojo.string");var G=mstrmojo.css,K=mstrmojo.color,D=mstrmojo.models.FormatModel,E=D.ENUM_PROPERTY_NAMES,L=mstrmojo.Widget,B=mstrmojo.func,I=mstrmojo.string;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click,keydown><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}" aria-label="{@en@value}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function F(){return this.domNode.firstChild;},containerNode:function C(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:L.visibleMarkupMethod,onheightChange:L.heightMarkupMethod,onwidthChange:L.widthMarkupMethod,onvalueChange:function H(){this.selectedNode.innerHTML=this.value||"";this.selectedNode.setAttribute("aria-label",I.encodeHtmlString(this.value||"",true));},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",preBuildRendering:function(){if(this.isICS){if(!this.cssTextClass||this.cssTextClass.indexOf(" isICS")<0){this.cssTextClass=(this.cssTextClass||"")+" isICS";var S=this.getPopupWidget();S.isICS=true;S.cssClass=(S.cssClass||"")+" isICS";}if(!this.stateCssText){this.stateCssText={base:{},selected:{}};}var N=this.docSelector||this.parent.docSelector||{},U=N.fmts||{},W=B.safeCall("selectorFormat",N)()||{};var Q=U["s-radius"];if(N.hasChangedFormats()){if(B.safeCall("selectorSelectionColor",N)()!==undefined){var M=D.decodeValue(E.SELECTOR_SELECTION_COLOR,B.safeCall("selectorSelectionColor",N)());U.fillColor=M;if(!this.multiSelect){this.stateCssText.base.bg=this.stateCssText.base.bg||W["s-bg-color"]||"#ffffff";this.stateCssText.base.text=this.stateCssText.base.text||U.color;this.stateCssText.selected.bg=M;this.stateCssText.selected.text=K.getContrastingColor(M);}}var P=(Q||0)/2+5+"px";var O="min("+P+", 1em)";this.stateCssText.base.paddingX=O;this.stateCssText.selected.paddingX=O;}if(this.multiSelect){var R=Q!==undefined?(Q+"px"):"2px";this.popupWidget.list.cssText=G.addCssText(this.popupWidget.list.cssText,{border:"1px solid "+U["s-border-color"],"border-top-left-radius":R,"border-top-right-radius":R});}}if(this._super){return this._super();}},postBuildRendering:function A(){this._super();var Q=this.getPopupList();Q.set("items",this.items);var R=this.selectedIndex,X=this.selectedIndices;if(R!==undefined){this.set("selectedIndex",R);}if(X!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(X||{}));}if(this.enableAccessibility&&this.selectedNode){this.selectedNode.setAttribute("aria-expanded",false);this.selectedNode.setAttribute("aria-controls",Q.id);}var O=this.docSelector||this.parent&&this.parent.docSelector||{};if(this.isICS&&O.hasChangedFormats()){var Y=B.safeCall("selectorFormat",O)()||{},f=O.showAdvancedStyling();var a=Y["s-radius"]||0;if(f){this.selectedNode.style.height="2em";}this.selectedNode.style.paddingTop="0";this.selectedNode.style.paddingRight="max(1em, 20px)";var e=a/2+5+"px";var c="min("+e+", 1em)";this.selectedNode.style.paddingLeft=c;if((!this.text||this.text.trim()==="")&&!f){this.selectedNode.style.setProperty("--mstrd-font-size-no-less-than-15","15px");this.selectedNode.style.lineHeight="normal";}else{var P=parseFloat(getComputedStyle(this.selectedNode).fontSize);this.selectedNode.style.setProperty("--mstrd-font-size-no-less-than-15",Math.max(15,P)+"px");if(P<8){this.selectedNode.style.lineHeight="normal";this.selectedNode.style.paddingTop="2px";}}var S=a!==undefined?(a+"px"):"2px",W=Y["s-bg-color"];G.setElementsStyle([this.selectedNode],{backgroundColor:W,border:"1px solid "+Y["s-border-color"],borderRadius:S});var N=Y["s-width"];if(!this.isEmbedded){if(N===0){this.domNode.style.width="100%";this.domNode.style.maxWidth="100%";}else{if(N>0){this.domNode.style.width=N+"px";this.domNode.style.maxWidth="100%";}}if(f){this.domNode.style.minWidth="unset";}}if(this.multiSelect){G.setElementsStyle([this.popupWidget.domNode],{backgroundColor:W,borderRadius:S});if(Y["s-border-color"]){G.setElementsStyle([this.popupWidget.domNode],{border:"none",boxShadow:"none"});}G.setElementsStyle([this.popupWidget.buttons.domNode],{border:"1px solid "+Y["s-border-color"],borderTop:"none",borderBottomLeftRadius:S,borderBottomRightRadius:S});var d=this.popupWidget.buttons,b=d.cancelBtn.domNode,Z=d.okBtn.domNode;Z.style.borderRadius=S;b.style.borderRadius=S;if(Y.fillColor){var M=d.okBtn.textNode,U=Y.fillColor;Z.style.backgroundColor=U;Z.style.borderColor=U;M.style.backgroundColor=U;M.style.setProperty("color",K.getContrastingColor(U),"important");}}else{G.setElementsStyle([this.list.domNode],{backgroundColor:W,border:"1px solid "+Y["s-border-color"],borderRadius:S});}}if(this.isICS&&!O.hasChangedFormats()&&(!this.text||this.text.trim()==="")){this.selectedNode.style.lineHeight=this.selectedNode.clientHeight+"px";}},onitemsChange:function J(){var M=this.getPopupList();if(M){M.set("items",this.items);}},onPopupWidgetOpened:function(){var M=this.getPopupList();if(M&&(!M.items||M.items.length===0)){M.close();}else{if(this.enableAccessibility){this.selectedNode.setAttribute("aria-expanded","true");}}},onPopupWidgetClosed:function(){if(this.destroyed){return ;}if(this.enableAccessibility){this.selectedNode.setAttribute("aria-expanded","false");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var E=mstrmojo.css,G=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),D=mstrmojo.desc(14059,"Hide Details"),C=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace(/{/g,'<span class="dyn-link">').replace(/}/g,"</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+C+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var J=this.showDetails;this.toggleDetailsNode.innerHTML=J?D:A;E.toggleClass(this.domNode,"show-details",J);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function H(J){this._super(J);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function I(J){var L=J.getTarget(),K,M=this.longDesc;if(L===this.contactNode){K="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(M?("&body="+encodeURI("Detail:\r\n"+M)):"");mstrApp.openPage(K,"_self");}else{if(L===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function B(){this.scrollNode=this.scrollNode;},preBuildRendering:function F(){this._super&&this._super();if(!this.allowHTML){this.longDesc=G.encodeHtmlString(G.decodeHtmlString(this.longDesc),true);}},postBuildRendering:function(){var J=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&E.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&E.addClass(J,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.dom");var L=mstrmojo.color,H=mstrmojo.dom;var I=68.5,M=77.5,D=83;function B(O,N){return{x:O.clientX-N.x-M,y:O.clientY-N.y-M};}function K(){var N=this._hsl[1],P=this._hsl[2];var O=this.slHandleNode.style;O.left=Math.round(D*(0.5-N)+M)+"px";O.top=Math.round(D*(0.5-P)+M)+"px";}function F(){var N=this._hsl[0],P=N*2*Math.PI;var O=this.hueHandleNode.style;O.left=Math.round(Math.sin(P)*I+M)+"px";O.top=Math.round(-Math.cos(P)*I+M)+"px";this.slNode.style.backgroundColor=L.hsl2hex(N,1,0.5);}function C(){this._hsl=L.hex2hsl(this.color);if(this.slHandleNode&&this.hueHandleNode){K.call(this);F.call(this);}}mstrmojo.ui.editors.controls.ColorWheel=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",markupString:'<div id="{@id}" class="mstrmojo-ui-ColorWheel {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="cwHue"></div><div class="cwColorField"></div><div class="cwHandle"><div></div></div><div class="cwHandle"><div></div></div></div>',markupSlots:{slNode:function(){return this.domNode.childNodes[1];},hueHandleNode:function(){return this.domNode.childNodes[2];},slHandleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},slNode:null,hueHandleNode:null,slHandleNode:null,color:"#ffffff",onColorPicked:function G(N){},postBuildRendering:function A(){C.call(this);},oncolorChange:function J(){C.call(this);},onmousedown:function E(Q){var S=this,N=H.position(this.domNode),U=this._hsl,P=Q.e,R=B(P,N),W=Math.max(Math.abs(R.x),Math.abs(R.y))*2>D,O=function(Z){var c=B(Z,N),Y=U[0],a=U[1],b=U[2];if(W){Y=Math.atan2(c.x,-c.y)/(2*Math.PI);if(Y<0){Y+=1;}S._hsl=[Y,a,b];F.call(S);}else{a=Math.max(0,Math.min(1,-(c.x/D)+0.5));b=Math.max(0,Math.min(1,-(c.y/D)+0.5));S._hsl=[Y,a,b];K.call(S);}var X=L.hsl2hex(Y,a,b);S.color=X;S.onColorPicked(X);H.stopPropogation(window,Z);return false;};H.attachMouseMoveEvents(O);O(P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.vi.ui.VizFloatingIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.vi.ui.VizFloatingIcon",markupString:'<div class="hover-btn {@cssClass}" style="{@cssText}" tabindex="-1" role="button" aria-label="{@label}" mstrAttach:click,keydown></div>',init:function C(D){this._super(D);},postBuildRendering:function A(){if(this._super){this._super();}if(this.ariaPopup){this.domNode.setAttribute("aria-haspopup",this.ariaPopup);}},onclick:mstrmojo.emptyFn,getDomNode:function B(){if(!this.hasRendered){this.render();}return this.domNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(X,R){var W=X?[X]:(this.children||[]),O=W.length,S;for(S=O-1;S>-1;S--){var Q=W[S],P=Q&&Q.domNode;if(P){var U=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===U){U.removeChild(P);}}}return this._super(X,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var Y=O&&O.domNode;if(!Y){return ;}var P=this.defaultChildSlot,X=O.slot||P,a=this[X],Q=this.children;if(!a){if(Y.parentNode){Y.parentNode.removeChild(Y);}}else{if(Y.parentNode===a){return ;}if(!this.preserveChildDomOrder){a.appendChild(Y);}else{var R,W;for(W=Q.length-1;W>=0;W--){var Z=Q[W];if(Z===O){break;}if(X===(Z.slot||P)){var b=Z.domNode;if(b&&b.parentNode===a){R=b;}}}if(R){a.insertBefore(Y,R);}else{a.appendChild(Y);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,U;for(U=0;U<S;U++){if(!Q[U].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo.string");var D=mstrmojo.dom,B=mstrmojo.hash,H=mstrmojo.css,K=mstrmojo.string;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",ariaLabel:"",tabIndex:-1,enabled:true,selected:false,markupString:'<div id="{@id}" role="button" aria-label="{@getAriaLabel}" tabindex="{@tabIndex}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup,keydown><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){H.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){H.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;if(!this.ariaLabel){this.domNode.setAttribute("aria-label",this.getAriaLabel());}},onariaLabelChange:function(){this.domNode.setAttribute("aria-label",this.getAriaLabel());},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function F(N){var O=this.domNode;if(this.hasRendered&&O){O.className=O.className.replace(N.valueWas,"")+" "+N.value;}},onclick:mstrmojo.emptyFn,ontouchend:function M(N){this.onclick(N);},onkeydown:function G(N){var P=N.e||N,O=P.key;if(this._super){this._super(N);}if(O==="Enter"||O===" "){P.preventDefault();P.stopPropagation();this.onclick(N);}},grabFocus:function E(N){if(this._super){this._super(N);}if(N){this.domNode.focus();}},getAriaLabel:function C(){return K.encodeHtmlString(this.ariaLabel||this.text,true);}});mstrmojo.Button.newIconButton=function L(P,S,Q,N,R){var O={scriptClass:"mstrmojo.Button",title:P,cssClass:S,text:"",onclick:Q};if(N){O.bindings=N;}B.copy(R,O);return O;};function J(Q,R,N,U){var P=[];if(N){P.push(N);}var S=U&&U.cssClass;if(S){P.push(S);delete U.cssClass;}var O={scriptClass:"mstrmojo.Button",cssClass:P.join(" "),text:Q};if(R){O.onclick=R;}return B.copy(U,O);}mstrmojo.Button.newInteractiveButton=function I(Q,R,U,S){var P={glowClass:"glow"};if(U&&(D.isFF||D.isWK)){B.copy({onmousedown:function N(){H.applyShadow(this.domNode,0,0,10,U);},onmouseup:function O(){H.removeShadow(this.domNode);}},P);}return J(Q,R,"mstrmojo-InteractiveButton",B.copy(S,P));};mstrmojo.Button.newWebButton=function A(O,N,Q,P){return J(O,N,"mstrmojo-WebButton"+(Q?" hot":""),P);};mstrmojo.Button.newActionButton=function(O,P,Q){var N=mstrmojo.Button.newWebButton(O,P,false,Q);N.cssClass+=" action-button";return N;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._RowRendTracker","mstrmojo.array","mstrmojo.dom","mstrmojo.url","mstrmojo.expr","mstrmojo.string","mstrmojo.HTMLSanitizeUtil","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.vi.ui._IsValidURL","mstrmojo.imageUtils","mstrmojo.util.PlatformHelper");var O="<tr>";var i=mstrmojo.dom;var z=['<table role="grid" tabindex="-1" cellspacing="0" cellpadding="0" style="table-layout:',null,";width:",null,';mstr-tablestyle-slot" ',null,">",null,"<tbody>"];var c="&nbsp;";var x="fsbp_1 ";var h="fsbp_2 ";var Y="fsbp_3 ";var u=1,w=2,I=3,s=4,AF=5,a={1:" stack-top",2:" stack-middle",3:" stack-bottom",4:" stack-bottom-last",5:" no-stack",6:" stack-full"},N=1,AB=3;var D=mstrmojo.css,m=mstrmojo.array,AC=mstrmojo.string,X=mstrmojo.chart.model.enums.EnumDSSBaseFormType,j=mstrmojo.expr.TP,n=mstrmojo.expr.DTP,AD=mstrmojo.imageUtils,t=mstrmojo.HTMLSanitizeUtil,W=mstrmojo.util.PlatformHelper;var Q=4,y=j.ATTR;var S="<a data='",k="' href='",J="' target='",d="' rel='noopener noreferrer'>",C="</a>",AG=new RegExp(/<a tabindex="-1" data='([\s\S]*)' href='([\s\S]*)' target='(_blank|_self)'(?: rel='noopener noreferrer')?>([\s\S]*)<\/a>/);var g={dcpp:20,limit:60,dcw:50,tcc:0,curSel:{rows:{},cols:undefined},currColSec:0,isIncremental:false,getPaddingHTML:function o(AI,AK,AJ,AH){AI[1]=AJ;AI[3]=1;AI[5]+=" gd-col-padding ";AI[11]=AK;AI[13]='<div style="width: '+AH+'px">&nbsp;</div>';return AI.join("");},getBeginIndex:function e(){return Math.max(this.currColSec-1,0)*this.dcpp;},getEndIndex:function B(){return Math.min(this.tcc,(this.currColSec+2)*this.dcpp);}};function l(AK,AL,AH){var AJ=true,AI=0;if(AH.cs>1){for(AI=0;AI<AH.cs;AI++){AJ=AJ&&AK[AL+AH.cs-AI-1];}}else{AJ=AK[AL];}return AJ;}function b(AJ,AI){for(var AK=0,AH=AJ.length;AK<AH;AK++){var AM=AJ[AK];var AL=AI.rows[AM.rows].cells[AM.cells];if(AL){mstrmojo.css.addClass(AL,x);}}}function q(AJ){var AL=(AJ||"").search(/src=["|']/i);if(AL<0){return AJ;}var AK=AJ.substring(AL+5),AI=AK.indexOf(AJ.charAt(AL+4)),AM;AK=AK.substring(0,AI);AM=AK;if(W.isLibrary()||W.isWSLiveMode()){AM=mstrmojo.url.getFullPath(AK);}else{var AH=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(AH&&AH.getImage){AM=AH.getImage(AK);}}return AJ.replace(AK,AM);}function AE(AL,AK){var AH="",AM="#srcend",AI=-1,AJ,AN=AL.split("#srcstart");AN.forEach(function(AO){AI=AO.indexOf(AM);AJ=AO.split(AM);AJ.forEach(function(AR,AP){if(AP===0&&AI!==-1){var AS=AR.substring(0,AI);var AT=AC.splitFirst(AS,"#altmarker")[0];var AQ=AC.splitFirst(AS,"#altmarker")[1];if(AK){AT=mstrmojo.url.getFullPath(AT);}AH+=AD.generateImageMarkup(AT,AQ);}else{AH+=AR;}});});return AH;}function G(AJ,AI,AH){var AO=AJ.outLvl,AK="outlineMode",AN=this.parent.outlineState,AM=AJ._ei,AL=AM?(' ei="'+AM+'"'):"";if(AN&&AN[AM]){AK+=AJ.hidden?" hiddenRow":"";}else{if((AH>0&&AO>AH)){AK+=" hiddenRow";}}if(this.parent.hasEmptyTBody&&AK.indexOf("hiddenRow")===-1){this.parent.hasEmptyTBody=false;}return' level="'+AO+'" class="'+AK+'"'+AL+">";}var M=(function(){var AK=/\n/g,AP="<br/>",AU=/<a\s[^>]+>/gi,AT="<a ",Ad='<a target="_blank" ',AI="target=";var AS='<a href="',AQ="",AN="</a>",AJ="<span>",AH="</span>",Aa="<div>",AY="</div>",AW='<span class="text">',AV="</span>",AR='<span rabtn class="raBtn ',AO='"></span>',AX="iconRA-expand",AM="iconRA-collapse",Ac="<span>",Ab="</span>",AZ='<span class="htmlEnc"></span>',AL=function(Ae){return Ae.fnm==="DYNAMICLINK";};return function(Ah,Ak){var Ax=Ak&&Ak.forceNewBrowserWindow,Av=Ak&&Ak.gridId,A2=Ak&&Ak.isServerEncoded,Am=!A2,A1=Ak&&Ak.shouldMaskHtmlMetrics,A7=mstrmojo.all[Av],An=A7.model,A5,A8,A3=Ah.v||Ah.n||c,Ai=Ah.mix!==undefined,Aq=Ah.ts===X.DssBaseFormUrl,Au=Ah.ts===X.DssBaseFormHTMLTag,Al=Ah.isDynamicLink,Aj=A3.toLowerCase().indexOf("<img")>-1,Ay=Ah.isNDE&&Ah.dei===undefined,A0=Ah.lv!==undefined,At=(Ah.ts===X.DssBaseFormText||Ah.mdf===1||(Ah.ts===X.DssBaseFormNumber&&Ah.ti));if(Ay){A5=An.getFullObjectInfo(Ah.id);if(A5){A5=An.getFullObjectInfo(A5.attId);if(A5){if(A5.formType===X.DssBaseFormHTMLTag){Au=true;}else{if(m.filter(A5.fs,AL).length===1){Al=true;Au=true;}}}}}if(Ai){A8=An.getFullMetricInfoFromCell(Ah);At=At||(A8&&A8.dt===n.VARCHAR);if(Ah.axis===undefined&&A8&&A8.mft){Ah.ts=X.DssBaseFormHTMLTag;Au=true;if(A1){A2=true;Am=false;}}}A3=At?A3.replace(AK,AP):A3;if(Au){if(Am&&!Al){A3=t.sanitizeHTMLByDOMPurify(A3,true);}else{if(A2&&!Al){A3=AZ;}else{A3=A3.replace("<a",'<a tabindex="-1"');if(Al){var Ag=AG.exec(A3);if(Ag&&Ag.length>=5){if(this.isValidURL(Ag[2])){A3=[S,AC.encodeHtmlString(Ag[1],true),k,AC.encodeHtmlString(Ag[2],true,true),J,AC.encodeHtmlString(Ag[3],true),d,AC.encodeHtmlString(Ag[4],true),C].join("");}else{A3=AC.encodeHtmlString(Ag[3],true);}}else{A3=AC.encodeHtmlString(A3,true);}}if(Ax){(A3.match(AU)||[]).forEach(function(BA){if(BA.indexOf(AI)===-1){A3=A3.replace(BA,BA.replace(AT,Ad));}});}}}}else{if(Aq){if(!AQ){AQ=Ax?'" target="_blank">':'">';}if(this.isValidURL(A3)){A3=AS+A3+AQ+A3+AN;}}else{if(Ai&&Am&&(Ah.ts===X.DssBaseFormText||Aj)&&A3!==c){A3=t.sanitizeHTMLByDOMPurify(A3,true);}}}if(Aj){var Af=document.createElement("div");Af.innerHTML=A3;var Ar=Af.querySelectorAll("img");m.forEach(Ar,function(BB){BB.onload=function BA(){var BC=mstrmojo.all[Av];if(BC){if(BC._updateScrollbarTimer){clearTimeout(BC._updateScrollbarTimer);}if(BC.updateScrollbars){BC._updateScrollbarTimer=setTimeout(function(){BC.updateScrollbars();},100);}}};});A3=Af.innerHTML;}if((Ah.css&&Ah.css.indexOf("hl")>-1)||Aq){A3=AJ+A3+AH;}if(A0){var A6=Ah.lv,A9="&nbsp;&nbsp;&nbsp;&nbsp;",Ap="",Ae="",Aw="",Az;for(Az=0;Az<A6;Az++){Ap+=A9;}if(Ah.hcd&&Ah.fi===undefined){Aw=AR+(Ah.epd?AM:AX)+AO;}else{Ap+=A9;}if(Ah.axis===1){Ae=Ac+Ap+Ab;}A3=Aa+Ae+Aw+AW+A3+AV+AY;}else{if(Ah.outLvl&&Ah.cs>1&&!Ah.isLeaf){var A4=(Ah.stt===1&&!Ah.dpt),Ao=A4?"":"icon-outline-span"+(Ah.epd?" outline-expand":" outline-collapse"),As=!A4&&Ah.epd?' collapsed="true"':"";A3='<span class="'+Ao+'"  sty="outimg" dpt="'+Ah.outLvl+'"'+As+"></span>"+A3;}else{if(Ah.expandLevel){A3='<span class="icon-outline-span outline-collapse" expandTo="'+Ah.expandLevel+'" title=""></span>'+A3;}else{if(Ah.fillerCell&&A3===c){A3="";}}}}return A3;};}());mstrmojo.GridBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._RowRendTracker,mstrmojo.vi.ui._IsValidURL],{scriptClass:"mstrmojo.GridBase",markupString:'<span id="{@id}" class="mstrmojo-Grid {@cssClass}" style="{@cssText}"></span>',markupSlots:{gridContainerNode:function(){return this.domNode;}},autoFitWindow:false,tableLayout:null,numAutoHeightRows:0,cp:null,rc:0,cc:0,cws:null,rh:null,totalColWidth:0,start:0,end:0,forceFixedSizes:true,hiliteCellsMap:null,eiMap:null,init:function E(AH){this._super(AH);},numColumnCanMerge:0,icr:mstrmojo.hash.clone(g),preBuildRendering:function A(){var AH=this.cp;if(!AH){return ;}AH.initContent();this.rc=AH.rc||0;this.cws=AH.colWidths||[];this.cc=this.cws.length;this.tdWidths=AH.tdWidths||[];this.tdCnt=this.tdWidths?this.tdWidths.length:0;this.start=0;this.end=this.rc-1;this.numAutoHeightRows=AH.getNumAutoHeightRows&&AH.getNumAutoHeightRows()||0;this.hiliteCellsMap={};this.eiMap={};this.posMap=[];this.thPosMap=[];this.totalColWidth=0;},resetICR:function R(){var AH=this.icr.isIncremental;this.icr=mstrmojo.hash.clone(g);this.icr.isIncremental=AH;},buildRendering:function p(AI){var AH=this._super(AI);this.renderGrid();return AH;},renderGrid:function H(AI){var AH=this.getGridContainer();this.resetICR();this.preBuildGridTable();this.buildGridTable(AH,AI);this.postBuildGridTable();},getGridContainer:function L(){return this.gridContainerNode;},buildGridTable:function P(AJ,AH){var AI=this.getTableStartMarkup();var AQ=this.getTableEndMarkup();if(AH){this.mergeHdrsAcrossBlks=true;}var AN=this.buildTableRowsMarkup(this.start,this.end,AI,AQ).join("");if(AH){var AL=document.createElement("div");AL.innerHTML=AN;if(this._zf!==undefined){var AP=AL.getElementsByTagName("img");this.parent.attachLoadEventHandlerToImages(AP,this._zf);delete this._zf;}var AO=AJ.firstChild,AR=AO&&AO.tBodies,AK=AL.firstChild.tBodies[0],AM=this.matchedHdrsAcrossBlks;AO.appendChild(AK);if(AM&&AM.length>0){b(AM,AR[AR.length-2]);}}else{AJ.innerHTML=AN;if(this._zf!==undefined){var AP=AJ.getElementsByTagName("img");this.parent.attachLoadEventHandlerToImages(AP,this._zf);delete this._zf;}}this.markPages(this.start,this.end);},getTableStartMarkup:function F(){var AJ=this._getGridWidths(),AH=z.slice();if(mstrApp.isDossier&&mstrApp.isVI){var AI=this.parent&&this.parent.parent?this.parent.parent.title:"";AH[0]=AH[0].replace("<table",'<table aria-label="'+AC.encodeHtmlString(AI,true)+'"');}AH[1]=AJ.tableLayout;AH[3]=AJ.totalColWidths;AH[5]=this.tableCssClass?"class="+this.tableCssClass:"";AH[7]="<colgroup>"+AJ.colgroup+"</colgroup>";if(this.tbodyStyle){AH[8]='<tbody style="'+this.tbodyStyle+'">';}return AH.join("");},getTableEndMarkup:function U(){return"</tbody></table>";},_getGridWidths:function Z(){var AW={};var AR="",AO=[],AV="fixed",AL=this.cws,AS=AL.length;if(AS){var AQ=this.icr;AQ.tcc=AS;var AI=AQ.getBeginIndex(),AM=this.parent.titlesCP,AN=AM.getSpanDimension(),AK=AN.nCol,AH=AQ.getEndIndex();var AU=function AU(AX){if(!AQ.isIncremental){return true;}if(AX<AK){return true;}if(AX>=AI-1&&AX<=AH){return true;}return false;};AR=0;AO=[];for(var AP=0;AP<AS;AP++){if(AL[AP].w!==""){AR+=parseInt(AL[AP].w,10);}}for(AP=0;AP<AS;AP++){if(AU(AP)){var AJ=AL[AP];if(AJ.w!==""&&!this.autoFitWindow&&!this.autoFitContent){var AT=parseInt(AJ.w,10);if(i.isIE7){if(AT===0){AO.push('<col style="width:0%;display:none"></col>');}else{AO.push('<col style="width:'+(AT/AR*100)+'%"></col>');}}else{if(i.isWK&&AT===0){AO.push('<col style="width:-1px"></col>');}else{AO.push('<col style="width:'+AJ.w+'"></col>');}}}else{AO.push("<col />");AV="auto";}}}this.totalColWidth=AR;}AW.colgroup=AO.join("");AV=this.tableLayout||AV;if(this.autoFitWindow){AV=this.tableLayout||AV||"fixed";AR="100%";}else{if(AV==="fixed"){AR+="px";}else{AR="auto";}}AW.totalColWidths=AR;AW.tableLayout=AV;return AW;},_CELL_MARKUP:['<td tabindex="-1" role="gridcell" rowSpan="',null,'" colSpan="',null,'" class="',null,'" ei="',null,'" style="',null,'" r="',null,'">',null,"</td>"],buildTableRowsMarkup:function K(Ab,A2,AV,AO,AI){var BS=[],A1=0;BS[A1++]=AV||"<table><tbody>";var As=this.cp,BR=this.acws,BW=this.rowMerge,Bl=this.headerOffset,Bm=this.mxPos,Be=!!As.gemh,Bp=As.getRowHeight(),AH=this._CELL_MARKUP,Bn=Bp?'<tr style="height:'+(Bp?Bp+"px":"")+'">':O;var BZ=true,Bj=true,Ax=[],Bs;var BD=function BD(Bu){var Bt=-1;mstrmojo.array.forEach(BR,function(Bw,Bv){Bu-=Bw;if(Bu<0){Bt=Bv;return false;}});return Bt;};var Al=function Al(Bv,Bu){var Bt=-1;mstrmojo.hash.forEach(As.gemh,function(Bw,Bx){if(Bv<=Bx&&Bv+Bu>Bx){Bt=Bx;return false;}});return Bt;};var Aa=function Aa(Bx,By,Bw){var Bv="",Bu,Bt;Bt=Bx.gemh&&Bx.gemh[By];if(Bt){Bu=BD(Bw);if(Bt[Bu]&&Bt[Bu].v===0){Bv+=x;}}Bt=Bx.gsmh&&Bx.gsmh[By];if(Bt){Bu=BD(Bw);if(Bt[Bu]&&Bt[Bu].v===0){Bv+=Y;}}return Bv;};var BX,Ap,BK,Aq=[],A0,Au,AN=0,BA=0,Ay,AW,AM=As.colWidths&&As.colWidths.length,Br=0,BN=0,BH=AI||((AV&&AV.indexOf("table-layout:fixed;")!==-1)?"fixed":"auto"),Ah=mstrApp.isSingleTier,Aw=mstrApp&&(W.isLibrary()||(mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode())),Ad=this.parent,BT=Ad.shouldEncodeHtmlContent(),Ba=Ad.shouldEncodeMetricContent();if(BR&&Be){for(A0=0;A0<BR.length-1;A0++){BN+=BR[A0];}}BN=BN||this.numColumnCanMerge;if(BH==="fixed"){BX=[];for(Ap=0,BK=this.cws.length;Ap<BK;Ap++){if(window.parseFloat(this.cws[Ap].w)<=0){BX[Ap]=true;}else{BX[Ap]=false;}}}this.matchedHdrsAcrossBlks=[];var AQ=A2,Bo=Ad.isOutlineMode,BI=Ad.gridData,Bk=BI.maxLevel,A3=BI.lvlepd,AS=Ad.id,At=0;As.renderingNewPage=true;var AJ=this.icr,Bb=this.parent.titlesCP,BE=Bb.getSpanDimension(),BQ=BE.nCol,BJ=AJ.isIncremental,Af=AJ.currColSec,A4=0,Ak=0,BU=AJ.getBeginIndex(),BF=AM;AJ.tcc=AM;if(BJ){BF=AJ.getEndIndex();var BB=this.columnSecWidth,Aj;for(Aj=BQ;Aj<(Af-1)*AJ.dcpp;Aj++){A4+=BB[Aj];}A4=Math.max(A4,AJ.leftOffset||0);for(Aj=(Af+2)*AJ.dcpp;Aj<AM;Aj++){Ak+=BB[Aj];}if(i.isIE&&AM>10000){if(A4>0){var Bd=this.parent.scrollNode,AT=0;for(Aj=0;Aj<BQ;Aj++){AT+=BB[Aj];}for(Aj=(Af-1)*AJ.dcpp;Aj<Af*AJ.dcpp;Aj++){AT+=BB[Aj];}A4=Bd.scrollLeft-AT;for(Aj=Af*AJ.dcpp;Aj<(Af+2)*AJ.dcpp;Aj++){AT+=BB[Aj];}Ak=Bd.scrollWidth-Bd.scrollLeft-AT;}else{Ak=80000;}}}for(var Av=Ab;Av<=A2;Av++){AN=0;Bs=A1++;BS[Bs]=Av<this.numAutoHeightRows?O:Bn;var AK=As.updateCounter,A5=As.getRowCells(Av);if(Bo&&window.mstrApp&&mstrApp.isExporting){var Ag=As.updateCounter-AK;if(Ag>0){At=Ag;}if(At>0){At--;BS[Bs]=BS[Bs].substr(0,BS[Bs].length-1)+' extra="1">';}}var A9=A2+1-Av;var An=0;AW=BW;Ay="";if(!this.mergeHdrsAcrossBlks){if(BZ&&Ab>0&&A5.length<As.colWidths.length){var BM=As.getUnmergedCells(Ab),BG;if(BM){An=BM.length;}for(A0=0,BK=An;A0<BK;A0++){var BP=BM[A0],Bi=BP.rs;if(Bi>A9){AH[1]=A9;AH[5]=h+BP.css;}else{AH[1]=Bi||1;AH[5]=Y+BP.css;}if(BX&&BX[BA+AN]){AH[5]+=" nwFixedWidth0 ";}if(Bi&&Bi>1){Aq.push(Bi);}AN+=BP.cs||1;if(BP.cet){AH[5]+=" mstrmojo-selected-cell";this.addHilitePosition(BP.cet,Av,A0);}if(BP._ei){this.addExtraInfoMap(BP._ei,Av,A0);AH[5]+=" pt";}AH[9]="";AH[13]=c;AH[3]=BP.cs;if(BP._ei===undefined){BG=As.getRowCells(BP.o+(As.cps[0]&&As.cps[0].rc||0),true);BP=m.filterOne(BG,function(Bt){return Bt.dpt===BP.dpt&&Bt.idx===BP.idx;});}AH[7]=BP._ei;AH[11]=Av;if(Be){if(AW){Ay=Aa(As,Av-Bl,A0);}if(Ay){AH[5]=Ay+AH[5];}else{AW=false;}Ay=Aa(As,Al(Av-Bl,AH[1]),A0);if(Ay){AH[5]=x+AH[5];AW=true;}}BS[A1++]=AH.join("");}BZ=false;}}var Bc=false;var AR=0;Br=AM;BK=A5.length;var A7;for(A7=0;A7<BK;A7++){Br-=A5[A7].cs||1;}for(A7=0;A7<BK;A7++){var Ao=A5[A7],Bh;AR=0;if(BJ){var A8=Br;if(A8>=BQ){if(A8>=BF){break;}if(A8<BU){if(!Bc){BS[A1++]=AJ.getPaddingHTML(AH,Av,Ao.rs||1,A4);Bc=true;}if(A8+(Ao.cs||1)<=BU){Br+=Ao.cs||1;continue;}else{AR=Math.min((Ao.cs||1)-(BU-A8),BF-BU);}}else{if(A8+(Ao.cs||1)>BF){AR=BF-A8;}}}}if(Ao.outLvl){var Bf=G.call(this,Ao,Bk,A3);BS[Bs]=BS[Bs].replace(">",Bf);if(As.updateCounter>0){A2=AQ+As.updateCounter;}}Ao.colIx=Br;if(Ao.rs&&Ao.rs>A9){AH[1]=A9;AH[5]=x+Ao.css;if(Ao._ei){this.addExtraInfoMap(Ao._ei,Av,A7);}}else{AH[1]=Ao.rs||1;AH[5]=Ao.css;}if(BX&&BX[Br]){if(Ao.cs===undefined||l(BX,Br,Ao)){AH[5]+=" nwFixedWidth0 ";}}if(Ao.rs&&Ao.rs>1){Aq.push(Ao.rs);}AN+=Ao.cs||1;if(Ao.rowType!==u){AH[5]+=" xtab-td ";}if(Ao.cet){AH[5]+="sc_"+this.parent.k;this.addHilitePosition(Ao.cet,Av,A7);}if(Ao.lv!==undefined){AH[5]+=" ra ";}Bh=Ao.rowType;if(Bh){AH[5]+=a[Bh]||"";var Ar=As.getRowHeight(Bh);if(Ar){BS[Bs]='<tr style="height:'+(Ar?Ar+"px":"")+'">';}}if(Ao.hcCss){AH[5]+=Ao.hcCss;}AH[3]=AR||Ao.cs||1;AH[7]=Ao._ei!==undefined?Ao._ei:"";if(Ao.fs||Ao._e){this.addTitleHeaderPositionMap(Av,A7+An,Ao);}if(Ao._ei!==null){this.addPositionMap(Ao._ei,Av,A7+An);}AH[11]=Av;var BL=Ao.v&&Ao.v.indexOf("#srcstart")>=0;if(Ao.ts===Q){if(Aw&&!BL){Ao.v=mstrmojo.url.getFullPath(Ao.v);}var BV=Ao.v;if(!AD.isURLValid(BV)){BV="blockedImage";}if(this.imgCacheMap){var Az=this.imgCacheMap,Ae=BV&&BV.replace(/\\/g,"/");if(Az.cachedImg[Ae]){Ao.v=BV=Az.baseURL+Az.cachedImg[Ae];}else{if(Ae&&!Az.unCachedImg[Ae]){Az.unCachedImg[Ae]=Ae;}}}else{var AU=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(AU&&AU.getImage){BV=AU.getImage(BV);}}if(Ao.rowType){var Ac=(As.getRowHeight(Ao.rowType)||As.rh||Bp),Ai=Ac,Bq=this.tdWidths,AY=Ao.colIdx,AP=0,AX=0;var BC=As.getPadding(N),BY=As.getPadding(AB);if(Ao.rowType===u||Ao.rowType===s){AX=Ac>(BC+BY)?(Ac-BC-BY):0;}else{if(Ao.rowType===w||Ao.rowType===I){AX=Ac>2*BY?(Ac-2*BY):0;}else{if(Ao.rowType===AF){AX=Ac>(BY*2)?(Ac-BY*2):0;}}}if(AY!=="undefined"&&AY>-1&&Bq&&Bq.length>AY){var Am=Bq[AY]&&Bq[AY].w;if(Am!=="undefined"){AP=parseInt(Am,10);}}var AL=AP>30?(AP-30):0;AH[13]='<div><div style="top:'+(-parseInt(Ai/2,10))+"px;height:"+(Ac-1)+"px;line-height:"+(Ac-1)+'px !important;">&nbsp;'+AD.generateImageMarkup(BV,Ao.alt,'style="max-height:'+AX+"px; max-width: "+AL+'px;"')+"</div></div>";}else{AH[9]="";var AZ=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model,BO=AZ.getZoomFactor();if(BO!==1){this._zf=BO;}if(Bo){if(BL){Ao.v=AE(BV,Aw);}else{Ao.v=AD.generateImageMarkup(BV,Ao.alt);}AH[13]=M.call(this,Ao,{forceNewBrowserWindow:Ah,gridId:AS,isServerEncoded:BT,shouldMaskHtmlMetrics:Ba});}else{var A6=mstrmojo.hash.clone(Ao);A6.v=AD.generateImageMarkup(BV,Ao.alt);AH[13]=M.call(this,A6,{forceNewBrowserWindow:Ah,gridId:AS,isServerEncoded:BT,shouldMaskHtmlMetrics:Ba});}if(Ao.css&&Ao.css.indexOf("hl")>-1){AH[13]="<span>"+AH[13]+"</span>";}}}else{AH[9]="";if(Bo&&BL){Ao.v=AE(Ao.v,Aw);AH[13]=M.call(this,Ao,{forceNewBrowserWindow:Ah,gridId:AS,isServerEncoded:BT,shouldMaskHtmlMetrics:Ba});}else{if((Aw||mstrApp.useBinaryFormat)&&Ao.v&&Ao.v.indexOf("img")>=0){Ao.v=q.call(this,Ao.v);}AH[13]=M.call(this,Ao,{forceNewBrowserWindow:Ah,gridId:AS,isServerEncoded:BT,shouldMaskHtmlMetrics:Ba});}}if(A7<BN){if(Av===Ab&&this.mergeHdrsAcrossBlks){var Bg=this.rowHdsAcrossBlks;if(Bj&&Ao.v&&Bg&&Bg[A7]){if(Ao.v===Bg[A7].v){AH[1]=Ao.rs||1;AH[5]=Y+Ao.css;AH[13]="";this.matchedHdrsAcrossBlks.push(Bg[A7]);}else{Bj=false;}}}if(Be&&AW){Ay=Aa(As,Av-Bl,Br);if(Ay){AH[5]=Ay+AH[5];if(Ay.indexOf(Y)>=0&&Av-Bl>1){AH[13]=c;}}else{AW=false;}Ay=Aa(As,Al(Av-Bl,AH[1]),Br);if(Ay){AH[5]=x+AH[5];AW=true;}}if(AH[1]>=A9&&Ao.v){Ax.push({rows:Av-Ab,cells:A7,v:Ao.v});}}Br+=Ao.cs||1;BS[A1++]=AH.join("");}if(BJ&&AM>BF){BS[A1++]=AJ.getPaddingHTML(AH,Av,1,Ak);}BS[A1++]="</tr>";for(A7=Aq.length-1;A7>=0;A7--){Au=Aq[A7];if(Au<=1){Aq.pop();}else{Aq[A7]=--Au;}}BA=Aq.length;}BS[A1++]=AO||"</tbody></table>";this.rowHdsAcrossBlks=Ax;return BS;},addHilitePosition:function(AI,AJ,AH){var AK=this.hiliteCellsMap[AI];if(!AK){this.hiliteCellsMap[AI]={pos:[],nodes:[]};}this.hiliteCellsMap[AI].pos.push({row:AJ,cell:AH,page:0});},addExtraInfoMap:function(AI,AH,AJ){if(!this.eiMap[AI]){this.eiMap[AI]=[];}this.eiMap[AI].push({row:AH,cell:AJ,page:0});},addPositionMap:function(AI,AH,AJ){if(!this.posMap[AI]){this.posMap[AI]={row:AH,cell:AJ,page:0};}},addTitleHeaderPositionMap:function(AH,AJ,AI){this.thPosMap.push({row:AH,cell:AJ,page:0,obj:AI});},clearHilites:function(AK){var AO=this.hiliteCellsMap[AK],AM=AO&&AO.nodes,AL=this.parent;if(AM){if(AM.length===0&&AO.pos){AM=this.getNodesByPositions(AO.pos);}for(var AJ=0,AI=AM.length;AJ<AI;AJ++){var AN=AM[AJ],AH=AL.getCellForNode(AN);if(AH){delete AH.cet;}D.removeClass(AN,"sc_"+AL.k);}this.hiliteCellsMap[AK].nodes=[];}},setHilites:function(AI,AJ){D.addClass(AJ,"sc_"+this.parent.k);if(!this.hiliteCellsMap[AI]){this.hiliteCellsMap[AI]={pos:[],nodes:[]};}this.hiliteCellsMap[AI].nodes.push(AJ);var AH=this.parent.getCellForNode(AJ);if(AH){AH.cet=AI;}},getNodesByPositions:function(AL){var AK=this.tableNode,AH=[];for(var AJ in AL){var AI=AL[AJ];AH.push(AK.tBodies[0].rows[AI.row].cells[AI.cell]);}return AH;},preBuildGridTable:function f(){},postBuildGridTable:function AA(){this.addSlots({tableNode:this.gridContainerNode&&this.gridContainerNode.firstChild});if(this.tableNode&&mstrApp&&mstrApp.isSingleTier){i.redirectUrlToFormWrapper(this.tableNode);}}});mstrmojo.GridBase.ColRenderSetting=g;})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.url");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image class="{@imgCssClass}" src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||mstrmojo.url.getPlaceholderImageURL();}},onaltChange:function(){var C=this.imgNode;if(C&&this.alt){C.alt=this.alt;}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",alt:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup");function D(L){return(typeof L==="function"&&(L.prototype&&!!L.prototype.isReactComponent));}mstrmojo.RenderProxy=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasMarkup],{scriptClass:"mstrmojo.RenderProxy",markupString:'<div id="{@id}"></div>',markupSlots:{containerNode:function E(){return this.domNode;}},componentInstance:null,component:null,funcComponent:null,descriptors:null,init:function K(L){this.descriptors=L.descriptors;delete L.descriptors;this._super(L);this.getComponentByName(L);this.setComponentDescriptors(L);this.childElements=L.childElements||[];},updateProps:function(M,L){if(this.component&&this.component.updateProps){this.component.updateProps(M,L);}},updateNetworkStatus:function C(L){if(this.component&&this.component.updateNetworkStatus){this.component.updateNetworkStatus(L);this.renderReactComponent();}},postBuildRendering:function B(){this._super();this.renderReactComponent();},renderReactComponent:function J(){if(!this.domNode){return ;}if(this.component){var L=this.component.render();this.componentInstance=ReactDOM.render(L,this.domNode);}else{if(this.funcComponent){this.componentInstance=ReactDOM.render(React.createElement(this.funcComponent,this.props),this.domNode)||{};}}},updateFuncReactComponent:function F(L){if(L){for(var M in L){if(this.props.hasOwnProperty(M)){this.props[M]=L[M];}}}this.renderReactComponent();},unrender:function G(L){if(!L){this.unrenderComponent();}this._super(L);},unrenderComponent:function H(){if((this.domNode&&this.componentInstance)||(this.domNode&&this.unrenderWithDomNode)){ReactDOM.unmountComponentAtNode(this.domNode);this.componentInstance=null;}},getComponentByName:function I(L){if(window.ReactComponents){if(D(window.ReactComponents[L.name])){this.component=new ReactComponents[L.name](L);this.props=L;}else{this.funcComponent=window.ReactComponents[L.name];this.props=L;}}},setComponentDescriptors:function A(M){var L=mstrmojo.hash.walk("ReactComponent.Descriptors."+M.name,mstrApp);var N=mstrmojo.hash.walk("ReactComponent.ConsumptionDescriptors."+M.name,mstrApp);if(!L&&window.ReactComponents&&window.ReactComponents.Descriptors){if(Object.prototype.hasOwnProperty.call(ReactComponents.Descriptors,M.name)){ReactComponents.Descriptors[M.name]=this.descriptors;}}if(!N&&window.ReactComponents&&window.ReactComponents.ConsumptionDescriptors){if(Object.prototype.hasOwnProperty.call(ReactComponents.ConsumptionDescriptors,M.name)){ReactComponents.ConsumptionDescriptors[M.name]=this.descriptors;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui.theme","mstrmojo.dom");function W(n,p){if(!mstrmojo.DocInfoWindow){return ;}var o=n;while(o){if(o instanceof mstrmojo.DocInfoWindow){o[p?"registerScrollLock":"releaseScrollLock"](this);break;}o=o.parent;}}var Y=mstrmojo.array,L=mstrmojo.dom,M=mstrmojo.hash,E=mstrmojo.css,f="px",i=mstrmojo.ui._HasUITheme.EnumThemeNames;var H=false;function J(n,p){if(!mstrmojo.DocInfoWindow){return ;}var o=n;while(o){if(o instanceof mstrmojo.DocInfoWindow){o[p?"registerLock":"releaseLock"](this);this.lockIW=p?o:null;break;}o=o.parent;}}var B=mstrmojo.ui.PopupConfig,S=B.directionCfg,K=B.ENUM_CORNERS,h=K.TOP_LEFT,l=K.TOP_RIGHT,Z=K.BOTTOM_RIGHT,c=K.BOTTOM_LEFT,j=mstrmojo.Enum_Keys;function G(n){return(n===c||n===h);}function a(n){return(n===l||n===Z);}function m(n){return(n===Z||n===c);}function D(n){return(n===l||n===h);}function I(x,p,AG,AM){var AP=AG.x,AO=AG.y,AL=AG.w||0,AA=AG.h||0,o=AM.w,AH=AM.h,AK=x.alignment,u=AK.popup,s=AK.host,AN=a(s),AQ=m(s),AD=a(u),AJ=false,AE=false,q=false,AF=false,t=false,AB=false,AI=L.isMobile,y=mstrmojo.ui.PopupConfig.directionCfg;if(G(u)||x.flexibleWidth){var w=AP+o+(AN?AL:0);if(x.flexibleWidth){if(AD&&AN){w=AP+AL;}else{if(AD&&!AN){w=AP;}else{if(!AD&&AN){w=AP+o+AL;}else{if(!AD&&!AN){w=AP+o;}}}}}AJ=p.w<w;t=AI&&(AJ||y.isRightToLeft());}if(D(u)){var AC=AO+AH+(AQ?AA:0);AE=p.h<AC;AB=AI&&AE;}if(AD||t){var z=AP-o+((AN&&!t)?AL:0);q=z<0;}if(m(u)||AB){var n=AO-AH+((AQ&&!AB)?AA:0);AF=n<0;}return{top:AF,bottom:AE,left:q,right:AJ};}function O(o){var n=this.popupConfig;if(n){M.forEach(n.popupHandlers,function(q,s){var p=q[o?"open":"close"];if(p){p.call(mstrmojo.all[s]||p,!!o);}});}}function U(o){var n=this.popupConfig;if(n&&!n.isHostedWithin){var p=this.hostProxy;if(p){p.style.display=o?"":"none";}}}function X(n){return n!==undefined&&n!==null&&!isNaN(n);}function Q(o){if(!o||!o.className){return false;}var n=/^CSS_MAPBOX_/;return n.test(o.className);}function F(){return mstrApp&&mstrApp.isNativeEmbedded;}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,canAdjustTop:true,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,enableAccessibility:false,open:function R(p,n){O.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(n,p);}else{M.forEach(n,function(t,s){this.set(s,t);},this);}var o="popup-mid-render";this.set("opener",p);if(!this.hasRendered){var q=this.visible;this.visible=false;this.render();E.addClass(this.domNode,o);this.set("visible",q);}if(this.nudge){this.domNode.style.top="-10000px";}U.call(this,true);this.set("visible",true);if(this.lockIWForScroll){W.call(this,this.opener,true);}if(n&&n.lockIW){J.call(this,n.lockIW,true);}if(n&&n.closeCallback){this.__closeCallback=n.closeCallback;}if(this.nudge){this.nudge();}if(this.adjustSize){this.adjustSize();}this.adjustCornersForPopupOverflow();this.onOpen();E.removeClass(this.domNode,o);},adjustCornersForPopupOverflow:function k(){var z=this.popupConfig,AC=this;if(!z){return false;}var Ah=(z.includeScroll!==undefined)?z.includeScroll:true,AL=z.alignment,AJ=z.ENUM_CORNERS,Av=AJ.BOTTOM_LEFT,AY=AJ.BOTTOM_RIGHT,o=AJ.TOP_RIGHT,AQ=AJ.TOP_LEFT;var t=z.anchorElement||z.hostElement,q=z.position||L.position(t,Ah),AK=t&&t.style&&t.style.zIndex||z.zIndex;if(!z.isHostedWithin){var Ap=this.hostProxy,Ag=this.hostProxy=document.createElement("div");if(F()&&mstrApp.popupContainer){mstrApp.popupContainer.appendChild(Ag);}else{document.body.appendChild(Ag);}Ag.appendChild(this.domNode);if(F()&&Q(this.itemsNode)){if(q&&typeof q.y==="number"){q.y-=(this.domNode.offsetHeight+21);}}if(Ap){Ap.parentNode.removeChild(Ap);}var AW=Ag.style,AX={x:"left",y:"top",w:"width"};Ag.className=z.hostProxyCssClass;AW.position="absolute";AW.background="none";E.addClass(Ag,"mstrmojo-popup-widget-hosted");AW.height="0";Y.forEach(["x","y","w"],function(Ay){var Ax=q[Ay];if(z.flexibleWidth){if(Ay==="w"){Ax=AC.domNode.offsetWidth||Ax;}else{if(Ay==="x"&&AL.host===AY&&AL.popup===o){Ax=Ax+q.w-AC.domNode.offsetWidth;}}}if(X(Ax)){AW[AX[Ay]]=Ax+f;}});this.adjustPopupPosInMobile(q,AW);}var x=z.isStaticAnchor?L.windowDim():L.position(document.body),Aa=L.position(this.domNode),Ak=I(z,x,q,Aa),w=Ak.right,AI=Ak.bottom,Aw=Ak.left,Af=Ak.top,AV=AL.popup,p=AL.host,AD=AV,AH=p,AZ=L.isMobile,AG=t&&t.classList&&t.classList.contains("mstrmojo-ui-Menu-item"),Ab=this.id,AE=t&&t.parentNode,Ad=AE&&AE.parentElement,AU=t||this.domNode,AR,Aq=this.domNode.style;if(Ad&&Ad.classList.contains("mstrmojo-ui-Menu")){AU=Ad;}AR=L.position(AU);if(AG&&((Aw&&w)||(Af&&AI))){if(Ad){Aq.top=AR.y+"px";Aq.left=AR.x+"px";var Ao=document.getElementsByClassName("mstrmojo-ui-Menu");Y.forEach(Ao,function(Ax){if(Ab!==Ax.id){Ax.style.visibility="hidden";}});}z.anchorElement=AU;z.position={h:0,w:0,x:(AR.x+Aa.w)>x.w?Math.min(AR.x,5):AR.x,y:(AR.y+Aa.h)>x.h?Math.min(AR.y,90):AR.y};this.adjustCornersForPopupOverflow();return ;}if(S.isRightToLeft()&&(!AZ||Aa.w>0)){if(!AZ||!Aw){w=true;}else{if(!AZ||!w){S.setDirection(false);this.resetDirection=true;if(AZ){AH=(AH===o)?AQ:Av;}}}}else{if(w){S.setDirection(true);this.resetDirection=true;}}if(w||Aw){if(G(AH)){AH=D(AH)?o:AY;}else{if(a(AH)){AH=D(AH)?AQ:Av;}}if(w&&G(AD)){AD=D(AD)?o:AY;}else{if(Aw&&a(AD)){AD=D(AD)?AQ:Av;}}}if(AI||Af){if(G(AH)){AH=D(AH)?Av:AQ;}else{if(a(AH)){AH=D(AH)?AY:o;}}if(AI&&D(AD)){AD=G(AD)?Av:AY;}else{if(Af&&m(AD)){AD=G(AD)?AQ:o;}}}if(Af||w||AI||Aw){if(H){console.log("Overflow directions: "+JSON.stringify(Ak));}this._orgalgn={host:p,popup:AV};z.setAlignment(AH,AD);if(z.flexibleWidth&&G(AH)&&a(AD)){AW.left=q.x+f;}}if(!z.isHostedWithin){if(X(q.y)&&X(q.h)){this.hostProxy.style.top=(q.y+(m(AD)?(z.alignWithAnchor===true?q.h:0):(z.alignWithAnchor===true?0:q.h)))+f;this.hostProxy.style.zIndex=(X(AK)&&(AK>100))?AK+1:101;}}var Ae,As={};if(z.isHostedWithin&&!!this.opener){Ae=E.getComputedStyle(this.opener.domNode);}Y.forEach(["left","right","top","bottom"],function(Ax){As[Ax]=Ae?parseInt(Ae["border-"+Ax+"-width"]||0,10):0;});var Am=m(AH),An=a(AH),AB=m(AD),u=a(AD),Ai=function(Ay,Ax){return"calc(100% + "+(Ax?As[Ay]:0)+"px)";},AF=function(Ay,Ax){return(Ax?-As[Ay]:0)+"px";};var y,Aj,n,s;y=Aj=n=s="auto";if(AB){n=Am?AF("top"):Ai("top");}else{y=Am?Ai("bottom"):AF("bottom");}if(u){Aj=An?AF("left"):Ai("left");}else{s=An?Ai("right"):AF("right");}Aq.top=y;Aq.right=Aj;Aq.bottom=n;Aq.left=q.isAndroidMobile?0+f:s;var AA=L.position(this.domNode),AT=5;if(AI||Af){var At=AA.y,AP=L.getMaxScrollHeight(),AM=AP+"px",Ar=this.scrollNode,AN=Ar&&Ar.style.maxHeight,AS,Ac=z.handleVerticalOverflow;if((At<0||(At+AA.h>x.h))&&!F()){if(Ar&&AM!==AN){if(this.getPulldownConfig){AS=this.getPulldownConfig(AP,AR);}Ar.style.maxHeight=AS?AS.maxHeight+f:AM;this.updateScrollbars();}var Al=(-q.y+AT)+f;if(!z.isHostedWithin){if(this.hostProxy){this.hostProxy.style.top=0;}Al=AT+f;}if(this.canAdjustTop){Aq.top=AS?AS.position+f:Al;}Aq.bottom="auto";}else{if(Ac){Ac.call(this,AA,AP,Af);}}}if(Aw||w){var Au=AA.x;if(Au<0||(Au+AA.w>x.w)){var AO=(-q.x+AT)+f;if(!z.isHostedWithin){if(this.hostProxy){this.hostProxy.style.left=0;}AO=AT+f;}Aq.left=AO;Aq.right="auto";}}this.currentPopupConfig=z;return true;},adjustPopupPosInMobile:function d(x,q){if(x.isAndroidMobile&&x.interval&&x.boundingRect&&x.widgetRect){var p=x.interval,o=x.boundingRect,n=x.widgetRect,u=L.position(this.domNode),z=10,t=0,y=0;if((o.topLeft.x===0)&&(o.topLeft.y===0)&&(o.bottomRight.x===0)&&(o.bottomRight.y===0)){t=n.x;y=(n.h-u.h)/2+n.y;}else{if(u.w<p.left-z){t=o.topLeft.x-u.w-z;y=o.topLeft.y;}else{if(u.w<p.right-z){t=o.bottomRight.x+z;y=o.topLeft.y;}else{if(u.h<p.top-z){t=o.topLeft.x;y=o.topLeft.y-u.h-z;}else{if(u.h<p.bottom-z){t=o.topLeft.x;y=o.bottomRight.y+z;}else{t=o.topLeft.x;y=o.topLeft.y+(o.bottomRight.y-o.topLeft.y-u.h)/2;}}}}}var s=window.innerWidth,w=window.innerHeight;t=Math.min(Math.max(0,t),s-u.w);y=Math.min(Math.max(0,y),w-u.h);q.left=t+f;q.top=y+f;}},close:function e(o){if(this.keepOpen){return ;}if(this.onClose){this.onClose(o);}U.call(this,false);if(this.lockIWForScroll){W.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){J.call(this,this.lockIW,false);}O.call(this,false);var n=this._orgalgn;if(n){this.popupConfig.setAlignment(n.host,n.popup);}if(this.resetDirection){this.resetDirection=false;S.setDirection(false);}if(this.__closeCallback){this.__closeCallback();delete this.__closeCallback;}},preBuildRendering:function A(o){this._super(o);var s=this.popupConfig;if(s&&!s.isHostedWithin){var n=s.hostProxyCssClass.split(" "),q=false;Y.forEach(M.keyarray(i),function(t){if(n.indexOf(i[t])>=0){q=true;return false;}});if(!(q||s.noInheritTheme)){var p=mstrmojo.vi.ui.theme.getThemeClass.call(this);if(p){n.push(p);}}s.hostProxyCssClass=n.join(" ");}},buildRendering:function b(){var n=this._super();if(n){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return n;},postBuildRendering:function P(){var n=this,o=this.popupConfig;if(o&&!this._ListenerProc){this._ListenerProc=function(){n.monitorWindow();};L.attachEvent(window,"resize",this._ListenerProc);}this._super();},onkeydown:function N(n){var o;if(this._super){o=this._super(n);}if(this.enableAccessibility){var q=n&&n.e,p=q&&q.keyCode;if(p===j.ESCAPE){this.close();q.stopPropagation();}}return o;},monitorWindow:function(){var p=L.getMaxScrollHeight(),n=window.orientation||M.walk("screen.orientation.angle",window);if(this.updateScrollbars&&this.scrollNode){this.scrollNode.style.maxHeight=(this.scrollNodeMaxHeight||p)+"px";this.updateScrollbars();}if(this.orientationAngle!==undefined&&this.orientationAngle!==n){this.close();}if(this.visible){var o=this,q=null;window.clearTimeout(q);q=window.setTimeout(function(){if(o.scrollNode&&o.scrollNode.style){o.scrollNode.style.maxHeight=(o.scrollNodeMaxHeight||p)+f;o.adjustCornersForPopupOverflow();}},175);}},destroy:function g(n){if(this._ListenerProc){L.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(n);},unrender:function C(n){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){this.hostProxy.remove();delete this.hostProxy;}this._super(n);}};}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"maxLength",this.maxLengthField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Model","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.taphold","mstrmojo.array","mstrmojo.dom");var E=mstrmojo.dom,C=mstrmojo.string,R=E.isIOSTouch,X=mstrmojo.css,M=mstrmojo.array;var O=1,D=2,K=4,a=8,Z=16,L=512,N=-1;function Q(h,c){var g=h.getCellForNode(c),b=g&&g.at,f=0;if(b){f=(b&D)||(b&K)||(b&O);}if(f===K){var k=h.model.getCellLinksInfo(g);if(!k||isNaN(k.di)){return"";}var j=k.links[k.di];return j.n;}if(f===O){var i=h.model.getCellDrillsInfo(g);if(i){return mstrmojo.desc(183,"Drill to")+" "+i.n;}}if(g){var d=("mix" in g)?g._e:g;if(d&&d.desc){return C.decodeHtmlString(d.desc);}}return"";}function B(c,g){if(!mstrApp.isExpress){return[];}if(!c.onDemandDrillDynamicItems){c.onDemandDrillDynamicItems={};}var f="drill"+g,b=c.onDemandDrillDynamicItems[f]||[];if(b.length===0&&c.gridData.odd){c.loadingDCM=true;var e=new mstrmojo.SimpleXHR({async:false});e.request("POST",mstrConfig.taskURL,{success:function d(h){M.forEach(h.dynamicMenus,function(i){c.onDemandDrillDynamicItems[i.n]=i.items;if(i.n===f){b=i.items;}});c.onDemandDrillItems=h.menuItems;delete c.loadingDCM;}},{taskId:"RWOnDemandDrill",styleName:"OndemandDrillContextMenusStyle",viewMode:1,usePartDisplay:1,docGridKey:c.k,rwb:c.model.docModel.bs});}return b;}function J(k,c){var i=k.getCellForNode(c),b=i&&i.at;if((b&a)>0||(b&Z)>0||(b&L)>0||(i&&i.otp===N)){return true;}var g,e;if(i){g=k.model.getCellTitleInfo(i);e=B(k,g.title.id);}var d=0;if((b&O)>0&&i.sdm===undefined&&(e.length>0||k.model.getCellDrillsInfo(i))){return true;}if((b&K)>0){d++;}if((b&D)>0){d++;}if(d>1){return true;}if((b&K)>0){var l=k.model.getCellLinksInfo(i),j=l&&l.links,h=i.v?C.decodeHtmlString(i.v):i.v;var f=(j&&j.length)||0;if(l&&!isNaN(l.di)&&!C.isEmpty(h)){f--;}if(f>0){return true;}}return false;}function I(b){return b.viewport.clientWidth-(b.scrollboxNode.offsetWidth-b.scrollboxNode.clientWidth);}mstrmojo._XtabCellHoverMgr=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo._XtabCellHoverMgr",parent:null,td:null,audibles:{"*":false},startup:function F(){var c=this.parent;if(c&&c.getCellForNode){var b=c.zones,d;for(d in b){this.addMgrElement(d);}if(!this._sub_ihc){this._sub_ihc=c.attachEventListener("ignoreHoverChange",this.id,"onChangeIgnoreHover");}window.setTimeout(function(){c._pl=I(c);},0);}},addMgrElement:function U(d){var g=this.parent,f=this,h=d===undefined?g.contentNode:g.zones[d].tableNode;if(h&&g&&g.getCellForNode){if(!this.fCtxMenu){this.fCtxMenu=function(i){f.oncontextmenu(i,self);};}if(!this.fOver){this.fOver=function(i){f.onhover(i,self);};}if(!this.fOut){this.fOut=function(i){f.onunhover(i,self);};}var e=this.fCtxMenu,c=this.fOver,b=this.fOut;if(!E.isTouchOptimizationEnabled()){E.attachEvent(h,"mouseover",c);E.attachEvent(h,"mouseout",b);E.attachEvent(h,"contextmenu",e);if(R){this.xtabContextMenuListener=g.attachEventListener("contextmenu",h.id,e);g.hasContextMenuEvent=true;}}else{X.addClass(document.body,"touch-device");}}},shutdown:function A(){var d=this.parent,c=d&&d.zones,e;if(!E.isTouchOptimizationEnabled()){for(e in c){var b=c[e].tableNode;if(b){E.detachEvent(b,"mouseover",this.fOver);E.detachEvent(b,"mouseout",this.fOut);E.detachEvent(b,"contextmenu",this.fCtxMenu);}}if(R&&d&&this.xtabContextMenuListener){d.detachEventListener(this.xtabContextMenuListener);d.hasContextMenuEvent=false;}}},onXtabWidthChanged:function(){var b=this.parent;b._pl=I(b);},onChangeIgnoreHover:function(){var b=this.parent;if(!b.ignoreHover&&this._ignored){this.onhover(null,null,this._ignored);}},onhover:function G(g,b,f){if(this.parent.ignoreHover){this._ignored=E.eventTarget(b,g);return ;}var d=this.parent,h=this.getEvtTargetCell(g,b,d,f);if(h&&d){var c=Q(d,h);if(c){h.title=c;}}if(this.showHvrBtn(d,h)){this.td=h;if(!d._pl){d._pl=I(d);}d.openPopup("cellHoverPopupRef",{xtab:d,td:h});}else{this.onunhover(g,b,f);}},onunhover:function P(){if(this.parent.ignoreHover){return ;}var c=this.parent,b=c._lastOpened;if(!b){return ;}if(b.autoCloses){b.autoClose();}else{c.closePopup();}},getEvtTargetCell:function H(g,b,f,d){var c=d||E.eventTarget(b,g);return c&&E.findAncestorByName(c,"td",true,f.viewport);},oncontextmenu:function S(h,b,g){var f=this.parent,j=this.getEvtTargetCell(h,b,f,g);this.processRightClick(h,b,j);if(j&&this.shouldShowPopup(f,j,true)){if(!(E.isMetaKey(b,h)||E.shiftKey(b,h))||(E.shiftKey(b,h)&&h.keyCode===121)){var d=E.getMousePosition(h,b);f.openPopup("cellHoverPopupRef",{xtab:f,td:j,cmPos:d});if(f.hasAccessibility&&!d.x&&!d.y){var c=h.target;var c=h.srcElement;var i=c.getBoundingClientRect();d.x=i.left+i.width/2;d.y=i.top+i.height/2;}f.cellHoverPopupRef.btn.openPopup();if(f.tooltipWin){f.tooltipWin.hide(true);}}f.closePopup();E.preventDefault(b,h);E.stopPropogation(b,h);return true;}return false;},processRightClick:mstrmojo.emptyFn,shouldShowPopup:function Y(e,f,d){var c=f.mstrShowPopup;if(c!==undefined){return c;}c=J(e,f);f.mstrShowPopup=c;return c;},showHvrBtn:function W(b,c){if(mstrApp.isDossier||mstrApp.isVI){return false;}return this.shouldShowPopup(b,c,false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.date");var A=mstrmojo.date;mstrmojo.DateStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.DateStepperContentProvider",curVal:null,init:function(F){this._super(F);var G=this.item,E=G[this.intField],I=G[this.valField],H=this.minField,D=this.maxField,C=G[H],B=G[D];this.min=C&&A.getDateFromDateInfo(C);this.max=B&&A.getDateFromDateInfo(B);this.curVal=I?A.getDateFromDateInfo(I):(this.min?new Date(this.min):new Date());this.createChildProviders();},createChildProviders:function(){var B=this;mstrmojo.array.forEach(["year","month","day"],function(C){B[C+"CP"]=new mstrmojo.NumStepperContentProvider({item:{interval:1},canLoop:true,updateConfig:function(E,D,F){this.curVal=E;this.max=D;this.min=F;},onTraverse:function(){B.traverse(C,this.curVal);}});});this.updateChildProviders();},updateChildProviders:function(){var I=this.max,D=this.min,G=this.curVal.getFullYear(),F=this.curVal.getMonth(),H=this.curVal.getDate(),C=I&&(G===I.getFullYear()),E=D&&(G===D.getFullYear()),J=C&&(F===I.getMonth()),B=E&&(F===D.getMonth());this.yearCP.updateConfig(G,I?I.getFullYear():null,D?D.getFullYear():null);this.monthCP.updateConfig(F+1,C?I.getMonth()+1:12,E?D.getMonth()+1:1);this.dayCP.updateConfig(H,J?I.getDate():mstrmojo.date.getDaysOfMonth(G,F+1),B?D.getDate():1);},traverse:function(E,D){var C=this.curVal,G=(E==="year")?D:this.curVal.getFullYear(),B=(E==="month")?D:this.curVal.getMonth()+1,F=(E==="day")?D:this.curVal.getDate();F=Math.min(mstrmojo.date.getDaysOfMonth(G,B),F);C.setFullYear(G,B-1,F);if(this.max){C=Math.min(this.max,C);}if(this.min){C=Math.max(this.min,C);}this.curVal=new Date(C);this.updateChildProviders();if(this.onTraverse){this.onTraverse();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.num","mstrmojo.array");var A=mstrmojo.num,E=mstrmojo.array;var C="?";function B(H,G){var J=G?H.max:H.min,F=G?H.min:H.max,I=H.getValGroup(G?1:-1);return(J===null||(G?(I.every(function(K){return K<=J;})):(I.every(function(K){return K>=J;})))||(F!==null&&H.canLoop));}function D(I,H){var G=I.min,F=I.max,J=I.getValGroup(H?1:-1)||[];if((H&&F!==null&&J.some(function(K){return K>F;})||(!H&&G!==null&&J.some(function(K){return K<G;})))){if(I.canLoop){J.forEach(function(L,K){L=((L-G)%(F-G+1))+G;L=(L>=G)?L:L+(F-G+1);J[K]=L;});}else{return ;}}I.item[I.valField]=I.curValGroup=J;I.onTraverse();}mstrmojo.NumGroupStepperContentProvider=mstrmojo.declare(mstrmojo.NumStepperContentProvider,null,{scriptClass:"mstrmojo.NumGroupStepperContentProvider",curValGroup:null,init:function(F){this._super(F);},_initCurrent:function(){var H=this.item,F=this.curValGroup=H[this.valField];if(F===null||F===undefined){var G=this.min;this.curValGroup=G!==null?[G]:0;}this.curValGroup=E.ensureArray(this.curValGroup);},next:function(){D(this,true);},prev:function(){D(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},getValGroup:function(I){var F=this.curValGroup,G=this.interval,H=[];(F||[]).forEach(function(K,J){H[J]=F[J]+(G*(I||0));});return H;},getVal:function(){var F=null;(this.curValGroup||[]).forEach(function(G){if(F===null){F=G;}else{if(F!==C&&G!==F){F=C;}}});return F;},setVal:function(H){var I=this.min,G=this.max,F=this.curValGroup;if(typeof H!=="number"||isNaN(H)||A.inNumericRange(H,I,G)!==0){return ;}(F||[]).forEach(function(K,J){F[J]=H;});this.onTraverse();},_set_curValGroup:function(J,I){var H=this.min,G=this.max,F=this.getValGroup();if(I.some(function(K){return typeof K!=="number";})||I.some(function(K){return isNaN(K);})||I.every(function(L,K){return L===F[K];})||I.every(function(K){return A.inNumericRange(K,H,G)!==0;})){return false;}this.item[this.valField]=this.curValGroup=I;return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var M=mstrmojo.boxmodel,J=mstrmojo.dom,N=mstrmojo.css,P="mstrmojo-Tooltip",A="mstrmojo-scrollNode",F=20,B=13;function D(U,W,S){var X="connectScrollbox";if(S){X="dis"+X;}var R=U&&U.parent;while(R){if(R[X]){R[X](W);}R=R.parent;}}function H(){if(!this._paintHandle){var S=this.id,R=function(Y){var c=mstrmojo.all[S];if(!c){return ;}delete c._paintHandle;var W=[P],d=c.cssClass;if(d){W.push(d);}var U=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),a=c.opener;if(a&&a.getTooltipThemeClass){U=a.getTooltipThemeClass();}W.push(U);c.domNode.className=W.join(" ");var b=c.content,X=c.contentNode,Z=c.arrowNode;X.className=(P+"-content "+A+" "+c.contentNodeCssClass);X.style.cssText=c.contentNodeCssText;if(!c.hasWidgetContent){X.innerHTML=b;J.recursiveReplaceInlineEventListeners(X,false,c);}Z.style.cssText="";c.domNode.style.visibility=b?"visible":"hidden";c.updatePosition();if(!Y&&c.optimizePos){c.optimizePos();}c.updateScrollbars();c.addScrollNodeProperties();};if(!this._hasPaint){R(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(R,0);}}}function C(Y,i,n,Z){var c=i&&(i.richTooltip||i.tooltip),q=n?J.getMousePosition(n,Z||self):null,h=c&&(typeof c==="string");var o="",f="",b="",l=c,g=null,R=false,d=null,U=mstrmojo.tooltip.POS_TOPLEFT,W=null,j=null,S=null,p=false,X=null,a=mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;var k=false,m=false;if(c&&!h){f=c.cssClass||f;o=c.contentNodeCssClass||o;b=c.contentNodeCssText||b;l=c.content||"";g=c.eventHandlerMap;d=c.refNode||d;R=!!c.offsetAlgo;U=c.posType||U;W=c.left||0;j=c.top||0;k=c.keepArrowXPos||k;m=c.keepArrowYPos||m;S=c.updatePosition||null;p=c.hasWidgetContent;X=c.children;a=c.tooltipCloseDelay||mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;}Y.set("contentNodeCssClass",o);Y.set("cssClass",f);Y.set("contentNodeCssText",b);Y.set("content",l);Y.set("eventHandlerMap",g);Y.set("refNode",d);Y.set("offsetAlgo",R);Y.set("posType",U);Y.set("left",h?((q&&q.x)||Y.left):W);Y.set("top",(h||!c)?((q&&(q.y+F))||Y.top):j);Y.set("keepArrowXPos",k);Y.set("keepArrowYPos",m);if(S){Y.set("updatePosition",S);}else{Y.set("updatePosition",mstrmojo.Tooltip.prototype.updatePosition);}Y.set("hasWidgetContent",p);Y.set("children",X);Y.set("tooltipCloseDelay",a);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",allowOtherTooltips:false,markupString:'<div id="{@id}" class="'+P+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+P+'-shadow {@shadowNodeCssClass}"></div><div class="'+P+'-contentWrapper"><div class="'+P+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+P+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function E(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var S=this.domNode.style,R=!!this.visible;if(this._previousVisible!==R){S.visibility="hidden";}S.display=R?"block":"none";this._previousVisible=R;if(R){if(!this.hasWidgetContent){this.contentNode.innerHTML=this.content;J.recursiveReplaceInlineEventListeners(this.contentNode,false,this);}this.updatePosition();if(this.content){H.call(this);}}},onleftChange:H,ontopChange:H,onrefNodeChange:H,onposTypeChange:H,oncontentNodeCssClassChange:H,oncontentNodeCssTextChange:H,oncontentChange:H,oncssClassChange:H},preBuildRendering:function O(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function I(Y){if(!this.visible&&!Y){return ;}var X=this.refNode,W,h=this.opener&&this.opener.richTooltip||{};if(X){if(!this.offsetAlgo){W=M.offset(X,document.body);}else{var j=X.getBoundingClientRect(),l=document.documentElement.getBoundingClientRect();W={left:j.left-l.left,top:j.top-l.top};}}else{W={left:J.getHorizontalScroll(),top:J.getVerticalScroll()};}this.domNode.style.left=this.left!==null||h.absoluteLeft!==null?0:this.domNode.style.left;this.domNode.style.top=this.top!==null||h.absoluteTop!==null?0:this.domNode.style.top;var s=this.domNode.style,k=this.containerNode,o=k.offsetWidth,c=k.offsetHeight,S=this.posType,f=S.indexOf("R")>-1,Z=S.indexOf("B")>-1,e=this.top!==null?parseInt(this.top,10)+W.top-(Z?c:0):null,U=this.left!==null?parseInt(this.left,10)+W.left-(f?o:((S.indexOf("C")>-1)?Math.floor(o/2):0)):null,p=false,d=false,g,a,n=J.windowDim(),m=J.getHorizontalScroll()+n.w,R=J.getVerticalScroll()+n.h,i=this.arrowNode,q=null;if(h.absoluteLeft!==undefined){g=h.absoluteLeft;if(h.autoAdjust){g=Math.min(Math.max(g,0),m-o);}s.left=g+"px";p=U!==g;}else{if(U!==null){g=Math.min(Math.max(U,0),m-o);s.left=g+"px";p=U!==g;}}if(h.absoluteTop!==undefined){a=h.absoluteTop;if(h.autoAdjust&&a+c>R){N.addClass(this.domNode,"vi-tooltip-V");N.removeClass(this.domNode,"vi-tooltip-A");a=a-h.topOffset-B-c;}s.top=a+"px";d=e!==a;}else{if(e!==null){a=Math.min(Math.max(e,0),R-c);s.top=a+"px";d=e!==a;}}if(p||d){var b,u=this.keepArrowXPos&&p,t=this.keepArrowYPos&&d;if(u||t){q=N.getComputedStyle(i);b=q.left;}if(b&&mstrmojo.string.endsWith(b,"%")){b=parseFloat(b)/100*o;}if(u){i.style.left=(parseInt(b,10)+U-g)+"px";}if(t){i.style.top=(parseInt(q.top,10)+e-a)+"px";}}N.toggleClass(this.domNode,"offset",p||d);},_on_tooltip_change:function(R){C(this,R&&R.src);},_set_opener:function(W,U){var S=this.opener,R=U!==S;if(R){if(U){D(U,this);}if(S){D(U,this,true);}if(S&&S.detachEventListener){S.detachEventListener(this._richSubs);S.detachEventListener(this._ttpSubs);}if(U&&U.attachEventListener){this._richSubs=U.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=U.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=U;}return R;},updatePopupConfig:function(R,S){C(this,S,R&&R.e,R&&R.win);},onscroll:function L(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var K=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function G(S,W,U,R){if(S&&S.hasWidgetContent&&K){K.destroy();}if(!K||!mstrmojo.all[K.id]){K=new mstrmojo.Tooltip();}R=R||{};R.e=W;R.win=U;K.open(S,R);S.tooltip=K;},close:function Q(){if(K&&!K.allowOtherTooltips){var R=K.opener;if(R){R.tooltip=null;}K.close();if(R&&R.hasWidgetContent){K.destroy();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",keepOpen:false,markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}" mstrAttach:keydown><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.css","mstrmojo.dom","mstrmojo.GridBase","mstrmojo.func","mstrmojo.array");var b=mstrmojo.css,Q=mstrmojo.color,g=mstrmojo.css,F=mstrmojo.dom,J=F.isEdge;function D(i,j){var k=i&&i.parent;while(k&&k.scriptClass.indexOf("DocPanelStack")===-1){if(j in k){return k;}k=k.parent;}return null;}function C(j){var i=document.createElement("img");j.appendChild(i);j.removeChild(i);}function G(i,j){var l=Math.floor(i/j.rowsPerPage),n=i%j.rowsPerPage,m=j.tableNode.tBodies[l],k=m.rows[n].cells;return k;}function K(){var j=this._renderTimer;if(j){for(var i in j){self.clearInterval(j[i]);}delete this._renderTimer;this.renderingRows=false;}}mstrmojo.Grid=mstrmojo.declare(mstrmojo.GridBase,null,{scriptClass:"mstrmojo.Grid",rowsPerPage:0,effectiveRh:0,numPagesRendered:0,totalPages:0,pageStatus:null,_defaultPageHeight:0,renderPause:10,rhMin:14,defaultRowsPerPage:100,minRowsPerPage:50,init:function I(i){this._super(i);this.forceFixedSizes=true;},initPageSettings:function O(){var l=this.parent,j=l.gridData,k=this.defaultRowsPerPage,i=this.cp.getAvailableRowsCount();this.effectiveRh=this.rh||this.rhMin||1;this.effectiveRh*=l.model.docModel.getZoomFactor();if(l&&l.numRowFixed){k=i;}else{if(l&&l.scrollboxHeightFixed){k=Math.ceil(l.scrollboxHeight/this.effectiveRh);k=Math.max(k,this.minRowsPerPage);if(i<k){k=this.minRowsPerPage;this._shouldRenderNextPage=true;}}}if(l.isOutlineMode){k=Math.min(200,i);}this.pageStatus=[];this.columnSecWidth=[];this.rowsPerPage=k;this.initPageStatus(this.pageStatus);this._defaultPageHeight=this.rowsPerPage*this.effectiveRh;this.initColumnSec(this.columnSecWidth);},initColumnSec:function A(k){var l,m=this.cp.colWidths,j=m&&m.length||0,n=this.icr.dcw;this.totalColumnSecs=Math.ceil(j/this.icr.dcpp);for(l=0;l<j;l++){k[l]=(k[l]||0)+(parseInt(m[l].w,10)||n);}},initPageStatus:function e(m){var l=this.rowsPerPage,j,o,k,n=function(q,s,i){var p=this;return function(){if(p._onDemand===undefined){p._onDemand=!q.isDataAvailable(s,i);}return p._onDemand;};};this.totalPages=(l&&Math.ceil(this.cp.rc/l))||0;m=m||this.pageStatus;for(j=0;j<this.totalPages;++j){o=j*l;k=o+l-1;if(!m[j]){m[j]={};}delete m[j]._onDemand;m[j].isOnDemand=n.call(m[j],this.cp,o,k);}},buildRendering:function H(){var i=false;if(this.renderMode==="vscroll"){this.initPageSettings();var l=this.pageStatus[0];i=l&&l.isOnDemand();this.start=0;this.end=-1;if(!i){this.end=Math.min(this.cp.rc,this.rowsPerPage)-1;}this.preRenderPages();this.preRenderPage(0,!i);}this._super();if(this.renderMode==="vscroll"){var k=this.parent;this.gridContainerNode.style[g.MINHEIGHT]=(this.cp.rc*this.effectiveRh)+"px";if(!this.connectedScrollbox){if(k&&k.connectScrollbox){k.connectScrollbox(this);this.connectedScrollbox=true;}}this.postRenderPage(0,!i);this.postRenderPages();var j=k&&!k.scrollboxHeightFixed&&!k.numRowFixed;if(j&&this.numPagesRendered>=this.totalPages&&!i){this.postRenderingCleanup();}else{if(i||j||this._shouldRenderNextPage||(k.isOutlineMode&&this.getPageHeight(this.pageNum)<this._defaultPageHeight)){this.onscroll();delete this._shouldRenderNextPage;}}}},preRenderPages:function U(){},postRenderPages:function f(){if(mstrApp&&mstrApp.isExpress){var j=this.parent.scrollboxNode,k=j.scrollTop,l=j.scrollLeft,i=(k>5)?k-5:0;this.parent.scrollTo({x:l,y:i});this.parent.scrollTo({x:l,y:k});}},configureActions:function P(){var i=this.parent;if(i&&i.configureActions){i.configureActions();}},preRenderPage:function R(i,j){this.pageNum=i;},postRenderPage:function M(j,l,m){if(j+1>this.numPagesRendered){this.numPagesRendered=j+1;}var i=this.pageStatus,k=i[j];if(!k){k=i[j]={};}if(l){k.filled=true;k.dirty=false;}var n=this.gridContainerNode.style;if(j===this.totalPages-1&&n){n[g.MINHEIGHT]="";}},invalidAllPages:function(){for(var j=0;j<this.totalPages;++j){var k=this.pageStatus[j];if(k.filled){k.dirty=true;}delete k._onDemand;k.filled=false;k.isDownloading=false;}this.thPosMap=[];this.posMap=[];},_startPageRenderThread:function h(i){var j=this.id;K();this.renderingRows=true;this._renderTimer=this._renderTimer||{};this._renderTimer[Date.now()]=self.setInterval(function(){try{var m=mstrmojo.all[j];if(!m){return ;}var k=m.getPagesToRender(i);if(k.length>0){m.preRenderPages();m.renderPages(k);m.postRenderPages();m._postPagesClearup=true;}else{if(m._postPagesClearup){m.postRenderPagesCleanup();m.configureActions();m._postPagesClearup=false;}K.call(m);if(m.isRenderingComplete()){m.postRenderingCleanup();}}}catch(l){K.call(mstrmojo.all[j]);throw l;}},this.renderPause);},onscroll:function d(j,i){if(i&&i.deltaY===0&&this.icr.isIncremental&&!this.icr.sectionChanged){return ;}if(!this.renderingRows){if(j===true){var k=this.parent;if(k&&k.maskNode){b.addClass(k.maskNode,"wait");}}window.clearTimeout(this.scrollingTimeOut);this.scrollingTimeOut=window.setTimeout(function(){this._startPageRenderThread(i);this.icr.sectionChanged=false;}.bind(this),150);}},isRenderingComplete:function S(){if(this.end>=this.cp.rc-1){for(var j=this.pageStatus,k=this.totalPages-1;k>-1;k--){if(!j[k]||!j[k].filled){return false;}}return true;}return false;},renderPages:function E(l){var n=this.icr,t=n.isIncremental,o,s,z=2;if(t){var q=false;mstrmojo.array.forEach(l,function(i){if(i.idx===0){q=true;return false;}});if(!q){this.renderPage(0,true,true);}var m=false;s=l.length;for(o=0;o<s;++o){if(l[o].fill){m=true;}}var u=n.renderedPages||[],p=l[0].idx,y=this.tableNode,w=this.parent,j=w.lockHeadersCase&z;y.firstChild.innerHTML="<colgroup>"+this._getGridWidths().colgroup+"</colgroup>";if(j){w.resetColgroupNodes(y.firstChild);}if(m){var k=this.domNode.ownerDocument.createElement("table");for(o=1;o<y.tBodies.length;o++){if(o!==p&&o!==p+1&&(y.tBodies[o].childElementCount>1||y.tBodies[o].children[0].childElementCount>1)){k.innerHTML='<tbody n="'+o+'"><tr><td style="height:'+y.tBodies[o].getBoundingClientRect().height+'px">&nbsp;</td></tr></tbody>';if(j){w.onPageRendered(k.tBodies[0],o,true,true);}y.replaceChild(k.tBodies[0],y.tBodies[o]);}}}}n.renderedPages=[];var x=n.curSel.rows={};s=l.length;for(o=0;o<s;++o){this.renderPage(l[o].idx,l[o].fill,o!==s-1||t);x[l[o].idx]=true;}},renderPageInView:function W(){if(!this.renderingRows&&!this._renderTimer){this._startPageRenderThread();}},renderPage:function c(u,k,y){var AA=this.pageStatus,n=(this.numPagesRendered>=u+1);if(n){if(!k||((AA[u]&&AA[u].filled)&&!this.icr.forceRender)){return ;}}var z=this.rowsPerPage,o=this.domNode,t=this.parent;this.start=u*z;this.end=Math.min(this.start+z,this.cp.rc)-1;this.preRenderPage(u,k);if(k&&t.isOutlineMode){t.hasEmptyTBody=true;}var j=this.tempTable;if(!j){j=this.tempTable=o.ownerDocument.createElement("div");}var x=this.tableNode,w=this.start,l=this.end,q=t.isViewOnly?'class="empty-block" ':"";tInnerHTML=k?this.buildTableRowsMarkup(w,l,'<table><tbody n="'+this.pageNum+'">',"</tbody></table>",x.style.tableLayout).join(""):'<table><tbody n="'+this.pageNum+'"><tr><td '+q+'style="height:'+(t.isOutlineMode?this._defaultPageHeight:(this.effectiveRh*(this.end-this.start+1)))+'px">&nbsp;</td></tr></tbody></table>';if(k&&t.hasEmptyTBody){if(!t.outlineState.hasTBodyElementsToExpand){tInnerHTML='<table><tbody n="'+this.pageNum+'"><tr style="height:'+0+'px"></tr></tbody></table>';}else{t.outlineState.hasTBodyElementsToExpand=false;}}j.innerHTML=tInnerHTML;var m=j.firstChild.tBodies[0];if(this._zf!==undefined){var s=m.getElementsByTagName("img");this.parent.attachLoadEventHandlerToImages(s,this._zf);delete this._zf;}if(!n){x.appendChild(m);if(t.isOutlineMode&&t.isAutoTableLayout()){if(t.clonedColHeader){t.clonedColHeader.getTableNode().appendChild(m.cloneNode(true));}if(t.clonedTitle&&t.clonedTitle.getTableNode()){t.clonedTitle.getTableNode().appendChild(m.cloneNode(true));}}}else{x.replaceChild(m,x.tBodies[u]);}if(m&&mstrApp&&mstrApp.isSingleTier){F.redirectUrlToFormWrapper(m);}if(k){this.markPages(w,l);}this.postRenderPage(u,k,m);var i=this.parent;if(i.onPageRendered){i.onPageRendered(m,u,n,k,y);}},getPagesToRender:function Y(AN){var l=[],AU=this.parent,AL=this._defaultPageHeight,AR=null,AX=this.pageStatus,AP=mstrmojo.func.safeCall("mstrApp.rootCtrl.docCtrl.model.getPageScale",window)()||1,AD=this;if(!this.tableNode){return[];}function AJ(i){var j=AX[i];if(j&&(j.filled||j.dirty)){if(!AR){AR=AD.tableNode.tBodies;}j.height=AR[i].getBoundingClientRect().height/AP;if(J){j.height-=11;}return j.height;}return AL;}var AS=0,AB=null,x=null,Ac=AU.scrollboxTop;for(var Aa=0,AF=this.totalPages,AE=this.pageStatus;Aa<AF;Aa++){AS+=AJ(Aa);if(AS>=Ac){AB=Aa>0?Aa-1:Aa;break;}}if(AB===null){AB=x=Math.max(AF-1,0);}else{var AG=AU.scrollboxBottom;if(isNaN(AG)&&AU.numRowFixed){AG=Ac;}for(var AZ=AB+1;AZ<AF;AZ++){if(parseInt(AS,10)>Math.ceil(AG)){x=AZ;break;}AS+=AJ(AZ);}}if(x===null){x=AF-1;}else{if(x<AF-1&&x<=AB){x+=1;}}for(var AW=this.numPagesRendered;AW<AB;++AW){l.push({idx:AW,fill:false});}var u=0,k=this.rowsPerPage,z=false,Aa,q=false,AA=this.icr.isIncremental;if(AA){var s=this.parent.titlesCP,AT=s.getSpanDimension(),AO=AT.nCol,AQ=this.cp.colWidths&&this.cp.colWidths.length;function w(m){if(AR){var Ad=[],y=AR[0].lastChild,p=AR[0].firstChild,j;for(j=0;j<AO;j++){m[j]=p.children[j].offsetWidth;}for(j=0;j<y.childElementCount;j++){if(y.children[j].className.indexOf("gd-col-padding")>-1){Ad.push(j);}}var n=AC.getBeginIndex();if(Ad.length===2){var Af=Ad[0]+1,Ae=Ad[1]-Af;for(j=0;j<Ae;j++){m[n+j]=y.children[Af+j].offsetWidth;}}else{if(Ad[0]<y.childElementCount-1){for(j=1;j<=AQ-n;j++){m[AQ-j]=y.children[y.childElementCount-j].offsetWidth;}}else{for(j=AO;j<Ad[0];j++){m[j]=y.children[j].offsetWidth;}}}}}var AC=this.icr,AH=AC.currColSec;w(this.columnSecWidth);var AM=function AM(){var p=AU.scrollNode,m=p.offsetWidth,j=p.scrollLeft,Ae=0,n=this.columnSecWidth,Ad,Af=AQ-1,Ah=0;if(j===AC.scrollLeft){return AC.currColSec;}if(F.isIE&&AQ>10000){var Ag=j/(p.scrollWidth-m);Af=AQ*Ag;return Math.floor(Af/AC.dcpp);}for(Ad=0;Ad<AQ;Ad++){Ah+=n[Ad];}for(Ad=0;Ad<AQ;Ad++){Ae+=n[Ad];if(Ae>=j){Af=Ad;break;}}var Ai=Math.floor(Af/AC.dcpp);if(Ai>0&&Math.abs(Ai-AC.currColSec)<=1&&AR[0]){Ai=AC.currColSec;var y=AR[0].firstChild.children[AO+1];if(F.position(y).x>0){Af-=AC.dcpp;Ai--;}else{if(Af<AQ-1){y=AR[0].firstChild.lastChild;if(mstrmojo.dom.position(y).x-F.position(p).x<m){Af+=AC.dcpp;Ai++;}}}}AC.currColIdx=Af;return Ai;};var AV=AM.call(this);AC.leftOffset=AU.scrollboxLeft-AU.scrollboxNode.offsetWidth;AC.forceRender=false;if(AH!==AV){q=true;AC.scrollLeft=AU.scrollboxLeft;if(!(AV===this.totalColumnSecs-1&&AH+1===AV)){AC.forceRender=true;}if(AV===Math.ceil(this.columnSecWidth/AC.dcpp)){AV-=1;}AC.currColSec=AV;}for(var Aa=AB;Aa<=x;++Aa){if(!AC.curSel.rows[Aa]&&AX[Aa]&&AX[Aa].filled){q=true;AC.forceRender=true;}}}for(var AY=AB;AY<=x;++AY){var Ab=AX[AY];if(!Ab||!Ab.filled){if(Ab&&Ab.isOnDemand()){z=true;if(!Ab.isDownloading&&!this.isDownloading){u+=k;Ab.isDownloading=true;this.isDownloading=true;var AI=AY*k,t=AI+k-1;this.cp.download(AI,t,AN);}if(!AA||this.numPagesRendered<=AY){l.push({idx:AY,fill:false});}}else{l.push({idx:AY,fill:true});}}else{if(q){l.push({idx:AY,fill:true});}}}if(AU.isOutlineMode&&l.length===0){var o=AU.scrollboxNode.getBoundingClientRect().bottom;while(l.length===0&&x<this.totalPages-1){var AK=AR[x].getBoundingClientRect().bottom;if(AK<o){x++;if(!AX[x].filled){l.push({idx:x,fill:true});}}else{break;}}}if(z){this.parent.showDownloadStatus(u);}else{if(this.parent.closeDownloadStatus){this.parent.closeDownloadStatus();}}return l;},addHilitePosition:function(j,l,i){var m=this.hiliteCellsMap[j];if(!m){this.hiliteCellsMap[j]={pos:[],nodes:[]};}var k=l-(this.pageNum||0)*this.rowsPerPage;this.hiliteCellsMap[j].pos.push({row:k,cell:i,page:this.pageNum});},setHilites:function(m,n){var o=n.getAttribute("ei"),p=this.eiMap[o],j=this.getNodesByPositions(p);if(!j.length){this._super(m,n);return ;}for(var l=0,k=j.length;l<k;l++){this._super(m,j[l]);}},addExtraInfoMap:function(j,k,i){if(!this.eiMap[j]){this.eiMap[j]=[];}this.eiMap[j].push(this.getPosObj(k,i));},addPositionMap:function(j,k,i){if(!this.posMap[j]){this.posMap[j]=this.getPosObj(k,i);}},addTitleHeaderPositionMap:function(k,i,j){var l=this.getPosObj(k,i);l.obj=j;this.thPosMap.push(l);},getPosObj:function(j,l){var k=this.pageNum||0,i=this.rowsPerPage||0;return{row:j-k*i,cell:l,page:k};},getNodeByPosition:function(i){return this.tableNode.tBodies[i.page].rows[i.row].cells[i.cell];},getRowIdxByCell:function(i){var j=this.posMap[i._ei];return j.page*this.rowsPerPage+j.row;},getNodesByPositions:function(s){var n=[];for(var l in s){var u=s[l],k=(u&&u.page)||0,j=u&&u.row,o=u&&u.cell,m=this.tableNode.tBodies[k],q=m&&m.rows[j],t=q&&q.cells[o];if(t){n.push(t);}}return n;},getPageHeight:function X(i){var j=this.tableNode.tBodies;return(j&&j[i]&&j[i].offsetHeight)||0;},getTargetCell:function(q,p){var n=0,l=0,o;for(o=this.totalPages;l<o;l++){n+=this.getPageHeight(l);if(p<=n){break;}}var m=this.tableNode.tBodies[l];if(m){for(l=0,o=m.rows.length;l<o;l++){var u=m.rows[l];for(var k=0,t=u.cells.length;k<t;k++){var s=u.cells[k];if(s.offsetTop+s.offsetHeight>=p){if(q>=s.offsetLeft&&q<=s.offsetLeft+s.offsetWidth){return s;}}else{break;}}}}},postRenderPagesCleanup:function L(){var k=this.parent;if(k&&k.gridData&&k.gridData.afc){var j=this.tableNode;if(j&&(this.lastWidth!==j.offsetWidth)){if(k.onGridWidthChanged){k.onGridWidthChanged();}mstrmojo.array.forEach(this.pageStatus,function(l){delete l.height;});this.lastWidth=j.offsetWidth;}var i=D(k,"adjustAutoWidth");if(i){i.adjustAutoWidth(k);}}if(k.gridPagesRendered){k.gridPagesRendered();}if(F.isIE&&!F.isIE8){C(this.domNode);}if(k&&k.maskNode){b.removeClass(k.maskNode,"wait");}this.hightLightChangedCells();},hightLightChangedCells:function N(){var s=this.cp.getUpdatedRows(),n=this,q,j,p,t,l,m,o,k=[];if(s){mstrmojo.hash.forEach(s,function(u,i){o=parseInt(i,10);q=n.cp.getRowCells(o);j=G(o,n);p=j.length;t=q.length-1;if(t>=0){for(l=p-1;l>=0;l--){m=j[l];if(t<0){break;}if(q[l]._d){var x=m.style.backgroundColor,w=m.style.color;k.push({dom:m,bgcolor:x,ftcolor:w});m.style.backgroundColor=Q.getHighlightColor(Q.rgbStr2rgb(g.getStyleValue(m,"backgroundColor"),true));m.style.color=Q.getContrastingColor(Q.rgbStr2hex(g.getStyleValue(m,"backgroundColor")),"#ffffff","#000000");delete q[l]._d;}t--;}}});if(k.length>0){window.setTimeout(function(){mstrmojo.array.forEach(k,function(i){i.dom.style.backgroundColor=i.bgcolor;i.dom.style.color=i.ftcolor;});},300);}}},postRenderingCleanup:function B(){var i=this.parent;if(i&&this.connectedScrollbox){i.disconnectScrollbox(this);}this.connectedScrollbox=false;if(i&&!i.scrollboxHeightFixed){var j=D(i,"performCanGrowCanShrink");if(j){if(i.isOutlineMode){j.performCanGrowCanShrink([i],false);C(j.domNode);}else{j.performCanGrowCanShrink([i],true);}}}},getRowInfoByPosition:function(i){return this.cp.getRowCellInfo(i);},unrender:function a(i){K.call(this);if(this.connectedScrollbox){this.parent.disconnectScrollbox(this);this.connectedScrollbox=false;}this.numPagesRendered=0;this.lastWidth=0;this.isDownloading=false;this.unMarkAllPages();this._super(i);},dataDownloaded:function Z(){this.isDownloading=false;this.initPageStatus();this.onscroll();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.css,D=mstrmojo.hash,B="glow";var F=mstrmojo.android.ui.Button=mstrmojo.declare(mstrmojo.Button,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Button",onclick:mstrmojo.emptyFn,touchBegin:function E(){if(this.enabled){H.addClass(this.domNode,B);}},touchTap:function C(J){if(this.enabled){this.onclick({e:J.evt});}},touchSelectBegin:mstrmojo.emptyFn,touchSelectEnd:function A(J){if(this.enabled){this.onclick({e:J.evt});}},touchEnd:function I(){H.removeClass(this.domNode,B);}});F.prototype.markupString=F.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");F.newButton=function G(M,L,K){var J={scriptClass:"mstrmojo.android.ui.Button",text:M};if(L){J.onclick=L;}D.copy(K,J);return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.MenuItem=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.MenuItem",markupString:'<div id="{@id}" class="mstrmojo-MenuItem {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-MenuItem-text"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo.Button","mstrmojo.vi._MonitorsAppState");var K=mstrmojo.array,O=mstrmojo.hash,L=mstrmojo.EnumRWUnitType;var F=1,B=2,R=4,N=8,I=16,W=32;function M(b,a,Y,Z,c,X){return mstrmojo.Button.newWebButton(b,function(d){this.parent.set("_targetMode",a);d.cancel();},Y,{alias:Z,flgVis:c,flgEnabled:X||undefined});}mstrmojo.vi.ui.TargetSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TargetSelector",markupString:'<div id="{@id}" class="mstrmojo-TargetSelector {@cssClass}" style="{@cssText}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},selectionInited:false,init:function Q(X){this._super(X);if(!this.hostId){throw new Error("You must pass the hostId when instantiating mstrmojo.vi.ui.TargetSelector.");}if(!this.srcId){this.srcId=this.hostId;}this.hostBox=mstrmojo.all[this.hostId];this.srcBox=mstrmojo.all[this.srcId];this._targetMode=F;this.selectionInited=false;},onAppStateChange:function P(X){var Z=mstrmojo.vi.VisualInsightApp.APP_STATES,a=Z.SELECTOR_TARGETING,Y=this.btnSelect;if(X.valueWas&a||X.value&a){Y.set("enabled",!mstrApp.isAppStateSelection());}},hostId:null,srcId:null,srcPanelStackId:null,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onhostIdChange:function(){this.hostBox=mstrmojo.all[this.hostId];},onsrcIdChange:function(){this.srcBox=mstrmojo.all[this.srcId];},on_targetModeChange:function(){var e=this,d=this._targetMode,g=this.hostBox,X=this.srcBox,Y=this.id,j=X.model,f=O.walk("forType.enabled",g),Z=g.currentPanelKey?mstrmojo.all[j.getNodeDataByKey(g.currentPanelKey).id]:j.getVizContentPanel(),i=d===W,a=function(){this.preChangeTargetSelectionMode(false,j);Z.exitTargetSelectionMode(i,this.restoreChildren.bind(this));}.bind(this);this.children.forEach(function(k){k.set("visible",(k.flgVis&d)>0);k.set("enabled",(!k.flgEnabled||(k.flgEnabled&d)>0));k.refresh();});this.set("visible",d!==F);if(i||d===B){a();if(!i){this.set("_targetMode",this._cancelMode);this.cancel(g);}if(g&&g.targetDDICs){g.targetDDICs=[];}this.exitTargetSelectionMode(g);}else{if(d===N){this.preChangeTargetSelectionMode(true,j);if(this.srcBox&&this.srcBox instanceof mstrmojo.vi.ui.rw.VizBox){Z.setHighlightInTargetSelectionMode(!f);}Z.enterTargetSelectionMode(function(l,m){var k=m?F:N;if(!m&&g.isSelectionDirty(l,m)){k=I;}if(g&&g.updateIsAllTargetInHighlightMode){g.updateIsAllTargetInHighlightMode();}mstrmojo.all[Y].set("_targetMode",k);if(m){g.setTargets(l);}},this.srcId,g.getTargetKeys(),this.enterTargetSelectionMode.bind(this),a);}else{if(d===I){var c=O.walk("srcBox.boxContent.isGlobalLegend",this);if(c){Z.selectionMadeInTargetSelectionMode(null,this.srcId,g.getTargetKeys(),this.enterTargetSelectionMode.bind(this),null);}}}}var b=mstrmojo.vi.VisualInsightApp.APP_STATES,h=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();mstrApp.set("appState",d===N||d===I?(h?b.SELECTOR_TARGETING|b.PAUSE:b.SELECTOR_TARGETING):(h?b.PAUSE:b.DEFAULT));}},ignoreLayout:true,setSourceByKey:function H(X){var Y=this.srcBox.model.getNodeDataByKey(X),a=Y?mstrmojo.all[Y.id]:undefined,Z=a?a.parent:undefined;if(Z){this.set("srcId",Z.id);}},preChangeTargetSelectionMode:function U(a,Y){var b=Y.getDocVIVisualizationsPanelStack().selector,Z=Y.controller.view,X=Z.layoutViewer.docLayout.selector;X.set("isMasked",a);b.set("isMasked",a);},enterTargetSelectionMode:function G(d,k){var X=this.srcId,Y=mstrmojo.all[X],h=Y.isAMSelector instanceof Function&&Y.isAMSelector(),f=Y.isPanelSelector instanceof Function&&Y.isPanelSelector(),j=Y.isParameterSelector instanceof Function&&Y.isParameterSelector(),g=this.srcBox.getDocModel(),i=g&&g.getParentNodeKeyByType(Y&&Y.k,L.PANELSTACK),c=g&&g.getParentNodeKeyByType(d&&d.k,L.PANELSTACK),b=c&&g.getTargetDefn(c)[c],m=b&&b.sp,l=(d.defn||{}).style||0,a=(d.defn||{}).ct||"1",e=(d.isSelectorPanel&&i!==d.k)||(m&&i!==c)||(a==="1"&&(l===7||l===8||l===11))||a==="8",Z=d.isFormPanel&&(h||f||j);d.setMaskClass(X,k);d.set("enabled",k!=="disabled"&&!e&&!Z&&d.validateTarget&&d.validateTarget(h,f,X));},exitTargetSelectionMode:function D(X){X.close();},restoreChildren:function J(X){X.set("enabled",true);X.clearMaskClass();},cancel:function C(X){if(X){X.cancel();}if(this.srcBox.isAMSelector instanceof Function&&this.srcBox.isAMSelector()){this.srcBox.tmp_replaceRelation={};}},enterPreSelectMode:function E(){this._cancelMode=R;this.set("_targetMode",R);},enterSelectMode:function S(){this._cancelMode=F;this.set("_targetMode",N);},enterOffMode:function A(){this._cancelMode=F;this.set("_targetMode",F);},children:[M(mstrmojo.desc(4799,"Select Target"),N,true,"btnSelect",R),M(mstrmojo.desc(221,"Cancel"),B,false,"btnCancel",N+I),M(mstrmojo.desc(134,"Apply"),W,true,"btnApply",N+I,I)]});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var E=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.TwoColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-TwoColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+E+'></div><div class="divider"'+E+'></div><div class="vi-col2"'+E+"></div></div>",markupSlots:{col1Node:function D(){return this.domNode.firstChild;},dividerNode:function C(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"40%",dividerNode:"5px",col2Node:"60%"},xt:true},shouldPropagateEnabled:true,col1Width:"40%",dividerWidth:"5px",col2Width:"60%",init:function G(H){this._super(H);var I=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),J=I.w;J.col1Node=this.col1Width;J.dividerNode=this.dividerWidth;J.col2Node=this.col2Width;},oncol1WidthChange:function B(){this.layoutConfig.w.col1Node=this.col1Width;},getControl:function F(H){return(this.children||[]).filter(function(I){return I.slot==="col"+H+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var B=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" role="{@role}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:B.visibleMarkupMethod,onheightChange:B.heightMarkupMethod,onwidthChange:B.widthMarkupMethod},postBuildRendering:function A(){this._super();if(!this.enableAccessibility){return ;}if(this.accessibilityHook){this.accessibilityHook();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var W=H.slot;if(!this[W]){var M=W&&W.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),X=parseInt(M[2],10),Q=this.containerNode,U=this[(B+R)],N=[];if(!U){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}U=N[B+R];}var P=U.cells&&U.cells.length||0;for(var K=P;K<=X;K++){var I=U.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui._HasScroller");var D=mstrmojo.Widget;mstrmojo.ui.ScrollableContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ScrollableContainer {@cssClass}" style="{@cssText}"><div class="ScrollableContainer-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},accessibilityMenuContainer:function(){return this.children[0];},markupMethods:{onvisibleChange:D.visibleMarkupMethod,onheightChange:D.heightMarkupMethod,onwidthChange:D.widthMarkupMethod},setupScrollNodes:function C(){this.scrollNode=this.containerNode;},onOpen:function B(){this.updateScrollbars();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Container","mstrmojo.vi.ui._IsDropTarget");var G=mstrmojo.dom;var E=G.isTouchOptimizationEnabled()?[]:["click","mousemove","mouseleave"];function B(W,U,R){var S=U,Q;for(;S>0;S--){Q=Array(S+1).join("#");W=W.replace(Q,R[S-1]);}return W;}var M='<div class="freezing-vis-txt-metric">',P='<div class="freezing-vis-txt-attr">',J="</div>",A="("+mstrmojo.desc(16294,"data retrieval paused")+")";var H=function(U,S){if(U<1&&S<1){return null;}var R=[],Q="# ## ### ####";if(U>0){R.push(B(Q,4,[P,U,U>1?mstrmojo.desc(3581,"Attributes"):mstrmojo.desc(518,"Attribute"),J]));}if(S>0){R.push(B(Q,4,[M,S,S>1?mstrmojo.desc(3582,"Metrics"):mstrmojo.desc(517,"Metric"),J]));}return R.join(",");};mstrmojo.vi.ui.rw.FreezingImageContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo.vi.ui._IsDropTarget],{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",markupString:('<div id="{@id}" class="mstrmojo-vi-ui-rw-freezingImageContainer mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}" mstrAttach="'+E+'"><div class="mstmojo-freezingImgTableCell"><div class="mstrmojo-freezingImgDiv"><div class="freezing-vis-img ghost-vis-img"></div><div class="freezing-vis-desc"><label class="visName">{@visName}</label><div class="freezing-details">{@freezingDetails}</div></div><div class="vis-dropzone">{@visDropzoneMsg} </div></div></div></div>'),markupSlots:{containerNode:function(){return this.domNode;}},visName:"",freezingDetails:A,visDropzoneMsg:"",deferDragEvents:false,dragDeferTarget:null,init:function O(Q){if(this._super){this._super(Q);}if(Q.deferDragEvents){this.set("dropZone",true);}},ondeferDragEventsChange:function I(){this.set("dropZone",this.deferDragEvents);},allowDrop:function F(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return false;}Q.isDeferred=true;return this.dragDeferTarget.allowDrop(Q);},getDropData:function D(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return undefined;}Q.isDeferred=true;return this.dragDeferTarget.getDropData(Q);},ondragenter:function L(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}Q.isDeferred=true;this.dragDeferTarget.ondragenter(Q);},ondragleave:function N(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}Q.isDeferred=true;this.dragDeferTarget.ondragleave(Q);},ondragover:function C(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}Q.isDeferred=true;this.dragDeferTarget.ondragover(Q);},ondrop:function K(Q){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}Q.isDeferred=true;this.dragDeferTarget.ondrop(Q);}});mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg=H;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.util.A11yUtility");var e=mstrmojo.css,G=mstrmojo.dom,Z=mstrmojo.func,R=mstrmojo.vi.util.A11yUtility;var f={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var i=this.value,h=this.inputNode,j=h.value,g=(i!==null&&i!==undefined)?String(i):"";if(g!==j&&(!this.keepEmpty||j!==this.emptyText)){h.value=g;}if(h.mstrmojoEmpty){e.removeClass(h,[this.emptyClass]);h.mstrmojoEmpty=null;}}function d(){var g=this.inputNode;g.value=this.emptyText||"";e.addClass(g,[this.emptyClass]);g.mstrmojoEmpty=true;}function P(){var g=this.inputNode;if(g){this.readingDom=true;this.set("value",g.value);this.readingDom=false;}}function b(g){var h=this;if(g===-1){P.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete h._lastTimeoutId;P.call(h);},g||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,spellCheck:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown,mousedown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function X(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function Q(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var g=this.inputNode;g.disabled=!this.enabled;e.toggleClass(g,"disabled",!this.enabled);},onvalueChange:function S(){var g=this.value,h=(g===undefined)||(g===null)||(g==="");if(h){if(!this.hasFocus){d.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(G.isIE9){this.inputNode.type=h?"text":this.type;}},ontooltipChange:function W(){this.domNode.title=this.tooltip;},onreadOnlyChange:function I(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){e.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function a(){this._super();var g=this,h=this.inputNode;if(this.autoComplete=="new-password"){h.setAttribute("autocomplete","new-password");}else{h.setAttribute("autocomplete",this.autoComplete?"on":"off");}h.setAttribute("autocorrect",this.autoCorrect?"on":"off");h.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");h.setAttribute("spellcheck",this.spellCheck?"on":"off");if(this.enableAccessibility){h.setAttribute("tabindex","-1");h.onblur=Z.composite([h.onblur||mstrmojo.emptyFn,function(){g.loseFocus();}]);}},focus:function U(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(g){}}},grabFocus:function O(g){if(!this.enableAccessibility){return ;}var h=this.inputNode;if(g){h.focus();}h.onblur=mstrmojo.func.composite([h.onblur||mstrmojo.emptyFn,function(){e.removeClass(h,R.CSS_FOCUS_VISIBLE);}]);e.addClass(h,R.CSS_FOCUS_VISIBLE);},loseFocus:function F(h){if(!this.enableAccessibility){return ;}var g=this.inputNode;if(h){g.blur();}e.removeClass(g,R.CSS_FOCUS_VISIBLE);},prefocus:function N(){this.hasFocus=true;A.call(this);},blur:function Y(){this.inputNode.blur();},preblur:function c(){window.setTimeout(function(){},200);this.hasFocus=false;P.call(this);var g=this.value;if(((g===null||g==="")&&this.emptyText)||(this.keepEmpty&&g===this.emptyText)){d.call(this);}},prekeyup:function J(h){var g=h.hWin,i=h.e||g.event;b.call(this,this.valueChangeDelay);var j=f[i.keyCode];if(this["on"+j]){this["on"+j](h);}},preinput:function K(){b.call(this,this.valueChangeDelay);},prepaste:function L(){b.call(this);},precut:function H(){b.call(this);},setInvalidState:function C(g){this.set("textValid",false);if(g){this.domNode.setAttribute("title",g);}},cleanUp:function M(){this.inputNode.value="";this.set("textValid",true);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.vi.ui.InlineDialogBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.vi.ui.InlineDialogBase",cssClass:"mstrmojo-inline-dialog",title:"",vis:null,buttons:null,shouldNavigate:false,tocEnabled:false,isTocNav:false,isOnTocChange:false,targetSelector:null,markupString:'<div id="{@id}" class="mstrmojo-Dialog-Bar {@cssClass}" tabindex="0" mstrAttach:click><div class="win mstrmojo-bar"><div class="mstrmojo-bar-content"></div><div class="mstrmojo-bar-buttons"></div></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[0];},buttonNode:function(){return this.domNode.firstChild.lastChild;}},init:function A(B){if(this._super){this._super(B);}},open:mstrmojo.emptyFn,close:mstrmojo.emptyFn,cancel:mstrmojo.emptyFn,onwidthChange:function(){if(this.editorNode){this.editorNode.style.width=this.width;}},_addChildren:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.ThreeColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ThreeColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider1"'+D+'></div><div class="vi-col2"'+D+'></div><div class="divider2"'+D+'></div><div class="vi-col3"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},divider1Node:function H(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.childNodes[2];},divider2Node:function B(){return this.domNode.childNodes[3];},col3Node:function E(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"30%",divider1Node:"5px",col2Node:"30%",divider2Node:"5px",col3Node:"40%"},xt:true},shouldPropagateEnabled:true,col1Width:"30%",divider1Width:"5px",col2Width:"30%",divider2Width:"5px",col3Width:"40%",init:function G(I){this._super(I);var J=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),K=J.w;K.col1Node=this.col1Width;K.divider1Node=this.divider1Width;K.col2Node=this.col2Width;K.divider2Node=this.divider2Width;K.col3Node=this.col3Width;},getControl:function F(I){return(this.children||[]).filter(function(J){return J.slot==="col"+I+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.TabStripBase=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TabStripBase",target:null,targetProps:null,isStrip:true,ontargetChange:function A(I){var J=I&&I.valueWas;if(J){var G=this._targetSubs;if(G){J.detachEventListener(G.add);J.detachEventListener(G.rem);J.detachEventListener(G.sel);}this.removeChildren();}var K=this.target;if(K){var E=this.targetProps,D=(E&&E.children)||"children",B=K[D];this.addTabButtons(B,0);var H="attachEventListener",C=this.id,F;if(K[H]){this._targetSubs={add:K[H]("addChild",C,function(L){var M=L&&L.value;if(M&&M.length){this.addTabButtons(M,L.index);}}),rem:K[H]("removeChild",C,function(M){var L=M&&M.value;for(F=((L&&L.length)||0)-1;F>-1;F--){this.removeTabButton(L[F]);}}),sel:K[H]("selectedChange",C,function(L){this.selectionChange(L);})};}}},addTabButtons:mstrmojo.emptyFn,removeTabButton:mstrmojo.emptyFn,selectionChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui._HasScroller","mstrmojo.vi.ui._HasMask","mstrmojo.vi._MonitorsAppState");var B=mstrmojo.func,C=mstrmojo.hash;mstrmojo.vi.ui.VizControlBoxPanelContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui._HasScroller,mstrmojo.vi.ui._HasMask,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.VizControlBoxPanelContainer",markupString:'<div id="{@id}" tabindex="-1" class="mstrmojo-VIPanel {@panelClassName} {@cssClass}" style="{@cssText}" ><div class="{@panelContentClassName}"></div><div class="mstrmojo-VIDND-mask"></div><div class="mstrmojo-VizControl-BoxPanel-disabled"><div class="mstrmojo-VizControl-BoxPanel-disabled-icon"></div><div class="mstrmojo-VizControl-BoxPanel-disabled-text"></div></div></div>',markupSlots:{containerNode:function F(){return this.domNode.firstChild;},maskNode:function I(){return this.domNode.childNodes[1];},warningNode:function H(){return this.domNode.childNodes[2];},warningText:function D(){return this.domNode.childNodes[2].childNodes[1];}},markupMethods:{onvisibleChange:B.composite([mstrmojo.Widget.visibleMarkupMethod,function(){this.toggleWarningDisplayForNonExecutableChapter();}])},renderProxy:null,subs:null,isOpen:false,panelKey:"",panelClassName:"",panelContentClassName:"",init:function(K){this._super(K);},getOpenStatus:function J(){return this.isOpen;},setupScrollNodes:function G(){this.scrollNode=this.containerNode;},setOpenStatus:mstrmojo.emptyFn,toggleWarningDisplayForNonExecutableChapter:function A(){var K=!!B.safeCall("rootCtrl.docCtrl.model.checkNonExecutableChapterFilter",mstrApp)();if(K){this.toggleWarningDisplay(true,mstrmojo.desc(28182,"This panel is not applicable for current page."));}else{this.toggleWarningDisplay(false);}},toggleWarningDisplay:function E(R,M){var N=this,L=R?"visible":"hidden",K=R?"hidden":"visible",O=M||"",Q=function(){if(N.containerNode){N.containerNode.style.visibility=K;}},P=function(){if(N.warningNode&&N.warningText){N.warningNode.style.visibility=L;N.warningText.innerText=R?O:"";}};if(R){Q();P();}else{P();Q();}},onAppStateChange:function(K){var N=mstrmojo.vi.VisualInsightApp.APP_STATES,L=B.safeCall("mstrApp.isAppStatePause",window)()||C.walk("mstrConfig.resolveOnly",window),M=!!(K.valueWas&N.PAUSE);if(L!==M&&this.visible){this.toggleWarningDisplayForNonExecutableChapter();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Container","mstrmojo.vi.ui._IsDropTarget");mstrmojo.requiresDescs(11668,15187,15188,15189,15190);var H=mstrmojo.dom;var E=H.isTouchOptimizationEnabled()?[]:["click","mousemove","mouseleave"];function B(X,W,S){var U=W,R;for(;U>0;U--){R=Array(U+1).join("#");X=X?X.replace(R,S[U-1]):"";}return X;}var N='<div class="ghost-vis-txt-metric">',Q='<div class="ghost-vis-txt-attr">',M='<div class="ghost-vis-txt-attr-time">',J="</div>";var A={grid:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,Q,J,1,N,J]),heatmap:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,Q,J,1,N,J]),barchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),verticalbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),horizontalbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),verticalclusteredbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),horizontalclusteredbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),verticalstackedbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),horizontalstackedbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),verticalpercentbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),horizontalpercentbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),syncaxisbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,2,N,J]),matrixbarchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),linechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),dualaxislinechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,2,N,J]),stackedareachart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),absoluteareachart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),bubblechart:B(mstrmojo.desc(15190,"Add # or more ##metrics### and #### or more #####attributes######"),6,[2,N,J,1,Q,J]),piechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),ringchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),combochart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,2,N,J]),network:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,Q,J,1,N,J]),histogram:B(mstrmojo.desc(15667,"Add # or more ##attributes### and ####  #####metric######"),6,[1,Q,J,1,N,J]),boxplot:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),waterfall:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,Q,J,1,N,J]),kpicard:B(mstrmojo.desc(15878,"Add # or more ##attributes### and #### #####metric######"),6,[1,Q,J,1,N,J]),surveymonkey:mstrmojo.desc(17267,"Choose a survey from ## account, or insert a ## URL").replace(/##/gi,"SurveyMonkey"),surveygizmo:mstrmojo.desc(17267,"Choose a survey from ## account, or insert a ## URL").replace(/##/gi,"Alchemer"),amselector:B(mstrmojo.desc(16875,"Add #attributes## or ###metrics#### here"),4,[Q,J,N,J])};function G(R){return A[R]?A[R]:mstrmojo.desc(11668,"Drag objects here.");}mstrmojo.vi.ui.rw.GhostImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",markupString:('<div id="{@id}" class="mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}" mstrAttach="'+E+'"><div class="mstmojo-ghostImgTableCell"><div class="mstrmojo-ghostImgDiv"><div class="ghost-vis-img"></div><div class="ghost-vis-name">{@visName}</div><div class="ghost-vis-desc">{@visDesc}</div></div></div></div>'),markupSlots:{containerNode:function(){return this.domNode;}},visName:"",visDesc:"",deferDragEvents:false,dragDeferTarget:null,init:function P(R){if(this._super){this._super(R);}if(R.deferDragEvents){this.set("dropZone",true);}},ondeferDragEventsChange:function I(){this.set("dropZone",this.deferDragEvents);},allowDrop:function F(R){if(!this.deferDragEvents||!this.dragDeferTarget){return false;}R.isDeferred=true;return this.dragDeferTarget.allowDrop(R);},getDropData:function D(R){if(!this.deferDragEvents||!this.dragDeferTarget){return undefined;}R.isDeferred=true;return this.dragDeferTarget.getDropData(R);},ondragenter:function L(R){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}R.isDeferred=true;this.dragDeferTarget.ondragenter(R);},ondragleave:function O(R){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}R.isDeferred=true;this.dragDeferTarget.ondragleave(R);},ondragover:function C(R){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}R.isDeferred=true;this.dragDeferTarget.ondragover(R);},ondrop:function K(R){if(!this.deferDragEvents||!this.dragDeferTarget){return ;}R.isDeferred=true;this.dragDeferTarget.ondrop(R);}});mstrmojo.vi.ui.rw.GhostImageContainer.getVisDesc=G;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}" role="{@role}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.dom,B=mstrmojo.Enum_Keys;var F=function(){var K=this.opener;if(K.direction.toLowerCase()==="up"){this.domNode.style.top=-K.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,enableAccessibility:false,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}" mstrAttach:keydown><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function I(){if(this._super){this._super();}var K=this.popupRef;if(K){if(K.nudge){K.nudge=mstrmojo.func.composite([K.nudge,F]);}else{if(this.direction.toLowerCase()!=="down"){K.nudge=F;}}}},postBuildRendering:function A(){if(this._super){this._super();}},popupRef:null,popupOpenConfig:null,destroy:function H(K){var L=this.popupRef;if(L&&L.hasRendered){L.destroy(false);}if(this._super){this._super(K);}},togglePopup:function G(){var K=this._lastOpened;if(K&&K.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function J(K){this.togglePopup();},prekeydown:function E(K){var M=K&&K.e,L=M&&M.keyCode;if(this.enableAccessibility&&(L===B.SPACE||L===B.ENTER)){this.togglePopup();}},getTextInnerHTML:function D(){if(!this.allowHTML){this.text=mstrmojo.string.encodeHtmlString(this.text);}return this.text;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ui._HasUITheme","mstrmojo.Container","mstrmojo._HasPopup","mstrmojo.ui._HasUITheme");var B=mstrmojo.func,E=mstrmojo.dom,D=mstrmojo.ui._HasUITheme.EnumThemeNames,H="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function K(O){if(this._listenerProc){E.detachEvent(window,"resize",this._listenerProc);}this._super(O);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function F(){var O=this.getPopupWidget();if(!O||O._pbCfg){return ;}var P=function P(R,Q){return function(){R.apply(Q,arguments);};};O.onOpen=B.composite([P(this.onPopupWidgetOpened,this),O.onOpen||mstrmojo.emptyFn]);O.onClose=B.composite([P(this.onPopupWidgetClosed,this),O.onClose||mstrmojo.emptyFn]);O._pbCfg=true;},onclick:function M(O){if(this.isClickingAnchorSlot(O)){var P=this.getPopupWidget();if(!P.visible){this.openPopup(P);}else{this.closePopup();}}},forceOpen:function C(){var O=this.getPopupWidget();if(O){this.openPopup(O);}},isClickingAnchorSlot:function N(O){var P=O.getTarget();return P===this[this.anchorSlot]||P.parentNode===this[this.anchorSlot];},onPopupAutoClosed:function J(P,O){if(E.contains(this[this.anchorSlot],E.eventTarget(O,P),true)){return false;}},getPopupHostNode:function L(){return this.containerNode;},getPopupConfig:function I(){var P=[H],O=this.hostedCSSClass;if(O){P.push(O);}var Q=new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:P.join(" ")});return this.disposables?this.addDisposable(Q):Q;},unrender:function G(O){if(this._listenerProc){E.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(O);},postBuildRendering:function A(){var S=this.getPopupWidget();if(S){var W=this.getPopupConfig();if(!W.isHostedWithin){var Q=this.parent||this.opener,P=W.hostProxyCssClass.split(" ");P.push(this.domNode.className);while(Q){var U=Q.themeClassName;if(U){P.push(U);break;}Q=Q.parent||Q.opener;}if(W.useDarkTheme){P.splice(P.indexOf(D.LIGHT_THEME),1);P.push(D.DARK_THEME);}W.hostProxyCssClass=P.join(" ");}mstrmojo.Obj.free(S.popupConfig);S.popupConfig=S.addDisposable(W);}if(!((this.editableSlot||this.containEditableWidget)&&E.isMobile)){var O=S.id,R=this._listenerProc=function(){var X=mstrmojo.all[O];if(X&&X.visible&&X.adjustCornersForPopupOverflow){X.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){E.attachEvent(window,"resize",R);}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo.ui._HasScroller","mstrmojo._CanRenderChildrenOnShow");var A=mstrmojo.array;mstrmojo.StackContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._CanRenderChildrenOnShow,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.StackContainer",isStack:true,markupString:'<div id="{@id}" class="mstrmojo-StackContainer {@cssClass}" style="{@cssText}"></div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}},onborderChange:function(){this.domNode.style.border=this.border||"";},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{containerNode:function(){return this.domNode;}},_set_selected:function D(H,F){var G=this.selected;if(G===F){return false;}if(G){G.set("visible",false);}this.selected=F;if(F){F.set("visible",true);}return true;},addChildren:function B(J,G,H){var K=this.selected,L;for(var I=0,F=(J&&J.length)||0;I<F;I++){L=J[I];if(L&&L.set){L.set("visible",L===K);}}return this._super(J,G,H);},removeChildren:function C(H,F){var G=this._super(H,F);if(!H||(H===this.selected)){this.set("selected",null);}return G;},destroy:function E(F){this._super(F);this.selected=null;},renderMode:"onshow"});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.Label","mstrmojo.dom","mstrmojo.desc");mstrmojo.requiresDescs(514,28178);var B=mstrmojo.dom;mstrmojo.vi.ui.GenerateURLIndicator=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.vi.ui.GenerateURLIndicator",cssClass:"mstrmojo-generate-url-indicator",markupString:'<div id="{@id}" class="{@cssClass} mask" mstrAttach:click><div class="{@cssClass} inner"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},innerNode:function(){return this.domNode.firstChild;}},clickFn:null,isDynamicValueSupported:false,setDynamic:function C(D){this.dynamicButton.domNode.classList.toggle("selected",D);},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(514,"Selected"),cssClass:"selectedLabel",slot:"innerNode"},{scriptClass:"mstrmojo.Widget",visible:false,markupString:'<button class="dynamicButton" mstrAttach:click></button>',useRichTooltip:true,tooltipOpenDelay:100,alias:"dynamicButton",slot:"innerNode",updateTooltipConfig:function(E){var D='<div class="mstrmojo-generate-url-dynamic-tooltip-content">'+mstrmojo.desc(28178,"By turning it on, the value or element chosen from the source dashboard will be dynamically passed to this filter/selector.")+"</div>";var F=B.position(this.domNode);this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center mstrmojo-generate-url-dynamic-tooltip",content:D,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,top:F.h+12,left:F.w/2};if(E.stopPropagation){E.stopPropagation();E.cancelBubble=true;}},onclick:function(D){D.e.stopPropagation();if(this.parent.onDynamicButtonClick){this.parent.onDynamicButtonClick();}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}}}],onclick:function(D){D.e.stopPropagation();if(this.clickFn){this.clickFn();}},preBuildRendering:function A(){this._super();if(this.isDynamicValueSupported){this.dynamicButton.visible=true;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ErrorDialogContent","mstrmojo.css","mstrmojo.DI.DIConstants");mstrmojo.requiresDescs(14058,14059,20218);var D=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details");mstrmojo.ui.editors.LinkErrorDialogContent=mstrmojo.declare(mstrmojo.ui.editors.ErrorDialogContent,null,{scriptClass:"mstrmojo.ui.editors.LinkErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">{@shortLinkMsg}</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@longDesc}</div><div class="contact">{@longLinkMsg}</div></div></div>',markupMethods:{onshowDetailsChange:function(){var F=this.showDetails;this.toggleDetailsNode.innerHTML=F?A:E;D.toggleClass(this.domNode,"show-details",F);if(this.longLinkMsg){D.toggleClass(this.longLinkMsgNode,"invisible",!F);}this.updateScrollbars();}},markupSlots:{scrollNode:function(){return this.domNode.firstChild;},shortLinkMsgNode:function(){return this.domNode.firstChild.children[1];},shortLinkNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},longLinkMsgNode:function(){return this.domNode.firstChild.children[4];},longLinkNode:function(){return this.domNode.firstChild.children[4].getElementsByClassName("dyn-link")[0];},},shortLinkMsg:undefined,shortLinkFn:undefined,longLinkMsg:undefined,longLinkFn:undefined,onclick:function C(F){var G=F.getTarget();if(G===this.shortLinkNode&&this.shortLinkFn instanceof Function){this.shortLinkFn();}else{if(G===this.longLinkNode&&this.longLinkFn instanceof Function){this.longLinkFn();}else{if(G===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}}},preBuildRendering:function B(){if(this._super){this._super();}this.shortLinkMsg=this.shortLinkMsg&&this.shortLinkMsg.replace("{",'<span class="dyn-link">').replace("}","</span>");this.longLinkMsg=this.longLinkMsg&&this.longLinkMsg.replace("{",'<span class="dyn-link">').replace("}","</span>");},postBuildRendering:function(){if(!this.showToggle){D.addClass(this.toggleDetailsNode,"hide");}D.addClass(this.longLinkMsgNode,"invisible");if(!this.shortLinkMsg){D.addClass(this.shortLinkMsgNode,"invisible");}}});})();(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var G=mstrmojo.dom,H=mstrmojo.hash,B,A={DUMMY:"dummy",SAMPLE_QUESTION:"sample-question",SUGGESTION:"suggestion"};mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(J,I){if(!B){var L=this.itemField,K=(this.allowHTML?"":"@en");B=this._super(J).replace(K+'@title}">{'+K+"@n}<",K+"@"+L+'}">{'+K+"@"+L+"}<");}return B;},getItemProps:function D(K,I){var J=this._super(K,I),L=this.itemField;if(!mstrmojo.string.isEmpty(K[L])){J[L]=K[L];}return J;},preClick:function F(I){var M=this,K=this.parent,L=K.opener,J=G.isMetaKey(I.hWin,I.e);if(J&&!this.multiSelect){this.multiSelect=L.parent.defn.multi;if(this.multiSelect){G.attachOneTimeEvent(document.documentElement,"keyup",function(){var O=M.selectedIndices;if(L){L.suggestionShown=false;if(O&&!H.isEmpty(O)){var N=[];H.forEach(M.selectedIndices,function(Q,P){N.push(M.items[P]);});L.handleSuggestionItemSelect(N);}K.close();}M.multiSelect=false;});}}},postClick:function E(I){var J=this.parent,L=J.opener;if(!this.multiSelect){L.suggestionShown=false;var K=this.selectedItem;if(K){L.handleSuggestionItemSelect(K);}J.close();}},onclick:function C(I){if(this.disableClick){return false;}if(typeof this.preClick==="function"){this.preClick(I);}this._super(I);if(typeof this.postClick==="function"){this.postClick(I);}},bindings:{itemField:function(){return this.parent.opener.itemField;},items:function(){return this.parent.opener.suggestionItems;},disableClick:function(){return this.parent.opener.disableClick;}}});mstrmojo.SuggestionList.ENUM_SUGGESTION_TYPE=A;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var A;mstrmojo.ui.editors.controls.ColorList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.editors.controls.ColorList",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ColorList");},getItemMarkup:function C(F,E){if(!A){A=this._super(F,E).replace(">{@en@n}<",">{@en@msg}<");}return A;},getItemProps:function B(G,E){var F=this._super(G,E);if(G.id==="transparent"){F.msg=mstrmojo.desc(5774,"No Fill");F.addCls("noFill");}else{F.msg="";G.title=G.n;F.addStyle("background-color:"+G.id);}return F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(C){if(C&&C.className){C.className+=" selected";}},unselect:function(C){if(C&&C.className){C.className=C.className.replace(/selected/g,"");}},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(K){var G=K.hWin,H=K.e,F=this._findMatch(G,H);if(F){var J=parseInt(F.value,10),I=mstrmojo.dom,C=I.isMetaKey(G,H),D=I.shiftKey(G,H);if(C||D){I.clearBrowserHighlights(G);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var E=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(J);if(E&&J<this.items.length&&this.selectedIndices[J+1]){J++;}this.selectedIndex=J;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(J);}else{this.singleSelect(J);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var H=this.itemsNode,G=this.renderAllItems,F=H&&H.tBodies,E=G?0:Math.floor(C/100),D=G?C:C%100,I=F&&F[E]&&F[E].rows&&F[E].rows[D];return I&&I.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.dom","mstrmojo.vi.util.A11yUtility","mstrmojo.css");var E=mstrmojo.css,K=mstrmojo.vi.util.A11yUtility,C=mstrmojo.dom;mstrmojo.ui.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.ButtonBar",enableAccessibility:false,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenabledChange:function G(){E.toggleClass(this.domNode,"disabled",!this.enabled);}},cssDisplay:"table",icnCssText:"display:table-row;",items:null,showIcon:true,hasSpacing:false,cssItemMarkup:undefined,textItemMarkup:undefined,init:function J(M){this._super(M);var L=["mstrmojo-ui-ButtonBar"];if(this.hasSpacing){L.push("spacing");}if(!this.showIcon){L.push("btn-text");}E.addWidgetCssClass(this,L);},toggleFocusForSelectedItem:function B(M){var L=this._getItemNode(this.selectedIndex);if(!L){return ;}E.toggleClass(L,K.CSS_FOCUS_VISIBLE,M);if(M){L.focus();}else{L.blur();}},postBuildRendering:function A(){this._super();if(!this.enableAccessibility){return ;}this.domNode.tabindex=-1;this.focusOutFn=function(){this.toggleFocusForSelectedItem(false);}.bind(this);C.attachEvent(this.domNode,"focusout",this.focusOutFn);if(this.accessibilityHook){this.accessibilityHook();}},destroy:function H(){this._super();if(this.focusOutFn){C.detachEvent(this.domNode,"focusout",this.focusOutFn);}},grabFocus:function(){if(!this.enableAccessibility){return ;}this.toggleFocusForSelectedItem(true);},loseFocus:function(){if(!this.enableAccessibility){return ;}this.toggleFocusForSelectedItem(false);},onkeydown:function D(M){var O=M.e||M,N=O.key;if(!this.enableAccessibility){M.preventDefault();O.stopPropagation();return ;}if(N==="Tab"||N==="Escape"){return ;}M.preventDefault();O.stopPropagation();var L;if(N==="ArrowLeft"){this.toggleFocusForSelectedItem(false);if(this.selectedIndex<=0){L=this.items.length-1;}else{L=this.selectedIndex-1;}this.set("selectedIndex",L);this.toggleFocusForSelectedItem(true);}else{if(N=="ArrowRight"){this.toggleFocusForSelectedItem(false);if(this.selectedIndex>=this.items.length-1){L=0;}else{L=this.selectedIndex+1;}this.set("selectedIndex",L);this.toggleFocusForSelectedItem(true);}}},getItemMarkup:function I(L){if(!this.textItemMarkup){this.textItemMarkup=this._super(L);if(this.enableAccessibility){this.textItemMarkup=this.textItemMarkup.replace("title=",'tabindex="-1" title=');}}if(!this.cssItemMarkup){this.cssItemMarkup=this.textItemMarkup.replace(">{@en@n}<",'title="{@en@n}"><div>&nbsp;</div><');}return this.showIcon&&!L.tx?this.cssItemMarkup:this.textItemMarkup;},getItemProps:function F(N,L){var M=this._super(N,L);var O=N.css;if(O){M.addCls(O);}M.n=N.n||"";return M;}});mstrmojo.ui.ButtonBar.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo._CanHandleTwoClicks","mstrmojo.Label","mstrmojo.Widget");var C=mstrmojo.css,A=mstrmojo.Label.prototype.markupMethods;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._CanHandleTwoClicks,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',markupMethods:mstrmojo.hash.copy({onwidthChange:function(){mstrmojo.Widget.widthMarkupMethod.call(this);},ontextChange:function(){if(A.ontextChange){A.ontextChange.call(this);}this.widgetResized();},onvisibleChange:function(){if(A.onvisibleChange){A.onvisibleChange.call(this);}if(this.visible){this.widgetResized();}}},mstrmojo.hash.copy(A)),onkeyup:function E(F){this._super(F);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var G=this;this._autoApplyTimer=window.setTimeout(function(){G.set("isEditing",false);},this.autoApplyDelay);}},postBuildRendering:function D(){if(this._super){this._super();}this.widgetResized();},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function B(){var G=this[this.editableSlot],F=!!this.selectable;G.selectable=F;G.setAttribute("unselectable",!F?"on":"off");C.toggleClass(G,"unselectable",!F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj","mstrmojo.mobile.VisRenderProfiler");var L=mstrmojo.hash,X=mstrmojo.mobile.VisRenderProfiler;var S=0;var F=[];var K={};var M=false;var H=false;function J(Z){var a=Z.callback;if(a.submission){a.submission(Z.id,this.userInteractionRequired(Z),Z);}this.submitRequest(Z);}function G(){if(F.length&&!M&&!H){J.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(j,g,a,b){if(a){this.cancelRequests();}var d=this.id,e=this.transport,Z=mstrmojo.now()+g.taskId+S++,c=j.canceled||mstrmojo.emptyFn;j.canceled=function(k){c();j.complete(true);return e.cancelRequest(k);};j=mstrmojo.func.wrapMethods(j,{complete:function(k){mstrmojo.all[d]&&mstrmojo.all[d].deleteRequest(k);}});var f=!L.isEmpty(this._requests),h=this.createRequest(Z,j,g,b),i=(M||f||H)&&!b.doNotHold;if(i){F.push(h);}else{J.call(this,h);}return Z;},hasRequests:function Q(){return !L.isEmpty(this._requests)||M;},createRequest:function U(b,d,c,Z){var a=this._requests;if(!a){a=this._requests={};}a[b]={id:b,callback:d,params:c,config:Z};return a[b];},submitRequest:function N(Z){this.transport.serverRequest(this.id,Z.id,Z);},cancelRequests:function Y(){var Z=false;L.forEach(this._requests,function(a){if(a.gotResponse===undefined){Z|=a.callback.canceled(a.id);}});this._requests={};F=[];return Z;},cancelRequest:function C(d){var a=false,c=this._requests[d],b,Z=F.length;for(b=0;b<Z;b++){if(F[b]===c){break;}}if(b<Z){F.splice(b,1);delete this._requests[d];a|=c.callback.canceled(c.id);}return a;},response:function A(f,a,b){$MAPF(false,"AndroidServerTransport","transportRequest");var e=this,d=this.getRequest(f);var Z=function(){if(d){d.gotResponse=true;var h=d.callback,g=(a&&!b.mstrerr)?"success":"failure";try{if(h[g]){h[g](b,d);}}finally{h.complete(f);}X.triggerRenderProfile(X.MARKS.RESPONSE_RETURNED);}G.call(e);};var c;if(window.mstrApp&&mstrApp.loadAICubesStatus){c=function(){mstrApp.loadAICubesStatus(d,b,Z);};}else{c=Z;}if(mstrmojo.dynamicBundleUtils.isAsyncLoadingEnabled()&&window.mstrApp&&mstrApp.loadDynamicBundles){mstrApp.loadDynamicBundles(d,b,c);}else{c();}},deleteRequest:function P(a){var Z=this._requests;delete Z[a];},getRequest:function I(a){var Z=this._requests;return Z&&Z[a];},userInteractionRequired:function B(Z){return false;},addLoadingGraph:function D(Z){K[Z]=true;M=true;},removeLoadingGraph:function W(Z){delete K[Z];if(L.isEmpty(K)){M=false;G.call(this);}},pauseSubsequentRequst:function R(){H=true;},resumeSubsequentRequst:function O(){H=false;G.call(this);},_serverRequestParallel:function(a,c,d,Z){var b=Z||new mstrmojo.SimpleXHR();b.request("POST",a,{success:function(e){if(d.success){d.success(e);}},failure:function(e){if(d.failure){d.failure({code:e.getResponseHeader("X-MSTR-TaskErrorCode"),message:e.getResponseHeader("X-MSTR-TaskFailureMsg")});}},complete:function(){if(d.complete){d.complete();}}},c);},serverRequestParallel:function(a,b,Z){this._serverRequestParallel(mstrConfig.taskURL,a,b,Z);},upload:function(f,e,d,a,c,b,Z){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,f,e,d,a,c,b,Z);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}if(H===F){break;}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.ServerProxy");mstrmojo.ME.WorkstationPluginProxy=mstrmojo.declare(mstrmojo.ServerProxy,null,{workstationEnv:null,createRequest:function(B,D,C,A){return this._super(B,D,C,A);},serverRequestParallel:function(C,D,A){var B=mstrmojo.hash.copy(C);B.taskContentType=B.taskContentType||"json";B.taskEnv=B.taskEnv||"xhr";this.request(D,C,false,{});},upload:function(J,E,G,D,B,C,A){if(G===null){this.request(J,E,undefined,D);}else{var H=new FileReader();var I=this;var F=function(){H.onload=null;};if(!this.fileReaderUnloader){this.fileReaderUnloader={};}this.fileReaderUnloader[E.tableID]=F;if(E.fileFieldName){E[E.fileFieldName]=G;}else{E.myFile=G;}I.request(J,E,undefined,D);}},cancelFileReader:function(C){var B=this.fileReaderUnloader||{};var A=B[C];if(A){A();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom,F=mstrmojo.string;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(I,G){var H=this.items;this.items=G||[];return H!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var H=this.value,G=this.selectedIndex,J=this.items||[],K,I;if(G===undefined||(H!==null&&(G===-1||(G!==-1&&J[G]&&J[G][this.itemIdField]!==H)))){G=mstrmojo.array.find(J,this.itemIdField,H);G=(G>-1)?G:this.defaultSelection;this.selectedIndex=G;}else{if(H===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=K=J[this.selectedIndex];if(K){I=K[this.itemField];}else{I=this.defaultText||"";}this.set("text",I);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var H=this.value,G=-1;if(H!==null){G=mstrmojo.array.find(this.items,this.itemIdField,H);}if(G>-1){this.selectedItem=this.items[G];this.selectedIndex=G;}},togglePopup:function E(){if(this.popupToBody){var J=B.position(this.popupNode,true),I=this.popupRef,G={left:Math.round(J.x)+"px",top:Math.round(J.y)+"px"};if(!I.hasRendered){delete I.slot;G.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(G,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var H=this.popupRef.domNode;if(H){if(this.fixWidth){H.style.width=(this.domNode.offsetWidth-2)+"px";}else{H.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(G){if(B.getButton(G.hWin,G.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(G){var H=this.popupRef;if(this.popupToBody&&H.hasRendered){H.unrender(false);}if(this._super){this._super(G);}},itemName:function(I,G,H){return this.allowHTML?I[H.itemField]:F.encodeHtmlString(I[H.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var H=this.opener,G=this.domNode;if(H&&H.fixWidth){mstrmojo.css.addClass(G,["fix-width"]);}if(H&&H.fixHeight){mstrmojo.css.addClass(G,["fix-height"]);}},onOpen:function(){var I=this.opener,H=I&&I.popupZIndex,J=(I&&I.popupCssClass)||"",G=this.domNode;if(H){G.style.zIndex=H;}if(J){mstrmojo.css.addClass(G,[J]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(M,G,I){var L=I.parent.opener,K=M[I.itemCSS]||L.item2textCss&&L.item2textCss(M)||"",N=L.itemName,J=M[I.itemTitleField||I.itemField],H=L.allowHTML?J:F.encodeHtmlString(J);return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+K+'" title="'+H+'">'+(N(M,G,I)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:function(){return this.parent.opener.itemIdField;},itemField:function(){return this.parent.opener.itemField;},itemCSS:function(){return this.parent.opener.itemCSS;},itemTitleField:function(){return this.parent.opener.itemTitleField;},items:function(){return this.parent.opener.items;},selectionPolicy:function(){return this.parent.opener.selectionPolicy;},selectedIndex:function(){return this.parent.opener.selectedIndex;}},onmousedown:function(){this.parent.close();},onchange:function(){var I=this.parent,J=I.visible,G=I.opener,H=this.selectedItem;if(!G||!H||!J){return ;}G.set("value",H[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var G=F[this.itemType],H=F[this.itemSubType],E=F[this.itemExtType],C=" t"+G,B=(parseInt(G,10)===1||parseInt(G,10)===3||parseInt(H,10)===14082)?" st"+H:"",A=parseInt(E,10)===448||parseInt(E,10)===4097?" et"+E:"",D=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",I=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+C+B+A+I+'"><span '+D+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemExtType:"et",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.ButtonBar");var C={JUSTIFY:6,LEFT:0,RIGHT:1,CENTER:2};mstrmojo.vi.ui.TextAlignButtonBar=mstrmojo.declare(mstrmojo.ui.ButtonBar,null,{scriptClass:"mstrmojo.vi.ui.TextAlignButtonBar",includeJustify:true,init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"txtAlign");var E=this.itemsValueMap,D=this.items;if(!this.includeJustify){D=D.filter(function(G){return G.id!=="justify";});}this.items=D.map(function(H){var G=mstrmojo.hash.copy(H);G.v=E[G.id];return G;});},onValueChange:mstrmojo.emptyFn,itemsValueMap:{left:0,center:2,right:1,justify:6},items:[{n:mstrmojo.desc(3049,"Left"),id:"left"},{n:mstrmojo.desc(2193,"Center"),id:"center"},{n:mstrmojo.desc(2166,"Right"),id:"right"},{n:mstrmojo.desc(2068,"Justify"),id:"justify"}],getItemProps:function A(F,D){var E=this._super(F,D);E.addCls(F.id);return E;},postselectionChange:function(D){var E=this.items,F=E[D.added[0]],G=E[D.removed&&D.removed[0]];this.onValueChange(F.v,G&&G.v);}});mstrmojo.vi.ui.TextAlignButtonBar.TEXT_ALIGN=C;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);if(M.attachEventListenersToPages){M.attachEventListenersToPages(N);}}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],b=this._pageHeight,d=null,Y=this._pageStatus,a=this;function R(e){var f=Y[e];if(f&&f.filled){if(!f.height){if(!d){d=a.itemsNode.tBodies;}f.height=d[e].offsetHeight;}return f.height;}return b;}var c=0,S=null,O=null,M=this.scrollboxTop;for(var X=0,Z=this._totalPages;X<Z;X++){c+=R(X);if(c>=M){S=X;break;}}if(S==null){S=O=Z-1;}else{var L=this.scrollboxBottom;for(var U=S+1;U<Z;U++){if(c>=L){O=U-1;break;}c+=R(U);}}if(O==null){O=Z-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var W=Y[Q];if(!W||!W.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var X=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(X[R]&&X[R].filled)){return ;}}var W=this._rowsPerPage,L=R*W,N=Math.min(L+W,this._rc)-1;var U=this.tempTableCont;if(!U){U=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';U.innerHTML=Q;var O=U.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.dom","mstrmojo.vi.util.A11yUtility","mstrmojo._IsAccessibleList","mstrmojo.string","mstrmojo.css");var S=mstrmojo.css,Q=mstrmojo.vi.util.A11yUtility,P=mstrmojo.Enum_Keys,B=mstrmojo.string;var W;var A;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller,mstrmojo._IsAccessibleList],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" aria-label="{@en@ariaLabel}" tabindex="-1" mstrAttach:click,contextmenu,keydown><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function L(){return this.domNode.firstChild;},itemsContainerNode:function U(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function F(){S.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function K(){S.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function C(){S.toggleClass(this.domNode,"disabled",!this.enabled);},onhideCheckMarkChange:function I(){S.toggleClass(this.domNode,"hideCheckMark",this.hideCheckMark);},onariaLabelChange:function(){this.domNode.setAttribute("aria-label",B.encodeHtmlString(this.ariaLabel,true));}},multiSelect:true,hideCheckMark:false,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,listRole:"application",listRoleDesc:mstrmojo.desc(25778,"checkbox list"),itemContainerRole:"menu",itemRole:"checkbox",itemSelectedAriaProp:"aria-checked",getItemMarkup:function G(a,Z){var b=(this.allowHTML?"":"@en");if(this.parent&&this.parent.isICS){if(!A){A=this._super(a).replace(">{@en@n}<",'><span class="checkboxIcon"></span><span class="text">{@en@n}</span><').replace('title="{'+b+'@title}"','title="{@en@tt}"');}return A;}if(!W){W=this._super(a).replace(">{@en@n}<",'><span class="text">{@en@n}</span><').replace('title="{'+b+'@title}"','title="{@en@tt}"');}return W;},getItemProps:function X(c,a){var b=this._super(c,a),Z={"\r\n":" ","\n":" ","\r":" "};var d=c.css;if(d){b.addCls(d);}b.tt=c.tt||"";c.n=mstrmojo.string.multiReplace(c.n,Z);b.n=c.n||"";return b;},postBuildRendering:function R(){if(this._super){this._super();}this.resetKeydownIndex();},onvisibleChange:function(Z){if(this._super){this._super(Z);}this.updateItemStyle(Z.value);},refresh:function H(Z){if(this._super){this._super(Z);}if(this.navMode){if(this.domNode){this.domNode.focus();}this.updateItemStyle(true);}},resetKeydownIndex:function(){var a=Object.keys(this.selectedIndices),Z=a.length;this.keydownIndex=Z>0?parseInt(a[0]):0;},setKeydownIndex:function(){this.keydownIndex=0;},grabFocus:function O(Z){if(!this.enableAccessibility){return ;}var a=this.domNode;if(Z){a.focus();}this.navMode=true;this.updateItemStyle(true);},loseFocus:function E(a){if(!this.enableAccessibility){return ;}this.updateItemStyle(false);var Z=this.domNode;if(a){Z.blur();}this.navMode=false;},setupScrollNodes:function N(){this.scrollNode=this.scrollboxNode;},getA11yCSS:function(){return this.navMode?[Q.CSS_FOCUS_VISIBLE]:[];},arrowKeySupported:function(Z){return Z===P.DOWN_ARROW||Z===P.UP_ARROW||Z===P.END||Z===P.HOME;},onclick:function Y(Z){var a=false;if(this._super){a=this._super(Z);}if(this.enableAccessibility&&!this.multiSelect){this.keydownIndex=this.selectedIndex;}return a;},onkeydown:function M(Z){var b=Z.e||hWin.event;if(!this.enableAccessibility){return ;}if(this._super){this._super(Z);}if(b.keyCode===P.ENTER||b.keyCode===P.SPACE||(!this.multiSelect&&(b.keyCode===P.DOWN_ARROW||b.keyCode===P.UP_ARROW))){Z.cancel();Z.preventDefault();var a=this.items[this.keydownIndex];if(a){this.doItemSelect(a,Z);}}},preselectionChange:function D(a){var b=this.minimumSelectCnt,Z=this.getSelectedItems().length,c=a.removed;if(c&&b){if(Z<b){this.select(c,true);return false;}}S.toggleClass(this.itemsContainerNode,"disableSelected",Z<=b);return true;},buildRendering:function J(){this._super();S.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu,keydown><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function E(){return this.domNode.firstChild;},scrollNode:function F(){return this.domNode.firstChild;}},postBuildRendering:function B(){var G=this.parent;if(this.renderOnScroll){if(!this.onScrollEnd){var I=this.id;this.onScrollEnd=function H(){var J=mstrmojo.all[I];J.doScroll();J.updateScrollbars();};}}if(this._super){this._super();}if(this.enableAccessibility&&G.canTab&&G.navList.length&&this.getNavList){G.navList=this.getNavList();if(this.isTabItemHighlighting&&this.isTabItemHighlighting()){G.restoreFocus();}}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,onkeydown:function D(G){var H=G.e||G;if(!this.enableAccessibility){G.preventDefault();H.stopPropagation();}if(this._super){return this._super(G);}},doScroll:function A(){if(this.renderOnScroll){var I,K=this.scrollNode,G=(this.renderIndex+1)*this.renderBlockSize;if(G>=this.items.length){return ;}if(mstrmojo.dom.position(K).h===K.scrollHeight){I=this.domNode;}else{I=K;}var H=mstrmojo.dom.position(I).h+I.scrollTop,J=0;if(window.devicePixelRatio&&window.devicePixelRatio<1){J=Math.ceil(1/window.devicePixelRatio)-1;}H=Math.ceil(H)+J;if(H>=I.scrollHeight){this.renderIndex++;var L=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");this.itemsContainerNode.innerHTML+=L;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,W,U){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=W[S.itemField];var P=mstrmojo.string.escape4HTMLText,X="";if(Q){var M=W.anc&&W.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){X+=M[L].n+" > ";}X+=P(M[O-1].n);}else{if(W.path){X+=P(W.path);}}}if(!U){if(W.st===8704){X+=(X.length===0?"":" > ")+P(W.ab);}else{X+=(X.length===0?"":" > ")+P(I);}}if(J){var N=W[S.itemDescField],K=120;if(N){X+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return X;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var M=J.path||J.getAttribute("path");if(M){I.set("path",K.path);return ;}var L={success:function(O){var P=H(O.toString())||"";K.path=P;I.set("path",P);}},N={taskId:"getObjectDetails",objectID:K.did,objectType:K.t};if(mstrApp.isWorkstationPlugin){mstrApp.workstationDataFetchTaskProc&&mstrApp.workstationDataFetchTaskProc(N).then(function(O){L.success(O);});}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,L,N,undefined);}},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,mstrApp.isWorkstationPlugin?!!this.path.excludeSelf:this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.SelectBox","mstrmojo._CanValidate","mstrmojo.MetricSelectorUtility");var D=mstrmojo.MetricSelectorUtility,K=mstrmojo.validation,G=mstrmojo.expr,E=mstrmojo.num,N=D.OP,F=[{n:mstrmojo.desc(2795,"Equals"),v:N._EQUALS},{n:mstrmojo.desc(2796,"Does not equals"),v:N._NOT_EQUALS},{n:mstrmojo.desc(521,"Greater than"),v:N._GREATER},{n:mstrmojo.desc(522,"Greater than or equal to"),v:N._GREATER_EQUAL},{n:mstrmojo.desc(523,"Less than"),v:N._LESS},{n:mstrmojo.desc(524,"Less than or equal to"),v:N._LESS_EQUAL},{n:mstrmojo.desc(519,"Between (enter value1;value2)"),v:N._BETWEEN},{n:mstrmojo.desc(614,"Not between (enter value1;value2)"),v:N._NOT_BETWEEN},{n:mstrmojo.desc(898,"In (enter value1;value2; ...;valueN)"),v:N._IN},{n:mstrmojo.desc(2394,"Not In (enter value1;value2; ...;valueN)"),v:N._NOT_IN},{n:mstrmojo.desc(2202,"Is null"),v:N._IS_NULL},{n:mstrmojo.desc(2203,"Is not null"),v:N._IS_NOT_NULL}],L=F.slice(0,10),J="padding:2px 2px 2px 2px",H=F.slice(10,12);var C=function(b,S,U,X,W){var Y;if(W===2){return S;}var c=String(b).split(";"),Z=K.STATUSCODE.INVALID_VALIDATOR,R=K.STATUSCODE.VALID;if(X&&c&&c.length>1){S.code=Z;}else{for(Y=0;Y<c.length;Y++){var a=parseFloat(c[Y],10);if(isNaN(a)||(U&&((c[Y].match(/^\d+(\.\d+)?%$/)===null&&c[Y].match(/^\d+(\.\d+)?$/)==null)||a<0||a>100))||(!U&&c[Y].match(/\d+$/)===null)){S.code=Z;}if(S.code!==R){break;}}}if(S.code!==R){S.msg=mstrmojo.desc(6103,"Please fix any invalid data");}return S;};var M=function(R){R=parseFloat(R);return isNaN(R)?"54px":((R*72/16)+"pt;");},Q=function(U){if(U.hasRendered){var S=U.domNode.style;S.font=U.font;S.width=M(S.fontSize);}else{var R=U.font.match(/[^\s]*?pt/)||[];U.cssText=U.cssText+" font:"+U.font+"; width:"+M(R[0]);}},I=function(R){if((R>=8&&R<=16)||(R>=23&&R<=25)){return false;}return true;};mstrmojo.MetricQualification=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.MetricQualification",cssClass:"qs",cssText:"width:100%",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},getClientHeight:function P(){return this.domNode.clientHeight+2;},rows:1,cols:4,layout:[{cells:[{cssText:"width:100%"},{cssText:"width:56px"},{cssText:"width:56px"},{cssText:"width:18px"}]}],init:function(R){if(this._super){this._super(R);}this._init();},_init:function(U){var S;switch(this.qua){case 0:this.low=(this.da&&this.da.low)||0;this.high=(this.da&&this.da.high)||0;break;case 1:case 2:this.low=1;this.high=(this.da&&this.da.cnt)||0;break;case 3:case 4:this.low=0;this.high=100;break;}if(U){this.cs=[];this.f=this.ft=null;}var X=D.getOpIdxByfunc(this.f,this.ft),W=I(this.dt)?N._GREATER_EQUAL:N._IS_NULL;this.set("opId",(X==-1)?W:X);var R=(this.cs&&this.cs.length>0)?E.toLocaleString(this.cs[0].v):"";if(this.opId===N._IN||this.opId===N._NOT_IN){for(S=1;S<this.cs.length;S++){R+=";"+E.toLocaleString(String(this.cs[S].v));}}else{this.set("cs2",(this.cs&&this.cs.length>1)?E.toLocaleString(this.cs[1].v):"");}this.set("cs1",R);this.vldTbL.validate();this.vldTbH.validate();this.changeQual=false;},updateData:function B(R,S){this.da=R;this.updateExpr(S);},updateExpr:function A(R){if(R){this.cs=R.cs;this.f=R.f;this.ft=R.ft;this.qua=R.qua;}this._init();},onquaChange:function O(R){this._init(true);this.func.items=(this.qua!==0)?L:I(this.parent.dt)?F:H;this.func.refresh();this.changeQual=true;this.onchange();},children:[{slot:"0,0",alias:"func",scriptClass:"mstrmojo.SelectBox",cssText:"width:100%",size:1,bindings:{sv:function(){return this.parent.opId;},font:function(){return this.parent.font;}},onfontChange:function(){if(this.hasRendered){this.domNode.style.font=this.font;}else{this.cssText="width:100%;font:"+this.font;}},onsvChange:function(){if(this.sv!==null&&this.sv!==undefined){this.set("selectedItem",{v:this.sv});}},postCreate:function(){if(mstrmojo.dom.isIE){this.itemDisplayField="n";this.showItemTooltip=true;}this.items=(this.parent.qua!==0)?L:I(this.parent.dt)?F:H;},onchange:function(){var S=this.parent,U=this.selectedItem;if(U&&U.v!==null&&U.v!==undefined){var R=D.getIncludeByOp(U.v);S.include=R;if(S.parent&&R!==S.parent.include){S.changeInclude=true;}else{S.changeInclude=false;}S.set("opId",U.v);}if(mstrApp.isMobile&&(U.v===N._IS_NULL||U.v===N._IS_NOT_NULL)){if(S.onchange){S.onchange();}}}},{slot:"0,1",alias:"vldTbL",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},U=this.parent;C(R,S,(U.qua===3||U.qua===4),(U.opId!==8&&U.opId!==9),(U.numFmts&&U.numFmts.cat));return S;}},bindings:{visible:function(){return this.parent.opId!=10&&this.parent.opId!=11;},value:function(){return this.parent.cs1;},font:function(){return this.parent.font;}},onfontChange:function(){Q(this);},onValid:function(){var S=this.parent,R=this.domNode;S.set("cs1",this.value);if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs1","");}},onkeyup:function(S){var R=S.hWin,X=S.e||R.event,W=this.parent,U=S.src.domNode;if(X.keyCode===13&&W.apply&&W.apply.enabled){W.apply.onclick();}}},{slot:"0,2",alias:"vldTbH",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},U=this.parent;C(R,S,(U.qua===3||U.qua===4),(U.opId!==8&&U.opId!==9),(U.numFmts&&U.numFmts.cat));return S;}},bindings:{visible:function(){return this.parent.opId==7||this.parent.opId==6;},value:function(){return this.parent.cs2;},font:function(){return this.parent.font;}},onfontChange:function(){Q(this);},onValid:function(){this.parent.set("cs2",this.value);var R=this.domNode;if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs2","");}},onkeyup:function(S){var R=S.hWin,W=S.e||R.event,U=this.parent;if(W.keyCode===13&&U.apply&&U.apply.enabled){U.apply.onclick();}}},{slot:"0,3",alias:"apply",title:mstrmojo.desc(2164,"Apply"),scriptClass:"mstrmojo.Button",cssClass:"icn apply",bindings:{enabled:function(){return(!this.parent.vldTbL.visible||!this.parent.vldTbL.validationStatus.code)&&(!this.parent.vldTbH.visible||!this.parent.vldTbH.validationStatus.code);}},onclick:function(){var U=this.parent,Y=(U.qua===D.Q._PT||U.qua===D.Q._PB),R;U.cs=[];var W=function(Z){return Z+((Y&&!String(Z).match(/^\d+%$/))?"%":"");};var S=function(Z,a){return((Z===2||Z===3)&&a===0)?14:5;};if(U.opId===N._IN||U.opId===N._NOT_IN){var X=String(U.cs1).split(";");for(R=0;R<X.length;R++){if(!mstrmojo.string.isEmpty(X[R])){U.cs.push({dtp:5,v:W(X[R])});}}}else{if(U.vldTbL.visible){U.cs.push({dtp:S((U.numFmts&&U.numFmts.cat),U.qua),v:W(U.cs1)});}if(U.vldTbH.visible){U.cs.push({dtp:S((U.numFmts&&U.numFmts.cat),U.qua),v:W(U.cs2)});}}if(U.onchange){U.onchange();}if(U.makeSelection){U.makeSelection();}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.VBox","mstrmojo.HBox","mstrmojo.CheckBox","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.vi.enums.EnumDSSSmartAttribute","mstrmojo.vi.util.NumberFormatUtility");var K=mstrmojo.array,J=mstrmojo._FormatDefinition,N=J.NumberFormatCategory,I=mstrmojo.locales,B=mstrmojo.date,H=mstrmojo.vi.util.NumberFormatUtility,M="1234.12",F=mstrmojo.vi.enums.EnumDSSSmartAttribute;var D={};D[F.DssSmartAttribute15MinInterval]=mstrmojo.desc(26265,"15 Minutes");D[F.DssSmartAttribute30MinInterval]=mstrmojo.desc(26266,"30 Minutes");D[F.DssSmartAttributeHourInterval]=mstrmojo.desc(10042,"Hour");D[F.DssSmartAttributeDayInterval]=mstrmojo.desc(872,"Day");D[F.DssSmartAttributeWeekInterval]=mstrmojo.desc(10048,"Week");D[F.DssSmartAttributeMonthInterval]=mstrmojo.desc(871,"Month");D[F.DssSmartAttributeQuarterInterval]=mstrmojo.desc(10050,"Quarter");D[F.DssSmartAttributeYearInterval]=mstrmojo.desc(873,"Year");D[F.DssSmartAttributeHourOfDayGroup]=mstrmojo.desc(26267,"Hour of Day");mstrmojo.vi.ui.SmartAttributeFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.SmartAttributeFormatter",cssClass:"SmartAttributeFormatter-content NumberFormatter-content",formatValue:null,myData:null,intervalType:undefined,formatOptions:[],categoryOptions:[{n:mstrmojo.desc(4531,"Automatic"),v:N.Automatic}],formatPreviewText:"",defaultLocaleFormatExample:"",defaultLocaleFormat:"",formatPickerRef:null,preBuildRendering:function A(){if(this._super){this._super();}var P=I.getLocaleDefaultFormat(this.intervalType);if(P){this.defaultLocaleFormatExample=P.example;this.set("defaultLocaleFormat",P.fmt);}var O=I.getSmartAttFormatList(this.intervalType).map(function(Q){return{n:Q.example,v:Q.format,};});this.set("formatOptions",O);if(this.defaultLocaleFormat||this.formatValue.category!==N.Automatic){this.set("categoryOptions",this.categoryOptions.concat({n:mstrmojo.desc(11023,"Interval")+" ("+D[this.intervalType]+")",v:N.Custom}));}if(this.formatValue.useLocaleDefault||this.formatValue.format===""){this.setFormatPreview2Default();}},postBuildRendering:function A(){if(this._super){this._super();}var O=this.formatValue.category===N.Automatic;this.categoryPickerRef.set("selectedIndex",O?0:this.categoryOptions.length-1);},adjustAfterCategoryChange:mstrmojo.emptyFn,setFormatPreview2Default:function G(){this.set("formatPreviewText",this.defaultLocaleFormatExample);},getFormatPreviewForLegacyFormat:function L(){var R=this.formatValue,Q=J.Date.concat((I.datetime&&I.datetime.DATEINPUTFORMATS||[]).map(function(W){return{v:W,n:B.formatDateInfo({day:16,month:4,year:2020},W)};})),S=J.Time.concat((I.datetime&&I.datetime.TIMEINPUTFORMATS||[]).map(function(W){return{v:W,n:B.formatDateInfo({hour:9,min:41,sec:46},W)};}));var O=function(W){var X=W.find(function(Y){return Y.v===R.format;});return X?X.n:"";};function P(){var Y=R.decimalPlaces;var W="1"+(Y>0?".":"").toString(),X;for(X=0;X<Y;X++){W+=X%10;}return W+"E+03";}var U="";switch(R.category){case N.Currency:case N.Percentage:case N.Fixed:case N.Custom:U=H.applyFormatToNumber(R.format,M.replace(/\./g,I.number.DECIMALSEPARATOR));break;case N.Date:U=O(Q);break;case N.Time:U=O(S);break;case N.Fraction:U=O(J.Fraction);break;case N.Scientific:U=P();break;default:break;}return U||R.format;},clearFormatPickerSelection:function C(){this.formatPickerRef.set("selectedIndex",-1);this.formatPickerRef.selectedNode.textContent="";},getFormatIndex:function E(){return K.find(this.formatOptions,"v",this.myData.format);},children:[{scriptClass:"mstrmojo.ui.Pulldown",alias:"categoryPickerRef",cssClass:"nf-MiddleRow",isHostedWithin:false,bindings:{items:function(){return this.parent.categoryOptions;},},onitemSelected:function(Q){var P=this.parent;if(Q.v===N.Custom){if(P.myData.category===N.Automatic){if(P.defaultLocaleFormat){P.myData.set("useLocaleDefault",true);}}else{if(!P.myData.useLocaleDefault){var O=P.getFormatIndex();if(O!==-1){P.formatPickerRef.set("selectedIndex",O);}else{P.set("formatPreviewText",P.getFormatPreviewForLegacyFormat());}}}}else{P.myData.set("useLocaleDefault",false);}P.myData.set("category",Q.v);}},{scriptClass:"mstrmojo.CheckBox",label:mstrmojo.desc(26268,"Use Language Default"),cssClass:"nf-MiddleRow smtAtt-use-default",bindings:{checked:function(){return this.parent.myData.useLocaleDefault;},visible:function(){return this.parent.myData.category!==N.Automatic&&this.parent.defaultLocaleFormat;}},oncheckedChange:function(){if(!this.hasRendered){return ;}this.parent.myData.set("useLocaleDefault",this.checked);if(this.checked){this.parent.setFormatPreview2Default();}else{if(this.parent.formatOptions.length){var O=Math.max(K.find(this.parent.formatOptions,"v",this.parent.myData.format),0);this.parent.formatPickerRef.set("selectedIndex",O);}else{this.parent.myData.set("format",this.parent.defaultLocaleFormat);}}}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"formatPickerRef",cssClass:"nf-MiddleRow smtAtt-format-picker",isHostedWithin:false,bindings:{items:function(){return this.parent.formatOptions;},visible:function(){return !(this.parent.myData.useLocaleDefault||this.parent.myData.category===N.Automatic||this.parent.formatOptions.length===0);}},onitemSelected:function(O){this.parent.myData.set("format",O.v);this.parent.myData.set("category",N.Custom);this.parent.set("formatPreviewText",O.n);}},{scriptClass:"mstrmojo.Label",cssClass:"nf-border",bindings:{visible:function(){return !(this.parent.myData.category===N.Automatic);}},},{scriptClass:"mstrmojo.HBox",alias:"previewRef",cssClass:"nf-MiddleRow nf-PreviewRow",bindings:{visible:function(){return !(this.parent.myData.category===N.Automatic);}},children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",bindings:{text:function(){return this.parent.parent.formatPreviewText;},title:function(){return this.parent.parent.formatPreviewText;}}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.date","mstrmojo.Stepper","mstrmojo.android.ui.Button","mstrmojo.DateStepperContentProvider","mstrmojo.NumStepperContentProvider");var W=mstrmojo.array,Q=mstrmojo.date,L=mstrmojo.hash,R=mstrmojo.android.ui.Button.newButton,I=mstrmojo.expr.DTP,D={interval:1},G={min:1,max:12,interval:1,value:12},N={min:0,max:23,interval:1,value:0},E={min:0,max:59,interval:1};function C(){var Y=this.dtp,b=this.stepperClass,Z=this[this.valueField],M=[],a,H;if(this._hasDate){M.push({scriptClass:b,slot:"monthNode",alias:"monthStepper",title:mstrmojo.desc(871,"month"),provider:this.dateProvider.monthCP},{scriptClass:b,slot:"dayNode",alias:"dayStepper",title:mstrmojo.desc(872,"day"),provider:this.dateProvider.dayCP},{scriptClass:b,slot:"yearNode",alias:"yearStepper",title:mstrmojo.desc(873,"year"),provider:this.dateProvider.yearCP});}if(this._hasTime){M.push({scriptClass:b,slot:"hourNode",alias:"hourStepper",provider:this.hourProvider},{scriptClass:b,slot:"minNode",alias:"minStepper",provider:this.minProvider});}if(!this.hideSwitchers){if(Y!==I.TIME){a=(Z&&Z.date)?Q.formatDateInfo(Z.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):mstrmojo.desc(2052,"Date");M.push(R(a,function(){this.parent.toDateView();},{alias:"dateToggle",slot:"switcherNode",cssClass:"",selected:true}));}if(Y!==I.DATE){H=(Z&&Z.time)?Q.formatTimeInfo(Z.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):mstrmojo.desc(2170,"Time");M.push(R(H,function(){this.parent.toTimeView();},{alias:"timeToggle",slot:"switcherNode",cssClass:"",selected:Y==I.TIME}));}}if(this._hasDate){this.viewCssClass="dateView";}else{if(this._hasTime){this.viewCssClass="timeView";}}this.addChildren(M);}function P(){var c=[this.valueField,"min","max"],M=L.copy(D),b=this.is24HourMode?L.copy(N):L.copy(G),a=L.copy(E),Z=this[this.valueField],H=Z&&Z.time,Y=this;W.forEach(c,function(d){M[d]=L.copy(Y[d]);});if(this._hasDate){this.dateProvider=new mstrmojo.DateStepperContentProvider({item:M,valField:this.valueField,canLoop:true,onTraverse:function(){Y.updateDate();}});}if(this._hasTime){if(this.minuteInterval!==undefined){a.interval=this.minuteInterval;}delete this.minuteInterval;if(H){if(!this.is24HourMode){b.value=H.hour%12||12;this.set("meridiem",(H.hour<12));}else{b.value=H.hour;}a.value=H.min;}this.hourProvider=new mstrmojo.NumStepperContentProvider({item:b,valField:"value",canLoop:true,onTraverse:function(){Y.updateTime();}});this.minProvider=new mstrmojo.NumStepperContentProvider({item:a,valField:"value",canLoop:true,renderer:{render:function(d){return String(d).length===1?("0"+d):d;}},onTraverse:function(){Y.updateTime();}});}}mstrmojo.DateTimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DateTimePicker",value:null,min:null,max:null,meridiem:true,hideSwitchers:false,minuteInterval:null,is24HourMode:false,dtp:mstrmojo.expr.DTP.TIMESTAMP,viewCssClass:"",valueField:"value",stepperClass:"mstrmojo.Stepper",markupString:"<div id='{@id}' class='mstrmojo-DateTimePicker' style='{@cssText}'><div class='switcher'></div><div class='{@viewCssClass}'><span class='stepNode month'></span><span class='stepNode day'></span><span class='stepNode year'></span><span class='stepNode hour'></span><span class='stepNode min'></span><span class='meridiem' mstrAttach:click></div></div></div>",markupSlots:{switcherNode:function(){return this.domNode.firstChild;},viewNode:function(){return this.domNode.children[1];},monthNode:function(){return this.domNode.children[1].children[0];},dayNode:function(){return this.domNode.children[1].children[1];},yearNode:function(){return this.domNode.children[1].children[2];},hourNode:function(){return this.domNode.children[1].children[3];},minNode:function(){return this.domNode.children[1].children[4];},meridiemNode:function(){return this.domNode.children[1].children[5];}},markupMethods:{onmeridiemChange:function(){if(this.is24HourMode){this.meridiemNode.display="none";}else{this.meridiemNode.innerHTML=this.meridiem?mstrmojo.locales.datetime.AM_NAME:mstrmojo.locales.datetime.PM_NAME;}},onviewCssClassChange:function(){this.viewNode.className=this.viewCssClass;}},init:function O(M){this._super(M);var H=this.dtp;this._hasDate=(H===I.DATE||H===I.TIMESTAMP);this._hasTime=(H===I.TIME||H===I.TIMESTAMP);P.call(this);C.call(this);},getDateTime:function B(){return{date:this.getDate(),time:this.getTime()};},getDate:function F(){if(this._hasDate){var H=this.dateProvider.curVal;return{year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate()};}return null;},getTime:function S(){if(this._hasTime){return{hour:!this.is24HourMode?Q.capitalHour(this.hourProvider.curVal,this.meridiem?" AM":" PM"):this.hourProvider.curVal,min:this.minProvider.curVal};}return null;},getDateTimeString:function K(){var H="";if(this._hasDate){H+=Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT);}if(this._hasDate&&this._hasTime){H+=" ";}if(this._hasTime){H+=Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return H;},updateDate:function A(){if(this.hasRendered){var H=this;W.forEach(["year","month","day"],function(M){H[M+"Stepper"].updateDisplayText();});}if(this.dateToggle){this.dateToggle.set("text",Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}},updateTime:function J(){if(this.timeToggle){this.timeToggle.set("text",Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}},toDateView:function U(){this.set("viewCssClass","dateView");this.dateToggle.set("selected",true);var H=this.timeToggle;if(H){H.set("selected",false);}},toTimeView:function X(){this.set("viewCssClass","timeView");var H=this.dateToggle;if(H){H.set("selected",false);}this.timeToggle.set("selected",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.StackContainer");mstrmojo.TabContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.TabContainer",markupString:'<div id="{@id}" class="mstrmojo-tabcontainer {@cssClass}"><div class="mstrmojo-tabcontainer-tabs"></div><div class="mstrmojo-tabcontainer-stack"></div><div></div></div>',markupMethods:{onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{top:function(){return this.domNode.childNodes[0];},stack:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1];},bottom:function(){return this.domNode.childNodes[2];}},addChildren:function A(D,K,H){var G=this._super(D,K,H);var B=this.children,F=B.length;if(F>=2){var L,I,E;for(E=0;E<F;E++){var C=B[E],J=C&&C.slot;if(!L&&C.isStrip){L=C;}else{if(!I&&(!J||J==="stack")){I=C;}}if(L&&I){L.set("target",I);break;}}}return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click,keydown><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,anchorSlot:"clickableNode",getLayoutOffsets:function B(){return{h:2,w:2};},updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,U=this.parent.parent;if(R===""){U.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);U.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var E=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,listenOnRootView:false,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(M){if(M){return ;}var K=this.visible,L=K?"block":"none";this.editorNode.style.display=L;if(this.modal){this.curtainNode.style.display=L;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function G(){var K;var L=this.buttons;if(L&&!this.btnHbox){for(K in L){L[K].cssClass=(L[K].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",role:"presentation",children:L},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function C(){var K=this.placeholder;if(this._super()){if(!this.parent&&!K){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function F(){var K=this.id;return function(){var L=mstrmojo.all[K];L.resizeDialog();L.positionDialog();};},addListener2RootView:function(L){var M=document.querySelector("#rootView");var N=M.style.height;var K=M.style.width;this.observer=new MutationObserver(function(O){O.forEach(function(Q){var P=M.style.height;var R=M.style.width;if(Q.attributeName==="style"&&(N!==P||K!==R)){L();N=P;K=R;}});});this.observer.observe(M,{attributes:true});},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var L=this._resizeHandler=this.getResizeHandler();if(this.listenOnRootView){this.addListener2RootView(L);}else{E.attachEvent(window,"resize",L);}}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(K){}return true;},resizeDialog:function H(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function D(){var L=this,P=L.curtainNode;if(!P){return ;}var K=document.body,N=document.documentElement,O=P.style,M=L.curtainPosition;O.width=Math.max(K.clientWidth,N.scrollWidth)+"px";if(M&&M.h){O.height=M.h+"px";}else{O.height=Math.max(K.clientHeight,N.scrollHeight)+"px";}if(M&&M.y){O.top=M.y+"px";}L.raiseEvent({name:"resizeCurtain"});},positionDialog:function I(){var L=this.editorNode,N=this.left,M=this.top;if(!L){return ;}if(!N||!M){E.center(L);var K=L.style;if(this.alignment==="top"){K.top="10px";}if(N){K.left=N;}if(M){K.top=M;}}},destroy:function(L){var K=this._resizeHandler;if(K){if(this.listenOnRootView){this.observer&&this.observer.disconnect();}else{E.detachEvent(window,"resize",K);}}this._super(L);}});mstrmojo.iconToast=function B(O,L){var P="mojoToast9",N,K="warning";if(L&&L.iconClass){K=L.iconClass;}if(L&&L.id){P=L.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(M){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.HBox",cssClass:"iconToastCss",children:[{scriptClass:"mstrmojo.Label",cssClass:"icon "+K},{scriptClass:"mstrmojo.Label",cssClass:"text",text:O},{scriptClass:"mstrmojo.Button",cssClass:"close",onclick:function(){mstrmojo.all[P].destroy();}}]}).render();N=mstrmojo.all[P].domNode;document.body.appendChild(N);E.center(N,0,E.windowDim().h/2);if(L&&L.duration){window.setTimeout(function(){try{mstrmojo.all[P].destroy();}catch(Q){}},L.duration);}};mstrmojo.toast=function J(P,N,R,K){var Q="mojoToast9",O,M=N||3000;if(K&&K.id){Q=K.id+"-"+Q;}try{mstrmojo.all[Q].destroy();}catch(L){}mstrmojo.insert({id:Q,scriptClass:"mstrmojo.Label",cssClass:(K&&K.cssClass)?K.cssClass:"toastCss",text:P}).render();O=mstrmojo.all[Q].domNode;if(K&&K.dom){K.dom.appendChild(O);}else{document.body.appendChild(O);E.bottomCenter(O);}window.setTimeout(function(){if(R){R();}try{mstrmojo.all[Q].destroy();}catch(S){}},M);};mstrmojo.mask={show:function(){var K=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});K.render();document.body.appendChild(K.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.RenderProxy","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.models.EnumPanelTypes","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.VizControlBoxPanelContainer");function H(I){return{name:"ColorPickerWrapper"};}mstrmojo.vi.ui.ReactColorPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.vi.ui.ReactColorPicker",markupString:'<div id="{@id}" class="mstrmojo-ReactColorPickerContainer {@cssClass}" tabindex="0" mstrAttach:click><div class="mstrmojo-ReactColorPicker"></div></div>',renderProxy:null,componentProps:null,markupSlots:{componentContainerNode:function(){return this.domNode.firstChild;}},panelContentClassName:"mstrmojo-reactColorPicker-content",init:function(J){var K,I;this._super(J);K=H.call(this);delete J.slot;if(mstrApp&&mstrApp.displayLocaleId){J.displayLocaleId=mstrApp.displayLocaleId;}I=Object.assign(K,J);this.componentProps=I;if(!this.renderProxy){this.renderProxy=new mstrmojo.RenderProxy(I);this.addChildren({alias:"reactColorPickerContainer",scriptClass:"mstrmojo.Box",cssClass:"reactColorPickerComponentContainer",slot:"componentContainerNode",children:[this.renderProxy]});}},afterLayout:function A(){},getDomNode:function(){if(!this.hasRendered){this.render();}return this.domNode;},preBuildRendering:function B(){this._super();},unrender:function E(I){if(this.renderProxy){this.renderProxy.unrender();}this._super(I);},destroy:function D(){this.unrender();this._super();delete this.renderProxy;delete this.children;},updateComponentProps:function G(I){this.renderProxy.updateProps(I);},setColor:function C(I){if(this.renderProxy){this.renderProxy.updateProps({value:I});this.color=I;this.componentProps.value=I;}},getColor:function F(){return this.color;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.RenderProxy","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.models.EnumPanelTypes","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.VizControlBoxPanelContainer");function H(I){return{name:"FontSelectWrapper"};}mstrmojo.vi.ui.FontPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.vi.ui.FontPicker",markupString:'<div id="{@id}" class="mstrmojo-FontPickerContainer {@cssClass}" tabindex="0" mstrAttach:click><div class="mstrmojo-FontPicker"></div></div>',renderProxy:null,componentProps:null,markupSlots:{componentContainerNode:function(){return this.domNode.firstChild;}},fontFamily:"Open Sans",panelContentClassName:"mstrmojo-fontPicker-content",init:function(J){var K,I;this._super(J);this.fontFamily=J&&J.value?J.value:this.fontFamily;K=H.call(this);I=Object.assign(K,J);this.componentProps=I;if(!this.renderProxy){this.renderProxy=new mstrmojo.RenderProxy(I);this.addChildren({alias:"fontPickerContainer",scriptClass:"mstrmojo.Box",cssClass:"fontSelectComponentContainer",slot:"componentContainerNode",children:[this.renderProxy]});}},afterLayout:function A(){},getDomNode:function(){if(!this.hasRendered){this.render();}return this.domNode;},preBuildRendering:function B(){this._super();this.setFontFamily(this.fontFamily);},unrender:function E(I){if(this.renderProxy){this.renderProxy.unrender();}this._super(I);},destroy:function C(){this.unrender();this._super();delete this.renderProxy;delete this.children;},updateComponentProps:function G(I){this.renderProxy.updateProps(I);},setFontFamily:function F(I){if(this.renderProxy){this.renderProxy.updateProps({value:I});this.fontFamily=I;this.componentProps.value=I;}},getFontFamily:function D(){return this.fontFamily;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._BindTargetChildren","mstrmojo.TabButton","mstrmojo.TabStripBase");var E=mstrmojo.array;function D(G,F){if(G.autoHide){G.set("visible",F);}}mstrmojo.TabStrip=mstrmojo.declare(mstrmojo.TabStripBase,[mstrmojo._BindTargetChildren],{scriptClass:"mstrmojo.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-TabStrip {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},btnCssDisplay:"inline",autoHide:true,tabButtonClass:"TabButton",init:function C(F){if(F&&F.autoHide){F.visible=false;}this._super(F);},addTabButtons:function B(G,O){var K=this.targetProps||{},U=K.childTitle||"n",P=K.childColor||"tbc",S=this.tabButtonClass,L=[],R=this.target,J=this.btnCssDisplay,F=function(){R.set("selected",this.target);};mstrmojo.requiresCls("mstrmojo."+S);for(var M=0,N=(G&&G.length)||0;M<N;M++){var Q=G[M],I=Q[U];if(I){var H=mstrmojo.insert({scriptClass:"mstrmojo."+S,title:I,backgroundColor:Q[P],target:Q,cssDisplay:J,onclick:F});L.push(H);}}if(L.length){D(this,L.length);this.addChildren(L,O);}this.selectionChange();},removeTabButton:function A(G){var F=E.filter(this.children,function(H){return(H.target===G);},{max:1});if(F&&F[0]){D(this,F.length-1);this.removeChildren(F[0]);F[0].destroy();}},clearButtons:function(){var F=E.map(this.children,function(G){return G.id;});this.removeChildren();E.forEach(F,function(G){if(mstrmojo.all[G]){mstrmojo.all[G].destroy();}});}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo.hash");var A="mstrmojo-TextBoxWithLabel";mstrmojo.TextBoxWithLabel=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextBoxWithLabel",label:"",rightLabel:"",cssDisplay:"inline",type:"text",markupString:'<div class="'+A+' {@cssClass}" style="{@cssText}"><span class="mstrmojo-TextBox-label {@labelClass}" title="{@labelTitle}">{@label}</span><input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur/><span class="mstrmojo-TextBox-label-right">{@rightLabel}</span></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild.nextSibling;},lblNode:function(){return this.domNode.firstChild;}}});mstrmojo.TextBoxWithLabel.prototype.markupMethods=mstrmojo.hash.copy({oncssClassChange:function(){var B=this.cssClass;this.domNode.className=A+(B?" "+B:"");},onlabelChange:function(){this.lblNode.innerText=this.label||"";}},mstrmojo.hash.copy(mstrmojo.TextBoxWithLabel.prototype.markupMethods));}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui.editors._HostsControls","mstrmojo._HasLayout","mstrmojo.css");mstrmojo.ui.editors.controls.ControlGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.editors._HostsControls,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ControlGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},shouldPropagateEnabled:true,init:function A(B){this._super(B);mstrmojo.css.addWidgetCssClass(this,"ctrl-group");}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ui.editors.controls.ControlGroup,{onenabledChange:mstrmojo.Container.enabledMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,maxHeight:undefined,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}if(this.maxHeight){this.cssText+="max-height: "+this.maxHeight+"; overflow-y: auto; overflow-x: hidden; scrollbar-width: thin;";}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:19};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui.PopupConfig","mstrmojo.css");mstrmojo.ui.editors.ToolbarPopup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.ToolbarPopup",popupConfig:null,anchorElement:null,autoCloses:false,locksHover:true,init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ToolbarPopup");this.popupConfig=new mstrmojo.ui.PopupConfig({isHostedWithin:false,hostProxyCssClass:(mstrApp&&mstrApp.getThemeClassName())||"",anchorElement:this.anchorElement});},open:function A(D,C){D.closePopup();this._super(D,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.Box","mstrmojo.css");var A=mstrmojo.css;mstrmojo.vi.ui.rw.VisFilterIndicator=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.rw.VisFilterIndicator",cssClass:"VisFilterIndicator",init:function D(F){var G=F.unitContainer.domNode,E=G.style;if(G){if(F.hasOwnProperty("width")===false){F.width=(E&&E.width)||(G.clientWidth+"px");}if(F.hasOwnProperty("left")===false){F.left=G.offsetLeft+"px";}if(F.hasOwnProperty("top")===false){F.top=(G.offsetTop)+"px";}}this._super(F);this.placeholder=G.appendChild(document.createElement("div"));},children:[{scriptClass:"mstrmojo.Label",slot:"containerNode",alias:"lblTitle",text:mstrmojo.desc(15297,"Items selected in configuration mode will not be applied to visualization filter.")}],postBuildRendering:function(){this._super();var F=this.domNode,E=this;F.style.left=this.left;F.style.top=this.top;if(!this.animationListener){var G=this.animationListener=function(H){if(H.animationName==="indicatorout"){A.addClass(F,"hidden");E.destroy();}};A.onAnimationEnd(F,G);}},updateDimension:function C(){if(this.hasRendered&&!this.destroyed&&this.unitContainer){var E=this.unitContainer.domNode;if(E){this.set("width",(E.style.width||(E.clientWidth+"px")));}}},destroy:function B(){if(this.animationListener){this.animationListener=null;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo.dom");var B=mstrmojo.dom;var A="openXtabCellMenu";mstrmojo.XtabCellHoverPopup={cssClass:"mstrXtabCellHoverPopup",scriptClass:"mstrmojo.Popup",slot:"overlayNode",autoCloses:true,children:[{scriptClass:"mstrmojo.Button",alias:"btn",onmousedown:function(D){this.openPopup(true,D);B.stopPropogation(D.hWin,D.e);B.preventDefault(D.hWin,D.e);return false;},openPopup:function(F,D){var E=this.xtab[A]?this.xtab:mstrmojo.findAncestor(this.xtab,A);if(E){E.openXtabCellMenu({xtab:this.xtab,td:this.td,btn:this,cmPos:this.cmPos,lockIW:this.xtab,singleCellClick:F===true,evt:D});}this.domNode.oncontextmenu=function(G){B.stopPropogation(window,G);B.preventDefault(window,G);return false;};},closePopup:function(){var D=mstrmojo.findAncestor(this.xtab,A);if(D){D.closePopup();}}}],updatePopupConfig:function C(F){var G=F&&F.td,O=F&&F.xtab,D=this.btn;var H=this._lastTd;if(H!==G){D.closePopup();this._lastTd=G;}D.xtab=O;D.td=G;D.cmPos=F&&F.cmPos;if(!G||!O){return ;}var I=B.findAncestorByName(G.parentNode,"table",false,O.viewport),K=O.zones,N="",E;if(I){for(E in K){var L=K[E];if(L&&L.tableNode===I){N=L.slot;break;}}}var M=mstrmojo.boxmodel.offset(G,O.overlayNode),J=23;this.set("location",{left:0,top:M.top,width:Math.min(G.offsetWidth+M.left,O._pl),height:J});},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onlocationChange:function(){var D=this.location;if(!D){return ;}var E=this.domNode.style;E.left=(D.left+Math.max(D.width-20,0))+"px";E.top=D.top+(D.height?Math.round(D.height/2)-7:0)+"px";}}};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(E){this._super(E);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}var D=["mstrmojo-ui-MenuPopup"],F=C.cssClass;if(F){D.push(F);}if(C.hasToggleItem){D.push("hasToggleItem");}mstrmojo.css.addWidgetCssClass(this,D);this.addChildren(C.contents);},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo._IsList","mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.string","mstrmojo.tooltip","mstrmojo.ListBase");var F=mstrmojo.array,G=mstrmojo.css,E=mstrmojo.dom,I=mstrmojo.string;function B(){var K,P,J=this.itemsContainerNode,L,Q=this.items,U=[],S,N,R=this.padding,O,M=0;this.items.pop();if(!this.width){return ;}K=parseInt(this.width,10);P=J.scrollWidth||E.position(J).w;if(P<=K){return ;}S=J.lastChild;G.removeClass(S,"hide");N=E.position(S).w;L=J.children;O=L.length-1;while(M<O){K-=(E.position(J.children[M]).w+R);if(K<N){break;}M++;}while(M<O){J.removeChild(L[L.length-2]);U.push(Q[M++]);}S.textContent=mstrmojo.desc(15124,"## more").replace("##",U.length);this.tooltipContent=F.map(U,function(W){return I.encodeHtmlString(W.n);}).join("</br>");}mstrmojo.vi.ui.TruncatedList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.TruncatedList",cssClass:"mstr-truncList",padding:0,overflowCls:"",getAdditionalProperties:mstrmojo.emptyFn,useRichTooltip:true,getItemProps:function H(M,J){var L=this._super(M,J),K=M.style;if(K){L.addStyle(K);}this.getAdditionalProperties(L,J);return L;},buildRendering:function C(){this.items.push({alias:"overflowItem",cls:this.overflowCls+" hide",n:mstrmojo.desc(15124,"## more").replace("##",this.items.length)});if(this._super){this._super();}},setWidth:mstrmojo.emptyFn,postBuildRendering:function A(){this.setWidth();B.call(this);if(this._super){this._super();}},updateTooltipConfig:function D(K){var M=this.itemsContainerNode.children,J=M.length,L=J&&M[J-1],N;if(L&&L===E.eventTarget(window,K)){N=E.position(L);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-A",content:this.tooltipContent,top:N.y+N.h+10,left:N.x};}else{delete this.richTooltip;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var D=mstrmojo.dom,H=mstrmojo.string,C=mstrmojo.hash,E=mstrmojo.array,B=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",menuItemTooltip:false,tooltipOrientation:"horizontal",tooltipOffset:8,tooltipOffsetX:0,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function F(J){return J&&(H.encodeHtmlString(J.ttp,true)||H.encodeHtmlString(J.n,true))||"";},getTooltipNode:function A(J){return this.getItemNodeFromTarget(J);},showTooltip:function G(c,O){var R=this;if(!R.hasOpenTooltip&&!(R._lastOpened&&R._lastOpened.visible&&!R.menuItemTooltip)){var i=D.eventTarget(O,c),d=R.getItemFromTarget(i),X=R.getTooltipNode(i),k=R.getTooltipText(d),Q=R.tooltipCss;if(!k||d.ttpDisabled){return ;}if(R.showTooltipForLargeText){if(X.offsetWidth>=X.scrollWidth){return ;}}var j=D.position(X),b,S,M,Z="",a=R.tooltipOffset,P=(d&&d.ctxt)||{};if(this.tooltipOrientation==="vertical"){b=j.x+j.w/2;M=P.posType||B.POS_TOPCENTER;S=j.y+j.h+a;var N="mojo-theme-light vi-regular vi-tooltip-A";if(!P.posType){N+=" A-center";}R.tooltipCss=C.copy({cssClass:N},Q);}else{var L=D.windowDim(),Y=40,f=j.x+j.w+a,K=j.x-a,h=K-Y,J=L.w-(f+Y),g="vi-regular vi-tooltip-",W;S=j.y;if(J>=h){b=f;W=J;M=P.posType||B.POS_TOPLEFT;Q.cssClass=g+"C "+Q.rightCssClass;}else{b=K;W=h;M=P.posType||B.POS_TOPRIGHT;Q.cssClass=g+"D "+Q.leftCssClass;}Z="max-width: "+W+"px;";}if(R.tooltipContrast){Q.cssClass+=" contrast";}if(Q&&Q.getItemCssClass){Q.cssClass=E.filter([Q.cssClass,Q.getItemCssClass(d)],function(e){return !!e;}).join(" ");}var U=R.richTooltip=C.copy(R.tooltipCss,{content:H.apply(R.tooltipMarkup,{c:k,style:Z}),eventHandlerMap:P.eventHandlerMap,top:S,left:b,posType:M});if(R.itemDisabled&&!R.notToWarn){U.cssClass+=" vi-warning";}if(P.hoverable){U.enableHover=true;}if(P.posType==="TL"){U.left=j.x+R.tooltipOffsetX;}U.keepArrowXPos=!!R.keepArrowXPos;U.keepArrowYPos=!!R.keepArrowYPos;this._super(c,O);}},onclick:function I(J){var K=this;window.setTimeout(function(){if(K.hasOpenTooltip){K.hideTooltip();}window.clearTimeout(K._tooltipTimeOut);},0);this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(X,U){if(!X){return ;}var S=U&&U.length||0,W;for(W=S;W>0;W--){X=X.replace(new Array(W+2).join("#"),U[W-1]);}return X;},L=function L(U){if(!U){return ;}var b=this,X=J.position(U.refNode||b.refNode),a=J.position(b.domNode),Z=U.position||R.RIGHT,W=0,c=0,S=9+(U.margin!==undefined?U.margin:0),Y=" ";switch(Z){case R.TOP:c=-a.h-S;Y+="t";break;case R.BOTTOM:c=X.h+S;Y+="b";break;case R.LEFT:W=-a.w-S;Y+="l";break;case R.RIGHT:W=X.w+S;Y+="r";break;}mstrmojo.hash.forEach(C(U,{left:W,top:c,contentNodeCssClass:Y,visible:false}),function(d,e){this[e]=d;},this);this.set("visible",U.invalid);},A=function A(S){var Y=this,W,X=S.errorCode,Z=S.errorMsg,U=S.args,a=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){W={content:X!==null?(Y.generateContentHTML(Q(a[X],U))||a["*"]):Z};}return W;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),minValueVIWarning:mstrmojo.desc(19051,"Please enter a value greater than ##."),maxValueVIWarning:mstrmojo.desc(19050,"Value is too large."),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),outOfRangeVIWarningEventTimeRange:mstrmojo.desc(26919,"Please enter a value between 1 second and ## seconds."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead."),largeSelectionVIWarning:mstrmojo.desc(19052,"Selecting a large number of elements may severely affect performance.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(W){var b=this,d=b.warningSlotName,f=b[d],S=W&&W.lasting||6000,Z=W&&W.offsetAlgo,a=W.refNode||this.domNode,U=W.highlight!==false,e=W.closeOnClick!==false,c;if(!f){f=new mstrmojo.Tooltip({refNode:a,offsetAlgo:Z,highlight:U,closeOnClick:e,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});b.addDisposable(f);b[d]=f;c=b.closeOnClick=b.getCloseOnClickListener();J.attachEvent(document.body,"click",c);}var Y=W.position||R.TOP,X="vi-warning vi-tooltip-";switch(Y){case R.TOP:f.cssClass=X+"V";break;case R.BOTTOM:f.cssClass=X+"A";break;case R.LEFT:f.cssClass=X+"D";break;case R.RIGHT:f.cssClass=X+"C";break;}f.open(b,A.call(b,W));this.adjustPosition(W);if(U){P.toggleClass(f.refNode,"mstrmojo-Warning",true);}window.clearTimeout(b._warningTimeOut);b._warningTimeOut=window.setTimeout(function(){b.hideWarning();},S);},hideWarning:function H(){var U=this,S=U[U.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(U._warningTimeOut);delete U._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var U=S[S.warningSlotName];if(U.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var U=this;L.call(U[U.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(W){if(!W||!W.attachEventListener){return ;}var X=W._validationEventListener,U;if(X){W.detachEventListener(X);delete W._validationEventListener;}U=this.getValidationEvtListener();if(U){W._validationEventListener=W.attachEventListener("validationChange",this.id,U);}},this);},getValidationEvtListener:function B(){var U=this;return function S(W){var X=W.value;U[(X&&X.invalid?"show":"hide")+"Warning"](X);};},unrender:function K(S){var U=this[this.warningSlotName];if(U){U.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._ListSelections","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.string","mstrmojo.hash","mstrmojo.css");var R=mstrmojo.dom,m=mstrmojo.string,C=mstrmojo.css,S=mstrmojo.hash,L=mstrmojo.all,g=mstrmojo._HasMarkup,h="px";var D={},K=false,c;function f(){var t={mousedown:["touchstart","mousedown"],mouseup:["touchend","mouseup"],mousemove:["touchmove","mousemove"]},s;for(s in t){D[s]=K?t[s][0]:t[s][1];}}function p(t){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var s=document.body;R.detachEvent(s,"mousemove",this._mousemoveCallback);R.detachEvent(s,"mouseup",this._cancelCallback);this.initDrag(t);}}function k(t){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var s=document.body;R.detachEvent(s,"touchmove",this._touchmoveCallback);R.detachEvent(s,"touchend",this._cancelCallback);if(c){window.clearTimeout(c);}this.initDrag(t);}}function I(w){var s=document.body,u=K?"_touchmoveCallback":"_mousemoveCallback";R.detachEvent(s,D.mousemove,this[u]);R.detachEvent(s,D.mouseup,this._cancelCallback);if(c){window.clearTimeout(c);}var t=this.afterDragCancel;if(t){t.call(this.target,w);}}function G(y){K=true;f();R.preventDefault(window,y);if(this.dragging){return true;}var u=this.target.id,w=document.body,t=y&&y.touches&&y.touches[0]||y;if(!this._touchmoveCallback){this._touchmoveCallback=function(z){k.call(L[u].dnd,z&&z.touches&&z.touches[0]||z);return true;};}this._moveCnt=0;this.startE=S.copy(t);R.attachEvent(w,"touchmove",this._touchmoveCallback);if(!this._cancelCallback){this._cancelCallback=function(z){I.call(L[u].dnd,t);return true;};}R.attachEvent(w,"touchend",this._cancelCallback);var x=this,s=t;s.type=s.name="contextmenu";c=window.setTimeout(function(){var AA=x.target,AB=AA&&AA.docSelector,z=AB&&AB.parent;R.detachEvent(w,"touchmove",this._touchmoveCallback);R.detachEvent(w,"touchend",this._cancelCallback);if(z){z.raiseEvent(g.newDomEvent("contextmenu",window,s));}},1000);return false;}function i(u){K=false;f();R.preventDefault(window,u);if(this.dragging){return true;}var s=this.target.id,t=document.body;if(!this._mousemoveCallback){this._mousemoveCallback=function(w){p.call(L[s].dnd,w);return true;};}this._moveCnt=0;this.startE=S.copy(u);R.attachEvent(t,"mousemove",this._mousemoveCallback);if(!this._cancelCallback){this._cancelCallback=function(w){I.call(L[s].dnd,w);return true;};}R.attachEvent(t,"mouseup",this._cancelCallback);return false;}function E(t){var s=this.duringDrag;if(s){s.call(this.target,t);}return true;}function O(u){this.dragging=false;var s=document.body;R.detachEvent(s,D.mousemove,this._dragCallback);R.detachEvent(s,D.mouseup,this._dragEndCallback);var t=this.afterDragEnd;if(t){t.call(this.target,u);}return true;}function Z(){if(this._mousemoveCallback){R.detachEvent(document.body,"mousemove",this._mousemoveCallback);delete this._mousemoveCallback;}if(this._touchmoveCallback){R.detachEvent(document.body,"touchmove",this._touchmoveCallback);delete this._touchmoveCallback;}if(this._cancelCallback){R.detachEvent(document.body,"mouseup",this._cancelCallback);R.detachEvent(document.body,"touchup",this._cancelCallback);delete this._cancelCallback;}if(this._dragCallback){R.detachEvent(document.body,"mousemove",this._dragCallback);R.detachEvent(document.body,"touchmove",this._dragCallback);delete this._dragCallback;}if(this._dragEndCallback){R.detachEvent(document.body,"mouseup",this._dragEndCallback);R.detachEvent(document.body,"touchmove",this._dragEndCallback);delete this._dragEndCallback;}}mstrmojo.DnDComponent=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DnDComponent",isDragging:false,initD:null,startE:null,afterDragStart:null,duringDrag:null,afterDragEnd:null,target:null,mousemoveBuffer:1,tooltipDisabled:false,init:function X(s){S.copy(s,this);},initDrag:function o(x){this.dragging=true;var t=this.target.id,w=document.body;var y=this._dragCallback;if(!y){y=this._dragCallback=function(z){if(K){z=z&&z.touches&&z.touches[0]||z;}return E.call(L[t].dnd,z);};}R.attachEvent(w,D.mousemove,y);var s=this._dragEndCallback;if(!s){s=this._dragEndCallback=function(z){if(K){z=z&&z.touches&&z.touches[0]||z;}return O.call(L[t].dnd,z);};}R.attachEvent(w,D.mouseup,s);var u=this.afterDragStart;if(u){u.call(this.target,x);}this._dragCallback(x);}});function b(s){this.getUnit=function t(){var u=s.items.length;return u>1?s._effLen/(u-1):1;};this.calcMinMax=function(w,u){var x=Math.round((w/s.unit+u/s.unit)/2);return{min:x,max:x};};this.preUpdateThumb=function(){s.start=Math.min(s.min*s.unit,s._effLen)+h;s.sdCssText=s.orCfg.posCssP+":"+s.start+";";};this.updateThumb=function(){s.containerNode.style[s.orCfg.posCssP]=s.start=Math.min(Math.round(s.min*s.unit),s._effLen)+h;};return this;}function n(s){this.getUnit=function(){return s._effLen/s.items.length;};this.calcMinMax=function(w,u){return{min:Math.floor(w/s.unit+0.5),max:Math.floor(u/s.unit-0.5)};};function t(){var u=s.min,x=s.unit;var y=s.start=(u*x)+h;var w=s.length=Math.max(Math.round((s.max-u+1)*x-s.gap),0)+h;return{st:y,len:w};}this.preUpdateThumb=function(){var w=s.orCfg,u=t();s.sdCssText=w.posCssP+":"+u.st+";"+w.lenCssP+":"+u.len+";";};this.updateThumb=function(){var w=s.orCfg,u=t(),x=s.containerNode.style;x[w.posCssP]=u.st;x[w.lenCssP]=u.len;};return this;}var F="<span>{@content}</span>";mstrmojo.Slider=mstrmojo.declare(mstrmojo.Container,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.Slider",markupString:'<div id="{@id}" class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="cont"><div class="bk" style="{@bkCssText}"></div><div class="sdc" style="position:absolute;{@sdcCssText}"><div class="sd" style="{@sdCssText}"><div class="t1"></div><div class="t2"></div><div class="t3"></div></div></div></div></div>',sdCssText:"",cssClass:"sc",clsType:"sc2",clsOrientation:"sc-v",orCfg:null,typeHelper:null,_tooltip_pos:"TL",useRichTooltip:true,init:function l(s){this._super(s);if(s.isHoriz){this.orCfg={posCssP:"left",marginCssP:"marginLeft",lenCssP:"width",lenP:"clientWidth",opPosCssP:"top",thickP:"clientHeight",offsetP:"x"};this.clsOrientation=" sc-h";this._tooltip_pos=mstrmojo.tooltip.POS_BOTTOMLEFT;}else{this.orCfg={posCssP:"top",marginCssP:"marginTop",lenCssP:"height",lenP:"clientHeight",opPosCssP:"left",thickP:"clientWidth",offsetP:"y"};this._tooltip_pos=mstrmojo.tooltip.POS_TOPRIGHT;this.titleHeight=(s.docSelector.fmts.ttl&&s.docSelector.fmts.ttl.height)?parseInt(s.docSelector.fmts.ttl.height,10):0;}this._exRoom=this.thumbWidth;if(this.multiSelect){this._exRoom*=2;}if(s.multiSelect){this.typeHelper=new n(this);}else{this.clsType="sc1";this.typeHelper=new b(this);}this.tooltipOpenDelay=100;},markupSlots:{dndNode:function(){return this.domNode.firstChild;},bgNode:function(){return this.domNode.firstChild.firstChild;},sdcNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.lastChild.firstChild;},frontNode:function(){return this.domNode.firstChild.lastChild.firstChild.firstChild;},thumbNode:function(){return this.domNode.firstChild.lastChild.firstChild.childNodes[1];},endNode:function(){return this.domNode.firstChild.lastChild.firstChild.lastChild;},tooltipNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:function(){this.synchronizeSlider();}},start:"50px",length:"30px",min:0,max:0,gap:1,ghost:null,thumbWidth:11,cssBkBW:1,dndNode:null,synchronizeSlider:function J(){var AA=this.orCfg,z=AA.lenCssP,u=this[z],s=parseInt(u,10),AF=this.hasRendered,AD=this.titleHeight||0;var w=this._effLen=isNaN(s)?0:(s-this._exRoom-AD);if(u){var AE={};AE[z]=Math.max(parseInt(u,10)-(2*this.cssBkBW),0)-AD+h;var x={};x[z]=w+h;x[AA.posCssP]=Math.round(this._exRoom/2)+h;x[AA.opPosCssP]="0"+h;if(AF){S.copy(AE,this.bgNode.style);S.copy(x,this.sdcNode.style);}else{this.bkCssText=C.getCssTextFromObj(AE);this.sdcCssText=C.getCssTextFromObj(x);}}var AH=this.selectedIndices;if(!S.isEmpty(AH)){var AC=this.items.length,y=-1,AG=-1,AB;for(AB=0;AB<AC;AB++){if(AH[AB]){if(y<0){y=AB;}AG=AB;}else{if(y>-1){break;}}}this.min=y;this.max=AG;}var t=this.typeHelper;this.unit=t.getUnit();if(AF){t.updateThumb();}else{t.preUpdateThumb();}},preBuildRendering:function A(){this.synchronizeSlider();},postBuildRendering:function W(){this._super();if(this.items.length>1){var s=this.dnd=new mstrmojo.DnDComponent({target:this});var t=this.id;this.__mouseDownEvt=function(u){R.stopPropogation(window,u);i.call(L[t].dnd,u);return true;};R.attachEvent(this.dndNode,"mousedown",this.__mouseDownEvt);if(R.supportsTouches){this.__touchstartEvt=function(u){if(R.isTouchOptimizationEnabled()&&C.hasClass(u.target,"bk")){return ;}R.stopPropogation(window,u);G.call(L[t].dnd,u);return true;};R.attachEvent(this.dndNode,"touchstart",this.__touchstartEvt);}s.afterDragStart=this.initDrag;s.duringDrag=this.ondrag;s.afterDragEnd=this.ondrop;s.afterDragCancel=this.cancelDrag;}},initDrag:function o(y,s){s=s||window;var x=this.configureGhost(true),t=this.orCfg,w=this.dnd,u=w.startE;w.initD={tP:parseInt(this.start,10),sL:this._effLen,contL:x.containerNode[t.lenP],offset:R.getMousePosition(u,s)[t.offsetP],td:R.eventTarget(s,u)};},configureGhost:function e(t){var w=this.ghost;if(!w){var y=this.containerNode.cloneNode(true),x=y.childNodes;C.addClass(y,"gh");y.style.display="none";w=this.ghost={containerNode:y,frontNode:x[0],thumbNode:x[1],endNode:x[2]};this.sdcNode.appendChild(y);}var u=this.ghost.containerNode.style,s=this.orCfg;S.copyProps([s.posCssP,s.lenCssP],this.containerNode.style,u);if(t){u.display="block";}return w;},ondrag:function P(AB,AA){AA=AA||window;var AC=this.dnd.initD,x=this.ghost.containerNode,AG,u,s,z=this.min,AD=this.max,y=this.orCfg,t=y.lenCssP,AF=y.posCssP;var AE=R.getMousePosition(AB,AA)[y.offsetP]-AC.offset;switch(AC.td){case this.thumbNode:AG=Math.max(Math.min(AC.tP+AE,AC.sL-AC.contL),0);u=AG+AC.contL;x.style[AF]=AG+h;var w=this.typeHelper.calcMinMax(AG,u);z=w.min;AD=w.max;break;case this.frontNode:AG=Math.max(Math.min(AC.tP+AE,AC.tP+AC.contL),0);s=Math.max(Math.min(AC.contL-AE,AC.tP+AC.contL),0);x.style[AF]=AG+h;x.style[t]=s+h;z=Math.min(Math.floor(AG/this.unit+0.5),this.max);break;case this.endNode:s=Math.max(Math.min(AC.contL+AE,AC.sL-AC.tP),0);u=AC.tP+s;x.style[t]=s+h;AD=Math.max(Math.floor(u/this.unit-0.5),this.min);break;default:return ;}if(z!==this.min||AD!==this.max){this.min=z;this.max=AD;this.typeHelper.updateThumb();}this._updateTooltip();},ondrop:function a(){this.typeHelper.updateThumb();var x=this.ghost;if(x){x.containerNode.style.display="none";}this.hideTooltip();var y=this.dnd&&this.dnd.initD;if(this.makeSelection&&y){this.makeSelection({selItem:y.td});}var s=this.items;if(s&&s.length){var u=[],t;for(t=this.min;t<=this.max;t++){var w=s[t];if(w){u.push(t);}}this.select(u);}this.dnd.initD=null;},cancelDrag:function N(t,s){if(this.makeSelection){this.makeSelection({selItem:R.eventTarget(s||window,this.dnd.startE)});}},showTooltip:function q(t,s){this.configureGhost(false);this._updateTooltip(t,s);this._super(t,s);},hideTooltip:function Q(t,s){if(this.dnd&&this.dnd.dragging){return ;}this._super(t,s);},_updateTooltip:function U(){var AA=this.orCfg,AB={contentNodeCssClass:"sc-tooltip",refNode:this.domNode,posType:this._tooltip_pos},t=(this.ghost)?this.ghost.containerNode:this.containerNode;AB[AA.opPosCssP]=0;AB[AA.posCssP]=t.style[AA.posCssP];AB.content="";var y=this.items,w=y.length;if(y&&w){var s=(y[this.min]||y[0]),u=this.getItemTooltip(s),x=u;if(this.min!==this.max){var z=(y[this.max]||y[w-1]);x=mstrmojo.desc(146,"From:")+" '"+u+"' "+mstrmojo.desc(147,"To:")+" '"+this.getItemTooltip(z)+"'";}AB.content=F.replace(/\{@content\}/g,x);}this.set("richTooltip",AB);},getItemTooltip:function Y(s){var t=s?s.n:"";t=m.encodeHtmlString(t,true);return"'"+(t.length>20?t.slice(0,20)+"...":t)+"'";},unrender:function B(t){this.ghost=null;this.hideTooltip();this.min=0;this.max=(this.items&&this.items.length-1)||0;var u=this.dndNode,w=this.__mouseDownEvt,s=this.__touchstartEvt;if(w&&u){R.detachEvent(u,"mousedown",w);}if(s&&u){R.detachEvent(u,"touchstart",s);}Z.call(this);this._super(t);},onselectionChange:function M(){var s=this.selectedIndices,t=S.isEmpty(s);if(s){this.set("max",t?this.items.length-1:S.max(s,false,true));this.set("min",t?0:S.min(s,false,true));if(this.typeHelper){this.typeHelper.updateThumb();}}if(this.onchange){this.onchange();}},onclick:function d(AD){var AA=AD.getTarget();if(AA&&R.contains(this.sdcNode,AA,true)){return ;}var s=parseInt(AD.src.containerNode.style.left,10),t=parseInt(AD.hWin.event.offsetX),y=this.isHoriz&&t<s,u=parseInt(AD.src.containerNode.style.width,10);var AB=parseInt(AD.src.containerNode.style.top,10),w=parseInt(AD.hWin.event.offsetY),z=parseInt(AD.src.containerNode.style.height,10);moveTop=!this.isHoriz&&w<AB;if(this.multiSelect){if(this.bgNode!==AD.hWin.event.target){return ;}var AC=S.max(this.selectedIndices,false,true),x=S.min(this.selectedIndices,false,true);if(y||moveTop){this._addSelections([x-1]);this.removeSelect(AC);}else{if((!isNaN(u)&&t>s+u)||(!isNaN(z)&&w>AB+z)){this._addSelections([AC+1]);this.removeSelect(x);}}}else{if(y||moveTop){if(this.selectedIndex>0){this.select([this.selectedIndex-1]);}}else{if(this.selectedIndex<0&&this.items.length>1){this.select(1);}else{if(this.selectedIndex<this.items.length-1){this.select([this.selectedIndex+1]);}}}}},onmouseover:function H(s){if(this.tooltipDisabled){return ;}this.showTooltip();},onmouseout:function j(s){this.hideTooltip();}});mstrmojo.Slider.SINGLE_HANDLE_WIDTH=11;mstrmojo.Slider.SCROLLHANDLEWIDTH=11;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array","mstrmojo.url","mstrmojo.css");var Q=0,F=mstrmojo.dom,K=mstrmojo.array,C=mstrmojo.string,X=mstrmojo.css;function A(){var Z=mstrmojo.findAncestor(this,"fixedSizeCanHideShow",null,mstrmojo.DocSection);if(Z){Z.fixedSizeCanHideShow();}}function R(){var Z=this.textNode,b=this.imgNode;if(mstrApp.features&&mstrApp.features["support-new-rwd-error-message-style"]){X.toggleClass(Z,"mstrmojo-DocXtabGraph-txt",false);}if(mstrApp.isExpress){A.call(this);}if(this.eg!=null){b.style.display="none";Z.innerHTML=this.eg||"";Z.style.display="block";this.domNode.style.display=(this.visible&&this.eg.length>0)?"block":"none";}else{Z.style.display="none";this.domNode.style.display=this.visible?"block":"none";b.style.display="block";if(this.tooltip){b.setAttribute("ttl",this.tooltip);}var a=this.getFormats();this.retrieveGraphSrc(a.height,a.width);}}var Y={6:"poly",7:"rect",100:"circle"};function J(){var j=this.as,e=j&&j.length;if(!e){return ;}var d=this.id,h=d+"_map"+Q++,b=[],g=-1,c;for(c=0;c<e;c++){var a=j[c];a.id=d;a.aid=c;a.tooltip=C.multiReplace(a.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(a.shape)){a.shape=this.getAreaShapeName(a.shape);}if(!mstrApp.isDossier&&(a.tks||a.tks===""||a.tty===1)){a.extra=' href="#" ';}b[++g]=C.apply(this.areaMarkup,a);}var f='<map id="'+h+'" name="'+h+'">'+b.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+h+'" ';this.map=f;}else{var Z=document.createElement("div");Z.innerHTML=f;if(this.mapNode){Z=Z.firstChild;this.mapNode.innerHTML=Z.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+h);this.mapNode=this.domNode.appendChild(Z.firstChild);}this.attachMapEventListeners();}}var B=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="'+mstrmojo.url.getPlaceholderImageURL()+'" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function L(){return this.domNode.childNodes[1];},mapNode:function H(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function O(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function M(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function D(){J.call(this);return this._super();},postBuildRendering:function S(){R.call(this);return this._super();},setModel:function N(Z){this.model=Z;},updatingTooltipHelper:function U(e,n,h){var a=e&&e.getAttribute("aid"),Z=e&&e.getAttribute("ttl"),d=e.getAttribute("SC"),g={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},m=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(a==this.cAreaIdx){return ;}this.cAreaIdx=a;g.content=Z||this.defaultTooltip;var b="font-size:"+m+";";if(d){b+="border-color:#"+d;}g.contentNodeCssText=b;var j=e.getAttribute("coords"),l=99999,k=99999;if(!h){if(j&&j.length>0){j=j.split(",");var f=0;while(f+1<j.length){l=Math.min(l,parseInt(j[f++],10));k=Math.min(k,parseInt(j[f++],10));}}}if(l===99999){l=n.x;}if(k===99999){k=n.y;}g.top=k;g.left=l;this.richTooltip=null;this.set("richTooltip",g);},redraw:function P(){if(!this.hasRendered){return false;}R.call(this);var Z=this.getFormats();if(this.as&&Z.height&&Z.width){this.refreshMap();}return true;},refreshMap:function I(){if(this.as){J.call(this);}},getAreaShapeName:function E(Z){return Y[parseInt(Z,10)]||"default";}});var W=B.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",G=B.canvasCLS="mobile-graph-highlight-canvas";B.hideTooltips=function(){K.forEach(document.getElementsByClassName(W),function(Z){Z.style.display="none";});K.forEach(document.getElementsByClassName(G),function(Z){Z.getContext("2d").clearRect(0,0,Z.width,Z.height);Z.width=Z.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo.dom","mstrmojo.hash","mstrmojo.func","mstrmojo._CanAutoClose","mstrmojo._IsAccessibleList","mstrmojo.vi.util.A11yUtility","mstrmojo.ui._HasListTooltip");var H=mstrmojo.Enum_Keys,K=mstrmojo.hash,L=mstrmojo.func,A="hover",I=mstrmojo.vi.util.A11yUtility,B=mstrmojo.dom;mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo._IsAccessibleList],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,scrollNodeMaxHeight:undefined,parentDomNode:undefined,keydownString:null,lastKeydownTime:null,keydownInterval:500,enableAccessibility:false,listRole:"menu",itemRole:"menuitem",itemSelectedAriaProp:"aria-current",syncSelectedIndex:true,closeAfterSelection:true,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu,keydown><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function Q(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;}},setupScrollNodes:function F(){this.scrollNode=this.scrollboxNode;},onOpen:function C(){this._super();if(this.parent.isICS){if(this.showAdvancedStyling){this.domNode.style.maxWidth=null;this.domNode.style.width=null;var U=this.parent.domNode.getBoundingClientRect();var X=this.domNode.getBoundingClientRect();if(X.width<U.width){this.domNode.style.width=U.width+"px";this.domNode.style.maxWidth="unset";}}}this.updateScrollbars();var S=this;setTimeout(function(){S.scrollToSelectedItem();if(S.opener&&S.opener.focusOnPopup){S.focus();S.updateItemStyle(true);}},10);S.updateItemStyle(false);this.keydownIndex=this.selectedIndex;var W=this.itemsContainerNode&&this.itemsContainerNode.children&&this.itemsContainerNode.children.length;if(this.renderOnScroll&&this.renderBlockSize>0&&W>0){this.renderIndex=Math.ceil(W/this.renderBlockSize)-1;}},onclick:function R(S){this.closeAfterSelection=true;this._super(S);},postBuildRendering:function M(){var U=this._super();if(!this.parent){var S=this.parentDomNode=this.parentDomNode||document.body;S.appendChild(this.domNode);}return U;},closePopup:function G(){this.set("visible",false);},getA11yCSS:function(){return this.navMode?[A,I.CSS_FOCUS_VISIBLE]:[A];},arrowKeySupported:function(S){return S===H.DOWN_ARROW||S===H.UP_ARROW||S===H.END||S===H.HOME;},getNavContainer:function P(){if(!this.enableAccessibility){return ;}var S=this.parent;while(S&&!S.canTab){S=S.parent;}return S;},onkeydown:function E(g){if(!this.opener||!this.opener.focusOnPopup){return ;}var W=g.hWin,Y=g.e||W.event,c=this.getNavContainer(),S=this.keydownString,b=this.enableAccessibility,U=K.walk("parent.parent",this);this.locksHover=false;this.closeAfterSelection=false;this.enableAccessibility=true;if(c){c.handleTab(g);}if(this._super&&this._super(g)){return ;}if(Y.keyCode===mstrmojo.Enum_Keys.ENTER||Y.keyCode===mstrmojo.Enum_Keys.SPACE){g.cancel();g.preventDefault();this.closeAfterSelection=true;if(this.parent){this.parent.selectionChangeByKey=true;}this.singleSelect(this.keydownIndex);if(this.parent){delete this.parent.selectionChangeByKey;}if(this.parent&&this.parent.grabFocus){this.parent.grabFocus(true);}if(mstrApp&&mstrApp.isVI&&K.walk("scriptClass",U)==="mstrmojo.vi.ui.rw.selectors.MetricSlider"){L.safeCall("parent.restoreFocus",U)();}if(U&&U.isAMSelector&&U.isAMSelector()){U.selectByKey=true;}if(U&&U.isPanelSelector&&U.isPanelSelector()){var f=U.parent;if(f&&f.addRestoreFocusFlag){f.addRestoreFocusFlag();}}}else{if(Y.keyCode===mstrmojo.Enum_Keys.ESCAPE){g.cancel();g.preventDefault();this.close();if(this.parent&&this.parent.grabFocus){this.parent.grabFocus(true);}}else{if(Y.keyCode===mstrmojo.Enum_Keys.TAB){this.close();}else{var Z=new Date(),X=Z.getTime(),h=Y.key&&Y.key.toLowerCase()||String.fromCharCode(Y.keyCode).toLowerCase(),a=this;if(this.lastKeydownTime===null){this.keydownString=h;}else{if(X-this.lastKeydownTime<this.keydownInterval){this.keydownString+=h;}else{this.keydownString=h;}}S=this.keydownString;if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){a.changeSelectedItem(g);a.adjustPosition();},a.keydownInterval);this.lastKeydownTime=X;}}}this.enableAccessibility=b;},changeSelectedItem:function O(S){var X=this.selectedIndex,W=this.items&&this.items.length;if(W>0){var U;for(U=this.selectedIndex+1;U<this.items.length;U++){if(this.items[U].n.toLowerCase().indexOf(this.keydownString)==0){X=U;break;}}if(X===this.selectedIndex){for(U=0;U<this.selectedIndex;U++){if(this.items[U].n.toLowerCase().indexOf(this.keydownString)==0){X=U;break;}}}if(X!==this.selectedIndex){this.set("selectedIndex",X);this.keydownIndex=X;}}},focus:function J(){this.domNode.focus();},adjustPosition:function N(){this.adjustCornersForPopupOverflow();this.scrollToSelectedItem();this.focus();}});if(B.isTouchOptimizationEnabled()){mstrmojo.mixin(mstrmojo.mobile.ui._PopupListSupportsTouches,mstrmojo.ui.PopupList.prototype);}}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.vi.util.A11yUtility","mstrmojo.ui._HasListTooltip","mstrmojo.mobile.SupportMobileTouchInterface");var E=mstrmojo.dom,X=mstrmojo.css,Q=mstrmojo.hash,N=mstrmojo.vi.util.A11yUtility,M=mstrmojo.ui.PopupConfig.directionCfg,R=mstrmojo.mobile.SupportMobileTouchInterface;var Y={};var P=false;function H(d,c){var b=c?d.nextElementSibling:d.previousElementSibling;if(b&&b.classList.contains("separator")){b=H(b,c);}return b;}function I(i,g){var h=Q.walk("rootCtrl.docCtrl.model",mstrApp),f=this;if(i.pop){if(g&&i.ax){window.clearTimeout(this._popupAxTimeout);i.actionFn();this.closeAllMenus();}else{var j=i.fn.call(mstrmojo.all[i.scope],i.ctxt);if(this.hasAccessibility){j.hasAccessibility=true;j.navMode=this.navMode||(this.popupConfig&&this.popupConfig.navMode);}var c=j.ENUM_CORNERS,b=j.maxHeight,d=E.getMaxScrollHeight();j.setAlignment(c.TOP_RIGHT,c.TOP_LEFT);j.hostId=this.id;j.hostElement=this._getItemNode(i._renderIdx);j.includeScroll=this.includeScroll;j.supportsScroll=true;j.alignWithAnchor=true;j.isHostedWithin=false;j.maxHeight=b?Math.min(d,b):d;this.openPopup(j.newInstance());}}else{if(i.dsbld!==true){f.shouldSuppressFocus=false;function e(){return i.fn(i,f);}if(h){if(h.checkForNotificationBeforeSaving(i.cls,e)!==false){this.closeAllMenus();}}else{if(e()!==false){this.closeAllMenus();}}}}}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,accessibilityMenuContainer:function(){return this;},tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var c=this.scrollNode;if(!c){return ;}var b=E.getComputedScrollbarWidth(c);c.style.marginRight=-b+"px";c.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function S(d){this._super(d);if(mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}if(d.themeClassName){this.themeClassName=d.themeClassName;}var b=this.popupConfig;this.items=b.getMenuItems();var c=["mstrmojo-ui-Menu","unselectable"],e=b.menuCssClass;if(e){c.push(e);}if(b.hasToggleItem){c.push("hasToggleItem");}X.addWidgetCssClass(this,c);if(b&&b.supportsScroll&&b.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+b.maxHeight+"px";}this.useRichTooltip=!!b.useTooltip;this.tstid=b.tstid;this.initFocusItemIdx=b.initFocusItemIdx;},markupMethods:{onvisibleChange:function O(){var b=this.visible;if(!P||b){X.toggleClass(this.domNode,"visible",b);}}},getItemMarkup:function C(h,c){if(h.getItemMarkup){return h.getItemMarkup.apply(this,[h,c]);}var e=!!h.pop,f=!!h.msg,g=e?"submenu":(f?h.msg:"item"),d=Y[g],b='<div class="micn"></div>',i=f?(" "+h.msg):"";if(!d){b+=mstrApp.isWSStyling?'<div class="mtxt'+i+'">{@en@n}</div>':"{@en@n}";if(e){b+='<div class="arw"></div>';}else{if(h.msg==="warn-msg"){b+='<div class="warn-icon"></div>';}}d=this._super(h,c).replace("{@en@n}",b);Y[g]=d;}if(h.tstid){d=d.replace("{@tag}","{@tag} "+mstrmojo.tstid(h)+" ");}return d;},getItemProps:function Z(d,b){var c=this._super(d,b);c.tag="a";c.addCls("mstrmojo-ui-Menu-item");c.addCls(d.cls);if(d.featureTagId){c.attrs=c.attrs||[];c.attrs.push('data-feature-id="'+d.featureTagId+'"');}return c;},onkeydown:function J(h){var d=h.getTarget(),k=h.e.keyCode,f;switch(k){case 37:var g=this.opener,b=g.openerMenuElement;if(b){this.close();b.focus();delete g.openerMenuElement;}break;case 39:var l=this.items[d.getAttribute("idx")].pop,i=this.xtab||this.opener.boxContent;if(l){this.openerMenuElement=d;this.onclick(h);}if(i){i.isMenuClicked=true;}break;case 38:case 40:var c=k===40;f=H(d,c);if(f){f.focus();}break;case 13:case 32:var l=this.items[d.getAttribute("idx")].pop,i=this.xtab||this.opener.boxContent,j=i&&i.zone&&i.zone.tableNode;if(l){this.openerMenuElement=d;}this.onclick(h);if(this.selectedItem.n==="Copy Rows"&&i){j.focus();}else{if(i){i.isMenuClicked=true;}}break;case 27:var g=this.opener,i=this.xtab||this.opener.boxContent,b=g.openerMenuElement,e=this.td||this.popupConfig.hostElement;if(b){this.close();b.focus();delete g.openerMenuElement;}else{if(e){this.actionByKeyboard=true;this.close();delete g.openerMenuElement;}}if(i){i.isMenuClicked=false;}break;default:break;}h.e.preventDefault();h.e.stopPropagation();},onmouseover:function G(h){var f=h.config&&h.config.targetHostElement?h.config.targetHostElement:h.getTarget(),j=this.getItemFromTarget(f),g=this,c=g._lastOpened,k=c&&this.getItemFromTarget(c.popupConfig.hostElement),b=k&&k._renderIdx,d=this.getItemNodeFromTarget(f),e=(b!==undefined&&E.contains(this._getItemNode(b),f,true,this.domNode));if(j){this._lastHoverIx=j._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==b&&!e){this._popupTimeOut=window.setTimeout(function(){if(g._lastOpened&&g._lastOpened.visible){g.closePopup();}if(g.visible&&j.pop){if(j.ax){g._popupAxTimeout=window.setTimeout(function(){X.removeClass(d,"hlt-ax");I.call(g,j);},0);}else{I.call(g,j);}}if(Q.walk("ctxt.onMenuMouseOver",j)){j.ctxt.onMenuMouseOver(h);}},400);if(j.pop&&j.ax){X.addClass(d,"hlt-ax");}}}var i=this.popupConfig;if(i&&!i.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(h.name,h.hWin,h.e,{targetHostElement:i.hostElement}));}},onmouseout:function D(b){var d=b.config&&b.config.targetHostElement?b.config.targetHostElement:b.getTarget(),c=this.getItemFromTarget(d);if(c){window.setTimeout(function(){if(Q.walk("ctxt.onMenuMouseOut",c)){c.ctxt.onMenuMouseOut(b);}},400);}},onclick:function a(b){this._evtTarget=b.getTarget();this.actionByKeyboard=N.isKeyBoardEvent(b.e);this._super(b);b.cancel();},postselectionChange:function K(b){var c=b.added;if(c){var d=this.items[c[0]];I.call(this,d,!(d.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function U(b){E.preventDefault(window,b.e);return false;},postBuildRendering:function W(b){this._super(b);if(this.popupConfig.supportsScroll){var c=this;window.setTimeout(function(){c.updateScrollbars();},10);}},showTooltip:function B(h,g){var f=E.eventTarget(g,h),d=this.getItemNodeFromTarget(f),c=this.getItemFromTarget(f);var b=c&&c.cls&&c.cls.split(" ");this.notToWarn=b&&b.indexOf("not-to-warn")>-1;this.itemDisabled=c&&c.dsbld;if(d&&((c&&c.ttp)||(d.scrollWidth>d.clientWidth)||(f.scrollWidth>f.clientWidth))){this._super(h,g);}},onCloseMenuCallBack:null,onOpen:function L(){if(this._super){this._super();}if(this.hasAccessibility&&this.enableAccessibility){this.enableAccessibility();}},onClose:function A(b){if(this._super){this._super(b);}this.closePopup();if(this.onCloseMenuCallBack){this.onCloseMenuCallBack();}if(this.navMode){var d=this.popupConfig&&this.popupConfig.hostId,c=d&&mstrmojo.all[d];if(c){c.raiseEvent({name:"menuClosed",needFocus:this.actionByKeyboard&&!this.shouldSuppressFocus});}}else{this.opener.shouldSuppressFocus=this.shouldSuppressFocus;}},onRender:function F(){if(this._super){this._super();}R.updateContextMenuItemNetworkState(this.domNode);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.ui._HasScroller","mstrmojo.func");mstrmojo.requiresDescs(1442,2140);var H=mstrmojo.dom,G=mstrmojo.hash,K=mstrmojo.array,A=mstrmojo.func;function C(R,Q){var P=Q?R.nextElementSibling:R.previousElementSibling;if(P&&P.classList.contains("separator")){P=C(P,Q);}return P;}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" tabindex="-1" mstrAttach:mouseover,mouseout,click><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',markupSlots:{containerNode:function E(){return this.domNode.firstChild.firstChild;},btnNode:function M(){return this.domNode.firstChild.children[1];},bottomNode:function M(){return this.domNode.firstChild.children[2];},scrollNode:function(){return this.domNode.firstChild;},scrollbarHostNode:function(){return this.domNode;}},popupConfig:null,postBuildRendering:function B(P){this._super(P);if(this.popupConfig&&this.popupConfig.supportsScroll){var Q=this;window.setTimeout(function(){Q.updateScrollbars();},10);}},onmouseover:function O(Q){var P=this.popupConfig;if(P&&!P.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(Q.name,Q.hWin,Q.e,{targetHostElement:P.hostElement}));}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll){var Q=this.scrollNode;if(!Q){return ;}var P=H.getComputedScrollbarWidth(Q);Q.style.marginRight=-P+"px";Q.style.paddingRight=0;}},monitorWindow:function J(){var Q=document.activeElement,P=null;if(Q!==null&&Q.id!==""){P=this.domNode.querySelector("#"+Q.id)?Q:null;}this._super();if(P){P.focus();}},init:function N(S){this._super(S);var Q=this.popupConfig,P=Q.bottomNode;if(Q&&Q.supportsScroll&&Q.maxHeight>0){if(Q.cssClass.indexOf("RoleMenu")>-1){Q.maxHeight=360;}this.cssText=(this.cssText||"")+";max-height:"+Q.maxHeight+"px";this.scCssText=(this.scCssText||"")+";max-height:"+Q.maxHeight+"px";}if(mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}this.data=Q.data||{};if(Q.onOpen){this.onOpen=Q.onOpen;}this.onOpen=A.composite([this.onOpen,this.notifyChildrenOpen]);var R=A.safeCall("isAppStatePresentation",window.mstrApp)();if(Q.showDataDialogId&&R){this.addChildren([this.getButtonReference(false),this.getButtonReference(true,Q)]);}else{this.addChildren([this.getButtonReference(true,Q),this.getButtonReference(false)]);}if(P){P.slot="bottomNode";this.addChildren(P);}G.copyProps(["buildNavList","onkeydown","isValidTarget"],Q,this);},onOpen:function D(){if(this.hasAccessibility&&this.enableAccessibility){this.enableAccessibility();}},notifyChildrenOpen:function F(){K.forEach(this.children,function(P){if(P.scriptClass==="mstrmojo.ui.ScrollableContainer"&&P.onOpen){P.onOpen();}});},onkeydown:function I(Y){var R=Y.getTarget(),Z=Y.e.keyCode,U;switch(Z){case 37:case 27:var S=this,X=S.opener,P=X.openerMenuElement;if(P){S.close();P.focus();delete X.openerMenuElement;}break;case 39:break;case 38:case 40:var Q=Z===40;U=C(R,Q);if(U){U.focus();}break;case 13:var W=mstrmojo.dom.findWidget(R.parentElement);W.onclick(Y);Y.e.preventDefault();Y.e.stopImmediatePropagation();break;default:Y.e.preventDefault();break;}Y.e.stopPropagation();},getButtonReference:function L(Q,U){var P=2140,W="Cancel",S=U&&U[(Q?"ok":"cancel")+"BtnText"],R;if(Q){P=1442;W="Ok";}R=S||mstrmojo.desc(P,W);return mstrmojo.Button.newWebButton(R,function(Y){var Z=this.parent,X=Z.popupConfig;Z.closeAllMenus();X["fn"+W](X.data,Z);H.stopPropogation(Y.hWin,Y.e);},Q,{slot:"btnNode",bindings:{enabled:function(){return Q?this.parent.popupConfig.okEnabled:this.parent.popupConfig.cancelEnabled;},visible:function(){return Q?this.parent.popupConfig.okVisible:this.parent.popupConfig.cancelVisible;}},cssDisplay:"inline-block",title:R});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",hasToggleItem:false,contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.rw.VisFilterIndicator");mstrmojo.vi.ui.rw._HasVisFilterIndicator=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisFilterIndicator",{displayVisFilterIndicator:function B(){if(mstrApp.isInVFConfigMode){var D=this.parent,E=D&&D.isIndicatorDisplayed,C;if(E){return ;}C=new mstrmojo.vi.ui.rw.VisFilterIndicator({unitContainer:this});C.render();this.indicator=C;D.isIndicatorDisplayed=true;}},updateVisFilterIndicator:function A(){var C=this.indicator;if(mstrApp.isInVFConfigMode&&C){C.updateDimension();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent","mstrmojo.vi.ui.rw._SupportTabNav","mstrmojo.vi.util.A11yUtility","mstrmojo.ui.editors.LinkErrorDialogContent");var u=mstrmojo.func.composite,Q=mstrmojo.dom,i=mstrmojo.Button.newWebButton,F=mstrmojo.css,h=mstrmojo.all,R=mstrmojo.hash,f=mstrmojo.array,l=mstrmojo.vi.util.A11yUtility;var t=40;function e(AC){if(!this.modal){return ;}var AD=window.mstrApp;if(AD&&AD.modalEditorChange){AD.modalEditorChange(this.id,AC);}}function D(AD){var AC=this;window.setTimeout(function(){AD.focus();},0);AC.previousActiveElement=document.activeElement;}function b(){if(this.focusFirstElementOnOpen&&this.firstTabNode){D.call(this,this.firstTabNode);}if(this.focusLastElementOnOpen&&this.lastTabNode){D.call(this,this.lastTabNode);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme,mstrmojo.vi.ui.rw._SupportTabNav],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,previousActiveElement:null,focusOnOpen:false,focusFirstElementOnOpen:false,focusLastElementOnOpen:false,useBrowserTab:false,shouldEnableScrollingIfNeeded:false,firstTabNode:null,lastTabNode:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" tabindex="-1" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu,keydown>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function g(){return this.domNode.firstChild;},titleContainerNode:function w(){return this.domNode.firstChild.firstChild;},titlebarNode:function y(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function Z(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function z(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function G(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function a(){return this.domNode.firstChild.childNodes[2];},buttonNode:function L(){return this.domNode.firstChild.childNodes[3];},curtainNode:function AA(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var AC=this.zIndex;this.editorNode.style.zIndex=AC;this.curtainNode.style.zIndex=AC-1;},onvisibleChange:function(AG){if(AG){return ;}var AF=this.visible,AE="closeEffect",AD="none";if(AF){AE="openEffect";AD="block";if(this.useBrowserTab){var AC=Array.from(this.editorNode.querySelectorAll("button, [href], input, select, textarea, [tabIndex]"));AC=AC.filter(function(AH){return AH.tabIndex!==-1;});this.firstTabNode=AC[0];this.lastTabNode=AC[AC.length-1];}if(this.focusOnOpen){D.call(this,this.editorNode);}}else{if(this.previousActiveElement!==null){if(this.focusOnOpen){window.setTimeout(function(){this.previousActiveElement.focus();this.previousActiveElement=null;}.bind(this),0);}}}if(this[AE]){this.playEffect(AE);}else{this.editorNode.style.display=AD;if(this.modal){this.curtainNode.style.display=AD;}}},onhelpChange:function n(){if(this.showTitle){var AD=this.help,AC=this.helpNode;if(!AD){AC.style.display="none";}else{AC.style.display="block";}}},onleftChange:function H(){this.editorNode.style.left=this.left||"";},ontopChange:function K(){this.editorNode.style.top=this.top||"";}},open:function Y(AD,AC){this._super(AD,AC);e.call(this,true);b.call(this);},close:function q(AC){this._super(AC);e.call(this,false);},unrender:function C(AC){this._super(AC);e.call(this,false);},destroy:function s(AC){this._super(AC);e.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;e.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},postBuildRendering:function U(){this._super();if(this.accessibilityHook){this.accessibilityHook();}},getMovingHandle:function x(){return this.titlebarNode;},getMovingTarget:function d(){return this.editorNode;},onPreClose:function J(){this.hideTooltip();return true;},premousedown:function X(AC){var AD=AC.getTarget();if(AD===this.closeNode||AD===this.helpNode){F.toggleClass(AD,"active",true);}},premouseup:function W(AC){var AD=AC.getTarget();if(AD===this.closeNode||AD===this.helpNode){F.toggleClass(AD,"active",false);}if(AC.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function m(AC){if(AC.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var AE=mstrApp.helpLocaleId||mstrApp.displayLocaleId||mstrApp.localeId;var AD=(mstrApp.isWorkstationPlugin?((mstrApp.helpUrl||"../help/")+"WebHelp/Lang_"+AE+"/Content/"):mstrmojo.helpPath())+(this.help||"");if(typeof workstation!=="undefined"&&mstrApp.openHelpLink){mstrApp.openHelpLink(AD);}else{window.open(AD,"_blank");}return false;}}},onkeydown:function S(AC){if(!this.enableAccessibility){if(this.useBrowserTab&&(document.activeElement===this.lastTabNode)&&(AC.e.key==="Tab")){window.setTimeout(function(){this.firstTabNode.focus();}.bind(this),0);AC.cancel();AC.preventDefault();}return ;}this.handleTab(AC);if(!this.exitByKeyBoard){return ;}var AE=AC.e,AD=AE.keyCode;if(AD===mstrmojo.Enum_Keys.ESCAPE){this.exitByKeyBoard(AC);AC.cancel();AC.preventDefault();}},suppressClose:function(){return false;},enableScrollingIfNeeded:function I(){if(!this.shouldEnableScrollingIfNeeded){return ;}var AD=this.editorNode.style.display==="none";if(AD){this.editorNode.style.display="block";this.editorNode.style.visibility="hidden";}var AC=Q.windowDim().h,AF=this.titleContainerNode.clientHeight,AE=AC-2*t-AF;if(AE<this.containerNode.scrollHeight){this.containerNode.style.height=AE+"px";this.containerNode.style.overflowY="auto";}else{this.containerNode.style.height="";this.containerNode.style.overflowY="";}if(AD){this.editorNode.style.display="none";this.editorNode.style.visibility="";}},resizeDialog:function P(){this.enableScrollingIfNeeded();if(this._super){this._super();}},_set_visible:function k(AH,AE){var AD=(this[AH]!==AE);if(AD){this[AH]=AE;var AG=this._close_handler;if(AE){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var AF=this;AG=this._close_handler=AG||function(AI){var AJ=Q.eventTarget(self,AI);if(!AF.suppressClose()&&AJ&&AJ.parentNode&&!Q.contains(AF.editorNode,AJ,true,document.body)){AF.close();}};Q.attachEvent(document.body,"mousedown",AG);}}else{var AC=this._curtain_handler;if(AC){Q.detachEvent(window,"resize",AC);}if(AG){Q.detachEvent(document.body,"mousedown",AG);}}}return AD;},showTooltip:function AB(AH,AG){var AF=this,AD=Q.findAncestorByAttr(Q.eventTarget(AG,AH),"tooltip",true,this.domNode),AE=AD&&AD.value;if(!AF.hasOpenTooltip&&AE){var AC=Q.position(AD.node);AF.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:AE,top:Math.max(AC.y+40,0),left:Math.max(AC.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(AH,AG);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(AC){AC=Math.round(AC);return["rgb(",AC,",",AC,",",AC,")"].join("");}}},preStart:function(){var AD=this.target,AC=this.widget;AC.editorNode.style.display="block";if(!AC.modal){return false;}AD.style.display="block";F.setOpacity(AD,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var AC=this.widget;AC.editorNode.style.display="none";return !!AC.modal;}};function E(AC){return function(){h[AC].destroy();};}function M(AD,AK,AL,AM){var AC=AK.id||"mojoAlertx9",AH,AJ=AK.buttons;f.forEach(AJ,function(AO){var AN=AO.onclick;AO.onclick=function(AP){var AQ=h[AC];if(AN&&AN.call(AO,AP)===false){return ;}AQ.destroy();if(AK.enableAccessibility&&AK.navMode&&AK.docModel){AK.docModel.raiseEvent({name:"dialogClosed",dialogName:"exportPDF",needFocus:l.isKeyBoardEvent(AP.e)});}AQ=null;};});try{!!h[AC]&&h[AC].destroy();}catch(AI){}var AE=AK.cssClass,AF=[];if(AE){AF.push(AE);delete AK.cssClass;}if(AM){AF.push(AM);}AF.push("mstrmojo-alert");AH={scriptClass:"mstrmojo.Editor",id:AC,width:"475px",zIndex:1000,title:AL||mstrmojo.desc(11812,"Notification"),cssClass:AF.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:AK.boxCSS||"alert-content",children:[{scriptClass:"mstrmojo.Label",text:AD,arialLabel:AK.arialLabel,allowHTML:AK.allowHTML}]}],visible:true};var AG=new mstrmojo.Editor(R.copy(AK,AH));AG.render();return AG;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function O(AD,AJ,AE){AE=AE||{};var AK=AE.forceClose,AI=AE.callback||mstrmojo.emptyFn,AH=R.copy(AJ||{},{buttons:AK?[mstrmojo.Button.newActionButton((AE.buttonText||mstrmojo.desc(8607,"Dismiss")),AI)]:null,showTitle:false,modal:false,top:"42px"}),AF=AE.duration||6000;var AG=M(AD,AH,"",AK?"ed-notify":"ed-toast"),AC=AG.id;if(!AK){window.setTimeout(u([AI,E(AC)]),AF);}else{window.setTimeout(function(){if(h[AC]){h[AC].editorNode.style.opacity=0.75;}},6000);}return AG;};mstrmojo.confirm=function p(AD,AK,AM){AK=AK||{};var AF=AK.confirmBtn||{},AJ=AK.cancelBtn||{},AL=AF.hot!==false,AE=!!AJ.hot,AI=AM&&AM.title,AG=[],AC,AH;if(!(AM&&AM.hideConfirm)){AC=i(AF.t||mstrmojo.desc(219,"Yes"),AF.fn,AL,AF.cfg);AG.push(AC);}if(!(AM&&AM.hideCancel)){AH=i(AJ.t||mstrmojo.desc(218,"No"),AJ.fn,AE,AJ.cfg);AG.push(AH);}if(AM&&AM.reverseBtnOrder){AG.reverse();}return M(AD,R.copy(AM||{},{buttons:AG,onPreClose:function(){if(AJ&&AJ.fn){AJ.fn();}return true;}}),AI,[]);};mstrmojo.warn=function N(AE,AC,AD){AD=AD||{};AD.cssClass=(AD.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(AE,AC,AD);};mstrmojo.alert=function j(AH,AE,AG,AI,AC,AF){var AD={title:AG||mstrmojo.desc(12405,"Alert"),zIndex:AI,cssClass:AC,buttons:[i(mstrmojo.desc(1442,"OK"),AE,true)],onPreClose:function(){if(AE){AE();}return true;}};R.forEach(AD,function(AK,AJ){if(!AK){delete AD[AJ];}});return M(AH,R.copy(AF,AD),AG,[]);};mstrmojo.error=function c(AH,AD,AG){var AE=AH||{};var AF=mstrmojo.desc(96,"Error");var AC=true;if(AG){AF=(AG.title)?AG.title:mstrmojo.desc(96,"Error");AG.title=AF;if(AG.enableContactStr===false){AC=false;}}M("",R.copy(AG||{},{buttons:[i(mstrmojo.desc(1442,"OK"),AD,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:AE.shortDesc,longDesc:AE.longDesc,showToggle:!!(AE.longDesc),enableContactStr:AC,allowHTML:!!(AG&&AG.allowHTML===true)}]}),AF,[]);};mstrmojo.linkError=function B(AG,AC,AF){var AD=AG||{};var AE=mstrmojo.desc(11812,"Notification");if(AF){AE=AF.title||AE;AF.title=AE;}return M("",R.copy(AF||{},{buttons:[i(mstrmojo.desc(1442,"OK"),AC,true)],children:[{scriptClass:"mstrmojo.ui.editors.LinkErrorDialogContent",shortDesc:AD.shortDesc,longDesc:AD.longDesc,shortLinkMsg:AD.shortLinkMsg,shortLinkFn:AD.shortLinkFn,longLinkMsg:AD.longLinkMsg,longLinkFn:AD.longLinkFn,showToggle:!!(AD.longDesc),allowHTML:true}]}),AE,[]);};mstrmojo.statefulConfirm=function o(AC,AK,AM){AK=AK||{};var AF=AK.confirmBtn||{},AJ=AK.cancelBtn||{},AG=AK.checkbox||{},AL=AF.hot!==false,AE=!!AJ.hot,AI=AM&&AM.title,AH=[{scriptClass:"mstrmojo.HBox",alias:"checkboxContainer",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",ariaLabel:AG.t||"",checked:false},{scriptClass:"mstrmojo.Label",text:AG.t||"",onclick:function AN(){this.parent.checkbox.onclick();}}]},i(AF.t||mstrmojo.desc(219,"Yes"),function(){if(typeof AF.fn==="function"){AF.fn();}var AO=h[id];if(R.walk("checkboxContainer.checkbox.checked",AO.btnHbox)===true){window.localStorage.setItem(AD+id,true);}},AL,R.copy(AF.cfg,{cssClass:"mstrmojo-Editor-button"})),i(AJ.t||mstrmojo.desc(218,"No"),AJ.fn,AE,R.copy(AJ.cfg,{cssClass:"mstrmojo-Editor-button"}))],AD="MSTRMOJO-STATEFULCONFIRM-";id=AM.id;if(!id){throw new Error("stateful confirm should have id defined");}if(window.localStorage.getItem(AD+id)==="true"){typeof AF.fn==="function"&&AF.fn();return null;}return M(AC,R.copy(AM||{},{noButtonCls:true,buttons:AH,onPreClose:function(){if(AJ&&AJ.fn){AJ.fn();}return true;}}),AI,"mstrmojo-stateful-confirm");};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],Z=["width","height"],p="p_fmts";var m="px";var k={getContentHeight:function(t,w){var u=w.ttl&&w.ttl.height;if(t&&u&&!this.floatingToolbar){return Math.max(parseInt(t,10)-parseInt(u,10),0)+m;}return"";},getPortletMinHeight:function(t){return t.ttl.height;},adjustTitleCss:function(){}};var h={getContentHeight:function(t){return t;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(t){t.titlebarNodeClass+=" floating";}};function A(x,u){var w=this.parent,t=x+"DirtyKey";if(w[t]){w[t](u);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function j(){var u=this.parent,x=u&&u.defn;if(x&&parseInt(x.t,10)===mstrmojo.EnumRWUnitType.PANEL){var t=u.parent,w=t.defn;if(w&&w.ifp){return t;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:k,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var u=this.content,t=u&&u.getFormats();return t&&t[p];},updateContentHeight:function f(y){var t=this.getFormats(),u=this.content,x=u.dimNode||u.domNode,w=((t.ttl&&parseInt(t.ttl.height,10))||0);if(x){if(!y){w+=((this.fc||this.isInFilterPanel())?x.offsetHeight:(t.height?parseInt(t.height,10):0));}this.containerNode.style.height=w+m;this.shadowNode.style.height=w+m;}},init:function q(t){this._super(t);var u=this.content;this.n=(t&&t.defn&&t.defn.n)||"";if(u&&u.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var u=this._ts=(this.floatingTitle)?h:k;if(this.isInFilterPanel()){var w=R.clone(this.formatHandlers);w.portletContainerNode=["z-index","height","B","backgroud-color"];w.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=w;}this._super();u.adjustTitleCss(this);var t="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=t;}if(!this.toolbar){this.toolbarNodeCssText+=t;}var x=mstrmojo._Formattable.getBorderWidths(this);if(x.l||x.t||x.r){this.borderCss="has-border";}},postBuildRendering:function a(){var AI=mstrmojo.dom,AD=this.titleNode,AK=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var AC=mstrmojo.css,AJ=this.contentNode,AL=this;if(!this._onhover){this._onhovertt=function(){AC.addClass(AL.titleNode,["visible"]);AL._onflt=true;return true;};this._onhoverofftt=function(){AC.removeClass(AL.titleNode,["visible"]);AL._onflt=false;return true;};this._onhover=function(){var AN=AL.titleNode;AC.addClass(AN,["visible"]);var AO=AI.position(AL.contentNode,true);AN.style.top=(AO.y-AN.clientHeight+2)+m;AN.style.left=AO.x+m;return true;};this._onhoveroff=function(){AC.removeClass(AL.titleNode,["visible"]);return true;};}AI.attachEvent(AJ,"mouseover",this._onhover);AI.attachEvent(AJ,"mouseout",this._onhoveroff);AI.attachEvent(AD,"mouseover",this._onhovertt);AI.attachEvent(AD,"mouseout",this._onhoverofftt);}if(AD&&AK){AI.attachEvent(AD,"click",AK);}if(this._super){this._super();}var AM=this.getFormats();this.set("fc",AM&&!AM.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var AF=this.portletContainerNode.style,AG=this.shadowNode.style,AB=this.parent;AF.width=AG.width="99%";AF.top=AG.top=AB.topStart+m;AF.left=AG.left=G+m;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(AM.left,10)+G*this.orgPos+m;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){var x=this.model.getZoomFactor();var AA=function(AN,t){if(!AN){return t;}return parseInt(AN,10)*x;};var u=this.buttonbarNode.getElementsByClassName("mstrmojo-Button mstrmojo-FilterPanel-Btn");var AE=8;var z=0;for(var AH=0;AH<u.length;AH++){var w=u[AH];var y=window.getComputedStyle(w);z=Math.max(z,AA(y.width,31));w.style.height=w.style.lineHeight=w.clientHeight*x+"px";w.style.fontSize=AE*x+"pt";w.style.marginTop=AA(y.marginTop,5)+"px";w.style.marginBottom=AA(y.marginBottom,5)+"px";w.style.borderRadius=AA(y.borderRadius,12)+"px";w.style.borderWidth=AA(y.borderWidth,1)+"px";}for(var AH=0;AH<u.length;AH++){u[AH].style.width=z+"px";}}},adjustFPHeight2Fit:function(){var w=mstrmojo.dom,t=w.position(this.titleNode),u=w.position(this.contentNode).y-t.y-t.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-u+"px";},unrender:function E(w){if(this.floatingTitle&&this.titleNode){var y=this.domNode,u=this.titleNode,x=mstrmojo.dom;if(y&&this._onhover){x.detachEvent(y,"mouseover",this._onhover);}if(y&&this._onhoveroff){x.detachEvent(y,"mouseout",this._onhoveroff);}if(u&&this._onhovertt){x.detachEvent(u,"mouseover",this._onhovertt);}if(u&&this._onhoverofftt){x.detachEvent(u,"mouseout",this._onhoverofftt);}if(u){document.body.removeChild(u);}}if(this._super){this._super(w);}},updateStyle:function(u,t){var y=this.shadowNode.style,x=this.containerNode.style;y.height=x.height=u;y.width=x.width=t;},_createFormats:function X(){var z=this.content&&this.content.getFormats(),x;x=z.p_fmts={};var t,y;for(t in Q){y=Q[t];if(z[y]!==undefined){x[y]=z[y];delete z[y];}}for(t in Z){y=Z[t];if(z[y]!==undefined){x[y]=z[y];}}z.height=this._ts.getContentHeight(z.height,x);if(mstrmojo.dom.isIE&&x.fx&&x.fx.ds&&!x["background-color"]){x["background-color"]="#ffffff";}var w=x.ttl,u=w&&w["background-color"];if(u){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(u,"light","dark");}},refresh:function s(){if(!this.hasRendered){return ;}var u=this.children,t;for(t=u.length-1;t>=0;t--){u[t].refresh();}},isInFilterPanel:function L(){return(j.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var t=this.getFilterPanel();return t&&t.defn&&parseInt(t.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return j.call(this);},getContainerHeight:function e(){return this.containerNode.clientHeight;},relocate:function C(t){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=t+m;}},setInfoWindowDimensions:function o(y){var u=this.domNode.style,t=this.shadowNode.style,w=this.portletContainerNode.style,x=mstrmojo._Formattable.getBorderWidths(this);y.h-=x.h;y.w-=x.w;t.height=w.height=u.height=y.h+m;t.width=w.width=u.width=y.w+m;y.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(t){A.call(this,"add",t);},removeDirtyKey:function J(t){A.call(this,"remove",t);},setDirtyChildren:function b(){var t=this.content;if(t&&t.setDirtyChildren){t.setDirtyChildren.apply(t,arguments);}}});var Y=0,O=1,l=2;function N(t){var u=this.content.defn;if(u){u.set("ds",t);}}function n(t){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:t}};}function c(AG,AE,t,AH){var AC=this.content,AF=AC.k,AB=mstrmojo.boxmodel.px2Inches,x=AC.model.docModel||AC.model,AJ=x.getZoomProps(),y=this.getFormats(),u=AE!==undefined&&t!==undefined,AI={},z=this,AA=n.call(this,AG),AD=!(AC.defn.t===mstrmojo.EnumRWUnitType.GRIDGRAPH||AC.defn.t===mstrmojo.EnumRWUnitType.GRAPH);if(u){AA.FormattingSize={OldHeight:AB(AJ,AE),OldWidth:AB(AJ,t),Height:AB(AJ,parseInt(y.height,10)),Width:AB(AJ,parseInt(y.width,10))};}AI.success=function(w){var AK=w&&w.data;if(AK){x.loadPartialData(AK,AF);}N.call(z,AG);var AL=z.parent;if(AL.adjustSectionSize&&u){AL.adjustSectionSize();}};x.updateUnitFormat(AC,1,AA,AI,{params:{suppressData:AD,rapidExec:AD},config:u?null:{silent:true},preserveUndo:true});if(!u&&!(AH&&AH.all)){if(x.saveRWProps){x.saveRWProps(AF,undefined,1,this.loadDataOnResize,AI,true);}}}function U(){var AA=this.content;if(!AA){return ;}var y=function(AE){mstrmojo.array.forEach(AE,function(AF){if(AF.ds!==undefined){AF.set("visible",(AF.ds!==AA.defn.ds));}});},AB;if(this.isInFilterPanel()){var w=(parseInt(this.defn.ds,10)===Y);AA.set("visible",w);this.updateContentHeight(!w);AB=this.leftToolbar;y(AB&&AB.children);var x=this.parent;if(x.refreshFP){x.refreshFP();}}else{var t=AA.getFormats(),AC=this.getFormats(),u=this.portletContainerNode.style,AD=this.shadowNode.style,z=this.contentNode.firstChild.style;z.height=t.height;z.width=t.width;AD.height=u.height=AC.height;AD.width=u.width=AC.width;AD.top=u.top=AC.top;AD.left=u.left=AC.left;if(AC["z-index"]!==undefined){AD.zIndex=u.zIndex=AC["z-index"];}AB=this.rightToolbar;y(AB&&AB.children);if(AA.resize){AA.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function X(){this._super();var u=this.getFormats();var t=parseInt(this.defn.ds,10);if(t===Y){u.normHeight=u.height;u.normWidth=u.width;if(u["z-index"]!==null&&u["z-index"]!==undefined){u.normZIndex=u["z-index"];}}if(t!==l){u.normTop=u.top;u.normLeft=u.left;}},onmaximize:function g(){var x=this.parent,AA=this.content,z=AA&&AA.getFormats(),w=this.getFormats(),u=w.height,t=w.width,y=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();AA.clearCache();w.height=(parseInt(x.getHeight(),10)-y.h)+m;z.height=this._ts.getContentHeight(w.height,w);w.width=z.width=(x.getWidth()-y.w)+m;w.top=w.left=0;w["z-index"]=x.getMaxZIndex()+1;c.call(this,l,u,t);},onminimize:function d(){var z=this.content,u=z.dimNode||z.domNode,y=z&&z.getFormats(),x=this.getFormats(),w=x.height||u.offsetHeight,t=x.width;this.clearCache();z.clearCache();x.width=y.width=x.normWidth;x.top=x.normTop;x.left=x.normLeft;if(x.normZIndex!==null&&x.normZIndex!==undefined){x["z-index"]=x.normZIndex;}y.height=0;x.height=this._ts.getPortletMinHeight(x);c.call(this,O,w,t);},onrestore:function S(){var y=this.content,x=y&&y.getFormats(),w=this.getFormats(),u=w.height,t=w.width;this.clearCache();y.clearCache();w.height=w.normHeight;x.height=this._ts.getContentHeight(w.height,w);w.width=x.width=w.normWidth;w.top=w.normTop;w.left=w.normLeft;if(w.normZIndex!==null&&w.normZIndex!==undefined){w["z-index"]=w.normZIndex;}c.call(this,Y,u,t);},changeWindowState:function I(x){N.call(this,x);var u=this.content,y=n.call(u,x),t=u.model.docModel||u.model;return t.getUnitFormatAction(u,1,y);},oncollapse:function W(t){c.call(this,O,undefined,undefined,t);},onexpand:function D(t){c.call(this,Y,undefined,undefined,t);},adjustFP:function i(){var u=(parseInt(this.defn.ds,10)===Y);this.content.set("visible",u);this.updateContentHeight(!u);var t=this.parent;if(t.refreshFP){t.refreshFP();}},postBuildRendering:function a(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,U);}this._super();if(this.isInFilterPanel()){var t=(parseInt(this.defn.ds,10)===Y);this.updateContentHeight(!t);}}});mstrmojo.DocPortlet.ST_RESTORE=Y;mstrmojo.DocPortlet.ST_MAX=l;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function C(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=E.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(!mstrApp.isWorkstationPlugin||E.position(K).w||E.position(K).h){if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Box","mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.Checkbox","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.enums.EnumPromptType");var G=mstrmojo.array,E=mstrmojo.hash,D=mstrmojo.string,F=mstrmojo.vi.enums.EnumFeatures,B=mstrmojo.vi.enums.EnumPromptType;var A="ANY_OTHER_PROMPTS";var C={USE_THE_SAME_ANSWER_FROM_THE_SOURCE_PROMPT:1,PROMPT_USER:2,IGNORE_THE_PROMPT:3,USE_THE_SELECTED_OBJECT_AS_THE_PROMPT_ANSWER:4,USE_THE_DEFAULT_ANSWER:8,USE_FILTER_PANEL_SELECTIONS:10};mstrmojo.ui.editors.controls.PromptAndAnswerList=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ui.editors.controls.PromptAndAnswerList",cssClass:"prompts-wrapper",visible:false,prompts:[],aopam:C.PROMPT_USER,fromVis:false,onAnswerChange:mstrmojo.emptyFn,promptList:undefined,promptAnswersPulldown:undefined,selectedPromptId:undefined,init:function(H){this._super(H);this.prompts=E.clone(H.prompts||[]);this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(17001,"Choose prompt")},this.getPromptList(),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(17002,"Answer prompt")},this.getPromptAnswersPulldown()]);},setStateOfPrompts:function(){if(this.prompts.length>0){this.promptList.set("items",this.generatePromptItems());this.promptList.set("selectedIndex",0);this.selectedPromptId=this.prompts[0].id;this.setSelectedPromptAnswer();}else{this.promptList.set("items",[]);this.promptList.set("selectedIndex",-1);this.selectedPromptId=undefined;}},postpromptsChange:function(){this.prompts=E.clone(this.prompts||[]);this.setStateOfPrompts();},postaopamChange:function(){this.setStateOfPrompts();},generatePromptItems:function(){var H=this;return G.map(this.getRealPrompts(),function(I){return{n:D.apply('<span class="prompt-name" title="{@name} ({@am})">{@name}</span><span class="answer-mode" title="{@name} ({@am})">({@am})</span>',{name:I.nm,am:(G.filterOne(H.getAnswerList(I),function(J){return J.id===I.am;})||{}).n})};});},setSelectedPromptAnswer:function(){var H=this.getPromptInfo(),I=this.getAnswerList(H);this.promptAnswersPulldown.set("items",I);this.promptAnswersPulldown.set("selectedIndex",G.find(I,"id",H.am));},getPromptAnswer:function(I){if(I===A){return this.aopam;}var H=this.getPromptIndex(I);if(H!==-1){return this.prompts[H].am;}return undefined;},getAnswerList:function(H){var J=1,I=[{n:mstrmojo.desc(17350,"Prompt user"),id:C.PROMPT_USER},{n:mstrmojo.desc(17349,"Use the default answer"),id:C.USE_THE_DEFAULT_ANSWER},{n:mstrmojo.desc(17351,"Ignore the prompt"),id:C.IGNORE_THE_PROMPT}];if(H&&(H.id===A||H.hsp)){I.splice(1,0,{n:mstrmojo.desc(17348,"Use the same answer from the source prompt"),id:C.USE_THE_SAME_ANSWER_FROM_THE_SOURCE_PROMPT});}if(H&&H.pt===B.ATTRIBUTE_LELMENT_LSIT&&this.fromVis){I.splice(1,0,{n:mstrmojo.desc(26918,"Use the selected values as the answer"),id:C.USE_THE_SELECTED_OBJECT_AS_THE_PROMPT_ANSWER});J=2;}if(mstrApp.supportFeature(F.SUPPORT_ANSWER_PROMPT_WITH_FILTER_PANEL_SELECTIONS)&&H&&H.orid&&(H.pt===B.ATTRIBUTE_LELMENT_LSIT||H.pt===B.EXPRESSION)){I.splice(J,0,{n:mstrmojo.desc(20144,"Use the filter panel selection(s) as the answer"),id:C.USE_FILTER_PANEL_SELECTIONS});}return I;},getPromptInfo:function(H){H=H===undefined?this.selectedPromptId:H;return G.filterOne(this.getRealPrompts(),function(I){return I.id===H;});},getPromptIndex:function(H){H=H===undefined?this.selectedPromptId:H;return G.find(this.getRealPrompts(),"id",H);},getRealPrompts:function(){return this.prompts.concat({id:A,am:this.aopam,nm:mstrmojo.desc(17000,"Any other prompts")});},getPromptList:function(){var J=this,K,I=this.generatePromptItems();this.promptList=new mstrmojo.ui.ScrollableList({cssClass:"target-prompts",allowHTML:true,items:I,postitemsChange:function(){if(this.scrollNode){this.scrollNode.scrollTop=K;}},selectionAdded:function(M){if(M.added.length===0){return ;}var L=M.added[0],N=J.getRealPrompts()[L].id;if(J.selectedPromptId===N){return ;}J.selectedPromptId=N;J.setSelectedPromptAnswer();}});var H=this.promptList.set;this.promptList.set=function(M,L){if(M==="items"){K=this.scrollNode?this.scrollNode.scrollTop:0;}return H.call(this,M,L);};return this.promptList;},getPromptAnswersPulldown:function(){var H=this;this.promptAnswersPulldown=mstrmojo.ui.Pulldown.newPulldown(this.getAnswerList(),function(I){if(H.getPromptAnswer(H.selectedPromptId)===I.id){return ;}H.setPromptAnswer(H.selectedPromptId,I.id);H.promptList.set("items",H.generatePromptItems());H.promptList.set("selectedIndex",H.getPromptIndex());},0);return this.promptAnswersPulldown;},setPromptAnswer:function(J,I){if(J===A){this.aopam=I;this.onAnswerChange(true,I);return ;}var H=this.getPromptIndex(J);if(H!==-1){this.prompts[H].am=I;this.onAnswerChange(false,E.clone(this.prompts));}}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.requiresCls("mstrmojo.ui.CheckList","mstrmojo.EnumSubtotals");var F=mstrmojo.array,B=mstrmojo.EnumSubtotals.TYPES;function C(I,H){var G=H?I.nextElementSibling:I.previousElementSibling;if(G&&G.classList.contains("separator")){G=C(G,H);}return G;}mstrmojo.express.ui.SubtotalsWidget=mstrmojo.declare(mstrmojo.ui.CheckList,null,{scriptClass:"mstrmojo.express.ui.SubtotalsWidget",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:true,accessibilityMenuContainer:function(){return this;},init:function E(G){this._super(G);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-vi-subtotals");},_set_selectedItems:function(J,H){var G=[],I=this.prevSelection={};F.forEach((H||[]),function(K){G.push(K.t);});F.forEach(G,function(K){I[K]=true;});this.setSelectedItems(F.filter(this.items,function(K){return F.indexOf(G,K.v)>-1;}));},onkeydown:function D(R){var K=R.getTarget(),U=R.e.keyCode,N;var H=function(){var X=window.event,e=X.keyCode,c=mstrmojo.dom.findWidget(this.offsetParent),Y=mstrmojo.dom.findWidget(c.containerNode.firstChild),W=Y.itemsNode,f=this.parentElement.childNodes[0],b=this.parentElement.childNodes[1],d=null,a=this.textContent==="OK";switch(e){case 9:if(!X.shiftKey){d=a?b:W;break;}d=a?W:((f.classList.contains("disabled"))?W:f);break;case 13:var Z=c.opener&&c.opener.td;this.onclick(X);if(this===b&&Z){Z.focus();}break;default:X.stopPropagation();}if(d){if(d!==W){d.setAttribute("tabindex","-1");d.setAttribute("role","button");mstrmojo.dom.attachEvent(d,"keydown",H);}d.focus();}X.preventDefault();X.stopImmediatePropagation();};switch(U){case 37:case 27:var M=this.parent,P=M.opener,G=P.openerMenuElement;if(G){M.close();G.focus();delete P.openerMenuElement;}break;case 39:break;case 38:case 40:var J=U===40;N=C(K,J);if(N){N.focus();}break;case 13:var O=K.getAttribute("aria-checked")==="true";K.setAttribute("aria-checked",!O);this.onclick(R);break;case 9:var Q=mstrmojo.dom.findWidget(this.domNode.offsetParent),I=Q.btnNode&&Q.btnNode.hasChildNodes(),L=I&&Q.btnNode.children,S;if(K.classList.contains("item")){if(I&&!L[0].classList.contains("disabled")){S=L[0];}else{if(I){S=L[1];}}}if(S&&S.classList.contains("mstrmojo-WebButton")){mstrmojo.dom.attachEvent(S,"keydown",H);S.setAttribute("role","button");S.setAttribute("tabindex","-1");S.focus();}R.e.preventDefault();break;default:R.e.preventDefault();break;}R.e.stopPropagation();},getSubtotalTypes:function A(){var I=this.items,J=this.selectedIndices,L=this.prevSelection,H=I.filter(function(N,M){return J[M]&&!L[N.v];}),K=I.filter(function(N,M){return !J[M]&&L[N.v];}),G=function(M){return M.v;};return[H.map(G),K.map(G)];},items:B});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.string","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+mstrmojo.string.encodeHtmlString(D[E.itemDisplayField],false,true)+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz","mstrmojo.string");var B=mstrmojo.string;var A={render:function(G,C,H){var J=(H.htmlName+C),E=H.selectedIndices[C]?"checked ":"",F=E?" selected":"",D=G.v!=="u;"?" nAll":"",I=G[H.itemDisplayField||"n"];return'<div class="'+H.itemCssClass+F+D+'"><input type="'+H.inputType+'" name="'+H.htmlName+'" id="'+J+'" value="'+C+'" '+E+'/><label for="'+J+'" title="'+B.encodeHtmlString(G[H.itemTitleField]||"")+'" style="'+H.labelCssText+'">'+(H.allowHTML?I:B.encodeHtmlString(I))+"</label></div>";},select:function(D){var C=D&&D.firstChild;if(C){if(!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},unselect:function(D){var C=D&&D.firstChild;if(C){if(C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(C){this._super(C);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(F){var E=F.hWin,H=F.e,G=mstrmojo.dom.eventTarget(E,H);if(G&&G.nodeName.match(/input/i)){var D=parseInt(G.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(D);}else{var C=(G.checked)?"add":"remove";this[C+"Select"](D);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller");function d(j){var l=document.createElement("div"),k=l.style,i=j.domNode;l.className="mstrmojo-DataGrid-avatar";k.height=i.clientHeight+"px";i.appendChild(l);j.avatar=l;return l;}function Q(i){var j=mstrmojo.dom.position(i.domNode,true);return j.x;}function O(j){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" rh="'+j+'"></div>';}function f(k){var j=k.getAttribute("rh"),i=j&&parseInt(j,10);return i;}function c(j,m,i){var l=i.src,n=l&&l.data,k=n&&n.resizingIdx;if(!(k&&k>0)){return m&&m.apply(j,[i]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(l,k){var i=l.colSizeArray;var j=[-i[k-1]+l.minColWidth,(k==i.length-1)?i[k]-l.resizeHandleWidth-l.minColWidth:i[k]-l.minColWidth];return j;},updateSize:function F(l,k,j){var i=l.colSizeArray;i[k-1]=i[k-1]+j;i[k]=i[k]-j;},updateColumnWidth:function U(l,j,m,k){var i=l.colSizeArray;j[k-1].style.width=i[k-1]+"px";m[k-1].style.width=i[k-1]+"px";j[k].style.width=i[k]+"px";m[k].style.width=i[k]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(o,n){var p=o.minColWidth+o.resizeHandleWidth,j=o.colSizeArray,l=0;for(var m=n;m<j.length;++m){l+=j[m]-p;}var k=[-j[n-1]+p,l];return k;},updateSize:function F(m,q,k){var p=m.minColWidth+m.resizeHandleWidth,n=m.colSizeArray;n[q-1]=n[q-1]+k;var j=[];for(var l=0;l<n.length-q;++l){j[l]=q+l;}j.sort(function(i,t){return n[i]-n[t];});for(var l=0;l<j.length;++l){var s=k/(j.length-l);var o=n[j[l]];k-=(o>=s+p)?s:o-p;n[j[l]]=(o>=s+p)?o-s:p;}},updateColumnWidth:function U(n,k,o,m){var j=n.colSizeArray;for(var l=m-1;l<j.length;++l){k[l].style.width=j[l]+"px";o[l].style.width=j[l]+"px";}}};mstrmojo.RESIZE_CURRENT_COLUMN_MODE={getRange:function G(o,n){var p=o.minColWidth+o.resizeHandleWidth,j=o.colSizeArray,l=0;for(var m=n;m<j.length;++m){l+=j[m]-p;}var k=[-j[n-1]+p,l];return k;},updateSize:function F(l,k,j){var i=l.colSizeArray;i[k-1]=i[k-1]+j;},updateColumnWidth:function U(l,j,m,k){var i=l.colSizeArray;j[k-1].style.width=i[k-1]+"px";m[k-1].style.width=i[k-1]+"px";l.widgetResized();}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function g(){var k,o,m,l,n,j;o=this.headerContainerNode;m=o&&o.getElementsByTagName("table")[0];l=m.rows[0].cells;k=[];for(n=0,j=l.length;n<j;n++){k.push(l[n].offsetWidth);}return k;},onselectstart:function a(){return false;},postBuildRendering:function Y(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;if(this.resizeHandles&&this.resizeHandles.length>0){for(var j=0;j<this.resizeHandles.length;j++){mstrmojo.dom.attachEvent(this.resizeHandles[j],"selectstart",this.onselectstart);}}},unrender:function X(k){if(this.resizeHandles&&this.resizeHandles.length>0){for(var j=0;j<this.resizeHandles.length;j++){mstrmojo.dom.detachEvent(this.resizeHandles[j],"selectstart",this.onselectstart);}delete this.onselectstart;}if(this._super){this._super(k);}},getDragData:function E(i){var k=i.src,l=k.node,j=f(l);if(j&&j>0){return{resizingIdx:j,startingX:k.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(i);}return null;},allowDrop:function K(i){var k=i.src,l=k&&k.data,j=l&&l.resizingIdx;if(j&&j>0){return true;}return this.dropZone;},ondragenter:function R(i){c(this,this._super,i);},ondragover:function S(i){c(this,this._super,i);},ondragleave:function B(i){c(this,this._super,i);},ondrop:function Z(i){c(this,this._super,i);},isDragValid:function C(i){var k=i.src,l=k&&k.data,j=l&&l.resizingIdx;if(j&&j>0){return true;}if(this._super){return this._super(i);}return false;},ondragstart:function b(i){var l=i.src,m=l&&l.data,k=m&&m.resizingIdx;if(k&&k>0){var j=this.avatar||d(this);this.ownAvatar=true;j.style.left=(m.startingX-m.baseX)+"px";j.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}m.resizingRange=this.resizeColumnBehavior.getRange(this,k);return ;}if(this._super){this._super(i);}},ondragmove:function P(j){var q=j.src,k=q&&q.data,o=k&&k.resizingIdx;if(o&&o>0){var p=j.tgt,l=this.avatar,n=k.resizingRange,m=p.pos.x-k.startingX,i=Math.min(n[1],Math.max(m,n[0]));k.deltaX=i;if(l){l.style.left=(k.startingX-k.baseX+i)+"px";}}else{if(this._super){this._super(j);}}},ondragend:function L(n){var x=n.src,o=x&&x.data,u=o&&o.resizingIdx;if(u&&u>0){var j=this.titleColGroup,w=j&&j.childNodes,q=this.dataColGroup,t=q&&q.childNodes,m=w.length,p=this.colSizeArray,k=o.deltaX;this.resizeColumnBehavior.updateSize(this,u,k);if(this._firstTimeResize){var l;for(l=0;l<m;l++){w[l].style.width=p[l]+"px";t[l].style.width=p[l]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,w,t,u);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(n);}}}});mstrmojo.requiresCls("mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(l){var o=document.createElement("colgroup"),j=l.length,k,n;for(n=0;n<j;n++){var m=document.createElement("col");k=l[n];if(k.colWidth){m.style.width=k.colWidth+"px";}m.className=k.colCss||("col"+n);o.appendChild(m);}return o;}function I(k){var l=k._headerWidgets_,j=l&&l.length;if(j>0){var m;for(m=0;m<j;m++){l[m].destroy(true);}}}function A(m,i,l,o,j){var k=[],n=m.headerWidget;l=l?(" "+l):"";o=o||this._headerWidgets;j=j?(" "+j):' w="1"';k.push("<td"+l+">");if(i>0&&this.resizableColumns){k.push(O(i));}k.push('<div class="mstrmojo-DataGrid-headerText');k.push(m.headerCss?" "+m.headerCss:"");if(n){o.push(mstrmojo.hash.copy(n));k.push('"'+j+">");}else{k.push('">');}k.push(m.headerText||"&nbsp");k.push("</div>");k.push("</td>");return k.join("");}function e(j,q){var l,o,p,k,s,n,m=[];j=j||"_headerWidgets";q=q||"1";l=this[j];o=l.length;if(o>0){p=this.headerContainerNode.getElementsByTagName("div");k=mstrmojo.array.filter(p,function(i){return i.getAttribute("w")==q;});for(n=0;n<o;n++){l[n].placeholder=k[n].firstChild;l[n].dataGrid=this;s=mstrmojo.registry.ref(l[n]);s.render();m.push(s);}}this[j+"_"]=m;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},shouldDisableItem:function(){return false;},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;},headerRows:function(){return this.domNode.firstChild.firstChild.rows;},bodyRows:function(){return this.domNode.lastChild.firstChild.firstChild.rows;},resizeHandles:function(){return this.domNode.getElementsByClassName("mstrmojo-DataGrid-resizeHandle");}},markupMethods:{oncontentWidthChange:function(){var j=this.contentWidth,k=this.headerContainerNode,i=this.itemsContainerNode;if(j&&k&&i){k.style.width=j;i.style.width=j;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(k,i,j){var l=new mstrmojo.DataRow({columns:j.columns,data:k,disable:j.shouldDisableItem(k),idx:i,dataGrid:j,parent:j});return l;},preBuildRendering:function D(){var o=this.renderHook;if(o&&o.pre){o.pre.apply(this,[A]);}else{var k=this.columns,j=k.length,l=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],n;this._headerWidgets=[];var m;for(m=0;m<j;m++){n=A.apply(this,[k[m],m]);l.push(n);}l.push("</tr></table>");this.headerHtml=l.join("");}if(this._super){this._super();}},postBuildRendering:function Y(){if(this._super){this._super();}var k=this.renderHook;if(k&&k.post){k.post.apply(this,[J,e]);}else{e.apply(this);this.titleColGroup=J(this.columns);}var i=this.titleColGroup,p=i.cloneNode(true),m=this.headerContainerNode,o=m&&m.getElementsByTagName("table")[0],q=this.itemsContainerNode,n=this.scrollboxNode,l=this.domNode,j=q&&q.getElementsByTagName("table")[0];this.dataColGroup=p;if(o&&j){o.insertBefore(i,o.firstChild);j.insertBefore(p,j.firstChild);}if(this.lockHeader){n.style.height=l.offsetHeight-m.offsetHeight+"px";mstrmojo.dom.attachEvent(n,"scroll",function(s){m.style.left=-n.scrollLeft+"px";});}},refresh:function H(i){I(this);if(this._super){this._super(i);}},destroy:function h(i){I(this);this._super(i);},unrender:function W(n){var l=this._headerWidgets_,k=l&&l.length,j;if(k>0){var m;for(m=0;m<k;m++){j=l[m];if(j&&j.hasRendered){j.unrender(true);}}}this._super(n);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",dataTextCSSClass:"mstrmojo-DataRow-text",columns:null,disable:false,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var p=document.createElement("tr"),u=this.data,z=this.idx,k=this.dataGrid,q=this.cssClass,AB=this.columns,j=this.children,m=this.disable,l,x=-1,AA,y;p.setAttribute("id",this.id);if(k.banding){q+=(z%2==1)?" odd":" even";}p.className=q+(mstrmojo.string.isEmpty(u[k.itemDisplayField||"n"])?" empty-row":"")+(" "+u[k.itemCSSField||"itemCss"]||"")+(m?" disabled":"");var o,t;for(o=0,t=AB.length;o<t;o++){AA=AB[o];y=(AA.dataWidgetBuilder&&AA.dataWidgetBuilder(u))||AA.dataWidget;l=document.createElement("td");if(AA.applyStyle2Cell&&AA.colCss){l.setAttribute("class",AA.colCss);}p.appendChild(l);if(y){l.setAttribute("w","1");x++;j.push(mstrmojo.hash.copy(y,{slot:"slot"+x,data:u,idx:z,dataGrid:k}));}else{if(AA.dataFunction){l.innerHTML=AA.dataFunction(u,z,k);}else{var n=mstrmojo.string.htmlAngles(u[AA.dataField||"n"])||"&nbsp",s=AA.tooltip?' title="'+n+'"':"";l.innerHTML='<div class="'+this.dataTextCSSClass+'" '+s+">"+n+"</div>";}}}this.initChildren();p.mstrmojoId=this.id;return p;},buildRendering:function N(){this._super();var n=this.domNode.childNodes,j=n.length,m={},l=0,o,k;for(k=0;k<j;k++){o=n[k];if(o.getAttribute("w")=="1"){m["slot"+l]=o;l++;}}this.addSlots(m);}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector","mstrmojo.url");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="'+mstrmojo.url.getPlaceholderImageURL()+'" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange,},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller","mstrmojo.util.PlatformHelper","mstrmojo.util.LibraryHelper");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;var J=this.browseConfig.isImportFromCube;if(G&&H){var I={};F.forEach(H.split(","),function(K){I[parseInt(K,10)]=true;});G=F.filter(G,function(K){return(K.t!==A.DssTypeDocumentDefinition)||I[K.dvm];});if(mstrmojo.util.PlatformHelper.isLibrary()){G=mstrmojo.util.LibraryHelper.removeAIBotObjectsFromList(this.browseConfig,G);}}if(G&&J){G=mstrmojo.util.LibraryHelper.removeMosaicModelFromList(this.browseConfig,G);}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=!this.searchEnabled;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:function(){return !!this.parent.scrollable;}}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:function(){return !!this.parent.rightScrollable;}}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.ME.WorkstationPluginProxy");mstrmojo.ME.WorkstationPluginTransport={serverRequest:function A(F,E,C){if(!workstation){return ;}function D(H,G){mstrApp.hideWait&&mstrApp.hideWait(true);mstrmojo.all[F].response(E,!!H,G);}mstrApp.workstationDataFetchTaskProc&&mstrApp.workstationDataFetchTaskProc(C.params).then(function(G){window.setTimeout(function(){D(true,G);},0);},function(G){window.setTimeout(function(){var H={code:G.iServerErrorCode,message:G.errorMessage||G.message};D(false,H);},0);});},cancelRequest:function B(C){return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.mstr.EnumFunction","mstrmojo.ME.WorkstationPluginProxy","mstrmojo.ME.WorkstationPluginTransport");var s=mstrmojo.array,l=mstrmojo.mstr.EnumFunction,AD=2097152;var Q={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},S={"8107C326DD9911D3B98100C04F2233EA":"Rank"},AE={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},AF={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},x={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},b={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"},H={"8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31CDD9911D3B98100C04F2233EA":"Count",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C32DDD9911D3B98100C04F2233EA":"Median","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode","8107C32CDD9911D3B98100C04F2233EA":"Product","8107C32FDD9911D3B98100C04F2233EA":"Stdev","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31BDD9911D3B98100C04F2233EA":"Sum","8107C330DD9911D3B98100C04F2233EA":"Var",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",A202C23DDD9D11D3B98100C04F2233EA:"Fvschedule",A202C23CDD9D11D3B98100C04F2233EA:"IRR",A202C240DD9D11D3B98100C04F2233EA:"MIRR",A202C23EDD9D11D3B98100C04F2233EA:"NPV","8107C34ADD9911D3B98100C04F2233EA":"Percentile","9C374203DD9F11D3B98100C04F2233EA":"AvgDev","9C374228DD9F11D3B98100C04F2233EA":"ChiSquareTest","9C374225DD9F11D3B98100C04F2233EA":"Correlation","9C374224DD9F11D3B98100C04F2233EA":"Covariance","9C374237DD9F11D3B98100C04F2233EA":"ForecastV","9C37422FDD9F11D3B98100C04F2233EA":"FTest","9C374234DD9F11D3B98100C04F2233EA":"GrowthV","9C37422EDD9F11D3B98100C04F2233EA":"HeteroscedasticTTest","9C37422DDD9F11D3B98100C04F2233EA":"HomoscedasticTTest","9C37422ADD9F11D3B98100C04F2233EA":"Intercept","9C374204DD9F11D3B98100C04F2233EA":"Kurtosis","9C374222DD9F11D3B98100C04F2233EA":"MeanTTest","9C37422CDD9F11D3B98100C04F2233EA":"PairedTTest","9C374226DD9F11D3B98100C04F2233EA":"Pearson","9C374227DD9F11D3B98100C04F2233EA":"RSquare","9C374205DD9F11D3B98100C04F2233EA":"Skew","9C374229DD9F11D3B98100C04F2233EA":"Slope","9C37422BDD9F11D3B98100C04F2233EA":"SteYX","9C374231DD9F11D3B98100C04F2233EA":"TrendV","9C374223DD9F11D3B98100C04F2233EA":"VarTest","4A99DC7BC5254A319F6B8098E7D652C1":"ConcatAgg"},e={AND283:"And",OR284:"Or",NOT285:"Not",IF305:"If"},u={BEGINSWITH279:"Begins with",ENDSWITH279:"Ends with",IN289:"In",BETWEEN290:"Between",CONTAINS291:"Contains",LIKE291:"Like"};const d=["Add","Average","Avg","Count","First","GeoMean","Greatest","Last","Least","Max","Median","Min","Multiply","Product","Stdev","StdevP","Sum","Var","VarP","Case","CaseV","IsNotNull","IsNull","NullToEmpty","NullToZero","ZeroToNull","NTile","Percentile","PercentRank","Rank","Concat","Length","Lower","Trim","Upper","Or","Abs"];function R(AK){var AI=function(AM,AL){return mstrmojo.array.stringSorter(AM.n,AL.n);},AJ,AH;AK=AK.sort(AI);for(AJ=0,AH=AK.length;AJ<AH;AJ++){AK[AJ].fns=AK[AJ].fns.sort(AI);}return AK;}function c(AK,AL){var AH=AK.length,AJ;for(AJ=0;AJ<AH;AJ++){var AI=AK[AJ].fns;if(mstrmojo.array.find(AI,"did",AL)>-1){return AJ;}}return -1;}function N(AI){var AH=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();AI=mstrmojo.hash.copy(AI,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(AH){AI.quickSearch=AH;AI.nameWildcards=16;AI.sortKey=-1;}return AI;}function I(AI,AH){if(mstrApp.serverRequest){mstrApp.serverRequest(AH,AI);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(AI,AH,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function F(){if(!this.serverProxy){if(mstrApp.isWorkstationPlugin){this.serverProxy=new mstrmojo.ME.WorkstationPluginProxy({transport:mstrmojo.ME.WorkstationPluginTransport});}else{this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}}return this.serverProxy;},getMetricDefintion:function W(AJ,AH){var AI={taskId:"getMetricDefinition",metricId:AJ.id,outputFlags:65599};if(AJ.msgID){AI.msgID=AJ.msgID;}I.call(this,AH,AI);},validateMetric:function j(AJ,AH){var AI={taskId:"validateMetric",metricId:AJ.metricId,tokenStreamXML:AJ.tokenStreamXML,metricXML:AJ.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(AJ.metricId)){AI.isNew=true;}if(AJ.msgID){AI.msgID=AJ.msgID;}if(AJ.formID){AI.frmid=AJ.formID;}if(AJ.isIDForm){AI.isIDForm=AJ.isIDForm;}if(AJ.objectType){AI.objectType=AJ.objectType;}if(AJ.dsId){AI.dsId=AJ.dsId;AI.outputFlags|=AD;}I.call(this,AH,AI);},getADCSupportFunctions:function X(AI){var AJ=mstrmojo.hash.clone(AI);var AH=d.reduce(function(AK,AL){AK[AL]=true;return AK;},{});return AJ.reduce(function(AK,AL){AL.fns=AL.fns.filter(function(AM){return AH[AM.n];});if(AL.fns.length){AK.push(AL);}return AK;},[]);},getADCSupportFunctionsForDA:function M(AJ){var AL=this.getStringCategoryIndex(AJ),AI=this.getDateTimeCategoryIndex(AJ),AH=this.getInternalCategoryIndex(AJ),AK=mstrmojo.hash.clone(AJ);return AK.reduce(function(AP,AO,AM){if(AM===AL||AM===AI){AP.push(AO);}else{if(AM===AH){var AN=mstrmojo.hash.clone(AO);AN.fns=AN.fns.filter(function(AQ){return AQ.n.toLowerCase()==="case";});if(AN.fns.length>0){AP.push(AN);}}}return AP;},[]);},getMetricComponents:function B(AL,AI){var AH=this,AJ=this.metricComponents;if(!this.noCache&&AJ&&AJ.items.length==AJ.sz){AI.success(AJ);return ;}AI.success=mstrmojo.func.composite([AI.success,function(AM){if(AH.metricComponents&&AH.metricComponents.items){AH.metricComponents.items.push(AM.items);}else{AH.metricComponents=AM;}}]);var AK=N({blockBegin:AL.blockBegin,blockCount:AL.blockCount,searchPattern:AL.pattern,rootFolderType:AL.rootFolderType||24,objectType:AL.objectType||"12,13,43"});I.call(this,AI,AK);},getAttributes:function U(AJ,AH){var AI=N({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||26,objectType:12});I.call(this,AH,AI);},getFacts:function L(AJ,AH){var AI=N({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||29,objectType:13});I.call(this,AH,AI);},getMetrics:function G(AJ,AH){var AI=N({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||5,objectType:4});if(AJ.isVerify){AI.nameWildcards=2;}I.call(this,AH,AI);},getFunctions:function Y(AM){var AO=this,AP=window.sessionStorage,AL=this.functions||(AP&&AP.getItem("functions")),AN=AP&&AP.getItem("mstrLocaleId"),AJ=mstrApp&&mstrApp.localeId;if(AL&&AN==AJ){AL=R(JSON.parse(AL).fncs);AM.success(AL);}else{var AI={failure:AM.failure,textResponse:true},AK={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};var AH=function(AQ){s.forEach(AQ,function(AS){var AR=AS&&AS.fns;s.forEach(AR,function(AU){var AT=AU.pros;var AV=s.filterOne(AT,function(AW){return AW.n==="UseLookupForAttributes";});if(AV){AV.dfv="0";}});});};AI.success=function(AQ){if(typeof AQ==="string"||(!mstrApp.isSingleTier&&(!mstrApp.isWorkstationPlugin||typeof mstrApp.isSingleTier!=="undefined")&&AQ.replace)){AQ=AQ.replace(/\\'/g,"'");var AS=JSON.parse(AQ),AR=AS.fncs;AH(AR);AQ=JSON.stringify(AS);if(AP){AP.setItem("functions",AQ);AP.setItem("mstrLocaleId",AJ);}AO.functions=AQ;AL=R(JSON.parse(AQ).fncs);}else{AH(AQ.fncs);AL=R(AQ.fncs);AO.functions=JSON.stringify(AQ);}AM.success(AL);};I.call(this,AI,AK);}},getAggFunctions:function C(){if(this._aggFunctions){return this._aggFunctions;}var AH=this.parseFuncStr();AH=mstrmojo.array.filter(AH[this.getBasicCategoryIndex(AH)].fns,function(AJ){var AI=AJ.did,AK;if(AI!=="B2C0FA4020C711D6AD1400C04F0423DE"&&AI!=="B2C0FA4120C711D6AD1400C04F0423DE"){AK=Q[AI];}return AK;});return AH;},getOLAPAggFunctions:function E(AH){var AI=this.parseFuncStr();AI=mstrmojo.array.filter(AI[this.getOLAPCategoryIndex(AI)].fns,function(AJ){switch(AH){case"moving":return AF[AJ.did];case"running":return x[AJ.did];case"olap":default:return AE[AJ.did];}return false;});return AI;},getFunctionCatList:function AA(){if(this._functionCatList){return this._functionCatList;}var AH=this.parseFuncStr();AH=mstrmojo.hash.make(AH,mstrmojo.Arr);this._functionCatList=AH;return AH;},getCategoryIndex:function y(AI,AH){return c(AH||this.getFunctionCatList(),AI);},getBasicCategoryIndex:function J(AI){var AH="B2C0FA4020C711D6AD1400C04F0423DE";return c(AI||this.getFunctionCatList(),AH);},getDataMiningCatIndex:function p(AH){var AI="F17CD4F3FF134D91B80DDAB9CA73C919";return c(AH||this.getFunctionCatList(),AI);},getDateTimeCategoryIndex:function AC(AI){var AH="C50F2A4F75AE49D6B20E00224967B500";return c(AI||this.getFunctionCatList(),AH);},getStringCategoryIndex:function m(AI){var AH="6F7DF5FF449111D5BEA300B0D01A55EF";return c(AI||this.getFunctionCatList(),AH);},getOLAPCategoryIndex:function J(AI){var AH="D221F90EB35540E3A1204ED6CC9A8267";return c(AI||this.getFunctionCatList(),AH);},getInternalCategoryIndex:function Z(AI){var AH="8107C337DD9911D3B98100C04F2233EA";return c(AI||this.getFunctionCatList(),AH);},getFunctionDetails:function z(AJ,AH){var AI={taskId:"getSystemFunctions",functionId:AJ.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};I.call(this,AH,AI);},getTransformations:function P(AJ,AH){var AI=N({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||38,objectType:43});I.call(this,AH,AI);},getFilters:function q(AJ,AH){var AI=N({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||4,objectType:1});I.call(this,AH,AI);},getAttributeForms:function k(AJ,AH){var AI={taskId:"getAttributeForms",attributeID:AJ.attributeID,displayedForms:AJ.displayedForms,styleName:"WidgetElementListStyle"};I.call(this,AH,AI);},getSubtotalFunctions:function a(AJ,AH){var AI=N({objectType:"1025,1026",searchPattern:""});I.call(this,AH,AI);},isBasicAggMap:function t(AH){var AI=!!Q[AH];if(AH==="B2C0FA4020C711D6AD1400C04F0423DE"||AH==="B2C0FA4120C711D6AD1400C04F0423DE"){AI=false;}return AI;},isOLAPAgg:function AG(AH){return !!AE[AH];},isMovingAgg:function f(AH){return !!AF[AH];},isRunningAgg:function i(AH){return !!x[AH];},isBanding:function o(AH){return !!b[AH];},isOLAP:function K(AI){var AJ=this.getFunctionCatList(),AH=AJ[this.getOLAPCategoryIndex(AJ)].fns;return mstrmojo.array.find(AH,"did",AI)>-1;},isRank:function D(AH){return !!S[AH];},isScalar:function h(AH){return(AH||{}).sqt===3;},hasLookupForAttributesProps:function(AH){return !!H[AH];},getFunctionHelpTopic:function w(AH){var AI="<div class='func-details'>"+mstrmojo.desc(5811,"Details...")+"</div>";if(mstrApp.isWorkstationPlugin){AI="<div class='func-details'><a href="+mstrmojo.ME.MetricDataService.getFunctionHelpTopicUrl(AH)+" target='_blank'>"+mstrmojo.desc(5811,"Details...")+"</a></div>";}return AI;},attachHelpListenerFunction:function n(AK,AH,AI){if(!AK||mstrmojo.string.isEmpty(AI)){return ;}var AJ=function(){mstrmojo.ME.MetricDataService.showFunctionHelpTopic(AI);};mstrmojo.dom.attachEvent(AK,AH,AJ);},showFunctionHelpTopic:function AB(AI){var AJ=mstrApp.isSingleTier,AH=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(AJ){AH=AH+"index.htm#cshid="+(AI||"");window.FormWrapper.openPage(AH);}else{if(AI){AH=AH+"Content/"+AI+".htm";}else{AH+="index.htm";}window.open(AH);}return false;},getFunctionHelpTopicUrl:function O(AI){var AH=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(AI){AH=AH+"Content/"+AI+".htm";}else{AH+="index.htm";}return AH;},sortFunctions:function A(AI){var AJ={},AH=function(AL,AK){return mstrmojo.array.stringSorter(AL.n,AK.n);};mstrmojo.array.forEach(AI,function(AK){mstrmojo.array.forEach(AK&&AK.fns,function(AL){if(AL&&AL.did){AJ[AL.did]=AL;}});});return mstrmojo.hash.valarray(AJ).sort(AH);},parseFuncStr:function g(){var AH=window.sessionStorage,AI=this.functions||AH&&AH.getItem("functions");if(AI){return R(JSON.parse(AI).fncs);}},isValEqual:function(AK,AJ){if(AK===AJ){return true;}var AH=[-1,"-1","True",true],AI=[0,"0","False",false];if(AH.indexOf(AK)>-1&&AH.indexOf(AJ)>-1){return true;}if(AI.indexOf(AK)>-1&&AI.indexOf(AJ)>-1){return true;}return false;},isFuncHasUseLookupForAttributeProp:function(AI){var AH=[l.FunctionSum,l.FunctionCount,l.FunctionAvg,l.FunctionMin,l.FunctionMax,l.FunctionProduct,l.FunctionMedian,l.FunctionMode,l.FunctionStdev,l.FunctionVar,l.FunctionGeomean,l.FunctionPercentile,l.FunctionStdevP,l.FunctionVarP,l.FunctionFirst,l.FunctionLast,l.ConcatAgg];return AH.indexOf(AI)>-1;},isLogicOrCompFunc:function(AI){var AH=AI.v.toUpperCase()+AI.tp;return !!e[AH]||!!u[AH];}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.fx","mstrmojo.TreeNode","mstrmojo.url");var J=mstrmojo.dom,C=mstrmojo.url;NODE_STATE_CSS_MAP={0:"closed",1:"opened",2:"leaf"},_animContainerNode=function(Q,P){var M=Q.style,L,O,K,R,N;M.display="block";M.height="auto";L=Q.offsetHeight;O=P?L:0;K=P?0:L;R=P?"block":"none";M.overflow="hidden";N=new mstrmojo.fx.AnimateProp({target:Q,props:{height:{start:K,stop:O,suffix:"px",fn:Math.round,ease:mstrmojo.ease.linear}},onEnd:function(){M.height="auto";M.display=R;},interval:30,duration:300});N.play();};mstrmojo.TreeBrowserNode=mstrmojo.declare(mstrmojo.TreeNode,null,{scriptClass:"mstrmojo.TreeBrowserNode",markupString:'<div id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,click,dblclick><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="'+C.getPlaceholderImageURL()+'" /><img class="mstrmojo-TreeNode-checkBox" src="'+C.getPlaceholderImageURL()+'" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><div class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</div></div>',markupSlots:mstrmojo.hash.copy({displayNode:function(){return this.domNode.firstChild;},checkBoxNode:function(){return this.domNode.firstChild.childNodes[1];}},mstrmojo.TreeNode.prototype.markupSlots),markupMethods:mstrmojo.hash.copy({onstateChange:function(K){this.stateNode.className="mstrmojo-TreeNode-state "+(NODE_STATE_CSS_MAP[this.state]||"closed");if(this.tree.anim&&this.contentRetrieved&&!K){_animContainerNode(this.itemsContainerNode,this.state===1);}else{this.itemsContainerNode.style.display=(this.state===1)?"block":"none";}},},mstrmojo.TreeNode.prototype.markupMethods),blockBegin:1,allowUnlistedValues:false,contentRetrieved:false,_set_items:function(M,L){var K=this._super(M,L);if(K&&this.tree.anim){_animContainerNode(this.itemsContainerNode,true);}return K;},onstateChange:function I(){var K=this.tree;if(!this.contentRetrieved&&(this.state==1)){this.set("items",[K.loadingItemCreaterFunc()]);K.getContent(this,this.blockBegin);}else{if((this.state==1)&&K.onNodeExpand){K.onNodeExpand(this);}if((this.state==0)&&K.onNodeCollapse){K.onNodeCollapse(this);}}},toggleState:function G(){if(this.state!==2){this.set("state",this.state===1?0:1);}},preclick:function H(K){J.clearBrowserHighlights(K.hWin);return false;},predblclick:function E(K){J.clearBrowserHighlights(K.hWin);return false;},premousedown:function B(L){var Q=mstrmojo.dom,N=mstrmojo.dom.eventTarget(L.hWin,L.e),K=this.tree,M=(this.state==2),P=Q.contains(this.itemsContainerNode,Q.eventTarget(L.hWin,L.e),true,this.domNode),O=(K.branchClickPolicy==mstrmojo.TreeBrowserEnum.BRANCH_POLICY_TOGGLE);if((this.isSpecialNode()||!(N==this.checkBoxNode||((N==this.textNode||N==this.displayNode)&&(M||!O))))&&!this.draggable){Q.stopPropogation(L.hWin,L.e);}if((N==this.stateNode)||((N==this.textNode||N==this.displayNode)&&!M&&O)){if(!M){this.toggleState();}}else{if(N==this.checkBoxNode||P){if(this._super){this._super(L);}}else{this.handleNodeClicked();}}},isSpecialNode:function D(){var K=this.data&&this.data.st;return(K<0);},handleNodeClicked:function F(){var K=this.tree,L=this.parent,M=this.data;switch(M&&M.st){case"-4":mstrmojo.css.addClass(this.textNode,["loading"]);K.getContent(L,L.blockBegin-K.blockCount);break;case"-3":mstrmojo.css.addClass(this.textNode,["loading"]);K.getContent(L,L.blockBegin+K.blockCount);break;case"-1":case"-2":break;default:if(K.handleNodeClicked){K.handleNodeClicked(M);}}},init:function(K){this._super(K);this.set("state",this.tree.isBranch(this.data)?0:2);},postBuildRendering:function A(){if(this._super){this._super();}var K=function(L){J.preventDefault(window,L||window.event);return false;};J.attachEvent(this.domNode,"mousedown",K);if(this.isSpecialNode()||this.tree.noCheckBox){this.checkBoxNode.style.display="none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresClsP("mstrmojo","Editor","HBox","Box","Button","dom","css","desc","hash","array");mstrmojo.requiresCls("mstrmojo.vi.controllers.CustomSortModeActionMgr");var R=mstrmojo.Button.newWebButton,G=mstrmojo.dom,a=mstrmojo.css,J=mstrmojo.desc,M=mstrmojo.array,P=mstrmojo.hash,L=36,A=600;mstrmojo.requiresDescs(1442,221,5705,134);function I(){var f=this.vizBox=this.model.createVizBoxForCustomSort(this.nodeKey,{width:this.width,height:(parseInt(this.height)-L-this.spacer)+"px",left:"0px",top:this.spacer+"px"});this.visContainer.addChildren(f);var d=f.boxContent.controller,e=d.model.oid,g=e+"."+(this.oldNodeKey||this.srcViz.k),i=(d.getScrollPosition(g))||{x:0,y:0},h=e+"."+this.nodeKey;d.addScrollPosition(h,i.x,i.y);return f;}function O(){var e=this.titleContainerNode,d=e.style,f=G.position(e);if(f.w<A){d.width=A+"px";d.position="relative";d.left=(f.w-A)/2+"px";d.border="solid 1px rgba(68,70,73,0.2)";}}function W(){var f=G.position(mstrApp.rootCtrl.view.domNode),e=G.position(this.titleContainerNode),d=G.position(this.editorNode),g;if(f.w>=e.w){if(e.x<f.x){g=d.x-e.x;this.set("left",(f.x+g)+"px");}else{if(e.x+e.w>f.x+f.w){g=e.x+e.w-(d.x+d.w)+8;this.set("left",(f.x+f.w-d.w-g)+"px");}}}}function Q(){var d=this.editorNode.style;d.width=this.width;d.height=this.height;}function N(){this.vizBox.toggleBoxSelection(true);}function c(i){var f=this.actionMgr.getSlientActionsBefore();if(f.length>0){var g=M.map(f,function(j){return j&&j.submitAction;}),h=this.wrapCustomSortAction(g,false),e=this.srcViz,d={hideCancel:true};e.model.customSort(h,e.controller._getXtabCallback(e,P.copy(i)),d);}}function b(){var e=this.actionMgr.getContSlientActionsBefore(),d=this,f={success:function(g,i){if(e.length>0){var k=M.map(e,function(n){return n&&n.submitAction;}),m=d.wrapCustomSortAction(k,true),j=d.vizBox.boxContent,h={hideCancel:true,noUpdate:true,preserveStid:true,noDeltaXML:true},l=j.model.getDataService();l.submitUpdates(l.getUpdateTemplateAction(j.k,m),j.controller._getXtabCallback(j),h);}}};c.call(this,f);}mstrmojo.vi.ui.rw.CustomSortDisplayPanel=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.rw.CustomSortDisplayPanel",cssClass:"mstrmojo-CustomSortDisplayPanel",actionMgr:null,init:function S(d){this.actionMgr=new mstrmojo.vi.controllers.CustomSortModeActionMgr({csDisplayPanel:this});this._super(d);},postBuildRendering:function U(){this.getVizBox();var f=this._super();if(!this._listenerProc){var e=this,g=null,d=this._listenerProc=function(h){window.clearTimeout(g);g=window.setTimeout(function(){W.call(e);},150);};G.attachEvent(window,"resize",d);}return f;},destroy:function Z(d){if(this._listenerProc){G.detachEvent(window,"resize",this._listenerProc);}this._super(d);},children:[{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"leftBox",cssClass:"left title",children:[{scriptClass:"mstrmojo.Label",text:J(5705,"Custom Sort")}]},{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"urBox",cssClass:"left icons",children:[{scriptClass:"mstrmojo.Widget",markupString:'<div id="{@id}" class="icn {@cssClass}" mstrAttach:click></div>',alias:"undo",cssClass:"undo disabled",enabled:false,onclick:function(){if(this.enabled){var d=this.parent.parent;d.actionMgr.undo();}},bindings:{enabled:function(){return !!this.parent.parent.canUndo;}},onenabledChange:function(){a.toggleClass(this.domNode,"disabled",!this.enabled);}},{scriptClass:"mstrmojo.Widget",alias:"redo",cssClass:"redo disabled",enabled:false,markupString:'<div id="{@id}" class="icn {@cssClass}" mstrAttach:click></div>',onclick:function(){if(this.enabled){var d=this.parent.parent;d.actionMgr.redo();}},bindings:{enabled:function(){return !!this.parent.parent.canRedo;}},onenabledChange:function(){a.toggleClass(this.domNode,"disabled",!this.enabled);}}]},{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"btnBox",cssClass:"btnBox",children:[R(J(1442,"OK"),function(){if(this.enabled){var d=this.parent.parent;d.removeCSViz(function(){c.call(d);d.close();},false);}},true,{alias:"savebtn",enabled:false,bindings:{enabled:function(){return this.parent.parent.canApply;}}}),R(J(134,"Apply"),function(){if(this.enabled){var d=this.parent.parent,e=d.actionMgr;b.call(d);e.appendHistUnsilentActions(e.getUnslientActionsBefore());e.reset();}},true,{enabled:false,bindings:{enabled:function(){return this.parent.parent.canApply;}}}),R(J(221,"Cancel"),function(){var d=this.parent.parent;d.removeCSViz(null,true);d.close();})]},{scriptClass:"mstrmojo.Box",alias:"visContainer",slot:"containerNode"}],oldNodeKey:null,nodeKey:null,vizBox:null,model:null,srcPanelKey:null,srcLayoutKey:null,srcViz:null,srcUnit:null,srcAxis:-1,getVizBox:function D(){return this.vizBox=this.vizBox||I.call(this);},setVizBoxPortalStateRestore:function K(){this.getVizBox().defn.ds=0;},onOpen:function H(){Q.call(this);O.call(this);N.call(this);W.call(this);var e=this.vizBox.boxContent,d=e.selCells||[];M.forEach(d,function(f){e.handleSelection({},null,f);e.clearHighlights();});},onClose:function E(){var e=this.vizBox,d=this.model;if(e.boxContent.cellHoverMgr.removeCue){e.boxContent.cellHoverMgr.removeCue();}mstrmojo.dnd.enable();delete this.actionMgr;delete this.silentMask;this.destroy();},removeCSViz:function F(i,h){var e=this.model,f,d;if(h){f={config:{silent:true}};}else{f={hideCancel:true};}f.style={params:{treesToRender:0}};f=P.copy({noUpdate:true,preserveStid:true,noDeltaXML:true},f);if(i){d={success:function(){i();}};}var g=e.getRemoveUnitAction(this.vizBox);g.clearTargets=true;e.getDataService().submitUpdates(g,d,f);},recreateCSVizForUndo:function Y(o,n,q){var s=this.model,t=this.srcViz.model,p=t.getDataService(),e=s.getNextKey(),f,m=this;var d=s.getRemoveUnitAction(this.vizBox);d.clearTargets=true;f=[d];var g=0,h=o.length,l;if(g<h){l=o[g];g++;}f=f.concat(t.getCreateCSVizActions(this.srcUnit,this.srcAxis,e,l));var k=function(AA){var x=m.srcLayoutKey,u=m.srcPanelKey,y=AA.data,w=M.filterOne(y.layouts,function(AD){return AD.k===x;});s.controller.view.updateXtabStyles(x,w.xtabStyles);s.updateDefnCache(AA.defn,[e,u]);s.updateDataCache(y,s.getTargetDefn(e));m.oldNodeKey=m.nodeKey;m.nodeKey=e;m.vizBox.destroy();delete m.vizBox;m.setVizBoxPortalStateRestore();var AB=m.getVizBox();AB.render();var z=0,AC=(n||[]).length,i=function(){if(z<AC){n[z++].perform(false,i,true);}else{mstrApp.hideWait(true);var AE=m.actionMgr;if(AE.hasFailedSorts()){var AD=AE.getActionsCount()-AE.getFailedSortsCount();AE.actions.splice(AD);AE.pos=AD-1;m.updateStatus();AE.showFailedSortsAndReset();if(q&&q.fail){q.fail();}}else{if(q&&q.success){q.success();}}}};i();},j=function(){p.submitUpdates(f,{success:function(i,u){if(g<h){f=p.getUpdateTemplateAction(e,o[g]);g++;j();}else{k(i);}}},{style:{params:{treesToRender:3}},noUpdate:true,preserveStid:true,noDeltaXML:true,hideCancel:true});};j();},wrapCustomSortAction:function B(h,f){var g=this.srcUnit,e=f?1:this.srcAxis,d=1,i=this.srcViz.model.data.gts[((this.srcAxis===d)?"row":"col")+"SubPos"];return{act:"customSortAddActions",unitType:g.otp,unitId:g.id,axis:e,subTotalsPos:[i],actions:h};},maskSilently:function X(d){var g=this.silentMask;if(!g){var f=this.curtainNode,e=document.createElement("div");e.innerHTML=f.outerHTML;e.firstChild.style.zIndex=this.zIndex+1;e.firstChild.style.opacity="0";e.firstChild.style.display="none";g=this.silentMask=this.domNode.appendChild(e.firstChild);}g.style.display=d?"block":"none";},updateStatus:function C(){var d=this.actionMgr;this.set("canUndo",d.pos>=0);this.set("canRedo",(d.actions.length-1)>d.pos);this.set("canApply",d.getSlientActionsBefore().length>0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(d,a){var c=this.list,Y=c.selectedIndex,X=c.items.length,Z=d?X-1:0;if(Y===Z){c.clearSelect();return ;}if(Y===null||Y<0){Y=d?0:X-1;}else{Y+=d?1:-1;}if(a){var b=c.items[Y];while(b&&b.type==="dummy"){if(Y===Z){c.clearSelect();return ;}Y+=d?1:-1;b=c.items[Y];}}c.singleSelect(Y);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,nameWildcardsHLList:[2,32],getCandidatesThroughTaskCall:mstrmojo.emptyFn,getShouldKeepSuggestionOnSelect:function L(){return false;},onSuggestionItemSelect:function J(X){if(typeof this.getShouldKeepSuggestionOnSelect!=="function"||!this.getShouldKeepSuggestionOnSelect()){this.hideSuggestion();}},getSearchPattern:function W(){return"";},getSuggestionPos:function O(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(Y){var X=this.getSuggestion(Y);if(!this.noCache&&X!==-1){this.updateSuggestion(X);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function N(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(X){if(this.suggestionShown){this._lastOpened.nextHighlight(X);}},preHighlight:function H(X){if(this.suggestionShown){this._lastOpened.preHighlight(X);}},getSuggestion:function U(l){var g=this.candidates,e=g&&g.items,a=g&&g.isComplete,k=this._last_hit;if(!this.noCache&&(g||k)){var j=this.filterCandidates(e,l,this.REQUEST_THRESHOLD),f=j.length,h=this.suggestCount,X=false;if(!a&&f<h){var Y=k&&k.pattern;if(k&&Y&&(l.indexOf(Y)>-1)){X=true;var n=this.filterCandidates(k.items,l,this.REQUEST_THRESHOLD),b=n&&n.length,Z=mstrmojo.array,m=this.itemField,d;for(d=0;d<b;d++){if(Z.find(j,m,n[d][m])===-1){j.push(n[d]);}}f=j.length;}}if(!a&&((l.length>2&&f<this.REQUEST_THRESHOLD)||(f<h))){this.requestCandidates(l);return -1;}return(f<h)?j:j.slice(0,h);}this.requestCandidates(l);return -1;},requestCandidates:function A(X){this._request_pattern=X;var a=this,Y=this.getSuggestionTarget(),Z={success:function(h){if(!h){return ;}var g=a.getSuggestionTarget();if(!g||(Y!==g)){return ;}var m=g.getSearchPattern(),e=h.items;a._last_hit={items:e,pattern:X};a.sz=h.sz;if(!a.noCache&&e){var j=(a.candidates&&a.candidates.items)||[],k=[].concat(e),f=e.length,d;for(d=0;d<f;d++){var b=k[d];if(mstrmojo.array.indexOf(j,b)>-1){mstrmojo.array.removeItem(e,b);}}if(a.candidates){a.candidates.items=j.concat(e);}}if((m||m==="")&&m.indexOf(X)>-1){var l=a.filterCandidates(e,m);a.updateSuggestion(l);}},failure:function(b){if(b.getResponseHeader){mstrmojo.alert(b.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:X,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},Z);},filterCandidates:function R(a,Z,X){X=X||this.suggestCount;Z=mstrmojo.string.regEscape(Z);var b=this.itemField,Y=mstrmojo.array.filter(a,function(c){return(new RegExp("\\s"+Z+"|^"+Z,"i")).test(c[b]);},{max:X});return Y;},getHighlightedText:function Q(Z,c){if(!this.highlightPattern||mstrmojo.string.isEmpty(Z)){return c;}try{if(!this.nameWildcards||mstr.$A.find(this.nameWildcardsHLList,parseInt(this.nameWildcards,10))>-1){c=c.replace(new RegExp("(^|\\s)("+Z+")","gi"),"$1<b>$2</b>");}else{var b=Z.split(" "),Y,X;for(Y=0,X=b.length;Y<X;Y++){if(b[Y]!==""){c=c.replace(new RegExp("("+b[Y]+")","gi"),"<b>$1</b>");}}}}catch(a){}return c;},updateSuggestion:function P(a){var Y=a&&a.length,X=this.browseItemVisible;if(Y||X){if(X){a=a||[];a.push({n:"Browse...",t:-99,cssClass:(Y?"br":"bro")});}this.set("suggestionItems",a);if(this.suggestionShown){var Z=this._lastOpened;if(Z&&Z.nudge){Z.nudge();}if(this.autoSelect&&Z){Z.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}var Z=this._lastOpened||this.suggestionPopup;if(mstrApp.isWorkstationPlugin&&Z&&this.updateSuggestionListHeightThenNudge){this.updateSuggestionListHeightThenNudge(Z);}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-Editor-ObjectSelector",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var X=this.opener;if(X&&X.onBrowserClose){X.onBrowserClose();}},onOpen:function(){var X=this.opener;if(X&&X.onBrowserOpen){X.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function M(){this.browserShown=false;},handleSuggestionItemSelect:function K(X,Y){if(this.browseItemVisible&&X.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var Z=this.zIndex;this.openPopup("ob",{zIndex:(Z&&(Z+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(Y,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(X);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(X){D.call(this,true,X);},preHighlight:function(X){D.call(this,false,X);},getSelected:function N(){var X=this.list;return X.items[X.selectedIndex];},onOpen:function I(){var X=this.opener;if(X){mstrmojo.css.addClass(this.domNode,X.suggestionPopupCssClss||"");if(X.autoSelect){this.list.singleSelect(0);}if(X.nudge){X.nudge(this);}}},onClose:function F(){this.list.clearSelect();var X=this.opener;if(X){X.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,X.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function S(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Editor");mstrmojo.vi.ui.editors.MandatoryFilterNotification=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.MandatoryFilterNotification",cssClass:"mstrmojo-ConfirmSave-Editor",title:mstrmojo.desc(11812,"Notification"),help:null,children:[{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Warning-Box",children:[{scriptClass:"mstrmojo.Box",cssClass:"icon"},{scriptClass:"mstrmojo.Box",alias:"warningBoxContent",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(27773,"Do you want to save the dashboard?"),cssClass:"messageTitle",alias:"warningBoxTitle",},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(27774,"You have not selected at least one required filter element. Are you sure you want to save the dashboard?"),cssClass:"message",alias:"warningBoxMessage"}]},],alias:"warningBox"},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",alias:"buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"",},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),onclick:function(){this.parent.parent.onSave();},alias:"saveButton"},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.onCancel();}}]}],onSave:mstrmojo.emptyFn,onCancel:mstrmojo.emptyFn,});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuEditor","mstrmojo._IsAccessibleMenu");mstrmojo.ui.menus.NumberFormatterMenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuEditor,[mstrmojo._IsAccessibleMenu],{scriptClass:"mstrmojo.ui.menus.NumberFormatterMenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" tabindex="-1" mstrAttach:mouseover,mouseout,click,keydown><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',onkeydown:function B(C){var G=C.e.keyCode;if(["INPUT","SELECT","TEXTAREA"].indexOf(C.e.target.tagName)!==-1){return ;}switch(G){case 37:case 27:var F=this,E=F.opener,D=E.openerMenuElement;if(D){F.close();D.focus();delete E.openerMenuElement;}C.e.stopPropagation();break;case 39:break;case 9:break;default:break;}},getButtonReference:function A(C,D){var E=this._super(C,D);E.tabIndex=0;return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array","mstrmojo.string","mstrmojo.css","mstrmojo.DynamicClassFactory","mstrmojo._IsAccessibleMenu");mstrmojo.ui.menus.MenuItemType=null;mstrmojo.ui.menus.WhitelistItemType=null;mstrmojo.ui.menus.MenuItemExtArgs=null;var D=mstrmojo.array,d=mstrmojo.string,S=mstrmojo.css,i="separator";var N={ariaSelected:function(k,j){var l=k.cls||"",m=new RegExp("\\b"+(j||"on")+"\\b");if(!k.attrs){k.attrs=[];}k.attrs.push('aria-selected="'+(!!l.match(m)?"true":"false")+'"');},ariaChecked:function(k,j){var l=k.cls||"",m=new RegExp("\\b"+(j||"on")+"\\b");if(!k.attrs){k.attrs=[];}k.attrs.push('aria-checked="'+(!!l.match(m)?"true":"false")+'"');},ariaLabel:function(k,j){if(!k.attrs){k.attrs=[];}if(j){k.attrs.push('aria-label="'+j+'"');}}};mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,whitelist:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasToggleItem:false,setWhitelist:function W(j){if(j&&j.slice){j=j.slice();}this.whitelist=j;},addWhitelistItem:function C(j){if(!j){return ;}this.whitelist=this.whitelist||[];this.whitelist.push(j);},hasMenuItems:function e(){var j=D.filter(this.menus||[],function(k){return k.cls!==i;});return !!j.length;},getMenuItems:function H(j){var l=D.filter(this.menus.slice().reverse(),function(p,o,n){var m=n[o+1];return j||p.cls!==i||(o&&m&&m.cls!==i);}).reverse();var k=(l&&l.length)||0;if(!j&&k>0&&l[k-1].cls===i){l.pop();}return l;},getMenuItem:function F(m){var l=this.menus,j;if(l!==null){for(j=0;j<l.length;j++){var k=l[j];if(k.cls===m){return k;}}}return null;},absorbMenuItems:function g(l){const j=this;var k=l.menus;if(this.whitelist){k=D.filter(l.menus||[],function(m){return j.isInWhitelist(m.n,m.cls);});}this.menus=this.menus.concat(k);if(!this.hasToggleItem&&l.hasToggleItem){this.hasToggleItem=true;}},isSeparator:function A(j){const l=new RegExp("(^|\\s)"+d.regEscape(i)+"($|\\s)");const k=(j||"").trim();return l.test(k);},isInWhitelist:function X(k,j){if(!this.whitelist||this.isSeparator(j)){return true;}if(!j&&!k){return false;}return D.some(this.whitelist,function(n){if(n.n&&n.n===k){return true;}var o=false;const l=(n.cls||"").trim();const p=(j||"").trim();if(l&&p){const m=new RegExp("(^|\\s)"+d.regEscape(l)+"($|\\s)");o=m.test(p);}return o;});},addMenuItem:function M(s,t,p,o,n,k,m,q){var u,l,j;if(!s||typeof s==="string"){u=s;}else{u=s.n;l=s.ttp;if(!!l){this.useTooltip=true;}}j={n:u,ttp:l,cls:t,fn:p,ctxt:o,msg:m,featureTagId:q};if(!this.isInWhitelist(u,t)){return j;}if(mstrApp.isNativeEmbedded&&mstrApp.disabledContextMenuItems&&mstrApp.disabledContextMenuItems.includes(u)){return j;}if(isNaN(n)||n>=this.menus.length){this.menus.push(j);}else{this.menus.splice(n,k?1:0,j);}if(t.indexOf(/\bon\b/)>-1){this.hasToggleItem=true;}return j;},addMenuItemExt:function Q(j){var l=this,k=this.addMenuItem(j.text,j.cls,j.fn,j.ctxt,j.index,j.replace,j.msgType);D.forEach(j.helpers,function(n){var m=N[n.id];if(m){m.apply(l,[k].concat(n.args||[]));}});return k;},addCustomMenuItem:function h(o,l,n,k,j){var m=this.addMenuItem(o,l,n,j);m.getItemMarkup=k;return m;},addDisabledMenuItem:function Z(l,j,k){this.addNonInteractiveMenuItem(l,j,true,k);},addNonInteractiveMenuItem:function U(o,k,j,l){var m=["non-int"];if(k){m.push(k);}if(j){m.push("disabled");}if(o&&typeof o!=="string"&&o.ttp){this.useTooltip=true;}var n=this.addMenuItem(o,m.join(" "),mstrmojo.emptyFn,undefined,l);n.dsbld=true;},addSeparator:function G(j,k){var l=[i];if(j){l.push(j);}this.addMenuItem("",l.join(" "),function(){return false;},undefined,k);},addPopupMenuItem:function f(p,s,o,q,n,m,j){var l=["pop "];if(q){l.push(q);}var k=this.addMenuItem(p,l.join(" "),o,n,m,j);k.pop=true;k.scope=s;return k;},addActionPopupMenuItem:function R(q,k,o,p,l,j,n){var m=this.addPopupMenuItem(q,k,p,(l||"")+" ax",j,n);m.actionFn=o;m.ax=true;},addSubMenuItem:function P(o,l,k,n,j,m){this.addPopupMenuItem(o,k,n,l,j,m);},addEditorMenuItem:function a(n,k,m,j,l){this.addPopupMenuItem(n,k,m,"",j,l);},getToggleItemStates:function I(s,u,j,p,l,o){var m,n,k,q;if(typeof s==="string"){m=n=s;k=q="";}else{m=s.on||"";n=s.off||"";k=s.ttpOn||"";q=s.ttpOff||"";}var t=[{n:m,ttp:k,cls:u+" on",fn:p,ctxt:o},{n:n,ttp:q,cls:u,fn:j,ctxt:o}];if(!l){t.reverse();}return t;},addToggleMenuItem:function O(q,m,o,l,k,p,j){var n=this.getToggleItemStates(q,m,o,l,p,j);this.hasToggleItem=true;return this.addDualStateItem(k,n[0],n[1]);},addDualStateItem:function K(k,j,l){return this.addMenuItem({n:j.n,ttp:j.ttp},j.cls,this.getDualStateHandler(k,j,l),j.ctxt);},getDualStateHandler:function L(k,j,l){return function(n,o){var m=[j,l];if(n.cls===j.cls){m.reverse();}m[1].fn.call(mstrmojo.all[k],n,o);if(n.cls.indexOf("toggleManualMode")===-1&&o.cssClass.indexOf("pageSizeMenu")===-1){n.n=m[0].n;n.ttp=m[0].ttp;n.cls=m[0].cls;}};},addRadioMenuGroup:function E(l,q,m,k,j,p,o){var n=[];this.hasToggleItem=true;m.forEach(function(w,s){if(w.separator){this.addSeparator();return ;}var y=w.text,x=(k||"")+" "+(w.cls||"")+(p?"":" radio")+(w.value===l?" on":""),u=function(){if(q.call(this.ctxt,w.value,l,w)===false){return false;}l=w.value;n.forEach(function(z){z.cls=z.cls.replace(/ on$/,"")+(z.radioValue===l?" on":"");});return true;},t=o?this.addCustomMenuItem(y,x,u,o(w,s),j):this.addMenuItem(y,x,u,j);t.radioValue=w.value;n.push(t);},this);},addExclusiveMenuGroups:function b(l,q,n,k,j,p){var o=[],m=[];this.hasToggleItem=true;n.forEach(function(u){if(u.separator){this.addSeparator();return ;}var y=u.text,x=u.group,z=u.cls||" ";if(m[x]===undefined){m[x]=0;}m[x]+=u.value;var w=(k||"")+" "+(u.cls||"")+(u.value&l?" selected":""),t=function(AB,AE){if(l===AB.checkboxValue){return false;}var AD=!!(m[x]&l),AC,AA=!(l&AB.checkboxValue);if(AA){AC=AD?l|u.value:u.value;}else{AC=AD?l&~u.value:u.value;}q.call(this.ctxt,AC,l,u);l=AC;AE.selectedIndices=[];o.forEach(function(AF){S.addClass(AE._getItemNode(AF._renderIdx),[AF.optionCls]);if(!(AF.checkboxValue&l)){S.removeClass(AE._getItemNode(AF._renderIdx),["selected"]);}else{AE.selectedIndices[AF._renderIdx]=true;S.addClass(AE._getItemNode(AF._renderIdx),["selected"]);}});return j.closeAfterSelection;},s=p?this.addCustomMenuItem(y,w,t,p,j):this.addMenuItem(y,w,t,j);s.checkboxValue=u.value;s.optionCls=z;o.push(s);},this);},addToggleMenuGroup:function c(l,p,m,k,j,o){var n=[],q;this.hasToggleItem=true;m.forEach(function(u){if(u.separator){this.addSeparator();return ;}var x=u.text,w=(k||"")+" "+(u.cls||"")+(u.value===l?" selected":""),t=function(z,AA){var y=true;if(p.call(this.ctxt,u.value,l,u)===false){y=false;}if(q&&u.value!==l){S.removeClass(AA._getItemNode(q._renderIdx),"selected");q=null;}return y;},s=o?this.addCustomMenuItem(x,w,t,o,j):this.addMenuItem(x,w,t,j);if(u.value===l){q=s;}n.push(s);},this);},clear:function Y(){this._super();this.menus=[];},newInstance:function B(k){var j=mstrmojo.ui.menus.Menu;if(this.hasAccessibility||(this.xtab&&this.xtab.hasAccessibility)){j=mstrmojo.DynamicClassFactory.newComponent(j,[mstrmojo._IsAccessibleMenu]);}return new j(mstrmojo.hash.copy({popupConfig:this},k));},addMenuTitle:function J(j){this.addMenuItem(j||"","menu-item-title",mstrmojo.emptyFn);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.ui.menus.Menu","mstrmojo._IsList","mstrmojo.vi.ui._HasMask","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.util.A11yUtility","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,K=mstrmojo.vi.util.A11yUtility,C=mstrmojo.Enum_Keys;mstrmojo.vi.ui.toolbars.Toolbar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui._HasMask,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",tooltipOrientation:"vertical",init:function J(L){this._super(L);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIToolbar");},selectionPolicy:"reselect",toolbarCfg:null,toolbarClicked:mstrmojo.emptyFn,tooltipCss:null,enableAccessibility:false,_set_toolbarCfg:function(O,L){var M=this.toolbarCfg,N=(M!==L);if(N){if(M){M.destroy();}this.toolbarCfg=L;}return N;},getItemProps:function G(N,L){var M=this._super(N,L);M.addCls(N.cls);M.addStyle("display:inline-block");return M;},postBuildRendering:function A(){var L=document.createElement("div");L.className="mstrmojo-VIDND-mask";this.maskNode=this.domNode.appendChild(L);return this._super();},postselectionChange:function(L){var M=L.added;if(M){var N=this.items[M[0]];if(N.tp==="pb"&&N.isMenuClicked){N.menufn(N,this);}else{N.fn(N,this,L);}}},ontoolbarCfgChange:function B(L){var O=L.valueWas;if(O){O.destroy();}var N=L.value;if(!N){return ;}const M=N.getButtons?N.getButtons():N.btns;this.set("items",M);if(this.hasRendered){this.raiseEvent({name:"renderComplete"});}},openMenu:function F(P,L){var O=this.id,M=this._getItemNode(L._renderIdx),N;P.hostId=O;P.hostElement=M;N=P.newInstance();N.navMode=!!this.actionByKeyboard;if(N.navMode&&N.scriptClass==="mstrmojo.ui.menus.Menu"){this.attachEventListenerOnce("menuClosed",O,function(Q){if(Q&&Q.needFocus&&M&&M.grabFocus){M.grabFocus(true);}});}this.openPopup(N);},onclick:function I(L){var N=L.target||D.eventTarget(L.hWin,L.e),M=this.getItemFromTarget(N);if(M&&M.tp==="pb"){if(N&&N.className){M.isMenuClicked=N.className.indexOf("icn")===-1;}}this.actionByKeyboard=K.isKeyBoardEvent(L.e);this.toolbarClicked(L);this._super(L);},onkeydown:function E(L){if(this._super){this._super(L);}if(this.enableAccessibility){var M=L.e,O=M.keyCode;this.actionByKeyboard=true;if(O===C.SPACE||O===C.ENTER){L.cancel();L.preventDefault();var N=this.items[this.keydownIndex];if(N){this.doItemSelect(N,L);}}}},destroy:function H(M){var L=this.toolbarCfg;if(L){L.destroy();}delete this.items;this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasTooltip","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.array","mstrmojo.func","mstrmojo.color","mstrmojo.vi.util.A11yUtility","mstrmojo._CanAutoClose");var e=mstrmojo.css,c=mstrmojo.color,O=mstrmojo.array,H=mstrmojo.dom,B=mstrmojo.string,Y=mstrmojo.func,R=mstrmojo.vi.util.A11yUtility;function J(g){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:B.encodeHtmlString(g)});}function S(h,j){var g=h.style,i=this.parent&&this.parent.stateCssText&&this.parent.stateCssText[j];if(i){g.background=i.bg;g.color=i.text;}}mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,onSelectedItemChange:mstrmojo.emptyFn,useRichTooltip:true,showTooltipAlways:false,allowHTML:false,useDarkTheme:false,optimizeForTouch:false,closeOnScroll:true,stateCssText:undefined,init:function X(g){this._super(g);e.addWidgetCssClass(this.getPopupList(),"ctrl-popup-list");},unrender:function Z(g){if(this._blurListenerProc){H.detachEvent(this.selectedNode,"blur",this._blurListenerProc);delete this._blurListenerProc;}if(this._super){this._super(g);}},initChildren:function C(){this.children=this.getPopupListConfig();this._super();},postBuildRendering:function a(){if(this._super){this._super();}var g=this,h=this.getSelectedItem();if(h){J.call(this,h.n);}if(this.enableAccessibility){if(this.useTabIndex){this.selectedNode.setAttribute("tabindex","0");}else{this.selectedNode.setAttribute("tabindex","-1");}this.selectedNode.setAttribute("role","combobox");this.selectedNode.setAttribute("aria-haspopup","menu");this.selectedNode.setAttribute("aria-owns",this.getPopupList().id);if(!this._blurListenerProc){this._blurListenerProc=function(){g.loseFocus();};H.attachEvent(this.selectedNode,"blur",this._blurListenerProc);}}},grabFocus:function Q(h){if(!this.enableAccessibility){return ;}var i=this.selectedNode,g=this.getPopupWidget();if(h){i.focus();}g.navMode=true;e.addClass(i,R.CSS_FOCUS_VISIBLE);},loseFocus:function D(i){if(!this.enableAccessibility){return ;}var h=this.selectedNode,g=this.getPopupWidget();if(i){h.blur();}g.navMode=false;e.removeClass(h,R.CSS_FOCUS_VISIBLE);},onkeydown:function M(g){var i=g.e||g,h=i.key;if(!this.enableAccessibility){return ;}if(this._super){this._super(g);}if(h==="Enter"||h===" "){g.cancel();g.preventDefault();this.onclick(g);}},shouldShowTooltip:function G(){var g=this.selectedNode;return g.scrollWidth>g.offsetWidth||this.showTooltipAlways;},showTooltip:function E(j,i){if(this.shouldShowTooltip()){var h=this.richTooltip;if(h&&!h.top){var g=H.position(this.selectedNode);h.top=g.y-3;h.left=g.x+g.w+6;}if(this._super){this._super(j,i);}}},getSelectedItem:function P(){var g=this.items;return g&&g[this.selectedIndex];},selectItemByField:function A(h,g){this.set("selectedIndex",O.find(this.items||[],h,g));},getPopupWidget:function F(){return this.list;},getPopupList:function L(){return this.list;},_set_items:function K(j,g){var i=this.items;this.items=g;delete this.selectedIndex;if(i!==g){var h=this.hasRendered;if(h){this.refresh();}return true;}return false;},onclick:function f(g){this._super(g);var i=this,h=i.getPopupWidget();if(i.closeOnScroll){i.mw=i.mw||function(j){if(!H.contains(h.domNode,H.eventTarget(self,j),true,document.body)){h.close();}};}if(!h.onCloseFuncWrapped){h.onClose=Y.composite([h.onClose,function(){H.detachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",i.mw);}]);h.onCloseFuncWrapped=true;}H.attachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",i.mw);if(i.focusOnPopup){h.domNode.focus();h.navMode=R.isKeyBoardEvent(g&&g.e);}},_set_selectedIndex:function U(o,k,i){if((k!==0&&!k)||k<0){return false;}var h=this.selectedIndex=k,g=this.getPopupList(),j=g&&g.items,m=j&&j[h],l=this.selectedNode;if(m&&m.dsbld){return false;}if(g){mstrmojo._ListSelections._set_selectedIndex.call(g,"selectedIndex",h,i);}if(l&&j&&j[h]){this.updateSelectedNode(j[h]);}if(j&&j[h]){if(this.focusOnPopup&&g&&!g.closeAfterSelection){g.itemsContainerNode.children[h].style.color="";}else{this.onitemSelected(j[h],h);}}return true;},updateSelectedNode:function(g){if(this.selectedNode&&g){this.selectedNode.innerHTML=this.getPulldownTextInnerHTML(g);this.selectedNode.title=g.title||"";this.selectedNode.setAttribute("aria-label",B.encodeHtmlString(g.ariaLabel||g.n||"",true));}},getPulldownTextInnerHTML:function I(g){return this.allowHTML?g.n:B.encodeHtmlString(g.n,true);},postselectedIndexChange:function W(g){var k=g.value,i=g.valueWas;if(k!==i){var h=this.items,j=h[k];if(j){J.call(this,j.n);}this.onSelectedItemChange(j,h[i]);}},getPopupConfig:function N(){var g=this._super();g.useDarkTheme=this.useDarkTheme;return g;},_set_allowHTML:function(h,g){if(this.allowHTML===g){return false;}this.allowHTML=g;this.getPopupList().set("allowHTML",g);return true;},getPopupListConfig:function d(){var j=this.docSelector||this.parent&&this.parent.docSelector||{};var k=j.showAdvancedStyling&&j.showAdvancedStyling();return{scriptClass:"mstrmojo.ui.PopupList",enableAccessibility:this.enableAccessibility,alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,allowHTML:this.allowHTML,showAdvancedStyling:k,canAdjustTop:this.canAdjustTop!==false,optimizeForTouch:this.optimizeForTouch,syncSelectedIndex:this.syncSelectedIndex!==undefined?this.syncSelectedIndex:true,listHooks:{select:function g(m,n,l){this.parent.set("selectedIndex",l);if(this.visible&&this.closeAfterSelection&&!this.selectedItem.dsbld){this.close();}if(this.parent&&this.parent.stateCssText){S.call(this,m,"selected");}},unselect:function(l){if(this.parent&&this.parent.stateCssText){S.call(this,l,"base");}}},getItemProps:function h(p,l){var o=mstrmojo._IsList.getItemProps.call(this,p,l);o.style=this.parent.itemCssText||"";if(this.parent.stateCssText){var s=(this.selectedIndex===-1&&this.parent.selectedIndex!==undefined)?this.parent.selectedIndex:this.selectedIndex;var n=s===l;var t=this.parent.stateCssText[n?"selected":"base"]||{},q=t&&t.bg;if(t){o.style+=";";o.style+="background:"+q+";";o.style+="color:"+t.text+";";o.style+="padding-left:"+t.paddingX+";";o.style+="padding-right:"+t.paddingX+";";}if(!this.multiSelect&&q){var m=c.isDarkColor(q.indexOf("rgb")>=0?c.rgbStr2hex(q):q);if(m){o.addCls("hasDarkBgColor");}else{o.addCls("hasLightBgColor");}}}return o;},suppressClose:function i(l){return mstrmojo._CanAutoClose.suppressClose.call(this,l)||H.contains(this.parent.domNode,l,true,document.body);}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function b(h,l,g,k,j){k=k||{};k.items=h;var i;if(j===true){i=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:g||0},k);}else{i=new mstrmojo.ui.Pulldown(k);if(g!==undefined){i.set("selectedIndex",g);}}i.onSelectedItemChange=l||mstrmojo.emptyFn;return i;};}());(function(){mstrmojo.requiresCls("mstrmojo.Slider","mstrmojo.MetricSelectorUtility","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.array","mstrmojo._FormatDefinition","mstrmojo.hash");mstrmojo.requiresDescs(8153,8154,8155,8156,8157,8158,8159,8160,8161,8162,8163,8164,8165,8166,8167,8168,8169,8170,7839,587,2204,2202,2203,7576,7575,7622);var W=mstrmojo.dom,N=mstrmojo.hash,S=mstrmojo.MetricSelectorUtility,k=mstrmojo._FormatDefinition.NumberFormatCategory,J=mstrmojo.desc,X=mstrmojo.css,Z=mstrmojo.num,B=Math,d=B.max,H=B.min,f=B.floor,Y=B.round,b=9;function M(AC,AB,z,y){var AA="px",s=AC._length,p=AC.handleSize,o=AC.orCfg,AG=o.posCssP,t=o.lenCssP,u=false;z=d(z,-1);y=H(y+b,s);if(z>y){u=true;}var AD=H(z,y),AE=d(z,y),AF=AE-AD-(u?0:p+b),AF=d(AF,0),w=d(s-AE,0);if(AC.hasRendered){AB.handle1Node.style[AG]=z+AA;AB.handle2Node.style[AG]=(y-b)+AA;var n=AB.lowerRange.style,x=AB.thumbNode.style,q=AB.upperRange.style;n[AG]=0;x[AG]=(AD+(u?0:p))+AA;q[AG]=(AE+p-b)+AA;n[t]=d(AD,0)+AA;x[t]=AF+AA;q[t]=w+AA;}else{AA+=";";AG+=":";t+=":";AC.handle1CssText=AG+z+AA;AC.handel2CssText=AG+(y-b)+AA;AC.lowerRangeCssText=t+d(AD,0)+AA;AC.thumbCssText=AG+(AD+p)+AA+t+AF+AA;AC.upperRangeCssText=AG+(AE+p-b)+AA+t+w+AA;}return{handle1:z,handle2:y};}function O(n){this.getUnit=function(){return n._length/d((n.items.length-1),1);};this.calcMinMax=function(q,p){var s=n.unit;return{min:f(q/s+0.5),max:f(p/s+0.5)};};this.calcPxIdx=function(p){return f(p/n.unit+0.5);};this.getStep=function(){var q=n.high-n.low,p=parseInt(n.numFmts.cat,10),s=(p===4)?2:(p===5)?4:0;q=(q===0)?1:q;if(q>1){return(q>(n._length-2))?Number(Number(q/(n._length-2)).toFixed(n.numFmts.dp+s)):1;}return q/(n._length-2);};this.getIdx=function(p){return H(d(Y((p-n.low)/n.step),0),n.items.length-1);};this.initialMetricSlider=function o(){var u=function(AH){return AH!==undefined&&AH!==null;},s=function(AH){return(u(AH.da)&&u(AH.da.low)&&u(AH.da.high)&&u(AH.da.cnt)&&u(AH.f)&&u(AH.ft)&&u(AH.qua));},q=function(AH){var AL=true,AK=true,AI=parseInt(AH.ft,10),AJ=parseInt(AH.f,10);if(AI===S._GENERIC){AL=AJ!==S.FN.ISNULL&&AJ!==S.FN.ISNOTNULL&&AJ!==S.FN.NOTIN&&AJ!==S.FN.IN;}else{if(AI===S._PERCENT||AI===S._RANK){AK=AJ!==S.MRPFN.INASCENDING&&AJ!==S.MRPFN.INDESCENDING&&AJ!==S.MRPFN.NOTINDESCENDING&&AJ!==S.MRPFN.NOTINASCENDING;}}return !AL||!AK;},AE=0;n.include=n.parent.include;n.clsType="scm ";n.staticStatus=!(u(n.da)&&u(n.da.low)&&u(n.da.high)&&u(n.da.cnt)&&u(n.qua));if(n.staticStatus){n.da.low=1;n.da.high=7;n.ft=S._GENERIC;n.f=S.FN.BETWEEN;n.qua=S.Q._G;n.cs=[{n:"",v:1},{n:"",v:7}];n.numFmts={cat:9,dp:0,fm:""};}switch(n.qua){case 0:var AD=parseInt(n.numFmts.cat,10);AE=AD===4?2:AD===5?4:0;n.low=Number(Number(n.da.low).toFixed(n.numFmts.dp+AE));n.high=Number(Number(n.da.high).toFixed(n.numFmts.dp+AE));break;case 1:case 2:n.low=1;n.high=n.da.cnt;break;case 3:case 4:n.low=0;n.high=100;break;}var AG=!n.staticStatus&&!n.da.nov;n.set("lowText",AG?n.formatNumber(n.low):"");n.set("highText",AG?n.formatNumber(n.high):"");n.step=(n.qua===1||n.qua===2)?1:this.getStep();n.cs1Vl=n.low;n.cs2Vl=n.high;var t=n.low,AA=n.high,AF=[],AC=0;if(u(t)&&u(AA)){var x=t,z;for(z=0;x<=AA;z++,x+=n.step){AF[z]={n:S.formatNumber(n.qua,x,n.numFmts),v:Number(Number(x).toFixed(n.numFmts.dp+AE))};}AC=AF.length;if(AC>0&&AF[AC-1].v!==AA){AF[AC-1]={n:S.formatNumber(n.qua,AA,n.numFmts),v:AA};}}n.items=AF;var p=S.OP,AB=n.cs,y=(AB&&AB.length>0)?Z.parseNumeric(String(AB[0].v).replace("%","")):t,w=(AB&&AB.length>1)?Z.parseNumeric(String(AB[1].v).replace("%","")):AA;if(y<n.low){n.frtUst=true;}if(w>n.high){n.ndUst=true;}n.opId=(n.f!==null&&n.ft!==null)?S.getOpIdxByfunc(n.f,n.ft):p._BETWEEN;switch(n.opId){case p._EQUALS:case p._NOT_EQUALS:n.cs1Vl=n.cs2Vl=y;break;case p._LESS_EQUAL:case p._GREATER:n.cs1Vl=t;n.cs2Vl=y;break;case p._GREATER_EQUAL:case p._LESS:n.cs1Vl=y;n.cs2Vl=AA;break;case p._IN:case p._NOT_IN:case p._IS_NULL:case p._IS_NOT_NULL:break;default:n.cs1Vl=y;n.cs2Vl=w;break;}n.cs1Idx=this.getIdx(n.cs1Vl);n.cs2Idx=this.getIdx(n.cs2Vl);n.cs1Nm=u(n.cs1Vl)?S.formatNumber(n.qua,n.cs1Vl,n.numFmts):n.items[n.cs1Idx].n;n.cs2Nm=u(n.cs2Vl)?S.formatNumber(n.qua,n.cs2Vl,n.numFmts):n.items[n.cs2Idx].n;n.unit=this.getUnit();n.set("unSet",(!s(n)||q(n)||(!n.cs||n.cs.length===0))&&!n.staticStatus);};this.updateOpCs=function(){var t=(n.cs1Vl>n.cs2Vl)?n.cs2Vl:n.cs1Vl,z=(n.cs1Vl>n.cs2Vl)?n.cs1Vl:n.cs2Vl,s=n.low,w=n.high,y=n.include,p=S.OP,u=parseInt(n.qua,10),q=(u===S.Q._PT||u===S.Q._PB),AA,x=[];if((t>=s&&z<=w)||t<s||z>w){n.opId=y?p._BETWEEN:p._NOT_BETWEEN;}if(t===z){n.opId=y?p._EQUALS:p._NOT_EQUALS;}if(t===s&&z<w){n.opId=y?p._LESS_EQUAL:p._GREATER;}if(t>s&&z===w){n.opId=y?p._GREATER_EQUAL:p._LESS;}AA=s==t&&z==w;if(!AA){switch(n.opId){case p._BETWEEN:case p._NOT_BETWEEN:x.push({dtp:5,v:Z.toLocaleString(t)+(q?"%":"")});case p._EQUALS:case p._NOT_EQUALS:x.push({dtp:5,v:Z.toLocaleString(z)+(q?"%":"")});break;default:if(t>s){x.push({dtp:5,v:Z.toLocaleString(t)+(q?"%":"")});}if(z<w){x.push({dtp:5,v:Z.toLocaleString(z)+(q?"%":"")});}}}n.cs=x;n.parent.node.data.cs=x;n.set("unSet",AA);};this.updateThumb=function(){var p=n.cs1Idx,t=n.cs2Idx;if(p!==undefined&&t!==undefined){var q=n.unit,s=n.gap;N.copy(M(n,n,Y(p*q-s),Y(t*q-s)),n);}};this.joinConst=function(){var s=n.cs;if(s){var p=[],q;for(q in s){p.push(s[q].v);}return p.join(",");}};}var E="<span {@ttpCssText}>{@content}</span>";function D(){if(this.staticStatus){return null;}var q=this.ghost;if(!q){var u=this.containerNode.cloneNode(true),t=u.childNodes;X.addClass(u,["gh"]);q=this.ghost={containerNode:u,lowerRange:t[0],handle1Node:t[1],thumbNode:t[2],handle2Node:t[3],upperRange:t[4]};this.sdcNode.appendChild(u);}var o=this.orCfg,n=o.posCssP,p=o.lenCssP,s=this.id;mstrmojo.array.forEach(["lowerRange","containerNode","thumbNode","upperRange"],function(AA,w){var z=mstrmojo.all[s],y=z[AA].style,x=q[AA].style;if(w){x[n]=y[n];}x[p]=y[p];});q.containerNode.style.display="block";return q;}mstrmojo.MetricSlider=mstrmojo.declare(mstrmojo.Slider,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricSlider",markupString:'<div><div class="mstrmojo-Slider-summary"></div><div class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont" style=""><div class="sdc" style="position:absolute;{@sdcCssText}"><div class="sd" style="{@sdCssText}"><div class="bk left" style="{@lowerRangeCssText}"></div><div class="t1" style="{@handle1CssText}" mstrAttach:mouseover,mouseout,click></div><div class="t2 bk" style="{@thumbCssText}"></div><div class="t3" style="{@handel2CssText}" mstrAttach:mouseover,mouseout,click></div><div class="bk right" style="{@upperRangeCssText}"></div></div></div><div class="mstrmojo-Label" style="margin-top:9px;float:left;"></div><div class="mstrmojo-Label" style="margin-top:9px;float:right;"></div></div></div></div>',markupSlots:{summaryNode:function(){return this.domNode.childNodes[0];},sliderNode:function(){return this.domNode.childNodes[1];},dndNode:function(){return this.domNode.childNodes[1].childNodes[0];},sdcNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},containerNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0];},lowerRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0];},handle1Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[1];},thumbNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[2];},handle2Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[3];},upperRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[4];},tooltipNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},lowNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[1];},highNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2];},editValueNode:function(){return this.domNode;}},markupMethods:{onlowTextChange:function(){this.lowNode.innerHTML=this.lowText||"";},onhighTextChange:function(){this.highNode.innerHTML=this.highText||"";},onfontChange:function(){this.lowNode.style.font=this.highNode.style.font=String(this.font);}},init:function h(n){this._super(n);this.handleSize=mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH;this.clsType="scm";this.typeHelper=new O(this);this.useRichTooltip=false;},typeHelper:null,unSet:false,preBuildRendering:function A(){var q=this.orCfg,p=this.isHoriz;q.cPosCssP=p?"right":"bottom";q.cLenCssP=p?"height":"width";var u=q.lenCssP,t=this[u],s=parseInt(t,10),o=this.handleSize;var n=this._length=(isNaN(s))?0:(s-o-b);if(n<=0){n=this._length=mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH-o;}if(t){this.bkCssText=u+":"+d(s-(2*this.cssBkBW),0)+"px;";this.sdcCssText=q.posCssP+":"+b+"px;"+u+":"+n+"px;"+q.opPosCssP+":0px;";}this.typeHelper.initialMetricSlider();this.typeHelper.updateThumb();},postBuildRendering:function R(){this._super();if(!this.staticStatus&&!this.da.nov){var o=this.lowNode,n=parseInt(o.style.fontSize,10);if(isNaN(n)){o.style.fontSize=8*this.parent.model.getZoomFactor()+"pt";}this.updateSummary();}this.lowNode.style.marginLeft=b+"px";this.highNode.style.marginRight=b+"px";this.sliderNode.style.height="0px";},onmouseover:function G(n){this.showTooltip(n.e,self);},onmouseout:function g(n){this.hideTooltip(n.e,self);},summaryLabels:{db:J(8153,"Between ## and ###"),dnb:J(8154,"Not between ## and ###"),din:J(587,"In"),dnin:J(2204,"Not in"),dnull:J(2202,"Is Null"),dnnull:J(2203,"Is not Null"),req:J(8155,"Rank ="),rneq:J(8156,"Rank <>").replace("<>",String.fromCharCode(8800)),rexb:J(8157,"Rank exclude bottom"),rext:J(8158,"Rank exclude top"),rb:J(8159,"Rank bottom"),rt:J(8160,"Rank top"),rbt:J(8161,"Rank between ## and ###"),rnbt:J(8162,"Rank not between ## and ###"),rin:J(8163,"Rank in"),rnin:J(8164,"Rank not in"),peq:J(8165,"Percent ="),pneq:J(8166,"Percent <>").replace("<>",String.fromCharCode(8800)),pexb:J(8167,"Exclude bottom"),pext:J(8168,"Exclude top"),pb:J(7576,"Bottom"),pt:J(7575,"Top"),pbt:J(8153,"Between ## and ###"),pnbt:J(8154,"Not between ## and ###"),pin:J(8169,"Percent in"),pnin:J(8170,"Percent not in")},formatNumber:function i(u){var p=this,z=Math.abs(u),y=p.numFmts.cat,o=1000,AA=["K","M","B","T","P","E","Z","Y"],w=AA.length,t;if(z>=o&&(y===k.Default||y===k.Fixed||y===k.General||y===k.Currency)){for(t=0;t<w;t++,o*=1000){if(z<o*1000){var n=z/o,s=(n*10).toFixed(0)%10>0?1:0,x=n.toFixed(s)+AA[t];return u<0?"("+x+")":x;}}}return S.formatNumber(p.qua,u,p.numFmts);},updateSummary:function L(){if(this.summaryNode&&!this.staticStatus){var AH=this.f,p=this.ft,AG=S,AB=S.FN,o=S.MRPFN,y="",AE=(this.cs1Vl<this.cs2Vl)?this.cs1Vl:this.cs2Vl,AC=(this.cs1Vl>this.cs2Vl)?this.cs1Vl:this.cs2Vl,w=this.formatNumber(AE),u=this.formatNumber(AC),t=this.typeHelper,x=this.summaryLabels,n=parseInt(p,10),q=parseInt(AH,10),AD=(n===AG._GENERIC&&(q===AB.ISNULL||q===AB.ISNOTNULL||q===AB.NOTIN||q===AB.IN))||((n===AG._PERCENT||n===AG._RANK)&&(q===o.INASCENDING||q===o.INDESCENDING||q===o.NOTINDESCENDING||q===o.NOTINASCENDING));if(this.unSet||AE<=this.low&&AC>=this.high&&this.include){y=mstrmojo.desc(2058,"All");}if(!this.unSet||AD){switch(p){case AG._GENERIC:switch(AH){case AB.EQUALS:y="= "+w;break;case AB.NOTEQUALS:y=String.fromCharCode(8800)+" "+w;break;case AB.GREATERTHAN:y="> "+u;break;case AB.GREATERTHANEQUALS:y=String.fromCharCode(8805)+" "+w;break;case AB.LESSTHAN:y="< "+w;break;case AB.LESSTHANEQUALS:y=String.fromCharCode(8804)+" "+u;break;case AB.BETWEEN:y=w+" - "+u;break;case AB.NOTBETWEEN:y=mstrmojo.desc(1099)+" "+w+" - "+u;break;case AB.ISNULL:y=x.dnull;break;case AB.ISNOTNULL:y=x.dnnull;break;case AB.IN:y=x.din+" "+t.joinConst();break;case AB.NOTIN:y=x.dnin+" "+t.joinConst();break;}break;case AG._PERCENT:case AG._RANK:var AF="r";if(parseInt(p,10)===AG._PERCENT){AF="p";}switch(AH){case o.EQUALSDESCENDING:case o.EQUALSASCENDING:y=x[AF+"eq"]+" "+w;break;case o.NOTEQUALSDESCENDING:case o.NOTEQUALSASCENDING:y=x[AF+"neq"]+" "+w;break;case o.GREATERTHANEQUALSASCENDING:y=x[AF+"exb"]+" "+w;break;case o.GREATERTHANASCENDING:y=x[AF+"exb"]+" "+u;break;case o.GREATERTHANEQUALSDESCENDING:y=x[AF+"ext"]+" "+w;break;case o.GREATERTHANDESCENDING:y=x[AF+"ext"]+" "+u;break;case o.LESSTHANASCENDING:y=x[AF+"b"]+" "+w;break;case o.LESSTHANEQUALSASCENDING:y=x[AF+"b"]+" "+u;break;case o.LESSTHANDESCENDING:y=x[AF+"t"]+" "+w;break;case o.LESSTHANEQUALSDESCENDING:y=x[AF+"t"]+" "+u;break;case o.BETWEENDESCENDING:case o.BETWEENASCENDING:y=x[AF+"bt"].replace("##",w).replace("###",u);break;case o.NOTBETWEENASCENDING:case o.NOTBETWEENDESCENDING:y=x[AF+"nbt"].replace("##",w).replace("###",u);break;case o.INASCENDING:case o.INDESCENDING:y=x[AF+"in"]+" "+t.joinConst();break;case o.NOTINDESCENDING:case o.NOTINASCENDING:y="";y=x[AF+"nin"]+" "+t.joinConst();break;}break;}}var z=this.summaryNode,AA=(y!=="")?"":0;z.innerHTML=y;z.style.margin=AA;}},getClientHeight:function U(){return this.dndNode.clientHeight+this.summaryNode.clientHeight+15;},initDrag:function l(s,n){if(!this.staticStatus&&!this.da.nov){n=n||window;var t=W.eventTarget(n,this.dnd.startE);if(t===this.handle1Node||t===this.handle2Node){var q=D.call(this),o=this.orCfg,p=this.dnd;p.initD={handle1:parseFloat(this.handle1,10),handle2:parseFloat(this.handle2,10)-b,length:this._length,contL:q.containerNode[o.lenP],offset:W.getMousePosition(this.dnd.startE,n)[o.offsetP]};p.initD.td=t;X.removeClass(this.domNode.childNodes[1],["invalid"]);}}},ondrag:function K(u,t){if(!this.staticStatus){t=t||window;var x=this.dnd.initD;if(x){var AD=this.ghost,AE=x.handle1,q=x.handle2,s=this.cs1Idx,p=this.cs2Idx,AB=this.unit,z=this.gap,o=x.length;var AA=W.getMousePosition(u,t)[this.orCfg.offsetP]-x.offset;switch(x.td){case this.handle1Node:AE=d(H(d(x.handle1+AA,0),o)-z,-1);s=d(f(AE/AB+0.5),0);break;case this.handle2Node:q=d(H(d(x.handle2+AA,0),o)-z,-1);p=d(B.ceil(q/AB+0.5),0);break;default:return ;}M(this,AD,AE,q);var w=this.items,n=(w&&w.length)||0;if(n&&s>=0&&s<n&&p>=0&&p<n){var AC=false,y;if(s!==this.cs1Idx){this.cs1Idx=s;y=this.items[s];this.cs1Vl=y.v;this.cs1Nm=y.n;AC=true;}if(p!==this.cs2Idx){this.cs2Idx=p;y=this.items[p];this.cs2Vl=y.v;this.cs2Nm=y.n;AC=true;}if(AC){this.typeHelper.updateThumb();this._updateTooltip(x.td);}}}}},ondrop:function a(o){if(!this.staticStatus&&!this.da.nov){this.typeHelper.updateThumb();var n=this.ghost;if(n){n.containerNode.style.display="none";}this.hideTooltip(o,self);var p=this.dnd&&this.dnd.initD;if(this.makeSelection&&p){this.makeSelection({selItem:p.td});}if(this.items&&this.items.length&&this.ghost){this[(W.eventTarget(self,o)===this.ghost.handle1Node)?"frtUst":"ndUst"]=false;this.selectRange();}this.dnd.initD=null;}},selectRange:function Q(){var n=this.typeHelper,p=this.cs1Vl,o=this.cs2Vl,t=this.qua,s=this.numFmts;this.cs1Idx=n.getIdx(p);this.cs2Idx=n.getIdx(o);this.cs1Nm=S.formatNumber(t,p,s);this.cs2Nm=S.formatNumber(t,o,s);n.updateOpCs();this.onselectionChange();this.updateSummary();},onincludeChange:function C(){if(!this.staticStatus){this.changeInclude=true;this.selectRange();}},showTooltip:function m(o,n){var p=W.eventTarget(n,o);this._updateTooltip(p);mstrmojo.tooltip.open(this,o,n);},_updateTooltip:function P(s){if(N.walk("handle1Node",this.ghost)===s||N.walk("handle2Node",this.ghost)===s){return ;}var o=this.orCfg,q=o.posCssP,n,p={contentNodeCssClass:"scm-tooltip",refNode:this.domNode.childNodes[1],posType:this._tooltip_pos};p[o.opPosCssP]=-parseInt(this.font,10)/2;p[q]=s.style[q];n=String((s===this.handle1Node)?this.cs1Nm:this.cs2Nm);p.content=E.replace(/\{@content\}/g,n);this.set("richTooltip",p);},onclick:function c(n){if(!this.staticStatus&&!this.da.nov){var o=W.eventTarget(n.hWin||window,n.e);this.hideTooltip(n.e,self);this.dnd.initD={makeMetricSilderSelectionByClick:true,td:((o===this.handle1Node)?this.handle1Node:((o===this.handle2Node)?this.handle2Node:null))};this.openEditValue({isfrt:(o===this.handle1Node),tgt:o});if(this._onThumb){this._onThumb(n);}}},onselectionChange:function I(n){this._super(n);if(this.dnd.initD&&this.dnd.initD.makeMetricSilderSelectionByClick){this.dnd.initD=null;}},onquaChange:function e(n){var p=S.getFuncInfo(this.opId,n.valueWas),q=S.getFuncInfo(this.opId,n.value),o;if(p.ft!==q.ft){if(!this.staticStatus){this.items=[];this.cs=[];this.f=this.ft=null;this.refresh();o=true;}}else{this.f=S.getFuncInfo(this.opId,n.value).f;o=false;}this.unSet=o||this.unSet;this.changeQual=true;this.selectRange();},updateData:function F(n,o){this.da=n;this.updateExpr(o);},updateExpr:function j(n){if(n){this.cs=n.cs;this.f=n.f;this.ft=n.ft;this.qua=n.qua;}this.refresh();},editValueRef:{cssClass:"edvl",slot:"editValueNode",scriptClass:"mstrmojo.Popup",locksHover:true,onOpen:function(){if(this.tgt){this.set("left",H(d(parseInt(this.tgt.style.left,10),0),parseInt(this.opener.width,10)-90)+"px");this.set("top",this.tgt.style.top);}var p=this.opener,o=this.children[0];if(p){var n=this.isfrt?p.cs1Vl:p.cs2Vl;o.edt.set("value",Z.toLocaleString(n));}},children:[{scriptClass:"mstrmojo.Table",rows:1,cols:2,layout:[{cells:[{cssText:"width: 40px; padding: 3px;"},{cssText:"width: 16px;padding: 3px;"}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.ValidationTextBox",alias:"edt",cssText:"color:black",dtp:mstrmojo.expr.DTP.NUMERIC,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:function(){if(this.parent.apply){this.parent.apply.set("enabled",String(this.value).length!==0);}},onInvalid:function(){if(this.parent.apply){this.parent.apply.set("enabled",false);}},onkeyup:function(o){if(this.parent.apply.enabled){var n=o.hWin,p=o.e||n.event;if(p.keyCode===13){this.parent.apply.onclick();}}}},{slot:"0,1",scriptClass:"mstrmojo.Button",cssClass:"icn apply",alias:"apply",onclick:function(){var o=this.parent.parent,q=o.opener,n=this.parent.edt.value;if(o&&q&&String(n).length>0){q[o.isfrt?"cs1Nm":"cs2Nm"]=n;n=Z.parseNumeric(n);q[o.isfrt?"cs1Vl":"cs2Vl"]=n;}q[o.isfrt?"frtUst":"ndUst"]=true;q.selectRange();q.typeHelper.updateThumb();o.close();}}]}]},openEditValue:function(n){this.openPopup("editValueRef",n);}});mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH=14;mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH=95;}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,preValidation:undefined,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){if(this.preValidation){this.preValidation();}this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(B){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:B||mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",nextAriaLabel:"",prevAriaLabel:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next" role="button" aria-label="{@en@nextAriaLabel}">+</div><div class="text"></div><div class="prev" role="button" aria-label="{@en@prevAriaLabel}">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;if(mstrApp.isWSStyling){this.layoutConfig=null;}this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,maxLength:G.maxLength,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.vi.util.A11yUtility","mstrmojo.dom","mstrmojo.EditableLabel");var E=mstrmojo.css,G=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",enableAccessibility:undefined,ariaLabel:"",markupMethods:{onenabledChange:function F(){this.txtLabel.set("enabled",this.enabled);this.txtLabel.set("editOnClick",this.enabled);E.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function I(J){this._super(J);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");if(this.enableAccessibility){this.focusOnPopup=true;}},postBuildRendering:function A(){if(this._super){this._super();}if(this.enableAccessibility){if(this.txtLabel&&this.txtLabel.domNode){this.txtLabel.domNode.setAttribute("aria-label",this.ariaLabel);}if(this.btnNode){mstrmojo.vi.util.A11yUtility.addAccessibilityProps(this.btnNode,"button",{tabindex:"0","aria-label":this.ariaLabel,});}}},onkeydown:function D(J){if(this.enableAccessibility){var K=J.e;if(K.target===this.btnNode){if(K.keyCode===mstrmojo.Enum_Keys.ENTER||K.keyCode===mstrmojo.Enum_Keys.SPACE){this.onclick(J);K.stopPropagation();K.preventDefault();}}}},grabFocus:function C(){if(this.enableAccessibility){this.btnNode.focus();}},updatePreview:function B(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},getListCfg:function H(){if(this.enableAccessibility){return{scriptClass:"mstrmojo.ui.PopupList",syncSelectedIndex:false,navMode:true,selectionPolicy:"reselect"};}else{return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};}},validateTextInput:function(J){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:G.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Obj","mstrmojo.ui.ButtonBar","mstrmojo.ui.Checkbox","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ThreeColumnContainer");var D=mstrmojo.hash;mstrmojo.vi.models.editors.ControlsViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.editors.ControlsViewFactory",getEditorGroup:function B(H,I){return new mstrmojo.vi.ui.editors.EditorGroup(D.copy(I,{children:H}));},getLabelAndControl:function G(J,K,M,O,L,N){var P=new mstrmojo.Label({text:J,setDimensions:function(S,Q){var R=this.domNode;if(R){R.style.width=Q;}}}),I=P,H=K;if(L){I=K;H=P;}I.slot="col1Node";H.slot="col2Node";return new mstrmojo.ui.editors.controls.TwoColumnContainer(D.copy(N,{col1Width:M||"40%",col2Width:O||"60%",children:[I,H],getLabel:function(){return P;},getCtrl:function(){return this.children.filter(function(Q){return Q!==P;})[0];}}));},getLabelAndControlWithMsg:function C(L,M,P,O,S,H,N,Q){var R=new mstrmojo.Label({text:L,setDimensions:function(Y,W){var X=this.domNode;if(X){X.style.width=W;}}}),U=new mstrmojo.Label({text:P?mstrmojo.desc(14548,"Changes will be applied after Desktop is restarted."):"",setDimensions:function(Y,W){var X=this.domNode;if(X){X.style.width=W;}},setText:function(W){this.text=W;}}),K=R,J=M,I=U;if(N){K=M;J=R;}K.slot="col1Node";J.slot="col2Node";I.slot="col3Node";return new mstrmojo.ui.editors.controls.ThreeColumnContainer(D.copy(Q,{col1Width:O||"30%",col2Width:S||"30%",col3Width:H||"40%",children:[K,J,I],getLabel:function(){return R;},getCtrl:function(){return this.children.filter(function(W){return W!==R;})[0];},getMessage:function(){return U;}}));},getPulldown:function F(I,L,H,K,J){return mstrmojo.ui.Pulldown.newPulldown(I,function(M,N){L.call(this,M.v,N&&N.v);},H,K,J);},getCheckboxAndLabel:function A(N,L,K){var J=new mstrmojo.ui.Checkbox({checked:N,oncheckedChange:function(){var O=this.checked;K.call(this,O,!O);}});var M=this.getLabelAndControl(L,J,"14px","100%",true);M.cssClass="checkLabel";var I=M.getLabel();I.onclick=function H(){J.onclick();};I.cssDisplay="inline-block";return M;},getButtonBar:function E(J,H,L,K){K=K||{};K.items=J;var I=new mstrmojo.ui.ButtonBar(K);I.singleSelect(H);I.postselectionChange=function(M){var N=this.items,O=N[M.removed&&M.removed[0]];L.call(this,N[M.added[0]],O);};return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo._FillsBrowser","mstrmojo.Container","mstrmojo.EnumRWUnitType","mstrmojo.Label","mstrmojo.ui.PopupButton","mstrmojo.ui.Pulldown","mstrmojo.vi.ui.TargetSelector","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.TruncatedList","mstrmojo.elementHelper","mstrmojo.vi.ui.InlineDialogBase");mstrmojo.requiresClsP("mstrmojo.vi.models","EnumPanelTypes");var b=mstrmojo.hash,s=mstrmojo.func,k=mstrmojo.array,E=mstrmojo.css,S=mstrmojo.dom,u=mstrmojo.string,l=mstrmojo.Button.newWebButton,P=mstrmojo.EnumRWUnitType,n=mstrmojo.vi.models.EnumPanelTypes,e=mstrmojo.vi.enums.EnumFeatures,c={SHARED:0,SEPARATE:1},C=mstrmojo.elementHelper.ELEM_SEPARATOR,o=null,Y=function(y){var x=this.vis.model;if(mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){return x.getDocVIVisualizationsMainPanel().k;}return y?this.vis.parent.k:x.getVizContentPanel().k;},M=function(x){var z=x.panelKey,y=this.currentPanelKey||Y.call(this,false);if(z===y){return ;}if(this.targetContainer.getTargetChildren().length===0){this.goToPage(x);return ;}this._tocNavWarn(x);},D=function(){var x=mstrApp.rootCtrl,AH=x.view,y=x.vizControlPanel,AB=x.toggleViewBar,AF=x.tocPanel,z=x.datasetsPanel,AG=x.layersPanel,AD=x.themesPanel,AC=this.vis.model,AI=[],AE,AA;AE=[AB,AG];if(s.safeCall("checkDossierThemeEnabled",mstrApp)()){AE=AE.concat(AD);}this.isCPEnabled=AH.isCPEnabled();this.isCPVisible=AA=AH.isCPVisible;k.forEach(AE,function(AJ){AI.push(AJ&&AJ.getOpenStatus());});if(z&&z.getOpenStatus()){AI.push(true);AE.push(z);}this.vizControlSelectedPanel=y.getSelectedPanel();this.panelsIsOpen=AI;this.panels=AE;if(this.tocEnabled){if(!AA){AH.setIsCPVisible(true,true);}if(mstrApp.isAuthoringDashboardNewLayout){this.isDatasetsPanelButtonVisible=b.walk("datasetsPanelButton.visible",AF);if(this.isDatasetsPanelButtonVisible){s.safeCall("datasetsPanelButton.set",AF)("visible",false);}}this.isTocNav=AF.visible;if(!mstrApp.supportFeature(e.PANEL_STACK)||b.walk("srcBox.parent.parent.defn.psType",this.targetSelector)===n.VISUALIZATION){AF.set("isMasked",false);this.setNavIcon(true,true);}}if(this.vizControlSelectedPanel!==AG){y.selectPanel(AG,true);}if(AC.attachEventListener){this.layoutSelectedSubscription=AC.attachEventListener("targetLayoutSelected",this.id,M.bind(this));}},W=function(){var AC=this.vis.model,AG=mstrApp.rootCtrl.view,AH=this.panelsIsOpen,x=mstrApp.rootCtrl,AE=x.tocPanel,AF=x.layersPanel,y=x.vizControlPanel,AB=this.isCPVisible,AA=this.vizControlSelectedPanel,AD=this.panels;var z=AH[AD.indexOf(AF)];if(z&&AA){y.selectPanel(AA,false);}k.forEach(AD,function(AI,AJ){AI.setOpenStatus(AH[AJ],true,undefined,false,true);});if(this.tocEnabled){if(mstrApp.isAuthoringDashboardNewLayout){if(this.isDatasetsPanelButtonVisible){s.safeCall("datasetsPanelButton.set",AE)("visible",true);}if(!this.isCPEnabled){AG.setIsCPVisible(false,true);}}else{if(!AB){AG.setIsCPVisible(AB,true);}}this.setNavIcon(false,true);}if(AC.detachEventListener){AC.detachEventListener(this.layoutSelectedSubscription);}},g=function(AH){var AI=AH.length,z=this.targetContainer.getTargetChildren(),AC=z.map(function(AJ){return AJ.key;}).sort(k.stringSorter),AE=AC.length,y,AA,AF,AD,AG,AB=[],x=this.vis.isPanelSelector();if(x){if(!AC.length){if(AH.length){this.targetContainer.addAndRemoveKeys([this.targetKeys[AH[0]]],true);}}else{if(!AH.length){this.targetContainer.addAndRemoveKeys([this.targetKeys[AC[0]]],false);}else{this.targetContainer.addAndRemoveKeys([this.targetKeys[AH[0]]],true);this.targetContainer.addAndRemoveKeys([this.targetKeys[AC[0]]],false);}}return ;}if(AI>AE){y=AE;AA=AH;AD=true;}else{y=AI;AA=AC;AD=false;}for(AF=0;AF<y;AF++){if(AH[AF]!==AC[AF]){if(this.targetKeys[AA[AF]]){this.targetContainer.addAndRemoveKeys([this.targetKeys[AA[AF]]],AD);return ;}}}for(AF;AF<AA.length;AF++){AG=this.targetKeys[AA[AF]];if(AG){AB.push(AG);}}if(AB.length){this.targetContainer.addAndRemoveKeys(AB,AD);}},H=function(y,AA){if(!mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){return ;}var z=y.getVizContentPanel().getTgtSelections(),x=Object.keys(AA).reduce(function(AB,AC){if(AA[AC].v){AB.push(AA[AC].k);}return AB;},[]);if(z){z.syncHighlight(x);}};function a(){var x=this.vis.model,z=this.vis.k,y;if(!this.targetSelector){this.targetSelector=this._createTargetSelector();}else{this.targetSelector.set("hostId",this.id);if(!mstrmojo.all[this.vis.id]){y=x.getLayoutKeyByUnitKey(z);if(y===x.getCurrentLayoutKey()){this.targetSelector.setSourceByKey(z);}}}this.showControlOverlay([this.targetSelector]);this.targetSelector.enterSelectMode();}function U(){var z,AA=this.sc,x=AA&&AA.isNavigation&&AA.navPage,y=this.options;if(this.vis.model.getVizContentPanel().children){if(y){y.closeDialog();}delete this.children;this.refresh();if(!x||x===this.currentPanelKey){z=b.valarray(this.targetKeys).filter(function(AB){return AB.v;}).map(function(AB){return AB.k;}).sort(k.stringSorter);if(z.length){g.call(this,z);}}}}function F(z){var x=z.boxContent,AH=x.isVisMap,AF=AH?x.getWidgetForTemplateSelection().node.defn:z.defn,AB=x.model,AC=(this.srcPanelKey===Y.call(this,false)),AG,AA,y=0,AE,AD;this.cgbs=AD=(AB&&AB.getSelectorControlMapInfo?AB.getSelectorControlMapInfo():[]);if(AD.length>0){AG=AD[0].sc;this.unitId=AD[0].did;this.singleUnit=true;}else{AE=AF.an;AG=x.selectorControl||(AB&&x.findSelectorControl&&x.findSelectorControl());this.singleUnit=false;AA=(AG&&AG.tks&&AG.tks.split(C))||[];y=k.some(AE,function(AI){if(k.includes(AA,AI.k)){return false;}else{var AK=AB&&AB.docModel,AJ=AK&&AK.getVisualizationByKey&&AK.getVisualizationByKey(AI.k),AM=s.safeCall("boxContent.getTemplateKey",AJ)();if(AM!==undefined){return !k.includes(AA,AM);}else{var AL=false;k.forEach(AA,function(AO){var AN=s.safeCall("model.getUnitDefinitions",z)(AO)[AO];if(AN&&AN.pnk===AI.k){AL=true;}});return !AL;}}})?1:0;}this.cachedFiltertypeIndex=(!!AE&&AE.length>0)&&!this.singleUnit&&!AG?1:y;if(o===null){o=AC&&(AG?AG.showall:true);}this.sc=AG;this.an=AE;}mstrmojo.vi.ui.InlineDialogTargetingBase=mstrmojo.declare(mstrmojo.vi.ui.InlineDialogBase,null,{scriptClass:"mstrmojo.vi.ui.InlineDialogTargetingBase",title:mstrmojo.desc(12136,"Filtering options"),targetKeys:null,vis:null,buttons:null,origTargetKeys:[],changes:{},sc:null,singleUnit:null,cgbs:null,unitId:null,an:null,panelsIsOpen:null,panels:null,vizControlSelectedPanel:null,isCPVisible:null,srcPanelKey:null,shouldNavigate:true,cachedFiltertypeIndex:0,numBoxesChecked:0,optionsStateForRefresh:{openOnRefresh:false,showAll:false},layoutSelectedSubscription:null,tocEnabled:true,selectFilters:false,fromContextual:false,onClickBack2Link:null,targetSelector:null,originalTargetDDICs:[],init:function t(y){if(this._super){this._super(y);}this.srcPanelKey=Y.call(this,true);var x=this.vis.model;if(x.attachEventListener){x.attachEventListener("buildBoxLayoutComplete",this.id,this.buildBoxLayoutComplete);}const z=b.walk("vis.boxContent.isBinaryData",this);if(z){this.tocEnabled=false;}},enableOptions:function G(x){if(this.options){this.csl.set("enabled",x);this.options.set("enabled",x);}},notifyApply:function L(y){var x=s.safeCall("getVizContentPanel",y)(),z;if(x){z=s.safeCall("getTgtSelections",x)();if(z){z.notify();}}},buildBoxLayoutComplete:function w(){var x=this.vis.model;if(this.tocEnabled&&!this.isTocNav){this.setNavIcon(true,true);}U.call(this);if(this.isOnTocChange){var z=x.getVizContentPanel().getTgtSelections(),y=b.valarray(this.targetKeys).filter(function(AA){return AA.v;}).map(function(AA){return AA.k;});if(z){k.forEach(y,function(AB){var AA=x.getUnitInstance(AB,1);if(AA&&AA.parent){AA.parent.toggleBoxSelection(true);}if(!z.toggleSelection(AB)){z.toggleSelection(AB);}});this.isOnTocChange=false;}}H(x,this.targetKeys);this.notifyApply(x);},getSrcPanelStackId:function N(){return this.vis.model.getOwningNodeByType(P.PANELSTACK,this.vis.k).id;},_createTargetSelector:function m(){return new mstrmojo.vi.ui.TargetSelector({alias:"targetSelector",orientation:"h",hostId:this.id,srcPanelStackId:this.getSrcPanelStackId(),srcId:this.vis.id});},_createOptionsButton:function J(){var AA=this,AC=AA.vis,y=AC.model,z=(this.srcPanelKey===(this.currentPanelKey||Y.call(this)));return{scriptClass:"mstrmojo.ui.PopupButton",alias:"options",cssDisplay:"inline-block",isHostedWithin:false,anchorSlot:"btnNode",markupString:'<div id="{@id}" class="mstrmojo-ui-OptionsButton {@cssClass}" style="{@cssText}"><div class="opts" mstrAttach:click></div></div>',markupSlots:{btnNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onRender:function(){if(this._super){this._super();}E.toggleClass(this.domNode,"disabled",!this.enabled);},onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},getPopupWidget:function AB(){return this.optionEditor;},getPopupConfig:function x(){var AE=mstrmojo.ui.PopupConfig.ENUM_CORNERS,AD=this.constructor.prototype.getPopupConfig.call(this);AD.alignment={host:AE.BOTTOM_RIGHT,popup:AE.TOP_RIGHT};return AD;},openDialog:function(){var AE=AA.optionsStateForRefresh,AD=this.optionEditor;if(AE.openOnRefresh){AE.openOnRefresh=false;AD.clrSel.set("checked",AE.showAll);AD.open();}},closeDialog:function(){var AE=AA.optionsStateForRefresh,AD=this.optionEditor;if(AD.visible){AE.openOnRefresh=true;AE.showAll=AD.clrSel.checked;AD.close();}},children:[{scriptClass:"mstrmojo.ui.PopupWidget",alias:"optionEditor",visible:false,onClose:function(){this.clrSel.set("checked",o);this.buttons.enableApply(false);},handleSelectionSubmit:function(AD){var AE=AA.changes;if(AD){if(AE.clearAll!==undefined){delete AE.clearAll;}else{AE.clearAll=AA.csl.checked;}o=AA.csl.checked;AA.notifyApply(y);}this.close();},children:[{scriptClass:"mstrmojo.CheckBox",cssClass:"mstrmojo-clear-check",cssDisplay:"inline-block",cssText:"white-space: nowrap;",alias:"clrSel",enabled:false,checked:o,label:mstrmojo.desc(11957,"Allow users to clear all selections"),onenabledChange:function(){if(!z){this.enabled=false;this.set("checked",false);}else{if(!AA.filterType.isFilter){this.set("checked",true);}else{this.set("checked",o);}}},oncheckedChange:function(){var AD=this.parent;if(AD){AD.buttons.enableApply(this.enabled&&this.checked!==o);}}},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"buttonBox",children:[l(mstrmojo.desc(8473,"Done"),function(){var AD=this.parent.parent;AD.handleSelectionSubmit(true);},true,{cssDisplay:"inline-block",enabled:false}),l(mstrmojo.desc(221,"Cancel"),function(){var AD=this.parent.parent;AD.handleSelectionSubmit(false);},false,{cssDisplay:"inline-block"})],enableApply:function(AD){this.children[0].set("enabled",AD);}}]}]};},_createBack2LinkButton:function(){var x=this;return{scriptClass:"mstrmojo.Widget",alias:"back2EditLink",cssDisplay:"inline-block",markupString:'<div class="back-to-edit-link" mstrAttach:click>'+mstrmojo.desc(16993,"Edit Contextual Link")+"</div>",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onclick:function(){if(x.onClickBack2Link){x.close();x.onClickBack2Link();}},};},validT:function B(y){if(y){var x=y.t;if(this.selectFilters){return Math.round(x/10)===52||x===P.SELECTOR||x===P.MOJOVISUALIZATION||x===P.SURVEYCONTAINER||x===P.PANELSTACK;}else{return Math.round(x/10)===52||x===P.MOJOVISUALIZATION||x===P.PANELSTACK;}}return false;},setNavIcon:function I(AA,AD){var AG=this.vis,AB=AG.model,AF=AB.getDocVIVisualizationsPanelStack().selector,AE=AB.controller.view,y=AE.layoutViewer.docLayout.selector,x=mstrApp.rootCtrl,AC=x.tocPanel,z=AG.k;if(this.isTocNav){AC.setTOCIcon(AA,AD);}else{if(AD||!AA){y.setLinkIcon(AA,AD?AB.getLayoutKeyByUnitKey(z):null);}AF.setLinkIcon(AA,AD&&AG.defn.pnk);}},getTargetKeys:function(){var x=[];b.forEach(this.targetKeys,function(z,y){if(z.v){x.push(y);}});x.sort(k.stringSorter);this.origTargetKeys=x;return this.origTargetKeys;},getOriginalTargetKeys:function i(){return this.an&&this.an.map(function(x){return x.k;})||[];},setTargets:function(AJ){var AB=this.targetKeys,y=this.vis,AA=y.model,AF=b.walk("rootCtrl.docCtrl.model",mstrApp),z=this.currentPanelKey||Y.call(this,false),AC=[],AI=this.getOriginalTargetKeys(),AH=this.changes,AD=this.singleUnit,AE=this.srcPanelKey,x=this.filterType;AI.push.apply(AI,this.originalTargetDDICs);AJ=AA.updateFilterTargetsForSdp(AJ);AJ=AA.updateFilterTargetsForXPnl(AJ,AI);k.forEach(AI,function(AK){if(!AB[AK]){AB[AK]={c:false,v:true};}});k.forEach(AJ,function(AK){if(AB[AK]){AC.push(AK);}});b.forEach(AB,function(AN,AM){if(k.some(AJ,function(AO){return AO===AM;})){if(!AN.v){AN.v=true;AN.c=true;}}else{if(AN.v){AN.v=false;AN.c=true;}}var AL=s.safeCall("getVisUnitByKeyFromMojoAll",AF)(AM);if(AL){AN.fos=!AL.isHighlightInTargetSelectionMode;if(AL.defn&&AL.defn.scdp){var AK=AL.defn.scdp.split(",");k.forEach(AK,function(AO){var AP=AB[AO];if(!AP){return ;}AP.fos=!AL.isHighlightInTargetSelectionMode;});}}});AH.filterKeys=AC;AH.targetKeys=AB;AH.singleUnit=AD;if(AD){AH.unitId=this.unitId;}if(AE!==z){AH.isNav=true;AH.navPage=z;AH.srcKey=AE;}AH.sc=this.sc;AH.isFilter=x&&x.isFilter;AH.originalTargetKeysForDDIC=this.originalTargetDDICs;var AG=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?(AG.PAUSE|AG.SELECTOR_TARGETING):AG.SELECTOR_TARGETING);this._setTargetsFunc();},_setTargetsFunc:mstrmojo.emptyFn,isSelectionDirty:function R(AH){var AE=false,x=this.vis,z=this.targetKeys,AJ=AH.length,AD=this.origTargetKeys,AG=this.changes;AH.sort(k.stringSorter);g.call(this,AH);if(x.isAMSelector instanceof Function&&x.isAMSelector()){for(var AA=0;AA<AJ;AA++){if(!x.tmp_replaceRelation[AH[AA]]){return false;}}}if(AJ===AD.length){k.forEach(AH,function(AL,AK){if(AL!==AD[AK]){AE=true;return false;}});if(AE){return AE;}if(AJ>0){var y=b.walk("filterType.selectedIndex",this);if((y!==undefined)&&(y!==this.cachedFiltertypeIndex)){return true;}if(AG.isLayerChanged){return true;}if(AG.clearAll!==undefined){return true;}if(x.isAMSelector instanceof Function&&x.isAMSelector()){var AC=function(AK){return k.some(AK,function(AL){return x.tmp_replaceRelation[AL].id!==x.replaceRelation[AL].id;});};if(AC(AH)){return true;}}if(x instanceof mstrmojo.vi.ui.rw.VizBox){var AI=false;var AF=b.walk("rootCtrl.docCtrl.model",mstrApp);b.forEach(z,function(AN,AM){var AL=s.safeCall("getVisUnitByKeyFromMojoAll",AF)(AM);if(AL){var AK=!AL.isHighlightInTargetSelectionMode;if(AN.v&&AN.fos!==AK){AI=true;return false;}}});if(AI){return true;}}}return false;}else{if(AJ===0||AJ<AD.length){return true;}if(x.isAMSelector instanceof Function&&x.isAMSelector()){for(var AB=0;AB<AJ;AB++){if(!b.equals(x.tmp_replaceRelation[AH[AB]],x.replaceRelation[AH[AB]])){return true;}}return false;}else{return true;}}},updateClrSelForHighlightMode:function(){if(this.csl&&this.options){if(this.isAllTargetInHighlightMode){this.options.set("enabled",false);this.csl.set("enabled",false);this.csl.set("checked",true);}else{this.options.set("enabled",true);this.csl.set("enabled",true);}}},updateIsAllTargetInHighlightMode:function(){var x=this.vis&&this.vis.model;if(!x){return ;}var z=s.safeCall("getDocVIVisualizationsMainPanel",x)();if(!z){return ;}var y=s.safeCall("areAllTargetsHighlightMode",z)();if(this.isAllTargetInHighlightMode!==y){this.isAllTargetInHighlightMode=y;this.updateClrSelForHighlightMode();}},goToPage:function O(x){var y=this.vis.model,z=x.layoutKey,AA=x.panelKey;y.raiseEvent({name:"layoutSelected",panelKey:AA,layoutKey:z});},_tocNavWarn:mstrmojo.emptyFn,onTocPageChange:function(AA){var y,x;if(this._super){this._super(AA);}if(this.visible){if(this.srcPanelKey===this.currentPanelKey){y=this.vis.model.getVizContentPanel().children;if(y){x=k.find(y,"k",this.vis.k);if(x!==-1){this.vis=y[x];}}else{return ;}}this.setNavIcon();if(!this.isTocNav){this.setNavIcon(true,true);}this.isOnTocChange=true;U.call(this);var AE=this.vis,AC=AE.model,z=b.walk("targetSelector.srcBox",this);var AD;if(this.currentPanelKey){var AB=AC.getNodeDataByKey(this.currentPanelKey);if(AB&&AB.id&&mstrmojo.all[AB.id]){AD=mstrmojo.all[AB.id];}}else{AD=AC.getVizContentPanel();}if(AD&&z&&z instanceof mstrmojo.vi.ui.rw.VizBox){AD.addVisAsFilterHelper(z,!(this.srcPanelKey===this.currentPanelKey));if(this.srcPanelKey===this.currentPanelKey&&mstrApp.serverSupportCheck(e.SUPPORT_VIZ_TARGET_DDIC)){AD.addDDICCandidatePickerHelper(z);}}if(this.enabled){this.notifyApply(AC);}}},open:function d(){var x=this.vis;this.shouldNavigate=false;a.call(this);D.call(this);if(x.setSelectTargetsState){x.setSelectTargetsState(false);}},close:function q(){var y=this.vis;mstrApp.rootCtrl.view.closeInlineDialog();W.call(this);this.targetContainer.addAndRemoveKeys(this.targetContainer.getTargetChildren());var x=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?x.PAUSE:x.DEFAULT);o=null;if(y.setSelectTargetsState){y.setSelectTargetsState(true);}},cancel:function h(){var y=this.vis.model,AA=y.getLayoutKeyByUnitKey(this.vis.k),x=this.srcPanelKey,AB=y.getOwningWidgetByType&&y.getOwningWidgetByType(P.PANELSTACK,this.srcPanelKey,AA);var z=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?(z.PAUSE|z.SELECTOR_TARGETING):z.SELECTOR_TARGETING);y.raiseEvent({name:"layoutSelected",panelKey:x,panelStackKey:AB,layoutKey:AA});},onwidthChange:function(){if(this.editorNode){this.editorNode.style.width=this.width;}},updateViz:function K(x){this.vis=x;this.srcPanelKey=Y.call(this,true);this.targetSelector.set("srcId",this.vis.id);this.shouldNavigate=true;U.call(this);this.shouldNavigate=false;},toggleFields:function Z(){var y=this.filterType,x=this.cgbs;if(x.length!==0){this.forType.set("visible",true);}if(this.sc){this.enableOptions(true);}if(this.srcPanelKey===(this.currentPanelKey||Y.call(this))&&(b.keyarray(this.targetKeys).length>0||x.length!==0)){y.set("enabled",true);}else{y.set("enabled",false);y.set("selectedIndex",0);}},_createTruncatedList:function Q(){var z=this;return{scriptClass:"mstrmojo.vi.ui.TruncatedList",alias:"targetContainer",cssDisplay:"inline-block",items:[{alias:"defaultItem",cls:"tgtDefault",n:this.selectFilters?mstrmojo.desc(16167,"Click on elements to select targets"):mstrmojo.desc(15090,"Click on visualizations to select targets"),key:"-1"}],padding:12,overflowCls:"truncMore",cmCssClass:"mstrmojo-bar-overflow",cachedItems:[],preBuildRendering:function x(){if(mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){this.cachedItems=this.items;this.items=[];}},postBuildRendering:function y(){if(mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){this.items=this.cachedItems;}},setWidth:function AA(){var AE=this.parent,AC=this.id,AF,AG=this.padding,AD=parseInt(AE.width,10);if(!this.width&&S.position(AE.buttonNode).w){k.forEach(AE.children,function(AH){AF=AH.domNode;if(AF&&AH.id!==AC){AD-=Math.ceil(S.position(AF).w+(AH.scriptClass==="mstrmojo.ui.Pulldown"||AH.alias==="ctrlOverlay"?0:AG));}});if(S.isMac()&&(S.isSafari||mstrApp.isWorkstation)){AD-=AG;}this.width=AD+"px";}this.domNode.style.width=this.width;},getAdditionalProperties:function AB(AD,AC){if(AC===0&&this.items.length>2){AD.addCls("hide");}return AD;},updateFields:function(){var AD,AC=z.filterType&&z.filterType.isFilter;z.numBoxesChecked=this.items.length-1;AD=z.numBoxesChecked>0;z.forType.set("enabled",AD&&AC);z.enableOptions(AD&&!z.isAllTargetInHighlightMode);},getTargetChildren:function(){return this.items.slice(1);},addAndRemoveKeys:function(AG,AD){var AC,AH=false,AF=this.items;if(AD){AH=true;var AE={};AE[c.SHARED]="filter";AE[c.SEPARATE]="viz";AE[P.SURVEYCONTAINER]="survey";k.forEach(AG,function(AI){if(!AI.mp||AI.mp===AI.k){var AJ=AE[AI.ft]||AE[c.SHARED];AF.push({n:AI.t,cls:"tgtItem "+AJ,cssClass:"tgtItem "+AJ,key:AI.k});}});}else{k.forEach(AG,function(AI){AC=AI?k.find(AF,"key",AI.k||AI.key):-1;if(AC>-1){AH=true;AF.splice(AC,1);}});}if(AH){this.refresh();this.updateFields();z.setNavIcon(AF.length!==1);}}};},_addVis:function f(AI,y){var AN=this,AA=AN.vis,AK=AI.boxContent,z=AK.isVisMap,AJ=AN.cgbs||[],AM=this.getOriginalTargetKeys(),AO=s.safeCall("getTargetKeys",AA)()||[],AF,AD,AL,AE;if(AM.length){AF=AM.indexOf(AI.k)>-1;}else{if(AJ.length>0){if(AJ[0]&&AJ[0].sc&&AJ[0].sc.tks){AF=AJ[0].sc.tks.indexOf(AI.k)>-1;}}}AN.numBoxesChecked+=AF?1:0;if(AI!==AA&&AN.validT(AI.defn)){var AG=AI.defn.t===P.SELECTOR;if(!AG){AD=AK.getFilterTarget&&AK.getFilterTarget()||AK.getFilterType();AL=AK.model.getSelectorControlMapInfo&&AK.model.getSelectorControlMapInfo();}if(z){AE=AK.getAllLayerKeys(true);k.forEach(AE,function(AP){y[AP]={c:false,v:AF,ft:AD,cgbs:AL,t:AI.title,k:AP,mp:AI.k,fos:AO.indexOf(AP)>-1};});}else{var x=b.walk("boxContent.gridInfo.0.k",AI);var AH=!!(AO.indexOf(AI.k)!==-1||(x&&AO.indexOf(x)!==-1));y[AI.k]={c:false,v:AF,ft:AD,cgbs:AL,t:AI.title,k:AI.k,fos:AH};if(AI.defn.t===P.GRID){var AB=AI.model,AC=s.safeCall("getDDICCandidates",AB)(AI.k);k.forEach(AC,function(AP){if(AO.indexOf(AP)>-1&&AN.originalTargetDDICs.indexOf(AP)===-1){AN.originalTargetDDICs.push(AP);}var AQ=AF&&AO.indexOf(AP)>-1;y[AP]={v:AQ,k:AP};});}}}},_addChildren:function p(){var AP=this,AA=AP.vis,AC=AA.model,x=mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION),AI=x?mstrmojo.desc(25960,"data on selection in targets"):mstrmojo.desc(15032,"data on selection in"),AG={scriptClass:"mstrmojo.ui.Pulldown",cssClass:"",cssDisplay:"none",alias:"filterType",selectedIndex:AP.filterType?AP.filterType.selectedIndex:this.cachedFiltertypeIndex,isHostedWithin:true,isFilter:true,enabled:false,items:[{n:mstrmojo.desc(8689,"Filter"),v:true},{n:mstrmojo.desc(11953,"Highlight"),v:false}],onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);}},AD=AA.boxContent.isGlobalLegend,AK=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:AD?mstrmojo.desc(29523,"Select the target visualization(s) that will be controlled by the legend selector."):mstrmojo.desc(28865,"Use visualization <span>#</span> to filter/highlight data on selection in targets").replace("#",u.encodeHtmlString(AA.title)),visible:true},AG,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-type-label",cssDisplay:"none",text:AI,visible:false},AP._createTruncatedList(),{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"inline-block",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(this.cgbs[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(AQ){AP.changes.forAllData=AQ.v;},onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);}},AP._createOptionsButton()],AH=AC.getPanel(this.currentPanelKey,this.currentLayoutKey).children||[],AN,y={};if(mstrApp.supportFeature(e.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){AH=AC.getAllVisibleUnits();}for(AN=AH.length-1;AN>=0;AN--){AP._addVis(AH[AN],y);}var AM=AA.boxContent,z=AM&&AM.mapViewer&&AM.isVisMap;if(z){var AB=u.encodeHtmlString(AA.title),AJ="Use % of <span>#</span> to filter/highlight the following targets:",AF=mstrmojo.desc(28866,AJ),AL=AF.split("%")||[],AE,AO=k.map(AM.getGraphicLayerNameArr(),function(AQ){return{n:AQ.n,v:AQ.k};});if(AL.length!==2){AL=AJ.split("%");}AE=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:AL[0].replace("#",AB),visible:true},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"",cssDisplay:"inline-block",alias:"sourceLayer",selectedIndex:k.find(AO,"v",AM.getKeyForTemplateSelection()),isHostedWithin:true,enabled:true,items:AO,onitemSelected:function(AR){var AQ=AP.changes;AQ.layerKey=AR.v;AQ.isLayerChanged=AR.v!==AM.getKeyForTemplateSelection();AP.notifyApply(AC);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:AL[1].replace("#",AB),visible:true},AG];AK.splice(0,3);AK=AE.concat(AK);}this.addChildren(AK);this.targetKeys=y;this.csl=this.options.optionEditor.clrSel;},preBuildRendering:function A(){var AA=this,AB=AA.vis,x=AB.model,AC,z,y,AD;F.call(this,AB);AC=this.sc;z=this.an;if(this.shouldNavigate&&z&&z.length){y=x.getLayoutKeyByUnitKey(z[0].k);AD=AC&&AC.isNavigation&&AC.navPage;if(AD&&AD!==this.currentPanelKey&&y){this.shouldNavigate=false;x.raiseEvent({name:"layoutSelected",panelKey:AD,layoutKey:y});}}this._addChildren();this.addChildren([{scriptClass:"mstrmojo.Box",cssClass:"ctrlOverlay",alias:"ctrlOverlay",slot:"buttonNode"}]);this.toggleFields();this._super();},postBuildRendering:function X(){var x=this.targetContainer,y=this.sc;this.editorNode.style.width=this.width;this._super();this.changes={};if(o!==(y?y.showall:true)){this.changes.clearAll=o;this.notifyApply(this.vis.model);}a.call(this);if(x&&!x.width){x.setWidth();}if(this.options){this.options.openDialog();}},showControlOverlay:function j(z,y){var AA=this.ctrlOverlay,AC=AA.domNode;function AB(AE){var AD=AE.children;if(AD&&AD.length){AE.removeChildren();AD.forEach(function(AF){AF.destroy();});}}if(AC){var x=["ctrlOverlay","or-h"];if(y){x.push(y);}AC.className=x.join(" ");}AA.set("visible",true);AB(AA);AA.addChildren(z);E.addClass(this.domNode,"overlay");}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var L=mstrmojo.array,F=mstrmojo.dom,D=mstrmojo.string,P=mstrmojo.hash,K=mstrmojo.Enum_Keys,G=K.ENTER,H=K.SPACE,O=K.ESCAPE,W=K.TAB,E=K.DOWN_ARROW,R=K.UP_ARROW;function U(g){var j=!!g.list,i=j?g.list:g,h=this.parent;this.focusOnPopup=true;if(j){i.grabFocus(true);if(h.canTab){h.resetTabNav();}}else{i.focus();}}mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,enableAccessibility:true,editOnClick:false,optimizeForTouch:false,useFilteredListOnSelect:false,init:function Z(k){this._super(k);var g=this.getPopupList();g.renderOnScroll=this.renderOnScroll||g.renderOnScroll;g.renderBlockSize=this.renderBlockSize||g.renderBlockSize;var j=[];if((mstrApp.isWorkstation&&F.isMac())||F.isSafari){j=["clip-safari"];}mstrmojo.css.addWidgetCssClass(this,["mstrmojo-ui-SearchablePulldown"].concat(j));var i=g.constructor.prototype,h=g.getItemProps||i.getItemProps,l=g.getItemMarkup||i.getItemMarkup;g.getItemProps=function(q,n){var o=this._spft||"",t=q.n,p=t?t.toUpperCase().indexOf(o):-1,m=function(w,y){var u=[],x;L.forEach(w.split(";"),function(z){x=z.split(":");if(x.length===2&&(y||x[0].toLowerCase()!=="color")){u.push(z);}});return u.join(";");};if(p===-1){o="";}var s=h.call(this,q,n);if(this.selectedIndices[n]){s.style=m(s.style,this.isICS);}if(t){s.before=t.slice(0,p);s.input=t.substring(p,p+o.length);s.after=t.slice(p+o.length,t.length);if(!D.trim(t)){s.after+=D.decodeHtmlString("<br/>");}}return s;};g.getItemMarkup=function(o,m){var n=l.call(this,o,m);if(o.n&&o.v!=="u;"){return n.replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");}return n;};g.buildAriaLabel=this.buildItemAriaLabel;if(k&&k.getPulldownConfig){g.getPulldownConfig=k.getPulldownConfig;delete this.getPulldownConfig;g.adjustSize=function(){if(this.scrollNode&&this.scrollNodeMaxHeight){this.scrollNode.style.maxHeight=this.scrollNodeMaxHeight+"px";}};}this._originalFocusOnPopup=this.focusOnPopup;this.focusOnPopup=false;},postBuildRendering:function c(){if(this._super){this._super();}this.readInputModeForAndroid();},unrender:function b(g){delete this.previousInputMode;if(this._super){this._super(g);}},needOptimizeForAndroid:function N(){return F.isTouchOptimizationEnabled()&&this.optimizeForTouch;},toggleInputModeForAndroid:function I(g){if(!this.needOptimizeForAndroid()||!this.selectedNode){return ;}var h=this.previousInputMode||"";this.selectedNode.inputMode=g?h:"none";},readInputModeForAndroid:function Q(){if(this.needOptimizeForAndroid()&&this.selectedNode){this.previousInputMode=this.selectedNode.inputMode;}},onclick:function f(g){if(this._originalFocusOnPopup!==undefined){this.focusOnPopup=false;}if(this.isClickingAnchorSlot(g)){var h=parseInt(getComputedStyle(this.selectedNode).paddingRight),j=g.e.offsetX>=(this.selectedNode.offsetWidth-h),i=this.getPopupWidget().visible;this.toggleInputModeForAndroid(i);if(!i||(i&&j)){this._super(g);this.set("isEditing",!i);}else{if(!this.isEditing){this.set("isEditing",true);}}}},setDefaultListAndIndex:function(k,l){var j=this.getPopupList(),h=this.text,g=L.find(k,"n",h);if(g===-1&&!this.allowCustomText){var i=j.items[0]||k[0];g=L.find(k,"n",i.n);}j.set("items",k);if(l){this.set("selectedIndex",g);}},onPopupWidgetClosed:function B(g){this.set("isEditing",false);var h=this.getPopupList(),i=h._oldItems;delete h._oldItems;if(i){this.setDefaultListAndIndex(i,g&&g.pressingEnter);}},_set_selectedIndex:function C(i,g){if(this.allowCustomText&&g===-1){this.selectedIndex=-1;this.onitemSelected(null,g);}else{this.isSearching=false;this._super(i,g,!(this.docSelector||{}).shouldSkipInit);if(this.hasRendered){var h=this.selectedNode;this.text=h.innerText||h.textContent;}}return true;},stopEvt:function d(g){var h=g.e||g;g.preventDefault();h.stopPropagation();},onkeydown:function J(g){var n=this.parent,m=g.e||g,o=n.parent;if(n.handleTab&&n.handleTab(g)){return ;}this._super(g);var p=window.event||g.e,s=p.keyCode,h=this.getPopupWidget(),l=o&&o.parent,i=l&&l.navList||"",j=i&&L.indexOf(i,this.selectedNode),k=j+1,q=j-1;if(s===G&&h.visible){h.close({pressingEnter:true});}else{if(this._originalFocusOnPopup&&(s===E||s===R)){U.call(this,h);h.raiseEvent(g);}else{if(s===G){this.stopEvt(g);this.openPopup(h);U.call(this,h);}else{if(s===O&&o.grabFocus){this.stopEvt(g);this.loseFocus(true);o.grabFocus(true);}else{if(s===K.RIGHT_ARROW&&l&&i.length>2&&k<(i.length-1)&&j>=0){this.stopEvt(g);l.navList[k].grabFocus(true);l.navList[j].loseFocus(true);}else{if(s===K.LEFT_ARROW&&l&&i.length>2&&q>=0){this.stopEvt(g);l.navList[q].grabFocus(true);l.navList[j].loseFocus(true);}else{if(s===W&&l&&l.grabFocus&&j>=0){this.stopEvt(g);l.menuBtnInfo.btn.grabFocus(true);l.navList[j].loseFocus(true);m.stopPropagation();}else{m.stopPropagation();}}}}}}}},onkeyup:function Y(i){var g=window.event||i.e,j=g.keyCode,h=this.getPopupWidget();if(j===W||(!h.visible&&(j===G||(j===H&&!this.isEditing)))){this.stopEvt(i);return ;}this._super(i);if(j===O||j===G){this.stopEvt(i);if(h.visible){h.close();}if(j===O&&this.grabFocus){this.grabFocus(true);}}else{if(this.isEditing&&j!==E&&j!==R){this.processSearch();}}},processSearch:function S(){this.isSearching=true;this.hideTooltip();var g=[],i=this.getPopupList(),k=this.selectedNode.innerText,l=i._oldItems||i.items,h=k.toUpperCase(),j;h=h.replaceAll(String.fromCharCode(160)," ");h=h.replace(/<BR>/,"");if(h.length>0){L.forEach(l,function(m){j=m.n;if(j&&j.toUpperCase().indexOf(h)>-1){g.push(P.clone(m));}},this);}else{g=l;}i._spft=h;if(this.customizeSearchResult){this.customizeSearchResult(g);}i.set("items",g);if(i.adjustCornersForPopupOverflow){i.adjustCornersForPopupOverflow();}delete i._spft;i._oldItems=l;i.set("visible",i.items.length!==0);},getNavList:function a(){var g=P.walk("parent.parent.menuBtnInfo.btn",this);return[this,g];},buildItemAriaLabel:mstrmojo.emptyFn,buildAriaLabel:function A(){var h=this.getPopupList(),g,i,j;g=this.text||"";i=g+(h.visible?"":", "+mstrmojo.desc(25534,"Collapsed"));j=D.encodeHtmlString(i,true);return j;},updateAriaLabel:function e(){var g=this.selectedNode,h=this.buildAriaLabel();if(g){if(g.getAttribute("aria-label")!==h){g.setAttribute("aria-label",h);}g.setAttribute("role","button");}},grabFocus:function M(){this.updateAriaLabel();if(this._super){this._super(true);}},postselectedIndexChange:function X(g){var l=g.value,i=g.valueWas,h=this.getPopupList().items,k,j=P.copy(g,{});if(this.useFilteredListOnSelect&&(this.items[i]===undefined||h[l].v!==this.items[i].v)&&h!==this.items){k=L.find(this.items,"v",h[l].v);j.value=k;}if(this.updateSelectedIndex&&l!==this.selectedIndex){j.value=this.selectedIndex;this.updateSelectedIndex=false;}this._super(j);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.util.ui.ColorPicker","mstrmojo.ui.editors.controls.ColorList","mstrmojo.ui.editors.controls.ColorWheel","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.TextBoxWithLabel","mstrmojo.ui.ButtonBar","mstrmojo.Button","mstrmojo.css","mstrmojo.util.color","mstrmojo.func");mstrmojo.requiresDescs(16164);var S=1,c=2,U=mstrmojo,B=U.css,W=U.array,Y=mstrmojo.util.ui.ColorPicker,J=U.util.color,Q=Math.round,b=S,O=0,D=1,Z=2,e="txtColor",h="automatic",l="#ffffff",A="transparent",i=mstrmojo.func,K=mstrmojo.hash;var F=[{n:mstrmojo.desc(12071,"Color fill"),id:O},{n:mstrmojo.desc(12072,"No fill"),id:D},{n:mstrmojo.desc(12073,"Gradient"),id:Z}];function P(){return this.color!==h?this.color:this.autoPreviewColor;}function X(o){return J.getCSSColorString(o);}function d(q,p,o){return mstrmojo.Button.newWebButton(q,o,p,{slot:"buttonNode",cssDisplay:"inline-block"});}function n(p){var q={},o=P.call(this);if(p&&(typeof o==="string")){if(o!==A){o=X(o);}var s=o.toLocaleLowerCase();p.forEach(function(u,t){if(s===u.id.toLocaleLowerCase()){q[t]=true;}});}return q;}function R(o){return{scriptClass:"mstrmojo.ui.editors.controls.ColorList",items:o,selectedIndices:n.call(this,o),postselectionChange:function(p){var t=p.added;if(t){var s=this.parent,q=this.items[t[0]].id;s.set("color",q);s.colorChanged(q);}}};}function G(o){return"#"+o.replace("#","");}function E(){var o=this.txtColor1,s=this.txtColor2,p=this.color,q=false,t=this.colorStyle;switch(t.items[t.selectedIndex].id){case O:p=G(o.value);break;case D:p=A;break;case Z:p={or:this.gradientOrientation.getSelectedItems()[0].id,c1:G(o.value),c2:G(s.value)};q=true;break;}B.toggleClass(this.containerNode,"grad",q);this.set("color",p);}function M(o){this.set("activeColor",o);var p=this[o];W.forEach([1,2],function(s){var q=this[e+s];B.toggleClass(q.domNode,"on",q===p);},this);this.colorWheel.set("color",G(p.value));}function L(o,p,s,t){if(typeof s==="string"){if(s===A){s=l;}}else{if(!!s&&s.c1){s=s["c"+o];}else{s=l;}}s=X(s);var q=15;return{scriptClass:"mstrmojo.TextBoxWithLabel",alias:e+o,cssDisplay:"block",label:p,labelTitle:p.length>q?p:"",labelClass:p.length>q?"ellipsisStyle":"",autoCorrect:false,maxLength:6,size:6,value:s.replace("#",""),bindings:t,onfocus:function(){M.call(this.parent,this.alias);},onvalueChange:function(u){if(!/^[0-9a-fA-F]{0,6}$/.test(u.value)){this.value=u.valueWas;}else{if(this.value.length===6){var w=this.parent;w.colorWheel.set("color",G(this.value));E.call(w);}}}};}function H(){var q=P.call(this),u=function(){var z=this.parent.colorStyle.selectedIndex;return this.parent.colorStyle.items[z].id===Z;},t=function(){var z=this.parent.colorStyle.selectedIndex;return this.parent.colorStyle.items[z].id!==D;},y=(this.showNoFill&&q===A)?1:0,w=F.slice(0,this.showGradient?3:2),o=0,p=this.showGradient,x=!!q&&q.c1;if(!this.showNoFill){w.splice(1,1);}if(x){y=W.find(w,"id",Z);o=q.or?0:1;}this.addChildren([{scriptClass:"mstrmojo.ui.Pulldown",alias:"colorStyle",selectedIndex:y,items:w,visible:(w.length!=1||(x&&!p)),onRender:function s(){if(!p&&x){this.selectedNode.innerHTML='<div class="mstrmojo-ui-Pulldown-Gradient" style="color:#C0C0C0">'+mstrmojo.desc(16164,"Gradient (Not supported)")+"</div>";}},onitemSelected:function(){E.call(this.parent);}},{scriptClass:"mstrmojo.ui.ButtonBar",alias:"gradientOrientation",items:[{n:mstrmojo.desc(2066,"Horizontal"),id:1,css:"h"},{n:mstrmojo.desc(2069,"Vertical"),id:0,css:"v"}],selectedIndex:o,bindings:{visible:u},postselectionChange:function(z){if(z.added){E.call(this.parent);}}},{scriptClass:"mstrmojo.Button",cssClass:"simpleButton",text:mstrmojo.desc(11658,"Swap"),bindings:{visible:u},onclick:function(){var AB=this.parent,AA=AB.txtColor1,AC=AB.txtColor2,z=AA.value;AA.set("value",AC.value);AC.set("value",z);E.call(AB);}},L(1,mstrmojo.desc(12074,"Color HEX:"),q,{visible:t,label:function(){var z=this.parent.colorStyle.items[this.parent.colorStyle.selectedIndex].id;return z===Z?mstrmojo.desc(12075,"Color 1 HEX:"):mstrmojo.desc(12074,"Color HEX:");}}),L(2,mstrmojo.desc(12076,"Color 2 HEX:"),q,{visible:u}),{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",alias:"colorWheel",color:(!!q&&!!q.c1)?q.c1:(q||l),onColorPicked:function(z){var AA=this.parent;AA[AA.activeColor].set("value",z.replace("#",""));},bindings:{visible:t}},d(mstrmojo.desc(1442,"Ok"),true,function(){var AA=this.parent,z=AA.color;if(!z.c1){Y.addCustomColor(z);}AA.colorChanged(z);}),d(mstrmojo.desc(2140,"Cancel"),false,function(){this.parent.colorCanceled();})]);M.call(this,e+"1");}function g(q){var t=this.sampleNode,s=t.offsetWidth-t.clientWidth,p=t.clientWidth,u=t.clientHeight,x=Math.sqrt(p*p+u*u)-s,o=Math.atan2(u,p)*(-180)/Math.PI+2;t.style.backgroundColor="#FFFFFF";q.display="block";q.top=t.offsetTop+Q(u/2)+"px";q.left=t.offsetLeft+"px";q.width=Q(x)+"px";q[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+Q(o)+"deg)";}function m(){var q=P.call(this),p=this.sampleNode.style;if(q){if(q.c1){var s=B.buildGradient(q.or,q.c1,q.c2);p[B.convertCssToCamelCase(s.n)]=s.v;}else{p.background=q;if(this.showNoFill&&this.noFillNode&&this.enabled){var o=this.noFillNode.style;if(A===q){g.call(this,o);}else{o.display="none";}}}}p.backgroundOrigin="border-box";}mstrmojo.ui.editors.controls.AdvancedColorPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPicker",markupString:'<div id="{@id}" class="mstrmojo-ui-AdvColorPicker {@cssClass}" style="{@cssText}" mstrAttach:click><div class="acpToolbar"><div class="acpBtn acpSwatchBtn"></div><div class="acpBtn acpPaletteBtn"></div><div class="acpColor"></div><div class="slash"></div></div><div class="acpContent" ></div><div class="acpButtons" ></div></div>',markupSlots:{swatchBtnNode:function(){return this.domNode.firstChild.firstChild;},paletteBtnNode:function(){return this.domNode.firstChild.childNodes[1];},sampleNode:function(){return this.domNode.firstChild.childNodes[2];},noFillNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.nextSibling;},buttonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onpickerModeChange:function N(){b=this.pickerMode;this.renderContent();},oncolorChange:function f(){m.call(this);},onautoPreviewColorChange:function k(){m.call(this);}},color:"#000fff",showGradient:false,showNoFill:true,showAutomatic:false,autoPreviewColor:null,activeColor:e+"1",swatchBtnNode:null,paletteBtnNode:null,colorStyle:null,gradientOrientation:null,txtColor1:null,txtColor2:null,colorWheel:null,pickerMode:S,widget:null,init:function j(o){this._super(o);this.pickerMode=b;},renderContent:function I(){this.showPickerForCurrentMode();},showPickerForCurrentMode:function C(){var t=this;this.removeChildren();var u=b===S;if(u){var s=Y.getBasicColors();if(!this.showNoFill){s.shift();if(s[0]._renderIdx!==0){W.forEach(s,function(x,w){x._renderIdx=w;});}}if(this.showAutomatic&&this.color!==h){this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4531,"Automatic"),cssClass:"AutomaticOption",onclick:function p(){t.set("color",h);t.colorChanged(h);}}]);}var o;if(["mstrmojo.gm.VisGraphMatrix","mstrmojo.heatmap.vi.VisHeatMap"].includes(K.walk("scriptClass",this.widget))){o=i.safeCall("getVisPaletteColors",this.widget)();o=o?W.map(o,function(w){return{n:mstrmojo.color.decodeColor(w),id:mstrmojo.color.decodeColor(w)};}):undefined;}var q=(mstrApp&&mstrApp.getPreferredColors)?W.map(mstrApp.getPreferredColors(),function(w){return{n:w,id:w};}):[];this.addChildren([mstrmojo.hash.copy({alias:"basicColors"},R.call(t,s)),R.call(t,o||q),R.call(t,Y.getCustomColors())]);}else{H.call(this);}B.toggleClass(this.swatchBtnNode,"on",u);B.toggleClass(this.paletteBtnNode,"on",!u);this.buttonNode.style.display=u?"none":"block";},colorChanged:mstrmojo.emptyFn,colorCanceled:mstrmojo.emptyFn,onclick:function a(o){var p=o.getTarget(),q=this.pickerMode;if(p===this.swatchBtnNode){q=S;this.set("pickerMode",q);}else{if(p===this.paletteBtnNode){q=c;this.set("pickerMode",q);}}}});mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC=h;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.css","mstrmojo.dom");var C,E=mstrmojo.css,D=mstrmojo.dom;var K=mstrmojo.declare(mstrmojo.ui.PopupList,null,{getItemMarkup:function H(L){if(!C){C=this._super(L).replace(">{@en@n}<","><div>{@en@n}</div><");}return C;},getItemProps:function G(N,L){var M=this._super(N,L);M.addCls("bst"+L);if(L){M.title=N.n;M.n="";}else{M.tt="";}return M;}});mstrmojo.ui.editors.controls.LineStyleButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",itemValueField:"id",showNoneOption:true,showThickOption:true,disableThickDash:false,markupMethods:{onenabledChange:function F(){E.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function J(M){this._super(M);var L=["mstrmojo-ui-LineStyle"];if(!this.showThickOption){L.push("no-thick");}if(!this.showNoneOption){L.push("no-none");}E.addWidgetCssClass(this,L);},getListCfg:function I(){var L=this.items||[{n:mstrmojo.desc(2258,"None"),id:"none"},{n:mstrmojo.desc(2259,"Dashed"),id:"1pt dashed"},{n:mstrmojo.desc(2260,"Dotted"),id:"1pt dotted"},{n:mstrmojo.desc(2262,"Thin"),id:"1pt solid"},{n:mstrmojo.desc(2264,"Thick"),id:"2pt solid"},{n:mstrmojo.desc(27155,"Dashed Thick"),id:"2pt dashed"}];if(this.disableThickDash){L.pop();}return new K({selectionPolicy:"reselect",items:L});},postBuildRendering:function A(){this.borderStyleNode=this.previewNode.appendChild(document.createElement("div"));return this._super();},getSelectedValue:function(){return this.selectedValue;},updatePreview:function B(){var O=this.borderStyleNode,M=this.getSelectedValue().split(" "),L=this.selectedValue==="conflict";E.toggleClass(this.previewNode,"conflict",L);if(O&&!L){var N=O.style;if(M.length===1){N.borderTopStyle=M[0];if(M[0]==="none"){N.position="static";O.innerHTML=mstrmojo.desc(2258,"None");O.classList.add("ellipsis");}}else{N.borderTopWidth=M[0];N.borderTopStyle=M[1];N.position="";O.innerHTML="";}}else{if(L){D.emptyNode(O);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.css");var D=mstrmojo.css;var B;mstrmojo.vi.ui.toolbars.TitleToolbar=mstrmojo.declare(mstrmojo.vi.ui.toolbars.Toolbar,null,{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",init:function F(H){this._super(H);D.addWidgetCssClass(this,"mstrmojo-VITitleToolbar");},markupMethods:{onvisibleChange:function A(){var H=this.visible,I=this.domNode;D.toggleClass(I,"visible",H);if(!H){D.onTransitionEnd(I,function(){D.addClass(I,"hidden");});}else{D.removeClass(I,"hidden");}}},getItemMarkup:function E(H){if(!B){B=this._super(H).replace("{@en@n}",'<div class="icn"></div>');}return B;},ontoolbarCfgChange:function G(H){var I=H.value;if(I){if(I.showContextMenu){I.addMenuToolbarBtn("","mnu");}if(I.hasCloseButton){I.addToolbarBtn(I.closeButtonText,"cls",function(K,J){J.parent.close();});}}this._super(H);},onItemContextMenu:function C(I,H){this.closePopup();if(I.fn){I.fn(I,this,H);return true;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.VIComponentMap.TYPES","mstrmojo.vi.enums.EnumFeatures","mstrmojo.hash","mstrmojo.vi.models.EnumCopyMoveTypes");mstrmojo.requiresDescs(3397,6985,11671,11672,10461,11670,12137,13933,13937,13935,14810,16417,16418);var E=mstrmojo.vi.enums.EnumFeatures,D=mstrmojo.hash,B=mstrmojo.vi.models.EnumCopyMoveTypes;function A(I,K,N){var M=this.model,J=this,H=mstrApp.isWSStyling,G=[{n:mstrmojo.desc(11670,"Copy to"),toLayoutTitle:mstrmojo.desc(13933,"Copy to #"),toNewLayoutTitle:mstrmojo.desc(16418,"Copy to a New Chapter"),crossLayoutMessage:mstrmojo.desc(12137,"Copying will clear all filters from the new visualization. Do you want to continue?"),cls:"",hide:N&&N.hideCopy,fn:function L(O,Q,R,P){if(K===B.PANELSTACK){if(O.isIfw){M.copyInfoWindow(O,Q,R,P);}else{M.copyPanelStack(O,Q,R,P);}}else{if(K===B.VIS){M.copyVisualization(O,Q,R,P);}else{if(K===B.MIXED){M.copyMultiSelectFields(Q,R,P);}else{M.copyFieldBox(O,Q,R,P);}}}}},{n:mstrmojo.desc(10461,"Move to"),toLayoutTitle:mstrmojo.desc(13935,"Move to #"),toNewLayoutTitle:mstrmojo.desc(16417,"Move to a New Chapter"),crossLayoutMessage:mstrmojo.desc(13937,"Moving will clear all filters from the new visualization. Do you want to continue?"),cls:"",hide:N&&N.hideMove,fn:function L(O,R,S,Q){var P=M.getVizContentPanel();P.restoreAnyMaxedVizBox();if(K===B.PANELSTACK){if(O.isIfw){M.moveInfoWindow(O,R,S,Q);}else{M.movePanelStack(O,R,S,Q);}}else{if(K===B.VIS){M.moveVisualization(O,R,S,Q);}else{M.moveFieldBox(O,R,S,Q);}}}}],F=function F(Q,P,O){return function(){mstrmojo.warn(P,{confirmBtn:{fn:O}},{title:Q});};};G.forEach(function(O){if(O.hide){return ;}I.addPopupMenuItem(O.n,null,function(){var X=O.fn,Q=new mstrmojo.ui.menus.MenuConfig(),P=M.getCurrentLayoutKey(),R=J.getCopyMoveTargetPanelStack(),S=R.panels.filter(function(Y){return Y.k!==R.selectedKey;}),W=M.defn.layouts.filter(function(Y){return Y.k!==P;});S.forEach(function(Y){var Z=Y.k;Q.addMenuItem(Y.titleText,"",function(){X(J,R,Z,P);});});var U=H&&R.isVIRootPanelStack()?mstrmojo.desc(6985,"New Page"):mstrmojo.desc(11671,"New Panel");Q.addMenuItem(U,"",function(){X(J,R,null,P);});if(R===M.getDocVIVisualizationsPanelStack()){Q.addSeparator();W.forEach(function(Y){switch(K){case B.VIS:Q.addMenuItem(Y.title,"",F(O.toLayoutTitle.replace("#",Y.title),O.crossLayoutMessage,function(){X(J,R,null,Y.k);}));break;case B.PANELSTACK:case B.FIELD:Q.addMenuItem(Y.title,"",function(){X(J,R,null,Y.k);});break;case B.MIXED:Q.addMenuItem(Y.title,"",F(O.toLayoutTitle.replace("#",Y.title),O.crossLayoutMessage,function(){X(J,R,null,Y.k);}));break;}});switch(K){case B.VIS:Q.addMenuItem(H?mstrmojo.desc(14810,"New Chapter"):mstrmojo.desc(11672,"New Sheet"),"",F(O.toNewLayoutTitle,O.crossLayoutMessage,function(){X(J,R,null,null);}));break;case B.PANELSTACK:case B.FIELD:Q.addMenuItem(H?mstrmojo.desc(14810,"New Chapter"):mstrmojo.desc(11672,"New Sheet"),"",function(){X(J,R,null,null);});break;case B.MIXED:Q.addMenuItem(H?mstrmojo.desc(14810,"New Chapter"):mstrmojo.desc(11672,"New Sheet"),"",F(O.toNewLayoutTitle,O.crossLayoutMessage,function(){X(J,R,null,null);}));break;}}return Q;},O.cls);});}mstrmojo.vi.ui.rw._HasDupCopyMoveMenuItems=mstrmojo.provide("mstrmojo.vi.ui.rw._HasDupCopyMoveMenuItems",{_mixinName:"mstrmojo.vi.ui.rw._HasDupCopyMoveMenuItems",addDupCopyMoveMenuItems:function C(G,L,F,I){var H=this.model,K=this,J=K.getCopyMoveTargetPanelStack&&K.getCopyMoveTargetPanelStack();if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){if(!mstrApp.isLayoutModePreview()&&this.canShowDesignMenuItems()&&!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode&&!mstrApp.isVisBuilder){if(L){G.addSeparator();}if(!I){I={};}if(!I.hideDuplicate){G.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){var M=H&&H.getVizContentPanel();if(M){M.restoreAnyMaxedVizBox();}switch(F){case B.VIS:H.duplicateVisualization(K);break;case B.PANELSTACK:if(K.isIfw){H.duplicateInfoWindow(K);}else{H.duplicatePanelStack(K);}break;case B.FIELD:H.duplicateFieldBox(K);break;default:break;}});}if(!J||(!J.isSelectorPanel&&!J.isFormPanel)){if(F===B.PANELSTACK){if(this.canCopyMoveTo&&this.canCopyMoveTo()&&mstrApp.supportFeature(E.PANEL_STACK)&&mstrApp.supportFeature(E.PANEL_STACK_COPY_MOVE)){A.call(this,G,F);}}else{if(F!==B.VIS||!D.walk("boxContent.disableCopyMoveVisualization",this)){A.call(this,G,F,I);}}}}}return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.string","mstrmojo.ui.menus.MenuConfig");var B=mstrmojo.func,M=mstrmojo.array,E=mstrmojo.string,O=mstrmojo.desc(2177,"Close"),I="divider";function L(R){return function(U,S){S.openMenu(R,U);};}mstrmojo.ui.menus.ToolbarConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.ui.menus.ToolbarConfig",btns:null,hasCloseButton:false,closeButtonText:O,showContextMenu:true,addCloseButton:function G(R){this.hasCloseButton=true;if(R){this.closeButtonText=R;}},preShowMenu:mstrmojo.emptyFn,isSeparator:function J(R){const U=new RegExp("(^|\\s)"+E.regEscape(I)+"($|\\s)");const S=(R||"").trim();if(U.test(S)){return true;}return this._super(S);},getButtons:function F(){if(!this.whitelist){return this.btns;}const U=this;const S=M.filter(this.btns,function(Z,X,W){if(!U.isSeparator(Z.cls)){return true;}const Y=W[X-1];if(!Y){return false;}return !U.isSeparator(Y.cls);});const R=S[S.length-1];if(R&&this.isSeparator(R.cls)){S.pop();}return S;},addToolbarBtn:function N(a,U,Y,S,W,Z,R){var X={n:a,cls:U,fn:Y,ctxt:S,ttp:Z};if(R){X.attrs=X.attrs||[];X.attrs.push('data-feature-id="'+R+'"');}if(!this.isInWhitelist(a,U)){return X;}if(isNaN(W)||W>=this.btns.length){this.btns.push(X);}else{this.btns.splice(W,0,X);}return X;},addDisabledToolbarBtn:function N(X,U,S,R){var W=this.addToolbarBtn(X,(U||"")+" disabled",mstrmojo.emptyFn,S,undefined,undefined,R);W.dsbld=true;},addToolbarPickerBtn:function A(a,U,Y,Z,S,W,R){var X={n:a,cls:U,fn:Y,ctxt:S,tp:"pb",menufn:L(Z||this)};if(R){X.attrs=X.attrs||[];X.attrs.push('data-feature-id="'+R+'"');}if(!this.isInWhitelist(a,U)){return ;}if(isNaN(W)||W>=this.btns.length){this.btns.push(X);}else{this.btns.splice(W,0,X);}},addMenuToolbarBtn:function K(Y,S,X,U,W,R){if(!X&&!this.hasMenuItems()){return ;}this.addToolbarBtn(Y,S,B.composite([this.preShowMenu,L(X||this),(W||mstrmojo.emptyFn)]),null,U,undefined,R);},addToggleToolbarButton:function D(Y,a,R,W,b,S,U,X){var Z=this.getToggleItemStates(Y,a,R,W,S,U);this.addDualStateItem(b,Z[0],Z[1],true,X);},addDualStateItem:function Q(U,S,W,X,R){this["add"+(X?"ToolbarBtn":"MenuItem")](S.n,S.cls,this.getDualStateHandler(U,S,W),S.ctxt,undefined,S.ttp,R);},getDualStateHandler:function C(S,R,U){var W=this._super(S,R,U);return function(X,Y){W.call(this,X,Y);if(X.cls.indexOf("toggleManualMode")===-1){Y.refresh();}};},addToolbarDivider:function P(){this.addToolbarBtn("",I,mstrmojo.emptyFn);},clear:function H(){this.btns=[];this.hasCloseButton=false;this.closeButtonText=O;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.ScrollableContainer","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.Button");var H=mstrmojo.Button.newWebButton,E=mstrmojo.hash,L=mstrmojo.css,J=mstrmojo.dom;var B="grouping",C="highlight",I="disabled";function F(O,Q){J.preventDefault(window,O);J.stopPropogation(window,O);if(this.groupingOverlay.domNode.className.indexOf(C)===-1&&this.domNode.className.indexOf("selected")===-1){return ;}Q=E.copy(Q,{supportsScroll:true,isHostedWithin:false,maxHeight:J.getMaxScrollHeight()});var P=this.parent.getGroupContextMenuConfig(new mstrmojo.ui.menus.MenuConfig(Q),this.k);if(P.hasMenuItems()){this.openPopup(P.newInstance());}}mstrmojo.vi.ui._CanGroup=mstrmojo.provide("mstrmojo.vi.ui._CanGroup",{_mixinName:"mstrmojo.vi.ui._CanGroup",startGrouping:function G(O){L.addClass(this.domNode,B);var Q=this.groupingOverlay;if(!Q){var P=this,S=this.id;this.addChildren({scriptClass:"mstrmojo.ui.ScrollableContainer",cssClass:"groupingOverlay",alias:"groupingOverlay",cssDisplay:"",slot:"domNode",children:[H(mstrmojo.desc(1911,"Group"),function(U){U.cancel();P.groupSelection();},true,{cssClass:"btnGroup",cssDisplay:""}),H("",function(U){var W=mstrmojo.ui.PopupConfig.prototype.ENUM_CORNERS;F.call(mstrmojo.all[S],U.e,{hostId:S,hostElement:this.domNode,alignment:{host:W.BOTTOM_LEFT,popup:W.TOP_LEFT}});},false,{cssClass:"btnMenu",cssDisplay:""})]});this.groupingOverlay.render();var R=this.groupingOverlay.domNode;J.attachEvent(R,"contextmenu",function(U){F.call(P,U,{position:J.getMousePosition(U,window)});});J.attachEvent(R,"click",function(U){var W=U.target;if(W.className.indexOf("mstrmojo-scrollbar")!==-1){J.stopPropogation(window,U);}});}this.setGroupingStatus(O?"":I);this._menuBtnInfo=this.menuBtnInfo;this.menuBtnInfo=null;this._originalContextMenu=this.shouldShowCustomizeContextMenu;this.shouldShowCustomizeContextMenu=function(){return false;};},setGroupingStatus:function K(O){var Q=this,P=[I,C];P.forEach(function(R){L.toggleClass(Q.groupingOverlay.domNode,R,O===R);});},endGrouping:function N(){L.removeClass(this.domNode,B);this.setGroupingStatus("");this.menuBtnInfo=this._menuBtnInfo;delete this._menuBtnInfo;this.shouldShowCustomizeContextMenu=this._originalContextMenu;delete this._originalContextMenu;},initializeDrag:function A(){return this.domNode.className.indexOf(B)===-1;},groupSelection:function D(){this.parent.groupSelection();},widgetResized:function M(){if(this._super){this._super();}var O=this.groupingOverlay;if(O){this.groupingOverlay.updateScrollbars();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.enums.EnumDSSAccessRightFlags","mstrmojo.css");var d=mstrmojo.vi.enums.EnumDSSAccessRightFlags,B=mstrmojo.css,N=mstrmojo.dom,M="draggedTab",J="stopDragging",W=mstrmojo.vi.enums.EnumFeatures,o=1,L=2,t=4,G=8,n=16;function p(u){return function(){B.toggleClass(this.tabStripMenuNode,"active",u);};}function k(AH){var AB=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:N.getMaxScrollHeight()}),u=this.getMenuActions(),AE=this.index,x=this.id,y=this.total,AC=this.parent,w=function(){var AI=AC&&AC.getTabs();return AI&&AI.length>AE?AI[AE]:mstrmojo.all[x];};if((u&n)>0){this.addNewTabMenuItem(AB);}if((u&t)>0){var AD=mstrmojo.desc(3397,"Duplicate"),AG=this.parent.scriptClass;if(AG.indexOf("LayoutTabStrip")>=0){AD=mstrmojo.desc(15022,"Duplicate Chapter");}else{if(AG.indexOf("PanelTabStrip")>=0){AD=!AC.usePanelTitle()?mstrmojo.desc(14923,"Duplicate Page"):mstrmojo.desc(6048,"Duplicate Panel");}}AB.addMenuItem(AD,"dup",function(){w().tabDuplicated();});}if(AG&&AG.indexOf("PanelTabStrip")>=0){AB.addMenuItem(!AC.usePanelTitle()?mstrmojo.desc(18367,"Format Page"):mstrmojo.desc(19745,"Format Panel"),"fmt",function(){w().tabFormat(true);});}if((u&L)>0){if(AE){AB.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){w().tabMoved(true);});}if(AE<y-1){AB.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){w().tabMoved(false);});}}AB.addSeparator();if((u&o)>0){AB.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){w().lbl.set("isEditing",true);});}if((u&G)>0){if(y>1){AB.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){w().tabDeleted();});}}if(mstrApp.supportFeature(W.SUPPORT_TOC_ACL)&&this.parent.scriptClass.indexOf("LayoutTabStrip")>=0){var AF=this.parent.docModel,AA=AF.acg&d.DssAccessRightWriteFlag;if(AA){AB.addMenuItem(mstrmojo.desc(28145,"Manage Access"),"",function(){w().tabManageAccess();});}}var z=this.getCustomMenu();if(z&&z.hasMenuItems()){AB.addSeparator();AB.absorbMenuItems(z);}AB.addPopupHandlers(this.id,p(true),p(false));this.showTabMenu(this.updateMenuCfg(AB),AH);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:contextmenu,click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function S(){return this.domNode.firstChild.firstChild;},menuBtnNode:function s(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function I(){this.lbl.set("text",this.title);},onisSelectedChange:function l(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function m(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,isCutoff:false,isHidden:false,isLeftMost:false,isRightMost:false,leftEdgeHiddenWidth:0,rightEdgeHiddenWidth:0,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function Y(w,u){if(w){this.parent.titleEdited(this.text,u);}}}],postBuildRendering:function Q(){var u=this.isValidMode();if(!u||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this.lbl.set("editOnDoubleClick",u);this._super();},oncontextmenu:function f(u){this.onclick(u);u.e.handledByTab=true;u.preventDefault();},onclick:function h(u){var x=this.domNode;if(B.hasClass(x,J)){B.removeClass(x,J);return ;}var w=function(){if(this.isValidMode()){this.postTabClicked(this,u);}};if(!this.isSelected){this.tabSelected({success:w.bind(this)});}else{w.call(this);if(this.tabSelectCurrent){this.tabSelectCurrent();}}u.e.handledByTab=true;},postTabClicked:function q(y,w){y=this.findSelectedTab(this)||y;var u=y.menuBtnNode,z=w.getTarget().className===u.className,x;if(z){x=N.position(u);}if(w.name==="contextmenu"||(z&&!(x.x||x.y))){x={x:w.e.clientX,y:w.e.clientY};}if(x){k.call(y,x);}},getMenuActions:function g(){return 0;},getCustomMenu:function a(){return null;},isDragValid:function R(){return this.parent.children.length>1&&!this.lbl.isEditing&&this.isValidMode();},createAvatar:function U(){var u=document.createElement("div");u.appendChild(this.domNode.cloneNode(true));u.style.margin="-5px 0 0 10px";return u;},addTabDnDStyle:function Z(){var u=this.lbl.domNode;if(u&&!this.isSelected){B.addClass(u,M);}},clearTabDnDStyle:function F(){var u=this.lbl.domNode;if(u&&!this.isSelected){B.removeClass(u,M);}},allowDrop:function D(u){var w=u.src.widget;return w&&w.parent===this.parent;},dropTab:function K(u){var y=u.src,x=y.data,w=y.widget;w.clearTabDnDStyle();this.parent.moveTab(x.idx,this.index,x.fromIdx);},ondragenter:function H(w){this._super(w);var y=w.src.data,x=w.src.widget,u=this.index;this.parent.moveTab(y.idx,u);y.idx=u;},ondragover:function c(x){var u=x.tgt.node,w=x.tgtData,y=w&&w.node,z=x.src.widget;if(!w||y!==u){x.tgtData={node:u};}if(z&&!z.isSelected){z.addTabDnDStyle();}},ondragleave:function P(u){this._super(u);var w=u.src.widget;if(w&&!w.isSelected){w.addTabDnDStyle();}},ondragend:function C(u){this._super(u);B.addClass(this.domNode,J);this.dropTab(u);},getDragData:function e(){var x=this.id,u=this.index;return{setAvatarClass:function w(y){var AB=mstrmojo.all[x],z=AB.avatar;if(z){var AA=[AB.avatarCssClass,"hasOwnAvatar",y];z.className=AA.join(" ");}},fromIdx:u,idx:u};},getDropAvatarIcon:function A(){return"pivot";},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},cleanUpAfterTarget:function i(u){this.clearTabDnDStyle();this._super(u);},onAppStateChange:function j(w){var y=this.lbl,x=this.isValidMode(),u=mstrApp.isLayoutPreview(w.value);y.set("isEditing",false);y.set("editOnDoubleClick",x);this.draggable=x&&!u;},onLayoutModeChange:function O(w){var x=this.isValidMode(),u=mstrApp.isLayoutPreview(w.value);this.draggable=x&&!u;},addNewTabMenuItem:function X(u){this.throwAbstractMethodError("addNewTabMenuItem");},findSelectedTab:mstrmojo.emptyFn,tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function b(u){return u;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:n,RENAME:o,MOVE:L,DUPLICATE:t,DELETE:G};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.ME.MetricDataService");mstrmojo.requiresDescs(3224);var c=["(",")","{","}","-","+","*","/","<",">","|","~",","],I={" ":true,"@":true},b=null,a=mstrmojo.dom,L=mstrmojo.css,J=mstrmojo.mstr.EnumDSSXMLTokenTypes,H=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,d=mstrmojo.ME.MetricDataService;function P(h){if(!b){b={};var g,f;for(g=0,f=c.length;g<f;g++){b[c[g]]=true;}}return b.hasOwnProperty(h);}function e(h){if(!h){return false;}var f=h.length,g,j;for(g=0;g<f;g++){j=h.charAt(g);if(j==="["){return false;}if(P(j)||I[j]){return true;}}return false;}function A(f){return e(f)?"["+f+"]":f;}function N(j){if(!j){return null;}var f=j.length,i=j.split("["),h=i.length,l,k;if(h===1){return j.split("@");}if(h===3){l=i[1];l="["+l.substring(0,l.length-1);k="["+i[2];}else{if(i[0].length===0){var m=i[1],g=m.indexOf("]");l="["+m.substring(0,g+1);if(g===m.length-1){return[l];}k=m.substring(g+2);}else{var m=i[0];l=m.substring(0,m.length-1);k="["+i[1];}}return[l,k];}var S={8:true,9:true,10:true};var C=function(g,f){return S[g]&&!/^\".*\"$/.test(f)?'"'+f+'"':f;};var F=function(g,f,h){var i=typeof h==="undefined"?true:S[h];if(f.length===2&&f==='""'){return f;}return g.tp===261&&f.length>=2&&i?(/^\s+$/.test(f.substr(1,f.length-2))?f:f.substr(1,f.length-2)):f;};var Z=function(f){var g=f,h=g.oi;if(h&&h.isParameter){g.did=h.prmid;g.tp=J.MetricRef;h.did=h.prmid;h.t=H.Metric;h.st=D.Metric;}};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}" mstrAttach:contextmenu></span>',active:false,markupMethods:{ondataChange:function(){var h=this.data,g=h.tp||this.dataType,i=this.isEmbeddedFilter(),f=i?"&nbsp;":mstrmojo.string.encodeHtmlString(String(h.v));if(h.v===","){this.domNode.innerHTML=f+"&nbsp;";}else{if(g===259&&h.v==="Desc"){this.domNode.innerHTML="&nbsp;"+f;}else{if(d.isLogicOrCompFunc({v:h.v.trim(),tp:g})){this.domNode.innerHTML="&nbsp;"+f+"&nbsp;";}else{this.domNode.innerHTML=f;}}}L.toggleClass(this.domNode,["mstr"],this.isMstrO());L.toggleClass(this.domNode,["nfn"],!this.isFunction());L.toggleClass(this.domNode,["invalid"],h.sta===-1);L.toggleClass(this.domNode,["embeddedFilter"],i);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},oncontextmenu:function X(f){this.closePopup();if(this.isEmbeddedFilter()){var h=new mstrmojo.ui.menus.MenuConfig({position:a.getMousePosition(f.e,f.hWin),isHostedWithin:false,alignWithAnchor:true});var g=this;h.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){var i=g.parent;if(i&&i.editEmbeddedFilterToken){i.editEmbeddedFilterToken(g);}});this.openPopup(h.newInstance());}},isMstrO:function Y(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t===H.Function);},isEmbeddedFilter:function K(){var h=this.data.oi,g=h&&h.t,f=h&&h.st;return this.isMstrO()&&g===H.Filter&&f===D.Filter&&h.isEmbedded;},brackets:A,length:function E(){return this.isEmbeddedFilter()?1:this.data.v.toString().length;},isDelimiter:function W(){return this.data.isDelimiter||(this.length()===1&&P(this.data.v));},split2Tokens:function M(i){var h=this.data,g=h&&h.v.toString(),j=g.substring(0,i),f=g.substring(i);return[{v:j,isNew:true},{v:f,isNew:true}];},mergeTo:function O(g){var i=this.data,h=i&&i.v.toString(),f=g.data.v.toString();return{v:h+f,isNew:true};},brackets:A,setItemInfo:function U(f){var g=this.data;g.v=this.brackets(f.n);g.oi=f;g.sta=1;g.isNew=true;this.set("data",g);this.paint();},spliceContent:function Q(l,j,g){var k=this.data,i=k&&k.v.toString(),m=i.substring(0,l);j=(j===null||j===undefined)?(i.length-l):j;var f=i.substring(l+j),h=m+(g||"")+f;k.v=h;k.isNew=true;k.sta=1;k.ift=(this.isAttributeToken()||k.at)&&(k.v.indexOf("@")>=0);if(k.ift){k.at=k.oi||k.at;}else{delete k.at;}if(k.tp){this.dataType=k.tp;}delete k.oi;delete k.exv;delete k.extp;delete k.tp;this.set("data",k);this.paint();},isAttributeToken:function G(){return this.data&&this.data.oi&&this.data.oi.t===H.Attribute;},setFormInfo:function R(g){var h=this.data,f=h.oi||h.at;h.v=this.brackets(f.n)+"@"+this.brackets(g.n);h.exv=g.did;h.extp=8;h.sta=1;h.isNew=true;h.oi=h.at;delete h.at;this.set("data",h);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=P;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.splitAttrAndAttrForm=N;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=F;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=S;mstrmojo.ME.MetricToken.getArgDelimiter=function(){return({".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",");};mstrmojo.ME.MetricToken.convertParamTokenToMetric=Z;})();(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.vi.ui.rw._SupportTabNav","mstrmojo.ui.menus.MenuEditor","mstrmojo.ui.menus.NumberFormatterMenuEditor","mstrmojo.dom");var F=mstrmojo.dom;function E(){F.attachEvent(this.domNode,"keydown",function(H){F.captureDomEvent(this.id,this.evtName,self,H);}.bind({id:this.id,evtName:"keydown"}));}mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function G(H){this._super(H);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function D(){var H;if(this._useNumberFormaterVersion){H=mstrmojo.ui.menus.NumberFormatterMenuEditor;}else{H=mstrmojo.ui.menus.MenuEditor;if(this.hasAccessibility){H=mstrmojo.DynamicClassFactory.newComponent(H,[mstrmojo._IsAccessibleMenu]);}else{if(this.canTab){H=mstrmojo.DynamicClassFactory.newComponent(H,[mstrmojo.vi.ui.rw._SupportTabNav]);}}}return new H({popupConfig:this});},onOpen:function B(){if(this._super){this._super();}if(this.popupConfig.hasAccessibility&&this.enableAccessibility){this.enableAccessibility();}if(this.canTab){E.call(this);if(this.domNode&&this.popupConfig.editorRole){this.domNode.setAttribute("role",this.popupConfig.editorRole);}if(this.popupConfig.navMode){this.navigateToFirstValidTarget();}}},destroy:function C(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.WidgetTree","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowserSelector");mstrmojo.TreeBrowserEnum={};var I=mstrmojo.TreeBrowserEnum;I.BRANCH_POLICY_TOGGLE="toggle";I.BRANCH_POLICY_SELECT="select";mstrmojo.TreeBrowser=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.TreeBrowser",cssClass:"mstrmojo-TreeBrowser",browserNodeClass:mstrmojo.TreeBrowserNode,blockCount:30,noCheckBox:false,selectionAcrossBranch:true,branchClickPolicy:I.BRANCH_POLICY_TOGGLE,contentRetrieved:false,listSelector:mstrmojo.TreeBrowserSelector,handleNodeClicked:function(J){},getContentThroughTaskCall:function H(K,J){},isBranch:function F(J){},item2textCss:function C(J){return{"-1":"failed","-2":"loading","-3":"next","-4":"prev"}[J.st]||"";},failItemCreaterFunc:function(){return{n:"Loading Failed!",did:"-1",tp:"-1",st:"-1"};},loadingItemCreaterFunc:function(){return{n:mstrmojo.desc(5674,"Loading..."),did:"-2",tp:"-2",st:"-2"};},nextItemCreaterFunc:function(J){return{n:mstrmojo.desc(4507,"Next ##  item(s)...").replace("##",J?Math.min(J,this.blockCount):this.blockCount),did:"-3",tp:"-3",st:"-3"};},prevItemCreaterFunc:function(){return{n:mstrmojo.desc(4508,"Previous ##  item(s)...").replace("##",this.blockCount),did:"-4",tp:"-4",st:"-4"};},updateTreeContent:function(K,M){K.contentRetrieved=true;var L=M[K.itemChildrenField]||[],J=K.tree||K,O=M.bc,N=M.sz,P=M.bb;if(O!==-1){if(P+O<=N){L.push(J.nextItemCreaterFunc(N-P-O+1));}if((P-O)>-1){L.unshift(J.prevItemCreaterFunc());}}K.blockBegin=P;J.initializing=true;K.clearSelect(false);K.set("items",L);K.setSelectedItems(J.getTotalSelections(),true);J.initializing=false;if(J.onNodeExpand){J.onNodeExpand(K);}},getContent:function(K,O){var L=(K===this),J=this,P=function(Q){if(L){mstrmojo.css.removeClass(J.domNode,["loading"]);}J.updateTreeContent(K,Q);},M=function(Q){K.contentRetrieved=true;K.set("items",[J.failItemCreaterFunc()]);},N={success:P,failure:M};if(L){mstrmojo.css.addClass(J.domNode,["loading"]);}this.getContentThroughTaskCall({isRoot:L,data:K.data,blockBegin:L?0:(O||K.blockBegin),blockCount:J.blockCount},N);},postBuildRendering:function A(){this._super();if(!this.contentRetrieved){var J=this;setTimeout(function(){J.getContent(J);},0);}},itemFunction:function G(N,K,L){var J=L.tree||L,M=new J.browserNodeClass({data:N,state:0,parent:L,tree:J,multiSelect:L.multiSelect,text:N[L.itemDisplayField],textCssClass:J.item2textCss(N),items:N[L.itemChildrenField],itemIdField:L.itemIdField,itemDisplayField:L.itemDisplayField,itemIconField:L.itemIconField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction,listSelector:L.listSelector});return M;},clearTreeSelect:function E(){if(!this.selectionAcrossBranch){this._super();}else{var L=this._selectionParentNode,J=L&&L.length,K;for(K=0;K<J;K++){L[K].clearSelect();}this._selectionParentNode=null;this._totalSelections=null;}},onnodechange:function D(U){if(this.initializing){return ;}if(!this.selectionAcrossBranch){this._super(U);}else{this._totalSelections=this._totalSelections||[];this._selectionParentNode=this._selectionParentNode||[];var R=this._totalSelections,J=this._selectionParentNode,S=U.added,P=U.removed,Q=[],L=[],K=U.src,N,M,O,W;J.push(K);for(N=0,O=P&&P.length;N<O;N++){L.push(K.items[P[N]]);}mstrmojo.array.removeItems(R,"did",L);for(M=0,W=S&&S.length;M<W;M++){Q.push(K.items[S[M]]);}this._totalSelections=R.concat(Q);}},getTotalSelections:function B(){if(this.selectionAcrossBranch){return this._totalSelections||[];}var J=this.selectionParentNode;return J&&J.getSelectedItems();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.mstr.EnumWebAPIErrorCodes","mstrmojo.vi.util.DIUtils","mstrmojo.util.PlatformHelper","mstrmojo.util.LibraryHelper","mstrmojo.mstr.EnumDSSXMLObjectSubTypes");var W=mstrmojo.hash,f=mstrmojo.func,A=mstrmojo.string,Q=mstrmojo.meta.TP,I="5CECE58CC1D549F890EB61C4DB2156A3",c="E0CCB9CF22104A489CBE78D974AFD19E",Z=mstrmojo.chart.model.enums.EnumDSSObjectType,P=mstrmojo.array,E=mstrmojo.dom,G=mstrmojo.vi.util.DIUtils,U=G.DIConstants,Y=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,F=mstrmojo.util.PlatformHelper,N=65536,h=function(q,s,k){var o=q.scrollableIncFetch,n=o?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",p={scriptClass:n,items:s.items,multiSelect:k};if(o){p.browseConfig={blockBegin:s.bb,blockCount:s.bc,totalSize:s.sz,folderLinksContextId:q.folderLinksContextId,rootFolderID:s.did,browsableTypes:q.browsableTypes,browsableViewMedias:q.browsableViewMedias,dataProvider:q.dataProvider,isImportFromCube:q.isImportFromCube};p.onwaitingChange=function(){if(q.booklet){q.booklet.set("waiting",this.waiting);}};}var l=mstrmojo.insert(p);l.render();return l;},B=function(n,o,k){var l=mstrmojo.ObjectBrowser.widgetHandler||h;return l(n,o,k);},L=function(l,k){if(k&&k.items&&l.browsableViewMedias){var m={};P.forEach(l.browsableViewMedias.split(","),function(n){m[parseInt(n,10)]=true;});k.items=P.filter(k.items,function(n){return(n.t!==Z.DssTypeDocumentDefinition)||m[n.dvm];});}},S={success:function(m){var n=this.ob;L(n,m);if(m&&m.items&&F.isLibrary()){m.items=mstrmojo.util.LibraryHelper.removeAIBotObjectsFromList(n,m.items);}if(m&&m.items&&F.isAIBotAdvancedMode()){m.items=mstrmojo.util.LibraryHelper.removeDDAFromList(m.items);}var l=m.items,o=n.pageCache[n.currentPage],k=o._w;o.items=l;k.set("items",l);this.ob=null;this.item=null;window.clearTimeout(n._btm);n.booklet.set("waiting",false);if(n.scrollableIncFetch&&k.scrollNode){k.initScroll();k.updateScrollbars();}},failure:function(k){window.alert(k.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},b=function(p,o,m){var n=m?-1:1,l=p.pageCache.length,q;for(q=p.currentPage+n;q<l&&q>=0;q+=n){var k=p.pageCache[q];if(k._k===o.k){return{steps:q-p.currentPage,cache:k};}}return null;},D=function(p,o,n,q){var s=p.currentPage+1,m=p.pageCache.length,k;for(k=s;k<m;k++){p.pageCache[k]._w.destroy();delete p.pageCache[k].items;}p.pageCache=p.pageCache.slice(0,s);q._w=n;q._k=o.k;p.pageCache[s]=q;p.cacheChange();},K=function(l){var k=mstrmojo.hash.walk("anc.items.0.items",l);this.set("canGoUp",!(!l.pf||!k));},M=function(o,n,p,m,l){if(!o.hasRendered){return ;}delete o._btm;var k;if(!m){k=B(o,p,o.multiSelect);k.attachEventListener("change",o.id,"navigate");if(o.useDblSelect||o.useBothSglDblSelect){k.attachEventListener("dblclick",o.id,"dblselect");}}else{k=p._w;}o.obList=k;o.booklet.turn(k,l>0);window.setTimeout(function(){o.onBrowsing=false;},300);if(!m){D(o,n,k,p);}o.set("currentFolder",p);o.set("currentPage",o.currentPage+l);o.updateUpButton(p);if(o.scrollableIncFetch&&k.scrollNode){k.initScroll();k.updateScrollbars();}},X=function(m,l,k){var n=b(m,l,false);n=n||b(m,l,true);if(!n){window.clearTimeout(m._btm);m._btm=window.setTimeout(function(){m.booklet.set("waiting",true);},300);k.ob=m;k.item=l;m.getDataProvider().fetchFolderContents(m,l,k);}else{M(m,l,n.cache,true,n.steps);}},C=function(l,m,n,k){X(l,{fid:l.pageCache[l.currentPage].did,blockBegin:m,searchPattern:n,recursive:k},S);},O={success:function(l){var m=this.ob;if(m){window.clearTimeout(m._btm);if(!l.items){l.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var k=function n(o){var s=o.length,p;for(p=0;p<s;p++){var q=o[p];if(q.did===I||q.did===c){q.n=(q.did===I)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(q.items){k(q.items);}}};if(l.did===I||l.did===c){l.n=(l.did===I)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(l.anc&&l.anc.items){k(l.anc.items);}}L(m,l);if(l&&l.items&&mstrApp&&mstrApp.isSingleTier){l.items=P.filter(l.items,function(o){return(o.st!==772);});}if(l&&l.items&&F.isLibrary()){l.items=mstrmojo.util.LibraryHelper.removeAIBotObjectsFromList(m,l.items);}if(m.isImportFromCube){l.items=P.filter(l.items,function(o){return(o.et!==U.DSSExType.DSSEXDISPARK);});l.items=mstrmojo.util.LibraryHelper.removeMosaicModelFromList(m,l.items);}if(m.projectId&&mstrApp&&m.projectId!==mstrApp.projectId){l.items=m.filterDossiersAndFoldersItems(l.items);}if(F.isAIBotAdvancedMode()){l.items=mstrmojo.util.LibraryHelper.removeDDAFromList(l.items);}if(m.setProjectsPulldownState&&((F.isLibrary()&&!W.walk("mstrApp.appSettings.disableProjectSelection",window))||F.isWorkstation())){m.setProjectsPulldownState(true);}if(l.did&&this.item.k!==l.did){this.item.k=l.did;}M(m,this.item,l,false,1);this.ob=null;this.item=null;}},failure:function(k){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(k);}else{if(k.getResponseHeader){mstrmojo.alert(k.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{var l=k.message;if(k.code==mstrmojo.mstr.EnumWebAPIErrorCodes.MDSVR_E_NO_ID){l=this.ob.parent.title+": "+l;}else{if(k.code==mstrmojo.mstr.EnumWebAPIErrorCodes.NO_FOLDER_READ_ACCESS){if(this.ob.parent.titleBar.projectsPulldown){this.ob.parent.titleBar.projectsPulldown._set_selectedIndex("project","0");}}}mstrmojo.alert(l);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},j=function(n){var m=n.pageCache.length,k;for(k=0;k<m;k++){n.pageCache[k]._w.destroy();}n.pageCache=[];n.currentPage=-1;n.cacheChange();},R=function(n,m,o){var k=n.onBrowseFolder;if(k){k[0][k[1]](m);}if(m&&parseInt(m.acg,10)===33){return ;}var l={};if(m){l.k=m.did;l.fid=m.did;}else{if(n.rootFolderID){l.k=n.rootFolderID;l.fid=n.rootFolderID;}else{if(n.rootFolderType){l.k=n.rootFolderType;l.fty=n.rootFolderType;}else{if(n.folderLinksContextId){l.k=n.folderLinksContextId;}}}}if(n.setProjectsPulldownState&&(F.isLibrary()||F.isWorkstation())){n.setProjectsPulldownState(false);}X(n,l,f.wrapMethods(o,W.copy(O)));},e=function(q,k,m){if(!m){return k;}var o=q.showCompletePath,t=k[0],p,l;while(t){var s;for(s=m.length-1;s>=0;s--){if(t.did===m[s].did){m.splice(s,1);t._isSc=true;}}l=t;t._open=true;t=t.items;t=t&&t[0];if(!t){l.lastLeaf=true;}}if(!o){t=k[0];while(t){if(t._isSc){k[0]=t;break;}t=t.items;t=t&&t[0];}}return k.concat(m);},d=function(l,k,m){l._naviInfo=e(l,k,m);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,projectId:null,onprojectIdChange:function(){this.browse();},getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:function(){return this.parent.parent.displaySaveLabel;}}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var k=this.opener.parent.parent,n=this.tree,m=k._naviInfo,l=this.parent.parent.parent.extraDDItems;if(n.items!==m){n._pup=this;this.ob=k;if(l){P.forEach(l,function(o){o.isExtra=true;});m=m.concat(l);}n.set("items",m);}if(k.getRecents&&!mstrApp.isSingleTier){k.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(o,k,l){var n=mstrmojo.WidgetTree.prototype.itemFunction(o,k,l);if(o.isExtra){if(o.cssClass){n.cssClass=o.cssClass;}n.onmousedown=o.onmousedown||mstrmojo.emptyFn;return n;}if(o._open){n.state=1;}n._ll=!!o.lastLeaf;n._pup=l._pup;n.onmousedown=function(q){var s=mstrmojo.dom.eventTarget(q.hWin,q.e),u=this._pup;if(s===this.domNode||s===this.textNode){if(!this._ll){R(u.ob,this.data);}u.close();}};n.markupMethods=W.copy(n.markupMethods);n.markupMethods.onstateChange=function(){var p=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[p]||"closed");this.itemsContainerNode.style.display=(p===1)?"block":"none";};n.useRichTooltip=true;var m=n.postBuildRendering;n.postBuildRendering=function(){if(m){m.call(n);}if(n.textNode.parentNode.clientWidth){n.textNode.style.width=(n.textNode.parentNode.clientWidth-20)+"px";}};n.premouseover=function(s){if(this.useRichTooltip){var q=this.textNode;if(q.clientWidth<q.scrollWidth){var p=E.position(q);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:p.y-2,left:p.x+p.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(s.hWin,s.e);}return true;};return n;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:function(){return this.parent.parent.canGoUp;},visible:function(){return this.parent.parent.upButtonVisible;}}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:function(){return this.parent.parent.closeable;}},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:function(){return this.parent.fishEyeVisible;}}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,placeholderText:null,bindings:{minSearchLength:function(){return this.parent.parent.minSearchLength;},quickSearch:function(){return this.parent.parent.quickSearch;}},serverRequest:function(l,m){var k=this.parent.parent;if(k.projectId&&mstrApp&&k.projectId!==mstrApp.projectId){l.projectId=k.projectId;l.requiresAppendProjectId=true;}k.getDataProvider().serverRequest(l,m);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function g(){if(this._super){this._super();}if(this.placeholderText){this.inputNode.setAttribute("placeholder",this.placeholderText);}else{this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));}},onUpdateSearchParams:function J(m){var l=this.parent.parent,k=l.sId;if(k){m.sessionState=k;}if(l.useOldSearch){m.quickSearch=0;m.nameWildcards=1;m.sortKey=6;}}}],bindings:{visible:function(){return this.parent.searchVisible;}}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:function(){return this.parent.scrollableIncFetch;}}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(l){var n=parseInt(this.height,10),k=this.np>1,m={target:this.domNode,props:{height:{start:(k?0:n),stop:(k?n:0),suffix:"px"}},onEnd:function(){if(k){this.target.style.overflow="visible";}}},o=new mstrmojo.fx.AnimateProp(m);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);o.play();},onifsChange:function(k){var l=this.np;mstrmojo.hash.copy(k.value,this);if(this.np>1){this.children=null;this.refresh();}if((l<=1&&this.np>1)||(l>1&&this.np<=1)||(l===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function i(){j(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}if(mstrApp&&mstrApp.isSAASLibrary){this.titleBar.title.set("enabled",false);this.titleBar.title.popupRef={};}var m=this.searchUpBar;if(m&&m.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var k=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){k.attachEventListener("ifsChange",this.id,function(n){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",n.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var l=this.obIncFetch;l.attachEventListener("fetch",this.id,function(n){l.cp=n.v;l.children=null;l.refresh();C(this,(n.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},filterDossiersAndFoldersItems:function(p){var q=[];for(var n=0;n<p.length;n++){var t=p[n],s=t.st===Y.Folder,l=t.st===Y.ReportWritingDocument,k=t.dvm===8192,o=l&&k,m=t.did==="empty";if(m||s||o){q.push(t);}}return q;},onSearchItemsChange:function(l){var m=l.value,k=this.pageCache[this.currentPage]._w;if(!m||m.length===0){m=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var n={};P.forEach(this.browsableViewMedias.split(","),function(o){n[parseInt(o,10)]=true;});m=P.filter(m,function(o){return(o.t!==Z.DssTypeDocumentDefinition)||n[o.dvm];});}}if(this.projectId&&mstrApp&&this.projectId!==mstrApp.projectId){m=this.filterDossiersAndFoldersItems(m);}k.set("items",m);},navigate:function(t){var k=t.src,u=k.selectedItem,n=this.multiSelect,q=n&&k.getSelectedItems(),s=this,l=t.added&&t.added.length,p=t.removed&&t.removed.length,o=n?q.length===1&&(!p||l):!!u;if(o&&u.did==="empty"){return ;}if(o&&parseInt(u[Q],10)===8){if(!this.onBrowsing){this.onBrowsing=true;R(this,u);}}else{if((u&&(!this.useDblSelect||this.useBothSglDblSelect))||q){this.select(n?q:u);}}},browseFolder:function(k,l){R(this,{did:k,n:l});},onFishEyeChange:function(k){this.goToPage(k.value);},goToPage:function(k){if(k<this.pageCache.length&&k!==this.currentPage){var m=k>this.currentPage,l=this.pageCache[k];this.set("currentPage",k);this.booklet.turn(l._w,m);this.set("currentFolder",l);K.call(this,l);}},oncurrentPageChange:function(k){if(this.fishEye){this.fishEye.setSelectedIndex(k.value);}var l=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(l.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",l.items||[]);this.obSearchBox.set("totalSize",l.sz);this.obSearchBox.set("rootID",l.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(l.sz/l.bc)+((l.sz%l.bc>0)?1:0),cp:Math.floor(l.bb/l.bc)+((l.bb%l.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(l,k){W.copy(l,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}j(this);R(this,undefined,k);},close:function(){var l=this.ctx||this,k=l.onCloseCB;if(k){k[0][k[1]]();}l.set("visible",false);},select:function(l){if(this.projectId){l.targetProjectId=this.projectId;}var k=this.onSelectCB;if(k){k[0][k[1]](l);}if(this.closeOnSelect){this.close();}},dblselect:function a(l){var m=l&&l.src.selectedItem;if(!m||(m&&m.did==="empty")||m[Q]===8){return ;}if(this.useBothSglDblSelect){var k=this.onDblSelectCB;if(k){k[0][k[1]](m);}if(this.closeOnSelect){this.close();}}else{this.select(m);}},goUp:function(){if(this.canGoUp){R(this,{did:this.currentFolder.pf});}},updateUpButton:function H(k){K.call(this,k);},oncurrentFolderChange:function(k){var l=k.value;if(this.projectId){l.items=this.filterDossiersAndFoldersItems(l.items);}d(this,l.anc.items,l.sc);},refreshContent:function(k){C(this,k);},onError:null,onheightChange:function(){var k=["titleBar","fishEye","searchUpBar","obIncFetch"],m=0,l;for(l in k){m+=parseInt(this[k[l]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-m+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.Editor","mstrmojo.ObjectBrowser");var F=mstrmojo.array;var C=[257,1024,3072,3078,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:F.hash(C),item:null,OKFn:null,init:function(N){var M=this,H=N.projects,J=N.projectId;this._super(N);this.addChildren([{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+C.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:!!this.searchVisible,scrollableIncFetch:true,bindings:{rootFolderID:function(){return this.parent.rootFolderID;},rootFolderType:function(){return this.parent.rootFolderType;},folderLinksContextId:function(){return this.parent.folderLinksContextId;},isImportFromCube:function(){return this.parent.isImportFromCube;}}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function O(){var Q=this.parent.parent;this.parent.parent.close({item:Q.item});var P=Q.OKFn;if(P){P(Q.item);}Q.set("item",null);},bindings:{enabled:function L(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancel"),onclick:function O(){var P=this.parent.parent;this.parent.parent.close();P.set("item",null);}}]}]);if(H){function G(){var P=F.find(H,"did",J);return P===-1?0:P;}this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-ui-Pulldown-Projects",alias:"projectsPulldown",items:H,enabled:false,selectedIndex:G(),useRichTooltip:true,tooltipOpenDelay:700,showTooltipAlways:true,updateTooltipConfig:function I(U){var Q=U.target,S=Q.scrollWidth>this.domNode.scrollWidth;if(S&&this.enabled){var R=8,P=mstrmojo.dom.position(Q);this.richTooltip={refNode:Q,left:P.w+R,content:Q.innerText,cssClass:"vi-regular V-center vi-tooltip-C only-for-contextual-link"};}else{this.richTooltip=null;}},onSelectedItemChange:function(P){M.ob.set("rootFolderID",mstrmojo.vi.ui.editors.ObjectPicker.DEFAULT_FOLDER_ID);M.ob.set("projectId",P.did);},}]}],0);this.ob.set("cssClass","ProjectsObjectBrowser");this.ob.set("setProjectsPulldownState",function K(P){M.titleBar.projectsPulldown.set("enabled",P);});}},preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function B(){if(this._super){this._super();}this.browse();},onOBSelect:function D(G){this.set("item",((this.supportedTypes[G.t]||this.supportedTypes[G.st])?G:null));},browse:function E(){this.ob.browse();}});mstrmojo.vi.ui.editors.ObjectPicker.DEFAULT_FOLDER_ID="98FE182C2A10427EACE0CD30B6768258";}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.StackContainer","mstrmojo.TabContainer","mstrmojo.TabStrip","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.vi.ui._IsValidURL","mstrmojo.vi.enums.EnumFeatures","mstrmojo.ui.editors.controls.PromptAndAnswerList","mstrmojo.ui.Checkbox","mstrmojo.vi.enums.EnumFeatures","mstrmojo.func","mstrmojo.util.PlatformHelper","mstrmojo.vi.enums.EnumDSSAccessRightFlags","mstrmojo.TreeBrowser","mstrmojo.TreeBrowserNode","mstrmojo.WidgetListMapper","mstrmojo.MenuItem","mstrmojo.ui.CheckList");var u=mstrmojo.array,AR=mstrmojo.Button,E=mstrmojo.css,X=mstrmojo.dom,b=mstrmojo.hash,AQ=mstrmojo.string,AB=AR.newWebButton,AV=mstrmojo.vi.enums.EnumFeatures,P=mstrmojo.mstr.EnumDSSXMLObjectTypes,AS=mstrmojo.util.PlatformHelper,x=mstrmojo.vi.enums.EnumDSSAccessRightFlags,L="http://",F="about:blank",l=mstrmojo.vi.enums.EnumFeatures,AP=mstrmojo.func,U={DISABLED:-1,URL:0,LINK_MSTR:1,LINK_PAGE:3,LINK_DOSSIER:4},y={CURRENT_TEMPLATE:0,DATASET:1},AJ=[{n:mstrmojo.desc(16999,"Select a page in the dashboard"),idx:0}],S=[],Q=null,M=null,o=function(AX,AW){var Aa={prms:1,asobs:1};if(!AX.tnm||!AX.navpagenm){Aa.tnm=1;Aa.navpagenm=1;}var AZ=new mstrmojo.XMLBuilder();AZ.addChild("hls");if(AW){AZ.addAttribute("onw",1);}AZ.addChild("hl");b.forEach(AX,function(Ac,Ab){if(!Aa[Ab]){AZ.addAttribute(Ab,Ac);}});var AY=AX.prms;if(AY&&AY.length>0){AZ.addChild("prms");u.forEach(AY,function(Ab){AZ.addChild("prm");b.forEach(Ab,function(Ad,Ac){if(Ac!=="nm"&&Ac!=="hsp"){AZ.addAttribute(Ac,Ad);}});AZ.closeElement();});AZ.closeElement();}AZ.closeElement();AZ.closeElement();return AZ.toString();},p=function(AY,AX,Aa){var AZ={idf:1,so:2,lt:U.LINK_MSTR,tid:AY.tid,ttp:AY.t,navpage:AY.navPage,np:AY.navPage,psf:AY.psf,pics:AY.pics,aopam:AY.aopam,prms:AY.prms,dtxt:Aa,ftgs:AY.ftgs};if(AY.targetProjectId){AZ.pid=AY.targetProjectId;AZ.pnm=AY.targetProjectName;AZ.tnm=AY.tnm;AZ.navpagenm=AY.n;AZ.vwm=AY.targetViewMode;}var AW={Hyperlinks:o(AZ,AX),ResolvedHyperlinks:""};return AW;},AC=function(Af,Ab,Ah,AW,AY){var An=function(Ao,Aq,Ap){if(Ap){return"<"+Ao+Aq+">"+Ap+"</"+Ao+">";}return"<"+Ao+Aq+"/>";},Ag=function(Ap,Ao){return(Ap!==undefined?" "+Ao+'="'+Ap+'"':"");},Ac=AW?1:undefined,Aa=2,AZ=(Af===U.URL?AQ.encodeXMLAttribute(Ab||""):undefined),Ae=0,Am=(Af===U.LINK_MSTR?Ah.did:undefined),Aj=(Af===U.LINK_MSTR?Ah.t:undefined),AX=(Af===U.LINK_MSTR?Ah.st:undefined),Ai=(Af===U.LINK_PAGE?Ah.navPage:undefined),Ak=AQ.encodeXMLAttribute(AY||""),Al=1;var Ad={};Ad.Hyperlinks=An("hls",Ag(Ac,"onw"),An("hl",Ag(Al,"idf")+Ag(Aa,"aopam")+Ag(Ak,"dtxt")+Ag(AZ,"url")+Ag(Af,"lt")+Ag(Aj,"ttp")+Ag(Am,"tid")+Ag(AX,"tstp")+Ag(Ai,"np")+Ag(Ae,"so")));Ad.ResolvedHyperlinks="";if(Af===U.URL){Ad.ResolvedHyperlinks=An("hls","",An("hl",Ag(0,"index")+Ag(Ab,"url")));}return Ad;},K=U.DISABLED,AG={},d,Z,AK=function AK(AX){if(AX.linkType!==undefined){return AX.linkType;}var AW=AX.node.data;if(AW.psf!==undefined||AW.pics!==undefined){if(AW.isAvailable===false){return U.LINK_MSTR;}if(!mstrApp.supportFeature(AV.TEXT_IMAGE_DOSSIER_LINKING)){return U.DISABLED;}return U.LINK_DOSSIER;}if(AW.navpage){return U.LINK_PAGE;}if(AW.tid){return U.LINK_MSTR;}if(AX.url){return U.URL;}return U.DISABLED;},AI=function(AW,AX){return u.ensureArray(AX).indexOf(AW)>-1;},AL=function AL(AW){return AI(AW,[U.LINK_DOSSIER,U.LINK_MSTR,U.URL]);},G=function G(AW){return AQ.decodeHtmlString(b.walk("defn.dl.items.0.n",AW)||AW.tooltip||"");},R=false,AU=false,N=function(AW,AY){var AX=function(AZ){return(AZ||[]).map(function(Aa){return{id:Aa.id,am:Aa.am};});};return b.equals(AX(AW),AX(AY));},s=function s(){var AY=this,Ae=mstrmojo.all[this.hostId],AW=b.walk("node.data",Ae),Ac=b.walk("tabgroup.tabstack",this),AZ=b.walk("selected.linkType",Ac),Ab=(K!==AZ),Ag=G(Ae)!==this.getCurrentTooltipText(),Af,Aa,AX=Ae.target==="_blank",Ad=function(){return AX!==AY.getCurrOpenInNewWinStatus();},Ah=false;if(this.hasRendered&&!R){switch(AZ){case U.DISABLED:Ah=Ab;break;case U.URL:Af=b.walk("urlSelector.linkText.text",Ac);Aa=Af&&Af.value;if(Af&&Af.textValid&&!AQ.isEmpty(Aa)&&Aa!==L){Ah=Ab||(Aa!==Ae.url)||Ad()||Ag;}break;case U.LINK_MSTR:if(AG.did){Ah=Ab||(!AW||AW.tid!==AG.did)||Ad()||Ag;}break;case U.LINK_PAGE:if(AG.navPage){Ah=Ab||!AW||AW.tid!==AG.tid||AW.navpage!==AG.navPage||Ag;}break;case U.LINK_DOSSIER:if(AG.navPage){Ah=Ab||!AW||AW.tid!==AG.tid||AW.navpage!==AG.navPage||AW.psf!==AG.psf||AW.pics!==AG.pics||AW.aopam!==AG.aopam||!N(AW.prms,AG.prms)||AW.ftgs!==AG.ftgs||Ag||Ad()||!!AW.isNameChanged;}break;default:break;}this.set("dirty",Ah);}},e=function(Ae,Af){if(Ae){var Ad=this,Al=Ad.docModel,Ag=mstrmojo.all[this.hostId],Ah=this.getSelectedTab(),AX=Ah.linkType,AW=AX===U.LINK_PAGE?false:this.getCurrOpenInNewWinStatus(),Aa=this.getCurrentTooltipText(),Ak=AQ.encodeHtmlString(Aa,true),Ai=AX===U.URL?b.walk("tabgroup.tabstack.urlSelector.linkText.text.value",this):undefined,AY,Ac,An,Ao,Am=AX===U.LINK_DOSSIER&&AG.tid,Ap=function(){var Ar=Ag?Ag.model.getSelectedViUnit():null,Aq=Ag?Ag.parent:null;if(Ag&&Ar&&Ar.k===Aq.k&&Aq.id){Ag.model.selectVIUnit(Ag.parent.id,true);}Aq.generateToolbar();},Ab=["tid","tnm","ttp","tstp","navpage","navpagenm","psf","pics","prms","aopam","pid","pnm","ftgs"],AZ=function(){return b.copyProps(Ab,Ag.node.data);},Aj=function(Aq){AU=true;Ag.defn.dl=Aq.dl;Ag.target=Aq.target;Ag.url=Aq.url;Ag.ourl=Aq.ourl;Ag.hlem=Aq.hlem;Ag.em=Aq.em;Ag.tooltip=Aq.tooltip;Ag.linkType=Aq.linkType;Ab.forEach(function(Ar){delete Ag.node.data[Ar];});b.copy(Aq.linkObjInfo,Ag.node.data);AU=false;Ap();};if(!AU){if(AX===U.DISABLED){AY={Hyperlinks:""};Ao=true;}else{if(Ai||AG||AW!==undefined){if(Am){AY=p(AG,AW,Ak);}else{AY=AC(AX,Ai,AG,AW,Ak);}}}Ac={dl:b.clone(Ag.defn.dl),target:Ag.target,url:Ag.url,ourl:Ag.ourl,hlem:Ag.hlem,em:Ag.em,tooltip:Ag.tooltip,linkType:Ag.linkType,linkObjInfo:AZ()};if(Aa!==undefined||Ao!==undefined){Ag.tooltip=Ao?"":Ak;if(Ag.defn.dl){Ag.parent.defn.dl.items[0].n=Ao?"":Ak;}}Al.editLink(Ag.parent,AY,{success:function(Aq){Ag.linkType=AX;Al.partialUpdate(Aq.data,Al.getTargetDefn(Ag.k),Aq.defn);if(AX===U.DISABLED){delete Ag.defn.dl;delete Ag.node.data.dl;delete Ag.target;delete Ag.url;}else{Ag.target=AW?"_blank":"";if(Ag&&Ag.defn){Ag.defn.target=AW?"_blank":"";}}An={dl:b.clone(Ag.defn.dl),target:Ag.target,url:Ag.url,ourl:Ag.ourl,hlem:Ag.hlem,em:Ag.em,tooltip:Ag.tooltip,linkType:AX,linkObjInfo:AZ()};Ap();},undo:function(){Aj(Ac);},redo:function(){Aj(An);}});}}d=null;Z=null;if(Af){return ;}this.close();},AN=function(Aa){var AZ=0,AY=[{n:mstrmojo.desc(15776,"Select a page in this dashboard"),idx:AZ++}],Ac=Aa.defn.layouts,AX,AW,Ab;u.forEach(Ac,function(Ad){AX=Ad.units;AY.push({n:Ad.title,idx:AZ++});AW=Aa.getVisPanelKeys(Ad.k,true);u.forEach(AW,function(Ae){Ab=AX[Ae];AY.push({n:Ab.ttl,navPage:Ae,idx:AZ++});});});return AY;},f=function f(AY,AX){var AW=b.walk("node.data.tnm",AY);switch(AX){case U.LINK_MSTR:AW=AG.n;break;case U.LINK_DOSSIER:AW=AG.tnm;break;default:}return AW;},q=function(AY,AX){var AW="";if(AX){AW+=AQ.apply('<span class="link-tab-icon {@iconCSSClass}"></span>',{iconCSSClass:AX});}AW+=AQ.apply('<span class="link-tab-text">{@text}</span>',{text:AY});return AW;},n=function(AX,AZ){var AY=mstrmojo.vi.ui.DatasetUnitMenuUtils,AW;if(AG.targetProjectId&&AZ.projects){AZ.parentFolderId=mstrmojo.vi.ui.editors.ObjectPicker.DEFAULT_FOLDER_ID;Z=AG.targetProjectId;}if(AZ.onPopupOpen){AZ.onPopupOpen();}AY.showObjectPicker(function(Ab){var Aa=b.walk("anc.items",Ab);if(Aa&&Aa.length>0){d=Aa[Aa.length-1].did;}if(Ab.targetProjectId){Z=Ab.targetProjectId;}AX(Ab);},AZ.noReport?[P.DocumentDefinition]:[P.DocumentDefinition,P.ReportDefinition],AZ.folderLinksContextId,AZ.browsableViewMedias,d||AZ.parentFolderId,true,true,AS.isLibraryOrWS()&&AZ.projects,Z?Z:Q)();AW=AY.getObjectPicker();if(!AW._editorCloseFunction){AW._editorCloseFunction=AW.onClose;AW.onClose=mstrmojo.func.composite([AW.onClose,function(){if(AZ.onPopupClose){AZ.onPopupClose();}}]);}},AA=function(AY,AX){var AZ={},AW=b.clone(AX)||[];u.forEach(AY,function(Aa){AZ[Aa.id]=Aa;});return AW.map(function(Aa){return b.copy(AZ[Aa.id],Aa);});},D=function(){var AW;for(AW=0;AW<S.length;AW+=1){if(S[AW].did===AG.targetProjectId){return S[AW].n;}}},c=function(AY,Aa){var AW=mstrmojo.desc(17005,"This Dashboard");var AX=[{n:AW,id:0}];if(mstrApp.supportFeature(AV.TEXT_IMAGE_DOSSIER_LINKING)){AX.push({n:mstrmojo.desc(18450,"Choose another dashboard..."),id:1});}return new mstrmojo.ui.Pulldown({alias:Aa.alias,slot:Aa.slot,cssClass:"link-dossier-selector",items:AX,selectedIndex:-1,useRichTooltip:true,tooltipContent:null,tooltipOpenDelay:700,updateTooltipConfig:function Ab(Ak){var Ad=Ak.target.className,Al="mstrmojo-ui-Pulldown-text",Ag="show-tooltip",Aj=Ad.includes(Al),Ah=Ad.includes(Ag),Ai=Aj||Ah;if(Ai){var Ae=this.domNode,Ac=8,Af=X.position(Ae);this.richTooltip={refNode:Ae,left:Af.w+Ac,content:this.tooltipContent,cssClass:"vi-regular V-center vi-tooltip-C only-for-contextual-link"};}else{this.richTooltip=null;}},setSelectedDossier:function(Ae,Ad){if(Ae){this.set("value",AW);}else{if(AG.targetProjectId){var Ac=" ("+AG.targetProjectName+")";this.set("value",Ad+'<span class="show-tooltip" style="color: #9A9A9A">'+Ac+"</span>");this.tooltipContent=Ad+Ac;}else{this.set("value",Ad);this.tooltipContent=Ad;}}},getPopupListConfig:function AZ(){var Ad=this;var Ac=this.addDisposable(mstrmojo.ui.Pulldown.prototype.getPopupListConfig());Ac.listHooks={select:function(Ae,Af){if(Af.id===1){n(function(Ag){Ad.selectedNode.innerText=Ag.n;AY(false,Ag);},b.copy(Aa,{noReport:!!mstrApp.isSingleTier,folderLinksContextId:30,browsableViewMedias:mstrApp.isSingleTier?"2048,8192":undefined,projects:S?S:undefined}));}else{Ad.selectedNode.innerText=AW;AY(true);}if(this.visible&&this.closeAfterSelection){this.close();}return true;}};Ac.getItemProps=function(Af,Ae){var Ag=mstrmojo._IsList.getItemProps.call(this,Af,Ae);return Ag;};Ac.getItemMarkup=function(Af,Ae){if(Ae===0){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';}return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><i class="file-icon"></i><span>{@en@n}</span></{@tag}>';};return Ac;}});},AD=function(AZ,AW,AY){var AX=function(){var Aa=this;n(function(Ab){Aa.parent.text.set("value",Ab.n);AW(Ab);},AY);};return new mstrmojo.Box({cssClass:"linkDoss",slot:AY.slot,alias:AY.alias,children:[{scriptClass:"mstrmojo.TextBox",alias:"text",cssClass:"rwselector",readOnly:true,hint:AY.placeholder,tooltip:AZ,value:AZ,onvalueChange:function(){this.set("tooltip",this.value);},onclick:AX},AR.newIconButton("","icon",AX),]});},g=function(AY,AX,Aa,AW,Ab){var Ac;if(typeof AY==="string"){Ac=u.filterOne(AX,function(Ad){return Ad.navPage===AY;})||{};}else{Ac={idx:AY};}return new mstrmojo.ui.Pulldown({alias:Ab.alias,slot:Ab.slot,cssClass:"linkPage "+(Ac.idx?"":"mstrmojo-empty"),items:AX,selectedIndex:Ac.idx||0,onSelectedItemChange:function(Ad){var Ae=!Ad.idx;AW(Ad,Ae);E.toggleClass(this.domNode,"mstrmojo-empty",Ae);},getPopupListConfig:function AZ(){var Ad=this.addDisposable(mstrmojo.ui.Pulldown.prototype.getPopupListConfig());Ad.listHooks={select:function(Af,Ag,Ae){var Ah=Ag.navPage;if(!Ah||Aa()===Ah){return true;}this.parent.set("selectedIndex",Ae);if(this.visible&&this.closeAfterSelection){this.close();}},unselect:function(){var Ae=this.selectedItem,Af=Ae&&Ae.navPage;if(!Af||Aa()===Af){return true;}}};Ad.getItemProps=function(Af,Ae){var Ag=mstrmojo._IsList.getItemProps.call(this,Af,Ae),Ah=Af.navPage;Ag.style=this.parent.itemCssText||"";if(Ae===0){Ag.addCls("hidden");}else{if(!Ah){Ag.addCls("chap");}else{if(Ah===Aa()){Ag.addCls("curr_pg");}}}return Ag;};Ad.getItemMarkup=function(Af){var Ag=Af.navPage,Ae='<span class="current-page">'+mstrmojo.desc(15777,"(current page)")+"</span>";if(!Ag){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';}return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><div></div>{@en@n}'+(Ag===Aa()?Ae:"")+"</{@tag}>";};return Ad;}});},AF=function(AW,AX,AY){return new mstrmojo.Box({alias:"buttons",cssClass:"buttonBox",children:[AB(mstrmojo.desc(15701,"Remove Link"),AW,false,{alias:"rmvBtn",cssDisplay:"inline-block",cssClass:"link-editor-rmv-btn"}),{scriptClass:"mstrmojo.Box",alias:"rtBtns",cssClass:"buttonBoxRt",cssDisplay:"inline-block",children:[AB(mstrmojo.desc(118,"Save"),AX,true,{alias:"saveBtn",cssDisplay:"inline-block",enabled:false}),AB(mstrmojo.desc(221,"Cancel"),AY,false,{alias:"cancelBtn",cssDisplay:"inline-block"})]}]});},I=function(AX,AW){var AY=u.filterOne(AW,function(AZ){return AZ.navPage===AX;})||{};return AY.idx;},AT=function(AY,AW,Ag,Af,Ah,Ac,Aa,Ae,AX){var Ab;if(!AY){return ;}if(AX&&AX.projects){Ab=AX.projects;}else{Ab=S;}var Ai=function(Al){var Aj=AJ.slice(),Ak=1;u.forEach(Al,function(Am){Aj.push({n:Am.cnm,navChapter:Am.cid,idx:Ak++});u.forEach(Am.pages,function(An){Aj.push({n:An.pnm,navPage:An.pid,idx:Ak++});});});return Aj;};var Ad={taskId:"getDossierTOCAndPrompts",rwb:Ag.bs,messageId:Ag.mid,dossierId:AY,objectType:AW};if(Ah){if(Ab.length&&!B(Ab)&&!AX.projects.length){t(Ae);return ;}if(!AS.isLibraryOrWS()){return ;}Ad.requiresAppendProjectId=true;Ad.projectId=Ah;Ad.sourceProjectId=Q||AX.defaultProjectId;if(!Ac&&Aa){var AZ={taskId:"getObjectInfo",objectIDs:AY,objectTypes:AW,projectId:AG.targetProjectId,requiresAppendProjectId:true};mstrApp.serverRequest(AZ,{success:function(Aj){Aa(Aj.objects[0].n);}});}}mstrApp.serverRequest(Ad,{success:function(Aj){Aj.pages=Ai(Aj.toc);delete Aj.toc;Af(Aj);}});},A=function(AW){X.center(AW.hostProxy,AW.domNode.clientWidth,AW.domNode.clientHeight);AW.domNode.style.left=0;AW.domNode.style.top=0;AW.domNode.style.right="auto";AW.domNode.style.bottom="auto";AW.hostProxy.style.top="100px";},C=function(AW){AW.filter.set("visible",false);AW.filter.checkbox.set("checked",false);if(M){AW.filterGroupLabel.set("visible",false);AW.icselction.set("visible",false);AW.icselction.checkbox.set("checked",false);}},B=function(AW){return u.find(AW,"did",AG.targetProjectId)!==-1;},t=function(AW){AW.getSelectedTab().set("linkType",U.DISABLED);e.call(AW,true,true);mstrmojo.error({longDesc:mstrmojo.desc(27151,"Target project is not available.")});},i=function(Ab){var Aa=this,Ac=Aa.tabgroup.tabstack.pageSelector,AX=Ac.pagePulldown,AZ=Ac.filter,AY=Ac.icselction,AW=Ac.promptAndAnswer;AX.text.set("items",Ab.pages);AX.text.set("selectedIndex",Ab.pageIndex);AZ.set("visible",true);AZ.checkbox.set("checked",Ab.psf);if(AY){AY.set("visible",true);AY.checkbox.set("checked",Ab.pics);}if(AG.targetProjectId&&!mstrApp.supportFeature(AV.CROSS_PROJECT_CONTEXTUAL_LINKING)){C(Ac);}else{if(!AG.targetProjectId){AW.set("visible",Ab.prms.length>0);AW.set("prompts",Ab.prms);AW.set("aopam",Ab.aopam);}}s.call(Aa);},AH=function AH(){var Ae=this,Aj=mstrmojo.all[this.hostId],AZ=Aj.node.data,AY=Aj.node.data.navpage,Ag=AN(this.docModel),Ad=false,Ai=b.walk("tabgroup.tabstack",this),AX=Ai.urlSelector,Af=Ai.pageSelector,Ak=G(Aj),Ab,AW=AS.isLibrary();K=AK(Aj);if(!AS.isWSLocalMode()&&M&&S.length===0){mstrApp.serverRequest({taskId:"getProjects"},{success:function(Al){var Ao=Al.servers[0].projects;for(var An=0;An<Ao.length;An+=1){var Am=Ao[An].acg;if(Am&&!(Am&x.DssAccessRightUseFlag)){continue;}S[An]={n:(AW?Ao[An].alias:"")||Ao[An].name,did:Ao[An].id};if(Ao[An].id===Q){S.unshift(S[An]);S.splice(An+1,1);}}if((K===U.LINK_PAGE||K===U.LINK_DOSSIER)&&Ad){Ah();}}});}if(K===U.LINK_MSTR){if(mstrApp.isSingleTier){AG={};Ak="";K=U.DISABLED;}else{AG={n:AZ.tnm,did:AZ.tid,t:AZ.ttp,st:AZ.tstp};}}else{if(K===U.LINK_PAGE||K===U.LINK_DOSSIER){AG={};Ad=Aj.hasDossierLinking();if(Ad){AG={tid:AZ.tid,t:AZ.ttp,tstp:AZ.tstp,navPage:AY,n:AZ.navpagenm,idx:0,psf:AZ.psf,pics:AE(Aj,Ae.supportPfizer,AZ.pics),prms:AZ.prms,aopam:AZ.aopam,tnm:AZ.updatedDossierName||AZ.tnm,targetProjectId:AZ.pid,targetProjectName:AZ.pnm,targetViewMode:AZ.tvmd,ftgs:AZ.ftgs};function Ah(){AT(AZ.tid,AZ.ttp,Ae.docModel,function(Am){var Al=I(AY,Am.pages)||0;AG.prms=AA(AG.prms,Am.prms);AG.idx=Al;Ae.resetFilterMultiTargetsSelectorBox(Am.pages);i.call(Ae,{pages:Am.pages,pageIndex:Al,psf:!!AG.psf,pics:!!AG.pics,aopam:AG.aopam,prms:AG.prms});},AG.targetProjectId,AZ.updatedDossierName,function(Ao){var Al=D(),Am=AZ.tnm!==Ao,Ap=AZ.pnm!==Al,An=Am||Ap;AZ.updatedDossierName=Ao;if(An){AZ.pnm=Al;AZ.isNameChanged=true;AH.call(Ae);}},Ae);}if(AS.isWSLocalMode()||!M||S.length>0){Ah();}}else{if(AZ.tid===undefined){AG={navPage:AY,n:AZ.navpagenm,idx:I(AY,Ag)};if(AG.idx===undefined){AG={};}}}}else{AG={};if(K===U.DISABLED){Ak="";}}}var Aa=Ai.selected;switch(K){case U.DISABLED:break;case U.URL:Aa=AX;break;case U.LINK_MSTR:case U.LINK_PAGE:case U.LINK_DOSSIER:Aa=Af;break;default:}Ai.set("selected",Aa);u.forEach((Ai&&Ai.children)||[],function(Al){if(Al){if(Al===Ai.selected){Al.set("tooltip",Ak);Al.set("target",Aj.target);Al.set("linkType",K===U.DISABLED?Aa.defaultLinkType:K);}else{Al.set("tooltip","");Al.set("target","_blank");Al.set("linkType",Al.defaultLinkType);}}});if(AX){AX.linkText.text.set("value",Aj.url?(Aj.ourl||Aj.url):"");var Ac=b.walk("openNewWin.check",AX);if(Ac){Ac.set("checked",AL(K)?AX.target==="_blank":true);}}if(Af){Af.dossierPulldown.text.set("enabled",!AS.isWSLocalMode());Af.pagePulldown.text.set("items",Ad?AJ:AN(Ae.docModel));this.resetFilterMultiTargetsSelectorBox();Af.pagePulldown.text.set("selectedIndex",AG.idx||0);Ab=b.walk("openNewWin.check",Af);if(Ab){Ab.set("checked",AL(K)?Af.target==="_blank":true);}if(AG.targetProjectId&&!M){this.buttons.rtBtns.saveBtn.set("enabled",false);if(!mstrApp.supportFeature(AV.CROSS_PROJECT_CONTEXTUAL_LINKING)){C(Af);}}}this.set("dirty",false);},j=function(AW){b.copy({ontooltipChange:function(){var AX=b.walk("tooltipGroup.text",AW);if(AX){AX.set("value",this.tooltip);}}},AW);},AE=function(AX,AZ,AY){var AW=b.walk("node.data",AX),Aa=0;if(AW&&AY===undefined){if(AW.tid!==undefined){Aa=0;}else{Aa=AZ?1:0;}}else{Aa=AY;}return Aa;};var O=function(AX){var AW=[];for(var Aa=0;Aa<AX.length;Aa++){var Ac=AX[Aa];var Ad=!Ac.hasOwnProperty("navPage");var Ab={n:Ac.n};if(Ac.navChapter){Ab.navChapter=Ac.navChapter;Ab.id=Ac.navChapter;}if(Ac.navChapters){Ab.navChapters=Ac.navChapters;Ab.id=Ac.navChapters;}if(Ad){var AZ=[];var AY=Aa+1;while(AY<AX.length&&AX[AY].hasOwnProperty("navPage")){AZ.push({n:AX[AY].n,navPage:AX[AY].navPage,id:AX[AY].navPage,});AY++;}if(AZ.length>0){Ab.items=AZ;}AW.push(Ab);Aa=AY-1;}}return AW;},J="u;",H=mstrmojo.desc(2461,"All"),w=";",W=function(AX){var AW=[];if(AX&&AX.length>0){AW=AX.slice();AW.shift();AW.unshift({n:H,navChapters:J});AW=O(AW);}return AW;},AM=function(AX,AW){return function(){var AZ=mstrmojo.all[AX];var AY=window.innerHeight;var Aa=AP.safeCall("opener.domNode.getBoundingClientRect",AZ)();var Ac=AP.safeCall("containerNode.getBoundingClientRect",AZ)();var Ab=b.walk("opener.domNode.clientWidth",AZ);if(!Ac||!Aa){return ;}if(Aa.top+Aa.height+3+Ac.height>AY){AZ.containerNode.style.position="fixed";AZ.containerNode.style.bottom="5px";if(Ab){AZ.containerNode.style.width=Ab+"px";}}else{AZ.containerNode.style.removeProperty("position");AZ.containerNode.style.removeProperty("width");}if(Ab&&AW){AZ.containerNode.style.width=Ab+"px";}};},h=b.copy({_iw2idx:function Y(AY,Ac,Ab){var AX=AY.items&&AY.items.length,AZ=this.wrapperNodes(Ac),AW=u.find(AZ,"offsetTop",Ab.offsetTop);for(var Aa=AW;Aa<AX;Aa++){if(AZ[Aa].offsetHeight){return Aa;}}return -1;},},b.copy(mstrmojo.WidgetListMapper)),m=function(AZ,AY,AW){if(!AY||!AW||!AZ){return mstrmojo.desc(28887,"Select pages in the dashboard");}if(AY===J){return H;}var AX=AY.split(w);var Aa=[];u.forEach(AZ,function(Ad,Ab){if(Ad.navPage===AW){if(!u.includes(AX,AW)){for(var Ac=Ab-1;Ac>=0;Ac--){if(AZ[Ac].navChapter){if(!u.includes(AX,AZ[Ac].navChapter)){AX.push(AW);}break;}}}}if(u.includes(AX,Ad.navChapter||Ad.navPage)){Aa.push(Ad.n);}});return Aa.join(", ");},z=function(Ag,AW,Af,AX){var AY=Ag.navpage,AZ=Ag.ftgs||Ag.navpage,Aa=!!(Ag.psf||Ag.pics||Ag.psv);return new mstrmojo.DropDownButton({alias:AX.alias,bindings:{text:function(){return m(this.infoPages,this.filterTgts,this.navPage);},enabled:function(){return this.passFilterChecked&&!!this.navPage&&!!this.infoPages;},},infoPages:AW,navPage:AY,filterTgts:AZ,passFilterChecked:Aa,onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);if(this.enabled){AP.safeCall("popupRef.tree.set",this)("items",null);}},useRichTooltip:true,richTooltip:{cssClass:"vi-regular vi-tooltip-C",posType:mstrmojo.tooltip.POS_TOPLEFT},updateTooltipConfig:function Ad(Ao){var Ak=b.walk("domNode.firstChild",this),Am=b.walk("popupRef.tree.domNode",this),Ap,Al=this.richTooltip,An=Ao&&(Ao.target||Ao.srcElement),Aj;Al.content=null;if(!An){return ;}if(Ak&&X.contains(Ak,An,true)){Ap=Ak.firstChild;if(Ap&&(Ap.scrollWidth>Ap.clientWidth)){Al.content=this.text;Aj=X.position(this.domNode);Al.left=Aj.x+Aj.w+5;Al.top=Aj.y-4;}}else{if(Am&&X.contains(Am,An)&&An.tagName==="SPAN"){Ap=An;if(Ap.scrollWidth>Ap.clientWidth){Al.content=Ap.textContent;Aj=X.position(An);Al.left=Aj.x+Aj.w+8;Al.top=Aj.y-4;}}}},setFilterTgtsWhenNavPageChange:function(Ak){if(this.navPage===Ak){return ;}if(!this.filterTgts){this.set("filterTgts",Ak);return ;}if(!this.infoPages){return ;}if(this.filterTgts!==J){var An=this.filterTgts.split(w);var Al=W(this.infoPages);var Am=u.filterOne(Al,function(Ao){return u.find(Ao.items,"id",Ak)>-1;});if(u.includes(An,this.navPage)){u.removeItem(An,this.navPage);}if(u.includes(An,Am.id)||u.includes(An,Ak)){}else{An.push(Ak);}this.set("filterTgts",An.join(w));}var Aj=this.popupRef&&this.popupRef.tree;if(Aj){Aj.set("items",null);}},premousedown:function Ai(Aj){var Al=this._lastOpened;var Ak=Aj&&Aj.getTarget();if(Al&&!Al.visible&&Al.alreadyClosedThroughOpener&&this.boxNode&&Ak&&X.contains(this.boxNode,Ak,true)){delete Al.alreadyClosedThroughOpener;return ;}if(Al&&Al.alreadyClosedThroughOpener){delete Al.alreadyClosedThroughOpener;}this.togglePopup();},cssClass:"pass-filter-to-multi-targets-selector-dropdown-btn",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"pass-filter-to-multi-targets-selector-popup",locksHover:true,onOpen:function(){var An=this.opener.infoPages,Aj=W(An),Am=this.id,Al=this.tree;if(Aj&&(JSON.stringify(Al.items)!=JSON.stringify(Aj)||!Al.navPage)){Al.set("items",Aj);}var Ak=AM(Am);Ak();this.resizeListener=AP.throttle(Ak,150,{trailing:false});X.attachEvent(window,"resize",this.resizeListener);},onClose:function(Aj){if(this.resizeListener){X.detachEvent(window,"resize",this.resizeListener);delete this.resizeListener;}if(Aj instanceof HTMLElement&&b.walk("opener.boxNode",this)&&X.contains(this.opener.boxNode,Aj,true)){this.alreadyClosedThroughOpener=true;}},children:[{scriptClass:"mstrmojo.Label",cssClass:"pass-filter-to-multi-targets-selector-info-icon",richTooltip:{cssClass:"vi-regular vi-tooltip-C ftgs-selector-info-icon-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,content:mstrmojo.desc(28888,'Selecting "All" or "Chapter" will include all current and future added pages into your selection.'),},useRichTooltip:true,updateTooltipConfig:function Ad(){var Ak=this.richTooltip,Aj=X.position(this.domNode);Ak.left=Aj.x+Aj.w/2+16;Ak.top=Aj.y-7;},_ontooltipover:function Ah(Aj){var Ak=mstrmojo.all[this.id];Ak&&Ak.showTooltip();Aj.stopPropagation();}},{scriptClass:"mstrmojo.TreeBrowser",multiSelect:true,alias:"tree",cssClass:"pass-filter-to-multi-targets-selector-tree",contentRetrieved:true,bindings:{navPage:function(){return this.parent.opener.navPage;},_totalSelections:function(){var An=this.parent.opener.filterTgts;if(!An){return[];}if(An===J){return[J];}var Al=An.split(w)||[],Aj=this.parent.opener.navPage,Am=this.parent.opener.infoPages,Ak=(Am||[]).map(function(Ao){return Ao.navPage||Ao.navChapter;});u.forEach(Am,function(Aq,Ao){if(Aq.navPage===Aj){if(!u.includes(Al,Aj)){for(var Ap=Ao-1;Ap>=0;Ap--){if(Am[Ap].navChapter){if(!u.includes(Al,Am[Ap].navChapter)){Al.push(Aj);}break;}}}return false;}});u.forEach(Al,function(Ap,Ao){if(Ap===J||Ap===Aj||u.includes(Ak,Ap)){}else{Al.splice(Ao,1);}});return Al;}},itemChildrenField:"items",branchClickPolicy:mstrmojo.TreeBrowserEnum.BRANCH_POLICY_SELECT,itemDisplayField:"n",itemIdField:"id",listMapper:h,isBranch:function Ac(Aj){return !Aj.navPage;},itemFunction:function Ae(Aq,Ap,Ao){var Ar=Ao.tree||Ao,Aj=Ar.navPage,Am=Ar.isBranch(Aq),Ak=Aq.id===J,An=Aq.id===Aj,Al=new Ar.browserNodeClass({data:Aq,state:0,parent:Ao,tree:Ar,multiSelect:Ao.multiSelect,text:Aq[Ao.itemDisplayField],cssClass:"pass-filter-to-multi-targets-selector-tree-node"+(Ak?"-all":An?"-navpage":""),items:Aq[Ao.itemChildrenField],itemIdField:Ao.itemIdField,itemDisplayField:Ao.itemDisplayField,itemIconField:Ao.itemIconField,itemChildrenField:Ao.itemChildrenField,itemFunction:Ao.itemFunction,listSelector:Ao.listSelector,contentRetrieved:true,});if(u.includes(Ar._totalSelections||[],Aq.id)){Ao.addSelect(Ap,true);}else{Ao.removeSelect(Ap,true);}if(Am){Al.set("state",1);if(Ap!==0&&u.includes(Ar._totalSelections||[],J)){Ao.addSelect(Ap,true);}}else{if(Aq.id===Aj){Ao.addSelect(Ap,true);Al.premousedown=function(As){As.preventDefault();As.cancel();};}if(u.includes(Ar._totalSelections||[],J)||u.includes(Ar._totalSelections||[],Ao.data.id)){Ao.addSelect(Ap,true);}}return Al;},onnodechange:function Ab(As){if(this.initializing){return ;}this._totalSelections=this._totalSelections||[];var Aj=this._totalSelections,Ap=this.navPage,An=As.added,Ay=As.removed,Au=As.src,Ar=Au&&Au.tree,Az=Au&&Au.scriptClass==="mstrmojo.TreeBrowser",Ak=u.includes(Aj,J),Aw,Av,Ax,Am,Al,At,Ao,A0=function(A1,A4){var A2=[];for(var A3=0;A3<A1.length;A3++){if(A3!==A4){A2.push(A3);}}return A2;};for(Aw=0,Ax=Ay&&Ay.length;Aw<Ax;Aw++){Al=b.walk("ctxtBuilder.itemWidgets."+Ay[Aw],Au);if(Az){if(Ay[Aw]!==0){if(Ak){this._totalSelections=this.items.map(function(A1){return A1.id;}).filter(function(A1){return A1!==Al.data.id&&A1!==J;});this.removeSelect(0,true);this.ctxtBuilder.itemWidgets[0].set("selected",false);}else{u.removeItem(this._totalSelections,Al.data.id);}At=u.find(Al.items,"id",Ap);if(At>-1){this._totalSelections.push(Ap);}Ao=A0(Al.items,At);Al.removeSelect(Ao,true);Ao.forEach(function(A1){Al.ctxtBuilder.itemWidgets[A1].set("selected",false);});}else{this._totalSelections=[Ap];Au.clearSelect(true);u.forEach(Au.ctxtBuilder.itemWidgets,function(A2,A1){A2.set("selected",false);if(A1!==0){At=u.find(A2.items,"id",Ap);Ao=A0(A2.items,At);A2.removeSelect(Ao,true);Ao.forEach(function(A3){A2.ctxtBuilder.itemWidgets[A3].set("selected",false);});}});}}else{if(Au.selected){if(Ak){this._totalSelections=this.items.map(function(A1){return A1.id;}).filter(function(A1){return A1!==Au.data.id&&A1!==J;});this.removeSelect(0,true);this.ctxtBuilder.itemWidgets[0].set("selected",false);}else{u.removeItem(this._totalSelections,Au.data.id);}At=u.find(this.items,"id",Au.data.id);this.removeSelect(At,true);this.ctxtBuilder.itemWidgets[At].set("selected",false);this._totalSelections=this._totalSelections.concat(Au.items.map(function(A1){return A1.id;}).filter(function(A2,A1){return A1!==Ay[Aw];}));}else{u.removeItem(this._totalSelections,Al.data.id);}}}for(Av=0,Am=An&&An.length;Av<Am;Av++){Al=b.walk("ctxtBuilder.itemWidgets."+An[Av],Au);if(Az){if(An[Av]!==0){this._totalSelections.push(Al.data.id);Al.items.forEach(function(A1){u.removeItem(Aj,A1.id);});At=u.find(Al.items,"id",Ap);Ao=A0(Al.items,At);Al.addSelect(Ao,true);Ao.forEach(function(A1){Al.ctxtBuilder.itemWidgets[A1].set("selected",true);});}else{this._totalSelections=[J];Ao=A0(Au.items,0);Au.addSelect(Ao,true);u.forEach(Au.ctxtBuilder.itemWidgets,function(A2,A1){A2.set("selected",true);if(A1!==0){Ao=A0(A2.items);A2.addSelect(Ao,true);Ao.forEach(function(A3){A2.ctxtBuilder.itemWidgets[A3].set("selected",true);});}});}}else{this._totalSelections.push(Al.data.id);}}Af(this._totalSelections.join(w));var Aq=this.parent.opener;Aq.set("filterTgts",this._totalSelections.join(w));},toogleState:mstrmojo.emptyFn}]}});},a=mstrmojo.declare(mstrmojo.TreeBrowserNode,null,{markupMethods:b.copy({ontextChange:function(){this.textNode.innerHTML=this.text;}},b.copy(mstrmojo.TreeBrowserNode.prototype.markupMethods))}),k=function(Ac,Aa,AX,AY){var AZ=function(Ae){return{scriptClass:"mstrmojo.Box",bindings:{visible:function(){return Ae===0||this.parent.isSearchNoResult;},},children:[{scriptClass:"mstrmojo.Box",cssClass:"link-source-object-selector-empty-content-container",children:[{scriptClass:"mstrmojo.Box",cssClass:"link-source-object-selector"+(Ae===0?"-empty-content-image":"-no-result-image"),},{scriptClass:"mstrmojo.Label",cssClass:"link-source-object-selector-empty-content-label",text:Ae===0?mstrmojo.desc(29408,"No Content"):mstrmojo.desc(29409,"No Result"),}]}]};};var AW=function(Af,Ae){var Ag={};u.forEach(Af,function(Aj,Ai){if(u.includes(Ae,Aj.v)){Ag[Ai]=true;}});var Ah=new mstrmojo.Box({n:mstrmojo.desc(13361,"Current"),linkObjSourceType:y.CURRENT_TEMPLATE,alias:"currentTabContainer",children:[{scriptClass:"mstrmojo.Box",alias:"currentTab",cssClass:"link-source-object-selector-current-tab",isSearchNoResult:false,children:[{scriptClass:"mstrmojo.ui.SearchBox",placeholderText:mstrmojo.desc(4325,"Search"),cssClass:"link-source-object-selector-searchbox",searchTriggered:function(Al){var Ak=this.parent.templateChecklist,Ai=Al.toLowerCase(),Aj=0;if(!Ak){return ;}Ak.domNode.style.display="none";u.forEach(Ak.itemsContainerNode.children,function(Ar,Am){var Aq=Af[Am].n,Ao=Ai?Aq.toLowerCase().indexOf(Ai):0,Ap=Ai===""||Ao>-1,An;E.toggleClass(Ar,"hidden",!Ap);if(Ap){Aj++;if(Ai&&Ao>-1){An='<span class="text">'+AQ.encodeHtmlString(Aq.slice(0,Ao),true)+'<span class="highlight">'+AQ.encodeHtmlString(Aq.slice(Ao,Ao+Ai.length),true)+"</span>"+AQ.encodeHtmlString(Aq.slice(Ao+Ai.length),true)+"</span>";}else{An='<span class="text">'+AQ.encodeHtmlString(Aq,true)+"</span>";}if(Ar.innerHTML!==An){Ar.innerHTML=An;}}});Ak.domNode.style.display="";this.parent.set("isSearchNoResult",Aj===0);}},AZ(Af.length),{scriptClass:"mstrmojo.ui.CheckList",items:Af,allowHTML:false,selectedIndices:Ag,alias:"templateChecklist",cssClass:"link-source-object-selector-current-checklist",onchange:function(Aj){var Al=this.parent.parent.parent.opener;var Ai=this.items[Aj.added];var Ak=this.items[Aj.removed];var Am=[];u.map(Al.selectedObjectIds,function(Ao){var An=u.find(Af,"v",Ao);if(An!==-1){Am.push({id:Af[An].v,type:Af[An].type});}else{if(Al.datasetIdNameMapping[Ao]){Am.push({id:Ao,type:Al.datasetIdNameMapping[Ao].type});}}});if(Ai&&u.find(Am,"id",Ai.v)===-1){Am.push({id:Ai.v,type:Ai.type});}if(Ak){Am=u.filter(Am,function(An){return An.id!==Ak.v;});}Al.set("selectedObjectIds",Am.map(function(An){return An.id;}));AY(Am);},}]}]});return Ah;};var Ab=function(Ah,Ae){var Aj=new mstrmojo.Box({n:mstrmojo.desc(11241,"Datasets"),linkObjSourceType:y.DATASET,alias:"datasetTabContainer",children:[{scriptClass:"mstrmojo.Box",cssClass:"link-source-object-selector-dataset-tab",alias:"datasetTab",children:[{scriptClass:"mstrmojo.ui.SearchBox",placeholderText:mstrmojo.desc(4325,"Search"),cssClass:"link-source-object-selector-searchbox",searchTriggered:function(Ao){var Ak=this.parent.tree,Am=Ao.toLowerCase();if(!Ak){return ;}var An=function(Ar,Ap){var Aq=Ar.toLowerCase().indexOf(Ap);if(Aq===-1){return null;}return AQ.encodeHtmlString(Ar.slice(0,Aq))+'<span class="highlight">'+AQ.encodeHtmlString(Ar.slice(Aq,Aq+Ap.length))+"</span>"+AQ.encodeHtmlString(Ar.slice(Aq+Ap.length));};var Al=u.map(Ah,function(Ap){var Aq=An(Ap.n,Am),Ar=b.clone(Ap);if(Aq){Ar.adjustedN=Aq;}Ar.items=u.map(Ap.items,function(Au){var At=An(Au.n,Am);if(At){var As=b.clone(Au);As.adjustedN=At;return As;}return Aq?Au:null;}).filter(Boolean);return Ar.items.length>0?Ar:null;}).filter(Boolean);this.parent.set("isSearchNoResult",Al.length===0);Ak.set("items",Al);}},AZ(Ah.length),{scriptClass:"mstrmojo.TreeBrowser",multiSelect:true,items:Ah,alias:"tree",contentRetrieved:true,branchClickPolicy:mstrmojo.TreeBrowserEnum.BRANCH_POLICY_SELECT,browserNodeClass:a,cssClass:"link-source-object-selector-dataset-checklist",isBranch:function Af(Ak){return !!Ak.items;},_totalSelections:Ae,itemFunction:function Ag(Ar,Am,An){var Al=An.tree||An,Ap=Al._totalSelections||[],Ak=Al.isBranch(Ar),Aq=Ar.dssid&&u.includes(Ap,Ar.dssid),Ao=new Al.browserNodeClass({data:Ar,state:0,parent:An,tree:Al,multiSelect:An.multiSelect,text:Ar.adjustedN||AQ.encodeHtmlString(Ar[An.itemDisplayField]),textCssClass:Ar[An.itemIconField],cssClass:"link-source-object-selector-tree-node"+(Aq?"-selected":""),items:Ar[An.itemChildrenField],itemIdField:An.itemIdField,itemDisplayField:An.itemDisplayField,itemIconField:An.itemIconField,itemChildrenField:An.itemChildrenField,itemFunction:An.itemFunction,listSelector:An.listSelector,contentRetrieved:true,});if(u.includes(Ap,Ar.dssid)){An.addSelect(Am,true);}else{An.removeSelect(Am,true);}if(Ak){Ao.set("state",1);}else{if(Ap.includes(Ar.dssid)||Ap.includes(An.data.dssid)){An.addSelect(Am,true);}}return Ao;},onnodechange:function Ai(Ax){if(this.initializing){return ;}this._totalSelections=this._totalSelections||[];var As=this._totalSelections,At=Ax.added,Aq=Ax.removed,Ak=Ax.src,Az=Ak&&Ak.tree,Ao=Ak&&Ak.scriptClass==="mstrmojo.TreeBrowser",An,Al,Ap,Ay,Am,Av,Ar,Aw=function(A0,A3){var A1=[];for(var A2=0;A2<A0.length;A2++){if(A2!==A3){A1.push(A2);}}return A1;};for(An=0,Ap=Aq&&Aq.length;An<Ap;An++){Am=b.walk("ctxtBuilder.itemWidgets."+Aq[An],Ak);if(Ao){u.removeItem(this._totalSelections,Am.data.dssid);Ar=Aw(Am.items);Am.removeSelect(Ar,true);Ar.forEach(function(A0){Am.ctxtBuilder.itemWidgets[A0].set("selected",false);});}else{if(Ak.selected){u.removeItem(this._totalSelections,Ak.data.dssid);Av=u.find(this.items,"dssid",Ak.data.dssid);this.removeSelect(Av,true);this.ctxtBuilder.itemWidgets[Av].set("selected",false);this._totalSelections=this._totalSelections.concat(Ak.items.map(function(A0){return A0.dssid;}).filter(function(A1,A0){return A0!==Aq[An];}));}else{u.removeItem(this._totalSelections,Am.data.dssid);}}}for(Al=0,Ay=At&&At.length;Al<Ay;Al++){Am=b.walk("ctxtBuilder.itemWidgets."+At[Al],Ak);if(Ao){this._totalSelections.push(Am.data.dssid);Am.items.forEach(function(A0){u.removeItem(As,A0.dssid);});Ar=Aw(Am.items);Am.addSelect(Ar,true);Ar.forEach(function(A0){Am.ctxtBuilder.itemWidgets[A0].set("selected",true);});}else{this._totalSelections.push(Am.data.dssid);}}AY(u.map(this._totalSelections,function(A2){var A1=u.find(Ah,"dssid",A2);if(A1>-1){return{id:A2,type:Ah[A1].type};}var A0;u.forEach(Ah,function(A3){A1=u.find(A3.items,"dssid",A2);if(A1>-1){A0={id:A2,type:A3.items[A1].type};return false;}});return A0?A0:null;}).filter(Boolean));var Au=this.parent.parent.parent.opener;Au.set("selectedObjectIds",this._totalSelections.slice());},}]}]});return Aj;};var Ad=function(Ae,Ah,Af,Aj){if(Ae.length===0){if(Ah===-1){this.selectedTab=y.CURRENT_TEMPLATE;}if(b.walk("popupRef.objSelectorDetail.visible",this)!==true){return mstrmojo.desc(11693,"Visualization");}else{return mstrmojo.desc(29407,"Objects...");}}if(Ah===-1){Ah=u.filter(Ae,function(Ak){return Aj[Ak];}).length>u.filter(Ae,function(Ak){return Af[Ak];}).length?y.DATASET:y.CURRENT_TEMPLATE;this.selectedTab=Ah;}var Ag=Ah===y.CURRENT_TEMPLATE?Af:Aj;var Ai=[];u.forEach(Ae,function(Ak){if(Ag[Ak]){Ai.push(Ag[Ak].name);}else{if(Aj[Ak]){Ai.push(Aj[Ak].name);}}});return Ai.join(", ");};return new mstrmojo.DropDownButton({templateData:Aa,datasetData:AX,bindings:{templateIdNameMapping:function(){var Af={};var Ag=this.templateData.gsi;if(!u.isArray(Ag)){Ag=[Ag];}var Ae=Ag.reduce(function(Ah,Ai){return Ah.concat(Ai.rows,Ai.cols,Ai.mx);},[]);Ae=u.distinct(Ae,"did").filter(function(Ah){return Ah.did!=="-1";});u.forEach(Ae,function(Ah){Af[Ah.did]={name:AQ.encodeHtmlString(Ah.n,true),type:Ah.t};});return Af;},datasetIdNameMapping:function(){var Af={};var Ae=this.datasetData;b.forEach(Ae,function(Ah,Ag){Af[Ag]={name:AQ.encodeHtmlString(Ah.name,true),type:Ah.type};u.forEach(Ah.att.concat(Ah.mx),function(Ai){Af[Ai.did]={name:AQ.encodeHtmlString(Ai.n,true),type:Ai.t,obj:Ai};});});return Af;},text:function(){return Ad.call(this,this.selectedObjectIds,this.selectedTab,this.templateIdNameMapping,this.datasetIdNameMapping);},},selectedObjectIds:Ac.asobs.map(function(Ae){return Ae.id;}),selectedTab:-1,cssClass:"link-source-object-selector-dropdown-btn",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"link-source-object-selector-popup",locksHover:true,onOpen:function(){if(this.opener.selectedObjectIds.length>0){this.objSelectorEntry.children[0].set("selected",false);this.objSelectorEntry.children[1].set("selected",true);}else{this.objSelectorEntry.children[0].set("selected",true);this.objSelectorEntry.children[1].set("selected",false);}var Af=this.id;AM(Af,true)();var Ae=b.walk("opener.boxNode",this);E.toggleClass(Ae,"popup-open",true);},onClose:function(Af){if(Af instanceof HTMLElement&&b.walk("opener.boxNode",this)&&X.contains(this.opener.boxNode,Af,true)){this.alreadyClosedThroughOpener=true;}this.objSelectorEntry.set("visible",true);this.objSelectorDetail.set("visible",false);if(this.opener.selectedObjectIds.length===0){this.opener.set("selectedObjectIds",[]);}this.opener.set("selectedTab",-1);var Ae=b.walk("opener.boxNode",this);E.toggleClass(Ae,"popup-open",false);},children:[{scriptClass:"mstrmojo.Box",alias:"objSelectorEntry",cssClass:"link-source-object-selector-entry",children:[{scriptClass:"mstrmojo.MenuItem",cssClass:"link-source-object-selector-entry-menuitem",text:mstrmojo.desc(11693,"Visualization"),onclick:function(){AY(undefined);this.parent.parent.opener.set("selectedObjectIds",[]);this.parent.parent.close();}},{scriptClass:"mstrmojo.MenuItem",cssClass:"link-source-object-selector-entry-menuitem",text:mstrmojo.desc(29407,"Objects..."),onclick:function(){this.parent.parent.objSelectorEntry.set("visible",false);this.parent.parent.objSelectorDetail.set("visible",true);this.parent.parent.objSelectorDetail.tabgroup.tabstack.postCreate();}}]},{scriptClass:"mstrmojo.Box",alias:"objSelectorDetail",cssClass:"link-source-object-selector-detail",visible:false,children:[{scriptClass:"mstrmojo.TabContainer",cssClass:"link-source-object-selector-detail-tabcontainer",alias:"tabgroup",children:[{scriptClass:"mstrmojo.TabStrip",btnCssDisplay:"block",slot:"top",alias:"tabstrip",bindings:{target:function(){return this.parent.tabstack;}}},{scriptClass:"mstrmojo.StackContainer",slot:"stack",alias:"tabstack",cssClass:"linkGroup",bindings:{opener:function(){return this.parent.parent.parent.opener;},},onselectedChange:function(Ag){var Ai=this;if(!this.opener){return ;}if(!Ag.value){return ;}var Aj=this.opener.selectedObjectIds.slice();if(Ag.value.linkObjSourceType===y.CURRENT_TEMPLATE){var Ah=this.currentTabContainer.currentTab.templateChecklist;if(Ah){var Af=this.opener.datasetData;u.forEach(this.opener.selectedObjectIds,function(Am){if(Af[Am]){u.forEach(Af[Am].att.concat(Af[Am].mx),function(An){return Aj.push(An.did);});}});var Ak={};var Al=[];u.forEach(Ah.items,function(An,Am){if(u.includes(Aj,An.v)){Ak[Am]=true;Al.push(An.v);}});if(!b.equals(Ah.selectedIndices,Ak)){Ah.set("selectedIndices",Ak);}}this.opener.set("selectedTab",y.CURRENT_TEMPLATE);}else{var Ae=this.datasetTabContainer.datasetTab.tree;if(Ae){if(JSON.stringify(Aj.sort())!==JSON.stringify(Ae._totalSelections.slice().sort())){Ae._totalSelections=Ai.opener.selectedObjectIds.slice();Ae.refresh();}}this.opener.set("selectedTab",y.DATASET);}},postCreate:function(){if(!this.opener){return ;}var Ak=this.opener.templateData.gsi;if(!u.isArray(Ak)){Ak=[Ak];}var Ai=Ak.reduce(function(Al,Am){return Al.concat(Am.rows,Am.cols);},[]).sort(function(Am,Al){return Am.n.localeCompare(Al.n);});var Aj=Ak.reduce(function(Al,Am){return Al.concat(Am.mx);},[]).sort(function(Am,Al){return Am.n.localeCompare(Al.n);});var Af=Ai.concat(Aj);Af=u.distinct(Af,"did").filter(function(Al){return Al.did!=="-1";});var Ag=this.opener.datasetIdNameMapping;Af=u.map(Af,function(Am){var Al=Ag[Am.did]?Ag[Am.did].obj:null;return{n:Am.n,v:Am.did,css:"unit "+mstrmojo.vi.ui.DatasetUnitMenuUtils.getUnitCssClass(Al||Am),type:Am.t};});var Ah=[];b.forEach(this.opener.datasetData,function(Am,Al){Ah.push({n:Am.name,dssid:Al,items:u.map(Am.att.concat(Am.mx),function(An){return{n:An.n,dssid:An.did,tp:"unit "+mstrmojo.vi.ui.DatasetUnitMenuUtils.getUnitCssClass(An),type:An.t};}),type:Am.type});});var Ae=this.opener.selectedObjectIds;this.set("children",[AW(Af,Ae),Ab(Ah,Ae)]);this.set("selected",this.opener.selectedTab?this.children[1]:this.children[0]);},}]}]}]}});};mstrmojo.ui.editors.controls.LinkGroup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.vi.ui._IsValidURL],{scriptClass:"mstrmojo.ui.editors.controls.LinkGroup",dirty:false,onOpenCallback:mstrmojo.emptyFn,onCloseCallback:mstrmojo.emptyFn,init:function AO(AY){this._super(AY);this.supportPfizer=AP.safeCall("supportFeature",mstrApp)(l.USE_FILTER_ENHANCEMENT);this.supportFilterMultiTargets=AP.safeCall("supportFeature",mstrApp)(l.CONTEXTUAL_LINKING_FILTER_MULTI_TARGETS);if(mstrApp){Q=mstrApp.projectId;if(M===null){M=AS.isLibraryOrWS();}}var Ab=[],Aa=this,AZ=mstrmojo.all[this.hostId],AX=[],AW=this.createUrlTab(),Ac=this.createDossierTab();Ab.push(AW);Ab.push(Ac);AX.push({scriptClass:"mstrmojo.Widget",markupString:AQ.apply('<div class="link-to-where">{@text}</div>',{text:mstrmojo.desc(16998,"Where to link to?")})});AX.push({scriptClass:"mstrmojo.TabContainer",cssClass:"style"+Ab.length,alias:"tabgroup",children:[{scriptClass:"mstrmojo.TabStrip",btnCssDisplay:"block",slot:"top",alias:"tabstrip",target:this.parent.tabstack,useRichTooltip:true,tooltipOpenDelay:0,updateTooltipConfig:function(Af){var Ag=b.walk("children.1.domNode",this),Ae=X.position(Ag),Ad;if(AS.isWSLocalMode()){Ad=mstrmojo.desc(18780,"Choose any page in this Dashboard. To link to another Dashboard, save this Dashboard in an environment.");}else{if(mstrApp.isSingleTier){Ad=mstrmojo.desc(18700,"Choose any Dashboard");}else{Ad=mstrmojo.desc(18701,"Choose any Dashboard, Document, or Report.");}}this.richTooltip=null;if(Ag&&Ag.contains&&Ag.contains(Af.target)){this.richTooltip={enableHover:true,cssClass:"vi-regular vi-tooltip-C",content:Ad,refNode:Ag,top:1,left:Ae.w};}}},{scriptClass:"mstrmojo.StackContainer",slot:"stack",alias:"tabstack",cssClass:"linkGroup",linkType:U.URL,onselectedChange:function(){if(Aa.tabgroup){s.call(Aa);}},postCreate:function(){this.set("selected",AW);},children:Ab}]});AX.push(AF(function(){Aa.getSelectedTab().set("linkType",U.DISABLED);e.call(Aa,true);Aa.close();},function(){e.call(Aa,true);},function(){e.call(Aa,false);}));this.addChildren(AX);},postBuildRendering:function(){this.mousedownListener=X.attachMarkupEvent(this.id,this.domNode,"mousedown");if(!this.popupConfig){this.popupConfig=this.parent.getPopupConfig();}this._super();},onmousedown:function(AW){AW.cancel();},createTooltip:function(AW){var AX=this;return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:AW||"tooltipGroup",cssClass:"linkGroup linkGroup-tooltip",children:[{scriptClass:"mstrmojo.Label",alias:"label",slot:"col1Node",text:mstrmojo.desc(15698,"Tooltip")},{scriptClass:"mstrmojo.TextBox",alias:"text",slot:"col2Node",valueChangeDelay:1000,value:"",hint:mstrmojo.desc(12070,"Hyperlink#").replace("#",""),onkeydown:function(AZ){if(AZ.e.keyCode===13){this.blur();}},onvalueChange:function AY(){var AZ=b.walk("parent.parent",this);if(AZ){AZ.tooltip=this.value;}s.call(AX);}}]};},createUrlTab:function(){var AZ=this,AY=mstrmojo.all[this.hostId],AW=AY.url||"",AX=new mstrmojo.Box({alias:"urlSelector",linkType:U.URL,defaultLinkType:U.URL,n:q(mstrmojo.desc(9922,"URL"),"url-link-icon"),tooltip:"",children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"linkText",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(9922,"URL")},{scriptClass:"mstrmojo.TextBox",slot:"col2Node",alias:"text",valueChangeDelay:200,hint:L,value:AW||L,onfocus:function(){if(!this.value){this.set("value",L);}},onblur:function(){if(this.value===L){this.set("value","");}},onkeydown:function(Ab){if(Ab.e.keyCode===13){this.blur();}},onvalueChange:function Aa(){var Ab=this,Ac=function(){Ab.set("textValid",true);Ab.domNode.setAttribute("title","");};if(this.hasRendered){if(AZ.isValidURL(this.value)){Ac();}else{if(this.value){this.setInvalidState(mstrmojo.desc(12068,"Invalid URL"));}else{Ac();}}s.call(AZ);}}},]},this.createTooltip("tooltipGroup"),this.createOpenInNewTab(false),]});j(AX);return AX;},createOpenInNewTab:function(AW){var AY=this,AX=mstrmojo.all[this.hostId];return{scriptClass:"mstrmojo.Box",alias:"openNewWin",cssClass:"open-in-new-tab",children:[new mstrmojo.ui.Checkbox({alias:"check",cssDisplay:"inline-block",checked:AX.target==="_blank",oncheckedChange:function(){s.call(AY);}}),new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(18451,"Open in new tab"),onclick:function(){this.parent.check.onclick();}}),new mstrmojo.Label({cssDisplay:AW?"inline-block":"none",cssClass:"desc-text",text:mstrmojo.desc(18449,"(Web only)"),onclick:function(){this.parent.check.onclick();}})]};},updateFtgsSelectorBoxEnabled:function(AX){var AW=b.walk("tabgroup.tabstack.pageSelector.filterMultiTgtsSelector.content",this);isEnabled=(AX.pics||AX.psf)&&AX.navPage;if(AW){AW.set("passFilterChecked",!!isEnabled);}},resetFilterMultiTargetsSelectorBox:function(AY,AX){var AW=b.walk("tabgroup.tabstack.pageSelector.filterMultiTgtsSelector.content",this);if(AW){AW.set("infoPages",AY);AW.set("navPage",AX!==undefined?AX:AG.navPage);AW.set("filterTgts",AX!==undefined?AX:AG.ftgs||AG.navPage);this.updateFtgsSelectorBoxEnabled(AG);}},createDossierTab:function(){var Ac=this,Ag=mstrmojo.all[this.hostId],AZ={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"dossierPulldown",cssText:"margin-bottom: 10px",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(15463,"Dashboard")},c(function(Ai,Ah){var Ak=b.walk("tabgroup.tabstack",Ac),Aj=Ak&&Ak.pageSelector;if(Ai){AG={idx:0};Aj.pagePulldown.text.set("items",AN(Ac.docModel));Aj.pagePulldown.text.set("selectedIndex",0);Aj.set("linkType",U.LINK_PAGE);s.call(Ac);}else{if(Ah&&(Ah.dvm===2048||Ah.dvm===8192)&&mstrApp.supportFeature(AV.TEXT_IMAGE_DOSSIER_LINKING)){AG={tid:Ah.did,tnm:Ah.n,t:Ah.t,navPage:undefined,n:undefined,idx:0,psf:AG.psf||1,pics:AE(Ag,Ac.supportPfizer,AG.pics),aopam:2,prms:[],ftgs:undefined};if(Ah.targetProjectId&&Ah.targetProjectId!==Q){AG.targetProjectId=Ah.targetProjectId;AG.targetProjectName=D();AG.targetViewMode=Ah.dvm;}else{if(AG.targetProjectId){delete AG.targetProjectId;}}Aj.set("linkType",U.LINK_DOSSIER);AT(Ah.did,Ah.t,Ac.docModel,function(Al){AG.idx=2;AG.prms=Al.prms;Ac.resetFilterMultiTargetsSelectorBox(Al.pages,"");i.call(Ac,{pages:Al.pages,pageIndex:AG.idx,psf:!!AG.psf,pics:!!AG.pics,aopam:AG.aopam,prms:AG.prms});},AG.targetProjectId);}else{AG=Ah;Aj.set("linkType",U.LINK_MSTR);s.call(Ac);}}},{slot:"col2Node",alias:"text",parentFolderId:Ac.docModel.pfid,onPopupOpen:function(){Ac.set("closeOnClick",false);},onPopupClose:function(){Ac.set("closeOnClick",true);}})]},Af={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"pagePulldown",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(3687,"Page")},g(AG.idx,AJ,function(){if(AG.tid){return null;}return Ac.docModel.getVizContentPanel().k;},function(Ai,Aj){if(!Aj){if(AG.tid){AG.navPage=Ai.navPage;AG.n=Ai.n;var Ah=b.walk("tabgroup.tabstack.pageSelector.filterMultiTgtsSelector.content",Ac);if(Ah){if(Ai.navPage){Ah.setFilterTgtsWhenNavPageChange(Ai.navPage);Ah.set("navPage",Ai.navPage);AG.ftgs=Ah.filterTgts;}else{Ah.set("navPage",undefined);Ah.set("filterTgts",undefined);AG.ftgs=undefined;}Ac.updateFtgsSelectorBoxEnabled(AG);}}else{AG=Ai;}s.call(Ac);}},{alias:"text",slot:"col2Node"})]},Ae=this.createOpenInNewTab(true),AX={scriptClass:"mstrmojo.Box",cssClass:"should-pass-filter",alias:"filter",children:[new mstrmojo.ui.Checkbox({alias:"checkbox",cssDisplay:"inline-block",checked:!!AG.psf,oncheckedChange:function(){AG.psf=Number(this.checked);s.call(Ac);Ac.updateFtgsSelectorBoxEnabled(AG);}}),new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(26327,"Pass the filter panel selections to the chapter of the target page"),onclick:function(){this.parent.children[0].onclick();}})],markupMethods:b.copy({onvisibleChange:function(){mstrmojo.Box.prototype.markupMethods.onvisibleChange.call(this);Ac.adjustEditorWidth();}},b.copy(mstrmojo.Box.prototype.markupMethods))},Ad={scriptClass:"mstrmojo.Box",cssClass:"should-pass-in-canvas-selection",alias:"icselction",children:[new mstrmojo.ui.Checkbox({alias:"checkbox",cssDisplay:"inline-block",checked:!!AG.pics,oncheckedChange:function(){AG.pics=Number(this.checked);s.call(Ac);Ac.updateFtgsSelectorBoxEnabled(AG);}}),new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(26328,"Pass selections in all visualization filters to the target page"),onclick:function(){this.parent.children[0].onclick();}}),new mstrmojo.Label({cssDisplay:"inline-block",cssClass:"info-icon",richTooltip:{cssClass:"vi-regular V-right vi-tooltip-V only-for-contextual-link",posType:mstrmojo.tooltip.POS_BOTTOMRIGHT,enableHover:true,content:mstrmojo.desc(26329,"The target page must have matching visualization filters.")},useRichTooltip:true,updateTooltipConfig:function Ab(){var Ai=this.richTooltip,Ah=mstrmojo.dom.position(this.domNode);Ai.left=Ah.x+Ah.w/2+12;Ai.top=Ah.y-10;},}),],markupMethods:b.copy({onvisibleChange:function(){mstrmojo.Box.prototype.markupMethods.onvisibleChange.call(this);Ac.adjustEditorWidth();}},b.copy(mstrmojo.Box.prototype.markupMethods))},AY={scriptClass:"mstrmojo.Box",cssClass:"pass-filter-to-multi-targets-selector",alias:"filterMultiTgtsSelector",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(28886,"Pass selected filters to following pages of target dashboard")},z(AG,null,function(Ah){AG.ftgs=Ah;s.call(Ac);},{slot:"containerNode",alias:"content"})]},Aa=[new mstrmojo.Label({alias:"targetGroupLabel",cssClass:"group-title-target",text:mstrmojo.desc(26325,"Target")}),AZ,Af,this.createTooltip(),Ae,new mstrmojo.Label({alias:"filterGroupLabel",cssClass:"group-title-filter",text:mstrmojo.desc(26326,"Filter")}),AX,Ad],AW=[AZ,Af,this.createTooltip(),AX,Ae];if(Ac.supportFilterMultiTargets){Aa.push(AY);}dossierTab=new mstrmojo.Box({alias:"pageSelector",linkType:U.LINK_PAGE,defaultLinkType:U.LINK_PAGE,n:q(mstrmojo.desc(15452,"Dossier"),"dossier-link-icon"),tooltip:"",children:(Ac.supportPfizer?Aa:AW).concat([{scriptClass:"mstrmojo.ui.editors.controls.PromptAndAnswerList",alias:"promptAndAnswer",onAnswerChange:function(Ai,Ah){if(Ai){AG.aopam=Ah;}else{AG.prms=Ah;}s.call(Ac);}}]),_set_linkType:function(Ai,Ah){this[Ai]=Ah;return true;},onlinkTypeChange:function(){var Ah=this.linkType;this.dossierPulldown.text.setSelectedDossier(AI(Ah,[U.LINK_PAGE,U.DISABLED]),f(Ag,Ah));this.pagePulldown.set("visible",AI(Ah,[U.LINK_PAGE,U.LINK_DOSSIER,U.DISABLED]));this.filter.set("visible",Ah===U.LINK_DOSSIER);this.filter.checkbox.set("checked",!!AG.psf);if(this.targetGroupLabel){this.targetGroupLabel.set("visible",Ah===U.LINK_DOSSIER);}if(this.filterGroupLabel){this.filterGroupLabel.set("visible",Ah===U.LINK_DOSSIER);}if(this.icselction){this.icselction.set("visible",Ah===U.LINK_DOSSIER);this.icselction.checkbox.set("checked",!!AG.pics);}if(this.filterMultiTgtsSelector){this.filterMultiTgtsSelector.set("visible",Ah===U.LINK_DOSSIER);}this.promptAndAnswer.set("visible",Ah!==U.LINK_DOSSIER?false:b.walk("prms.length",AG)>0);this.openNewWin.set("visible",AL(Ah));}});j(dossierTab);return dossierTab;},monitorWindow:function(){A(this);},getSelectedTab:function(){return b.walk("tabgroup.tabstack.selected",this);},getCurrentTooltipText:function(){return b.walk("tabgroup.tabstack.selected.tooltipGroup.text.value",this)||"";},getCurrOpenInNewWinStatus:function(){return b.walk("tabgroup.tabstack.selected.openNewWin.check.checked",this);},adjustEditorWidth:function(){var AX=b.walk("tabgroup.tabstack.pageSelector.filter.domNode.clientWidth",this),AY=b.walk("tabgroup.tabstack.pageSelector.icselction.domNode.clientWidth",this),AW=Math.max(AX,AY,364)+"px";if(b.walk("domNode.style",this)&&this.domNode.style.width!==AW){this.domNode.style.width=AW;A(this);}},onOpen:function(){A(this);AH.call(this);this.buttons.rmvBtn.set("enabled",K!==U.DISABLED);this.onOpenCallback();},onClose:function(){this.onCloseCallback();},oncloseOnClickChange:function(){if(this.closeOnClick&&this._zIndex!==undefined){this.domNode.parentNode.style.zIndex=this._zIndex;delete this._zIndex;this.hoverLock(false);this.lockHover();}else{if(!this.closeOnClick){this._zIndex=this.domNode.parentNode.style.zIndex;this.domNode.parentNode.style.zIndex="1";this.unlockHover();this.hoverLock(true);}}},ondirtyChange:function(){if(AG.targetProjectId&&!M){return ;}this.buttons.rtBtns.saveBtn.set("enabled",this.dirty);},destroy:function(AW){X.detachEvent(this.domNode,"mousedown",this.mousedownListener);this._super(AW);}});b.copy({getFileBrowser:AD,getPageSelector:g,getCtrlBtns:AF,generateTabBtnMarkup:q,center:A,getInfoOfDossier:AT,genDLXML:o,getFilterMultiTargetsSelector:z,getLinkSourceObjectSelector:k},mstrmojo.ui.editors.controls.LinkGroup);}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var S=mstrmojo.dom,W=mstrmojo.css,AM=mstrmojo.Enum_Keys,I=mstrmojo.range,o=I.EDGE,AE=mstrmojo.ME.MetricToken.isDelimiter,X=mstrmojo.ME.MetricToken.convertParamTokenToMetric,R=mstrmojo.expr,H=R.STP,x=mstrmojo.array,L=mstrmojo.hash,AT=mstrmojo.mstr.EnumDSSXMLObjectTypes;var N=S.isIE||S.isIEW3C;function AV(E){return E.ctrlKey||S.isMetaKey(window,E)||(E.charCode||E.keyCode)===AM.CTRL;}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.ME.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function U(E){var AW=E.ownerDocument,AX=AW.createElement("span");return AX;},_iw2idx:function Z(AW,AZ,AY){var AX=this.wrapperNodes(AZ),E=mstrmojo.array.indexOf(AX,AY);return E===-1?AX.length:E;},itemOffsetLeft:function m(AW,Aa,E,AY){if(!AY){var AX=this.wrapperNodes(Aa);AY=AX&&AX[E];if(!AY){return 0;}}var AZ=Aa.firstChild;if(!AZ||(AZ===AY)){return 0;}return AY.offsetLeft-AZ.offsetLeft;},whereDrop:function AU(Ae,E,AY,Ad,AW){var Aa=this._nd2iw(Ae,E,AY),Af,Ac,AZ,Ab,AX;if(Aa){Ac=this._iw2idx(Ae,E,Aa);Af=Ac;AZ=this.itemOffsetLeft(Ae,E,null,Aa);Ab=Aa.offsetTop;AX=Aa.offsetWidth;if(Ad.x>AW.left+AZ+AX/2){Af++;AZ+=AX;}}else{return Ae.dropCuePos;}return{left:AZ,top:Ab,idx:Af,idxActual:Ac};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function G(E){var AW=E.src.data;return !!AW;},createToken:function A(AW){var E={v:mstrmojo.ME.MetricToken.brackets(AW.n),oi:AW,isNew:true};X(E);E.oi=L.copyProps(["did","n","t"],E.oi);return E;},ondrop:function(AW){AW.src.data=this.createToken(AW.src.data.item);if(this.prepareDropItem){this.prepareDropItem(AW);}var E=this.insertTokens([AW.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");return E;},ondragenter:function J(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function a(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function c(AW){var AX=AW.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AX){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false" mstreventmark = "editNode" mstrevent = "dragstart contextmenu keydown keypress keyup mouseup paste blur"ondragstart = "return false;" oncontextmenu = "return false;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" onblur = "return mstrmojo.all.{@id}.handleblur(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" mstreventmark = "clipboardNode" mstrevent = "keyup" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',eventHandlerMap:{editNode:{dragstart:{requiredParams:[],handlerFn:function(){return function(){return false;};}},contextmenu:{requiredParams:[],handlerFn:function(){return function(){if(event){event.stopPropagation();event.preventDefault();}return false;};}},keydown:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlekeydown(event);};}},keypress:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlekeypress(event);};}},keyup:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlekeyup(event);};}},mouseup:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlemouseup(event);};}},paste:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlepasteDirect(event);};}},blur:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handleblur(event);};}}},clipboardNode:{keyup:{requiredParams:["id"],handlerFn:function(E){return function(){return mstrmojo.all[E.id].handlepaste(event);};}}}},markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function K(AX,E,AW){return new mstrmojo.ME.MetricToken({data:AX,parent:AW});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function b(AW,E){if(this._super){this._super(AW,E);}if(this.oi){this.oi.tks.items=this.items;}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:AE,postBuildRendering:function i(){if(this._super){this._super();}this._eros=false;if(S.isFF){document.body.spellCheck=false;}mstrmojo.dom.attachEvent(this.editNode,"compositionstart",function(){this.saveStateForIME();this.composing=true;this.toggleIMEStatusBar(true);}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionupdate",function AW(AX){if(S.isIEW3C){this.lastImeChar=AX.data||(N&&this.lastImeChar);}else{this.lastImeChar=AX.data||this.lastImeChar;}}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionend",function E(AZ){this.composing=false;if(S.isIE9||S.isIE10){var AY=I.getRangeInfo();this.imeBuffer=AY.startContainer.data.slice(this.prev_rInfo.startOffset,AY.startOffset).split("");}else{if(S.isIEW3C){var AY=I.getRangeInfo();this.imeBuffer=AY.startContainer.data.slice((this.prev_rInfo.startOffset-1)<0?0:this.prev_rInfo.startOffset,AY.startOffset).split("");}else{if(S.isEdge){var AX=AZ.data||"";this.imeBuffer=(this.imeBuffer||[]).concat(AX.split(""));}else{var AX=AZ.data||this.lastImeChar||"";this.imeBuffer=(this.imeBuffer||[]).concat(AX.split(""));}}}}.bind(this));},fnContextMenu:function O(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},saveStateForIME:function l(){if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=I.getRangeInfo();this.prev_items=this.items;}},handleblur:function M(){if(this.doubleByte){this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}},processDeleteKeyDown:function D(AW){if(!this.doubleByte){try{this.widgetHandleDelete(AW);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(E){}return true;}},processBackspaceKeyDown:function AS(AW){if(!this.doubleByte){try{this.widgetHandleBackspace(AW);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}return true;}},handlekeydown:function f(AY){AY=AY||window.event;var E=AY.keyCode||AY.charCode,AW=false,AX=I.getRangeInfo();if((E===AM.LEFT_ARROW||E===AM.RIGHT_ARROW||E===AM.BACKSPACE)&&this.doubleByte){if(this.composing){return ;}this.doubleByte=false;if(E===AM.BACKSPACE){this.imeBuffer.pop();}this.widgetHandleImeInput(this.prev_rInfo);mstrmojo.dom.stopPropogation(window,AY);mstrmojo.dom.preventDefault(window,AY);return false;}switch(E){case AM.DELETE:AW=this.processDeleteKeyDown(AX);break;case AM.BACKSPACE:AW=this.processBackspaceKeyDown(AX);break;case AM.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AM.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AW=true;break;case AM.ESCAPE:this.endTokenSuggestion();AW=true;break;case 86:if(AV(AY)){this.handlePasteTriggeredDeletion();AW=false;}break;case 88:if(AV(AY)){document.execCommand("copy");this.widgetHandleDelete(AX);AW=true;}break;case 89:if(AV(AY)){this.widgetHandleUndoRedo("redo");AW=true;}break;case 90:if(AV(AY)){this.widgetHandleUndoRedo("undo");AW=true;}break;case 229:this.saveStateForIME();break;default:}if(AW){S.stopPropogation(window,AY);S.preventDefault(window,AY);return false;}return true;},handlePasteTriggeredDeletion:function F(){this.set("_saveRangeInfo",I.getRangeInfo());if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this.set("_saveRangeInfo",I.getRangeInfo());}this.clipboardNode.focus();},getCharacter:function AO(AW){var E=(S.isIE&&!S.isIE9)?AW.keyCode:AW.charCode;return(E>0)?String.fromCharCode(E):null;},handleCharacter:function AF(AY){var AZ=this.getCharacter(AY),AW=false;if(AZ&&!((AZ==="c"||AZ==="a")&&AV(AY))){try{this.widgetHandleInput(I.getRangeInfo(),AZ);this.raiseChangeEvent({type:"input",character:AZ});if(!this.isDelimiter(AZ)){if(this.useKeyDelay){var AX=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AX.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AW=true;}return AW;},handlekeypress:function B(E){E=E||window.event;if(this.doubleByte){this.toggleIMEStatusBar(false);this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);window.setTimeout(function(){this.handleCharacter(E);}.bind(this),10);return false;}if(this.handleCharacter(E)){S.stopPropogation(window,E);S.preventDefault(window,E);return false;}return true;},handlekeyup:function k(AX){var E=AX.keyCode||AX.charCode,AW;if(E===AM.LEFT_ARROW||E===AM.RIGHT_ARROW){AW=this.findObjectToken();if(AW&&AW===this._saveActiveToken){this.startTokenSuggestion(AW);}else{this.endTokenSuggestion();}}else{if(E===AM.UP_ARROW){this.preHighlight();}else{if(E===AM.DOWN_ARROW){this.nextHighlight();}else{if(E===AM.BACKSPACE&&this.doubleByte){if(E===AM.BACKSPACE&&!this.composing&&!S.isIE9){this.doubleByte=false;this.imeBuffer.pop();this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}}}}}this.set("_saveRangeInfo",I.getRangeInfo());},handlemouseup:function u(AY){if(this.dropCuePos){return false;}var AW=this.findObjectToken();if(AW&&AW===this._saveActiveToken){this.startTokenSuggestion(AW);}else{this.endTokenSuggestion();}var AX=I.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var E=this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;AW=S.findWidget(AX.startContainer);if(AW){this._delaySetTextCaretPos(AW.domNode,AX.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AX.startOffset-1);}this.prev_rInfo=AX;}this.set("_saveRangeInfo",AX);},handlepasteDirect:function AJ(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlePasteTriggeredDeletion();this.handlepaste(E);S.stopPropogation(window,E);S.preventDefault(window,E);return false;},handlepaste:function s(Aa){var AW=this.clipboardNode.value;this.clipboardNode.value="";var AZ=[],E=AW&&AW.length,AY,AX="",Ab;if(E>0){for(AY=0;AY<E;AY++){Ab=AW.charAt(AY);if(this.isDelimiter(Ab)){if(AX.length>0){AZ.push({v:AX,isNew:true});AX="";}AZ.push({v:Ab,isDelimiter:true,isNew:true});}else{AX+=Ab;}}if(!mstrmojo.string.isEmpty(AX)){AZ.push({v:AX,isNew:true});AX="";}this.insertTokens(AZ);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AR(){var AW=[],AY=this.items,AX,E;for(AX=0,E=AY.length;AX<E;AX++){AW[AX]=AY[AX].v;}return AW.join("| ");},replaceErrorToken:function w(AY){var AX=this.items||[],AZ=mstrmojo.array.find(AX,"sta",-1),AW,Aa=function(Ag,Ac,Ab){var Ae=(Ag&&Ag.items)||[],Aj=x.find(Ae,"did",Ac),Af,Ah;var Ai=Ab.toUpperCase();var Ad=Ai.replace(/^\[(.*)\]$/,"$1");if(Aj>-1){Af=Ae[Aj].fs;Ah=x.filterOne(Af,function(Al){var Ak=Al.fnm?Al.fnm.toUpperCase():"";return Ak&&(Ak===Ai||Ak===Ad);});}return Ah;},E=function(Ag,Ae,Af){var Ab={v:Ae.n,oi:Ae,isNew:true},Ad=Ag.v&&Ag.v.split("@"),Ac;if(Ad&&Ad.length>1){Ac=Aa(Af,Ae.did,Ad[1]);if(Ac){Ab.exv=Ac.fmdid||Ac.fid;Ab.extp=8;Ab.v=mstrmojo.ME.MetricToken.brackets(Ae.n)+"@"+Ac.fnm;}}return Ab;};if(AZ>-1){AW=E(AX[AZ],AY,this.candidates);this.remove(AZ);this.add([AW],AZ);}},widgetHandleDelete:function j(AZ){if(AZ.collapsed){var AY,AX,E,Aa=AZ.startOffset,AW=this.ctxtBuilder.itemWidgets;if(!S.contains(this.editNode,AZ.startContainer,false,document.body)){I.collapseOnNode(this.editNode,false);return ;}AY=I.getEdgeInfo(AZ.startContainer,AZ.startOffset);AX=S.findWidget(AZ.startContainer);E=this.itemIndex(AX.data);if(AY===o.EDGE_END){E++;AX=AW[E];Aa=0;}if(!AX){I.collapseOnNode(this.editNode,false);return ;}if(AX.length()===1){this.remove(E);AX=AW[E];if(AX){I.collapseOnNode(AX.domNode,true);}else{I.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AX.spliceContent(Aa,1);I.collapseOnTextNode(AX.domNode,Aa);}}else{this.widgetDeleteTokens(AZ);}},widgetHandleBackspace:function AD(AZ){if(AZ.collapsed){var AY,AX,E,Aa=AZ.startOffset,AW=this.ctxtBuilder.itemWidgets;if(!S.contains(this.editNode,AZ.startContainer,false,document.body)){if(AZ.startOffset>0&&S.isFF){AX=AW[this.items.length-1];I.collapseOnNode(AX.domNode,false);AZ=I.getRangeInfo();AY=I.getEdgeInfo(AZ.startContainer,AZ.startOffset);}else{I.collapseOnNode(this.editNode,true);return ;}}AY=I.getEdgeInfo(AZ.startContainer,AZ.startOffset);AX=S.findWidget(AZ.startContainer);E=this.itemIndex(AX.data);if(AY===o.EDGE_BEGIN){E--;AX=AW[E];Aa=AX.length();}if(!AX){I.collapseOnNode(this.editNode,true);return ;}if(AX.length()===1){this.remove(E);AX=AW[E-1];if(AX){I.collapseOnNode(AX.domNode,false);this.checkMergeTwoTokens(E-1,E);AX=AW[E-1];}else{I.collapseOnNode(this.editNode,true);}}else{AX.spliceContent(Aa-1,1);I.collapseOnTextNode(AX.domNode,Aa-1);}}else{this.widgetDeleteTokens(AZ);}},widgetHandleInput:function AG(Aa,Ab){if(!Aa.collapsed){this.widgetDeleteTokens(Aa);Aa=I.getRangeInfo();}var AX,Ac,Ad,Ae,E,AW,AY=this.ctxtBuilder.itemWidgets;if(!S.contains(this.editNode,Aa.startContainer,false,document.body)){this.add([{v:Ab,isDelimiter:this.isDelimiter(Ab),isNew:true}],0);Ac=AY[0];I.collapseOnTextNode(Ac.domNode,1);return ;}AX=I.getEdgeInfo(Aa.startContainer,Aa.startOffset);Ac=S.findWidget(Aa.startContainer);Ad=this.itemIndex(Ac.data);if(this.isDelimiter(Ab)){Ae={v:Ab,isDelimiter:true,isNew:true};if(AX===o.EDGE_MIDDLE){var AZ=Ac.split2Tokens(Aa.startOffset);this.remove(Ad);this.add([AZ[0],Ae,AZ[1]],Ad);Ad+=1;}else{Ad=(AX===o.EDGE_BEGIN)?Ad:Ad+1;this.add([Ae],Ad);}Ac=AY[Ad];I.collapseOnTextNode(Ac.domNode,(Ac.domNode.innerText||Ac.domNode.textContent).length);}else{AW=Aa.startOffset;if(Ac.isDelimiter()){E=AY[(AX===o.EDGE_BEGIN)?Ad-1:Ad+1];if(E&&!E.isDelimiter()){Ac=E;AW=(AX===o.EDGE_BEGIN)?Ac.length():0;}}if(!Ac.isDelimiter()){Ac.spliceContent(AW,0,Ab);I.collapseOnTextNode(Ac.domNode,AW+1);}else{this.add([{v:Ab,isNew:true}],(AX===o.EDGE_BEGIN)?Ad:Ad+1);Ac=AY[(AX===o.EDGE_BEGIN)?Ad:Ad+1];I.collapseOnNode(Ac.domNode,false);}}},widgetHandleImeInput:function AG(AZ,Aa){Aa=Aa||this.imeBuffer&&this.imeBuffer.join("")||"";this.imeBuffer=[];this.lastImeChar=null;if(!Aa){return ;}if(!AZ.collapsed){this.widgetDeleteTokens(AZ);AZ=I.getRangeInfo();}var AX,Ab,Ac,Ad,E,AW,AY=this.ctxtBuilder.itemWidgets;if(!S.contains(this.editNode,AZ.startContainer,false,document.body)||this.items.length==0){this.clearTokens();this.add([{v:Aa,isDelimiter:this.isDelimiter(Aa),isNew:true}],0);AY=this.ctxtBuilder.itemWidgets;Ab=AY[0];I.collapseOnTextNode(Ab.domNode,1);this._delaySetCaretPos(Ab.domNode,false);return ;}AX=I.getEdgeInfo(AZ.startContainer,AZ.startOffset);Ab=S.findWidget(AZ.startContainer);Ac=this.itemIndex(Ab.data);AW=AZ.startOffset;if(Ab.isDelimiter()){this.clearTokens();this.add(this.prev_items);AY=this.ctxtBuilder.itemWidgets;E=AY[(AX===o.EDGE_BEGIN)?Ac-1:Ac+1];if(E&&!E.isDelimiter()){Ab=E;AW=(AX===o.EDGE_BEGIN)?Ab.length():0;}}if(!Ab.isDelimiter()){Ab.spliceContent(AW,0,Aa);this._delaySetTextCaretPos(Ab.domNode,AW+Aa.length);}else{this.add([{v:Aa,isNew:true}],(AX===o.EDGE_BEGIN)?Ac:Ac+1);Ab=AY[(AX===o.EDGE_BEGIN)?Ac:Ac+1];this._delaySetCaretPos(Ab.domNode,false);}this.startTokenSuggestion();return Ab;},findObjectToken:function C(){var AZ=I.getRangeInfo(),AX=S.findWidget(AZ.startContainer);if(!S.contains(this.editNode,AZ.startContainer,false,document.body)){return null;}if(!AX||AX===this||!AX.isDelimiter){return null;}if(AX&&!AX.isDelimiter()){return AX;}var AY=I.getEdgeInfo(AZ.startContainer,AZ.startOffset),AW=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AX.data);AX=AW[(AY===o.EDGE_BEGIN)?E-1:E+1];if(AX&&!AX.isDelimiter()){return AX;}return null;},checkMergeTwoTokens:function AB(AZ,AX){var AY=this.ctxtBuilder.itemWidgets,AW=AY[AZ],E=AY[AX];if((AW&&!AW.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AZ,AX]);this.add([AW.mergeTo(E)],AZ);I.collapseOnTextNode(AY[AZ].domNode,AW.length());}},insertTokens:function AI(Aa){var Ad=0,Ac=this.editNode;var AX=this._saveRangeInfo||I.getRangeInfo();if(!AX||!S.contains(Ac,AX.startContainer,false,document.body)){this.add(Aa);Ad=this.items.length-1;if(Ad===0){this._delaySetTextCaretPos(Ac,(Ac.innerText||Ac.textContent).length);}else{var E=this.ctxtBuilder.itemWidgets[Ad].domNode;this._delaySetTextCaretPos(E,(E.innerText||E.textContent).length);}}else{var AW=I.getEdgeInfo(AX.startContainer,AX.startOffset),Ab=S.findWidget(AX.startContainer);Ad=this.itemIndex(Ab.data);if(AW===o.EDGE_MIDDLE){var AY=Ab.split2Tokens(AX.startOffset);this.remove(Ad);Aa.unshift(AY[0]);Aa.push(AY[1]);this.add(Aa,Ad);}else{Ad=(AW===o.EDGE_BEGIN?Ad:Ad+1);this.add(Aa,Ad);}Ad=Ad+Aa.length-1;Ab=this.ctxtBuilder.itemWidgets[Ad];this._delaySetCaretPos(Ab.domNode,false);}this.raiseChangeEvent({type:"insert"});var AZ=this;window.setTimeout(function(){AZ.set("_saveRangeInfo",I.getRangeInfo());},50);return Ad;},insertParenthesisTokens:function AL(AW){var E=this;window.setTimeout(function(){var AX=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AX-1],1);},AW||50);},clearTokens:function AA(E){this.set("items",E||[]);this.set("_saveRangeInfo",null);this._delaySetCaretPos(this.editNode,false);},focus:function AH(){var AW=this.ctxtBuilder.itemWidgets,E=AW.length;this._delaySetCaretPos(E>0?AW[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AN(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[R.TP.FOLDER,R.TP.FACT,R.TP.ATTR,R.TP.FUNCTION,R.TP.FILTER,R.STP.PROMPT_OBJECTS,R.TP.ATTR,R.TP.DIM,R.TP.METRIC,R.TP.ROLE].join(","),getSearchPattern:function e(){var AW=this._saveActiveToken,AY=AW&&AW.data.v.trim(),E=AY&&AY.length;if(E>2){if(AY.charAt(0)==="["){AY=AY.substring(1);}if(AY.charAt(AY.length-1)==="]"){AY=AY.substring(0,AY.length-1);}}if(AW&&AW.data.ift){var AX=AW.data.v,AZ=AX&&AX.indexOf("@");if(AZ>=0){AY=AX.substring(AZ);}}return AY||"";},getSuggestionPos:function n(){var E=this._saveActiveToken,AW=null,AY,AX;if(E){AY=E.data&&E.data.ift;AX=mstrmojo.dom.position(E.domNode,true);AW={left:Math.round(AX.x+(AY?AX.w:0))+"px",top:Math.round(AX.y+AX.h)+"px",zIndex:100};}return AW;},updateSuggestionListHeightThenNudge:function Y(E){if(mstrApp.isWorkstationPlugin){var AX=this._saveActiveToken;if(AX&&E){var Aa=AX.data&&AX.data.ift,AW=mstrmojo.dom.position(AX.domNode,true),Ag=Math.round(AW.y+AW.h),AY=Math.round(AW.x+(Aa?AW.w:0)),Ad=5,Ai=window.innerHeight-Ag-Ad,Ab=E.list&&E.list.scrollNode&&(E.list.scrollNode.offsetHeight>Ai),Ae=5,Af=window.innerWidth-Ae,AZ=Ab?19:0,Ah=((this.suggestionPopup&&this.suggestionPopup.domNode&&this.suggestionPopup.domNode.offsetWidth)+AZ)||0,Ac=(AY+Ah)>Af;if(Ab&&E.list&&E.list.scrollNode){E.list.scrollNode.style.maxHeight=Ai+"px";E.list.updateScrollbars();}E.set("left",(Ac?(Af-Ah):AY)+"px");E.set("top",Ag+"px");}}},item2textCss:function P(AX){var AW=(this._super&&this._super(AX))||{4:"m",10:"p",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AX.t]||"";var AY=AX.t===AT.Attribute;var E=mstrmojo.vi.ui.DatasetUnitMenuUtils&&mstrmojo.vi.ui.DatasetUnitMenuUtils.isUnitFromMosaicDataset(AX.did,AY);AW+=AX.da?" da":"";AW+=(AX.dm||AX.um)?" dm":"";AW+=AX.de?" de":"";AW+=AX.isParameter?" prm":"";AW+=AX.st===H.FACT_METRIC?" st1033":"";AW+=E?" "+mstrmojo.vi.ui.DatasetUnitMenuUtils.getSemanticRoleCssClass(AX):"";AW+=AX.fs&&AX.fs.length&&AX.fs.some(function(AZ){return AZ.fgr>0;})?" g":"";return AW;},onBrowserOpen:function AC(){this.editNode.blur();},onSuggestionItemSelect:function AK(AW){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AW.t===21){E.setFormInfo(AW);}else{E.setItemInfo(AW);if(AW.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AP(E,AX){var AW=this.editNode,AY=this,AZ=function(){AW.focus();AW.focus();I.collapseOnNode(E,AX);AY.set("_saveRangeInfo",I.getRangeInfo());};window.setTimeout(AZ,0);},_delaySetTextCaretPos:function AP(E,AZ){var AW=this.editNode,AX=this,AY=function(){AW.focus();AW.focus();I.collapseOnTextNode(E,AZ);AX.set("_saveRangeInfo",I.getRangeInfo());};window.setTimeout(AY,0);},getCandidatesThroughTaskCall:function h(AW,E){AW.objectType="11,12,13,43,4";AW.rootFolderType=39;AW.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AW,E);},filterCandidates:function z(AZ,AY,E){var AW=this._saveActiveToken,Aa=AW&&(AW.data.oi||AW.data.at),AX;if(Aa&&AW.data.ift){E=E||this.suggestCount;AY=mstrmojo.string.regEscape(AY);AX=x.filter(AZ,function(Ab){return Ab.t===21&&Ab.attid===Aa.did&&(new RegExp("^"+AY,"i")).test("@"+Ab.n);},{max:E});}else{AX=x.filter(AZ,function(Ab){return Ab.t!==21;});AX=this._super(AX,AY,E);}return AX;},endTokenSuggestion:function AQ(AW){var E=this._saveActiveToken;if(E){if(AW){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function t(Ah){var AW=Ah.startOffset,E=Ah.endOffset,Ak=S.findWidget(Ah.startContainer),Ai=S.findWidget(Ah.endContainer),Ab=this.itemIndex(Ak.data),AZ=this.itemIndex(Ai.data),Ad=[],Ae=I.getEdgeInfo(Ah.startContainer,AW),Aj=I.getEdgeInfo(Ah.endContainer,E),Af=(Ae===o.EDGE_BEGIN?Ab:Ab+1),AY=(Aj===o.EDGE_END?AZ:AZ-1),Aa;if(Ak===Ai){if((Ae===o.EDGE_BEGIN)&&(Aj===o.EDGE_END)){if((S.isFF||N)&&window.getSelection()){var Ac=window.getSelection().getRangeAt(0),Ag=Ac.startOffset,AX=Ac.endOffset-Ag;Ac.deleteContents();this.items.splice(Ag,AX);I.collapseOnNode(this.editNode,false);}else{this.remove(Ab);Ai=this.ctxtBuilder.itemWidgets[Ab===0?Ab:Ab-1];if(Ai){I.collapseOnNode(Ai.domNode,Ab===0);}else{I.collapseOnNode(this.editNode,true);}}}else{Ak.spliceContent(AW,E-AW);I.collapseOnTextNode(Ai.domNode,AW);}}else{for(Aa=Af;Aa<=AY;Aa++){Ad.push(Aa);}this.remove(Ad);if(Ae===o.EDGE_MIDDLE){Ak.spliceContent(AW);}if(Aj===o.EDGE_MIDDLE){Ai.spliceContent(0,E);}}if(Ae===o.EDGE_BEGIN){Ak=this.ctxtBuilder.itemWidgets[Ab===0?Ab:Ab-1];}if(Ak){I.collapseOnNode(Ak.domNode,Ab===0);}else{I.collapseOnNode(this.editNode,false);}Ab=(Ae===o.EDGE_BEGIN)?Ab-1:Ab;this.checkMergeTwoTokens(Ab,Ab+1);this.editNode.focus();},oncandidatesChange:function y(){var AW=this.candidates,E=(AW&&AW.items)||[];if(!this.noCache&&AW&&AW.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AW=this.getSuggestionPos();if(AW){E.set("left",AW.left);E.set("top",AW.top);}},pretokensModify:function Q(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:L.clone(this.items),rInfo:I.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function q(AX){var AY,E,AW=function(Aa){if(!Aa){return ;}Aa=Aa||{};this.set("items",L.clone(Aa.items));var Ad=this.ctxtBuilder.itemWidgets,AZ=Ad[Aa.idx],Ac=AZ&&AZ.domNode||this.editNode,Ab=Aa.rInfo;this._delaySetTextCaretPos(Ac,Ab&&Ab.startOffset||0);};switch(AX){case"undo":AY=--this.tokensCachePointer;if(AY>-1){E=this.tokensCache[AY-1];AW.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AY=this.tokensCachePointer++;if(AY>-1&&AY<this.tokensCache.length){E=this.tokensCache[AY];AW.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function d(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;},toggleIMEStatusBar:function g(E){if((S.isIE9||S.isIE10||S.isIEW3C||S.isEdge)&&this.detectKoreanLocale()){if(E){if(!this.elStatus||!this.elStatus.offsetParent){var AW=this.elStatus=document.createElement("div");AW.innerText=mstrmojo.desc(15003,"Please enter space key to finish IME typing");AW.className="mstrmojo-TokenInputBox-status";this.domNode.appendChild(AW);}}else{this.domNode.removeChild(this.elStatus);delete this.elStatus;}}},detectKoreanLocale:function p(){var E=window.navigator;if(window.mstrConfig&&(window.mstrConfig.browserLang||[]).indexOf("ko")>=0){return true;}if(E.userLanguage=="ko"||E.userLanguage=="ko-KR"||E.browserLanguage=="ko"||E.browserLanguage=="ko-KR"){return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.func","mstrmojo.css");var M=mstrmojo.dom,c=mstrmojo.array,B=mstrmojo.css,i="animate",j="90px",o="70px",E="52px",x=200,P=700,A=400;function z(AE){return function(){this.menuNode.style.display=AE?"block":"none";};}function O(AE){return Math.min(AE.offsetWidth-AE.firstChild.offsetWidth,0);}function y(AE){return AE.isAlignRight?"right":"left";}function AC(AE,AF){return parseInt(AE.style[y(AF)],10)||0;}function K(){var AI=this.tabContainerNode,AH=false,AG=false,AJ=false,AK=this.leftBtnNode,AE=this.rightBtnNode,AF=this.isValidMode();window.setTimeout(function(){if(O(AI)<0){var AM=M.position(AI),AL=M.position(AI.firstChild);AH=(AL.x<AM.x);AG=(AL.x+AL.w>AM.x+AM.w+1);}AJ=AH||AG;B.toggleClass(this.btnBarNode,"highlightBar",AJ);AK.style.display=AE.style.display=AJ?"block":"none";AK.disabled=!AH;AE.disabled=!AG;B.toggleClass(AK,"disable",!AH);B.toggleClass(AE,"disable",!AG);if(this.domNode&&!this.isCustomAddBtn){this.addBtnNode.style.display=this.tabStripMenuNode.style.display=AF?"block":"none";this.bufferNode.style.display=AF?"none":"block";this.floaterNode.style.display=this.hasFloater&&AH?"block":"none";}this.widgetResized();}.bind(this),x);}function U(AE,AF){AE=(AE||[]);if(!AE.filter){return c.filter(AE,AF);}return AE.filter(AF);}function Y(AE,AF){AE=(AE||[]);if(!AE.map){return c.map(AE,AF);}return AE.map(AF);}function t(AU,AG,AH){var AS=this.tabContainerNode,AL=this.domNode;if(this.isStatic||!AS||!AL||AL.style.display==="none"){return ;}var AN=AS.firstChild,AT=O(AS),AK=AC(AN,this),AE=Math.max(AK,AT),AR=U(this.children,function(AV){return AV.isSelected;})[0],AP=AH&&AH.domNode||AR&&AR.domNode;if(AU&&AP){if(AT<0){var AM=M.position(AP),AI=M.position(AS),AO=Math.floor(AM.x-AI.x),AQ=Math.floor(AM.x+AM.w-(AI.x+AI.w));if(AH){var AF=Math.ceil(AP.offsetWidth);AO=AO===0?Math.max(AT,-AF):AO;AQ=AQ===0?Math.min(-AT,AF):AQ;}var AJ=AO<0?AO:(AQ>0?AQ:0);AE=this.isAlignRight?AE+AJ:AE-AJ;}}if(AE!==AK){if(AG){this.setAnimation(AN);}AN.style[y(this)]=Math.max(AT,Math.min(AE,0))+"px";}K.call(this);}function C(AE){return AE.hasOwnProperty("index");}function a(){var AE=this.children,AF=0;(AE||[]).every(function(AH,AG){if(!C(AH)){return false;}AF++;AH.index=AG;return true;});(AE||[]).every(function(AG){if(!C(AG)){return false;}AG.total=AF;return true;});}function h(AH,AM){var AL=AH.ENUM_CORNERS,AI=[AL.TOP_LEFT,AL.BOTTOM_LEFT],AE=mstrmojo.func.safeCall("mstrApp.rootCtrl.docCtrl.model.getPageScale",window)()||1,AJ=this.parent;if(AJ.position!=="bottom"){AI.reverse();}AH.setAlignment(AI[0],AI[1]);var AG=M.position(AJ.domNode),AF=AJ.menuNode;var AK=AF.style;AK.top=(AM.y-AG.y)/AE+"px";AK.left=(AM.x-AG.x)/AE+"px";AH.addPopupHandlers(AJ.id,z(true),z(false));AH.hostId=AJ.id;AH.hostElement=AF;AH.isHostedWithin=false;AJ.openPopup(AH.newInstance());}function k(AE){AE.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" mstrAttach:wheel><div class="mstrmojo-VITabStrip-menu" mstrAttach:click><div id="tabCommonIcon" class="mstrmojo-VITabStrip-menuIcon"></div><div id="tabCommonButton" class="mstrmojo-VITabStrip-menuButton"></div><div id="tabCommonMenuHost" class="mstrmojo-VITabStrip-menuButtonHost"></div></div><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-buffer"></div><div class="mstrmojo-VITabStrip-btnBar"><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div class="mstrmojo-VITabStrip-addBtn-Img"></div><div class="mstrmojo-VITabStrip-addBtn-Text"></div></div><div class="mstrmojo-VITabStrip-navBtns"><div id="tabRightButton" class="mstrmojo-VITabStrip-rightBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div><div id="tabLeftButton" class="mstrmojo-VITabStrip-leftBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div></div></div><div class="mstrmojo-VITabStrip-floater"></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabStripMenuNode:function(){return this.domNode.firstChild;},menuImgNode:function(){return this.domNode.firstChild.firstChild;},menuBtnNode:function(){return this.domNode.firstChild.childNodes[1];},menuBtnHostNode:function(){return this.domNode.firstChild.lastChild;},tabContainerNode:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},bufferNode:function(){return this.domNode.childNodes[2];},btnBarNode:function(){return this.domNode.childNodes[3];},addBtnNode:function(){return this.domNode.childNodes[3].firstChild;},addBtnImgNode:function(){return this.domNode.childNodes[3].firstChild.firstChild;},addBtnTxtNode:function(){return this.domNode.childNodes[3].firstChild.lastChild;},navBtnsNode:function(){return this.domNode.childNodes[3].lastChild;},rightBtnNode:function(){return this.domNode.childNodes[3].lastChild.firstChild;},leftBtnNode:function(){return this.domNode.childNodes[3].lastChild.lastChild;},floaterNode:function(){return this.domNode.childNodes[4];},menuNode:function(){return this.domNode.childNodes[5];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isCustomAddBtn:false,isAlignRight:true,tabStripMenuNode:null,menuImgNode:null,menuBtnNode:null,menuBtnHostNode:null,tabContainerNode:null,addBtnNode:null,bufferNode:null,navBtnsNode:null,leftBtnNode:null,rightBtnNode:null,menuNode:null,position:"bottom",selectMovedTab:false,hasFloater:false,tabNavInterval:0,tabObjects:null,layoutConfig:{w:{tabContainerNode:"100%",bufferNode:"6px",addBtnNode:j,navBtnsNode:E,tabStripMenuNode:o},xt:true},onAppStateChange:function q(AL){var AJ=mstrmojo.vi.VisualInsightApp.APP_STATES,AK=AJ.PRESENTATION,AN=AJ.TRANSACTION_MODE,AE=AJ.SELECTOR_TARGETING,AF=AL.value,AM=AL.valueWas,AI=this.isValidMode();if(AF&AK||AM&AK||AF&AE||AM&AE||AF&AN||AM&AN){var AG=this.addBtnNode,AH=this.tabStripMenuNode;if(AG&&AH){AG.style.display=AH.style.display=AI?"block":"none";this.bufferNode.style.display=AI?"none":"block";this.doLayout();}}},setStatic:function Q(AE,AF){this.isStatic=AE;if(!AE){t.call(this,true,AF);}},setTabs:function p(AH,AE){var AF=[];c.forEach(this.children,function(AJ){AF.push(AJ);});this.removeChildren();c.forEach(AF,function(AJ){if(AJ.destroy){AJ.destroy();}});this.tabObjects=AH;var AI=this,AG=(AH&&AH.length)||0;this.addChildren(Y(AH,function(AL,AJ){var AK=AL.k;return AI.getTabCfg(AH,AL,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:AJ,total:AG,draggable:!!AG,dropZone:!!AG,k:AK,isSelected:AK===AE,showTabMenu:h,tabMoved:function(AN){var AM=this.index;AI.moveTab(AM,AM+(AN?-1:1),AM);}});}));t.call(this,true);k(this);},getTabs:function l(){return U(this.children,C);},getTabCfg:function AD(AF,AG,AE){return AE;},deleteTab:function H(AE){var AJ=this.id,AI=this.children[AE],AH=function(){var AK=mstrmojo.all[AJ];AK.removeChildren(AI);AI.destroy();a.call(AK);K.call(AK);k(AK);},AG=AI.domNode.firstChild,AF=AG.style;AF.width=AG.offsetWidth+"px";window.setTimeout(function(){B.addClass(AG,i);M.attachOneTimeEvent(AG,M.transitionend,AH);AF.width=0;},0);},buildRendering:function d(){this._super();B.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function W(){var AE=this._super();t.call(this,true);return AE;},doLayout:function J(){this._super();t.call(this,true);},isValidMode:function D(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},setSelectedTab:function S(AE){var AF,AG;c.forEach(this.children||[],function(AH){AG=AH.k===AE;AH.set("isSelected",AG);if(AG){AF=AH;}});k(this);return AF;},getSelectedTab:function g(){var AG=null,AF=this.children||[],AE;for(AE=0;AE<AF.length;AE++){if(AF[AE].isSelected){AG=AF[AE];break;}}return AG;},onclick:function n(AE){if(mstrApp.hasRequests&&mstrApp.hasRequests()){return false;}if(!this.isValidMode()){return false;}if(AE.getTarget()===this.addBtnImgNode||AE.getTarget()===this.addBtnTxtNode){this.addTab();}return true;},addTab:mstrmojo.emptyFn,clearBtnTooltips:function N(AG){var AE=(AG===this.leftBtnNode),AF=(AG===this.rightBtnNode);if(AE||AF){this.clearTooltips();return true;}return false;},showBtnTooltips:function F(AE){var AG=AE.getTarget().parentNode,AF=this.clearBtnTooltips(AG);if(AF){this.toggleTooltip(AG);}},onmouseout:function u(AE){var AF=AE.getTarget().parentNode;this.clearBtnTooltips(AF);},onmouseover:function G(AE){this.showBtnTooltips(AE);},onwheel:function R(AE){var AF=AE.e.deltaY<0?this.leftBtnNode:this.rightBtnNode;AE.target=AF.firstChild;this.onmousedown(AE);this.onmouseup(AE);},onmouseup:function b(AE){var AG=AE.name||AE.e.name,AF=AG==="wheel"?AE.target.parentNode:AE.getTarget().parentNode;if(AG!=="wheel"){window.setTimeout(function(){this.showBtnTooltips(AE);}.bind(this),x);}if(AF===this.leftBtnNode||AF===this.rightBtnNode){window.clearInterval(this.tabNavInterval);B.removeClass(AF,"active");K.call(this);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}}},onmousedown:function f(AM){var AG=AM.name||AM.e.name,AJ=AG==="wheel"?AM.target.parentNode:AM.getTarget().parentNode,AN=(AJ===this.leftBtnNode),AH=(AJ===this.rightBtnNode);if(AN||AH){var AL=this.tabContainerNode,AI=AL.firstChild,AK=this;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}B.addClass(AJ,"active");var AE=function(){var AQ=O(AL),AT=AC(AI,AK),AU=AT-AQ,AS=0-AT,AV=false;AK.setTabProperties();var AO=AK.getCornerTabs()||[],AR=U(AO,function(AW){if(AN&&AW.isLeftMost||AH&&AW.isRightMost){return AW;}})[0],AP=0;if(AR){AV=AR.isCutoff;AP=AV?(AN?AR.leftEdgeHiddenWidth:AR.rightEdgeHiddenWidth):Math.ceil(AR.domNode.offsetWidth);AP=Math.min(AP,AN?AS:AU);AP=AK.isAlignRight?(AN?-AP:AP):(AN?AP:-AP);}if(!AV&&AG!=="wheel"){AK.setAnimation(AI);}AI.style[y(AK)]=parseInt(AI.style[y(AK)]||0)+AP+"px";return AV;};var AF=AE();if(AF){AE();}this.tabNavInterval=window.setInterval(function(){AE();},A);}},setTabProperties:function I(){var AE=this.tabContainerNode,AF=M.position(AE);c.forEach(this.children||[],function(AK){var AN=AK.domNode,AI=M.position(AN),AL=Math.floor(AI.x-AF.x),AH=Math.floor(AI.x+AI.w-(AF.x+AF.w)),AG=Math.ceil(AN.getBoundingClientRect().width),AJ=0;AK.isCutoff=AK.isHidden=AK.isLeftMost=AK.isRightMost=false;AK.leftEdgeHiddenWidth=AK.rightEdgeHiddenWidth=0;if(AL<0){var AM=Math.abs(AL);AJ=AG-AM;AK.isLeftMost=AJ>=0;AK.isCutoff=AK.isLeftMost&&AM>0&&AJ>0;AK.isHidden=AJ<=0;AK.leftEdgeHiddenWidth=AM;}else{if(AH>0){AJ=AG-AH;AK.isRightMost=AJ>=0;AK.isCutoff=AK.isRightMost&&AH>0&&AJ>0;AK.isHidden=AJ<=0;AK.rightEdgeHiddenWidth=AH;}}});},getCornerTabs:function e(){return U(this.children,function(AE){return AE.isLeftMost||AE.isRightMost;});},setAnimation:function Z(AE){B.addClass(AE,i);M.attachOneTimeEvent(AE,M.transitionend,function(){B.removeClass(AE,i);});},createTooltip:function AA(AI){var AG=AI.getAttribute("tooltip"),AK;if(!AG){return null;}AK=document.createElement("div");AK.className="navBtnTooltip";AK.appendChild(document.createTextNode(AG));var AJ=document.body.firstChild;AJ.parentNode.insertBefore(AK,AJ);var AM=5,AF=AK.offsetWidth-25,AL=AI.getBoundingClientRect(),AE=AK.getBoundingClientRect(),AH=AL.top-(AE.height+AM);AK.style.top=AH+"px";AK.style.left=(AL.left-AF)+"px";return AK;},clearTooltips:function m(){window.clearTimeout(this._tooltipTimeOut);var AE=document.querySelectorAll(".navBtnTooltip");c.forEach(AE||[],function(AF){AF.parentNode.removeChild(AF);});},toggleTooltip:function AB(AE){window.clearTimeout(this._tooltipTimeOut);if(AE.disabled){this._tooltipTimeOut=window.setTimeout(function(){this.createTooltip(AE);}.bind(this),P);}},moveTab:function L(AE,AM,AK,AJ){var AF=this.children,AN=AF.splice(AE,1)[0];AF.splice(AM,0,AN);a.call(this);this.setAnimation(this.tabContainerNode.firstChild);var AG=this.containerNode,AH=AG.childNodes,AL=AG.removeChild(AH[AE]),AI=AH[AM];if(AI){AG.insertBefore(AL,AI);}else{AG.appendChild(AL);}if(this.selectMovedTab||AN.isSelected){t.call(this,true,true,AN);}if(!AJ&&AK!==undefined&&AK!==AM){this.commitTabMove(AK,AM);k(this);}},commitTabMove:function w(AE,AF){throw new Error(this.scriptClass+" must implement commitTabMove.");},updateTabTable:function s(AE){if(!this.isStatic){t.call(this,true,AE);}},setLinkIcon:function X(AE,AH){var AG,AF;if(AE){if(AH){AF="src";c.some(this.getTabs(),function(AI){if(AI.k===AH){AG=AI;}return AG;});if(!AG){return ;}}else{AF="tgt";AG=this.getSelectedTab();}B.addClass(AG.domNode,AF);}else{AF=AH?["src","tgt"]:"tgt";c.forEach(this.children,function(AI){B.removeClass(AI.domNode,AF);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi._MonitorsAppState","mstrmojo.EditableLabel","mstrmojo._TouchGestures","mstrmojo.string","mstrmojo.vi.ui.toolbars.TitleToolbar");var J=mstrmojo.dom,N=mstrmojo.string;mstrmojo.vi.ui.TitleBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TitleBar",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" aria-label="{@en@ariaLabel}" mstrAttach:contextmenu,click,keydown><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',markupSlots:{leftToolNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},rightToolNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode;}},markupMethods:{onhasContextMenuButtonChange:function(){var Q=this.hasContextMenuButton;this.tbToolbar.set("visible",Q);this.tbToolbar.set("enabled",Q);},ontitleChange:function(){this.lblTitle.set("text",this.title||" ");},ontoolbarCfgChange:function(){var Q=this.toolbarCfg;if(!Q){return ;}this.tbToolbar.set("toolbarCfg",Q);this.doLayout();},onariaLabelChange:function(){this.domNode.setAttribute("aria-label",N.encodeHtmlString(this.ariaLabel,true));},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},h:{leftToolNode:"100%",textNode:"100%",rightToolNode:"100%"},xt:true},lblTitle:null,tbToolbar:null,hasContextMenuButton:true,editTitleOnClick:false,editTitleOnDoubleClick:true,editTitleOnTwoClicks:false,title:"",ariaLabel:"",close:mstrmojo.emptyFn,toolbarCfg:null,beganEditingTitlebar:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,allowHTML:false,useRichTooltip:true,init:function P(Q){this._super(Q);this.addChildren([].concat(this.getLeftToolbarChildren()).concat(this.getTitleChildren()).concat(this.getRightToolbarChildren()));},shouldShowTooltip:function K(Q,S){var R=Q.target||J.eventTarget(Q.hWin,Q.e);return R===this.textNode.firstChild&&(R.scrollWidth>R.clientWidth);},getTooltipContent:function L(Q){var S=Q.target||J.eventTarget(Q.hWin,Q.e),R=S.innerHTML;return R;},showTooltip:function M(Q,R){if(this.shouldShowTooltip(Q,R)){this._super(Q,R);}},updateTooltipConfig:function I(S){var Y=S.target||J.eventTarget(S.hWin,S.e),Q=J.position(Y);var U=this.getTooltipContent(S),X=Q.y+Q.h+3,W=Q.x+4,R="vi-regular vi-tooltip-A";if(Y.className==="right-toolbar customShapeWarn"){U=mstrmojo.desc(16684,"Add an attribute to enable data labels and enhance the performance of filtering");W+=24;X-=30;R="vi-warning vi-tooltip-C";}this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:U,top:X,left:W,cssClass:R};},getLabelNode:function C(){return this.lblTitle.domNode;},getMenuConfig:function B(){var Q=this.toolbarCfg;if(Q){if(Q.hasMenuItems()){return Q;}}return null;},setToolbarVisibility:function D(Q){this.tbToolbar.set("visible",Q);},editTitle:function O(){this.lblTitle.set("isEditing",true);},onAppStateChange:function F(Q){var R=this.lblTitle,S=mstrApp.isAppStatePresentation(),U=!!(Q.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION);if(S&&this._confgTitleEditable===undefined){this._confgTitleEditable=this.editTitleOnClick||this.editTitleOnDoubleClick||this.editTitleOnTwoClicks;}R.set("isEditing",false);if(S||U){R.set("editOnDoubleClick",!S&&this._confgTitleEditable);}},getLeftToolbarChildren:function A(){},getTitleChildrenLayoutOffsets:function H(){return{h:2,w:2};},getTitleChildren:function G(){return[{scriptClass:"mstrmojo.EditableLabel",slot:"textNode",alias:"lblTitle",allowHTML:this.allowHTML,bindings:{editOnClick:function(){return this.parent.editTitleOnClick;},editOnDoubleClick:function(){return this.parent.editTitleOnDoubleClick;},selectable:function(){return this.isEditing;},editOnTwoClicks:function(){return this.parent.editTitleOnTwoClicks;}},onTextEditBegin:function(){this.parent.beganEditingTitlebar();},onTextEditComplete:function(S,R){this.parent.titleEdited(this.text,S,R);},getLayoutOffsets:function Q(){return this.parent.getTitleChildrenLayoutOffsets();}}];},getRightToolbarChildren:function E(){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"rightToolNode",alias:"tbToolbar",visible:true,useRichTooltip:true,enableAccessibility:this.enableAccessibility,bindings:{hasContextMenuButton:function(){return this.parent.hasContextMenuButton;}}}];}});if(J.isTouchOptimizationEnabled()){mstrmojo.mixin(mstrmojo._TouchGestures,mstrmojo.vi.ui.TitleBar.prototype);mstrmojo.mixin(mstrmojo.mobile.vi.ui.rw._IsInPanelStack,mstrmojo.vi.ui.TitleBar.prototype);mstrmojo.mixin(mstrmojo.mobile.vi.ui._TitleBarSupportsTouches,mstrmojo.vi.ui.TitleBar.prototype);}}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.hash.copy;mstrmojo.ui.editors.controls.AdvancedColorPickerPopup=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPicker,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",locksHover:true,init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-AdvColorPickerPopup");},showPickerForCurrentMode:function D(){this._super();var G=this,F=function F(){if(G.visible){G.adjustCornersForPopupOverflow();}};if(this.pickerMode===2){this.colorStyle.markupMethods=A({onselectedIndexChange:F},A(this.colorStyle.markupMethods));}F();},onOpen:function C(){var F=this.parent;this.set("color",F?F.selectedValue:this.color);this.renderContent();this._super();},colorCanceled:function B(){this.close();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.expr","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.func","mstrmojo.Label","mstrmojo.Box","mstrmojo.Editor","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.util.PlatformHelper");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var W=mstrmojo.array,Z=mstrmojo.css,Q=mstrmojo.hash,R=mstrmojo.func,D=mstrmojo.string,P=mstrmojo.Button.newWebButton,S=mstrmojo.dom,Y="mstrmojo-link-validation",U="mstrmojo-link-vt",M=mstrmojo.expr,E=M.STP,H=function H(a){if(a.old){this.removedLinks.push(a);}this.links.removeChildren(a);},X=function X(){var AA=this.dsMap,w=this.docModel,e=w.datasets,AC=function AC(i,k,a){var j={n:a||"",did:k||null,parent:i||null,lv:(i?i.lv+1:-1),children:[]};if(i){i.children.push(j);}return j;},m=AC(),d,c,b,o,f,y,q,AB,z,u,t,s,h,g,l,p,n;Q.forEach(e,function(a){if(w.isMDXDataset(a)){f=a.tables;for(u=0,g=f.length;u<g;u++){y=f[u];d=AC(m,y.did,y.n);d.isMDX=true;for(t=0,l=y.dimensions.length;t<l;t++){q=y.dimensions[t];c=AC(d,q.did,q.n);for(s=0,p=q.hierarchies.length;s<p;s++){AB=q.hierarchies[s];b=AC(c,AB.did,AB.n);for(h=0,n=AB.att.length;h<n;h++){z=AB.att[h];o=AC(b,z.did,z.n);o.att=z;AA[y.did+":"+z.did]=o;}}}}}else{d=AC(m,a.did,a.name);d.isMDX=false;W.forEach(a.att,function(i){o=AC(d,i.did,i.n);o.att=i;AA[a.did+":"+i.did]=o;});}});return m;},B=function B(g,h){g=W.ensureArray(g);var f=this,e=this.attribute.did,i=this.docModel,c=this.datasetId,b="\u001F",a={success:function(k){var m=k.als,j=(i.als&&i.als.links)||{},l=f.dsTree;W.forEach(g,function(w,p){var x={},n={},o=[],q={},u=e+" "+w,s=W.filter(m[p].ats,function(y){return !i.isInDataset(c,y.at,["att"]);}),t=function t(y,z){if(!q[y]){q[y]={};}if(!q[y][z]){q[y][z]=true;}};W.forEach(s,function(AA){var y=AA.at,z=AA.fms;x[y]=true;if(z){W.forEach(z,function(AB){t(y,AB.fm);});}});Q.keyarray(j).forEach(function(y){if(y===u){W.forEach(j[y],function(z){z=z.split(" ");x[z[0]]=true;t(z[0],z[1]);});}});if(Q.keyarray(x).length>0){W.forEach(l.children,function(z){var y=function(AA){var AB;if(!AA.att||AA.att.paraId){return ;}AA=AA.att;if(x[AA.did]){if(!n[AA.n]){n[AA.n]={};}if(!n[AA.n][AA.did]){n[AA.n][AA.did]=[];}n[AA.n][AA.did].push(z.n);AB=Q.copy(AA,AB);AB.dsId=z.did;o.push(AB);}};if(z.isMDX){W.forEach(z.children,function(AA){W.forEach(AA.children,function(AB){W.forEach(AB.children,y);});});}else{W.forEach(z.children,y);}});}f.tgtAttrs[w]=o;f.tgtForms[w]=q;f.namesHash[w]=n;});}},d={taskId:"validateDocumentLinks",msgID:i.mid,action:1,attributeList:e,attributeFormList:g.join(b)};mstrApp.serverRequest(d,R.wrapMethods(a,h));},G=function(d,f,b,e){d.richTooltip=null;if(!d.isSearching){var c=f&&f.scrollWidth>f.clientWidth;b=c?mstrmojo.desc(14648,"## from ###").replace("##",b):"";if(e){if(!c){b=mstrmojo.desc(14640,"From ###");}b=b.replace("###",e);}if(f.className.includes("adc-disabled")){b=mstrmojo.desc(28781,"To ensure accurate bot responses, manual linking is not supported for OLAP cubes and MTDI cubes with multiple tables.");}var a=mstrmojo.dom.position(f);d.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:b,top:a.y-6,left:a.x};}},F=function F(t){var e=this,j=mstrmojo.util.PlatformHelper.isAIDatasetCollectionMode(),q=mstrmojo.util.PlatformHelper.isUslBotEnabledAndHasPartiallyDumpedDataset(),l=function(u){return u&&((u.st===E.REPORT_EMMACUBE&&Q.walk("tables.length",u)===1)||(u.st!==E.REPORT_CUBE&&u.st!==E.REPORT_EMMACUBE));},h=function(y,u){var x=Q.walk("docModel.datasets."+y,e),w=Q.walk("docModel.datasets."+u,e);return l(x)&&l(w);},k=function(x){var u=x.fs,y=x.de,w=[];(u||[]).forEach(function(z){if(z.obf&&(!y||z.idf)){w.push({n:z.fnm,v:z.fid,idf:z.idf});}});return w;},c=k(this.attribute),f=function(y,w){var u=k(y);var z=(e.tgtForms[w]&&e.tgtForms[w][y.did])||{};var x=[];W.forEach(u,function(AA){if(z[AA.v]){x.push(AA);}});return x;},i=function i(w){var u=[];W.forEach(e.tgtAttrs[w],function(x){if(f(x,w||e.idFormId).length>0){var z=e.namesHash[w],y=x.n;if(z[x.n]&&Q.keyarray(z[x.n]).length>1){y=y+" ("+z[x.n][x.did].join(",")+")";}u.push({n:x.n,v:x,tt:y});}});if(u.length===0){u.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return u;},g=i((t&&t.srcFormId)||this.idFormId),b=function(u,w){return W.find(u,w?"v":"idf",w||true);},n=function(w){var u=-1;g.forEach(function(y,x){if(y.v.did===w){u=x;}});return u;},d=function(w){var u=g[w];if(!u){return mstrmojo.desc(13397,"Select an attribute");}return u.n;},m=function(w){var x=w.items,u=w.selectedIndex;if(u>=0){if(x[u].idf){return ;}}x.forEach(function(z,y){if(z.idf){w.set("selectedIndex",y);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!t,oldMeta:t,getMeta:function(){var u=this.linkFromForm,x=this.linkToAtt,w=this.linkToForm;return{srcAttrId:e.attribute.did,srcFormId:u.items[u.selectedIndex].v,tgtAttrId:x.items[x.selectedIndex]&&x.items[x.selectedIndex].v.did,tgtFormId:w.items[w.selectedIndex]&&w.items[w.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:e.attribute.n,useRichTooltip:true,updateTooltipConfig:function(z){var y=z.target,u=D.encodeHtmlString(this.text),w=e.datasetId,x=w?D.encodeHtmlString(e.docModel.datasets[w].name):"";G(this,y,u,x);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:c,selectedIndex:b(c,t&&t.srcFormId),onitemSelected:function(w){var u=this,x=function(){var z=u.parent.linkToAtt;g=i(w.v);z.set("items",g);z.set("selectedIndex",-1);z.set("text",mstrmojo.desc(13397,"Select an attribute"));Z.addClass(z.selectedNode,"nvo");},y={success:x};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!w.idf){m(this.parent.linkToForm);if(!e.tgtForms[w.v]){B.call(e,w.v,y);return ;}}x();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:g,text:d(n(t&&t.tgtAttrId)),selectedIndex:n(t&&t.tgtAttrId),allowCustomText:true,allowEmptyText:true,allowHTML:false,showTooltipAlways:true,updateTooltipConfig:function(AA){var z=AA.target,u=z.getAttribute("tt"),x=this.getSelectedItem(),w=x?x.v.dsId:null,y=w?D.encodeHtmlString(e.docModel.datasets[w].name):"";if(this.selectedNode===z&&x){u=x.tt;}G(this,z,D.encodeHtmlString(u),y);},onitemSelected:function(z){if(!z||z.v.did===null){return ;}var y=this.parent.linkToForm,x=this.parent.linkFromForm,w=f(z.v,x.items[x.selectedIndex].v),AA=function AA(AB,AD){var AC=W.find(AB,AD?"v":"idf",AD||true);if(AC===-1&&AB.length>0){AC=0;}return AC;},u;W.forEach(w,function(AB){if(AB.idf){u=false;return false;}});if(u){N.call(e,true);}y.set("items",w);y.set("selectedIndex",AA(w,!this.hasRendered&&t&&t.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}L.call(e);},onPopupWidgetOpened:function o(){if(this.selectedIndex===-1){this.set("text","");}Z.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function a(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));Z.addClass(this.selectedNode,"nvo");}else{Z.removeClass(this.selectedNode,"nvo");}this.hideTooltip();W.forEach(e.collapseTargets,function(u){u.className="arrow-b";Z.removeClass(u.parentNode.parentNode,"collapse");});W.forEach(e.collapseTreeNodes,function(u){delete u.collapse;});W.forEach((this.list.itemsContainerNode||{}).childNodes,function(u){u.style.display="";});},postBuildRendering:function s(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){Z.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function p(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,allowHTML:false,locksHover:true,listHooks:{select:function u(AB,AC,AA){this.parent.set("selectedIndex",AA);this.close();}},onclick:function w(AI){try{var AB=AI.getTarget(),AJ=this.getItemFromTarget(AB),AF=S.findAncestorByAttr(AB,"idx",true,this.domNode),AE=this.items;if(AE){this.parent.set("items",AE);}if(AJ){AI.cancel();if(j&&AB.className.includes("adc-disabled")){return ;}if(AB.className==="arrow-b"||AB.className==="arrow-r"){var AA=this.itemsContainerNode.childNodes,AD=function AD(AL){var AK;while(AL){AK=AL.className||"";if(AK.indexOf("lv")===0){return window.parseInt(AK.substring(2),10);}AL=AL.firstChild;}return null;},AH=function AH(AK,AN){var AM=e.dsMap,AL=AM[AK.dsId+":"+AK.did];while(AL){if(AL.lv===AN){return AL;}AL=AL.parent;}return null;},AG=function AG(){var AT=(AB.className==="arrow-b"),AN=AB.parentNode.parentNode,AK=AD(AN),AO=AJ._renderIdx,AL=AH(AJ.v,AK),AR=AE.length,AQ,AM,AP,AS,AV,AU;AB.className=AT?"arrow-r":"arrow-b";if(!e.collapseTargets){e.collapseTargets=[];}e.collapseTargets.push(AB);Z.toggleClass(AN,"collapse",AT);AL.collapse=AT;if(!e.collapseTreeNodes){e.collapseTreeNodes=[];}e.collapseTreeNodes.push(AL);for(AQ=AO+1;AQ<AR;AQ++){AM=AA[AQ];AP=AD(AM);if(AP<=AK){break;}AS=AH(AE[AQ].v,AP);AV=AS.parent;AU=true;while(AV){if(AV.collapse){AU=false;break;}AV=AV.parent;}AM.style.display=(AU?"":"none");}};AG();}else{if(AF&&AF.node.className.indexOf("item")!==-1){this.doItemSelect(AJ,AI||{});}}}}catch(AC){mstrApp.onerror(AC);}},getItemProps:function x(AC,AA){var AB=mstrmojo._IsList.getItemProps.call(this,AC,AA);var AD=AC.cls;if(AD){AB.addCls(AD);}return AB;},getItemMarkup:function z(AN,AM){if(AN.v.did===null){return'<{@tag} class="item {@cls}" did="'+AN.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AO=[],AJ=AN.v.did,AD=AN.v.dsId,AE=AD?e.docModel.datasets[AD]:null,AC=AE?D.encodeHtmlString(AE.name):"",AL=AM>0&&this.items[AM-1].v,AH=e.dsMap,AG=AH[AN.v.dsId+":"+AJ],AB=AH[(AL&&(AL.dsId+":"+AL.did))];AO.push("</div>");while(AG){if(AG.lv===-1){break;}if(AG.att){var AK=!j||h(e.datasetId,AD)||q,AF=AK?"":" adc-disabled",AI=AG.att.da?"derived-attr":"attr";AO.push('<div class="lv'+AG.lv+AF+' dim item {@cls}" tt="'+AN.tt+'" did="'+AJ+'" dsName="'+AC+'" idx="{@idx}" style="{@style}"><div><div class="'+AI+'"></div></div>{@en@n}</div>');}else{if(AG!==AB){var AA=D.encodeHtmlString(AG.n);AO.push('<div class="lv'+AG.lv+' dim" dtt="'+AA+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+AA+"</div>");}else{break;}}AG=AG.parent;AB=(AB&&AB.parent)||null;}AO.push("<div>");return AO.reverse().join("");},updateTooltipConfig:function y(AF){var AE=AF.target,AC=AE.getAttribute("tt"),AB=AE.getAttribute("dtt"),AD=AE.getAttribute("dsName"),AA=AC||AB;if(AA){G(this,AE,D.encodeHtmlString(AA),AD);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(u){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!u.idf){m(this.parent.linkFromForm);}}}},P("",function(){H.call(e,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},N=function(a){Z.toggleClass(this.editorNode,"mstrmojo-advanced",a);},O=function(d){var b=this,f=Y,a;try{mstrmojo.all[f].destroy();}catch(c){}a={scriptClass:"mstrmojo.Editor",id:f,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[P(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[f].destroy();J.call(b);},true)],children:[{scriptClass:"mstrmojo.Label",text:d}],visible:true,zIndex:1000};mstrmojo.insert(a).render();},J=function(){var c=this,b=this.illLinks,a=this.links.children,d=U;W.forEach(b,function(e){e=e.al;W.forEach(a||[],function(g){var i=g.getMeta(),j=g.linkToAtt,f,h;if(i.srcAttrId===e.alaid1&&i.tgtAttrId===e.alaid2){if(!mstrmojo.all[d]){h=new mstrmojo.Tooltip({id:d,cssClass:c.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});S.attachEvent(c.editorNode,"click",function(){h.close();Z.toggleClass(j.selectedNode,"mstrmojo-Warning",false);});}else{h=mstrmojo.all[d];}h.close();f=mstrmojo.dom.position(j.selectedNode);h.set("top",f.y-6);h.set("left",f.x);h.set("content",e.alstmsg);Z.toggleClass(j.selectedNode,"mstrmojo-Warning",true);h.open();return false;}});});},A=function(){var a=mstrmojo.all[U];if(a){a.close();}},L=function L(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},I=function I(){var a=this,b=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){F.call(a);A.call(a);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){N.call(a,true);A.call(a);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){N.call(a,false);A.call(a);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(b);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var d=this,b=this.docModel,c=function(){var e=(b.als&&b.als.links)||{},f=[];Q.keyarray(e).forEach(function(g){if(g.indexOf(d.attribute.did+" ")===0){e[g].forEach(function(h){f.push({srcAttrId:g.split(" ")[0],srcFormId:g.split(" ")[1],tgtAttrId:h.split(" ")[0],tgtFormId:h.split(" ")[1]});});}});return f;},a;this.set("buttons",[P(mstrmojo.desc(1442,"OK"),function(){var l=[],f=d.links.children,e=function(){var m=b.controller,n=b.controller.getRefreshCallback();if(l.length>0){m.cmdMgr.execute({execute:function(){this.submit(l,n,{style:{params:{treesToRender:3}}});},urInfo:{callback:n}});}d.close();},k=false,h,i;d.removedLinks.forEach(function(m){h=Q.copy(m.oldMeta,{act:"applyAttributeLinking",unlink:true});l.push(h);});(f||[]).forEach(function(m){if(m.old&&m.oldUpdated){h=Q.copy(m.oldMeta,{act:"applyAttributeLinking",unlink:true});l.push(h);}if(!m.old||(m.old&&m.oldUpdated)){i=m.getMeta();if(!i.tgtAttrId){return ;}h=Q.copy(i,{act:"applyAttributeLinking",unlink:false});l.push(h);}});W.forEach(l,function(m){if(!m.unlink){k=true;return false;}});if(!k){e();return ;}var j={taskId:"validateDocumentLinks",msgID:b.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(l)+"}"},g={success:function(m){if(m.als&&m.als.length>0){var n="";W.forEach(m.als,function(o){n+=o.al.alstmsg+"\n";});d.illLinks=m.als;O.call(d,n);return ;}e();}};mstrApp.serverRequest(j,g);},true,{enabled:false}),P(mstrmojo.desc(221,"Cancel"),function(){d.close();})]);I.call(this);a=c(this.attribute.did);if(a.length>0){a.forEach(function(e){F.call(d,e);});L.call(this);}else{F.call(this);}this._super();},close:function K(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(g){var b=mstrmojo.insert(Q.copy(g,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),e=b.attribute,h=e.did,a=b.docModel,d=(a.als&&a.als.links)||{},c=[],f={success:function(){b.set("visible",true);b.render();}};W.forEach(e.fs,function(i){if(i.idf){b.idFormId=i.fid;return false;}});Q.keyarray(d).forEach(function(j){var i=j.split(" ");if(i[0]===h){c.push(i[1]);}});if(W.indexOf(c,b.idFormId)===-1){c.push(b.idFormId);}b.dsMap={};b.dsTree=X.call(b);B.call(b,c,f);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.hash","mstrmojo.string","mstrmojo.Box","mstrmojo.Button","mstrmojo.Label","mstrmojo.ui.Checkbox","mstrmojo.ui.PopupButton","mstrmojo.ui.PopupWidget","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.ThreeColumnContainer","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.InlineDialogTargetingBase");mstrmojo.requiresDescs(134,221,16166,11955,11956,26332,26333);var J=mstrmojo.css,G=mstrmojo.dom,D=mstrmojo.hash,B=mstrmojo.func,M=mstrmojo.string,P=mstrmojo.vi.enums.EnumFeatures,F=mstrmojo.Button.newWebButton,K="\u001E";mstrmojo.vi.ui.FilterBoxInlineDialog=mstrmojo.declare(mstrmojo.vi.ui.InlineDialogTargetingBase,null,{scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",tocEnabled:false,selectFilters:true,optionsStateForRefresh:{openOnRefresh:false,adtsValue:false},cachedADTSValue:null,init:function O(Q){this._super(Q);J.addWidgetCssClass(this,"filter-box-dialog");},postBuildRendering:function A(){var Q=D.walk("changes.adtsValue",this);this._super();if(Q!==undefined){this.changes.adtsValue=Q;this.notifyApply(this.vis.model);}},_setTargetsFunc:function N(){var Q=this.changes;if(Q.adtsValue!==undefined){this.vis.setTargetsWithADTSSetting(Q.filterKeys,Q.adtsValue===true?1:0);}else{this.vis.setTargets(Q.filterKeys);}},toggleFields:function H(){if(this.cgbs.length!==0){this.forType.set("visible",true);}},getOriginalTargetKeys:function E(){if(mstrApp.supportFeature(P.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){return this.vis.getTargetKeys();}return this._super();},isSelectionDirty:function L(Q){return(this._super(Q)||D.walk("changes.adtsValue",this)!==undefined);},enableOptions:mstrmojo.emptyFn,_createOptionsButton:function I(){var S=this,R=D.walk("vis.model",S);return{scriptClass:"mstrmojo.ui.PopupButton",alias:"options",cssClass:"filter-box-dialog-option-button",cssDisplay:"inline-block",isHostedWithin:false,anchorSlot:"btnNode",markupString:'<div id="{@id}" class="mstrmojo-ui-OptionsButton {@cssClass}" style="{@cssText}"><div class="opts" mstrAttach:click></div></div>',markupSlots:{btnNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onRender:function(){if(this._super){this._super();}J.toggleClass(this.domNode,"disabled",!this.enabled);},onenabledChange:function(){J.toggleClass(this.domNode,"disabled",!this.enabled);},getPopupWidget:function W(){return this.adtsEditor;},getPopupConfig:function Q(){var Y=mstrmojo.ui.PopupConfig.ENUM_CORNERS,X=this.constructor.prototype.getPopupConfig.call(this);X.alignment={host:Y.BOTTOM_RIGHT,popup:Y.TOP_RIGHT};return X;},openDialog:function(){var Z=S.optionsStateForRefresh,Y=this.adtsEditor,X=Y.optContent.optCheckBox;if(Z.openOnRefresh){Z.openOnRefresh=false;X.set("checked",Z.adtsValue);Y.open();}},closeDialog:function(){var Z=S.optionsStateForRefresh,Y=this.adtsEditor,X=Y.optContent.optCheckBox;if(Y.visible){Z.openOnRefresh=true;Z.adtsValue=X.checked;Y.close();}},children:[{scriptClass:"mstrmojo.ui.PopupWidget",alias:"adtsEditor",cssClass:"filter-box-dialog-option-popup",visible:false,onClose:function(){this.optContent.optCheckBox.set("checked",S.cachedADTSValue);this.buttons.enableApply(false);},handleSelectionSubmit:function(Y){var Z=S.changes;if(Y){var X=this.optContent.optCheckBox;if(Z.adtsValue!==undefined){delete Z.adtsValue;}else{Z.adtsValue=X.checked;}S.cachedADTSValue=X.checked;S.notifyApply(R);}this.close();},children:[{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",alias:"optContent",cssClass:"mstrmojo-vi-ADTS-setting-content",children:[{scriptClass:"mstrmojo.ui.Checkbox",slot:"col1Node",alias:"optCheckBox",cssClass:"setting-checkbox",cssDisplay:"inline-block",checked:!!S.cachedADTSValue,oncheckedChange:function(){var X=this.parent.parent;if(X){X.buttons.enableApply(this.enabled&&this.checked!==S.cachedADTSValue);}}},{scriptClass:"mstrmojo.Label",slot:"col2Node",cssClass:"setting-label",cssDisplay:"inline-block",text:mstrmojo.desc(26332,"Update targets automatically"),onclick:function(){var X=this.parent.optCheckBox;X.set("checked",!X.checked);}},{scriptClass:"mstrmojo.Label",slot:"col3Node",cssDisplay:"inline-block",cssClass:"info-icon",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-right",posType:mstrmojo.tooltip.POS_TOPRIGHT,enableHover:true,content:mstrmojo.desc(26333,"The target filters automatically unset when this filter selection changes. If a target filter is dynamic, the default selection applies. This setting does not apply to visualizations being targeted by this selector.")},useRichTooltip:true,updateTooltipConfig:function U(){var Y=this.richTooltip,X=G.position(this.domNode);Y.left=X.x+X.w+3;Y.top=X.y+X.h+7;}}]},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"buttonBox",children:[F(mstrmojo.desc(134,"Apply"),function(){var X=this.parent.parent;X.handleSelectionSubmit(true);},true,{cssDisplay:"inline-block",enabled:false}),F(mstrmojo.desc(221,"Cancel"),function(){var X=this.parent.parent;X.handleSelectionSubmit(false);},false,{cssDisplay:"inline-block"})],enableApply:function(X){this.children[0].set("enabled",X);}}]}]};},_addChildren:function C(){var c=this,S=c.vis,a=S.model,d=(S.isAMSelector instanceof Function)&&S.isAMSelector(),R=(S.isPanelSelector instanceof Function)&&S.isPanelSelector(),f=mstrApp.supportFeature(P.SUPPORT_ACROSS_PANEL_TARGET_SELECTION),U=d?mstrmojo.desc(17614,"Use <span>#</span> to replace objects in"):(R?mstrmojo.desc(19743,"Use <span>#</span> to select panels in"):mstrmojo.desc(16166,"Use <span>#</span> to filter data in")),b=d?mstrmojo.desc(25957,"Use <span>#</span> to replace objects in targets"):(R?mstrmojo.desc(25958,"Use <span>#</span> to select panels in targets"):mstrmojo.desc(25959,"Use <span>#</span> to filter data in targets")),W=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:(f?b:U).replace("#",M.encodeHtmlString(S.title)),visible:true},c._createTruncatedList(),{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"inline-block",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(c.cgbs[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(h){c.changes.forAllData=h.v;},onenabledChange:function(){J.toggleClass(this.domNode,"disabled",!this.enabled);}}],Q=S.parent.children||[],Z,Y={};if(mstrApp.supportFeature(P.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){Q=a.getAllVisibleUnits();}for(Z=Q.length-1;Z>=0;Z--){c._addVis(Q[Z],Y);}if(d||R){var g=S.defn.tks.split(K);D.forEach(Y,function(i,h){if(g.indexOf(h)>-1){i.v=true;}});}var X=S.boxContent,e=B.safeCall("isVIADTSSettingVisible",X)();if(e){if(c.cachedADTSValue===null){c.cachedADTSValue=parseInt(D.walk("defn.adts",X)||0,10)===1;}W.push(this._createOptionsButton());}this.addChildren(W);this.targetKeys=Y;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.vi.util.NumberFormatUtility");var M=mstrmojo.hash,d=mstrmojo.array,G=mstrmojo.num,J=mstrmojo._FormatDefinition,B=mstrmojo.css,b=mstrmojo.mstr.EnumFunction,L=mstrmojo.locales,H=mstrmojo.Button.newIconButton,I=mstrmojo.vi.util.NumberFormatUtility,s="1234.12",E=J.NumberFormatCategory,p=J.FixedNegative,F=J.CurrencyNegative,g=J.PercentNegative,K=J.DefaultFormat.FormattingNumber,Q="nf-PullDown ",o="nf-MiddleRow ",Y="nf-MiddleRow nf-HasWidget ",a,U,f=function f(u,t){return{cls:this.value===u.v?"selected":"",v:u.v||"",n:u.n||"",style:u.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===t?"selected":""};};var S=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(J.Category.slice(2)).concat(J.AdditionalCategory),e=[{n:"$"},{n:""},{n:""},{n:""},{n:"fr."}];function D(w,u){var t=d.find(w,"v",u);return t===-1?"":w[t].f;}function N(t){var w=this.parent.parent.parent.myData,u=t.v;w.set("format",D(this.items,u));w.set("negativeNumbers",u);B.toggleClass(this.selectedNode,"red",t.r);}function Z(w,x,t){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:w,enableAccessibility:true,useTabIndex:true,focusOnPopup:true,syncSelectedIndex:false,onitemSelected:function u(y){var z=this.parent;while(z&&(!z.data||typeof z.data[x]==="undefined")){z=z.parent;}if(z){z.data.set(x,y.v);if(t){z.children[0].preview.preview_label.set("text",y.n);}}}};}function j(t,x,y,w,u){return I.getNegativeList(t,x,y,w,u);}function W(w){var t="1"+(w>0?".":"").toString(),x="0"+(w>0?".":"").toString(),u;for(u=0;u<w;u++){t+=u%10;x+="0";}return[t+"E+03",x+"E+0#"];}function R(AH,AJ){var AB="\u00A4",AF=/"[^"]*"/g,w=AH.match(AF),AK="\u0091",AG=/\[[^\]]*\]/g,t=AH.match(AG),AE,AI;AE=AH.replace(AF,AB);AE=AE.replace(AG,AK);var y=AH.indexOf("."),AD=G.getDecimalLength(AH),AA=Math.max(0,AD+AJ),x=AH.match(/\d(?!((\d)|(,\d)))/g),u=y!==-1?AH.charAt(y-1):x&&x[0],AC=(u||"0")+(AA>0?".":"").toString();for(var z=0;z<AA;z++){AC+="0";}AE=AE.replace(AD===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,AC);AE=AE.split(AB);AI=AE[0];d.forEach(w,function(AM,AL){AI+=AM+AE[AL+1];});AE=AI.split(AK);AI=AE[0];d.forEach(t,function(AM,AL){AI+=AM+AE[AL+1];});return AI;}function O(AB,t,AA,z,w,u){var y=AB.parent.parent.parent,x=j(t,AA.decimalPlaces,z,w,u);AA.set("format",D(x,AA.negativeNumbers.toString()));AB.set("items",x);AB.set("selectedIndex",d.find(x,"v",AA.negativeNumbers.toString()));y.preview.preview_label.set("text",I.applyFormatToNumber(y.myData.format,s.replace(/\./g,L.number.DECIMALSEPARATOR)));}function m(){var AC=this.parent.parent,AG=AC.myData,x=AC.formatterContainer,u=AG.category,AJ=this.funcType===b.FunctionLeftStr?1:-1,z=null,AB=null,y=false,AI=0,AD=null,w=false,AF;switch(u){case E.Fixed:z=x.fixed_hBox.negativeDDL;AB=p;y=!AG.thousandSeparator;break;case E.Currency:z=x.currency_hBox2.negativeDDL;AB=F;AI=AG.currencyPosition;AD=AG.currencySymbol;break;case E.Percentage:z=x.percentage_hBox.negativeDDL;AB=g;break;case E.Scientific:w=true;break;case E.Custom:AF=true;break;default:return ;}if(AF){var AH=R(AG.format,AJ);AC.preview.preview_label.set("text",I.applyFormatToNumber(AH,s.replace(".",L.number.DECIMALSEPARATOR)));AC.formatterContainer.custom_text.set("value",AH);return ;}var AA=AG.decimalPlaces,t=AA+AJ;t=Math.max(0,t);t=Math.min(J.MaxNegativeDidigts,t);AG.set("decimalPlaces",t);if(w){var AE=W(t);AG.set("format",AE[1]);AC.preview.preview_label.set("text",AE[0]);}else{O(z,AB,AG,y,AI,AD);}}function q(t,u){return Math.max(d.find(t,"v",u),0);}function C(w){var u=this.parent.parent.categoryPicker,t=S.map(function(x){return x.v;}).indexOf(w);u.set("selectedIndex",t);}function n(t,u,x,w){return H(undefined,t,u,undefined,M.copy(w,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:x,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function c(){var u=this.formatterContainer,t=I.getLocaleDatetimeSamples();a=a||t.date;U=U||t.time;u.date_ddl.set("items",t.date);u.time_ddl.set("items",t.time);}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,excludedCategories:[8],categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}c.call(this);var t=this.formatterContainer;if(this.formatValue){t.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;t.fixed_btn.checked=!!this.formatValue.thousandSeparator;B.addWidgetCssClass(t.fraction_ddl,g[d.find(g,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function P(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",q(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[M.copy({alias:"categoryPicker",preBuildRendering:function A(){var t=this;this.items=d.filter(t.items,function(u){return !d.includes(t.parent.excludedCategories,u.v);});},cssClass:Q+"nf-category",onitemSelected:function l(AH){if(!this.hasRendered){return ;}var AC=this,AF=AC.parent,x=AF.formatterContainer,t=AF.shortcutRow,AG=AF.preview.preview_label,AE=AH.v,z=AE===E.Automatic,w=AE===E.Scientific,u=[],AB=AF.myData;d.forEach(x.children,function(AI){AI.set("visible",false);});AF.border.set("visible",!z);AF.preview.set("visible",!z);AF.borderBottom.set("visible",!(!mstrApp.isWSStyling||z||w));["border","moveLeftBtn","moveRightBtn"].forEach(function(AI){t[AI].set("visible",!z);});AB.set("category",AE);AB.set("thousandSeparator",AE?K.ThousandSeparator:AF.formatValue.thousandSeparator);switch(AE){case E.Currency:O(x.currency_hBox2.negativeDDL,F,AB,false,AB.currencyPosition,AB.currencySymbol);x.currency_hBox1.currency_position.set("selectedIndex",q(J.CurrencyPosition,AB.currencyPosition.toString()));u=["currency_hBox1","currency_hBox2"];break;case E.Date:x.date_ddl.set("selectedIndex",q(a,AB.format));u=["date_ddl"];break;case E.Time:x.time_ddl.set("selectedIndex",q(U,AB.format));u=["time_ddl"];break;case E.Percentage:O(x.percentage_hBox.negativeDDL,g,AB,false,0,null);u=["percentage_hBox"];break;case E.Fraction:x.fraction_ddl.set("selectedIndex",q(J.Fraction,AB.format));u=["fraction_ddl"];break;case E.Scientific:var AA=W(AB.decimalPlaces||0);AB.set("format",AA[1]);AG.set("text",AA[0]);break;case E.Custom:var y=AB.customText||AB.format,AD=x.custom_text;AB.set("format",y);AD.value=y;AD.refresh();AG.set("text",I.applyFormatToNumber(y,s.replace(".",L.number.DECIMALSEPARATOR)));u=["custom_condense","custom_text"];break;case E.Fixed:O(x.fixed_hBox.negativeDDL,p,AB,!AB.thousandSeparator,0,null);u=["fixed_hBox","fixed_btn"];break;case E.Special:x.special_ddl.set("selectedIndex",q(J.Special,AB.format));u=["special_ddl"];break;}d.forEach(u,function(AI){x[AI].set("visible",true);});AF.adjustAfterCategoryChange();}},Z(S,"category")),{scriptClass:"mstrmojo.Box",cssClass:o+"nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,visible:true,moveRightBtn:null,children:[n("nf-shortcut-currency",function i(){C.call(this,E.Currency);},mstrmojo.desc(2051,"Currency"),{ariaLabel:mstrmojo.desc(2051,"Currency"),tabIndex:0,}),n("nf-shortcut-percentage",function i(){C.call(this,E.Percentage);},mstrmojo.desc(2053,"Percentage"),{ariaLabel:mstrmojo.desc(2053,"Percentage"),tabIndex:0}),n("nf-shortcut-fixed",function i(){C.call(this,E.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),{ariaLabel:mstrmojo.desc(2050,"Fixed"),tabIndex:0}),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},n("nf-MoveDecimalPoint left",function i(){m.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{ariaLabel:mstrmojo.desc(2189,"Increase Decimal"),funcType:b.FunctionLeftStr,alias:"moveLeftBtn",tabIndex:0}),n("nf-MoveDecimalPoint right",function i(){m.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{ariaLabel:mstrmojo.desc(2188,"Decrease Decimal"),funcType:b.FunctionRightStr,alias:"moveRightBtn",tabIndex:0})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,special_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function X(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:Y,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:Q+"nf-NegativePullDown",getOptionProps:f,onitemSelected:function l(t){N.call(this,t);}},Z([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:o,tabIndex:0,label:"",onclick:function i(){var t=this.parent.parent;t.myData.set("thousandSeparator",this.checked?-1:0);O(this.parent.fixed_hBox.negativeDDL,p,t.myData,!this.checked,0,null);},preBuildRendering:function A(){this.set("label",mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",L.number.THOUSANDSEPARATOR));}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:Y,visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",enableAccessibility:true,ariaLabel:mstrmojo.desc(28877,"Currency Symbol"),items:e,postselectedValueChange:function k(t){var y=this,x=y.parent.parent.parent,w=t.value,u=x.myData;u.set("currencySymbol",w);O(this.parent.parent.currency_hBox2.negativeDDL,F,u,false,parseInt(u.currencyPosition,10),w);}},M.copy({cssClass:Q+"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function l(t){var x=this,w=x.parent.parent.parent,u=t.v;w.myData.set("currencyPosition",parseInt(u,10));O(this.parent.parent.currency_hBox2.negativeDDL,F,w.myData,false,parseInt(u,10),w.myData.currencySymbol);}},Z(J.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:Y,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:Q+"nf-NegativePullDown",getOptionProps:f,onitemSelected:function l(t){N.call(this,t);}},Z([],"format"))]},M.copy({alias:"date_ddl",cssClass:Q+Y},Z(J.Date,"format",true)),M.copy({alias:"time_ddl",cssClass:Q+Y},Z(J.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:Y,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:Q+"nf-NegativePullDown",getOptionProps:f,onitemSelected:function l(t){N.call(this,t);}},Z([],"format"))]},M.copy({alias:"fraction_ddl",cssClass:Q+Y},Z(J.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0;[<=-1000000]#,##0,,"M";[<=-1000]#,##0,"K"');},false,{cssClass:"nf-condense",alias:"custom_condense",tabIndex:0}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",tooltip:mstrmojo.desc(2056,"Custom"),cssClass:"nf-custom",onvalueChange:function h(){var w=this,u=w.parent.parent,t=w.value;u.myData.set("format",t);u.myData.set("customText",t);w.parent.parent.preview.preview_label.set("text",I.applyFormatToNumber(t,s.replace(".",L.number.DECIMALSEPARATOR)).replace(/\s/g,"&nbsp;"));}},M.copy({alias:"special_ddl",cssClass:Q+Y,onitemSelected:function l(){var u=this,t=u.items[u.selectedIndex],w=u.parent.parent;w.parent.data.set("format",t.v);w.preview.preview_label.set("text",t.t);}},Z(J.Special,"format",true)),]},{scriptClass:"mstrmojo.Label",alias:"borderBottom",cssClass:"nf-border"},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:o+"nf-PreviewRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.array","mstrmojo.css","mstrmojo.func","mstrmojo.vi.util.A11yUtility");mstrmojo.requiresDescs(950,954,1035);var l=function(){return mstrmojo.locales.datetime;},AI=mstrmojo.dom,AH=mstrmojo.expr,AM=AH.DTP,AA=mstrmojo.date,L=mstrmojo.publisher,AF=mstrmojo.hash,AN=mstrmojo.array,Z=AN.removeIndices,AK=mstrmojo.css,AT=mstrmojo.vi.util.A11yUtility;var w=0,R=3,u=4,AX=5,S=6;var I=1,d=2;var a="month",A="day",AD="year",G="hour",B="minute",p="second";var Q='<table border="0" cellpadding="0" cellspacing="0">',E="</table>";var k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];function c(Aa){return'<table border="0" cellpadding="0" cellspacing="0" style="'+Aa+'">';}var y=mstrmojo.desc(13844,"Dynamic Date");function m(Ab,Aa){return Ab+", "+(Aa?mstrmojo.desc(514,"Selected"):mstrmojo.desc(19895,"Unselected"));}function F(Ad,Aa,Ab){var Ac=AA.getFirstDateOfMonth(Ad,Aa);return(Ac.getDay()-Ab+8)%7;}function M(Ae,Aa,Ag){var Ad=AA.parseDateAndOrTime(Ae,Aa,Ag),Af,Ab,Ac;if(Ad){Ac={};Af=Ad.date;Ab=Ad.time;if(Af){AF.copy(Af,Ac);}if(Ab){AF.copy(Ab,Ac);}}return Ac;}function AB(Ab,Ae,Ad,Ac,Aa){var Af=AA.formatDateInfo({day:Ab,month:Ae,year:Ad},l().DATEOUTPUTFORMAT);return AA.inDateTimeRange(Af,Ac,Aa)===0;}function AU(Aa,Ad,Ab,Ac){var Ae=AA.formatDateInfo({day:Aa,month:Ad,year:Ab},l().DATEOUTPUTFORMAT);return Ac.some(function(Af){return AA.compareDate(Ae,Af)===0;});}function U(Ae,Ad,Ac){var Ab=Ae.decreaseButton,Aa=Ae.increaseButton,Af="mstrmojo-Calendar";Ab.className=(Af+"-decrease");Aa.className=(Af+"-increase");}function AE(Ae,Ab,Ag,Ad){var Ac=0,Aa=Ae.length,Af;for(Ac=0;Ac<Aa;Ac++){Af=Ae[Ac];if(Af&&Af.day===Ab&&Af.month===Ag&&Af.year===Ad){return Ac;}}return -1;}function AJ(Aa,Ac,Ab){var Ad=new Date();return(Ad.getFullYear()===Ab)&&((Ad.getMonth()+1)===Ac)&&(Ad.getDate()===Aa);}function AY(Ah,Ai){var Am=Ah.dayView.getElementsByTagName("div"),Ak=Ah.selectedDates,Ac=Ak[Ai],Al=Ah.browseYear,Ab=Ah.browseMonth,Ae=AA.getDaysOfMonth(Al,Ab),Ad=AA.getPreMonth(Al,Ab),Ag=AA.getDaysOfMonth(Ad.y,Ad.m),Aa=F(Al,Ab,Ah.firstDayOfWeek),Af=((Ac.month===Ab)?Ac.day+Aa-1:(Ac.month>Ab?Ac.day+Aa+Ae-1:Aa-Ag+Ac.day-1)),Aj=Am[Af];if(Aj){AP(Aj,Ah,false);}Z(Ak,Ai,1);}function AW(Aa){var Ab=Aa.selectedDates;while(Ab.length){AY(Aa,0);}}function AO(Ac,Aa){var Ab=o(Ac,Aa),Ad=Ac.selectedDates;Ad.push({day:Ab.d,month:Ab.m,year:Ab.y});AP(Aa,Ac,true);}function n(Ac,Ad){if(!Ad||!Ad.length){return null;}var Af=Ac.selectedDates;for(var Ab=0,Aa=Ad.length;Ab<Aa;Ab++){var Ae=Ad[Ab],Ag=AR(Ac,Ae);Af.push({day:Ae.d,month:Ae.m,year:Ae.y});if(Ag){AP(Ag,Ac,true);}}}function AR(Ai,Ak){var Am=Ai.dayView.getElementsByTagName("div"),Ad=Am.length,Al=Ai.browseYear,Ab=Ai.browseMonth,Ae=AA.getPreMonth(Al,Ab),Af=AA.getDaysOfMonth(Ae.y,Ae.m),Aq=AA.getNextMonth(Al,Ab),Ac=AA.getDaysOfMonth(Al,Ab),Aa=F(Al,Ab,Ai.firstDayOfWeek);var Ag=Aa>0?{y:Ae.y,m:Ae.m,d:Am[0].innerHTML}:{y:Al,m:Ab,d:Am[0].innerHTML},Ao=(Am.length-Ac-Aa)>0?{y:Aq.y,m:Aq.m,d:Am[Ad-1].innerHTML}:{y:Al,m:Ab,d:Am[Ad-1].innerHTML},Ap=x(Ag,Ak),Ah=x(Ak,Ao),Aj=null;if(Ap>=0&&Ah>=0){var An=0;if(Ap<Aa){An=-1;}if(Ah<(Am.length-Aa-Ac)){An=1;}Aj=((An===0)?Ak.d+Aa-1:(An===1?Ak.d+Aa+Ac-1:Aa-Af+Ak.d-1));return Am[Aj];}return null;}function W(Ai,Aa){var Ak=Ai.selectedDates,Ac=Ak.length;if(!Ac){return null;}var Ab=Ak[Ac-1],Ad=o(Ai,Aa),An=x({y:Ab.year,m:Ab.month,d:Ab.day},Ad),Ao=[],Af=An>0,Al=Math.abs(An);for(var Ah=0;Ah<=Al;Ah++){var Ag=new Date(Ad.y,Ad.m-1,Ad.d);Ag.setDate(Ag.getDate()+(Af?-Ah:Ah));var Am=Ag.getFullYear(),Ae=Ag.getMonth()+1,Aj=Ag.getDate();if(Ai.isDateDisabled(Aj,Ae,Am,Ai.min,Ai.max)&&!Ai.canSelectDisabledDate){continue;}Ao.push({y:Am,m:Ae,d:Aj});}return Ao;}function x(Ad,Ac){var Aa=new Date(Ad.y,Ad.m-1,Ad.d),Ab=new Date(Ac.y,Ac.m-1,Ac.d);return(Ab-Aa)/1000/3600/24;}function o(Ac,Aa){var Ad=Ac.browseYear,Af=Ac.browseMonth,Ae=parseInt(Aa.innerHTML,10),Ag=parseInt(Aa.getAttribute("m"),10),Ab=null;Ab=(Ag===0)?{y:Ad,m:Af}:(Ag===1?AA.getNextMonth(Ad,Af):AA.getPreMonth(Ad,Af));Ab.d=Ae;return Ab;}function K(Aa){var Ac=Aa.selectedDates,Ab=Ac.length;return(Ab===0)?null:Ac[Ab-1];}function AP(Ab,Ac,Aa){var Ad=Ac.selectedColor;AK.toggleClass(Ab,["selected",Ac.selectedCssStyle],Aa);Ab.parentNode.style.backgroundColor=Aa?Ad:"";Ab.style.backgroundColor=Aa?Ad:"";}function f(Aa){return Aa.selectedColor?('style="background-color:'+Aa.selectedColor+';"'):"";}function N(Aa){return(Aa.tagName.toLowerCase()==="td")?Aa.firstChild:Aa;}function h(Ab,Ac){var Ad=AA.getDateJson(Ab),Aa=AA.formatDateInfo(Ad,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(Ac===AM.TIMESTAMP){Aa+=" "+AA.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return Aa;}function C(Af,Ac){var Aa=this.advancedValues,Ab=null;Aa.set(Af,Ac);switch(Aa.baseDate){case R:Ab=new Date();break;case u:break;case AX:break;case S:break;default:return ;}var Ad=Aa.monthsToAdjust;if(Ad>0){Ab.setMonth(Ab.getMonth()+(Aa.toAddMonths?Ad:-Ad));}var Ae=Aa.daysToAdjust;if(Ae>0){Ab.setDate(Ab.getDate()+(Aa.toAddDays?Ae:-Ae));}this.set("value",h.call(this,Ab,this.dtp));}function X(){var Aa=this.advancedValues,Ab=["isDyn"];if(Aa.baseDate===w){return null;}Ab.push(Aa.baseDate);Ab.push(Aa.toAddDays?Aa.daysToAdjust:-Aa.daysToAdjust);Ab.push(Aa.toAddMonths?Aa.monthsToAdjust:-Aa.monthsToAdjust);Ab.push(0);Ab.push(0);Ab.push(0);Ab.push(0);Ab.push(this.value);Ab.push(this.timeVal.hour);Ab.push(this.timeVal.min);Ab.push(this.timeVal.sec);return Ab.join("::");}function AG(Aa){if(Aa.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function O(Ad,Ac){var Ae=this,Ab=function(Ag){return Ag[0].toUpperCase()+Ag.substring(1);},Af=Ad==="days",Aa=Af?mstrmojo.desc(19909,"One Day"):mstrmojo.desc(19911,"One Month");return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:Ad+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",focusOnPopup:true,enableAccessibility:true,selectedIndex:Ac>0?0:1,onitemSelected:function(Ah,Ag){C.call(Ae,"toAdd"+Ab(Ad),Ag===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,nextAriaLabel:mstrmojo.desc(19910,"Plus ##").replace("##",Aa),prevAriaLabel:mstrmojo.desc(19908,"Minus ##").replace("##",Aa),provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(Ac)},onTraverse:function(){C.call(Ae,Ad+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:Af?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function AV(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}function J(Af){var Aj=AF.walk("children.0",Af),Ad=AF.walk("children.1",Af),Ac,Ae,Aa;if(Aj){var Ab=Aj.selectedIndex===0,Ah=Af.alias==="daysAdjustBox",Ai=Ah?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months"),Ak=Ab?mstrmojo.desc(19910,"Plus ##"):mstrmojo.desc(19908,"Minus ##"),Ag=Ak.replace("##",Ai);Ag+=(", "+mstrmojo.desc(19894,"Calendar Filter Option"));Aj.selectedNode.ariaLabel=Ag;}if(Ad){Ac=AF.walk("textInput",Ad);Ae=Ad.nextNode;Aa=Ad.prevNode;}if(Aj&&Ac&&Ae&&Aa){return[Aj,Ac,Ae,Aa];}return[];}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,[mstrmojo.vi.ui.rw._SupportTabNav],{scriptClass:"mstrmojo.Calendar",enableAccessibility:false,cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:A,duration:600,timeDelimiter:":",dtp:AM.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(Aa){return l().MONTHNAME_SHORT[Aa];},dayNames:function(Aa){return l().dayShortNames[Aa];},min:null,max:null,validDates:null,dayList:[],monthList:[],yearList:[],hourList:[],minuteList:[],secondList:[],supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" tabindex="-1" mstrAttach:mousedown,mouseup,mouseover,mouseout,keydown><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease" role="button" aria-label="'+mstrmojo.desc(19893,"Previous Month")+'"></div><div class="mstrmojo-Calendar-increase" role="button" aria-label="'+mstrmojo.desc(19896,"Next Month")+'"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}" role="button">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}" role="button">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel" role="button">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel" role="button">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel" role="button">00</span><span class="mstrmojo-Calendar-AMPMLabel" role="button">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){var Aa=this.monthNames(this.browseMonth-1);this.monthLabel.innerHTML=Aa;this.monthLabel.ariaLabel=Aa+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(871,"Month"));},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;this.yearLabel.ariaLabel=this.browseYear+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(873,"Year"));},ondtpChange:function(){this.timePart.style.display=(this.dtp===AM.TIMESTAMP||this.dtp===AM.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:AV,onisAdvancedChange:AV,oncanSelectDisabledDateChange:function(){AK.toggleClass(this.domNode,"limited",!this.canSelectDisabledDate);}},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},titlePart:function(){return this.domNode.firstChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function t(Aa){if(this._super){this._super(Aa);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};var Ab=mstrmojo.locales.location.LOCALE_TO_LANG;switch(Ab[mstrApp.localeId]){case mstrmojo.desc(950,"English (US)"):case mstrmojo.desc(954,"Japanese"):case mstrmojo.desc(1035,"Portugese (Brasil)"):this.firstDayOfWeek=I;break;default:this.firstDayOfWeek=d;}},ondynDateValueChange:function b(Aa){if(Aa.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AG,onmaxChange:AG,buildChildren:function AC(){var Ag=this;if(this.showAdvanced){var Ad=this.dynDateValue,Ac=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),Aj=Ad&&Ad.split("::")||[],Af=Aj[1]||w,Ab=Aj[2]||0,Ak=Aj[3]||0,Ah=function Ah(){if(Ag.isAdvanced){Ag.wasAdvanced=true;Ag.changeValueOnOK=true;}Ag.set("isAdvanced",!Ag.isAdvanced);mstrmojo.css.toggleClass(Ag.markupSlots.dayView.call(Ag),["ddSelected"],Ag.isAdvanced);C.call(Ag,"baseDate",Ag.isAdvanced?3:0);if(Ag.parent&&Ag.parent.nudge&&Ag.isAdvanced){Ag.parent.nudge();}if(Ag.enableAccessibility){Ag.buildNavList();if(this.actionByKeyboard){Ag.restoreFocus();this.actionByKeyboard=false;}else{this.domNode.loseFocus(true);}}};this.advancedValues=Ac;Ac.baseDate=parseInt(Af);Ac.toAddDays=Ab>=0;Ac.daysToAdjust=Math.abs(Ab);Ac.toAddMonths=Ak>=0;Ac.monthsToAdjust=Math.abs(Ak);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var Aa=this.parseDateAndTimeToJSON(this.value),Ae=this.timeVal;if(Aa&&Aa.hour!==undefined){Ae.hour=Aa.hour;Ae.min=Aa.min;Ae.sec=Aa.sec;}}C.call(Ag,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",cssClass:"dynamicCheckbox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",ariaLabel:y,checked:!!Ag.isAdvanced,oncheckedChange:Ah},{scriptClass:"mstrmojo.Label",text:y,onclick:function Ai(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:function(){return this.parent.isAdvanced;}},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},O.call(this,"days",Ab),O.call(this,"months",Ak)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(Al){Ag.parent.close();Ag.hostRestoreFocus(Al);},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(Al){if(Ag.changeValueOnOK||Ag.isAdvanced||Ag.wasAdvanced){Ag.updateValue(true);}Ag.hostRestoreFocus(Al);},true,{slot:"buttonsNode"})]);},preBuildRendering:function P(){this.buildChildren();return this._super();},getSelectedDatesAsString:function AZ(Ab){var Aa=[];AN.forEach(this.selectedDates,function(Ac){Aa.push(AA.formatDateInfo(Ac,Ab||l().DATEOUTPUTFORMAT));});return Aa;},hostRestoreFocus:function AS(Aa){if(AT.isKeyBoardEvent(Aa.e)&&AF.walk("tabParent.grabFocus",this)){this.tabParent.grabFocus(true);}},updateSelectedDate:function j(Af){var Aa=this.value,Ac=this.timeVal,Ae=this.selectedDates,Ad,Ag=function(Ai,Ah){Ai.set("browseYear",Ah.year);Ai.set("browseMonth",Ah.month);Ai.updateTimePart();Ai.updateView(Ai.currentView);if(!Ai.changeValueOnOK&&Ai.hasRendered&&Ai.closeOnValueChange!=true){Ai.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(Aa){Ad=this.parseDateAndTimeToJSON(Aa);if(Ad&&Ad.hour!==undefined){Ac.hour=Ad.hour;Ac.min=Ad.min;Ac.sec=Ad.sec;if(this.dtp===AM.TIME&&(Ad.year===undefined||Ad.month===undefined||Ad.day===undefined)){var Ab=AA.getDateJson(new Date());Ad.year=Ab.year;Ad.month=Ab.month;Ad.day=Ab.day;}}}if((Ad&&!this.isMultiSelect)||Af){AW(this);}if(Ae.length===0){if(!Ad){if(this.parent.opener&&this.parent.opener.defaultDate){Ad=this.parseDateAndTimeToJSON(this.parent.opener.defaultDate);}else{Ad=AA.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(Ad.day,Ad.month,Ad.year,this.min,this.max)){if(this.min&&AA.compareDate(Ad,this.min)<0){Ad=this.parseDateAndTimeToJSON(this.min);}else{if(this.max&&AA.compareDate(Ad,this.max)>0){Ad=this.parseDateAndTimeToJSON(this.max);}}}Ae.push(Ad);Ag(this,Ad);}else{Ad=Ae[0];if(this.value!==null){Ag(this,Ad);}}},parseDateAndTimeToJSON:function(Aa){try{var Ac=this.parent.lockIW.docSelector.isParameterSelector();if(Ac){return M(Aa,mstrmojo.EnumLocaleInfo["en-US"].datetime.DATEOUTPUTFORMAT,mstrmojo.EnumLocaleInfo["en-US"].datetime.TIMEOUTPUTFORMAT);}}catch(Ab){}return M(Aa);},updateValue:function D(Aa){var Ac=K(this),Ab="";if(Ac){Ab=AA.formatDateInfo(Ac,l().DATEOUTPUTFORMAT);if(this.dtp!==AM.DATE){var Ad=AA.formatTimeInfo(this.timeVal,l().TIMEOUTPUTFORMAT);if(this.dtp===AM.TIME){Ab=Ad;}else{Ab+=" "+Ad;}}}this.lastValue=Ab;this.set("value",Ab);if(this.showAdvanced){this.set("dynDateValue",Aa?X.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function AQ(){var Ad=this.timeVal,Ac=Ad.hour||0,Af=(Ac%12===0)?12:(Ac%12),Ae=AA.formatInteger(Ad.min||0,2),Ab=AA.formatInteger(Ad.sec||0,2),Aa=Ac<12?" "+l().AM_NAME:" "+l().PM_NAME;this.hourLabel.innerHTML=Af;this.hourLabel.ariaLabel=Af+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(10042,"Hour"));this.minuteLabel.innerHTML=Ae;this.minuteLabel.ariaLabel=Ae+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(10043,"Minute"));this.secondLabel.innerHTML=Ab;this.secondLabel.ariaLabel=Ab+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(10044,"Second"));this.AMPMLabel.innerHTML=Aa;this.AMPMLabel.ariaLabel=Aa+", "+mstrmojo.desc(19899,"## Selector").replace("##",mstrmojo.desc(19897,"AM/PM"));},premousedown:function(Aa){var Ac=Aa.e,Ab=AI.eventTarget(Aa.hWin,Ac);if(Ab===this.decreaseButton||Ab===this.increaseButton){if(AI.isFF){AI.stopPropogation(window,Ac);}return true;}return this.processEvent(Ab,Ac);},premouseup:function(Aa){var Ac=Aa.e;if(Ac.ctrlKey||Ac.shiftKey){AI.clearBrowserHighlights();}var Ab=AI.eventTarget(Aa.hWin,Ac);if(Ab===this.decreaseButton&&!Ab.disabled){this.decrease();return true;}if(Ab===this.increaseButton&&!Ab.disabled){this.increase();return true;}},onkeydown:function g(Ah){if(!this.enableAccessibility){return ;}var Aa=Ah.e,Ag=Aa&&Aa.key,Ad=this.currentView,Aj=AI.eventTarget(Ah.hWin,Aa);if(this.handleTab(Ah)){return ;}Aa.stopPropagation();if(Ag==="Enter"){if(Aj===this.decreaseButton||Aj===this.increaseButton){if(Aj===this.decreaseButton&&!Aj.disabled){this.actionByKeyboard=true;this.shouldRestoreFocus=true;this.decrease();}if(Aj===this.increaseButton&&!Aj.disabled){this.actionByKeyboard=true;this.shouldRestoreFocus=true;this.increase();}}else{if(AI.contains(this.advancedPanel.domNode,Aj)){if(Aj.classList.contains("next")||Aj.classList.contains("prev")){Aj.click();}}else{if(AI.contains(this.bodyContainer,Aj)){this.actionByKeyboard=true;if(Ad!==A){if(Aj.loseFocus){Aj.loseFocus(true);}this.shouldRestoreFocus=true;}else{if(Aj.getAttribute("m")!=="0"&&!Aj.classList.contains("disabled")){this.selectedDayRestoreFocus=true;}}}if(AI.contains(this.titlePart,Aj)||AI.contains(this.timePart,Aj)){if(Aj.loseFocus){Aj.loseFocus(true);}if((Aj===this[Ad+"Label"]||(Aj===this.AMPMLabel&&Ad===G))&&AF.walk(Ad+"List.0.grabFocus",this)){this[Ad+"List"][0].grabFocus(true);}else{this.actionByKeyboard=true;}}this.processEvent(Aj,Aa);}}return ;}if(Ag==="Escape"){if(Aj.loseFocus){Aj.loseFocus(true);}if(AI.contains(this.bodyContainer,Aj)&&this.currentView!==A){this.actionByKeyboard=true;this.shouldRestoreFocus=true;this.switchViewTo(A);}else{this.loseFocus(true);if(AF.walk("parent.close",this)){this.parent.close();this.hostRestoreFocus(Ah);}}return ;}if(AN.includes(k,Ag)&&AI.contains(this.bodyContainer,Aj)){var Ae=[],Ac;switch(this.currentView){case A:Ae=this.dayList;Ac=7;break;case a:Ae=this.monthList;Ac=3;break;case AD:Ae=this.yearList;Ac=this.yearViewSize;break;case G:Ae=this.hourList;Ac=6;break;case B:Ae=this.minuteList;Ac=10;break;case p:Ae=this.secondList;Ac=10;break;}var Af=AN.indexOf(Ae,Aj),Ai,Ab;switch(Ag){case k[0]:Ab=Af-Ac;Ai=Ab>=0;break;case k[1]:Ab=Af+Ac;Ai=Ab<Ae.length;break;case k[2]:Ab=Af-1;Ai=Ab>=0;break;case k[3]:Ab=Af+1;Ai=Ab<Ae.length;break;}if(Ai){if(Aj.loseFocus){Aj.loseFocus(true);}if(AF.walk(Ab+".grabFocus",Ae)){Ae[Ab].grabFocus(true);}}}},processEvent:function(Al,As){var Ad=this.currentView,Ae=this.selectedDates,Ai,An,At,Aa,Ak;if(Al===this.monthLabel){if(Ad!==a){this.switchViewTo(a);}return true;}if(Al===this.yearLabel){if(Ad!==AD){this.adjustYearStart();this.switchViewTo(AD);return true;}}if(Al===this.hourLabel){if(Ad!==G){this.switchViewTo(G);}return true;}if(Al===this.minuteLabel){if(Ad!==B){this.switchViewTo(B);}return true;}if(Al===this.secondLabel){if(Ad!==p){this.switchViewTo(p);}return true;}if(Al===this.AMPMLabel){if(Ad!==G){this.switchViewTo(G);}return true;}if(Ad===G){var Ag=Al.getAttribute("h");Ak=parseInt(Al.innerHTML,10);if(!isNaN(Ag)&&!isNaN(Ak)){Ag=parseInt(Ag,10);this.timeVal.hour=Ak%12+Ag*12;this.updateTimePart();this.switchViewTo(A);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(Ad===B){Ak=parseInt(Al.innerHTML,10);if(!isNaN(Ak)){this.timeVal.min=Ak;this.updateTimePart();this.switchViewTo(A);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(Ad===p){Ak=parseInt(Al.innerHTML,10);if(!isNaN(Ak)){this.timeVal.sec=Ak;this.updateTimePart();this.switchViewTo(A);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(Ad===A){var Ar=this.browseYear,Ab=this.browseMonth,Ac;Al=N(Al);At=parseInt(Al.innerHTML,10);Aa=parseInt(Al.getAttribute("m"),10);if(!isNaN(At)&&!isNaN(Aa)){Ac=(Aa===0)?{y:Ar,m:Ab}:(Aa===1?AA.getNextMonth(Ar,Ab):AA.getPreMonth(Ar,Ab));if((!this.canSelectDisabledDate&&this.isDateDisabled(At,Ac.m,Ac.y,this.min,this.max))||As.button===2){return true;}if(this.isAdvanced){return true;}var Ao=AE(Ae,At,Ab,Ar),Am=Ae.length>1,Aj=this.forceNonEmptySelection,Ap=this.isMultiSelect,Ah=Ap&&As.ctrlKey,Aq=Ap&&As.shiftKey,Af=null;if(Aq){Af=W(this,Al);AW(this);n(this,Af);}else{if(Ah){if(Ao===-1){AO(this,Al);}else{if(!Aj||Am){AY(this,Ao);}}}else{AW(this);if(Am||Ao===-1||Aj){AO(this,Al);}}}if(this.onselect||L.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(Aa===1){this.increase();}else{if(Aa===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);C.call(this,"baseDate",0);}}}return true;}if(Ad===a){Al=N(Al);An=parseInt(Al.getAttribute("m"),10);if(!isNaN(An)){this.set("browseMonth",An+1);this.switchViewTo(A);}return true;}if(Ad===AD){Al=N(Al);Ai=parseInt(Al.innerHTML,10);if(!isNaN(Ai)){this.set("browseYear",Ai);this.switchViewTo(A);}return true;}return true;},decrease:function(){var Ac=this.currentView,Af=Ac,Ae=this.browseYear,Aa=this.browseMonth,Ab=this.yearRangStart,Ad;switch(Ac){case A:Ad=AA.getPreMonth(Ae,Aa);this.set("browseMonth",Ad.m);this.set("browseYear",Ad.y);break;case a:this.set("browseYear",Ae-1);break;case AD:this.yearRangStart=Ab-this.yearViewSize*this.yearViewSize;break;case G:Af=p;break;case B:Af=G;break;case p:Af=B;break;}this.switchViewTo(Af,"right");},increase:function(){var Ac=this.currentView,Af=Ac,Ae=this.browseYear,Aa=this.browseMonth,Ab=this.yearRangStart,Ad;switch(Ac){case A:Ad=AA.getNextMonth(Ae,Aa);this.set("browseMonth",Ad.m);this.set("browseYear",Ad.y);break;case a:this.set("browseYear",Ae+1);break;case AD:this.yearRangStart=Ab+this.yearViewSize*this.yearViewSize;break;case G:Af=B;break;case B:Af=p;break;case p:Af=G;break;}this.switchViewTo(Af,"left");},updateView:function(Aa){var Ab=this[Aa+"ViewHTML"]();this[Aa+"View"].innerHTML=Ab;if(this.enableAccessibility){this.updateNavListForBodyCell(Aa);this.updateViewList(Aa);}},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(Ab,Ad){var Ah="mstrmojo-Calendar-"+Ab+"View",Ag=document.createElement("div"),Aa=this[this.currentView+"View"],Ae=Ab+"ViewHTML",Af=this[this.currentView+"Label"],Ac=this[Ab+"Label"];if(!this.supportedViews[Ab]){return ;}if(!Ad){Ad=this.sDirMatrix[this.currentView][Ab];}Ag.className=Ah;Ag.innerHTML=this[Ae]();this.currentView=Ab;this[Ab+"View"]=Ag;mstrmojo.css.toggleClass(Ag,["ddSelected"],this.isAdvanced);this._slideIntoView(Aa,Ag,Ad);},updateViewList:function z(Ab){var Ac=this;this[Ab+"List"]=[];var Aa=AF.walk(Ab+"View.firstChild.lastChild",this);if(!Aa){return ;}if(Ab!==G){AN.forEach(Aa.children,function(Ad){AN.forEach(Ad.cells,function(Ae){Ac[Ab+"List"].push(Ae.firstChild);});});}else{AN.forEach(Aa.children,function(Ae,Ad){if(Ad===0||Ad===3){return true;}AN.forEach(Ae.cells,function(Af){Ac[Ab+"List"].push(Af.firstChild);});});}AN.forEach(this[Ab+"List"],function(Ad){AT.enableAccessibility({domNode:Ad});});},_slideIntoView:function(Ae,Aj,Ac){var Af=this,Aa=this.bodyContainer,Ah=(Ac==="left"||Ac==="right")?Ae.offsetWidth:Ae.offsetHeight,Ab=(Ac==="left"||Ac==="right")?"left":"top",Ai=(Ac==="left"||Ac==="up")?Ah:-Ah,Ag=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:Ae,onEnd:function(){Aa.removeChild(Ae);if(Af.enableAccessibility){var Ak=Af.currentView;Af.updateNavListForBodyCell(Ak);Af.updateViewList(Ak);if(Af.actionByKeyboard){if(Af.selectedDayRestoreFocus){if(AF.walk("dayList."+Af.selectedDayIdx+".grabFocus",Af)){Af.dayList[Af.selectedDayIdx].grabFocus(true);}Af.selectedDayRestoreFocus=false;return ;}if(Af.shouldRestoreFocus){Af.restoreFocus();Af.shouldRestoreFocus=false;}else{if(AF.walk(Ak+"List.0.grabFocus",Af)){Af[Ak+"List"][0].grabFocus(true);}}Af.actionByKeyboard=false;}}}}),Ad=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:Aj});Aj.style[Ab]=Ai+"px";Aa.appendChild(Aj);Ag.props[Ab]={start:0,stop:-Ai,suffix:"px"};Ad.props[Ab]={start:Ai,stop:0,suffix:"px"};Ag.play();Ad.play();},dayViewHTML:function(){var Af=this.browseYear,Ai=this.browseMonth,An=AA.getDaysOfMonth(Af,Ai),As=AA.getPreMonth(Af,Ai),Ac=AA.getDaysOfMonth(As.y,As.m),Ab=AA.getNextMonth(Af,Ai),Aj=F(Af,Ai,this.firstDayOfWeek),Ag=[],Ad=f(this),Au=0,Aa=this.selectedDates,Al=this.min,Ap=this.max,Av,Am,Aq,Ao,At=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"",Ar;U(this,{d:Ac,m:As.m,y:As.y},{d:1,m:Ab.m,y:Ab.y});Ag.push(c(this.cssTextDay));Ag.push(this._dayViewTHead());Ag.push("<tr>");for(Aq=0;Aq<Aj;Aq++){Av=Ac-Aj+Aq+1;Am=this.isDateDisabled(Av,As.m,As.y,Al,Ap)?"disabled":"";Ar=m(Av,false);Ag.push("<td "+At+'><div class="mstrmojo-Calendar-day-pre '+Am+'" m="-1" aria-label="'+Ar+'">');Ag.push(Av);Ag.push("</div></td>");Au++;}for(Aq=0;Aq<An;Aq++){Av=Aq+1;Am=this.isDateDisabled(Av,Ai,Af,Al,Ap)?" disabled":"";var Ae=AJ(Av,Ai,Af),Ah=Ae?"today":"",Ak=AE(Aa,Av,Ai,Af)!==-1;if(Ak){this.selectedDayIdx=Au;}Ah=(this.hilightToday&&Ae)?" hilightToday":Ah;Ar=m(Aq+1,Ak);Ag.push("<td "+(Ae?('class="'+Ah+'" '):" ")+(Ak?Ad:"")+'><div class="mstrmojo-Calendar-day-cur'+(Ak?(" selected "):"")+Am+'" m="0"'+(Ak?Ad:"")+' aria-label="'+Ar+'">');Ag.push(Aq+1);Ag.push("</div></td>");if((++Au)%7===0){Ag.push("</tr><tr>");}}for(Ao=Au;Ao<42;Ao++){Av=Au-An-Aj+1;Am=this.isDateDisabled(Av,Ab.m,Ab.y,Al,Ap)?"disabled":"";Ar=m(Av,false);Ag.push("<td "+At+'><div class="mstrmojo-Calendar-day-next '+Am+'" m="1" aria-label="'+Ar+'">');Ag.push(Av);Ag.push("</div></td>");if((++Au)%7===0&&Au!==42){Ag.push("</tr><tr>");}}Ag.push("</tr>");Ag.push(E);return Ag.join("");},_dayViewTHead:function(){var Ad=[],Ae='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',Ac="</tr></thead>",Ab=this.firstDayOfWeek-1,Af=this.dayNames,Aa;Ad.push(Ae);for(Aa=Ab;Aa<Ab+7;Aa++){Ad.push("<td>");Ad.push(Af(Aa%7));Ad.push("</td>");}Ad.push(Ac);return Ad.join("");},monthViewHTML:function(){var Ad=[],Ag=this.browseMonth-1,Ae=this.browseYear,Ac,Af,Ab,Aa;U(this,{d:31,m:12,y:Ae-1},{d:1,m:1,y:Ae+1});Ad.push(c(this.cssTextMonth));Ad.push("<tr>");for(Ac=0;Ac<12;Ac++){Af=this.monthNames(Ac);Ab=Ac===Ag;Aa=m(Af,Ab);Ad.push("<td "+(Ab?f(this):"")+'><div class="mstrmojo-Calendar-month'+(Ab?" selected":"")+'" m="');Ad.push(String(Ac));Ad.push('" aria-label="'+Aa+'">');Ad.push(Af);Ad.push("</div></td>");if(Ac%3===2){Ad.push("</tr><tr>");}}Ad.pop();Ad.push("</tr>");Ad.push(E);return Ad.join("");},yearViewHTML:function(){var Ah=this.yearRangStart,Ad=[],Af=this.browseYear,Ag,Ac,Ae=this.yearViewSize,Ab,Aa;U(this,{d:31,m:12,y:Ah-1},{d:1,m:1,y:Ah+Ae*Ae});Ad.push(c(this.cssTextYear));Ad.push("<tr>");for(Ac=0;Ac<Ae*Ae;Ac++){Ag=Ah+Ac;Ab=Af===Ag;Aa=m(Ag,Ab);Ad.push("<td "+(Ab?f(this):"")+'><div class="mstrmojo-Calendar-year'+(Ab?" selected":"")+'" aria-label="'+Aa+'">');Ad.push(Ag);Ad.push("</div></td>");if(Ac%Ae===(Ae-1)){Ad.push("</tr><tr>");}}Ad.pop();Ad.push("</tr>");Ad.push(E);return Ad.join("");},hourViewHTML:function(){var Ae=[],Ad=this.timeVal.hour,Ac,Ab,Af,Aa;Ae.push(Q);Ae.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');Ae.push(l().AM_NAME);Ae.push("</div></td></tr>");for(Ac=0;Ac<12;Ac++){Af=(Ac===0)?12:Ac;Ab=Ac===Ad;Aa=m(Af,Ab);Ae.push('<td><div class="mstrmojo-Calendar-hour'+(Ab?" selected":"")+'" h="0" aria-label="'+Aa+'">');Ae.push(Af);Ae.push("</div></td>");if(Ac===5){Ae.push("</tr><tr>");}}Ae.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');Ae.push(l().PM_NAME);Ae.push("</div></td></tr>");for(Ac=0;Ac<12;Ac++){Af=(Ac===0)?12:Ac;Ab=(12+Ac)===Ad;Aa=m(Af,Ab);Ae.push('<td><div class="mstrmojo-Calendar-hour'+(Ab?" selected":"")+'" h="1" aria-label="'+Aa+'">');Ae.push(Af);Ae.push("</div></td>");if(Ac===5){Ae.push("</tr><tr>");}}Ae.push("</tr>");Ae.push(E);return Ae.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(Ae,Af){var Ad=[],Ac,Ab,Aa;Ad.push(Q);Ad.push("<tr>");for(Ac=0;Ac<60;Ac++){Ab=Ac===Ae;Aa=m(Ac,Ab);Ad.push('<td><div class="');Ad.push(Af);Ad.push(Ab?' selected">':'" aria-label="'+Aa+'">');Ad.push(Ac);Ad.push("</div></td>");if(Ac%10===9){Ad.push("</tr><tr>");}}Ad.pop();Ad.push("</tr>");Ad.push(E);return Ad.join("");},isDateDisabled:function(Aa,Ac,Ab){if(this.validDates){return !AU(Aa,Ac,Ab,this.validDates);}return !AB(Aa,Ac,Ab,this.min,this.max);},unrender:function i(Aa){delete this.lastValue;this._super(Aa);},grabFocus:function e(Aa){this._super();if(Aa){this.domNode.focus();}},loseFocus:function s(Aa){this._super();if(Aa){this.domNode.blur();}},enterUnit:function Y(Aa){this.resetTabNav();this.grabFocus(true);if(Aa){this.navigateToFirstValidTarget();}},restoreFocus:function q(){if(!this.navList.length){this.buildNavList();this.tabIndex=0;}if(this._super){this._super();}},updateNavListForBodyCell:function H(Ab){var Ac,Aa=AF.walk(Ab+"View.firstChild.lastChild",this);if(!Aa){return ;}Ac=AF.walk("children."+(Ab===G?1:0)+".cells.0.firstChild",Aa);if(Ac){this.navList[4]=Ac;AT.enableAccessibility({domNode:Ac});}},buildNavList:function AL(){if(!this.enableAccessibility){return ;}var Ad=this,Aa=this.currentView;this.navList=[this.decreaseButton,this.monthLabel,this.yearLabel,this.increaseButton];this.updateNavListForBodyCell(Aa);this.updateViewList(Aa);if(this.dtp===AM.TIMESTAMP||this.dtp===AM.TIME){this.navList.push(this.hourLabel,this.minuteLabel,this.secondLabel,this.AMPMLabel);}var Af=AF.walk("checkLabel.checkbox.domNode",this);if(Af){this.navList.push(Af);if(this.checkLabel.checkbox.checked){var Ab=AF.walk("advancedPanel.daysAdjustBox",this),Ae=AF.walk("advancedPanel.monthsAdjustBox",this);this.navList=this.navList.concat(J(Ab),J(Ae));}}if(AF.walk("buttonsNode.style.display",this)!=="none"){var Ac=AF.walk("buttonsNode.children",this);if(Ac){this.navList.push(Ac[1],Ac[0]);}}AN.forEach(this.navList,function(Ag){if(Ag instanceof HTMLElement){AT.enableAccessibility({domNode:Ag});}else{if(Ag.scriptClass==="mstrmojo.ui.editors.controls.ValidationTextBox"){AT.enableAccessibility({widget:Ag,domNode:Ag.inputNode});Ag.validate=mstrmojo.func.composite([Ag.validate,function(){Ad.restoreFocus();}]);}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.css");var G=mstrmojo.css,F=Math.round;function J(O){var P=this.previewNode,N=P.clientWidth,R=P.clientHeight,Q=P.offsetWidth-N,S=Math.sqrt(N*N+R*R)-Q/2,M=Math.atan2(R,N)*(-180)/Math.PI;P.style.backgroundColor="#FFFFFF";O.display="block";O.top=F((P.offsetHeight+Q)/2)+"px";O.left=F((N-S+Q)/2)+P.offsetLeft+"px";O.width=F(S)+"px";O[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+F(M)+"deg)";}mstrmojo.ui.editors.controls.ColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onselectedValueChange:function(){this.updatePreview();this.colorPicker.set("color",this.selectedValue);},onautoPreviewColorChange:function D(){this.getPopupWidget().set("autoPreviewColor",this.autoPreviewColor);this.updatePreview();},onenabledChange:function H(){G.toggleClass(this.domNode,"disabled",!this.enabled);}},isHostedWithin:false,showGradient:false,showNoFill:true,showAutomatic:false,autoPreviewColor:null,selectedValue:null,init:function L(N){this._super(N);var M=this.colorPicker;M.showGradient=this.showGradient;if(this.showNoFill!==undefined){M.showNoFill=this.showNoFill;M.showAutomatic=this.showAutomatic;}M.showAutomatic=this.showAutomatic;M.widget=N&&N.widget;G.addWidgetCssClass(this,"mstrmojo-ColorPickerBtn");},preBuildRendering:function K(){this.colorPicker.showNoFill=this.showNoFill;return this._super();},setDimensions:function I(N,M){this._super(N,M);window.setTimeout(function(){this.updatePreview();}.bind(this),0);},afterLayout:function C(){var M=this.previewNode,N=M.style,P=N.width,O=M.offsetWidth;if(O>0){N.width=(O-4)+"px";}else{if(P!==""){N.width=(parseInt(P,10)-4)+"px";}}if(N.height===""){N.height=(M.offsetHeight-4)+"px";}},postBuildRendering:function A(){var M=this.noFillNode=document.createElement("div");M.style.display="none";M.className="slash";this.domNode.firstChild.appendChild(M);this._super();},updatePreview:function B(){var Q=this.previewNode;if(Q){var O=this.selectedValue===mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC?this.autoPreviewColor:this.selectedValue;if(O){var R=Q.style;if(O.c1){var S=G.buildGradient(O.or,O.c1,O.c2);if(S&&S.n){R[G.convertCssToCamelCase(S.n)]=S.v;}}else{var M=G.buildGradient(0,"0","0");if(M&&M.n){R[G.convertCssToCamelCase(M.n)]=null;}var P=O==="conflict";G.toggleClass(Q,"conflict",P);R.backgroundColor=!P?O:null;}if(this.showNoFill&&this.noFillNode&&this.enabled){var N=this.noFillNode.style;if(O==="transparent"){J.call(this,N);}else{N.display="none";}}}Q.style.backgroundOrigin="border-box";}},getPopupWidget:function E(){return this.colorPicker;},children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,isHostedWithin:true,showNoFill:true,colorChanged:function(M){this.parent.set("selectedValue",M);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.Image","mstrmojo.css");mstrmojo.vi.ui.CollapsibleTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,null,{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",btnCollapse:null,canCollapse:false,disabled:false,isCollapsed:false,collapse:mstrmojo.emptyFn,enableAccessibility:false,onToggleCollapseByUI:mstrmojo.emptyFn,postBuildRendering:function C(){if(this._super){this._super();}if(this.enableAccessibility){this.domNode.setAttribute("aria-expanded",!this.isCollapsed);}},setToolbarVisibility:function E(F){if(!F||!this.isCollapsed){this._super(F);}},onisCollapsedChange:function B(){if(this.canCollapse){var F=this.isCollapsed;this.parent.set("isCollapsed",F);if(this.enableAccessibility){this.domNode.setAttribute("aria-expanded",!F);}}},getLeftToolbarChildren:function A(){var F=this;return[{scriptClass:"mstrmojo.Image",slot:"leftToolNode",alias:"btnCollapse",onclick:function(H){var I=this.parent,G=I.parent;if(I.canCollapse&&!I.disabled){I.set("isCollapsed",!I.isCollapsed);F.onToggleCollapseByUI();var J=H.e;if(J&&J.stopPropagation){J.stopPropagation();}}if(G&&G.clickToCollapse){G.clickToCollapse();}}}];},onkeydown:function D(F){var H=F.e||F,G=H.key;if(this._super){this._super(F);}if(!this.enableAccessibility){return ;}if(G==="Enter"||G===" "){F.cancel();F.preventDefault();this.btnCollapse.onclick(F);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.vi.ui.CollapsibleTitleBar,{oncanCollapseChange:function(){this.btnCollapse.set("visible",this.canCollapse);},ondisabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",this.disabled);},onisCollapsedChange:function(){mstrmojo.css.toggleClass(this.domNode,"collapsed",this.isCollapsed);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.desc","mstrmojo.ME.TokenInputBox","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.ME.Enum","mstrmojo._HasTooltip","mstrmojo.dom","mstrmojo.string");mstrmojo.requiresDescs(221,547,9106,9565,9566,9567,9568,11897,13542,13543,15665);var M=mstrmojo.array,S=mstrmojo.hash,I=mstrmojo.desc,O=mstrmojo.mstr.EnumDSSXMLTokenTypes,N=mstrmojo.ME.Enum.METRIC_EDIT_TYPES,L=mstrmojo.string.escape4HTMLText,E=mstrmojo.dom;var Q={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},R={0:I(9565,"Valid Metric Formula."),1:I(9106,"Require Validation?"),2:I(9566,"Validation in Progress..."),3:I(9567,"Validation Failed with Syntax Error!"),4:I(9568,"Validation Failed with Object Ambiguity!")},U={ERROR:"-2147214845",AMBIGUITY:"-2147214846",DATAMODELERROR:"-2147213293"},B={};B[U.ERROR]=Q.ERROR;B[U.AMBIGUITY]=Q.AMBIGUITY;B[U.DATAMODELERROR]=Q.ERROR;function P(b){if(!b){return Q.VALID;}return B[b]||Q.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.MetricEditBox",vStatus:Q.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,validateFunc:null,isObjectVisible:function(b){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;},statusNode:function(){return this.domNode.lastChild;},validateBtn:function(){return this.domNode.lastChild.lastElementChild;}},markupMethods:{onvStatusChange:function(){var c=this.vStatus,b=this.vStatusNode;b.className="mstrmojo-MEBox-vStatus "+G[c];b.innerHTML=(this.getStatusDesc&&this.getStatusDesc(c))||R[c]||"";if(this.vStatus===Q.VALID){this.set("cValid",true);}},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:function(){return this.parent.browseItemVisible;},candidates:function(){return this.parent.candidates;}},editEmbeddedFilterToken:function(b){var c=this.parent;if(c.editEmbeddedFilterToken){c.editEmbeddedFilterToken(b);}}}],init:function W(b){var c=this,d=b.validateFunc||this.validateFunc;if(d){c.children=[{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"statusNode",text:I(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton right hoverLink",cssDisplay:"inline-block",onclick:d}].concat(this.children);}if(this._super){this._super(b);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function a(){return this.inputBox.getSearchPattern();},getHighlightedText:function X(c,b){return this.inputBox.getHighlightedText(c,b);},item2textCss:function K(b){return{4:"m",7:"am",10:"p",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[b.t]||"";},handleSuggestionItemSelect:function J(b){var c=this.ambiguityDialog;if(b){c.onItemSelect(b);}c.close();},showDesc:true,showPath:true,ambiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",I(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",I(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:function(){return this.parent.opener.suggestionItems;}},onclick:function(b){mstrmojo._IsList.onclick.call(this,b);},getItemMarkup:function(e,b){var d=this.parent.opener,c=mstrmojo.string.escape4HTMLText;var g=(d&&d.item2textCss(e))||"";var f="";if(e.path){f='<div class="mstrmojo-object-additional-info" idx="'+b+'">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(e.path)+"</div>";}else{e.standalone=true;}return'<div class="mstrmojo-object-item" idx="'+b+'"><div class="mstrmojo-object-name '+g+'" idx="'+b+'">'+L(e.n)+"</div>"+f+"</div>";},buildTooltip:function(b,c){if(b.standalone){return L(b.path)+"> "+L(b.n);}return L(b.n)+'<div class="mstrmojo-object-additional-info">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(b.path)+"</div>";}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:I(547,"Select"),onclick:function(){var b=this.parent.parent;b.opener.handleSuggestionItemSelect(b.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:I(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",Q.UNKNOWN);this.set("iStatus","");},postBuildRendering:function Z(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function H(b){this.inputBox.set("items",b.items);},replaceErrorToken:function C(b){this.inputBox.replaceErrorToken(b);},clientSideValidation:function A(h){if(!h){return ;}var d=false,g=false,c=h.items;try{d=mstrApp.rootCtrl.docCtrl.model.isMDXDataset(S.any(this.parent.parent.datasets));g=h.met==N.ADVANCED&&c[0].tp==O.SimpPrefixFun&&c[0].v==="ApplySimple";}catch(i){}if(d&&g){var b=M.filterOne(c,function(e){return e.tp===O.DoubleQString;});var f=/(\'|\/\/|\-\-|\/\*|\*\/)/;if(b&&f.test(b.v)){h.vs=Q.ERROR;h.rjec=U.ERROR;h.rjed=I(15665,"MDX pass-through expression should not contain ', //, --, /*, */.");}}},handleValidation:function F(d){if(!d){this.set("vStatus",Q.ERROR);return ;}d.vs=P(d.rjec);this.set("vStatus",d.vs);if(d.rjec===U.DATAMODELERROR){d.rjed=I(28155,"Please use objects from the same table for all expressions.");}this.set("iStatus",mstrmojo.string.encodeHtmlString(d.rjed)||"");this.updateInputBoxItems(d);if(this.iStatusNode||this.vStatusNode){var l=this.iStatusNode&&this.iStatusNode.clientHeight+this.vStatusNode&&this.vStatusNode.clientHeight,p=this.statusNode.clientHeight,o=p>=(l)?p:l;var k=parseFloat(window.getComputedStyle(this.inputBox.domNode).height);this.inputBox.domNode.style.height=k-o+this.validateBtn.clientHeight+"px";}this.inputBox.focus();if(d.vs===Q.AMBIGUITY){var n=this,i=d.items,h=M.find(i,"sta",-1),b=i[h].v,j=function(c){n.replaceErrorToken(c);n.set("iStatus","");n.set("vStatus",Q.UNKNOWN);if(n.continueValidataion){n.continueValidataion();}else{n.set("vStatus",Q.VALID);}};var e=M.filter(d.srfd.items,this.isObjectVisible);var m=this.parent.candidates,g=m&&m.items;if(g){M.forEach(e,function(f){var c=M.find(g,"did",f.did);if(c===-1){if(this.absorbAmbiguity){g.push(f);}}else{f.path=g[c].path;}});}if(e.length===1){j(e[0]);return ;}this.openPopup("ambiguityDialog",{zIndex:100,items:e,ambiguousName:b,onItemSelect:j});}else{if(this.postHandleValidation){this.postHandleValidation();}}},tooltip:"",useRichTooltip:true,updateTooltipConfig:function Y(c){var d=c.target||E.eventTarget(c.hWin,c.e),b=E.position(d);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(c),top:b.y+b.h,left:b.x+10,cssClass:"vi-regular vi-tooltip-A"};},getTooltipContent:function(b){return this.iStatus;},showTooltip:function D(b,c){if(b.target===this.iStatusNode){this._super(b,c);}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=Q;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS=G;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC=R;mstrmojo.ME.MetricEditBox.DA_ERR_CODES=U;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.Label","mstrmojo.Button","mstrmojo.Pulldown","mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.tooltip","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.publisher","mstrmojo.desc","mstrmojo.expr");var q=mstrmojo.array,U=mstrmojo.hash,Q=mstrmojo.ME.MetricToken.brackets,C=mstrmojo.css,D=mstrmojo.publisher,R=mstrmojo.desc,m=mstrmojo.expr.TP,AE=mstrmojo.expr.STP,a=mstrmojo.vi.ui.tabs.Tab.ACTIONS,z=a.DELETE+a.RENAME,AA=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,AB=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS,W=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC,L=mstrmojo.ME.MetricEditBox._DA_ERR_CODES,d=mstrmojo.mstr.EnumDSSXMLObjectTypes,F=mstrmojo.string,S=mstrmojo.ME.MetricToken.convertParamTokenToMetric,AD="This@ID",f="45C11FA478E745FEA08D781CEA190FE5",c=mstrmojo.mstr.EnumDSSXMLBaseFormType,AG=[{n:mstrmojo.desc(959,"Default"),v:c.DssXmlBaseFormReserved},{n:mstrmojo.desc(12276,"String"),v:c.DssXmlBaseFormText},{n:mstrmojo.desc(2052,"Date"),v:c.DssXmlBaseFormDate},{n:mstrmojo.desc(3434,"Number"),v:c.DssXmlBaseFormNumber}],h=function(){var AK="analytical_engine_version.htm",AJ=mstrApp.showHelpTopic;if(AJ){AJ(AK,"upgrade");}else{window.open(mstrmojo.upgradeHelpPath()+AK,"_blank");}};function J(AJ){return{n:AJ,k:AJ,ftk:[],vs:1,is:"",bft:c.DssXmlBaseFormReserved,bftp:c.DssXmlBaseFormReserved};}function Y(AP,AQ,AJ,AN){var AL=AP.forms[AQ]||{},AO=AP.forms[AJ],AK=AP.inputBox,AM=AP.statusBox.pulldownBox.pulldown;if(AQ!==AJ){AL.vs=AP.vStatus;AL.is=AP.iStatus;AL.bft=AP.formType||AM.getSelectedItem().v;AL.bftp=AP.formType||AM.getSelectedItem().v;AL.ftk=AK.items;AP.set("vStatus",AA.UNKNOWN);}AP.set("vStatus",AO.vs);AP.set("iStatus",AO.is);AP.updateInputBoxItems({items:AO.ftk});if(AP.curFormIdx!==AJ){AP.curFormIdx=AJ;AP.tabstrip.setSelectedTab(AO.k);}AM.set("selectedIndex",q.find(AM.items,"v",AO.bft));AP.raiseEvent({name:"tabSwitch",tks:AO.ftk,vs:AO.vs,is:AO.is,bft:AO.bft,bftp:AO.bftp,oidx:AQ,nidx:AJ,toNewTab:AN});}function X(AK){var AJ=AK.forms[AK.curFormIdx];if(AJ){AJ.ftk=AK.inputBox.items;AJ.vs=AK.vStatus;AJ.is=AK.iStatus;}}var y=0;function k(AJ){y=Math.max(AJ.length-1,y);}function j(){y=0;}function AF(AJ){var AK="DESC"+(y?" "+y:"");y++;if(q.find(AJ,"n",AK)>=0){return AF(AJ);}return AK;}function M(AM){var AL={v:Q(AM.n),oi:AM,isNew:true},AK,AJ;if(AM.t===12){AK=q.filter(AM.fs,function(AN){return AN.obf||AM.da;}).length;if(AK===1){AJ=AM.fs[0];AL=U.copy({v:Q(AM.n)+"@"+Q(AJ.fnm),ift:true,exv:AJ.fid,extp:8},AL);}else{AL=U.copy({v:Q(AM.n)+"@",ift:true},AL);}}S(AL);return AL;}function G(AK,AJ){AK.set("enabled",!AJ);var AL="mstrmojo-InlineWaitIcon";if(AK.iconClass){AK.set("iconClass",AK.iconClass.replace(new RegExp(AL),"")+" "+(AJ?AL:""));}else{mstrmojo.css.toggleClass(AK.domNode,AL,AJ);}}function P(AJ){return AJ.tp===33||AJ.tp===37;}function I(AJ){return AJ.tp===-1;}var i=function(AP){var AN=AP.items,AK=AN.length,AM,AO,AL=[],AJ="";AL.push({v:"!",tp:33,lv:4,sta:2});for(AM=0;AM<AK;AM++){AO=AN[AM];if((AM===0&&P(AO))||I(AO)){continue;}if(AO.isNew&&!AO.oi){AJ+=AO.v;}else{if(!F.isEmpty(AJ)){AL.push({v:AJ,tp:2,lv:1});AJ="";}if(AO.v&&AO.v.indexOf(AD)>=0){AO.v=AO.v.replace("["+AD+"]",AD);AO.exv=f;AO.extp=8;delete AO.oi;}AL.push(AO);}}if(!F.isEmpty(AJ)){AL.push({v:AJ,tp:2,lv:1});AJ="";}AL.push({v:"",tp:-1,lv:4,sta:2});return{items:AL};},s=function(AL){var AJ=AL.items||[],AK=AJ[AJ.length-1];if(AK&&AK.tp===-1){AJ.pop();}if(AJ[0]&&P(AJ[0])){AJ.splice(0,1);}q.forEach(AJ,function(AM){if(AM.v&&AM.v.indexOf(AD)>=0){U.copy({extp:8,exv:f,oi:{n:"This",did:"This",t:12}},AM);}});},n=function(AJ){if(!AJ){return AA.VALID;}return{"-2147214845":AA.ERROR,"-2147214846":AA.AMBIGUITY}[AJ]||AA.ERROR;},b=function(AL){AL=i(AL);var AK={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},AJ={getArrItemName:function(){return"tkn";},isSerializable:function(AM){return !!(AK[AM]);}};return F.json2xml("tknstrm",AL,AJ);},H=function(AL,AP,AO,AK,AM){var AN=b(AP),AQ=function(AR){if(AR&&AR.tks){var AS=AR.tks;s(AS);AS.vs=n(AS.rjec);AS.tokenXML=AN;if(AK){AK(AS);}}},AJ=function(AR){mstrmojo.alert(AR.message||AR.getResponseHeader&&AR.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:AN,localSymbolFolderXML:"",metricXML:"",metricId:AL||"",isNew:true,objectType:12,isIDForm:AO,msgID:mstrApp.getMsgID(),dsId:AM},{success:AQ,failure:AJ});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function e(){if(this._super){this._super();}var AJ=this,AK=AJ.lbl;AK.editOnDoubleClick=this.editable;AK.onTextEditComplete=function(AM,AL){if(AJ.validate(AK.text)){AJ.titleEdited(AK.text,AL);}};},onclick:function x(AJ){var AK=mstrmojo.dom.eventTarget(AJ.hWin,AJ.e);if(AK===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(AJ){var AK=!/[\[\]\"\\]/g.test(AJ);if(!AK){this.lbl.set("isEditing",true);}this.set("valid",AK);return AK;},showErrTooltip:function AI(AN,AL){var AJ=mstrmojo.dom.position(this.domNode),AK=this,AM=AK.errTooltip;if(!AM){AK.errTooltip=AM=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(AM);}AM.set("top",AJ.y+AJ.h+2);AM.set("left",AJ.x+AJ.w/2-AL);AM.set("content",'<div class="content"><span>'+AN+"</span></div>");AM.open();window.setTimeout(function(){AM.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function w(AM,AN,AO){var AL=q.find(AN,"k",AO.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:AO.n,draggable:false,editable:AL!==0,cssClass:"mstrmojo-AEB-Tab "+(AL===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return z;},tabSelected:function(){Y(AM,AM.curFormIdx,AL);},titleEdited:function AK(AQ,AP){if(AQ!==AP){if(q.find(AM.forms,"n",AQ)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}else{var AR=AM.forms[AL];AR.n=AQ;AM.set("dirty",true);}}},tabDeleted:function AJ(){var AP=AM.forms.length,AT=(AM.curFormIdx===AP-1)?0:AM.curFormIdx,AQ=AM.forms.slice(0),AR=AQ[AL],AS=U.walk("parent.parent.dataModelId",this);if(AR&&AR.did){AM.delForms.push({n:AR.n,did:AR.did});}AQ.splice(AL,1);AM.curFormIdx=AT;AM.set("forms",AQ);Y(AM,-1,AT);AM.set("dirty",true);if(AS){AM.consolidateSrcTable();AM.updateSrcTable();}}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-AEBox-status {@statusCssClass}"></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var AK=this.vStatus,AO=(AK===AA.VALID),AM=(AK===AA.UNKNOWN||AK===AA.VALIDATING),AL=this.statusBox.infoBox;this.validateBtn.set("visible",AM);AL.set("visible",!AM);if(!AM){AL.infoLabel.set("text",AO?mstrmojo.desc(11655,"Valid formula."):mstrmojo.desc(15953,"Validation failed."));var AN=AB[AK],AJ=AL.infoIcon.domNode;if(!C.hasClass(AN)){C.removeClass(AJ,[AB[AA.VALID],AB[AA.ERROR],AB[AA.AMBIGUITY]]);C.addClass(AJ,AN);}}},oniStatusChange:function(){var AL=this.vStatus,AJ=(AL===AA.ERROR||AL===AA.AMBIGUITY),AK=this.statusBox.infoBox.infoIcon;AK.title=AJ?(this.getStatusDesc&&this.getStatusDesc(AL))||W[AL]+" "+this.iStatus:"";}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function AC(AM){var AN=this,AP=function(){AN.validateCurrentForm();},AL=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function AK(AS,AT,AR){return U.copy(w(AN,AS,AT),AR);},addTab:function AQ(){var AT=AN.forms,AR=AT.length,AU=AF(AT),AS=AT.slice(0);AS.push(J(AU));AN.set("forms",AS);Y(AN,AN.curFormIdx,AR,true);AN.set("dirty",true);},clear:function AJ(){q.forEach(this.children,function(AR){AR.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll hoverLink",onclick:function(){var AR=U.walk("parent.parent.dataModelId",AN);AN.inputBox.clearTokens([]);AN.inputBox.raiseChangeEvent({type:"clear"});if(AR){AN.clearSrcTableForCurForm();AN.consolidateSrcTable();AN.updateSrcTable();}}},{scriptClass:"mstrmojo.Box",alias:"statusBox",slot:"statusNode",cssClass:"statusBox",children:[{scriptClass:"mstrmojo.Box",alias:"pulldownBox",cssClass:"pulldownBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-AEBox-pulldownLabel AEBox-item",text:mstrmojo.desc(9918,"Data Type")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"pulldown",cssClass:"mstrmojo-AEBox-pulldown AEBox-item",selectedIndex:0,items:AG,onitemSelected:function(AU){var AR=AN.curFormIdx,AS=AN.forms,AT=AS&&AS.length>AR&&AS[AR];if(AT){if(AT.bft!==AU.v){AT.bft=AT.bftp=AU.v;AN.set("dirty",true);}}}}]},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-center AE-tooltip",posType:mstrmojo.tooltip.POS_TOPCENTER,enableHover:true},useRichTooltip:true,tooltipCloseDelay:500,updateTooltipConfig:function AO(){var AS=this.richTooltip,AR=mstrmojo.dom.position(this.domNode);AS.left=AR.x+AR.w-8;AS.top=AR.y+28;AS.content=mstrmojo.desc(16313,"Data Type options for derived attribute forms are only available for data engine version 11.1 and later.");AS.content+="<br /><div class='help-link-label' mstreventmark='labelNode' mstrevent='click' onclick='mstrmojo.ME.AttributeEditBox.AEHelpFn()'>"+mstrmojo.desc(9849,"Learn More")+"</div>";AS.eventHandlerMap={labelNode:{click:{requiredParams:[],handlerFn:function(){return function(){mstrmojo.ME.AttributeEditBox.AEHelpFn();};}}}};}},{scriptClass:"mstrmojo.Box",alias:"infoBox",cssClass:"infoBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Button",alias:"infoIcon",cssClass:"mstrmojo-AEBox-infoIcon AEBox-item",title:"",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var AR=mstrmojo.dom.position(this.domNode);this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(AR.y+26,0),left:Math.max(AR.x+10,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title};}},{scriptClass:"mstrmojo.Label",alias:"infoLabel",cssClass:"mstrmojo-AEBox-infoLabel AEBox-item"}]}]}];this.validateFunc=AP;AN.children=AL.concat(this.children);this._super(AM);},item2textCss:function O(AJ){return this._super(AJ)||{21:"afm"}[AJ.t]||"";},onformsChange:function l(){var AJ=this.forms,AK=AJ[this.curFormIdx].k;q.forEach(AJ,function(AL){s({items:AL.ftk});});this.tabstrip.setTabs(AJ,AK);k(AJ);},selectFormTab:function A(AJ){Y(this,this.curFormIdx,AJ);},postBuildRendering:function e(){if(this._super){this._super();}this.clear();var AJ=this;this.inputBox.ondrop=function(AN){if(!AN.src.data||!AN.src.data.item){return ;}var AM=AJ.inputBox,AP=AM.ctxtBuilder.itemWidgets,AQ=U.copyProps(["did","n","t","fs"],AN.src.data.item),AS=M(AQ),AK,AR,AL;AN.src.data=AS;mstrmojo.ListBase2.prototype.ondrop.call(this,AN);var AO=function(AT){return AT.t===d.Function&&!(!isNaN(AT.fdid)&&AT.fdid<0);};if(AO(AS.oi)){this.insertParenthesisTokens();}if(AJ.ontokensModify){AJ.ontokensModify();}AK=this.selectedIndices;if(AQ.t===12&&AS.ift&&!AS.exv){for(AR in AK){AL=AP[AR];if(AL){AM.startTokenSuggestion(AL);}}}AM.clearSelect(true);C.removeClass(AM.domNode,"unselectable");};},clear:function u(){this.curFormIdx=0;this.delForms=[];this.attrid=null;j();this.set("forms",[J("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",AA.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},getSrcTablePerForm:function B(AL,AJ){var AO=AJ!==undefined?AJ:this.curFormIdx,AK={},AP=this.parent.parent,AN=AP.datasets[AP.dataModelId].tableMap,AM=q.filter(AL,function(AQ){return AQ.oi&&(AQ.oi.t===m.METRIC||AQ.oi.st===AE.ATTR);}).map(function(AQ){return AQ.oi.did;});U.forEach(AN,function(AS){var AQ=AS.attRefs.concat(AS.mxRefs),AR=new Set(q.map(AQ,function(AT){return AT.did;}));if(AM.every(function(AT){return AR.has(AT);})){AK[AS.did]=AS.n;}});this.forms[AO].srcTables=AK;},clearSrcTableForCurForm:function g(){delete this.forms[this.curFormIdx].srcTables;},consolidateSrcTable:function p(){var AK=this.forms;if(!AK||AK.length===0){return ;}var AN={},AM=this.parent.parent,AL=AM.dataModelId,AO=AM.datasets[AL].tableMap,AJ=[];U.forEach(AO,function(AQ,AP){AJ.push({n:AQ.n,key:AP});});q.forEach(AJ,function(AP){if(AK.every(function(AQ){return !AQ.srcTables||AQ.srcTables[AP.key];})){AN[AP.key]=AP.n;}});this.srcTables=AN;},updateSrcTable:function N(){var AM=this.parent.parent,AK=this.srcTables,AN=AM.datasets[AM.dataModelId].tableMap,AL=AM.datasetsObjects.getDatasetPanel(AM.dataModelId),AJ=U.walk("tableView",AL);if(AJ&&AJ.id){D.publish(AJ.id,"disableTable",{tables:Object.keys(AN).filter(function(AO){return !AK[AO];})});}this.updateCandidates();},updateCandidates:function o(){var AP=this.parent.parent,AN=AP.dataModelId,AO=AP.datasets[AN],AQ=AO.tableMap,AJ=AP.getDocCandidates(AP),AM=this.srcTables,AK={},AL=q.filter(AP.candidates.items,function(AR){return AR.t===d.Function;});q.forEach([].concat(AO.att).concat(AO.mx),function(AR){if(AR.st===AE.DERIVED_ATTR){AK[AR.did]=true;}});U.forEach(AQ,function(AS,AR){if(AM[AR]){q.forEach([].concat(AS.att).concat(AS.mx),function(AT){AK[AT.did]=true;});}});AJ.items=q.filter(AJ.items,function(AR){return AK[AR.did]||AK[AR.attid];}).concat(AL);AP.set("candidates",AJ);},validateCurrentForm:function E(AK){var AM=this,AL=U.walk("parent.parent.dataModelId",this),AN=this.validateBtn,AJ=function(AP){G(AN,false);AM.set("vStatus",AP.vs);AM.set("iStatus",AP.rjed||"");AM.updateInputBoxItems({items:AP.items});AM.statusNode.style.display="block";AM.handleValidation(AP);if(AL&&AP.vs===AA.VALID){AM.getSrcTablePerForm(AP.items);AM.consolidateSrcTable();if(U.isEmpty(AM.srcTables)){var AO=R(28155,"Please use objects from the same table for all expressions.");AM.set("vStatus",AA.ERROR);AM.set("iStatus",AO);}else{AM.updateSrcTable();}}if(AK){AK(AP.items,AP.vs===AA.VALID);}};AM.set("vStatus",AA.VALIDATING);G(AN,true);H(this.attrid,{items:this.inputBox.items},AM.curFormIdx===0,AJ,AL);},validateAllForms:function AH(AL){var AN=this,AK=AN.forms,AJ=0,AM=U.walk("parent.parent.dataModelId",this),AO=function(AR){var AQ=(AJ===0);if(AR){var AP=AK[AJ-1];AP.ftk=AR.items;AP.vs=AR.vs;AP.is=AR.rjed||"";AP.tokenXML=b({items:AR.items});if(AM&&AR.vs===AA.VALID){AN.getSrcTablePerForm(AR.items,AJ-1);AN.consolidateSrcTable();if(U.isEmpty(AN.srcTables)){AR.vs=AA.ERROR;AR.rjec=L.DATAMODELERROR;AR.rjed=R(28155,"Please use objects from the same table for all expressions.");}else{AN.updateSrcTable();}}if(AR.vs!==AA.VALID){AN.selectFormTab(AJ-1);AN.handleValidation(AR);if(AL){AL(null,false);}return ;}}if(AJ===AK.length){if(AL){AL(AK,true);}return ;}H(AN.attrid,{items:AK[AJ++].ftk},AQ,AO,AM);};X(AN);AO();},continueValidataion:function Z(){this.validateCurrentForm();},getStatusDesc:function t(AJ){return{0:mstrmojo.desc(11655,"Valid Formula.")}[AJ];},onObjectInsert:function K(AM){var AN=this.inputBox,AL=M(AM),AJ=AN.insertTokens([AL]),AK;if(AM.t===12&&AL.ift&&!AL.exv){AK=AN.ctxtBuilder.itemWidgets[AJ];if(AK){AN.startTokenSuggestion(AK);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=s;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=i;mstrmojo.ME.AttributeEditBox.mapErrorCode=n;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=b;mstrmojo.ME.AttributeEditBox.validateSyntax=H;mstrmojo.ME.AttributeEditBox.prepareInsertToken=M;mstrmojo.ME.AttributeEditBox.AEHelpFn=h;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.CollapsibleTitleBar","mstrmojo.ui.menus.ToolbarConfig","mstrmojo.ui.menus.Menu","mstrmojo.dom","mstrmojo.css");var F=mstrmojo.css,C="visible",G="containerNode";function E(Q){Q.btn.style.display=Q.menuCfg?"block":"none";}mstrmojo.vi.ui._IsPanel=mstrmojo.provide("mstrmojo.vi.ui._IsPanel",{_mixinName:"mstrmojo.vi.ui._IsPanel",markupString:'<div id="{@id}" class="mstrmojo-VIPanel {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="mstrmojo-VIPanel-titlebar" role={@titleBarRole}></div><div class="mstrmojo-VIPanel-content"></div><div class="mstrmojo-VIDND-mask"></div><div class="mstrmojo-VIPanel-handle splitter v"></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.childNodes[2];},handleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onisCollapsedChange:function L(){if(this.canCollapse){this.containerNode.style.display=this.isCollapsed?"none":"block";if(!this.isCollapsed){this.doLayout();}}}},title:"",titleAriaLabel:"",titleBar:null,titlebarNode:null,containerNode:null,maskNode:null,handleNode:null,bubbleMouseOver:true,canCollapse:false,isCollapsed:false,autoHideToolbar:false,init:function K(Q){this._super(Q);this.addChildren([this.getTitleBarCfg()]);this.menuBtnInfo={};},skipsSlotLayout:function(Q){return Q===G&&this.isCollapsed;},getTitleBarCfg:function P(){return{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",slot:"titlebarNode",alias:"titleBar",isCollapsed:this.isCollapsed,enableAccessibility:this.enableAccessibility,title:this.title,ariaLabel:this.titleAriaLabel||this.title,close:function(){this.parent.setOpenStatus(false);mstrApp.rootCtrl.generateToolbar();},collapse:function(Q){this.parent.set("isCollapsed",Q);}};},ontitleChange:function H(){this.titleBar.set("title",this.title);},_set_children:function A(U,R,Q){if(R!==this.children){var S=this.titleBar;if(S){R.push(S);}}return this._super(U,R,Q);},preBuildRendering:function I(){this.generateToolbar();this.titleBar.setToolbarVisibility(!this.autoHideToolbar);return this._super();},generateToolbar:function B(){var Q=this.titleBar;Q.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));if(!Q.visible){this.menuBtnInfo.menuCfg=Q.getMenuConfig();}},updateToolbar:function O(Q){return Q;},setOpenStatus:function N(Q){if(this.visible!==Q){this.set("visible",Q);this.parent.doLayout();}},setTitleBarVisibility:function D(Q){var S=this.titleBar;S.set("visible",Q);this.generateToolbar();var U=this.menuBtnInfo,R=U.btn;if(!R){R=U.btn=document.createElement("div");R.className="hover-menu-btn";var W=this.id;mstrmojo.dom.attachEvent(R,"click",function(){var Y=mstrmojo.all[W],X=U.menuCfg;X.hostId=W;X.hostElement=R;Y.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:X}));});this.domNode.appendChild(R);}U.menuCfg=Q?null:S.getMenuConfig();E(U);this.doLayout();},onmouseover:function M(Q){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){Q.cancel();}var S=this._panelTimeout;if(S){window.clearTimeout(S);delete this._panelTimeout;}if(this.autoHideToolbar){this.titleBar.setToolbarVisibility(true);}var R=this.menuBtnInfo;if(R.menuCfg){F.addClass(R.btn,C);}},onmouseout:function J(){var Q=this.id;this._panelTimeout=window.setTimeout(function(){var R=mstrmojo.all[Q];if(R){if(R.autoHideToolbar){R.titleBar.setToolbarVisibility(false);}var S=R.menuBtnInfo;if(S.menuCfg){F.removeClass(S.btn,C);}}},200);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.Pulldown","mstrmojo.Popup","mstrmojo.string","mstrmojo.func","mstrmojo.dom","mstrmojo.hash","mstrmojo.ui.ButtonBar","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.NumGroupStepperContentProvider","mstrmojo.ui.editors.controls.Stepper","mstrmojo._FormatDefinition","mstrmojo.models.FormatModel","mstrmojo.vi.ui.FontPicker");mstrmojo.requiresDescs(28930,28931);var Y=mstrmojo.func,R=mstrmojo.hash,D=mstrmojo.string,F=mstrmojo.dom,K=mstrmojo._FormatDefinition,f=mstrmojo.models.FormatModel,Q=f.ENUM_PROPERTY_NAMES,P=1,J=2,Z=4,H=8,N=16;var d;var S;var U;var M={bold:Q.FONT_WEIGHT,italic:Q.FONT_STYLE,underline:Q.UNDERLINE,strikeout:Q.LINE_THROUGH};function E(g){return(g&N)>0;}function c(i){var m=Q.FONT_FAMILY,h=i&&(i[m]||f.getFormatBlockValue(i,m)),k=this.hcgControls.fontFamily,j;if(window.ReactComponents){if(h===-1){}else{k.setFontFamily(h);}}else{j=this.getFontFamilyItems();if(h===-1){var l=k&&k.list;if(!l){return ;}l.clearSelect();delete k.selectedIndex;if(k.hasRendered){k.refresh();}}else{if(j){var g=j.map(function(n){return n.n;}).indexOf(h);if(g<0){j.push({n:h,v:h,symbolic:true});g=j.length-1;k.set("items",j);}k.set("selectedIndex",g);}}}}function b(g){var h=[],i=function(l,m,j){var k=g[l];if(k===undefined){k=f.getFormatBlockValue(g,l);}if(k){h.push(j);}};i(Q.FONT_WEIGHT,"bold",0);i(Q.FONT_STYLE,"italic",1);i(Q.UNDERLINE,"underline",2);i(Q.LINE_THROUGH,"line-through",3);this.hcgControls.fontStyle.select(h);}function W(g){var m=this.hcgControls,j=Q.FONT_SIZE,h=Q.COLOR,l=g[j]||f.getFormatBlockValue(g,j),i=m.fontSize;var k=g[h];if(typeof k==="undefined"||k===null){k=f.getFormatBlockValue(g,h);}if(typeof k==="undefined"||k===null){k="";}if(E(this.visibleControls)){if(l.length){i.provider.set("curValGroup",l);}}else{if(l===-1){i.list.clearSelect();i.selectedValue="";i.updatePreview();}else{i.set("selectedValue",l?(parseInt(l,10)).toString():i.items[0].n);}}m.fontColor.set("selectedValue",k===""?"conflict":f.decodeValue(Q.COLOR,k));}function X(){if(d&&S){return ;}d=K.SizesInVI.map(function(h){return{idx:parseInt(h.n,10),n:h.n};});S=mstrmojo._FormatDefinition.Families.slice(1).map(function(h){return{n:h.n,id:h.n,preview:!h.symbolic};});var g=window.mstr&&mstr.utils&&mstr.utils.fonts;if(window.mstrApp&&mstrApp.pageName==="rwd"&&g){S=g.appendSupportedFonts(S);S.forEach(function(h){h.id=h.n;h.preview=!h.symbolic;});}U=R.walk("_FormatDefinition.FontFamilyConfig.fontXML",mstrmojo);}function a(h){var j="";if(!h.isOOTB){const g=h.isLocal?"mstrmojo-ui-EditCharacter-localFont":"mstrmojo-ui-EditCharacter-invalidFont";const i=h.isLocal?mstrmojo.desc(28930,"This font is pre-installed on your local machine and may not appear correctly on other devices or when exported."):mstrmojo.desc(28931,"This font is not available and has been rendered with a font picked by your browser.");j=' <div class="'+g+'" title="'+i+'"></div>';}return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}" {@attrs}>{@n}'+j+"</{@tag}>";}mstrmojo.ui.editors.controls._HasCharacterGroup=mstrmojo.provide("mstrmojo.ui.editors.controls._HasCharacterGroup",{_mixinName:"mstrmojo.ui.editors.controls._HasCharacterGroup",visibleControls:P+J+Z,showNoFillInColor:true,hcgControls:null,getFontFamilyItems:function A(){return S;},getFontItemMarkup:a,getFontXml:function L(){return U;},getFontStyleItems:function e(){return[{n:mstrmojo.desc(2718,"Bold"),id:"b",css:"bold"},{n:mstrmojo.desc(2719,"Italic"),id:"i",css:"italic"},{n:mstrmojo.desc(2720,"Underline"),id:"u",css:"underline"},{n:mstrmojo.desc(3062,"Strikeout"),id:"s",css:"strikeout"}];},getFontPickerDropdownClassName:function O(){return"mstr-charactor-group_font-picker-dropdown-"+this.id;},getHCGControls:function G(g){X();var k=this,n=this.hcgControls={},p=this.visibleControls;if((p&P)>0){if(window.ReactComponents){var i=true;if(mstrApp&&mstrApp.supportFeature($FEATURES.MONO_FONTS_FALLBACK)){i=false;}const j=Y.safeCall("ReactComponents.ReactComponentUtils.getLocaleMapping",window)(mstrApp.localeId);const o=Y.safeCall("ReactComponents.ReactComponentUtils.getLocaleMapping",window)(mstrApp.displayLocaleId);var l=new mstrmojo.vi.ui.FontPicker({locale:o||j,placeholder:"",fontXML:this.getFontXml(),unavailableWarning:true,value:"Arial",onSelect:function(s,q){Y.safeCall("hcgControls.fontFamily.setFontFamily",k)(s);g(Q.FONT_FAMILY,s,q);},dropdownClassName:k.getFontPickerDropdownClassName(),supportMonoType:i});n.fontFamily=l;}else{n.fontFamily=mstrmojo.ui.Pulldown.newPulldown(this.getFontFamilyItems(),function(q,s){g(Q.FONT_FAMILY,q.id,s&&s.id);},0,{isHostedWithin:false,scrollNodeMaxHeight:350,getPopupListConfig:function h(){var q=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);q.getItemMarkup=a;q.getItemProps=function s(w,t){var u=mstrmojo._IsList.getItemProps.call(this,w,t);u.style=w.preview?"font-family:'"+D.encodeHtmlString(w.n,true)+"';":"";return u;};return q;}});}}if((p&J)>0||(p&H)>0){var m=n.fontStyle=new mstrmojo.ui.ButtonBar({hasSpacing:true,multiSelect:true,items:this.getFontStyleItems(),postselectionChange:function(q){var t=q.added,u=this.items[t?t[0]:q.removed[0]],s=!!t;if(u){g(M[u.css],s,!s);}}});if((p&H)>0){m.items.pop();}}if((p&Z)>0){n.fontSize=E(p)?new mstrmojo.ui.editors.controls.Stepper({alias:"fontSizeCtrl",provider:new mstrmojo.NumGroupStepperContentProvider({item:{interval:1},curValGroup:[],min:Math.min.apply(Math,d.map(function(q){return q.idx;})),max:Math.max.apply(Math,d.map(function(q){return q.idx;})),container:this,onTraverse:function(){var q=this.container.fontSize;if(q._sync){return ;}this.container.raiseFormatValueChange(Q.FONT_SIZE,q.provider.getValGroup());},oncurValGroupChange:function(){var q=this.container.fontSize;if(q.textNode){q.updateDisplayText();}}})}):new mstrmojo.ui.editors.controls.ComboBox({alias:"fontSizeCtrl",selectedValue:"10",items:d,isHostedWithin:false,validateTextInput:function(q){return(/^[0-9]+(pt)?$/.test(q));},updateSelection:function(){this.set("selectedValue",parseInt(this.txtLabel.value,10).toString());},postselectedValueChange:function(q){g(Q.FONT_SIZE,parseInt(q.value,10)+"pt",parseInt(q.valueWas,10)+"pt");}});n.fontColor=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:false,showNoFill:this.showNoFillInColor,selectedValue:"#000000",postselectedValueChange:function(q){g(Q.COLOR,q.value,q.valueWas);}});}return n;},setFormatSource:function B(g){var h=this;this.syncControls(function(){var i=this.visibleControls;if((i&P)>0){c.call(h,g);}if((i&J)>0||(i&H)>0){b.call(h,g);}if((i&Z)>0){W.call(h,g);}});},isClickFromFontPickerDropdown:function I(k){var h=k&&F.findAncestorByClassName(k,"mstr-rc-font-selector__dropdown"),i=h&&h.getAttribute("class"),g=this.getFontPickerDropdownClassName&&this.getFontPickerDropdownClassName();if(g){if(i&&i.includes(g)){return true;}var j=k&&F.findAncestorByClassName(k,"mstr-rc-font-selector__innerdropdown"),l=j&&j.getAttribute("class");if(l&&l.includes(g+"__inner")){return true;}}return false;},_unlockHoverCheck:function C(i,g){var h=F.eventTarget(g,i);if(mstrmojo.ui.editors.controls._HasCharacterGroup.isClickFromFontPickerDropdown.call(this,h)){return ;}mstrmojo.Popup.prototype._unlockHoverCheck.call(this,i,g);}});mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS={FONT_FAMILY:P,FONT_STYLE:J,FONT_SIZE_AND_COLOR:Z,FONT_STYLE_NO_STRIKEOUT:H,FONT_SIZE_USE_STEPPER:N};mstrmojo.ui.editors.controls._HasCharacterGroup.ControlsType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(W,Q,P,U,R,S){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:W,showNoFill:U!==false,showAutomatic:!!R,showGradient:false,selectedValue:"#000000",isHostedWithin:Q||false,widget:S,postselectedValueChange:function(X){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,X.value,X.valueWas);}},postclick:function(X){this.parent.parent.postclick(X);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(X){this._super(X);var Z=[],Y="col1Node",Q=X&&X.colorPickerHostWithin,P=X&&X.showGradient,R=X&&X.showNoFill,U=X&&X.showAutomaticInColor,S=X&&X.widget,W;if((this.visibleControls&C)>0){Z.push(N(Y,Q,P,R,U,S));Y="col2Node";}if((this.visibleControls&J)>0){Z.push(O(Y));}if(Z.length===1){W={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(W,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Z})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){var Q=this;P.forEach(function(R){Q.setChildValue(R[0],R[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};mstrmojo.ui.editors.controls.FillConfigGroup.FillCompName=F;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE,"2pt dashed":E.DASHED_THICK};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",widget:O&&O.widget,postselectedValueChange:function(Q){if(this.propName&&C.walk("parent.parent.raiseFormatValueChange",this)){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,showThickDashedOption:false,hideDashOptions:false,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}if(!this.showThickDashedOption){Q.push("no-thick-dashed");}if(this.hideDashOptions){Q.push("no-dash");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var U=this.list.items[Q].v,S=C.walk("parent.parent",this);if(this.propName&&S){S.setChildEnable(J.LINE_COLOR,U!==A.none);S.raiseFormatValueChange(this.propName,U,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor,widget:Q&&Q.widget}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.hideDashOptions=this.hideDashOptions;O.showThickDashedOption=this.showThickDashedOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.color","mstrmojo.expr","mstrmojo.hash","mstrmojo.locales","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.vi.ui.ReactColorPicker","mstrmojo.validation","mstrmojo.vi.enums.EnumFeatures");var L=mstrmojo.color,Z=1,d=2,W=4,q=8,C=16,l=32,e=64,A=128,P=256,G=45,B=4,h=mstrmojo.models.FormatModel,f=h.ENUM_PROPERTY_NAMES,i=f.BACKGROUND_COLOR,H=f.FILL_OPACITY,J=f.RADIUS,F=f.BUTTON_RADIUS,n=f.BUTTON_SIZE,O=f.PANEL_PADDING,X=f.COLOR,K=f.SHADOW_COLOR,M=f.SHADOW_OPACITY,o=f.SHADOW_SIZE,E=f.SHADOW_ANGLE,Y=f.SHADOW_DISTANCE,a=f.IMAGE_SIZE_MODE,m=f.PANEL_BACKGROUND_IMAGE_LEVEL,Q={all:{c:f.BORDER_COLOR,s:f.BORDER_STYLE},top:{c:f.BORDER_TOP_COLOR,s:f.BORDER_TOP_STYLE},right:{c:f.BORDER_RIGHT_COLOR,s:f.BORDER_RIGHT_STYLE},bottom:{c:f.BORDER_BOTTOM_COLOR,s:f.BORDER_BOTTOM_STYLE},left:{c:f.BORDER_LEFT_COLOR,s:f.BORDER_LEFT_STYLE}},D={FILL_COLOR:"fillColor",FILL_APLHA:"fillAlpha",FILL_COLOR_ALPHA:"fillColorAlpha",BORDER:"border",RADIUS:"radius",SIZE:"size",POSITION:"position",SIZE_HEIGHT:"sizeHeight",SIZE_WIDTH:"sizeWidth",POSITION_LEFT:"positionLeft",POSITION_TOP:"positionTop",BUTTON_RADIUS:"buttonRadius",BUTTON_SIZE:"buttonSize",PANEL_PADDING:"panelPadding",FONT_COLOR:"fontColor",SHADOW_FILL:"shadowFill",SHADOW_SIZE:"shadowSize",SHADOW_ANGLE:"shadowAngle",SHADOW_DISTANCE:"shadowDistance",},c=mstrmojo.expr.DTP,I=mstrmojo.locales,S=mstrmojo.vi.enums.EnumFeatures;function k(x,u,y){u.forEach(function(AA,z){AA.slot="col"+(z+1)+"Node";});var w=y?0:this.secondColumnWidth;return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:x,col1Width:(100-w)+"%",col2Width:y||(w+"%"),children:u};}function b(x,u){u.forEach(function(AA,z){AA.slot="col"+(z+1)+"Node";});var y=this.firstColumnWidth?this.firstColumnWidth:G,w=this.thirdColumnWidth?this.thirdColumnWidth:G;return{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",alias:x,col1Width:y+"%",col2Width:100-y-w+"%",col3Width:w+"%",children:u};}function s(u,w){return{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:u,cssClass:"right",constraints:{regExp:I.number.DECIMALSEPARATOR==="."?/^(?:100(?:\.00?)?|\d?\d(?:\.\d\d?)?)?[\%]?$/:/^(?:100(?:,00?)?|\d?\d(?:,\d\d?)?)?[\%]?$/},onValid:function(){if(this.value){var x=this.parent.parent;if(x.raiseFormatLayoutChange){x.raiseFormatLayoutChange(w,this.value.replace(I.number.DECIMALSEPARATOR,"."),this.orignText&&this.orignText.replace(I.number.DECIMALSEPARATOR,"."));}}},onfocus:function(){var x=this.orignText=this.value;this.domNode.setSelectionRange(0,x.length);}};}function j(u){return{scriptClass:"mstrmojo.Label",cssClass:"center",text:u};}function N(u,y,x,w){return b(u,[j.call(this,y),j.call(this,x),j.call(this,w)]);}function t(w,u){var x=u.reactColorPickerProps&&u.reactColorPickerProps();if(x){return mstrmojo.hash.copy(x,{scriptClass:"mstrmojo.vi.ui.ReactColorPicker",popoverStyle:{zIndex:u.getDialogZIndex?u.getDialogZIndex():10},onChange:function(y){u.onColorChange&&u.onColorChange(w,y);}});}else{return mstrmojo.hash.copy(u,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",postselectedValueChange:function(y){this.parent.parent.raiseFormatValueChange(w,y.value,y.valueWas);}});}}function g(y){var x="transparent",u="none",w;if(y){w=y.indexOf("#");if(w===-1){w=y.indexOf(x);}}if(!isNaN(w)&&w>-1){u=y.substr(0,w-1);x=L.fixFullHexValue(y.substr(w));}else{u=y;}if(u.indexOf("none")>-1){u="none";}return{s:u,c:x};}mstrmojo.ui.editors.controls.ContainerGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",borderTitle:mstrmojo.desc(13631,"Outer border"),fillColorTitle:mstrmojo.desc(7993,"Fill color"),radiusTitle:mstrmojo.desc(14447,"Radius"),buttonRadiusTitle:mstrmojo.desc(28921,"Button radius"),buttonSizeTitle:mstrmojo.desc(28922,"Button size"),shadowFillTitle:mstrmojo.desc(29150,"Shadow"),shadowSizeTitle:mstrmojo.desc(4906,"Blur"),shadowDistanceTitle:mstrmojo.desc(13325,"Distance"),shadowAngleTitle:mstrmojo.desc(14294,"Angle"),showThickBorderStyle:true,showBackgroundNoFill:true,showBackgroundGradient:false,showBorderNoFill:true,reactColorPickerProps:null,visibleControls:Z+d+q+C+l+e+A+P,targetBorder:"all",firstColumnWidth:undefined,secondColumnWidth:60,thirdColumnWidth:undefined,disableThickDash:false,init:function p(AC){this._super(AC);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditContainer");var AH=[],AK=this.visibleControls,AJ=Q[this.targetBorder];if((AK&Z)>0){if(this.cssClass.includes("threeColumns")){var AE=this.cssClass.includes("shadow-fill-setting"),u=AE?D.SHADOW_FILL:D.FILL_COLOR_ALPHA,x=AE?K:i,AA=AE?M:H;if(AE){AH.push({scriptClass:"mstrmojo.Label",text:this.shadowFillTitle});}AH.push(b.call(this,u,[{scriptClass:"mstrmojo.Label",text:this.fillColorTitle},t(x,{showGradient:this.showBackgroundGradient,showNoFill:this.showBackgroundNoFill}),{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",value:"100%",cssClass:"right center-alignment",dtp:c.INTEGER,required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR,min:0,max:100},preValidation:function w(){if(typeof (this.value)!=="number"){this.set("value",parseInt(this.value,10));}},onValid:function AF(){if(this.value!==this.orignText){if(this.value!==undefined&&(typeof (this.value)==="number")){this.set("value",this.value+="%");}var AL=this.parent.parent;if(AL.raiseFormatValueChange){AL.raiseFormatValueChange(AA,this.value,this.orignText);}}}}]));}else{if(!(AK&q)||!mstrApp.supportFeature(S.FILL_OPACITY)){AH.push(k.call(this,D.FILL_COLOR,[{scriptClass:"mstrmojo.Label",text:this.fillColorTitle},t(i,{showGradient:this.showBackgroundGradient,showNoFill:this.showBackgroundNoFill,reactColorPickerProps:this.reactColorPickerProps&&this.reactColorPickerProps.bind(this),getDialogZIndex:this.getDialogZIndex&&this.getDialogZIndex.bind(this),onColorChange:this.onColorChange&&this.onColorChange.bind(this)})]));}else{AH.push({scriptClass:"mstrmojo.Label",text:this.fillColorTitle});AH.push(k.call(this,D.FILL_COLOR,[t(i,{showGradient:this.showBackgroundGradient,showNoFill:this.showBackgroundNoFill}),k.call(this,D.FILL_APLHA,[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",value:100,cssClass:"right",dtp:c.INTEGER,required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR,min:0,max:100},onValid:function AF(){if(this.value!==this.orignText){var AL=this.parent.parent.parent;if(AL.raiseFormatValueChange){AL.raiseFormatValueChange(H,this.value,this.orignText);}}}},{scriptClass:"mstrmojo.Label",text:"%"}],"10px")]));}}}if((AK&d)>0){if(this.cssClass.includes("threeColumns")){AH.push(b.call(this,D.BORDER,[{scriptClass:"mstrmojo.Label",text:this.borderTitle},{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:this.showThickBorderStyle,disableThickDash:this.disableThickDash,postselectedValueChange:function(AL){var AM=this.parent.parent;AM.raiseFormatValueChange(AJ.s,AL.value,AL.valueWas);AM[D.BORDER].getControl(3).set("enabled",AL.value!=="none");}},t(AJ.c,{showGradient:false,showNoFill:this.showBorderNoFill})]));}else{AH.push({scriptClass:"mstrmojo.Label",text:this.borderTitle});AH.push(k.call(this,D.BORDER,[{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:this.showThickBorderStyle,disableThickDash:this.disableThickDash,postselectedValueChange:function(AL){var AM=this.parent.parent;AM.raiseFormatValueChange(AJ.s,AL.value,AL.valueWas);AM[D.BORDER].getControl(2).set("enabled",AL.value!=="none");}},t(AJ.c,{showGradient:false,showNoFill:this.showBorderNoFill})]));}}if((AK&e)>0){AH.push({scriptClass:"mstrmojo.Label",text:this.buttonRadiusTitle});AH.push({scriptClass:"mstrmojo.ui.ButtonBar",alias:D.BUTTON_RADIUS,cssClass:"dashboard-property-button-radius-bar",icnCss:"button-radius-icon",items:[{n:mstrmojo.desc(2997,"None"),cls:"none",v:0},{n:mstrmojo.desc(11446,"Small"),cls:"small",v:10},{n:mstrmojo.desc(2263,"Medium"),cls:"medium",v:30},{n:mstrmojo.desc(11447,"Large"),cls:"large",v:50},],onchange:function(AM){var AL=this.parent;if(AL.raiseFormatValueChange&&AM.added&&AM.added.length){AL.raiseFormatValueChange(F,this.selectedItem.v,AM.removed&&AM.removed.length?this.items[AM.removed[0]].v:null);}}});}if((AK&l)>0){AH.push({scriptClass:"mstrmojo.Label",text:this.buttonSizeTitle});AH.push({scriptClass:"mstrmojo.ui.ButtonBar",alias:D.BUTTON_SIZE,cssClass:"dashboard-property-button-size-bar",icnCss:"button-size-icon",items:[{n:mstrmojo.desc(11446,"Small"),cls:"small",v:0},{n:mstrmojo.desc(2263,"Medium"),cls:"medium",v:1},{n:mstrmojo.desc(11447,"Large"),cls:"large",v:2},],onchange:function(AM){var AL=this.parent;if(AL.raiseFormatValueChange&&AM.added&&AM.added.length){AL.raiseFormatValueChange(n,AM.added[0]);}}});}if((AK&C)>0){var z,u,AD,AB,AI="";if(this.cssClass.includes("shadow-size-setting")){z=this.shadowSizeTitle;u=D.SHADOW_SIZE;AD=o;AB=40;}else{if(this.cssClass.includes("shadow-distance-setting")){z=this.shadowDistanceTitle;u=D.SHADOW_DISTANCE;AD=Y;AB=30;}else{if(this.cssClass.includes("shadow-angle-setting")){z=this.shadowAngleTitle;u=D.SHADOW_ANGLE;AD=E;AB=359;AI="";}else{z=this.radiusTitle;u=D.RADIUS;AD=J;AB=40;}}}AH.push({scriptClass:"mstrmojo.Label",text:z});var AG=[];for(var y=0;y<=AB;y++){AG.push({n:y+"",v:y+""});}AH.push(k.call(this,u,[{scriptClass:"mstrmojo.vi.ui.rw.selectors.Slider",cssClass:"sc dashboard-property-slider new-style-slider",isHoriz:true,sliderDefaultWidth:40,multiSelect:false,include:true,items:AG,selectedIndex:0,alias:"slider",onchange:function(){var AN=this.parent.parent;var AM=this.parent.children[1];AM.orignText=this.items[this.selectedIndex].v+AI;AM.set("value",this.items[this.selectedIndex].v+AI);if(AN.raiseFormatValueChange){var AL=this.items[this.selectedIndex];AN.raiseFormatValueChange(AD,AL.v,null);}}},{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textBox",value:0,cssClass:"right right-alignment",dtp:c.INTEGER,required:true,autoFormat:AI!=="",suffix:AI,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR,min:0,max:AB},onValid:function AF(){if(this.value!==this.orignText){var AM=this.parent.parent;var AL=this.parent.children[0];AL.selectedIndex=parseInt(this.value,10);AL.synchronizeSlider();if(AM.raiseFormatValueChange){AM.raiseFormatValueChange(AD,this.value,this.orignText);}}}}]));}if((AK&W)>0){AH=AH.concat([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(16651,"Position and Size")},N.call(this,null,"X"," ","Y"),b(D.POSITION,[s.call(this,D.POSITION_LEFT,"left"),j.call(this,"x"),s.call(this,D.POSITION_TOP,"top")]),N.call(this,null,mstrmojo.desc(2985,"Width")," ",mstrmojo.desc(2983,"Height")),b(D.SIZE,[s.call(this,D.SIZE_WIDTH,"width"),j.call(this,"x"),s.call(this,D.SIZE_HEIGHT,"height")])]);}if((AK&A)>0){AH.push(k.call(this,D.PANEL_PADDING,[{scriptClass:"mstrmojo.Label",text:this.fillColorTitle},{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"panelPaddingText",value:0,cssClass:"right right-alignment",dtp:c.INTEGER,required:true,onValid:function AF(){if(this.value!==this.orignText){var AL=parseInt(this.value,10);if(!isNaN(AL)){AL=Math.max(2,Math.min(50,AL));this.set("value",AL);var AM=this.parent.parent;if(AM.raiseFormatValueChange){AM.raiseFormatValueChange(O,AL,this.orignText);}}}}}]));}if((AK&P)>0){AH.push(k.call(this,D.FONT_COLOR,[{scriptClass:"mstrmojo.Label",text:this.fillColorTitle},t(X,{showGradient:false,showNoFill:false})]));}this.addChildren(AH);},setPositionAndSize:function U(w){var u=this[D.POSITION],z=this[D.SIZE],x=w.prop,y=function(AB,AD){var AA=Math.round(AD.split("|")[0]*100)/100,AC=AB.domNode;AB.set("value",AA.toString().replace(".",I.number.DECIMALSEPARATOR)+"%");if(AC){AC.style.borderColor=(AA>=0&&AA<=100)?"":"red";}};if(u){y(u[D.POSITION_LEFT],x.left);y(u[D.POSITION_TOP],x.top);}if(z){y(z[D.SIZE_HEIGHT],x.height);y(z[D.SIZE_WIDTH],x.width);}},setFormatSource:function R(AC){var u=this.cssClass.includes("shadow-fill-setting"),AL=u?this[D.SHADOW_FILL]:(this[D.FILL_COLOR]||this[D.FILL_COLOR_ALPHA]),AM=u?this[D.SHADOW_FILL]:((AL&&AL[D.FILL_APLHA])||this[D.FILL_COLOR_ALPHA]),AJ=u?K:i,AA=u?M:H,w=u?f.SHADOW_STYLE:f.FILL_STYLE,AI=this[D.BORDER],AD=this.targetBorder,AB=Q[AD],AK=this[O],AN=this[D.BUTTON_RADIUS],x=this[D.BUTTON_SIZE],y=this[D.FONT_COLOR],AF=this.cssClass.includes("threeColumns"),z,AH,AG,AE="";if(this.cssClass.includes("shadow-size-setting")){z=this[D.SHADOW_SIZE];AH=o;AG=40;}else{if(this.cssClass.includes("shadow-distance-setting")){z=this[D.SHADOW_DISTANCE];AH=Y;AG=30;}else{if(this.cssClass.includes("shadow-angle-setting")){z=this[D.SHADOW_ANGLE];AH=E;AE="";AG=359;}else{z=this[D.RADIUS];AH=J;AG=40;}}}if(AD==="all"){AB=Q.top;}this.syncControls(function(){if(AL){var AX=h.decodeGradientValue(h.getGradientValues(AC)),AS,AW=AL.getControl(AF?3:2),Ag=AW.scriptClass==="mstrmojo.vi.ui.ReactColorPicker";if(!AX){if(AC[w]===1){AS="transparent";}else{var Al=AC[AJ];if(typeof Al==="undefined"||Al===null){Al=AC["background-color"];}if(typeof Al==="undefined"||Al===null){Al=-1;}AS=h.decodeValue(AJ,Al);}}if(Ag){var AQ=AW.componentProps;AQ.value=mstrmojo.util.color.convertNormalColorToRC3Color(AX||AS);if(AC[m]===1){AQ.imageModeProps.imageData=AC.resolvedImageURL||"";var Ai="";if(AC.resolvedImageName){try{Ai=decodeURI(AC.resolvedImageName);}catch(Ah){Ai=AC.resolvedImageName;}}AQ.imageModeProps.imageText=Ai;AQ.imageModeProps.imageStatus=AQ.imageModeProps.imageData===""?"loading":"success";}else{AQ.imageModeProps.imageData="";AQ.imageModeProps.imageText="";AQ.imageModeProps.imageStatus=undefined;}AQ.imageModeProps.sizeOption=AC[a]===B?"stretch":"fill";AW.updateComponentProps(AQ);}else{if(!AW.colorPicker){AW=AL.getControl(AF?2:1);}AW.set("selectedValue",AX||AS);}}if(AM){var AZ=AC[AA],Ae,Aj=AF?AL.fillAlphaText:AL.getControl(2).fillAlphaText;if(typeof AZ==="undefined"||AZ===null){AZ=AC["background-opacity"];}if(typeof AZ==="undefined"||AZ===null||AZ<0||AZ>100){AZ=100;}Ae=parseInt(AZ,10);if(AF){Ae+="%";}Aj.set("value",Ae);}if(AI){var An=AC.border,Aa=false;if(!An){if(typeof (AC.borderStyle)!=="undefined"&&AC.borderStyle!==null){An=typeof (AC.borderStyle)==="string"?AC.borderStyle:h.decodeValue("borderStyle",AC.borderStyle);}else{An=h.decodeValue(AB.s,AC[AB.s]);}if(typeof AC.borderColor!=="undefined"&&AC.borderColor!==null){An+=" "+h.decodeValue("borderColor",AC.borderColor);}else{if(typeof AC[AB.c]!=="undefined"&&AC[AB.c]!==null){An+=" "+h.decodeValue(AB.c,AC[AB.c]);}else{An+=" "+h.decodeValue(AB.c,-1);}}}var Ad=g(An),AP=AI.getControl(AF?3:2);AI.getControl(AF?2:1).set("selectedValue",Ad.s);if(this.parent&&this.parent.children&&this.formatGroup==="buttonBorderColor"){var AT=this.parent.children.filter(function(Ao){return Ao.cssClass.indexOf("txtAlign")>-1;});if(AT&&AT.length>0&&AT[0].selectedIndex===2){Aa=true;}}AP.set("enabled",Ad.s!=="none"&&!Aa);AP.set("selectedValue",Ad.c);}if(z){var AV=AC[AH];if(typeof AV==="undefined"||AV===null||AV<0||AV>AG){AV=0;}var Ac=z.getControl(1),Ak=z.getControl(2);if(Ac){Ac.selectedIndex=AV;Ac.synchronizeSlider();}if(Ak){Ak.orignText=AV+AE;Ak.set("value",AV+AE);}}if(AK){var Af=AC[O];if(typeof Af==="undefined"||Af===null||Af<4||Af>50){Af="";}var Ab=AK.getControl(2);if(Ab){Ab.orignText=Af;Ab.set("value",Af);}}if(AN){var AR=AC[F];AN.set("selectedIndex",AR===10?1:(AR===30?2:(AR===50?3:AR===0?0:-1)));}if(x){var AY=AC[n];x.set("selectedIndex",AY!==undefined?AY:-1);}if(y){var Am=AC[X];if(typeof Am==="undefined"||Am===null){Am=-1;}var AO=h.decodeValue(X,Am),AU=y.getControl(2);AU.set("selectedValue",AO);}});}});mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS={FILL_COLOR:Z,BORDER:d,SIZE_POSITION:W,FILL_ALPHA:q,RADIUS:C,BUTTON_RADIUS:e,BUTTON_SIZE:l,PANEL_PADDING:A,FONT_COLOR:P,SHADOW_SIZE:C,SHADOW_ANGLE:C,SHADOW_DISTANCE:C};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.Box","mstrmojo.Label");var F=mstrmojo.hash,H=mstrmojo.array;var D="white-space: nowrap; margin-right:9px;";mstrmojo.ui.editors.controls.PopupControlUtils=mstrmojo.provide("mstrmojo.ui.editors.controls.PopupControlUtils",{getRowContainer:function C(J,I,K){J=J||[];I=I||"";K=K||"";H.forEach(J,function(L){L.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:I,cssText:K,children:J};},getLabelBox:function G(I,J){return new mstrmojo.Box({children:I||[],cssText:J});},getLabelAndControlBox:function A(N,O,P,I,J){var K=new mstrmojo.Label({text:N}),M=this.getLabelBox(K,J||D);var L=P?[O,M]:[M,O];return this.getRowContainer(L,I);},getFillConfigComp:function E(K,L,I,J){F.copy({cssClass:"mstrmojo-ui-ToolBarFillGroup",height:null,colorPickerHostWithin:true},L);var M=new mstrmojo.ui.editors.controls.FillConfigGroup(L);if(I){I(M);}if(typeof K==="string"){return this.getLabelAndControlBox(K,M,false,(L||[]).rowContainerCSSClass,J);}return M;},getLineConfigComp:function B(K,L,I,J){F.copy({cssClass:"mstrmojo-ui-ToolBarLineGroup",layoutConfig:null,height:null,width:L.width,showNoFillInColor:!!L.showNoFill,widget:L&&L.widget},L);var M=new mstrmojo.ui.editors.controls.LineConfigGroup(L);if(I){I(M);}if(typeof K==="string"){return this.getLabelAndControlBox(K,M,false,(L||[]).rowContainerCSSClass,J);}return M;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ToolbarPopup","mstrmojo.ui.editors._HostsControls","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.models.FormatModel","mstrmojo.css");var B=mstrmojo.models.FormatModel;mstrmojo.ui.editors.CharacterToolbarPopup=mstrmojo.declare(mstrmojo.ui.editors.ToolbarPopup,[mstrmojo.ui.editors._HostsControls,mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.CharacterToolbarPopup",textAlignJustify:true,textAlignValueMap:null,textAlignFmtName:mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.TEXT_ALIGN,btnTextAlign:null,init:function D(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var K=this.textAlignJustify,H=this,F=function(P,Q,O){H.raiseFormatValueChange(P,Q,O);},L=this.getHCGControls(F),J=L.fontFamily,N=L.fontSize,G=L.fontColor,M={alias:"btnTextAlign",includeJustify:K,onValueChange:function(P,O){F(H.textAlignFmtName,P,O);}};J.width="125px";if(J.fontPickerContainer){J.fontPickerContainer.width="125px";}N.width="50px";G.width="50px";this.width=K?"505px":"476px";var E=this.textAlignValueMap;if(E){M.itemsValueMap=E;}this.addChildren([J,L.fontStyle,N,G,new mstrmojo.vi.ui.TextAlignButtonBar(M)]);},shouldPropagateLockHover:function C(){return false;},setFormatSource:function A(E){this._super(E);this.syncControls(function(){if(this.textAlignFmtName in E){this.btnTextAlign.singleSelectByField(E[this.textAlignFmtName],"v");}else{this.btnTextAlign.singleSelectByField(B.getFormatBlockValue(E,B.ENUM_PROPERTY_NAMES.TEXT_ALIGN),"id");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.css");var A=mstrmojo.models.FormatModel,C=A.ENUM_PROPERTY_NAMES;mstrmojo.ui.editors.controls.CharacterGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,[mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",init:function B(G){this._super(G);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var J=this,E=this.getHCGControls(function(M,N,L){if(!J._sync){J.raiseFormatValueChange(M,N,L);}}),F=[];Object.keys(E).forEach(function(L){this[L]=E[L];}.bind(this));var D=this.fontFamily,K=this.fontStyle,I=this.fontSize,H=this.fontColor;if(D){F.push(D);}if(K){F.push(K);}if(I){I.slot="col1Node";H.slot="col2Node";F.push({scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fontSizeColorRow",children:[I,H]});}if(F.length){this.addChildren(F);}}});mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS=mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.func","mstrmojo.locales","mstrmojo.num","mstrmojo.string","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.util.PlatformHelper","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo._FormatDefinition","mstrmojo.vi.models.VIComponentMap","mstrmojo.vi.enums.EnumFeatures","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter","mstrmojo.vi.ui.SmartAttributeFormatter","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSXMLSemanticRoles","mstrmojo.mstr.EnumDSSConsolidationType","mstrmojo.vi.enums.EnumDSSTimeIntervalAttribute","mstrmojo.vi.util.DIUtils");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var Q=mstrmojo.array,Aq=mstrmojo.css,AO=mstrmojo.dom,Y=mstrmojo.hash,h=mstrmojo.string,q=mstrmojo.func,k=mstrmojo.mstr.EnumFunction,C=mstrmojo.Button.newWebButton,AF=mstrmojo.ME.MetricToken.brackets,P=mstrmojo._FormatDefinition,d=mstrmojo.models.datasets.DataInterface,a=mstrmojo.vi.models.VIComponentMap.TYPES,AL=mstrmojo.chart.model.enums.EnumDSSObjectType,Ab=mstrmojo.mstr.EnumDSSXMLBaseFormType,j=mstrmojo.mstr.EnumDSSXMLObjectTypes,AS=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,G=mstrmojo.mstr.EnumDSSConsolidationType,AV=mstrmojo.vi.enums.EnumFeatures,Aa=mstrmojo.vi.enums.EnumDSSTimeIntervalAttribute,Ah=mstrmojo.vi.util.DIUtils,M=Ah.DIConstants,AU=mstrmojo.vi.enums.EnumDSSAccessRightFlags,o=mstrmojo.util.PlatformHelper,Ap=M.xdaType;var e={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},i={SUM:{n:e.SUM,t:k.FunctionSum},ADD:{n:e.ADD,t:k.FunctionPlus},AVG:{n:e.AVG,t:k.FunctionAvg},MAX:{n:e.MAX,t:k.FunctionMax},GST:{n:e.GST,t:k.FunctionGreatest},MIN:{n:e.MIN,t:k.FunctionMin},LST:{n:e.LST,t:k.FunctionLeast},TMS:{n:e.MTP,t:k.FunctionTimes},CNT:{n:e.CNT,t:k.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:k.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:k.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:k.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:k.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:k.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:k.FunctionVar}},x=[{n:e.SUM,t:k.FunctionOLAPSum},{n:e.AVG,t:k.FunctionOLAPAvg},{n:e.MIN,t:k.FunctionOLAPMin},{n:e.MAX,t:k.FunctionOLAPMax},{n:e.CNT,t:k.FunctionOLAPCount}],AN=[{n:e.SUM,t:k.FunctionOLAPSum},{n:e.AVG,t:k.FunctionOLAPAvg},{n:e.MIN,t:k.FunctionOLAPMin},{n:e.MAX,t:k.FunctionOLAPMax},{n:e.CNT,t:k.FunctionOLAPCount}],Aj=[{n:mstrmojo.desc(1058,"Previous"),t:k.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:k.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:k.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:k.FunctionLast}];var AD={YEAR:"Year",QUARTER:"Quarter",CONCAT:"Concat",QUARTERSTARTDATE:"QuarterStartDate",MONTH:"Month",TOSTRING:"ToString",MONTHSTARTDATE:"MonthStartDate",WEEK:"Week",WEEKSTARTDATE:"WeekStartDate",DAYOFMONTH:"DayOfMonth",DAYOFWEEK:"DayOfWeek",DAYOFYEAR:"DayOfYear"};var Ae={};Ae[AD.YEAR]="6F7DF5F8449111D5BEA300B0D01A55EF";Ae[AD.QUARTER]="6F7DF5F7449111D5BEA300B0D01A55EF";Ae[AD.CONCAT]="6F7DF5FF449111D5BEA300B0D01A55EF";Ae[AD.QUARTERSTARTDATE]="59E10CE2ADDD4A6DAC2416A72999A9ED";Ae[AD.MONTH]="6F7DF5F6449111D5BEA300B0D01A55EF";Ae[AD.TOSTRING]="D1ED29645DEC4DBF99E8E09ED939074B";Ae[AD.MONTHSTARTDATE]="7C63D4E70B2741C3A5B54A2EFD40961B";Ae[AD.WEEK]="6F7DF5F5449111D5BEA300B0D01A55EF";Ae[AD.WEEKSTARTDATE]="44681336D0DB4E43AC333FFB3CC4400D";Ae[AD.DAYOFMONTH]="6F7DF5F2449111D5BEA300B0D01A55EF";Ae[AD.DAYOFWEEK]="6F7DF5F3449111D5BEA300B0D01A55EF";Ae[AD.DAYOFYEAR]="6F7DF5F4449111D5BEA300B0D01A55EF";var AY="@form";function I(Av){var Ax=8,Ay=1,Au=Q.find(Av.fs,"idf",true);if(Au===-1){return null;}var Aw=Av.fs[Au];return((Av.da||Aw.obf)&&(Aw.bftp===Ax||Aw.bftp===Ay))?Aw:null;}function F(){var Au=mstrmojo.ME.MetricToken.getArgDelimiter();return{Year:{ID:[AD.YEAR,"(",AY,")"]},Quarter:{ID:[AD.YEAR,"(",AY,") * 10 + ",AD.QUARTER,"(",AY,")"],DESC:[AD.CONCAT,'("Q"',Au,AD.QUARTER,"(",AY,")",Au,' ", "',Au,AD.YEAR,"(",AY,"))"],DATE:[AD.QUARTERSTARTDATE,"(",AY,")"]},QuarterOfYear:{ID:[AD.QUARTER,"(",AY,")"],DESC:[AD.CONCAT,'("Q"',Au,"This@ID)"]},Month:{ID:[AD.YEAR,"(",AY,") * 100 + ",AD.MONTH,"(",AY,")"],DESC:[AD.TOSTRING,'<Pattern="mmm yyyy">(',AY,")"],DATE:[AD.MONTHSTARTDATE,"(",AY,")"]},MonthOfYear:{ID:[AD.MONTH,"(",AY,")"],DESC:[AD.TOSTRING,'<Pattern="mmmm">(',AY,")"]},Week:{ID:[AD.YEAR,"(",AY,") * 100 + ",AD.WEEK,"(",AY,")"],DESC:[AD.CONCAT,'("W"',Au,AD.WEEK,"(",AY,")",Au,' ", "',Au,AD.YEAR,"(",AY,"))"],DATE:[AD.WEEKSTARTDATE,"(",AY,")"]},WeekOfYear:{ID:[AD.WEEK,"(",AY,")"]},DayOfMonth:{ID:[AD.DAYOFMONTH,"(",AY,")"]},DayOfWeek:{ID:[AD.DAYOFWEEK,"(",AY,")"],DESC:[AD.TOSTRING,'<Pattern="ddd">(',AY,")"]},DayOfYear:{ID:[AD.DAYOFYEAR,"(",AY,")"]}};}function AK(Aw,Ay,Ax,Au){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:Aw,selectedIndex:Ay,onitemSelected:function Av(Az){var A0=this.parent;while(!A0.data||!A0.data[Ax]){A0=A0.parent;}A0.data.set(Ax,Au?Au(Az):Az.v);}};}function At(Aw,Av,Au){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:"),cssClass:"menu-info-text"},Y.copy(Au,AK(Aw,Av,"breakBy",function(Ax){return{id:Ax.did,type:Ax.t,dmy:Ax.dmy};}))]};}function R(Ax){var Ay=Ax.metrics,Az=Ax.propName,Aw=Ax.optionValueField||"id",Au=Q.find(Ay,Aw,Ax.value),A0=function A0(A2){var A1=this.parent;while(!A1.data||!A1.data.hasOwnProperty(Az)){A1=A1.parent;}A1.data.set(Az,A2?{id:A2[Aw],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,cssClass:"Calculation-PullDown",items:Ay,selectedIndex:Au,useRichTooltip:true,bindings:Ax.bindings,valid:true,allowCustomText:true,allowEmptyText:true,allowHTML:false,onvalidChange:function Av(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:A0,onTextEditComplete:function(){A0.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:Ax.postkeyup};}function AA(Ax,Aw,Av){if(Ax&&Ax.datap){var Au=Q.filterOne(Ax.datap,function(Az){return Az.tbid===Aw;}),Ay=Au&&Au.maps.amps;return Q.filterOne(Ay,function(Az){return Av===Az.aimp.atid;});}return null;}function AI(Au,Ay){var Aw=Q.filterOne(Au&&Au.afmps,function(Az){return Az.fmid===Ay;}),Ax=Aw&&(Aw.sqc?Aw:Aw.col.oi),Av;if(Ax&&Ax.sqc){Av={did:Ax.sqc.id,n:h.decodeHtmlString(Ax.cln),coldtp:Ax.sqc.dt.tp,georole:Ax.geo,timerole:Ax.tim,der:Ax.sqc.der};}else{if(Ax){Av={did:Ax.did,n:h.decodeHtmlString(Ax.def.cln),coldtp:Ax.def.dt.tp,georole:Aw.geo,timerole:Ax.def.dicl.time,der:Ax.def.dicl.der};}}return Av;}function Ad(Aw,Av,Ay){var Ax={success:function(Az){if(Az&&Az.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:Az.msgid,bindingflag:2,previewflag:261,browsetype:5},Ay);}},failure:function(Az){mstrApp.onerror(Az);}};var Au=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:Av,messageID:Aw,skipRebuild:Au},Ax);}function Z(Az,A0,Ax){var Av=Az.srcTableId,A2=Az.tgtTableId,Au,Ay,Aw=function(A6,A5){var A8="<mpcs><mpc ",A4,A7;for(A4 in A5){A7=A5[A4];A8+='$ACT="$VAL" '.replace("$ACT",A4).replace("$VAL",A7);}A8+="/></mpcs>";return{act:"changeEMMAMapping",tbid:A6,dsid:Az.dsid,mapping:A8};},A1=function(){var A4=[],A7={},A5,A6;if(!Au||!Ay){return ;}A7[Av]={};A7[A2]={};Q.forEach(Au.afmps,function(BB){var A9=Q.find(Ay.afmps,"fmid",BB.fmid),BC,BA,A8;if(A9>=0){A5=AI(Au,BB.fmid);A6=AI(Ay,BB.fmid);if(A5.georole!==A6.georole){A8=(A5.georole===0)?Av:A2;BC=(A5.georole===0)?A5.did:A6.did;BA=A5.georole||A6.georole;A7[A8][BC]=Y.copy({did:BC,georole:BA},A7[A8][BC]);}if(A5.timerole!==A6.timerole){A8=(A5.timerole===0)?Av:A2;BC=(A5.timerole===0)?A5.did:A6.did;BA=A5.timerole||A6.timerole;A7[A8][BC]=Y.copy({did:BC,timerole:BA},A7[A8][BC]);}if(A5.der!==A6.der){BA=A5.der|A6.der;A7[Av][A5.did]=Y.copy({did:A5.did,drvflg:BA},A7[Av][A5.did]);A7[A2][A6.did]=Y.copy({did:A6.did,drvflg:BA},A7[A2][A6.did]);}}});Y.forEach(A7,function(A8,A9){Y.forEach(A8,function(BA){A4.push(Aw(A9,BA));});});A5=AI(Au,Au.afmps[0].fmid);A4.push(Aw(Av,{did:A5.did,oid:Ay.aimp.atid}));if(Ax){Ax(A4);}},A3=function(A6){var A7={success:function(){A1();}},A5,A4;Au=AA(A6,Av,Az.srcId);Ay=AA(A6,A2,Az.tgtId);A5=AI(Au,Au.afmps[0].fmid);A4=[Aw(Av,{did:A5.did,oid:Ay.aimp.atid,fg:1})];A0.getDataService().submitUpdates(A4,A7);};Ad(A0.mid,Az.dsid,{success:A3});}function Ac(A0,Aw,Av,A1,Ax){var Au=0,Az=[],Ay=function(A2){var A3=Av[Au-1];if(A2&&A2.tks&&A3){Az.push({fid:A3.fid,fnm:A3.fnm,ftk:A2.tks.items});}if(Au===Av.length){A1(Az);return ;}A3=Av[Au++];mstrmojo.ME.MetricDataService.validateMetric({metricId:Aw,formID:A3.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:A0,dsId:Ax},{success:Ay});};Ay();}function An(Au,Av){return{v:AF(Au.n)+"@"+AF(Av.fnm),tp:275,lv:1,exv:Av.fid,extp:8,oi:{did:Au.did,t:Au.t,n:Au.n}};}function b(Av){var Ax=(Av.t===j.Filter||Av.t===j.Consolidation),Aw=(Av.t===j.Attribute&&Av.de),Au=(Av.t===j.Consolidation&&Av.st===AS.ConsolidationManaged);return !!(Ax&&!Au||Aw);}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function L(Aw){var Av=q.safeCall("isAIDatasetCollectionMode",o)();var Au=[[i.SUM,i.AVG,i.MIN,i.MAX,i.CNT]];if(!Av){Au.push([i.GEM,i.MED,i.MOD,i.PDT,i.STD,i.VAR]);}return{"12":[[i.AVG,i.CNT,i.MAX,i.MIN,i.STD,i.SUM,i.VAR]],"4":Au}[Aw.t];},isAmongFunctions:function AB(Av,Au){return Au.some(function(Aw){return Aw.some(function(Ax){return Ax.t===Av;});});},getMultiSelectionShortcutMetricFunctions:function y(Au){var Av=true;Q.forEach(Au,function(Aw){if(4!==Aw.t){Av=false;return false;}return true;});return Av?[i.ADD,i.AVG,i.GST,i.LST,i.TMS]:[];},getRelativeReferenceMenu:function X(Ay,Aw,A1,Au){var Ax=0,Av=Aj[Ax],A0=0,Az=A1&&A1[A0];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ay,relativeRef:Av,breakBy:Az},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:Aw&&Aw.length,text:Aw,cssClass:"menu-info-text"},Y.copy({cssClass:"RelativeReferencePullDown"},AK(Aj,Ax,"relativeRef",function(A2){return A2.t;}))]},At(A1,A0,{cssClass:"RelativeReferencePullDown"})],fnOk:function(A2){return Au(A2.item,A2.relativeRef,[A2.breakBy]);}});},getMovingTotalMenu:function Ag(A4,Ay,A0){var A5=1,Ax=AN[A5].t,Az=1,Av=mstrmojo.desc(13289,"Starting previous##rows").split("##"),A3=0,Aw=Ay&&Ay[A3];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:A4,funcType:Ax,windowSize:Az,breakBy:Aw},contents:[Y.copy({cssClass:"MovingTotalPullDown"},AK(AN,A5,"funcType",function(A6){return A6.t;})),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix menu-info-text",text:Av[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function A2(){this.set("value",Az);},_ontooltipover:function(){var A6=mstrmojo.all[this.id];A6._hovered=true;A6.showTooltip();},_ontooltipout:function(){var A6=mstrmojo.all[this.id];A6._hovered=false;A6.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var A6=this.validationStatus.msg,A7=!(this.richTooltip&&A6===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:A6};if(this._hovered&&A7){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function A1(){var A6=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",A6?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix menu-info-text",text:Av[1]}]},At(Ay,A3,{cssClass:"MovingTotalPullDown BreakByBox"})],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function Au(A6){if(A0){A0(A4,A6.funcType,A6.windowSize,[A6.breakBy]);}}});},getRunningTotalMenu:function AG(Ax,A0,Av){var Aw=0,Au=x[Aw].t,Az=0,Ay=A0&&A0[Az];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ax,func:Au,breakBy:Ay},cssClass:"RunningTotal-MenuEditor",contents:[Y.copy({cssClass:"RunningTotalPullDown"},AK(x,Aw,"func",function(A1){return A1.t;})),At(A0,Az,{cssClass:"RunningTotalPullDown BreakByBox"})],fnOk:function(A1){return Av(A1.item,A1.func,[A1.breakBy]);}});},getRankMetricEditor:function W(Ay,A1,Aw){var Au=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],Av=0,Ax=Au[Av].v,A0=0,Az=A1&&A1[A0];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ay,order:Ax,breakBy:Az},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:"),cssClass:"menu-info-text"},Y.copy({cssClass:"NewRankMetricPullDown"},AK(Au,Av,"order"))]},At(A1,A0,{cssClass:"NewRankMetricPullDown"})],fnOk:function(A2){return Aw(A2.item,A2.order,[A2.breakBy]);}});},insertAddUnitToFilterMenu:function Am(Az,Av,Au){var Ax=this,Aw=mstrmojo.desc(2022,"Add to Filter"),Ay=Q.ensureArray(Au).filter(function(A0){return Ax.isValidAddToFP(Av,A0);});if(Ay.length>0){Az.addMenuItem(Aw,"",function(){Av.addFilterStackSelectors(Ay);});}else{Az.addDisabledMenuItem(Aw,"");}},checkDuplicatedFilterInFP:function N(Aw,Ay){var Au=Aw.getFilterDefinitions(),Ax,Az=Ay&&Ay.did,Av=Ay&&Ay.isParameter;if(Av){return Q.find(Au,"paraid",Az)===-1;}Ax=Q.filterOne(Au,function(A0){return(A0.srcid===Az&&!A0.paraid);});return !Ax;},isValidAddToFP:function Ar(Aw,A3,A7){var Ay=Aw.controller.view.builder,Az=Ay.getLayoutVIMap(Aw.getCurrentLayoutKey()),A1=Az.getComponent(a.FILTER_STACK),A6=true,A2=mstrApp.isDossier===false,A4=A3.isParameter,A5,Au,A0,Ax,Av;if(A2&&mstrApp.supportFeature(AV.SUPPORT_REALTIME)){A5=A3.t===j.Attribute;if(A5&&this.isUnitFromStreamingDataset(A3.did,A5)){Au=Q.find(A1.getFilterDefinitions(),"style",mstrmojo.DocSelector.STYLES.EVENT_TIME_RANGE)!==-1;A0=this.isTimeAttr(A3);return A0&&!Au;}}if(A4&&!mstrApp.supportFeature(AV.SUPPORT_PARAMETERS_IN_FILTER_PANEL)){return false;}if(!A7){A6=(!A1||this.checkDuplicatedFilterInFP(A1,A3));}if(A6&&A3.lock){Ax=A3.fs||[];A6=false;for(Av=0;Av<Ax.length;Av++){if(Ax[Av].iidx){A6=true;break;}}}return A6;},renameItem:function Ao(Az,A2,Av,Ax){var Ay=Az.mstrmojoId,A1=mstrmojo.dom.findWidget(Az),A0;Ax=Ax||{};if(!Ay){A0=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,editOnTwoClicks:true,text:A2.n,title:A2.dsc||"",allowEmptyText:Ax.allowEmptyText,allowTrimming:Ax.allowTrimming||false,cssClass:Ax.cssClass||"",placeholder:Az,onTextEditComplete:function Au(A3){if(A3){return Av(this);}},onmousedown:function Aw(A3){if(this.isEditing){A3.cancel();}}});if(A1&&A1.draggable){A0.parent=A1;}A0.render();Ay=A0.id;}mstrmojo.all[Ay].set("isEditing",true);return mstrmojo.all[Ay];},getMultipleMetricsCalculationMenus:function Ak(A1,Au,A4){var A0=new mstrmojo.ui.menus.MenuConfig(),A6=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(A1),Ay=function(A8,A9,A7){return{dsid:Au,funcType:A9,funcType2:A7,items:A8};};A0.useTooltip=true;A6.forEach(function(A7){A0.addMenuItem(A7.n,"",function(){A4(Ay(A1,A7.t));});});if(A1.length===2){var Az=mstrmojo.mstr.EnumFunction,Ax=Az.FunctionDivide,Av=Az.FunctionMinus,A3=A1[0],A2=A1[1],A5=function(BB,A9,A7,BA,A8){A0.addMenuItem(BB,"",function(){A4(Ay([A9,A7],BA,A8));});},Aw=[{n:function(A8,A7){return A8.n+"/"+A7.n;},fn:Ax},{n:function(A8,A7){return A8.n+"-"+A7.n;},fn:Av},{n:function(A8,A7){return"("+A8.n+"-"+A7.n+")/"+A7.n;},fn:Av,fn2:Ax}];Aw.forEach(function(A7){A0.addSeparator();A5(A7.n(A3,A2),A3,A2,A7.fn,A7.fn2);A5(A7.n(A2,A3),A2,A3,A7.fn,A7.fn2);});}return A0;},getCalculationMetricEditor:function t(A1,A2,A0){var Av=[{n:"",css:"operator-plus",funcType:k.FunctionPlus},{n:"",css:"operator-minus",funcType:k.FunctionMinus},{n:"",css:"operator-multiply",funcType:k.FunctionTimes},{n:"",css:"operator-divide",funcType:k.FunctionDivide},{n:!mstrApp.isWSStyling?"%":"",css:"operator-percent-diff",funcType:k.FunctionMinus,funcType2:k.FunctionDivide}],Aw={m1:A2.did,m2:A1[0].did,operator:k.FunctionPlus,u1:{id:A2.did,type:4},u2:null},Au=function(A3){return{}.hasOwnProperty.call(A3,"cst");},Az=function(A3){return typeof A3==="string"&&!!A3.length&&!isNaN(Number(A3));};Ay=function Ay(){var A3=this.parent.popupConfig;if(A3){A3.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[R({metrics:A1,value:Aw.m1,propName:"u1",optionValueField:"did",bindings:{valid:function(){return this.parent.popupConfig.valid||this.selectedIndex!==-1||(!!this.selectedNode&&this.selectedNode.innerHTML.length===0);}},postkeyup:Ay}),{scriptClass:"mstrmojo.ButtonListHoriz",items:Av,selectedIndex:0,postselectionChange:function Ax(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},R({metrics:A1,value:null,propName:"u2",optionValueField:"did",bindings:{valid:function(){return this.parent.popupConfig.valid||this.selectedIndex!==-1||(!!this.selectedNode&&this.selectedNode.innerHTML.length===0);}},postkeyup:Ay})],data:Aw,okEnabled:false,bindings:{valid:function(){var A5=this.data.u1,A4=this.data.u2,A6=this.data.operator;if(!A5||!A4||!A6){return false;}var A3=!(Au(A5)&&Au(A4))&&(!Au(A5)||Az(A5.cst))&&(!Au(A4)||Az(A4.cst));this.set("okEnabled",A3);return A3;}},fnOk:function(A3){return A0(A3.u1,A3.u2,A3.operator,A3.operator2);}});},getCfgForAddUnitFromAllObject:function(Au,Av){var Aw=null,Ax=null,Ay=[],Az=function(A0,A1){if(!A1){return false;}return Q.find((A1.att||[]).concat(A1.mx||[]),"did",A0.did)>-1;};Y.forEach(Av,function(A1,A0){if(A1.idd){Aw=A0;Ax=A1;return false;}return true;});if(!Aw){Aw="$GUID_141";Ay.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[Aw]});}Q.forEach(Au,function(A0){if(!Az(A0,Ax)){Ay.push({act:"addUnitToDataset",dsid:Aw,unitId:A0.did,unitType:A0.t});}});return{actions:Ay,dsid:Aw};},getAggregateByMenu:function n(Az,Ax){var Av=new mstrmojo.ui.menus.MenuConfig(),Aw=function(A3,A2){var A5,A4;if(A2){var A1=A3.mexp.args[0];A5=A1.did;A4=A1.t;}else{A5=A3.did;A4=A3.t;}return{did:A5,t:A4};},Au=this.getAvailableShortcutMetricFunctionsGroup(Az),A0=Az.mexp?Az.mexp.ft:null,Ay=Az.mexp&&this.isAmongFunctions(A0,Au);Au.forEach(function(A1,A2){if(A2!==0){Av.addSeparator();}A1.forEach(function(A3){Av.addMenuItem(A3.n,"",function(){Ax(Aw(Az,Ay),A3.t);});});});return Av;},showObjectPicker:function A(A0,Ax,Av,A3,Ay,A1,A2,Aw,Az){var Au="object_picker";return function(){var A4=mstrmojo.all[Au];if(A4){A4.destroy();}var A5={id:Au,searchVisible:A1,projects:Aw};if(Az){A5.projectId=Az;}A4=new mstrmojo.vi.ui.editors.ObjectPicker(A5);if(Ax){A4.supportedTypes=Q.hash(Ax);A4.ob.browsableTypes="8,"+Ax.join(",");}if(Ay){A4.ob.rootFolderID=Ay;}if(Az){A4.ob.projectId=Az;}if(!A2){A4.ob.folderLinksContextId=Av;}A4.ob.browsableViewMedias=A3;A4.render();A4.OKFn=A0||mstrmojo.emptyFn;A4.open();};},getObjectPicker:function H(){var Au="object_picker";return mstrmojo.all[Au];},generateNumberFormat:function c(A0){var Av=P.DefaultFormat.FormattingNumber,Aw=P.NumberFormatCategory,Ay=A0||{},Ax=Ay.nct,Az=Ax===Aw.General&&Ay.nfs==="General";var Au={category:(Ax===undefined||Az)?Aw.Automatic:Ax,decimalPlaces:Ay.ndp===undefined?2:Ay.ndp,thousandSeparator:Ay.nth===undefined?parseInt(Av.ThousandSeparator,10):(Ay.nth?-1:0),currencySymbol:Ay.ncs||Av.CurrencySymbol,currencyPosition:Ay.ncp||Av.CurrencyPosition,format:Ay.nfs||"",negativeNumbers:Ay.nnn||Av.NegativeNumbers};if(Ay.hasOwnProperty("uld")){Au.useLocaleDefault=Ay.uld;}return Au;},getNumberFormatEditor:function AC(A7,A2,BB,A0,A8){var Ax=this.generateNumberFormat(A2),A4=Y.walk("rootCtrl.docCtrl.model",mstrApp),Az=A4&&this.getUnitFromDataset(A4.datasets||{},A7.did,A7.t),A9=Az&&Az.smartAttrType,Av=A9&&mstrmojo.locales.isSmartAttributeLocaleFormatEnabled(A9),A5=A0||mstrApp&&q.safeCall("supportFeature",mstrApp)(AV.TEMPLATE_SMARTATT_FORMAT),A6=Av&&A5,Au=A6?"mstrmojo.vi.ui.SmartAttributeFormatter":"mstrmojo.vi.ui.NumberFormatter";var Ay=P.NumberFormatCategory;if(A6&&Ax.category===Ay.General){Ax.category=Ay.Automatic;}var Aw=Y.clone(Ax),BA=Y.clone(Ax);var A3={scriptClass:Au,formatValue:Ax,myData:Aw,oldData:BA,intervalType:A9,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}};if(A8){A3.excludedCategories=A8;}return new mstrmojo.ui.menus.EditorConfig({_useNumberFormaterVersion:true,data:Aw,bindings:{okEnabled:function(){return !(this.data.category===BA.category&&this.data.format===BA.format&&!!this.data.useLocaleDefault===!!BA.useLocaleDefault);}},cssClass:"NumberFormat-MenuEditor",contents:[A3],fnOk:function A1(BC){if(!(BC.category===BA.category&&BC.format===BA.format&&!!BC.useLocaleDefault===!!BA.useLocaleDefault)){return BB(BC,BA);}}});},getHighlightElementHandler:function(Aw,Av,Au){return function(){Aq.toggleClass(Av,Au||"open",Aw);};},getConfDataTypeMenuCfg:function z(Au,BF,A7,BT){var BO="ToString",BE="ToNumber",BC="ToDateTime",A6="keepOriginal",Ax="Default",BP={ToString:Ab.DssXmlBaseFormText,ToNumber:Ab.DssXmlBaseFormNumber,ToDateTime:Ab.DssXmlBaseFormDate},A2={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},A0="_pattern",BR="_func",BA="_bft",BW="_state",BU={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},Az={n:"Default",v:"Default"},BM=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},Az],Aw=[{n:mstrmojo.desc(13772,"Keep Original"),v:A6},{n:mstrmojo.desc(12276,"String"),v:BO},{n:mstrmojo.desc(2052,"Date"),v:BC},{n:mstrmojo.desc(3434,"Number"),v:BE}];if(mstrApp&&mstrApp.showMultiDataType){Aw=[{n:mstrmojo.desc(13772,"Keep Original"),v:A6},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3434,"Number"),v:BE,bft:Ab.DssXmlBaseFormNumber},{n:mstrmojo.desc(9920,"Big Decimal"),v:BE,bft:Ab.DssXmlBaseFormBigDecimal},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(2052,"Date"),v:BC,bft:Ab.DssXmlBaseFormDate},{n:mstrmojo.desc(9919,"DateTime"),v:BC,bft:Ab.DssXmlBaseFormDateTime},{n:mstrmojo.desc(2170,"Time"),v:BC,bft:Ab.DssXmlBaseFormTime},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3544,"Text"),v:BO,bft:Ab.DssXmlBaseFormText},{n:mstrmojo.desc(9921,"HTML Tag"),v:BO,bft:Ab.DssXmlBaseFormHTMLTag},{n:mstrmojo.desc(8984,"Phone Number"),v:BO,bft:Ab.DssXmlBaseFormPhoneNumber},{n:mstrmojo.desc(4530,"Symbol"),v:BO,bft:Ab.DssXmlBaseFormSymbol},{n:mstrmojo.desc(9922,"URL"),v:BO,bft:Ab.DssXmlBaseFormUrl},{n:mstrmojo.desc(4699,"Email"),v:BO,bft:Ab.DssXmlBaseFormEmail}];}var A5=Y.clone(Aw).slice(1),BD=BF.fs.filter(function(BY){return BF.da||BY.obf;}),BX=BD.length>1,A9=BD.length>5,A1=false,BN=false,BG=[],BL=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:"),cssClass:"menu-info-text menu-header-text"}],BV={okEnabled:false},BQ=function(){var BY=false;BD.forEach(function(BZ){BY=BY||(BV[BZ.fnm+BR+BW]!==BU.UNCHANGED)||(BV[BZ.fnm+A0+BW]!==BU.UNCHANGED);});return BY;},BH=function(Ba,BZ){var BY=0;if(Ba.da){Q.forEach([BO,BC,BE],function(Bd,Bb){var Bc=new RegExp("^\\s*"+Bd+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(BZ.f);if(Bc&&Bc[2]){BY=Bb+1;return false;}});}return BY;},BK=function(Ba,BZ){var BY=0;if(Ba.da){var Bb=BZ&&BZ.bftp;Q.forEach(Aw,function(Bd,Bc){if(Bd.bft===Bb){BY=Bc;return false;}});}return BY;},BJ=function(Ba,BZ){var Bb=Ax;if(BF.da){var BY=new RegExp("^\\s*"+BZ+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(Ba.f);if(!h.isEmpty(BY&&BY[1])){Bb=BY[1];}}return Bb;},BI=function(){return A9?this.parent.parent.parent:(BX?this.parent.parent:this.parent);},BB=function(BY){if(A9){BY.formList.updateScrollbars();}},Ay=function(Bf,Bg,Be){var BY=Bg.fnm,Bb=A9?Bf.formList[Bg.fnm+A0]:Bf[Bg.fnm+A0],Bc=BX?Bb.children[1]:Bb,Bd=BV[BY+BR],Ba=A1&&(Bd===BC||Bd===BO),BZ=Bb.visible!==Ba;if(BZ){Bb.set("visible",Ba);if(Ba){BB(Bf);}else{Bc.hideTooltip();}}if(Be){Bc.set("text",BJ(Bg,Bd));Bc.set("items",Bd===BC?BM:[Az]);}},A8=function(BY){var BZ=false;BD.forEach(function(Ba){if(BV[Ba.fnm+BR]===BC||BV[Ba.fnm+BR]===BO){BZ=true;return false;}});BY.advancedLabel.set("visible",BZ);},Av=function(Ba,BY,Bb){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:Ba,alias:Bb.fnm+BR,selectedIndex:BY,onPopupWidgetOpened:function(){BB(BI.call(this));},onitemSelected:function BZ(Bg,Be){var Bf=BI.call(this),Bh=Bf.data,Bi=Bb.fnm,Bd=Bg.v,Bc=function(Bj){if(Bj){return(Ba.length===3?BU.TO_UPDATE:BU.TO_CREATE);}return BU.UNCHANGED;};Bh.set(Bi+BR,Bd);Bh.set(Bi+A0,BJ(Bb,Bd));Bh.set(Bi+BA,Bd===A6?Bb.bftp:(Bg.bft?Bg.bft:BP[Bd]));Bh.set(Bi+BR+BW,Bc(Be!==BY));Bh.set("okEnabled",BQ());Ay(Bf,Bb,true);A8(Bf);}};},A4=function(Ba,Bb,BY){return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,alias:Ba.fnm+A0,useRichTooltip:true,visible:BY,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){BB(BI.call(this));},customizeSearchResult:function(Bc){if(Q.find(Bc,"v","Default")===-1&&this.items.length>0){Bc.push(Az);}},onclick:function(Bc){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,Bc);this.set("isEditing",true);},updateData:function(Be){var Bc=BI.call(this),Bd=Bc.data,Bf=Ba.fnm;Bd.set(Bf+A0,Be);Bd.set(Bf+A0+BW,Bb!==Be?BU.TO_UPDATE:BU.UNCHANGED);Bd.set("okEnabled",BQ());},onitemSelected:function BZ(Bc){if(Bc){this.updateData(Bc.v);}},onkeyup:function(Bc){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,Bc);var Bd=this[this.editableSlot],Be=Bd.innerText||Bd.textContent;this.updateData(Be);},updateTooltipConfig:function(Bd){this.tooltipOpenDelay=Bd?500:0;var Bc=AO.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:Bc.y-2,left:Bc.x+Bc.w+10};}};},BS=function(Bg,Bf,BY,BZ,Be){var Bb=mstrApp&&mstrApp.showMultiDataType?BK(Bg,Bf):BH(Bg,Bf),Bd=BJ(Bf,Aw[Bb].v),Ba=Bf.fnm,Bc=Aw;if(Bb>0){Bc=A5;Bb--;}BZ[Ba+A0]="";BZ[Ba+BR]="";BZ[Ba+BA]="";BZ[Ba+BR+BW]=BZ[Ba+A0+BW]=BU.UNCHANGED;if(Be){BY.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:Ba+BR,children:[{scriptClass:"mstrmojo.Label",text:Ba,useRichTooltip:true,updateTooltipConfig:function(Bj){this.tooltipOpenDelay=Bj?500:0;var Bi=this.domNode;var Bh=AO.position(Bi);if(Bi.scrollWidth>Bi.offsetWidth){this.richTooltip={content:h.encodeHtmlString(Bi.innerText),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:Bh.y-Bh.h-10,left:Bh.x-10};}}},Y.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},Av(Bc,Bb,Bf,true))]});BY.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:Ba+A0,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern"),cssClass:"menu-info-text"},Y.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},A4(Bf,Bd,true))]});}else{BY.push(Y.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},Av(Bc,Bb,Bf,false)));BY.push(Y.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},A4(Bf,Bd,false)));}};Q.forEach(BF.fs,function(BY){if(Au.als&&Au.als.links[BF.did+" "+BY.fid]){BN=true;return false;}});if(BX){BD.forEach(function(BY){BS(BF,BY,A9?BG:BL,BV,true);});}else{BS(BF,BD[0],BL,BV,false);}if(A9){BL.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:BG});}BL.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var BZ=this.parent,Ba,BY,Bb=true;A1=!A1;Aq.toggleClass(this.domNode,"expanded",A1);BD.forEach(function(Bc){Ay(BZ,Bc,false);Ba=A9?BZ.formList[Bc.fnm+A0]:BZ[Bc.fnm+A0];BY=BX?Ba.children[1]:Ba;if(Ba.visible&&Bb&&!A9){Bb=false;BY.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:BV,cssClass:"ConfDataType-MenuEditor",contents:BL,onOpen:function(){BB(this);},bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function A3(Bb){var BY=[],Bd=[],Ba=false,Bc=function(Bg,Bh,Bf){var Bj=[],Bi=function(Bk){var Bl=Bk.ftk&&Bk.ftk.slice(2,-2);if(!Bl){return null;}while((Bl.shift()).v!=="("){}return Bl;},Be=Bi(Bf)||[An(BF,Bf)];Bj.push({v:"!",tp:33,lv:4});if(Bg!==A6){Bj.push({v:Bg,oi:{did:A2[Bg],t:11,st:2816,n:Bg}});if(!h.isEmpty(Bh)&&Bh!==Ax&&(Bg===BC||Bg===BO)){Bj.push({v:'<Pattern="'+Bh+'">(',tp:"2",lv:1});}else{Bj.push({v:"(",tp:"2",lv:1});}Bj=Bj.concat(Be);Bj.push({v:")",tp:"2",lv:1});}else{Bj=Bj.concat(Be);}Bj.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Bj});};if(BN){Ba=true;}else{BD.forEach(function(Be){if(Bb[Be.fnm+BR+BW]===BU.TO_CREATE){Ba=true;return false;}if(Bb[Be.fnm+BR+BW]===BU.TO_UPDATE||(Bb[Be.fnm+A0+BW]===BU.TO_UPDATE&&(Bb[Be.fnm+BR]===BC||Bb[Be.fnm+BR]===BO))){Bd.push(Be);}});}if(Ba){BD.forEach(function(Be){BY.push({n:Be.fnm,formula:Bc(Bb[Be.fnm+BR],Bb[Be.fnm+A0],Be),bft:Bb[Be.fnm+BA]});});BT(Ba,BY);}else{if(BF.da){var BZ=A7&&Au.datasets[A7]&&Au.isDataModelDataset(Au.datasets[A7]);Ac(Au.mid,BF.did,Bd,function(Be){Be.forEach(function(Bf){BY.push({did:Bf.fid,formula:Bc(Bb[Bf.fnm+BR],Bb[Bf.fnm+A0],Bf),bft:Bb[Bf.fnm+BA]});});BT(Ba,BY);},BZ?A7:undefined);}}}});},getCreateTimeDAEditorCfg:function B(Ax,Aw){var Au=I(Ax);if(!Au){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function Av(){var Az=false;Y.forEach(this.selectedIndices,function(A0){if(A0){Az=true;return false;}});this.parent.data.set("okEnabled",Az);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function Ay(A3,A4){var A7=A4.time_type,A6=A7.selectedIndices,A5=A7.items,A2=[],Az=[],A1=function(A8,BA,BC){var BB=[{v:"!",tp:33,lv:4}],A9;BC.forEach(function(BD){if(BD===AY){BB.push(An(A8,BA));}else{A9=Ae[BD];if(A9){BB.push({v:A9,oi:{did:A9,t:11,st:2816,n:A9}});}else{BB.push({v:BD,tp:"2",lv:1});}}});BB.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:BB});};var A0=F();Y.forEach(A6,function(A8,A9){if(A8){Az=[];Y.forEach(A0[A5[A9].v],function(BA,BB){Az.push({n:BB,formula:A1(Ax,Au,BA),bft:(BB==="DATE"?8:0)});});A2.push({isTokenStream:true,forms:Az,name:Ax.n+" ("+A5[A9].n+")"});}});return Aw(A2);}});},RefreshAndCloseAllObjectBrowserCallback:function(Av,Au){return mstrmojo.func.wrapMethods(Au.getDatasetsUpdateCallback(),{success:function(){if(Q.find(Av,"act","createDataset")!==-1){Au.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function AQ(Av,Ax,Au){var Aw=null;Y.forEach(Av,function(Az){var Ay=Az.att||[];if(Au===4){Ay=Az.mx||[];}Q.forEach(Ay,function(A0){if(A0.did===Ax){Aw=A0;return false;}});if(Aw){return false;}});return Aw;},isUnitFromStreamingDataset:function U(Ax,Aw){var Au=Y.walk("rootCtrl.docCtrl.model",mstrApp),Av=undefined;if(Au){Av=Aw?this.getDatasetFromAttributeId(Au.datasets,Ax):this.getDatasetFromMetricId(Au.datasets,Ax);}return !!Av&&this.isStreamingDataset(Av);},isStreamingDataset:function AH(Au){return Au.extType===Ap.realtime;},getDatasetFromId:function g(Au,Av){var Aw=null;Y.forEach(Au,function(Ax){if(Ax.did===Av){Aw=Ax;return false;}});return Aw;},getDatasetFromAttributeId:function g(Au,Av){var Aw=null;Y.forEach(Au,function(Ax){if(Q.find(Ax.att,"did",Av)>=0){Aw=Ax;return false;}});return Aw;},getDatasetFromMetricId:function u(Av,Au){var Aw=null;Y.forEach(Av,function(Ax){if(Q.find(Ax.mx,"did",Au)>=0){Aw=Ax;return false;}});return Aw;},getSortedDatasetUnits:function AM(Au,Ay,Av){var Ax=Av||"n",Aw=function Aw(Az){return Az.t===AL.DssTypeMetric?2:1;};Au=Au.concat();Au.sort(function(A2,A0){if(!A2||!A0){return true;}if(Ay){var A3=A2;A2=A0;A0=A3;}var A4=Aw(A2)-Aw(A0),A1=A2[Ax].toUpperCase(),Az=A0[Ax].toUpperCase();return A4!==0?A4:(A1!==Az?A1.localeCompare(Az):A2[Ax].localeCompare(A0[Ax]));});return Au;},isDerivedMetric:function AJ(Au){return Au.rdm||Au.um||Au.dm;},isGeoAttr:function AX(Au,Av){return !!(Au.fs&&(Au.fs instanceof Array)&&Au.fs.length&&Au.fs.some(function(Aw){return Aw.fgr>0&&(!Av||(Av&&Aw.obf));}));},isTimeAttr:function AE(Au){return !!(Au.fs&&I(Au));},isRealtimeTimeIntervalAttr:function f(Au){return !!Au.smartAttrType&&Object.values(Aa).includes(Au.smartAttrType);},isLngOrLatAttr:function AP(Au){return !!(Au.fs&&(Au.fs instanceof Array)&&Au.fs.length===1&&Au.fs.some(function(Av){return Av.fgr===5||Av.fgr===6;}));},isNewDE:function E(Au){return Au.t===j.Consolidation&&Au.st===AS.ConsolidationManaged;},isRecursiveAttr:function AT(Au){return Au.t===j.Attribute&&Au.st&&Au.st===AS.AttributeRecursive;},isRecursiveNDE:function m(Au){return this.isNewDE(Au)&&Au.ndetype===G.DssRecursiveDerivedElement;},isFactMetric:function s(Au){return Au.t===j.Metric&&Au.st&&Au.st===AS.DssSubTypeFactMetric;},getReportParameterCssClass:function Al(){return"rprm";},_getSemanticRoleValueForAttr:function As(A2){if(!A2.fs){return ;}var Ay=mstrmojo.mstr.EnumDSSXMLSemanticRoles;var A0=1;var A3=A2.fs.find(function(A4){return A4.idf;});if(A3&&A3.semanticRole){return A3.semanticRole;}var Aw=A2.fs.map(function(A4){return A4.semanticRole;}).filter(function(A4){return A4&&A4!==A0;});var A1=Array.from(new Set(Aw));if(A1.length===0){return ;}if(A1.length===1){return A1[0];}var Av=Ay.personRole.ids.concat(13,14,16);var Az=A1.every(function(A4){return Av.includes(A4);});if(Az){return Ay.personRole.ids[0];}var Au=[6,7,];var Ax=A1.every(function(A4){return Au.includes(A4);});if(Ax){return Ay.newGeoRole.ids[0];}},_getSemanticRole:function AZ(Ay){var Ax=Ay.t,Az=Ax===j.Attribute,Av=Ax===j.Metric;var A0=mstrmojo.mstr.EnumDSSXMLSemanticRoles;var Au;if(Az){if(Ay.da){return undefined;}Au=this._getSemanticRoleValueForAttr(Ay);if(A0.personRole.ids.includes(Au)){return A0.personRole.name;}else{if(A0.newGeoRole.ids.includes(Au)){return A0.newGeoRole.name;}else{if(A0[Au]){return A0[Au];}}}if(Ay.st===AS.AttributeSmart){return"smart-attribute";}else{return"attribute";}}else{if(Av){var Aw=Ay.st===AS.DssSubTypeFactMetric;if(this.isDerivedMetric(Ay)){Au=undefined;}else{if(Aw){Au=Ay.semanticRole;if(A0[Au]){Au=A0[Au];}else{Au="base-metric";}}else{Au="metric";}}}}return Au;},getSemanticRoleCssClass:function Ai(Av){var Au=this._getSemanticRole(Av);if(Au){return"semantic-"+Au;}else{return"";}},isUnitFromMosaicDataset:function p(Ax,Aw){var Au=Y.walk("rootCtrl.docCtrl.model",mstrApp),Av;if(Au){Av=Aw?this.getDatasetFromAttributeId(Au.datasets,Ax):this.getDatasetFromMetricId(Au.datasets,Ax);}return !!Av&&this.isMosaicDataset(Av);},isMosaicDataset:function Af(Au){return Au.extType===Ap.dataModel;},getUnitCssClass:function(A2){var Av=q.safeCall("isAIDatasetCollectionMode",o)(),A4=q.safeCall("isUslBotEnabledAndHasPartiallyDumpedDataset",o)();var Az=A2.t,A1=Az===j.Attribute,A3=this.isUnitFromStreamingDataset(A2.did,A1),Au=this.isUnitFromMosaicDataset(A2.did,A1),Ay=mstrApp.isDossier===false,Ax=Ay&&A3;if(Ax){Az+="rt";}if(A2.mt){Az=A2.mt;}else{if(Ax&&this.isRealtimeTimeIntervalAttr(A2)){Az+="ti";}else{if(this.isGeoAttr(A2,A2.useAvailGeoFmsOnly)){Az+="g";}else{if(this.isDerivedMetric(A2)||A2.da){Az+="d";}else{if(A2.de){Az+="de";}else{if(this.isTimeAttr(A2)){Az+="t";}else{if(A2.isParameter){Az+="prm";}else{if(A2.nonAggregatable){Az+="naa";}else{if(A2.unstructuredDataItemSuffix){Az+=A2.unstructuredDataItemSuffix;}}}}}}}}}if(A2.isGlobalFilterApplied&&(A2.t===12||A2.t===4)){Az+=" sf";}if(A2.isReportParameter){Az+=(" "+this.getReportParameterCssClass());}if(A2.t===j.Prompt&&!A2.isParameter){Az+="prompt";}if(this.isNewDE(A2)||this.isRecursiveAttr(A2)||this.isFactMetric(A2)){Az+=(" st"+A2.st);}if(Au){Az+=" "+this.getSemanticRoleCssClass(A2);}if(this.isRecursiveNDE(A2)){Az+=" nde4ra";}if(Av&&!A4&&A2.ms===false){Az+=" metricAskWarn";}if(A2.isUnstructuredDataItem){if((A2.acg&AU.DssAccessRightExecuteFlag)===0){Az+=" unstructuredDataWarnAcl";}if(A2.status&&A2.status.toLowerCase&&A2.status.toLowerCase()==="indexing"){Az+=" unstructuredDataIndexing";}else{if((A2.status!==undefined)&&(A2.status!=="ready")){Az+=" unstructuredDataWarnStatus";}}try{var A0=Y.walk("rootCtrl.docCtrl.model",mstrApp);if(A0&&A0.evaluateStartUnstructuredDataPolling){A0.evaluateStartUnstructuredDataPolling();}}catch(Aw){}}return"ic"+Az;},hasMultiForms:function O(Av,Au){return d.getFormsByAttrId(Av,Au).length>1;},getDisplayFormsMenu:function K(BB,A3,A0,BD,Ax,Av){var Aw=[],A9=[],A1=[],A7=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}],BC=A3.model.data,Au=BC.gts,A4=A3.hasArrayGSI,A5=BB.setIdx,BA=Au.col,Az;if(A4&&A5!==undefined){BA=A3.getColSetColumnTitles(Math.max(A5,0));}Q.forEach((Au.row||[]).concat(BA||[]),function(BE){if(BE.id===BB.did){A9=A9.concat(BE.fs);}});Az=d.getFormsByAttrId(BB.attId||BB.did,A0);Q.forEach(Az||[],function(BF){var BG=BF.fid;if(Q.find(Aw,"id",BG)<0){Aw.push({id:BG,n:BF.fnm});var BE=Q.find(A9,"id",BG);if(BE>-1&&(!Av||Av(BF))){A1[Aw.length-1]=true;}}});var A8=[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:Aw,selectedIndices:A1},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:"),cssClass:"menu-info-text"},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:A7,isHostedWithin:false,selectedIndex:Q.find(A7,"v",BC.lnm||0),onitemSelected:function A2(BE){this.v=String(BE.v);}}];if(this.isNewDE(BB)||(A3.getChartStyle&&A3.getChartStyle()==="NewGraphMatrixVisualizationStyle")){A8.splice(-2,2);}return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{item:BB,oldSelected:Y.copy(A1,{})},contents:A8,okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function A6(Ba,BH){var BO=BH.fs,BR=BO.selectedIndices,BI=BO.items,BP=[],BG=[],BS=[],BU=A3.model.data.lnm||0;if(!BO.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var BW=Ba.oldSelected,BQ=BR,BM=parseInt(BH.longNames?BH.longNames.v:0,10),BT,BV={},BJ={};for(BT=0;BT<BI.length;BT++){if(BW[BT]&&!BQ[BT]){BV[BT]=true;}else{if(!BW[BT]&&BQ[BT]){BJ[BT]=true;}}}if(!Ax){Y.forEach(BV,function(Bb,Bc){if(Bb){BG.push({act:"removeForm",unitId:BB.did,unitType:BB.t,attFormId:BI[Bc].id});}});}var BE=A3.model.data.gts;(BE.row||[]).concat(BA||[]).forEach(function(Bb){if(Bb.id===BB.did){(Bb.fs||[]).forEach(function(Bc){if(Q.find(Aw,"id",Bc.id)<0){BG.push({act:"removeForm",unitId:BB.did,unitType:BB.t,attFormId:Bc.id});}});}});Y.forEach(BJ,function(Bb,Bc){if(Bb){BP.push({act:"addForm",unitId:BB.did,unitType:BB.t,attFormId:BI[Bc].id,unitPos:0});}});BS.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:BM});var BK=[],BL=BG.concat(BP),BX=A3.controller.dataService(),BF=A3.k;if(A4){var BZ=A3.gridData.gsi,BN=BB.setIdx;if(BN!==undefined&&BN>-1){BK.push(BX.getUpdateTemplateAction(mstrmojo.models.template.DataInterface.getGSI(BZ,BN).k,BL,null,BF));}else{mstrmojo.models.template.DataInterface.forEachGSI(BZ,function(Bc,Bb){BK.push(BX.getUpdateTemplateAction(Bb,BL,null,BF));},BF);}mstrmojo.models.template.DataInterface.forEachGSI(BZ,function(Bc,Bb){BK.push(BX.getUpdateTemplateAction(Bb,BS,null,BF));},BF);}else{BK.push(BX.getUpdateTemplateAction(BF,BL.concat(BS)));}var BY=Object.keys(BJ).length||Object.keys(BV).length;if(BD&&(BY||BU!==BM)){BD(BK,BJ,BV);}},onOpen:function Ay(){this.fs.updateScrollbars();}});},getAttributeLinkMenu:function J(A6,BA,Aw,A9,A5){var Av=-2147483648,Ay=A9.datasets,A1=Ay[Aw],Az=A1.tables||[],A0={},A4=[],Au=(BA.fs&&BA.fs[0])||{},A7=[],BB=779,A2=BA.art>1,A8=!A2&&Y.keyarray(Ay).length>1,Ax=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:BA,docModel:A9,datasetId:Aw});},A3=q.safeCall("isAIDatasetCollectionMode",o)();if((A1.st!==BB)||Az.length<=1||BA.da){if(A8&&!(BA.da&&A3)){A6.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",Ax);}return ;}Q.forEach(A1.att,function(BE){var BF=true,BD=null,BC=(BE.fs&&BE.fs[0])||{};if(BE.da){return ;}if(Au.der===Av||BC.der===Av||Au.fgr===-1||BC.fgr===-1||Au.ftr===-1||BC.ftr===-1){return ;}if(Au.fgr&&BC.fgr&&Au.fgr!==BC.fgr){return ;}if(Au.ftr&&BC.ftr&&Au.ftr!==BC.ftr){return ;}Q.forEach(Az,function(BG){var BH=Q.find(BG.attRefs,"did",BA.did),BI=Q.find(BG.attRefs,"did",BE.did);if(BH>=0&&Q.indexOf(A4,BG.did)<0){A4.push(BG.did);}if(BI>=0){BD=BG.did;}if(BH>=0&&BI>=0){BF=false;}});if(BF&&!BE.hide){A0[BE.did]=BD;A7.push(BE);}});if(A7.length>0&&A1.hcs!==true&&!A9.isSparkDataset(A1)&&!A9.isDataModelDataset(A1)){A6.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:A7,listHooks:{select:function BC(BD,BE){A9.warnForEditStandaloneDS(A1,function(){Q.forEach(A4,function(BF){Z({dsid:Aw,srcId:BA.did,srcTableId:BF,tgtId:BE.did,tgtTableId:A0[BE.did]},A9,A5);});});}}}]}]});});}if(A8){A6.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",Ax);}},isDocumentLevelItem:function AR(Au){return Au&&(Au.um||Au.da||this.isNewDE(Au));},isLegalObjectName:function l(Au){var Av=/["\[\]\\]/g;if(Au.match(Av)){return false;}return true;},validateName:function D(Av,Aw,Au){if(this.isLegalObjectName(Av)){Aw();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),Au,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AW(Au){return(Au.att||[]).some(function(Av){return b(Av);});},isCGorCon:function w(Au,Aw){var Av=Q.filterOne(Aw&&Aw.att,function(Ax){return Ax.did===Au.did;});return b(Av||Au);},hasOldDEOverDatasets:function(Ax,Aw){var Av=false,Au;Y.forEach(Aw,function(Ay){Au=Q.find((Ay.att||[]),"did",Ax);if(Au!==-1&&Ay.att[Au].de){Av=true;return false;}});return Av;},getMarkGeoRoleEditorCfg:function S(Au,BZ,BG,BC,Bi,Bk){var BA=268435456,Bf=536870912,Az=1073741824,BQ=268435456,Bc=805306368,BX=805306368,BK=1879048192,Bj=-2147483648,Ba=0,Bb=1,A1=2,A9=3,BE=4,A7=5,Bh=6,A4=7,BI=8,BH=9,BS=10,BB=11,Ax=2,BP=3,BY={v:Ba,n:mstrmojo.desc(2057,"None")},Bl={v:A9,n:mstrmojo.desc(7674,"Country"),der:BA},BW={v:A1,n:mstrmojo.desc(7676,"State"),parents:[Bl],der:Bf},A5={v:BH,n:mstrmojo.desc(12919,"County"),parents:[Bl,BW]},Bd={v:Bb,n:mstrmojo.desc(7675,"City"),parents:[Bl,BW],der:Az},BL={v:BI,n:mstrmojo.desc(7677,"Zip Code"),parents:[Bl,BW,Bd]},BD={v:A7,n:mstrmojo.desc(7696,"Latitude")},BT={v:Bh,n:mstrmojo.desc(7697,"Longitude")},A8={v:BE,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},BO={v:BS,n:mstrmojo.desc(12973,"Area Code")},BV={v:BB,n:mstrmojo.desc(16630,"Geometry")},BR={v:A4,n:mstrmojo.desc(2056,"Custom")},BF=mstrApp&&q.safeCall("supportFeature",mstrApp)(AV.M2020_VERSION),A6={ID:[BY,Bl,BW,A5,Bd,BL,BD,BT,A8,BO].concat(BF?[BV,BR]:[BR]),ID_NUMERIC:[BY,BL,BO,BD,BT],NON_ID:[BY,Bl,BW,A5,Bd,BL,A8,BO].concat(BF?[BV,BR]:[BR]),NON_ID_NUMERIC:[BY,BL,BO]},BM=Q.filter(BZ.fs,function(Bm){return(Bm.bftp===Ax||Bm.bftp===BP)&&Bm.der!==Bj;});var BU=(BM.length>1),Aw=Q.find(BM,"idf",true),Ay=(Aw===-1?0:Aw),BN=BM[Ay],A3,Av,BJ,A0=[],A2=function(Bm){var Bn=(Bm.idf?"ID":"NON_ID")+(Bm.bftp===Ax?"_NUMERIC":"");return A6[Bn];},Bg=function(Bn,Bm){return Q.find(A2(Bm),"v",Bn);};if(BM.length===0||Q.find(BZ.fs,"fgr",-1)!==-1||BN.der===Bj){return null;}Q.forEach(BM,function(Bo,Bm){var Bn=Y.clone(Bo);Bn.n=Bn.fnm;A0.push(Bn);if(Bo.fgr){BN=Bn;Ay=Bm;}});A3=BN.fid;BJ=BN.fgr||0;Av=Bg(BJ,BN);return new mstrmojo.ui.menus.EditorConfig({data:{item:BZ,geoForm:BN,geoRole:BJ},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:BU},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:A0,selectedIndex:Ay,alias:"formList",visible:BU,onitemSelected:function Be(Bo){var Bm=this.parent.data,Bn=this.parent.geoRoleList;if(Bm.geoForm.fid!==Bo.fid){Bm.set("geoForm",Bo);Bm.set("geoRole",Bo.fgr);Bn.set("items",A2(Bo));Bn.set("selectedIndex",Bg(Bo.fgr,Bo));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:BU,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:"),cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:A2(BN),selectedIndex:Av,alias:"geoRoleList",onitemSelected:function Be(Bs){var Br=this.parent,Bm=Br.data,Bt=Br.geoDrvList;var Bo=[],Bq=[],Bn=BN.der,Bp;Bm.set("geoRole",Bs.v);Q.forEach(Bs.parents,function(Bu,Bv){Bp=Bu;Bo.push({n:Bp.n,der:Bp.der});if((Bn&Bp.der)!==0){Bq[Bv]=true;}});Bt.set("items",Bo);Bt.set("selectedIndices",Bq);Q.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(Bu){Br[Bu].set("visible",Bo.length>0);});if(Br.adjustCornersForPopupOverflow){Br.adjustCornersForPopupOverflow();}}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel",cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(Br,Bq){var Bn=function(B1){var B0=function(B6){var B7="<mpcs>";Q.forEach(B6,function(B8){B7+='<mpc did="'+B8.did+'" n="'+B8.n+'" georole="'+B8.georole+'" drvflg="'+B8.drvflg+'" />';});B7+="</mpcs>";return B7;},Bt=function(B6,B8,CA,B7){var B9=function(CE,CB,CD){var CC=AA(B1,CE,CB),CF=AI(CC,CD);return CF&&CF.did;};Bi.forEach(function(CB,CC){var CD=B9(CB.did,BZ.did,B8.fid);if(CD){B6[CC]=B6[CC]||[];B6[CC].push({did:CD,n:B8.fnm,georole:CA,drvflg:B7});}});},Bx=[],B5=[],B2=Bq.geoDrvList,B3=0,Bv=false,Bz=false,B4={2:BQ,1:Bc,9:BX,8:BK}[Br.geoRole]||0,Bu=BN.fgr!==Br.geoRole,By=BN.fid!==Br.geoForm.fid,Bw;Y.forEach(B2.selectedIndices,function(B7,B6){if(B7){B3|=B2.items[B6].der;}});B3&=B4;Bw=BN.der!==B3;if(Bu||By||Bw){if(BU&&By){if(BN.fgr!==Ba){Bt(B5,BN,Ba,0);if(BN.der>0){Bv=true;}}}if(Br.geoForm.fgr!==Br.geoRole||Br.geoForm.der!==B3){Bt(B5,Br.geoForm,Br.geoRole,B3);if((B3&Br.geoForm.der)!==Br.geoForm.der){Bv=true;}}if(Bu){Bz=true;}if(B5.length>0){B5.forEach(function(B7,B6){Bx.push({act:"changeEMMAMapping",dsid:BG,tbid:Bi[B6].did,mapping:B0(B7)});});Bk(Bx,Bv||Bz);}}},Bo=function(){Ad(Au.mid,BG,{success:Bn});};var Bp=mstrApp.isAppStatePause();if(!BC||Bp){var Bs,Bm=Bp?mstrmojo.desc(212,"Continue"):mstrmojo.desc(219,"Yes");if(BC){Bs=mstrmojo.desc(16237,"The operation requires the dataset to be unloaded from memory. It will be automatically reloaded when you resume data retrieval. Do you want to continue?");}else{Bs=Bp?mstrmojo.desc(16236,"The operation requires modifying the dataset and unloading it from memory. It will be automatically reloaded when you resume data retrieval, however the change will also affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"):mstrmojo.desc(15493,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?");}mstrmojo.warn(Bs,{},{buttons:[C(Bm,function(){Bo();},true,{cssText:"min-Width: 60px"}),C(mstrmojo.desc(221,"Cancel"),function(){})]});}else{Bo();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.ui.DatasetUnitMenuUtils");var A=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui._CanDropFromSchema=mstrmojo.provide("mstrmojo.vi.ui._CanDropFromSchema",{_mixinName:"mstrmojo.vi.ui._CanDropFromSchema",augmentDropContextForSchema:function B(E,C){var F=E.getCtxtDragData();if(F.src===mstrmojo.vi.models.EnumDragSources.ALL_OBJECT_LIST){var D=A.getCfgForAddUnitFromAllObject(F.items,C.datasets||{});F.dsid=D.dsid;if(D.actions.length){E.actions=D.actions;E.callback=C.getDatasetsUpdateCallback();}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.chart.model.enums.EnumShapeRadiusDirection","mstrmojo.models.FormatModel","mstrmojo._FormatDefinition","mstrmojo.css","mstrmojo.HTMLSanitizeUtil","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.vi.ui.rw.FreezingImageContainer","mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var O=document.getElementById("vis-measure-canvas"),z=[],G=document.getElementById("vis-measure-span"),t={},Z={},A4={},N={},AG={},AJ=mstrmojo.color,AT=mstrmojo.dom,l=mstrmojo.elementHelper,Am=mstrmojo.vi.ui.DatasetUnitMenuUtils,a=mstrmojo.VisEnum.EnumColorRankMode,AF=mstrmojo.chart.model.enums.EnumDSSObjectType,Aa=mstrmojo.chart.model.enums.EnumShapeRadiusDirection,Ay=mstrmojo.chart.model.enums.EnumDSSBaseFormType,Ah=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,Ao=mstrmojo.chart.enums.EnumFontStyle,c=mstrmojo.hash,i=mstrmojo.string,A1=mstrmojo.func.wrapMethods,e=mstrmojo.VisEnum,U=mstrmojo._FormatDefinition,A8=e.SERVER_JSON_ERROR_TYPE,AM=mstrmojo.vi.viz.EnumVizStyles,Ab=mstrmojo.vi.enums.EnumFeatures,F=mstrmojo.vi.ui.rw.FreezingImageContainer,Aw=mstrmojo.vi.ui.rw.GhostImageContainer,A6=mstrmojo.gm.EnumDefaultProperty,AZ=mstrmojo.gm.EnumDefaultProperty4GM,Ak=mstrmojo.gm.WidgetPropertyTag,p=mstrmojo.gm.FormatingPropertyTag,D=mstrmojo.HTMLSanitizeUtil,m=mstrmojo.num;var AK=64,AU=128,C=4,AP=5,h=6,H=7,q=mstrmojo,X=q.array,A3=mstrmojo.array,A=q.desc,y=q.mstr.EnumFunction,Y=mstrmojo.vi.enums.EnumDerivedElementType,Au=q._HasMarkup,Az=q.css,s=/img.*?src.*=/g;var S;var k=NaN;var f=false;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869,11819,11827,13165,28100);function A7(BD,BC){var BB=mstrmojo.VisUtility;var BE=BB.pluck(BC,"tid"),BF=BB.pluck(BC,"eid"),BA=(BD.getDocModel&&BD.getDocModel())||BB.getPropertyByPath(BD,"model.docModel");if(BB.getPropertyByPath(BA,"getColorBy") instanceof Function){return BA.getColorBy(BE,BF);}}function Av(BA,BC,BE){var BD=BC.id,BB=BC.getHost();if(BB&&BB.observableModel){BA.forEach(function(BG){var BF=BB.observableModel[BG];if(BF){BF.attachEventListener("valueChanged",BD,BE);}});}}function A9(BB){var BA={SINGLE:[{text:A(358,"Absolute"),value:y.FunctionAbs,n:A(358,"Absolute"),v:y.FunctionAbs}],PAIR:[{text:A(6017,"Add"),value:y.FunctionAdd,n:A(6017,"Add"),v:y.FunctionAdd},{text:A(2122,"Average"),value:y.FunctionAverage,n:A(2122,"Average"),v:y.FunctionAverage},{text:A(5868,"Least"),value:y.FunctionLeast,n:A(5868,"Least"),v:y.FunctionLeast},{text:A(5869,"Greatest"),value:y.FunctionGreatest,n:A(5869,"Greatest"),v:y.FunctionGreatest},{text:"A-B",value:y.FunctionMinus+";0",n:"A-B",v:y.FunctionMinus+";0"},{text:"B-A",value:y.FunctionMinus+";1",n:"B-A",v:y.FunctionMinus+";1"},{text:"A/B",value:y.FunctionDivide+";0",n:"A/B",v:y.FunctionDivide+";0"},{text:"B/A",value:y.FunctionDivide+";1",n:"B/A",v:y.FunctionDivide+";1"}],MORE:[{text:A(6017,"Add"),value:y.FunctionAdd,n:A(6017,"Add"),v:y.FunctionAdd},{text:A(2122,"Average"),value:y.FunctionAverage,n:A(2122,"Average"),v:y.FunctionAverage},{text:A(5868,"Least"),value:y.FunctionLeast,n:A(5868,"Least"),v:y.FunctionLeast},{text:A(5869,"Greatest"),value:y.FunctionGreatest,n:A(5869,"Greatest"),v:y.FunctionGreatest}]};return BA[BB];}function Ag(BB,BA){return !!(((BB&&BB.at)||0)&BA);}function d(BA){return !BA.cmSelCells.some(function(BB){var BC=BA.getCellForNode(BB);return l.isNonGroupNull(BC)||!Ag(BC,AK)||BC.dei!==undefined||BA.model.isRecursiveAttribute(BC.tid);});}function AB(BB){var BA;return !BB.cmSelCells.some(function(BC){BA=BB.getCellForNode(BC);return(l.isNonGroupNull(BA)||!Ag(BA,AU))||BB.model.isRecursiveAttribute(BA.tid);});}function A5(BD,BA){var BC=BD&&BA&&BD.getCellForNode(BA),BB=BC&&BD.getDEInfo(BC);return BB&&BB.de;}function b(BE,BD,BG,BC){if(BC){var BB=BD&&BE.getDEInfo(BD),BF=BB&&BB.de,BA=BF&&BF.func;if((BA===BG)||(typeof BG==="string"&&BG.indexOf(BA)===0&&BG.indexOf(";0")>0)){return ;}BE.editDECalculation(BD,BG);}else{BE.derivedElementCalculation(BD,BG);}}function AC(BM,BK,BI){var BL=BK&&BK.es,BA=(BL&&BL.length)||BM.cmSelCells.length,BD=(BA===1)?"SINGLE":((BA===2)?"PAIR":"MORE"),BJ=A9(BD),BC=(BK&&BK.func),BE,BN=BM.cmSelCells,BB,BH,BG,BF;if(BD==="PAIR"){if(BK){BF=BL[0].v>BL[1].v;if(BF){BG=BL[0].n;BH=BL[1].n;BJ[4]={value:y.FunctionMinus+";1",v:y.FunctionMinus+";1"};BJ[5]={value:y.FunctionMinus+";0",v:y.FunctionMinus+";0"};BJ[6]={value:y.FunctionDivide+";1",v:y.FunctionDivide+";1"};BJ[7]={value:y.FunctionDivide+";0",v:y.FunctionDivide+";0"};}else{BH=BL[0].n;BG=BL[1].n;}}else{BH=BI(BN[0]);BG=BI(BN[1]);}BJ[C].text=BH+" - "+BG;BJ[AP].text=BG+" - "+BH;BJ[h].text=BH+" / "+BG;BJ[H].text=BG+" / "+BH;BJ[C].n=BH+" - "+BG;BJ[AP].n=BG+" - "+BH;BJ[h].n=BH+" / "+BG;BJ[H].n=BG+" / "+BH;}for(BE in BJ){if(typeof BJ[BE].value==="string"&&BJ[BE].value.indexOf(BC)===0&&BJ[BE].value.indexOf(";0")>0){BB=BJ[BE];break;}if(BJ[BE].value===BC){BB=BJ[BE];break;}}return{items:BJ,selectedItem:BB};}function AL(BA,BD){if(!BA){return BA;}if(BD.length===1){return BA[BD[0]];}var BC=(BD&&BD.length)||0,BB;for(BB=0;BB<BC;BB++){BA=BA[BD[BB]];if(!BA){break;}}return BA;}function Aj(BC,BB,BA){return BC.every(function(BD){return BD.ttp===BB||BD.ttp===BA;});}function I(BB,BE,BF){var BD=(BE&&BE.length)||0,BC,BA,BG=BB;for(BC=0;BC<BD-1;BC++){BA=BE[BC];if(!BG[BA]){BG[BA]={};}BG=BG[BA];}BG[BE[BD-1]]=BF;}function AS(BI){var BJ,BH,BD,BF,BA,BG=this.model.docModel.datasets,BB=false,BE=false,BC={isDM:false};for(BJ in BG){if(BG.hasOwnProperty(BJ)){BH=BG[BJ].mx;X.forEach((BH||[]),function(BK){if(BK.did===BI){if(BK.um||BK.rdm){BE=true;}BB=true;return false;}});if(BB){break;}}}if(BE){BA=this.model.data.gts.col;BD=(BA&&BA[BA.length-1]);if(BD&&BD.otp===-1){BF=BD.es;}X.forEach((BF||[]),function(BK){if(BK.oid===BI){BC={isDM:true,id:BK.id};return false;}});}return BC;}function AH(BA,BF,BD){var BH=[],BC={act:"updateElementsPropertiesMap",epm:BH,nodeKey:BD,skipReverseUndo:true},BB={ob:{did:""}},BJ=[BB],BE=[],BG=this;if(BA.length===0){var BI={};BE=[BI];if(BF==="1"){BI.v={ov:BF};}BI.k={chn:[]};}else{BA.forEach(function(BN){var BP=[],BM={};BM.v={ov:BF};BM.k={chn:BP};BE.push(BM);for(var BL=0;BL<BN.length;BL++){var BO=BN[BL];if(BO.tid===-1){var BK=AS.call(BG,BO.eid);if(BK.isDM){BP.push({emt:2,ei:BK.id});}else{BP.push({emt:2,mt:{did:BO.eid,tp:4,ql:0}});}}else{BP.push({emt:1,ei:BO.eid,at:{did:BO.tid,tp:12,ql:0}});}}});}BH.push({epmk:BJ,epmv:BE});return BC;}function L(BA,BD){var BG=[],BC={act:"updateElementsPropertiesMap",epm:BG},BE=[],BB={},BI=[BB],BH=this;BG.push({epmk:BE,epmv:BI});BA.forEach(function(BK){var BL=BK.tid,BN=BK.tp,BJ=BL===-1,BM={ob:{did:BJ?"":BL,tp:BN}};BE.push(BM);});if(BD&&BD.indexOf("default")<0){BB.v={vv:BD};}var BF=[];BB.k={chn:BF};BA.forEach(function(BL){var BM=BL.tid,BJ=BM===-1,BK;if(BJ){BK=AS.call(BH,BL.eid);if(BK.isDM){BF.push({emt:2,ei:BK.id});}else{BF.push({emt:2,mt:{did:BL.eid,tp:4,ql:0}});}}else{BF.push({emt:1,ei:BL.eid,at:{did:BM,tp:BL.tp,ql:0}});}});return BC;}function Ac(BE,BC){var BD="00000000000000000000000000000000",BB=BE&&BE.dropZones,BA=X.find(BB,"id",BC);return BA===-1?[]:X.filter(BB[BA].items,function(BF){return BF.t===4&&BF.id!==BD;});}function AY(BF,BC,BE,BB,BA){var BG=BB?BF:BF&&BF.parentNode;while(BG&&(BG!==BA)){var BD=BG.getAttribute&&BG.getAttribute(BC);if(BD!==null&&BD.indexOf(BE)>=0){return true;}BG=BG.parentNode;}return false;}function AQ(BB,BC){var BA=c.walk("rootCtrl.docCtrl",mstrApp);if(BA&&(typeof BA.selectViPanel==="function")){BA.selectViPanel(BC);}BB.getDocModel().selectVIUnit(BB.parent.id,true);}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{setMeasuringOptFlag:function(BA){f=BA;},getMeasuringOptFlag:function(){return f;},detectMinimumFontSize:function(){if(AT.isChrome){var BC="I am a sample string, I am a sample string, I am a sample string.",BE,BA={fontFamily:"Open Sans",fontSize:"1pt",fontStyle:"normal",fontWeight:"normal",textDecoration:"none"},BD=this.measureTextWidthWithSpan(BC,BA,0,undefined,true,true,true);for(var BB=2;BB<72;++BB){BA.fontSize=BB+"pt";BE=this.measureTextWidthWithSpan(BC,BA,0,undefined,true,true,true);if(BE>BD){k=BB;break;}}}},getCache:function(){return JSON.stringify(AG);},getUpdateColorMapAction:function(BB,BA){return L.call(this,BB,BA);},getUpdateAGGridOutlineAction:function(BB,BA,BC){return AH.call(this,BB,BA,BC);},isDerivedMetric:function(BA){return AS.call(this,BA);},measureTextSize:function(BB,BA,BC){return{width:this.measureTextWidth(BB,BA,BC),height:this.measureTextHeight(BB,BA,BC)};},measureTextSizeOpt:function(BB,BA,BC){return{width:this.measureTextWidth(BB,BA,BC),height:this.measureTextHeight("H",BA,BC)};},measureTextWidth:function(BE,BD,BF,BC,BA,BB){if(AT.isIE||AT.isIEW3C){return this.measureTextWidthWithSpan(BE,BD,BF,BC,BA);}if(AT.isChrome){if(isNaN(k)){this.detectMinimumFontSize();}if(parseInt(BD.fontSize)>=k){return f?this.measureTextWidthWithCanvasOpt(BE,BD,BF):this.measureTextWidthWithCanvas(BE,BD,BF);}return this.measureTextWidthWithSpan(BE,BD,BF,BC,BA,false,BB);}return this.measureTextWidthWithCanvas(BE,BD,BF);},measureTextWidthWithCanvas:function(BC,BD,BG,BE){BE=BE||false;if(BC===""){return 0;}if(BC===" "){BC="\u00A0";}var BF=BD.fontFamily,BI=BD.fontSize,BB=BD.fontStyle,BH=BD.fontWeight;if(typeof BI==="number"){BI+="pt";}BB=BB||"normal";BH=BH||"normal";BG=BG||0;var BA=BE?undefined:AL(t,[BF,BI,BB,BH,BC]);if(!BA){BA=Math.ceil(this.measureOnCanvas(BC,BF,BI,BB,BH).width);I(t,[BF,BI,BB,BH,BC],BA);}return BA+BG;},getHundredCharSet:function(BA){var BC="";for(var BB=0;BB<100;++BB){BC+=BA;}return BC;},measureOnCanvas:function(BC,BA,BE,BF,BB){if(!O){O=document.createElement("canvas");O.width=0;O.height=0;O.ariaHidden=true;O.id="vis-measure-canvas";O.style.position="absolute";O.style.top="0";O.style.fontSize="medium";document.body.appendChild(O);}var BD=O.getContext("2d");BD.font=BF+" "+BB+" "+BE+" "+this.surroundWithQuotes(BA);return BD.measureText(BC);},measureTextWidthWithCanvasOpt:function(BD,BE,BI,BG){BG=BG||false;if(BD===""||typeof (BD)!=="string"){return 0;}if(BD===" "){BD="\u00A0";}var BH=BE.fontFamily,BL=BE.fontSize,BC=BE.fontStyle,BJ=BE.fontWeight;if(typeof BL==="number"){BL+="pt";}BC=BC||"normal";BJ=BJ||"normal";BI=BI||0;var BB=BG?undefined:AL(Z,[BH,BL,BC,BJ,BD]);if(!BB){var BF,BK,BA;BB=0;for(BF=0;BF<BD.length;++BF){BK=BD[BF];BA=BG?undefined:A4[BH+BL+BC+BJ+":"+BK];if(!BA){BA=this.measureOnCanvas(this.getHundredCharSet(BK),BH,BL,BC,BJ).width/100;A4[BH+BL+BC+BJ+":"+BK]=BA;}BB+=BA;}BB=Math.ceil(BB);I(Z,[BH,BL,BC,BJ,BD],BB);}return BB+BI;},measureTextWidthQuick:function(BC,BD,BG,BE){BE=BE||false;if(BC===""){return 0;}if(BC===" "){BC="\u00A0";}var BF=BD.fontFamily,BI=BD.fontSize,BB=BD.fontStyle,BH=BD.fontWeight;if(typeof BI==="number"){BI+="pt";}BB=BB||"normal";BH=BH||"normal";BG=BG||0;var BA=BE?undefined:AL(t,[BF,BI,BB,BH,BC]);if(!BA){BA=Math.ceil(this.measureOnCanvas(BC,BF,BI,BB,BH).width);I(t,[BF,BI,BB,BH,BC],BA);}return BA+BG;},measureTextWidthWithSpan:function(BE,BF,BJ,BL,BG,BA,BC){if(BE===""){return 0;}if(BE===" "){BE="\u00A0";}var BH=BF.fontFamily,BM=BF.fontSize,BD=BF.fontStyle,BI=BF.fontWeight;if(typeof BM==="number"){BM+="px";}BD=BD||"normal";BI=BI||"normal";BL=BL||"auto";BJ=BJ||0;BG=!!BG;if(typeof BL==="number"){BL+="px";}var BB=AL(N,[BH,BM,BD,BI,BL,BE]);if(!BB||BA){var BK;if(!G){G=document.createElement("span");BK=G.style;G.id="vis-measure-span";BK.position="absolute";BK.top="0";BK.visibility="hidden";BK.width="auto";BK.height="auto";if(BG){BK.whiteSpace="nowrap";}else{BK.whiteSpace="normal";}document.body.appendChild(G);}BK=G.style;if(BG){BK.whiteSpace="nowrap";}else{BK.whiteSpace="normal";}BK.width="auto";BK.height=BL;BK.fontFamily=this.surroundWithQuotes(BH);BK.fontSize=BM;BK.fontStyle=BD;BK.fontWeight=BI;G.innerHTML=i.encodeHtmlString(BE,BC);BB=Math.floor(G.clientWidth)+1;I(N,[BH,BM,BD,BI,BL,BE],BB);}return BB+BJ;},measureTextHeight:function(BC,BD,BI,BL,BA,BF,BE){if(BC===""){return 0;}if(BC===" "){BC="\u00A0";}var BG=BD.fontFamily,BN=BD.fontSize,BB=BD.fontStyle,BH=BD.fontWeight,BK=BD.lineHeight||"1";BA=BA||"normal";BE=!!BE;if(typeof BN==="number"){BN+="px";}BB=BB||"normal";BH=BH||"normal";BL=BL||"auto";BI=BI||0;if(typeof BL==="number"){BL+="px";}var BM=BF?undefined:AL(AG,[BG,BN,BB,BH,BL,BC]);if(!BM){var BJ;if(!G){G=document.createElement("span");BJ=G.style;G.id="vis-measure-span";BJ.position="absolute";BJ.top="0";BJ.visibility="hidden";BJ.width="auto";BJ.height="auto";if(BE){BJ.whiteSpace="nowrap";}else{BJ.whiteSpace="normal";}document.body.appendChild(G);}BJ=G.style;if(BE){BJ.whiteSpace="nowrap";}else{BJ.whiteSpace="normal";}BJ.heigth="auto";BJ.width=BL;BJ.lineHeight=BK;BJ.fontFamily=this.surroundWithQuotes(BG);BJ.fontSize=BN;BJ.fontStyle=BB;BJ.fontWeight=BH;BJ.wordBreak=BA;G.textContent=BC;BM=G.clientHeight;if(!BF){I(AG,[BG,BN,BB,BH,BL,BC],BM);}}return BM+BI;},getVizErrors:function(){var BA=c.walk("rootCtrl.docCtrl.model",mstrApp)||{};var BB=c.walk("defn.root.vizErrors",BA)||[];return BB.length?BB.find(function(BC){return BC.specialType===2;}):undefined;},getNoDataMessage:function(){var BA=mstrmojo.VisUtility;var BB=BA.getVizErrors();return BB?i.encodeHtmlString(BB.rv,true):(mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data."));},getNoDataFormats:function(){var BC=mstrmojo.VisUtility;var BD=BC.getVizErrors();var BA=BD?BD.fmts:{};var BB="";if(BA.color){BB+="color:"+BA.color+";";}if(BA.font){BB+="font:"+BA.font+";";}if(BA["text-decoration"]){BB+="text-decoration:"+BA["text-decoration"]+";";}return mstrmojo.string.encodeHtmlString(BB,true);},supportNoDataA11y:function(BC){var BA=BC.replace(/<br\s*\/?>/gi," ");var BB=c.walk("parent.domNode",this);if(BB){var BD=BB.getAttribute("aria-roledescription")||"";if(BD&&BD.indexOf(BA)===-1){this.parent.domNode.setAttribute("aria-roledescription",BD+", "+BA||"");}}},getVisEmptyMsg:function(BC,BD){var BE="";var BA=mstrmojo.VisUtility;var BF=BA.getNoDataFormats();var BB=BA.getNoDataMessage();switch(BC){case"AE_ERROR":BE='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div style="padding-bottom:8px">'+(i.encodeHtmlString(BD||this.errorMsg,true)||"")+"</div><div></div></div></div></div></div>";break;case"NODATA_OTHERERROR":BE='<div class="error-msg"><div class="error-content"><div class="text" style="padding-top:0px;"><div style="'+BF+'">'+BB+"</div></div></div></div>";BA.supportNoDataA11y.call(this,BB);break;default:BE='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return BE;},getVisEmptyMsgControls:function B(BG){var BD=this.error,BM,BJ=this.errorType,BC,BF=mstrConfig&&mstrConfig.pluginsVisList,BL;var BE=mstrmojo.VisUtility;if(this.excludeData||BJ===A8.DATA_NOT_READY||BG===A8.DATA_NOT_READY){BM=BE.getVisStyle.call(this);var BI=BE.getAttMetricCount.call(this);return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:BM,visName:mstrConfig.pluginsVisList[BM]&&mstrConfig.pluginsVisList[BM].d,visDropzoneMsg:F.getVisDropzoneMsg(BI.attCount,BI.metricCount)}];}if(!this.hasError()){return ;}switch(BJ){case A8.NO_DATASET:case A8.NO_TEMPLATE_UNIT:if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(Ab.SUPPORT_GHOST_IMG)){BM=BE.getVisStyle.call(this);var BN="",BK="",BB="";if(BM===AM.HEAT_MAP){BN="heatmap";BK=mstrmojo.desc(11819,"Heat Map");BB=Aw.getVisDesc("heatmap");}else{if(BM===AM.NETWORK){BN="network";BK=mstrmojo.desc(11827,"Network");BB=Aw.getVisDesc("network");}else{if(BM===AM.KPICARD){BN="kpicard";BK=mstrmojo.desc(15800,"KPI");BB=Aw.getVisDesc("kpicard");}else{if(this.isCustomVis){BN=BM||"";BL=(BF&&BF[BM]&&BF[BM].d)||BM;BK=BL||mstrmojo.desc(14402,"CUSTOM VISUALIZATION");BB=this.errorDetails;}}}}BC=[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:BN,visName:BK,visDesc:BB}];}else{BC=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:BD}];}break;case A8.AE_ERROR:BC=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:BE.getVisEmptyMsg("AE_ERROR",BD),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:var BA=BE.getNoDataFormats();var BH=BE.getNoDataMessage();BC=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div style="'+BA+'" class="error-content">'+BH+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];BE.supportNoDataA11y.call(this,BH);break;}return BC;},applyStyles2DomNode:function(BF,BI){var BA,BG=BF.style;if(Object.prototype.hasOwnProperty.call(BI,"backgroundColor")&&BI.backgroundColor!==""&&BI.backgroundColor!=="transparent"){var BE=1;if(Object.prototype.hasOwnProperty.call(BI,"opacity")&&BI.opacity!==""){BE=BI.opacity;}var BB=BI.backgroundColor,BH=function BH(BJ){if(isNaN(BJ)){BJ=0;}BJ%=16777216;return{b:BJ%256,g:(BJ>>8)%256,r:(BJ>>16)%256};},BD="";if(BB){var BC=function BC(BK,BL){if(BK==="transparent"){return"rgba(0,0,0,0)";}BK=this.parseCSSColor(BK,false);var BJ=BH(BK);return"rgba("+BJ.r+" ,"+BJ.g+" ,"+BJ.b+" ,"+BL+" )";}.bind(this);if(BB.c1!==undefined&&BB.c2!==undefined&&BB.or!==undefined){BD=(Az.buildGradient(BB.or,BC(BB.c1,BE),BC(BB.c2,BE))).v;}else{BD=BC(BB,BE);}BG.background=BD;}}else{BG.backgroundColor="rgba(0,0,0,0)";}for(BA in BI){if(BA!=="backgroundColor"&&BA!=="opacity"&&Object.prototype.hasOwnProperty.call(BI,BA)&&BI[BA]&&BI[BA]!==""){BG[BA]=BI[BA];if(BA==="fontFamily"){BG[BA]="'"+BI[BA]+"'";}}}},parseCSSColor:function(BE,BB){var BA,BC;if(BE.length===7){if(BB===true){BA=BE[5]+BE[6]+BE[3]+BE[4]+BE[1]+BE[2];}else{BA=BE.slice(1);}}else{BA=[];var BD=BE.slice(1);if(BB===true){for(BC=2;BC>=0;BC--){BA.push(BD[BC]);BA.push(BD[BC]);}}else{for(BC=0;BC<3;BC++){BA.push(BD[BC]);BA.push(BD[BC]);}}BA=BA.join("");}return parseInt(BA,16);},positionDomNode:function(BC,BE){var BB,BH,BF,BD=["width","height","top","left","right","bottom"],BG=BD.length,BA=BC.style;for(BB=0;BB<BG;BB++){BH=BD[BB];BF=BE[BH];if(BF!==undefined){if((typeof BF)==="number"){BF+="px";}BA[BH]=BF;}}},getComputedFontStyle:function K(BC){var BA=mstrmojo.css.getComputedStyle(BC);var BD={};BD.fontFamily=BA.fontFamily;BD.fontSize=BA.fontSize;BD.fontStyle=BA.fontStyle;BD.fontWeight=BA.fontWeight;BD.fontVariant=BA.fontVariant;var BB=parseInt(BA.paddingLeft)||0,BE=parseInt(BA.paddingLeft)||0;BD.bonus=BB+BE;return BD;},splitWordIfTooLong:function(BK,BI,BD){var BG=[];var BH=BK.length;var BE;for(BE=0;BE<BH;BE++){var BB=BK[BE];while(true){var BL=this.measureTextWidth(BB,BD);if(BL>BI){var BJ=(BI/BL)*BB.length;var BA=Math.max(Math.round(BJ),1);while(BA>0){var BF=BB.substr(0,BA);var BC=Math.round(this.measureTextWidth(BF,BD));if(BC<=BI||BA===1){BG.push(BF);break;}else{BA--;}}BB=BB.substr(BA,BB.length-BA);}else{BG.push(BB);break;}}}return BG;},measureTotalTextSizeSplitting:function AO(BF,BE,BI,BH){BF=(BF!==undefined&&BF!==null)?BF.trim():BF;if(!BF||BF.length===0){return{width:0,height:0};}var BJ=BF.split(" "),BD=0,BG=BJ.length,BC,BA=[],BB=this.measureTextWidth(" ",BE,BI);for(BC=0;BC<BG;++BC){BA.push(this.measureTextWidth(BJ[BC],BE,BI));}BD=this.getTextWidthSplitting(BA,BB,BH);if(BH){return{width:BD,height:this.measureTextHeight("H",BE,BI)*(BG===1?1:2)};}return{width:BD,height:this.measureTextHeight("H",BE,BI)};},getTextWidthSplitting:function AX(BB,BC,BK){var BI=0,BJ=BB.length,BG,BF;if(BK){var BH,BE,BL=0,BA=Infinity,BD=Infinity;for(BG=1;BG<BJ;++BG){BH=0;BE=0;for(BF=0;BF<BG;++BF){if(BF!==0){BH+=BC;}BH+=BB[BF];}for(BF=BG;BF<BJ;++BF){BE+=BB[BF];if(BF!==BJ-1){BE+=BC;}}BD=Math.max(BH,BE);if(BD<BA){BA=BD;BL=BG;}if(BH>=BE){break;}}return BJ===1?BB[0]:BA;}for(BG=0;BG<BJ;++BG){BI+=BB[BG];}BI+=(BJ-1)*BC;return BI;},truncateTextToLineWithWordWrap:function AA(Ba,BT,BR,BG,BS,BK){var BO=Ba.split(" "),BU=BO.length;if(!BK){BO=this.splitWordIfTooLong(BO,BR,BT);}var Bh,BM=[],Bc=[],BA=0,BE=BO.length,Bj=this.measureTextWidth(" ",BT),BD=0,BJ=false,BQ=(BU===BO.length);Bc.push(0);for(Bh=0;Bh<BE;Bh++){var BY=this.measureTextWidth(BO[Bh],BT);if(!BK&&BY>BR){var BB=BO[Bh];var Bf=(BR/BY)*BB.length;BO[Bh]=BB.substr(0,parseInt(Bf,10));BY=BR;}BM.push(BY);BA+=BY;Bc.push(BA);if(Bh!==BE-1){BA+=Bj;}}var Be,Bg,BW=BG;for(Be=0,Bg=0;Bg<Bc.length;){var BI=Bc[Bg]-Bc[Be];if(Be>0&&Bg!==Be){BI-=Bj;}var BH=Bc[Bg+1]-Bc[Be];if(Be>0&&Bg+1!==Be){BH-=Bj;}if(BI<=BR&&((Bg+1===Bc.length)||(BH>BR))){BD=Math.max(BD,BI);BW--;if(BW===0||Bg===BE){break;}else{Be=Bg;Bg++;}}else{Bg++;}}if(Bg>BE){Bg=BE;}var BL=Bc[Bg]-Bc[Be];if(Be>0&&Bg!==Be){BL-=Bj;}var BZ;if(Bg>=BE&&BL<BR){BZ=BO.join(" ");}else{BJ=true;BD=BR;BZ=BO.slice(0,Bg).join(" ");var BN=this.measureTextWidth("...",BT);if(BL+BN<=BR){if(BL+Bj+BN>BR){BZ+="...";}else{var Bi=BO[Bg],BP;for(var BV=1;BV<Bi.length;BV++){BP=this.measureTextWidth(Bi.substr(0,BV),BT);if(BL+Bj+BP+BN>BR){break;}}BZ+=" "+Bi.substr(0,BV-1)+"...";}}else{if(BZ.charAt(BZ.length-1)===" "){BZ=BZ.substr(0,BZ.length-1);}var BX=BZ.lastIndexOf(" ");var BC=BZ.length-1-BX;if(BC===3){BZ=BZ.substr(0,BZ.length-3)+" ...";}else{var Bb=0,BF="",Bd=0;while(Bb<BN&&BZ.length>Bd){Bd++;BF=BZ.substr(BZ.length-Bd,BZ.length);Bb=this.measureTextWidth(BF,BT);}BZ=BZ.substr(0,BZ.length-Bd)+"...";}}}if(BS){return{text:BZ,truncated:BJ,maxLineLen:BD,canWordWrap:BQ};}return BZ;},measureSuperTextWidth:function AN(BB,BC,BA,BD){return BB?this.measureTextWidth("<sup>"+BC+"</sup>",BA,BD):this.measureTextWidth(BC,BA,BD);},splitTokenIfTooLong:function x(BL,BJ,BD){var BH=[];var BI=BL.length;var BE,BB,BM,BG,BN;for(BE=0;BE<BI;BE++){BB=BL[BE];BG=BB.isSuper;while(true){BM=BB.v;if(BB.textWidth!==undefined){BN=BB.textWidth;}else{BN=BB.textWidth=this.measureSuperTextWidth(BG,BM,BD);}if(BN>BJ){var BK=(BJ/BN)*BM.length;var BA=Math.max(Math.round(BK),1);while(BA>0){var BF=BM.substr(0,BA);var BC=Math.round(this.measureSuperTextWidth(BG,BF,BD));if(BC<=BJ||BA===1){BH.push({v:BF,isSuper:BG,textWidth:BC});break;}else{BA--;}}BB={v:BM.substr(BA,BM.length-BA),isSuper:BG};}else{BH.push(BB);break;}}}return BH;},truncateTextToLineWithWordWrapForTokens:function Aq(BK,BE,Bd,BV,Be,BQ){var BY=BK.length;BK=this.splitTokenIfTooLong(BK,Bd,BE);var Bc,BP=[],BA=0,BT=BK.length,BB=0,BU=false,BG=(BY===BK.length),BI,BN,BW,BC,Ba,BJ,BO;if(BQ&&!BG){return{canWordWrap:BG};}BP.push(0);for(Bc=0;Bc<BT;Bc++){BI=BK[Bc];BW=BI.v;BN=BI.isSuper;if(BI.textWidth!==undefined){BC=BI.textWidth;}else{BC=BI.textWidth=this.measureSuperTextWidth(BN,BW,BE);}if(BC>Bd){var Bb=(Bd/BC)*BW.length;BI.v=BW.substr(0,parseInt(Bb,10));BC=BI.textWidth=Bd;}BA+=BC;BP.push(BA);}var BM,BX,BL=BV;for(BM=0,BX=0;BX<BP.length;){var BH=BP[BX]-BP[BM];var BF=BP[BX+1]-BP[BM];if(BH<=Bd&&((BX+1===BP.length)||(BF>Bd))){BB=Math.max(BB,BH);BL--;if(BL===0||BX===BT){break;}else{BM=BX;BX++;}}else{BX++;}}if(BX>BT){BX=BT;}var BS=BP[BX]-BP[BM];var Bf;if(BX>=BT&&BS<Bd){Bf=BK;}else{BU=true;BB=Bd;Bf=BK.slice(0,BX);var BD=this.measureTextWidth("...",BE);if(BS+BD<=Bd){BJ=BK[BX];BW=BJ.v;BN=BJ.isSuper;for(Ba=1;Ba<BW.length;Ba++){BO=this.measureSuperTextWidth(BN,BW.substr(0,Ba),BE);if(BS+BD+BO>Bd){break;}}if(Ba>1){BI={v:BW.substr(0,Ba-1),isSuper:BN};BI.textWidth=this.measureSuperTextWidth(BN,BI.v,BE);Bf.push(BI);Bf.push({v:"...",textWidth:BD});}}else{var BR=0,BZ;for(Bc=Bf.length-1;Bc>=0;Bc--){BI=Bf[Bc];BW=BI.v;BN=BI.isSuper;BZ=0;for(Ba=BW.length-1;Ba>=0;Ba--){BZ=this.measureSuperTextWidth(BN,BW.substr(Ba),BE);if(BR+BZ>=BD){break;}}if(Ba>=0){break;}else{BR+=BZ;}}if(Bc>=0){if(Ba>0){BI.v=BW.substr(0,Ba);BI.textWidth=this.measureSuperTextWidth(BN,BI.v,BE);Bf=Bf.slice(0,Bc+1);}else{if(Ba===0){Bf=Bf.slice(0,Bc);}}Bf.push({v:"...",textWidth:BD});}else{Bf=[{v:"...",textWidth:BD}];}}}if(Be){return{text:Bf,truncated:BU,maxLineLen:BB,canWordWrap:BG};}return Bf;},getRankMode:function P(BG){var BI=1,BH=2,BF=3,BB=4,BD=5,BA=6,BE=7,BC=a.INVALID;if(BG){if(Aj(BG,BF,BH)){BC=a.TOP_PERCENT;}else{if(Aj(BG,BF,BI)){BC=a.BOTTOM_PERCENT;}else{if(Aj(BG,BA,BB)){BC=a.BOTTOM;}else{if(Aj(BG,BA,BD)){BC=a.TOP;}else{if(Aj(BG,BE)){BC=a.VALUE;}}}}}}return BC;},getColorByTitle:function g(BB,BA){if(BA===a.BOTTOM_PERCENT||BA===a.TOP_PERCENT){BB=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",BB);}else{if(BA===a.BOTTOM||BA===a.TOP){BB=mstrmojo.desc(2788,"Rank of ##").replace("'##'",BB);}}return BB;},getAbsoluteSizeByTitle:function AR(BA){return mstrmojo.desc(16781,"Absolute value of ##").replace("##",BA);},getColorByFormatStr:function w(BB,BA){if(BA===a.BOTTOM_PERCENT||BA===a.TOP_PERCENT){BB="0%;(0%)";}else{if(BA===a.BOTTOM||BA===a.TOP){BB="";}}return BB;},getColorByItems:function As(BA,BK,BR,BN,BI,BG,BO){var BM=[],BS,BC,BH=mstrmojo.num,BF,BJ;if(BA===undefined||BA.length===0){return BM;}var BU=true;if(BA.length>1){if(BA[0].ceil===BA[1].flr){BU=false;}else{BU=true;}}for(BS=0;BS<BA.length;BS++){var BT=BA[BS],BE={},BB=BT.ceil,BQ=BT.flr;if((BS===0&&BU)||(BS===BA.length-1&&!BU)){if(BK===a.BOTTOM_PERCENT||BK===a.TOP_PERCENT){BE.flr=BQ/100;BE.ceil=1;}else{if(BK===a.TOP||BK===a.BOTTOM){BQ+=1;BE.flr=Math.floor(BQ);BE.ceil=BI;}else{BE.flr=BQ;BE.ceil=BR;}}BJ=BE.ceil;}else{if((BS===0&&!BU)||(BS===BA.length-1&&BU)){if(BK===a.BOTTOM_PERCENT||BK===a.TOP_PERCENT){BE.flr=0;BE.ceil=BB/100;}else{if(BK===a.TOP||BK===a.BOTTOM){BE.flr=0;BE.ceil=Math.floor(BB);}else{BE.flr=BN;BE.ceil=BB;}}BF=BE.flr;}else{if(BK===a.BOTTOM_PERCENT||BK===a.TOP_PERCENT){BQ/=100;BB/=100;}else{if(BK===a.TOP||BK===a.BOTTOM){BQ+=1;BQ=Math.floor(BQ);BB=Math.floor(BB);}}BE.flr=BQ;BE.ceil=BB;}}if(BK===a.TOP||BK===a.BOTTOM){BE.ceil=BE.ceil>BI?BI:BE.ceil;}if(BG){BE.label=BH.formatByMask(BG,BE.flr);if(BE.flr!==BE.ceil){BE.label+=" - "+BH.formatByMask(BG,BE.ceil);}}else{BE.label=BE.flr;if(BE.flr!==BE.ceil){BE.label+=" - "+BE.ceil;}}if(BT.fmt&&BT.fmt.bc){BE.color=BT.fmt.bc;}else{BE.color=BO;}BM.push(BE);}BM=BM.filter(function(BV){return BV.flr<=BV.ceil&&!(BV.flr>BJ||BV.ceil<BF);});if(BK!==a.VALUE){if(BM[0]&&(BM[0].label===0)){BM.shift();}}if(BK===a.TOP||BK===a.BOTTOM){BC=BI;}else{if(BM.length>0){if(BU){BC=BM[0].ceil-BM[(BM.length-1)].flr;}else{BC=BM[(BM.length-1)].ceil-BM[0].flr;}}}var BP=0,BL,BD;for(BS=0;BS<BM.length;BS++){if(BS===BM.length-1){BM[BS].scopePercent=1-BP;}else{if(BK===a.TOP||BK===a.BOTTOM){BD=BM[BS].ceil-BM[BS].flr+1;}else{BD=BM[BS].ceil-BM[BS].flr;}BL=BD/BC;BM[BS].scopePercent=BL;BP+=BL;}}return BM;},getDefaultColorByItems:function(BD,BB,BC){var BA={};BA.label=BC+" - "+BB;BA.flr=BC;BA.ceil=BB;BA.color=BD;BA.scopePercent=1;return[BA];},getNumberFormat:function(BD,BB){var BE=BD.nf,BC=BD.gvs;function BA(){var BH=(BC&&BC.items&&BC.items[0]&&BC.items[0].items)||[],BG=BH[BB]||{},BF=BG.nfs;return typeof BF==="string"?BF:"";}if(BE&&BE[BB]&&typeof BE[BB].nfs!=="string"){BE[BB].nfs=BA();}return BE&&BE[BB]&&BE[BB].nfs;},hasOnlyMetricsOnColumn:function(BB){var BA=(BB&&BB.gts&&BB.gts.col)||[];return BA.every(function(BC){return BC.otp===AF.DssTypeUnknown&&(BC.es||[]).every(function(BD){return BD.otp===AF.DssTypeMetric;});});},hasNoMetricOnRow:function(BB){var BC=(BB&&BB.gts&&BB.gts.row)||[],BA=function(BD){return BD.otp!==AF.DssTypeMetric;};return BC.every(BA);},getAttMetricCount:function(){var BD=(this.getEditingGridData&&this.getEditingGridData())||(this.model&&this.model.data),BG=BD&&BD.gsi,BF=(BG&&mstrmojo.models.template.DataInterface.getGSI(BG).rows)||[],BC=[],BB=[],BA=0,BE=0;mstrmojo.models.template.DataInterface.forEachGSI(BG,function(BH){BE+=BH.mx.length||0;BC=BC.concat(BH.cols||[]);});BB=BB.concat(BF).concat(BC);A3.forEach(BB,function(BH){if(BH.t!==AF.DssTypeMetric){BA++;}});return{attCount:BA,metricCount:BE};},isOnExpressMode:function(){return mstrApp.isExpress;},isConsolidation:function(BA){return BA.t===47&&BA.st===12033;},getItemValue:function(BD,BF,BC){var BA=l.getIdPresentation(BD),BB=this.isConsolidation(BC);BD=BD.replace(/\*:/g,"\\:");switch(BF){case"old":case"oldLong":switch(BA){case"old":case"oldLong":return BD;case"terse":case"terseLong":switch(BD[0]){case"V":return BD.substring(1).split(";")[0];case"n":return"HF:"+ +l.terseLong2OldShort(BD)+":47";default:return l.terseLong2OldShort(BD);}}break;case"terse":case"terseLong":switch(BA){case"old":return BB?("V"+BD+";"+BC.did):l.oldShort2terseLong(BD,"h");case"oldLong":switch(BD.substring(0,2)){case"HF":var BE=BD.substr(3).split(":");if(BE.length>3){BE.pop();}return l.oldShort2terseLong(BE.join(":"),"n");default:return BD;}case"terse":case"terseLong":return BD;}break;default:return BD;}},getNormalizedFormElementId:function(BC,BE,BB){var BA=l.getIdPresentation(BE),BD=BB&&this.isConsolidation(BB);if(BD&&(BA==="old"||BA==="oldLong"||BA==="terseLong")){return this.getItemValue(BE,"terseLong",BB);}return BC.getNormalizedFormElementId(BE);},modifyScExp:function(BG,BA,BM,BF){if(!BG||!BA){return ;}var BB,BJ,BL,BK,BE,BD,BC,BI=this,BH=function BH(BN){if(BN.nds){A3.forEach(A3.ensureArray(BN.nds),function(BO){BH(BO);});}else{BB=BN.es;A3.forEach(A3.ensureArray(BB),function(BO){BL=BO.v;BE=BF[BL];if(!BE){BE=BI.getNormalizedFormElementId(BM,BL,BN.a);BF[BL]=BE;}A3.forEach(A3.ensureArray(BA),function(BP){BJ=BP.es;A3.forEach(BJ||[],function(BQ){BC=false;BK=BQ.id;if(BK===BL){BC=true;}else{BD=BF[BK];if(!BD){BD=BI.getNormalizedFormElementId(BM,BK,BN.a);BF[BK]=BD;}if(BE===BD){BC=true;}}if(BC){BO.v=BQ.id;BO.n=BQ.n;return false;}});if(BC){return false;}});});}};BH(BG);},modifyScExpDeprecated:function(BG,BH,BE,BC){if(!BG||!BH){return ;}var BD=BG.nds,BB,BA,BF;A3.forEach(BD||[],function(BI){BB=BI.nds;A3.forEach(BB||[],function(BJ){BA=BJ.es;A3.forEach(BA||[],function(BK){A3.forEach(BH||[],function(BL){A3.forEach(BL||[],function(BM){BF=BM.es;A3.forEach(BF||[],function(BN){if(BE.call(BC,BN.id,BK.v)){BK.v=BN.id;BK.n=BN.n;}});});});});});});},getMouseOffset:function(BB){var BA=(BB.offsetX!==undefined)?BB.offsetX:(BB.layerX),BC=(BB.offsetY!==undefined)?BB.offsetY:(BB.layerY);return{x:BA,y:BC};},translateLineStyle:function(BA){var BC=["none","solid","solid","dashed","dotted"],BB=["1px","1px","2px","1px","1px"];return{width:BB[BA]||"0px",style:BC[BA]||"none"};},getVisStyle:function(){var BA=mstrmojo.VisUtility;return BA.getPropertyByPath(this,"model.data.visName")||BA.getPropertyByPath(this,"model.data.vis.vn");},getGroupAndCalculationContextMenuForDataPoints:function(BM,Bb){var BO,BQ=[],BC=[],BY=[],BH=Bb.fnCellName,BS=Bb.fnUnique,BG=Bb.fnMakeNode,BW=BM.getCellForNode.bind(BM),Bd=Bb.selection,BV=Bb.hideGroupMenu,BL=Bb.hideCalculationMenu;var BF=new q.ui.menus.MenuConfig(),BB=new q.ui.menus.MenuConfig(),BU=new q.ui.menus.MenuConfig(),Ba=new q.ui.menus.MenuConfig();function Bc(Be){BM.cmSelCells=BQ[Be].cmSelCells;BM.derivedElementGroup(BW(BM.cmSelCells[0]));}function BI(Be){BM.cmSelCells=BC[Be].cmSelCells;BM.derivedElementsEdit(BW(BM.cmSelCells[0]));}function BR(Be){BM.cmSelCells=BC[Be].cmSelCells;BM.removeQuickDE(BW(BM.cmSelCells[0]));}function BP(Be){BM.cmSelCells=BC[Be].cmSelCells;BM.renameDEList(BW(BM.cmSelCells[0]));}function BT(Be){b(BM,BW(BM.cmSelCells[0]),Be,false);}function BA(Be){b(BM,BW(BM.cmSelCells[0]),Be,true);}function BE(Bf){var Be=BW(BC[Bf].cmSelCells[0]);BM.removeQuickDE(Be);}function BZ(Bf){var Be=BW(BC[Bf].cmSelCells[0]);BM.editDECalculation(Be);}function BJ(Bf,Be){return function(){var Bg=new q.ui.menus.MenuConfig();Bg.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);Bg.addRadioMenuGroup(null,Bf,Be,"checkMark",undefined,true);return Bg;};}function BN(Be){Be=Be||[];function Bf(Bj){var Bg=Bj.extra||{},Bk=Bj.setup||mstrmojo.emptyFn,Bh=Bj.action||mstrmojo.emptyFn,Bi=[];Bk(Bi,Bg);Bh(Bi,Bg);}Be.forEach(Bf);}var BD=[{name:"group",setup:function(Be){BQ.forEach(function(Bf){BM.cmSelCells=BQ[Bf.v].cmSelCells;if(!Object.prototype.hasOwnProperty.call(BC,Bf.v)&&d(BM)){Be.push(Bf);}});},action:function(Bf){var Be;if(Bf.length===1){Be=Bf[0].v;BF.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){BM.cmSelCells=BQ[Be].cmSelCells;BM.derivedElementGroup(BW(BM.cmSelCells[0]));});}if(Bf.length>1){BF.addPopupMenuItem(mstrmojo.desc(1911,"Group"),BM.id,BJ(Bc,Bf),"xt");}}},{name:"edit-group",setup:function(Be){BC.forEach(function(Bg){var Bf=A5(BM,BC[Bg.v].cmSelCells[0]);if(Bf&&Bf.t===Y.LIST){Be.push(Bg);}});},action:function(Bf){if(Bf.length===1){var Be=BC[Bf[0].v].cmSelCells,Bg=BW(Be[0]);BB.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){BM.cmSelCells=Be;BM.derivedElementsEdit(Bg);});BB.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){BM.cmSelCells=Be;BM.removeQuickDE(Bg);});Ba.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){BM.cmSelCells=Be;BM.renameDEList(Bg);});}if(Bf.length>1){BB.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),BM.id,BJ(BI,Bf),"xt");BB.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),BM.id,BJ(BR,Bf),"xt");Ba.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),BM.id,BJ(BP,Bf),"xt");}}},{name:"calculation",setup:function(Be){BY.forEach(function(Bh,Bg,Bf){BM.cmSelCells=Bf[Bh.v].cmSelCells;var Bi=A5(BM,BM.cmSelCells[0]);if(!(Bi&&Bi.t===Y.RESIDUE)&&AB(BM)){Be.push(Bh);}});},action:function(Be){if(Be.length===1){BF.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),BM.id,function(){var Bf=Be[0].v,Bg=new q.ui.menus.MenuConfig();BM.cmSelCells=BY[Bf].cmSelCells;Bg.addRadioMenuGroup(null,BT,AC(BM,null,BH).items,"checkMark",undefined,true);return Bg;},"xt");}if(Be.length>1){BF.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),BM.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Be,selectedIndex:0,onitemSelected:function(Bf){var Bg=Bf.v;BM.cmSelCells=BY[Bg].cmSelCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",AC(BM,null,BH).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:function(){return this.valid;},valid:function(){return this.data.valid;}},fnOk:function(Bg,Bf){b(BM,BW(BM.cmSelCells[0]),Bf.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Be){BC.forEach(function(Bg){var Bf=A5(BM,BC[Bg.v].cmSelCells[0]);if(Bf&&Bf.t===Y.CALCULATION&&AB(BM)){Be.push(Bg);}});},action:function(Be){function Bf(){var Bg=Be[0].v;BM.cmSelCells=BC[Bg].cmSelCells;var Bj=A5(BM,BM.cmSelCells[0]),Bi=AC(BM,Bj,BH),Bh=new q.ui.menus.MenuConfig();Bh.addRadioMenuGroup(Bi.selectedItem.value,BA,Bi.items,"checkMark",undefined,true);return Bh;}if(Be.length===1){BU.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),BM.id,Bf,"xt");BU.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Bg=Be[0].v;BM.cmSelCells=BC[Bg].cmSelCells;var Bh=BW(BM.cmSelCells[0]);BM.removeQuickDE(Bh);});Ba.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Bg=Be[0].v;BM.cmSelCells=BC[Bg].cmSelCells;var Bh=BW(BM.cmSelCells[0]);BM.editDECalculation(Bh);});}if(Be.length>1){BU.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),BM.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Be,selectedIndex:0,onitemSelected:function(Bh){var Bi=Bh.v;BM.cmSelCells=BC[Bi].cmSelCells;var Bj=A5(BM,BM.cmSelCells[0]);var Bg=AC(BM,Bj,BH);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Bg.items);this.parent.checkList.set("selectedItem",Bg.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:function(){return this.valid;},valid:function(){return this.data.valid;}},fnOk:function(Bh,Bg){b(BM,BW(BM.cmSelCells[0]),Bg.checkList.selectedItem.v,true);}});});BU.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),BM.id,BJ(BE,Be),"xt");Ba.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),BM.id,BJ(BZ,Be),"xt");}}}];BO=BS(Bd);BO.forEach(function(Bf){var Bh=BG(Bf),Be=BW(Bh),Bg,Bi,Bj;if(!BM.model.supportsViewFilterActions(Be.tid)){return ;}Bg=Be.dei===undefined?BQ:BC;Bi=Be.tid;Bj=BM.model.getObjectInfo(Bi).n;if(Bg[Bi]===undefined){Bg[Bi]={};Bg[Bi].cmSelCells=[];Bg.push({n:Bj,v:Bi,text:Bj,value:Bi});}Bg[Bi].cmSelCells.push(Bh);if(BY[Bi]===undefined){BY[Bi]={};BY[Bi].cmSelCells=[];BY.push({n:Bj,v:Bi,text:Bj,value:Bi});}BY[Bi].cmSelCells.push(Bh);});var BK=mstrmojo.VisUtility;var BX=BK.getVisStyle.call(BM);if(BX===AM.HEAT_MAP){BD.splice(2,2);}if(BV){BD.splice(0,2);}if(BL){BD.splice(2,2);}BN(BD);return{createDe:BF,editGroup:BB,editCalculation:BU,renameDe:Ba};},getGroupAndCalculationContextMenu:function(BJ,BY,BV){var BX=BJ,BQ=BV.skipSingleAttrCheck||BX.isSingleAttrSelection(),BD=false,BF=BX.isSingleContextMenuSelection(),BK=BX.getDEInfo(BY),BE=BK&&BK.deObject,BU=BK&&BK.de,BO=BE&&BX.getOthersDEInfo(BE),BM=BX.getContextMenuSelections(),BT=true,BH=BV.fnCellName,BW=this.getPropertyByPath(BX,"model.data.visName")||this.getPropertyByPath(BX,"model.data.vis.vn"),BR=BV.hideGroupMenu,BI=BV.hideCalculationMenu;var BG=new q.ui.menus.MenuConfig(),BB=new q.ui.menus.MenuConfig(),BN=new q.ui.menus.MenuConfig(),BS=new q.ui.menus.MenuConfig();BX.cmSelCells=BV.selection;if(BJ.model.supportsViewFilterActions(BY.tid)){if(!BR){if((BD||BQ)&&Ag(BY,AK)&&d(BX)){BG.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){BJ.derivedElementGroup(BY);});}if(BF&&BU&&BU.t===Y.LIST){BB.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){BJ.derivedElementsEdit(BY,BK);});BB.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){BJ.removeQuickDE(BY);});BS.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){BJ.renameDEList(BY);});}}if(!BI){var BL=function(BZ){b(BX,BY,BZ,false);},BP=function(BZ){b(BX,BY,BZ,true);};if(BO&&!BF&&BQ){X.forEach(BM,function(BZ){if(BZ[0]&&BZ[0].eid.indexOf(BO.id)>-1){BT=false;return false;}});}if(BW!=="VIHeatMapVisualizationStyle"&&!(BF&&BU&&BU.t===Y.RESIDUE)&&(BD||BQ)&&Ag(BY,AU)&&AB(BX)){var BA=function(){var BZ=new q.ui.menus.MenuConfig(),Ba=AC(BX,null,BH);BZ.addRadioMenuGroup(null,BL,Ba.items,"checkMark",undefined,true);return BZ;};BG.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,BA,"xt");}if(BF&&BU&&BU.t===Y.CALCULATION&&AB(BX)){var BC=function(){var BZ=new q.ui.menus.MenuConfig(),Ba=AC(BX,BU,BH);BZ.addRadioMenuGroup(Ba.selectedItem.value,BP,Ba.items,"checkMark",undefined,true);return BZ;};BN.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,BC,"xt");BN.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){BJ.removeQuickDE(BY);});BS.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){BJ.editDECalculation(BY);});}}}return{createDe:BG,editGroup:BB,editCalculation:BN,renameDe:BS};},isHostedPopupNode:function(BD,BC,BB,BA){return(AY(BD,BC,"mstrmojo-popup-widget-hosted",BB,BA)||AY(BD,BC,"mstr-rc-font-selector__dropdown",BB,BA)||AY(BD,BC,"mstr-rc-font-selector__innerdropdown",BB,BA));},isMojoEditorNode:function(BD,BC,BB,BA){return AY(BD,BC,"mstrmojo-Editor",BB,BA);},applyStyle2Legend:function(BD,BC,BB){var BA,BF={},BE={};for(BA in BD){if(BA.indexOf("font")>=0||BA.indexOf("color")>=0||BA.indexOf("textDecoration")>=0){BF[BA]=BD[BA];}else{BE[BA]=BD[BA];}}if(BC){BC.style.background="";this.applyStyles2DomNode(BC,BE);}if(BB){this.applyStyles2DomNode(BB,BF);}},mergeMenuConfigs:function AW(BB,BA){function BC(BE,BF,BD){if(!BF){return ;}if(!BD&&BE.hasMenuItems()&&BF.hasMenuItems()){BE.addSeparator();}if(BF.hasMenuItems()){BE.absorbMenuItems(BF);if(typeof BF.destroy==="function"){BF.destroy();}}}return BA.reduce(function(BD,BE){BC(BD,BB[BE.name],BE.noSeparator);return BD;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(BB,BA,BC){BB.addDisposable(BA);BB.absorbMenuItems(BA);if(BC&&BA.menus.length>0){BB.addSeparator();}},addWheelListener:(function(){var BD=mstrmojo.dom,BC=BD.attachEvent,BB=BD.preventDefault,BE;function BA(BI,BH,BJ,BG){var BF=(BE==="wheel")?BJ:function(BK){if(!BK){BK=window.event;}var BM={originalEvent:BK,target:BK.target||BK.srcElement,type:"wheel",deltaMode:(BK.deltaMode!==undefined?BK.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){BB(window,BK);}},BL=this;if(BE==="mousewheel"){BM.deltaY=-BK.wheelDelta;if(BK.wheelDeltaX!==undefined){BM.deltaX=-BK.wheelDeltaX;}}else{BM.deltaY=BK.detail;}return BJ.call(BL,BM);};return BC(BI,BH,BF,BG);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){BE="wheel";}else{BE=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(BG,BH,BF){return BA(BG,BE,BH,BF);};}()),isNearZero:function(BB,BA){BA=BA||5;var BC=1/Math.pow(10,BA);return(Math.abs(BB)<BC);},hasMergedRowCells:function(BA){return false;},getMockUpThresholds:function(BC,BD){var BA=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];X.forEach(BA,function(BF){var BE=BF.expr.nds[0].m;BE.did=BC;BE.n=BD;});var BB={};BB[BC]=BA;return BB;},generateThresholdsInfo:function(BC,BH,BA,BE){var BG=BA.length,BB=[],BK,BD,BL=0,BJ=0;for(var BF=0;BF<BG;BF++){BD=Math.round(BE[BF]*100);BJ=BL;BL=BD||100;BK={tid:BF+1,n:"threshold "+BF,scope:1,rtp:2,rtxt:"",fmt:{bc:BA[BF],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:BC,n:BH},cs:[{v:BD+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:BL,flr:BJ};BB.push(BK);}var BI={};BI[BC]=BB;return BI;},psPt2CssPt:function(BC,BB){var BA=parseInt(BC,10)*0.75;if(BB instanceof Function){BA=BB(BA);}return BA+"pt";},captureEventOnce:function(BF,BE,BA,BD,BC){function BB(BG){BE.call(BA,Au.newDomEvent(BF,window,BG||window.event),BC);AT.detachEvent(BD,BF,BB);}BC=BC||{};BD=BD||document;AT.attachEvent(BD,BF,BB);},getPropertyByPath:function(BE,BD,BA){var BB,BC;if(typeof BD!=="string"){return BA;}BB=BD.split(".");BC=BB.every(function(BG){var BF=BE[BG];if(BF!==undefined){BE=BF;return true;}return false;});return BC?BE:BA;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(BA,BB){if(BB){Object.keys(BB).forEach(function(BC){BA[BC]=BB[BC];});}return BA;},{});},toggleControlEnabled:function(BA,BB){[].concat(BA).forEach(function(BC){BC.set("enabled",!!BB);});},findInArray:function(BD,BC,BB){var BF=-1,BE,BA;if(!Array.isArray(BD)){return BF;}for(BE=BB===undefined?0:BB,BA=BD.length;BE<BA;BE+=1){if(BC(BD[BE])){return BE;}}return BF;},arrayUnique:function(BA,BC){if(!Array.isArray(BA)){return BA;}var BB=mstrmojo.VisUtility;return BA.filter(function(BD,BE){return BB.findInArray(BA,function(BF){return BC(BD,BF);},BE+1)===-1;});},range:function(BA,BE,BD){BD=BD||1;var BC,BB=[];for(BC=BA;BC!==BE;BC+=BD){BB.push(BC);}return BB;},containsImg:function(BC,BB){var BA=X.ensureArray(BC);return X.includes(BA,Ay.DssBaseFormPicture)||(X.includes(BA,Ay.DssBaseFormHTMLTag)&&(BB||"").toLowerCase().match(s));},showImageTag:function(BB,BA){return !this.shouldEncodeHtmlContent()&&this.containsImg(BB,BA);},drawDashLine:function J(BI,BC,BG,BB,BE,BA,BH){var BF=(BC===BB),BD;BI.beginPath();BI.moveTo(BC,BG);if(BF){BD=0;BG+=BA;while(BG<=BE){if(BD%2===0){BI.lineTo(BC,BG);BG+=BH;}else{BI.moveTo(BC,BG);BG+=BA;}BD++;}if(BD%2===0){BI.lineTo(BB,BE);}}else{BD=0;BC+=BA;while(BC<=BB){if(BD%2===0){BI.lineTo(BC,BG);BC+=BH;}else{BI.moveTo(BC,BG);BC+=BA;}BD++;}if(BD%2===0){BI.lineTo(BB,BE);}}BI.stroke();},repeat:function(BC,BD){var BA=[],BB;BD=Math.max(0,BD);for(BB=0;BB<BD;BB+=1){BA[BB]=BC;}return BA;},isHierarchyObject:function(BA){return(BA&&BA.t)===AF.DssTypeDimension;},selectDropZonePanel:function(BA){AQ(BA,"editPanel");},selectPropertyPanel:function(BB,BC){AQ(BB,"propertiesPanel");var BA=BB.edtModel;if(BA){BA.selectTargetByValue(BC);}},pluck:function(BB,BA){if(!X.isArray(BB)){return BB;}return BB.map(function(BC){return BC&&BC[BA];});},pick:function(BB,BA){return BA.reduce(function(BD,BC){BD[BC]=BB[BC];return BD;},{});},isColorManuallySet:function(BC,BB){var BA=A7(BC,BB);if(BA){return BA.isManual;}},getCombColor:function(BC,BB){var BA=A7(BC,BB);if(BA){return BA.color;}},setColorPickerShowAutomatic:function(BB,BA){BB.children[0].fillColor.colorPicker.showAutomatic=BA;},setColorPickerShowGradient:function(BC,BB){var BA=c.walk("fillColorAndTrans.fillColor.colorPicker",BC);if(BA){BA.showGradient=BB;}},getCharGroupValueChangeCb:function(BA){var BB=(function(){var BC={};BC[Ah.FONT_WEIGHT]=Ao.FS_BOLD;BC[Ah.FONT_STYLE]=Ao.FS_ITALIC;BC[Ah.UNDERLINE]=Ao.FS_UNDERLINE;BC[Ah.LINE_THROUGH]=Ao.FS_STRIKETHROUGH;return function(BD,BE){return BD^BC[BE];};}());return function(BD,BC){if(BA instanceof Function){BA=BA();}if(!BA){return ;}switch(BD){case Ah.COLOR:BA.fontColor.fill.value.setValue(BC);break;case Ah.FONT_SIZE:BA.fontSize.setValue(BC);break;case Ah.FONT_FAMILY:BA.fontFamily.setValue(BC);break;case Ah.FONT_WEIGHT:case Ah.FONT_STYLE:case Ah.UNDERLINE:case Ah.LINE_THROUGH:BA.fontStyle.setValue(BB(BA.fontStyle.getValue(),BD));break;}};},getMetricsInDropZone:Ac,addLegendFontChangeListeners:function(BB,BC){var BA=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];Av(BA,BB,BC);},addLegendBackgroundChangeListeners:function(BB,BC){var BA=["lgdBgFillClr","lgdBgFillTrans"];Av(BA,BB,BC);},isValidDropZone:function(BA){if(BA===undefined){return false;}var BC=Object.keys(BA).filter(function(BD){return BD!=="visProp";});var BB=c.copyProps(BC,BA);return BA&&!c.equals(BB,{});},unitExistInTemplate:function(BD,BA){var BC,BF,BE=BA.row,BB=BA.col;for(BC=0,BF=BE.length;BC<BF;BC++){if(BE[BC].id===BD){return true;}}for(BC=0,BF=BB.length;BC<BF;BC++){if(BB[BC].id===BD){return true;}}return false;},findDisabledUnits:function(BJ,BK){var BF,BB,BD=BK.docModel.datasets,BA=BJ.gts,BH=BJ.datasetId,BE=BD[BH]||{},BG=BE.att||[],BI=[];var BC=mstrmojo.VisUtility;if(BG){for(BF=0,BB=BG.length;BF<BB;BF++){if(!BC.unitExistInTemplate(BG[BF].did,BA)){BI.push(BG[BF]);}}}return BI;},getDrillCandidates:function(BF,BG){var BI=BF.modelData,BK=BF.model,BE=BK.docModel.datasets,BA=BI.gts,BC=mstrmojo.VisUtility,BL=BC.findDisabledUnits(BI,BK),BB=[],BD=(function(){var BM;if(BG){X.forEach(BA.row.concat(BA.col),function(BN){if(BN.id&&BN.id===BG){BM=BN.dp;}});}return BM;}()),BH=function(BM,BP){var BN=X.find(BM,"did",BP.id),BO=BM[BN];if(BO&&!BO.hide){BP.n=BO.n;return true;}return false;},BJ=X.filter(BD,function(BO){var BM;for(BM in BE){var BN=BE[BM];if(BH(BN.att,BO)){return true;}}return false;});if(BJ){BB=X.filter(BL,function(BN){for(var BM in BJ){if(BJ[BM].n===BN.n){return true;}}return false;});}return BB;},getDrillSubMenu:function(BA){if(!BA||!BA.items||!BA.drillAction){return{};}var BE=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),BB=BA.items,BD=BA.drillAction,BC=[];if(mstrmojo.resolveFeature("sort-drill-paths")){BB.sort(function(BG,BF){if(BG.n>BF.n){return 1;}if(BG.n<BF.n){return -1;}return 0;});}BB.forEach(function(BH,BF){if(BC.indexOf(BH.did)===-1){BC.push(BH.did);if(BH.att){var BG=mstrmojo.VisUtility;var BI={};c.copy(BA,BI);BI.items=BB[BF].att;BE.addPopupMenuItem(BH.n,this.id,BG.getDrillSubMenu,"xt",BI);}else{BE.addMenuItem(BH.n,"xt",BD,c.copy(BA,{drillUnit:BH}));}}});return BE;},getDrillMenu:function(BG,BH,BM,BA){var BI=BG.model,BD=mstrmojo.VisUtility,BJ=BD.getDrillCandidates(BG,BH),BK=BJ.length,BF=BI.docModel,BC=BF.datasets[BG.modelData.datasetId],BQ,BL=[],BO=-1,BN,BP,BE,BB;if(BC&&BF.isMDXDataset(BC)&&!BF.isRADataset(BC)){BD.sortMdxDrillCandidates(BJ);BQ=BC.tables[0];BQ.dimensions.forEach(function(BR){BE=true;BN=-1;BR.hierarchies.forEach(function(BS){BB=true;BS.att.forEach(function(BT){BP=A3.findBin(BJ,BT,"did",BK);if(BP!==-1){if(BE){BL.push({id:BR.did,did:BR.did,n:BR.n,att:[]});BO++;BE=false;}if(BB){BL[BO].att.push({id:BS.did,did:BS.did,n:BS.n,att:[]});BN++;BB=false;}BL[BO].att[BN].att.push(BJ[BP]);}});});});}else{BL=BJ;}return BD.getDrillSubMenu(c.copy(BA,{items:BL,drillAction:BM}));},sortMdxDrillCandidates:function(BA){BA.sort(function(BC,BB){if(BC.did<BB.did){return -1;}if(BC.did>BB.did){return 1;}return 0;});return BA;},getDrillMenuItemsCallback:function(BC,BD,BA,BB){return function(){var BF=mstrmojo.VisUtility;var BG=BF.getDrillCandidates(BC,BB),BE=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});BG.forEach(function(BH){BE.addMenuItem(BH.n,"xt",BD,c.copy(BA,{drillUnit:BH}));});return BE;};},doDrill:function(BC,BQ,BL,BR){var BS=BC;function BI(BU){return BU.model.controller.cmdMgr;}function BO(){return{success:function BU(){var BV=mstrmojo.VisUtility;BV.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var BB=BS.model,BP=(BS.getDocModel&&BS.getDocModel())||BS.model.docModel,BN=BP.getDataService(),BF=BN.newUpdate();var BH=true;if(BP.prefs&&BP.prefs.rtprnt){BH=parseInt(BP.prefs.rtprnt,10)===1;}else{if(BB.xtab.defn.tkp!==undefined){BH=parseInt(BB.xtab.defn.tkp,10)===-1;}}BR=BR||{};BR.keepParent=BH;var BG=BL.call(BC,BQ,BR);var BJ=BS.zonesModel,BT=BJ.getUpdateCallback(),BK=BS.model.controller||BP.controller,BD=BK._getXtabCallback(BS);BF.add(BG,A1(BT,BD));var BA=BB.getSelectorDataFromTemplateLimit(BS.model.data.tpl).concat({keepOnly:true,data:BS.getContextMenuSelections()}),BM=BP.getKeepOnlyOrExcludeAction(BS.k,BA);BF.add(BM,BO.call(BS));BI(BS).execute({execute:function BE(){this.submitUpdate(BF);},urInfo:{callback:BF.callback}});},strStartsWith:function(BC,BB,BA){BA=BA||0;return BC.lastIndexOf(BB,BA)===BA;},changeWidgetBackground:function(BC,BD,BB){var BA=BC.parent;if(BA&&BD!==BB){BA.changeUnitFormats(false,1,BC.getFormats(),Ah.BACKGROUND_COLOR,BD,BB);BA.raiseEvent({name:"BEMFormatChange",propertyName:Ah.BACKGROUND_COLOR,value:BD,isTitle:false});}},translateGridError:function(BB,BA){if(BA===undefined){BA=A8.AE_ERROR;}if(BA===A8.EMPTY_DATA){BB=mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data.");}if(BA===A8.NO_DATASET||BA===A8.NO_TEMPLATE_UNIT){BB=mstrmojo.desc(11668,"Drag objects here.");}if(!BB){BB=mstrmojo.desc(13687,"Unknown error");}return{msg:BB,type:BA};},hasValidValueInMetric:function(BD,BB){var BA=mstrmojo.VisUtility;var BC=BA.getPropertyByPath(BD,"model.data.gsi.mx");if(BC===undefined||BC.length<=BB||BB<0){return false;}var BE=BC[BB];return["min","max"].every(function(BF){var BG=BE[BF];return BG!==undefined&&BG!==null&&BG!=="";});},renderWidgetErrorRSD:function(BD,BF,BB){var BH=document.createElement("div");var BG='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+i.encodeHtmlString(BF,true)+"</div></div>";BH.innerHTML=BG;BH=BH.firstChild;var BA=BD.width,BC=BD.height;if(BA!==undefined){BH.style.width=BA+"px";}if(BC!==undefined){BH.style.height=BC+"px";}var BE=BD.domNode;if(BE){BB.forEach(function(BI){BE["on"+BI]=undefined;});while(BE.firstChild){BE.removeChild(BE.firstChild);}BE.appendChild(BH);}else{BD.parent.domNode.appendChild(BH);}},visPrint:function(){var BA=mstrmojo.VisUtility.enableInVis;if(BA&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(BD,BA){var BC=BA&&BA.did,BB=BD.model.data.datasetId||"",BE=null;if(BC){BE=Am.getDatasetFromAttributeId(BD.model.docModel.datasets,BC);}else{if(BB){BE=Am.getDatasetFromId(BD.model.docModel.datasets,BB);}}return BE&&Am.hasCGorCon(BE);},isCGorCon:function AD(BD,BA){var BC=BA&&BA.did,BB=BD.model.data.datasetId||"",BE=null;if(BC){BE=Am.getDatasetFromAttributeId(BD.model.docModel.datasets,BC);}else{if(BB){BE=Am.getDatasetFromId(BD.model.docModel.datasets,BB);}}return BE&&Am.isCGorCon(BA,BE);},findElementsByAttribute:function W(BC,BE,BD,BA){BA=!!BA;var BF=[];if(BD.constructor!==Array){BD=[BD];}var BG=function(BH){if(BA){return BH.identity&&BH.identity.tlOpt&&BH.identity.tlOpt[BE];}return BH.getAttribute(BE);};function BB(BJ){var BH=BG(BJ),BI;if(BJ.hasChildNodes()){BI=BJ.firstChild;while(BI){if(BI.nodeType===1){BH=BG(BI);if(BD.indexOf(BH)!==-1){BF.push(BI);}else{BB(BI);}}BI=BI.nextSibling;}}}BB(BC);return BF;},getTextFromHTMLTag:function(BA){var BB=D.sanitizeHTMLByDOMPurify(BA);if(BB instanceof DocumentFragment){return BB.textContent;}return"";},parseHtmlTag:function(BA){if(window.DOMPurify){var BC=D.sanitizeHTMLByDOMPurify(BA),BB=BC&&BC.firstChild;if(BB instanceof HTMLElement){return BB;}return BA;}var BD=document.createElement("div"),BB;BD.innerHTML=BA;BB=BD.firstChild;if(BB instanceof HTMLElement){return BB;}return BA;},shouldEncodeHtmlContent:function(){return D.shouldEncodeHtmlContent();},shouldShowHTMLTag:function(BA){return D.shouldShowHTML({formTypes:BA});},showHTMLAnchor:function(BB,BC){if(this.shouldShowHTMLTag(BB)){var BA=this.parseHtmlTag(BC);if(BA instanceof HTMLAnchorElement){return{show:true,anchor:BA};}}return{show:false};},getHTMLTag:function(BB,BC){if(this.shouldShowHTMLTag(BB)){var BA=this.parseHtmlTag(BC);if(BA instanceof HTMLElement){return BA;}}return BC;},getHTMLInnerText:function(BB,BC){var BA=this.getHTMLTag(BB,BC);if(BA instanceof HTMLElement){return BA.textContent;}return BC;},sanitizeHTMLContent:function(BB,BD){var BC=this.shouldShowHTMLTag(BB),BA=BD;if(BC){BA=D.sanitizeHTMLByDOMPurify(BD,true);}return{showHTMLTag:BC,content:BA};},hasHTMLElementInside:function AV(BC,BA){var BB=new DOMParser().parseFromString(BC,"text/html");return BB.querySelector(BA)!==null;},adjustInsideImageElementSize:function Ax(BC,BB,BA){var BD=BC.querySelectorAll("img[src]");(BD||[]).forEach(function(BE){BE.style.maxWidth=BB+"px";BE.style.maxHeight=BA+"px";BE.style.objectFit="contain";});},restoreEsForUnit:function Ae(BE){if(!BE){return ;}var BG=BE.es,BB=BE.fs,BC=BE.otp,BA=BB&&BB.length||0,BF=this.shouldEncodeHtmlContent(),BD=this;if(BG){X.forEach(BG,function(BI,BH){BI.n=i.decodeHtmlString(BI.n);if(BC===AF.DssTypeAttribute&&BA&&!BF){switch(BB[BH%BA].bftp){case Ay.DssBaseFormHTMLTag:BI.rawN=BI.rawN||BI.n;BI.n=BD.getTextFromHTMLTag(BI.n);break;default:}}});}},isTrue:function An(BA){return BA==="true"||BA===true;},getFontFamilyItems:function AI(){if(S){return S;}S=[];X.forEach(U.Families.slice(1),function(BA){S.push({n:BA.n,id:BA.n,did:BA.n,preview:!BA.symbolic});});return S;},surroundWithQuotes:function Ad(BA){if(!BA){return"";}return"'"+BA.replace(/^['|"]+/,"").replace(/['|"]+$/,"")+"'";},sendToMobileDevice:function E(BA){var BB=c.walk("webkit.messageHandlers.selectionDataJSONString",window);if(mstrApp.isDisplayOnMobile&&BB){BB.postMessage(BA);return true;}return false;},createMouseEvent:function(BB,BC){var BA=function(BD,BF){BF=BF||{bubbles:false,cancelable:false};var BE=document.createEvent("MouseEvent");BE.initMouseEvent(BD,BF.bubbles,BF.cancelable,window,0,BF.screenX||0,BF.screenY||0,BF.clientX||0,BF.clientY||0,BF.ctrlKey||false,BF.altKey||false,BF.shiftKey||false,BF.metaKey||false,BF.button||0,BF.relatedTarget||null);return BE;};BA.prototype=Event.prototype;return new BA(BB,BC);},filterTrendlineMXByDZ:function At(BC,BA){var BB=[];c.forEach(BA,function(BD){BB=BB.concat((BD.TemplateMetric||[]).map(function(BE){return BE.id;}));});return BC.filter(function(BD){return X.includes(BB,BD.did);});},isConvertedShape:function Q(BA,BD,BC){const BB=BA.dataset.tag;if(!BB){return false;}return BB===BD&&BA.tagName===BC;},getRoundedRectPathDataForDirections:function R(BF,BE,BG,BC,BA,BD){var BI=BF+BG;var BB=BE+BC;function BH(BK){return(BD&BK)!==0;}var BJ=[];if(BH(Aa.TOP_LEFT)){BJ.push("M",BF+BA,BE);}else{BJ.push("M",BF,BE);}if(BH(Aa.TOP_RIGHT)){BJ.push("L",BI-BA,BE);BJ.push("A",BA,BA,0,0,1,BI,BE+BA);}else{BJ.push("L",BI,BE);}if(BH(Aa.BOTTOM_RIGHT)){BJ.push("L",BI,BB-BA);BJ.push("A",BA,BA,0,0,1,BI-BA,BB);}else{BJ.push("L",BI,BB);}if(BH(Aa.BOTTOM_LEFT)){BJ.push("L",BF+BA,BB);BJ.push("A",BA,BA,0,0,1,BF,BB-BA);}else{BJ.push("L",BF,BB);}if(BH(Aa.TOP_LEFT)){BJ.push("L",BF,BE+BA);BJ.push("A",BA,BA,0,0,1,BF+BA,BE);}else{BJ.push("L",BF,BE);}BJ.push("Z");return BJ.join(" ");},addVisFeatureFlags:function M(BB,BA){BA=BA||{};c.forEach(BB,function(BD,BE){var BC=0;c.forEach(BD,function(BF){BC|=BF;});BA[BE]=BC;});return BA;},changeVisFeatureFlag:function Af(BF,BE,BG,BB,BA){BB=BB||{};var BC=BF[BE],BD=(BC&&BC[BG])||0;BB[BE]=BA?BB[BE]|BD:BB[BE]&(~BD);},addDefaultProps:function Ap(BB){var BA=mstrmojo.hash.clone(A6);if(BB&&BB.visStyle==="GraphMatrixVisualizationStyle"){mstrmojo.hash.copy(AZ,BA);}var BC;c.forEach(BA,function(BE,BD){BC=Ak[BD]||p[BD];if(BB[BC]===undefined){BB[BC]=BE;}});},addChangeVizContextMenu:function Al(BD,BA){var BC=!this.isOnExpressMode()&&!mstrApp.isDossier&&!(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())&&(!mstrApp.allowWebDashboardDesign||mstrApp.allowWebDashboardDesign())&&!mstrApp.isInVFInteractMode;if(BC&&BA){var BB=(BA.getDocModel&&BA.getDocModel())||(BA.model&&BA.model.docModel);if(BD.hasMenuItems()){BD.addSeparator();}if(mstrmojo.func.safeCall("hasActionButton",BA)()){BD.addNonInteractiveMenuItem({n:mstrmojo.desc(13165,"Change Visualization"),ttp:mstrmojo.desc(28100,"Remove the action button to use this feature")},"mnu--change-viz",true);}else{if(BA.hasTransaction&&BA.hasTransaction()){BD.addDisabledMenuItem({n:mstrmojo.desc(13165,"Change Visualization"),ttp:mstrmojo.desc(25592,"You must clear your transaction configuration before changing the visualization type.")});}else{if(!BA.disableChangeVisualization){BD.addMenuItem(mstrmojo.desc(13165,"Change Visualization"),"mnu--change-viz",function(){var BE=c.walk("mstrApp.rootCtrl.newVizGallery");if(BE&&BB){BB.selectVIUnit(c.walk("parent.id",BA));BE.setupConfig({modal:true,popupConfig:undefined,selectedViz:BB.getVizOfSelectedViUnit(),galleryConfig:{source:2,title:mstrApp.isInVFConfigMode?mstrmojo.desc(18406,"Visualization Filter"):mstrmojo.desc(13165,"Change Visualization")}});BA.openPopup(BE);}});}}}}return BD;},convertJSONToXML:function A2(BC,BE,BB){if(BC===undefined||BC===null){return ;}if(!BB){BB=(new DOMParser()).parseFromString("","text/xml");}var BA=BB.createElement(BE),BD;if(BC instanceof Object){for(BD in BC){if(BC.hasOwnProperty(BD)){var BF=A2(BC[BD],BD,BB);if(BF){BA.appendChild(BF);}}}}else{BA.setAttribute("value",BC);}return BA;},getCustomCheckboxSvg:function(BF,BG){var BA=AJ.getContrastingColor(BF);var BE=BG||"#a8a9aa";var BD=BG?'fill="'+BG+'"':'fill-opacity="0.45" fill="#444649"';var BB='<?xml version="1.0" encoding="UTF-8"?><svg width="24px" height="489px" viewBox="0 0 24 489" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch --><title>Artboard</title><desc>Created with Sketch.</desc><defs>    <rect id="path-1" x="0" y="0" width="12" height="12" rx="2"></rect>    <rect id="path-2" x="0" y="0" width="12" height="12" rx="2"></rect>    <polyline id="path-3" points="3 6 5.5 8 9 4"></polyline>    <rect id="path-4" x="3" y="3" width="12" height="12" rx="2"></rect>    <polyline id="path-5" points="6 9 8.5 11 12 7"></polyline>    <rect id="path-6" x="3" y="3" width="12" height="12" rx="2"></rect>    <filter x="-29.2%" y="-20.8%" width="158.3%" height="158.3%" filterUnits="objectBoundingBox" id="filter-7">        <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>        <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>        <feColorMatrix values="0 0 0 0 0.266666667   0 0 0 0 0.274509804   0 0 0 0 0.28627451  0 0 0 0.05 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>    </filter>    <polyline id="path-8" points="6 9 8.5 11 12 7"></polyline>    <rect id="path-9" x="3" y="3" width="12" height="12" rx="2"></rect>    <filter x="-29.2%" y="-20.8%" width="158.3%" height="158.3%" filterUnits="objectBoundingBox" id="filter-10">        <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>        <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>        <feColorMatrix values="0 0 0 0 0.266666667   0 0 0 0 0.274509804   0 0 0 0 0.28627451  0 0 0 0.05 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>    </filter>    <rect id="path-11" x="3" y="3" width="12" height="12" rx="2"></rect>    <filter x="-29.2%" y="-20.8%" width="158.3%" height="158.3%" filterUnits="objectBoundingBox" id="filter-12">        <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>        <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>        <feColorMatrix values="0 0 0 0 0.266666667   0 0 0 0 0.274509804   0 0 0 0 0.28627451  0 0 0 0.05 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>    </filter>    <polyline id="path-13" points="3 6 5.5 8 9 4"></polyline>    <polyline id="path-14" points="0 2 2.5 4 6 0"></polyline>    <polyline id="path-15" points="3 6 5.5 8 9 4"></polyline>    <polyline id="path-16" points="3 6 5.5 8 9 4"></polyline>    <circle id="path-17" cx="6" cy="6" r="6"></circle></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">    <g id="Artboard">        <g id="Group" transform="translate(0.000000, 25.000000)">            <rect id="Rectangle-201" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-2-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Rectangle-3087">                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>                    <rect stroke="'+BE+'" stroke-width="1" x="0.5" y="0.5" width="11" height="11" rx="2"></rect>                </g>                <rect id="Rectangle-3087" fill="#FFFFFF" x="1" y="1" width="10" height="10" rx="2"></rect>            </g>        </g>        <g id="Group-Copy" transform="translate(0.000000, 250.000000)">            <rect id="Rectangle-201" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-2-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Rectangle-3087">                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-2"></use>                    <rect stroke="#444649" stroke-width="1" x="0.5" y="0.5" width="11" height="11" rx="2"></rect>                </g>                <rect id="Rectangle-3087" fill="#17191A" x="1" y="1" width="10" height="10" rx="1"></rect>            </g>        </g>        <g id="Group-5-Copy" transform="translate(0.000000, 50.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <g id="Group-5-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Group-Copy-2">                    <rect id="Rectangle-370" fill="'+BF+'" x="0" y="0" width="12" height="12" rx="2"></rect>                    <g id="Path-390" stroke-linecap="square" stroke="'+BA+'">                        <use xlink:href="#path-3"></use>                        <use xlink:href="#path-3"></use>                    </g>                </g>            </g>        </g>        <g id="Group-5-Copy-3" transform="translate(0.000000, 175.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <rect id="Rectangle-370" fill="'+BF+'" x="3" y="3" width="12" height="12" rx="2"></rect>            <polygon id="Line" fill="'+BA+'" fill-rule="nonzero" points="11.5 10 12 10 12 8 11.5 8 6.5 8 6 8 6 10 6.5 10"></polygon>        </g>        <g id="Group-5-Copy-5" transform="translate(0.000000, 398.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <rect id="Rectangle-370" fill="'+BF+'" x="3" y="3" width="12" height="12" rx="2"></rect>            <polygon id="Line" fill="'+BA+'" fill-rule="nonzero" points="11.5 10 12 10 12 8 11.5 8 6.5 8 6 8 6 10 6.5 10"></polygon>        </g>        <g id="Group-11" transform="translate(0.000000, 75.000000)">            <g id="Group-17">                <g id="Group-16-Copy">                    <g id="Group-14">                        <g id="Group-7">                            <rect id="Rectangle-201-Copy" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>                            <g id="Rectangle-370-Copy-2">                                <use fill="#E7E8E8" fill-rule="evenodd" xlink:href="#path-4"></use>                                <rect stroke-opacity="0.1" stroke="#444649" stroke-width="1" x="3.5" y="3.5" width="11" height="11" rx="2"></rect>                            </g>                            <g id="Path-390" stroke-linecap="square" stroke="#C6C7C8">                                <use xlink:href="#path-5"></use>                                <use xlink:href="#path-5"></use>                            </g>                        </g>                    </g>                </g>            </g>            <g id="Group-4-Copy" transform="translate(3.000000, 3.000000)"></g>        </g>        <g id="Group-11-Copy" transform="translate(0.000000, 298.000000)">            <g id="Group-7">                <rect id="Rectangle-201-Copy" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>                <g id="Rectangle-370-Copy-2">                    <use fill="black" fill-opacity="1" filter="url(#filter-7)" xlink:href="#path-6"></use>                    <use fill="#464B53" fill-rule="evenodd" xlink:href="#path-6"></use>                    <rect stroke-opacity="0.1" stroke="#444649" stroke-width="1" x="3.5" y="3.5" width="11" height="11" rx="2"></rect>                </g>                <g id="Path-390" stroke-linecap="square" stroke="#AAACAE">                    <use xlink:href="#path-8"></use>                    <use xlink:href="#path-8"></use>                </g>            </g>        </g>        <g id="Group-16" transform="translate(0.000000, 100.000000)">            <g id="Group-14">                <g id="Group-6">                    <rect id="Rectangle-201-Copy" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>                    <g id="Rectangle-370-Copy">                        <use fill="black" fill-opacity="1" filter="url(#filter-10)" xlink:href="#path-9"></use>                        <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-9"></use>                        <rect stroke-opacity="0.1" stroke="#444649" stroke-width="1" x="3.5" y="3.5" width="11" height="11" rx="2"></rect>                    </g>                </g>            </g>        </g>        <g id="Group-16-Copy-2" transform="translate(0.000000, 323.000000)">            <rect id="Rectangle-201-Copy" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Rectangle-370-Copy">                <use fill="black" fill-opacity="1" filter="url(#filter-12)" xlink:href="#path-11"></use>                <use fill="#464B53" fill-rule="evenodd" xlink:href="#path-11"></use>                <rect stroke-opacity="0.1" stroke="#444649" stroke-width="1" x="3.5" y="3.5" width="11" height="11" rx="2"></rect>            </g>        </g>        <g id="Group-2" transform="translate(0.000000, 150.000000)">            <rect id="Rectangle-201-Copy-2" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-3" transform="translate(3.000000, 3.000000)">                <path d="M6,11 C8.76142375,11 11,8.76142375 11,6 C11,3.23857625 8.76142375,1 6,1 C3.23857625,1 1,3.23857625 1,6 C1,8.76142375 3.23857625,11 6,11 L6,11 Z M6,12 L6,12 C2.6862915,12 0,9.3137085 0,6 C0,2.6862915 2.6862915,0 6,0 C9.3137085,0 12,2.6862915 12,6 C12,9.3137085 9.3137085,12 6,12 L6,12 Z" id="Oval-223" '+BD+' fill-rule="nonzero"></path>                <circle id="Oval-286" fill="#FFFFFF" cx="6" cy="6" r="5.14285714"></circle>            </g>        </g>        <g id="Group-2-Copy" transform="translate(0.000000, 373.000000)">            <rect id="Rectangle-201-Copy-2" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-3" transform="translate(3.000000, 3.000000)" fill="#444649">                <path d="M6,11 C8.76142375,11 11,8.76142375 11,6 C11,3.23857625 8.76142375,1 6,1 C3.23857625,1 1,3.23857625 1,6 C1,8.76142375 3.23857625,11 6,11 L6,11 Z M6,12 L6,12 C2.6862915,12 0,9.3137085 0,6 C0,2.6862915 2.6862915,0 6,0 C9.3137085,0 12,2.6862915 12,6 C12,9.3137085 9.3137085,12 6,12 L6,12 Z" id="Oval-223" fill-opacity="0.45" fill="#444649" fill-rule="nonzero"></path>                <circle id="Oval-286" fill="#FFFFFF" cx="6" cy="6" r="5.14285714"></circle>            </g>        </g>        <g id="Group-2-Copy" transform="translate(0.000000, 373.000000)">            <rect id="Rectangle-201-Copy-2" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-3" transform="translate(3.000000, 3.000000)" fill="#444649">                <path d="M6,11 C8.76142375,11 11,8.76142375 11,6 C11,3.23857625 8.76142375,1 6,1 C3.23857625,1 1,3.23857625 1,6 C1,8.76142375 3.23857625,11 6,11 L6,11 Z M6,12 L6,12 C2.6862915,12 0,9.3137085 0,6 C0,2.6862915 2.6862915,0 6,0 C9.3137085,0 12,2.6862915 12,6 C12,9.3137085 9.3137085,12 6,12 L6,12 Z" id="Oval-223" fill-rule="nonzero"></path>                <circle id="Oval-286" cx="6" cy="6" r="5.14285714"></circle>            </g>        </g>        <g id="Group-5">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <g id="Group-5-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Group-Copy-2">                    <rect id="Rectangle-370" fill="'+BF+'" x="0" y="0" width="12" height="12" rx="2"></rect>                    <g id="Path-390" stroke-linecap="square" stroke="'+BA+'">                        <use xlink:href="#path-13"></use>                        <use xlink:href="#path-13"></use>                    </g>                </g>            </g>        </g>        <g id="Group-5-Copy-6" transform="translate(0.000000, 200.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <g id="Group-5-Copy-2" transform="translate(6.000000, 7.000000)" stroke="#444649" stroke-linecap="square">                <g id="Group-Copy-2">                    <g id="Path-390">                        <use xlink:href="#path-14"></use>                        <use xlink:href="#path-14"></use>                    </g>                </g>            </g>        </g>        <g id="Group-4" transform="translate(0.000000, 125.000000)">            <rect id="Rectangle-201-Copy-3" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-8" transform="translate(3.000000, 3.000000)">                <g id="radio-h">                    <circle id="Oval-223-Copy" fill="'+BF+'" cx="6" cy="6" r="6"></circle>                    <path d="M6,8 C7.1045695,8 8,7.1045695 8,6 C8,4.8954305 7.1045695,4 6,4 C4.8954305,4 4,4.8954305 4,6 C4,7.1045695 4.8954305,8 6,8 Z" id="Oval-226" fill="'+BA+'"></path>                </g>            </g>        </g>        <g id="Group-4-Copy-2" transform="translate(0.000000, 348.000000)">            <rect id="Rectangle-201-Copy-3" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-8" transform="translate(3.000000, 3.000000)">                <g id="radio-h">                    <circle id="Oval-223-Copy" fill="'+BF+'" cx="6" cy="6" r="6"></circle>                    <path d="M6,8 C7.1045695,8 8,7.1045695 8,6 C8,4.8954305 7.1045695,4 6,4 C4.8954305,4 4,4.8954305 4,6 C4,7.1045695 4.8954305,8 6,8 Z" id="Oval-226" fill="'+BA+'"></path>                </g>            </g>        </g>        <circle id="Oval" fill="#D14D4D" cx="14" cy="211" r="2"></circle>        <circle id="Oval-Copy-2" fill="#D14D4D" cx="16" cy="64" r="2"></circle>        <circle id="Oval-Copy" fill="#D14D4D" cx="7" cy="433" r="2"></circle>        <g id="Group-5-Copy-4" transform="translate(0.000000, 225.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <g id="Group-5-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Group-Copy-2">                    <rect id="Rectangle-370" fill="'+BF+'" x="0" y="0" width="12" height="12" rx="2"></rect>                    <g id="Path-390" stroke-linecap="square" stroke="'+BA+'">                        <use xlink:href="#path-15"></use>                        <use xlink:href="#path-15"></use>                    </g>                </g>            </g>        </g>        <g id="Group-5-Copy-7" transform="translate(0.000000, 275.000000)">            <g id="Group-15" fill="#00FFA0" opacity="0">                <rect id="Rectangle-201" x="0" y="0" width="18" height="18"></rect>            </g>            <g id="Group-5-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Group-Copy-2">                    <rect id="Rectangle-370" fill="'+BF+'" x="0" y="0" width="12" height="12" rx="2"></rect>                    <g id="Path-390" stroke-linecap="square" stroke="'+BA+'">                        <use xlink:href="#path-16"></use>                        <use xlink:href="#path-16"></use>                    </g>                </g>            </g>        </g>        <g id="Group-10" transform="translate(0.000000, 448.000000)">            <rect id="Rectangle-201-Copy-5" fill="#00FFA0" opacity="0" x="0" y="0" width="18" height="18"></rect>            <g id="Group-8-Copy-2" transform="translate(3.000000, 3.000000)">                <g id="Oval-223-Copy">                    <use fill="#E7E8E8" fill-rule="evenodd" xlink:href="#path-17"></use>                    <circle stroke-opacity="0.1" stroke="#444649" stroke-width="1" cx="6" cy="6" r="5.5"></circle>                </g>                <path d="M6,8 C7.1045695,8 8,7.1045695 8,6 C8,4.8954305 7.1045695,4 6,4 C4.8954305,4 4,4.8954305 4,6 C4,7.1045695 4.8954305,8 6,8 Z" id="Oval-226" fill="#C6C7C8"></path>            </g>        </g>    </g></g></svg>';var BC=encodeURIComponent(BB);return'url("data:image/svg+xml,'+BC+'")';},updateCheckboxColor:function u(BE,BA,BD,BG){var BF=this.getCustomCheckboxSvg(BE,BG);var BB=BA.querySelectorAll(BD);if(BB&&BB.length){for(var BC=0;BC<BB.length;BC++){BB[BC].style.backgroundImage=BF;}}},updateRemoveIconColor:function n(BH,BA,BF){var BC='<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 9.70801L4.85449 13.8535C4.75684 13.9512 4.63965 14 4.50293 14C4.3597 14 4.23926 13.9528 4.1416 13.8584C4.0472 13.7607 4 13.6403 4 13.4971C4 13.3604 4.04883 13.2432 4.14648 13.1455L8.29199 9L4.14648 4.85449C4.04883 4.75684 4 4.63802 4 4.49805C4 4.42969 4.01302 4.36458 4.03906 4.30273C4.0651 4.24089 4.10091 4.1888 4.14648 4.14648C4.19206 4.10091 4.24577 4.0651 4.30762 4.03906C4.36947 4.01302 4.43457 4 4.50293 4C4.63965 4 4.75684 4.04883 4.85449 4.14648L9 8.29199L13.1455 4.14648C13.2432 4.04883 13.362 4 13.502 4C13.5703 4 13.6338 4.01302 13.6924 4.03906C13.7542 4.0651 13.8079 4.10091 13.8535 4.14648C13.8991 4.19206 13.9349 4.24577 13.9609 4.30762C13.987 4.36621 14 4.42969 14 4.49805C14 4.63802 13.9512 4.75684 13.8535 4.85449L9.70801 9L13.8535 13.1455C13.9512 13.2432 14 13.3604 14 13.4971C14 13.5654 13.987 13.6305 13.9609 13.6924C13.9349 13.7542 13.8991 13.8079 13.8535 13.8535C13.8112 13.8991 13.7591 13.9349 13.6973 13.9609C13.6354 13.987 13.5703 14 13.502 14C13.362 14 13.2432 13.9512 13.1455 13.8535L9 9.70801Z" fill="'+BH+'"/></svg>';var BE=encodeURIComponent(BC);var BG='url("data:image/svg+xml,'+BE+'")';var BB=BA.querySelectorAll(BF);if(BB&&BB.length){for(var BD=0;BD<BB.length;BD++){BB[BD].style.background=BG+" no-repeat center center scroll";BB[BD].style.scale="0.6";}}},isWithinVizBoxUnitContainer:function j(BB){var BA=BB;while(BA&&BA.className){if(BA.className.indexOf("mstrmojo-UnitContainer")>-1){return true;}BA=BA.parentNode;}return false;},getDashboardContentAccentColor:function Ar(BB){var BA="--mstrd-dashboard-content-accent-color"+BB;return document.body.style.getPropertyValue(BA);},hexColorToRgba:function A0(BB,BD){var BI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(BB);if(!BI){return"";}var BA=parseInt(BI[1],16);var BE=parseInt(BI[2],16);var BF=parseInt(BI[3],16);var BC=Math.round(BA*BD+255*(1-BD));var BG=Math.round(BE*BD+255*(1-BD));var BH=Math.round(BF*BD+255*(1-BD));return"rgb("+BC+","+BG+","+BH+")";},bgrToRgb:function AE(BD){var BA=(BD&16711680)>>16;var BC=(BD&65280)>>8;var BE=BD&255;var BG=BA.toString(16);var BB=BC.toString(16);var BF=BE.toString(16);if(BG.length<2){BG="0"+BG;}if(BB.length<2){BB="0"+BB;}if(BF.length<2){BF="0"+BF;}return"#"+BF+BB+BG;},handleDashboardAccentColor:function o(BG){var BB="--mstrd-dashboard-content-accent-color";var BD=["","-009","-020","-text"];var BE=document.body.style.getPropertyValue("--mstrd-app-theme-accentFill");var BJ=document.body.style.getPropertyValue("--mstrd-app-theme-buttonColor");if(BG&&typeof BG==="number"){var BE=this.bgrToRgb(BG);var BJ="#fff";}if(BE&&BJ){var BF=this.hexColorToRgba(BE,0.09);var BC=this.hexColorToRgba(BE,0.2);var BA=[BE,BF,BC,BJ];for(var BH=0;BH<BD.length;BH++){var BI=BD[BH];document.body.style.setProperty(BB+BI,BA[BH]);}}else{for(var BH=0;BH<BD.length;BH++){var BI=BD[BH];document.body.style.removeProperty(BB+BI);}}},isBinaryDataVisualization:function Ai(BB){const BA=c.walk("pluginsVisList."+BB,window.mstrConfig);return BA&&BA.useBinaryData==="true";},});mstrmojo.VisUtility.enableInVis=true;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._HasSuggestion","mstrmojo.css","mstrmojo.VisUtility","mstrmojo.hash","mstrmojo.dom","mstrmojo.vi.enums.EnumFeatures","mstrmojo.func","mstrmojo.array");var M=mstrmojo.dom,E=mstrmojo.css,X="srchBoxState",C=mstrmojo.Enum_Keys,Z=mstrmojo.VisUtility,q=mstrmojo.Enum_Keys,P=200,n,I=24,W={fontFamily:"Arial",fontSize:"11px"},K=mstrmojo.vi.enums.EnumFeatures,O=mstrmojo.hash,w=mstrmojo.func,i=mstrmojo.array;var l={2147762262:mstrmojo.desc(16256,"Please enter a numeric value"),2147762227:mstrmojo.desc(16257,"Unable to perform search with the operators provided")};var U={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};var u="mstrmojo-SimpleObjectInputBox-del";function F(){var AC=O.walk("parent.node.defn.cacs",this)||0;var AE=1<<1;var AG=!!(AC&AE);var AB=this.inputBox,AD=this.preloadOptionsPattern||"",AF=AB&&AB.value||(AG?AD:"");if(AF!==""&&(AF!==this._lastPattern||!this.suggestionShown)){this.showSuggestion(AF);this._isSearching=true;if(this.hitEnterToTest){this.inputBox.blur();}}this._lastPattern=AF;delete this._timerHandle;}function D(){var AB=this._timerHandle;if(AB){window.clearTimeout(AB);delete this._timerHandle;}}function A(){if(this.richTooltip){if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}this.hideTooltip();}}function p(AC){if(mstrApp&&w.safeCall("supportFeature",mstrApp)(K.USE_FILTER_ENHANCEMENT)){if(AC.length===0&&((O.walk("parent.parent.scriptClass",this)==="mstrmojo.vi.ui.rw.FilterPortlet")||(O.walk("parent.parent.scriptClass",this)==="mstrmojo.vi.ui.rw.FilterBox"))&&(O.walk("parent.defn.scs",this)===1)){var AE=this.emptyText;var AB=w.safeCall("emptyTextNode.querySelector",this)(".empty-text-wrapper");this.showWarning4DeleteLastItemFlag=true;if(!O.walk("parent.defn.multi",this)){this.set("state",U.EMPTY);}E.addClass(this.domNode,"mstrmojo-SimpleObjectInputBox-alert");if(AB){var AD=w.safeCall("parent.getSearchBoxEmptyMessage",this)();AB.textContent=AD||mstrmojo.desc(27775,"Make at least one selection.");}E.addClass(this.emptyTextNode,"search-filter-none-selection");this.parent.buildNavList();this.emptyText=AE;return true;}}return false;}function h(AB){var AD=this._inputPos,AC=!mstrApp.isAppStatePresentation||mstrApp.isAppStatePresentation(),AE=this,AF;if(this.richTooltip){AF=this.richTooltip;if(!this.hasOpenTooltip&&!this.suggestionShown){AF.top=(AD.h+AD.y)+"px";AF.left=AD.x+"px";if(!this.hitEnterToTest&&!AC){window.setTimeout(function(){var AI=AE.tooltip,AH=AI&&AI.contentNode,AJ,AG;AJ=AH?AH.childNodes:null;if(AJ&&AJ.length>1){AG=AJ[1];AJ=AG.childNodes;if(AJ&&AJ.length>1){AG=AJ[1];}else{AG=null;}}if(AE.hasOpenTooltip&&AG&&!E.hasClass(AH,"lng")){if(AF.onclick){AE.tooltip.onclick=AF.onclick;M.attachMarkupEvent(AE.tooltip.id,AG,"click");}E.addClass(AH,"lng");}},3000);}this.showTooltip(AB.e,AB.hWin);this.set("allowOtherTooltips",!this.hitEnterToTest);}}}function G(){if(window.mstrLocalStorage===undefined){return{};}var AB=(mstrLocalStorage.getLocalStorage()||{})[X];return(AB&&JSON.parse(AB))||{};}function e(AB){if(window.mstrLocalStorage!==undefined){mstrLocalStorage.setItem(X,JSON.stringify(AB));}}mstrmojo.SimpleObjectInputBox=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasSuggestion,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.SimpleObjectInputBox",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-SimpleObjectInputBox {@cssClass}" style="{@cssText}" mstrAttach:click,keydown><div class="mstrmojo-SimpleObjectInputBox-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}<input type="text" mstrAttach:keydown,keyup,blur,focus style="display: none;" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" /><div class="mstrmojo-SimpleObjectInputBox-empty {@inputCss}"><div class="empty-text-wrapper">{@en@emptyText}</div></div></div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},emptyTextNode:function(){return this.domNode.firstChild.lastChild;},inputBox:function(){var AB=this.domNode.firstChild.children;return AB[AB.length-2];},scrollboxNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onmaxItemWidthChange:function k(){var AB=this.maxItemWidth;if(!isNaN(AB)&&AB>0){this.emptyTextNode.style.maxWidth=AB+"px";}}},itemField:"n",emptyText:"",state:0,maxItemWidth:"none",useKeyDelay:false,hitEnterToTest:false,maxObjectCount:null,useRichTooltip:true,onItemsDelete:mstrmojo.emptyFn,STATES:U,clearInputTextTimer:D,init:function x(AB){this._super(AB);if(mstrApp.isWorkstation){W.fontFamily="Helvetica";}},showTooltip:function AA(AC,AF){var AE=AC.target||M.eventTarget(AC.hWin,AC.e),AD=this.getItemFromTarget(AE);if(AD&&AD.n){var AG=this.getItemNodeFromTarget(AE).firstChild,AB=M.position(AG);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPCENTER,cssClass:"vi-regular vi-tooltip-A A-center",refNode:AG,content:mstrmojo.string.encodeHtmlString(AD.n),top:AB.h+11,left:AB.w/2};this._super(AC,AF);}},getItemMarkup:function(AB){if(!n){var AC=this.itemField;n=this._super(AB).replace(">{@en@n}<",'><div class="elem">{@en@'+AC+'}<div class="'+u+'"></div></div><');}return n;},getItemProps:function j(AF,AB){var AD=this._super(AF,AB),AG=this.itemField;var AE=this.maxItemWidth;if(!isNaN(AE)&&AE>0){AE-=I;}if(!mstrmojo.string.isEmpty(AF[AG])){var AC=AF[AG];AD[AG]=AC;if(AE<Z.measureTextWidth(AC,W)){AD.title=AC;}}AD.addStyle("max-width:"+AE+"px");return AD;},getSuggestionPos:function a(){var AB=this._inputPos;return{target:this.inputBox,left:AB.x+"px",top:AB.y+AB.h+"px",zIndex:100};},updateSuggestion:function f(AB){var AC=G();if(!AC.srch){if(this._super){this._super(AB);}}this.inputBox.focus();A.call(this);},failMessage:function B(AC){var AD=l[AC.errCode]||AC.msg,AB=AD?[{n:AD,t:-101,cls:"nomatch"}]:[];this.updateSuggestion(AB);},getSearchPattern:function Q(){return this.inputBox?this.inputBox.value:"";},showInfoTooltip:function d(AE){var AF=G(),AB=this.parent.parent,AG=M.position(AB.domNode),AC=this.richTooltip,AD=this;if(!AF.hasShownInfo&&!mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO){mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=true;AF.hasShownInfo=true;this.set("richTooltip",{posType:mstrmojo.tooltip.POS_BOTTOMCENTER,cssClass:"vi-regular vi-tooltip-V vi-tooltip-leftcenter",contentNodeCssClass:"srch info",top:AG.y+"px",left:AG.x+AG.w+8+"px",content:mstrmojo.desc(15909,'You can re-enable "Instant Search" from the menu.'),onClose:function(){AD.set("richTooltip",AC);}});this.showTooltip(window.event,window);if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}else{this.set("allowOtherTooltips",false);}}AF.srch=AE;e(AF);},onIncrementalFetch:function L(){this.inputBox.blur();},resolveUpdatedItems:function H(AB){if(this.items.length===1&&O.walk("showWarning4DeleteLastItemFlag",this)&&!i.isArray(AB)){delete this.showWarning4DeleteLastItemFlag;return[AB];}else{return this.items.concat(AB);}},onSuggestionItemSelect:function s(AB){D.call(this);this.set("items",this.resolveUpdatedItems(AB));this._super();var AC=this.id;window.setTimeout(function(){var AD=mstrmojo.all[AC];if(parseInt(AD.state,10)!==U.FULL){AD.set("state",U.ADDING);}},0);},onstateChange:function b(AC){var AD=AC.value,AE=O.walk("parent.defn.multi",this),AB,AF;if(AE){this.emptyTextNode.style.display=(AD===U.ADDING)?"none":"block";}else{this.emptyTextNode.style.display=(AD===U.EMPTY)?"block":"none";}AB=this.inputBox;AF=AB.style;if(AD===U.ADDING){AF.display="";this.updateScrollbars();AB.focus();this._inputPos=M.position(AB,true);}else{D.call(this);AF.display="none";AB.value="";this._lastPattern="";this.updateScrollbars();if(this.parent.getFormats&&!this.parent.getFormats().height&&this.parent.parent.performCanGrowCanShrink){this.parent.parent.performCanGrowCanShrink(this.parent.parent.children);}}},unrender:function(){this._super();if(this.showWarning4DeleteLastItemFlag){delete this.showWarning4DeleteLastItemFlag;}},preBuildRendering:function(){if(this.isICS&&(!this.inputCss||this.inputCss.indexOf(" isICS")<0)){this.inputCss=(this.inputCss||"")+" isICS";}if(this._super){return this._super();}},postBuildRendering:function S(){var AB,AC=G();P=(mstrApp.getSearchAutoCompleteDelay&&mstrApp.getSearchAutoCompleteDelay())||P;this.state=0;this.setDefaultState();if(AC.srch){this.inputBox.value=AC.srch;this.set("state",U.ADDING);delete AC.srch;e(AC);}AB=this._super();p.call(this,this.items);return AB;},preitemsChange:function N(){this.setDefaultState();},onkeydown:function R(AC){var AE=this.parent,AI=AE&&AE.tabParent,AH=AC.e||AC,AG=AC.getTarget(),AB=E.hasClass(AG,u),AD=AG===this.inputBox||AG===this.emptyTextNode,AF=AH.keyCode;if(AE.canTab&&AE.handleTab(AC)){return ;}AH.stopPropagation();if(AF===q.SPACE&&AD){}else{if((AF===q.ENTER||AF===q.SPACE)&&(AB||AD)){this.onclick(AC);if(AB&&AI&&AI.grabFocus){AI.grabFocus(true);}else{if(AD&&AE.canTab){AE.toggleSearchFocus(true);}}}else{if(AF===q.ESCAPE){if(AG.tagName==="INPUT"){this.setDefaultState();if(AE.canTab){AE.toggleSearchFocus(false);}}else{if(AG.loseFocus){AG.loseFocus(true);}if(AI&&AI.grabFocus){AI.grabFocus(true);}}}}}},onclick:function m(AD){var AG=M.eventTarget(AD.hWin,AD.e);if(AG&&E.hasClass(AG,u)){var AF=M.findAncestorByAttr(AG,"idx",true,this.domNode),AB=AF&&parseInt(AF.value,10);this.hideTooltip();if(AB!==null&&!isNaN(AB)){var AE=this.items.concat(),AC=w.safeCall("parent.isMandatory",this)();AE.splice(AB,1);if(p.call(this,AE)&&!AC){return ;}this.set("items",AE);if(AC){p.call(this,AE);}this.onItemsDelete(AF);}return ;}if(parseInt(this.state,10)!==U.FULL||this.showWarning4DeleteLastItemFlag){this.set("state",U.ADDING);}},onblur:function Y(){if(this._isSearching||this.tooltip){return ;}D.call(this);A.call(this);if(!this.suggestionShown){this.setDefaultState();if(!O.walk("parent.defn.multi",this)&&this.showWarning4DeleteLastItemFlag&&this.state===U.FULL){this.emptyTextNode.style.display="block";}}},onfocus:function t(){this._isSearching=false;if(this.suggestionShown){A.call(this);}},prekeydown:function J(AC){var AF=AC.e;switch(parseInt(AF.keyCode||AF.charCode,10)){case C.DOWN_ARROW:this.nextHighlight();break;case C.UP_ARROW:this.preHighlight();break;case C.TAB:case C.ENTER:M.preventDefault(AC.hWin,AF);if(this.suggestionShown){var AE=this.getSelected();if(AE){this.handleSuggestionItemSelect(AE);}else{this.hideSuggestion();}}else{if(this.hitEnterToTest){A.call(this);F.call(this);}}break;case C.ESCAPE:D.call(this);if(this.suggestionShown){this.hideSuggestion();}else{this.setDefaultState();}break;case C.BACKSPACE:if(!this.getSearchPattern()&&!mstrApp.hasRequests()){M.preventDefault(AC.hWin,AF);var AD=this.items&&this.items.concat();if(AD&&AD.length){AD.splice(AD.length-1,1);mstrApp.ignoreBackSpace=true;p.call(this,AD);if(!this.showWarning4DeleteLastItemFlag){this.set("items",AD);}var AH=this.id;window.setTimeout(function(){mstrmojo.all[AH].set("state",U.ADDING);mstrApp.ignoreBackSpace=false;},0);}}break;}var AB=this.richTooltip,AG=(AB&&AB.contentNodeCssClass)||"";if(AG.indexOf("srch info")>-1){A.call(this);}},prekeyup:function z(AB){var AE=AB.e,AC=parseInt(AE.keyCode||AE.charCode,10),AD=this.getSearchPattern();if(!AD||AD!==this._lastPattern){M.preventDefault(AB.hWin,AB.e);this.hideSuggestion();}if(this.inputBox.value.length&&AC!==C.ENTER&&AC!==C.TAB&&!this.suggestionShown){h.call(this,AB);}else{A.call(this);}if(this.hitEnterToTest){return ;}if(this.useKeyDelay){var AF=this.id;if(!this._timerHandle){this._timerHandle=window.setTimeout(function(){F.call(mstrmojo.all[AF]);},P);}}else{F.call(this);}},widgetResized:function y(){if(this.hasRendered){var AE=parseInt(this.width,10),AG=this.items.length,AH=this.itemsContainerNode.childNodes;if(AG<=(AH&&AH.length)){var AF=AE-I;for(var AD=0;AD<AG;AD++){var AB=AH[AD],AC=AB.textContent;AB.style.maxWidth=AF+"px";if(AC&&AF<Z.measureTextWidth(AC,W)){AB.title=AC;}else{AB.title="";}}}if(this.emptyTextNode){this.emptyTextNode.style.maxWidth=AE+"px";}this.updateScrollbars();}},setupScrollNodes:function o(){this.scrollNode=this.scrollboxNode;},setDefaultState:function g(){var AD=this.maxObjectCount,AB=(this.items&&this.items.length)||0,AC=(AD!==null&&AD!==undefined&&AB>=AD);this.set("state",!AB?U.EMPTY:(AC?U.FULL:U.DEFAULT));},getScale:function c(){return mstrmojo.func.safeCall("mstrApp.rootCtrl.docCtrl.model.getPageScale",window)()||1;}});mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=false;}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.VisUtility","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var N=mstrmojo.hash,I=mstrmojo.array,E=mstrmojo.Enum_Keys,Q=mstrmojo.dom,C=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages,R=mstrmojo.css,O=mstrmojo.VisUtility,L=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition,K=[{n:mstrmojo.desc(10043,"Minute").toLowerCase(),v:0},{n:mstrmojo.desc(10044,"Second").toLowerCase(),v:1}],A={tift:1,ltifu:K[0].v,ltifv:"",ctifv:0},U=function(){var b=this.parent,a=b.lastValueInputAlias.value.toString().trim(),Y=b.lastValueInputAlias.inputNode,Z=b.ltifu,W=b.parent.controller.datasetsPanel.data;if(!b.valueHasChanged){if(b.lastValueInputAlias.warning){b.lastValueInputAlias.hideWarning();}return ;}b.ltifv=a;var X=b.validateInputValue(a,Y,Z,W);b.set("validationResult",X);if(!X.invalid){b.submit();}else{P(X);b.lastValueInputAlias.showWarning(X);Q.setInputSelection(Y);}b.valueHasChanged=false;},M=function(W){var X=this.parent;if(this.warning){this.hideWarning();}if(W.valueWas&&W.valueWas.toString().trim()!==W.value.toString().trim()){X.valueHasChanged=true;}},S=function(){var W=this.parent;if(W.validationResult&&W.validationResult.invalid){P(W.validationResult);this.showWarning(W.validationResult);}},P=function(W){if(!W.refNode||!W.refNode.nodeType){return ;}var X=Q.position(W.refNode),Z=C[W.errorCode],Y=R.getComputedStyle(W.refNode),a=O.measureTextWidth(Z,Y);if(X.x<a){W.position=L.TOP;}};mstrmojo.vi.ui.rw.selectors.EventTimeRange=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout,mstrmojo._HasPopup,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.vi.ui.rw.selectors.EventTimeRange",markupString:'<div id="{@id}" class="mstrmojo-vi-EventTimeRange {@cssClass}" mstrAttach:keydown style="{@cssText}"><div class="last-value-label"></div><div class="last-value-input"></div><div class="pulldown last-value-pulldown"></div></div>',markupSlots:{lastValueLabel:function(){return this.domNode.firstChild;},lastValueInput:function(){return this.domNode.childNodes[1];},lastValuePulldown:function(){return this.domNode.childNodes[2];}},children:[{scriptClass:"mstrmojo.Label",slot:"lastValueLabel",text:mstrmojo.desc(17530,"Last"),useRichTooltip:true,tooltipOpenDelay:100,updateTooltipConfig:function(){var X=mstrmojo.desc(17530,"Last"),W=R.getComputedStyle(this.domNode),Y=O.measureTextWidth(X,W);if(Y>Number(this.width.slice(0,-2))){this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:X,refNode:this.domNode,top:30,left:10,posType:mstrmojo.tooltip.POS_TOPCENTER,};}},},{scriptClass:"mstrmojo.ValidationTextBox",enableAccessibility:true,alias:"lastValueInputAlias",slot:"lastValueInput",onEnter:U,onblur:U,onvalueChange:M,onfocus:S,},{scriptClass:"mstrmojo.ui.Pulldown",enableAccessibility:true,focusOnPopup:true,alias:"lastValuePulldownAlias",slot:"lastValuePulldown",isHostedWithin:false,items:K,isSilentSelected:false,onitemSelected:function(){var X=this.parent,W=X.lastValuePulldownAlias.getSelectedItem().v;prevValue=X.ltifu;X.ltifu=W;if(W!==prevValue&&X.ltifv){X.ltifu=W;X.valueHasChanged=true;U.call(this);}}}],parseModel:function G(){this.tift=this.tift===undefined?A.tift:this.tift;this.ltifu=this.ltifu===undefined?A.ltifu:this.ltifu;this.ltifv=this.ltifv===undefined?A.ltifv:this.ltifv;this.ctifv=this.ctifv===undefined?A.ctifv:this.ctifv;var W=this.ltifu&&I.find(K,"v",this.ltifu);this.lastValuePulldownAlias.set("value",K[W].n);this.lastValueInputAlias.set("value",this.ltifv);this.valueHasChanged=false;},submit:function J(){this.onchange();},validateInputValue:function D(c,Z,a,Y){var W={invalid:false,errorCode:"",args:[],refNode:Z,offsetAlgo:true,position:L.LEFT,closeOnClick:false,clearValue:false};var b=Number(c);if(c===""){return W;}if(Number.isNaN(b)||!Number.isInteger(b)){W.invalid=true;W.errorCode="invalidValueVIWarning";}else{var X=Object.values(Y).filter(function(g){return !!g.streamingTimeSettings;}).map(function(g){return g.streamingTimeSettings.range;});var d=1;var e=Math.max(X)*60;var f=a===K[0].v?b*60:b;if(f<d||f>e){W.invalid=true;W.errorCode="outOfRangeVIWarningEventTimeRange";W.args=[e];}}return W;},updateData:function F(W){this.updateExpr(W);},updateExpr:function H(W){if(W){this.tift=W.tift;this.ltifu=W.ltifu;this.ltifv=W.ltifv;this.ctifv=W.ctifv;}this.parseModel();},doLayout:function B(){this.layoutConfig=this.layoutConfig?N.copy({xt:true},this.layoutConfig):{xt:true};if(this.parent.isInFilterPanel()){this.layoutConfig.w={lastValueLabel:"25%",lastValueInput:"25%",lastValuePulldown:"40%"};}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.customviz._HasExtraSelectionInfo","mstrmojo.customviz.GraphicModel","mstrmojo.CustomVisUtility","mstrmojo.VisUtility");var F=mstrmojo.array,D=mstrmojo.hash,M=mstrmojo.vi.ui.rw.SelectionType,L=mstrmojo.CustomVisUtility.log,I=mstrmojo.customviz.PICKED_TYPE,B=mstrmojo.customviz.PICKED_CRITERIA,O=mstrmojo.VisUtility,G=2;function P(S,R,W){var U={};U[S]=[{id:R,n:W}];return U;}mstrmojo.customviz._SupportCustomVizBrushesAndHighlights=mstrmojo.provide("mstrmojo.customviz._SupportCustomVizBrushesAndHighlights",{_mixinName:"mstrmojo.kpicard._SupportKPICardBrushesAndHighlights",isHighlightedAsTarget:false,selectionInfoFromMobile:{},srcSelectionForBrushing:[],canPickGraphicModel:function Q(h,X,i,Y){if(!h||!i||i.scriptClass!=="mstrmojo.customviz.GraphicModel"){return false;}var e=[I.ATTR,I.METRIC,I.BOTH],j,f,Z,d=this.isHighlightedAsTarget,R=0;if(!d){j=I.ATTR;f=I.METRIC;Z=B.SUBSET;}else{j=e.indexOf(Y&&Y.attribute)===-1?I.ATTR:Y.attribute;f=e.indexOf(Y&&Y.metric)===-1?I.METRIC:Y.metric;Z=(Y&&(Y.criteria===B.SUBSET||Y.criteria===B.INTERSECTION))?Y.criteria:B.INTERSECTION;}var U=X?j:f;if((U===I.ATTR&&!i.isAttributeSelector())||(U===I.METRIC&&i.isAttributeSelector())){return false;}var W={},g=h,k,S=0;if(i.isAttributeSelector()){F.forEach(F.ensureArray(i.getSelector()),function(l){if(l.tid){W[l.tid]=[{id:l.eid}];}});}else{W=i.getSelector();}for(k in g){++R;if(!W.hasOwnProperty(k)){if(Z===B.SUBSET){return false;}continue;}if(g.hasOwnProperty(k)){var c=F.ensureArray(W[k]),b=F.ensureArray(g[k]),a=(c.length===b.length)&&(F.difference(c,b,"id").length===0);if(!a){return false;}}++S;}return d?S!==0:R===Object.keys(W).length;},addGraphicSelection:function N(W,Y,U){var R=this,X,S;R.isHighlightedAsTarget=U;for(X in W){if(W.hasOwnProperty(X)){S=W[X];R.addSelectionBySingleSelector(S,Y,true,false);}}},highlight:function E(U,X,R){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill||this.isEmpty()||this.excludeData){return ;}var W=this,S=!R;this.clearCxtMnuSelection(true);this.clearSelections(false,true);if(U===M.ATTS){W.addGraphicSelection(X,true,S);}else{if(U===M.METRICS){W.addGraphicSelection(X,false,S);}}if(this.plotted){this.updateHighlight();}},updateHighlight:function H(){},clearSelections:function(R,S){this.clearSelectionsFlag=true;if(this._super){this._super(S);}if(R&&this.plotted){this.updateHighlight();}},addNormalizedSelection:function K(Z,Y,U,S){var R=this,X,W;for(W=0;W<Z.length;++W){X=Z[W];if(Y){X=P(X.tid,X.eid,X.n);}R.addSelectionBySingleSelector(X,Y,U,S);}},highlightElements:function C(R){this.selectionInfoFromMobile=D.copy(R,{});this.clearSelections(false,false);this.clearCxtMnuSelection(false);this.generateSelectionFromMobileBrushing(this.srcSelectionForBrushing);this.generateSelectionFromMobile(R);if(this.plotted){this.updateHighlight();}},handleBrushHighlightMobile:function J(R){this.srcSelectionForBrushing=D.copy(R,[]);this.clearSelections(false,false);this.clearCxtMnuSelection(false);this.generateSelectionFromMobile(this.selectionInfoFromMobile);this.generateSelectionFromMobileBrushing(R);if(this.plotted){this.updateHighlight();}},generateSelectionFromMobile:function(U){var W=F.ensureArray(U.selection),Z=F.ensureArray(U.contextMenu),Y=W[0]&&W[0].isSelectAttr,X=Z[0]&&Z[0].isSelectAttr,S,R=this;S=R.isHighlightedAsTarget;R.isHighlightedAsTarget=false;R.addNormalizedSelection(W,Y,false,false);R.addNormalizedSelection(Z,X,false,true);R.isHighlightedAsTarget=S;},generateSelectionFromMobileBrushing:function(U){var R=this,S,W=U[0]&&U[0].isSelectAttr;S=R.isHighlightedAsTarget;R.isHighlightedAsTarget=true;R.addNormalizedSelection(U,W,true,false);R.isHighlightedAsTarget=S;},singleUnitSelect:function A(){var W=this.getSelections().length>0||this.clearSelectionsFlag;if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}if(W){var S=function(){var Z=this.model.scm,b=Object.keys(Z||{}),d=(b&&b[0])||"",Y=this.model.data.gts,c=Y.row,a=Y.col;F.forEach(c.concat(a),function(e){if(b.indexOf(e.id)!==-1){d=e.id;return false;}});return d;};var U=function(){var Z=this.model.scm,b=Object.keys(Z||{}),d=[],Y=this.model.data.gts,c=Y.row,a=Y.col;F.forEach(c.concat(a),function(e){if(b.indexOf(e.id)!==-1){d.push(e.id);}});return d;};var X=function(){var Y={};Y.tid=S.call(this);Y.tids=U.call(this);Y.eid="";Y.isClearAll=false;Y.anchor=this.domNode;Y.at=G;Y.selections=this.getSelections();Y.selectionType=this.getSelectionType();return Y;};var R=X.call(this);this.performAction([R]);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.array","mstrmojo.Container","mstrmojo.Button","mstrmojo.VisUtility","mstrmojo.hash","mstrmojo.mobile.SupportMobileTouchInterface");var E=mstrmojo.dom,X=mstrmojo.css,K=mstrmojo.hash,C=mstrmojo.VisUtility,M="mobile-dossier-contextmenu-menu",U="mobile-dossier-contextmenu-button-group",O=mstrmojo.mobile.SupportMobileTouchInterface;mstrmojo.mobile.MobileDossierContextMenu=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.mobile.MobileDossierContextMenu",markupString:'<div id="{@id}-mobileDossierContextmenuwrapper" class="mstrMobileDossierContextMenu"><div class="dossier-contextmenu-title"></div><div class="dossier-contextmenu-back-button"></div><div class="dossier-contextmenu-separator"></div><div class="dossier-contextmenu-container"></div></div>',markupSlots:{contextmenuTitle:function(){return this.domNode.firstChild;},contextmenuBackBtn:function(){return this.domNode.childNodes[1];},titlemenuSeparator:function(){return this.domNode.childNodes[2];},menusContainer:function(){return this.domNode.childNodes[3];}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},parent:null,parentMenu:null,isShow:false,registerEventHandler:function I(){this.oncontextmenu=function(b){if(b.stopPropagation){b.stopPropagation();}if(b.preventDefault){b.preventDefault();}b.cancelBubble=true;};this.domNode.addEventListener("contextmenu",this.oncontextmenu);var a=this;var Z=function Y(){a.onBackClicked();};this.contextmenuBackBtn.addEventListener("click",Z);},onBackClicked:function F(){if(this.parentMenu){this.parentMenu.setVisibility(true);}this.setVisibility(false);},addMenuFeedback:function G(Y){Y.addEventListener("touchstart",function(){X.toggleClass(Y,"selected",true);});Y.addEventListener("touchend",function(){X.toggleClass(Y,"selected",false);});Y.addEventListener("touchcacel",function(){X.toggleClass(Y,"selected",false);});},init:function R(Y){this._super(Y);},hideMenus:function D(){this.setVisibility(false);if(this.drillSubMenu){this.drillSubMenu.setVisibility(false);}},setVisibility:function N(Y){var Z=K.walk("domNode.style",this);if(Z){Z.display=(Y)?"block":"none";}this.isShow=Y;},getVisibility:function B(){return this.isShow;},postBuildRendering:function S(){this._super();this.registerEventHandler();this.setVisibility(false);},updateMenus:function H(Y){if(Y.menus.length>0){E.emptyNode(this.menusContainer);this.setVisibility(true);}else{this.setVisibility(false);return ;}var Z=Y.title;if(Z){this.contextmenuTitle.innerText=Y.title;}X.toggleClass(this.contextmenuTitle,"no-title",!Z);X.toggleClass(this.contextmenuBackBtn,"no-back",!Y.hasBack);X.toggleClass(this.titlemenuSeparator,"no-separator",!(Z||Y.hasBack));this.addMenuNodes(Y.menus);O.updateMobileContextMenuNetworkState(this.domNode);},triggermenu:function W(){this.setVisibility(false);if(this.parent&&this.parent.hideContextMenu){this.parent.hideContextMenu();}},addMenuNodes:function A(b){var g=this.addMenuTableNode();var Z=g.childNodes[0];var c,a,d;var f=133;var Y=0;var e=this;b.forEach(function(k){var o=g.insertRow(-1),n=o.insertCell(-1);o.className=M;n.className=M;var l=k.n;var p=k.cls;var m=k.fn;var s=k.ctxt;var i=false;n.innerText=l;if(l===mstrmojo.desc(145,"Drill")){var h=m(s);if(h&&h.menus&&h.menus.length>0){var j=function(){e.setVisibility(false);e.displayDrillSubMenu(h);};n.addEventListener("click",j);}else{X.toggleClass(n,"disabled",true);}}else{if(p==="count"||p==="separator"){o.classList.add(p);n.classList.add(p);i=true;}else{if(p===U){e.addSortButton(g,k);}else{n.addEventListener("click",function(){m(k);e.triggermenu();});}}}if(!i&&p.length>0){X.addClass(o,p);X.addClass(n,p);}if(p!==U){e.addMenuFeedback(n);}c=C.getComputedFontStyle(n);a=Math.ceil(C.measureTextWidth(n.innerText,c,c.bonus));Y=Math.max(Y,a);Y=Math.max(Y,f);var q=parseInt(X.getComputedStyle(n).paddingRight);Z.style.width=(Y+q+1)+"px";d=Y+q;g.style.width=(d+2)+"px";});},addMenuTableNode:function L(){var a=document.createElement("table");a.className="dossier-contextmenu-table";a.appendChild(document.createElement("COL"));var Y=350;var Z=this.contextmenuTitle.offsetHeight+1+20*2;var b=document.body.offsetHeight-Z;if(b<Y){a.style.maxHeight=b+"px";}this.menusContainer.appendChild(a);return a;},displayDrillSubMenu:function P(Y){this.createDrillSubMenu(Y);this.drillSubMenu.domNode.style.top=this.domNode.style.top;this.drillSubMenu.domNode.style.left=this.domNode.style.left;this.setVisibility(false);this.drillSubMenu.setVisibility(true);},createDrillSubMenu:function Q(Y){if(!Y){return ;}if(!this.drillSubMenu){this.drillSubMenu=new mstrmojo.mobile.MobileDossierContextMenu({parent:this.parent,parentMenu:this});this.drillSubMenu.render();document.body.appendChild(this.drillSubMenu.domNode);}Y.title="Drill";Y.hasBack=true;this.drillSubMenu.updateMenus(Y);},addSortButton:function J(Z,c){this.contextmenuTitle.style.cssText="line-height:32px; font-size:16px; text-transform: uppercase;";var a=Z.rows.item(Z.rows.length-1);X.toggleClass(a.firstChild,"mobile-dossier-contextmenu-button-header",true);var b=Z.insertRow(-1);b.className=U;var Y=c.ctxt.status;c.ctxt.buttons.forEach(function(g){var e=b.insertCell(-1);e.className="mobile-dossier-contextmenu-button-container";e.style.left=g.left;var f=Y===g.value;X.toggleClass(e,"selected",f);var h=document.createElement("div");h.className="mobile-dossier-contextmenu-button "+g.cls;var d=document.createElement("div");d.className="mobile-dossier-contextmenu-button sort-clear";e.appendChild(h);e.appendChild(d);e.addEventListener("click",function(){c.fn(g);});});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.Button","mstrmojo.css","mstrmojo.ui._HasListTooltip","mstrmojo.ui.PopupWidget","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList","mstrmojo.VisUtility");var P=mstrmojo.hash,J=mstrmojo.array,B=mstrmojo.dom,O=mstrmojo.Button.newWebButton,L=27,E=mstrmojo.expr.TP.DIM,N="#0e6ff9";function F(Y){var Z=this.parent,b=Z.parent,a=this.list;if(Y){this.saveSelection();Z.submitSelections();}else{a.selectedIndices=P.copy(Z.selectedIndices);}this.close();if(b&&b.canTab){b.resetTabNav();if(Z.grabFocus){Z.grabFocus(true);}if(b.isAMSelector&&b.isAMSelector()){b.selectByKey=true;}}}function K(g,Y){if(mstrApp&&mstrApp.isExpress){var e=(g.itemsContainerNode||{}).children||[];if(e.length>0){var f=g.parent.opener,c=f&&f.docSelector&&f.docSelector.model,Z=c&&c.getZoomFactor&&c.getZoomFactor();for(var b=0;b<e.length;b++){var d=e[b].style;if(Z&&Z>=1){var a=22*Z;d.lineHeight=a+"px";d.backgroundSize=a+"px";d.paddingLeft=(a-5)+"px";d.backgroundPositionY=(g.selectedIndices[b]?(4*Z-1):(-20*Z))+"px";}else{d.backgroundPositionY=(g.selectedIndices[b]?"2px":"-23px");}}}g.updateScrollbars();}else{if(Y){g.updateScrollbars();}}}mstrmojo.ui.PulldownCheckList=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PulldownCheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:mouseover,mouseout,click,keydown><div class="pw-content"></div></div>',visible:false,itemCssText:"",postBuildRendering:function S(Y){this._super(Y);if(mstrApp&&mstrApp.isExpress){mstrmojo.css.toggleClass(this.domNode,"mstrmojo-ui-PulldownCheckList-rsd",true);}},onOpen:function D(){K(this.list,true);var Y=this.parent;if(Y.isICS){this.domNode.style.maxWidth=null;this.domNode.style.width=null;var Z=Y.domNode.getBoundingClientRect();var a=this.domNode.getBoundingClientRect();if(a.width<Z.width){this.domNode.style.width=Z.width+"px";this.domNode.style.maxWidth="unset";}}this.handleDashboardAccentColor();},onClose:function A(){var Y=this.parent,Z=this.list;Z.selectedIndices=P.copy(Y.selectedIndices);Z.refresh();},onkeydown:function H(Y){var b=this.parent.parent,Z=Y.e||Y,a=Z.keyCode;if(!(b&&b.canTab)||b.handleTab(Y)){return ;}if(a===L){Z.preventDefault();Z.stopPropagation();this.buttons.cancelBtn.onclick(Y);}},adjustCheckListForPopupOverflow:function R(i){var d=this.domNode,b,Z,h,e,f=this.list,c=f&&(f.scrollNode||f.scrollboxNode);if(c){b=B.position(d);Z=b.y;e=B.getMaxScrollHeight();if(f.getPulldownConfig){var a=f.getPulldownConfig(e,B.position(this.parent.domNode),true);h=a.maxHeight;}else{if(i&&(Z+b.h>B.position(document.body).h)){var Y=d.offsetHeight,g=c.offsetHeight;h=e-(Y-g);}}if(h){c.style.maxHeight=h+"px";f.updateScrollbars();}}},getItemFromTarget:function W(Y){return this.list.getItemFromTarget(Y);},getItemNodeFromTarget:function G(Y){return this.list.getItemNodeFromTarget(Y);},adjustCornersForPopupOverflow:function X(){var Y=this._super();this.adjustCheckListForPopupOverflow(Y);return Y;},saveSelection:function M(){this.parent.set("selectedIndices",P.copy(this.list.selectedIndices));},postselectionChange:function I(h){var g=this.list,e=g.items,f=h.added||[],c=h.removed||[],b=g.selectedIndices,Y=this.parent.allIdx,d=e[Y],a=f.length+c.length,Z=false;if(d&&d.t===E&&a===1){if(Y===f[0]){e.forEach(function(j,i){if(!b[i]){Z=true;b[i]=J.indexOf(c,i)===-1;}});}else{if(Y===c[0]){b={};J.forEach(f,function(i){b[i]=true;});Z=true;}else{if(b[Y]){delete b[Y];Z=true;}}}}if(Z){g.set("selectedIndices",P.copy(b));g.refresh();}K(g,false);this.handleDashboardAccentColor();},onitemsChange:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"list",enableAccessibility:true,postBuildRendering:function S(){if(this.renderOnScroll&&!this.onScrollEnd){var c=this.id;this.onScrollEnd=function a(){var d=mstrmojo.all[c];d.doScroll();d.updateScrollbars();};}this.icnCssText=this.parent.itemCssText||this.icnCssText;this.parent.adjustCheckListForPopupOverflow();this.enableA11y(this.renderOnScroll);if(this.parent.isICS){if(!this.cssClass||this.cssClass.indexOf(" isICS")<0){this.cssClass=(this.cssClass||"")+" isICS";}var Z=this.parent.docSelector||this.parent.parent&&this.parent.parent.docSelector;if(Z&&Z.showAdvancedStyling&&Z.showAdvancedStyling()){var Y=Z.fmts||{};var b=this.parent.stateCssText||this.parent.parent.stateCssText||{};b=b.base||{};this.domNode.style.font=Y.font;this.domNode.style.paddingLeft=b.paddingX;this.domNode.style.paddingRight=b.paddingX;}}},postselectionChange:function I(Y){this.parent.postselectionChange(Y);},onitemsChange:function Q(Y){this.parent.onitemsChange(Y);},doScroll:function C(){if(this.renderOnScroll){var Z=this.scrollNode,Y=(this.renderIndex+1)*this.renderBlockSize;if(Y>=this.items.length){return ;}if((B.position(Z).h+Z.scrollTop)>=Z.scrollHeight-1){this.renderIndex++;var a=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");this.itemsContainerNode.innerHTML+=a;this.enableA11y(true);this.parent.handleDashboardAccentColor();}}}},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"mstrmojo-Buttons",children:[O(mstrmojo.desc(1442,"Ok"),function(){F.call(this.parent.parent,true);},true,{cssDisplay:"inline-block",alias:"okBtn"}),O(mstrmojo.desc(2140,"Cancel"),function(){F.call(this.parent.parent,false);},false,{cssDisplay:"inline-block",alias:"cancelBtn"})]}],handleDashboardAccentColor:function U(){if(!this.domNode||!mstrmojo.VisUtility||!mstrApp||!mstrApp.isVI){return ;}var a=this.parent.docSelector;var Y=a&&a.fmts;var Z=Y&&Y.fillColor||mstrmojo.VisUtility.getDashboardContentAccentColor("")||N;var b=".mstrmojo-ui-Pulldown .mstrmojo-ui-CheckList .item";var c;if(this.isICS){b+=" .checkboxIcon";if(Y){c=Y["s-border-color"];this.domNode.style.setProperty("--mstrd-filter-box-font-color",Y.color||"");this.domNode.style.setProperty("--mstrd-filter-box-font",Y.font||"");}}mstrmojo.VisUtility.updateCheckboxColor(Z,this.domNode,b,c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.desc","mstrmojo.Container","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo","array","hash","Button","Box","Label","ui.Pulldown");var E=mstrmojo.hash,K=mstrmojo.array,A=mstrmojo.vi.ui.DatasetUnitMenuUtils,L=mstrmojo.VisUtility,D=4,M={fontSize:"12px",fontFamily:"Arial"},J=80,P=mstrmojo.desc(17384,"Select an Attribute"),G=mstrmojo.desc(17383,"Select a Metric"),H=mstrmojo.desc(16896,"Use objects to replace"),I=L.measureTextWidth(H,M);mstrmojo.vi.ui.AMSelectorCandidatePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.vi.ui.AMSelectorCandidatePicker",markupString:'<div class="candidate-picker-curtain"><div class="candidate-picker"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},selector:null,rplObj:null,viUnit:null,maxSizeFromText:null,init:function O(Q){this._super(Q);this.initCandidateList();},getCandidateData:function F(){var R=E.walk("viUnit.boxContent.model.data",this),W=R&&R.gsi,Q=this.selector.isAttrSelector,S,U=[];if(!W){return U;}S=K.ensureArray(W);K.forEach(S,function(X){U=U.concat(Q?(X.rows||[]).concat(X.cols||[]):X.mx);});if(!Q&&R.trendref){U=L.filterTrendlineMXByDZ(U,R.dz);}return U;},calculatePulldownWidth:function N(){var Q,R=this.viUnit.width,S=parseInt(R)-80;if((S<=this.maxSizeFromText)||(this.maxSizeFromText>=I)||(S<=J)){Q=Math.max(Math.min(this.maxSizeFromText,S),J);}return Q;},initCandidateList:function B(){var U=this.getCandidateData(),Y=this;E.forEach(this.selector.replaceRelation,function(c,b){if(b===Y.viUnit.k){Y.rplObj=c;return false;}});var Q=[];var W=[];var R=-1;K.forEach(U,function(b){if(b.did!=="-1"){if(b.ru){var c=b.ru.did;if(!K.includes(Q,c)){Q.push(c);W.push({n:b.ru.n,did:b.ru.did,unit:b.ru});if(Y.rplObj&&Y.rplObj.id===c){R=W.length-1;}}}else{if(!b.is_pushdown&&!K.includes(Q,b.did)){Q.push(b.did);W.push({n:b.n,did:b.did,unit:b});if(Y.rplObj&&Y.rplObj.id===b.did){R=W.length-1;}}}}});var S=E.walk("selector.model.datasets",Y),a=[],X;E.forEach(S,function(b){X=Y.selector.isAttrSelector?b.att:b.mx;a=a.concat(X);});K.forEach(W,function(b){K.forEach(a,function(c){if(c.did===b.did){b.unit=c;return false;}});});if(R===-1){R=0;if(Y.rplObj){K.forEach(a,function(b){if(Y.rplObj.id===b.did){W.unshift({n:b.n,did:b.did,unit:b,hid:true});return false;}});}else{if(W.length>1){W.unshift({n:Y.selector.isAttrSelector?P:G,hid:true});}}}var Z;if(W.length){this.maxSizeFromText=W.map(function(b){if(!b.unit){return L.measureTextWidth(b.n,M)+32;}return L.measureTextWidth(b.n,M)+50;}).reduce(function(d,c){return Math.max(d,c);});Z=this.calculatePulldownWidth();}this.addChildren({scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:click></div>',alias:"pickerInnerBox",slot:"containerNode",onclick:function(b){b.cancel();},children:[{scriptClass:"mstrmojo.Label",text:H},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"candiPickerPulldown",cssText:Z?("width: "+Z+"px;"):"",alias:"candiPulldown",selectedIndex:R,isHostedWithin:false,items:W.map(function(b){if(b.unit){if(!b.unit.t){b.unit.t=D;}b.cls=A.getUnitCssClass(b.unit);}else{b.cls="default";}return b;}),onitemSelected:function(e,b){if(e.unit){if(!Y.rplObj||e.unit.did!==Y.rplObj.id){Y.rplObj={id:e.unit.did,tp:e.unit.t||D};Y.selector.tmp_replaceRelation[Y.viUnit.k]=E.clone(Y.rplObj);var d=mstrmojo.func.safeCall("viUnit.parent.getTgtSelections",Y)();var c=d&&d.notify;if(c instanceof Function){c();}}else{if(Y.rplObj&&e.unit.did===Y.rplObj.id){Y.selector.tmp_replaceRelation[Y.viUnit.k]=E.clone(Y.rplObj);}}}this.selectedNode.className="mstrmojo-ui-Pulldown-text "+e.cls;}}]});if(W.length===1&&!W[0].did){this.pickerInnerBox.candiPulldown.set("enabled",false);}},resize:function C(){if(this.maxSizeFromText){var R=this.calculatePulldownWidth(),Q=E.walk("pickerInnerBox.candiPulldown.domNode.style",this);if(Q){Q.width=R?(R+"px"):"";}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.requiresCls("mstrmojo.num");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var k=mstrmojo.chart,g=k.model,t=mstrmojo.VisUtility,X=mstrmojo.dom,R=k.enums,E=R.EnumFontStyle,U=g.enums,AD=U.EnumDSSGraphProperty,b=U.EnumDSSGraphDataTextShowType,AE=U.EnumDSSGraphObject,M=mstrmojo.num;var F=mstrmojo.gm.EnumDataLabels;var Z=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var u=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var c=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function Y(AO){switch(AO){case AD.DssGraphFontColor:return 0;case AD.DssGraphFontName:return 1;case AD.DssGraphFontSize:return 2;case AD.DssGraphFontStyle:return 3;case AD.DssGraphFontSize100:return 4;default:return -1;}}function z(AO){switch(AO){case AD.DssGraphAreaColor:return 0;case AD.DssGraphFillEffect:return 1;case AD.DssGraphAreaAlpha:return 2;}return -1;}function AB(AO){var AP;switch(AO){case AE.DssGraphX1Body:case AE.DssGraphX1Label:case AE.DssGraphX1Major:case AE.DssGraphX1Minor:case AE.DssGraphUserLabel3:case AE.DssGraphUserLine3:AP="X1";break;case AE.DssGraphX2Body:case AE.DssGraphX2Label:case AE.DssGraphX2Major:case AE.DssGraphX2Minor:case AE.DssGraphUserLabel4:case AE.DssGraphUserLine4:AP="X2";break;case AE.DssGraphY1Body:case AE.DssGraphY1Label:case AE.DssGraphY1Major:case AE.DssGraphY1Minor:case AE.DssGraphUserLabel1:case AE.DssGraphUserLine1:AP="Y1";break;case AE.DssGraphY2Body:case AE.DssGraphY2Label:case AE.DssGraphY2Major:case AE.DssGraphY2Minor:case AE.DssGraphUserLabel2:case AE.DssGraphUserLine2:AP="Y2";break;case AE.DssGraphZBody:AP="Z";break;case AE.DssGraphO1Body:case AE.DssGraph2DO1Label:case AE.DssGraphO1Major:case AE.DssGraphO1Minor:AP="O1";break;case AE.DssGraphO2Body:case AE.DssGraph2DO2Label:case AE.DssGraphO2Major:case AE.DssGraphO2Minor:AP="O2";break;default:AP="No_Axis";break;}return AP;}function h(AO,AP){if(!!AO===false){return undefined;}return undefined;}function a(AT,AO){if(!!AT===false){return undefined;}var AY,AW,AV=AO.isVertical!==undefined?AO.isVertical:true,AQ=AO.isGridChart||false,AZ=AO.isPieShape||false,AU={Name:0,Value:0},AR=AT.gaid,AS=AT.goid,AP=AT.gsid,AX=AT.v;if(!!AR===false){return undefined;}switch(AR){case AD.DssGraphShowLBLFeeler:if(AZ){AU.Name="DataLabel";if((AX&b.DssGraphDataTextValue)!==0){AU.Value=F.SHOW_VALUE_ONLY;}else{if((AX&b.DssGraphDataTextLabel)!==0){AU.Value=F.SHOW_TEXT_ONLY;}else{AU.Value=F.HIDE;}}}break;case AD.DssGraphAreaColor:case AD.DssGraphFillEffect:case AD.DssGraphAreaAlpha:AW=z.call(this,AR);if(AW<0){return undefined;}if(AS===AE.DssGraphBackground){AU.Name=c[AW][0];if(AU.Name.search("Trans")!==-1){AU.Value=AX/255*100;}else{AU.Value=AX;}}break;case AD.DssGraphShowLegendText:AU.Name="LegendVisibleness";AU.Value=AX!==0;break;case AD.DssGraphSDShowDataText:AU.Name="ShowSeriesDataLabel";AU.Value=AX!==0;break;case AD.DssGraphShowDataText:if(AZ===false){AU.Name="DataLabel";AU.Value=F.HIDE;if(AX&b.DssGraphDataTextValue){AU.Value=F.SHOW_VALUE_ONLY;}else{if(AX&b.DssGraphDataTextLabel){AU.Value=F.SHOW_TEXT_ONLY;}}}break;case AD.DssGraphFontColor:case AD.DssGraphFontName:case AD.DssGraphFontSize100:case AD.DssGraphFontSize:case AD.DssGraphFontStyle:AU.Value=AX;AY=AB.call(this,AS);AW=Y.call(this,AR);if(AW<0){return undefined;}if(AW===4){AW=3;AU.Value/=100;}if(AY==="No_Axis"){if(AS===AE.DssGraphDataText){if(AZ){return undefined;}AU.Name=Z[AW][2];}else{if(AS===AE.DssGraphPieFeelerLabel||AS===AE.DssGraphPieFeelerLabel){if(AZ===false){return undefined;}AU.Name=Z[AW][2];}else{if(AS===AE.DssGraphLegendText){AU.Name=Z[AW][3];}else{return undefined;}}}}else{if(AY[0]==="X"){AU.Name=Z[AW][0];}else{if(AY[0]==="Y"){AU.Name=Z[AW][1];}else{if(AY[0]==="O"){AU.Name=AV?Z[AW][0]:Z[AW][1];}else{return undefined;}}}}break;}return AU;}var W,m=String.fromCharCode,AH=mstrmojo.locales.datetime,AN=0,L=document.getElementById("measureText"),B={},l={};var q=0.03,K=0,S=0,H=0.2;function s(AP){var AO,AQ=[],AR;for(AO=0;AO<=AP;AO++){AR=AO.toString(16);if(AR.length===1){AR="0"+AR;}AQ[AO]=AR;}W=AQ;return AQ;}function AK(AO){var AP=parseFloat(AO);if(isNaN(AP)===false&&AP!==undefined&&AP!==null){return AP;}return 0;}function D(AO){AO=AO.replace(/ddd/g,"EEE");AO=AO.replace(/AM\/PM/g,"a");AO=AO.replace(/tt/g,"a");AO=AO.replace(/:'/g,":");AO=AO.replace(/'\/'/g,"/");AO=AO.replace(/\\/g,"");var AP,AR=true,AQ=AO.length;for(AP=0;AP<AQ;AP++){if(AO[AP]==="h"||AO[AP]==="H"||AO[AP]===":"){AR=true;}else{if(AO[AP]===" "&&AR){AR=true;}}if(AO[AP]==="m"&&AR){AO=AO.substring(0,AP)+"M"+AO.substring(AP+1);}}return AO;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{FIX_FRACTION_CONDENSED:2,point2D:{},rect2D:{},tripleId:{create:function N(AP,AT,AR,AQ,AS){if(AP===null||AP===undefined){AP=-3;}if(AT===null||AT===undefined){AT=-3;}if(AR===null||AR===undefined){AR=-3;}var AO={mObjectId:AP,mSeriesId:AT,mGroupId:AR};if(AQ!==undefined&&AQ!==null){AO.angleByIndex=AQ;}if(AS!==undefined&&AS!==null){AO.sliceById=AS;}return AO;},walks:function o(AS,AQ){if(!!AS===false||!!AQ===false){return null;}if(AS.length===1){return AQ[AS[0]];}var AR=(AS&&AS.length)||0,AP,AO=AS[AP];for(AP=0;AP<AR;AP++){if(AQ[AO]===undefined){AQ[AO]={};}AQ=AQ[AO];}return AQ;},equal:function e(AO,AP){return(AO.mObjectId===AP.mObjectId&&AO.mSeriesId===AP.mSeriesId&&AO.mGroupId===AP.mGroupId);},reset:function w(AQ,AS,AR,AP,AO,AT){AQ.mObjectId=AS!==undefined?AS:-3;AQ.mSeriesId=AR!==undefined?AR:-3;AQ.mGroupId=AP!==undefined?AP:-3;if(AO!==undefined&&AO!==null){AQ.angleByIndex=AO;}if(AT!==undefined&&AT!==null){AQ.sliceById=AT;}return AQ;}},transformProperty:function A(AO,AQ,AP){if(AQ===0){return a.call(this,AO,AP);}return h.call(this,AO,AP);},abbreviateNumber:function f(AY,AO){var AZ,AP,Aa="",AR=(AY<0),Ab=(this.isIntegar(AY)===false);if(Ab){AO++;}if(AY<0){AO++;}var AU=AR?-AY:AY;var AV=0;if(AU>=1e+27){AU=999;Aa="Y";}else{if(AU>=1e+24){AU/=1e+24;Aa="Y";}else{if(AU>=1e+21){AU/=1e+21;Aa="Z";}else{if(AU>=1000000000000000000){AU/=1000000000000000000;Aa="E";}else{if(AU>=1000000000000000){AU/=1000000000000000;Aa="P";}else{if(AU>=1000000000000){AU/=1000000000000;Aa="T";}else{if(AU>=1000000000){AU/=1000000000;Aa="B";}else{if(AU>=1000000){AU/=1000000;Aa="M";}else{if(AU>=1000){AU/=1000;Aa="K";}else{if(AU>=1){AV++;}else{if(AU>=0.001){AV++;}else{if(AU>=0.000001){AV++;}else{if(AU>=1e-9){AV++;}else{if(AU>=1e-12){AV++;}else{AR=false;}}}}}}}}}}}}}}if(this.isIntegar(AU)===false){AZ=M.toLocaleString(AU.toString());var AQ=5,AT=this.FIX_FRACTION_CONDENSED,Ac;AP=AZ.indexOf(M.getDecimal());Ac=AZ.length-AP-1;if(Ac>AQ||(Ac>AT&&Ac>AP)){if(Ac>AQ&&AO-Ac<0){AT=Math.max(AT,Math.min(AT,AO-Ac));}else{AT=Math.max(1,Math.min(AT,AO-Ac));}AU=AU.toFixed(AT);}}AZ=M.toLocaleString(AU.toString());if(this.isIntegar(AU)===false){var AX=AZ.length-1;AP=AZ.indexOf(M.getDecimal());if(AP!==-1){if(AP>=AX){AZ=AZ.substring(0,AP);}else{var AW,AS=true;for(AW=AX;AW>AP&&AS;--AW){if(AZ[AW]!=="0"){AS=false;}}if(AS){AZ=AZ.substring(0,AP);}}}}if(AR){AZ="-"+AZ;}AZ+=Aa;return AZ;},getScalePlate:function AJ(AO){AO=AO||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AO){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AG(AQ,AP,AR){var AO={mUseLogarithmicScale:AQ,mAlwaysIncludeZero:!AQ&&(AP||!!(AR&1)||!!(AR&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AO;},evaluateTextMargin:function Q(AO){this.mTextMargins=this.mTextMargins||{};var AP=this.mTextMargins;if(AP[AO]){return AP[AO];}var AQ=[];AQ[0]=Math.floor(AO*q+0.5);AQ[1]=Math.floor(AO*K+0.5);AQ[2]=Math.max(Math.floor(AO*S+0.5),1);AP[AO]=AQ;return AQ;},AlmostZero:function AC(AO){return(Math.abs(AO)<0.000001);},isValidNumber:function J(AO){if(typeof AO==="number"){if(AO===0){return true;}return !!AO;}return false;},isIntegar:function n(AO){return AO===+AO&&AO===(AO|0);},HasArrayIntersection:function P(AP,AO){var AQ;for(AQ=0;AQ<AP.length;AQ++){if(AO.indexOf(AP[AQ])!==-1){return true;}}return false;},EscapeString:function C(AO){var AQ='"',AP='\\"',AR=new RegExp(AQ,"g");return String(AO).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AR,AP).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function O(AO){var AQ='"',AP='\\"',AR=new RegExp(AQ,"g");return String(AO).replace(/\\/g,"\\\\").replace(AR,AP).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AI(AP){var AO;if(!AP.buf||AP.len===-1){return ;}AO=AP.len;var AQ=String(AP.buf[AO]);if(AQ&&AQ[AQ.length-1]===","){AP.buf[AO]=AQ.slice(0,-1);}},decodeUTF8:function j(AO){var AP="",AR=0,AT=0,AS=0,AQ=0;while(AR<AO.length){AT=AO.charCodeAt(AR);if(AT<128){AP+=m(AT);AR++;}else{if((AT>191)&&(AT<224)){AS=AO.charCodeAt(AR+1);AP+=m(((AT&31)<<6)|(AS&63));AR+=2;}else{AS=AO.charCodeAt(AR+1);AQ=AO.charCodeAt(AR+2);AP+=m(((AT&15)<<12)|((AS&63)<<6)|(AQ&63));AR+=3;}}}return AP;},formatDateTimeValue:function i(AP,AU){var AS=new mstrmojo.chart.common.DSSDateTime({ifTime:AU});var AO="";var AR="";var AV=0;while(AV<AP.length){var AQ=1;switch(AP.charAt(AV)){case"[":AV++;while(AV<AP.length&&AP.charAt(AV)!=="]"){AR+=AP.charAt(AV);AV++;}if(AR.length>0&&(AR[0]===">"||AR[0]==="<"||AR[0]==="=")){AR="";}AV++;break;case"y":AV++;while(AV<AP.length&&AP.charAt(AV)==="y"){AQ++;AV++;if(AQ===4){break;}}if(AQ===1||AQ===2){AO+=this.fillZeroToWidth(AS.mnYear%100,2);}else{if(AQ===3){AO+=this.fillZeroToWidth(AS.mnYear%100,2);AV--;}else{if(AQ===4){AO+=AS.mnYear;}}}break;case"M":AV++;while(AV<AP.length&&AP.charAt(AV)==="M"){AQ++;AV++;}if(AQ<3){AO+=this.fillZeroToWidth(AS.mnMonth,AQ);}else{if(AQ===3){AO+=AH.MONTHNAME_SHORT[AS.mnMonth];}else{AO+=AH.MONTHNAME_FULL[AS.mnMonth];}}break;case"d":AV++;while(AV<AP.length&&AP.charAt(AV)==="d"){AQ++;AV++;}if(AQ<3){AO+=this.fillZeroToWidth(AS.mnDay,AQ);}else{if(AQ===3){AO+=AH.dayShortNames[AS.mnDay];}else{AO+=AH.dayNames[AS.mnDay];}}break;case"h":AV++;while(AV<AP.length&&AP.charAt(AV)==="h"){AQ++;AV++;}var AT=AS.mnHour;if(AT===0){AT=12;}if(AT>12){AT-=12;}AO+=this.fillZeroToWidth(AT,AQ);break;case"H":AV++;while(AV<AP.length&&AP.charAt(AV)==="H"){AQ++;AV++;}AO+=this.fillZeroToWidth(AS.mnHour,AQ);break;case"m":AV++;while(AV<AP.length&&AP.charAt(AV)==="m"){AQ++;AV++;}AO+=this.fillZeroToWidth(AS.mnMinute,AQ);break;case"s":AV++;while(AV<AP.length&&AP.charAt(AV)==="s"){AQ++;AV++;}AO+=this.fillZeroToWidth(AS.mnSecond,AQ);break;case"S":AV++;while(AV<AP.length&&AP.charAt(AV)==="S"){AQ++;AV++;}AO+=this.fillZeroToWidth(AS.mnMillisecond,AQ);break;case"a":AT=AS.mnHour;if(AT<12){AO+=AH.AM_NAME;}else{AO+=AH.PM_NAME;}AV++;break;default:AO+=AP.charAt(AV++);break;}}if(AR.length!==0){AO='<SPAN STYLE="COLOR: '+AR+'" >'+AO+"</SPAN>";}return AO;},fillZeroToWidth:function p(AS,AQ){var AP="",AR=AP+AS;var AO=AR.length;while(AO<AQ){AR="0"+AR;AO++;}return AR;},fillZeroRightToWidth:function AM(AT,AR){var AQ="",AS=AQ+AT;var AP=AS.indexOf(".");if(AP!==-1){AS=AS.slice(0,AP)+AS.slice(AP+1);}var AO=AS.length;while(AO<AR){AS+="0";AO++;}return AS;},updateCache:function AL(AP,AS,AT){var AR=(AS&&AS.length)||0,AQ,AO,AU=AP;for(AQ=0;AQ<AR-1;AQ++){AO=AS[AQ];if(!AU[AO]){AU[AO]={};}AU=AU[AO];}AU[AS[AR-1]]=AT;},measureTextHeight:function(AT,AQ,AX,AU,AO){var AW,AS=AT;if(AS===" "){AS="\u00A0";}AO=AO||"pt";if(typeof AX==="number"){AX+=AO;}var AP="none",AV="normal";if(AU&E.FS_ITALIC){AP="italic";}if(AU&E.FS_BOLD){AV="bold";}var AR={fontFamily:AQ,fontSize:AX,fontStyle:AP,fontWeight:AV};if(l&&l.H&&l.H[AQ]&&l.H[AQ][AX]&&l.H[AQ][AX][AU]){AW=l.H[AQ][AX][AU];}else{AW=t.measureTextHeight("H",AR,1);this.updateCache(l,["H",AQ,AX,AU],AW);}return AW;},measureText:function AA(AW,AT,Ae,AX,AQ,AY,Aa){var AP=true,AO,Ac=Ae+1,AS=false;var AV=AW;if(AV===" "){AV="\u00A0";AS=true;}AQ=AQ||"pt";if(typeof Ae==="number"){Ae+=AQ;}if(!AY&&!Aa&&B&&B[AV]&&B[AV][AT]&&B[AV][AT][Ae]&&B[AV][AT][Ae][AX]){return B[AV][AT][Ae][AX];}if(AP){var AR="normal",AZ="normal";if(AX&E.FS_ITALIC){AR="italic";}if(AX&E.FS_BOLD){AZ="bold";}var AU={fontFamily:AT,fontSize:Ae,fontStyle:AR,fontWeight:AZ};if(l&&l.H&&l.H[AT]&&l.H[AT][Ae]&&l.H[AT][Ae][AX]){Ac=l.H[AT][Ae][AX];}else{Ac=t.measureTextHeight("H",AU,true);this.updateCache(l,["H",AT,Ae,AX],Ac);}if(AY&&!Aa&&!AS){AO=t.measureTotalTextSizeSplitting(AW,AU,0).width;}else{if(Aa&&!AS){AO=t.measureTotalTextSizeSplitting(AW,AU,0,true).width;Ac*=2;}else{AO=t.measureTextWidth(AW,AU,0);}}}else{if(!L){var Ab=document.createElement("div");Ab.id="measureText";Ab.style.position="absolute";Ab.style.top="0";Ab.style.visibility="hidden";Ab.style.height="auto";Ab.style.width="auto";document.body.appendChild(Ab);L=Ab;}X.emptyNode(L);L.appendChild(document.createTextNode(AV));L.style.fontFamily=AT;L.style.fontSize=Ae;L.style.fontWeight="normal";L.style.fontStyle="none";if(AX&E.FS_ITALIC){L.style.fontStyle="italic";}if(AX&E.FS_BOLD){L.style.fontWeight="bold";}AO=L.scrollWidth+1;Ac=L.scrollHeight+1;}var Ad={Width:AO,Height:Ac};this.updateCache(B,[AV,AT,Ae,AX],Ad);return Ad;},ReplaceDecimalPoint:function AF(AP,AO){return AP.replace(".",AO);},ReplaceMinusSign:function y(AO,AP){return AO.replace("-",AP);},insert:function G(AP,AO,AQ){if(typeof AP==="string"&&typeof AO==="string"&&AQ<=AP.length){return AP.substr(0,AQ)+AO+AP.substr(AQ);}return AP;},InsertThousandSeparator:function x(AQ,AR,AV){var AO=AV.mstrDecimalPoint;var AP=AQ.indexOf(AO);if(AP===-1){AP=AQ.length;}var AS=0;while(AS<AP&&!this.chk_val(AQ.charAt(AS))){AS++;}var AU=AQ;var AT;for(AT=AP-3;AT>AS;AT-=3){AU=this.insert(AU,AR,AT);}return AU;},chk_val:function I(AO){return/^\d+$/.test(AO);},hFormatValue:function d(Ab,AS,Am,BA){var AZ=0;var At=0;var Ai=Ab.length;var BI=false;if(!BA){BA={};var Ar=window.navigator.userLanguage||window.navigator.language;var BT=Ar.split("-");this.mstrLanguageCode=BT[0];this.mstrCountryCode=BT[1]||BT[0];BA.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";BA.mstrCurrencySymbol="$";BA.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";BA.mstrPercentSign="%";BA.mstrMinusSign="-";}while(AZ<Ai){if(Ab.charAt(AZ)==='"'){AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=='"'){AZ++;}AZ++;}else{if(Ab.charAt(AZ)==="["){AZ++;var As="";while(AZ<Ai&&Ab.charAt(AZ)!=="]"){As+=Ab.charAt(AZ);AZ++;}if(As.length>1&&(As.charAt(0)===">"||As.charAt(0)==="<"||As.charAt(0)==="=")){var AP=-1;var BC=0;switch(As.charAt(0)){case">":if(As.charAt(1)>="0"&&As.charAt(1)<="9"){AP=1;BC=1;}else{if(As.charAt(1)==="="&&As.length>2&&As.charAt(2)>="0"&&As.charAt(2)<="9"){AP=2;BC=2;}}break;case"=":if(As.charAt(1)>="0"&&As.charAt(1)<="9"){AP=3;BC=1;}else{if(As.charAt(1)==="="&&As.length>2&&As.charAt(2)>="0"&&As.charAt(2)<="9"){AP=3;BC=2;}}break;case"<":if(As.charAt(1)>="0"&&As.charAt(1)<="9"){AP=5;BC=1;}else{if(As.charAt(1)==="="&&As.length>2&&As.charAt(2)>="0"&&As.charAt(2)<="9"){AP=4;BC=2;}}break;}if(AP>0){var Ad=As.substr(BC);var BL=parseFloat(Ad);if((AP===1&&AS>BL)||(AP===2&&AS>=BL)||(AP===3&&AS===BL)||(AP===4&&AS<=BL)||(AP===5&&AS<BL)){BI=true;}return mstrmojo.num.formatByMask(Ab,AS);}}}else{if(Ab.charAt(AZ)===";"){if(BI){Ai=AZ;break;}else{At=AZ+1;AZ++;}}else{AZ++;}}}}if(!BI){At=0;}AZ=At;var Ay=false;while(AZ<Ai){if(Ab.charAt(AZ)==='"'){AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=='"'){AZ++;}if(AZ<Ai){AZ++;}}else{if(Ab.charAt(AZ)==="["){AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=="]"){AZ++;}if(AZ<Ai){AZ++;}}else{if(Ab.charAt(AZ)==="y"||Ab.charAt(AZ)==="M"||Ab.charAt(AZ)==="d"||Ab.charAt(AZ)==="h"||Ab.charAt(AZ)==="H"||Ab.charAt(AZ)==="m"||Ab.charAt(AZ)==="s"||Ab.charAt(AZ)==="S"){Ay=true;break;}else{AZ++;}}}}if(Ay){var BG="";if(BI){BG=Ab.substr(At,Ai-At);}else{BG=Ab;}return mstrmojo.num.formatByMask(BG,AS);}var BK;var Aq;var Av=false;var AV=false;var BF=false;var Ah=false;var BQ=[];var Al="";var Ae=0;var BB=false;var Ac=0;var BR="";var AW="";var Ap="";var A9="";var Aa=0;var BN=0;var BM=false;var BD=BA.mstrCurrencySymbol;var A4=BA.mstrThousandSeparator;var A0=BA.mstrDecimalPoint;var BE=BA.mstrPercentSign;var A8=BA.mstrMinusSign;AZ=At;var Ao="";if(AS<0&&!BI){while(AZ<Ai&&Ab.charAt(AZ)!==";"){if(Ab.charAt(AZ)==='"'){AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=='"'){AZ++;}}AZ++;}AZ++;if(AZ>=Ai){if(AS<0){BR+="-";}AZ=At;}}var BS=false;while(AZ<Ai){var Au=false;switch(Ab.charAt(AZ)){case"[":AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=="]"){Ap+=Ab.charAt(AZ);AZ++;}if(Ap.length>0&&(Ap.charAt(0)===">"||Ap.charAt(0)==="<"||Ap.charAt(0)==="=")){Ap="";}AZ++;break;case'"':AZ++;while(AZ<Ai&&Ab.charAt(AZ)!=='"'){if(BS){AW+=Ab.charAt(AZ);}else{BR+=Ab.charAt(AZ);}AZ++;}AZ++;break;case"#":case"0":var Ag=Ab.charAt(AZ);BS=true;var Ak=1;AZ++;while(AZ<Ai&&Ab.charAt(AZ)===Ag){Ak++;AZ++;}if(AZ+1<Ai&&Ab.charAt(AZ)==="-"&&Ab.charAt(AZ+1)===Ag){Ah=true;BQ.push(Ak);AZ++;while(true){Ak=0;while(AZ<Ai&&Ab.charAt(AZ)===Ag){Ak++;AZ++;}BQ.push(Ak);if(AZ>=Ai||Ab.charAt(AZ)!=="-"){break;}AZ++;}}while(AZ<Ai){if(Ab.charAt(AZ)===","){if(AZ+1<Ai&&Ab.charAt(AZ+1)===Ag){Av=true;}else{break;}}else{if(Ab.charAt(AZ)!==Ag){break;}}AZ++;}break;case".":BS=true;AZ++;Ae=0;while(AZ<Ai&&Ab.charAt(AZ)==="0"){Ae++;AZ++;}if(Ae===0){while(AZ<Ai&&Ab.charAt(AZ)==="#"){Ae++;AZ++;}}break;case"E":BN=6;while(AZ<Ai&&Ab.charAt(AZ)!=="0"){if(Ab.charAt(AZ)==="+"&&AZ<Ai&&Ab.charAt(AZ+1)==="0"){AV=true;}else{A9+=Ab.charAt(AZ);}AZ++;}Aa=0;while(AZ<Ai&&Ab.charAt(AZ)==="0"){Aa++;AZ++;}break;case"%":BN=4;AZ++;break;case"(":AZ++;BR+="(";break;case")":AZ++;AW+=")";break;case"-":AZ++;if(AS<0){BR+=A8;}break;case"?":AZ++;break;case"/":if(AZ>At&&Ab.charAt(AZ-1)==="?"&&AZ+1<Ai&&Ab.charAt(AZ+1)==="?"){BN=5;BB=false;Aq=AZ-1;while(Aq>At&&Ab.charAt(Aq)==="?"){Aq--;}while(Aq>At&&Ab.charAt(Aq)===" "){Aq--;}if(Aq>=At&&(Ab.charAt(Aq)==="#"||Ab.charAt(Aq)==="0")){BB=true;}Ac=0;AZ++;while(AZ<Ai&&Ab.charAt(AZ)==="?"){Ac++;AZ++;}}else{AZ++;}break;case",":if(AZ>At&&(Ab.charAt(AZ-1)==="0"||Ab.charAt(AZ-1)==="#")){BF=true;}Aq=AZ+1;while(Aq<Ai){if(Ab.charAt(Aq)===","){Aq++;continue;}else{break;}}if(Aq===Ai||Ab.charAt(Aq)==="."){BM=true;}if(BM||(!BM&&AZ+1<Ai&&Ab.charAt(AZ+1)===",")){while(AZ<Ai&&Ab.charAt(AZ)===","){AS/=1000;AZ++;}AZ--;}AZ++;break;case";":Au=true;break;case"$":if(BS){AW+=BD;}else{BR+=BD;}AZ++;break;case"_":if(BS){AW+=" ";}else{BR+=" ";}AZ++;AZ++;break;default:if(BS){AW+=Ab.charAt(AZ);}else{BR+=Ab.charAt(AZ);}AZ++;}if(Au){break;}}if(AS<0){AS=-AS;if(BR.length===0){BR=A8;}}var A2="";if(Ah){var Ax=0;for(BK=0;BK<BQ.length;BK++){Ax+=BQ[BK];}A2=Ao=this.fillZeroToWidth(Ax,AS.toFixed());for(BK=0;BK<BQ.length-1;BK++){Ax-=BQ[BK];var Aw=A2.length-Ax;A2=A2.slice(0,Aw)+"-"+A2.slice(Aw);}}else{switch(BN){case 0:if(BF){AS/=1000;}var A6=AS;if(A6<0){A6=-A6;}var AO=0;while(A6>=10){A6/=10;AO++;}if(AO>=15){A2=Ao=this.fillZeroRightToWidth((A6<0?-A6:A6),15);A2=A2.substr(0,16);if(A2.charAt(15)>="5"){var AY=14;while(AY>=0&&A2.charAt(AY)==="9"){A2=A2.slice(0,AY)+"0"+A2.slice(AY+1);AY--;}var AT=A2.charAt(AY);AT++;if(AY>=0){A2=A2.slice(0,AY)+AT+A2.slice(AY+1);}else{A2="1"+A2;}}A2=A2.substr(0,15);var BJ;for(BJ=AO-14;BJ>0;BJ--){A2+="0";}if(AS<0){A2=A8+A2;}}else{Ao+=String((+(Math.round(+(String(AS).indexOf("e")>0?String(parseFloat(String(AS)).toFixed(Math.min(Ae+2,20))):String(AS)+"e"+Math.min(Ae,20)))+"e"+-Math.min(Ae,20))).toFixed(Math.min(Ae,20)));A2=Ao;A2=this.ReplaceDecimalPoint(A2,A0);if(AS<0){A2=this.ReplaceMinusSign(A2,A8);}}if(Av){A2=this.InsertThousandSeparator(A2,A4,BA);}if(BF){A2+=Al;}break;case 5:if(BF){AS/=1000;}var An=10;for(BK=1;BK<Ac;BK++){An*=10;}var AQ={numerator:0,denominator:1};var AX={numerator:1,denominator:1};var AU={numerator:1,denominator:2};var A1={numerator:0,denominator:1};var Aj=AS>=0;var A7=Math.abs(AS);var A5=parseInt(A7,10);A7-=A5;while(AU.denominator<An){if(Math.abs(AK.call(AU)-A7)<1e-15){A1=AU;break;}if(AK.call(AU)>A7){AX=AU;}else{AQ=AU;}AU.denominator=AQ.denominator+AX.denominator;AU.numerator=AQ.numerator+AX.numerator;}if(AU.denominator>=An){if(A7-AK.call(AQ)<AK.call(AX)-A7){A1=AQ;}else{A1=AX;}}if(A5>0){A1.numerator+=A5*A1.denominator;}if(A1.denominator===0){BB=false;}var BH=false;var A3=false;var BP=A1.numerator;if(BB){A5=Math.floor(A1.numerator/A1.denominator);BP=A1.numerator%A1.denominator;A3=A3||(BP!==0);if(A5>0){BH=true;Ao+=A5;if(A3){Ao+=" ";}}}if(!A3&&!BH&&BP===0){Ao+="0";}else{if(!A3&&BH&&BP===0){AN++;}else{Ao+=BP;Ao+="/";Ao+=A1.denominator;}}A2=Ao;if(!Aj){A2=A8+A2;}if(Av){A2=this.InsertThousandSeparator(A2,A4,BA);}if(BF){A2+=Al;}break;case 4:AS*=100;Ao+=(AS+Math.pow(0.1,Ae+6)).toFixed(Ae);A2=Ao;A2=this.ReplaceDecimalPoint(A2,A0);if(AS<0){A2=this.ReplaceMinusSign(A2,A8);}if(Av){A2=this.InsertThousandSeparator(A2,A4,BA);}A2+=BE;break;case 6:var Az=AS;var BO=0;if(Az>1){while(Az>=10){Az/=10;BO++;}}else{if(Az!==0){while(Az<1){Az*=10;BO--;}}}Ao+=(Az+Math.pow(0.1,Ae+6)).toFixed(Ae);Ao+=A9;if(AV&&BO>=0){Ao<<"+";}if(BO<0){Ao<<"-";BO=-BO;}Ao+=this.fillZeroToWidth(BO,Aa);A2=Ao;A2=this.ReplaceDecimalPoint(A2,A0);if(AS<0){A2=this.ReplaceMinusSign(A2,A8);}break;}}var AR=BR+A2+AW;var Af=false;if(Ap.length!==0&&Af){AR='<SPAN STYLE="COLOR: '+Ap+'" >'+AR+"</SPAN>";}return AR;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.num","mstrmojo.VisUtility","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.models.FormatModel","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface","mstrmojo.EnumSubtotals");var M=mstrmojo.array,P=mstrmojo.hash,Y=mstrmojo.string,b=mstrmojo.num,AT=b.UNIT,AV=mstrmojo.VisUtility,Q=mstrmojo.models.datasets.DataInterface,W=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,X=mstrmojo.vi.viz.EnumDSSDropZones,U=Y.decodeHtmlString;var m="-1",AM=-1,F=4,AI=1,AS=2,a=3;var D=1,E=2,N=3;var Ah="0";var AZ="root";var AF=6;var AL=4;var t={SERVER_SIDE:"serverSide",INFINITE:"infinite"};var AD={SERVER_SIDE:"serverSideDatasource",INFINITE:"datasource"};var AN={HR:0,CT:1,FT:2};var AB=mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_RESERVED,Aj=mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_FIRST,S=mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_LAST;var c=1,Af=2,AK=3;var G={DssRWControlActionTypeReserved:0,DssRWControlActionTypeUndo:1,DssRWControlActionTypeRedo:2,DssRWControlActionTypeDiscard:4,DssRWControlActionTypeSubmit:8,DssRWControlActionTypeRecalculate:16,DssRWControlActionTypeExecute:32,DssRWControlActionTypeAll:4294967295};var o="rows",l="cols",AQ="mx";function R(Ao){var Ap={};P.forEach(Ao,function(As,Ar){var Aq=[];M.forEach(As,function(At){Aq.push({fillColor:At.fillclr,text:At.n});});Ap[Ar]=Aq;});return Ap;}function z(Ar){var A1=this.getTotalRows(),At=this.data,Aw=[],Ay=At.gts.col[0],Aq=Ay?Ay.es:[],A0=Aq.length,Au=0;Ar=P.copy(Ar,{minAttribute:1,minMetric:1});if(A1<Ar.minAttribute||A0<Ar.minMetric){throw"Error on getDataAsRowsArray";}do{var Ap=this.getRowHeaders(Au),As,Ao={},Ax=Ap.size();for(As=0;As<Ax;As++){while(As<Ax&&Ap.getHeader(As).getFormIndex()!==undefined){As++;}if(As<Ax){var Av=Ap.getHeader(As);Ao[Av.t.n]=Av.getName();}}for(As=0;As<Aq.length;As++){var Az=this.getMetricValue(Au,As).value;Ao[Aq[As].n]={v:Az.v,rv:Az.rv};}Aw.push(Ao);Au++;}while(Au<A1);return Aw;}function Aa(Ap){var Ao=[],Aq=this.data.gts.row;M.forEach(Aq,function(As,Ar){M.forEach(Ap,function(At){if(As.id===At.id){Ao[Ar]=true;}});});return Ao;}function AU(Ap){var Ao=Number(Ap);return isNaN(Ao)?0:Ao;}function AE(As,A3,Ax,Au,Aw,A2,Ap,Ar,Ao,A1){var Az=Aw.getName(),At=Ar?U(Az):Az,Aq=A2&&(Ar?U(A2.n):A2.n),Av=Aw.getElementId(),A0=Aw.getFormIndex()!==undefined;var Ay={name:At};if(Ao){Ay.tname=Aq;}if(A1){Ay.headerObj=Aw;Ay.attributeSelector={n:Az,tid:Ap,eid:Av,isSelectAttr:true};if(!A0){if(!As.metricSelector){As.metricSelector={};}As.metricSelector[Ap]=[{n:Az,id:Av}];}}if(A3&&Ax[Au]===true){As.colorInfo.push(Av);}As.headers.push(Ay);if(As.idValueMapping[Ap]){As.idValueMapping[Ap]+=(" "+Az);}else{As.idValueMapping[Ap]=Az;}}function AY(Ap,A4,Ar,Az,Ao,A3,A5,A0,A2){var Au;if(Ap.additional){Au=Ap.additional[Ap.additional.length-1];}for(var Ay=0;Ay<Ar.length;Ay++){var At=Ar[Ay].oid,Aw=this.getColTitles().titles[0].es[Ay].n,Av=Ao?U(Aw):Aw,Ax=this.getMetricValue(Az,Ay).value,A1={v:Ax.v,rv:Ax.rv,id:At};if(A5){var As=A3[Ay];var Aq=As&&As[Ax.ti];if(Aq){A1.threshold=Aq;}}if(A0){A1.name=Av;}if(Au){Au.values.push(P.copy(A1));Au.idValueMapping[At]=Ax.v;}if(!A2){Ap.values.push(A1);Ap.idValueMapping[At]=Ax.v;}else{Ap.values[Ay].rv=AU(Ap.values[Ay].rv)+AU(A1.rv);}}}function d(BE){var Ax=this.getTotalRows(),BH=this.data,Au=[],Az=BH.gts.col[0],As=Az?Az.es:[],A3=As.length,At,A9=0;BE=P.copy(BE,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(Ax<BE.minAttribute||A3<BE.minMetric){throw"Error on getDataAsRowsArrayAdv";}var Ao=BE.needDecode,BB=BE.hasTitleName,BA=BE.hasSelection,BI=BE.hasThreshold,A2=BE.colorByInfo,Aw=BE.additionalAttrIds||[];var BC=A2.length;var BF=BI?R(BH.th):undefined;At=Aa.call(this,A2);var A8={};do{var Aq=this.getRowHeaders(A9),Ar=Aq.size(),BG="",BD,A7,BJ,A1,Ay,Ap={headers:[],values:[],colorInfo:[],idValueMapping:{}},A0,A5;if(Aw.length){A0={headers:[],values:[],colorInfo:[],idValueMapping:{}};for(A5=0;A5<Ar;A5++){A7=Aq.getHeader(A5);BJ=A7.t;A1=BJ&&BJ.id;Ay=A7.getElementId();if(Aw.indexOf(A1)===-1){BG+=Ay;}}BD=!!A8[BG];}else{BD=false;}for(A5=0;A5<Ar;A5++){A7=Aq.getHeader(A5);BJ=A7.t;A1=BJ&&BJ.id;if(Aw.indexOf(A1)>-1){AE.call(this,A0,BC,At,A5,A7,BJ,A1,Ao,BB,BA);}else{if(!BD){AE.call(this,Ap,BC,At,A5,A7,BJ,A1,Ao,BB,BA);}}}if(BD){Ap=A8[BG];}else{if(Aw.length){Ap.additional=[];A8[BG]=Ap;}Au.push(Ap);}if(Aw.length){if(BA){A0.metricSelector=P.copy(Ap.metricSelector,A0.metricSelector);}Ap.additional.push(A0);}AY.call(this,Ap,BH,As,A9,Ao,BF,BI,BB,BD);A9++;}while(A9<Ax);if(Aw.length){for(var A4=0;A4<As.length;A4++){var Av=As[A4].oid,A6=AV.getNumberFormat(BH,A4);M.forEach(Au,function(BK){BK.idValueMapping[Av]=BK.values[A4].v=b.formatByMask(A6,BK.values[A4].rv);});}}return Au;}function s(Ar,Ao){for(var Ap=0;Ap<Ao.length;Ap++){var Aq=Ao[Ap];Ar.idValueMapping[Aq.cid]=Ar.values[Ap].v=b.formatByMask(Aq.mask,Ar.values[Ap].rv);}}function AR(Aq,Ao){var Ap;if(Aq.children){M.forEach(Aq.children,function(As){AR.call(this,As,Ao);if(Aq._eid!==AZ){if(!Aq.values){Aq.values=[];}for(Ap=0;Ap<Ao.length;Ap++){var Ar=As.values[Ap];if(!Aq.values[Ap]){Aq.values[Ap]=P.copy(Ar);}else{Aq.values[Ap].rv=AU(Aq.values[Ap].rv)+AU(Ar.rv);}}}});if(Aq._eid!==AZ){s.call(this,Aq,Ao);}}else{if(Aq.additional){s.call(this,Aq,Ao);Aq.formattedValue=Aq.values[0].v;Aq.value=Aq.values[0].rv;}}}function Ak(BG){var BJ=this.data,Ay=this.getTotalRows(),Az=BJ.gts.col[0],At=Az?Az.es:[],A5=At.length,A6={},A8=[],BA,BB=0,A9;BG=P.copy(BG,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(Ay<BG.minAttribute||A5<BG.minMetric){throw"Error on getDataAsTree";}var Aw=BG.descKey,A3=BG.childrenKey,Ao=BG.needDecode,BD=BG.hasTitleName,BC=BG.hasSelection,Ar=BG.nestedLevel||0,BI=BG.hasThreshold,A4=BG.colorByInfo,BE=A4.length,Ax=BG.additionalAttrIds||[];var BH=BI?R(BJ.th):undefined;A6[Aw]="root";A6._eid=AZ;BA=Aa.call(this,A4);var A1={},As,A2,Aq,A0;var BF=function(Bh,BM,BV,BZ,BP,Ba,Bc){var Bi=BM.getHeader(BV),Bn=Bi&&Bi.t,Bf=Bn&&Bn.id,Bd=(Bi&&Bi.getName())||"",BW=BM&&(this.isBinaryData?BM.size():(BM.headers&&BM.headers.length||0)),Bb=Bi&&Bi.getElementId(),Bk=M.some(BA,function(Bp,Bo){return Bp&&((BV-Bo)%BW===0);});if(Ax.indexOf(Bf)===-1){if(!Bh[A3]){Bh[A3]=[];A1[Bh._eid]={};}As=Bh[A3];A2=A1[Bh._eid];Aq=A2[Bb];}var Bl=BV+1,BR=[Bd];while(Bl<BM.size()){var BQ=BM.getHeader(Bl),BL=BQ&&BQ.t,BS=BL&&BL.id;if(BS===Bf){BV++;if(BQ&&BQ.getName()){BR.push(BQ.getName());}}else{break;}Bl++;}Bd=BR.join(" ");if(BE&&Bk){A8.push(Bb);}var BU=(Bi!==undefined);var Bj={headerObj:Bi,attributeSelector:{n:Bd,tid:Bf,eid:Bb,isSelectAttr:true}};var BK=[{n:Bd,id:Bb}];if(Ax.indexOf(Bf)>-1){Bc.idValueMapping[Bf]=Bd;if(BC&&BU){Bc.headers.push(Bj);Bc.metricSelector[Bf]=BK;}}else{if(!Aq||(BV===Ar-1)){Aq={_eid:Bb,idValueMapping:{}};if(Bh.idValueMapping){Aq.idValueMapping=P.copy(Bh.idValueMapping);}Aq.idValueMapping[Bf]=Bd;if(BU){Aq[Aw]=Ao?U(Bd):Bd;if(BD){var Bm=Bn&&Bn.n;Aq.tname=Ao?U(Bm):Bm;}if(BC){Aq=P.copy(Bj,Aq);}}As.push(Aq);A2[Bb]=Aq;}if(BC&&BU){Ba.push(Bj);BP[Bf]=BK;if(Bc){Bc.metricSelector[Bf]=BK;}}}if(BV<BM.size()-1&&(!Ar||(BV<Ar-1))){BF.call(this,!Aq?Bh:Aq,BM,BV+1,BZ,BP,Ba,Bc);}else{var BY=this.getMetricValue(BZ,0).value;if(BY){Aq.value=BY.rv;Aq.formattedValue=BY.v;}if(BE){Aq.colorInfo=A8;A8=[];}if(Ax.length){if(!Aq.additional){Aq.additional=[];}Aq.additional.push(Bc);}if(!Aq.values){Aq.values=[];}for(A9=0;A9<At.length;A9++){var BX=At[A9].oid,Bg=this.getMetricValue(BZ,A9).value,BN={v:Bg.v,rv:Bg.rv,id:BX};if(BI){var BT=BH[A9],BO=BT&&BT[Bg.ti];if(BO){BN.threshold=BO;}}if(BD){var Be=this.getColTitles().titles[0].es[A9].n;BN[Aw]=Ao?U(Be):Be;}if(Bc){Bc.values.push(P.copy(BN));Bc.idValueMapping[BX]=Bg.v;if(!Aq.values[A9]){Aq.idValueMapping[BX]=Bg.v;Aq.values.push(BN);}else{Aq.values[A9].rv=AU(Aq.values[A9].rv)+AU(Bg.rv);}}else{Aq.idValueMapping[BX]=Bg.v;Aq.values.push(BN);}}if(BC){Aq.headers=Ba;Aq.metricSelector=BP;}}};do{var Ap=this.getRowHeaders(BB);if(Ax.length){A0={metricSelector:{},idValueMapping:{},values:[],headers:[]};}Aq=undefined;BF.call(this,A6,Ap,0,BB,{},[],A0);BB++;}while(BB<Ay);var Au=[];for(var A7=0;A7<At.length;A7++){var Av=At[A7].oid;Au.push({cid:Av,mask:AV.getNumberFormat(BJ,A7)});}if(Au.length){AR.call(this,A6,Au);}return A6;}function B(Ao,Ap){var Aq=[];M.forEach((Ao.row||[]).concat(Ao.col||[]),function(Ar){if((Ar.id===Ap)&&(Ar.fs)){Aq=Aq.concat(Ar.fs);}});return Aq;}function Ab(Ao){return M.isArray(Ao);}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,isBinaryData:false,binaryData:null,init:function(Ao){if(Ao&&Ao.data&&Ao.binaryInfo){this.data=Ao.data;this.isBinaryData=Ao.binaryInfo.isBinaryData||false;this.binaryData=Ao.binaryInfo.binaryData||null;return ;}this.data=Ao;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true,isBinaryData:this.isBinaryData,binaryData:this.binaryData});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function Ai(){if(this.data.eg){return 0;}if(this.isBinaryData){return P.walk("data.rw.row.tc",this)||0;}var Aq=this.data,Ap=Aq&&Aq.ghs,Ao=Ap&&Ap.rhs,Ar=Ao&&Ao.items;return(Ar&&Ar.length)||0;},getTotalColHeaderRows:function L(){var Ao=this.data.ghs.chs.items;return(Ao&&Ao.length)||0;},getTotalCols:function Z(){if(this.isBinaryData){return P.walk("data.gsi.mx.length",this)||0;}return this.getColHeaders(0).size();},getTotalRowHeaderCols:function C(){return this.getRowHeaders(0).size();},getRowHeaders:function u(Ap){var Ao={data:this.data,i:Ap,isRow:true};if(this.isBinaryData){Ao.binaryData=this.binaryData;}return new mstrmojo.models.template.Headers(Ao);},getColHeaders:function h(Ao){return new mstrmojo.models.template.Headers({data:this.data,i:Ao,isRow:false});},getMetricValue:function Ag(Az,Aq,Ao){var As=this.data,Ap,A0,Ay;if(this.isBinaryData){var Av=P.walk("data.gsi.mx",this)||[],Au=Av[Aq]&&Av[Aq].did||"",At=P.walk("binaryData.schema.fields",this)||[];var Ar=At.findIndex(function(A1){return A1.name===Au;});var Ax="";if(Ar>=0){var Aw=this.binaryData&&this.binaryData.getChildAt(Ar);Ax=(Aw&&Aw.get(Az))||"";}Ap=AU(Ax);if(!Ao){A0=AV.getNumberFormat(As,Aq);Ay=b.formatByMask(A0,Ax);}else{Ay=Ap.toString();}return new mstrmojo.models.template.MetricValue({data:As,value:{rv:Ap,v:Ay}});}return new mstrmojo.models.template.MetricValue({data:As,value:As.gvs.items&&As.gvs.items[Az].items[Aq],});},getColumnHeaderCount:function x(){if(this.isBinaryData){return P.walk("data.gsi.mx.length",this)||0;}var Ao=this.data.gvs.items;return Ao?Ao[0].items.length:0;},getCSSString:function AG(){return this.data.cssString;},isEmpty:function H(){var Ap=this.data.gsi,Aq=function(Ar){return !!Ar.rows.length||!!Ar.cols.length||!!Ar.mx.length;};if(!Ap){return true;}if(Ab(Ap)){var Ao=false;M.forEach(Ap,function(Ar){Ao=P.isEmpty(Ar)||!Aq(Ar);return Ao;});return Ao;}return !Aq(Ap);},getAggregatePadding:function Al(As){var Ap=this.data.gsi&&(M.isArray(this.data.gsi)?this.data.gsi[0]:this.data.gsi).fmts,Ar=function(Au,At){return Au+At;},Ao=function(Av){var At=0;var Au=["ch","rh","va"].map(function(Aw){var Ax=false;return Av.map(function(Ay){if(Ap[Aw]&&Ap[Aw].hasOwnProperty(Ay)){if(!Ax){Ax=true;At++;}return Ap[Aw][Ay];}return 0;}).reduce(Ar)/Av.length;}).reduce(Ar)/(At||1);return At>0?Au:1;},Aq;if(!Ap){return null;}Aq={v:Ao(["tp","bp"]),h:Ao(["rp","lp"]),all:{lp:Ao(["lp"]),rp:Ao(["rp"]),tp:Ao(["tp"]),bp:Ao(["bp"])}};if(As){Aq.v=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.v));Aq.h=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.h));Aq.all.lp=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.all.lp));Aq.all.tp=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.all.tp));Aq.all.rp=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.all.rp));Aq.all.bp=parseFloat(b.convertUnits(AT.PT,AT.PX,Aq.all.bp));}return Aq;},getColResizeScenario:function n(){var Ao=this.data;if(Ao.afw){return AI;}if(Ao.afc===false){return a;}return AS;},getColResizeInfo:function AW(At){var Aw=this,Au=Aw.data,Ar={v:Aw.getColResizeScenario(),widths:null};var Ay=Au.gsi,Ap=Au.gts||{},A0=[],As=Au.twm||{},Ax=As.top||[],Az=As.bottom||[],Aq=0,Av=P.walk("row.length",Ap)===1,Ao=function(A4,A1){var A3=function(A7){var BA=A7.did,A9=P.copy(A7),BB=B(Ap,BA),A6=Q.getFormsByAttrId(BA,At),A5=BB.length?BB:[],A8=BA===m&&A7.t===F;if(A4===o&&Av&&A8){A9.did="";A9.t=AM;A5.push({fid:""});}A5.forEach(function(BE,BD){var BF=A6[M.find(A6,"fid",BE.id)],BC=(Az&&Az[Aq])||{};A0.push({n:A9.n+(A6.length?(" - "+BF.fnm):""),did:A9.did,depth:BD+1,t:A9.t||4,width:parseInt(BC.w||0,10),widthModel:{top:(Ax&&Ax[Aq])||{},bottom:BC}});Aq++;});return !A1;};if(Ay){var A2=mstrmojo.models.template.DataInterface.getGSI(Ay,Au.sortIndex);if(A2){A2[A4].every(A3);}}};Ao(o,false);if(A0.length===0){Ao(l,false);}Ao(AQ,Ay.tma===1);Ar.widths=A0;return Ar;},getRowResizeScenario:function AJ(){return this.data.rh?a:AS;},getRowResizeInfo:function i(){var Ap=this.data,Ao=Ap.rh;return{v:this.getRowResizeScenario(),height:(Ao===undefined||Ao==="")?Ap.xrh:Ao};},getCellItemNumber:function e(Az){if(!Az||Az.axis===X.Rows||Az.tui===undefined){return -1;}var As=0,At=1,Ar=this.data,Aw=Ar.gsi,Ap=0,Ay=Aw[Ap],Av=Ar.gts.col,Aq=Av[0],A0=Az.tui,Ax,Ao,Au;while(As<A0){Ax=Aq.id;if(Ax.length>0){if(!(Ax===Ao&&Au!==undefined&&Aq.cni===Au)){Ao=Ax;Au=Aq.cni;At+=1;}}else{while(Ay&&!Ay.mx.length){Ay=Aw[++Ap];}if(Ay){At+=Ay.mx.length;Ay=Aw[++Ap];}}As+=1;Aq=Av[As];}if(Aq.id.length===0&&!!Az.idx){At+=Az.idx;}return At;},getLengthOfColumnSet:function Ae(Aq,Ao){if(Ao){return Aq.cols.length;}var Ap=Aq.mx.length;return Aq.cols.length+(Ap&&Aq.tma===X.Columns?Ap-1:0);},getColumnSetIndexCellBelongsTo:function I(Ao){var As=this.getCellItemNumber(Ao),Ar;if(As===-1){return -1;}var Aq=this.data.gsi,Ap=0;while(Ap<Aq.length){Ar=Aq[Ap];As-=this.getLengthOfColumnSet(Ar);if(As<=0){return Ap;}Ap+=1;}return -1;},_getColumnHeaderDataFromColumnSet:function Ad(At){var Au=this,Aq=this.data.ghs,Ar=Aq.chs,As=Ar.items,Ao=[];As.forEach(function(Av){(Av.items||[]).forEach(function(Aw){if("mix" in Aw){Ao.push(Aw);}});});Ao.sort(function(Aw,Av){return Aw.o-Av.o;});var Ap=At.length;M.forEach(Ao,function(Aw){Aw.setIdx=Au.getColumnSetIndexCellBelongsTo(Aw);var Av=Aw._ridx=[];M.forEach(Ao,function(Ax,Ay){if(Aw.setIdx===Ax.setIdx&&Ax.mix===Aw.mix){Av.push(Ap+Ay);}});At.push(P.copyProps(["_ridx","setIdx"],Aw,P.copy(Aw._e,{})));});return At;},getColumnHeaderData:function AA(A0){var Aw=this.data,A3=Aw.gts,A1=Aw.gts.rec,A4=[],Aq=[],Ay=A3.row,A2=mstrmojo.models.template.DataInterface.getGSI(Aw.gsi),Av=A2.prop.rows.shw===Ah&&A0;M.forEach(Ay,function(A6){var A5=A6.fs,A7=A6.otp===AM;if(!Av){if(A5&&A5.length>1){M.forEach(A5,function(){A4.push(A6);});}else{A4.push(A6);}}if(A7){Aq=A6.es;}});var Au=A3.col;if(Au&&Au.length>0){if(Ab(Aw.gsi)){A4=this._getColumnHeaderDataFromColumnSet(A4);}else{if(!Aw.ghs||!Aw.ghs.chs){return A4;}var At=Aw.ghs,Ar=At.chs,Ao=Ar.items,Ap=[],Az=Ao.length>0?Ao[Ao.length-1].items:[],As=function As(A5){if(!A5||!A5.pi){return ;}var A6=A5.pi,A7=A6&&A6.ci,A8=A6&&A6.ri;if(A5.mix!==undefined){return A5;}if(A8===undefined||A7===undefined){return ;}return As(Ao[A8].items[A7]);};M.forEach(Au,function(A5){var A6=A5.otp===AM;if(!Av&&(A6&&(!A1||Ay.length===0))){A4.push(A5);}if(A6){Ap=Ap.concat(A5.es);}});var Ax=A4.length;M.forEach(Az,function(A5){delete A5._ridx;});if(Ap.length){M.forEach(Az,function(A8){var A5=As(A8);var A9=A5?A5.idx:(A8.pi?0:A8.idx),A7=Ap[A9]||Ap[0];var A6=A7._ridx=A7._ridx||[];if(A6.length===0){M.forEach(Az,function(BB,BC){var BA=As(BB);if(!A5||(BA&&BA.mix===A9)){A6.push(Ax+BC);}});}A4.push(A7);});}}}else{if(Aq.length>0){A4.push(Aq[0]);}}return A4;},getUnitById:function AH(Ap){var Ao=null;mstrmojo.models.template.DataInterface.forEachGSI(this.data.gsi,function(Ar,Aq){[Ar.rows,Ar.cols,Ar.mx,(Ar.pages||[])].some(function(As,At){if(At===2){At=-2;}else{if(At===3){At-=1;}}As.some(function(Au,Av){if(Au.did===Ap){Ao={axis:At+1,depth:Av+1,unit:Au,csKey:Aq};}return !!Ao;});return !!Ao;});return !Ao;});return Ao;},getRawData:function q(Ao,Ap){switch(Ao){case E:return z.call(this,Ap);case N:return d.call(this,Ap);}return Ak.call(this,Ap);}});var p=mstrmojo.models.template.DataInterface;mstrmojo.models.template.DataInterface.getGSI=function Am(As,Aq,Ar){if(!M.isArray(As)){return As;}if(typeof Aq==="undefined"||Aq===null){return As[0];}if(typeof Aq==="number"){var Ap=Ar?Math.max(Aq,0):Math.min(Math.max(Aq,0),As.length-1);return As[Ap];}var Ao=M.filterOne(As,function(At){return At.k===Aq;});return Ao||As[0];};mstrmojo.models.template.DataInterface.forEachGSI=function An(Au,At,As,Aq){if(P.isEmpty(Au)){return ;}if(!M.isArray(Au)){if(Aq){At.call(Aq,Au,As);}else{At(Au,As);}}var Ao=(Au&&Au.length)||0,Ap;for(Ap=0;Ap<Ao;Ap++){var Ar=Ap===(Ao-1);if(Aq){if(At.call(Aq,Au[Ap],Au[Ap].k,Ap,Au,Ar)===false){break;}}else{if(At(Au[Ap],Au[Ap].k,Ap,Au,Ar)===false){break;}}}};mstrmojo.models.template.DataInterface.getAllThresholds=function AP(Ao){var Ap=[];p.forEachGSI(Ao,function(Aq){var Ar=Aq.thresholds||{};Ap.push(Ar);});return Ap;};mstrmojo.models.template.DataInterface.inflateGridData=function(Aq){var Ar=Aq.gvs,Ap=Aq.ghs,At=Aq.isv;if(Aq.egt===undefined&&(Aq.eg===undefined||Aq.eg===null)&&!!Ar&&P.isEmpty(Ar)){var Ao={v:"",rv:""},As={items:(P.walk("chs.cws",Ap)||[0]).map(function(){return Ao;})};Ar.items=P.walk("rhs.items",Ap)?Ap.rhs.items.map(function(){return As;}):[];Ar.show=true;if(At){Ar.ignoreCells=true;}}};mstrmojo.models.template.DataInterface.modifyGridData=function g(Ap,Aq,Ar){var Ao=false;if(Ap&&Aq){Ap[Aq]=Ar;Ao=true;}return Ao;};mstrmojo.models.template.DataInterface.ENUM_ROW_ARRANGEMENT=AN;mstrmojo.models.template.DataInterface.ENUM_AG_GRID_MODE=t;mstrmojo.models.template.DataInterface.ENUM_AG_GRID_DATA_SOURCE=AD;mstrmojo.models.template.DataInterface.getRowArrangement=function y(Aq){var As=p.getGSI(Aq.gsi),Ap=P.walk("prop.rows.mg",As)==="-1",Ao=P.walk("prop.rows.cm",As)==="-1",Ar;if(Ao||Ap){Ar=AN.HR;}else{if(P.walk("fmts.rh.atw",As)){Ar=AN.CT;}else{Ar=AN.FT;}}return Ar;};mstrmojo.models.template.DataInterface.getFormatsIntersection=function(Ax,Aw,As){var Az=Ax&&p.getGSI(Ax.gsi),Ay=Az&&Az.fmts;var Ar={},Ao=Ax.gsi,Ap,A0,Av=function(A1){var A2=Ay[A1],A3=A0[A1];if(!A2||!A3){return ;}P.forEach(A3,function(A4,A5){var A6=A1+"."+A5;if(A6 in Ar){return true;}if(A5 in A2&&A2[A5]!==A4){A2[A5]=-1;Ar[A6]=true;}});},Au=[W.FMT_COL_HEADER,W.FMT_ROW_HEADER,W.FMT_VALUES];if(Au.indexOf(Aw)>-1){Au=[Aw];}Ay=P.clone(Ay);if(As){Ay=Ay[W.SUBTOTAL];}var At=Ao.length||0;for(var Aq=1;Aq<At;Aq++){Ap=Ao[Aq];A0=Ap.fmts;if(As){A0=A0[W.SUBTOTAL];}Au.forEach(Av);}return Ay||{};};mstrmojo.models.template.DataInterface.getShowBanding=function O(Ao,Aq){var Ap=Ao&&mstrmojo.models.template.DataInterface.getGSI(Ao.gsi,Aq);return !!P.walk("prop.sb",Ap);};mstrmojo.models.template.DataInterface.findSelectorControl=function j(Ap){var Ao=Ap&&Ap.sc;if(Ao&&parseInt(Ao.ct,10)===AF){return Ao;}return undefined;};mstrmojo.models.template.DataInterface.findActionControl=function Ac(Aq){var Ap=Aq&&Aq.ac;var Ao;M.forEach(Ap,function(Ar){if(parseInt(Ar.ct,10)===AL&&parseInt(Ar.aa,10)===G.DssRWControlActionTypeSubmit){Ao=Ar;}});return Ao;};mstrmojo.models.template.DataInterface.deleteSelectorControl=function AO(Ao){var Ap=Ao&&Ao.sc;if(Ap&&parseInt(Ap.ct,10)===AF){delete Ao.sc;}};mstrmojo.models.template.DataInterface.getNumberOfThresholds=function K(Ap,Ar,Aq){var As=0,At,Ao;p.forEachGSI(Ap,function(Av,Au,Aw){if(Aq===Aw){return false;}At=Av.thresholds||{};Ao=At[Ar]||[];As+=Ao.length;});return As;};mstrmojo.models.template.DataInterface.getGsiTitles=function A(Ar,Ap){var At=[],Aq,As,Ao;p.forEachGSI(Ar,function(Aw,Av,Au){Aq=Aq||Ap.getLayoutKeyByUnitKey(Av);As=Ap.getLayoutUnitDefn(Av,Aq);Ao=(As&&As.ttl)||"";At.push({n:Ao,id:Au,key:Av});});return At;};mstrmojo.models.template.DataInterface.isSubtotalOnTop=function J(Ao){return P.walk("gts.rowSubPos",Ao)===Aj;};mstrmojo.models.template.DataInterface.isSubtotalOnBottom=function k(Ao){return P.walk("gts.rowSubPos",Ao)===S;};mstrmojo.models.template.DataInterface.getSubtotalPos=function AX(Ao){return P.walk("gts.rowSubPos",Ao)||AB;};mstrmojo.models.template.DataInterface.isLockRowHeader=function AC(Ao){var Ap=Ao.lhv;return(Ap===c||Ap===AK);};mstrmojo.models.template.DataInterface.isLockColHeader=function w(Ao){var Ap=Ao.lhv;return(Ap===Af||Ap===AK);};mstrmojo.models.template.DataInterface.ENUM_LOCKED_HEADERS={OFF:0,ROW:c,COL:Af,BOTH:AK};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:AI,FIT_TO_CONTENTS:AS,FIXED:a};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:D,ROWS:E,ROWS_ADV:N};mstrmojo.models.template.DataInterface.ENUM_ACTIONCONTROL_ACTIONTYPE=G;mstrmojo.models.template.DataInterface.getAttributesAndMetricsFromGSI=function f(Au){var Ap=[],At=[],Aq={},Ao={},Av="-1";function As(Ax){if(!Ax||!M.isArray(Ax)){return ;}M.forEach(Ax,function(Ay){if(Ay.did!==Av&&!Aq[Ay.did]){Aq[Ay.did]=true;Ap.push({id:Ay.did,name:Ay.n,});}});}function Aw(Ax){if(!Ax||!M.isArray(Ax)){return ;}M.forEach(Ax,function(Ay){if(!Ao[Ay.did]){Ao[Ay.did]=true;At.push({id:Ay.did,name:Ay.n,});}});}function Ar(Ax){if(!Ax){return ;}As(Ax.rows);As(Ax.cols);Aw(Ax.mx);}if(M.isArray(Au)){M.forEach(Au,function(Ax){Ar(Ax);});}else{Ar(Au);}return{attributes:Ap,metrics:At};};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.num","mstrmojo.gm.GMEnums","mstrmojo.VisUtility");var I=mstrmojo,H=I.gm,B=I.func,G=I.array,E=H.EnumShape,F=I.VisUtility,J=H.EnumIdentityType,C="px";mstrmojo.gm.SingleSizeByLegend=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.SingleSizeByLegend",markupString:'<div class="gm-legend-sizeby-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div style="position:absolute;width:100%;height:100%;text-decoration:inherit"><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div></div>',markupSlots:{domLgdContent:function(){return this.domNode;},sepLine:function(){return this.domNode.firstChild;},sbTitle:function(){return this.domNode.childNodes[1];},sbScrollNode:function(){return this.domNode.childNodes[2];},sbMetricNamesTable:function(){return this.domNode.childNodes[2].childNodes[0];},sbDataTable:function(){return this.domNode.childNodes[2].childNodes[1];},sbCanvas:function(){return this.domNode.childNodes[2].childNodes[2];}},rowHeight:22,isHorizontal:false,postBuildRendering:function A(){var N=this.parent.width-2*H.GMLegend.Constants.TABLE_MARGIN-2*H.GMLegend.Constants.BORDER_WIDTH,L={objType:J.LEGEND},K=this.sbTitle,O=K.style,M=this.sepLine;M.style.width=N+C;O.lineHeight=H.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT+C;O.maxHeight=2*H.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT+C;K.identity={objType:J.LEGEND_TEXT,parentIdentity:L};},setupScrollNodes:function D(){this.scrollNode=this.domNode.childNodes[2];},fillSizeByTableInNormalMode:function(R,d,b,c,X){var a,M,P,O,W,Z,U=b.elements,Y=U.length,S=[],e=document,K=e.createDocumentFragment(),N=false,Q=R.styles,L=c;switch(X){case 0:if(Y>0){S.push({v:"Min: "+U[Y-1].v});S.push({v:"Max: "+U[0].v});Y=2;}break;case 1:U=b.items;G.forEach(U,function(f){S.push({v:f});});break;case 3:S=U;break;default:S=U;N=true;break;}Y=S.length;for(a=0;a<Y;a++){M=e.createElement("tr");M[H.GMLegend.Constants.SET_ATTR]("class","gm-legend-tr2");M.style.height=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT+C;if(N){P=e.createElement("td");B.safeCall("fillTextInDiv",R)(P,S[a].sign,a,H.GMLegend.Constants.TYPE_SIZEBY|H.GMLegend.Constants.HAS_SIGN|H.GMLegend.Constants.IS_SIGN);P[H.GMLegend.Constants.SET_ATTR]("class","gm-legend-sign");M.appendChild(P);L-=H.GMLegend.Constants.SIGN_WIDTH;}O=e.createElement("td");O[H.GMLegend.Constants.SET_ATTR]("class","gm-legend-desc");if(b.custMetrics&&b.custMetrics.indexOf(S[a].v)!==-1){B.safeCall("fillTextInDiv",R)(O,S[a].v,a,H.GMLegend.Constants.TYPE_SIZEBY|H.GMLegend.Constants.DRAW_METRIC_ICON,L-H.GMLegend.Constants.ICON_WIDTH,Q);Z=parseInt(O.lastChild.style.width,10);W=e.createElement("div");W.setAttribute("class",H.GMLegend.Constants.CUSTOM_SCALE_ICON_CLASSNAME);W.setAttribute("title",H.GMLegend.Constants.CUSTOM_SCALE_ICON_TITLE);O.appendChild(W);W.style.top=(H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT-8)/2+a*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT+C;O.lastChild.style.marginLeft=Z+C;}else{if(N){B.safeCall("fillTextInDiv",R)(O,S[a].v,a,H.GMLegend.Constants.TYPE_SIZEBY|H.GMLegend.Constants.HAS_SIGN,L,Q);}else{B.safeCall("fillTextInDiv",R)(O,S[a].v,a,H.GMLegend.Constants.TYPE_SIZEBY,L,Q);}}M.appendChild(O);K.appendChild(M);}d.appendChild(K);},drawSizeByIndicator:function(N,L,c){var b,M,P,Q,O,K,a,R,d,S,Y=Math.PI,U=c.elements,W=U.length,X=W*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT,Z=L.getContext("2d"),e={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},f=F.getPropertyByPath(N,"widget.model.data.visName")||F.getPropertyByPath(N,"widget.model.data.vis.vn");switch(f){case"GraphMatrixVisualizationStyle":if(N.shapeType===E.SQUARE||N.shapeType===E.TICK||N.shapeType===E.LINE||N.shapeType===E.BAR||N.shapeType===E.AREA||N.shapeType===E.RECTANGLE){S="rectangle";}else{S="circle";}break;case"VIHeatMapVisualizationStyle":S="rectangle";break;default:S="circle";break;}switch(c.caseFlag){case 0:Z.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){Z.strokeStyle="rgba(116, 116, 117, 0.7)";Z.fillStyle="rgba(116, 116, 117, 0.7)";}else{Z.strokeStyle="rgba(188, 188, 189, 0.7)";Z.fillStyle="rgba(188, 188, 189, 0.7)";}X=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT*H.GMLegend.Constants.SIZEBY_CANVAS_SCALE;d=Math.floor(H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT*0.75+0.5);M=Math.floor(d/3.5+0.5);if(S==="circle"){Q=d+1;O=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT;Z.beginPath();Z.arc(Q,O,d,0,2*Y,false);Z.fill();Z.stroke();Q=2*Q+2*M;O=Math.floor(0.53*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT+0.5);Z.beginPath();Z.arc(Q,O,M,0,2*Y,false);Z.fill();Z.stroke();}else{Q=1;O=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT-d;Z.beginPath();Z.fillRect(Q,O,2*d,2*d);Q=2*d+2+M;O=Math.floor(0.53*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT-M+0.5);Z.beginPath();Z.fillRect(Q,O,2*M,2*M);}Z.translate(0.5,0.5);Z.lineWidth=1;Z.strokeStyle="#9C9C9C";Q=2*d+3*M+3;O=Math.floor(0.53*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT+0.5);Z.beginPath();Z.moveTo(Q,O);Z.lineTo(X,O);Z.stroke();Q=2*d+2;O=Math.floor(1.53*H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT-M+0.5);Z.beginPath();Z.moveTo(Q,O);Z.lineTo(Q+M,O+M);Z.lineTo(X,O+M);Z.stroke();Z.restore();break;case 1:break;case 2:P=parseInt(U[0].diameter,10);P=Math.min(P,X);Z.fillStyle="#ADADAC";Z.strokeStyle="#ADADAC";if(S==="circle"){Q=X>>1;O=Q;Z.arc(Q,O,P>>1,0,2*Y,false);Z.fill();Z.stroke();}else{Q=(X-P)>>1;O=Q;Z.rect(Q,O,P,P);Z.fill();Z.stroke();}break;case 3:K=e.MIN_WIDTH;a=(W===1?0:(e.MAX_WIDTH-e.MIN_WIDTH)/(W-1));X=L.width;R=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT;Q=0;O=H.GMLegend.Constants.SB_TABLE_LINE_HEIGHT/2;Z.strokeStyle=e.LINE_COLOR;for(b=0;b<W;b++){Z.lineWidth=K;Z.beginPath();Z.moveTo(Q,O);Z.lineTo(X-Q,O);Z.stroke();O+=R;K+=a;}break;default:break;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.color","mstrmojo.string","mstrmojo.vi.enums.EnumFeatures","mstrmojo.VisUtility","mstrmojo.gmaps.MapEnums");var f=mstrmojo,x=f.dom,AX=f.css,O=f.array,n=f.color,Y=f.string,K=mstrmojo.VisUtility,P=90,AU=-90,y=180,g=-180,i=true,AE=f.vi.enums.EnumFeatures,F=mstrmojo.gmaps.EnumDefaultShapeFormatStyle,AY="http://www.w3.org/2000/svg";var t;function AW(){var Ac=navigator.userAgent.toLowerCase();return x.isIE||(Ac&&Ac.match(/rv:([\d.]+)\) like gecko/));}mstrmojo.gmaps.MapUtils=mstrmojo.provide("mstrmojo.gmaps.MapUtils",{_mixinName:"mstrmojo.gmaps.MapUtils",checkVal:function u(Ac){return this.checkDefined(Ac)&&!(isNaN(parseInt(Ac)));},checkVals:function W(Ad){var Ac=true;O.forEach(Ad,function(Ae){if(!this.checkVal(Ae)){Ac=false;return false;}});return Ac;},checkHasFunction:function h(Ad,Ac){return Ad&&Ad[Ac]&&Ad[Ac] instanceof Function;},checkDefined:function a(Ac){return(Ac!==undefined)&&(Ac!==null);},parseBoolean:function e(Ac){return Ac===true||Ac==="true";},isAsp:function AV(){return(window.location.pathname.indexOf("/asp/")>0);},trimString:function AL(Ac){return mstrmojo.string.trim(Ac);},log:function D(Ac){if(console&&console.log){console.log(Ac);}},replaceSpace:function Aa(Ae,Ad){if(!this.checkDefined(Ae)){return ;}var Ac=(this.checkDefined(Ad))?Ad:"_";return Ae.replace(/ /g,Ac);},getProtocol:function G(){return"https:";},createMouseEvt:function N(Ad){var Ac;if(AW()||x.isFF){Ac=document.createEvent("MouseEvents");Ac.initEvent(Ad,true,false);}else{if(window.MouseEvent){Ac=new MouseEvent(Ad);}}return Ac;},isRMClick:function z(Ac){var Ad=false;if(Ac){if(Ac.which){Ad=Ac.which===3;}else{if(Ac.button){Ad=Ac.button===2;}}}return Ad;},createNormalNode:function Q(Ac){if(Ac){return document.createElement(Ac);}},createSvgNode:function AQ(Ac){if(Ac){return document.createElementNS(AY,Ac);}},appendNode:function E(Ac,Ad){if(this.checkHasFunction(Ac,"appendChild")&&Ad){Ac.appendChild(Ad);}},appendSvgNode:function AG(Ac){if(!Ac){return ;}var Ad=this.createSvgNode("svg");this.setCssStyles(Ad,{position:"absolute",width:Ac.style.width,height:Ac.style.height,top:"0px",left:"0px"});Ac.appendChild(Ad);return Ad;},appendGNode:function p(Ad){if(!this.checkHasFunction(Ad,"appendChild")){return ;}var Ac=this.createSvgNode("g");Ad.appendChild(Ac);return Ac;},setNodeAttributes:function Z(Ad,Ac){if(!this.checkHasFunction(Ad,"setAttribute")||!Ac){return ;}for(var Ae in Ac){if(this.checkDefined(Ac[Ae])){Ad.setAttribute(Ae,Ac[Ae]);}}},setCssStyles:function L(Ae,Ad){var Ac=Ae&&Ae.style,Af;if(!Ac||!Ad){return ;}for(Af in Ad){if(this.checkDefined(Ad[Af])){Ac[Af]=Ad[Af];}}},setCssTransform:function Ab(Ac,Ad){if(!Ad||!this.checkVal(Ad.x)||!this.checkVal(Ad.y)){return ;}O.forEach(O.ensureArray(Ac),function(Ae){this.setNodeAttributes(Ae,{transform:"translate("+Ad.x+" "+Ad.y+")"});},this);},emptyDomElement:function AI(Ac){if(!this.checkHasFunction(Ac,"removeChild")){return ;}while(Ac.firstChild){Ac.removeChild(Ac.firstChild);}},insertAfter:function X(Ae,Ad){var Ac=Ad&&Ad.parentNode;if(Ae&&this.checkHasFunction(Ac,"insertBefore")){if(Ad.nextSibling){Ac.insertBefore(Ae,Ad.nextSibling);}else{Ac.appendChild(Ae);}}},insertAsFirstChild:function AS(Ac,Ad){if(Ac&&Ad){if(Ac.firstChild){Ac.insertBefore(Ad,Ac.firstChild);}else{Ac.appendChild(Ad);}}},getEvtCoordInsideNode:function d(Ad,Ac){var Ae=this.getBoundingRect(Ac);if(!Ad||!this.checkVal(Ad.clientX)||!this.checkVal(Ad.clientY)||!Ae||!this.checkVal(Ae.left)||!this.checkVal(Ae.top)){this.log("getEvtCoordInsideNode(): Invalid clientRect.");return ;}return{x:Ad.clientX-Ae.left,y:Ad.clientY-Ae.top};},getBoundingRect:function AK(Ac){if(this.checkHasFunction(Ac,"getBoundingClientRect")){return Ac.getBoundingClientRect();}},showWait:function AB(){if(this.checkHasFunction(mstrApp,"showWait")){mstrApp.showWait();}else{if(this.checkHasFunction(microstrategy,"showWait")){microstrategy.showWait(true);}}},hideWait:function AT(Ac){if(this.checkHasFunction(mstrApp,"hideWait")){mstrApp.hideWait(Ac);}else{if(this.checkHasFunction(microstrategy,"showWait")){microstrategy.showWait(false);}}},isValidLatLng:function AN(Ad,Ac){if(!this.checkVal(Ad)||!this.checkVal(Ac)){return false;}return parseInt(Ad)>=AU&&parseInt(Ad)<=P&&parseInt(Ac)>=g&&parseInt(Ac)<=y;},isExpress:function AF(){return !!(mstrApp&&mstrApp.isExpress);},isVI:function AM(){return mstrApp&&mstrApp.isVI;},isOIVM:function I(){return mstrApp&&(mstrApp.isExpress||mstrApp.isVI);},isSingleTier:function b(){return !!(mstrApp&&mstrApp.isSingleTier);},isWorkstation:function AO(){return mstrApp&&mstrApp.isWorkstation;},isWSLiveMode:function q(){return mstrApp&&mstrApp.supportFeature(AE.SUPPORT_LIVEMODE)&&(typeof mstrApp.getWSLiveMode==="function")&&mstrApp.getWSLiveMode();},isWSLocalMode:function o(){return this.isSingleTier()&&!this.isWSLiveMode();},getEvent:function AD(Ac){if(!x.supportsTouches){return Ac;}return x.firstChangedTouch(window,Ac);},enableZoomLevelAndPosSaving:function R(){return !this.isWorkstation()||i;},isCanvasSupported:function AP(){var Ac=document.createElement("canvas");return !!(Ac.getContext&&Ac.getContext("2d"));},convertImageUrl:function k(Ac){if(mstrApp.isDossier&&Ac&&Ac.indexOf("../")===0){return f.getStyleRoot()+"/../"+Ac.substr(3);}return Ac;},encode:function j(Ae,Ad){var Ag=Ae;if(!this.checkDefined(Ad)){Ad=false;}if(Ae&&Ae.length>0){Ag="";for(var Af=0,Ac=Ae.length;Af<Ac;Af++){switch(Ae.charAt(Af)){case"&":if((Ae.length!==(Af+1))&&(Ae.charAt(Af+1)==="#")){Ag+="&";}else{Ag+="&amp;";}break;case"<":Ag+="&lt;";break;case">":Ag+="&gt;";break;case"'":Ag+="&#039;";break;case"\n":if(!Ad){Ag+="<br />";}else{Ag+=Ae.charAt(Af);}break;case'"':Ag+="&quot;";break;case" ":if(Af===0||(Af<Ae.length-1&&Ae.charAt(Af+1)===" ")){Ag+="&nbsp;";}else{Ag+=Ae.charAt(Af);}break;default:Ag+=Ae.charAt(Af);break;}}}return Ag;},loadCss:function AZ(Ac,Ah){var Ag=document.styleSheets;if(Ag){var Ae,Af;for(Ae=0;Ae<Ag.length;Ae++){Af=Ag[Ae];if(Af.id===Ac){return ;}}}var Ad=document.createElement("link");Ad.setAttribute("rel","stylesheet");Ad.setAttribute("type","text/css");Ad.setAttribute("href",Ah);Ad.setAttribute("id",Ac);document.getElementsByTagName("head")[0].appendChild(Ad);},getGraphicLayerById:function B(Ac){var Ad=mstrmojo.all[Ac];if(!Ad){this.hideWait();}return Ad;},isEmbedded:function C(){return mstrApp&&mstrApp.isEmbeddedEnvironment&&mstrApp.isEmbeddedEnvironment();},_verifyProtocol:function l(Ac){if("https:"===window.location.protocol&&(-1!==Ac.search(/^http\:\/\/server\.arcgisonline\.com/i)||-1!==Ac.search(/^http\:\/\/services\.arcgisonline\.com/i)||-1!==Ac.search(/^http\:\/\/.+\.arcgis\.com/i))){Ac=Ac.replace(/http:/i,"https:");}return Ac;},loadExternalScript:function M(Ad,Ag,Ae){if(!Ad){return ;}var Ac=document.createElement("script");Ac.type="text/javascript";Ac.src=Ad;if(Ae){Ac.onerror=Ae;}if(Ac.addEventListener){Ac.addEventListener("load",function Af(){Ac.removeEventListener("load",Af);Ac.onerror=null;if(Ag){Ag();}},false);}else{if(Ac.readyState){Ac.onreadystatechange=function(){if(Ac.readyState==="loaded"||Ac.readyState==="complete"){Ac.onreadystatechange=null;Ac.onerror=null;if(Ag){Ag();}}};}}document.getElementsByTagName("head")[0].appendChild(Ac);},getNoInternetMessage:function AC(){var Ad,Ac;if(mstrApp.isSingleTier){Ad="Unable to create the map. Please check your connection. You can configure an Internet proxy through your computer's #";Ac='<a href="" style="color:#7CC5EC" onclick="window.FormWrapper.showProxyEditor(); return false;">'+mstrmojo.desc(7831,"Settings")+"</a>.";Ad=Ad.replace("#",Ac);}else{Ad=mstrmojo.desc(25580,"Unable to download the requested map. Please contact your administrator to resolve the issue. Learn more #here#.").replace(/#(.+)#/,'<a href="'+f.helpPath()+'OOB_MapIntegration.htm" rel="noreferrer" target="_blank">$1</a>');}return Ad;},getThemeClass:function A(){if(mstrApp&&mstrApp.getThemeClassName){return" "+mstrApp.getThemeClassName();}},adjustHSV:function AH(Am,Ae,Ag,Al){if(!Am||!this.checkVal(Ae)||!this.checkVal(Ag)||!this.checkVal(Al)){return Am;}var Aj,An,Ad,Ac,Ah,Ai,Af,Ak;if(!Am){return Am;}if(Am.length===7){Aj=parseInt(Am.substring(1,3),16);An=parseInt(Am.substring(3,5),16);Ad=parseInt(Am.substring(5,7),16);}else{if(Am.length===4){Aj=parseInt(Am.substring(1,2)+Am.substring(1,2),16);An=parseInt(Am.substring(2,3)+Am.substring(2,3),16);Ad=parseInt(Am.substring(3,4)+Am.substring(3,4),16);}else{return Am;}}Ac=n.rgb2hsv(Aj,An,Ad);Ac[0]*=Ae;Ac[1]*=Ag;Ac[2]=parseInt(Ac[2]*Al>100?100:Ac[2]*Al,10);Ah=n.hsv2rgb(Ac[0],Ac[1],Ac[2]);Aj=parseInt(Ah[0],10);An=parseInt(Ah[1],10);Ad=parseInt(Ah[2],10);Ai=Aj<16?"0"+Aj.toString(16):Aj.toString(16);Af=An<16?"0"+An.toString(16):An.toString(16);Ak=Ad<16?"0"+Ad.toString(16):Ad.toString(16);Am="#"+Ai+Af+Ak;return Am;},fillColorAjustForCMSelection:function S(Ac){return this.adjustHSV(Ac,1,0.5,1.2);},fillColorAjustForHover:function AJ(Ac){return this.adjustHSV(Ac,1,0.6,1.15);},fillOpacityAjustForUnselected:function U(Ac){return F.FILL_OPACITY_FACTOR_UNSEL*Ac;},setLayerNodeProps:function J(Af,Ag,Ae,Ad,Ac){this.setNodeAttributes(Af,{id:Ag,"class":Ae});this.setCssStyles(Af,{position:"absolute",top:"0px",left:"0px"});if(this.checkVal(Ad)&&this.checkVal(Ac)){Ad=parseInt(Ad);Ac=parseInt(Ac);this.setCssStyles(Af,{width:Ad+"px",height:Ac+"px"});}},destroyNode:function AR(Ac){if(!Ac){return ;}try{if(Ac.parentNode){Ac.parentNode.removeChild(Ac);}}catch(Ad){}},destroyObj:function c(Ac){if(Ac&&Ac.destroy instanceof Function){Ac.destroy();}},removeHTMLTagsAndProps:function H(Ad,Af,Ac){try{(Ad.match(/<[^<>]+>/g)||[]).forEach(function(Ak){var An,Ai,Ah,Aj,Ao,Ag,Al,Ap,Am=Ak;Ai=Am.match(/<\/?([a-z]+\b)/i);if(Ai&&Ai.length===2){Ah=Ai[1];if(Af.indexOf(Ah.toLowerCase())<0){Ad=Ad.replace(Ak,"");return ;}if(Am.charAt(1)==="/"){Am=Am.substring(2);Al="</";}else{Am=Am.substring(1);Al="<";}An=Am.length-2;if(Am.charAt(An)==="/"){Am=Am.substring(0,An);Ap="/>";}else{Am=Am.substring(0,Am.length-1);Ap=">";}Am=Am.replace(Ah,"");Ag="";Ao="";while(Am!=Ag){Ag=Am;Am=Y.trim(Am);Ai=Am.match(/^([^=]+)=\s*('[^']*'|"[^"]*")/);if(Ai&&Ai.length===3){Aj=Y.trim(Ai[1]).split(/\s+/);if(Aj&&Aj.length>0){Aj=Aj[Aj.length-1];if(Ac.indexOf(Aj.toLowerCase())>=0){Ao+=" "+Aj+"="+Ai[2];}}Am=Am.substring(Ai[0].length);}}Ad=Ad.replace(Ak,Al+Ah+Ao+Ap);}});}catch(Ae){console.log("HTML Parse Error: "+Ae);}finally{return Ad;}},addArrowNode:function w(Ad){if(Ad){var Ac=this.createNormalNode("div");AX.addClass(Ac,"mstrmojo-Tooltip-arrow");this.appendNode(Ad,Ac);}},getFontFamilyItems:function m(Ac){if(t){return t;}t=O.filter(K.getFontFamilyItems(),function(Ad){return O.indexOf(Ac,Ad.n)===-1;});return t;},unserializeTooltipForms:function(Ad){if(!Ad){return{};}try{return JSON.parse(Ad);}catch(Ac){return{};}},serializeTooltipForms:function(Ac){return JSON.stringify(Ac);},decodeWebJson:function(Ae,Ad){var Ac=Ae;if(Ad){Ac=Y.decodeXMLAttribute(Ac);Ac=Y.decodeHtmlString(Ac,true);}Ac=Ac.replace(/&nbsp;/g," ");return Ac;},addElementOnPath:function(Ah,Ad,Af){if(!Ad){Ad=window;}var Ag=Ah.split(".");if(Ag.length===1){if(Ad[Ah]===undefined){Ad[Ah]=value;}return ;}var Ae=(Ag&&Ag.length)||0,Ac;for(Ac=0;Ac<Ae-1;Ac++){if(!Ad[Ag[Ac]]){Ad[Ag[Ac]]={};}Ad=Ad[Ag[Ac]];}if(Ad[Ag[Ae-1]]===undefined){Ad[Ag[Ae-1]]=Af;}},convertStrokeDashArray:function s(Ac){if(!Ac||Ac.length<=0){return null;}if(Ac.length===1){return Ac.concat(Ac);}return Ac;},_calGeoExtent:function AA(Ac){if(Ac){return{lngWest:Ac[0],latSouth:Ac[1],lngEast:Ac[2],latNorth:Ac[3]};}}});}());(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapUtils","mstrmojo.gmaps.MapEnums","mstrmojo.vi.enums.EnumFeatures");var S=mstrmojo.gmaps,K=S.MapUtils,O=S.EnumGeographicRole,F=S.EnumBaseMapType,M=S.EnumPolygonSource,I=S.EnumThresholdType,R="4-s",G=S.CustomShapeId,J=S.EnumPropertyType;function D(U){return !!(U&&U.custom&&(U.custom==="true"||U.custom===true));}mstrmojo.gmaps._AreaMapHelper=mstrmojo.provide("mstrmojo.gmaps._AreaMapHelper",{_mixinName:"mstrmojo.gmaps._AreaMapHelper",getAvailableShapes:function C(U,c,a,b){var Y=[],X,Z,W;if(!U||a==undefined){return Y;}if(b===F.Mapbox){return this.getShapesForMapbox(U,c);}for(Z=0,W=U.length;Z<W;Z++){X=U[Z];if(K.isWSLocalMode()&&D(X)){continue;}if(b!==F.Esri&&!D(X)){continue;}if(this.isMapBoxShapeConfig(X,c)){continue;}if(a===O.EnumGeographicRoleNone||a===O.EnumGeographicRoleGeometry||a===O.EnumGeographicRoleOther&&D(X)||a==X.roleId){Y.push(X);}}return Y;},getShapesForMapbox:function E(U,a){var Y=[],X,Z,W,b=mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.M2020_VERSION);for(Z=0,W=U.length;Z<W;Z++){X=U[Z];if(X.id===G&&!b){continue;}if(this.isMapBoxShapeConfig(X,a)){X.supportedGeoRoles=[X.roleId];if(X.roleId===O.EnumGeographicRoleCity){X.supportedGeoRoles.push(O.EnumGeographicRoleCounty);}if(X.roleId===O.EnumGeographicRoleCounty){X.supportedGeoRoles.push(O.EnumGeographicRoleCity);}Y.push(X);}}return Y;},getPolygonSource:function B(U,W,Z,c){var a=U&&U.data,d=a&&a.vp,e=d&&d.lid,b,f;var Y=U&&U.parent,X=Y&&Y.parent;if(!d){return M.Cloud;}if(e){b=this.getMatchingShape(W,e,null);}else{f=this.getShapeAttributeGeoRole(a,U.dropZones.geoAttribute);W=this.getAvailableShapes(W,Z,f,c);b=this.getMatchingShape(W,null,f);}if(b){if(!e){d.lid=b.id;}if(D(b)){if(this.isMapBoxShapeConfig(b,Z)){if(b.id===G){return M.MapboxCustomShape;}return M.MapBoxPolygon;}return M.Custom;}}return M.Cloud;},isMapBoxShapeConfig:function Q(U,Z){if(U.isMapboxShape){return true;}var X,W,Y=(Z&&Z.length)||0;for(X=0;X<Y;X++){W=Z[X];if(U.layerId===W.id){return parseInt(W.scope)===parseInt(F.Mapbox);}}return false;},isMapboxStatisticalShape:function P(U,Z){var X,W,Y=(Z&&Z.length)||0;for(X=0;X<Y;X++){W=Z[X];if(U&&U.layerId===W.id){return W.scope===R;}}return false;},getShapeAttributeGeoRole:function H(Z,b){var W=Z.gts,g=W&&W.row,U,f,e,a,d,X,Y,c=false;if(!g||!g.length){return ;}d=g.length;if(b){for(a=0;a<d;a++){e=g[a];if(e.id!==b){continue;}U=e.fs||[];for(X=0,Y=U.length;X<Y;X++){f=U[X].fgr;if(f==undefined){continue;}f=f.toString();if(f!==O.EnumGeographicRoleNone&&f!==O.EnumGeographicRoleLatitiude&&f!==O.EnumGeographicRoleLongitude){c=true;break;}}if(c){break;}}}else{for(a=0;a<d;a++){e=g[a];U=e.fs||[];for(X=0,Y=U.length;X<Y;X++){f=U[X].fgr;if(f!==O.EnumGeographicRoleNone&&f!==O.EnumGeographicRoleLatitiude&&f!==O.EnumGeographicRoleLongitude){break;}}}}return f;},getMatchingShape:function L(W,a,d){var Y,Z,c,U,X,b;if(!W){return null;}if(d===O.EnumGeographicRoleNone){d=null;}if(a){for(X=0,b=W.length;X<b;X++){if(W[X].id==a){Y=W[X];break;}}}else{if(d){for(X=0,b=W.length;X<b;X++){U=W[X];if(D(U)&&(U.roleId==d||(U.supportedGeoRoles&&U.supportedGeoRoles.some(function(e){return(e===d||e===d+"");})))){if(!Z){Z=U;}if(!!U["default"]&&(U["default"]+"").toLowerCase()==="true"){Y=U;break;}}else{if(!c&&U.roleId==d&&!!U["default"]&&(U["default"]+"").toLowerCase()==="true"){c=U;}}}if(!Y){if(Z){Y=Z;}else{if(c){Y=c;}}}}}return Y;},getShape4MapboxSecondGeoAttr:function A(W,X,b,e){var U,Z,Y,c,d,a;W=this.getAvailableShapes(W,X,O.EnumGeographicRoleOther,F.Mapbox);c=(W&&W.length)||0;Z=this.getMatchingShape(W,b,null);for(Y=0;Y<c;Y++){U=W[Y];if(U.roleId==e||(U.supportedGeoRoles&&U.supportedGeoRoles.indexOf(e)>-1)){if(e==O.EnumGeographicRoleCountry){return U;}d=this.isMapboxStatisticalShape(Z,X);a=this.isMapboxStatisticalShape(U,X);if(d===a){return U;}}}return null;},populateColorBy:function N(b,U,d,X){if(!!U&&U.length===1&&U[0].otp===-1){var a=b[d].items,W=U[0].es;for(var Y=0,f=a.length;Y<f;Y++){var c=a[Y],g=W[Y].n,h=c.v,e=c.ty;if(!e||e===I.Number){X[K.replaceSpace(g)]=h;}else{X[K.replaceSpace(g)]=a[Y].rv;}}}if(this.isColorByAttr===true){this.populateColorInfo(X);}var Z=this.getThresholdInfo(d,this.colorMetricIdx);if(Z){X.threshold=Z;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.gmaps.MapEnums","mstrmojo.gm.GMEnums","mstrmojo.VisEnum","mstrmojo.gmaps.MapUtils");var o=mstrmojo,p=o.array,s=o.vi.viz.EnumDSSDropZones,X=o.hash,R=o.gmaps,z=mstrmojo.VisEnum,AH=z.LegendPropertyTag,w=z.MAPS_PROPERTIES,M=R.EnumPropertyType,h=R.EnumZoomBehavior,u=R.EnumGraphicType,g=R.EnumClusterMode,y=R.EnumGeographicRole,H=R.EnumBaseMapType,d=R.EnumLanguageType,F=R.EnumDefaultShapeFormatStyle,x=R.MapboxKeyStyles,O=z.EnumLegendMode,G=mstrmojo.gm.EnumLegendSlot,AD=z.EnumSingleLegendMode,k=new RegExp(".{32}","g"),AF,K=R.CustomShapeId,E=mstrmojo.gmaps.MapUtils,e=mstrmojo.VisUtility,AA=R.EnumFeatureFlags;var C={ga:"geoAttribute",lat:"latitude",lng:"longitude",slc:"sliceBy",amt:"angle",cmt:"colorBy",smt:"sizeBy",gmt:"geometry",tooltip:"tooltips",pmbo:1,ttpmf:1};var t="@pLd",f=new RegExp(t,"g");mstrmojo.vi.viz.MapHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.MapHelper",widget:null,data:null,vp:null,geoAttribute:null,latitude:null,longitude:null,geometry:null,slice:[],angle:null,colorBy:null,sizeBy:null,tooltip:null,markerType:null,useAttributeForm:null,defaultView:null,init:function AE(AK){this._super(AK);this.tooltip=[];this.data=this.data||{};this.vp=this.data.vp||{};},setWidget:function U(AK){if(!AK){return ;}var AN=AK.fnGetWidget(),AM=AK.k,AL=AK.node&&AK.node.data&&AK.node.data.vp;this.widget=AK;this.geoAttribute=P(AK,s.GeoAttribute);this.latitude=P(AK,s.Latitude);this.longitude=P(AK,s.Longitude);this.geometry=P(AK,s.Geometry);this.angle=P(AK,s.Angle);this.colorBy=P(AK,s.ColorBy);this.sizeBy=P(AK,s.SizeBy);this.tooltip=AN.getDropZoneItems(s.AdditionalMetrics,AM).map(function(AO){return AO.id;});this.slice=AN.getDropZoneItems(s.SliceBy,AM).map(function(AO){return AO.id;});if(AL){this.markerType=AL.mtp;this.useAttributeForm=AL[M.useAttributeForm];this.defaultView=AL.dv;}},getGeoUnit:function J(){return AB(this.widget,s.GeoAttribute);},getLatitudeUnit:function L(){return AB(this.widget,s.Latitude);},getLongitudeUnit:function m(){return AB(this.widget,s.Longitude);},getGeometryUnit:function Z(){return AB(this.widget,s.Geometry);},getAngleUnit:function A(){return AB(this.widget,s.Angle);},getColorByUnit:function W(){return AB(this.widget,s.ColorBy);},getSizeByUnit:function q(){return AB(this.widget,s.SizeBy);},getSliceByUnits:function D(){var AK=this.widget.fnGetWidget();return AK.getDropZoneItems(s.SliceBy,this.widget.k);},getTooltipUnits:function j(){var AK=this.widget.fnGetWidget();return AK.getDropZoneItems(s.AdditionalMetrics,this.widget.k);},setMapType:function(AK){this.vp.gtp=AK;},setBorderStyle:function(AK){this.vp.shapeLineStyle=AK;this.vp.shapeLineClr=F.BORDER_COLOR;},getMapType:function(){return this.vp.gtp;},getLayerName:function(){return this.vp.ln;},setShapeFile:function(AK){this.vp.lid=AK;},setUseAttributeForm:function i(AK){this.useAttributeForm=AK?AF.USE_ATTRIBUTE_FORM:AF.USE_ATTRIBUTE;},getXml:function Q(){var AK=this.vp,AM=this.tooltip,AL=this.useAttributeForm;AK[AH.LEGEND_MODE]=AK[AH.LEGEND_MODE]||O.RESTORED.toString();AK[AH.LEGEND_POSITION]=AK[AH.LEGEND_POSITION]||G.RIGHT_MIDDLE.toString();AK[w.SHOW_LEGEND]=AK[w.SHOW_LEGEND]||"false";AK[M.collapseLegend]=AK[M.collapseLegend]||AD.RESTORE.toString();AK[M.legendSwitch]=AK[M.legendSwitch]||"false";AK[M.baseMapType]=AK[M.baseMapType]||H.Reserved;AK[M.layerIdx]=AK[M.layerIdx]||0;AK[M.layerName]=AK[M.layerName]||mstrmojo.desc(14750,"Layer")+" 1";AK[M.isHidden]=AK[M.isHidden]||"0";AK[M.clusterRadius]=AK[M.clusterRadius]||50;AK[M.clusterMaxZoom]=AK[M.clusterMaxZoom]||22;AK[M.languageType]=AK[M.languageType]||d.English;AK[M.tooltipSwitch]=AK[M.tooltipSwitch]||"true";if(this.isMapbox){AK[M.mapStyle]=x.V8_DEFAULT;AK[M.zoomSetting]=AK[M.zoomSetting]||h.Keep;AK[M.keepZoomAndPos]=AK[M.keepZoomAndPos]||"true";}else{AK[M.zoomSetting]=AK[M.zoomSetting]||h.Automatic;}AK.ga=this.geoAttribute||"";AK.gmt=this.geometry||"";AK.lat=this.latitude||"";AK.lng=this.longitude||"";AK.cmt=this.colorBy||"";AK.smt=this.sizeBy||"";AK.slc=(this.slice||[]).join("");AK.amt=this.angle||"";if(AL){AK[M.useAttributeForm]=AL;}AK.tooltip="";if(AM){AM.forEach(function(AN){AK.tooltip+=AN;});}if(!this.isMapbox){e.addVisFeatureFlags(AA,AK);}return AF.getXmlFromJson(this.vp);},showColorByZone:function(AK){return AF.canShowColorByZone(AK);},showSizeByZone:function(AK){return !!AK&&AK[M.graphicType]===u.Bubble;},showSliceZone:function(AK){return !!AK&&AK[M.graphicType]===u.Bubble;},showAngleZone:function(AK){return !!AK&&AK[M.graphicType]===u.Bubble||((AK[M.graphicType]===u.Marker)&&AK[M.clusterMode]===g.PIE);}});AF=mstrmojo.vi.viz.MapHelper;AF.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:s.GeoAttribute,prm:true,allowSingle:true,show:function(){return true;},v:function(AK){return B(AK,M.geoAttribute);},onDel:function(AK,AL){if(AK){AK[M.geoAttribute]=(AL&&X.walk("zone.items.1.id",AL))||"";if(AK[M.shapeFile]!==K){AK[M.shapeFile]="";}}},onAdd:function(AK,AL){if(AK){AK[M.geoAttribute]=AL.item.did;AK[M.useAttributeForm]=AF.USE_ATTRIBUTE_FORM;if(AK[M.shapeFile]!==K){AK[M.shapeFile]="";}else{AK[M.useAttributeForm]=AF.USE_ATTRIBUTE;}}}},{n:mstrmojo.desc(7696,"Latitude"),id:s.Latitude,prm:true,allowSingle:true,show:function(AK){if(AK){return(AK[M.graphicType]!==u.Area);}},v:function(AK){return B(AK,M.latitude);},onDel:function(AK){if(AK){AK[M.latitude]="";}},onAdd:function(AK,AL){var AM=AL.item;if(AK){AK[M.latitude]=AM.did;AK[M.useAttributeForm]=AM.t===21?AF.USE_ATTRIBUTE_FORM:AF.USE_ATTRIBUTE;}}},{n:mstrmojo.desc(7697,"Longitude"),id:s.Longitude,prm:true,allowSingle:true,show:function(AK){if(AK){return(AK[M.graphicType]!==u.Area);}},v:function(AK){return B(AK,M.longitute);},onDel:function(AK){if(AK){AK[M.longitute]="";}},onAdd:function(AK,AL){var AM=AL.item;if(!!AK&&!!AM){AK[M.longitute]=AM.did;AK[M.useAttributeForm]=AM.t===21?AF.USE_ATTRIBUTE_FORM:AF.USE_ATTRIBUTE;}}},{n:mstrmojo.desc(16630,"Geometry"),id:s.Geometry,prm:true,allowSingle:true,show:function(AK){if(AK){return(AK[M.graphicType]===u.Area&&AK[M.shapeFile]===K);}return false;},v:function(AK){return B(AK,M.geometry);},onDel:function(AK){if(AK){AK[M.geometry]="";}},onAdd:function(AK,AL){var AM=AL.item;if(AK){AK[M.geometry]=AM.did;AK[M.useAttributeForm]=AM.t===21?AF.USE_ATTRIBUTE_FORM:AF.USE_ATTRIBUTE;}}},{n:mstrmojo.desc(6188,"Slice"),id:s.SliceBy,prm:true,allowSingle:false,show:function(AK){if(AK){return AF.showSliceZone(AK);}},v:function(AK){if(AK){var AL=AK[M.slice];return AL&&AL.match(k);}},onDel:function(AK,AL){var AM=AL&&AL.item;if(!!AK&&AM&&AM.id&&AK[M.slice]){AK[M.slice]=AK[M.slice].replace(AM.did,"");}},onAdd:function(AK,AL){var AO=M.slice,AN=AL&&AL.item;if(!!AK&&AN){var AM=AK[AO]?AK[AO].match(k):[];AM.splice(AL.idx,0,AN.did);AK[AO]=AM.join("");}}},{n:mstrmojo.desc(14294,"Angle"),id:s.Angle,prm:true,allowSingle:true,show:function(AK){if(AK){return AF.showAngleZone(AK);}},v:function(AK){return B(AK,M.angle);},onDel:function(AK){if(AK){AK[M.angle]="";}},onAdd:function(AK,AL){I(AK,AL,M.angle);}},{n:mstrmojo.desc(11662,"Color By"),id:s.ColorBy,prm:true,allowSingle:true,show:function(AK){return AF.canShowColorByZone(AK);},v:function(AK){return B(AK,M.colorby);},onDel:function(AK){if(AK){AK[M.colorby]="";}},onAdd:function(AK,AL){I(AK,AL,M.colorby);}},{n:mstrmojo.desc(11663,"Size By"),id:s.SizeBy,prm:true,allowSingle:true,show:function(AK){if(AK){return AF.canShowSizeByZone(AK);}},v:function(AK){return B(AK,M.sizeby);},onDel:function(AK){if(AK){AK[M.sizeby]="";}},onAdd:function(AK,AL){I(AK,AL,M.sizeby);}},{n:mstrmojo.desc(2962,"Tooltip"),id:s.AdditionalMetrics,prm:false,allowSingle:false,show:function(){return true;},v:function(AK){if(AK){var AL=AK[M.tooltip];return AL&&AL.match(k);}},onDel:function(AK,AL){if(AK&&AK[M.tooltip]){AK[M.tooltip]=AK[M.tooltip].replace(AL.item.did,"");}},onAdd:function(AK,AL){var AN=M.tooltip;if(AK){var AM=AK[AN]?AK[AN].match(k):[];AM.splice(AL.idx,0,AL.item.did);AK[AN]=AM.join("");}}}];AF.USE_ATTRIBUTE="0";AF.USE_ATTRIBUTE_FORM="1";AF.canShowColorByZone=function(AK){return !!AK&&(AK[M.graphicType]!==undefined)&&AK[M.graphicType]!==u.Density;};AF.canShowSizeByZone=function(AK){return !!AK&&AK[M.graphicType]===u.Bubble;};AF.showAngleZone=function(AK){if(!AK){return false;}return AK[M.graphicType]===u.Bubble||((AK[M.graphicType]===u.Marker)&&AK[M.clusterMode]===g.PIE);};AF.showSliceZone=function(AK){return !!AK&&AK[M.graphicType]===u.Bubble;};AF.supportImageThreshold=function(AK){return !!AK&&AK[M.graphicType]===u.Marker;};AF.isLatitude=function c(AL,AK){return AK===5||(AL&&AL.toLowerCase().indexOf("latitude")>-1);};AF.isLongitude=function AC(AL,AK){return AK===6||(AL&&AL.toLowerCase().indexOf("longitude")>-1);};AF.isGeometry=function n(AK){return AK===11;};AF.isAxisAttribute=function AJ(AL){var AK=AL&&AL.fs,AM;if(AK&&AK.length===1){AM=AK[0];return !!AM&&(AM.fgr===5||AM.fgr===6||AM.fgr===11);}return false;};AF.convertToReferenceFormat=function a(AL,AN){if(!!AL&&C[AN]){if(AN==="tooltip"||AN==="slc"){return AL.replace(/(.{32})/g,t+"$1");}if(AN==="ttpmf"){var AM=E.unserializeTooltipForms(AL);var AK={};X.forEach(AM,function(AO,AP){var AQ=t+AP;AK[AQ]={};X.forEach(AO,function(AR,AS){AK[AQ][t+AS]=1;});});return E.serializeTooltipForms(AK);}return t+AL;}return AL;};AF.convertFromReferenceFormat=function(AL,AK){if(!AK||!C[AL]){return AK;}return AK.replace(f,"");};AF.getXmlFromJson=function Y(AK){var AL=new mstrmojo.XMLBuilder();AL.addChild("props");AL.addChild("widgetProps");AL.addChild("fmt");X.forEach(AK,function(AM,AN){AL.addChild(AN);AL.addAttribute("value",AF.convertToReferenceFormat(AM,AN));AL.closeElement();});AL.closeElement();AL.closeElement();AL.closeElement();return AL.toString();};AF.isGeoRoleSupportArea=function N(AK){AK=AK&&AK.toString();return AK===y.EnumGeographicRoleCity||AK===y.EnumGeographicRoleState||AK===y.EnumGeographicRoleCountry||AK===y.EnumGeographicRoleOther||AK===y.EnumGeographicRoleZipCode||AK===y.EnumGeographicRoleCounty;};AF.getGeoForm=function AG(AN,AL){var AK=AN&&AN.fs,AM=null;if(!AL){AL=function(){return true;};}if((AN.otp===12||AN.t===12)&&AK){p.forEach(AK,function(AO){if(AL(AO)){AM=AO;return false;}});}return AM;};AF.getLatitudeForm=function AI(AK){return AF.getGeoForm(AK,function(AL){return AF.isLatitude(AL.fnm,AL.fgr)&&AL.obf;});};AF.getLongitudeForm=function b(AK){return AF.getGeoForm(AK,function(AL){return AF.isLongitude(AL.fnm,AL.fgr)&&AL.obf;});};AF.getGeometryForm=function S(AK){return AF.getGeoForm(AK,function(AL){return AF.isGeometry(AL.fgr)&&AL.obf;});};AF.zonesNeedSyncToTooltipZone=[s.GeoAttribute,s.SliceBy,s.Angle,s.SizeBy,s.ColorBy];AF.xmlNodeToConvert=C;AF.shouldSyncItemToTooltipZone=function l(AM,AK,AL){AL=p.ensureArray(AL);return AF.zonesNeedSyncToTooltipZone.indexOf(AK)>-1&&AL.indexOf(AM)<0;};function AB(AL,AK){var AO=AL.fnGetWidget(),AN=AL.k,AM=AO.getDropZoneItems(AK,AN);return AM[0];}function P(AL,AK,AM){var AN=AB(AL,AK,AM);return AN?AN.id:"";}function B(AL,AK){if(AL){return AL[AK]?[AL[AK]]:[];}}function I(AL,AM,AK){var AN=AM.item;if(!!AL||!!AN){AL[AK]=AN.did;}return AL;}}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.Pulldown","mstrmojo.hash","mstrmojo.models.template.DataInterface");mstrmojo.requiresDescs(2429);var B=mstrmojo.models.template.DataInterface,G=mstrmojo.hash,F=-1,E=[{n:mstrmojo.desc(2429,"All Columns"),id:F,key:null}];function C(M,K,I,H){var J=H?[].concat(E):[],L=0;B.forEachGSI(M,function(Q,P,O){var N=G.walk(O+".n",K)||"";J.push({n:N,id:O,key:P});if(I===P){L=J.length-1;}});return{items:J,idx:L};}mstrmojo.ui.editors.controls.ColumnSetGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ColumnSetGroup",includeAll:true,pulldown:null,init:function D(J){this._super(J);var L=J.callback||mstrmojo.emptyFn,H=C(J.gsi,J.titleMap,J.value,this.includeAll),K={},I;G.copyProps(["focusOnPopup","onitemSelected","enableAccessibility","enabled"],J,K);I=mstrmojo.ui.Pulldown.newPulldown(H.items,function(M,N){L(M.key,M.id);},H.idx,K);this.addChildren(I);this.pulldown=I;},updatePulldownItems:function A(M,K,L,I){var H=C(M,K),J=this.pulldown;if(J){J.set("items",H.items);if(typeof L==="number"){J.set("selectedIndex",L);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.models.FormatModel","mstrmojo.RenderProxy","mstrmojo.func","mstrmojo.models.template.DataInterface");mstrmojo.requiresDescs(28114,5621,6031,6030,8504,8505,4531,18365,18363,13786,13787,9845,9846,17608,17607,17605,13544,13545,959,9640,9641,13177,13178,13179,13180,13181,13182,2969,1095,2970,9126,6115,2967,2968,122,4083,18955,8503,13200,13546,13547,5618,8797,16265,16264,16263,17612,17606,17609,4571,5467,13176,13185,221,118,29033,134);var H=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,P=mstrmojo.models.template.DataInterface,K="more_OptionsEditor",E="MoreOptionsEditor",B,M={saveEditor:"saveEditor",closeEditor:"closeEditor",},L={6031:mstrmojo.desc(6031,"Off"),6030:mstrmojo.desc(6030,"On"),8504:mstrmojo.desc(8504,"Form name only"),8505:mstrmojo.desc(8505,"Show attribute name once"),4531:mstrmojo.desc(4531,"Automatic"),18365:mstrmojo.desc(18365,"Above the children"),18363:mstrmojo.desc(18363,"Below the children"),13786:mstrmojo.desc(13786,"Show both nulls and zeros"),13787:mstrmojo.desc(13787," Hide both nulls and zeros"),9845:mstrmojo.desc(9845,"Hide nulls only"),9846:mstrmojo.desc(9846,"Hide zeros only"),17608:mstrmojo.desc(17608,"Use inherited value"),17607:mstrmojo.desc(17607,"Cancel Execution"),17605:mstrmojo.desc(17605,"Execute Cartesian Join"),13544:mstrmojo.desc(13544,"Last selection only"),13545:mstrmojo.desc(13545,"Intersection of all selections"),959:mstrmojo.desc(959,"Default"),9640:mstrmojo.desc(9640,"Inner Join"),9641:mstrmojo.desc(9641,"Outer Join"),13177:mstrmojo.desc(13177,"Inner Join"),13178:mstrmojo.desc(13178,"Results displaying only those attribute elements that have metric value"),13179:mstrmojo.desc(13179,"Outer Join - Ignore Filter"),13180:mstrmojo.desc(13180,"Outer join to attribute's look up table without considering the filter on template"),13181:mstrmojo.desc(13181,"Outer Join - Preserve Filter"),13182:mstrmojo.desc(13182,"Outer join to attribute's look up table after considering the filter on template"),2969:mstrmojo.desc(2969,"Show"),1095:mstrmojo.desc(1095,"Merge"),2970:mstrmojo.desc(2970,"Lock"),9126:mstrmojo.desc(9126,"More options"),6115:mstrmojo.desc(6115,"Enable incremental fetch in Grid"),5621:mstrmojo.desc(5621,"Enable incremental fetch"),8797:mstrmojo.desc(8797,"Rows per page"),28114:mstrmojo.desc(28114,"Elements per page"),17612:mstrmojo.desc(17612,"Data Join"),17606:mstrmojo.desc(17606,"Cartesian Join Governing"),5467:mstrmojo.desc(5467,"Objects"),13176:mstrmojo.desc(13176,"Join Type"),4571:mstrmojo.desc(4571,"Join Behavior"),2967:mstrmojo.desc(2967,"Headers"),2968:mstrmojo.desc(2968,"Rows"),122:mstrmojo.desc(122,"Columns"),4083:mstrmojo.desc(4083,"Display"),18955:mstrmojo.desc(18955,"Position of the parent elements"),8503:mstrmojo.desc(8503,"Show attribute form names:"),13200:mstrmojo.desc(13200,"Hide metric nulls and zeros"),13546:mstrmojo.desc(13546,"Filtering"),13547:mstrmojo.desc(13547,"When this visualization is filtered by multiple other visualizations, filter by:"),5618:mstrmojo.desc(5618,"Incremental Fetch"),16265:mstrmojo.desc(16265,"Selection Data Limit"),16264:mstrmojo.desc(16264,"Set a limit for the maximum quantity of data points that a user can select on this visualization."),16263:mstrmojo.desc(16263,"(Max quantity should be no more than 200K.)"),17609:mstrmojo.desc(17609,"Executing cartesian joins is not a recommended option."),13185:mstrmojo.desc(13185,"All Attributes"),221:mstrmojo.desc(221,"Cancel"),118:mstrmojo.desc(118,"Save"),29033:mstrmojo.desc(29033,"Recommended: ###. For optimal performance, adjust this value according to your column count."),134:mstrmojo.desc(134,"Apply")},G=mstrmojo.publisher,D=mstrmojo.hash;function J(S,R,Q){return{source:"more_OptionsEditor",name:E,context:{action:S,data:R,evt:Q}};}function A(){return{name:E,hooks:{},descriptors:L,showIncrementalFetchSection:false,showSelectionLimitSection:false,data:{},gridSelect:null,limitVal:null,enumFormatProperties:H,host:null,allowCartesianJoin:false,isCustomVis:false};}function F(){var R=mstrApp.getRootController().messageQueue,S=this,Q={};Object.keys(M).forEach(function(U){Q[U]=function(Y,X,W){R.enqueue(J.call(S,M[U],Y,X,W));};});return Q;}function I(R){var Q=mstrmojo.all[B];R.update=R.update.actions?R.update:{actions:[]};R.update.actions=R.update.actions.concat(mstrmojo.hash.valarray(R.joinActions));R.update.callback=mstrmojo.func.wrapMethods(R.update.callback,Q.host.parent.model.getRebuildCallback());if(Q.showSelectionLimitSection&&R.limitVal){Q.host.writeGlobalProperty("slctnLmt",R.limitVal);}if(Q.showIncrementalFetchSection){R.update.actions=R.update.actions.concat(Q.host.getXtabIncrementalFetchActions(R.ifChecked,R.ifMaxRows));}Q.submitAction(R.newData,R.update.actions,R.update.callback,R.update.extras);Q.close();}mstrmojo.vi.ui.editors.MoreOptionsEditorReact=mstrmojo.declare(mstrmojo.Editor,[],{scriptClass:"mstrmojo.vi.ui.editors.MoreOptionsEditor",host:undefined,showSelectionLimitSection:false,showIncrementalFetchSection:false,update:undefined,newData:undefined,joinActions:undefined,cssClass:"mstrmojo-MoreOptions-Editor",id:K,title:mstrmojo.desc(9126,"More options"),help:"more_options_dialog_box.htm",submitAction:mstrmojo.emptyFn,renderProxy:null,subs:null,init:function(Q){this._super(Q);B=this.id;this.newData=this.update={};this.joinActions={};this.renderProxy=new mstrmojo.RenderProxy(A.call(this));this.addChildren([this.renderProxy]);this.registerMessageHandler();},registerMessageHandler:function O(){var Q=D.walk("mstrApp.rootCtrl.messageQueue");if(!G.hasSubs(Q.id,E)){var R=this;this.subs=G.subscribe(Q.id,E,function(U){var S=U.context,X=S.data,W=S.action;switch(W){case M.closeEditor:R.close();break;case M.saveEditor:I(X);break;default:break;}});}},onOpen:function C(){if(this._super){this._super();}this.buttonNode.style="display:none";var R=this.host;var Q=A.call(this);Q.showIncrementalFetchSection=this.showIncrementalFetchSection;Q.showSelectionLimitSection=this.showSelectionLimitSection;Q.host=R;Q.enumFormatProperties=H;Q.data=mstrmojo.all[B].data;Q.allowCartesianJoin=mstrApp.isCartesianJoinSupported&&mstrApp.isCartesianJoinSupported();if(R.hasArrayGSI){Q.gridSelect=P.getGsiTitles(R.gridData.gsi,R.model.docModel);}if(this.showSelectionLimitSection){Q.limitVal=R.readGlobalProperty("slctnLmt");}Q.isCustomVis=R&&R.isCustomVis;Q.hooks=F.call(this);this.renderProxy.updateFuncReactComponent(Q);},close:function N(){if(this._super){this._super();}this.newData=this.update={};this.destroy();},destroy:function(){this._super();G.unsubscribe(this.subs);delete this.renderProxy;delete this.children;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.template.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.Button","mstrmojo.Label","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.models.datasets.DataInterface","mstrmojo.models.template.DataInterface","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.models.VIComponentMap","mstrmojo.chart.model.enums.EnumDSSAxisName","mstrmojo.chart.model.enums.EnumDSSDynamicShortcut","mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ME.MetricDataService","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType","mstrmojo.VisUtility");var g=mstrmojo,P=g.array,W=g.hash,i=g.func,Ad=mstrmojo.chart.model.enums.EnumDSSObjectType,k=g.vi.ui.DatasetUnitMenuUtils,a=mstrmojo.models.datasets.DataInterface,w=mstrmojo.models.template.DataInterface,AY=g.vi.models.VIComponentMap,l=mstrmojo.vi.viz.EnumDSSDropZones,K=mstrmojo.ME.MetricDataService,f="\u001E",AH=mstrmojo.VisUtility,J=1,AW=2,H=3,Af=4,R=5,AR=6,p=7,Q=8,AG=9,Ai=10,A=11,AN=12,E="00000000000000000000000000000000",AU=-1,Aq="-1",h=mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap,AQ=mstrmojo.chart.model.enums.EnumDSSAxisName,Ap=mstrmojo.chart.model.enums.EnumDSSDynamicShortcut,U=mstrmojo.mstr.EnumDSSXMLBaseFormType,Y=mstrmojo.mstr.EnumDSSXMLObjectTypes,Ao=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,I=mstrmojo.mstr.EnumDSSConsolidationType,AP={ABSOLUTE:1,NESTED:2,SORT_UNDER:3};function Z(Aw,Ax){var Ay=this.getGSI(Ax);return Ay.cols.concat(Ay.rows).filter(function(Az){return Az.t===Aw;});}function AK(Ax,Az,Ay,Aw){return{act:"updateTemplate",keyContext:Ax,partialRetrieval:{nodes:Ay?null:[Ax].concat(Aw||[])},actions:Az};}function Ae(A0,Ax,A1,Ay){var A5=this,A2=[],A3=[],A6={};if(Ax.useDropzone){A0.useDropzone=true;A6.dropzoneId=Ax.zone.id;if(Ax.item.ax!==undefined){A6.ax=Ax.item.ax;}}A6.position=Ax.idx+1+(A1.offset||0);if(A1.replaceSourceId){A0.replaceSourceId=A1.replaceSourceId;}if(A1.addToTooltip){A3.push({dropzoneId:AG,position:A5.gmZones.getTooltipDropzoneIdx(Ax.item)+1});}A0.partialRetrieval={nodes:[A0.nodeKey]};if(Ay){A0.partialRetrieval.nodes=A0.partialRetrieval.nodes.concat(Ay);}A3.push(A6);A0.dropzones=A3;A2.push(A0);var A4="$GUID_115",Aw=[],Az=this.checkAndAddThresholdAction(Ax.zone.id,{did:A4,t:4},Aw);if(Az){A0.newObjectIds=[A4];A2.push(this.getUpdateTemplateAction(Aw));}return A2;}function Av(Az){var Aw=this.getHost().model.data.datasetId,Ay=P.ensureArray(Az),Ax=P.hash(Ay);if(!Aw){W.forEach(this.docModel.datasets,function(A2,A3){var A0=(A2.att||[]).concat(A2.mx||[]),A1=A0.some(function(A4){return Ax[A4.did];});if(A1){Aw=A3;return false;}});}return Aw;}function Aj(Aw,A0,Ax){var A5=this,BB=this.docModel,A3=Aw.item,A9=k.getUnitFromDataset(A5.docModel.datasets,A3.did,A3.t)||A3,BC=this.getHost(),A8=A5.docModel.getDataService(),A1=A0==="edit",A7=BC.getChartStyle&&BC.getChartStyle()==="NewGraphMatrixVisualizationStyle",Ay,Az={dsid:A1?BB.findDatasetIdFromUnit(A9.did):Av.call(A5,A9.did),alias:A9.alias||A9.n},BA=null,A4=BC.zonesModel,A2=A4.getHostKey(Aw,true),A6=BC.k;if(A9.t===Y.Metric){Az.nodeKey=A2;Az.retrieveKey=A6;if(A1){Ay={metricId:A9.did,metric:A9,action:{cmd:A0,n:A9.n,alias:A3.n}};Az.did=A9.did;BA=A8.getEditDerivedMetricSubmitFunc(Az);}else{Ay={metricId:"",action:{cmd:A0,refOi:{did:A9.did,n:A9.n}}};Az.idx=Aw.idx;Az.host=BC;Az.zoneid=Aw.zone.id;if(A7){Az.extraZone={id:AG,idx:A5.gmZones.getTooltipDropzoneIdx(Aw.item)};}if(Ax){Az.replace={did:A9.did,t:A9.t};}if(Aw.useDropzone){BA=A8.getAddNewDerivedMetricToDropzoneSubmitFunc(Az);}else{BA=A8.getAddNewDerivedMetricToXtabSubmitFunc(Az);}}if(A5.docModel.isFromSolrCube(A9.did)||A5.docModel.isFromMDXCube(A9.did)){Ay.disableAFB=true;}A5.docModel.controller.openDME(BC,Ay,BA);}}mstrmojo.vi.models._DropZoneCommon=mstrmojo.provide("mstrmojo.vi.models._DropZoneCommon",{_mixinName:"mstrmojo.vi.models._DropZoneCommon",isMetric:function o(Aw){return Aw&&(Aw.t===Y.Metric||(Aw.t===Y.Parameter&&Aw.targetType===Y.Metric))&&Aw.id!==E;},isMetricCandidate:function B(Aw){return Aw&&(Aw.t===Y.Metric||(Aw.t===Y.Parameter&&Aw.targetType===Y.Metric));},isAttribute:function AS(Aw){return Aw&&(Aw.t===Y.Attribute||(Aw.t===Y.Parameter&&Aw.targetType===Y.Attribute));},isRecursiveAttribute:function e(Aw){return Aw&&Aw.t===Y.Attribute&&Aw.st===Ao.AttributeRecursive;},isNewDerivedElement:function AZ(Aw){return Aw.t===Y.Consolidation&&Aw.st===Ao.ConsolidationManaged;},isNewDerivedRecursiveElement:function AZ(Aw){return Aw.t===Y.Consolidation&&Aw.st===Ao.ConsolidationManaged&&Aw.ndetype===I.DssRecursiveDerivedElement;},isConsolidation:function An(Aw){return Aw.t===Y.Consolidation&&Aw.st===Ao.Consolidation;},isCustomGroup:function D(Aw){return Aw.t===Y.Filter;},isAttrCategory:function b(Aw){return Aw&&(Aw.t===Y.Attribute||Aw.t===Y.Filter||Aw.t===Y.Consolidation||Aw.t===Y.Dimension||(Aw.t===Y.Parameter&&Aw.targetType===Y.Attribute));},isMetricName:function Ah(Aw){return Aw&&(Aw.id===E||Aw.did===E);},differInType:function X(Ax,Aw){return(this.isMetric(Ax)&&(this.isAttrCategory(Aw)))||((this.isAttrCategory(Ax))&&this.isMetric(Aw));},isDynamicLink:function L(Ax){if(this.isAttribute(Ax)){var Aw=Ax.fs||a.getFormsByAttrId(Ax.did,this.docModel.datasets);return Aw.length===2&&Aw[1].bftp===U.DssXmlBaseFormHTMLTag&&Aw[1].fnm==="DYNAMICLINK";}return false;},hasOldDEOverDatasets:function(Az){var Ay=this.docModel.datasets,Ax=false,Aw;W.forEach(Ay,function(A0){Aw=P.find((A0.att||[]),"did",Az);if(Aw!==-1&&A0.att[Aw].de){Ax=true;return false;}});return Ax;},getZoneModelByZoneId:function(Aw){var Ax=this.dropZones,Ay;if((!Ax||!Ax.length)&&typeof this.getDropZones==="function"){Ax=(this.getDropZones()||{}).zones;}P.forEach(Ax,function(Az){if(Az.id===Aw){Ay=Az;return false;}});return Ay;},hGetItemOccurrence:function(A0,A2){A2=A2||[];if(A2.length===0){A2=[J,AW,H,Af,p,R,Q,AG,AR,Ai];}var Ay,Aw,Ax,A1=A2.length,Az=[];for(Ay=0;Ay<A1;Ay++){Ax=this.getZoneModelByZoneId(A2[Ay]);if(!Ax){continue;}Aw=this.getUnitIndexInZone(Ax,A0);if(Aw!==-1){Az.push({zoneId:A2[Ay],itemIndex:Aw});}}return Az;},removeColorByItemFromBreakByIfExists:function AO(Az,A1){var A0,Ay,Aw,Ax;A0=this.hGetItemOccurrence(Az,[J,AW,H,Af,R,Q,AR]);if((A0.length===1)&&(A0[0].zoneId===R||A0[0].zoneId===AR)){Ay=A0[0];Aw=this.getZoneModelByZoneId(Ay.zoneId);Ax=Aw.items[Ay.itemIndex];if(Ax.hidden){Array.prototype.push.apply(A1,this.getRemoveDropZoneUnitActions(Aw,Ax));}}},updateBreakByAndSliceUnits:function s(){var Aw=this,Ay=[J,AW,H,Af,p,Q,A,AN],Ax=this.getZoneModelByZoneId(AR)||this.getZoneModelByZoneId(R),Az;Ax.items.forEach(function(A0){if(Aw.isAttrCategory(A0)||Aw.isMetricName(A0)){Az=Aw.hGetItemOccurrence(A0,Ay);if((Az.length===1)&&(Az[0].zoneId===p)){A0.hidden=true;}}});},getAxisSummary:function Aa(){var Aw={};Aw[H]=this.getItemCountInZone(H);Aw[Af]=this.getItemCountInZone(Af);Aw[Ai]=this.getItemCountInZone(Ai);return Aw;},getItemCountInZone:function(Aw){var Ax=this.getZoneModelByZoneId(Aw);if(Ax){return Ax.items.length;}return 0;},isOnlyMetricZone:function m(Aw){var Ay,A0,Az,Ax=this.getZoneModelByZoneId(Aw);if(!Ax){return false;}Az=Ax.items;A0=Az.length;if(A0===0){return false;}for(Ay=0;Ay<A0;Ay++){if(!this.isMetric(Az[Ay])){return false;}}return true;},isMetricZone:function AJ(Aw){var Ay,A0,Az,Ax=this.getZoneModelByZoneId(Aw);if(!Ax){return false;}Az=Ax.items;A0=Az.length;if(A0===0){return false;}for(Ay=0;Ay<A0;Ay++){if(!this.isMetric(Az[Ay])){if(this.isMetricName(Az[Ay])){continue;}else{return false;}}}return true;},getMetricCntInZone:function(Aw){var Ay=this,Ax=this.getZoneModelByZoneId(Aw),A0=Ax.items,Az=0;P.forEach(A0,function(A1){if(Ay.isMetric(A1)){Az++;}});return Az;},isAttrCategoryZone:function(Aw){var Ay,A0,Az,Ax=this.getZoneModelByZoneId(Aw);if(!Ax){return false;}Az=Ax.items;A0=Az.length;if(A0===0){return false;}for(Ay=0;Ay<A0;Ay++){if(!(this.isAttrCategory(Az[Ay]))&&!this.isMetricName(Az[Ay])){return false;}}return true;},getZoneSummary:function AX(Aw){var Az=this,Ax=this.getZoneModelByZoneId(Aw),A1=Ax?Ax.items:[],A0=0,A2=0,Ay=false;P.forEach(A1,function(A3){if(Az.isMetric(A3)){A0++;}else{if(Az.isAttrCategory(A3)){A2++;}else{if(Az.isMetricName(A3)){Ay=true;}}}});return{metricCount:A0,attributeCount:A2,hasMetricName:Ay};},isTemplateContainAttCategoryItem:function Ac(){var Az=this,Ay=Az.getHost(),A0=Ay.model.data.gsi,Ax=(A0.rows||[]).concat(A0.cols||[]),Aw=false;if(Ax&&Ax.length){P.forEach(Ax,function(A1){if(Az.isAttrCategory(A1)){Aw=true;return false;}});}return Aw;},showNumberFormat:function(Aw){return mstrmojo.all[this.hostId].model.showNumberFormat(Aw);},renameItem:function(Ax,Aw){var Ay=this.id;k.renameItem(Ax,Aw,function(A6){var A7=mstrmojo.all[Ay],A0=Aw.setIdx,BB=A7.getHost(),BE=W.walk("defn.vis.vn",BB),A8=i.safeCall("isTimeSeriesInsightsViz",A7.docModel)(BE),BD=BB.hasArrayGSI,A4=w.getGSI(A7.getHostModel().gsi,Math.max(A0,0)||0),Az=BD&&A0>-1?A4.k:BB.k,A5=A6.allowTrimming?A6.text.trim():A6.text,BF=Aw.t===Y.Metric,A3=BF?A4.mx:A4.rows.concat(A4.cols),A2=A8&&A7.dropZones&&A7.dropZones.find(function(BG){return BG.id===l.BreakBy;}),BC=A2&&W.walk("items",A2)&&A2.items.length===1&&A2.items[0].did===Aw.did,BA=function(){var BJ=[],BI=A7.docModel.getPanel(),BK,BM;P.forEach(BI.children,function(BN){if((BN.isAMSelector instanceof Function)&&BN.isAMSelector()){BK=W.walk("defn.tks",BN);BK=BK&&BK.split(f);BM=BK&&BK[0];if(BM===BB.k){BJ.push(BN.k);}}});var BL=[],BH={act:"renameUnit",id:Aw.did,type:Aw.t,name:A5,isDynamicAlias:false};if(BD&&A0===-1){w.forEachGSI(BB.gridData.gsi,function(BN,BO){BL.push(AK(BO,[BH],false,BJ));});}else{BL.push(AK(Az,[BH],false,BJ));}if(A8&&BC){Aw.n=A5;var BG=A7.docModel.getInsightVizBreakByAction(A7,Aw);BL.push(BG);}A7.submitDropZoneUpdates(BL,undefined,undefined,true);},A1=function(){A6.set("text",Aw.n);},A9=A3.some(function(BG){return BG.did!==Aw.did&&(BF||BG.t===Aw.t)&&BG.n===A5;});if(A9){mstrmojo.warn(mstrmojo.desc(11664,'"##" already exists in the visualization. Do you want to proceed?').replace("##",A5),{confirmBtn:{fn:BA},cancelBtn:{fn:A1}});}else{BA();}},{allowEmptyText:true,cssClass:Ax.className});},getPageByUnit:function Ar(){var Ax=this.getHost(),Aw=Ax.builder.getLayoutVIMap(Ax.defn._lkz).getComponent(AY.TYPES.PAGEBY_PANEL);return Aw&&Aw.unit;},shouldShowDisplayFormsMenu:function G(Az){if(!mstrmojo.resolveFeature("set-attributeform-display")||!this.isAttribute(Az)&&!this.isNewDerivedRecursiveElement(Az)||this.isDynamicLink(Az)){return false;}var Aw=a.getFormsByAttrId(Az.attId||Az.did,this.docModel.datasets),A0=this.getHost().model.data,Ax=A0&&A0.gts,Ay=!!Ax&&Aw.length>1;if(Ax&&Aw.length===1){var A1=false;P.forEach((Ax.row||[]).concat(Ax.col||[]),function(A2){if(A2.id===Az.did&&P.find(A2.fs||[],"id",Aw[0].fid)>-1){A1=true;return false;}});if(!A1){Ay=true;}}return Ay;},getDisplayFormsMenu:function(Ax){var Aw=this;return k.getDisplayFormsMenu(Ax,Aw.getHost(),Aw.docModel.datasets,function(A0,Ay,Az){Aw.submitDropZoneUpdates(A0,null,null,Object.keys(Az).length===0);});},editDerivedMetric:function(Aw){Aj.call(this,Aw,"edit");},newDerivedMetric:function(Ax){var Aw=mstrmojo.all[this.hostId].zonesModel.allowInsertNewMetric(Ax.zone);if(Ax.zone.id===p){Aw=false;}Aj.call(this,Ax,"editNew",!Aw);},newDerivedAttribute:function j(Aw,Ay){var A0=Aw.item,A4=k.getUnitFromDataset(this.docModel.datasets,A0.did,A0.t)||A0,A7=this.getHost(),A5=W.walk("defn.vis.vn",A7),A6=Aw.zone.id===R,A2=A7.getChartStyle&&A7.getChartStyle()==="NewGraphMatrixVisualizationStyle",A3=this.getGSI(Aw),Ax=A7.hasArrayGSI?A3.datasetId:W.walk("model.data.datasetId",A7)||Object.keys(W.walk("model.docModel.datasets",A7)||{})[0],A1=this,Az={dsid:Ax,forceRefresh:true,alias:"New Attribute",precreate:function(BD){var BC=A7.k,A9=BD.name;if(A7.hasArrayGSI){BC=A3.k;}if(A1.getAddItemActions){var BB=A1.getAddItemActions(Aw.zone,[{did:"$GUID_1",t:12}]);BD.newObjectIds=["$GUID_1"];if(Ay){BB=A1.getRemoveDropZoneUnitActions(Aw.zone,A4).concat(BB);}BD=[BD,{act:"updateTemplate",keyContext:BC,actions:BB}];if(i.safeCall("isTimeSeriesInsightsViz",A1.docModel)(A5)&&A6){var BA={did:Aw.item.did,n:A9},A8=A1.docModel.getInsightVizBreakByAction(A1,BA);BD.push(A8);}}else{BD=W.copy({act:"addDAToTemplate",nodeKey:BC,treeType:A7.defn.tt},BD);if(Aw.useDropzone){BD.useDropzone=true;BD.dropzones=[{dropzoneId:Aw.zone.id,position:0}];if(Aw.item.ax!==undefined){BD.dropzones[0].ax=Aw.item.ax;}if(Ay){BD.dropzones[0].replaceSourceId=A4.did;}}else{BD.axis=Aw.axis;}if(A2){BD.dropzones.push({dropzoneId:AG,position:A1.getTooltipDropzoneIdx(Aw.item)+1});}}return BD;}};this.docModel.controller.openDAE(this,Az,mstrmojo.emptyFn,A4);},newDynamicLinkAttr:function AI(A1,Ax){var A2=A1.item,A0=k.getUnitFromDataset(this.docModel.datasets,A2.did,A2.t)||A2,Az=this.getHost(),Ay=this,Aw={forceRefresh:true,alias:"New Link",precreate:function(A6){var A5=Ay.getGSI(A1),A4=Az.k;if(Az.hasArrayGSI){A4=A5.k;}if(Ay.getAddItemActions){var A3=Ay.getAddItemActions(A1.zone,[{did:"$GUID_1",t:12}]);A6.newObjectIds=["$GUID_1"];if(Ax){A3=Ay.getRemoveDropZoneUnitActions(A1.zone,A0).concat(A3);}A6=[A6,{act:"updateTemplate",keyContext:A4,actions:A3}];}else{A6=W.copy({act:"addDAToTemplate",nodeKey:A4,treeType:Az.defn.tt},A6);if(A1.useDropzone){A6.useDropzone=true;A6.dropzoneId=A1.zone.id;if(A1.item.ax!==undefined){A6.ax=A1.item.ax;}if(Ax){A6.replaceSourceId=A0.did;}}else{A6.axis=A1.axis;A6.pos=A1.idx+2;}}return A6;}};this.docModel.controller.openDynamicLinkEditor(this,Aw,mstrmojo.emptyFn,A0);},editDerivedAttribute:function(Az){var Ay=this.getHost(),A2=Ay.gridData&&Ay.gridData.gsi,A1=Az.item,Ax=k.getUnitFromDataset(this.docModel.datasets,A1.did,A1.t)||A1,A0=this.docModel.findDatasetIdFromUnit(Ax.did),Aw={dsid:A0,did:Ax.did,n:Ax.n,alias:A1.n,forms:Ax.fs,preupdate:function(A5){var A3=A5.name,A4=[{act:"renameUnit",id:Ax.did,type:12,name:A3}];A5.name=Ax.n;A5=[A5,AK(Ay.getTemplateKey(),A4,true)];if(Ay.hasArrayGSI&&A2){w.forEachGSI(A2,function(A7,A8,A6){if(A6===0){return true;}A5.push(AK(A8,A4,true));});}return A5;}};if(this.isDynamicLink(A1)){this.docModel.controller.openDynamicLinkEditor(this,Aw,mstrmojo.emptyFn);}else{this.docModel.controller.openDAE(this,Aw,mstrmojo.emptyFn);}},getTemplateAttributes:function q(Aw){return Z.call(this,12,Aw);},getTemplateHierarchies:function c(Aw){return Z.call(this,14,Aw);},getTemplateDEs:function Al(Aw){var Ax=this.getGSI(Aw);return Ax.cols.concat(Ax.rows).filter(function(Ay){return Ay.st===Ao.ConsolidationManaged;});},getUnitInfoInTemplate:function y(Az){var A2={},A1=this.getHost().model.data,Ay=A1.gts,A0=[{axis:J,name:"row"},{axis:AW,name:"col"}];A0.forEach(function(A4){P.forEach(Ay[A4.name],function(A6,A5){if(A6.id===Az||A6.paraId===Az){A2.axis=A4.axis;A2.axisName=A4.name;A2.tplIdx=A5;A2.unit=A6;return false;}});});if(Object.keys(A2).length===0){var A3=A1.gsi,Ax=A3.parameterLayout,Aw={row:(Ax&&Ax.rows.length>0)?Ax.rows:A3.rows,col:(Ax&&Ax.cols.length>0)?Ax.cols:A3.cols};A0.forEach(function(A4){P.forEach(Aw[A4.name],function(A6,A5){if(A6.did===Az||A6.paraId===Az){A2.axis=A4.axis;A2.axisName=A4.name;A2.tplIdx=A5;A2.unit=A6;return false;}});});}return A2;},sortGrid:function AD(BA,BB,A6){var A7=this.getHost(),Az=A6&&A6.breakByType,A9=A6&&A6.breakByAttribute,BD=BA.t,A4=BA.did,BC=null,A2,A1=J,Ay=null,A0=[];if(BD===Ad.DssTypeMetric||(BD===Ad.DssTypePrompt&&BA.targetType===Ad.DssTypeMetric)){var A3=W.walk("model.data.gts.col",A7)||[];A1=P.find(A3,"otp",-1)>-1?J:AW;Ay=["","","",A1];if(Az){A0.push(Az);if(Az===AP.SORT_UNDER){A0=A0.concat([A9.did,A9.t]);}}}else{BC=this.getUnitInfoInTemplate(BA.did);A1=BC.axis;if(BD===Ad.DssTypePrompt&&BA.targetType&&BA.targetType!==Ad.DssTypeMetric){A2="";}else{if(A7.zonesModel.isDynamicLink(BA)){A2="45C11FA478E745FEA08D781CEA190FE5";}else{A2=BC.unit.fid||(BC.unit.fs&&BC.unit.fs[0].id);}}Ay=[A2,"21","",A1];}var A5=A7.model.data.gts[(A1===J?"row":"col")+"SubPos"],Ax=(A7.hasArrayGSI&&BA.setIdx>-1)?this.getSetData(BA.setIdx).k:undefined,A8={columnSetKey:Ax,metricSortKey:A0.join("!")},Aw=A7.model.getSortGridAction(A5,[BD,A4].concat(Ay).join("!"),A1,BB,A8);if(BD===Ad.DssTypePrompt){Aw.paramTargetType=BA.targetType;}A7.controller.onSort(A7,Aw);},addSortMenu:function d(BA,A2,BS,Aw){var A7=this,Az=this.getHost(),BH=BA.item,BD=BA.axis,BW=Az.model,BU=BW.data,Ax=BU.gts,BB=this.getGSI(BA),A1=BB.tma,BM=this.isMetric(BH)||(BH.t===Ad.DssTypePrompt&&BH.targetType===Ad.DssTypeMetric),BG=BM?A1===J:BD===J,BL=BG?BB.rows:BB.cols,BP=W.copy(BH),A9=BH.did,BQ=P.some(BB.cols.concat(BB.rows),function(BX){return BW.isRecursiveAttribute(BX.did);});if(BH.t===Ad.DssTypeFilter){return ;}if(BH.t===Ad.DssTypeDimension){P.forEach((Ax.row||[]).concat(Ax.col||[]),function(BX){if(BX.hid===BP.did){BP.did=BX.id;BP.t=BX.otp;return false;}});}var BC=true,BN;if(BM){BN=!!P.filterOne(BL,function(BX){return BX.did!==Aq;});if(BN){BC=false;}}if(BC){var BV=BG?[]:BB.rows,BJ=((BG&&BM)||(!BG&&!BM)?AW:J)-1,BR=BB.sorts&&BB.sorts.length>BJ?BB.sorts[BJ]:[],BI=false,A0=false,BE=false,BK=false,BF=-1,BO=P.filterOne(BR||[],function(BZ,BX){var BY=BZ.key.split("!");if(BY.length>1&&BY[1]===A9){BF=BX;return true;}return false;}),A3,Ay,A4,A5,A8=this.defaultSortMenuType||AP.NESTED;if(BO){switch(BO.isAsc){case true:BI=true;break;case false:A0=true;break;default:BE=true;A5=A8;}A3=BO.metricSortKey&&BO.metricSortKey.split("!");if(A3&&A3.length){A4=parseInt(A3[0],10);Ay=A3[1];BK=(A4===AP.SORT_UNDER);}}else{A5=A8;}if(Az.isVIXtab&&BM&&!BQ){A2.addMenuItem({ttp:mstrmojo.desc(7974,"Sort Ascending")},"xt btn asc"+(BI?" on":""),function(){A7.sortGrid(BP,true,{breakByType:A4||A5,breakByAttribute:(Ay?{did:Ay,t:A3[2]}:undefined)});});A2.addMenuItem({ttp:mstrmojo.desc(7975,"Sort Descending")},"xt btn desc"+(A0?" on":""),function(){A7.sortGrid(BP,false,{breakByType:A4||A5,breakByAttribute:(Ay?{did:Ay,t:A3[2]}:undefined)});});if(BO){A2.addMenuItem({ttp:mstrmojo.desc(11699,"Clear Sort")},"xt btn clr",function(){var BX=[];BR.splice(BF,1);BX[BJ]=BR;Az.controller.onClearSort(Az,BX);});}A2.addSeparator();if(A8===AP.ABSOLUTE){A2.addMenuItem(mstrmojo.desc(29277,"Sort All Values (Default)"),"xt"+(A4===AP.ABSOLUTE?" on":""),function(){A7.sortGrid(BP,BI,{breakByType:AP.ABSOLUTE});},BP);A2.addMenuItem(mstrmojo.desc(29278,"Sort Within"),"xt"+(A4===AP.NESTED?" on":""),function(){A7.sortGrid(BP,BI,{breakByType:AP.NESTED});},BP);}else{A2.addMenuItem(mstrmojo.desc(17812,"Sort Within (Default)"),"xt"+(A4===AP.NESTED?" on":""),function(){A7.sortGrid(BP,BI,{breakByType:AP.NESTED});},BP);A2.addMenuItem(mstrmojo.desc(17813,"Sort All Values"),"xt"+(A4===AP.ABSOLUTE?" on":""),function(){A7.sortGrid(BP,BI,{breakByType:AP.ABSOLUTE});},BP);}if(BV.length>1){A2.addPopupMenuItem(mstrmojo.desc(17811,"Sort Within an Attribute"),BP.id,function(){var BX=new mstrmojo.ui.menus.MenuConfig({isHostedWithin:false,alignWithAnchor:true});P.forEach(BV,function(Ba,BZ,BY,Bb){if(!Bb){BX.addMenuItem(Ba.n,"xt"+(BK&&Ay===Ba.did?" on":""),function(){A7.sortGrid(BP,BI,{breakByType:AP.SORT_UNDER,breakByAttribute:Ba});},BP);}else{BX.addMenuItem(Ba.n,"xt sort non-int disabled"+(BK&&Ay===Ba.did?" on":""),mstrmojo.emptyFn);}});return BX;});}if(Az.hasSubtotal()){A2.addMenuItem(mstrmojo.desc(19388,"Sort with Subtotals"),"xt"+(BO&&!BE&&!A3?" on":""),function(){A7.sortGrid(BP,BI);});}}else{A2.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt"+(BI?" on":""),function(){A7.sortGrid(BP,true);});A2.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt"+(A0?" on":""),function(){A7.sortGrid(BP,false);});}if(Az.isVIXtab&&BW.isRecursiveAttribute(A9)&&mstrApp&&mstrApp.isAppStateDefault()&&!mstrApp.isDossier){A2.addMenuItem(mstrmojo.desc(15676,"Custom Sort..."),"xt"+(BE?" on":""),function(){if(Az.customSort){Az.customSort(P.filterOne(Ax.col.concat(Ax.row),function(BX){return BX.id===A9;}),BD);}});}}if(BS){if(!Az.excludeData&&(Az.supportAdvancedSort?Az.supportAdvancedSort():!Az.hasArrayGSI)){A2.addMenuItem(mstrmojo.desc(11099,"Advanced Sort..."),"xt",function(){if(BD===AU){BD=A1;}Az.controller.onGetAdvSortData(Az,BD,BP.t,Aw,undefined,BP.targetType);});}}else{var A6=BB.sorts.some(function(BX){return !!BX.length;}),BT=mstrmojo.desc(11699,"Clear Sort");if(A6){A2.addMenuItem(BT,"",function(){A7.submitDropZoneTemplateUpdates([{act:"clearSort"}]);});}}},convertToMetric:function z(A2){var A1=this.getHost(),Aw=A1.model&&A1.model.data&&A1.model.data.datasetId,Ay=A1.k,A0=A1.defn.tt,Az=A2.item;if(!Aw){mstrmojo.hash.forEach(this.docModel.datasets,function(A4,A5){if(mstrmojo.array.find((A4.att||[]),"did",Az.did)!==-1){Aw=A5;return false;}});}var Ax=mstrmojo.mstr.EnumFunction,A3=Ae.call(this,{act:"addShortcutMetric",nodeKey:Ay,treeType:A0,funcType:Az.formType===2?Ax.FunctionSum:Ax.FunctionCount,units:[{id:Az.did,type:Az.t}],prs:[{n:"UseLookupForAttributes",v:"0"}],dsid:Aw,replaceSourceId:Az.did},A2);this.submitActionForDatasetUpdate(A3);},getAddMetricNameAction:function(A5,A1){if(!this.gmZones){return null;}var A3=this,Ax=0,A2=false,A0,Aw=A3.gmZones.getZoneModelByZoneId((A1===J)?Af:H),A4={n:"Metric Names",did:E,t:0},Az=W.clone(A4),Ay=A3.gmZones.hGetItemOccurrence(Az,[J,AW,H,Af,p]);P.forEach(Aw.items,function(A6){if(A3.isMetric(A6)){Ax++;}});if(Ay.length===0&&Ax<=1){A2=true;}if(A2){A0={act:"updateTemplate",keyContext:A5.k,actions:A3.gmZones.getUpdateMetricNameUnitActions(A2,A1)};}return A0;},getAggregateByMetricSubMenu:function(Ay){var A2=this,A1=Ay.item,A7=k.getUnitFromDataset(this.docModel.datasets,A1.did,A1.t)||A1,Ax=this.id,A8=this.getHost(),A0=A8.k,A4=A0,Az=A8.defn.tt,A3=this.submitActionForDatasetUpdate,A5=A8.getChartStyle&&A8.getChartStyle()==="NewGraphMatrixVisualizationStyle",Aw=this.getSetIdx(Ay);if(A8.hasArrayGSI&&Aw>-1){var A6=this.getGSI(Ay);A0=A6.k;}return k.getAggregateByMenu(A7,function(BE,BC){var BB=A2.allowInsertNewMetric(Ay.zone),BG=[];if(Ay.zone.id===p){BB=false;}if(BB&&Ay.useDropzone&&A2.gmZones){var BF=A2.gmZones.getZoneModelByZoneId((Ay.zone.id===Af)?J:AW);var BD=A2.getAddMetricNameAction(A8,BF.id);if(BD){BG.push(BD);}BD=A2.gmZones.getUpdateGroupInfoActionForNewMetric(Ay.zone.id,Ay.idx+1,A1.ax===0);if(BD){BG.push(BD);}}var BA=[];if(K.isFuncHasUseLookupForAttributeProp(BC)){BA=[{n:"UseLookupForAttributes",v:"0"}];}var A9=function(BH){BG=BG.concat(Ae.call(A2,{act:"addShortcutMetric",dsid:Av.call(A2,A7.did),nodeKey:BH,treeType:Az,funcType:BC,units:[{id:BE.did,type:BE.t}],prs:BA},Ay,{offset:BB?1:0,replaceSourceId:BB?null:A7.did,addToTooltip:A5},[A4]));};if(A8.hasArrayGSI&&Aw===-1){A9(A8.gridData.sortIndex);}else{A9(A0);}A3.call(mstrmojo.all[Ax],BG,true);});},getCalculationEditorCfg:function Ag(Ax){var A2=this,A8=this.getHost(),A1=this.submitActionForDatasetUpdate.bind(this),A0=A8.k,A3=A0,A5=this.getGSI(Ax),Ay=A8.defn.tt,A7=A2.allowInsertNewMetric(Ax.zone),Az=[],A4=A8.getChartStyle&&A8.getChartStyle()==="NewGraphMatrixVisualizationStyle";if(A8.hasArrayGSI){A0=A5.k;}if(Ax.zone.id===p){A7=false;}var Aw=A5.mx;if(W.walk("model.data.trendref",A8)){var A6=W.walk("model.data.dz",A8);Aw=AH.filterTrendlineMXByDZ(Aw,A6);}return k.getCalculationMetricEditor(Aw,Ax.item,function(BA,A9,BE,BB){if(A7&&Ax.useDropzone&&A2.gmZones){var BD=A2.gmZones.getZoneModelByZoneId((Ax.zone.id===Af)?J:AW);var BC=A2.getAddMetricNameAction(A8,BD.id);if(BC){Az.push(BC);}BC=A2.gmZones.getUpdateGroupInfoActionForNewMetric(Ax.zone.id,Ax.idx+1,Ax.item.ax===0);if(BC){Az.push(BC);}}A1(Az.concat(Ae.call(A2,{act:"addShortcutMetric",dsid:Av.call(A2,Ax.item.did),nodeKey:A0,treeType:Ay,funcType:BE,funcType2:BB,units:[BA,A9]},Ax,{offset:A7?1:0,replaceSourceId:A7?null:Ax.item.did,addToTooltip:A4},[A3])),true);});},submitAddShortcutMetric:function(A2,BG){var BI=this,BA=BI.id,A7=this.getHost(),Ax=A7.k,Az=A7.defn.tt,BJ=BI.submitActionForDatasetUpdate,BD=BI.allowInsertNewMetric(A2.zone),A4=[],A8=A7.getChartStyle&&A7.getChartStyle()==="NewGraphMatrixVisualizationStyle";if(A2.zone.id===p){BD=false;}if(BD&&A2.useDropzone&&BI.gmZones){var A1=BI.gmZones.getZoneModelByZoneId((A2.zone.id===Af)?J:AW);var BC=BI.getAddMetricNameAction(A7,A1.id);if(BC){A4.push(BC);}BC=BI.gmZones.getUpdateGroupInfoActionForNewMetric(A2.zone.id,A2.idx+1,A2.item.ax===0);if(BC){A4.push(BC);}}var BE=BG.item,A5=BG.extraItem,BH=BG.funcType,Ay=BG.funcType2,A3=BG.breakBys,Aw=BG.sortBys,A0=BG.prs,BB=[{id:BE.did,type:BE.t}],A9,A6=A7.k;if(A5){BB.push(A5);}if(A7.hasArrayGSI){var BF=this.getGSI(A2);Ax=BF.k;}A9={act:"addShortcutMetric",dsid:Av.call(BI,BE.did),nodeKey:Ax,treeType:Az,funcType:BH,units:BB,breakBys:A3,sortBys:Aw};if(Ay){A9.funcType2=Ay;}if(A0){A9.prs=A0;}if(K.isFuncHasUseLookupForAttributeProp(BH)){A9.prs=A9.prs||[];A9.prs.push({n:"UseLookupForAttributes",v:"0"});}A4=A4.concat(Ae.call(BI,A9,A2,{offset:BD?1:0,replaceSourceId:BD?null:BE.did,addToTooltip:A8},[A6]));BJ.call(mstrmojo.all[BA],A4,true);},getDynamicBreakByAxisOptions:function t(Ay,A0){var Az=this,A1=this.getGSI(A0),Aw=[],Ax=function Ax(A2){return A2.some(function(A3){return Az.isAttribute(A3)||Az.isNewDerivedElement(A3)||Az.isCustomGroup(A3)||Az.isConsolidation(A3);});};if(Ax(A1.rows)){Aw.push({n:Ay?mstrmojo.desc(3326,"By Columns"):mstrmojo.desc(122,"Columns"),axes_bitmap:h.DssXmlAxisRowsBit,dmy:"@cols"});}if(Ax(A1.cols)){Aw.push({n:Ay?mstrmojo.desc(3327,"By Rows"):mstrmojo.desc(2968,"Rows"),axes_bitmap:h.DssXmlAxisColumnsBit,dmy:"@rows"});}return Aw;},getBreakByAxisOptions:function n(Ax,Ay){var Aw=[{n:mstrmojo.desc(4531,"Automatic"),axes_bitmap:AQ.DssAxisDynamicShortcutRoot+Ap.DssDynamicShortcutAuto,dmy:"@auto"},{n:Ax?mstrmojo.desc(13408,"By None"):mstrmojo.desc(2057,"None"),axes_bitmap:h.DssXmlAxisPagesBit,dmy:"@p"}];if(Ax){Aw.splice(1,0,{isSeparator:true});}return Aw.concat(this.getDynamicBreakByAxisOptions(Ax,Ay));},getBreakByAttributeOptions:function F(Ax){var Aw=this,Ay=[],A0=Aw.getTemplateAttributes(Ax).concat(Aw.getTemplateDEs(Ax)),Az=Aw.getPageByUnit();Ay=Ay.concat(A0);if(Az&&Az.srcid){if(P.find(Ay,"did",Az.srcid)===-1){Ay.push({n:Az.n,did:Az.srcid,t:Az.srct});}}return Ay;},getDynamicBreakByOptions:function AL(Aw,Ay){var Ax=this,Az=Ax.getBreakByAttributeOptions(Ay);if(Aw&&Az.length){Az.unshift({isSeparator:true});}return Ax.getBreakByAxisOptions(Aw,Ay).concat(Az);},getDynamicLevelOptions:function x(Ax){var Aw=this,Az=Aw.getBreakByAxisOptions(true,Ax),Ay=Aw.getBreakByAttributeOptions(Ax);Az.some(function(A0){if(A0.axes_bitmap===h.DssXmlAxisPagesBit){A0.n=mstrmojo.desc(3329,"Grand Total");return true;}});if(Ay.length){Ay.unshift({isSeparator:true});}return Az.concat(Ay);},getShortcutMetricSubMenu:function(A0){var Az=this,Aw=new mstrmojo.ui.menus.MenuConfig(),A1=A0.item,Ay=k.getUnitFromDataset(this.docModel.datasets,A1.did,A1.t)||A1,Ax=Az.allowInsertNewMetric(A0.zone);if(Ay.t===Y.Metric){Az.addRankShortcutMenu(A0,Aw);Az.addPercentileShortcutMenu(A0,Aw);Az.addPercentToTotalShortcutMenu(A0,Aw);Aw.addSeparator();Az.addPercentOfShortcutMenu(A0,Aw);Az.addPercentChangeShortcutMenu(A0,Aw);Az.addDifferenceShortcutMenu(A0,Aw);Aw.addSeparator();Az.addMovingTotalShortcutMenu(A0,Aw);Az.addRunningTotalShortcutMenu(A0,Aw);Az.addPercentRunningTotalShortcutMenu(A0,Aw);}Aw.addSeparator();Aw.addMenuItem(mstrmojo.desc(11491,"More Functions..."),"",function(){Aj.call(Az,A0,"add",!Ax);},Ay);return Aw;},hasReplaceCandidates:function(Aw){var Ax=this.getReplaceCandidates(Aw.zone,Aw.item);return Ax&&Ax.length>0;},getReplaceSubMenu:function(Ax,A0){var A4,A5=Ax.item,A1=Ax.zone,Az=this.getReplaceCandidates(A1,A5),A2=this,A6=A2.hostId&&mstrmojo.all[A2.hostId],Ay=A6&&A6.hasAccessibility;A4=A0?[A0]:[];A4.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"scrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,navMode:Ay,enableAccessibility:Ay,CLS_HAS_MENU:"",items:Az,listHooks:{select:function A3(BB,BA){var A9=A2.getHost(),A7=Ax.cell,A8;if(A9.hasArrayGSI){A8=A2.activeTemplateSet;A2.activeTemplateSet=A7?A7.setIdx:A5.setIdx;}A2.unitsDropped(A1,{src:{data:{item:BA,items:[BA],dsid:BA.dsId}},getCtxtDragData:function(){var BC=this.src;return(BC&&BC.data)||{};},isDrag:false},{allowedItems:[BA],idx:A2.getUnitIndexInZone(A1,A5),edge:mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION.ON,removeReplaced:true});if(A9.hasArrayGSI){A2.activeTemplateSet=A8;}if(this.parent&&this.parent.parent&&this.parent.parent.closeAllMenus){this.parent.parent.closeAllMenus();}}}}]});return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"replaceReference",okVisible:false,cancelVisible:false,contents:A4,onOpen:function Aw(){this.scrollableContainer.updateScrollbars();if(this.hasAccessibility&&this.enableAccessibility){this.enableAccessibility();}}});},addRankShortcutMenu:function AC(Az,Ax){var Ay=this,A1=this.id;function Aw(A4,A3,A2){Ay.submitAddShortcutMetric(Az,{item:A4,funcType:mstrmojo.mstr.EnumFunction.FunctionRank,prs:[{n:"ASC",v:A3}],breakBys:A2});}function A0(A2){return k.getRankMetricEditor(A2.item,Ay.getDynamicBreakByOptions(false,A2),Aw);}Ax.addActionPopupMenuItem(mstrmojo.desc(2789,"Rank"),A1,function(){Aw(Az.item,"0",[{dmy:"@auto"}]);},A0,"",Az);},addPercentileShortcutMenu:function AB(Ay,Aw){var Ax=this,A1=this.id;function Az(A2){var A3;if(A2.dmy){A3={dmy:A2.dmy};}else{A3={id:A2.did,type:A2.t};}Ax.submitAddShortcutMetric(Ay,{item:Ay.item,funcType:mstrmojo.mstr.EnumFunction.FunctionPercentRank,breakBys:[A3],prs:[{n:"inclusive",v:"False"}]});}function A0(){var A3=new mstrmojo.ui.menus.MenuConfig(),A2=Ax.getDynamicBreakByOptions(false,Ay);A2.forEach(function(A4){if(A4.isSeparator){A3.addSeparator();return ;}A3.addMenuItem(A4.n,"",function(){Az(A4);});});return A3;}Aw.addActionPopupMenuItem(mstrmojo.desc(13409,"Percentile Rank"),A1,function(){Az({dmy:"@auto"});},A0,"",Ay);},addPercentToTotalShortcutMenu:function AT(Ax,A3){var A5=this,Aw=this.id,BA=Ax.item,BB=A5.getHost(),A7=BB.getChartStyle&&BB.getChartStyle()==="NewGraphMatrixVisualizationStyle",A4=A5.submitActionForDatasetUpdate.bind(A5),A2=A5.getDynamicLevelOptions(Ax),A1=BB.k,Ay=BB.defn.tt,A9=A5.allowInsertNewMetric(Ax.zone),A0=[];if(Ax.zone.id===p){A9=false;}if(BB.hasArrayGSI){var A8=this.getGSI(Ax);A1=A8.k;}function A6(BC){if(A9&&Ax.useDropzone&&A5.gmZones){var BE=A5.gmZones.getZoneModelByZoneId((Ax.zone.id===Af)?J:AW);var BD=A5.getAddMetricNameAction(BB,BE.id);if(BD){A0.push(BD);}BD=A5.gmZones.getUpdateGroupInfoActionForNewMetric(Ax.zone.id,Ax.idx+1,Ax.item.ax===0);if(BD){A0.push(BD);}}A4(A0.concat(Ae.call(A5,{act:"addPercentToTotalMetric",nodeKey:A1,treeType:Ay,metric_id:BA.did,axes_bitmap:BC.axes_bitmap||0,units:BC.did&&[{id:BC.did,type:BC.t}]},Ax,{offset:A9?1:0,replaceSourceId:A9?null:Ax.item.did,addToTooltip:A7})));}function Az(){var BC=new mstrmojo.ui.menus.MenuConfig();A2.forEach(function(BD){if(BD.isSeparator){BC.addSeparator();return ;}BC.addMenuItem(BD.n,"",function(){A6(BD);});});return BC;}A3.addActionPopupMenuItem(mstrmojo.desc(3323,"Percent to Total"),Aw,function(){A6({axes_bitmap:AQ.DssAxisDynamicShortcutRoot+Ap.DssDynamicShortcutAuto});},Az,"",Ax);},addPercentOfShortcutMenu:function O(A0,Aw){var Az=this,A1=this.id;function Ay(A3,A4,A2){Az.submitAddShortcutMetric(A0,{item:A3,funcType:A4,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:A2,sortBys:[{dmy:"@auto"}]});}function Ax(A2){return k.getRelativeReferenceMenu(A2.item,mstrmojo.desc(13394,"Percent of:"),Az.getDynamicBreakByOptions(false,A2),Ay);}Aw.addActionPopupMenuItem(mstrmojo.desc(13390,"Percent Of"),A1,function(){Ay(A0.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Ax,"",A0);},addPercentChangeShortcutMenu:function u(Az,Ax){var Ay=this,A1=this.id;function A0(A3,A4,A2){Ay.submitAddShortcutMetric(Az,{item:A3,funcType:A4,funcType2:mstrmojo.mstr.EnumFunction.FunctionVar,breakBys:A2,sortBys:[{dmy:"@auto"}]});}function Aw(A2){return k.getRelativeReferenceMenu(A2.item,mstrmojo.desc(20073,"From:"),Ay.getDynamicBreakByOptions(false,A2),A0);}Ax.addActionPopupMenuItem(mstrmojo.desc(13391,"Percent Change"),A1,function(){A0(Az.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Aw,"",Az);},addDifferenceShortcutMenu:function M(Az,Aw){var Ay=this,A1=this.id;function Ax(A3,A4,A2){Ay.submitAddShortcutMetric(Az,{item:A3,funcType:A4,funcType2:mstrmojo.mstr.EnumFunction.FunctionMinus,breakBys:A2,sortBys:[{dmy:"@auto"}]});}function A0(A2){return k.getRelativeReferenceMenu(A2.item,mstrmojo.desc(20073,"From:"),Ay.getDynamicBreakByOptions(false,A2),Ax);}Aw.addActionPopupMenuItem(mstrmojo.desc(11495,"Difference"),A1,function(){Ax(Az.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},A0,"",Az);},addMovingTotalShortcutMenu:function AV(Ay,Aw){var Ax=this,A1=this.id;function A0(A5,A4,A3,A2){Ax.submitAddShortcutMetric(Ay,{item:A5,funcType:A4,breakBys:A2,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"3"},{n:"OLAPWinStOffset",v:A3.toString()},{n:"OLAPWinEndType",v:"2"}]});}function Az(A2){return k.getMovingTotalMenu(A2.item,Ax.getDynamicBreakByOptions(false,A2),A0);}Aw.addActionPopupMenuItem(mstrmojo.desc(13392,"Moving Average"),A1,function(){A0(Ay.item,mstrmojo.mstr.EnumFunction.FunctionOLAPAvg,1,[{dmy:"@auto"}]);},Az,"",Ay);},addRunningTotalShortcutMenu:function Am(A0,Aw){var Az=this,A1=this.id;function Ay(A4,A3,A2){Az.submitAddShortcutMetric(A0,{item:A4,funcType:A3,breakBys:A2,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function Ax(A2){return k.getRunningTotalMenu(A2.item,Az.getDynamicBreakByOptions(false,A2),Ay);}Aw.addActionPopupMenuItem(mstrmojo.desc(11906,"Running Total"),A1,function(){Ay(A0.item,mstrmojo.mstr.EnumFunction.FunctionOLAPSum,[{dmy:"@auto"}]);},Ax,"",A0);},addPercentRunningTotalShortcutMenu:function C(Az,Ax){var Ay=this,A1=this.id;function Aw(A4,A2){var A3=[];A2.forEach(function(A5){if(A5.dmy){A3.push({dmy:A5.dmy});}else{A3.push({id:A5.did,type:A5.t});}});Ay.submitAddShortcutMetric(Az,{item:A4,funcType:mstrmojo.mstr.EnumFunction.FunctionOLAPSum,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:A3,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function A0(A4){var A3=new mstrmojo.ui.menus.MenuConfig(),A2=Ay.getDynamicLevelOptions(A4);A2.forEach(function(A5){if(A5.isSeparator){A3.addSeparator();return ;}A3.addMenuItem(A5.n,"",function(){Aw(A4.item,[A5]);});});return A3;}Ax.addActionPopupMenuItem(mstrmojo.desc(13393,"Percent Running Total"),A1,function(){Aw(Az.item,[{dmy:"@auto"}]);},A0,"",Az);},getMultipleMetricsCalcMenus:function AF(A3,A2,A5){var A4=this,A6=this.getHost(),A1=this.submitActionForDatasetUpdate.bind(this),Az=A6.k,Ax=A6.defn.tt,Ay=A2.map(function(A7){return A7.did;}),Aw=A3.items.map(function(A7){return A7.did;}),A0=-1;Ay.forEach(function(A7){var A8=P.indexOf(Aw,A7);if(A8>A0){A0=A8;}});return k.getMultipleMetricsCalculationMenus(A2,A6.model.data.datasetId,function(A9){var A8={act:"addShortcutMetric",dsid:Av.call(A4,Ay),nodeKey:Az,treeType:Ax,funcType:A9.funcType,funcType2:A9.funcType2,units:A9.items.map(function(BB){return{id:BB.did,type:BB.t};})},BA,A7;BA=Ae.call(A4,A8,{useDropzone:A5,zone:A3,item:{ax:0},idx:A0},{offset:1});if(A4.gmZones){A7=A4.gmZones.getUpdateGroupInfoActionForNewMetric(A3.id,A0+1,true);}if(A7){BA.push(A7);}A1(BA);});},getCreateOrEditElementGroupFunc:function Au(Ax){var Aw=this;return function(){var A1=Aw.getHost(),A2=A1.model,A0=Ax.item,Az=A0.did,Ay=Aw.getUnitInfoInTemplate(Az),A4="$GUID_1",A3=Ay.unit.ost===Ao.ConsolidationManaged&&A2.docModel.getDEObject(Az);A1.controller.openDEEditor(A1,A3?{deObj:A3}:{dsId:A2.data.datasetId,attId:Az,attName:A0.n,deId:A4,setIdx:A0.setIdx,getExtraSaveActions:function(A6){var A5=Ax.zone,A7=Aw.getRemoveDropZoneUnitActions(A5,A0);A7.push(Aw.getAddDropZoneUnitAction(A5,{did:A6||A4,t:Ad.DssTypeConsolidation},Ax.idx));return Aw.getUpdateTemplateAction(A7);}});};},buildThresholdMenuOptions:function AE(Ax,Ay,Aw){mstrmojo.all[this.hostId].model.buildThresholdMenuOptions(Ax,Ay,Aw,this.canSupportImageThreshold());},canSupportImageThreshold:function N(){return false;},getNumberFormatEditorCfg:function S(Aw){return mstrmojo.all[this.hostId].model.getNumberFormatEditorCfg(Aw);},submitUpdatesAndPersistWidgetXMLIfNecessary:function At(Az,Ay,Ax){var Aw=Az.model.docModel,A0=Aw.getDataService(),A2,A1;if(!Az.isXMLDirty()){Az.controller.onSubmitTemplateUpdates(Az,Ay,Ax);}else{A1={act:"updateTemplate",keyContext:Az.k,actions:Ay};A2=Az.getPersistAction();A0.submitUpdates([A1,A2],mstrmojo.func.wrapMethods(Az.controller._getXtabCallback(Az),Ax));Az.resetXMLDirtyFlag();}},submitActionForDatasetUpdate:function Ab(Ay,Aw){var Ax=this.docModel;this.submitDropZoneUpdates(Ay,mstrmojo.func.wrapMethods(Ax.getDatasetsUpdateCallback(),Ax.controller._getXtabCallback(this.getHost())),undefined,Aw);},getVFNotifierBlackList:function Ak(Ay,Aw){var Ax=11,Az=12;switch(Ay){case"XtabGrid":return[l.Rows,l.Columns];case"GraphMatrixVisualizationStyle":case"NewGraphMatrixVisualizationStyle":if(Aw){return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.BreakBy,l.SliceBy,l.Angle,Ax,Az];}return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.BreakBy,l.SliceBy,l.Angle];case"VIHeatMapVisualizationStyle":return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.Grouping];case"NetworkVisualizationStyle":return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.FromItem,l.ToItem];case"ImageLayoutVisualizationStyle":return[l.GeoAttribute,l.Layout];case"GoogleMapVisualizationStyle":case"ESRIMapVisualizationStyle":case"MapboxVisualizationStyle":return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.SliceBy,l.Angle,l.GeoAttribute,l.Latitude,l.Longitude];case"KPICardVisualizationStyle":return[l.Rows,l.Columns,l.XAxis,l.YAxis,l.Metric,l.BreakBy];default:return[];}},supportWebSort:function AM(){return !(mstrApp.isVI&&!mstrmojo.resolveFeature("web-sort"));},getSetIdx:function AA(Ay){var Ax=Ay.item,Aw=Ay.cell,Az=Aw?Aw.setIdx:Ax.setIdx;return Az;},getGSI:function As(Ay){var Ax=this.getHost(),Aw=Ax.model.data,A0=Aw.gsi;if(Ax.hasArrayGSI&&Ay){var Az=this.getSetIdx(Ay);if(Az===-1||Az===undefined){return w.getGSI(A0,Aw.sortIndex);}return w.getGSI(A0,Az);}return A0;}});mstrmojo.vi.models._DropZoneCommon.BREAKBY_TYPES=AP;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.color","mstrmojo.hash","mstrmojo.num","mstrmojo.array","mstrmojo.expr","mstrmojo.date");mstrmojo.requiresClsP("mstrmojo.mstr");mstrmojo.requiresClsP("mstrmojo.models.template","DataInterface");var m=1,j=2,u=3,I=4,c=5,n=6,l=7,A=-1,J=-2,G=mstrmojo.color,M=mstrmojo.hash,f=mstrmojo.array,F=mstrmojo.num,P=mstrmojo.date,w=mstrmojo.models.template.DataInterface,K,b;function t(AF,AE){return AF.every(function(AG){return AE(AG);});}function h(AG,AF,AE){return t(AG,function(AH){return AH.ttp===AF||AH.ttp===AE;});}function e(AF){var AE=AF.toFixed(2);return parseFloat(AE);}function q(AE){this.raiseEvent(M.copy(AE,{name:"modelEdit"}));}function y(AE){this.raiseEvent(M.copy(AE,{name:"selectedThresholdsChange"}));}function U(){var AE=this.basedOnId||this.metricId;return(f.filterOne(this.gsi.mx,function(AF){return AF.did===AE;})||{});}function o(AH){var AE=AH.expr.nds,AF=AE.length;if(AF!==1){return false;}var AG=AE[0],AQ=AG.cs;if(!AG.m||!AQ){return false;}var AP=AG.fnt,AK=AG.fn,AO=AQ[0],AM=AQ[1],AJ=AO&&AO.v,AI=AM&&AM.v,AN=F.parseNumeric(AJ)||parseFloat(AJ),AL=F.parseNumeric(AI)||parseFloat(AI);switch(AP){case 2:case 3:switch(AK){case 1:case 2:AH.flr=AP===2?-Infinity:0;AH.ceil=AN;AH.ttp=AP===2?(AK===1?c:I):(AK===1?j:m);break;case 3:case 4:case 5:case 13:AH.flr=AN;AH.ceil=isNaN(AL)?(AP===2?Infinity:100):AL;AH.ttp=AP===2?(AK===4?c:(AK===5?I:n)):(AK===4?j:(AK===5?m:u));break;default:return false;}break;default:switch(AK){case 11:AH.flr=-Infinity;AH.ceil=AN;AH.ttp=l;break;case 17:case 10:AH.flr=AN;AH.ceil=isNaN(AL)?Infinity:AL;AH.ttp=l;break;default:return false;}}return true;}mstrmojo.threshold.MetricThresholdData=null;mstrmojo.threshold.ThresholdModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdModel",data:undefined,getThresholdTargets:mstrmojo.emptyFn,gsi:undefined,setIdx:undefined,colSetNameMap:undefined,thresholds:undefined,orgThresholds:undefined,orgRowThresholds:{},selectedThresholds:[],metricId:undefined,basedOnId:undefined,basedOnName:undefined,editorMode:0,init:function x(AF){this._super(AF);var AE=mstrApp.customization.getCustomThresholds();K=K||AE.color;b=b||AE.image;},getThresholdIndexOffset:function s(){return w.getNumberOfThresholds(this.data.gsi,this.metricId,this.setIdx);},getColumnSetName:function O(AE){return M.walk(AE+".n",this.colSetNameMap)||"";},ondataChange:function p(){var AE=this.data;this.gsi=w.getGSI(AE.gsi,this.setIdx);this.thresholds=this.gsi.thresholds;this.saveOriginalData();this.saveOriginalRowData();},onsetIdxChange:function z(){var AE=this.data;if(this.setIdx===-1){this.setIdx=0;}this.gsi=w.getGSI(AE.gsi,this.setIdx);this.thresholds=this.gsi.thresholds;this.saveOriginalData();},isMetricAvailable:function(AE){return f.find(this.gsi.mx,"did",AE)!==-1;},thresholdMetricNotAvailable:function(AE){if(AE){mstrmojo.alert(mstrmojo.desc(16555,'This threshold is based on the metric "#####" which has been removed from the visualization. Please re-add this metric and try again.').replace("#####",AE));}else{mstrmojo.alert(mstrmojo.desc(16556,"This threshold is based on a metric which has been removed from the visualization. Please re-add this metric and try again."));}},isAdvanced:function E(AI){var AF=this.thresholds;if(AF){var AL=AF[AI]||[],Ab=false,Aa,AW,AV,AS,AY="The expression is not supported by the Simple Threshold Exception Parser.";if(AL.length===0){return false;}if(AL.some(function(Ah){if(Ah.ttp===A){return true;}try{if(!o(Ah)){throw AY;}AV=Ah.expr.nds[0].m;}catch(Ag){return true;}if(Aa&&Aa!==AV.did){return true;}Aa=AV.did;AW=AV.n;var Af=Ah.rtp;if(Af===3||Af===10){return true;}var Ac=Ah.scope;if(Ac&&Ac!==1){return true;}var Ae=Ah.fmt||{};for(var Ad in Ae){if(Ad!=="bc"&&Ad!=="bgs"){return true;}Ab=true;}return false;})){return true;}if(Ab&&!t(AL,function(Ac){return Ac.fmt&&(Ac.fmt.bc||Ac.fmt.bgs);})){return true;}this.basedOnId=Aa;this.basedOnName=AW;var AU=false,AR=this.getSimpleThresholdType(AI),AK=AL.length;if(AK>0&&AR!==J){var AX,AN,AP;for(AX=0;AX<AK-1;AX++){AN=AL[AX];AP=AL[AX+1];if(AN.ceil!==AP.flr&&AN.flr!==AP.ceil){AU=true;break;}}if(!AU){var AE=AL[0],AG=AL[AK-1],AO=AE.flr,AT=AG.ceil,AH=AE.ceil,AJ=AG.flr,AM=this.getMetricsCount(),AQ=this.getMetricsMinValue(),AZ=this.getMetricsMaxValue();switch(AR){case c:case I:AU=!(((AO===0||AO===-Infinity)&&(AT===AM||AT===Infinity))||((AH===AM||AH===Infinity)&&(AJ===0||AJ===-Infinity)));break;case j:case m:AU=!((parseInt(AO,10)===0&&parseInt(AT,10)===100)||(parseInt(AH,10)===100&&parseInt(AJ,10)===0));break;case l:AU=!(((AO===AQ||AO===-Infinity)&&(AT===AZ||AT===Infinity))||((AH===AZ||AH===Infinity)&&(AJ===AQ||AJ===-Infinity)));break;}}return AU;}return true;}return false;},getSimpleThresholdType:function(AF){var AG=this.thresholds&&this.thresholds[AF],AE=J;if(AG){if(h(AG,u,j)){AE=j;}else{if(h(AG,u,m)){AE=m;}else{if(h(AG,n,I)){AE=I;}else{if(h(AG,n,c)){AE=c;}else{if(h(AG,l)){AE=l;}}}}}}return AE;},isImageBasedType:function N(AE){var AF=this.thresholds&&this.thresholds[AE];return AF&&!AF.some(function(AG){return AG.rtp!==4;});},getMetricsMaxValue:function(){var AE=U.call(this).max;return(AE===undefined)?3000000:AE;},getMetricsMinValue:function(){var AE=U.call(this).min;return(AE===undefined)?-3000000:AE;},getMetricsCount:function(){var AE=U.call(this).cnt;return AE===undefined?100:AE;},getServerThresholdValues:function B(){var AE=this.basedOnId||this.metricId,AF=this.thresholds&&AE in this.thresholds&&this.thresholds[AE];if(f.isArray(AF)&&AF.length>0&&AF[0].ttp===l){AF.sort(function(AH,AG){return AH.flr-AG.flr;});return{min:AF[0].ceil,max:AF[AF.length-1].flr};}return{min:undefined,max:undefined};},getFormatString:function(){var AG=this.data.nf,AF=this,AE=f.filterOne(AG,function(AH){return AH.id===AF.basedOnId;})||{};return AE.nfs||"";},getDefaultColors:function AC(){return K;},getDefaultImages:function L(){return b;},getNormalizedValue:function(AJ,AH,AG,AL){var AF=null;if(AH===u||AH===j||AH===m){AF=AJ/100;}else{if(AH===n||AH===c||AH===I){AF=AJ/(this.getMetricsCount());}else{if(AH===l){var AI=this.globalMinMax(AG,AL),AE=AI.min,AK=AI.max;if(AL!==undefined&&AL<AK){AK=Math.max(AL,this.getMetricsMaxValue());}if(AG!==undefined&&AG>AE){AE=Math.min(AG,this.getMetricsMinValue());}if(AK===AE){return 1;}AF=(AJ-AE)/(AK-AE);}}}if(AF<0){AF=0;}if(AF>1){AF=1;}return AF;},getRealValue:function(AI,AG,AF,AK){if(AG===u||AG===j||AG===m){return e(AI*100);}if(AG===n||AG===c||AG===I){return e(AI*this.getMetricsCount());}if(AG===l){var AH=this.globalMinMax(AF,AK),AE=AH.min,AJ=AH.max;if(AK!==undefined&&AK<AJ){AJ=Math.max(AK,this.getMetricsMaxValue());}if(AF!==undefined&&AF>AE){AE=Math.min(AF,this.getMetricsMinValue());}return AE+AI*(AJ-AE);}return null;},globalMinMax:function g(AF,AJ){var AE=(AF!==undefined&&AF!==-Infinity)?AF:Infinity,AI=(AJ!==undefined&&AJ!==Infinity)?AJ:-Infinity,AG=this.getServerThresholdValues(),AH=AG.min,AK=AG.max;AH=(AH===undefined)?Infinity:AH;AK=(AK===undefined)?-Infinity:AK;return{min:Math.min(AE,this.getMetricsMinValue(),AH),max:Math.max(AI,this.getMetricsMaxValue(),AK)};},getColorScheme:function(AF){var AE="custom",AG,AH,AI;K.forEach(function(AJ){AI=AJ.bands;AH=AF.length;if(AH!==AI.length){return ;}for(var AK=0;AK<AH;AK++){AG=mstrmojo.color.fixFullHexValue(AF[AK]);if(AI[AK].bc!==AG&&AI[AH-AK-1].bc!==AG){return ;}}AE=AJ.id;});return AE;},getImageSetName:function a(AI){var AH=b[0].id,AE,AG=function(AJ){return AJ===AE.bands[0].url;};for(var AF=0;AF<b.length;AF++){AE=b[AF];if(AI.some(AG)){AH=AE.id;break;}}return AH;},getGridValueFormat:function Q(){return this.gsi.fmts.va;},isMapReversed:function R(AG,AE,AI){var AH=(AI?b:K).filter(function(AJ){return AJ.id===AG;})[0],AF=AE[0];if(!AI){AF=G.fixFullHexValue(AF);}return AH&&AH.bands[0][AI?"url":"bc"]!==AF;},setConditionData:function W(AH,AF){var AG=AH.data,AE=AG.isNew;M.copy(AF,M.clear(AG));delete AG.isNew;AH.paint();AH.tree.onConditionEdit(AH,AE);},hasSelectedThresholds:function AB(){return this.selectedThresholds.length>0;},isThresholdSelected:function i(AE){return this.selectedThresholds.indexOf(AE)!==-1;},toggleThresholdSelected:function d(AE,AG){var AK=this.selectedThresholds,AJ=AK.indexOf(AE),AF=AJ!==-1,AI=this.thresholds[this.metricId],AH=AI.indexOf(AE)!==-1;if(AH){if(AG&&!AF){AK.push(AE);}else{if(!AG&&AF){AK.splice(AJ,1);}}y.call(this);}},addThresholds:function Z(AE){var AF=this.thresholds[this.metricId];this.thresholds[this.metricId]=(AF||[]).concat(AE);q.call(this);},duplicateThreshold:function AA(AF){var AH=this.thresholds[this.metricId],AE=AH[AF],AG=M.clone(AE);AH.push(AG);if(this.isThresholdSelected(AE)){this.toggleThresholdSelected(AG,true);}q.call(this);},deleteThreshold:function AD(AE){var AG=AE.setIdx;if(AG!==undefined&&AG!==this.setIdx){this.set("setIdx",AG);}var AH=this.thresholds[this.metricId],AF=AH.indexOf(AE);if(AF!==-1){this.toggleThresholdSelected(AE,false);AH.splice(AF,1);}q.call(this);},moveThreshold:function D(AF,AH){var AG=this.thresholds[this.metricId],AE=AG.splice(AF,1);this.thresholds[this.metricId]=AG.slice(0,AH).concat(AE,AG.slice(AH,AG.length));q.call(this);},cleanUp:function S(){this.selectedThresholds=[];this.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.AUTO;},clearData:function Y(){var AE=this.thresholds;if(AE){AE[this.metricId]=undefined;}},saveOriginalData:function X(){this.orgThresholds=M.clone(this.thresholds);},saveOriginalRowData:function k(){var AE=this;this.orgRowThresholds={};w.forEachGSI(this.data.gsi,function(AF,AG){AE.orgRowThresholds[AG]=M.clone(AF.thresholds||{});});},setAttIdToNDE:function C(AG){if(!(AG instanceof Array)){AG=[AG];}var AF,AL,AH,AE,AK,AI=function(AM){AM.att.forEach(function(AN){if(AN.did===AK.did){AK.attId=AN.attId;}});},AJ=function(AM){AM.conid=AK.did;};for(AF=0;AF<AG.length;AF++){AE=AG[AF];for(AL in AE){AK=AE[AL];if(typeof AK==="function"||!(AK instanceof Object)){continue;}else{if(AL==="a"){if(AK.t===47&&AK.st===12033){M.forEach(this.controller.datasets,AI);AH=AE.fn;if(AH===22||AH===57){(AE.es||[]).forEach(AJ);}}}else{this.setAttIdToNDE(AE[AL]);}}}}},showNumberFormat:function H(){var AF=U.call(this),AG=AF&&AF.min,AE=AF&&AF.max;return(typeof (AG)==="number"||typeof (AE)==="number")||(P.isDate(AG)||P.isDate(AE));}});mstrmojo.threshold.ThresholdModel.SLIDER_MODE={COLOR_BASED:0,IMAGE_BASED:1,COLOR_TREND:1};mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL=[{n:"&#9679;",v:"1"},{n:"&#9632;",v:"2"},{n:"&#9830;",v:"3"},{n:"&#9670;",v:"4"},{n:"&#10070;",v:"5"},{n:"&#9784;",v:"6"},{n:"&#10047;",v:"7"},{n:"&#8984;",v:"8"},{n:"&#8680;",v:"29"},{n:"&#8679;",v:"30"},{n:"&#8681;",v:"31"}];mstrmojo.threshold.ThresholdModel.FEATURES={SHOW_ADVANCED_EDITOR:1,SHOW_BASED_ON:2,SHOW_IMAGE:3,SHOW_VALUE_ITEM:4,SHOW_COLOR_TREND:5,SHOW_MC_ADVANCED_EDITOR:6};mstrmojo.threshold.ThresholdModel.EDITOR_TYPES={AUTO:0,ADVANCED_EDITOR:1,SIMPLE_EDITOR:2};mstrmojo.threshold.ThresholdModel.BASED_ON_TYPES={LOWEST_PERCENT:m,HIGHEST_PERCENT:j,BETWEEN_PERCENT:u,LOWEST:I,HIGHEST:c,BETWEEN:n,VALUE:l,COMPLEX:A,NONE:J};}());(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.fe.FilterUtils","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig","mstrmojo.models.template.DataInterface","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.util.TelemetryUtil","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.enums.EnumExtendedPromptType","mstrmojo.vi.ui._RestApiHelper");var Ar=mstrmojo.hash,Ah=Ar.copy,Bg=mstrmojo.array,A2=mstrmojo.dom,u=mstrmojo.func,g=[mstrmojo.desc(8445,"Loading")],AR=mstrmojo.fe.FilterUtils.getExprXml,AC="$GUID_135",By=mstrmojo.array.ensureArray,s=0,Bx=mstrmojo.models.template.DataInterface,BY=mstrmojo.mstr.EnumWebAPIErrorCodes,C=mstrmojo.mstr.EnumDSSXMLObjectTypes,Bt=mstrmojo.util.TelemetryUtil,Ab=mstrmojo.vi.enums.EnumFeatures,A7=9,Bf=8,G=7,H=3,Aj=1,S="\u001E";function Av(B0){B0=B0||{};B0.preserveUndo=true;return B0;}function Ay(B4,B5,B0){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var B1=s++,B3=this.getTxUpdates(B1);B0=B0||{};B0.src=Ay.caller.name;if(!mstrmojo.string.isEmpty(B3)){B4.updateChanges=B3;}B4.zoomFactor=this.model.getZoomFactor();var B2=this.cmdMgr;if(!B0.preserveUndo&&B2){B2.onSubmitUpdates();}mstrApp.serverRequest(B4,this.wrapCallback(B5,B1,B0.preserveStid),B0);}function O(B3,B0,B7){var B4=this.model,B2=B3.unitKey,B8,B1,B6,B5;if(u.safeCall("isInsightsVizByUnit",B4)(B0)){B1=B4.getInsightParentSectionKey(B2);if(B7){B8=B3.newKey;B6=B4.getNextKey();B3.partialRetrieval=this.newRetrievalKeysConfig().addNode(B6);B3.newKey=B6;B3.kga=2;B3.nodeIdMaps=[{oldKey:B2,newKey:B8}];}B3.unitKey=B1;B5=B4.getLayoutUnitDefn(B1);if(B5){B3.unitType=B5.t;}}}function BM(B5,B3,B1,B0){var B4=B3&&B3.boxContent,B2=!!B4?B4.getNodeKey():B3.k;Ar.copy({unitType:B3.defn&&B3.defn.t,unitKey:B2},B5);if(B1.layoutKey){Ar.copy({toKey:B1.layoutKey,analysisSectionType:B1.analysisSectionType},B5);}else{Ar.copy({toKey:B1.parentKey},B5);}O.call(this,B5,B4,B0);return B5;}function p(B2,B3,B1,B0){Ar.copy({unitType:B3.defn.t,treeType:1,nodeKey:B3.nk,fieldKey:B3.k,destTreeType:1,destNodeKey:B1},B2);if(B0){Ar.copy({createNode:true,newNodeKey:B0.newNodeKey,newNodeKeyParent:B0.newNodeKeyParent},B2);}return B2;}function Au(B1){B1=B1||{};if(mstrApp.optimizeFitToPage){var B0=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(B0){B1.styleName="RWDocumentMobileStyle";B1.availableWidth=B0.w;B1.availableHeight=B0.h;}else{B1.innerWidth=mstrmojo.dom.windowDim().w;B1.innerHeight=mstrmojo.dom.windowDim().h;}}return B1;}function Bc(B4){var B3=this.updatingDocZoom,B2=this.sendBrowserInfo;B4=B4||{};delete this.updatingDocZoom;delete this.sendBrowserInfo;if(mstrApp.optimizeFitToPage&&!B3&&mstrApp.isExpress&&(this.model.zt===1||this.model.zt===2)){if(B2){B4=Au.call(this,B4);}else{B4.clientZoomFactor=this.model.getZoomFactor();var B0=this.model.getCurrentLayoutDef(),B1=(B0&&B0.dzf)||1;B4.clientDesiredZoomFactor=B1;}}return B4;}function Bn(B1){var B0=B1&&B1.style,B2=B0&&B0.params;return B2&&B2.treesToRender;}function BJ(B0,B1,B2){return{act:"moveUnit",toKey:B0,unitType:B1,srd:B2};}function Bs(B0){return B0.split(S)[2];}function AT(B1,B5){if(B1!==mstrmojo.DocDataService.UNDO_KEY){return B1;}if(!this.undoSectionKey){var B4=this.undoSectionKey=this.model.getNextKey(),B2=this.undoFGKey=this.model.getNextKey();B5.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:B4,fgKey:B2});var B3=this;B5.addCallbacks({failure:function B0(){delete B3.undoSectionKey;}});}return this.undoSectionKey;}function BG(B2,B1){var B0={dsid:B2.dsid,formula:B2.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(B2.tokenStreamXML),name:B2.alias,dsc:B2.dsc,afb:B2.afb,sfb:B2.sfb,mft:B2.mft};if(B1){B0.Ids=[AC];}return this.getAddDerivedMetricToDatasetAction(B0);}function AS(B1){var B0="USE_DEFAULT_INDICATOR";B1=B1||{};B1.mptso=B1.mptso||{pru:true};B1.mptsim=B1.mptsim||{pru:true};B1.mptfms=B1.mptfms||"";return{MDXPassThrough:{SolveOrder:B1.mptso.pru?B0:B1.mptso.v,ScopeIsolationMode:B1.mptsim.pru?B0:B1.mptsim.v,FormatString:B1.mptfms}};}function A4(B0,B1){return{act:"formatDerivedMetric",dsid:B0.dsid||"",mid:(B1||!B0.did)?AC:B0.did,format:AS(B0.mptf)};}function N(B3,B6,B1,B7,B0,B2){var B4=[this.getNodeKeyFromKeyContext(B6)];if(!B2){B4=By(B7).concat(B4);}var B5={act:B3,keyContext:B6,tgtKey:B1,partialRetrieval:{nodes:B4}};if(!B0){B5.partialUpdate={selectors:[Bs(B6)]};}return B5;}function BV(B2){var B4=false;if(B2===1||B2===2){var B1=this.model,B0=B1.controller,B5=B0.getRequiredZoomFactor&&B0.getRequiredZoomFactor(B2),B3=B1.getZoomFactor();if(isNaN(B5)||parseInt(Math.abs((B5-B3)*100),10)<=2){B4=false;}else{B4=true;}}return B4;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper,mstrmojo.vi.ui._RestApiHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,clientAuto:false,init:function Bv(B0){this._super(B0);this.cmdMgr=this.model.controller&&this.model.controller.cmdMgr;},wrapCallback:function R(B5,B2,B1){var B3=this;return u.wrapMethods({success:function B4(B6){if(B6){B3.model.bs=B3.rwb=B6.bs||B3.rwb;B3.msgId=B6.mid||B3.msgId;B3.cbKey=B6.cbKey||B3.cbKey;if(B6.stid!==undefined&&!B1){B3.stid=B6.stid;}if(B6.clientAuto!==undefined){B3.clientAuto=B6.clientAuto;}if(mstrApp.parseSecondaryDataProviders){mstrApp.parseSecondaryDataProviders(B6);}}B3.clearTxUpdates(B2);},failure:function B0(){B3.resetTxUpdates(B2);}},B5);},getNodeKeyFromKeyContext:function Bd(B0){return B0.split(S)[1];},refresh:function AW(B2,B3){var B1=!!B2.useRefreshProgress,B0=B1?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:g;delete B2.useRefreshProgress;B2=Au.call(this,B2);Ay.call(this,Ah(B2,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false,displayNoResErr:true,compress:1}),B3,{showProgress:true,hideProgress:true,progressStateText:B0,useRefreshProgress:B1});},keepSessionAlive:function b(B1,B0){Ay.call(this,{taskId:"keepSessionAlive"},B1,B0);},saveRW:function Az(B0,B1){Ay.call(this,Ah(B0,{taskId:"saveRW",msgID:this.msgId}),B1);},saveThresholds:function Bl(B1,B2,B0){Ay.call(this,Ah(B1,{taskId:"saveThresholds"}),B2,B0);},getThresholds:function A6(B1,B2,B0){Ay.call(this,Ah(B1,{taskId:"getThresholds"}),B2,B0);},browseElements:function y(B1,B2,B0){Ay.call(this,Ah(B1,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),B2,B0);},removeUnit:function I(B1,B2){var B0=Ah(B1,{act:"removeUnit"});this.submitTemplateUpdates(B0.nodeKey,B0,B2);},removeLayout:function Ag(B1,B0,B2){this.submitUpdates({act:"removeLayout",unitKey:B1,isCurrent:B0},B2);},moveLayout:function AK(B2,B0,B1){this.submitUpdates(this.getMoveNodeAction(B2,B0,B1),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function AH(B1,B0,B3){var B2={act:"macroCopyUnit",newKey:B3,partialRetrieval:this.newRetrievalKeysConfig().addNode(B3)};BM.call(this,B2,B1,B0,true);return B2;},getMacroMoveNodeAction:function Ao(B1,B0,B4){var B3=this.newRetrievalKeysConfig();B3.addNode(B1.k);B4&&B4.forEach(function(B5){B3.addNode(B5);});var B2={act:"macroMoveUnit",partialRetrieval:B3};BM.call(this,B2,B1,B0,false);return B2;},getCopyFieldAction:function U(B4,B1,B3,B0){var B2={act:"copyField",destFieldKey:B3,fieldName:B4.title+" copy",partialRetrieval:this.newRetrievalKeysConfig().addNode(B1)};p(B2,B4,B1,B0);return B2;},getMoveFieldAction:function AG(B3,B1,B0){var B2={act:"moveField",partialRetrieval:this.newRetrievalKeysConfig().addNode(B1)};p(B2,B3,B1,B0);return B2;},getMoveNodeAction:function BL(B5,B0,B2,B7){var B4=B5.defn,B3=B4?B4.t:mstrmojo.EnumRWUnitType.LAYOUT,B6=B5&&B5.boxContent,B1=!!B6?B6.getNodeKey():B5.k;return this.getMoveNodeActionUsingKey(B1,B3,B0,B2,B7);},getMoveNodeActionUsingKey:function Bw(B4,B2,B0,B1,B5){var B3=BJ(B0,B2,B5);B3.unitKey=B4;if(B1!==undefined){B3.index=B1;}return B3;},getMoveControlAction:function Z(B3,B1,B0){var B2=BJ(B1,mstrmojo.EnumRWUnitType.SELECTOR);B2.keyContext=B3;if(B0){B2.partialRetrieval={nodes:By(B0)};}return B2;},addMoveControlAction:function BR(B3,B2,B1,B0){B3.addActions(this.getMoveControlAction(B2,AT.call(this,B1,B3),B0));},getSetCtrlSourceAction:function Bh(B2,B4,B1,B3,B0){return{act:"setControlSource",keyContext:B2,unitId:B4,unitType:B1,ctrlType:B0,removeCGB:B3||[],partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B2)),partialUpdate:{selectors:[Bs(B2)]}};},getSetCandidateObjectsAction:function A8(B1,B0){return{act:"setCandidateObjects",keyContext:B1,ctlType:8,units:B0,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B1)),partialUpdate:{selectors:[Bs(B1)]}};},getRemoveCtrlTargetAction:function m(B2,B1,B3,B0){return N.call(this,"removeControlTarget",B2,B1,B3,B0);},getClearCtrlTargetAction:function Ba(B0){return{act:"clearControlTarget",keyContext:B0};},getAddCtrlTargetAction:function BD(B5,B1,B6,B7,B0,B2,B3){var B4=N.call(this,"addControlTarget",B5,B1,B6,B0,B2);B4.isUC=!B7;B4.excludeCtp=B3;return B4;},appendRepObjParams:function Aa(B4,B2,B3,B1){var B0=B2.getCGBMap();if(!B0||!B3){return ;}Ar.forEach(B3.cgb,function(B5){if(B0[B5]===B1){var B6=B2.getTargetDefn(B5)[B5];if(B6){B4.rplObjId=B6.replace_object;B4.rplObjTp=B6.replace_object_type;}}});},getReplaceCtrlTargetAction:function BC(B3,B2,B1,B0){return{act:"replaceControlTarget",ctlType:8,rplObjId:B1,rplObjTp:B0,nodeKey:B2,partialUpdate:{selectors:[Bs(B3)]}};},getAddCtrlTargetDatasetAction:function Am(B1,B0){return{act:"addControlTargetDataset",keyContext:B1,tgtDid:B0};},getRemoveCtrlTargetDatasetAction:function Ax(B1,B0){return{act:"removeControlTargetDataset",keyContext:B1,tgtDid:B0};},getClearCtrlTargetDatasetAction:function X(B0){return{act:"clearControlTargetDataset",keyContext:B0};},getChangeControlElementSource:function x(B1,B0){return{act:"changeControlElementSource",keyContext:B1,ctlElementSrc:B0};},getSetVLDBPropAction:function Bm(B3,B1,B0,B2,B5,B4){return Ar.copy({act:"setVLDBProperty",prop:B3,handler:B1,nodeKey:B0,value:B2,partialRetrieval:this.newRetrievalKeysConfig().addNode(B5||B0)},B4);},getTxUpdates:function Bo(B1){var B0=this.model;return B0&&B0.getTransactionUpdates&&B0.getTransactionUpdates(B1);},clearTxUpdates:function P(B1){var B0=this.model;if(B0&&B0.clearTransactionUpdates){B0.clearTransactionUpdates(B1);}},resetTxUpdates:function Af(B1){var B0=this.model;if(B0&&B0.resetTransactionUpdates){B0.resetTransactionUpdates(B1);}},loadDocLayout:function BZ(B4,B6,B5){var B3={act:"setCurrentLayout",unitKey:B4.layoutKey,disablePU:true,panelUnitKey:B4.panelKey},B2={style:{params:{treesToRender:3}}},B0=this.model,B1=!!B5;if(mstrApp.isVI){B6=u.wrapMethods(this.model.getUpdateLayoutDefaultPanelCallback(),B6);}if(!B5){B5=B0.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){B0.applyBufferedSelections(B5);}this.sendBrowserInfo=true;B5.add(B3,B6,B2);if(!B1){this.submitUpdates(B3,B6,B2);}},checkMissingCredentials:function c(B0,B1){Ay.call(this,Ah(B0,{taskId:"checkMissingCredentials"}),B1);},setCurrentDocLayout:function BQ(B2,B6,B5){var B4={act:"setCurrentLayout",unitKey:B2},B3={config:{silent:(B6===null)&&(!!B5&&Object.keys(B5.callback||{}).length===0)}},B0=this.model,B1=!!B5;B6=B6||null;if(mstrApp.isVI){B6=u.wrapMethods(this.model.getUpdateLayoutDefaultPanelCallback(),B6);}if(!B5){B5=B0.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){B0.applyBufferedSelections(B5);}B5.add(B4,B6,B3);if(!B1){B5.submit();}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function Bk(B0,B1){Ay.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:B0},B1);},requestPanelChangeDeferred:function At(B6,B5,B0,B1,B3,B4){var B2={act:"setCurrentPanel",unitKey:B5};if(B0){B2.partialRetrieval={nodes:B0.split(",")};}if(B1){this.sendBrowserInfo=true;}B6.add(B2,B4,{config:{showProgress:B3,hideProgress:B3,progressStateText:g},style:{params:{treesToRender:B1?3:0}}});},getGraphSelectionAction:function AX(B5,B0,B2,B9,B8,B1,CA,B4){var B6=this.model.getCurrentLayoutDef(),CB=(B6&&B6.dzf)||1,B7=!mstrApp.optimizeFitToPage||mstrApp.optimizeFitToPage===2,B3={act:"graphSelector",nodeKey:B5,sliceID:B2,x:B7?Math.round(B9/CB):B9,y:B7?Math.round(B8/CB):B8};if(B1){B3.usePartialUpdate="0";}else{B3.partialUpdate={selectors:B0.split(S)};}if(CA&&B4){B3.w=CA;B3.h=B4;}return B3;},getSelectorElementsAction:function Aq(B2){var B1={act:"setSelectorElements",keyContext:B2.ck,ctlKey:B2.ctlKey,elemList:mstrmojo.string.decodeHtmlString(B2.eid),isVisualization:!!B2.isDocVis},B0=B2.include;if(B0!==undefined){B1.include=!!B0;}if(B2.tks){B1.tks=B2.tks;}if(B2.disablePU){B1.usePartialUpdate="0";}else{if(B2.ignoreTargetData){B1.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B2.ck));}else{B1.partialUpdate={selectors:B2.ctlKey.split("\u001F")};}}return B1;},getUpdateTransactionAction:function BP(B1){var B0={act:"updateTransaction"};if(B1){if(B1.ctlKey){B0.partialUpdate={selectors:[B1.ctlKey]};}}return B0;},getSelectorFromGMAction:function AO(B1){var B0={act:"setSelectorFromGM",keyContext:B1.ck,ctlKey:B1.ctlKey,keepOnly:!!B1.keepOnly,selectorObjects:B1.selectorObjects,isVisualization:!!B1.isDocVis,include:!!B1.include};if(B1.tks){B0.tks=B1.tks;}if(B1.disablePU){B0.usePartialUpdate="0";}else{B0.partialUpdate={selectors:[B1.ctlKey]};}return B0;},getGMViewFilterAction:function Bp(B1){var B0={act:"keepOnlyGM",selectorObjects:B1.selectorObjects,isVisualization:!!B1.isDocVis,keepOnly:!!B1.keepOnly};if(B1.tks){B0.tks=B1.tks;}if(B1.disablePU){B0.usePartialUpdate="0";}else{B0.partialUpdate={selectors:[B1.ctlKey]};}return B0;},browseControlElements:function Ad(B4,CD,B1){var B3=B4.searchPattern,CA=B4.attributeId,B6=this.model;if(!B3||B3===""){return ;}var B7={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:CA,expressionXML:B4.expressionXML||"",dataSourcesXML:B4.dataSourcesXML||"",blockBegin:B4.blockBegin,blockCount:B4.blockCount,searchPattern:B3,rawInput:B3,browseFlags:B4.browseFlags||0,otp:B4.objectType};if(B4.datasetId){Ah({datasetID:B4.datasetId,messageID:B6.mid,ctlKey:B4.controlKey},B7);}var CC=B4.searchForms;if(CC){var B2="",B5="";Bg.forEach(CC,function(CE){B2+=B5+CE.did;B5=";";});B7.searchForms=B2;if(B6.isnew||B4.useClientForm){var B0="",B9="",B8=Bg.filterOne(B6.getDatasetUnits(["att"]),function(CE){return CE.did===CA;}),CB=B8.fs||[];Bg.forEach(CC,function(CE){var CF=Bg.filterOne(CB,function(CG){return CG.fid===CE.did;});B0+=B9+CE.did+":"+(CF&&CF.bftp||0);B9=";";});B7.clientFormPatterns=B0;}}Ay.call(this,B7,CD,B1);},setMultiDocSelectorElements:function d(B0,B1,B3){var B2={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:B1,selectorObjects:B0};Ay.call(this,B2,B3,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function BB(B5,B7,B9,B6,B8,B1,B0,B2,B4){var B3={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:B5,ctlTexts:B7,ctlKey:B9,zoomFactor:B1};if(A2.isAndroid||B0){B3.taskId="androidSetDocSelectorElements";}if(B6!==null&&B6!==undefined){B3.include=B6;}if(B2!==null&&B2!==undefined){B3.usePartDisplay=B2;}if(B4!==null&&B4!==undefined){B3.treesToRender=B4;}Ay.call(this,B3,B8);},getSelectorExpressionAction:function E(B2){var B1={act:"setSelectorExpression",keyContext:B2.ck,ctlType:B2.type,objId:B2.srcid,objType:B2.srct,expFunction:B2.f,expFunctionType:B2.ft,include:!!B2.include,qt:B2.qt,unset:!!B2.unset};if(B2.disablePU){B1.usePartialUpdate="0";}else{B1.partialUpdate={selectors:[B2.ckey]};if(B2.retrieveCtrlKey){B1.partialRetrieval=this.newRetrievalKeysConfig().addNode(B2.ctlKey);}}if(B2.changeQual){B1.changeQual=B2.changeQual;}var B0=B2.cs;if(B0!==null&&B0!==undefined){B1.expConstants=B0;B1.dataType=B2.dtp;}if(B2.fid){B1.fid=B2.fid;}return B1;},getRealTimeSelectorExpressionAction:function AY(B1){var B0={act:"setRealTimeSelectorExpression",keyContext:B1.ck,ctlType:B1.type,tift:B1.tift,ltifu:B1.ltifu,ltifv:B1.ltifv,ctifv:B1.ctifv};return B0;},getAttributeSelectorExpressionAction:function L(B1){var B0={act:"setAttributeSelectorExpression",keyContext:B1.ck,ctlKey:B1.ctlKey,ctlType:B1.type,expr:B1.expr,partialUpdate:{selectors:[B1.ctlKey]}};if(B1.tks){B0.tks=B1.tks;}if(B1.incFetch&&!B1.autoApply){B0.partialRetrieval={nodes:[B1.ctlKey]};}return B0;},getMultiUnitSelectorAction:function AV(B1){var B0={act:"multiUnitSelection",keyContext:B1.ck,include:B1.include!==false,cgbNodes:B1.ifwCgbNodes,isBranch:B1.isBranch,partialUpdate:{selectors:[B1.ctlKey]}};if(B1.selections&&B1.selections.passThroughExpression){B0.isPassThroughExpression=true;B0.expr=B1.selections.passThroughExpression;}else{B0.sels=B1.selections;}if(B1.updateExecute){B0.partialRetrieval={nodes:[this.getNodeKeyFromKeyContext(B1.ck)]};}return B0;},getCompoundGridMultiUnitSelectorAction:function A9(B3){var B2=[],B0,B1;for(B0=0;B0<B3.ck.length;B0++){B1=this.getMultiUnitSelectorAction(B3);B1.keyContext=B3.ck[B0];B1.partialUpdate.selectors=[B3.ctlKey[B0]];B2.push(B1);}return B2;},getRemoveCtrlAction:function q(B3,B2,B1){var B0={act:"removeControl",key:B3,partialUpdate:{selectors:[B3]},partialRetrieval:{nodes:By(B2)}};if(B1&&B1.length>0){delete B0.partialUpdate.selectors;B0.partialUpdate.objects=B1;}return B0;},getAddCtrlAction:function BN(CA,B8,B1,B9,B3){var B2=B3.isUC,CC=B3.srcType,B0=B3.srcId,B5=B3.targetKeys,CD=B3.ctlType,B4=B3.isSync,B7=B3.isParameterSelector,CB=Aj,B6;if(isNaN(CD)){CD=CB;}if(CD===Bf){CB=H;}else{if(CD===A7){CB=G;}}B6={act:"addControl",parentKey:CA,nodeKey:B8,ctlKey:B1,isUC:!!B2,unitType:CC||-1,unitId:B0||"",targetKeys:By(B5),ctlType:CD,gpType:CB,partialRetrieval:{nodes:By(B9)},isParameterSelector:!!B7};if(!B6.isUC||B4){B6.partialUpdate={selectors:[B1]};}return B6;},getReplaceCtrlAction:function Ai(B2,B5,B0,B4,B1,B3){return{act:"replaceControl",nodeKey:this.getNodeKeyFromKeyContext(B2),ctlKey:B5,ctlType:B0,unitId:B4,unitType:B1,partialUpdate:{selectors:[B5]},partialRetrieval:{nodes:By(B3)}};},getUseAlternateFilterTechniqueAction:function AZ(B2,B4,B1,B3,B0){return{act:"useAlternateFilterTechnique",nodeKey:this.getNodeKeyFromKeyContext(B2),ctlKey:B4,ctlType:B1,pdf:B0?1:0,partialUpdate:{selectors:[B4]},partialRetrieval:{nodes:By(B3)}};},getSaveGraphPropertiesAction:function An(B0,B1){return{act:"saveGraphProperties",nodeKey:B0,properties:B1};},getSelectorIncludeAction:function A(B2){var B1=B2.ckey||B2.ctlKey;var B0={act:"setSelectorInclude",keyContext:B2.ck,ctlKey:B1,ctlType:B2.type,include:B2.include,partialUpdate:{selectors:[B1]}};return B0;},getSelectorDirectTargetSelectorsAction:function BF(B1){var B0=B1.ckey;return{act:"setActionForDirectTargetSelectors",keyContext:B1.ck,ctlKey:B0,adts:B1.adts,partialRetrieval:{nodes:[B0]}};},getSelectorShowAllAction:function Bu(B0){return{act:"setSelectorShowAll",keyContext:B0.ck,ctlKey:B0.ckey,ctlType:B0.type,showAll:B0.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B0.ck))};},getUnsetSelectorAction:function Bq(B3){var B2=B3.ckey,B0=B3.ck,B1={act:"unsetSelector",keyContext:B0,ctlKey:B2};if(B3.scs!==undefined&&u.safeCall("supportFeature",mstrApp)(Ab.USE_FILTER_ENHANCEMENT)){B1.scs=B3.scs;}if(B3.ignoreTargetData){B1.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B0));}else{B1.partialUpdate={selectors:[B2]};}if(B3.resetSuc){B1.resetSuc=true;}if(B3.retrieveCtrlKey){B1.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B0));B1.partialRetrieval=B1.partialRetrieval.addNode(B2);}return B1;},getDynamicSelectionAction:function BK(B5){var B1=B5.ck,B4=B5.ctlKey,B2=this.getNodeKeyFromKeyContext(B1),B0=B5.updateKeys||[],B3={act:"dynamicSelection",keyContext:B1,ctlKey:B4,nodeKey:B2,sus:B5.sus,suc:B5.suc};if(B5.ignoreTargetData){B3.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B1));}else{B3.partialUpdate={selectors:[B4].concat(B0)};}if(mstrApp.isDossier){B3.partialRetrieval={nodes:[B4]};}return B3;},getSelectorClearAction:function z(B3){var B2=B3.ctlKey,B0=B3.ck,B1=this.getNodeKeyFromKeyContext(B0);return{act:"setSelectorClear",keyContext:B0,ctlKey:B2,scs:B3.scs,nodeKey:B1,partialUpdate:{selectors:[B2]}};},getRASelectorExpandAction:function AB(B1){var B0=B1.ckey;return{act:"raSelectorExpandCollapse",keyContext:B1.ck,ctlKey:B0,ctlType:B1.type,elementId:B1.elementId,isExpand:B1.isExpand,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(B1.ck))};},getChangeFilteringAction:function BT(B0,B3,B2,B1){return{act:"changeFiltering",nodeKey:B0,filterMode:B3,isUC:B2,partialRetrieval:{nodes:(B1?By(B1):[])}};},getChangeControlValueAction:function B(B3){var B2=B3.ctlKey,B0=B3.ck,B1=this.getNodeKeyFromKeyContext(B0);return{act:"changeControlText",ctlKey:B2,nodeKey:B1,newValue:B3.newValue,partialUpdate:{selectors:[B2]}};},getAddDerivedMetricToDatasetAction:function j(B0){return{act:"addDerivedMetricToDataset",dsid:B0.dsid,formula:B0.formula,isTokenStream:B0.isTokenStream,name:B0.name,dsc:B0.dsc,newObjectIds:B0.Ids,afb:B0.afb,sfb:B0.sfb,mft:B0.mft};},getSetMDXPassThroughOptionsForCMAction:function AE(B0){var B1={act:"formatDerivedElement",format:AS(B0.mptf)};if(B0.cid){B1.cid=B0.cid;}if(B0.ceid){B1.ceid=B0.ceid;}return B1;},getEditDocUnitPropAction:function o(B0){return{act:"editDocUnitProp",dsid:B0.dsid,formId:B0.formId,unitId:B0.unitId,unitType:B0.unitType,prop:B0.prop,value:B0.value};},getRWGraphImage:function AQ(B5,B9){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&BV.call(this,this.model.zt)){return ;}var B4=mstrApp,B0=this.id,B1={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:B5.k,sliceID:parseInt(B5.sid,10),width:parseInt(B5.w,10),height:parseInt(B5.h,10)};var B2=function(CB){if(CB&&CB.code==BY.MSI_GRAPH_NO_DATA&&B5.withinInfoWin){return true;}return false;};if(B5.needCoordinate){B1.needCoordinate=1;}if(B4.onMobileDevice()&&B4.useBinaryFormat){window.setTimeout(function(){Ay.call(mstrmojo.all[B0],B1,B9,Av());},0);}else{if(B5.encodeImage){B1.taskContentEncoding="base64";delete B1.taskEnv;Ay.call(this,B1,{success:function CA(CB){B9.success(CB);},failure:function B3(CB){(B9.failure||B4.onerror)(CB);},textResponse:B1.needCoordinate?false:true},Av({skipIServerError:B2}));}else{var B7=B4.getConfiguration(),B6=B4.getCurrentProjectId(),B8=new mstrmojo.StringBuffer();B1.__ts__=new Date().getTime();B1.sessionState=B4.getSessionState(B6);Ar.forEach(B1,function(CB,CC){B8.append(CC+"="+encodeURIComponent(CB));});B9.success(B7.getTaskUrlByProject(B6)+"?"+B8.toString("&"));}}},getImage:function BH(B1){var B2=mstrApp,B0=B2.getConfiguration();if(B0&&B1&&B1.indexOf("://")===-1){B1=B0.getHostUrlByProject(B2.getCurrentProjectId())+B1;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(B1)):B1;},setGridDisplayMode:function Ap(B2,B1,B3,B0){Ar.copy(mstrmojo.DocDataService.RAPID_EXEC,B0);this.submitUpdates({act:"setGridDisplayMode",unitKey:B2,displayMode:B1},B3,B0);},setDocZoom:function Q(B0,B1){this.updatingDocZoom=true;this.submitUpdates(Ah(B0,{act:"setDocZoom",disablePU:true}),B1,{style:{params:{treesToRender:3}}});},sortGrid:function AN(B0,B1){this.submitTemplateUpdates(B0.nodeKey,Ah({act:"sort"},B0),B1);},getAdvSortData:function AI(B0,B1){this.rwExecute(Ah(B0,{styleName:"RWGridStyle"}),B1);},getFilterExpression:function Y(B2,B1){var B3=B2&&B2.expr,B0=this.model;if(B3){if(B0&&B0.getVfexprWithUpdatedVf){B3=B0.getVfexprWithUpdatedVf(B1,B3);}}return AR(B3);},saveViewFilter:function AL(B5,B6){var B4=this.msgId,B0=B5&&B5.nodeKeys,B3=this,B2,B1;B2=Bg.map(B0,function(B7){return{act:"saveViewFilter",messageID:B4,nodeKey:B7,expr:B3.getFilterExpression(B5.filterModel,B7),partialUpdate:{nodes:[B7]}};});B1=Bg.map(B0,function(B7){return{act:"saveViewFilterLimit",messageID:B4,nodeKey:B7,limitExp:B5.limitExp,limitToRemove:B5.limitMdxToRemove||[]};});if(mstrApp&&mstrApp.isExpress){this.submitUpdates(B2.concat(B1),B6);}else{this.model.controller.submitUndoRedoUpdates(B2.concat(B1),null,B6);}},getViewFilter:function l(B1,B2){var B0=this.model;if(B0.getViewFilter){B0.getViewFilter(B1,B2);}else{Ay.call(this,{taskId:B1.taskId,rwb:B1.rwb,msgID:B1.msgID,nodeKey:B1.nodeKey},B2);}},createEmbeddedFilter:function K(B2,B5){var B0=B2.filterId,B3=B2.expJson,B4={act:"createEmbeddedFilter",messageID:this.msgId,expr:B2.expr,filterId:B0,filterName:B2.filterName};var B1=this.model;u.wrapMethods({success:function(){var B6=B1.defn.efs||[];B6.push({did:B0,exp:B3});B1.defn.efs=B6;}},B5);this.submitUpdates([B4],B5,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.NONE}},params:{suppressData:true}});},rwExecute:function W(B0,B1){Ay.call(this,Ah(B0,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),B1);},pivot:function BU(B0,B1){this.submitTemplateUpdates(B0.nodeKey,{act:"pivot",unitId:B0.unitId,unitType:B0.unitType,attFormId:B0.attFormId,axis:B0.axis,unitPos:B0.unitPos},B1);},resizeXtabColumn:function A5(B0,B1){this.submitUpdates([this.getUpdateTemplateAction(B0.nodeKey,B0),{act:"format",unitType:52,unitKey:B0.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],B1);},showTotals:function M(B0,B1){this.submitTemplateUpdates(B0.nodeKey,{act:"showTotals",unitId:B0.unitId,unitType:B0.unitType,subtotalType:B0.subtotalType,clearSubtotalType:B0.clearSubtotalType},B1);},drillGrid:function Ak(B0,B1){this.submitUpdates(this.getDrillGridAction(B0),B1,{config:{showProgress:true,hideProgress:true,progressStateText:g,delay:true}});},getDrillGridAction:function AD(B1){var B0={act:"gridDrillWithin",messageID:this.msgId,nodeKey:B1.nodeKey,sliceId:B1.sliceId,drillPathIndex:B1.drillPathIndex,drillPathKey:B1.drillPathKey,elementList:B1.drillElements,retainParent:B1.retainParent,partialUpdate:{nodes:By(B1.updateNodeKey||B1.nodeKey)}};if(B1.x){B0.x=B1.x;B0.y=B1.y;B0.graphHeight=B1.graphHeight;B0.graphWidth=B1.graphWidth;}return B0;},getShowBandingAction:function As(B0){return{act:"showBanding",show:!!B0};},changeDocGroupBy:function a(B2,B3,B0){var B1={act:"changeDocGroupBy",disablePU:true};if(B2.flags){B1.flags=B2.flags;}if(B2.groupbyKey){B1.gbKey=B2.groupbyKey;B1.elemId=B2.elementId;}else{B1.gbUnits=B2.gbUnits;}this.sendBrowserInfo=true;this.submitUpdates(B1,B3,{config:B0,style:{params:{treesToRender:3}}});},setOutlineExpanding:function e(B4,B5){var B2=[],B3=B4.xtab,B1=B3.node,B0=function(B6){return{act:"updateTemplate",keyContext:B6,actions:[{act:"setOutlineExpanding",prs:"Template Formatting",pr:"OutlineLevelExpanding",v:B4.outlineLevel}]};};Bx.forEachGSI(B3.gridInfo,function(B6,B7){B2=B2.concat(B0(B7));},B1.k||B1.data.k);this.submitUpdates(B2,B5,Ar.copy(mstrmojo.DocDataService.RAPID_EXEC,{config:{silent:true},style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}}));},retrieveServerJson:function AU(B2,CA,B3){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&BV.call(this,this.model.zt)){return ;}var B8={},B0,B1,B6;var B7=B2.nodes;if(B7){B8.partialRetrieval=B7;}var B9=B2.slices;if(B9){B8.slices=B9;}if(B3){B0=B3.style;B1=B3.config;B6=B3.params;}if(!B1){B1={showProgress:true,hideProgress:true,progressStateText:g};}var CB=B2.style=Ar.clone(this.defaultStyle),B5=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();Ah(B0.params,CB.params);var B4={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,excludeData:!!(B5||mstrConfig.resolveOnly),params:JSON.stringify(B8),treesToRender:CB.params.treesToRender};Ah(B6,B4);B1.preserveUndo=(B3&&B3.preserveUndo)||false;Ay.call(this,B4,CA,B1);},downloadGridData:function BX(B5,B6){var B4={act:"gridIncrementalFetch",nodeKey:B5.nodeKey,rowPosition:B5.rowPosition,maxRows:B5.maxRows,colPosition:B5.colPosition,sliceId:B5.sliceId,maxColumns:B5.maxColumns,rowMode:B5.rowMode||1,partialRetrieval:this.newRetrievalKeysConfig().addNode(B5.nodeKey)};if(B5.partialUpdate){B4.partialUpdate=B5.partialUpdate;}var B0=this.model,B2=u.safeCall("hasLiveDataset",B0)();if(B2&&B0.needRebuildAfterCancel){B4.needRebuildAfterCancel=true;B0.needRebuildAfterCancel=false;}var B3=mstrmojo.all[B5.xtabId],B1=B3&&B3.isCustomSort;this.submitUpdates(B4,B6,Ar.copy(Av(),{noUpdate:true,preserveStid:B1,config:{silent:true}}));},txMarkRows:function f(B0,B1){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionMarkRow(B0.nodeKey,B0.sliceId,B0.rowOrdinal,B0.actionType);}else{Ay.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:B0.nodeKey,sliceId:B0.sliceId,rowOrdinal:B0.rowOrdinal,actionType:B0.actionType},B1);}},txChangeData:function AF(B0,B1){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionDataChange(B0.nodeKey,B0.sliceId,JSON.stringify(B0.cells),B0.autoRefresh);}else{Ay.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:B0.nodeKey,sliceId:B0.sliceId,cells:B0.cells,autoRefresh:B0.autoRefresh},B1);}},sendTransactionActions:function BS(B1,B2){var B0={taskId:"DocTransaction",rwb:this.rwb,keyContext:B1.keyContext,actions:B1.actions,messageID:this.msgId};if(B1.txrcd){B0.isPending=B1.txrcd.pending;B0.timestamp=B1.txrcd.timestamp;}if(mstrApp.isExpress&&(this.model.zt===1||this.model.zt===2)){Bc.call(this,B0);}Ay.call(this,B0,B2,{silent:!!B2});},newUpdate:function Aw(B2,B1){var B0=new mstrmojo.DocDataService.Update(B1);B0.ds=this;B0.cmd=B2;return B0;},newUpdateWithoutCmd:function Al(B1){var B0=new mstrmojo.DocDataService.Update(B1);B0.ds=this;return B0;},newRetrievalKeysConfig:function h(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function BW(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function Be(B1,B0){this.newUpdate(B1,B0).submit();},submitUpdates:function k(B7,B1,B3){var CD=this.model;B7=By(B7);if(mstrApp.isVI&&!mstrApp.isDossier&&CD.controller.isDatasetPanelRefreshAction(B7)){B1=u.wrapMethods(CD.getDatasetsUpdateCallback(),B1);}this.cleanFormatLayoutXML(B7);var CF={actions:B7},CC,CG,CE,B5=false;Bg.forEach(B7,function B2(CI){if(CI.disablePU){B5=true;delete CI.disablePU;}Bg.forEach(CI.actions,B2);return !B5;});if(!B5){var CB=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(B7),CA=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(B7);if(!Ar.isEmpty(CB)){CF.partialRetrieval=CB;}if(!Ar.isEmpty(CA)){CF.partialUpdate=CA;}}if(B3){CC=B3.style;CG=B3.config;CE=B3.params;}if(!CG){CG={showProgress:true,hideProgress:true,progressStateText:g};}if(!CC){CF.style=this.defaultStyle;}else{var B9=CF.style=Ar.clone(this.defaultStyle);Ah(CC.params,B9.params);}CF.style.name=(CC&&CC.name)||mstrApp.styleName;var B0={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(CF)};CE=Bc.call(this,CE);Ah(CE,B0);CG.preserveUndo=(B3&&B3.noUpdate)||false;CG.preserveStid=(B3&&B3.preserveStid)||false;var CH=this,B4=true,B8=u.override({success:function(CI,CK){var CJ=u.safeCall("hasLiveDataset",CD)();if(CJ&&CD.needRebuildAfterCancel&&CI.data){CD.needRebuildAfterCancel=false;}if(CI.status===2){B4=false;CH.submitUpdates([],B1,B3);}else{B4=true;if(CD&&CI.pukeys){CD.raiseEvent({name:"gjsSuccessWithPUKeys",res:CI,actions:B7});}return this._super(CI,CK);}},complete:function(){if(this._super&&B4){this._super();}try{if(typeof mstrApp!=="undefined"&&typeof mstrApp.raiseEvent==="function"){mstrApp.raiseEvent({name:"UpdateFilterDescription"});}}catch(CI){console.error(CI);}}},Ah(B1));if(!(B3&&B3.hideCancel)){CG.waitBoxCfg=Ar.copy({showCancel:true},CG.waitBoxCfg);}if(B3&&B3.message){CG.waitBoxCfg=Ar.copy({message:B3.message},CG.waitBoxCfg);}if(B3&&B3.isAIBot){CG.isAIBot=true;}var B6=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(B3&&B3.resolveOnly!==undefined){B0.resolveOnly=B3.resolveOnly;}else{if(B6){B0.resolveOnly=true;}}if(B3&&B3.excludeData!==undefined){B0.excludeData=B3.excludeData;}else{if(B6){B0.excludeData=true;}}if(B3&&B3.noDeltaXML!==undefined){B0.noDeltaXML=B3.noDeltaXML;}if(B0.resolveOnly&&B0.excludeData){mstrApp.enableUpdate=true;}if(Bt.getCurManipInfo().actionTypeId){B0.telemetry=Bt.getCurManipInfo();Bt.resetManipInfo();}Ay.call(this,B0,B8,CG);},submitTemplateUpdates:function D(B0,B2,B3,B1){this.submitUpdates(this.getUpdateTemplateAction(B0,B2),B3,B1);},getUpdateTemplateAction:function Br(B0,B3,B1,B2){return{act:"updateTemplate",keyContext:B0,partialRetrieval:this.newRetrievalKeysConfig().addNode(B2||B0,B1),partialUpdate:{selectors:B3.selectors},actions:By(B3)};},addUpdateTemplateAction:function AA(B2,B0,B1){B2.addActions(this.getUpdateTemplateAction(B0,B1));},applySegment:function Bz(B1,B0,B2){Ay.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:B1,nodeKey:B0},B2);},getPageByTree:function t(B0){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},B0);},getUserDICubeInfo:function BO(B0,B1){Ay.call(this,{taskId:"getUserDICubeInfo",cubeIds:B0.join(",")},B1);},applySorts:function Ac(B1,B2,B0,B3){Ay.call(this,{taskId:"applySorts",key:B1,sortType:B2,sortList:B0},B3,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function Ae(B1){var B0=this;return function(B4){var B5=B0.model,B3=B5.controller,B2=Ar.copy(B4,B1),B6=[BG.call(B0,B2,true)],B7=B5.getDatasetsUpdateCallback();if((B2.mptf||{}).dirty||this.enablePTO){B6.push(A4(B2));}B3.submitUndoRedoUpdates(B6,null,B7,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function Bj(B1){var B0=this;return function(B5){var B7=B0.model,B9=B7.controller,CA=Ar.copy(B5,B1),B8=CA.nodeKey,CD=CA.host.model,CB=CA.idx,B4=[],CC=u.wrapMethods(B7.getDatasetsUpdateCallback(),B9._getXtabCallback(CA.host)),B6,B3=function(CE){B4.push(B0.getUpdateTemplateAction(CE,[CD.getRemoveTemplateUnitAction({did:CA.replace.did,t:CA.replace.t})]));},B2=function(CE){var CF=B0.getUpdateTemplateAction(CE,[CD.getAddTemplateUnitAction({did:AC,t:4},CA.dsid,CA.zoneid,CB,CA.setIdx)],null,CA.retrieveKey);CF.actions.push(CD.getValuesDefaultFormatGridZoneAction([{did:AC}],true));B4.push(CF);};B4.push(BG.call(B0,CA,true));if((CA.mptf||{}).dirty||this.enablePTO){B4.push(A4(CA,true));}if(CA.replace){if(Bg.isArray(B8)){for(B6=0;B6<B8.length;B6++){B3(B8[B6]);}}else{B3(B8);}}else{CB++;}if(Bg.isArray(B8)){for(B6=0;B6<B8.length;B6++){B2(B8[B6]);}}else{B2(B8);}B9.submitUndoRedoUpdates(B4,null,CC);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function i(B1){var B0=this;return function(B7){var B8=B0.model,B9=B8.controller,CB=Ar.copy(B7,B1),CD=CB.host.zonesModel,CE=CB.idx,B6=[],B5,B2=[],CC={id:CB.zoneid},CA={did:AC,t:4},CF=u.wrapMethods(B8.getDatasetsUpdateCallback(),B9._getXtabCallback(CB.host));B6.push(BG.call(B0,CB,true));if((CB.mptf||{}).dirty||this.enablePTO){B6.push(A4(CB));}if(CB.replace){var B4={did:CB.replace.did,t:CB.replace.t};Array.prototype.push.apply(B2,CD.getRemoveDropZoneUnitActions(CC,B4));}else{CE++;}B2.push(CD.getAddDropZoneUnitAction(CC,CA,CE,{datasetId:CB.dsid}));if(CB.extraZone){B2.push(CD.getAddDropZoneUnitAction({id:CB.extraZone.id},CA,CB.extraZone.idx,{datasetId:CB.dsid}));}if(!CB.replace){var B3=(B1.zoneid===4)?1:2;B5=CD.getAddMetricNameAction(B1.host,B3);if(B5){B6.push(B5);}}if(!CB.replace&&CD.gmZones){B5=CD.gmZones.getUpdateGroupInfoActionForNewMetric(B1.zoneid,CE,true);if(B5){B6.push(B5);}}CD.checkAndAddThresholdAction(CB.zoneid,CA,B2);B6.push(B0.getUpdateTemplateAction(CB.nodeKey,B2));B9.submitUndoRedoUpdates(B6,null,CF);};},getEditDerivedMetricSubmitFunc:function n(B1){var B0=this;return function(B3){var B4=B0.model,B6=B4.controller,B8=Ar.copy(B3,B1),B5=B1.nodeKey,CA=B1.retrieveKey,B9={act:"editDM",formula:B8.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(B8.tokenStreamXML),afb:B1.afb,sfb:B1.sfb,mft:B1.mft,dsid:B8.dsid||"",did:B8.did,dsc:B8.dsc},B2=[B4.addUpdateObjects(B9,{id:B8.did,type:C.Metric,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],CB=u.wrapMethods(B4.getDatasetsUpdateCallback(),B6.getPartialUpdateCallback()),B7=function(CC){B2.push(B0.getUpdateTemplateAction(CC,[{act:"renameUnit",id:B8.did,type:C.Metric,name:B8.alias,isDynamicAlias:false}],null,CA));};if(mstrApp.isSingleTier&&B1.originTokenStream){B9.originFormula=B1.originTokenStream;B9.originAfb=B1.originAfb;B9.originSfb=B1.originSfb;}if((B8.mptf||{}).dirty){B2.push(A4(B8));}if(B5){if(Bg.isArray(B5)){Bg.forEach(B5,B7);}else{B7(B5);}}else{B9.name=B8.alias;}B6.submitUndoRedoUpdates(B2,null,CB,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}});};},resetSelections:function J(B1,B0,B2){Ay.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:B1||"",usePartDisplay:B0?"0":"1",treesToRender:B0?3:2},B2);},setPreference:function BI(B0,B1){Ay.call(this,{taskId:"setPreference",prefs:B0},B1);},getObjectInfo:function Bb(B0,B1){Ay.call(this,Ah(B0,{taskId:"getObjectInfo"}),B1,Av());},addSuppressData:function A0(B0){if(Bn(B0)===mstrmojo.DocDataService.EnumTreesToRender.NONE){Ar.copy({params:{suppressData:true}},B0);}},uploadImageToServer:function(B2,B3){var B1={taskId:"importImage",imageFieldName:"imageData",isEdit:1,imageName:encodeURIComponent(B2.imageName),imageSize:B2.imageSize,nodeKey:B2.nodeKey,msgID:this.msgId||""};if(B2.fieldKey){B1.fieldKey=B2.fieldKey;}if(B2.fieldName){B1.fieldName=B2.fieldName;}if(B2.sectionKey){B1.sectionKey=B2.sectionKey;}if(B2.vizKey){B1.vizKey=B2.vizKey;B1.taskContentType="json";B1.taskEnv="xhr";}if(B2.specialFieldType){B1.specialFieldType=B2.specialFieldType;}if(B2.treeType){B1.treeType=B2.treeType;}if(mstrApp.isSingleTier){var B0=";base64,";B1.rwNodeKey=B2.fieldGroupKey;B1.imageData=B2.base64Str.split(B0)[1]||B2.base64Str;mstrApp.serverRequest(B1,B3);}else{B1.imageData=B2.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,B3,B1);}},uploadControlImageToServer:function(B1,B2){var B0={taskId:"importControlImage",imageFieldName:"imageData",isEdit:1,imageName:encodeURIComponent(B1.imageName),imageSize:B1.imageSize,nodeKey:B1.nodeKey,ctlKey:B1.ctlKey,msgID:this.msgId||""};B0.imageData=B1.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,B2,B0);},cleanFormatLayoutXML:function BA(B0){Bg.forEach(B0,function(B3){if(B3.act==="format"){var B2=Ar.walk("format.FormattingSize.LayoutXML",B3),B1=function(B4){Bg.forEach(B4,function(B5){B1(B5.children||[]);B1(B5.floatChildren||[]);delete B5.id;});return B4;};B1(B2&&B2.children||[]);B1(B2&&B2.floatChildren||[]);}});},duplicateReportInstance:function AP(B3,B2,B1){var B0=!!(mstrConfig.resolveOnly||(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()));Ay.call(this,Ar.copy(B2,{taskId:"duplicateReportInstance",skipRebuild:B0}),B3,B1||{showProgress:true,showProgressText:true});},getIncludeChangeCallback:function Bi(CB,B5,B2,B1){var CA=B5.node.defn,B0=CA.include,B6=B5.node.k,B9=B5.model;B5.set("wait",false);if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){B5.toggleDisplayAll(B0);}if(!B2){var B8=function(){if(B1){return(CB.pukeys||"").split(S).concat(B6);}return B6;},B4=B8(),B7=B9.getTargetDefn(B4),B3=[];Ar.forEach(B7,function(CC,CD){if(CC&&CC.srcid&&(!!CA.paraid?CC.paraid===CA.paraid:CC.srcid===CA.srcid)){CC.include=B0;CC.showall=!CC.scs&&!CC.shouldLimitSingleSelection&&B0;}else{B3.push(CD);}});B3.forEach(function(CC){delete B7[CC];});B9.partialUpdate(CB.data,B7);}if(!B5.isInFilterPanel()&&B5.parent){B5.parent.selectVIUnit(true);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Bv(B0){Ah(B0,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function BE(B0){this.actions=this.actions.concat(By(B0));},addCallbacks:function A1(B0){this.callback=u.wrapMethods(this.callback,B0);},addExtras:function AM(B1){var B0=Bn(B1),B2=Bn(this.extras);this.extras=Ah(B1,this.extras);if(B0!==undefined&&B2!==undefined){this.extras.style.params.treesToRender|=B2;}},addUpdate:function AJ(B0){this.add(B0.actions,B0.callback,B0.extras);},setTreesToRender:function F(B0){if(B0){this.addExtras({style:{params:{treesToRender:B0}}});}return this.extras.style.params.treesToRender;},add:function w(B1,B2,B0){if(B1){this.addActions(B1);}if(B2){this.addCallbacks(B2);}if(B0){this.addExtras(B0);}},submit:function A3(){var B1=this.actions,B2=this.callback,B0=this.extras;if(this.cmd){this.cmd.submit(B1,B2,B0);}else{this.ds.submitUpdates(B1,B2,B0);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:g,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.RAPID_EXEC={params:{suppressData:true,rapidExec:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.util.XtabHelper","mstrmojo.models.ParametersInterface","mstrmojo.models.template.DataInterface");var c=mstrmojo.array,a=mstrmojo.func,X=mstrmojo.hash,U=mstrmojo.util.XtabHelper,S=mstrmojo.models.ParametersInterface,N=mstrmojo.models.template.DataInterface;var f=1,R=2;var E=2,J=4,D=5;var A=3;var e={1:"row",2:"col",3:"page"};function H(g,h){if(h===undefined){h="col";}return g[typeof h==="number"?e[h]:h];}function B(g,i){var h=i.lm;return h&&h[g.mix||0];}function O(g){return g.replace(/;/g,"\\;");}function P(k){var h=this.getCellTitleInfo(k[0]),j=this,m=[],o=function(i){if(i){if(mstrApp.useBinaryFormat){if(i._e){m.push(i.axis+"A"+(i.ui+1)+"A"+i._e.id);}o(i._p);}else{m.push(j.getDrillElementOfNonBinary(i));}}},l,g;if(!h.isSrcTitle){for(l=0,g=k.length;l<g;l++){var n=k[l];if(n.mix!==undefined&&(n._lp||n._tp)){o(n._lp);o(n._tp);}else{o(n);}}}return(mstrApp.useBinaryFormat)?m:m.join(",");}mstrmojo._XtabModelShared=mstrmojo.provide("mstrmojo._XtabModelShared",{mixinName:"mstrmojo._XtabModelShared",getSortAction:function G(h,AB,j,s){var z=this.getCellTitleInfo(h),AF=z.title,AC=[],q=function(){if(z.isSrcTitle){return AF.axis;}if(a.safeCall("docModel.hasMDXRADataset",this)()){return f;}return c.find(this.data.gts.col,"otp",-1)>-1?f:R;},t=q.call(this),x=this.data.gts[((t===f)?"row":"col")+"SubPos"],AE=this.xtab,AA,m,o,u,i,AD,n,l;if(AE.getColumnSetCellBelongsTo){AA=AE.getColumnSetCellBelongsTo(h);}AB=(AB===null||AB===undefined)?!(h&&h.so):AB;if(z.isSrcTitle||h.isFromAttributeForm){m=E;if(S.isSingleSelection(AF.paraId,this.data.gsi)){u=10;o=AF.paraId;l=AF.otp;}else{o=AF.id;u=AF.otp;if(h.isFromAttributeForm){AD=h.fid;}else{i=U.getCellForm(h);AD=i&&i.n==="DYNAMICLINK"?"45C11FA478E745FEA08D781CEA190FE5":U.isMultiFormRowHeaderCell(h)?i.id:AF.fid;}}}else{m=J;u=4;n=AF.stt;var y,p;do{y=h._e;if(y){if(y.oid){o=y.oid;}else{p=O(y.id);AC.push(p);}}h=h._p;}while(h);if(S.isSingleSelection(y&&y.paraId,this.data.gsi)){l=u;u=10;o=y.paraId;if(AE.hasSubtotal()&&!j){AC.push(O(y.id));}}}var w={sortType:m,axis:t,isAsc:AB,unitID:o,unitType:u,elementList:AC.join(";"),subTotalsPos:x};if(o){w.unitID=o;}if(AD){w.formId=AD;}if(l){w.paramTargetType=l;}if(!j){if(n){w.sortType=D;w.stt=n;}}var g;if((m===J)||(m===D)){g=["","",w.elementList||"",w.axis];}else{g=[w.formId,"21","",w.axis];}g=[w.unitType,w.unitID].concat(g);w.sortKey=g.join("!");if(j){var k=[];k.push(j);if(j===A){k=k.concat([s.did,s.t]);}w.metricSortKey=k.join("!");}if(AA){w.columnSetKey=AA.k;}return w;},hasDummySortKey:function Q(g){var h=g.split("!");return h[1]==="00000000000000000000000000000000";},convertCurrentSortAxisIntoActionSort:function K(g){var h=this;g=c.filter(g,function(i){return !h.hasDummySortKey(i.key);});(g||[]).forEach(function(j){var i=j.key;if(i){j.key=O(i).replace(/\u001e/g,";");}});return g;},convertCurrentSortsIntoActionSorts:function M(i){var g=X.clone(i),h=this;g.forEach(function(j,k){g[k]=h.convertCurrentSortAxisIntoActionSort(j);});return g;},getCellTitleInfo:function Z(h,n){var i=n?n.gts:this.data.gts,k=i&&i.col,m=h&&h.setIdx;var l=null;if(i){if(h&&h.mix===undefined){l=H(i,h.axis)[h.tui||h.ui];}else{var j=(i.page||[]).some(function(o){return parseInt(o.otp,10)===-1;});var g=function(s){var p=(s&&s.length)||0,q;for(q=p-1;q>=0;--q){var o=s[q];if(parseInt(o.otp,10)===-1){if(j){return o.es[h.mix];}return o;}}return null;};if(typeof m==="number"&&m>-1){k=this.xtab.getColSetColumnTitles(m,true);}l=g(k)||g(i.row)||g(i.page);}}return{isSrcTitle:!!h&&(h.o===undefined)&&!((h.mix!==undefined)&&(h._lp||h._tp)),title:l};},getCellLinksInfo:function b(h,i){if(!i){var g=this.getCellTitleInfo(h);i=g&&g.title;}return B(h,i);},getCellInfo:function I(h){var g=this.getCellTitleInfo(h),k=g.title,j=(h&&(h.id||h.did||(h._e&&h._e.id)))||"",i={isTitle:false,isHeader:false,isMetric:false,isOPItem:false};if(h&&(h.hasOwnProperty("mix")||h.otp===-1)){i.isMetric=true;if(h._e){i.isHeader=true;}}if(g.isSrcTitle){i.isTitle=true;}else{if(k.es&&c.find(k.es,"id",j)>-1){i.isTitle=true;}}if(h.paraId||(h._e&&h._e.paraId)){i.isOPItem=true;}return i;},getAllDrillPathsForCell:function Y(h,n){if(!n){var g=this.getCellTitleInfo(h);n=g&&g.title;}var j=X.walk("_e.oid",h),l=!!(n&&n.dp)?n.dp.slice(0):[];for(var k=0;k<l.length;k++){var o=l[k],m=o&&o.oid;if(m&&j&&m!==j){l[k]={};}}return l;},getPivotAction:function L(h,o){var j=false,i=h.hasOwnProperty("mix"),p=i?null:h.axis,m=(i?h.idx:h.ui)+1,w=(h.otp===-1);if(!isNaN(o)){p=parseInt(o,10);m=1;if(i){i=false;w=true;}}else{var t=(o==="u"||o==="l"||o==="b");if(!i){var k=H(this.data.gts,p),y=0,AB={},g=false;mstrmojo.array.forEach(k,function(AD){if(AB[AD.id]){AB[AD.id].frm++;}else{y++;AB[AD.id]={pos:y,frm:1};if(AD.id===h.id){g=true;}else{if(g){return false;}}}});if(AB[h.id]){m=AB[h.id].pos;}var u=h.fix;if(u){if((!t||u>1)&&!this.xtab.isOutlineMode){if(t||u!==AB[h.id].frm){m=u;j=true;}}}}else{var z=H(this.data.gts,h.axis),s=z[h.ui].es,AC=N.getGSI(this.data.gsi),n=AC.mx;if(s.length!==n.length){var q=s[m+(t?-1:1)-1];if(q){var l=c.find(n,"did",q.oid);if(l!==-1){m=l+(t?1:-1)+1;}}}}if(o==="b"){m=1;}else{m=m+(t?-1:1);}}var x={act:"pivot",unitPos:m};if(j){x.attFormId=h.fid;}else{if(!i){x.axis=p;}}if(!w){var AA=i?h._e:h;if(!j){x.unitType=AA.otp;}x.unitId=i?AA.oid:h.id;}return x;},getPCellParentNodeByPI:function d(g){var h=X.walk("pi.ri",g),k=X.walk("pi.ci",g),j=X.walk("data.ghs.chs.items",this),l=X.walk("data.gts.col",this);if(typeof h==="undefined"||typeof k==="undefined"||!j||!l){return undefined;}var n=X.walk(h+".items."+k,j),i,m;if(!n){return undefined;}i=l[n.tui];m=i&&i.es[n.idx];n._e={id:m&&m.id,n:m&&m.n};return n;},getDrillAction:function C(g,i){var h=i||this.getCellDrillsInfo(g[0]);if(!h){return null;}return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,isWithin:h.within,drillPathKey:h.k,drillPathIndex:h.dpi,drillElements:P.call(this,g)};},getCellDepth:function F(g){var h=X.walk("data.gts.row",this);return U.getCellDepth(g,h);},getDrillElementOfNonBinary:function W(g){return g.axis+"A"+(this.getCellDepth(g))+"A"+g.o;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Button","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.VIComponentMap","mstrmojo.VisEnum","mstrmojo.gmaps.MapEnums","mstrmojo.models.template.DataInterface","mstrmojo.expr");mstrmojo.requiresDescs(15518,15519,15526);var F=mstrmojo.array,D=mstrmojo.hash,C="-1",H=1,G=2,I=-1,E=mstrmojo.Button.newWebButton,J=mstrmojo.vi.models.VIComponentMap.TYPES,B=mstrmojo.expr.TP,A=mstrmojo.models.template.DataInterface;mstrmojo.vi.models._CheckDataCards=mstrmojo.provide("mstrmojo.vi.models._CheckDataCards",{_mixinName:"mstrmojo.vi.models._CheckDataCards",CARDLIMIT:mstrmojo.VisEnum.VIS_CARDLIMIT.NON_GRID,isUnitRestrictedInViz:function(){var P=this.getHost&&this.getHost(),O=P&&P.defn,L=!!(O&&O.iifp);if(L){return false;}var K=this.docModel,M=[],N=K.getVIComponent(J.FILTER_PANEL),Q=N&&N.parent;M=M.concat((Q&&Q.getFilterDefinitions())||[]);return M.length;},_addInLargeItems:[],_columnCardinalityCount:1,_totalRow:0,clearCardinalityFlags:function(){this._addInLargeItems=[];this._columnCardinalityCount=1;this._totalRow=0;},existLargeOrManyItems:function(){return(!!this._addInLargeItems.length||this._columnCardinalityCount>this.CARDLIMIT);},existLargeRowCount:function(){return(this._totalRow>mstrmojo.vi.models.editors.XtabEditorModel.ENUM_MAX_ROWS_OUTLINE);},findTotalColumnCount:function(R,S,Z,K){var U=this,a,M=1,Q=0,W=this.getHost().gridData,Y;U._columnCardinalityCount=1;if(W){if(S&&S.id===H){var L=W.rw,b=L&&L.row;U._columnCardinalityCount=(b&&b.tc)||1;return ;}if(typeof K==="number"&&K>=0){var P=D.walk("gts.col",W),N,X;Y=D.walk("items."+K+".cols",S);F.forEach(Y,function(c){if(c.t===B.ATTR){N=F.filterOne(P,function(d){return d.id===c.did;});X=D.walk("es.length",N)||1;M*=X;}});}else{Y=S&&S.items;var O=D.walk("ghs.chs",W);if(O&&O.cws){M=O.cws.length;}}}F.forEach(Z,function(c){if(c.t===B.ATTR&&c.card){M/=c.card;}});F.forEach(R,function(c){if(S&&S.id===G){F.forEach(Y,function(d){if(d.t===B.ATTR&&d.did===c.did&&d.card){Q++;M/=d.card;}});}a=c.cardg>0?c.cardg:c.card;if(!a&&c.otp===B.ATTR&&c.es){a=c.es.length+1;}if(a){M*=a;}});U._columnCardinalityCount=(Q===R.length)?1:M;},findEstimatedTotalRow:function(Q,M,L){var S=this,b,X=1,N=0,a=this.getHost&&this.getHost(),U=a.gridData,Z=this.docModel,R=Z&&Z.datasets;L=L||[];S._totalRow=1;function P(e){var d=0;Object.keys(R).every(function(f){return R[f].att&&R[f].att.every(function(g){if(g.did===e){d=g.card;return false;}return true;});});return d;}function O(d){return Q.some(function(e){return d.did===e.did;})||L.some(function(e){return d.did===e.did;});}if(U){var K=parseInt(D.walk("rhsCP.rc",a)||0,10);if(K>0){X=K;}else{var W=U.gsi||{},c=W.rows,Y=W.mx;F.forEach(c,function(d){if(O(d)){return ;}if(d.t===B.ATTR||(d.t===B.PARAMETER&&d.targetType&&d.targetType!==B.METRIC)){X*=P(d.did)||1;}else{if(d.t===B.METRIC||(d.t===B.PARAMETER&&d.targetType===B.METRIC)){if(d.did===C&&Y){N=Y.length;F.forEach(Y,function(e){if(O(e)){N--;}});}}}});}}F.forEach(Q,function(d){if(d.t===B.METRIC||(d.t===B.PARAMETER&&d.targetType===B.METRIC)){if(M===H||M===I){if(d.did===C&&U&&U.gsi.mx){N=U.gsi.mx.length;}else{N++;}}}b=d.cardg>0?d.cardg:d.card;if(!b&&d.otp===B.ATTR&&d.es){b=d.es.length+1;}if(b){if(M===H){X*=b;}}});X+=X*N;S._totalRow=X;return X;},addAttributeNameAndTargetVisForAddUnits:function(R,P,Q,O,M){if(!R){return ;}var N={data:R},K=R&&R.vp,L;Q=Q||R&&R.vis&&R.vis.vn;O=O||K&&K.gtp;M=M||K&&K.ln;L=Q===mstrmojo.vi.viz.EnumVizStyles.GOOGLE_MAP||Q===mstrmojo.vi.viz.EnumVizStyles.ESRI_MAP||Q===mstrmojo.vi.viz.EnumVizStyles.MAPBOX;F.forEach(P,function(S){var W=S.id,U;if(W&&!S.attributeName){U=A.prototype.getUnitById.call(N,W);S.attributeName=U&&U.unit&&U.unit.n;}if(O===mstrmojo.gmaps.EnumGraphicType.Area&&L){if(!S.targetVis){S.targetVis={};}S.targetVis.vis=Q;S.targetVis.gtp=O;S.targetVis.ln=M;}else{if(S.targetVis){S.targetVis=undefined;}}});},findLargeItemsForAddUnits:function(K,L,O){var N=this,P,M={};if((!L&&!N.isUnitRestrictedInViz())||L){K.forEach(function(S){var Q=S.cardg>0?S.cardg:S.card;P=O||N.CARDLIMIT;if(S.targetVis&&S.targetVis.gtp===mstrmojo.gmaps.EnumGraphicType.Area){P=mstrmojo.VisEnum.VIS_CARDLIMIT.AREA_MAP;}if(Q&&Q>P){var U=S.attributeName||S.n;if(!M[U]){M[U]=true;var R=S.targetVis&&S.targetVis.ln?(U+"("+S.targetVis.ln+") ("+Q+")"):U+" ("+Q+")";N._addInLargeItems.push(R);}}});}},warnAndExecCallBackForOutlineAddUnits:function(M,L){var K=this,L=L||mstrmojo.emptyFn;if(this.existLargeRowCount()){mstrmojo.confirm(mstrmojo.desc(15792,"The dossier will attempt to display more than 5000 rows in outline mode. This may affect performance and stability. Do you want to continue?"),null,{id:"OutlineModeWarningDialog",title:mstrmojo.desc(11812,"Notification"),allowHTML:false,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(212,"Continue"),M),mstrmojo.Button.newWebButton(mstrmojo.desc(3416,"Cancel"),L)],onPreClose:function(){L();return true;}});}else{M();}},checkAndWarnForOutlineAddUnits:function(K,M,O,N,L){if(this.getHost().isOutlineMode){this.findEstimatedTotalRow(K,M,L);this.warnAndExecCallBackForOutlineAddUnits(O,N);}else{O();}},warnAndExecCallBackForAddUnits:function(R,P,M,Q){if(this.existLargeOrManyItems()&&!mstrApp.isAppStatePresentation()){var N=this._addInLargeItems,O=N.length,L;if(O>1){L=mstrmojo.desc(15518,"The following attributes contain a large number of elements: ##. This action may impact dossier performance.").replace("##",N);}else{if(O===1){L=mstrmojo.desc(15519,"The attribute ## has too many elements. This action may impact dossier performance.").replace("##",N);}else{L=mstrmojo.desc(15526,"The dossier will attempt to display more than ### columns. This can affect performance and stability.").replace("###",this.CARDLIMIT);}}var K=[];if(O&&P){K.push(E(mstrmojo.desc(7977,"Move to Rows"),function(){P();},true));}K.push(E(mstrmojo.desc(212,"Continue"),function(){R();}));K.push(E(mstrmojo.desc(2140,"Cancel"),function(){if(M){if(Q){Q();}else{if(mstrApp.isWorkstation&&mstrApp.isSingleTier){window.FormWrapper.closeWindow("{}");}else{mstrmojo._DocToolbarActions.close.call({model:{isnew:false}});}}}}));mstrmojo.warn(L,{},{buttons:K});N.splice(0,N.length);return ;}R();},checkAndWarnLargeItemsForAddUnits:function(P,R,U,M,Q,L,O,N,S,K){this.clearCardinalityFlags();if(!Q||Q.id===G){this.findLargeItemsForAddUnits(P,L,O);}if(M){this.findTotalColumnCount(P,Q,S,K);}this.warnAndExecCallBackForAddUnits(R,U,L,N);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.hash","mstrmojo.models.template.DataInterface");var D=mstrmojo.EnumRWUnitType,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.models.template.DataInterface,B=-1,E=0;function A(L,J,I,M){var K={};K.EnableIFOnGrid=J?B:E;if(J&&!isNaN(I)&&I!==-1){K.MaxRows=I;}return{act:"format",unitKey:M,unitType:D.GRID,formatType:1,format:{FormattingIncrementalFetch:K},partialRetrieval:L.model.getDataService().newRetrievalKeysConfig().addNode(M)};}mstrmojo.vi.ui.rw._XtabIncrementalFetchControl=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabIncrementalFetchControl",{_mixinName:"mstrmojo.vi.ui.rw._XtabIncrementalFetchControl",getXtabIncrementalFetchActions:function G(P,R){var M=this,N=this&&this.gridData,S=F.walk("rw.row.bc",N),L=S!==-1,K=L!==P,I=S!==R,O=this.gridInfo,Q=this.getTemplateKey(),J=[];if(S&&!K&&((P&&!I)||!P)){return J;}if(H.isArray(O)){C.forEachGSI(O,function(W,U){J.push(A(M,P,R,U));},Q);}else{return A(this,P,R,Q);}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility","mstrmojo.HTMLSanitizeUtil","mstrmojo.dom");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSBaseFormType");var s=mstrmojo,B=s.css,t=mstrmojo.array,U=mstrmojo.hash,AL=mstrmojo.string,K=mstrmojo.num,J=mstrmojo.VisUtility,f=mstrmojo.chart,N=f.enums,g=N.EnumGraphMajorType,M=f.common.Utility,Z=f.model,P=Z.enums,AE=P.EnumDSSGraphObject,x=P.EnumDSSBaseFormType,AJ=mstrmojo.VisEnum.ControlType,I=mstrmojo.VisEnum.FormNameDisplayType,AG=s.gm,a=AG.EnumTextAlignH,w=AG.EnumTextAlignV,Q=AG.FormatingPropertyTag,H=AG.EnumIdentityType,AD=";",n=",",A="_tmsp",O=" ",d=-20,p=AG.EnumSelectionOptionLevel,AM=AG.EnumShape,k=mstrmojo.color,L=AG.EnumIdentityType,X=0.00001,D,e=Math.pow(2,30),h=Math.pow(2,60),AA=s.HTMLSanitizeUtil;var j=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(17529,"First"),mstrmojo.desc(17530,"Last"),mstrmojo.desc(7194,"Constant")];var AF=document.getElementById("gm-pre-render-canvas"),G={};function o(AS,AR){var AT,AQ=AS.length;if(AQ!==AR.length){return false;}for(AT=0;AT<AQ;AT++){if(AS[AT]!==AR[AT]){return false;}}return true;}function AK(AT,AR,AU){var AS=false,AV=AU+A,AQ=AT[AV],AW=AR[AV];if(AR[AU]===undefined){AS=true;}else{if((AW===undefined&&AQ!==undefined)||(AW!==undefined&&AQ!==undefined&&AW<AQ)){AS=true;}}if(AS){AR[AU]=AT[AU];if(AW!==undefined){AR[AV]=AQ;}}}function AP(AR,AQ){var AS;for(AS in AR){if(AR.hasOwnProperty(AS)){AK(AR,AQ,AS);}}return AQ;}function c(AU){var AT={},AS,AR=[],AQ;t.forEach(AU,function(AV){if(AV!==undefined){AR.push(AV);}});AQ=AR.length;if(AQ===1){return AR[0];}for(AS=0;AS<AQ;AS++){AP(AR[AS],AT);}return AT;}function AI(AQ){return{n:AQ,s:AQ.toString(),on:AQ};}function Y(AQ,AT){var AS;AQ.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AQ.mStep=this.mMinimum<0?0.2:0.1;if(AT.mUseCustomMinMax){var AR=AT;AQ.mMaxTick=AR.mAxisMaxValue;AQ.mMinTick=AR.mAxisMinValue;AQ.mMaxTick=Math.min(1,AQ.mMaxTick);AQ.mMinTick=Math.max(-1,AQ.mMinTick);AQ.mStep=0.1;}else{if(this.mMaximum===0&&this.mMinimum===0){AQ.mStep=0.1;AQ.mMaxTick=1;AQ.mMinTick=0;}else{if(this.mMaximum>=0.5){AQ.mMaxTick=1;AQ.mMinTick=Math.floor(this.mMinimum/AQ.mStep)*AQ.mStep;AQ.mMinTick=(AQ.mMinTick*this.mMinimum<0)?0:(AQ.mMinTick>0?0:AQ.mMinTick);if(this.mMinimum<-0.5){AQ.mMinTick=-1;}}else{if(this.mMaximum>0){AQ.mMaxTick=Math.ceil(this.mMaximum/AQ.mStep)*AQ.mStep;AQ.mMinTick=-1;}else{AQ.mStep=0.1;AQ.mMaxTick=0;AQ.mMinTick=-1;}}}}}else{AQ.mMinTick=(this.mMinimum<0)?-1:0;if(AC.call(this,AQ)){return ;}AQ.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AQ.mMaxTick-AQ.mMinTick)/10;}for(AS=AQ.mMinTick+AQ.mStep;AS+f.gModuleMain.mTolerance<AQ.mMaxTick;AS+=AQ.mStep){AQ.mTicks.push(Math.round(AS*100)/100);}}function S(AQ,AV){var AU,AR,AX=AV,AW=AX.mDrawCustomLine,AS=AX.mAxisCustomValue,AT;AQ.mStep=1;if(this.mMaximum<=0){AQ.mMinTick=1;AQ.mMaxTick=10;if(AW&&AS<=1){AX.mAxisCustomValue=AQ.mMinTick;}return ;}if(this.mMinimum<=0){AR=this.mMaximum>1?0:-1;AQ.mMinTick=Math.pow(10,AR);if(AX.mUseCustomMinMax){AQ.mMaxTick=this.mMaximum;AU=Math.floor(l.call(this,this.mMaximum));if(l.call(this,this.mMaximum)===AU){AU--;}}else{AU=Math.ceil(l.call(this,this.mMaximum));AQ.mMaxTick=Math.pow(10,AU);}for(AT=AR+1;AT<AU;++AT){AQ.mTicks.push(Math.pow(10,Math.floor(AT)));}if(AW&&AS<=0){AX.mAxisCustomValue=Math.max(AQ.mMinTick,AX.mAxisCustomValue);}return ;}if(AX.mUseCustomMinMax){AU=l.call(this,this.mMaximum);AR=l.call(this,this.mMinimum);AQ.mMaxTick=this.mMaximum;AQ.mMinTick=this.mMinimum;}else{AU=Math.ceil(l.call(this,this.mMaximum));AR=Math.floor(l.call(this,this.mMinimum));AQ.mMaxTick=Math.pow(10,AU);AQ.mMinTick=Math.pow(10,AR);}for(AT=AR+1;AT<AU;++AT){AQ.mTicks.push(Math.pow(10,Math.floor(AT)));}if(AW&&AS<=0){AX.mAxisCustomValue=AQ.mMinTick;}}function y(Aa,AV){var AS=AV,AQ,AT;Aa.mStep=i.call(this,this.mMaximum,this.mMinimum,AS.mAlwaysIncludeZero);Aa.mMaxTick=Math.ceil(this.mMaximum/Aa.mStep)*Aa.mStep;Aa.mMinTick=Math.floor(this.mMinimum/Aa.mStep)*Aa.mStep;Aa.mMaxTick=Aa.mMaxTick<this.mMaximum?this.mMaximum:Aa.mMaxTick;Aa.mMinTick=Aa.mMinTick>this.mMinimum?this.mMinimum:Aa.mMinTick;Aa.mMinTick=(Aa.mMinTick*this.mMinimum<0)?0:Aa.mMinTick;if(AS.mAlwaysIncludeZero){Aa.mMaxTick=(this.mMaximum<0)?0:Aa.mMaxTick;Aa.mMinTick=(this.mMinimum>0)?0:Aa.mMinTick;}var AU=Aa.mMaxTick-Aa.mMinTick;if(Aa.mStep>=AU){return ;}if(AC.call(this,Aa)){return ;}AQ=Math.floor((Aa.mMaxTick-Aa.mMinTick+Aa.mStep/100)/Aa.mStep)+1;var AW=this.mNumberFormat;for(AT=1;AT<AQ-1;++AT){var AY=Aa.mMinTick+AT*Aa.mStep,AZ,AR,AX;if(Aa.mStep<1&&AW.mFormatType===4&&AW.mCustomFormat.indexOf("%")!==-1){AZ=AY*100;if(!M.isIntegar(AZ)){AR=Math.round(AZ);AX=Math.abs(AZ-AR);if(AX<X){AY=AR/100;}}}Aa.mTicks.push(AY);}}function C(Aa,AU){var AZ=AU,AT,AQ,AX,AS,AW,AV,AR,AY;Aa.mMaxTick=AZ.mAxisMaxValue;Aa.mMinTick=AZ.mAxisMinValue;if(AC.call(this,Aa)){return ;}if(!b.call(this)||this.mMajorGrid.mUseManualGrid){Aa.mStep=i.call(this,Aa.mMaxTick,Aa.mMinTick,false);AT=Aa.mMaxTick-Aa.mMinTick;if(Aa.mStep>=AT){return ;}AQ=Math.floor(AT/Aa.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AT===AQ*Aa.mStep){for(AS=1;AS<AQ;++AS){Aa.mTicks.push(Aa.mMinTick+AS*Aa.mStep);}}else{AT=Aa.mMaxTick-Aa.mMinTick;AX=10;AW=false;for(AS=3;AS<AQ;++AS){AV=AT/AS;while(AV<1){AV*=10;}while(AV>=10){AV/=10;}if(AV===Math.floor(AV)){AX=AS;AW=true;break;}}if(AW){Aa.mStep=AT/AX;for(AS=1;AS<AX;++AS){Aa.mTicks.push(Aa.mMinTick+AS*Aa.mStep);}}else{AR=Math.ceil((Aa.mMinTick+Aa.mStep/100)/Aa.mStep)*Aa.mStep;AY=Math.floor((Aa.mMaxTick-Aa.mStep/100-AR)/Aa.mStep)+3;for(AS=0;AS<AY-2;++AS){Aa.mTicks.push(AR+AS*Aa.mStep);}}}}else{AT=Aa.mMaxTick-Aa.mMinTick;AX=10;for(AS=6;AS<=9;++AS){AV=AT/AS;while(AV<10){AV*=10;}while(AV>=100){AV/=10;}if(AV===Math.floor(AV)){AX=AS;break;}}Aa.mStep=AT/AX;for(AS=1;AS<AX;++AS){Aa.mTicks.push(Aa.mMinTick+AS*Aa.mStep);}}}function E(AQ,AU){var AT,AR,AS;AQ.mMaxTick=AU.mAxisMaxValue;if(AQ.mMaxTick<=this.mMinimum){this.mMinimum=AQ.mMaxTick-1;}AQ.mStep=i.call(this,AQ.mMaxTick,this.mMinimum,AU.mAlwaysIncludeZero&&(AQ.mMaxTick>0));AT=(AU.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(b.call(this)){AQ.mMinTick=AQ.mMaxTick-Math.ceil((AQ.mMaxTick-AT)/AQ.mStep)*AQ.mStep;}else{AQ.mMinTick=Math.floor(AT/AQ.mStep)*AQ.mStep;}if(AC.call(this,AQ)){return ;}AR=Math.floor((AQ.mMaxTick-AQ.mStep/100-AQ.mMinTick)/AQ.mStep)+2;for(AS=1;AS<AR-1;++AS){AQ.mTicks.push(AQ.mMinTick+AS*AQ.mStep);}}function m(AQ,AV){var AR,AU,AS,AT;AQ.mMinTick=AV.mAxisMinValue;if(AQ.mMinTick>=this.mMaximum){this.mMaximum=AQ.mMinTick+1;}AQ.mStep=i.call(this,this.mMaximum,AQ.mMinTick,AV.mAlwaysIncludeZero&&(AQ.mMinTick<0));AR=(AV.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(b.call(this)){AQ.mMaxTick=AQ.mMinTick+Math.ceil((AR-AQ.mMinTick)/AQ.mStep)*AQ.mStep;}else{AQ.mMaxTick=Math.ceil(AR/AQ.mStep)*AQ.mStep;}if(AC.call(this,AQ)){return ;}AU=Math.ceil((AQ.mMinTick+AQ.mStep/100)/AQ.mStep)*AQ.mStep;AS=Math.floor((AQ.mMaxTick-AU+AQ.mStep/100)/AQ.mStep)+2;for(AT=0;AT<AS-2;++AT){AQ.mTicks.push(AU+AT*AQ.mStep);}}function i(Ag,Aa,AS){var AZ,AU;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AZ=0;if(AS){AZ=Math.max(Ag,Ag-Aa);AZ=Math.max(AZ,-Aa);}else{AZ=Ag-Aa;}if(AZ===0){this.mIsShown=false;return 1;}if(AZ>1&&AZ<=4&&parseInt(AZ)===AZ){var Ah=this.PrimaryMetricIndex,AV=Ah.length;for(var Ac=0;Ac<AV;Ac++){var AY=this.mChartContextPtr.mDatasetPtr,Ab=AY.dataProvider,AT=Ab.getSeriesCount(),AX=Ab.getGroupCount(),AR=Ah[Ac],AW,Ae;for(var Af=0;Af<AT;Af++){AW=Ab.getMetricIndexForSeries(Af);if(AW===AR){Ae=true;for(var Ad=0;Ad<AX;Ad++){var Ai=AY.GetData(Af,Ad);if(parseInt(Ai)!==Ai){Ae=false;break;}}}if(Ae){return 1;}}}}var AQ=AZ;AU=1;while(AZ<1){AZ*=10;AU/=10;}while(AZ>=10){AZ/=10;AU*=10;}if(AZ<1.8){AU*=2;AU/=10;}else{if(AZ<3.1){AU*=4;AU/=10;}else{if(AZ<4.6){AU*=5;AU/=10;}else{if(AZ>=8.1){AU*=2;}}}}AU=this.postProcessStep(AU,AQ);return AU;}function AC(AQ){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AR=this.mMajorGrid;return AR.mUseManualGrid&&(AR.mGridInterval<(AQ.mMaxTick-AQ.mMinTick)/30);}function l(AQ){return Math.log(AQ)/Math.log(10);}function b(){return(this.mGraphMajorType===g.GMT_HISTOGRAM||this.mGraphMajorType===g.GMT_POLAR)&&this.mTripleId.mObjectId===AE.DssGraphX1Body;}function AH(AT){var AU=this,AQ=AU.id,AS=AT.metricId,AR=new s.ui.menus.MenuConfig();(AT.options).forEach(function(AV){if(AV!==AG.EnumRefLineModelType.CONST){AR.addMenuItem(j[AV],"xt",function(){AU.toggleRefLineEnabled(AS,AV,true);});}else{AR.addEditorMenuItem(j[AG.EnumRefLineModelType.CONST],AQ,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,required:true,valueChangeDelay:1000,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();},onvalueChange:function(){this.validate();},onValid:function(){this.parent.data.set("constantValid",true);},onInvalid:function(){this.parent.data.set("constantValid",false);}}],bindings:{okEnabled:function(){return this.data.constantValid;}},fnOk:function(AX,AW){var AY=AW.constVal;if(AY.isValid()){AU.toggleRefLineEnabled(AS,AV,true,AY.value);}}});});}});return AR;}function z(AS){var AT=this,AR=AS.metricId,AQ=new s.ui.menus.MenuConfig();(AS.options).forEach(function(AW){var AU=AW.refType,AV=j[AU]+((AU===AG.EnumRefLineModelType.CONST)?("-["+K.toLocaleString(AW.c)+"]"):"");AQ.addMenuItem(AV,"xt",function(){AT.toggleRefLineEnabled(AR,AU,false,0,AW.modix);});});return AQ;}function AN(AU,AQ){var AT=AU.GMController,AR=AT.getForbiddenShapeForMetric(AQ),AS=[];[{text:mstrmojo.desc(12097,"Bar"),value:AM.BAR},{text:mstrmojo.desc(2059,"Line"),value:AM.LINE},{text:mstrmojo.desc(9738,"Area"),value:AM.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AM.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AM.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AM.TICK}].forEach(function(AV){if(AR.indexOf(AV.value)<0){AS.push(AV);}});if(AT.chartType===mstrmojo.gm.EnumGraphType.BAR||AT.chartType===mstrmojo.gm.EnumGraphType.LINE){AS=AS.filter(function(AV){return AV.value!==AM.AREA;});}return AS;}function u(AR,AQ){return function(AT,AS){if(AT!==AS){AQ({ctxt:{sp:AT,mid:AR}});}};}function AO(AT){var AR=AT.options,AQ=this.getMenuHandler("changeShape"),AS=new mstrmojo.ui.menus.MenuConfig();AS.addRadioMenuGroup(AT.currValue,u(AT.metricId,AQ),AR,"checkMark",undefined,true);return AS;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,timerHistory:[],timerHistoryMax:50,startTimer:function W(AR){if(this.mUseTimer){var AQ=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AQ,desc:AR.functionName+": "+AR.purpose});return AQ;}},endTimer:function F(AU,AW){if(this.mUseTimer){var AR,AS=this.mTimers,AX=0;if(AU===undefined){AR=AS.pop();}else{var AV,AY;for(AV=0;AV<AS.length;AV++){AY=AS[AV];if(AY.timerId===AU){AR=AY;AS.splice(AV,1);AV--;}}}if(AR){var AQ=new Date();var AT=(AQ-AR.timeStamp);if(AW){this.timerHistory[this.timerId%this.timerHistoryMax]={desc:AR.desc,duration:AT,start:AR.timeStamp.getTime(),end:AQ.getTime()};}J.visPrint("%c"+AR.desc+": "+AT+"ms","color: blue");AX=new Date()-AR.timeStamp;}return AX;}},formatNumber:function(AS,AR,AQ){return AI(AS,AR,AQ===undefined?3:AQ);},sizeCalculator:{sum:function(AQ,AU,AV){var AS,AR=0,AT=0;if(AV===undefined){AV=AQ.length;}AU=AU||1;for(AS=0;AS<AV;AS++){if(AQ[AS]>0){AT+=AQ[AS];AR+=1;}}if(AR>1){AT+=(AR-1)*AU;}return AT;},add:function(AS,AQ,AR){AR=AR||1;if(AQ>0){AS+=(AQ+AR);}return AS;},minus:function(AS,AQ,AR){if(AQ>0){AS-=(AQ+AR);}return AS;}},replaceSpecialChars:function(AQ){return AQ.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");},restoreSpecialChars:function(AQ){if(typeof AQ!=="string"){return AQ;}return AQ.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&amp;/g,"&");},removeExtraSpace:function(AQ){return AQ.replace(/ {2,}/g," ");},stringToJSON:function(AQ){if(AQ===undefined){return undefined;}if(typeof AQ==="string"){AQ=AQ.replace(/'/g,'"');try{return JSON.parse(AQ);}catch(AR){return AQ;}}return AQ;},everythingToString:function(AR){if(AR===undefined){return undefined;}var AQ;if(typeof AR==="object"){AQ=JSON.stringify(AR.jsonObj||AR);}else{AQ=AR.toString();}AQ=AQ.replace(/"/g,"'");return AQ;},compareElementObj:function(AU,AR){var AT=AU.tid.toString(),AQ=AR.tid.toString(),AV=AU.eid,AS=AR.eid;if(AT!==AQ){return AT>AQ?1:-1;}if(AV===AS){return 0;}return AV>AS?1:-1;},isEqualComb:function(AR,AQ){var AV=true,AU,AT=AR.length,AS=AQ.length;if(AT!==AS){return false;}if(AR.length>1){AR.sort(this.compareElementObj);}if(AQ.length>1){AQ.sort(this.compareElementObj);}for(AU=0;AU<AT;AU++){if(this.compareElementObj(AR[AU],AQ[AU])!==0){AV=false;break;}}return AV;},serializeCombination:function(AR){var AQ="";if(AR.length>1){AR.sort(this.compareElementObj);}t.forEach(AR,function(AS){if(AQ!==""){AQ+=AD;}AQ+=(AS.tid+n+AS.eid);});return AQ;},getElementCombinationForMetric:function(AQ){var AR=[];AR.push({tid:-1,eid:AQ});return AR;},getResolvedFormatsObject:function(AQ){return c(AQ);},isDigitalArrayEqual:function(AR,AQ){return o.call(this,AR,AQ);},indexOf:function(AR,AT){var AS,AQ=AR.length;for(AS=0;AS<AQ;AS++){if(o(AR[AS],AT)){return AS;}}return -1;},parseAxisScaleData:function(AU){var AS,AV,AR,AQ=AU.split(","),AT=[];for(AS=0,AV=AQ.length;AS<AV;AS++){AR=AQ[AS].split(":");AT.push(AR);}return AT;},RGB_BRG_Switch:function(AR){var AT=(AR>>16)&255,AS=(AR>>8)&255,AQ=(AR>>0)&255;return(AQ<<16)|(AS<<8)|(AT<<0);},encodeColor:function(AR){if(AR===undefined||AR===null||AR==="transparent"||AR==="default"){return AR;}var AS=false,AQ={};if(AS){if(typeof AR==="object"){AQ.c1=this.RGB_BRG_Switch(k.encodeColor(AR.c1));AQ.c2=this.RGB_BRG_Switch(k.encodeColor(AR.c2));AQ.or=AR.or;return AQ;}return this.RGB_BRG_Switch(k.encodeColor(AR));}if(typeof AR==="object"){AQ.c1=k.encodeColor(AR.c1);AQ.c2=k.encodeColor(AR.c2);AQ.or=AR.or;return AQ;}return k.encodeColor(AR);},checkEquality:function(AR,AQ){if(typeof AR==="object"&&AR.c1!==undefined&&AQ!=undefined){if(AR.c1!==AQ.c1){return false;}if(AR.c2!==AQ.c2){return false;}if(AR.or!==AQ.or){return false;}return true;}return AR===AQ;},ptToPx:function(AQ){return AQ&&Math.ceil(parseInt(AQ,10)/72*96);},decodeColor:function(AR){if(AR===undefined||AR===null||AR==="transparent"||AR==="default"){return AR;}var AS=false,AQ={};if(AS){if(typeof AR==="object"){AQ.c1=k.decodeColor(this.RGB_BRG_Switch(AR.c1));AQ.c2=k.decodeColor(this.RGB_BRG_Switch(AR.c2));AQ.or=AR.or;return AQ;}return k.decodeColor(this.RGB_BRG_Switch(AR));}if(typeof AR==="object"){AQ.c1=k.decodeColor(AR.c1);AQ.c2=k.decodeColor(AR.c2);AQ.or=AR.or;return AQ;}return k.decodeColor(AR);},getTrendLineToggleHandler:function(AQ,AS,AR){return function(){AQ.switchOnOffTrendLineForMetric(AS,AR);};},getTrendLineToggleState:function(AQ,AR){return AQ.queryTrendLineStatusForMetric(AR);},getEditTrendLineHandler:function(AQ,AR){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AQ.raiseEventCMSelection(L.TREND_LINE,AR);};},getEditRefLineHandler:function(AQ,AR){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AQ.raiseEventCMSelection(L.REF_LINE,AR);};},getEditAxisScaleHandler:function(AQ,AR){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AQ.raiseEventCMSelection(L.AXIS_SCALE,AR);};},getEditAxisOriginHandler:function(AQ,AR){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AQ.raiseEventCMSelection(L.AXIS_ORIGIN_DEFINE,AR);};},getEditLogScaleHandler:function(AQ,AR,AS){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AQ.raiseEventCMSelection(L.LOG_SCALE,AR);AQ.edtModel.broker.setFormatPropertyValue("AxisScale:logScale",AS);};},getEditSyncAxisScaleHandler:function(AQ,AR){return function(){var AS=U.walk("rootCtrl.docCtrl",mstrApp);if(AS&&AS.selectViPanel){AS.selectViPanel("propertiesPanel");}AQ.raiseEventCMSelection(L.SYNC_AXIS_SCALE,"AllMetrics");AQ.toggleSyncAxisScale(AR);};},getOptionObjArr:function(AQ,AS,AU){if(!D){D=mstrmojo.gm.GMUtility;}var AR={},AT;if(AS!==undefined){AS=AS.toLowerCase();if(AS==="x1"){AS="x";}else{if(AS==="y1"){AS="y";}}}if(AQ.length>1||(AU&&AQ.length===1)){if(AS==="x"){AR.opt=mstrmojo.desc(11712,"Bottom Axis");AR.key="XAxis";}else{if(AS==="x2"){AR.opt=mstrmojo.desc(11710,"Top Axis");AR.key="X2Axis";}else{if(AS==="y"){AR.opt=mstrmojo.desc(11715,"Left Axis");AR.key="YAxis";}else{if(AS==="y2"){AR.opt=mstrmojo.desc(11713,"Right Axis");AR.key="Y2Axis";}else{if(AS==="z"){AR.opt=mstrmojo.desc(12090,"SizeBy");AR.key="SizeBy";}}}}}AR.optLvl=p.AXIS;AR.mos=this.getMetricFormatFromIndexArray(AQ);}else{if(AQ.length===1){AT=this.getMetricFormat(AQ[0]);AR.opt=AT.n;AR.mos=[AT];AR.key=AT.mId;AR.comb=D.getElementCombinationForMetric(AT.mId);AR.optLvl=p.METRIC;if(AS==="z"){AR.sizeBy=true;}}}return AR;},filterInValidMetricIndex:function(AR){var AQ=[];t.forEach(AR,function(AS){if(AS!==d){AQ.push(AS);}});return AQ;},fillBackgroundDiv:function(AR){var AQ=document.createElement("div");AQ.setAttribute("class","gm-bk-div");AQ.style.backgroundColor="rgba(0,0,0,0)";AR.appendChild(AQ);},getOpIdFromSelectionId:function(AU,AS){const AT=AU&&AU.zonesModel&&AU.zonesModel.getDropZones();if(!AT){return ;}const AR=AT.zones;var AQ;t.forEach(AR,function(AV){const AW=AV.items;t.forEach(AW,function(AZ){const AY=AZ.selections;const AX=t.some(AY,function(Aa){return Aa.id===AS;});if(AX){AQ=AZ.id;return false;}});if(AQ){return false;}});return AQ;},getSubMenu:function(AT,AW,AR,AY){const AS=AN(AT,AY);const AU=AT.GMController.getOnTheFlyShapeForMetric(AY);const AQ=this.getOpIdFromSelectionId(AT,AR);const AV=AQ||AR;if(AS.length>1){AW.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AT.id,AO,{currValue:AU,options:AS,metricId:AV});}else{const AX=AT.getMenuHandler("changeShape");AW.addRadioMenuGroup(AU,u(AV,AX),AS,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AR,AV,AW,AQ){var AX=mstrmojo.gm.EnumSubtype,AU=AR.GMController.chartSubType;if(AW&&AU===AX.PERCENT){return ;}var AY=AR.id,AS=AR.getAvailableRefLineTypes(AQ)||[];if(AS.length>0){AV.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AY,AH,{metricId:AQ,options:AS});}var AT=AR.getExistingRefLineOptions(AQ)||[];if(AT.length>0){AV.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AR,AQ));AV.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AY,z,{metricId:AQ,options:AT});}},reverseMapping:function q(AR){var AT={},AS,AQ=AR.length;for(AS=0;AS<AQ;AS++){AT[AR[AS]]=AS;}return AT;},longIntAnd:function(AR,AQ){var AS;if(AR===AQ){return AR;}if(AR>h||AQ>h){throw new Error("Operand exceeds valid data range.");}if(AR<e&&AQ<e){return AR&AQ;}if(AR>=e||AQ>=e){if(AR<AQ){AS=AR;AR=AQ;AQ=AS;}}var AU=Math.floor(AR/e),AT=Math.floor(AQ/e),AW=AR-AU*e,AV=AQ-AT*e;return(AW&AV)+(AU&AT)*e;},longIntOr:function(AR,AQ){var AS;if(AR===AQ){return AR;}if(AR<e&&AQ<e){return AR|AQ;}if(AR<AQ){AS=AR;AR=AQ;AQ=AS;}AS=this.longIntAnd(AR,AQ);return AQ-AS+AR;},parseNumeric:function(AQ){return +AQ||parseFloat(AQ);},fillImageInDiv:function(AU,AS,AR,AQ){AQ=AQ||"gm-img";AU.innerType=AS;if(AS===4){var AT=document.createElement("img");AT.className=AQ;AT.src=AR;AU.appendChild(AT);}else{if(AS===7){AU.innerHTML=AA.sanitizeHTMLByDOMPurify(AR,true);B.addClass(AU.firstChild,AQ);if(mstrApp&&mstrApp.isSingleTier){mstrmojo.dom.redirectUrlToFormWrapper(AU);}}}},fillTextInDiv:function(AQ,AZ,Ab,AR,Ac,AS,Ae,AU,AX){if(AR===undefined){AR=AQ.offsetWidth;}if(Ac===undefined){Ac=AQ.offsetHeight;}if(AU===undefined){AU=a.MIDDLE;}if(AX===undefined){AX=w.MIDDLE;}if(AS===undefined){AS=false;}var AY,Aa,AW,Ad=AS?"gm-text-body":"gm-text-body-nowrap",AT=false,AV;AY=J.measureTextWidth(Ab,Ae,6);AV=J.measureTextWidth("...",Ae,6);if(AY>AR&&AV>AR){return ;}AW=document.createElement("div");AW.setAttribute("class",Ad);AW.setAttribute("type",AJ.GM_TEXT_BODY);AW.identity=AZ;J.applyStyles2DomNode(AW,Ae);AW.textContent=Ab;AQ.appendChild(AW);if(AS){if(AY>AR){Aa=AW.offsetHeight;}else{Aa=J.measureTextHeight(Ab,Ae,4);}}else{Aa=J.measureTextHeight(Ab,Ae,4);AT=AY>AR;}AY=Math.min(AY,AR);AW.style.width=AY+"px";if(AS){AT=AW.scrollWidth>AY||AW.scrollHeight>Aa;}if(AT){AW.setAttribute("title",Ab);}else{AW.setAttribute("title","");}switch(AU){case a.LEFT:AW.style.left="0px";AW.style.textAlign="left";break;case a.MIDDLE:AW.style.left=((AR-AY)>>1)+"px";break;case a.RIGHT:AW.style.right="0px";AW.style.textAlign="right";break;}switch(AX){case w.TOP:AW.style.top="0px";break;case w.MIDDLE:AW.style.top=((Ac-Aa)>>1)+"px";break;case w.BOTTOM:AW.style.bottom="0px";break;}},fillRowColHeaderDiv:function(AU,Ad,AQ,Ac,AS,Ab,AR,Ae){var Aa=J.shouldEncodeHtmlContent(),AX={objType:Ad?H.ROW_HEADER_TEXT:H.COL_HEADER_TEXT},Af=Ad?AU.rhStyles:AU.chStyles,AZ=AU.view,AY=AQ.bftp,AT=AZ.getWidgetPropertyValue(Ad?Q.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:Q.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),AV=AZ.getWidgetPropertyValue(Ad?Q.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Q.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),AW=AZ.getWidgetPropertyValue(Ad?Q.ROW_VALUES_SHOW:Q.COLUMN_VALUES_SHOW);AQ.style.width=AR+"px";AQ.style.height=Ae+"px";AQ.style.top=Ab+"px";AQ.style.left=AS+"px";if(AW){if(!Aa&&AY){this.fillImageInDiv(AQ,AY,Ac);}else{this.fillTextInDiv(AQ,AX,Ac,AR,Ae,false,Af,AT,AV);}}this.fillBackgroundDiv(AQ);},updateTextColorAndAlignment:function(AQ,AS,AT){var AU=AQ.firstChild,AV=AU.style,AR=AQ.clientWidth,AW=AU.clientWidth,AY=AQ.clientHeight,AX=AU.clientHeight;AV.left="auto";AV.right="auto";switch(AS){case a.LEFT:AV.left="0px";break;case a.MIDDLE:AV.left=((AR-AW)>>1)+"px";break;case a.RIGHT:AV.right="0px";break;}AV.top="auto";AV.bottom="auto";switch(AT){case w.TOP:AV.top="0px";break;case w.MIDDLE:AV.top=((AY-AX)>>1)+"px";break;case w.BOTTOM:AV.bottom="0px";break;}},isTrendLineAvailableForMetric:function(AU,AV,AY){var Af=AU&&AU.excludeData,Ac=mstrmojo.gm.EnumSubtype,AX=s.gm.EnumShape,Ad=AU.GMController,AZ=Ad.chartSubType,Ae=AU.model.data.dz,AS=Ae.XAxis,AQ=Ae.YAxis,AT=Ae.BreakBy,AW=Ae.SliceBy,Aa=AY,AR=Ad.getChartInfo(),Ab=Ad.getBreakByAttrsID().length>0||(AR.isABL&&((AS.MetricNames!==undefined)||(AQ.MetricNames!==undefined)||(AT.MetricNames!==undefined)||(AW.MetricNames!==undefined)));if(Aa===undefined){Aa=Ad.getOnTheFlyShapeForMetric(AV);}if(AR.isABL&&AZ===Ac.PERCENT){Af=true;}if(Ab&&!AR.isBubbleOrScatter&&(Aa===AX.BAR||AZ===Ac.STACKED||(AZ===Ac.AUTO&&Aa===AX.AREA))){Af=true;}if(AR.isABL){if(AS.TemplateUnit&&AS.TemplateUnit.length>1){Af=true;}if(AQ.TemplateUnit&&AQ.TemplateUnit.length>1){Af=true;}if(AS.TemplateUnit===undefined&&AQ.TemplateUnit===undefined){Af=true;}}Af=Af||this.isIgnoredMetric(AU,AV);return !Af;},isTrendLineAvailableForAnyMetric:function(AS){var AR=AS.model.data.gsi.mx,AQ;for(AQ in AR){if(this.isTrendLineAvailableForMetric(AS,AQ)){return true;}}return false;},isIgnoredMetric:function(AT,AR){var AS=AT.GMController,AU,AQ;if(AS.bubbleSeriesNum!==undefined){AU=AS.getMetricsOnYAxis();AQ=AU.indexOf(AR);if(AQ>=AS.bubbleSeriesNum){return true;}AU=AS.getMetricsOnXAxis();AQ=AU.indexOf(AR);if(AQ>=AS.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AV){var AQ=AV.model.data.dz,AW=AV.model.data.gsi.mx,AR,AS,AU=[];if(!AQ||!AQ.ColorBy||!AW){return AW;}var AT=function(AX){return(AX&&AX.TemplateMetric)||[];};AR=AT(AQ.YAxis).concat(AT(AQ.XAxis));t.forEach(AW,function(AX){AS=false;t.forEach(AR,function(AY){if(AX.did===AY.id){AS=true;return false;}});if(AS){AU.push(AX);}});return AU;},isInvalidTemplate:function R(AT){if(AT.eg){return false;}var AR=AT.gts;var AQ=AR.row.length===0&&AR.col.length===0;t.forEach(AR.row,function(AW){if(AW.otp===-1){AQ=true;}});var AV=AR.col;if(AV.length>0){var AS,AU=AV.length-1;for(AS=0;AS<AU;AS++){if(AV[AS].otp===-1){AQ=true;}}}return AQ;},getInvalidTemplateErrMsg:function(AQ){return AQ||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AR,AS){mstrmojo.func.override({showPickerForCurrentMode:function AQ(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AT=this.gradientOrientation,AU=AS.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AT.set("selectedIndex",t.find(AT.items,"id",AU?0:1));}}},AR.colorPicker);},generateToolTipContent:function(Ag,Ac,AW,AR,AX,Aa,AY,Af){var AV,AS,AU,Ab,Ad,Ae,AT,AQ,AZ=function(Aj,Ak,Ah){var Ai;if(Ag===I.OFF&&Ak){if(Aj.bftp!==x.DssBaseFormHTMLTag&&!Ah){Ai=AL.encodeHtmlString(Aj.n,true);}else{Ai=Aj.n;}}else{Ai=Aj.n;}return Ai;};for(AV=Ac;AV<AW;AV++){AS=AX[AV];Ab=Aa[AV];AQ=t.map(AX,function(Ai,Ah){if(Ai.id===AS.id){return Aa[Ah];}}).filter(function(Ah){return !!Ah;});AT=t.some(AQ,function(Ah){return J.shouldShowHTMLTag(Ah.bftp);});if(AV>Ac){AU=AX[AV-1];Ad=Aa[AV-1];if(AS.id===AU.id){if(Ab===""){continue;}if(AS.fid===AU.fid&&Ab.idx===Ad.idx){continue;}if(AS.n===""){AY[AY.length-1].v+=O+AZ(Ab,AT);AY[AY.length-1].rv+=O+AZ(Ab,AT,true);if(AT&&Ab.bftp===x.DssBaseFormHTMLTag){AY[AY.length-1].bftp=Ab.bftp;}continue;}}}if(Af){AY.push({n:AS.n,tid:AS.id,v:AZ(Ab,AT),rv:AZ(Ab,AT,true),bftp:Ab.bftp});}else{Ae=AR===undefined?AS.isRowAttribute:AR;AY.push({n:AS.n,tid:AS.id,v:AZ(Ab,AT),rv:AZ(Ab,AT,true),eid:Ab.id,tp:AS.otp,axis:Ae?1:2,tui:AS.tui,ui:AS.tui,dpt:AS.tui+1,at:Ab.at,isRowAttribute:Ae,dei:Ab.dei,o:Ab.o,bftp:Ab.bftp});}}},getAttributeFormCnt:function(AQ){var AR;if((AQ.fcnt===undefined||AQ.fcnt===null)&&AQ.fs){AQ.fcnt=AQ.fs.length||1;}if(AQ.fcnt!==undefined&&AQ.fcnt!==null){AR=AQ.fcnt;}else{if(AQ.t===47){AR=1;}else{AR=AQ.cs!==undefined?AQ.cs:AQ.rs;}}return AR;},isTrueForBoolValue:function(AQ){return AQ===true||AQ==="true";},computeTicksForAxis:function(AT,AR){var AS=AT.mOptions,AU,AQ={mTicks:[]};if(AR){AU=U.copy(AS);U.copy(AR,AU);}else{AU=AS;}if(AT.mIsPercent){Y.call(AT,AQ,AU);return AQ;}if(AU.mUseLogarithmicScale){S.call(AT,AQ,AU);return AQ;}if(AT.mGraphMajorType===g.GMT_BUBBLE&&AT.mTripleId.mObjectId===AE.DssGraphZBody){AQ.mMinTick=AU.mUseMinValue?AU.mAxisMinValue:AT.mMinimum;AQ.mMaxTick=AU.mUseMaxValue?AU.mAxisMaxValue:AT.mMaximum;if(AT.mMinTick>=AT.mMaxTick){AQ.mMaxTick=AQ.mMinTick+1;}return AQ;}if(!AU.mUseMaxValue&&!AU.mUseMinValue){y.call(AT,AQ,AU);}else{if(AU.mUseMaxValue&&AU.mUseMinValue){C.call(AT,AQ,AU);}else{if(AU.mUseMaxValue){E.call(AT,AQ,AU);}else{m.call(AT,AQ,AU);}}}return AQ;},computeTicksForLogScale:function(AS){var AR=AS.mOptions,AQ={mTicks:[]};S.call(AS,AQ,AR);return AQ;},destroyDisposable:function(AQ,AR){if(AR){t.removeItem(AQ.disposables,AR);AR.destroy();}},handleDestroy:function(AU,AT,AR){if(!AU){return ;}var AV,AS=0,AQ=AU.disposables,AW=(AQ&&AQ.length)||0;while(AS<AW){AV=AQ[AS];if((!AV.scriptClass||AT.indexOf(AV.scriptClass)<0)&&t.indexOf(AR,AV.id)===-1){this.destroyDisposable(AU,AV);}if(AQ.length<AW){AW=AQ.length;}else{AS++;}}},getActualWordsOrder:function(AQ,AW){if(G&&G[AQ]){return G[AQ];}if(!AF){AF=document.createElement("div");AF.width="auto";AF.height="auto";AF.id="gm-pre-render-canvas";AF.style.position="absolute";AF.style.direction="rtl";AF.style.top="0";AF.style.fontSize="9px";document.body.appendChild(AF);}AF.innerText=AQ;var AS=document.createRange(),AR=[],AV=document.createTreeWalker(AF,NodeFilter.SHOW_TEXT,null,false);while(AV.nextNode()){AR.push(AV.currentNode);}var AU=[];AR.forEach(function(AY){var Ab=0,AX=0,AZ=0,Aa=AY.data;AY.data.split(AW).forEach(function(Ac){Ab=Aa.indexOf(Ac);AX=Ab+Ac.length;if(Ab===-1){return ;}AS.setStart(AR[0],Ab+AZ);AS.setEnd(AR[0],AX+AZ);AU.push({text:Ac,rect:AS.getBoundingClientRect()});Aa=Aa.substring(AX,Aa.length);AZ+=AX;});});AU=AU.filter(function(AX){return AX.rect.height>0;}).sort(function(AY,AX){if(AY.rect.top===AX.rect.top){return AY.rect.left-AX.rect.left;}return AY.rect.top-AX.rect.top;});var AT=[];AU.forEach(function(AX){AT.push(AX.text);});AT=AT.reverse();G[AQ]=AT;return AT;},isRTL:function AB(AQ){switch(AQ){case"1025":case"5121":case"15361":case"3073":case"2049":case"11265":case"13313":case"12289":case"4097":case"6145":case"8193":case"16385":case"10241":case"7169":case"14337":case"9217":case"1125":case"1065":case"1037":case"1114":case"1056":case"2080":return true;default:return false;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.array,A=mstrmojo.hash,D=mstrmojo.mstr.EnumDSSXMLObjectTypes.Dimension;mstrmojo.ui.SearchablePulldownCheckList=mstrmojo.declare(mstrmojo.ui.PulldownCheckList,null,{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",_changeList:null,useRichTooltip:true,showTooltipForLargeText:true,children:[{scriptClass:"mstrmojo.Label",alias:"noResults",cssClass:"nores",text:mstrmojo.desc(15559,"No result matches your search.")}].concat(mstrmojo.ui.PulldownCheckList.prototype.children),onOpen:function B(){var L=this.parent;if(this._super){this._super();}this._changeList=A.copy(L.selectedIndices);},onClose:function I(L){if(this._super){this._super(L);}this._changeList=null;},showTooltip:function J(L,N){var M=L.target||mstrmojo.dom.eventTarget(L.hWin,L.e);M=this.getItemNodeFromTarget(M);if(M){L=A.copy(L);L.srcElement=M;}this._super(L,N);},saveSelection:function C(){this.toggleCacheMode(true);this.parent.set("selectedIndices",A.copy(this._changeList));this.toggleCacheMode(false);},getChanges:function F(){return this._changeList;},onclearSelection:function(){var Q=this.list,O=this._changeList,M=Q.selectedIndices,P=this.parent.items,N=Q.items,L;if(A.isEmpty(M)){M={};A.forEach(O,function(S,R){if(S){L=G.find(N,"v",P[R].v);if(L>=0){M[L]=O[R];}}});Q.selectedIndices=M;}},onvisibleChange:function(){this.list.set("visible",this.visible);},postselectionChange:function E(Y){if(this._restoreSelection){delete this._restoreSelection;return ;}if(this._super){this._super(Y);}var Q=this.parent.items,S=this.list.items,P=(Q.length===S.length),U=Y.added||[],O=Y.removed||[],X=this._changeList,M=this.parent.allIdx,R=S[M],W,N=function(){G.forEach(U,function(Z){W=G.find(Q,"v",S[Z].v);X[W]=true;});G.forEach(O,function(Z){W=G.find(Q,"v",S[Z].v);delete X[W];});};if(!X){return ;}var L=false;if(R&&(R.t===D)){if(M===U[0]){G.forEach(S,function(Z){if(Z.t!==D||P){W=G.find(Q,"v",Z.v);if(W!==-1&&!X[W]){X[W]=true;}}});L=true;}if(M===O[0]){G.forEach(S,function(Z){W=G.find(Q,"v",Z.v);if(W!==-1&&X[W]){delete X[W];}});L=true;}}if(!L){if(X[M]){delete X[M];}N();}},onitemsChange:function K(){var M=this.list.items,O=M&&M.length===0;this.noResults.set("visible",O);this.handleDashboardAccentColor&&this.handleDashboardAccentColor();if(O&&this.isICS){var N=this.parent.docSelector||{},R=this.parent.stateCssText||{},Q=(R.base||{}).paddingX||"0px",L=N.fmts||{},P={position:"relative",fontStyle:"normal",fontWeight:"normal"};if(typeof L.color!=="undefined"){P.color=L.color;}if(typeof L.font!=="undefined"){P.font=L.font;}P.paddingLeft=Q;P.paddingRight=Q;if(typeof L["s-border-color"]!=="undefined"){P.border="1px solid "+L["s-border-color"];}if(typeof L["s-radius"]!=="undefined"){P.borderTopLeftRadius=L["s-radius"]+"px";P.borderTopRightRadius=L["s-radius"]+"px";}mstrmojo.css.setElementsStyle([this.noResults.domNode],P);}},toggleCacheMode:function H(L){this._restoreSelection=L;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.mobile.MobileDossierContextMenu","mstrmojo.VisUtility","mstrmojo.VisEnum","mstrmojo.mobile.SupportMobileTouchInterface");var Z=mstrmojo.css,H=mstrmojo.dom,P=mstrmojo.hash,C=mstrmojo.VisUtility,N="vis-tooltip",W=20,M="px",K=mstrmojo.VisEnum.TOOLTIP_STATE,R=mstrmojo.mobile.SupportMobileTouchInterface;function X(){return this.scriptClass==="mstrmojo.NewVisTooltip";}function I(){if(this.menuNodes){this.menuNodes.forEach(function(a){H.emptyNode(a);if(a&&a.parentNode){a.parentNode.removeChild(a);}});this.menuNodes=[];Z.toggleClass(this.domNode,"menu-only",false);}}function E(){if(X.call(this)&&this.linkNode&&this.linkNode.parentNode){this.linkNode.parentNode.removeChild(this.linkNode);}}function B(e,f,c,b){var i=document.createElement("div");i.className=N+"-menu-row-container";this.domNode.appendChild(i);this.menuNodes.push(i);Z.toggleClass(i,N+"-menu-row-container-only",!c);var h=64;var a=0;var g=this;e.forEach(function(l){var n=l.n;var o=l.fn;var t=l.ctxt;var q=document.createElement("div");q.className=N+"-menu";if(l.cls&&l.cls.length>0){q.className=q.className+" "+l.cls;}i.appendChild(q);if(n===mstrmojo.desc(145,"Drill")){var m=function(){var u=o(t);g.displayDrillSubMenu(u);};H.attachEvent(q,"click",m);}else{if(n.indexOf(mstrmojo.desc(183,"Drill to"))>-1){q.addEventListener("click",function(){o(l);g.domNode.style.display="none";});}else{q.addEventListener("click",function(){o(t);g.domNode.style.display="none";});}}g.addMenuFeedback(q);var k=C.getComputedFontStyle(q);var s=Math.max(Math.ceil(C.measureTextWidth(n,k,k.bonus)),h);a=Math.max(s,a);var j=100/e.length;q.style.width=j+"%";q.innerText=n;var p={node:q,handler:o};g.menuInfo.push(p);});if(b){this.domNode.style.paddingBottom="0px";}var d=a*e.length;return Math.max(d,f);}function D(f,b,c){if(this.menuInfo){this.menuInfo.forEach(function(h){H.detachEvent(h.node,"click",h.handler);});this.menuInfo=[];}var e=this;if(f){var g=[];var d=b;var a=c;if(f.menus.length>0){Z.toggleClass(this.domNode,"menu-only",!a);}else{Z.toggleClass(this.domNode,"menu-only",false);}f.menus.forEach(function(h){if(h.cls==="separator"){if(g.length>0){d=B.call(e,g,d,a,false);a=true;}g=[];}else{g.push(h);}});if(g.length>0){d=B.call(e,g,d,a,true);}return d;}return b;}mstrmojo.mobile._MobileVisTooltip=mstrmojo.provide("mstrmojo.mobile._MobileVisTooltip",{menuInfo:[],menuNodes:[],submenuInfo:[],state:K.STATE_DEFAULT,isShow:false,touchPoint:{x:0,y:0},postBuildRendering:function Y(){this._super();Z.addClass(document.body,"touch-device");},addMenuFeedback:function L(a){a.addEventListener("touchstart",function(){Z.toggleClass(a,"selected",true);});a.addEventListener("touchend",function(){Z.toggleClass(a,"selected",false);});a.addEventListener("touchcacel",function(){Z.toggleClass(a,"selected",false);});},setVisibility:function Q(a){var b=P.walk("domNode.style",this);if(b){b.display=(!!a)?"block":"none";}this.isShow=a;},getVisibility:function A(){return this.isShow;},displayMobileEmptyContentInfo:function O(){if(!X.call(this)){return null;}Z.addClass(this.tableNode,"new-vis-tooltip-empty-content");E.call(this);if(!this.domNode.parentNode){document.body.appendChild(this.domNode);}this.clearTooltipHandler();this.infoObj=null;this.link=null;this.toggle(true);this.tableNode.innerText=mstrmojo.desc(18285,"No tooltip information.");return this.tableNode;},displayMobileInfo:function J(a,g,f,c){this.touchPoint=g;this.state=f;if(f===undefined){this.state=K.STATE_DEFAULT;}this.domNode.style.userSelect="none";this.domNode.style.paddingBottom="10px";var e;if(this.state===K.STATE_EMPTY_CONTENT){e=this.displayMobileEmptyContentInfo();var b=e&&e.parentNode;if(b){b.style.height="auto";}}else{e=this.displayInfo(a,g,undefined,undefined,null,false);if(X.call(this)){Z.removeClass(this.tableNode,"new-vis-tooltip-empty-content");}}I.call(this);E.call(this);if(this.state===K.STATE_COMBINED||this.state===K.STATE_EMPTY_CONTENT){var d=D.call(this,c,e.offsetWidth+1,a.length>0);R.updateVisTooltipMenuItemNetworkState(this.domNode);this.adjustContentTableWidth(e,d);if((a.length>0||this.state===K.STATE_EMPTY_CONTENT)&&c&&c.menus.length>0&&e.parentNode){e.parentNode.style.paddingBottom="10px";}}else{if(this.state===K.STATE_SUMMARY){e.parentNode.style.paddingBottom="0";}}if(g){this.moveTo(g.x,g.y);}},adjustContentTableWidth:function F(c,d){c.style.width=d+"px";if(X.call(this)){this.moveTo(this.touchPoint);}var a=c.parentNode;if(a){a.style.width="100%";}if(Z.hasClass(a,"new-vis-tooltip-container")){var b=a&&a.parentNode;if(b){b.style.width="100%";}}},moveDomTo:function(f,j){var i=mstrmojo.dom.position(document.body),l=j.x,k=j.y,m=f.offsetWidth,g=f.offsetHeight,e=i.x+i.w,n=i.y+i.h,c=l,a=k-g-W,b=5;if(a<=0){a=k+W;c+=2*W;}if(c>e-m-b||a>n-g-b){if(c<=e-m-b){a=n-g-b;}else{if(a<=n-g-b){c=e-m-b;}else{c=e-m-b;a=k-W-g;}}}if(c<0){c=W;}if(a<0){a=W;}var d=f.style;d.left=c+M;d.top=a+M;},moveTo:function(a,b){if(this.exitFixMode){return ;}if(a&&a.x&&a.y){this._super(a,b);return ;}this.moveDomTo(this.domNode,{x:a,y:b});},displayDrillSubMenu:function S(a){this.createDrillSubMenu(a);this.drillSubMenu.domNode.style.top=this.domNode.style.top;this.drillSubMenu.domNode.style.left=this.domNode.style.left;this.moveDomTo(this.drillSubMenu.domNode,this.touchPoint);this.setVisibility(false);this.drillSubMenu.setVisibility(true);},createDrillSubMenu:function U(a){if(!this.drillSubMenu){this.drillSubMenu=new mstrmojo.mobile.MobileDossierContextMenu({parent:this.parent,parentMenu:this});this.drillSubMenu.render();document.body.appendChild(this.drillSubMenu.domNode);}else{if(!this.drillSubMenu.domNode.parentNode){document.body.appendChild(this.drillSubMenu.domNode);}}a.title=mstrmojo.desc(145,"Drill");a.hasBack=true;this.drillSubMenu.updateMenus(a);},onBackClicked:function G(){if(this.parentMenu){this.parentMenu.setVisibility(true);}this.setVisibility(false);},});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.dom","mstrmojo.SimpleObjectInputBox");var D=mstrmojo.array,B=mstrmojo.dom,E=mstrmojo.Enum_Keys,A=mstrConfig.thousandsSep;var H={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};if(A===undefined){A=",";}var I;mstrmojo.TextBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,null,{cssClass:"mstrmojo-TextBoxSelector",srcid:null,dataSourcesXML:null,maxItemWidth:"",preBuildRendering:function G(){this.set("maxItemWidth",parseInt(this.parent.contentNode.style.width,10));this._super();},prekeydown:function C(J){var L=J.e;switch(parseInt(L.keyCode||L.charCode,10)){case E.TAB:case E.ENTER:B.preventDefault(J.hWin,L);var M=this.inputBox.value;if(M){if(D.find(this.items,"v",M)===-1){this.onSuggestionItemSelect({n:M,v:M});}else{this.setDefaultState();}}break;case E.ESCAPE:this.setDefaultState();break;case E.BACKSPACE:if(!this.getSearchPattern()){B.preventDefault(J.hWin,L);var K=this.items&&this.items.concat();if(K&&K.length){K.splice(K.length-1,1);this.set("items",K);var N=this.id;window.setTimeout(function(){mstrmojo.all[N].set("state",H.ADDING);},0);}}break;}},prekeyup:function F(J){}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.func","mstrmojo.hash","mstrmojo.RaErrorHandler","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.SimpleObjectInputBox","mstrmojo._HasTooltip","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.expr","mstrmojo.VisUtility","mstrmojo.models.FormatModel");var p=mstrmojo.array,G=mstrmojo.css,AD=mstrmojo.func,R=mstrmojo.RaErrorHandler,U=mstrmojo.dom,E=mstrmojo.Enum_Keys,W=mstrmojo.hash,Z=mstrmojo.mstr.EnumDSSXMLObjectTypes,AE=mstrmojo.expr.BFTP,o=mstrmojo.VisUtility,y=mstrmojo.models.FormatModel,u=y.ENUM_PROPERTY_NAMES,M=mstrConfig.thousandsSep;if(M===undefined){M=",";}var AK=2147762227,L=2147762262,c=2147762269,H=2147754499,F=2147500033,B=2147762890,D=8,N=400,f=118,I=350,K=-100,d=-101,z=64;var x;function s(AM){var AL=[" OR "," AND "," NOT ","&",",",'"',"*","?","-","+","]:","<","<=",">",">="];return(!mstrApp.isExpress&&typeof AM==="string"&&AM.trim().includes(" ")&&!AL.some(function(AN){return AM.includes(AN);}));}mstrmojo.SearchBoxSelectorList=mstrmojo.declare(mstrmojo.SuggestionList,null,{isSelectingSuggestionItems:false,postBuildRendering:function b(){var AP=this._super(),AL=this.parent,AU=AL.opener||{},AM=AL.id;if(!this.onScroll){this.onScroll=function AQ(){var AW=mstrmojo.all[AM],AY=AW.domNode;if(!AW.isFetching&&Math.ceil(AY.offsetHeight+AY.scrollTop)>=AY.scrollHeight){AW.isFetching=true;var AX=AW.opener;if(AX){AX.getCandidatesThroughTaskCall({isIncFetch:true,},{});}}};}var AV=AL.domNode;if(AL.supportsIncFetch){U.attachEvent(AV,"scroll",this.onScroll);}else{U.detachEvent(AV,"scroll",this.onScroll);}if(AU.isICS){var AS=AU.parent.defn.fmts||{};var AR=getComputedStyle(AU.domNode);G.setElementsStyle([this.itemsContainerNode],{width:AR.width,font:AS.font,textDecoration:AS["text-decoration"],color:AS.color});if(AS["s-border-color"]){this.parent.domNode.style.border="1px solid "+AS["s-border-color"];}if(AS["s-bg-color"]){this.parent.domNode.style.backgroundColor=AS["s-bg-color"];}if(AS.selectionColor){this.parent.domNode.style.setProperty("--mstrd-custom-checkbox-svg-url",o.getCustomCheckboxSvg(AS.selectionColor,AS["s-border-color"]));}var AO=this.itemsContainerNode.children||[];G.setElementsStyle(AO,{color:AS.color});if(AS["s-radius"]!==undefined){var AN=AS["s-radius"]+"px",AT="min("+AN+", 1em)";this.parent.domNode.style.setProperty("border-radius",AN,"important");G.setElementsStyle(AO,{paddingLeft:AT,paddingRight:AT});}}return AP;},getItemMarkup:function(AM,AL){if(!x){x=this._super(AM,AL).replace(">{@"+this.itemField+"}<",">{@"+this.itemField+"}{@weight}<");}return x;},getItemProps:function q(AQ,AM){var AP=this._super(AQ,AM),AR=AQ.wt;AP.weight=AR?"<em>("+mstrmojo.num.addSeparators(AR,M)+" "+this.parent.opener.wtStr+")</em>":"";var AL=W.walk("parent.opener",this);var AS=W.walk("parent.defn.multi",AL);if(AS){if(AQ.t===K||AQ.t===d){AP.attrs="";}else{var AN=AL.items;var AO=AN&&AN.length>0&&p.find(AN,"v",AQ.v)>-1;AP.attrs=(AP.attrs||"")+" "+("data-selected="+(AO?'"true"':'"false"'));}}return AP;},getItemIndex:function w(AP,AM){try{var AL=AM&&AM.e&&AM.e.target&&AM.e.target.getAttribute("idx");var AO=parseInt(AL,10);if(!isNaN(AO)){return AO;}}catch(AN){console.error("Error getting item index:",AN);}return AP._renderIdx;},onmouseover:function(AM,AN){var AL=AM.e.srcElement;if(AL.scrollWidth<=AL.offsetWidth){AL.title="";}},postClick:function AH(AM){var AN=this.parent,AP=AN.opener,AL=AP.parent.defn.multi;if(!this.multiSelect){AP.suggestionShown=false;var AO=this.getItemFromTarget(AM.getTarget());if(AO){AP.handleSuggestionItemSelect(AO);}if(AL){this.render();}else{AN.close();}}},onclick:function(AL){var AO=this.parent.opener.suggestionItems;this._super(AL);if(AO.length<=1){return ;}var AN=this.getItemFromTarget(AL.getTarget());if(AN&&AN.t===K){p.forEach(AO,function(AP,AQ){if(!this.selectedIndices[AQ]){this.doItemSelect(AP,{});}},this);}else{var AM=p.find(AO,"t",K);if(this.selectedIndices[AM]){this.doItemSelect(AO[AM],{});}}},});mstrmojo.SearchBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.SearchBoxSelector",cssClass:"mstrmojo-SearchBoxSelector",srcid:null,srct:Z.Attribute,dataSourcesXML:null,useClientForm:false,maxItemWidth:"",wtStr:"likes",suggestionListClass:"mstrmojo.SearchBoxSelectorList",useRichTooltip:false,preloadOptionsPattern:"*",init:function(AL){this._super(AL);},postCreate:function j(){var AP=W.clone(this.suggestionPopup);AP.cssClass="mstrmojo-SearchBoxSelector-suggest";if(this.isICS){AP.cssClass+=" isICS";}AP.suppressClose=function AO(AR){if(AR&&AR.classList&&AR.classList.contains("mstrmojo-Editor-curtain")){return true;}return U.contains(this.domNode,AR,true,document.body);};AP.nudge=function(){var Ae=this.domNode,AV=this.containerNode;if(!Ae){return ;}if(this.top==="0px"){return ;}var Aa=this.opener,Ad=Aa&&Aa.width,AU=parseInt(Ad||0,10),Ab=Math.min((AV&&AV.offsetHeight)||N,(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||N),AR=AU>0?Math.min(AU,Ae.offsetWidth):Ae.offsetWidth,AT=U.windowDim(),AS=parseInt(this.left,10),AY=parseInt(this.top,10);if(AY+Ab>=AT.h){AY=Math.max(AY-Ab-(this.target?this.target.offsetHeight:0),0);if(AY+Ab>=AT.h){AY=5;Ab=U.getMaxScrollHeight();}}if(AS+AR>=AT.w){AS=Math.max(AS-AR,0);}var Ac=Ae.style;Ac.top=AY+"px";Ac.left=AS+"px";Ac.maxHeight=Ab+"px";if(Ac.maxWidth===""){Ac.maxWidth=G.getComputedStyle(Ae).maxWidth;}var AX=U.position(Ae).w;if(AU>0&&AX!==AU&&parseInt(Ac.maxWidth,10)!==AU){Ac.maxWidth=Ad;this.nudge();}var AW=Aa.inputBox.getBoundingClientRect().width-2;var AZ=Ae.getBoundingClientRect().width;if(parseInt(AZ,10)>parseInt(AW,10)){Ac.maxWidth=AW+"px";}};var AL=this;var AQ=AP.onOpen;AP.onOpen=function AN(){AL.dropdownOpen=true;return AQ&&AQ.call(this);};AP.onClose=function AM(){AL.dropdownOpen=false;setTimeout(function(){if(this.dropdownOpen===false&&document.activeElement!==this.inputBox){this._lastPattern="";if(this.inputBox&&this.inputBox.value){this.inputBox.value="";}}}.bind(AL),100);this.list.clearSelect();var AR=this.opener;if(AR){AR.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,AR.suggestionPopupCssClss||"");}var AS=this.domNode;if(AS){AS.scrollTop=0;}};this.suggestionPopup=AP;},dropdownOpen:false,preBuildRendering:function A(){var AL=this.parent.contentNode.offsetWidth||this.parent.width;this.set("maxItemWidth",parseInt(AL,10));if(this.isICS){if(!this.icnCss||this.icnCss.indexOf(" isICS")<0){this.icnCss=(this.icnCss||"")+" isICS";}}this._super();},postBuildRendering:function b(){var AV=this.parent.defn.fmts;if(!AV.height){this.domNode.style.height="auto";}if(this.isICS){const AR=AD.safeCall("showAdvancedStyling",this.parent)();if(AR){this.inputBox.style.height="1.5em";}var AU=getComputedStyle(this.emptyTextNode);var AW=parseFloat(AU.fontSize);this.emptyTextNode.style.setProperty("--mstrd-font-size-no-less-than-15",Math.max(15,AW)+"px");this.emptyTextNode.style.setProperty("--mstrd-line-height-inherit",AU.height);var AS=AV["s-radius"]!==undefined?AV["s-radius"]+"px":undefined;G.setElementsStyle([this.domNode],{backgroundColor:AV["s-bg-color"],border:AV["s-border-color"]?"1px solid "+AV["s-border-color"]:undefined,borderRadius:AS});var AL={};AL["--border-radius"]=AS;G.setElementCSSVariables(this.domNode,AL);var AO=o.getDashboardContentAccentColor(""),AM=o.getDashboardContentAccentColor("-text"),AN=o.getDashboardContentAccentColor("-020"),AT=AD.safeCall("hasChangedFormats",this.parent)()&&this.parent.defn.ssc!==undefined?y.decodeValue(u.SELECTOR_SELECTION_COLOR,this.parent.defn.ssc):AO;G.setElementsStyle([this.inputBox],{backgroundColor:AV["s-bg-color"],border:AT?"1px solid "+AT:undefined,borderRadius:AS,paddingLeft:"min("+(AV["s-radius"]||0)+"px, 1em)",paddingRight:"min("+(AV["s-radius"]||0)+"px, 1em)"});AV.selectionColor=AT;var AQ=this.itemsContainerNode.children||[],AP=getComputedStyle(this.itemsContainerNode).textDecoration==="underline";p.forEach(AQ,function(AY){if(AY.classList.contains("item")){var AZ=AY.firstChild;if(AZ){AZ.style.backgroundColor=AT;AZ.style.color=AV.selection&&AV.selection.color||AM;if(AR){AZ.style.border="none";}else{if(AN){AZ.style.border="1px solid "+AN;}}if(AS){AZ.style.borderRadius=AS;}var AX=getComputedStyle(AZ).textDecoration==="line-through";if(AX&&AP){AZ.style.textDecoration="underline line-through";}}}});}return this._super();},onstateChange:function k(AM){this._super(AM);var AN=AM.value,AL=this.inputBox;if(AN===this.STATES.ADDING){AL.value=this._lastPattern==="*"?"":this._lastPattern||"";}},setDefaultState:function n(){var AL=(this.items&&this.items.length)||0;var AM=typeof this.maxObjectCount==="number"&&AL>=this.maxObjectCount;if(!AL){this.set("state",this.STATES.EMPTY);}else{if(AM){this.set("state",this.STATES.FULL);}else{if(this.dropdownOpen){this.set("state",this.STATES.ADDING);}else{this.set("state",this.STATES.DEFAULT);}}}},postitemsChange:function AG(){this.updatePopupPosition();},filterCandidates:function t(AM,AQ,AL){var AP=AM,AN=this.suggestCount;var AS=W.walk("parent.defn.multi",this);if(AS&&mstrApp.isVI){return AP;}if(!this.noCache){AL=AL||AN;if(AQ==="*"){AQ="";}else{AQ=mstrmojo.string.regEscape(AQ);}var AR=this.itemField,AO=new RegExp(AQ,"i");AP=p.filter(AM,function(AT){return AO.test(AT[AR]);},{max:AL,});}if(AP.length){p.forEach(this.items,function(AU){var AT=p.find(AP,"v",AU.v);if(AT>-1){AP.splice(AT,1);}});}return AP;},isPreloadOptionsEnabled:function l(){var AL=W.walk("parent.node.defn.cacs",this)||0;var AM=1<<1;return !!(AL&AM);},isOnlyNumberDisplayForm:function J(){var AS=this.srcid;var AQ=this.parent;var AP=AQ.defn;var AM=AP.fs||AP.sfs;var AO=AQ.model;var AL=p.filterOne(AO.getDatasetUnits(["att"]),function(AT){return AT.did===AS;});var AN=(AL&&AL.fs)||[];if(AM.length===1&&AN.length>=1){var AR=p.filterOne(AN,function(AT){return AT.fid===AM[0].did;});if(AR.bftp===AE.NUMBER){return true;}}},getShouldReplaceSpace:function C(AL){return !this.isOnlyNumberDisplayForm()&&s(AL);},getFiltersObj:function P(){if(!(this.parent&&this.parent.getPanelContainer)){return null;}var AR=this.parent.getPanelContainer()||{},AV=AR.parent||{};if(AV.isSelectorPanel){var AN=AR.children,AQ=this.parent.k,AT={filters:[],};for(var AS=0;AS<AN.length;AS++){var AL=AN[AS].boxContent||{},AM=AL.node||{},AO=AM.defn||{},AU=AO.tks||"";if(AU.indexOf(AQ)>=0){var AP={objId:AO.srcid,include:AO.include,elemList:[],};p.forEach(AM.data.ces||[],function(AW){AP.elemList.push(AW.v);});AT.filters.push(AP);}}if(AT.filters.length>0){return JSON.stringify(AT);}}},fetcherState:[],createFetcher:function X(AL,AP,AO,AN){function AM(AV){AV=AV||{};var AW=(AV.offset||0);var AY=AW+1;var Ae=this.suggestCount;var Ab=this.srcid;var Ai={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:Ab,dataSourcesXML:this.dsrc||"",blockBegin:AY,blockCount:Ae,searchPattern:AP,rawInput:AL,browseFlags:1,otp:this.srct,useNewSearch:AO,phraseMatch:AN};var Ah=this.getFiltersObj();if(Ah){Ai.filterJson=Ah;}var Aa=null;var AZ=this.parent;var AS=AZ.defn;if(AD.safeCall("isUsedInPushDownFilter",AZ)()){W.copy(AZ.getPushDownFilterElementsBrowseParams(AS.parasid),Ai);}else{var AX=AS.dsid;if(AX){Aa={datasetID:AX,messageID:AZ.model.mid,ctlKey:AZ.ckey,};}}if(this.srct===Z.Consolidation){Ai.browseFlags=z;}var Af=AS.fs||AS.sfs;if(Af){var Ad="",AT="";p.forEach(Af,function(Aj){Ad+=AT+Aj.did;AT=";";});Ai.searchForms=Ad;var AU=AZ.model,Ac=p.filterOne(AU.getDatasetUnits(["att"]),function(Aj){return Aj.did===Ab;}),AR=(Ac&&Ac.fs)||[];if(AU.isnew||this.useClientForm){var Ag="",AQ="";p.forEach(Af,function(Aj){var Ak=p.filterOne(AR,function(Al){return Al.fid===Aj.did;});Ag+=AQ+Aj.did+":"+((Ak&&Ak.bftp)||0);AQ=";";});Ai.clientFormPatterns=Ag;}}return new Promise(function(Ak,Aj){mstrmojo.elementHelper.browseElements({success:Ak,failure:Aj,},Ai,Aa);}).then(function(Aj){if(Aj&&Aj.es){mstrmojo.elementHelper.buildElemsTerseID(Aj.es,Ab,true);var Ak=Math.min(Aj.bc,Aj.sz);if(Aj.useNewSearch){Aj.bb=Aj.newSearchOffset-Ak+1;}return{state:{offset:Aj.bb+Ak-1,total:Aj.sz,},data:Aj,};}return{state:{offset:Aj.sz,total:Aj.sz,},data:Aj,};});}return AM.bind(this);},getUseNewSearch:function(){var AL=mstrApp.isOIVM&&mstrApp.isOIVM();return !AL;},advancedFetch:function e(AL){var AN=this;var AM=mstrmojo.SearchBoxSelector.createFetcher({createFetcher:function(AO){return AN.createFetcher(AL,AO.searchPattern,AO.useNewSearch,AO.phraseMatch);},searchPattern:AL,searchBehavior:{phraseMatch:AN.parent.isExactMatch,shouldProcessUserInput:AL&&AN.getShouldReplaceSpace(AL),useNewSearch:AN.getUseNewSearch(),},items:(AN.suggestionItems||[])});return Promise.resolve(AN.fetcherState).then(AM).then(function(AO){AN.fetcherState=AO.state;return AO.data;});},_lastCallId:0,getCandidatesThroughTaskCall:function a(AO,AQ){var AT=this.srcid;if(!AT){return ;}var AP=++this._lastCallId;var AR=AO.isIncFetch;if(!AR){this.fetcherState=[];this.suggestionItems=[];}var AN=(AR&&this._last_hit?this._last_hit.pattern:AO.pattern)||"";if(AN==="%"){return ;}if(AN===""){if(!this.isPreloadOptionsEnabled()){return ;}}if(this.hitEnterToTest){if(AR&&this._last_hit&&this._last_hit.loadedCount!==1&&this.onIncrementalFetch){this.onIncrementalFetch();}mstrApp.showWait({message:mstrmojo.desc(15823,'Searching "#"...').replace("#",AN)});}else{if(!AR){this._searchQueue=[AN];}}var AL=this.id;var AM=this.getSuggestionTarget();AQ.success=function(Ac){var AX=mstrmojo.all[AL],AV=AX&&AX.suggestionPopup,Ab,Aa,Ad,AU=AX&&AX._searchQueue,AW=!AU||AU.length<=(AR?0:1)||!AX.stifleIntermediateSearch;if(AX){if(Ac&&Ac.es&&Ac.es.length){Ab=AX.getSuggestionTarget();Aa=Ac.es.length;if(!Ac||!Ab||AM!==Ab){return ;}Ad=Ac.es;AX._last_hit={items:Ad,pattern:AN,loadedCount:Ac.bb+Aa,};AV.isFetching=false;if(AW){AV.supportsIncFetch=(Ac.bb+Ac.bc)<Ac.sz;var Ae=AP===AX._lastCallId;if(Ae){var AZ=AX.filterCandidates(Ad,AN);if(AX.parent){AX.parent.checkAndParseHTMLTags(AZ);}var AY=AR?AX.suggestionItems.concat(AZ):AZ;AX.updateSuggestion(AY);}if(AX.inputBox){AX.inputBox.focus();}if(!AX._ListenerProc){AX._ListenerProc=function(){var Af=AX.suggestionPopup;if(Af.visibile){Af.nudge();}};U.attachEvent(window,"resize",AX._ListenerProc);}}}else{if(AW){AX.updateSuggestion([]);}}}};var AS=this;AQ.failure=function(AY){var AZ=mstrmojo.all[AL],AX=parseInt(AY.code,10)+4294967296,Aa=AX===AK||AX===L||AX===c,AU=AX===H;if(AU){AZ.hideTooltip();return ;}var AV=AX===F||(typeof AY.message==="string"&&AY.message.trim()==="()");var AW=!Aa&&!AV;if(AW){R.handleRAPopUpError(AY);}if(AZ&&AZ.failMessage){AZ.failMessage(Aa?{errCode:AX,msg:AY.message}:{msg:mstrmojo.desc(484,"Error loading")});}};AQ.complete=function(){var AV=AS._searchQueue,AU=AV&&AV.pop();mstrApp.hideWait();if(AV&&AV.length&&AS.showSuggestion){AS._searchQueue=[];AS.showSuggestion(AU);}};return this.advancedFetch(AN).then(AQ.success,AQ.failure).then(AQ.complete);},getShouldKeepSuggestionOnSelect:function AJ(){var AL=W.walk("parent.defn.multi",this);return AL;},destroy:function AA(AL){if(this._ListenerProc){U.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(AL);},onsuggestionItemsChange:function AF(){var AP=this.suggestionItems,AM=this.suggestionPopup,AO=AM.editorNode,AT=AP&&AP.length>D,AS="",AQ="";if(AT){AS=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||N;AQ="px";}if(AO){AO.style.maxHeight=AS+AQ;}else{if(AT){AQ+=";";AM.cssText=(AM.cssText||"")+"max-height:"+AS+AQ;}}if(mstrApp.isExpress){var AN=this.parent.contentNode.offsetWidth,AL=AN===null||f<AN?f:AN,AR=AN===null||I>AN?I:AN;AM.cssText=(AM.cssText||"")+"min-width:"+AL+"px; max-width:"+AR+"px;";}},getSuggestionPos:function i(){if(this.inputBox){this._inputPos=U.position(this.inputBox,true);}var AL=this._super();if(AL){AL.lockIW=this;}return AL;},updateSuggestion:function m(AM){var AL=AM&&AM.length;this.autoSelect=true;this.set("disableClick",false);if(this.parent.defn.multi&&AL&&AL>1){AM=p.filter(AM,function(AO){return(AO.v!=="u;"&&AO.t!==14&&AO.t!==K);});AM.unshift({n:mstrmojo.desc(13976,"(All search results)"),t:K,});this.autoSelect=false;}if(!AL){AM=[{n:mstrmojo.desc(13779,"No elements match your search"),t:d,cls:"nomatch"},];}if(AM.length===1&&AM[0].t===d){this.autoSelect=false;this.set("disableClick",true);}this._super(AM);var AN=this;AN.mw=AN.mw||function(AR){var AO=AN._lastOpened;if(!AO||!AO.visible){U.detachEvent(document,U.isFF?"DOMMouseScroll":"mousewheel",AN.mw);return ;}var AQ=U.eventTarget(self,AR);var AP=AO.domNode;if(!U.contains(AP,AQ,true,document.body)){AO.close();U.detachEvent(document,U.isFF?"DOMMouseScroll":"mousewheel",AN.mw);}};U.attachEvent(document,U.isFF?"DOMMouseScroll":"mousewheel",AN.mw);},updatePopupPosition:function S(){if(this.suggestionPopup){var AL=this.getSuggestionPos();if(AL.top!=="0px"){function AM(AN){W.forEach(AN,function(AP,AO){this.set(AO,AP);},this);}AM.call(this.suggestionPopup,AL);this.suggestionPopup.nudge();}}},resolveUpdatedItems:function O(AP){var AM=p.isArray(AP);var AO=AM?AP:[AP];var AL=p.find(this.items,"v",AP.v)>-1;var AR=W.walk("parent.defn.multi",this);if(this.items.length===1&&W.walk("showWarning4DeleteLastItemFlag",this)&&!AM){delete this.showWarning4DeleteLastItemFlag;return AL?[]:[AP];}if(!AR){return AO;}var AN=new Set(this.items.map(function(AS){return AS.v;}));var AQ=new Set(AO.map(function(AS){return AS.v;}));return this.items.filter(function(AS){return !AQ.has(AS.v);}).concat(AO.filter(function(AS){return !AN.has(AS.v);}));},onSuggestionItemSelect:function AB(AL){var AM=this.parent,AN=AM&&AM.tabParent;this._super(AL);if(AM&&AM.canTab){if(AM.multi){AM.buildNavList();AM.tabIndex=AM.navList.length-2;}else{AM.resetTabNav();if(AN&&AN.grabFocus){AN.grabFocus(true);}}}},handleSuggestionItemSelect:function h(AN,AO){this.set("isSelectingSuggestionItems",true);if(p.isArray(AN)||AN.t===K){AN=p.ensureArray(AN);var AL=p.filter(AN,function(AP){return AP.t!==K;});if(AL.length<AN.length){AL=p.filter(this.suggestionItems,function(AP){return AP.t!==K;});var AM=new Set(this.items.map(function(AP){return AP.v;}));AL=p.filter(AL,function(AP){return !AM.has(AP.v);});}this.onSuggestionItemSelect(AL);}else{this._super(AN,AO);}this.set("isSelectingSuggestionItems",false);},prekeydown:function Q(AT){if(!this.srcid){return ;}this._super(AT);var AQ=AT.e,AU=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||N,AO=D,AM=AU/AO;var AN=this.getSelected();if(AN){var AP=AN._renderIdx,AL=(AP-AO+1)*AM,AS=(AP-1)*AM,AR=this.suggestionPopup.domNode.scrollTop;switch(parseInt(AQ.keyCode||AQ.charCode,10)){case E.DOWN_ARROW:if(AR<=AL){this.suggestionPopup.domNode.scrollTop=AL;}else{if(AR>AS){this.suggestionPopup.domNode.scrollTop=AS;}}break;case E.UP_ARROW:if(AR<=AL||AR>AS){this.suggestionPopup.domNode.scrollTop=AS;}break;}}},onfocus:function AC(){var AL=this.inputBox.value;if(!this.dropdownOpen&&(AL||this.isPreloadOptionsEnabled())){this._isSearching=true;this.showSuggestion(AL);}},onblur:function g(){this._isSearching=false;this._super();},onkeydown:function Y(AL){var AN=AL.e||AL,AM=AN.keyCode;if(AM===E.ESCAPE){this.inputBox.value="";}this._super(AL);},prekeyup:function AI(AL){if(!this.srcid){return ;}this._super(AL);},});})();(function(){var D={};var B=function(I){var H=D[I];if(H){return H.promise;}var G;var J=new Promise(function(K){G=K;});if(G){D[I]={resolve:G,promise:J};}return J;};var A=function(){throw new Error("require function is not implemented");};D.require={promise:Promise.resolve(A),resolve:function(){throw new Error("Cannot redeclare require function");}};function F(I,J,H){if(D[I]){console.warn("Module ".concat(I," has been defined already."));return ;}var G={};Promise.all(J.slice(2).map(B)).then(function(K){return H.apply(null,[A,G].concat(K));}).then(function(){var K;(K=D[I])===null||K===void 0?void 0:K.resolve(G);D[I]={promise:Promise.resolve(G),resolve:function(){}};});}F("lodash/fp",[],function(G,H){H.pipe=function(){var I=[];for(var J=0;J<arguments.length;J++){I[J]=arguments[J];}return function(K){return I.reduce(function(M,L){return L(M);},K);};};});var E=(this&&this.__spreadArray)||function(L,K,J){if(J||arguments.length===2){for(var I=0,G=K.length,H;I<G;I++){if(H||!(I in K)){if(!H){H=Array.prototype.slice.call(K,0,I);}H[I]=K[I];}}}return L.concat(H||Array.prototype.slice.call(K));};var C=(this&&this.__assign)||function(){C=Object.assign||function(H){for(var I,G=1,K=arguments.length;G<K;G++){I=arguments[G];for(var J in I){if(Object.prototype.hasOwnProperty.call(I,J)){H[J]=I[J];}}}return H;};return C.apply(this,arguments);};F("utils/TypeUtil",["require","exports"],function(H,G){G.__esModule=true;G.assertEmptyObject=void 0;var I=function(J){return(J&&typeof J==="object"&&!Array.isArray(J)&&J.constructor===Object&&Object.keys(J).length===0);};G.assertEmptyObject=I;});F("services/fetcher/Fetcher",["require","exports"],function(I,G){G.__esModule=true;G.withIsDrain=void 0;var H=function(K,J){return Object.assign(K,{isDrain:J});};G.withIsDrain=H;});F("services/fetcher/FilterFetcher",["require","exports","lodash/fp","services/fetcher/Fetcher"],function(J,H,G,K){H.__esModule=true;H.createFilterFetcher=void 0;var I=function(M,L){return(0,K.withIsDrain)(function(N){return Promise.resolve(N!==null&&N!==void 0?N:[]).then(function(O){var P=O[0],Q=O[1];return Promise.resolve(P).then(M).then(function(R){return L(R,Q);});});},(0,G.pipe)(function(N){return N!==null&&N!==void 0?N:[];},function(O){var N;var P=O[0];return(P&&((N=M.isDrain)===null||N===void 0?void 0:N.call(M,P)))||false;}));};H.createFilterFetcher=I;});F("services/fetcher/GreedyFetcher",["require","exports","services/fetcher/Fetcher"],function(I,H,J){H.__esModule=true;H.createGreedyFetcher=void 0;var G=function(M,K,L){var N=(0,J.withIsDrain)(function(Q,O){var P;return Q!==undefined&&((P=M.isDrain)===null||P===void 0?void 0:P.call(M,Q))?Promise.resolve({data:O!==null&&O!==void 0?O:null,state:Q}):Promise.resolve(Q).then(M).then(function(R){return({data:O===undefined||R.data===null?R.data:L(O,R.data,R.state),state:R.state});}).then(function(R){var S;return K(R)?N(R.state,(S=R.data)!==null&&S!==void 0?S:undefined):R;});},function(P){var O;return(P&&((O=M.isDrain)===null||O===void 0?void 0:O.call(M,P)))||false;});return N;};H.createGreedyFetcher=G;});F("services/fetcher/MetaAwareFetcher",["require","exports","lodash/fp","services/fetcher/Fetcher"],function(I,H,G,J){H.__esModule=true;H.createMetaAwareFetcher=void 0;var K=function(L,M){return(0,J.withIsDrain)(function(N){return Promise.resolve(N!==null&&N!==void 0?N:[]).then(function(O){var P=O[0],Q=O[1];return Promise.resolve(Q).then(M).then(L).then(function(S){var R;return((R=S.isDrain)===null||R===void 0?void 0:R.call(S,P))?Promise.resolve({data:null,state:P}):S(P);}).then(function(R){return({data:R.data,state:[R.state,M(Q,R)]});});});},(0,G.pipe)(function(N){return N!==null&&N!==void 0?N:[];},function(N){var O=N[0],P=N[1];return(O&&(0,G.pipe)(M,L,function(R){var Q;return(Q=R===null||R===void 0?void 0:R.isDrain)===null||Q===void 0?void 0:Q.call(R,O);})(P))||false;}));};H.createMetaAwareFetcher=K;});F("services/fetcher/ProgressiveFetcher",["require","exports","services/fetcher/Fetcher"],function(J,H,K){H.__esModule=true;H.createProgressiveFetcher=void 0;var I=function(){return function(M,N){return function(O){var P;if(O===void 0){O=[];}var R=O[0],Q=O.slice(1);if(R!==undefined&&((P=N.isDrain)===null||P===void 0?void 0:P.call(N,R))){return Promise.resolve(Q).then(M).then(function(S){return({data:S.data,state:E([R],S.state,true)});});}return Promise.resolve(R).then(N).then(function(S){var W=S.data,U=S.state;return({data:W,state:[U]});});};};};var L=function(M){return(0,K.withIsDrain)(M.reduceRight(I(),function(){return({data:null,state:[]});}),G(M));};H.createProgressiveFetcher=L;var G=function(M){return function(N){return M.map(function(P,O){return[P.isDrain,N===null||N===void 0?void 0:N[O]];}).every(function(Q){var O;var P=Q[0],R=Q[1];return(O=P===null||P===void 0?void 0:P(R))!==null&&O!==void 0?O:false;});};};});F("services/fetcher/createSearchFetcher",["require","exports","lodash/fp","services/fetcher/Fetcher","services/fetcher/FilterFetcher","services/fetcher/GreedyFetcher","services/fetcher/MetaAwareFetcher","services/fetcher/ProgressiveFetcher"],function(J,L,M,N,K,P,H,Q){L.__esModule=true;L.createSearchFetcher=L.createArrayFilter=void 0;function G(S,R){var U=new Set(S===null||S===void 0?void 0:S.map(R));return function(W){if(U.has(R(W))){return false;}U.add(R(W));return true;};}L.createArrayFilter=G;var I=function(R){return(R?R.offset>=R.total:false);};function O(g){var f=g.createFetcher,d=g.searchPattern,U=d===void 0?"":d,c=g.searchBehavior,b=c===void 0?{}:c,Z=b.phraseMatch,h=Z===void 0?false:Z,Y=b.shouldProcessUserInput,X=Y===void 0?false:Y,a=g.filterOfFilterFetcher,W=g.mergeData,S=g.isStillGreedy,R=g.resolveFetcherMeta,e=g.finalizeFetcherData;return(0,M.pipe)(function(){return function(i){if(i===void 0){i=null;}return(0,M.pipe)(function(){if(h){return[U.trim().replace(/\s+/g,"_")];}if(i!==true&&X){return[U.trim().replace(/\s+/g,"_"),U.trim().replace(/\s+/g," AND "),U,];}return[U];},function(j){return j.map(function(k){return(0,N.withIsDrain)(f({searchPattern:k,useNewSearch:i!==null&&i!==void 0?i:true,phraseMatch:h}),I);});},function(j){return j.map(function(k){return(0,K.createFilterFetcher)(k,a);});},function(j){return(0,Q.createProgressiveFetcher)(j);})();};},function(i){return(0,H.createMetaAwareFetcher)(i,R);},function(i){return(0,P.createGreedyFetcher)(i,function(l){var m=l.data,j=l.state,k=j[1];return !k&&S(m);},W);},function(i){return(0,N.withIsDrain)((0,M.pipe)(i,function(j){return Promise.resolve(j).then(function(k){return k.data===null||!i.isDrain?k:{state:k.state,data:e(k,i.isDrain)};});}),i.isDrain);})();}L.createSearchFetcher=O;});F("services/fetcher/createMojoSearchFetcher",["require","exports","services/fetcher/createSearchFetcher"],function(H,G,J){G.__esModule=true;G.createMojoSearchFetcher=void 0;var K=function(L){return function(W,U){var R,Q,P;if(U===void 0){U=0;}if(W.data===null){return{data:W.data,state:[W.state,U]};}var O=W.data,M=W.state;var S=[];(R=O.es)===null||R===void 0?void 0:R.forEach(function(X){if(L(X)){S.push(X);}});var N=C(C({},O),{es:S});return{data:N,state:[M,(U!==null&&U!==void 0?U:0)+((P=(Q=W.data.es)===null||Q===void 0?void 0:Q.length)!==null&&P!==void 0?P:0)-S.length]};};};var I=function(O){var P=O.createFetcher,N=O.items,M=N===void 0?[]:N,Q=O.searchPattern,L=O.searchBehavior;return(0,J.createSearchFetcher)({createFetcher:P,searchPattern:Q,searchBehavior:L,filterOfFilterFetcher:K((0,J.createArrayFilter)(M,function(R){return R.v;})),isStillGreedy:function(U){if(U===null||U===void 0?void 0:U.es){var W=400;var R=18;var S=Math.ceil(W/R);return U.es.length<S;}return false;},mergeData:function(S,W,e){var c,b,a,Z,Y,X;var R=e[0];var f=R.map(function(h){var g=h[1];return g;}).reduce(function(h,g){return h+g;},0);var U=R.map(function(g){var h=g[0].offset;return h;}).reduce(function(h,g){return h+g;},0);var d=R.map(function(g){var h=g[0].total;return h;}).reduce(function(h,g){return h+g;},0);return{bb:U-f,sz:d-f,bc:((b=(c=W.es)===null||c===void 0?void 0:c.length)!==null&&b!==void 0?b:0)+((Z=(a=S.es)===null||a===void 0?void 0:a.length)!==null&&Z!==void 0?Z:0),es:E(E([],((Y=S.es)!==null&&Y!==void 0?Y:[]),true),((X=W.es)!==null&&X!==void 0?X:[]),true),did:S.did};},resolveFetcherMeta:function(W,R){var U,S;if(R){return(S=W!==null&&W!==void 0?W:(U=R.data)===null||U===void 0?void 0:U.useNewSearch)!==null&&S!==void 0?S:false;}return W!==null&&W!==void 0?W:((L===null||L===void 0?void 0:L.useNewSearch)===true?null:false);},finalizeFetcherData:function(R,S){if(R.data&&!S(R.state)){return C(C({},R.data),{sz:Infinity});}return R.data;}});};G.createMojoSearchFetcher=I;});F("",["require","exports","services/fetcher/createMojoSearchFetcher"],function(H,G,I){mstrmojo.SearchBoxSelector.createFetcher=I.createMojoSearchFetcher;if(window.createMojoSearchFetcher){console.warn("Overriding existing createMojoSearchFetcher from window");mstrmojo.SearchBoxSelector.createFetcher=window.createMojoSearchFetcher;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.MetricSlider","mstrmojo.MetricQualification","mstrmojo.SearchBoxSelector","mstrmojo.TextBoxSelector","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.func","mstrmojo.string","mstrmojo.date","mstrmojo._IsSelectorTarget","mstrmojo.elementHelper","mstrmojo.MetricSelectorUtility","mstrmojo.RaErrorHandler","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi._MonitorsAppState","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.EnumRWUnitType","mstrmojo.mstr.EnumDSSConsolidationType","mstrmojo.vi.models.VIComponentMap.TYPES","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw._SupportTabNav","mstrmojo.util.TelemetryUtil","mstrmojo.mstr.EnumWebAPIErrorCodes","mstrmojo.EnumRWSelectorType","mstrmojo.vi.ui.rw.selectors.EventTimeRange","mstrmojo.vi.controllers.ParameterController","mstrmojo.util.PlatformHelper","mstrmojo.EnumDSSGetElementsResultFlags","mstrmojo.pendo.PendoHelper","mstrmojo.pendo.PendoParameterEnums","mstrmojo.fe.FilterUtils");mstrmojo.requiresDescs(4729,4730,4732,4733,4734,4735,4928,5225,5443,6738,8967,12297);var CZ=mstrmojo.array,Aw=mstrmojo.hash,BS=mstrmojo.dom,AN=mstrmojo.expr,CU=mstrmojo.expr.TP,Bd=mstrmojo.RaErrorHandler.embeddedErrStr,Bl=AN.TP,BF=AN.STP,o=AN.DTP,B8=mstrmojo.css,AB=mstrmojo.func,A6=mstrmojo.date,CM=mstrmojo.EnumRWUnitType,CN=mstrmojo.mstr.EnumWebAPIErrorCodes,Cb=mstrmojo.MetricSelectorUtility,A3=mstrmojo.vi.ui.DatasetUnitMenuUtils,BL=mstrmojo.vi.models.VIComponentMap.TYPES,B7=mstrmojo.DocDataService,Cy=B7.REQUEST_DEFN_DATA,x=mstrmojo.vi.enums.EnumFeatures,CI=mstrmojo.EnumRWSelectorType,E=mstrmojo.vi.controllers.ParameterController,CX=0,Q=1,D=2,CC=3,B1=4,BM=5,Av=6,a=7,Cw=8,Bk=9,AS=10,n=11,G=12,CQ=13,B0=mstrmojo.elementHelper,CA=B0.ELEM_ALL_ID,Az=AB.wrapMethods,AM=mstrmojo.string.escapeIllegalXML,AD=mstrmojo.mstr,Bn=AD.EnumDSSXMLBaseFormType.DssXmlBaseFormHTMLTag,BT=AD.EnumDSSConsolidationType,Ba=AD.EnumDSSXMLObjectTypes,Bj=Bl.FILTER,S=Bl.METRIC,g=Bl.ATTR,AY=Bl.CONS,Bx=0,Af="u;",Ca=14,Au=BF.NDE,CS=3076,Be=3077,CF=BF.CUSTOMGROUP,Ch=B0.ELEM_ALL,Ag=338,A7=6,A2=47,Bt=26,BJ="RA_LIMIT_ERR",Cr=mstrmojo.util.TelemetryUtil,q=mstrmojo.util.PlatformHelper,AI=mstrmojo.pendo.PendoHelper,U=mstrmojo.pendo.PendoParameterEnums,X="\u001E",CT=1,B2=0,Al=2000,A4="u;";mstrmojo.DocSelectorEvtType=null;var Cz={};Cz[a]="MetricSlider";Cz[Cw]="MetricQualification";Cz[Bk]="SearchBoxSelector";Cz[AS]="TextBoxSelector";Cz[CQ]="EventTimeRange";var CO=2;var Ce=[{n:mstrmojo.desc(4735,"Link Bar"),v:Av},{n:mstrmojo.desc(4734,"Button Bar"),v:BM},{n:mstrmojo.desc(6738,"List Box"),v:D},{n:mstrmojo.desc(4732,"Radio Buttons"),v:CC},{n:mstrmojo.desc(4729,"Drop-down"),v:CX}];var BR=[{n:mstrmojo.desc(4735,"Link Bar"),v:Av},{n:mstrmojo.desc(4729,"Drop-down"),v:CX}];var e=function e(){var C2={type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,isUConDS:!!this.defn.dsTks};if(this.style===Cw||this.style===a){mstrmojo.hash.copy(C2,{srcid:this.srcid,srct:this.type,f:this.f,ft:this.ft,qt:this.qt,unset:!!this.unset,cs:this.cs});}if(this.isEventTimeRangeFilter()){C2.isEventTimeRange=true;}return C2;},A1=function A1(){var C3=this.node,C5=C3&&C3.data||{},C2=C3&&C3.defn||{},C4=C2.srct;return((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())||mstrConfig.resolveOnly)&&this.style!==Bk&&((C4&&this.hasAttrData())||C2.isObjectParameter)&&!C5[AR.ELMSREADY]&&!C5[AR.ELMSREQUEST]&&parseInt(C2.ds,10)===Bx&&!C5[AR.DISABLED];},AH=function AH(C8){var C6=[];for(var C3=0;C3<C8.length;C3++){var C5=C8[C3],C7="",C2="",C4=C5.t;if(C4===Bl.METRIC){C7="i";}else{if(C4===Bl.FILTER&&C5.subtype===BF.CUSTOMGROUP){C7="y";}else{if(C4===Bl.CONS){C7="z";}else{C7="U";}}}if(C5.ctid&&C5.cttp){C2=":"+C5.ctid+":"+C5.cttp;}C6.push({v:C7+C5.v+C2+";"+C5.v,n:C5.n,t:C5.t,did:C5.v});}return C6;},R=function R(C9,DG,C3,C5){var DD=this.node.defn,C7=this.node.data,DF=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,DB={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:DD.srcid||"",dataSourcesXML:DD.dsrc||"",browseFlags:1},C6=AB.safeCall("isUsedInPushDownFilter",this)(),C4,C2=(DF||DG)&&!C5,DH=q.isLibraryConsumption(),DI=q.isWorkstation();if(!DD.srcid&&!DD.isObjectParameter){return ;}if(this.raParams){Object.assign(DB,this.raParams);delete this.raParams;}if(C6){var DA=DD.parasid,C8=this.getPushDownFilterElementsBrowseParams(DA,true);Aw.copy(C8,DB);C4={paraid:DD.paraid,parasid:DD.parasid,srcid:DD.srcid,timezoneId:DB.timezoneId||""};}if(!C9&&!C6&&!DD.isObjectParameter){DB.datasetID=DD.dsid||AV(DD.srcid,this.model.datasets);DB.messageID=this.model.mid;if(!DB.datasetID){return ;}}var DE=this,DC={success:function(DK){DE.bGetElems=true;DE.set("wait",false);var DM=[];if(DK){if(DD.isObjectParameter){var DJ=Aw.walk("0.predefinedValueList",DK)||[];DM=AH(DJ);}else{DM=DK.es||[];}}if(DM){if(DK.fromCache){C7.elms=DM;}else{if(!C5||DM.length){C7.elms=(DD.srcid)?B0.buildElemsTerseID(DM,DD.srcid,true):DM;}}if(C5&&!DK.fromCache&&DM.length){AB.safeCall("model.setPushDownFilterElmsCache",DE)(C7.k,Aw.copy(C4,{elms:[].concat(C7.elms)}));}if(DF&&!C5){DE.toggleDisplayAll(DD.showall);}var DL=DE.parent,DN=DL&&DL.parent;if(DD.sec&&C7.ces&&C7.elms&&C7.elms.length>0&&DL){DL.set("count",B0.buildElemsCountStr(C7.ces,C7.elms,DE.isSelectionExcluded()));}if(DE.isInvalid){DE.isInvalid=false;}if(DE.hasRendered){if(DG&&DG.onSuccess){DG.onSuccess();}else{DE.refresh();if(DF&&DL){B8.toggleClass(DL&&DL.domNode,"invalid",false);if(DN){DN.rebuildChild(DL);}}if(DE.isInFilterPanel()){if(DL&&DL.defn&&DL.defn.ttl){DL.updateContentHeight();}if(DN&&DN.refreshFP){DN.refreshFP();}}}}}},failure:function(DJ){if(C5){DE.set("wait",false);return ;}if(C2){DE.model.setDataReady(DE.k,DE.id,AR.DISABLED,true);var DK=DE.parent;DE.isInvalid=true;B8.toggleClass(DK&&DK.domNode,"invalid",true);if(DE.isInFilterPanel()){if(DK){DK.canCollapse=false;if(DK.titleBar){DK.titleBar.canCollapse=false;}DK.generateToolbar();}}else{if(DK.hasRendered&&DK.showInvalidMessage){DK.showInvalidMessage();}}return ;}mstrmojo.alert(DJ.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){if(C2){DE.node.data[AR.ELMSREQUEST]=false;DE.model.setDataReady(DE.k,DE.id,AR.ELMSREQUEST,false);if(!mstrApp.isSingleTier){mstrApp.hideWait();}}if(DG&&DG.onComplete){DG.onComplete();}}};this.set("wait",true);if(C5&&C7.k&&AB.safeCall("model.checkPushDownFilterElmsCacheValid",this)(C7.k,C4)){window.setTimeout(function(){DC.success({es:[].concat(DE.model.getPushDownFilterElmsCache(C7.k)),fromCache:true});DC.complete();},0);return ;}if(C2){C7[AR.ELMSREQUEST]=true;this.model.setDataReady(this.k,this.id,AR.ELMSREQUEST,true);}if(DD.isObjectParameter){E.getParameterDefinition(DD.paraid,DC,DD.parasid);}else{if((C5&&(DH||DI))||(mstrApp.isSingleTier&&C2)){mstrApp.serverRequest(DB,DC,{hideFailureErr:true});}else{if(DF||C3){mstrApp.showWait();}mstrmojo.xhr.request("POST",mstrConfig.taskURL,DC,DB,false,null,true);}}},AC={getWidgetClass:function Cm(C5,C4,C3){var C2=Cz[C4];if(C2&&C2.constructor===Array){C2=C2[C3?0:1];}return C2;},allowHTML:function Y(){return false;},getWidgetAriaLabelFn:function t(C4,C3,C2){return undefined;},dismissBoxSelections:function Bu(){if(typeof this.model.getMultiSelectUnits==="function"){this.model.getMultiSelectUnits().forEach(function(C3){var C2=mstrmojo.all[C3];if(C2){C2.toggleBoxSelection&&C2.toggleBoxSelection(false);}});}this.dismissBoxSelectionsBySelector();},dismissBoxSelectionsBySelector:function Ap(){const C2=document.querySelectorAll(".mstrmojo-UnitContainer.mstrmojo-VIBox.selected");C2.forEach(function(C4){const C3=C4&&C4.id;if(C3){const C5=mstrmojo.all[C3];C5&&C5.toggleBoxSelection&&C5.toggleBoxSelection(false);}});},getWidgetConfig:function Ac(DA,C5,C7,C2){var DB=C5===2?false:C7.horiz,C8=this,C9=DA.getFormats(),DD=C9&&C9.height,DC=this.getWidgetAriaLabelFn(DA,C5,DB),C4=this.model,C6={scriptClass:this.getWidgetClass(DA,C5,DB),docSelector:DA,enabled:this.enabled,multiSelect:C7.multi,isHoriz:DB,include:C7.include,itemWidthMode:C7.iwm,allIdx:CZ.find(C2,"v",mstrmojo.elementHelper.ELEM_ALL_ID),noneIdx:C7.include?-1:CZ.find(C2,"v",mstrmojo.elementHelper.ELEM_ALL_ID),renderAllItems:!DD,allowHTML:this.allowHTML(),isICS:!this.isInFilterPanel()&&!mstrApp.isExpress,onchange:function C3(){if(!DA._inSyncPhase){if(mstrApp.isAIMode){const DE=parseInt(DA.type,10);if(DE!==CI.PANEL){C8.dismissBoxSelections();}}DA.selectorControlChange(this);}}};if(C6.noneIdx!==-1){C6.allIdx=-1;}if(DC){C6.buildAriaLabel=DC;}if(C9&&C5===mstrmojo.DocSelector.STYLES.PULLDOWN){if(C9.color){C6.itemCssText="color: "+C9.color+";";}if(C9.font){C6.itemCssText=(C6.itemCssText||" ")+"font:"+C9.font;}if(mstrApp.isExpress){C6.cssTextClass+=" express";}}return C6;},expandOrEditToFetchElements:function Ct(){var C2=this.node&&this.node.data;if(C2&&C2[AR.DISABLED]){C2[AR.DISABLED]=false;}this.model.setDataReady(this.k,this.id,AR.disabled,false);this.checkAndFetchAllElemsForDelayed();},checkAndFetchAllElemsForDelayed:function As(C3){if(C3||A1.call(this)){var C2=this.isNewDerivedRecursiveElementSelector();if((this.isDynamicAttributeSelector()&&this.getBrowseFlags)||C2){this.raParams={otp:this.node.defn.srct||12,browseFlags:C2?16:this.getBrowseFlags()};}R.call(this);}},fetchElementsForPushDownFilter:function C1(){if(window.mstrApp&&window.mstrApp.isExporting){return ;}var C6=this,C3=AB.safeCall("mstrApp.isAppStatePause",window)()||mstrConfig.resolveOnly,C8=AB.safeCall("isElementListParameter",C6)(),C2=C6.isSearchBox(),C5=C6.isAttrQualSelector(),C4=C6.isMetricQualSelector(),C7=C6.content;if(!C3&&C8&&!C2&&!C5&&!C4){AB.safeCall("set",C7)("visible",false);R.call(this,undefined,{onSuccess:function(){C6.update(C6.node);C6.refresh();},onComplete:function(){AB.safeCall("set",C7)("visible",true);AB.safeCall("content.refresh",C6)();}},undefined,true);}},getPushDownFilterElementsBrowseParams:function BG(C6,C8){var C5=Aw.walk("model.datasets."+C6+".cubeId",this),C4=Aw.walk("model.datasets."+C6+".cubeInstId",this),C2=Aw.walk("model.effectiveTimezone.did",this),C3=mstrmojo.EnumDSSGetElementsResultFlags.TerseElementID|mstrmojo.EnumDSSGetElementsResultFlags.GetElementsFromCubeInDoc,C7={};if(C2){C7.timezoneId=C2;}if(q.isLibraryConsumption()){C7.forPushDownFilter=true;if(C5){C7.cubeId=C5;C7.cubeInstId=C4;C7.browseFlags=C3;}}else{if(C5){C7.dataSourcesXML='<dsrcs><dsrc cube_defn_id="'+C5+'" cube_id="'+C4+'" /></dsrcs>';C7.browseFlags=C3;}}if(C8){C7.blockBegin=1;C7.blockCount=-1;}return C7;},newSelectorWidget:function d(DG){var DA=DG.style,C5=DG.node,DC=C5.defn,C8=C5.data,C2=C8.elms||[],C9=DG.isInFilterPanel(),C3,DB=this.getWidgetConfig(DG,DA,DC,C2),C7=DB.scriptClass,DE=this;itemChangeFun=function(DJ){var DH=this.getPopupList(),DI=this.items;if(DH.items.length!==DI.length){this.selectedIndex=CZ.find(DI,"v",DJ.v);this.updateSelectedIndex=true;}if(DJ){this.set("text",DJ.n||mstrmojo.desc(14561,"(null)"));}else{this.set("text",DE.originLabel||DE.originValue||"");}};if(!C7){C3=new mstrmojo.Label({cssClass:"unsupported",text:"This selector is not supported."});}else{if(DA===CX){if(mstrApp&&mstrApp.isVI){DB.useDarkTheme=!C9&&mstrApp.getRootController().isDarkThemeSelected();DB.scrollNodeMaxHeight=Ag;DB.renderOnScroll=true;DB.renderBlockSize=100;DB.getPulldownConfig=function(DJ,DL,DN){var DI=DL.y,DM=DJ-DI,DK,DH;if(DI>DM){DK=DI;DH=Bt;}else{DK=DM;DH=DI+Bt;}DK=DK-Bt-(DN?A2:A7);return{maxHeight:DK>Ag?Ag:DK,position:DH-A7};};DB.focusOnPopup=true;DB.allowCustomText=true;DB.allowEmptyText=true;DB.onitemSelected=DB.onitemSelected?mstrmojo.func.composite([itemChangeFun,DB.onitemSelected]):itemChangeFun;DB.customizeSearchResult=function(DJ){var DM,DK=this.allIdx,DI=this.multiSelect,DH=DJ.length,DL={v:Af,n:mstrmojo.desc(13976,"(All search results)"),t:Ba.Dimension,_renderIdx:DK};if(DH!==this.items.length){if(DK>=0){DM=CZ.find(DJ,"v",Af);if(DM>-1){if(DI&&DH>1){DJ.splice(DM,1,DL);}else{DJ.splice(DM,1);}}else{if(DI&&DH>0){DJ.splice(DK,0,DL);}}}}};DB.setDefaultListAndIndex=function(DK){var DH=this.getPopupList(),DI=DE.originLabel||DE.originValue||mstrmojo.desc(14561,"(null)"),DJ;DH.set("items",DK);if(!this.multiSelect){DH.set("selectedIndex",this.selectedIndex);DJ=DK[this.selectedIndex];this.set("text",DJ&&DJ.n||DI);}else{this.set("selectedIndices",this.selectedIndices);}};DB.onclearSelection=function(){var DI=this.getSelectedItem(),DH=this.getPopupList();if(DI){DH.set("selectedIndex",CZ.find(DH.items,"v",DI.v));}};}else{if(mstrApp&&mstrApp.isExpress){DB.scrollNodeMaxHeight=Ag;}}}else{if(DA===B1&&AB.safeCall("isDIC",DG)()){var DD=AB.safeCall("txnFormat",DG)()||{},DF=DD.values||{},C4=function(DH){DG.handleUserInput(DH);};DB.offLabel=DF.offLabel;DB.onLabel=DF.onLabel;DB.offValue=DF.offValue;DB.onValue=DF.onValue;DB.showStatusLabels=DD.showStatusLabels;DB.onValueChange=C4;DB.checked=DG.originValue===DB.onValue;DB.unchecked=DG.originValue===DB.offValue;}}delete DB.scriptClass;var C6=Aw.walk(C7,mstrmojo);C3=new C6(DB);}return C3;},getCekEvtListener:function Cc(C3,C2){return function(C4){var C7=[],C5=this.node.data.elms,C6={};CZ.forEach(C5,function(C9,C8){C6[C9.v]=C8;});CZ.forEach(C4.value,function(C9){var C8=C6[C9];if(C8>-1){C7.push(C8);}});this.handleActionInSyncPhase(function(){if(C2&&C2.select){C2.select(C7);}});};},newAndInitWidget:function N(C6){var C8,C4=C6._cekEvtListener,C3=C6.node,C2=C3.defn,C5=C6.id,C7;if(C4){C2.detachEventListener(C4);delete C6._cekEvtListener;}C8=this.newSelectorWidget(C6);if(C8){C7=this.getCekEvtListener(C6,C8);}C5=C7.cekContextId||C5;C7=C7.cekEvtListener||C7;if(C7){C6._cekEvtListener=C2.attachEventListener("cekChange",C5,C7);}C6.addChildren(C8);if(this.isRecursiveAttributeSelector()){C6.addChildren({scriptClass:"mstrmojo.Box",cssClass:BJ,alias:"ctrlOverlay",slot:"containerNode",visible:false,markupString:Bd,});}return C8;},updateWidget:function CR(C3){var C2=C3.children,C4=C2&&C2[0];if(!C4){C4=this.newAndInitWidget(C3);}else{C4.set("enabled",this.enabled);}return C4;}};function BQ(C2){return C2.some(function(C3){return this.style===C3;},this);}function I(){var C2=this;return C2.model.getDatasetUnits(["mx"],function(C3){return C3.did===C2.defn.srcid;})[0]||{};}function Bb(C2,C6,C7,C9,DC,C5,C3){if(!C2){return[];}var DB=0,C8,DA=C2.length-(C5?1:0)-(C6?1:0),C4=[];if(C3){if(C7&&C6){DB++;}else{if(C9){DB=(C2.length-1);if(C5){DB--;}}}for(C8=0;C8<DC;C8++){if(C7){if(DB<=DA&&C2[DB]){C4.push(C2[DB++]);}}else{if(C9){if(DB>=(C6?1:0)){C4.push(C2[DB--]);}}}}}else{if(C7){DB=DC;if(C5){DB--;}}else{if(C9){DB=0;if(C6){DB++;}}}for(C8=DC+1;C8<=DA;C8++){if(DB<=DA){C4.push(C2[DB++]);}}}return C4;}function A0(C2,C5,DA){C2=CZ.filter(C2,function(DB){return DB.v!==Af;});var C8=C5===BA.FIRST,C4=C2.length,C3=C8?0:Math.max(C4-DA,0),C7=C8?Math.min(DA,C4):C4,C9=[],C6=[];C2=C2.splice(C3,C7);CZ.forEach(C2,function(DB){C9.push(DB.v);C6.push({n:DB.n,t:DB.t,v:DB.v});});return{ces:C6,cek:C9};}function B4(C2){if(CZ.find(C2.ces,"v",Af)>-1){C2.ces=[];return ;}C2.ces=CZ.difference(C2.elms,C2.ces,function(C4,C3){return C4.v===C3.v;});C2.ces=CZ.filter(C2.ces,function(C3){return C3.v!==Af;});}function AU(C2){return{v:Af,n:(C2||mstrmojo.desc(4928,"(All)")),t:Ca};}function A9(C4,C7,C8){var C6=C4.elms||[];C4.ces=[];if(C8){for(var C5=0;C5<C7.length;C5++){var C9=C7[C5];if(C9!==Af){var C2=C9.lastIndexOf(";");if(C2>0){C7[C5]=C9.slice(0,C2);}}}}for(var C5=0;C5<C6.length;C5++){for(var C3=0;C3<C7.length;C3++){if(C6[C5].v===C7[C3]){C4.ces.push(Aw.clone(C6[C5]));break;}}}}function BW(C3,C6,C7){var C5=[];for(var C4=0;C4<C6.length;C4++){var C8=C6[C4];if(C8===Af){C5.push(AU(C7));}else{if(C8!==""){var C2=C8.lastIndexOf(";");C5.push({n:C8.slice(C2+1),v:C8.slice(0,C2),t:1});}}}C3.ces=C5;C3.elms=C5.concat();}function Bh(C7,C2){var C4={},C6={},C3=[];function C5(DA){if(C6[DA]){return false;}if(C4[DA]){return true;}var DC=C2[DA]||{};if(!DC){return true;}C6[DA]=true;var DD=(DC.node||{}).defn||{};var DE=(DD.tks||"").split(X);for(var DB=0;DB<DE.length;DB++){var C9=DE[DB];if(C2[C9]){var C8=C5(DE[DB]);if(!C8){return false;}}}delete C6[DA];C4[DA]=true;C3.push(DA);return true;}if(!C5(C7)){return[];}C3.pop();return C3.reverse();}function AV(C4,C3){var C2=Object.keys(C3),C6=[],C5;CZ.forEach(C2,function(C7){C6=C3[C7].att;CZ.forEach(C6,function(C8){if(C8&&C8.did===C4){C5=C7;return false;}});if(!!C5){return false;}});return C5;}function F(C6,C3,DC,C4,DF,C7){var DD={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:C6.srcid||"",dataSourcesXML:C6.dsrc||"",datasetID:C6.dsid||AV(C6.srcid,C7),messageID:DF||"",browseFlags:1,ctlKey:C3.k};var DB={filters:[]};var DG=false;for(var C2 in DC){var C5=C4[C2].node,C9=C5.data.ces,DE=C5.defn,C8={objId:DE.srcid,include:DE.include,elemList:[]};for(var DA=0;DA<C9.length;DA++){C8.elemList.push(C9[DA].v);}if(C8.elemList.length===0&&C8.include&&DE.style!==Bk){DG=true;}DB.filters.push(C8);}DD.filterJson=JSON.stringify(DB);return{taskParams:DD,hasEmptySource:DG};}function AP(C9,C4,C2,DA,C7,DB){var C6=C9.node.defn,C3=C9.node.data,C8=(C4[C3.k]||{}).srcMap||{},C5=F(C6,C3,C8,C4,DA,C7);var DC={success:function(DF){var DG=DF.es||[],DH=C6.sus||0;if(DH===BA.FIRST||DH===BA.LAST){var DE=C6.suc||0;C3.ces=DH===BA.FIRST?DG.slice(0,DE):DG.slice(-DE);}else{C3.ces=DG;}for(var DD=0;DD<C3.ces.length;DD++){if(!C3.ces[DD].t){C3.ces[DD].t=1;}}DB(C9,C2,C4,false,DA,C7);return ;}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,DC,C5.taskParams,false,null,true);}function Bq(C9){var C7=C9.node.defn,C3=C9.node.data,C6=C3.elms||[],DB=false;for(var C8=0;C8<C6.length;C8++){if(C6[C8].t===Ca&&C6[C8].v===Af){DB=true;break;}}if(!C3.unset){var C4=[];CZ.forEach(C3.ces||[],function(DD){if(CZ.find(C6,"v",DD.v)>=0){C4.push(DD);}});C3.ces=C4;}else{if(C7.sus===BA.FIRST||C7.sus===BA.LAST){var DC=C7.suc||0,C2=DB?C6.slice(1):C6;C3.ces=C7.sus===BA.FIRST?C2.slice(0,DC):C2.slice(-DC);}else{if(C7.scs===CT){var DA=C7.backup||{},C5=DA.elms||[];C3.ces=Aw.clone(C5.length>0?C5:(C6.length>0?[C6[0]]:[]));}else{if(C7.style===Bk||AB.safeCall("isObjectParameter",C9)()){C3.ces=[];}else{C3.ces=[AU(C7.allAlias)];}}}}}function y(C2,C3,C4){C2.shouldSkipInit=true;C2.update(C3);if(C4){C2.refresh();}C2.shouldSkipInit=false;}function K(C2,C5){var C4=C2.children||[];for(var C3=0;C3<C4.length;C3++){if(C4[C3].scriptClass==="mstrmojo.vi.ui.rw.ButtonBox"){C4[C3].updateEnableStatus(C5);}}}function CG(C2,C5){var C4=C2.children||[];for(var C3=0;C3<C4.length;C3++){if(C4[C3].scriptClass==="mstrmojo.vi.ui.rw.ActionSelectorBox"){C4[C3].updateEnableStatus(C5);}}}function Cf(DC,DD,C3,DE,C8,C9){if(DC>=DD.length){K(C9);return ;}var DA=C3[DD[DC]]||{},C7=DA.selector||{},DB=DA.srcMap||{},C4=DA.node||{},C6=C4.defn||{},C2=C4.data||{};if(!C6.srcid){return ;}var C5=F(C6,C2,DB,C3,DE,C8),DG=C5.hasEmptySource;var DF={success:function(DJ){var DH=DG?[]:(DJ.es||[]);for(var DI=0;DI<DH.length;DI++){if(!DH[DI].t){DH[DI].t=1;}}if(C6.showall&&CZ.find(DH,"v",Af)<0){DH.unshift(AU(C6.allAlias));}C2.elms=DH;Bq(DA);y(C7,C4,true);Cf(DC+1,DD,C3,DE,C8,C9);}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,DF,C5.taskParams,false,null,true);}function BK(C3){var C2={};function C4(DA,C7){if(!C7){C7={};}if(C7[DA]){return{};}C7[DA]=true;if(C2[DA]){C7[DA]=false;return C2[DA];}if(!C3[DA]||!C3[DA].srcMap){C2[DA]={};C7[DA]=false;return C2[DA];}var C9={};for(var DB in C3[DA].srcMap){C9[DB]=true;}for(var DB in C3[DA].srcMap){var C6=C4(DB,C7);for(var C8 in C6){C9[C8]=true;}}C2[DA]=C9;C7[DA]=false;return C9;}for(var C5 in C3){C3[C5].srcMap=C4(C5,{});}}function h(DC){var C6={};var C8={};for(var DA=0;DA<DC.length;DA++){C8[DC[DA].k]=true;}for(var DA=0;DA<DC.length;DA++){var C3=DC[DA].boxContent||{},C4=C3.node||{},C7=C4.k,C5=C4.defn||{},DB=(C5.tks||"").split(X);controlType=C5.ct;if(controlType==="1"||controlType==="8"){if(!C6[C7]){C6[C7]={srcMap:{}};}C6[C7].node=C4;C6[C7].selector=C3;for(var C9=0;C9<DB.length;C9++){if(C8[DB[C9]]){var C2=DB[C9];if(!C6[C2]){C6[C2]={srcMap:{}};}C6[C2].srcMap[C7]=true;}}}}BK(C6);return C6;}function B5(C9,C8,C2,C3,C4,C7){y(C9,C9.node,C3||C9.isResetting||!C8.hasOwnProperty("eid"));var C5=Bh(C9.k,C2),C6=C9.getPanelContainer();K(C6,C5.length>0);if(C5.length>0){Cf(0,C5,C2,C4,C7,C6);}}function Cq(C7,DC,DG,DH,DO,C9){var DK=h(C7),C6=DC.node.defn,C2=DC.node.data,DL=C6.style,C4=DL===Bk;if(AB.safeCall("isValueParameter",DC)()){if(DC.isResetting){if(C6.backup){Object.assign(C2.cs,C6.backup.cs);}else{Object.assign(C2.cs,DC.initNodeObj.data.cs);}if(C2.cs&&C2.cs.length>0){var DM=DG._bufferedSlices||{};DM[DC.k].newValue=C2.cs[0].v;}}else{if(DH.newValue||(DH.unset&&C2.value)){var DB=DH.newValue||C2.value;var DA=C2.dt,DD=[{v:DB,dtp:DA}];if(AB.safeCall("isFixedListParameter",DC)()){C2.ces=DD.concat();}C2.cs=DD;}else{var DJ=DC.content||{};C2.cs=DJ.cs;}}}else{if(DL===Cw||DL===n||DL===a){if(DH.unset&&DL===a){delete C2.f;delete C2.ft;delete C2.cs;}else{var DJ=DC.content||{};var C3=DJ.cs||[];if(C3.length>0){C2.f=DJ.f;C2.ft=DJ.ft;}if(DL===n){for(var DI=0;DI<C3.length;DI++){var C5=(C3[DI].v||"").split("::");if(C5.length>=9&&C5[0]==="isDyn"){C2.cs[DI]={isDyn:true,dtp:C2.cs[0].dtp,dyt:C5[1],ddo:C5[2],dmo:C5[3],dm:C5[4],dd:C5[5],dw:C5[6],dow:C5[7],v:C5[8]};}else{if(!C2.cs){C2.cs=[];}C2.cs[DI]=C3[DI];}}}else{if(C3.length>0){for(var DI=0;DI<C3.length;DI++){var DF=C3[DI].v;if(typeof DF==="string"&&DF.endsWith("%")){C3[DI].v=parseFloat(DF.replace("%",""))/100;}C2.cs[DI]=C3[DI];}}else{C2.cs=DJ.cs;}}}}else{if(DH.dynamicSelection||DH.unset){if(DH.unset){C2.unset=true;}if(C4&&DH.dynamicSelection){AP(DC,DK,DH,DO,C9,B5);}else{Bq(DC);}}else{if(DH.hasOwnProperty("eid")){delete C2.unset;var DE=(DH.eid||"").split(X);if(C4){BW(C2,DE,C6.allAlias);}else{A9(C2,DE,C6.ct!=="8");}}}}}var DN=false;if(C2.elms&&!AB.safeCall("isObjectParameter",DC)()){var C8=CZ.find(C2.elms,"v",Af);if(C6.showall&&C8<0){C2.elms.unshift(AU(C6.allAlias));DN=true;if(C2.unset&&C2.ces.length===0){C2.ces=[AU(C6.allAlias)];}}else{if(!C6.showall&&C8>=0){C2.elms.splice(C8,1);DN=true;}}}B5(DC,DH,DK,DN,DO,C9);}function Ay(C2,C7){var C6=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation();if(!C2.shouldSkipInit&&(mstrApp.isDossier||C6)){var C3=C2.getPanelContainer&&C2.getPanelContainer()||{},C5=C3.parent||{};if(C5.isSelectorPanel){var C4=C7||C2.node;C2.initNodeObj={defn:Aw.clone(C4.defn),data:Aw.clone(C4.data)};C5.clearSingleBuffSlice(C2.k);K(C3);}}}mstrmojo.DocSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,AC,mstrmojo.vi._MonitorsAppState,mstrmojo.vi.ui.rw._SupportTabNav],{scriptClass:"mstrmojo.DocSelector",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSelector {@cssClass} {@extCls}" nm="{@en@n}" title="{@tooltip}" style="{@domNodeCssText}"  mstrAttach:keydown><div class="filter" style="{@filterNodeCssText}"></div><div class="wait" style="display:none;z-index:100;position:absolute;top:0;left:0;width:100%;height:100%"></div><div class="filterWarning" style="display:none;position:absolute;border:solid 1px #F15354;margin:-4px;"></div><div class="content" style="{@contentNodeCssText}"></div></div>',markupSlots:{filterNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode.lastChild;},wIconNode:function(){return this.domNode.childNodes[1];},filterWarningNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:AB.composite([function(){var C2=Aw.walk("parent.parent",this),C3=this.children,C4=C3&&C3[0];if(C4&&C4.updateScrollbars&&this.visible){setTimeout(function(){AB.safeCall("revertScale",C2)();C4.updateScrollbars();AB.safeCall("applyScale",C2)();},25);}},mstrmojo.Widget.visibleMarkupMethod]),onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenableChange:mstrmojo.Widget.enabledMarkupMethod,onincludeChange:function(){B8.toggleClass(this.domNode,"strikeout",!this.include);},onwaitChange:function(){B8.toggleClass(this.domNode,"wait",!!this.wait);this.wIconNode.style.display=((this.wait)?"block":"none");}},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"],filterWarningNode:["width","height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"],filterWarningNode:["width","height"]},ckey:null,ck:null,tks:null,style:0,selIdx:null,extCls:"",min:-1,max:-1,bGetElems:false,n:"",_inSyncPhase:false,ctrlOverlay:null,executable:true,nonExecutableErrMsg:"",toggleDisplayAll:function Ck(C2){var C6=this.node,C7=C6.data,C5=C6.defn,C4=CZ.filterOne(C7.elms,function(C8){return C8.t===Ca;});if(C2&&!C4){C4=Ch;C7.elms=CZ.insert(C7.elms,0,[C4]);}if(!C2&&C4){C7.elms=CZ.filter(C7.elms,function(C8){return C8.t!==Ca;});}if(this.children&&this.children[0]){var C3=CZ.find(C7.elms,"v",mstrmojo.elementHelper.ELEM_ALL_ID);this.children[0].items=C7.elms;this.children[0].allIdx=C3;this.children[0].noneIdx=C5.include?-1:C3;}C7[AR.ELMSREADY]=true;this.model.setDataReady(this.k,this.id,AR.ELMSREADY,true,"elms",C7.elms);},updateExecutable:function CD(C5,C7,C3){var C8=true,C6="",C2=mstrmojo.desc(28180,"This filter is not executable."),C4=AB.safeCall("mstrApp.isAppStatePause",window)()||Aw.walk("mstrConfig.resolveOnly",window);if(!C5||!C7){return ;}if(C5.style===G){this.executable=true;this.nonExecutableErrMsg="";return ;}if(C5.executable===false||C7.pfec===CN.SEC_E_SELECTOR_EXECUTION_ACCESS||C7.pfec===CN.SEC_E_VIZ_EXECUTION_ACCESS){C8=false;C6=Aw.walk("em",C7)||Aw.walk("eg",C7)||C2;}if(C8){if(C4){C8=AB.safeCall("checkSelectorExecutableInPauseMode",C3)(C5);if(!C8){C6=C2;}}}this.executable=C8;this.nonExecutableErrMsg=C6;},init:function Cs(C4){this._super(C4);if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}var C3=C4.node.defn,C5=C4.node.data,C2=C3.style;this.updateExecutable(C3,C5,C4.model);if(C5.iin!==undefined&&C5.iin!==C3.include){B4(C5);}this.n=C3.n;this.showBFAMenu=Aw.walk("model.prefs.pdfbfa",C4);if(mstrApp.showSelectAllMenuOptionForSelector===1&&C3.multi){switch(C2){case D:case B1:case BM:case Av:this.spm=true;break;}}},_fetchOnInit4UCOnDS:function J(C4){var C2=!this.bGetElems&&parseInt(this.node.defn.subTp,10)===CO,C3=this.node.data;if(C2||A1.call(this)){R.call(this,C2);C4=C3.elms;}return C4;},initControlInfo:function Ai(){var DH=this.node,DM=DH.data,C4=DH.defn,DF=DM.elms,DL=DM.ces;var C9=["include","ckey","ck","tks","style","multi","iase","showall"];DF=this._fetchOnInit4UCOnDS(DF,DM);this.type=C4.ct;var DE=C4.fmts;if(DE){var DC=DE.width;if(!DC||parseInt(DC,10)<=0){DE.width="95px";}}Aw.copyProps(C9,C4,this);var C8=this.selIdx={},C6=false,DG=C4.multi;if((C4.style===Q)||DG){if(!this.oces&&(DL!==undefined)){this.oces=Aw.cloneArray(DL);C6=true;}var C3=C4.showall,DK=(CZ.find(DL,"v",mstrmojo.elementHelper.ELEM_ALL_ID)>-1),DJ=(parseInt(C4.dfm,10)===1),C5=(DM.unset===true),DI=(!DJ&&C5&&(DL&&DL.length===0)),C2=(C3&&DK)||(DK&&!DJ&&C5)||(C3&&DJ&&C5&&DL&&DL.length===0);if(C2){DL=DF;}else{if(DI){if(!C6&&(C4.sus!==1)){var DD=C4.htot,DA=(C4.sus===2),DB=(C4.sus===4),DN=C4.suc||1;DL=Bb(DF,C3,DA,DB,DN,DD,this.include);}else{if(this.oces){DL=this.oces;}}}}}if(DL){var C7={};CZ.forEach(DL,function(DO){C7[AM(DO.v)]=true;});CZ.forEach(DF,function(DP,DO){if(C7[AM(DP.v)]){C8[DO]=true;}});}if(C4.min>=0){this.min=C4.min;}if(C4.max>=0){this.max=C4.max;}if(this.isRecursiveAttributeSelector()){this.levelForms=DM.lvfs||[];}},resetFormatHandlers:function P(){this.formatHandlers={contentNode:["RW"]};},_getSelectionCount:function B6(C2){return Aw.keyarray(C2.selectedIndices).length;},getDynamicSelectionItemsString:function B9(){var C6=this.defn,C3=C6.sus,C7=C6.suc,C5=C6.include,C2=C5?mstrmojo.desc(17758,"First ##"):mstrmojo.desc(18429,"Not First ##"),C8=C5?mstrmojo.desc(17760,"Last ##"):mstrmojo.desc(18430,"Not Last ##"),C4=(C3===BA.FIRST?C2:C8).replace("##",C7);return C4;},canApply:function CW(C6){var C5=this.defn,C7=C5.multi,C4=this.min,C2=C7?this.max:1,C3=this._getSelectionCount(C6||this.content);return(C4>=0&&C2>=0&&C4>C2)||((C4<0||C4<=C3)&&(C2<0||C2>=C3));},_buildEvent:mstrmojo.emptyFn,syncSelectorsInConsumptionMode:mstrmojo.emptyFn,buildPromptAnswerInfo:mstrmojo.emptyFn,selectorControlChange:function Ab(C8){var DE=this.node,C2=DE.data,C7=DE.defn,C3=this.hasDynamicSelection(true),DA=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),C9=this.isEmptyMandatory();if(DA&&C2[AR.DISABLED]&&C3&&!C2[AR.ELMSREQUEST]){R.call(this,undefined,{onSuccess:function(){this.configDynamicSelection(C7.sus,C7.suc,{skipBufferSlice:true});this.selectorControlChange(C8);}.bind(this)});return ;}if(this.isScopeFilter()){var C4=this.validateInput();this.syncValidationResult(C4);if(!C4.valid){return ;}}else{AB.safeCall("parent.selectionRequiredWarningIcon.set",this)("visible",C9);}C7.set("itemsLength",Aw.walk("content.items.length",this));var DJ=e.call(this),DG=this.isInFilterPanel()&&this.getFilterPanel(),C5=(DG&&DG.isAutoApply()),DK=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),DH=C7.style,DC=this.getPanelContainer();this._buildEvent(DJ,C8);Cr.selectorInitManipInfo(C8);if(!this.canApply(C8)){if(this.isInSearchBoxPanel(DC)){DC.set("canApplySbp",false);}if(C5){this.set("err",true);mstrmojo.alert(mstrmojo.desc(12297,"One or more selectors are incorrectly set. Please review the selector(s) and try again."));}if(DG){DG.set("applyEnabled",false);}return ;}if(C5){this.set("err",false);}if(mstrApp.isExpress&&DH===CX){this.handleExpressPulldown();}if(C3){DJ.updateDSIcon=true;}this.updateSelectorWarning();if(DJ.requireToggle){this.deferredEvt=DJ;this.set("include",DJ.include);this.deferredEvt=undefined;}else{this.slice(DJ);}if(C2.unset===true){C2.unset=null;}if(C7.unset){C7.unset=null;}if(C3||(DK&&DH===Bk)){this.shouldSkipInit=true;this.refresh();this.shouldSkipInit=false;}var C6=this.model,DL=C6&&C6.controller,DB=DL&&DL.view,DD=this.k,DI=this.defn&&this.defn._lkz;CZ.forEach(DB&&DB.children,function(DQ){var DP=DQ.defn,DN=DP&&DP.loaded,DM=DP&&DP.units;if(DN&&DQ.k!==DI){for(var DO in DM){if(DO===DD){if(DM[DO].tsk!==""){DP.loaded=false;}break;}}}});var DF=DC&&DC.parent||{};if(!DF.isSelectorPanel){this.syncSelectorsInConsumptionMode();}this.pendoTrackParameterSelectorInteraction(this.node.defn);},pendoTrackParameterSelectorInteraction:function Cd(C2){if(AI.isPendoEnabled()&&this.parameterItem!==undefined){var C5=AI.resolveSelectorStyle(this.style);var C9={parameterID:this.parameterItem.did,selectorStyle:C5,parameterType:C2.isObjectParameter?U.PARAMETER_TYPE.OBJECT:U.PARAMETER_TYPE.ELEMENT_LIST};if(C2.isObjectParameter){C9.objectsSelected=this.parameterItem.targetType===CU.METRIC?U.OBJECT_SELECTED.METRICS:U.OBJECT_SELECTED.ATTRIBUTES;}else{var DA=U.DATA_TYPE.STRING,C4=C2.srcid,C3=A3.getUnitFromDataset(this.model.datasets,C4,12);if(C3){if(C2.fs){var C7=[];CZ.forEach(C2.fs,function(DC){var DB=DC.did;CZ.forEach(C3.fs,function(DD){if(DD.fid===DB){C7.push(AI.resolveFormDataType(DD.bftp));return false;}});});DA=C7.join(";");}else{var C8,C6;CZ.forEach(C3.fs,function(DB){if(DB.fnm==="DESC"){C6=AI.resolveFormDataType(DB.bftp);}if(DB.fnm==="ID"){C8=AI.resolveFormDataType(DB.bftp);}});if(C6||C8){DA=C6?C6:C8;}}}C9.dataType=DA;}window.pendo.track(U.EVENT_NAME.PARAMETER_SELECTOR_INTERACTION,C9);}},showInfoWin:function O(C7){var DA=this.node&&this.node.defn,C4=DA&&DA.ifw,C3=this.model,C5=[].concat(C3.getTargetInfoWin(C4)).concat(C3.getTargetInfoWin(this.tks));if(C5&&C5.length){var DC=this.defn.horiz,C2=C7||this.contentNode,C9=BS.position(C2),DB=BS.position(this.contentNode),C8=(DC||parseInt(this.defn.style,10)===Q)?null:{x:DB.x,y:C9.y,w:DB.w,h:C9.h},C6;for(C6=0;C6<C5.length;C6++){C3.showInfoWin(C5[C6],C2,DC?"v":"h",false,Aw.copy(C8));}}},unrender:function c(C2){delete this.formatHandlers;this._super(C2);},postBuildRendering:function A8(){if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}var C7=this.node.defn,C6=C7.style,C9=this.filterNode.style,C2=this.contentNode,C3=this.isEmptyMandatory();if(this.isInFilterPanel()&&!this.isHorizFP()){this.domNode.style.width=this.contentNode.style.width="100%";if(this.formatHandlers.filterNode){this.filterNode.style.width=this.contentNode.style.width="100%";}this.set("visible",parseInt(C7.ds,10)===Bx);}this.handleActionInSyncPhase(this._super,this);if(mstrApp.isExpress&&C6===CX){this.handleExpressPulldown();}if(this.isInFilterPanel()&&this.parent.adjustFP){this.parent.adjustFP();}if(this.formatHandlers.filterNode){var C8=this.getFormats();if(!C8.width){C9.width=C2.clientWidth+"px";}if(!C8.height){C9.height=C2.clientHeight+"px";}}else{C9.display="none";}this.model.attachEventListener("CGBMapChange",this.id,"onCGBMapChange");if(BS.isAndroid&&C6===Q){C2.style.overflow="visible";}B8.toggleClass(this.parent.domNode,"invalid",this.isInvalid);this.updateAriaLabel();this.updateSelectorWarning();if(!this.isScopeFilter()){AB.safeCall("parent.selectionRequiredWarningIcon.set",this)("visible",C3);AB.safeCall("parent.selectionRequiredIcon.set",this)("visible",this.isMandatory());}var C4=AB.safeCall("model.controller.isSnapshotView",this)();var C5=!!C7.dsTks;if(C4&&C5){this.domNode.style.pointerEvents="none";this.domNode.style.opacity=0.5;}Ay(this);return true;},getSelectedItemAria:function CP(){return"";},getStyleSpecificAria:function Aa(){return"";},updateAriaLabel:function CB(){if(this.isPanelSelector()){return ;}var C6=this.parent,C3=C6.domNode,C2=C3.getAttribute("aria-live"),C5;if(C6){if(C2!=="polite"){C3.setAttribute("aria-live","assertive");C3.setAttribute("aria-relevant","text");}C5=C6.title+", "+this.getSelectedItemAria();if(C5!==C6.ariaLabel){C6.set("ariaLabel",C5);}var C4=this.getStyleSpecificAria();if(C4!==C6.roleDesc){C6.set("roleDesc",C4);}}},updateHeight:function Co(){this.contentNode.style.height=this.filterNode.style.height=this.content.getClientHeight()+"px";var C2=this.parent;if(C2&&(C2.defn.ttl!==undefined)&&C2.updateContentHeight){C2.updateContentHeight();}},handleExpressPulldown:function Bm(){var C6=this.contentNode.firstChild.firstChild;if(this.defn.optStyle){C6.style.paddingTop="0";C6.style.paddingBottom="0";C6.style.overflowY="auto";C6.style.height="auto";C6.style.lineHeight="normal";var C8=C6.innerHTML;if(C8===""){C6.innerHTML="a";}var C7=parseInt(window.getComputedStyle(C6).height,10)||0;var C5=parseInt(window.getComputedStyle(this.contentNode).height,10)||0;if(C8===""){C6.innerHTML=C8;}C6.style.height=C6.style.lineHeight=(C7===0?C5:Math.min(C5,C7)+2)+"px";}else{var C4=this.model.getZoomFactor();if(C4!==1){var C7=parseInt(window.getComputedStyle(C6).height,10),C2=C7*C4+"px";C6.style.height=C2;C6.style.lineHeight=C2;}}var C3=document.createElement("DIV");C3.setAttribute("class","mstrmojo-ui-Pulldown-arrow");C3.setAttribute("src","#");this.content.selectedNode.appendChild(C3);},handleActionInSyncPhase:function Cx(C4,C3){var C2=this._inSyncPhase;this._inSyncPhase=true;try{if(C3){C4.call(C3);}else{C4();}}catch(C5){if(localStorage.getItem("debugMojo")==="1"){console.error(C5);}throw ("There was an error handling the selector action in sync phase.");}this._inSyncPhase=C2;},onCGBMapChange:function Cu(C3){var C2=C3.cgbMap;if(!C2){return ;}var C4=this.tks;Aw.forEach(this.defn.cgb,function(C6){var C5=C2[C6];if(C5&&C4.indexOf(C5)<0){C4+=X+C5;}});this.tks=C4;},onAppStateChange:function Ax(DF){var DB=mstrmojo.vi.VisualInsightApp.APP_STATES,DG=DB.PAUSE,DC=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),C8=this.model,C4=this.node,C6=C4&&C4.data,C9=C4.defn,C5=this.k,C2=this.id;var C3=DF.valueWas&DG,DD=DB.PRESENTATION,DE=DF.value&DD,DA=(DF.valueWas&DD),C7=mstrApp&&mstrApp.supportFeature(x.DYNAMIC_SEL_AND_SORT);if(C6){if(DC&&!C3){if(this.hasAttrData()){this.resetStatusForPause();}else{if(this.hasQualData()){C6[AR.METRICVALUES]=!mstrConfig.resolveOnly;C8.setDataReady(C5,C2,AR.METRICVALUES,!mstrConfig.resolveOnly);C6[AR.CSREADY]=true;if(this.isAttrQualSelector()&&this.children&&this.children.length){C8.setDataReady(C5,C2,AR.CSREADY,true,"cs",this.children[0].cs);}else{C8.setDataReady(C5,C2,AR.CSREADY,true);}}}}if(!DC&&C3){if(this.hasAttrData()){C6[AR.ELMSREADY]=C6[AR.CESREADY]=C6[AR.ELMSREQUEST]=C6[AR.DISABLED]=false;C8.setDataReady(C5,C2,AR.DISABLED,false);C8.setDataReady(C5,C2,AR.ELMSREADY,false);C8.setDataReady(C5,C2,AR.CESREADY,false);C8.setDataReady(C5,C2,AR.ELMSREQUEST,false);}else{if(this.hasQualData()){C6[AR.METRICVALUES]=C6[AR.CSREADY]=false;C8.setDataReady(C5,C2,AR.METRICVALUES,false);C8.setDataReady(C5,C2,AR.CSREADY,false);}}}if(C7){if(DE){if(this.hasDynamicSelection()){this._dynamicSelDefn={sus:C9.sus,suc:C9.suc};}}else{if(DA){delete this._dynamicSelDefn;}}}}},resetStatusForPause:function(){var C5=this.model,C6=this.node,C7=(C6||{}).data,C3=this.k,C9=this.id;if(C7){if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&this.isRecursiveAttributeSelector()){C7[AR.ELMSREADY]=false;C7[AR.CESREADY]=false;C7[AR.DISABLED]=true;C5.setDataReady(C3,C9,AR.ELMSREADY,false);C5.setDataReady(C3,C9,AR.CESREADY,false);C5.setDataReady(C3,C9,AR.DISABLED,true);delete C7.p_relation;C7.expandedInfoMap={};CZ.forEach(C7.elms||[],function(DA){if(DA.epd){C7.expandedInfoMap[DA.v]=true;}});}else{var C2=(CZ.indexOf(C5.updateCSKeysforPause,this.ckey)===-1)&&C7.elms&&(C7.elms.length>0),C4=this.style===Bk,C8=C2&&!C4;C7[AR.ELMSREADY]=C8;C7[AR.CESREADY]=C2;C7[AR.DISABLED]=!C2&&!C4;C5.setDataReady(C3,C9,AR.ELMSREADY,C8);C5.setDataReady(C3,C9,AR.CESREADY,C2);C5.setDataReady(C3,C9,AR.DISABLED,!C2&&!C4);if(!C8&&this.shouldDisableGdde()){this.isInvalid=true;}}}},collapseSelectorInPause:function(){if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&this.isRecursiveAttributeSelector()){this.resetStatusForPause();var C3=this.parent;if(C3){C3.isCollapsed=true;C3.set("isCollapsed",true);var C2=C3.titleBar;if(C2){C2.set("isCollapsed",true);}}}},update:function w(DL){if(this.model.shouldUpdateICSInPause&&this.content.isICS){this.collapseSelectorInPause();}this._super(DL);var DE=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,C2=this.node&&this.node.data,C7=DL.defn,C8=this.model,C3=this.hasDynamicSelection(true);if(C7.scs===CT&&!DE){this.toggleDisplayAll(false);}if(C2){if(C2.em&&C2.pfec===CN.XJOIN_ERROR){mstrmojo.error({shortDesc:C2.em.replace("%1","")});}else{if(DE&&!this.shouldSkipInit){if(!DL.data){DL.data={};}var DM=DL.data,DQ=C2.ces||[],C5=DQ.length,DB=C2[AR.ELMSREADY];if(C3&&DB&&(C5===0||C5!==C7.suc)){C2.ces=A0(C2.elms,C7.sus,C7.suc).ces;C2[AR.CESREADY]=true;}if(C2[AR.CESREADY]){DM.ces=C2.ces;DM[AR.CESREADY]=C2[AR.CESREADY];}else{if(!this.hasQualData()){DM.ces=DL.defn&&DL.defn.ces;DM[AR.CESREADY]=true;C8.setDataReady(this.k,this.id,AR.CESREADY,true,"ces",DM.ces);}}if(DB){DM[AR.ELMSREADY]=DB;DM.elms=C2.elms;}if(C2[AR.DISABLED]){DM[AR.DISABLED]=C2[AR.DISABLED];}if(C2[AR.METRICVALUES]){DM[AR.METRICVALUES]=C2[AR.METRICVALUES];Cb.restoreMetricSelectorProps(DM,C2);}if(C2[AR.CSREADY]){DM[AR.CSREADY]=C2[AR.CSREADY];Cb.restoreMetricSelectorSelections(DM,C2);}}}}this.node=DL;var DV=this.node.data,DP=C7.style,DI=DV.elms,DG=this.parent,DJ=(DP===Q),C6=(DP===Bk),DK=this.isDynamicAttributeSelector();if(DE){if(DV&&C7){if(this.hasAttrData()||C7.isObjectParameter){C8.setDataReady(this.k,this.id,AR.CESREADY,true);if(C6){DV.elms=DV.ces;DV[AR.ELMSREADY]=false;DV[AR.DISABLED]=(C3&&!DB)?true:false;C8.setDataReady(this.k,this.id,AR.ELMSREADY,DV[AR.ELMSREADY]);C8.setDataReady(this.k,this.id,AR.DISABLED,DV[AR.DISABLED]);}else{C8.setDataReady(this.k,this.id,AR.DISABLED,!C2[AR.ELMSREADY]);}if(!DV[AR.ELMSREADY]&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){C8.setDataReady(this.k,this.id,AR.CSREADY,true);}}}}this.checkAndParseHTMLTags(DI);if(DJ&&C7.multi){var DF=CZ.find(DI,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(DF>-1){DV.del={idx:DF,elem:DI[DF]};CZ.removeIndices(DI,DF,1);}}var DO=[].concat(DL.data.ces||[]),DT=this.defn.cek,DW=C7.include,DA=this.isUnset(),DN=this.getFilterPanel(),DS=DN&&!DN.isAutoApply(),DH=this.lockSelection&&DS&&!DE;if(C7.sec&&!DH){if(DG&&(DG.count!==null&&DG.count!==undefined)){if((DJ&&!C3)||DK){DG.set("count","");}else{if((DO&&DI&&DI.length)||C7.sos){if(!DW){var DU=CZ.find(DO,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(DU>=0){CZ.removeIndices(DO,DU,1);}}var DC={};CZ.forEach(DI,function(DX){DC[DX.v]=true;});DO=CZ.filter(DO,function(DX){return DC[DX.v];});var C4=DO,DD;if(!C6){if(!C7.multi){C4=DI;}DD=DI;}if(DA){if(C3){DG.set("count",this.getDynamicSelectionItemsString());}else{DG.set("count",B0.buildElemsCountStr(DD,DD));}}else{DG.set("count",B0.buildElemsCountStr(C4,DD,this.isSelectionExcluded()));}}}}}if(this.content){this.content.allIdx=CZ.find(this.node.data.elms,"v",CA);}this.initControlInfo();var C9=this.content=this.updateWidget(this);if(C6&&mstrApp&&mstrApp.isVI&&!C8.findDatasetIdFromUnit(C9.srcid)&&!AB.safeCall("isUsedInPushDownFilter",this)()){C9.srcid=null;C9.richTooltip=null;}if(!C9){this.set("visible",false);}else{if(DH){if(!DK){var DR=this._prevSelection;if(DR){if(DR.unset){this.clearSelector(!DS);}else{this.configDynamicSelection(DR.sus,DR.suc);}delete this._prevSelection;}else{if(DT){this.updateSelectionsByStyle(DT);}}}this.lockSelection=false;}}this.toggleControlOverlay(DV);this.clearCache();if(parseInt(Aw.walk("defn.t",DG),10)===CM.SELECTOR){DG.defn=this.node.defn;}this.node.defn.set("itemsLength",Aw.walk("content.items.length",this));this.defn=this.node.defn;Ay(this,DL);},updateSelectionsByStyle:function B(C4){var C7=mstrmojo.DocSelector.STYLES,C6=this.content,C2=this.style,C5=this.node.data.elms,C8={};if(C2===C7.SEARCH_BOX){C6.set("items",C4);}else{CZ.forEach(C4,function(DA){var C9=CZ.find(C5,"v",DA.v||DA);if(C9>-1){C8[C9]=true;}});if(C2===C7.PULLDOWN||C2===C7.SCROLLER){if(C4.length===1&&!C4[0].v&&C4[0]===CA){C6.selectedIndex=-1;}else{var C3=Object.keys(C8);C6.selectedIndex=C3.length===1?C3[0]:-1;}C6.selectedIndices=Aw.clone(C8);C6.onchange();}else{C6.set("selectedIndices",C8);}}},checkAndParseHTMLTags:function m(C6){var C4=this.defn,C7=C4.srcid,C3=this.model;if(C4.srct===g&&C7&&C3.getBrowseFormTypes&&C3.getBrowseFormTypes(C7).indexOf(Bn)>-1){var C2=document.implementation.createHTMLDocument("New"),C8=C2.body,C5;CZ.forEach(C6,function(C9){C8.innerHTML=C9.n;C5=C8.firstChild;C9.n=C5&&(C5.text||C5.alt)||C9.n||"";});C5=null;C8=null;C2=null;return true;}return false;},toggleControlOverlay:function CH(C3){var C2=this.ctrlOverlay;if(!C2){return ;}C2.set("visible",!!(C3.em&&C3.pfec===CN.MDX_LIMIT_ERROR));},refresh:function Aj(){var C7=this.parent,C5=this.node&&this.node.defn,C4=this.node&&this.node.data,C9=this.model,C8=C7&&C7.dynamicSelIcon,DA=C7&&C7.dossierLevelIcon,C2=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),C6=this.executable;this.updateExecutable(C5,C4,C9);if(this.executable!==C6){var C3=C7&&C7.parent;if(C3&&C3.rebuildChild){C3.rebuildChild(C7);}return ;}if(C7&&C7.generateToolbar){C7.set((this.isInFilterPanel()?"baseTitle":"title"),C5.ttl||C5.n);C7.generateToolbar();}if(C7&&C7.refreshFilterSummaryBar){C7.refreshFilterSummaryBar();}if(C8&&!C2){C8.set("visible",this.isDsIconVisible(true));C8.set("mode",this.isUnset());}if(DA&&!C2){DA.set("visible",C5.sync);}this._super();if(C7&&C7.fc&&C7.updateContentHeight){C7.updateContentHeight();}this.updateSelectorWarning();this.checkWhetherRestoreFocus();},checkWhetherRestoreFocus:function Bp(){var C5=false;if(this.isPanelSelector()){var C2=Aw.walk("parent.parent",this);if(C2){if(this.tks){var C3=C2.getUnitByKey(this.tks),C4=C3&&C3.boxContent;if(C4&&C4.selectedPanelKey===this.k){C5=true;}}}}if(this.isAMSelector()&&this.selectByKey){C5=true;this.selectByKey=false;}if(C5){this.buildNavList();this.restoreFocus();}},onselectAllChange:function Cn(DB){var C3=this.children&&this.children[0],C9=C3.items,C2=C3.allIdx,C5=C3.selectedIndices,DA,C8=[];if(DB.value){if(C5[C2]){C3.removeSelect(C2,true);var C7=C3.itemRenderer,C6=C7&&C7.unselect;if(C6){var C4=C3._getItemNode(C2);if(C4){C6(C4,C9[C2],C2,C3);}}}for(DA=0;DA<C9.length;DA++){if(DA!==C2&&!C5[DA]){C8.push(DA);}}C3.addSelect(C8);}else{for(DA in C5){C8.push(parseInt(DA,10));}C3.removeSelect(C8);}},changeFilterTechnique:function AE(){var DA=this.node.defn,DB=this.k,C2=DA.pdf=!DA.pdf,C8=this.model,C3=this.isInFilterPanel()&&this.getFilterPanel(),C6=DA.tks?DA.tks.split(X):[],C5=[DB].concat(C6),C4=C8.getDataService(),C7=C4.getUseAlternateFilterTechniqueAction(DA.ck,DA.ckey,DA.ct,C5,C2),C9=C4.newUpdate(C3);if(C3&&C3._bufferedSlices){C3.applyBufferedSlices(true,C9);}this.model.controller.submitUndoRedoUpdates((C9.actions||[]).concat(C7),null,{success:function(DD){var DC=C5.join(X);C8.partialUpdate(DD.data,C8.getTargetDefn(DC),DD.defn,[DB]);}},Cy);},onincludeChange:function Cv(DF){var C5=this.node.defn,C2=DF.value,C7=this.model,C4=this.isInFilterPanel()&&this.getFilterPanel(),DC=C7.getDataService().newUpdate(C4),DK=C4&&C4._bufferedSlices,DN=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),C6=this.isParameterSelector()&&this.isElementListParameter();C5.include=this.include=C2;if(DK){C4.applyBufferedSlices(true,DC);}if(this.style!==a&&this.style!==n){var DM=e.call(this),DJ=this.ckey,C9;DM.ckey=DJ;DM.changeInclude=true;if(C6){C9=Cy;}if(C5.srct===g||C5.srct===AY){var DL=!C4&&mstrApp.supportFeature(x.SHOULD_LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY);if(DL){this.showall=this.defn.showall=false;this.defn.shouldLimitSingleSelection=true;}else{this.showall=this.defn.showall=C2;}var C3=this.getPanelContainer()||{},DI=C3.parent||{},DA=this.isDynamicAttributeSelector();if(DI.isSelectorPanel&&(mstrApp.isDossier||DN)){DM.scs=C5.scs;DM.changeInclude=true;DM.selector=this;DM.disablePU=DA;DM.isElementListParameter=C6;if(!!this.deferredEvt){DI.bufferSlice(DM,true);this.deferredEvt.include=DM.include;DI.bufferSlice(this.deferredEvt,true);Cq(C3.children||[],this,DI,this.deferredEvt,C7.mid,C7.datasets);}else{DI.bufferSlice(DM,true);Cq(C3.children||[],this,DI,DM,C7.mid,C7.datasets);}return ;}var DO=this,DH=this.model,DG=DH.getDataService(),DE=DH.getSliceCallback(DM),DD=[DG.getSelectorShowAllAction({ck:C5.ck,ckey:C5.ckey,type:C5.type,showAll:!C5.scs&&C2&&!DL}),DG.getSelectorIncludeAction({ck:C5.ck,ckey:C5.ckey,type:C5.type,include:C2})],C8=Az(DE,{success:function(DP){DG.getIncludeChangeCallback(DP,DO,DA,C6);}});var DB=this.deferredEvt;if(!!DB){DH.sliceDeferred(DC,DB);}DD=!!DB?DD.concat(DC.actions):(DC.actions||[]).concat(DD);this.set("wait",true);DO.syncSelectorsInConsumptionMode();DH.controller.cmdMgr.execute({execute:function(){this.submit(DD,C8,C9);},urInfo:{extraPuKeys:C5.ck.split(X).slice(1),treesToRender:3}});}else{this.slice(DM);}}},getSelectorStyleList:function p(){var C4=[],C7=this.defn.srct,C3=this.node,C2=C3&&C3.defn,C6=C3&&C3.data;if(C2.ct==="8"&&!this.isParameterSelector()){return Ce;}if(mstrApp.isVI&&C2.ct==="3"){return BR;}if(this.isParameterSelector()&&this.isValueParameter()){return this.getParameterSelectorStyleList();}if(this.isScopeFilter()){return this.getScopeFilterStyleList();}if(this.useAttrStyle()||this.isObjectParameterSelector()){var C8=!this.isInFilterPanel();if(this.isRecursiveAttributeSelector()){if(C8&&mstrApp.supportFeature(x.SHOULD_LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY)){return[{n:mstrmojo.desc(4729,"Drop-down"),v:CX}];}return[{n:mstrmojo.desc(4733,"Check Boxes"),v:B1},{n:mstrmojo.desc(8967,"Search Box"),v:Bk},{n:mstrmojo.desc(4729,"Drop-down"),v:CX}];}C4=[{n:mstrmojo.desc(4733,"Check Boxes"),v:B1}];if(!this.isObjectParameterSelector()){C4.push({n:mstrmojo.desc(4730,"Slider"),v:Q});}if(C7===g){C4.push({n:mstrmojo.desc(8967,"Search Box"),v:Bk});}if(C8){C4=C4.concat([{n:mstrmojo.desc(4735,"Link Bar"),v:Av},{n:mstrmojo.desc(4734,"Button Bar"),v:BM}]);}C4=C4.concat([{n:mstrmojo.desc(4732,"Radio Buttons"),v:CC},{n:mstrmojo.desc(4729,"Drop-down"),v:CX}]);if(C8){C4=C4.concat([{n:mstrmojo.desc(6738,"List Box"),v:D}]);}var C5=A3.getUnitFromDataset(this.model.datasets,this.defn.srcid,12);if(C6.fid&&(C5&&!C5.de)&&!(C2.parasid&&C5)){C4.push({n:mstrmojo.desc(5443,"Calendar"),v:n});}}else{if(C7===S){if((mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly)&&C2&&C2.style!==a&&!(C6&&C6.max&&C6.min)){C4=[{n:mstrmojo.desc(5225,"Qualification"),v:Cw}];}else{C4=[{n:mstrmojo.desc(4730,"Slider"),v:a},{n:mstrmojo.desc(5225,"Qualification"),v:Cw}];}}}return C4;},getClearFilterLabel:function CL(){return this.isAMSelector()?mstrmojo.desc(16876,"Unset Selector"):mstrmojo.desc(14595,"Unset Filter");},supportsInclude:function L(){var C2=this.defn;if(this.isRecursiveAttributeSelector()){return !this.isDynamicAttributeSelector();}return((C2.srct===g&&!this.hasDE)||(C2.srct===S&&C2.style===a))&&!this.isSolrSelector()&&!mstrApp.isInVFConfigMode;},isSelectionExcluded:function AW(){return this.isDynamicAttributeSelector()&&!this.defn.include;},isSolrSelector:function Bw(){return this.model.isFromSolrCube(this.defn.srcid);},isMetricSelector:function b(){return this.defn.srct===S;},isRankMetricSelector:function C(){var C2=I.call(this).f;return C2&&typeof C2==="string"&&C2.search(/rank/i)===0;},isNumericMetricSelector:function BP(){var C2=I.call(this).dt;return this.model.isNumericDataType(C2);},isAttributeSelector:function BN(){return this.defn.srct===g;},supportsShowAllToggle:function s(){return this.defn.srct===g||this.defn.srct===AY||(this.defn.srct===Bj&&this.defn.srcst===CF);},shouldDisableShowAll:function(){return this.content.isICS&&!this.defn.showall&&mstrApp.supportFeature(x.SHOULD_LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY);},useAttrStyle:function AO(){var C2=this.defn.srct;return C2===Bj||C2===g||C2===AY;},hasAttrData:function BD(){return this.useAttrStyle()&&!this.isAttrQualSelector();},hasQualData:function k(){return this.isAttrQualSelector()||this.isMetricSelector();},isDerivedAttributeSelector:function j(){return this.defn.srct===g&&this.defn.srcst===Be;},isNewDerivedElementSelector:function i(){return this.isConsolidationSelector()&&this.defn.srcst===Au;},isNewDerivedRecursiveElementSelector:function Bs(){return this.isNewDerivedElementSelector()&&this.defn.ndetype===BT.DssRecursiveDerivedElement;},isAttrQualSelector:function AG(){return this.defn.srct===g&&this.defn.style===n;},isMetricQualSelector:function Ah(){return this.defn.style===Cw;},isRecursiveAttributeSelector:function BX(){var C2=this.defn;return C2.srct===g&&C2.srcst===CS||this.isNewDerivedRecursiveElementSelector();},isDynamicAttributeSelector:function CJ(){return this.isRecursiveAttributeSelector()&&this.isInFilterPanel()&&this.defn.style===B1;},allowsOrientationChange:function Bg(){return !this.isAttrQualSelector()&&!BQ.call(this,[Bk,D,CX,Q,a,Cw,AS]);},shouldHideSelectionForPanel:function Cj(){return this.isPanelSelector()&&this.style===CX;},shouldHideSelectorOptions:function M(){return false;},isSearchBox:function CY(){return BQ.call(this,[Bk]);},isVisFilter:function Cl(){return BQ.call(this,[G]);},isDIC:function BZ(){return false;},isAttrElemListSelector:function BV(){return this.defn.srct===g&&this.defn.style!==n;},isCGSelector:function BB(){return this.defn.srcst===CF;},isConsolidationSelector:function Ci(){return this.defn.srct===AY;},isSlicingSelector:function A(){return this.isCGSelector()||this.isConsolidationSelector();},isGeoSelector:function Ae(){var C2=A3.getUnitFromDataset(this.model.datasets,this.defn.srcid,12);return !!C2&&A3.isGeoAttr(C2);},isUnset:function l(){return !!(this.node.data.unset||this.defn.unset);},isCalendarStyle:function AQ(){var C2=Aw.walk("node.data.dt",this);return(this.isAttrQualSelector()&&(C2===o.DATE||C2===o.TIMESTAMP));},hasDynamicSelection:function Ar(C2){return(this.defn.sus>BA.UNSET)&&(!C2||this.isUnset());},shouldDisableGdde:function Ak(){return this.isCGSelector()||this.isGeoSelector();},getInvalidTooltip:function AT(){var C3=mstrmojo.desc(15787,"Unable to retrieve the list of elements for this filter")+mstrmojo.desc(1006,"."),C2=" "+mstrmojo.desc(15931,"Please resume data retrieval to use this filter.");if(this.isCGSelector()){C3=mstrmojo.desc(15924,"This Filter is based on a Custom Group, which is not supported when data retrieval is paused.")+C2;}else{if(this.isGeoSelector()){C3=mstrmojo.desc(15932,"This filter is based on a Geo Attribute, which is not supported when data retrieval is paused.")+C2;}}return C3;},getNonExecutableTooltip:function Bc(){var C2=mstrmojo.desc(28180,"This filter is not executable."),C5=Aw.walk("node.data",this),C3=Aw.walk("node.defn",this),C4=(C5&&(C5.em||C5.eg))||(C3&&C3.nonExecutableDataPoints)||C2;return C4;},slice:function z(C6){var C2=this.model;if(C6&&C6.eid){C6.eid=AM(C6.eid);}if(C2.closeSelWarnFlag){C2.closeSelWarnFlag(this.k);}if(this.isInFilterPanel()){var C3=this.getFilterPanel();if(C3&&!C3.isAutoApply()){C3.bufferSlice(C6);return ;}}var C7=this.getPanelContainer();if(this.isInSearchBoxPanel(C7)){C7.parent.bufferSlice(C6);C7.set("canApplySbp",C7.canApplySearchBoxPanel());return ;}var C4=C7&&C7.parent||{};if(C4.bufferSlice&&C4.hasDisabledSelectionApply&&C4.hasDisabledSelectionApply()&&C6&&!C6.forceApply){C4.bufferSlice(C6);return ;}var C5=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation();if(C4.isSelectorPanel&&(mstrApp.isDossier||C5)){C4.bufferSlice(C6);Cq(C7.children||[],this,C4,C6,this.model.mid,this.model.datasets);return ;}C2.slice(C6);},isInFilterPanel:function Br(){var C2=this.parent;return(C2&&C2.isInFilterPanel&&C2.isInFilterPanel())||false;},isHorizFP:function Ad(){var C2=this.parent;return(C2&&C2.isHorizFP&&C2.isHorizFP())||false;},getFilterPanel:function W(){var C2=this.parent;return(C2&&C2.getFilterPanel&&C2.getFilterPanel())||null;},isInSearchBoxPanel:function(C2){var C3=C2||this.getPanelContainer();return C3&&(C3.isSbp||(C3._isSearchBoxPanel&&C3._isSearchBoxPanel()));},getPanelContainer:function(){var C2=CM,C3;for(C3=this.parent;C3&&C3.defn;C3=C3.parent){if(parseInt(C3.defn.t,10)===C2.PANEL){return C3;}}return null;},clearSelector:function Bv(C2){var DH=e.call(this),DC=[CA],DG=this.node.data.elms||[],DL=this.style,C4=this.defn.include,C6=this.isFilterNothing&&this.isFilterNothing(),C9=this.node.defn,DN=C9.srcst===257||(C9.srct===47&&C9.srcst!==12033),DQ=mstrApp&&mstrApp.getSelectAllForUnsetForVI&&mstrApp.getSelectAllForUnsetForVI(),DK=[Ch],C7=AR.CESREADY,DA="ces",DI=[],DE=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),DF=this.parent,C3=this.node.data,C8=this.isMandatory();if(this.isScopeFilter()){return ;}if(!this.executable&&AB.safeCall("isInFilterPanel",this)()){DH.extraCb={success:function(){AB.safeCall("mstrApp.rootCtrl.toggleSidePanelsWarningByLayoutExecutableStatus",window)();}};DH.updateExecute=true;}if(mstrApp&&mstrApp.isVI&&!!mstrApp.supportFeature(x.USE_FILTER_ENHANCEMENT)){C9.scs=0;DH.scs=0;}if(DL===Bk){if(DQ){DH.eid=DC.join(X);DI=DK;}else{DH.ckey=this.ckey;DH.unset=true;}this.defn.set("cek",[]);}else{if(DL===a||DL===Cw){DH.cs="";DH.ckey=this.ckey;DH.unset=true;C9.set("cek",{cs:null,qua:this.qua,include:C4,f:null,ft:null});C7=AR.CSREADY;DA=["f","ft","cs"];DI=[null,null,""];}else{if(DL===n){DH.unset=true;DH.ckey=this.ckey;var DD=[{v:""},{v:""}];C9.set("cek",{cs:DD});C7=AR.CSREADY;DA="cs";DI=DD;}else{if(DQ){DH.eid=DC.join(X);DI=DK;}else{DH.ckey=this.ckey;DH.unset=true;}var DP,DB=this.showall&&(C4||DL===Q);if(DB&&this.multi){CZ.forEach(DG,function(DS){var DR=DS.v;if(DC[0]!==DR){DC.push(DR);if(!DP){DP=[DS];}}});}if(!DN){C9.set("cek",DB?DC:[]);DI=DB?DK:[];if(!DB&&this.content&&this.content.text){this.content.text="";}}else{if(DE){C9.set("cek",(DB&&DC.length>1)?[DC[1]]:[]);}DI=DP||[];}DA="ces";}}}if(C9.sec){DF.set("count",(DL===Bk||DL===Q)?"":B0.buildElemsCountStr(DC,DG,this.isSelectionExcluded()));}DH[C2?"forceApply":"forceBuffer"]=true;if((C6&&!DN)||DE){DH.ignoreTargetData=true;}DH.retrieveCtrlKey=DN;if(DE){var DM=this.model,DO=DM.getCurrentLayoutDef(),DJ=DO&&DO.units,C5=this.k;if(DJ&&DJ[C5]){DJ[C5].cesChange=false;}DM.setDataReady(C5,this.id,C7,true,DA,DI);}if(this.hasDynamicSelection()){delete C9.sus;delete C9.suc;C3.unset=true;DH.resetSuc=true;DH.updateDSIcon=true;if(!C2||DE){this.refresh();}}else{if(C8){DH.updateDSIcon=true;if(!C2||DE){this.refresh();}}}if(this.isParameterSelector()){DH.forceUpdateDefn=true;}if(mstrApp.isAIMode){this.dismissBoxSelections();C3.unset=true;}AB.safeCall("parent.selectionRequiredIcon.set",this)("visible",false);AB.safeCall("parent.selectionRequiredWarningIcon.set",this)("visible",false);this.slice(DH);this.syncSelectorsInConsumptionMode();},configDynamicSelection:function Am(DM,C3,DA){var C5=this.defn,DO=this.node.data,DB=DO.elms||[],DC=e.call(this),DH=this.isInFilterPanel()&&this.getFilterPanel(),C8=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),C6=DH&&!DH.isAutoApply(),C4=this.style===mstrmojo.DocSelector.STYLES.SEARCH_BOX,C9=this.parent,DL=this.model,DK=[],DI={},DJ=AB.safeCall("isObjectParameter",this)(),C7=this.isParameterSelector();DA=DA||{};DC.dynamicSelection=true;DC.sus=DM;DC.suc=C3;DC.refreshDefn=true;DC.updateDSIcon=true;C5.sus=DM;C5.suc=C3;DO.unset=true;if(typeof DA.scs==="boolean"){DC.hasSelectorClear=true;DC.include=this.include;DC.scs=DA.scs?CT:B2;DC.isInFilterPanel=this.isInFilterPanel();DC.selector=this;C5.scs=DA.scs?CT:B2;C5.showall=!C5.scs&&this.include;if(!this.isInFilterPanel()){this.parent.raiseEvent({name:"disableClearingThisFilter",});}}if(DJ){DC.isObjectParameter=true;}if(((C4&&C6&&!this.lockSelection)||(C8&&!DO[AR.ELMSREADY]))&&!DO[AR.ELMSREQUEST]){R.call(this,undefined,C4&&!C8?{onSuccess:this.configDynamicSelection.bind(this,DM,C3,true)}:undefined);}else{DI=A0(DB,DM,C3);C5.set("cek",C4?DI.ces:DI.cek);this.selIdx=this.content.selectedIndices;if(C5.sec){C9.set("count",this.getDynamicSelectionItemsString());}this.shouldSkipInit=true;this.refresh();this.shouldSkipInit=false;}if(C8){var DN=DL.getCurrentLayoutDef(),DG=DN&&DN.units,C2=this.k,DF=DH?DH:DL.getVIComponent(BL.VIZ_CONTENT);if(DG&&DG[C2]){DC.forceApply=true;DG[C2].cesChange=false;DF.clearSingleBuffSlice(C2);}DL.setDataReady(C2,this.id,AR.CESREADY,true,"ces",DI.ces);DC.ignoreTargetData=true;}else{var DP=DL.getCurrentLayoutSelectorDefn(),DE=DH?DP.filterPanelSelectors:DP.canvasSelectors,DD=function(DR){var DQ=DR?DR.split(X):[];CZ.forEach(DQ,function(DS){var DT=DE[DS],DU;if(DT&&DT.sus){DU=DL.getDataNode(DS);if(DU&&DU.unset&&(DK.indexOf(DS)===-1)){DK.push(DS);DD(DT.tks);}}});};if(Object.keys(DE).length>2){DD(C5.tks);}DC.updateKeys=DK;}if(DA.forceBuffer!==undefined){DC.forceBuffer=DA.forceBuffer;}if(C7){DC.forceUpdateDefn=true;}if(!DA.skipBufferSlice){this.slice(DC);}if(C7){this.syncSelectorsInConsumptionMode();}AB.safeCall("parent.selectionRequiredWarningIcon.set",this)("visible",this.isEmptyMandatory());},configureScsAction:function Bi(DI,C4,C3){var DJ=this,C7=this.defn,DK=this.node.data,C9=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,DB=e.call(this),C5=this.style===mstrmojo.DocSelector.STYLES.SEARCH_BOX,DD={},DF,DC,DA,C6,DG=AB.safeCall("isFixedListParameter",this)(),C8=AB.safeCall("isElementListParameter",this)(),DH=AB.safeCall("isObjectParameter",this)(),DE=AB.safeCall("isValueParameter",this)(),C2=AB.safeCall("isRangeParameter",this)();DB.refreshDefn=true;DB.updateDSIcon=true;DB.hasSelectorClear=true;DB.include=this.include;DB.scs=DI?CT:B2;DB.isInFilterPanel=this.isInFilterPanel();DB.selector=this;C7.scs=DI?CT:B2;C7.showall=!C7.scs&&this.include;if(!DB.isInFilterPanel){this.parent.raiseEvent({name:"disableClearingThisFilter",});if(this.isSlider()&&!this.multi){this.parent.raiseEvent({name:"updateSingleSliderRange",});}}if(C3){DB.forceBuffer=true;}if(((C9&&DK.elms.length===0)||C5)&&!C4&&DI){R.call(this,undefined,C5||C9?{onSuccess:function(){DJ.configureScsAction(true,true);}}:undefined,true);return ;}DA=!C5&&Aw.walk("content.items.0.v",this)==A4&&this.content.selectedIndices[0]===true;DC=this.content.selectedIndices&&Object.keys(this.content.selectedIndices).length===0&&!C5;C6=C5&&this.content.items.length===0;if(DI&&(!this.isParameterSelector()||DG||C8||DH)&&(this.isUnset()||DC||DA||C6||C3)){DD=A0(DK.elms,2,1);DF=C5?DD.ces.length:DD.cek.length;if(DF>0){if(DE){DB.newValue=DD.cek[0];}else{DB.eid=C5?DD.ces[0].v:DD.cek[0];}}C7.set("cek",C5?DD.ces:DD.cek);this.refresh();}if(DH){DB.isObjectParameter=true;}if(DE){DB.valueParameter=true;if(DI&&!DG&&!this.content.cs&&!this.content.value){DB.resetToDefault=true;if(C2){DB.newValue=DK.min;}else{if(this.isDateTypeParameter()&&this.content.calendar){DB.newValue=this.content.getFormattedDate(A6.getDateJson(new Date())).join(" ");}}}if(DI&&DB.newValue===undefined&&Aw.walk("cs.0.v",DK)){DB.newValue=DK.cs[0].v;}}DB.forceApply=true;if(!C5||DB.eid){this._buildEvent(DB,this.content);}this.slice(DB);},updateSelectorWarning:function AJ(){var C7,C2,C4=Aw.walk("content.items.length",this),C6=Aw.walk("content.selectedIndices",this)||{},C3=Aw.walk("domNode.style",this),C8=Aw.walk("filterWarningNode.style",this);if(!this.isLinkBar()&&!this.isCheckBox()&&!this.isButtonBar()&&!this.isDropdown()&&!this.isSlider()&&!this.isListBox()&&!this.isRadio()){return false;}if(!C3||!C8){return false;}if(this.defn.scs&&C4>0&&!this.isInFilterPanel()&&!Object.keys(C6).length){C7=C3.width;C2=C3.height;C8.width=parseInt(C7,10)+6+"px";C8.height=parseInt(C2,10)+6+"px";C8.display="inline-block";AB.safeCall("parent.setWarningMessageOn",this)(true,mstrmojo.desc(27775,"Make at least one selection."));}else{AB.safeCall("parent.setWarningMessageOn",this)(false);C8.display="none";}if(this.isScopeFilter()){var C5=this.validateInput();this.syncValidationResult(C5);}},isDsIconVisible:function CV(C2){return this.hasDynamicSelection()&&!this.hasQualData()&&(C2?this.isInFilterPanel():true);},createDynamicSelectionIcon:function AZ(){var C3=this,C2=this.defn,C4=this.isUnset();var C5=new mstrmojo.Widget({visible:this.isDsIconVisible(true),mode:C4,markupString:'<div class="'+(C4?"on":"off")+'" mstrAttach:click></div>',useRichTooltip:true,tooltipOpenDelay:100,updateTooltipConfig:function(){var C6=this.mode?mstrmojo.desc(17767,"Dynamic Filter On"):mstrmojo.desc(17759,"Dynamic Filter Off");this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:C6,refNode:this.domNode,top:30,left:10,posType:mstrmojo.tooltip.POS_TOPCENTER,};},onclick:function(){if(B8.hasClass(this.domNode,"off")){var C6=C2.multi?C2.suc:1;C3.configDynamicSelection(C2.sus,C6);}else{C3.selectorControlChange(C3.content);}},markupMethods:{onvisibleChange:function(){B8.toggleClass(this.domNode,"dynamicSelection",this.visible);},onmodeChange:function(){B8.toggleClass(this.domNode,"off",!this.mode);B8.toggleClass(this.domNode,"on",this.mode);}}});return C5;},createSelectionRequiredIcon:function B3(){var C2=new mstrmojo.Widget({visible:true,markupString:'<div class="selectionRequired" mstrAttach:click>*</div>',useRichTooltip:true,tooltipOpenDelay:100,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:mstrmojo.desc(27770,"Selection Required"),refNode:this.domNode,top:30,left:6,posType:mstrmojo.tooltip.POS_TOPCENTER,};},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},}});return C2;},createSelectionRequiredWarningIcon:function CE(){var C2=new mstrmojo.Widget({visible:this.isEmptyMandatory(),markupString:'<div class="selectionRequiredWarning"></div>',useRichTooltip:true,tooltipOpenDelay:100,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:mstrmojo.desc(27775,"Make at least one selection."),refNode:this.domNode,top:30,left:10,posType:mstrmojo.tooltip.POS_TOPCENTER,};},markupMethods:{onvisibleChange:function(){var C3=this,C4;this.domNode.style.display=this.visible?"block":"none";if(this.visible){this.showTooltip();C4=window.setTimeout(function(){C3.hideTooltip();clearTimeout(C4);},Al);}else{this.hideTooltip();}},}});return C2;},enterUnit:function(){this.resetTabNav();this.grabFocus();this.navigateToFirstValidTarget();},allowsTogglingMultiSelect:function BO(){return !this.isActionSelector()&&!this.isPanelSelector()&&BQ.call(this,[CX,BM,Av,Bk,Q,D]);},shouldDisableAllowMulti:function(){return this.content.isICS&&!this.multi&&mstrApp.supportFeature(x.SHOULD_LIMIT_MDX_ICS_SINGLE_SELECTION_ONLY);},allowsTogglingAutoSearch:function Ao(){return !this.isRecursiveAttributeSelector()&&BQ.call(this,[Bk]);},allowsTogglingPreloadOptions:function Cp(){return BQ.call(this,[Bk]);},allowsSameSizeItems:function BC(){return !this.isActionSelector()&&!this.isPanelSelector()&&BQ.call(this,[B1,CC,BM,Av])&&!this.isRecursiveAttributeSelector();},supportsSetTarget:function AF(){var C2=this.defn;return !this.isParameterSelector()&&(this.isAttrElemListSelector()||this.isSlicingSelector());},supportSelectionColor:function At(){return BQ.call(this,[D,Av]);},isAMSelector:function AK(){return !(mstrApp&&mstrApp.isExpress)&&this.defn.ct==="8"&&!this.isParameterSelector();},isPanelSelector:function BH(){return !(mstrApp&&mstrApp.isExpress)&&this.defn.ct==="3";},isParameterSelector:function An(){return !!this.defn.isps&&!this.isScopeFilter();},isActionSelector:function Cg(){return this.defn.ct==="4";},isObjectParameterSelector:function Aq(){return this.isParameterSelector()&&this.defn.ct==="8";},isScopeFilter:function By(){return !!this.defn.isScopeFilter;},isSlider:function AX(){return this.style===Q;},isListBox:function C0(){return this.style===D;},isRadio:function A5(){return this.style===CC;},isLinkBar:function BU(){return this.style===Av;},isCheckBox:function Z(){return this.style===B1;},isDropdown:function H(){return this.style===CX;},isButtonBar:function AL(){return this.style===BM;},hideTitleCtrl:function Bo(){return this.isPanelSelector()||this.isActionSelector();},isDICTextArea:function Bz(){return false;},isVIADTSSettingVisible:function Bf(){var C2=!this.isActionSelector()&&!this.isPanelSelector()&&!this.isAMSelector()&&!this.isSlicingSelector(),C3=AB.safeCall("model.hasMDXRADataset",this)(),C4=!!(mstrApp&&mstrApp.isVI&&mstrApp.supportFeature(x.USE_FILTER_ENHANCEMENT));return C4&&C2&&!C3;},isEventTimeRangeFilter:function BI(){return this.style===CQ;},isEmptyMandatory:function u(){var C2=this.node.defn.scs,C5=Aw.walk("content.items.length",this),C3=Aw.walk("content.selectedIndices",this),C4=Object.keys(C3||{}).length;return C2&&(this.isSearchBox()?!C5:!C4);},isMandatory:function CK(){return Aw.walk("defn.scs",this)===CT&&!this.isScopeFilter();},isAutoContextVisible:function BE(){return !!(this.model.isAIServiceConfigured&&!this.parent.isInInfoWindowBox()&&!this.isParameterSelector()&&!this.isPanelSelector()&&!this.isAMSelector())&&!this.isActionSelector();},isAutoContextEnabled:function AA(){return !!this.defn.ccfa;},getCurrentSelectorDefn:function(){var C3=this.model,C2=this.k;if(this.isScopeFilter()){var C6=C3.getCurrentScopeFilterSelectorDefn();return C6&&C6[C2];}var C5=C3.getCurrentLayoutDef(),C4=C5&&C5.units;return C4&&C4[C2];},generateCurrentStatusEvent:function(){var C2=e.call(this);this._buildEvent(C2,this.content);return C2;},triggerSelectorPanelStatus:function(C4){var C2=this.getPanelContainer(),C3=(C2&&C2.parent)||{};if(C3.isSelectorPanel){K(C2,C4);}},hasChangedFormats:function(){var C2=this.defn.fmts||{};return C2["f-version"]===1;},selectorSelectionColor:function BY(){return this.defn.ssc;},selectorFormat:function f(C2){return C2?AB.safeCall("getFormats",this)():this.defn.fmts;},showAdvancedStyling:function(){return this.hasChangedFormats()&&mstrApp.supportFeature(x.SHOW_SELECTOR_ADVANCED_STYLING);}});mstrmojo.DocSelector.UC_ON_DS=CO;mstrmojo.DocSelector.STYLES={PULLDOWN:CX,SCROLLER:Q,LIST:D,RADIO:CC,CHECKBOX:B1,BUTTON:BM,LINK:Av,METRIC_SLIDER:a,METRIC_QUAL:Cw,SEARCH_BOX:Bk,TEXT_BOX:AS,ATTR_QUAL:n,VISUALIZATION:G,EVENT_TIME_RANGE:CQ};mstrmojo.DocSelector.DATAPARAMS={CESREADY:"cesReady",ELMSREADY:"elmsReady",ELMSREQUEST:"elemsRequest",METRICVALUES:"metricValues",CSREADY:"csReady",DISABLED:"disabled"};mstrmojo.DocSelector.UNSET_STATUS={UNSET:1,FIRST:2,LAST:4};mstrmojo.DocSelector.SYNC_STATUS={UNSYNC:0,SYNC:1};var AR=mstrmojo.DocSelector.DATAPARAMS,BA=mstrmojo.DocSelector.UNSET_STATUS;mstrmojo.DocSelector.CONTROL_TYPE={ELEMENT_LIST:1,PANEL:3,ATTRIBUTE_LIST:8,EVENT_TIME:9,VALUE:10};mstrmojo.DocSelector.UnitTest_API={getDynamicSelSelectedItems:A0};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.vi.util.A11yUtility","mstrmojo.ui.SearchablePulldownCheckList","mstrmojo.ui.SearchablePulldown");var I=mstrmojo.array,K=mstrmojo.css,G=mstrmojo.dom,E=mstrmojo.hash,M=mstrmojo.string,P=mstrmojo.vi.util.A11yUtility,F={0:true};function C(){var Y=this.selectedIndices=E.copy(this.getPopupList().selectedIndices),R=this.items,W=[],X,U=this.allIdx,S=this.noneIdx;if(R&&R.length){if(Y[U]){W.push(R[U].n);}else{if(Y[S]){W.push(R[S].n);}else{I.forEach(R,function(a,Z){if(Y[Z]){W.push(a.n);}});}}}X=W.join(", ");this.set("value",this.allowHTML?X:M.encodeHtmlString(X));this.set("text",X);this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:M.encodeHtmlString(X)});}mstrmojo.ui.MultiSelectSearchablePulldown=mstrmojo.declare(mstrmojo.ui.SearchablePulldown,[],{scriptClass:"mstrmojo.ui.MultiSelectSearchablePulldown",isHostedWithin:false,init:function O(R){this._super(R);K.addWidgetCssClass(this,"multi");this.hostedCSSClass+=" multi";},submitSelections:function B(){this.onchange();},_set_selectedIndices:function H(W,S){var R=this.getPopupList(),U=E.copy(this.selectedIndices);R.set("selectedIndices",S||U||F);C.call(this);return true;},select:function L(R){this.getPopupList().select(R);},getPopupWidget:function D(){return this.popupWidget;},getPopupList:function N(){return this.popupWidget.list;},getPopupListConfig:function A(){return[{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",alias:"popupWidget",_unlockHoverCheck:function R(X,S){var W=G.eventTarget(S,X),U=this.opener;if(G.contains(U.domNode,W,true,document.body)){U.set("isEditing",true);}else{if(!G.contains(this.domNode,W,true,document.body)){this.close();}}},bindings:{itemCssText:function(){return(this.parent&&this.parent.itemCssText)||"";}}}];},getNavList:function Q(){var S,U,X,W=this.getPopupWidget(),R=E.walk("parent.parent.menuBtnInfo.btn",this);if(W.visible){U=W.buttons.okBtn;X=W.buttons.cancelBtn;P.enableAccessibility({widget:U,domNode:U.domNode},"button");P.enableAccessibility({widget:X,domNode:X.domNode},"button");S=[W.list,U,X];}else{S=[this,R];}return S;},processSearch:function J(){var R=this.getPopupWidget();R.toggleCacheMode(true);if(this._super){this._super();}R.toggleCacheMode(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");var D=mstrmojo.gm.EnumAxisScale,A=mstrmojo.gm.GMUtility,C=mstrmojo.hash;var B=mstrmojo.gm.GMAxisScale=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMAxisScale",axKey:undefined,rMin:undefined,rMax:undefined,mMin:undefined,mMax:undefined,logScale:false,scaleType:undefined,minMax:undefined,isCust:false,autoMin:false,autoMax:false,init:function(E){this._super(E);if(this.mMin===undefined){this.mMin=this.rMin;}if(this.mMax===undefined){this.mMax=this.rMax;}if(E.minMax!==undefined&&E.minMax!==D.CUSTOM){this.scaleType=E.minMax;}},absorbInfo:function(E){var F;if(this.axKey!==E.axKey){return ;}this.logScale=E.logScale;this.scaleType=E.scaleType;F=this.isCust=E.isCust;if(F===false){return ;}this.mMin=E.mMin;this.mMax=E.mMax;this.autoMin=E.autoMin;this.autoMax=E.autoMax;},serialize2String:function(){return[this.axKey,this.scaleType,this.mMin,this.mMax,this.rMin,this.rMax,this.logScale,this.autoMin,this.autoMax].join(":");}});mstrmojo.gm.GMAxisScale.createAxisScaleFromArr=function(E){var F={axKey:E[0],scaleType:parseInt(E[1],10),mMin:parseFloat(E[2]),mMax:parseFloat(E[3]),rMin:parseFloat(E[4]),rMax:parseFloat(E[5]),logScale:E[6]===""?undefined:A.isTrueForBoolValue(E[6]),autoMin:A.isTrueForBoolValue(E[7]),autoMax:A.isTrueForBoolValue(E[8])};F.isCust=(F.mMin!==F.rMin||F.mMax!==F.rMax)||F.scaleType===D.CUSTOM;return new B(F);};mstrmojo.gm.GMAxisScale.createAxisScaleCollectionFromArrays=function(F,E){E=E||{};F.forEach(function(G){E[G[0]]=mstrmojo.gm.GMAxisScale.createAxisScaleFromArr(G);});return E;};mstrmojo.gm.GMAxisScale.createAllMetricsAxObj=function(E,O){var N,J={axKey:"AllMetrics"},G=[],I=[],K,F=true,M=true,H=true;if(E.AllMetrics!==undefined){return ;}for(N in E){if(N!=="AllMetrics"&&E.hasOwnProperty(N)){K=E[N];if(J.rMin===undefined){J.rMin=K.rMin;}else{J.rMin=Math.min(J.rMin,K.rMin);}G.push(K.mMin);if(J.mMin===undefined){J.mMin=K.mMin;}else{J.mMin=Math.min(J.mMin,K.mMin);}if(J.rMax===undefined){J.rMax=K.rMax;}else{J.rMax=Math.max(J.rMax,K.rMax);}I.push(K.mMax);if(J.mMax===undefined){J.mMax=K.mMax;}else{J.mMax=Math.max(J.mMax,K.mMax);}if(J.logScale===undefined){J.logScale=K.logScale;}else{if(J.logScale!==K.logScale){F=false;}}if(J.scaleType===undefined){J.scaleType=K.scaleType;}else{if(J.scaleType!==K.scaleType){J.scaleType=D.DIFFERENT;}}if(J.autoMin===undefined){J.autoMin=K.autoMin;}else{if(J.autoMin!==K.autoMin){J.autoMin=false;M=false;}}if(J.autoMax===undefined){J.autoMax=K.autoMax;}else{if(J.autoMax!==K.autoMax){J.autoMax=false;H=false;}}}}if(O&&C.keyarray(E).length===0){J.scaleType=D.CUSTOM;J.autoMin=true;J.autoMax=true;}if(!F){J.logScale=undefined;}J.isCust=(J.mMin!==J.rMin||J.mMax!==J.rMax)||J.scaleType===D.CUSTOM;if(J.scaleType===D.CUSTOM){var L=false;I.forEach(function(P){if(P!==J.mMax){L=true;}});G.forEach(function(P){if(P!==J.mMin){L=true;}});if(!M||!H){L=true;}if(L){J.scaleType=D.DIFFERENT;}}E.AllMetrics=new B(J);return E.AllMetrics;};mstrmojo.gm.GMAxisScale.serializeCollection2String=function(I,E){var G,H=I.AllMetrics,F=[];if(H===undefined){H=mstrmojo.gm.GMAxisScale.createAllMetricsAxObj(I,E);}F.push(H.serialize2String());for(G in I){if(G!=="AllMetrics"&&I.hasOwnProperty(G)){F.push(I[G].serialize2String());}}return F.join(",");};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.viz.EnumVisualizationTemplates","mstrmojo.func","mstrmojo.vi.enums.EnumFeatures");var AL=mstrmojo.gm,z=mstrmojo.array,Y=mstrmojo.hash,E=mstrmojo.css,K=AL.GMUtility,AQ=mstrmojo.func,AR=mstrmojo.string,p=mstrmojo.vi.enums.EnumFeatures,H=mstrmojo.chart.enums.EnumFontStyle,w=AL.WidgetPropertyTag,X=AL.FormatingPropertyTag,e=AL.ShapeFillType,AH=mstrmojo.vi.viz.EnumVisualizationTemplates,C=AL.EnumContainerFitModes,g=AL.EnumFitTo,L=AL.EnumAxisScale,P=AL.EnumShape,AI=AL.EnumSubtype,O=AL.EnumDataLabels,AT=AL.EnumDataLabelPlacements,m=AL.EnumLabelRotation,Z=AL.EnumLegend,B=AL.EnumLegendMode,i=AL.EnumTextAlignH,AA=AL.EnumTextAlignV,n=AL.EnumMaxSizeType,j=AL.EnumMinSizeType,AJ=AL.EnumAxes,AS=AL.EnumMatrixLines,AD=AL.EnumGridLines,G=AL.EnumLegendSlot,u=AL.EnumGraphType,I=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME;var s={Content:1,Window:2,Compact:3,Manual:4},AW={Global:0,PerRC:1,Local:2,Custom:3,Different:4},y={Area:0,Bar:1,Line:2,Circle:4,Square:6,Tick:7,Pie:10,Ring:11},AV={Automatic:1,Absolute:2,Stacked:3,Clustered:4,Percent:5},AG={Hide:1,"Show only values":2,"Show only text":4,"Show both text value":6,"Show only percent":8,"Show both value percent":10,"Show both text percent":12,"Show text value percent":14,"Show stacked bar total":16,"Show stacked bar total and text":18,"Show stacked bar total and value":20,"Show stacked bar total and text and value":22},R={Automatic:1,Generic:2,Reserved:3},AE={Automatic:1,Manual:2,"Auto fit":3},AC={Automatic:1,Manual:2,Proportional:3},t={"Show Both":1,"Show None":2,"Show Only X":3,"Show Only Y":4},W={"Show All":1,"Show None":2,"Show Only Horizontal":3,"Show Only Vertical":4},M={Automatic:1,Show:2,Hide:3};var AK=[null,"Content","Window","Compact"],q=["Global","PerRC","Local","Custom","Different"],d=["Area","Bar","Line","StepLine","Circle","Rectangle","Square","Tick","PieSlice","Polygon","Pie","Ring"],U=[null,"Automatic","Absolute","Stacked","Clustered","Percent"],a=[null,"Hide","Show only values",null,"Show only text",null,"Show both text value",null,"Show only percent",null,"Show both value percent",null,"Show both text percent",null,"Show text value percent",null,"Show stacked bar total",null,"Show stacked bar total and text",null,"Show stacked bar total and value",null,"Show stacked bar total and text and value"],AO=[null,"Automatic","Generic","Reserved"],AN=[null,"Automatic","Manual","Auto fit"],AF=[null,"Automatic","Manual","Proportional"],A=[null,"Show Both","Show None","Show Only X","Show Only Y"],AU=[null,"Show All","Show None","Show Only Horizontal","Show Only Vertical"],l=[null,"Automatic","Show","Hide"];var S={allAxLnShw:"xAxLnShw:yAxLnShw",allAxLnClr:"xAxLnClr:yAxLnClr",allAxLnStyle:"xAxLnStyle:yAxLnStyle",allAxLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle",allAxLnThk:"xAxLnThk:yAxLnThk",allAxTtShw:"xAxTtShw:yAxTtShw",allAxTtCtt:"xAxTtCtt:yAxTtCtt",allAxTtFntClr:"xAxTtFntClr:yAxTtFntClr",allAxTtFntFml:"xAxTtFntFml:yAxTtFntFml",allAxTtFntStyle:"xAxTtFntStyle:yAxTtFntStyle",allAxTtFntSz:"xAxTtFntSz:yAxTtFntSz",allAxLbFntClr:"xAxLbFntClr:yAxLbFntClr",allAxLbFntSz:"xAxLbFntSz:yAxLbFntSz",allAxLbFntFml:"xAxLbFntFml:yAxLbFntFml",allAxLbFntStyle:"xAxLbFntStyle:yAxLbFntStyle",allAxLbRtt:"xAxLbRtt:yAxLbRtt",allAxLbShw:"xAxLbShw:yAxLbShw",allMatrixLnShw:"vMatrixLnShw:hMatrixLnShw",allMatrixLnClr:"vMatrixLnClr:hMatrixLnClr",allMatrixLnThk:"vMatrixLnThk:hMatrixLnThk",allMatrixLnStyle:"vMatrixLnStyle:hMatrixLnStyle",allMatrixLnCmbStyle:"vMatrixLnCmbStyle:hMatrixLnCmbStyle",allNGMGridLnShw:"xGridLnShw:yGridLnShw",allGridLnShw:"majorGridLnShw:minerGridLnShw",allGridLnClr:"majorGridLnClr:minerGridLnClr",allGridLnThk:"majorGridLnThk:minerGridLnThk",allGridLnStyle:"majorGridLnStyle:minerGridLnStyle",allGridLnCmbStyle:"majorGridLnCmbStyle:minerGridLnCmbStyle",allRwColShw:"rwHdrShw:colHdrShw:rwVlShw:colVlShw",allLnShw:"xAxLnShw:yAxLnShw:xAxOriLnShw:yAxOriLnShw",allLnClr:"xAxLnClr:yAxLnClr:xAxOriLnClr:yAxOriLnClr",allLnStyle:"xAxLnStyle:yAxLnStyle:xAxOriLnStyle:yAxOriLnStyle",allLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle:xAxOriLnCmbStyle:yAxOriLnCmbStyle",allLnThk:"xAxLnThk:yAxLnThk:xAxOriLnThk:yAxOriLnThk",allTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr:lgdFntClr:dlFntClr:dlTtFntClr:rfLnFntClr:xAxTtFntClr:xAxLbFntClr:yAxTtFntClr:yAxLbFntClr",allTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz:lgdFntSz:dlFntSz:dlTtFntSz:rfLnFntSz:xAxTtFntSz:xAxLbFntSz:yAxTtFntSz:yAxLbFntSz",allTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml:lgdFntFml:dlFntFml:dlTtFntFml:rfLnFntFml:xAxTtFntFml:xAxLbFntFml:yAxTtFntFml:yAxLbFntFml",allTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle:lgdFntStyle:dlFntStyle:dlTtFntStyle:rfLnFntStyle:xAxTtFntStyle:xAxLbFntStyle:yAxTtFntStyle:yAxLbFntStyle",allDlFntClr:"dlFntClr:dlTtFntClr",allDlFntSz:"dlFntSz:dlTtFntSz",allDlFntFml:"dlFntFml:dlTtFntFml",allDlFntStyle:"dlFntStyle:dlTtFntStyle",allRwColTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr",allRwColTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz",allRwColTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml",allRwColTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle",allRwColTxtAlignH:"rwHdrTxtAlignH:colHdrTxtAlignH:rwVlTxtAlignH:colVlTxtAlignH",allRwColTxtAlignV:"rwHdrTxtAlignV:colHdrTxtAlignV:rwVlTxtAlignV:colVlTxtAlignV",outBdrShw:"OutSideBorder",allFillClr:"bgFillClr:rwHdrFillClr:colHdrFillClr",allFillTrans:"bgFillTrans:rwHdrFillTrans:colHdrFillTrans",colTxtShw:"colHdrShw:colVlShw",rwTxtShw:"rwHdrShw:rwVlShw",rwTxtTxtFntClr:"rwHdrTxtFntClr:rwVlTxtFntClr",rwTxtTxtFntSz:"rwHdrTxtFntSz:rwVlTxtFntSz",rwTxtTxtFntFml:"rwHdrTxtFntFml:rwVlTxtFntFml",rwTxtTxtFntStyle:"rwHdrTxtFntStyle:rwVlTxtFntStyle",rwTxtTxtAlignH:"rwHdrTxtAlignH:rwVlTxtAlignH",rwTxtTxtAlignV:"rwHdrTxtAlignV:rwVlTxtAlignV",colTxtTxtFntClr:"colHdrTxtFntClr:colVlTxtFntClr",colTxtTxtFntSz:"colHdrTxtFntSz:colVlTxtFntSz",colTxtTxtFntFml:"colHdrTxtFntFml:colVlTxtFntFml",colTxtTxtFntStyle:"colHdrTxtFntStyle:colVlTxtFntStyle",colTxtTxtAlignH:"colHdrTxtAlignH:colVlTxtAlignH",colTxtTxtAlignV:"colHdrTxtAlignV:colVlTxtAlignV",axOriLnShw:"xAxOriLnShw:yAxOriLnShw",axOriLnClr:"xAxOriLnClr:yAxOriLnClr",axOriLnStyle:"xAxOriLnStyle:yAxOriLnStyle",axOriLnCmbStyle:"xAxOriLnCmbStyle:yAxOriLnCmbStyle",axOriLnThk:"xAxOriLnThk:yAxOriLnThk",autoGridLnClr:"majorGridLnClr",autoGridLnCmbStyle:"majorGridLnCmbStyle",autoGridLnThk:"majorGridLnThk",autoGridLnStyle:"majorGridLnStyle"};var D={metricShapes:1,mtcLvlDataLabel:1,axisOrigin:1,AxisScale:1,fmtOnComb:1,yr:1,xr:1,y2r:1,x2r:1,rvr:1,chr:1,groupInfo:1};var AP=/[{}\[\],"'_:;\s]/i;var AB="@pLd";var J=/@pLd/g;function k(AX){var AY=new window.DOMParser();return AY.parseFromString(AX,"text/xml");}function AM(){var AX=this.xmlData,AY=this.xmlDoc;if(!AY&&AX){this.xmlDoc=AY=k(AX);}return AY;}function c(AY,AX){if(!D[AY]){return AX;}return AX.replace(J,"");}function h(Ac,AX){if(!D[Ac]){return AX;}var Ad="",Ab=0,Aa,AZ,AY,Ae=this.templateObjectMapping;if(!AX||AX.length===0){return AX;}Aa=AX.search(AP);while(Aa!==-1){if(Aa!==Ab){AZ=AX.substring(Ab,Aa);if(AZ.length===32){AY=Ae[AZ];if(AY!==undefined){Ad+=AB+AZ;}}else{Ad+=AZ;}}Ad+=AX[Aa];AX=AX.substring(Aa+1);Aa=AX.search(AP);}Ad+=AX;return Ad;}function Q(AY){var AX=new XMLSerializer();return AX.serializeToString(AY);}function F(AY,Aa){var AX,AZ="",Ab=Aa.length;for(AX=0;AX<Ab;AX++){if(AX!==0){AZ+=",";}AZ+=AY[AX]+":"+Aa[AX];}return AZ;}function N(Ab){Ab=Ab||"";var AZ,AY,AX=Ab.split(","),Ac=AX.length,Aa={};for(AZ=0;AZ<Ac;AZ++){AY=AX[AZ].split(":");if(AY.length===2){Aa[AY[0]]=parseFloat(AY[1]);}}return Aa;}function b(AZ){AZ=AZ||"";var AX=AZ.split(":"),AY={};if(AX.length===2){AY[AX[0]]=parseFloat(AX[1])||1;}return AY;}function x(AY){AY=AY||"";var AX=AY.split(",");return{first:parseInt(AX[0],10),second:parseInt(AX[1],10)};}function o(Aa,AZ,Ac){if(Ac===undefined){Ac=16777215;}if(isNaN(Aa)||isNaN(AZ)){return Aa;}if(AZ<0){AZ=0;}if(AZ>1){AZ=1;}var AX=(Aa>>16)&255;var Ad=(Aa>>8)&255;var Af=Aa&255;var Ah=(Ac>>16)&255;var Ab=(Ac>>8)&255;var Ae=Ac&255;var AY=Math.round(AX*AZ+Ah*(1-AZ));var Ag=Math.round(Ad*AZ+Ab*(1-AZ));var Ai=Math.round(Af*AZ+Ae*(1-AZ));return(AY<<16)|(Ag<<8)|Ai;}mstrmojo.gm.GMProperty=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMProperty",scales:null,generalProps:null,xmlDoc:null,xmlData:null,xmlDirty:false,jsonData:null,controller:null,rhIds:null,chIds:null,yIds:null,xIds:null,y2Ids:null,x2Ids:null,templateObjectMapping:null,isItemCached:null,readItemCache:null,init:function(AX){if(this._super){this._super(AX);}this.resetScales();this.resetGeneralProps();this.rhIds=[];this.chIds=[];if(!mstrmojo.gm.GMProperty.propertyMap){this.generatePropertyMap();}this.isItemCached={};this.readItemCache={};this.gm="OGM";},generatePropertyMap:function(){var AY,Aa=mstrmojo.gm.GMProperty.propertyMap={};function AX(Ab,Ac){if(!Aa[Ab]){Aa[Ab]=[Ac];}else{if(Aa[Ab].indexOf(Ac)<0){Aa[Ab].push(Ac);}}}function AZ(Ab){return function(Ac){AX(Ac,Ab);};}for(AY in S){if(S.hasOwnProperty(AY)){Aa[AY]=S[AY].split(":");z.forEach(Aa[AY],AZ(AY));}}},getPaletteFillColor:function(AY){try{if(AR.isEmpty(AY)){return undefined;}var Ad;if(this.gm!=="NGM"){Ad=AQ.safeCall("host.getVisPaletteColors",this)();}var Ae=AQ.safeCall("host.getDocModel",this)(),AX=Ad||AQ.safeCall("getCurrentPaletteColors",Ae)(),Af=JSON.parse(AY.replace(/'/g,'"')),Ak=Af.sIdx,Aj=Af.sa,Ag=Af.eIdx,Ai=Af.ea,Ac=Af.or===1?1:0,Ab=o(AX[Ak],Aj/100),AZ=o(AX[Ag],Ai/100),Aa=(AZ!==null&&AZ!==undefined)?AZ:Ab;if(Ab!==undefined){return{c1:Ab,c2:Aa,or:Ac};}}catch(Ah){return undefined;}},updateDefaults:function(Ad,AY){var AX=AY[X.MODIFIED_DEF_FILL_COLOR],Aa=AY[X.PALETTE_FILL_COLOR],Ab=Aa&&this.getPaletteFillColor(Aa),AZ;if(AX){if(AX==="transparent"){AZ=AX;}else{if(AX==="default"){AZ=undefined;}else{if(!isNaN(AX)){AZ=parseInt(AY[X.MODIFIED_DEF_FILL_COLOR],10);}else{try{AZ=JSON.parse(AX.replace(/'/g,'"'));}catch(Ac){AZ=undefined;}}}}}if(AZ!==undefined||Ab!==undefined){Ad[X.SHAPE_FILL_COLOR]=AZ!==undefined?AZ:Ab;Ad[X.SHAPE_FILL_COLOR_DEFAULT]=false;}else{Ad[X.SHAPE_FILL_COLOR_DEFAULT]=true;}this.defaultsObj=Y.clone(Ad);},updateDefaultProp:function(AX,AY){if(this.defaultsObj&&this.defaultsObj[AX]!==AY){this.defaultsObj[AX]=AY;}},updateDataLabelValue:function(AX){if(AX&&(AX[w.DATA_LABEL]===3||AX[w.DATA_LABEL]===4)){AX[w.DATA_LABEL]=O.SHOW_TEXT_ONLY;}},resetScales:function(){this.scales={rh:[],ch:[],y:1,y2:1,x:1,x2:1,lgd:1,lgdh:1,ctw:1,cth:1};},updateChartProps:function(Ab){var Ac=this,Aa=this.jsonData,AZ,AX=Ac.host&&Ac.host.supportFeature("ftFgGrpA","DataLabelMultiInfo");AZ=mstrApp.getThemeProps(this.gm);AZ=Y.mergeHashes(AZ.GENERAL_PROPS.ALL,AZ.GENERAL_PROPS[Ab]);Y.keyarray(AZ).forEach(function(Ad){if(AX&&Ad==="dataLabels"&&Ab===u.PIE){return ;}Ac.generalProps[Ad]=AZ[Ad];});var AY={legendShow:w.LEGEND_VISIBLE,FitTo:w.FIT_TO,cntrFitMode:X.CONTAINER_FIT_MODE,dataLabels:w.DATA_LABEL};Y.keyarray(AY).forEach(function(Ad){if(Aa[AY[Ad]]){Ac.initItem(AY[Ad]);}});},resetGeneralProps:function(){var AX={};AX.fitTo=g.NONE;AX.axisScale=L.GLOBAL;AX.shape=P.LINE;AX.subtype=AI.AUTO;AX.dataLabels=O.HIDE;AX.dataLabelPlacements=AT.AUTOMATIC;AX.dataLabelRotate=m.AUTOMATIC;AX.banding=true;AX.legend=Z.SHOW;AX.legendMode=B.RESTORED;AX.legendShow=true;AX.colAlign=i.CENTER;AX.rowAlignH=i.CENTER;AX.rowAlignV=AA.CENTER;AX.maxSizeType=n.AUTO;AX.minSizeType=j.AUTO;AX.maxSizeValue=0.9;AX.minSizeValue=0.2;AX.outBorder=true;AX.axes=AJ.SHOW_BOTH;AX.matrixLine=AS.SHOW_ALL;AX.gridLine=AD.AUTO;AX.legendSlot=G.RIGHT_MIDDLE;this.generalProps=AX;},getXMLString:function(){return this.xmlData;},isXMLDirty:function(){return this.xmlDirty;},resetXMLDirtyFlag:function(){this.xmlDirty=false;},initFromXML:function(Aa){if(Aa){if(this.xmlData&&this.xmlData!==Aa){this.xmlDoc=null;}this.xmlData=Aa;}var AY,Ab,AX=[w.FIT_TO,w.AXIS_SCALE,w.SHAPE,w.SUB_TYPE,w.DATA_LABEL,w.DATA_LABELS_PLACEMENT,w.BANDING,w.LEGEND_VISIBLE,w.LEGEND_TITLE_HIDE,w.LEGEND_SIZEBY_HIDE,w.DATA_LABELS_ROTATE,w.COL_ALIGNMENT,w.ROW_ALIGNMENT,w.MAX_SIZE_TYPE,w.MAX_SIZE_VALUE,w.MIN_SIZE_TYPE,w.MIN_SIZE_VALUE,w.SELECTION_TYPE,w.SELECTIONS,w.OUTSIDE_BORDER,w.AXES,w.MATRIX_LINES,w.GRID_LINES,w.LEGEND_MODE,w.LEGEND_POSITION,w.SCALE_LEGEND_WIDTH,w.SCALE_LEGEND_HEIGHT,w.SCALE_CHART_WIDTH,w.SCALE_CHART_HEIGHT,w.METRIC_SHAPES,w.AXIS_ORIGIN,w.LOG_SCALE,w.TREND_LINE_DEF,w.TREND_BUBBLE_FORE_DEF,w.REF_LINE_DEF,w.SHADE_COLOR,w.SHADE_OPACITY,X.FORMATS_ON_COMBINATION,X.ALL_SHAPE_FORMAT,X.V_MATRIX_LINES_SHOW,X.V_MATRIX_LINES_COLOR,X.V_MATRIX_LINES_THICKNESS,X.V_MATRIX_LINES_STYLE,X.H_MATRIX_LINES_SHOW,X.H_MATRIX_LINES_COLOR,X.H_MATRIX_LINES_THICKNESS,X.H_MATRIX_LINES_STYLE];for(AY=0,Ab=AX.length;AY<Ab;AY++){this.initItem(AX[AY]);}var AZ=this.generalProps;if(AZ.legendShow){AZ.legend=(AZ.legendMode===B.MINIMIZED)?Z.MINIMIZED:Z.SHOW;}else{AZ.legend=Z.HIDE;}},reInitItem:function(Aa,AY){var AX=this.generalProps;var AZ=this.hGetPropValue(Aa);switch(Aa){case w.FIT_TO:AX.fitTo=s[AZ]||AY;break;case X.CONTAINER_FIT_MODE:AX[X.CONTAINER_FIT_MODE]=AZ===undefined?AY:AZ;break;default:break;}},initItem:function(Ah){var Ap,Al,Ae,Ad,Ao,An,Ag,AZ,Ar,Ac,As,AX,Ak,Aa,Af,Aq=this.rhIds,Ai=this.chIds,Aj=this.controller,Ab=this.scales,AY=this.generalProps,Am;Am=this.hGetPropValue(Ah);switch(Ah){case X.CONTAINER_FIT_MODE:AY.cntrFitMode=Am||C.AUTOMATIC;break;case w.FIT_TO:AY.fitTo=s[Am]||g.AUTOMATIC;break;case w.AXIS_SCALE:AY.axisScale=AW[Am]||L.GLOBAL;break;case w.SHAPE:Ae=y[Am];AY.shape=isNaN(Ae)?P.LINE:Ae;break;case w.METRIC_SHAPES:case w.METRIC_LEVEL_DATA_LABEL:case w.AXIS_ORIGIN:case w.LOG_SCALE:case w.TREND_LINE_DEF:case w.TREND_BUBBLE_FORE_DEF:case w.REF_LINE_DEF:case w.FORMATS_ON_COMBINATION:case X.ALL_SHAPE_FORMAT:AY[Ah]=K.stringToJSON(Am);break;case w.SUB_TYPE:AY.subtype=AV[Am]||AI.AUTO;break;case w.DATA_LABEL:if(this.host&&this.host.supportFeature("ftFgGrpA","DataLabelMultiInfo")&&Am===undefined){Am="Show both text percent";}AY.dataLabels=AG[Am];break;case w.DATA_LABELS_PLACEMENT:AY.dataLabelPlacements=R[Am];break;case w.DATA_LABELS_ROTATE:AY.dataLabelRotate=Am===undefined?m.AUTOMATIC:Number(Am);break;case w.BANDING:AY.banding=Am==="true";break;case w.LEGEND_VISIBLE:if(this.host&&this.host.supportFeature("ftFgGrpA","HideGMLegendByDefault")){AY.legendShow=Am===undefined?false:Am!=="Hide";}else{AY.legendShow=Am!=="Hide";}break;case w.LEGEND_TITLE_HIDE:AY.legendTitleHide=(Am==="true"||Am===true);break;case w.LEGEND_SIZEBY_HIDE:AY.legendSizeByHide=(Am==="true"||Am===true);break;case w.COL_ALIGNMENT:if(Am!==undefined){Ae=parseInt(Am,10);if(!isNaN(Ae)&&Ae>=0&&Ae<=2){this.updateItem(X.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL,Ae);this.updateItem(X.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,Ae);}}break;case w.ROW_ALIGNMENT:if(Am!==undefined){Ae=x(Am).first;if(!isNaN(Ae)&&Ae>=0&&Ae<=2){this.updateItem(X.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL,Ae);this.updateItem(X.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,Ae);}Ae=x(Am).second;if(!isNaN(Ae)&&Ae>=0&&Ae<=2){this.updateItem(X.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL,Ae);this.updateItem(X.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL,Ae);}}break;case w.MAX_SIZE_TYPE:AY.maxSizeType=AE[Am]||n.AUTO;break;case w.MAX_SIZE_VALUE:Ae=parseFloat(Am);if(this.host&&this.host.supportFeature("ftFgGrpA","RefineBarAutoMarkerSize")){AY.maxSizeValue=isNaN(Ae)?0.6:Ae;}else{AY.maxSizeValue=isNaN(Ae)?0.9:Ae;}break;case w.MIN_SIZE_TYPE:AY.minSizeType=AC[Am]||(mstrApp.getThemeProps("THEME_STYLE")===I.DEFAULT?j.AUTO:j.PROPORTIONAL);break;case w.MIN_SIZE_VALUE:Ae=parseFloat(Am);AY.minSizeValue=isNaN(Ae)?0.2:Ae;break;case w.OUTSIDE_BORDER:AY.outBorder=Am!=="Hide";break;case w.AXES:if(Am!==undefined){AY.axes=t[Am]||AJ.SHOW_BOTH;if(AY.axes===AJ.SHOW_BOTH){Ao=An=true;}else{if(AY.axes===AJ.SHOW_X){Ao=true;An=false;}else{if(AY.axes===AJ.SHOW_Y){Ao=false;An=true;}else{Ao=An=false;}}}this.updateItem(X.X_AXIS_LINE_SHOW,Ao);this.updateItem(X.Y_AXIS_LINE_SHOW,An);}break;case w.MATRIX_LINES:if(Am!==undefined){AY.matrixLine=W[Am]||AS.SHOW_ALL;if(AY.matrixLine===AS.SHOW_ALL){Ao=An=true;}else{if(AY.matrixLine===AS.SHOW_HORIZONTAL){Ao=false;An=true;}else{if(AY.matrixLine===AS.SHOW_VERTICAL){Ao=true;An=false;}else{Ao=An=false;}}}this.updateItem(X.V_MATRIX_LINES_SHOW,Ao);this.updateItem(X.H_MATRIX_LINES_SHOW,An);}break;case w.GRID_LINES:AY.gridLine=M[Am]||AD.AUTO;break;case w.LEGEND_MODE:AY.legendMode=parseInt(Am,10);break;case w.LEGEND_POSITION:Aa=parseInt(Am,10);if(Aa===G.LEFT){Aa=G.LEFT_MIDDLE;}else{if(Aa===G.RIGHT){Aa=G.RIGHT_MIDDLE;}}Af=G.RIGHT_MIDDLE;if(this.host&&this.host.supportFeature("ftFgGrpA","LegendDefaultPositionBottomRight")){Af=G.BOTTOM_RIGHT;}AY.legendSlot=Aa||Af;break;case w.SCALE_LEGEND_WIDTH:Ab.lgd=parseFloat(Am)||undefined;break;case w.SCALE_LEGEND_HEIGHT:Ab.lgdh=parseFloat(Am)||undefined;break;case w.SCALE_CHART_WIDTH:Ab.ctw=parseFloat(Am)||1;break;case w.SCALE_CHART_HEIGHT:Ab.cth=parseFloat(Am)||1;break;case w.SCALE_ROW_HEADERS:Aq.length=0;Ar=N(Am);AZ=Aj.getRowTitleInfo(true);Al=AZ.items.length;for(Ap=0;Ap<Al;Ap++){Ag=AZ.items[Ap].id;if(Ar.hasOwnProperty(Ag)){Ab.rh[Ap]=Ar[Ag]||1;}else{Ab.rh[Ap]=1;}Aq.push(Ag);}break;case w.SCALE_COL_HEADERS:Ai.length=0;As=N(Am);Ac=Aj.getColTitleInfo(true);Al=Ac.items.length;for(Ap=0;Ap<Al;Ap++){Ag=Ac.items[Ap].id;if(As.hasOwnProperty(Ag)){Ab.ch[Ap]=As[Ag]||1;}else{Ab.ch[Ap]=1;}Ai.push(Ag);}break;case w.SCALE_Y:case w.SCALE_X:case w.SCALE_Y2:case w.SCALE_X2:if(Ah===w.SCALE_Y){AX=Aj.getYAxisInfo(undefined,undefined,true,false);Ad="y";}else{if(Ah===w.SCALE_X){AX=Aj.getXAxisInfo(undefined,undefined,true,false);Ad="x";}else{if(Ah===w.SCALE_Y2){AX=Aj.getYAxisInfo(undefined,undefined,false,false);Ad="y2";}else{if(Ah===w.SCALE_X2){AX=Aj.getXAxisInfo(undefined,undefined,false,false);Ad="x2";}}}}Ak=b(Am);Al=AX.ids.length;Ag="";for(Ap=0;Ap<Al;Ap++){if(Ap!==0){Ag+=",";}Ag+=AX.ids[Ap];}this[Ad+"Ids"]=Ag;Ab[Ad]=Ak[Ag]||1;break;case w.SHADE_COLOR:AY.shadeColor=isNaN(parseInt(Am,10))?undefined:parseInt(Am,10);break;case w.SHADE_OPACITY:AY.shadeOpacity=isNaN(parseFloat(Am))?undefined:parseFloat(Am);break;}},resetDataLabelDefaultAngel:function(AY){var AX=this.defaultsObj;if(AX){AX.DataLabelTextAngle=AY;}},readItem:function(AZ,AX){var Ab=this.generalProps,Aa=this.scales,Ac,AY;switch(AZ){case w.FIT_TO:if(Aa.ctw!==1||Aa.cth!==1){AY=g.MANUAL;}else{AY=Ab.fitTo;}break;case X.CONTAINER_FIT_MODE:AY=Ab[X.CONTAINER_FIT_MODE];break;case w.AXIS_SCALE:AY=Ab.axisScale;break;case w.SHAPE:AY=Ab.shape;break;case w.SUB_TYPE:AY=Ab.subtype;break;case w.DATA_LABEL:AY=Ab.dataLabels;break;case w.DATA_LABELS_PLACEMENT:AY=Ab.dataLabelPlacements;break;case w.DATA_LABELS_ROTATE:AY=Ab.dataLabelRotate;break;case w.BANDING:AY=Ab.banding;break;case w.LEGEND_VISIBLE:AY=Ab.legendShow;if(this.host&&this.host.GMController){if(!this.host.GMController.hasColorBy()&&this.host.GMController.hasSizeBy()){AY=AY&&!AQ.safeCall("host.getWidgetPropertyValue",this)(w.LEGEND_SIZEBY_HIDE);}}break;case w.LEGEND_TITLE_HIDE:AY=Ab.legendTitleHide;break;case w.LEGEND_SIZEBY_HIDE:AY=Ab.legendSizeByHide;break;case w.COL_ALIGNMENT:AY=Ab.colAlign;break;case w.ROW_ALIGNMENT:AY={};AY.h=Ab.rowAlignH;AY.v=Ab.rowAlignV;break;case w.MAX_SIZE_TYPE:AY=Ab.maxSizeType;break;case w.MAX_SIZE_VALUE:AY=Ab.maxSizeValue;break;case w.MIN_SIZE_TYPE:AY=Ab.minSizeType;break;case w.MIN_SIZE_VALUE:AY=Ab.minSizeValue;break;case w.OUTSIDE_BORDER:AY=Ab.outBorder;break;case w.AXES:AY=Ab.axes;break;case w.MATRIX_LINES:AY=Ab.matrixLine;break;case w.GRID_LINES:AY=Ab.gridLine;break;case w.LEGEND_MODE:AY=Ab.legendMode;break;case w.LEGEND_POSITION:AY=Ab.legendSlot;break;case w.SCALE_LEGEND_WIDTH:AY=Aa.lgd;break;case w.SCALE_LEGEND_HEIGHT:AY=Aa.lgdh;break;case w.SCALE_CHART_WIDTH:AY=Aa.ctw;break;case w.SCALE_CHART_HEIGHT:AY=Aa.cth;break;case w.SCALE_ROW_HEADERS:AY=Aa.rh;break;case w.SCALE_COL_HEADERS:AY=Aa.ch;break;case w.SCALE_Y:AY=Aa.y;break;case w.SCALE_X:AY=Aa.x;break;case w.SCALE_Y2:AY=Aa.y2;break;case w.SCALE_X2:AY=Aa.x2;break;case w.SCALE_ALL:AY=Aa;break;case w.SHADE_COLOR:AY=Ab.shadeColor;break;case w.SHADE_OPACITY:AY=Ab.shadeOpacity;break;default:AY=this.hGetPropValue(AZ);break;}Ac=AY;switch(AZ){case X.LINE_MARKER_SHOW:case X.LEGEND_BORDER_SHOW:case X.X_AXIS_ORIGIN_LINE_SHOW:case X.Y_AXIS_ORIGIN_LINE_SHOW:case X.X_AXIS_LINE_SHOW:case X.X_AXIS_TITLE_SHOW:case X.X_AXIS_LABELS_SHOW:case X.Y_AXIS_LINE_SHOW:case X.Y_AXIS_TITLE_SHOW:case X.Y_AXIS_LABELS_SHOW:case X.V_MATRIX_LINES_SHOW:case X.H_MATRIX_LINES_SHOW:case X.ALL_ROW_COLUMN_SHOW:case X.COLUMN_HEADER_SHOW:case X.ROW_HEADER_SHOW:case X.COLUMN_VALUES_SHOW:case X.ROW_VALUES_SHOW:case X.GRID_LINE_AUTO:case w.SORT_ORDER:case X.TOTAL_SHOW:case X.INT_SUM_SHOW:case X.INT_SUM_FULL:case X.SHOW_MODEBAR:case w.AXIS_SCALE_SYNC_MODE:case X.X_AXIS_LABELS_WRAP_TEXT:case X.X_AXIS_NESTED_LABEL:case X.AXIS_DISABLE_DRAG:if(Ac){AY=(Ac==="true"||Ac===true);}break;case w.SHOW_ALL_LABELS:if(!this.host||!this.host.isOrdinalXAxisLabelRotationEnabled()){AY=false;}else{if(Ac===undefined){var Ad=this.host&&this.host.GMController;AY=Ad&&!Ad.hasDateTimeAttr("x")&&!Ad.hasDateTimeAttr("y");}else{AY=(Ac==="true"||Ac===true);}}break;case X.MAJOR_GRID_LINES_SHOW:if(Ac===undefined){Ac=Ab.gridLine;}AY=parseInt(Ac,10);break;case X.MINOR_GRID_LINES_SHOW:if(Ac===undefined){Ac=Ab.gridLine;if(Ac===2){Ac=AD.HIDE;}}AY=parseInt(Ac,10);break;case X.X_AXIS_LABELS_ROTATION:case X.CONNECTION_LINE_STYLE:if(Ac){AY=parseInt(Ac,10);}break;case w.SORT_INDEX:if(Ac){AY={};AY.row=x(Ac).first;AY.col=x(Ac).second;}break;case w.AXIS_SCALE_DATA:if(Ac){AY=K.parseAxisScaleData(Ac);}break;case w.METRIC_SHAPES:case w.METRIC_LEVEL_DATA_LABEL:case w.AXIS_ORIGIN:case w.LOG_SCALE:case w.TREND_LINE_DEF:case w.TREND_BUBBLE_FORE_DEF:case w.REF_LINE_DEF:case w.SELECTIONS:case w.FORMATS_ON_COMBINATION:case X.ALL_SHAPE_FORMAT:var Af=this.isItemCached;var Ae=this.readItemCache;if(!Af[AZ]){Ae[AZ]=K.stringToJSON(AY);Af[AZ]=true;}AY=Ae[AZ];break;case w.SCALE_V_EXTRA_LINE:AY=parseFloat(AY)||1;break;case w.MAX_SIZE_VALUE:case w.MIN_SIZE_VALUE:case w.SHADE_EXTENT_VALUE:if(Ac){AY=parseFloat(Ac);}break;case X.REF_LABELS_FONT_FAMILY:case X.REF_LABELS_FONT_SIZE:case X.REF_LABELS_FONT_STYLE:case X.REF_LABELS_FONT_COLOR:if(Ac&&typeof Ac==="string"&&Ac.indexOf("{")>=0){AY=K.stringToJSON(Ac);}break;case w.AXIS_RATIO_LIMIT_X:case w.AXIS_RATIO_LIMIT_Y:case X.POINT_SIZE:case X.POINT_POS:case X.JITTER:case X.JTR_TYPE:case X.PTSZ_TYPE:case X.PTPOS_TYPE:if(Ac){AY=parseFloat(Ac);}break;case X.XBINS_START:case X.XBINS_END:case X.XBINS_SIZE:if(Ac){AY=parseFloat(Ac);}case X.POSITIVE_COLOR:case X.NEGATIVE_COLOR:case X.TOTAL_COLOR:case X.INT_SUM_COLOR:case X.START_COLOR:if(AY==="default"){AY=undefined;}default:break;}if(AY===undefined){if(!AX){AY=this.defaultsObj&&this.defaultsObj[AZ];}}else{if(AZ.slice(-3)==="Clr"&&typeof AY==="string"){if(AY!=="transparent"){if(isNaN(AY)){AY=K.stringToJSON(AY);}else{AY=parseInt(AY,10);}}}}if(typeof AY==="string"&&!isNaN(AY)){AY=parseInt(AY,10);}return AY;},clearReadItemCache:function(){this.isItemCached={};},updateItem:function(AZ,AY){var Ab=this.scales,AX=this.generalProps,Aa=K.everythingToString(AY);this.clearReadItemCache();switch(AZ){case w.FIT_TO:AY=AY===s.Manual?AX.fitTo:AY;AX.fitTo=AY;Aa=AK[AY===s.Manual?AX.fitTo:AY];break;case w.AXIS_SCALE:AX.axisScale=AY;Aa=q[AY];break;case w.SHAPE:AX.shape=AY;Aa=d[AY];break;case w.SUB_TYPE:AX.subtype=AY;Aa=U[AY];if(!Aa){Aa=AY;}break;case w.DATA_LABEL:AX.dataLabels=AY;Aa=a[AY];break;case w.DATA_LABELS_PLACEMENT:if(typeof AY==="boolean"){AX.dataLabelPlacements=AY?1:2;}else{AX.dataLabelPlacements=AY;}Aa=AO[AX.dataLabelPlacements];break;case w.DATA_LABELS_ROTATE:AX.dataLabelRotate=AY;break;case w.BANDING:AX.banding=AY;break;case w.LEGEND_VISIBLE:AX.legendShow=AY;Aa=AY?"Show":"Hide";break;case w.LEGEND_TITLE_HIDE:AX.legendTitleHide=AY;Aa=(AY==="true"||AY===true);break;case w.LEGEND_SIZEBY_HIDE:AX.legendSizeByHide=AY;Aa=(AY==="true"||AY===true);break;case w.ROW_ALIGNMENT:AX.rowAlignH=AY.h;AX.rowAlignV=AY.v;Aa=AY.h+","+AY.v;break;case w.COL_ALIGNMENT:AX.colAlign=AY;break;case w.MAX_SIZE_TYPE:AX.maxSizeType=AY;Aa=AN[AY];break;case w.MAX_SIZE_VALUE:AX.maxSizeValue=AY;break;case w.MIN_SIZE_TYPE:AX.minSizeType=AY;Aa=AF[AY];break;case w.MIN_SIZE_VALUE:AX.minSizeValue=AY;break;case w.OUTSIDE_BORDER:AX.outBorder=AY;Aa=AY?"Show":"Hide";break;case w.AXES:AX.axes=AY;Aa=A[AY];break;case w.MATRIX_LINES:AX.matrixLine=AY;Aa=AU[AY];break;case w.GRID_LINES:AX.gridLine=AY;Aa=l[AY];break;case w.LEGEND_MODE:AX.legendMode=AY;break;case w.LEGEND_POSITION:AX.legendSlot=AY;break;case w.SCALE_LEGEND_WIDTH:Ab.lgd=AY;break;case w.SCALE_LEGEND_HEIGHT:Ab.lgdh=AY;break;case w.SCALE_CHART_WIDTH:Ab.ctw=parseFloat(AY)||1;break;case w.SCALE_CHART_HEIGHT:Ab.cth=parseFloat(AY)||1;break;case w.SCALE_ROW_HEADERS:Ab.rh=AY;Aa=F(this.rhIds,Ab.rh);break;case w.SCALE_COL_HEADERS:Ab.ch=AY;Aa=F(this.chIds,Ab.ch);break;case w.SCALE_Y:Ab.y=AY;Aa=this.yIds+":"+Ab.y;break;case w.SCALE_X:Ab.x=AY;Aa=this.xIds+":"+Ab.x;break;case w.SCALE_Y2:Ab.y2=AY;Aa=this.y2Ids+":"+Ab.y2;break;case w.SCALE_X2:Ab.x2=AY;Aa=this.x2Ids+":"+Ab.x2;break;case w.SORT_INDEX:Aa=AY.row+","+AY.col;break;case w.SHADE_COLOR:AX.shadeColor=AY;break;case w.SHADE_OPACITY:AX.shadeOpacity=AY;break;default:break;}this.hSetPropValue(AZ,Aa);},removeItem:function(AX){this.hRemoveProp(AX);},updateItems:function(Aa,AX){var AY,AZ=Aa.length;for(AY=0;AY<AZ;AY++){this.updateItem(Aa[AY],AX[AY]);}},setController:function(AX){this.controller=AX;this.initItem(w.SCALE_ROW_HEADERS);this.initItem(w.SCALE_COL_HEADERS);this.initItem(w.SCALE_Y);this.initItem(w.SCALE_X);this.initItem(w.SCALE_Y2);this.initItem(w.SCALE_X2);},initHTML5Props:function(AZ){var Af=this.readItem,An=AZ.LEGEND={},Au=AZ.BK={},Ar=AZ.RH_BK={},Ak=AZ.CH_BK={},Ai=AZ.RH_TITLE={},Ag=AZ.RH={},Aj=AZ.CH_TITLE={},Ac=AZ.CH={},Am=AZ.AXIS_LABEL_X={},Al=AZ.AXIS_LABEL_Y={},At=AZ.AXIS_TITLE_X={},As=AZ.AXIS_TITLE_Y={},Ad=AZ.AXIS_LINE_X={},Ab=AZ.AXIS_LINE_Y={},Ap=AZ.MATRIX_LINE_H={},Ae=AZ.MATRIX_LINE_V={},AY=AZ.GRID_LINE_MAJOR={},Ah=AZ.GRID_LINE_MINOR={},AX=AZ.OUTSIDE_BORDER={},Aw=function(A0,Ax,Ay){if(Ax===e.Gradient){Ay=K.decodeColor(Ay);var Az=E.buildGradient(Ay.or,Ay.c1,Ay.c2);if(Az){A0[Az.n]=Az.v;}}else{A0.backgroundColor=K.decodeColor(Ay);}},Av=function(Ay,Ax){Ay.fontWeight=(Ax&H.FS_BOLD?"bold":"normal");Ay.fontStyle=(Ax&H.FS_ITALIC?"italic":"normal");if((Ax&H.FS_STRIKETHROUGH)&&(Ax&H.FS_UNDERLINE)){Ay.textDecoration="line-through underline";}else{if(Ax&H.FS_STRIKETHROUGH){Ay.textDecoration="line-through";}else{if(Ax&H.FS_UNDERLINE){Ay.textDecoration="underline";}else{Ay.textDecoration="none";}}}},Ao=function(Ax){var Ay=["solid","dashed","dotted"];return Ay[Ax]||"none";};An.fontFamily=Af.call(this,X.LEGEND_FONT_FAMILY);An.fontSize=Af.call(this,X.LEGEND_FONT_SIZE);Av(An,Af.call(this,X.LEGEND_FONT_STYLE));An.color=K.decodeColor(Af.call(this,X.LEGEND_FONT_COLOR));Aw(An,Af.call(this,X.LEGEND_BG_FILL_STYLE),Af.call(this,X.LEGEND_BG_COLOR));An.opacity=Af.call(this,X.LEGEND_BG_FILL_TRANSPARENCY)/100;if(Af.call(this,X.LEGEND_BORDER_SHOW)){An.borderWidth=parseInt(Af.call(this,X.LEGEND_BORDER_THICKNESS),10)+"px";An.borderStyle=Ao(Af.call(this,X.LEGEND_BORDER_LINE_STYLE));An.borderColor=K.decodeColor(Af.call(this,X.LEGEND_BORDER_COLOR));}var Aq=this.host&&this.host.supportFeature("ftFgGrpA","ReadBackgroundColorFromDefn");if(Aq){var Aa=this.host.getFormats()["background-color"];if(Aa===undefined){Aa="transparent";}Aw(Au,Af.call(this,X.BG_FILL_STYLE),Aa);}else{Aw(Au,Af.call(this,X.BG_FILL_STYLE),Af.call(this,X.BG_COLOR));}Au.opacity=Af.call(this,X.BG_FILL_TRANSPARENCY)/100;Aw(Ar,Af.call(this,X.ROW_HEADER_FILL_STYLE),Af.call(this,X.ROW_HEADER_FILL_COLOR));Ar.opacity=Af.call(this,X.ROW_HEADER_FILL_TRANSPARENCY)/100;Aw(Ak,Af.call(this,X.COLUMN_HEADER_FILL_STYLE),Af.call(this,X.COLUMN_HEADER_FILL_COLOR));Ak.opacity=Af.call(this,X.COLUMN_HEADER_FILL_TRANSPARENCY)/100;Ai.fontFamily=Af.call(this,X.ROW_HEADER_TEXT_FONT_FAMILY);Ai.fontSize=Af.call(this,X.ROW_HEADER_TEXT_FONT_SIZE);Av(Ai,Af.call(this,X.ROW_HEADER_TEXT_FONT_STYLE));Ai.color=K.decodeColor(Af.call(this,X.ROW_HEADER_TEXT_FONT_COLOR));Aj.fontFamily=Af.call(this,X.COLUMN_HEADER_TEXT_FONT_FAMILY);Aj.fontSize=Af.call(this,X.COLUMN_HEADER_TEXT_FONT_SIZE);Av(Aj,Af.call(this,X.COLUMN_HEADER_TEXT_FONT_STYLE));Aj.color=K.decodeColor(Af.call(this,X.COLUMN_HEADER_TEXT_FONT_COLOR));Ag.fontFamily=Af.call(this,X.ROW_VAVLUE_TEXT_FONT_FAMILY);Ag.fontSize=Af.call(this,X.ROW_VAVLUE_TEXT_FONT_SIZE);Av(Ag,Af.call(this,X.ROW_VAVLUE_TEXT_FONT_STYLE));Ag.color=K.decodeColor(Af.call(this,X.ROW_VAVLUE_TEXT_FONT_COLOR));Ac.fontFamily=Af.call(this,X.COLUMN_VAVLUE_TEXT_FONT_FAMILY);Ac.fontSize=Af.call(this,X.COLUMN_VAVLUE_TEXT_FONT_SIZE);Av(Ac,Af.call(this,X.COLUMN_VAVLUE_TEXT_FONT_STYLE));Ac.color=K.decodeColor(Af.call(this,X.COLUMN_VAVLUE_TEXT_FONT_COLOR));Al.fontFamily=Af.call(this,X.Y_AXIS_LABELS_FONT_FAMILY);Al.fontSize=Af.call(this,X.Y_AXIS_LABELS_FONT_SIZE);Av(Al,Af.call(this,X.Y_AXIS_LABELS_FONT_STYLE));Al.color=K.decodeColor(Af.call(this,X.Y_AXIS_LABELS_FONT_COLOR));Am.fontFamily=Af.call(this,X.X_AXIS_LABELS_FONT_FAMILY);Am.fontSize=Af.call(this,X.X_AXIS_LABELS_FONT_SIZE);Av(Am,Af.call(this,X.X_AXIS_LABELS_FONT_STYLE));Am.color=K.decodeColor(Af.call(this,X.X_AXIS_LABELS_FONT_COLOR));As.fontFamily=Af.call(this,X.Y_AXIS_TITLE_FONT_FAMILY);As.fontSize=Af.call(this,X.Y_AXIS_TITLE_FONT_SIZE);Av(As,Af.call(this,X.Y_AXIS_TITLE_FONT_STYLE));As.color=K.decodeColor(Af.call(this,X.Y_AXIS_TITLE_FONT_COLOR));At.fontFamily=Af.call(this,X.X_AXIS_TITLE_FONT_FAMILY);At.fontSize=Af.call(this,X.X_AXIS_TITLE_FONT_SIZE);Av(At,Af.call(this,X.X_AXIS_TITLE_FONT_STYLE));At.color=K.decodeColor(Af.call(this,X.X_AXIS_TITLE_FONT_COLOR));Ad.borderWidth=parseInt(Af.call(this,X.X_AXIS_LINE_THICKNESS),10)+"px";Ad.borderColor=K.decodeColor(Af.call(this,X.X_AXIS_LINE_COLOR));Ad.borderTopStyle=Ao(Af.call(this,X.X_AXIS_LINE_STYLE));Ab.borderWidth=parseInt(Af.call(this,X.Y_AXIS_LINE_THICKNESS),10)+"px";Ab.borderColor=K.decodeColor(Af.call(this,X.Y_AXIS_LINE_COLOR));Ab.borderLeftStyle=Ao(Af.call(this,X.Y_AXIS_LINE_STYLE));Ap.borderWidth=parseInt(Af.call(this,X.H_MATRIX_LINES_THICKNESS),10)+"px";Ap.borderColor=K.decodeColor(Af.call(this,X.H_MATRIX_LINES_COLOR));Ap.borderTopStyle=Ao(Af.call(this,X.H_MATRIX_LINES_STYLE));Ae.borderWidth=parseInt(Af.call(this,X.V_MATRIX_LINES_THICKNESS),10)+"px";Ae.borderColor=K.decodeColor(Af.call(this,X.V_MATRIX_LINES_COLOR));Ae.borderLeftStyle=Ao(Af.call(this,X.V_MATRIX_LINES_STYLE));AY.borderWidth=parseInt(Af.call(this,X.MAJOR_GRID_LINES_THICKNESS),10)+"px";AY.borderColor=K.decodeColor(Af.call(this,X.MAJOR_GRID_LINES_COLOR));AY.borderTopStyle=Ao(Af.call(this,X.MAJOR_GRID_LINES_STYLE));AY.borderLeftStyle=AY.borderTopStyle;Ah.borderWidth=parseInt(Af.call(this,X.MINER_GRID_LINES_THICKNESS),10)+"px";Ah.borderColor=K.decodeColor(Af.call(this,X.MINER_GRID_LINES_COLOR));Ah.borderTopStyle=Ao(Af.call(this,X.MINER_GRID_LINES_STYLE));Ah.borderLeftStyle=Ah.borderTopStyle;AX.borderWidth=parseInt(Af.call(this,X.OUTSIDE_BORDER_THICKNESS),10)+"px";AX.borderColor=K.decodeColor(Af.call(this,X.OUTSIDE_BORDER_COLOR));AX.borderLeftStyle=Ao(Af.call(this,X.OUTSIDE_BORDER_STYLE));AX.borderTopStyle=Ao(Af.call(this,X.OUTSIDE_BORDER_STYLE));},readItemDefault:function(Ac,Aa){var Ab,AY={CIRCLE:0.7,Bar:0.7,AREA:0.7,PIE:0.8,RING:0.8},AZ={CIRCLE:2,Bar:1,AREA:2,PIE:1,RING:1},AX={1:AV.Stacked,2:AV.Automatic,0:AV.Automatic};switch(Ac){case X.X_AXIS_TITLE_SHOW:case X.Y_AXIS_TITLE_SHOW:Ab=!!Aa.isMetric;break;case X.SHAPE_FILL_TRANSPARENCY:Ab=AY[Aa.shapeType];break;case X.SHAPE_BORDER_THICKNESS:Ab=AZ[Aa.shapeType];break;case w.SUB_TYPE:Ab=AX[Aa.shapeType];break;}return Ab;},consumeJsonFmt:function(AY){var Aa,AZ=[],AX=[];for(Aa in AY){if(AY.hasOwnProperty(Aa)){AZ.push(Aa);AY[Aa]=c(Aa,AY[Aa],this.templateObjectMapping);AX.push(AY[Aa]);}}this.xmlData=this.makeDefaultPropXML(AZ,AX);this.jsonData=AY;},hSyncWithJson:function(AZ,AY,Aa){var AX=this.jsonData;if(AX){if(Aa){delete AX[AZ];}else{AX[AZ]=AY;}}},hGetPropValue:function(Ab){var Aa,AY=this.jsonData,AZ;if(AY){return AY[Ab];}Aa=AM.call(this);if(Aa){var AX=Aa.getElementsByTagName("fmt")[0],Ac=AX.getElementsByTagName(Ab)[0];if(Ac){AZ=Ac.getAttribute("value");return c(Ab,AZ,this.templateObjectMapping);}}return undefined;},hRemoveProp:function(AZ){this.hSyncWithJson(AZ,"",true);var AY=AM.call(this),AX=AY.getElementsByTagName("fmt")[0],Aa=AX.getElementsByTagName(AZ)[0];if(Aa){Aa.parentNode.removeChild(Aa);this.xmlData=Q(AY);this.xmlDirty=true;}return this.xmlData;},hSetPropValue:function(Aa,AZ){if(typeof AZ==="undefined"){return this.hRemoveProp(Aa);}if((typeof AZ)!=="string"){AZ=AZ.toString();}this.hSyncWithJson(Aa,AZ);var AY=AM.call(this),AX=AY.getElementsByTagName("fmt")[0],Ab=AX.getElementsByTagName(Aa)[0];if(!Ab){Ab=AY.createElement(Aa);AX.appendChild(Ab);}Ab.setAttribute("value",h.call(this,Aa,AZ));this.xmlData=Q(AY);this.xmlDirty=true;return this.xmlData;},hSetPropValues:function(Ae,Ad){var Ab,Aa,AX,Ac,AY=Ae.length,Af=AM.call(this),AZ=Af.getElementsByTagName("fmt")[0];for(Ab=0;Ab<AY;Ab++){AX=Ae[Ab];Ac=Ad[Ab];this.hSyncWithJson(AX,Ac);Aa=AZ.getElementsByTagName(AX)[0];if(!Aa){Aa=Af.createElement(AX);AZ.appendChild(Aa);}Aa.setAttribute("value",h.call(this,AX,Ac));}this.xmlData=Q(Af);this.xmlDirty=true;return this.xmlData;},clearCachedXMLDoc:function(){if(this.xmlDoc){delete this.xmlDoc;}},setTemplateObjectMapping:function(AX){this.templateObjectMapping=AX;},makeDefaultPropXML:function f(Ad,Ae){var Aa,AZ,AX=Ad.length,Ac=new window.DOMParser(),Ab="<props><widgetProps><fmt></fmt></widgetProps></props>",Af=Ac.parseFromString(Ab,"text/xml"),AY=Af.getElementsByTagName("fmt")[0];for(Aa=0;Aa<AX;Aa++){AZ=Af.createElement(Ad[Aa]);AZ.setAttribute("value",h.call(this,Ad[Aa],Ae[Aa]));AY.appendChild(AZ);}return Q(Af);}});mstrmojo.gm.GMProperty.getUnderlyingPropertyNameWithAll=function(AX){return(S[AX]||AX).split(":");};mstrmojo.gm.GMProperty.convertToReferenceFormat=h;}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.expr","mstrmojo.num","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.XMLBuilder","mstrmojo.models.template.DataInterface","mstrmojo.models.datasets.DataInterface","mstrmojo.util.XtabHelper","mstrmojo.vi.enums.EnumFeatures","mstrmojo.EnumSubtotals","mstrmojo.models.TransactionsInterface","mstrmojo.XMLParser","mstrmojo.gm.GMUtility","mstrmojo.ag.EnumColumnDefnValues","mstrmojo.chart.model.enums.EnumDSSBaseFormType");var a=mstrmojo.string,L=mstrmojo.array,R=mstrmojo.hash,i=mstrmojo.func,AP=mstrmojo.expr.TP,AE=mstrmojo.expr.BFTP,D=mstrmojo.chart.model.enums.EnumDSSBaseFormType,o=mstrmojo.models.template.DataInterface,AX=mstrmojo.models.datasets.DataInterface,AT=mstrmojo.models.TransactionsInterface,X=mstrmojo.util.XtabHelper,B=o.ENUM_ROW_ARRANGEMENT,g=o.ENUM_GRID_RESIZE,z=mstrmojo.vi.enums.EnumFeatures,Y=mstrmojo.vi.viz.EnumDSSDropZones,d=mstrmojo.num,AF=d.UNIT,e=o.ENUM_LOCKED_HEADERS,AD=g.FIXED,AL=mstrmojo.gm.GMUtility,Q=mstrmojo.mstr.EnumDSSXMLObjectTypes,c=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,q=mstrmojo.EnumSubtotals.TYPES,I=q[0].v,k=AT.ENUM_INPUT_VALUE_TYPES,O=-1,AU="-1";var w=mstrmojo.ag.EnumColumnDefnValues.PIN_LEFT;var G="%2E";var AM=12,K=16,AI=36;var AH="General";var AQ="transaction-pending",l="transaction-spanned-cell-pending",AK="transaction-total-cell-in-update-row";var AR="has-multi-attribute-forms",N="is-not-last",h="in-group",s="in-locked-row-header";var F=function F(){return 1;};var b="@pLd",E={chartCfg:"chartCfg",colorTrend:"clr_trd"};var j=new mstrmojo.XMLParser();var W={TEXTFIELD:"1",SWITCH:"2",DROPDOWN:"3",SLIDER:"4"};function AS(Ac,Ab){while(!Ac[Ab]&&Ab>0){Ab--;}return Ac[Ab];}function AZ(Ac,Ah,Ae,Ag,Af){var Ab,Ad=1;Ab=Ac.getNewHeader(Ah.hostCell,Ah.hostCell.v,Ae,Ag,Af);Ab.headerName="";Ab.field+="_"+Ad;Ab.headerComponentParams.isMockHeader=true;return Ab;}function H(Ae){if(!Array.isArray(Ae)||Ae.length===0){return ;}var Ah=Ae.length-1,Ab=Ae[Ah],Ad=Ab&&Ab.attrForms;if(!Ad||Ad<=1){return ;}var Ac=Ah-Ad+1;if(Ac<0){return ;}var Ag=Ae[Ac],Af=Ag&&Ag.headerClass;if(!Array.isArray(Af)){return ;}if(Af.includes(AR)&&!Af.includes(N)){Af.push(N);}}function AN(BG,BR,BQ,BT,BD){var Al=this,Ar=Al.agColumnDefs,A5=BT.headerRowSpan,BM=BT.cellsToMerge,BK=BT.columnRowOffset,BF=Al.headers,Af=Al.headerObjects,An=Al.treeMap,Ak=Al.titleZone,Am=BT.isColumnsOnly,BH=BT.isHeaderRowEmpty,BL=BT.isShowRowHeaders,A6=BT.isOutlineMode,At=BT.rowHeaderUnits-1,BC=BR.v,A0=BR.rv,BO=BR.isObjHeader,Aw=BR.axis,A2=BR.ui,Ay=BR.cs,Ac=BR.ts,As=BR.hasOwnProperty("fi"),BN=Aw===Y.Columns,A7=As&&BN,BJ=Ac===AE.PICTURE,BP=Al.data.eg,Ax,Ag,BA=!!BR.hostCell;var Ao=a.decodeHtmlString(BC,true);var BB,Az,Av,A3,Ap,BI,A9,BS,Aj,Ab,Au,Aq,A8,Ai,Ae,A1,BU,Ad,Ah=mstrmojo.all[this.hostId],A4=Ah.handler;if(BO||BN||BR.otp===O||A7||BA){if(BH&&BR.rs>1){BR.rs=1;}BB=BT.cellOffset;if(BR.pi&&BB<BT.cellOffsetBase+BR.oi){BB=BT.cellOffsetBase+BR.oi;}Az=BA?AZ(Al,BR,BT,BB,BP):null;Av=Az||Al.getNewHeader(BR,Ao,BT,BB,BP);A3=Al.isAgColumnDefsSet;if(BR.pi){BR.dpt=BR.dpt||((BR._p&&BR._p.dpt||0)+1);BR.colIx=BB;A9=BT.curRow;BS=A9;if(BR.isNDE){if(As){BK[BR.oi]=BR.fi;}else{if(BR.rs>1){BS+=BR.rs-1;BK[BR.oi]=BR.rs-1;}}}An[BS]=An[BS]||{};An[BS][BR.oi]=An[BS][BR.oi]||Av;if(BR.pi.hasOwnProperty("ri")&&BR.pi.hasOwnProperty("ci")){if(BR.isNDE&&!As){Aj=BK.hasOwnProperty(BR.oi)?BK[BR.oi]:0;Ap=An[BR.pi.ri+Aj][BR.oi]||An[BR.pi.ri+Aj][BR._p.o];delete BK[BR.oi];}else{Ap=An[BR.pi.ri][BR.oi];Ap=Ap||An[BR.pi.ri][BR._p.o];Ap=Ap||(An[BR.ui]&&An[BR.ui][BR.oi]);Ap=Ap||(An[BR._p.dpt]&&An[BR._p.dpt][BR.oi]);}}else{if(A9>0){Ap=An[A9-1][BR.oi]||(BR._p&&An[A9-1][BR._p.o])||AS(An[A9-1],BR.oi);}}if(Ap){Al.addToHeaderGroup(Ap,Av);}else{if(!A3){Ar.push(Av);}}BT.cellOffset=BT.cellOffsetBase+BR.oi;}else{if(!BN){BI=BR.fix||1;}else{BI=1;}Ab=BT.curRow>0;Au=function(){var BZ,BW,BY,BV,BX;if(Ay>1&&!BN){for(BX=1;BX<Ay;BX++){BW=R.copy(BR);BY=BB+BX;if(BW&&BW.fs){BV=L.get(BW.fs,[BX])[0];BW.fid=(BV&&BV.id)||BW.fid;}BZ=Al.getNewHeader(BW,Ao,BT,BY,BP);BZ.headerName="";delete BZ.headerTooltip;BZ.field+="_"+BX;BZ.headerComponentParams.fi=BX;if(Ab&&Ap){if(Ap.children.length>0&&BX===1){Ap.children[Ap.children.length-1].headerClass=[AR,h];if(BT.isLockRowHeader){Ap.children[Ap.children.length-1].headerClass.push(s);}}Al.addToHeaderGroup(Ap,BZ);BY=Ap.headerGroupComponentParams.colIdx+BX;BZ.headerComponentParams.colIdx=BY;}else{if(BX===1){Ar[Ar.length-1].headerClass=[AR];if(BT.isLockRowHeader){Ar[Ar.length-1].headerClass.push(s);}}Ar.push(BZ);}BF[BY]=BZ.field;if(!Af.hasOwnProperty(BZ.field)){Af[BZ.field]=BZ;}}}};Ap=Ak.length?Ak[Ak.length-BI]:null;if(Ab&&Ap){Al.addToHeaderGroup(Ap,Av);Au();}else{if(BA){Ar.push(Az);BF[BB]=Az.field;if(!Af.hasOwnProperty(Az.field)){Af[Az.field]=Az;}}else{if(!A3&&BL){H(Ar);Ar.push(Av);Au();}}}if(!Al.isAgColumnDefsSet){Ak.push(Av);}if(BD){BT.cellOffset=BT.cellOffsetBase;BT.cellOffsetBase+=Ay||1;}}if(!Af.hasOwnProperty(Av.field)){Af[Av.field]=Av;}BF[BT.cellOffset]=Av.field;}else{if(BJ&&!BT.hasPictureCells){BT.hasPictureCells=true;}if(Am){return false;}Ax=BF[BT.cellOffset];Ag=Af[Ax];Aq=Ag&&Ag.headerComponentParams&&Ag.headerComponentParams.txn;A8=true;if((Aq&&(Aq.hasEditableMetric||Aq.isTransactionPaused||Aq.hasMetricWithActionButton||Aq.hasMetricWithPythonTxn))||BJ){A8=false;}if(A8&&A0!==undefined){Ai=A0;if(A4.isMaxWordLayoutEnabled()&&Ax){A4.setColRawValueToValue(Ax,A0,BC);}}else{Ai=BC!==undefined?BC:"";}Ae=!!L.filterOne(BM,function(BV){if(!BR._e||!BV._e){return false;}return BR._e.id===BV._e.id;});if(Ae){Ai=" ";}if(Ax&&Ag){if(typeof Ai==="string"&&(Ac===AE.TEXT||Ac===AE.URL||Ac===AE.EMAIL)){Ai=a.decodeHtmlString(Ai);}Ad=A2<At||(A2===At&&Ag.mstrType===AP.FILTER);if(A6&&Ad&&BR._e){BG[Ax]=BR._e.id+X.ENUM_GROUP_CELL_VALUE_SPLITTER+Ai;BR.origRowGroupValue=Ai;}else{BG[Ax]=Ai;}if(!BG.stt){if(BR.stt){BG.stt=Ax;BG.sttName=Ai;if(A2!==At){if(mstrApp.supportFeature(z.USE_AGGRID_V29_3_0)){if(A6&&BT.isSubtotalOnTop){BG[Ax]=null;}else{BG[Ax]=Ai;}}else{BG[Ax]=null;}}}}else{if(BR.axis===Y.Rows){if(A6&&(A2===At)){BG[Ax]=BG.sttName;}else{BG[Ax]=null;}}}BU={};if(Ag.headerComponentParams){A1=Ag.headerComponentParams;BU=A1.cellIndexMap;}else{A1=Ag.headerGroupComponentParams;}if(BU){BU[BT.curRow-A5]=BQ;}BR.colIx=A1.colIdx;if(A4.isMaxWordLayoutEnabled()){A4.setColBodyCss(Ax,BR.css);if(BJ){var BE=Math.max(0,BT.curRow-A5);A4.setColRowHasPicture(Ax,BE,true);}if(!A4.isColHtmlCalculated(Ax)){A4.setColHasHtml(Ax,Al.isHtmlContent(BR));}}}else{BR.colIx=BT.cellOffset;}BT.isHeaderRow=false;}if(BR.rs>1||(Ag&&Ag.colSpan({data:BG})>1)){BT.rowsToRedraw[BT.curRow]=true;}BT.cellOffset+=Ay||1;return true;}function P(Ad,Ab,Ac){if("o" in Ad){Ad.oi=Ad.o;if(Ab&&Ad.o===Ac[Ab-1].o){Ad.oi=Ac[Ab-1].oi+1;}}}function C(Ac){var Ab={};L.ensureArray(Ac).reduce(function(Ae,Af,Ad){Ab[Ad]=Ae;return Ae+Af.cols.length;},0);return Ab;}function p(Af,Ae,Ag){var Ad=o.getGSI(Af,Ae),Ab=L.hash(Ag.attrId),Ac=-1;L.forEach(Ad.cols,function(Ai,Ah){if(Ab[Ai.did]||Ai.t===AP.METRIC){return false;}Ac=Ah;return true;});return Ac;}function AB(Ad,Ab){var Ac=R.walk(Ad.setIdx+"."+Ad.did,this.thresholdsIndexLookup);return Ad.ui+(Ad.ui<=Ab?(";"+(Ac!==undefined?Ac:Ad.idx)):"");}function M(Ai,Aq,Ac){var Ah=Ac.col,Am=[],An={},Af=[],As=[],Aj={},Ag="",Ae={},Ar,Ab,Ad,Ap,Al,Ao;function Ak(Aw){var Av,Au,At;if(!Aw.children){Av=Aw.headerComponentParams;Au=Av.ui+Ac.attrFormsOffset;At=R.walk("cellRendererParams.mix",Aw);if(At===undefined){At=R.walk("cellRendererParams.mix",Ac.aggGroupHeader)||R.walk("cellRendererParams.mix",Aq);}Am.push(Aw.field);Af.push(Aw.headerName);As.push((Ac.numFmt[At]||{}).nfs||AH);Ag=Ah[Au]&&Ah[Au].n;Aj=Ac.setProp||Aj;An[Aw.field]=Av.cellIndexMap;Ae[Aw.field]=Av;return ;}L.forEach(Aw.children,function(Ax){Ak(Ax);});}Ak(Ai);Ar=Ai.headerComponentParams||Ai.headerGroupComponentParams;Ab=Ac.aggGroupHeader;Ad=Aq||Ai;Ap=Ar.ui+Ac.attrFormsOffset;Al=Ah[Ap]||{};Ao=Al.es&&Al.es[Ar.idx];Ab.allFields=R.copy(Ai.allFields,Ab.allFields)||{};Ab.allFields[Ai.field]=true;Ad.chartCfg=Ac.setCfg;Ad.xaxisLabel=(Ad.xaxisLabel||[]).concat(Af);Ad.xaxisTitle=Ag;Ad.yaxisTitle=Ao&&Ao.n;Ad.numFmt=(Ad.numFmt||[]).concat(As);Ad.xaxis=(Ad.xaxis||[]).concat(Am);Ad.cellIndexMap=R.copy(An,(Ad.cellIndexMap||{}));Ad.aggHeaderComponentParams=R.copy(Ae,(Ad.aggHeaderComponentParams||{}));(Ad.headerComponentParams||Ad.headerGroupComponentParams).format=Ac.chartFormat||{};Ad.setProp=Aj;Ai.headerName=Aq.headerName;Ai.cellRenderer=Ac.chartRenderer;Ai.headerComponentParams=Ai.headerComponentParams||Ai.headerGroupComponentParams;delete Ai.children;delete Ai.headerGroupComponentParams;}function J(Ad,Ac,Ah,Ab){var Aj=this,Ag=Ad.headerComponentParams||Ad.headerGroupComponentParams,Af=AB.call(Aj,Ag,Ac),Ak,Ai,Ae;if(!Ah.chdGroup){Ah.chdGroup={};L.forEach(Ah.children,function(Am){var An=Am.headerComponentParams||Am.headerGroupComponentParams,Al=AB.call(Aj,An,Ac);Ah.chdGroup[Al]=Am;});}Ak=Ah.chdGroup[Af];if(!Ak){Ah.children.push(Ad);Ah.chdGroup[Af]=Ad;Ae=Ad;}else{Ai=Ak.headerComponentParams||Ak.headerGroupComponentParams;Ai.format=Ab.chartFormat||{};Ae=Ak;}if(Ag.ui<=Ac){L.forEach(Ad.children,function(Al){J.call(Aj,Al,Ac,Ae,Ab);});}else{Ad.colSpan=F;M(Ad,Ae,Ab);}if(Ab.aggGroupHeader.allFields){Ab.aggGroupHeader.allFields[Ad.field]=true;}}function t(Ae,Ad,Ac){var Ab;if(!Ae){return ;}L.forEach(Ae.children,function(Af){t(Af,Ae,Ac);});if(!Ae.children&&!Ac.params){Ac.params=Ae.headerComponentParams;}if(Ad){Ae.headerName=Ad.headerName;if(Ad.headerGroupComponentParams||Ad.headerComponentParams){Ab=(Ad.headerGroupComponentParams||Ad.headerComponentParams);if(Ae.hasOwnProperty("headerGroupComponentParams")){Ae.headerGroupComponentParams=Ab;}else{Ae.headerComponentParams=Ab;}}}}function S(Ab){L.forEach(Ab,function(Ad,Ac){if(!Ad||Ad.startsWith(b)){Ab[Ac]=Ad;}else{Ab[Ac]=b+Ad;}});}function n(Ac,Ah,Ae){var Ab=false,Ad,Ai,Ag;for(Ad=0;Ad<Ac.length;Ad++){Ai=Ac[Ad];if(Ai.stt){if(Ae){if(Ad>0&&Ai.pi&&(Ai.pi.hasOwnProperty("ri")||Ai.pi.hasOwnProperty("ci"))){Ab=true;Ag=Ac[Ad-1];var Af=(Ai.hst&&Ai.hst!==I||Ai.hsi);if(Ai._e&&Af&&Ag&&Ag._e&&Ag.v===Ag._e.n){Ag.v+=" ("+Ai._e.n+")";}}}break;}}Ah.exclude=Ab;return Ah;}function AO(Ai,Ah,Ad){var Ac=Ai.ck,Ag=Ac&&Ai[Ac],Af,Ab,Ae;if(Ag){Af=Ag.did;if(Af&&Ad[Af]){Ab=Ad[Af].att;Ae=Ab&&L.filterOne(Ab,function(Aj){return Aj.did===Ag.srcid;});if(Ae){return Ah[Ac];}}}return{};}mstrmojo.ag.models.template.AgDataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.ag.models.template.AgDataInterface",data:null,cp:null,agColumnDefs:[],isAgColumnDefsSet:false,agRows:[],agStartRow:0,headers:[],headerObjects:{},thresholdsIndexLookup:{},treeMap:{},titleZone:[],dataCache:{},init:function AC(Ab){this.data=Ab.data;this.defn=Ab.defn;this.cp=Ab.cp;this.hostId=Ab.hostId;},nameToField:function y(Ab){var Ad,Ac;if(!Ab){return Ab;}Ad=Ab.split(/\s+/);Ac=Ad.map(function(Af,Ae){if(Ae===0){return Af.toLowerCase();}return Af.substr(0,1).toUpperCase()+Af.substr(1).toLowerCase();}).join("");Ac=encodeURIComponent(Ac).replace(/\./g,G);return Ac;},addToHeaderGroup:function AJ(Ae,Ag){var Ad=Ag.field,Ab=!Ae.allFields||!Ae.allFields[Ad],Ac=Ae.field!==Ag.field,Af;Ag.field=(Ae.field||"")+Ag.field;if(Ab&&Ac){if("headerComponentParams" in Ae){Ae.headerGroupComponentParams=Ae.headerComponentParams;delete Ae.headerComponentParams;}if(!Ae.children){Ae.children=[];}Ae.children.push(Ag);Ae.allFields=(Ae.allFields||{});Ae.allFields[Ad]=true;Af=Ae.headerGroupComponentParams.colIdx;Ag.headerComponentParams.colIdx=Math.max(Ag.headerComponentParams.colIdx,Af);}},isHtmlContent:function Z(Ah){var Ab=Ah.ts===D.DssBaseFormHTMLTag;if(Ab){return true;}var Aj=Ah.mix!==undefined,Ai=mstrmojo.all[this.hostId],Ag=Ai.model;if(Aj&&Ah.axis===undefined){var Ad=Ag.getFullMetricInfoFromCell(Ah,Ai);if(Ad&&Ad.mft){Ab=true;}}var Ac=Ah.isNDE&&Ah.dei===undefined;if(Ac){var Af=Ag.getFullObjectInfo(Ah.id);if(Af){Af=Ag.getFullObjectInfo(Af.attId);if(Af){var Ae=function(Ak){return Ak.fnm==="DYNAMICLINK";};if(Af.formType===D.DssBaseFormHTMLTag){Ab=true;}else{if(L.filter(Af.fs,Ae).length===1){Ab=true;}}}}}return Ab;},getNewHeader:function AW(Bb,As,Be,BI,BX){var Bg=this.data,A5=Bg.gsi,BV=Bg.ghs,Bd=Be.dataInterface.getColumnSetIndexCellBelongsTo(Bb),Ab=Be.colWidths[BI],Ax,A6=o.getGSI(A5,Bd),BJ=Bb.hasOwnProperty("mix"),BS,BW,A1,BD={rowArrangement:Be.rowArrangement},BZ={txnEditor:"mstrTextEditRenderer"},Au=Bb.axis===Y.Rows,Am=Bg.gts.row,Ba=1,Ae=1,An=mstrmojo.all[this.hostId],A2=An.hasTransaction()&&An.getTransactionConfigType()===AT.ENUM_TRANSACTION_CONFIG_TYPE.SQL,BE=An.hasTransaction()&&An.getTransactionConfigType()===AT.ENUM_TRANSACTION_CONFIG_TYPE.PYTHON,Az=An.getActionsByTxnActionType(AT.ENUM_TRANSACTION_ACTION_TYPES.UPDATE),BF=A2&&An.isTransactionActionPaused(Az&&Az[0]),BM=(A2&&!BF&&!An.isTimeZoneSensitive)||BE,BL=this.data.ddices,BB,Bc,Av,Ac,BP,Ar,A8,Al="",Aq=An.isInBulkMode(AT.ENUM_TRANSACTION_ACTION_TYPES.UPDATE),At=An.isInBulkMode(AT.ENUM_TRANSACTION_ACTION_TYPES.SELECT_OR_DELETE),Ai=An.isSingleRowTxnMode(),BY,Ag,BU=false,Bf,A0=An.hasActionButton()&&BJ,A7=BE&&BJ,BO,BH,Aj=A5.length&&A5[0].cols,BK=L.find(Aj,"t",Q.Metric)>-1,Ay=BK&&Aj[Aj.length-1].t===Q.Metric,Af="mstrCellRenderer",BT=An.isLeftMostColumn(Bb,BI,Be),A9,Ak,BQ,A4,Ah=Be.colScenario===g.FIXED,BA;if(BJ){BS=Bb.mix;BW=A6.mx[BS];BD.mix=BS;BD.min=BW.min;BD.max=BW.max;}if(BM){if(BJ){BB=BW.tmaps&&BW.tmaps[0];Bf=!!BB;}else{A1=L.filterOne(A6[Au?"rows":"cols"],function(Bh){return Bh.did===Bb.id;});if(A1&&An.isSupportedAttribute(A1)){BB=A1.tmaps&&L.filterOne(A1.tmaps,function(Bh){return Bh.fid===Bb.fid;});}}Ac=BB&&BB.ck;if(Ac){Bc=BB[Ac].txnfmt;Av=Bc.indexOf("<cp>")>-1?j.xml2Object(Bc).pr[0]:JSON.parse(Bc);if(Av.t===W.DROPDOWN&&Av.ipt===k.MANUAL&&Av.vls&&Av.wm==="0"){BH=Av.ust;BO={};Av.vls.forEach(function(Bh){BO[Bh.v]=Bh.n;});}}BY=An.isColumnEditable(BB,Bb,BW);Ag=BY&&An.hasEditableCells;if(Ag){switch(Av.t){case W.TEXTFIELD:BZ.txnEditor="mstrTextEditRenderer";break;case W.SWITCH:Af="MSTRSwitchEditRenderer";BU=true;break;case W.SLIDER:BZ.txnEditor="MSTRSliderEditRenderer";break;case W.DROPDOWN:BZ.txnEditor="mstrPulldownEditRenderer";break;default:BZ.txnEditor="mstrTextEditRenderer";break;}}}if(At&&An.isConsumptionAllowedForAction({at:AT.ENUM_TRANSACTION_ACTION_TYPES.SELECT_OR_DELETE},true)){if(mstrApp.supportFeature(z.DOSSIER_TRANSACTION)&&Au&&BT){Ar="MSTRCheckBoxHeaderRenderer";}Al=function(Bo){var Bm=Bo.colDef.field,Bi=An.handler.getAllDisplayedColumns(),Bk=Bi[0]&&Bi[0].colId===Bm,Bh=Bo.data,Bl=Bh&&Bh.stt,Bj="bulk-delete-first-cell",Bn="bulk-delete-total";if(Bl){if(Bk){return Bj+" "+Bn;}return Bn;}return Bk?Bj:"";};if(BT){BP=function(Bj){var Bh=Bj.data,Bi=Bh&&Bh.stt;return !Bi;};}}if((Aq&&(!At||!BT))||Ai){Al=function(Bl){var Bk=Bl.node,Bm=Bk.rowIndex,Bi=Bl.colDef,Bj=Bi.field,Bh={row:Bm,column:Bj};if(An.getBatchedUpdate(Bh)||i.safeCall("shouldDisplayAsBatchedForUpdate",An)(Bh,Bl)){return AQ;}if(Ai&&An.isTotalCell(Bl)){return AK;}if(An.isInSpannedCellUpdateRow(Bh)){return l;}return undefined;};}if(Au){if(Bb.hasOwnProperty("fix")&&Am.length>1){Ba=L.filter(Am,function(Bh){return Bh.id===Bb.id;}).length;Ae=Bb.fix;}else{if((Bb.hasOwnProperty("fs")&&Bb.fs.length>1)){Ba=Bb.cs||1;Ae=Bb.fs.findIndex(function(Bh){return Bh.id===Bb.fid;})+1;}}}BA=i.safeCall("doFitToContainerEnhancements",An)(true);A9=BA?true:!!Bb.isObjHeader;Ab=Ab&&parseInt(Ab.w,10);Ax=Ah?0:this.getMinWidth();if(Be.colScenario===g.FIT_TO_WINDOW){if(BI<BV.rhs.cws.length){Ax=BV.rhs.cws[BI].hasOwnProperty("mw")?parseInt(BV.rhs.cws[BI].mw,10):Ax;}else{if(BS<BV.chs.cws.length&&Ay){Ax=BV.chs.cws[BS].hasOwnProperty("mw")?parseInt(BV.chs.cws[BS].mw,10):Ax;}}}if(Ag){Ax+=K;}if(Ar){Ab+=K;}if(A8){Ab+=AI;}if(!Bb.id&&!Bb._e){Bb._e={};Bb.otp=O;}Ak="";BQ="";if(Bb.id){Ak=Bb.paraId||Bb.id;BQ=Bb.id;}else{if(Bb._e&&Bb._e.id){Ak=Bb._e.paraId||Bb._e.id;BQ=Bb._e.id;}else{if(!Bb.es){Ak=R.walk("gts.row.0.es.0.paraId",Bg)||R.walk("gts.row.0.es.0.id",Bg);BQ=R.walk("gts.row.0.es.0.id",Bg);}}}BA=i.safeCall("doFitToContainerEnhancements",An)(true);var Aw=R.walk("gsi.0.fmts.ch.atw",Bg);var BC=R.walk("fmts.rh.atw",o.getGSI(A5));var Ap=Au?BC:R.walk("fmts.va.atw",o.getGSI(A5));var Ao=mstrApp.supportFeature(z.UNIT_LEVEL_FORMATTING)&&BC;var BN=i.safeCall("handler.isFitToWindowWithMaxWordLayout",An)();A4={headerName:As,field:this.nameToField(As+Bb._ei),chartDataType:BJ?"series":"category",minWidth:Ax,width:Number.isNaN(Ab)?null:Ab,flex:BA&&(!Ah||An.useFlexColumnInTransactionMode())&&!BN?1:null,autoHeight:Be.doAutoHeight&&Ap,wrapText:Be.doAutoHeight&&Ap,pinned:(Be.isLockRowHeader&&Au)?w:"",mstrType:Bb.otp?Bb.otp:Bb._e.otp,columnSpan:Bb.cs||1,rowsSpanned:Bb.rs||1,axis:Bb.axis,wrapHeaderText:!!Aw&&!mstrApp.supportFeature(z.UNIT_LEVEL_FORMATTING),autoHeaderHeight:!mstrApp.supportFeature(z.UNIT_LEVEL_FORMATTING)||Ao,attrForms:Ba,stt:Bb.stt,colSpan:function(Bj){var Bs=Bj.data,Bm=Bs&&Bs[this.field],Bt=Bs&&Bs.stt,Bq=false,Bu=Bj.context||{},Bn=Bu.outlineMode,Br=Bj.colDef||{},Bi=Br.headerComponentParams||{},Bh=Bi.isNDE;if(!Be.isOutlineMode&&Bh&&this.attrForms>1){var Bp=this.field.split("_");var Bl=Bp.length>1?parseInt(Bp[Bp.length-1],10):0,Bv=Bp.length>1?Bp.slice(0,-1).join("_"):this.field;for(var Bk=Bl+1;Bk<this.attrForms;Bk++){var Bo=Bv+"_"+Bk;if(Bs[Bo]!==undefined){return Bk-Bl;}}return this.attrForms-Bl;}if(!Bt||Bn||Be.isPinEnabled){return 1;}Bq=this.field===Bt;if(Bq||Bm===null){return this.attrForms;}return 1;},hide:BX,editable:function(Bi){var Bh;if(BU){return false;}Bh=An.isCellEditable&&An.isCellEditable(Bi);return !!Bh;},hasEditableCells:Ag,cellRenderer:Af,singleClickEdit:Be.isTransactionMode,hasTransaction:BM,cellRendererParams:BD,cellEditorParams:BZ,checkboxSelection:BP,cellClass:Al,resizable:A9,headerComponentParams:{ei:Bb._ei,css:Bb.css,cs:Bb.cs||1,rs:Bb.rs,fi:Bb.fi,fid:Bb.fid,depth:Ae,setIdx:Bd,ui:Bb.ui,idx:Bb.idx,headerRowSpan:Be.headerRowSpan,cellIndexMap:[],cellsToMerge:Be.cellsToMerge,did:Ak,resolvedDid:BQ,isNDE:Bb.isNDE||(Bb.otp===Q.Consolidation&&Bb.ost===c.ConsolidationManaged),elemId:Bb._e&&Bb._e.id,t:Bb.otp?Bb.otp:Bb._e.otp,colIdx:BI,rowIdx:Be.curRow,txn:{data:BB,fmt:Av,hasEditableMetric:Bf,hasMetricWithActionButton:A0,hasMetricWithPythonTxn:A7,isTransactionPaused:BF,vlsMap:BO,unset:BH},stt:Bb.stt,ddic:BB&&BL?AO(BB,BL,An.model.docModel.datasets):{}}};if(Ar){A4.headerComponent=Ar;}var BR=R.walk("model.docModel.datasets",An);var BG=BR&&AX.getObjectInfoFromDataset(BJ?Bb._e&&Bb._e.oid:Ak,BR);if(!BG){var A3=R.walk("model.docModel.parameters",An)||[];L.forEach(A3,function(Bh){if(Bh.id===Ak){BG=Bh;}});}if(BG&&BG.dsc){A4.headerTooltip=BG;}if(A8){A4.headerComponent=A8;}if(BJ&&BG&&X.getSingleBarChartProps(Bg,BG.did,Bd)){A4.cellRenderer="barChartRenderer";A4.headerComponentParams.oid=BG.did;}var Ad=Be.rowArrangement===B.HR;if(mstrApp&&mstrApp.supportFeature(z.USE_AGGRID_SERVER_SIDE)&&Ad){A4.spanRows=function(Bp){var Bq=Bp.api,Bn=Bp.nodeA,Bl=Bp.nodeB,Bi=Bp.valueA,Bu=Bp.valueB,Bo=Bp.column,Br=Bb.axis===Y.Rows,Bs=Bn.spanInfo||{},Bm=Bs[Bo.colId]||[];var Bh=Be.isTransactionMode;if(Bh){return false;}if(Ai&&An.getActionButton()&&An.getActionButton().aa===mstrmojo.ag.SCRIPT_ACTION_TYPE.PYTHON){return false;}if(!Ad||!Br||(Bi!==Bu&&Bm.indexOf(Bl.id)===-1)){return false;}if(Bi===null&&Bu===null&&!!Bn.data.sttName&&!!Bl.data.sttName){return false;}var Bj=Bo.colId,Bk=Bq.getDisplayedColBefore(Bo),Bt=Bk&&Bk.colId;if(!Bk||(Bl.rowspanned&&!!Bl.rowspanned[Bt])){if(!Bk){Bl.rowspanned={};}Bl.rowspanned[Bj]=true;if(Bm.indexOf(Bl.id)===-1){Bm.push(Bl.id);Bs[Bo.colId]=Bm;Bn.spanInfo=Bs;}return true;}return false;};}return A4;},isMicroChart:function x(){return false;},reset:function u(){this.agColumnDefs=[];this.isAgColumnDefsSet=false;this.agRows=[];this.headers=[];this.headerObjects={};this.treeMap={};this.titleZone=[];},convertData:function AG(BD,Af,An){var Al=this,Ae=mstrmojo.all[this.hostId],BK=Al.data,A4=Al.dataCache,Av=R.walk("ghs.chs",BK),A8=R.walk("ghs.rhs",BK),A7=BK?(Av.items.length||(A8.items&&A8.items.length?1:0)):0,Az=o.getGSI(BK.gsi),Aw=Az.rows.length,BB=R.walk("show",BK.ghs.rhs),Am=R.walk("rw.row.tc",BK),Ab=BK?BK.gts.col:null,BM=BK?BK.gts.row:null,A1=Al.cp,BA=R.walk("data.twm.bottom",Al)||A1.colWidths,As=(Al.headers||[]).length,BH=L.find(Az.cols,"did",AU)>-1,BO=o.getRowArrangement(BK),A5=BO===B.CT,Aq=BO===B.HR,Ad=BO===B.FT,Au=new mstrmojo.models.template.DataInterface(BK),Ac=L.map(Az.mx,function(BP){return BP.did;}),Ay=Ac.length&&L.filterOne(Az.rows,function(BP){return BP.t===Q.Metric;})!==null,BN,BC,BE,Ag,BL,Ar,Ax,BF,Ao,BI,Ai,A0,Ap,A6,A2,A3,At,A9,BG;Af=Math.min(Af,BD+Am+A7-1,A1.rc-1);BL=o.isSubtotalOnTop(BK);var BJ=Az.fmts.template_fmts;var Aj=!!BJ&&mstrApp&&mstrApp.supportFeature(z.UNIT_LEVEL_FORMATTING);BN={isColumnsOnly:An,hasMicroChart:false,isHeaderRow:true,isHeaderRowEmpty:true,headerRowSpan:A7,cellOffsetBase:0,cellOffset:0,columnRowOffset:{},rowHeaderUnits:Aw,isLockRowHeader:BK.lhv===e.ROW||BK.lhv===e.BOTH,isShowRowHeaders:BB,isPinEnabled:Ae.colInfoProps.isPinEnabled,isFreezeEnabled:Ae.colInfoProps.isFreezeEnabled,hasHiddenColumns:Ae.colInfoProps.hasHiddenColumns,cellsToMerge:A1.getUnmergedCells(BD-1),treeMap:{},titleZone:[],rowSpanOffsets:[],dataInterface:Au,colScenario:Au.getColResizeScenario(),colWidths:BA,rowsToRedraw:{},isOutlineMode:X.isDisplayOutline(Al.data,Al.defn),doAutoHeight:!Aj&&((mstrApp&&mstrApp.supportFeature(z.USE_AGGRID_SERVER_SIDE)&&Aq&&!BK.rh)||(A5&&!BK.rh)||(Ad&&!BK.rh)),rowArrangement:BO,isSubtotalOnTop:BL,isTransactionMode:mstrApp&&mstrApp.isAppStateTransactionMode(),hasPictureCells:false,areObjectsInCols:false};if(As===0){if(A8&&Av){if(BM&&BM.length){As+=A8.cws.length;}if(Ab&&Ab.length){As+=Av.cws.length;}}else{As=(BA||[]).length;}}Ag=function(BP){BN.cellOffset-=BP.cs||1;};Ar=i.safeCall("supportColumnTitleSection",Ae)();Al.agRows=[];function Ah(BQ,BP){AN.call(Al,BE,BQ,BP,BN,A9);}for(BC=0;BC<A7;BC++){BN.rowSpanOffsets[BC]={};}var Ak;for(BC=BD;BC<=Af;BC++){Ax=A1.getRowCells(BC);BF=Ax.length;Ao=false;A4[BC]=Ax;if(BN.isOutlineMode){BE=R.copy(BE,{});BE.stt=false;BE=n(Ax,BE,BL);}else{BE={};}BN.curRow=BC;BN.isHeaderRow=true;if(An||BC<A7){BN.cellOffset=0;}else{BN.cellOffset=As;if(BN.isOutlineMode&&Ay&&Al.headers&&Al.headers.length){BN.cellOffset=Al.headers.length;}L.forEach(Ax,Ag);if(BN.cellOffset<0){BN.cellOffset=0;}}L.forEach(Ax,function(BQ,BP){P(BQ,BP,Ax);if(BQ._e&&(BQ.id||BQ._e.id)){BN.isHeaderRowEmpty=false;}if(BQ.pi){BN.areObjectsInCols=true;}});Ai=0;L.forEach(Ax,function(BS,BP){var BQ=BS.axis===Y.Columns,BR=BS.otp===O;if(BS.isObjHeader||BQ||BR){Ao=!!(BF<BN.colWidths.length&&BP===0);}A9=BS.v||BS.id||BS.isObjHeader||(BS._e&&BS._e.id)||(BF!==1&&BN.isHeaderRowEmpty)||!BQ||(BR&&Ar);BG=Ay&&BN.areObjectsInCols;if(A9||BG){if(Ar&&BC){if(BP===0&&BC<A7){if(!Ai){A0=Al.titleZone[Al.titleZone.length-1];if(A0&&(BS.isObjHeader||(A0.axis===BS.axis))){A6=A0.mstrType===AP.FILTER;A2=A0.axis===Y.Columns;A3=A0.axis===Y.Rows;At=BS.otp===AP.FILTER;if(A6){Ai=1;}else{if((A2&&BQ)||(A2&&A0.rowsSpanned===1)||(A3&&BS.rs)||At){Ai=(A0.columnSpan||1);}else{Ai=1;}}if(BQ&&BS.fi){Ai-=BS.fi;}}}BN.cellOffsetBase-=Ai;if(BN.cellOffsetBase<0){BN.cellOffsetBase=0;}}else{if(BR&&!BQ){BN.cellOffsetBase=BH?1:0;}}}if(BC>0&&Ao){BN.cellOffset+=BN.cellOffsetBase;}Ah(BS,BP);}});if(!BN.isHeaderRow||(BN.curRow>=A7)){Al.agRows.push(BE);if(isNaN(Ak)){Ak=BC;}}}Al.agStartRow=Math.max(0,(Ak||BD)-A7);if(!BB){Ap=0;for(BI=0;BI<BM?BM.length:0;BI++){Ap+=BM[BI].fs?BM[BI].fs.length:0;}BN.cellOffset+=Ap;}this.isAgColumnDefsSet=Al.agColumnDefs.length>0;Ae.hasPictureCells=BN.hasPictureCells;return R.keyarray(BN.rowsToRedraw,true);},addHeadersForActionButton:function A(Al){var Ah="actionButtonRenderer";var Ak=mstrmojo.all[this.hostId],Af=this.data,Ai=Ak.getDocModelForEvent(),Ad=mstrApp.isAppStatePresentation()||mstrApp.isExporting||mstrApp.isAppStatePrintPreview(),Ac,Ab,Ae,Aj,Ag;if(Ak.hasActionButton()&&(((Ak.canConfigureTransactions||!Ai.hasTxn)&&!Ad)||(Ad&&Ak.canExecuteTransactions))){if(this.agColumnDefs.length===0||this.agColumnDefs[this.agColumnDefs.length-1].ac){return ;}Ae=Ak.getActionButtonConfig();Aj=Ae.actionButtonDefn;Ag=Al.getDefaultColDef();Ag.ac=Aj;Ag.headerName=Aj.actions[0].n;Ag.buttonName=Aj.actions[0].btn;Ag.field=Ag.headerName+this.hostId;Ag.buttonFmts=Aj.fmts;Ag.headerComponentParams=R.copy(Aj,{hasActionButton:true,rowIdx:0,colIdx:0,setIdx:Af.gsi&&(Af.gsi.length||0)-1});Ag.cellRenderer=Ah;Ag.cellEditorParams={txnEditor:Ah};Ac=Af.gsi&&Af.gsi.length&&Af.gsi[Af.gsi.length-1].k;Ab=R.walk("referenceIdMap."+Ac,Ak);if(Ak.templateInterface.getColResizeScenario(Af)===AD){Ag.width=R.walk("gridProps.colInfo."+Ab+".width",Af);}if(Ag.buttonName!=null){Ag.buttonName=AL.replaceSpecialChars(Ag.buttonName);}if(Ag.headerName!=null){Ag.headerName=AL.replaceSpecialChars(Ag.headerName);}this.agColumnDefs.push(Ag);}},aggregateHeadersForMicroChart:function m(Am,An){var Aq=this,Ao,Ap,Ah,Ar,Al,Ai,Ak,Af,Ac,Ad,Ae,Aj,Ag,Ab;if(!R.isEmpty(Am)){Ao=this.data;Ap=Ao.gsi;Ah=this.agColumnDefs;Ar={};Al={};Ai=[];Ak={};Af=Ao.gts.col;Ac=0;Ad=this.thresholdsIndexLookup={};if(!R.isEmpty(Am)){Ar=C(Ap);}L.forEach(Ap,function(Au,At){var As=0;if(Au.cols.length!==0){Ab=Ar[At]+Ac;Ae=Ad[At]={};L.forEach(Af.slice(Ab),function(Av){if(Av.otp===O){return false;}Ag=0;L.forEach(Av.es,function(Aw){Aj=Aw.id;if(Ae[Aj]===undefined){Ae[Aj]=Ag;}Ag+=1;});if(Av.fix>1){As++;}return true;});}Ac+=As;Al[At]=Ac;});L.forEach(Ah,function(Av){var Ay=Av.headerComponentParams||Av.headerGroupComponentParams||{},Au,Ax=Ay.setIdx,At,Az,Aw,As;if(!Av.aggregated&&Ax in Am){Az=Am[Ax];Aw=An[Az.type].name;if(!Ak[Ax]){Ak[Ax]=Ak[Ax]||{};}At=p(Ap,Ax,Az)+(Ar[Ax]||0);Au=AB.call(Aq,Ay,At);if(!Ak[Ax][Au]){Ak[Ax][Au]=Av;Ai.push(Av);}As=Ak[Ax][Au];if(As.allFields&&As.allFields[Av.field]){return true;}J.call(Aq,Av,At,{children:[As],headerName:Az.name},{col:Af,attrFormsOffset:Al[Ax],aggGroupHeader:As,chartRenderer:Aw,chartFormat:Az.format,setCfg:Az,numFmt:(Ao.nf&&Ao.nf[Ap[Ax].k])||[],setProp:Ap[Ax].prop||{}});}else{Ai.push(Av);}return true;});L.forEach(Ai,function(Av){var Au=Av,Ay,Ax,Az,At,As,Aw;if(Au.aggregated){return false;}if(Au.hasOwnProperty("headerGroupComponentParams")||Au.hasOwnProperty("headerComponentParams")){Ay=Au.headerGroupComponentParams||Au.headerComponentParams;Ax=Ay.setIdx;if(Ax in Am){Az=Am[Ax];At=Az.name;As={};t(Au,null,As);Aw=As.params||{};if(Au.chdGroup){Aw.rs=1;}else{Aw.rs=Aw.headerRowSpan||Ay.headerRowSpan;}Aw.isChartHeader=true;if(Au.hasOwnProperty("headerGroupComponentParams")){Au.headerGroupComponentParams=Aw;}else{if(Au.hasOwnProperty("headerComponentParams")){Au.headerComponentParams=Aw;}}Au.headerName=At;Au.aggregated=true;}}return true;});this.agColumnDefs=Ai;}},getAggregatePadding:function AY(Ab){return mstrmojo.models.template.DataInterface.prototype.getAggregatePadding.call(this,Ab);},getMinWidth:function AA(){var Ac=parseInt(d.convertUnits(AF.PT,AF.PX,AM),10),Ab=parseInt(d.convertUnits(AF.PT,AF.PX,this.getAggregatePadding().h),10);return(Ab*2)+Ac;}});mstrmojo.ag.models.template.AgDataInterface.hasMicrocharts=function f(Ab){return !R.isEmpty(R.walk("vp.chartCfg",Ab));};mstrmojo.ag.models.template.AgDataInterface.getAllMicrochartKeys=function Aa(Ac){var Ab=[];o.forEachGSI(Ac,function(Ae,Ad){if(!R.isEmpty(R.walk("vp.chartCfg",Ae))){Ab.push(Ad);}});return Ab;};mstrmojo.ag.models.template.AgDataInterface.widgetPropsToJson=function AV(Af,Ae){var Ac=Af.vp,Ad=Ac&&Ac[Ae],Ab={};if(Ae){return Ad?JSON.parse(a.decodeXMLAttribute(Ad)):undefined;}Object.keys(Ac).forEach(function(Ag){Ab[Ag]=JSON.parse(a.decodeXMLAttribute(Ac[Ag]));});return Ab;};mstrmojo.ag.models.template.AgDataInterface.widgetPropsToXml=function U(Ac){var Ab=new mstrmojo.XMLBuilder();L.forEach(Ac[E.chartCfg],function(Ad){S(Ad.mid);S(Ad.aid);});Ab.addChild("props");Ab.addChild("widgetProps");Ab.addChild("fmt");R.forEach(Ac,function(Ad,Ae){Ab.addChild(Ae);Ab.addAttribute("value",mstrmojo.string.encodeXMLAttribute(JSON.stringify(Ad)));Ab.closeElement();});Ab.closeElement();Ab.closeElement();Ab.closeElement();return Ab.toString();};mstrmojo.ag.models.template.AgDataInterface.WIDGET_PROPS_ENUM=E;mstrmojo.ag.models.template.AgDataInterface.INPUT_CONTROL_TYPES=W;mstrmojo.ag.models.template.AgDataInterface.microchartColSpanFn=F;mstrmojo.ag.models.template.AgDataInterface.__UNIT_TEST__={filterTotal:n};})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.ui.editors.controls.PopupControlUtils");var b=mstrmojo,H=b.dom,J=b.hash,c=b.array,A=b.css,j=b.VisEnum.ControlType,i=mstrmojo.gm,E=mstrmojo.color,W=i.GMUtility,Q=b.VisUtility,k=i.FormatingPropertyTag,f=mstrmojo.models.FormatModel,e=f.ENUM_PROPERTY_NAMES,O=mstrmojo.chart.enums.EnumFontStyle,g=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,F=mstrmojo.VisEnum.NetworkLegendFormattingCategory,X=mstrmojo.ui.editors.controls.AdvancedColorPicker,R=mstrmojo.ui.editors.controls.PopupControlUtils,Y={GLOBAL:"glb",FORMATTING:"fmt"},C={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(s,o){var n=this.widget,p=n.domToolbarPH,q=this;n._lastOpened=null;H.emptyNode(p);document.body.appendChild(p);A.toggleClass(p,mstrApp.getThemeClassName(),true);this.configureLegendPopup(o,p);n.toolEditor=o.newInstance({unrender:function(){}});n.toolEditorClosefn=function(t){var w=t.target,u=n.toolEditor.domNode;if(!H.contains(u,w,true,u)&&!Q.isHostedPopupNode(w,"class",true,document.body)){q.hideToolbar();n.syncWithReactFormatPanel(true);}};H.attachEvent(document.body,"mousedown",n.toolEditorClosefn,true);n.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(o,n){var p;if(n===Y.GLOBAL){p=this.readGlobalProperty(o);}else{if(n===Y.FORMATTING){p=this.widget.getPropertiesOfFormatable();}}if(o.slice(-3)===C.COLOR){if(o!==k.COLOR_SQUARE_COLOR||n!==Y.GLOBAL){p=W.decodeColor(p);}}return p;}function P(o,n){var p=this;if(n===Y.GLOBAL){return function(s){var q=L.call(p,o,Y.GLOBAL);if(o===k.COLOR_SQUARE_COLOR){q=q.color;}if(!J.equals(s,q)){if(o.indexOf(C.COLOR)!==-1){s=W.encodeColor(s);}p.writeGlobalProperty(o,s);}};}return function(t,q){var s=L.call(p,o,Y.FORMATTING);if(t!==s){if(o.indexOf(C.COLOR)!==-1){t=E.encodeColor(t);}p.widget.writeFormatableProperties(o,t,q);}};}function d(o,p,n){var q=this;o=o||{};if(o.propNames===undefined){o.propNames=p;}o.onGroupValueChange=function(s,u,t){if(u!==t&&u!==undefined){(P.call(q,s,n))(u,t);}};return o;}function S(p,o,n){var q=this;c.forEach(o,function(s){var t=L.call(q,s,n);if(t!==undefined){p.setChildValue(s,t);}});}function K(o){var n="white-space: nowrap; width: 50px;";if(o===mstrmojo.desc(3905,"Background")||o===mstrmojo.desc(6242,"Color")){n="white-space: nowrap;";}else{if(o===mstrmojo.desc(2885,"Fill")){n="white-space: nowrap; margin-right: 9px;";}}return n;}function B(p,u,s,q){q=d.call(this,q,u,s);var t=this,n=function(w){w.height="22px";w.iniChildrenComp(u);S.call(t,w,u,s);},o=R.getFillConfigComp(p,q,n,K(p));return o;}function a(p,o,n){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[B.call(this,mstrmojo.desc(2885,"Fill"),p,o,J.copy({width:"140px",rowContainerCSSClass:"mstrmojo-ui-rowContainer"},n))]}]});}function l(s,p,u,t,o){var q=L.call(this,u,t),w=this;var n=new mstrmojo.ui.editors.controls.ColorPickerButton({isHostedWithin:true,width:"40px",selectedValue:q,showNoFill:true,postselectedValueChange:function(x){(P.call(w,u,t))(x.value,x.valueWas);}});if(s){n.alias=s;}if(typeof p==="string"){return R.getLabelAndControlBox(p,n,K(p));}return n;}function m(o){var n;if(o.listenToUpdateColorMap instanceof Function){n=o.listenToUpdateColorMap(function(){o.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(n&&o.detachUpdateColorMapListener instanceof Function){o.detachUpdateColorMapListener(n);}});}}function h(p,o){var n=L.call(this,p,o),q=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!n.isDefaultColor,color:n.color,widget:this.widget,colorChanged:function(s){s=(this.showAutomatic&&s===X.VAL_AUTOMATIC)?"default":s;m(q.widget);(P.call(q,p,o))(s,n.color);q.hideToolbar();},colorCanceled:function(){q.hideToolbar();}})]});}function U(u,o){var n={},t=L.call(this,o+C.FONT_STYLE,Y.GLOBAL),q=L.call(this,o+C.FONT_COLOR,Y.GLOBAL),p=L.call(this,o+C.FONT_FAMILY,Y.GLOBAL),s=L.call(this,o+C.FONT_SIZE,Y.GLOBAL);if(t!==undefined){n[e.FONT_WEIGHT]=(!isNaN(t)&&((t&O.FS_BOLD)>0));n[e.FONT_STYLE]=(!isNaN(t)&&((t&O.FS_ITALIC)>0));n[e.UNDERLINE]=(!isNaN(t)&&((t&O.FS_UNDERLINE)>0));n[e.LINE_THROUGH]=(!isNaN(t)&&((t&O.FS_STRIKETHROUGH)>0));}if(q!==undefined){n[e.COLOR]=q;}if(s!==undefined){n[e.FONT_SIZE]=s;}if(p!==undefined){n[e.FONT_FAMILY]=p;}u.setFormatSource(n);}function G(o,n){var p=null;if(n.indexOf(C.FONT_FAMILY)!==-1){p=o.fontFamily;}else{if(n.indexOf(C.FONT_STYLE)!==-1){p=o.fontStyle;}else{if(n.indexOf(C.FONT_SIZE)!==-1){p=o.fontSize;}else{if(n.indexOf(C.FONT_COLOR)!==-1){p=o.fontColor;}}}}return p;}function M(q,p,n){var o={bold:O.FS_BOLD,italic:O.FS_ITALIC,underline:O.FS_UNDERLINE,strikeout:O.FS_STRIKETHROUGH},s=this;p.forEach(function(t){var u=G(q,t);if(u){u.propName=t;if(t.indexOf(C.FONT_STYLE)!==-1){u.postselectionChange=function(w){var z=w.added,AA=u.items[(z&&z[0]!==undefined)?z[0]:w.removed[0]],y=!!z,x=L.call(s,t,n),AB=(x===undefined?0:x);if(y){AB|=o[AA.css];}else{AB&=(~o[AA.css]);}u.parent.raiseFormatValueChange(t,AB,x);};}else{if(t.indexOf(C.FONT_FAMILY)!==-1){if(window.ReactComponents){u.onSelect=function(x,w){if(x!==w){u.setFontFamily(x);u.parent.raiseFormatValueChange(t,x,w);}};u.updateComponentProps({onSelect:u.onSelect});}else{u.postselectedIndexChange=function(w){var z=w.value,y=w.valueWas;if(z!==y){var x=u.items;u.parent.raiseFormatValueChange(t,x[z].id,x[y]&&x[y].id);}};}}else{if(t.indexOf(C.FONT_SIZE)!==-1){u.postselectedValueChange=function(w){var y=parseInt(w.value,10)+"pt",x=parseInt(w.valueWas,10)+"pt";if(y!==x){u.parent.parent.raiseFormatValueChange(t,y,x);}};}else{u.postselectedValueChange=function(w){u.parent.parent.raiseFormatValueChange(t,w.value,w.valueWas);};}}}}});}function Z(o,s,q,p){var w=this;p=p||{};if(p.propNames===undefined){p.propNames=s;}if(p.onGroupValueChange===undefined){p.onGroupValueChange=function(x,z,y){if(z!==y&&z!==undefined){(P.call(w,x,Y.GLOBAL))(z,y);}};}var n={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"397px",height:"22px"};p=J.copy(n,p);var u=new mstrmojo.ui.editors.controls.CharacterGroup(p),t=G(u,k.LEGEND_FONT_COLOR);t.showNoFill=true;M.call(this,u,s,q);U.call(this,u,o);return u;}function I(s,q){var x=q.firstChild,AB=x?x.offsetWidth:0,o=x?x.offsetHeight:0,t=document.body.offsetWidth,AA=document.body.offsetHeight,u=10,w=5,z=5;if(x){x.style.left="0";x.style.right="auto";x.style.top="0";x.style.bottom="auto";}var y={w:AB,h:0};var p=o>0;if(p){y.h=o;}else{return false;}if(p){q.style.left=s.x+"px";q.style.top=s.y-o-u/2+"px";}if(s.x+y.w>t){q.style.left=s.x-AB+"px";}if(p){var n=0;if(s.y-o-u/2<w){n=w;q.style.top=n+"px";}else{if(s.y+u/2>AA){n=Math.max(AA-u-o,w);q.style.top=n+"px";}}}}function D(n,q,p,o){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[Z.call(this,n,q,p,o)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(n){this.widget=null;if(this._super){this._super(n);}if(this.widget&&!this.widget.domToolbarPH){var o;o=document.createElement("div");o.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=o;}},handleRMCOnLegend:function(AA){var t=AA.getTarget(),u=AA.e,y={x:u.pageX,y:u.pageY},x=t.getAttribute("type"),o,w,q,s=this,p=this.widget;AA.cancel();AA.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()||mstrApp.isInVFInteractMode){return ;}var z,n=function(AB){switch(AB){case j.LGD_COLORBOX_CTN:case j.LGD_COLORBOX:if(AB===j.LGD_COLORBOX){t=t.parentNode;}w=t.firstChild.identity;if(w&&w.comb){this.widget.colorSqureIdentity=w;this.selectColorBox(t,this.fmtMode);o=h.call(this,k.COLOR_SQUARE_COLOR,Y.GLOBAL);y=this.adjustColorPickerPos(t);if(!y.alignLeft){q=o.ENUM_CORNERS;o.setAlignment(q.BOTTOM_LEFT,q.TOP_RIGHT);}}break;case j.LGD_TITLE:case j.LGD_TEXT:this.selectText(true);var AC=[k.LEGEND_FONT_SIZE,k.LEGEND_FONT_FAMILY,k.LEGEND_FONT_STYLE,k.LEGEND_FONT_COLOR];o=D.call(this,"lgd",AC,Y.GLOBAL);z="lgd";break;default:this.selectLegendBody();var AD=[k.LEGEND_BG_COLOR,k.LEGEND_BG_FILL_TRANSPARENCY];o=a.call(this,AD,Y.GLOBAL);z="lgd";break;}if(o){N.call(this,y,o);if(z){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");p.parent.selectVIUnit();var AE=p.edtModel._targetPulldown;if(AE){AE.selectItemByField("v",z);}}}};n.call(this,x);I.call(this,y,this.widget.domToolbarPH);},hideToolbar:function(){var o=this.widget,p=o.domToolbarPH,s=p.firstChild,n=p.parentNode;if(s){p.removeChild(s);}if(n){n.removeChild(p);}var q=o.toolEditor;if(q){q.unrender=function(){q._super();};q.destroy();q.unrender=function(){};delete o.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(p,mstrApp.getThemeClassName(),false);}if(o.toolEditorClosefn){H.detachEvent(document.body,"mousedown",o.toolEditorClosefn,true);delete o.toolEditorClosefn;}},highlightText:function(n){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.models.FormatModel","mstrmojo.Label","mstrmojo.gm.GMUtility","mstrmojo.VisUtility","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.CustomVisUtility","mstrmojo.vi.viz.EnumVizStyles");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","CharacterGroup","FillConfigGroup","LineConfigGroup","PopupControlUtils");var c={HBOX:"HBox",LABEL:"Label",CHARACTERGROUP:"CharacterGroup",FILLGROUP:"FillGroup",LINEGROUP:"LineGroup",COLORBYGROUP:"ColorByGroup"};var P=mstrmojo.hash,L=mstrmojo.array,F=L.ensureArray,C=mstrmojo.VisUtility,R=mstrmojo.gm.GMUtility,S=mstrmojo.CustomVisUtility,M=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,G=mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS,X=mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS,U=mstrmojo.mstr.EnumDSSXMLObjectTypes,Y=S.log,I=mstrmojo.ui.editors.controls.PopupControlUtils,b=mstrmojo.vi.viz.EnumVizStyles;var B="30%",K="70%";function W(h,g){h.set("enabled",!g.disabled);var i=F(g.items);if(i.length>0&&h.getChildControl instanceof Function){i.forEach(function(j){var l=h.getChildControl(j.childName),k=j.disabled;if(l&&k!==undefined){l.set("enabled",!k);}});}}function f(g,j,i,h){g.forEach(function(m,l){m.slot="col"+(l+1)+"Node";});h=P.copy(h,{col1Width:j,col2Width:i,children:g});var k=new mstrmojo.ui.editors.controls.TwoColumnContainer(h);W(k,h);return k;}function a(h,j,k,g){var i="white-space: nowrap;"+(h.width?"width:"+h.width:"");return I.getLabelAndControlBox(h.text,j,k,g,i);}function A(h){var g={};P.forEach(h,function(j,i){g[j]=i;});return g;}function Z(h,i){var g={};if(h){P.forEach(i,function(k,j){var l=h[j];g[k]=l==="true"?true:(l==="false"?false:l);});}return g;}function O(t,h,u,k,q,j,p){var l=h.propertyName,i,n=P.walk("model.data.visName",t),o=n&&n.includes(b.INSIGHT_LINE_CHART);var m={getChildComp:q,onGroupValueChange:function(x,w){if(typeof p==="function"){p(x,w);}else{t.saveObjectProperty(l,x,w,h.config,h.showFormatPanel);}},getChildControl:function(w){return this.getChildComp(w);},showNoneOption:!o,showThickDashedOption:o};P.copyProps(["width","showGradient","showNoFill","showAutomaticInColor","visibleControls","hideColorControl"],h,m);if(h.provideDefaultWidth&&m.width===undefined){m.width="140px";}i=new u(m);if(u===mstrmojo.ui.editors.controls.LineConfigGroup){var g=i.lineColorAndStyle.lineStyle;g.showNoneOption=i.showNoneOption;g.showThickDashedOption=i.showThickDashedOption;g.postInit();}var s=j||t.getProperty(l)||{};k.forEach(function(w){i.setChildValue(w,s[w]);});i.iniChildrenComp(k);W(i,h);if(h.label){return a(h.label,i);}return i;}mstrmojo.FormatControlHelper=mstrmojo.provide("mstrmojo.FormatControlHelper",{_mixinName:"mstrmojo.FormatControlHelper",getFillGroupControl:function N(i,k){var j="fillColor",g="fillAlpha";var h=0;if(k&&k.showFillColor!==false){h|=X.FILL_COLOR;}if(k&&k.showFillAlpha!==false){h|=X.FILL_TRANSPARENCY;}k.visibleControls=h;return O(i,k,mstrmojo.ui.editors.controls.FillConfigGroup,[j,g],function(m){if(m===j){return this.fillColorAndTrans.fillColor;}if(m===g){var l=this.fillColorAndTrans.fillAlpha;return l&&l.fillAlphaText;}return undefined;},k.currentValues,k.callback);},getLineGroupControl:function E(h,j){var i="lineColor",g="lineStyle";return O(h,j,mstrmojo.ui.editors.controls.LineConfigGroup,[i,g],function(k){if(k===i){return this.lineColorAndStyle.lineColor;}if(k===g){return this.lineColorAndStyle.lineStyle;}return undefined;},j.currentValues,j.callback);},getCharacterGroupControl:function e(p,h){var g=h&&h.config,j=h.propertyName,n=0,i,k={fontSize:M.FONT_SIZE,fontColor:M.COLOR,fontFamily:M.FONT_FAMILY,fontWeight:M.FONT_WEIGHT,fontItalic:M.FONT_STYLE,fontUnderline:M.UNDERLINE,fontLineThrough:M.LINE_THROUGH};if(h){if(h.showFontFamily!==false){n|=G.FONT_FAMILY;}if(h.showFontStyle!==false){n|=G.FONT_STYLE;}if(h.showFontSizeAndColor!==false){n|=G.FONT_SIZE_AND_COLOR;}if(h.isFontSizeStepper===true){n|=G.FONT_SIZE_USE_STEPPER;}}var l={visibleControls:n,onGroupValueChange:function(t,s){if(t===M.FONT_SIZE){if(this.visibleControls&G.FONT_SIZE_USE_STEPPER){s=s[0];}s=parseInt(s,10)+"pt";}p.saveObjectProperty(j,A(k)[t],s,g,h.showFormatPanel);},getChildControl:function(s){return this[s];}};i=new mstrmojo.ui.editors.controls.CharacterGroup(P.copy(l,h));var o=p.getProperty(j),m=Z(o,k),q=m[M.FONT_SIZE];if(h.isFontSizeStepper&&q){m[M.FONT_SIZE]=[parseInt(q,10)];}i.setFormatSource(m);W(i,h);if(h.label){return a(h.label,i);}return i;},getTwoColumnControl:function D(o,g,j){var m=L.ensureArray(g.items),l=m[0],k=m[1],i,h;i=(l&&l.width)||B;h=(k&&k.width)||K;var n=j(o,m);return f(n,i,h,g);},getLabelControl:function H(h){var g=h.labelText,i=h.cssText,j=new mstrmojo.Label({text:g});if(h.width&&h.width.match(/px$/)){i+=" white-space: nowrap;width:"+h.width;}if(i){return new mstrmojo.Box({children:j,cssText:i});}return j;},getHBoxControl:function d(j,h,g){var i=L.ensureArray(h.items),l=g(j,i),k;k={scriptClass:"mstrmojo.HBox",children:l};return k;},getColorByFillGroupControl:function J(o,i){var g="fillColor";var k=o.getColorBy(i.colorInfo);if(!k){Y("could not find color in color palette, please use the colorInfo got from dataInterface");return ;}var n=o.zonesModel.getColorByAttributes();if(!n||n.length===0){return ;}var p=o.getColorByAttInfo(n),j=L.filterOne(p,function(t,q){if(!t.colorByElementIDs){return false;}var s=P.equals(L.hash(t.colorByElementIDs),L.hash(i.colorInfo));if(s){o.currColorbyAttrListIdx=q;}return s;}),l={},m=function(w,u){var q=w===g,t=[],s=[],y=i.colorInfo,x=j.comb;s.push(x);if(q){t.push(R.encodeColor(u));y.color=u;o.updateColorMap(s,t,{success:o.openFormatPanelWithColorbyGroup.bind(o)});}};l[g]=k;i.visibleControls=X.FILL_COLOR;var h=O(o,i,mstrmojo.ui.editors.controls.FillConfigGroup,[g],function(q){if(q===g){return this.fillColorAndTrans.fillColor;}return undefined;},l,m);return h;},getColorByGroupControl:function Q(s,h){var n=s&&s.edtModel,g="fillColor",q=s.zonesModel.getColorByAttributes(),t=s.getColorByAttInfo(q),p=t.map(function(w,u){return{n:w.text,title:w.text,v:u};}),m=function(u){function w(){s.currColorbyAttrListIdx=u;var x=t[u];this.setChildValue(g,x.color);}this.syncControls(w);},j,o,i={},k=C.range(1,p.length),l=function(z,y){var x=[].concat(s.currColorbyAttrListIdx||k),w=[],u=[],AB,AA;x.forEach(function(AC){AB=t[AC];AA=AB&&AB.comb;u.push(AA);w.push(R.encodeColor(y));AB.color=y;});s.updateColorMap(u,w);};h.visibleControls=X.FILL_COLOR;i[g]=t[s.currColorbyAttrListIdx||0].color;o=O(s,h,mstrmojo.ui.editors.controls.FillConfigGroup,[g],function(u){if(u===g){return this.fillColorAndTrans.fillColor;}return undefined;},i,l);j=n.getPulldown(p,m.bind(o),s.currColorbyAttrListIdx||0);if(q.length===0){j.set("enabled",false);o.set("enabled",false);}else{W(j,h);W(o,h);}return n.getEditorGroup([n.getGroupTitle(mstrmojo.desc(13753,"Shape Color")),j,o]);}});mstrmojo.FormatControlHelper.FORMAT_CONTROL_TYPE=c;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.VisEnum","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.VisUtility","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.array");var K=mstrmojo.gm,G=mstrmojo.dom,J=mstrmojo.css,B=K.GMUtility,H=mstrmojo.VisUtility,I=mstrmojo.array,M=K.EnumIdentityType,P=mstrmojo.VisEnum.ControlType,O=mstrmojo.ui.editors.controls.AdvancedColorPicker,L=K.ColorSquareIdentity,C=1,A=mstrmojo.mstr.EnumDSSXMLBaseFormType,D="px";function N(R,S){var U=R.decodedColor||R.color||O.VAL_AUTOMATIC,Q;if(U.c1){Q=J.buildGradient(U.or,U.c1,U.c2);S.style[J.convertCssToCamelCase(Q.n)]=Q.v;}else{S.style.backgroundColor=U;}if(R.image){S.style.backgroundImage=R.image;}if(R.opacity!==undefined){S.style.opacity=R.opacity;}S.identity=new L({objType:M.COLOR_SQUARE,parentIdentity:this.identity,token:R.token,decodedColor:R.decodedColor,encodedColor:R.encodedColor,isDefaultColor:R.isDefaultColor});}function F(S){var Q=0,R=0;if(this.rowHeights&&this.rowHeights.length>0){I.forEach(this.rowHeights,function(U){if(R>=S-1){return false;}Q++;R+=U;});}else{Q=Math.floor(S/this.rowHeight);}return Q;}mstrmojo.gm.SingleColorByLegend=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.SingleColorByLegend",markupString:'<div class="gm-legend-colorby-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div>',markupSlots:{domLgdContent:function(){return this.domNode;},sepLine:function(){return this.domNode.firstChild;},cbTitle:function(){return this.domNode.childNodes[1];},cbTableContainer:function(){return this.domNode.childNodes[2];},cbTable:function(){return this.domNode.childNodes[2].firstChild;}},rowHeight:22,rowHeights:[],colWidths:[],isHorizontal:false,titleInSameRow:false,setupScrollNodes:function E(){this.scrollNode=this.cbTableContainer;},postBuildRendering:function(){var Q,S,U,R={objType:M.LEGEND};this._super();S=this.sepLine;if(this.hasSizeBy&&this.isHorizontal){S.style.width=this.coreWidth+K.GMLegend.Constants.LEGEND_CONTAINER_MARGIN+D;S.style.marginLeft=0;}else{S.style.width=this.coreWidth+D;S.style.marginLeft="";}Q=this.cbTitle;U=Q.style;Q.identity={objType:M.LEGEND_TEXT,parentIdentity:R};U.lineHeight=K.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT+D;U.maxHeight=2*K.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT+D;},onscroll:function(){var S=this.scrollNode.scrollTop,R=this.data,Q=R&&R.dataObj;if(this.prevScrpllTop===S){return ;}if(Q){if(!this.isHorizontal){this.fillColorByTableInNormalMode(Q,F.call(this,S),this.colWidths,false,this.titleInSameRow);}this.prevScrpllTop=S;this.scrollNode.scrollTop=S;this._super();}},updateColorByTable:function(){var R=this.data,Q=R&&R.dataObj;if(this.isHorizontal){this.fillColorByTableInNormalMode(Q,0,this.colWidths,true,this.showTitleSameLine);}else{this.onscroll();}},fillColorByTableInNormalMode:function(u,a,AB,f,Z){var w,q,S,Y,X,d,b,g,R,k=this.coreWidth,l,U,Q,y,o,AA,z,e=H.shouldEncodeHtmlContent(),W=this.parent,h=W.styles,m=this.data.cutBy,c=AB?AB.length:1,x;this.colWidths=AB;this.isHorizontal=f;this.titleInSameRow=Z;z=this.cbTable;G.emptyNode(z);if(a<0){a=0;}l=u.elements;q=l.length;R=document.createDocumentFragment();U=k-K.GMLegend.Constants.COLOR_BOX_SIZE-K.GMLegend.Constants.COLORBY_TABLE_MARGIN;Q=0;y=0;o=0;I.forEach(this.rowHeights,function(i){y+=i;});for(w=0;w<a;++w){o+=this.rowHeights[w];}function s(AC,i){var n;S=document.createElement("tr");S.style.height=AC+D;for(n=0;n<i;n++){Y=document.createElement("td");X=document.createElement("td");Y.setAttribute("class","gm-legend-colorbox");X.setAttribute("class","gm-legend-desc");S.appendChild(Y);S.appendChild(X);}R.appendChild(S);}if(a>0){s(o,c);}d=a;for(w=a;w<q;){S=document.createElement("tr");var p=0,t;for(t=0;t<c;t++){if(!l[w]){break;}Y=document.createElement("td");X=document.createElement("td");b=document.createElement("div");g=document.createElement("div");b.setAttribute("class","gm-legend-colorbox-ctn-div");b.setAttribute("type",P.LGD_COLORBOX_CTN);g.setAttribute("class","gm-legend-colorbox-div");g.setAttribute("type",P.LGD_COLORBOX);N.call(this,l[w],g);S.setAttribute("class","gm-legend-tr");S.style.height=this.rowHeights[d]+D;Y.setAttribute("class","gm-legend-colorbox");X.setAttribute("class","gm-legend-desc");if(f){U=AB[t]-K.GMLegend.Constants.COLOR_BOX_SIZE;if(t!==0&&Z){p+=K.GMLegend.Constants.TABLE_ELEM_MARGIN_LEFT;Y.style.paddingLeft=K.GMLegend.Constants.TABLE_ELEM_MARGIN_LEFT+D;}X.style.width=U+D;}AA=l[w];x=undefined;I.forEach(I.ensureArray(AA.bftps),function(i){if(i===A.DssXmlBaseFormHTMLTag){x=A.DssXmlBaseFormHTMLTag;return false;}else{if(i===A.DssXmlBaseFormPicture){x=A.DssXmlBaseFormPicture;}}});if(!e&&x){B.fillImageInDiv(X,x,AA.label,"gm-img-legend");}else{W.fillTextInDiv(X,AA.label,w,C,U,h,p);}if(f){p+=AB[t];}b.appendChild(g);Y.appendChild(b);S.appendChild(Y);S.appendChild(X);w++;}R.appendChild(S);Q+=this.rowHeights[d];if(!f&&m&&(m+Q-this.rowHeights[d])>y){s(y-Q-o,c);break;}++d;}z.appendChild(R);},fillColorByTableInMinMode:function(R,U,c){var Z,S,b,Y,d=document,X,W,e,Q=this.rowHeight,a=20;if(!R||isNaN(U)){return ;}e=this.cbTable;G.emptyNode(e);S=R.length;if(c){b=d.createElement("tr");b.setAttribute("class","gm-legend-tr");for(Z=0;Z<S;Z++){Y=d.createElement("td");X=d.createElement("div");W=d.createElement("div");X.setAttribute("class","gm-legend-colorbox-ctn-div");X.setAttribute("type",P.LGD_COLORBOX_CTN);X.setAttribute("title",R[Z].label);X.style.marginTop=(2+5)+D;X.style.marginBottom=(2+5)+D;X.style.marginLeft=2+D;X.style.marginRight=2+D;W.setAttribute("class","gm-legend-colorbox-div");W.setAttribute("type",P.LGD_COLORBOX);N.call(this,R[Z],W);Y.setAttribute("class","gm-legend-colorbox");X.appendChild(W);Y.appendChild(X);b.appendChild(Y);e.appendChild(b);if(e.offsetWidth+a>U){break;}}}else{for(Z=0;Z<S;Z++){b=d.createElement("tr");Y=d.createElement("td");X=d.createElement("div");W=d.createElement("div");X.setAttribute("class","gm-legend-colorbox-ctn-div");X.setAttribute("type",P.LGD_COLORBOX_CTN);X.setAttribute("title",R[Z].label);W.setAttribute("class","gm-legend-colorbox-div");W.setAttribute("type",P.LGD_COLORBOX);N.call(this,R[Z],W);b.setAttribute("class","gm-legend-tr");b.style.height=Q+D;Y.setAttribute("class","gm-legend-colorbox");X.appendChild(W);Y.appendChild(X);b.appendChild(Y);e.appendChild(b);if(e.offsetHeight+Q>U){break;}}}if(c){e.style.left="0px";e.style.marginTop="0px";}else{e.style.top="0px";e.style.marginLeft="0px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.StringBuffer","mstrmojo.ResSetLink","mstrmojo.vi.enums.EnumFeatures","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo._XtabModelShared");var b=1,M=2;var P=1,I=4;var Z=mstrmojo.array,U=mstrmojo.hash,G=mstrmojo.mstr.EnumDSSXMLObjectSubTypes;function D(c,d){return c[((d===b)?"row":"col")];}function B(c,e){var d=e.lm;return d&&d[c.mix||0];}function X(d,j,p){var n=new mstrmojo.ResSetLink({mid:this.getMessageId(),srct:j.target.t||2,aopam:j.daMode});var k=j.ans,o=k&&k.length;if(o){var l=n.prms=[],e=0;for(e=0;e<o;e++){var t=k[e];var f=t.pid,h=parseInt(t.m,10),s={id:f,am:h,pt:t.pt};l.push(s);if(t.po){s.orid=t.po.did;s.ortp=t.po.t;}switch(h){case n.DO_NOT_ANSWER:case n.CLOSE:case n.USE_DEFAULT_ANSWER:case n.SAME_PROMPT:break;case n.STATIC:var c=t.es,q=(c&&c.length)||0,m;s.pa={es:[]};for(m=q-1;m>=0;--m){var g=c[m];s.pa.es.push({ei:g.id,disp_n:g.n,emt:1});}break;case n.DYNAMIC:case n.ALL_VALID_UNITS:case n.CURRENT_UNIT:case n.DYNAMIC_OR_SAME_PROMPT:if(p.els){A.call(this,t,p,s,h,n);}else{F.call(this,t,p,s,h,n);}break;}}}return n;}function A(j,d,c,i,h){var g=j.dunits,e=d.els,f=c.pa={};Z.forEach(e,function(k){if(Z.find(g,"id",k.id)>=0){if(i!==h.DYNAMIC&&i!==h.DYNAMIC_OR_SAME_PROMPT){f.a={id:k.id,n:k.disp_n,dispForms:k.dfi};}if(j.pt===1){f.v=k.v;}else{f.es=[];f.es.push({ei:k.ei,emt:k.emt,disp_n:k.disp_n});}}});}function F(t,o,s,g,j){var k=t.dunits,m=t.dsUnits,h=U.walk("data.ghs.chs.show",this);if(k&&k.length&&o){var l=s.pa={};var f=o,e=(o.mix!==undefined)&&(o._lp||o._tp);if(e){f=o._lp||o._tp;}var d=parseInt(f.axis,10);while(f){var q=this.getPTitle(f,d);if(q&&Z.find(k,"id",q.id)>=0){var i={id:q.id,n:q.n,dispForms:q.dfi};if(g===j.ALL_VALID_UNITS){l.a=(l.a||[]).concat(i);}else{if(g!==j.DYNAMIC&&g!==j.DYNAMIC_OR_SAME_PROMPT){l.a=i;}}if(t.pt===1){var c=t.formMap;l.v=c&&c[f.fmi]?c[f.fmi]:f.v;break;}else{var n={ei:f._e.id,emt:1,disp_n:f._e.n};if(g===j.ALL_VALID_UNITS){l.es=(l.es||[]).concat(n);}else{l.es=[].concat(n);}}if(g===j.CURRENT_UNIT){break;}}var p=this.getPCellParentNode(f,d);if(e&&!p&&d===b){d=M;p=o._tp;}if(!p&&d===M&&typeof h!=="undefined"&&!h){p=this.getPCellParentNodeByPI(f);}f=p;}}else{if(m&&m.length&&o){s.pa={es:m};}}}function E(h,g,e){var f=true,d=e.length;while(h<d){if(e[h].id!==g.id){f=false;break;}h++;}return f;}mstrmojo.XtabModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._XtabModelShared],{scriptClass:"mstrmojo.XtabModel",getMessageId:function L(){return this.data.mid;},getCellDrillsInfo:function C(c,e){var d=this.getAllDrillPathsForCell(c,e);if(!d||d.length===0){return undefined;}return d[c.mix||0];},getLinkDrillAction:function J(c){return this.getActionObject(c);},getAction:function O(c){return this.getActionObject(c);},getActionObject:function H(d){var c=d[0]&&d[0].at,f,e=null;if(c){if((c&I)>0){f=this.getLinkAction(d[0]);if(f){e={h:"onLink",a:f};}}else{if((c&P)>0){f=this.getDrillAction(d);if(f){e={h:"onDrill",a:f};}}}}return e;},getSubTotalsPos:function R(){var c=this.data.gts;if(c){return[c.rowSubPos,c.colSubPos,c.pageSubPos];}return[0,0,0];},isPvtButtonVisible:function Y(k,f){var h=k.axis,g=D(this.data.gts,h),j=k.ui,e=k.hasOwnProperty("mix");if(f==="b"&&j===0){return false;}if(!isNaN(f)){if(parseInt(f,10)===h){return false;}if(e){return !!g[k.ui]._hid;}return true;}var i=g[k.ui].es,d=e?i.length:g.length;if(d===1){return false;}if(h===(e?M:b)){if(f==="u"||f==="d"){return false;}}else{if(f==="l"||f==="r"){return false;}}if(e?k._e===i[0]:j===0){if(f==="l"||f==="u"){return false;}}if(e?k._e===i[d-1]:(this.xtab.isOutlineMode&&k.fix)?E(j+1,k,g):j===d-1){if(f==="r"||f==="d"){return false;}}return true;},isVis:function W(){if(this.xtab){return this.xtab.isVis&&this.xtab.isVis();}var c=this.controller&&this.controller.view;if(c&&c.isVis){return c.isVis();}return false;},getPTitle:function a(e,d){var c;if(this.isVis()){c=e.titleInfo;}else{c=D(this.data.gts,d)[e.tui];}return c;},getPCellParentNode:function K(e,d){var c;if(this.isVis()){c=(d===b)?e._lp:e._tp;}else{c=e._p;}return c;},getLinkAction:function N(e,d){var c,f;if(this.isVis()){e=e.node;f=e.titleInfo;}else{c=this.getCellTitleInfo(e,this.xtab.dataBlocks[e._gd]);f=c.title;}return this.getLinkActionImpl(e,f,d);},getLinkActionImpl:function S(o,k,m){var e=B(o,k),l=e&&e.links,q=(e&&e.onw)?"_blank":"";if(m===null||m===undefined){m=(e&&e.di)||0;}var h=l&&l[m];if(!h){return null;}var f={linkInfo:h,linkTarget:q};var c=h.url;if(c){var g="&CurrentElement";if(o&&k&&c.indexOf(g)>-1){c=c.replace(g,o._e.id);}f.url=c;}else{var i=h.target,n,d;switch(parseInt(i&&i.t,10)){case 55:if(parseInt(i.st,10)===14081){if(i.dvm&(8192|2048)&&!((i.dvm&2048&&mstrApp.features["run-vi-flash"]))){n=3140;if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(15474,"To work with HTML5 dossiers, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}d="objectID";}else{n=2048001;d="documentID";}}else{n=32001;d="documentID";}break;case 3:n=4001;d="reportID";var p=parseInt(i.st,10);f.reportViewMode=p===G.ReportGridAndGraph?3:(p===G.ReportGraph?2:1);break;default:return null;}f.evt=n;f[d]=i.did;f.srcMsgId=this.getMessageId();var j=X.call(this,e,h,o);if(j){f.link=j;}return f;}},getDownloadAction:function Q(f,d,h,e,g,c,i){return{xtabId:g,rowPosition:f,maxRows:d,colPosition:h,maxColumns:e,rowMode:i,memo:c};}});}());(function(){mstrmojo.requiresCls("mstrmojo._XtabModelShared","mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.models.datasets.DataInterface","mstrmojo.EnumSubtotals");var W=mstrmojo.array,E=mstrmojo.hash,h=mstrmojo.string,P=mstrmojo.elementHelper,F=mstrmojo._XtabModelShared,M=mstrmojo.models.datasets.DataInterface;var C=1,c=2,G=mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_RESERVED,O=mstrmojo.EnumSubtotals.SUBTOTAL_POSITION_FIRST;var L="Metrics";function l(m,n){var o=this.getDataService();o[m].apply(o,n);}mstrmojo._DocXtabModelShared=mstrmojo.provide("mstrmojo._DocXtabModelShared",E.copy({mixinName:"mstrmojo._DocXtabModelShared",submitTemplateActions:function g(m,n,o){l.call(this,"submitTemplateUpdates",[m,n,o]);},getDataService:function D(){return this.docModel.getDataService();},getNormalizedFormElementId:function j(n,m){return P.normalizedFormElementId(n,null,m);},getRenameTemplateUnitAction:function B(q,o,m,n){var p={act:"renameUnit",id:q,type:o,name:m};if(n){p.isDynamicAlias=true;}return p;},getRemoveTemplateUnitAction:function f(m){return{act:"removeUnit",unitId:m.paraId?m.paraId:(m.did||m.id),unitType:m.paraId?10:(m.t||4),is_disableonly:1};},getAdvSortData:function N(m,n){l.call(this,"getAdvSortData",[m,n]);},getSelectorControlMapInfo:function k(){var n=[],p=this.data.gsi,o=[],m;if(this.scm){E.forEach(p,function(q){if(q instanceof Array){o=o.concat(q);}});E.forEach(this.scm,function(s,q){m=W.find(o,"did",q);if(m!==-1){n.push({did:q,n:o[m].n,sc:s});}});}return n;},compareElementsId:function Q(q,p){if(!this.docModel.als){return this.compareElementsIdInSingleGrid(q,p);}var o=P.getIdPresentation(q),n=P.getIdPresentation(p),m=P.normalizedFormElementId(q,o),s=P.normalizedFormElementId(p,n);return this.compareNormalizedElementsId(m,s);},compareNormalizedElementsId:function e(n,m){if(n===m){return true;}else{if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}if(P.isAttributeIdsLinked(P.getAttributeId(n),P.getAttributeId(m),this.docModel.als&&this.docModel.als.idLinks||{})){return P.getElementValue(n)===P.getElementValue(m);}}return false;},compareElementsIdInSingleGrid:function X(p,o){var n=P.getIdPresentation(p),m=P.getIdPresentation(o);if(n!==m||n==="oldLong"||n==="terseLong"){return P.normalizedFormElementId(p,n)===P.normalizedFormElementId(o,m);}return p===o;},getFullObjectInfo:function K(m){return M.getObjectInfoFromDataset(m,this.docModel.datasets);},getFullMetricInfoFromCell:function I(n){var m=E.walk("data.gsi.mx."+n.mix,this);return m&&this.getFullObjectInfo(m.did);},getNDEFormsFromDataset:function A(n){var m=this.getFullObjectInfo(n);return m&&m.fs;},getShowTotalsUnitAction:function R(p,n,o,m){return{act:"showTotals",unitId:String(p||""),unitType:n||"",subtotalType:o,clearSubtotalType:m};},getMoveSubTotalAction:function Y(o,p,q,w){var AB=mstrmojo.models.template.DataInterface,x=AB.getGSI(this.xtab.gridInfo,q),z=(x&&x.sorts)||[],n=o&&o.axis,t=this,s;function m(AE,AF){var AH=[];if(AF.length>=AE){if(w){AH=AE===C?AF[c-1]:AF[C-1];}else{AH=AF[AE-1];}}function AD(AI){return !!(AI&&AI.length&&AI[0].key&&!t.hasDummySortKey(AI[0].key));}var AC=AD(AH),AG;if(AC){AG=t.convertCurrentSortsIntoActionSorts(AF);AG.forEach(function(AI){(AI||[]).forEach(function(AJ){if(AJ.stpos!==undefined){delete AJ.stpos;}});});if(w){AG.forEach(function(AJ,AI){(AJ||[]).forEach(function(AL){var AK=AL.key;if(AK){if(AK.indexOf("!!1")>=0){AL.key=AK.replace(/!!1/g,"!!2");}else{AL.key=AK.replace(/!!2/g,"!!1");}}});});AG=AG.reverse();}}return AC?AG:[];}function u(AE,AF){if(!AF||AF.length<AE){return false;}var AC=AF[AE-1];if(!AC||AC.length!==1){return false;}var AG="!5",AD=AC[0].key;return AD&&AD.slice(-2)===AG;}function y(AF,AC,AE,AD,AG){return{act:"moveSubTotal",nodeKey:AF,sorts:AC,subTotalsPos:AE,stt:AG||-1,axis:AD};}function AA(){var AE=this.data,AD=AE&&AE.gts,AJ=AD&&AD.rowSubPos||G,AC=AD&&AD.colSubPos||G,AI=AD&&AD.pageSubPos||G,AH=[AJ,AC,AI];if((!n||n===C)&&AJ===G){var AG=AD&&AD.row||[],AF=false;W.forEach(AG,function(AK){if(AK.ast&&AK.ast.length>0){AF=true;return false;}});if(!AF||AE&&AE.gsi&&AE.gsi.hidesb){AH[C-1]=O;s=m(C,z);return y(q,s,AH,C);}}return null;}if(!p){return AA.call(this);}else{s=m(n,z);return y(q,s,p,n,u(n,s)&&o.hst?o.hst:-1);}},getTotalsAction:function H(m,p,n){var o=this.getPivotAction(m);o.act="showTotals";o.subtotalType=p;o.clearSubtotalType=n;return o;},getRemoveAxisTotalsAction:function b(n,m){return{act:"removeAxisTotals",axis:m,subtotalType:n};},getShowDefinedSubtotalsAction:function U(){return{act:"showDefinedSubtotals"};},getUpdateGridPropsAction:function a(n){var m=this.xtab.k;return{act:"setProperty",nodeKey:m,prs:"Visualization",pri:13,v:h.encodeXMLAttribute(JSON.stringify(n)),partialRetrieval:{nodes:[m]}};},getColumnResizeAction:function J(p,m,n,o,q){return{act:"changeXtabColumnWidth",unitId:p,unitType:m,width:n||0,depth:o||1,ec:q};},getSortGridAction:function i(q,n,o,m,p){return E.copy(p,{sortKey:n,subTotalsPos:q,axis:o,isAsc:m});},getCellDataUnion:function S(x,n){var p=this,t=this.allowMetricHeaderSelection,m=x.isObjHeader,y=x.hasOwnProperty("mix"),o=[],w,s=E.walk("data.ghs.chs.show",this),q=function q(AA){var z=p.getCellTitleInfo(AA),AD=z.title,AC=AD&&AD.id,AB=AD&&AD.n;if(AC||(m&&t&&AB===L)){w={};if(AA.stt){w.isSubtotal=true;}if(!n||n.indexOf(AC)<0){o.push(E.copy(w,{tid:AC,axis:AA.axis,eid:AA._e&&AA._e.id,v:AA.v||(AA._e&&AA._e.n)}));}}},u=function u(AB){var z=p.getCellTitleInfo(AB),AC=z.title,AA=E.walk("data.gts.col",p);return W.indexOf(AA,AC)>=0;};if(x){if(!y||(m&&t)){q(x);}else{W.forEach([x._lp,x._tp],function(z){var AA=z;while(AA&&AA!==AA._p){q(AA);if(!AA._p&&u(AA)&&typeof s!=="undefined"&&!s){AA=p.getPCellParentNodeByPI(AA);}else{AA=AA._p;}}});}}return o;},getDrillAction:function d(n,p){var o=this._super(n,p),m=this.getCellTitleInfo(n[0]);if(o){if(o.isWithin){o.attrObj=m.title;}o.srcMsgId=this.docModel.mid;}return o;},getPartialRetrievalKeys:function Z(p,s){var t=p.xtab.k,o=p.docModel,n=o.getSelectedViUnit(),m=n&&n.boxContent,q=!(m&&m.isInFilterPanel&&m.isInFilterPanel());return[t].concat(q?o.getSourceFilterKeys(t,true):[]);},getSetReferenceMapAction:function a(n){var m=this.xtab.k;return{act:"setGridPropsRMs",nodeKey:m,rfMaps:n,partialRetrieval:{nodes:[m]}};},},E.copy(F)));})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.CheckList","mstrmojo.DataGrid","mstrmojo.hash","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.func","mstrmojo.array","mstrmojo.dom","mstrmojo.string","mstrmojo.models.template.DataInterface","mstrmojo.DocDataService","mstrmojo.ui.editors.controls.ColumnSetGroup","mstrmojo.NumStepperContentProvider");mstrmojo.requiresDescs(28114,5621,6031,6030,8504,8505,4531,18365,18363,13786,13787,9845,9846,17608,17607,17605,13544,13545,959,9640,9641,13177,13178,13179,13180,13181,13182,2969,1095,2970,9126,6115,2967,2968,122,4083,18955,8503,13200,13546,13547,5618,8797,16265,16264,16263,17612,17606,17609,4571,5467,13176,13185,221,118,29033,134);var N=mstrmojo.hash,x=mstrmojo.array,C=mstrmojo.css,AG=mstrmojo.string,j=mstrmojo.Button.newWebButton,AI=mstrmojo.ui.Pulldown.newPulldown,AF=mstrmojo.func,AA=mstrmojo.models.FormatModel.getFormatUpdate,p=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,u=mstrmojo.vi.ui.DatasetUnitMenuUtils,K,M=mstrmojo.dom,AD=mstrmojo.models.template.DataInterface,AJ="VLDB Select",c="Outer Join To Lookup Table",Y="Metric Join Type",AK="Allow Cartesian Join";var B=1,AB=2,I=3,E="480px",y="visfilter";var F=[{n:mstrmojo.desc(6031,"Off"),v:"0"},{n:mstrmojo.desc(6030,"On"),v:"1"},{n:mstrmojo.desc(8504,"Form name only"),v:"2"},{n:mstrmojo.desc(8505,"Show attribute name once"),v:"3"},{n:mstrmojo.desc(4531,"Automatic"),v:"4"}],t=[{n:mstrmojo.desc(18365,"Above the children"),v:0},{n:mstrmojo.desc(18363,"Below the children"),v:1}],n=[{n:mstrmojo.desc(13786,"Show both nulls and zeros"),v:"-1"},{n:mstrmojo.desc(13787," Hide both nulls and zeros"),v:"2"},{n:mstrmojo.desc(9845,"Hide nulls only"),v:"0"},{n:mstrmojo.desc(9846,"Hide zeros only"),v:"1"}],D=[{n:mstrmojo.desc(17608,"Use inherited value"),v:undefined},{n:mstrmojo.desc(17607,"Cancel Execution"),v:"1"},{n:mstrmojo.desc(17605,"Execute Cartesian Join"),v:"2"}],U=[{n:mstrmojo.desc(13544,"Last selection only"),v:0},{n:mstrmojo.desc(13545,"Intersection of all selections"),v:1}],z=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(9640,"Inner Join"),v:"0",title:mstrmojo.desc(9640,"Inner Join")},{n:mstrmojo.desc(9641,"Outer Join"),v:"1",title:mstrmojo.desc(9641,"Outer Join")}],S=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(13177,"Inner Join"),v:"0",title:mstrmojo.desc(13178,"Results displaying only those attribute elements that have metric value")},{n:mstrmojo.desc(13179,"Outer Join - Ignore Filter"),v:"2",title:mstrmojo.desc(13180,"Outer join to attribute's look up table without considering the filter on template")},{n:mstrmojo.desc(13181,"Outer Join - Preserve Filter"),v:"3",title:mstrmojo.desc(13182,"Outer join to attribute's look up table after considering the filter on template")}];var q={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"2":mstrmojo.desc(13179,"Outer Join - Ignore Filter"),"3":mstrmojo.desc(13181,"Outer Join - Preserve Filter")},k={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"1":mstrmojo.desc(9641,"Outer Join")};var L=mstrmojo.desc(6115,"Enable incremental fetch in Grid"),i=mstrmojo.desc(5621,"Enable incremental fetch"),g=mstrmojo.desc(8797,"Rows per page"),AC=mstrmojo.desc(28114,"Elements per page"),b="25%",h="";var f;var w=false;function X(AS,AP,AO,AR){var AQ={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:AS,col2Width:AP,children:AO};return N.copy(AR,AQ);}function Z(AP,AQ,AO){return N.copy(AO,{scriptClass:"mstrmojo.Label",slot:AQ,text:AP});}function G(AR,AO){return[Z(AR,"col1Node",{cssClass:"subTitle"}),{scriptClass:"mstrmojo.ui.CheckList",orientation:"h",slot:"col2Node",preBuildRendering:function AP(){var AV=mstrmojo.all[K].data[AO],AS=this.items,AU=this.selectedIndices;if(AV){x.forEach(AS,function(AX,AW){AU[AW]=AV[AX.id]==="-1";});}var AT=mstrmojo.all[K].olm;if(!!AT&&AO==="rows"){this.items[1].css="disabled";}else{this.items[1].css="";}},postselectionChange:function AQ(AS){var AU=this.items,AT=[AS.added,AS.removed];AT.forEach(function(AW,AV){if(AW&&AW.length>0){AA(AO+AU[AW[0]].id,AV===0?"-1":"0",mstrmojo.all[K].newData);}});},items:[{n:mstrmojo.desc(2969,"Show"),id:p.SHOW_HEADER},{n:mstrmojo.desc(1095,"Merge"),id:p.MERGE_HEADER,css:""},{n:mstrmojo.desc(2970,"Lock"),id:p.LOCK_HEADER}]}];}function d(){var AP=K.split("-"),AO=AP.length;if(!mstrApp.isInVFConfigMode&&AP[AO-1]===y){AP.splice(AP.length-1,1);}else{if(mstrApp.isInVFConfigMode&&AP[AO-1]!==y){AP.splice(AP.length,1,y);}}K=AP.join("-");}function l(AP){d();var AO=mstrmojo.all[K];if(AP){AO.update=AO.update.actions?AO.update:{actions:[]};AO.update.actions=AO.update.actions.concat(mstrmojo.hash.valarray(AO.joinActions));AO.update.callback=mstrmojo.func.wrapMethods(AO.update.callback,AO.host.parent.model.getRebuildCallback());if(AO.SelectionLimitSection&&AO.limitVal){AO.host.writeGlobalProperty("slctnLmt",AO.limitVal);}if(AO.showIncrementalFetchSection){AO.update.actions=AO.update.actions.concat(AO.host.getXtabIncrementalFetchActions(AO.ifChecked,AO.ifMaxRows));}AO.submitAction(AO.newData,AO.update.actions,AO.update.callback,AO.update.extras);}AO.newData=AO.update={};AO.joinActions={};AO.close();}function H(AQ){var AO=N.walk("model.docModel",AQ),AT=AQ.k,AP=[];if(AQ.hasArrayGSI){x.forEach(AQ.gridData.gsi,function(AU){AP.push(AU.k);});}else{if(AQ.isVisMap){AP=AQ.getAllLayerKeys(true);}else{if(AO&&AO.isSecondaryDataProvider(AT)){AT=AO.getHostKeyByNodeKey(AT)||AT;var AR=AO.getVisualizationByKey(AT),AS=(AR&&AR.boxContent)||AQ;AP=AS.getAllLayerKeys&&AS.getAllLayerKeys(true);}else{AP.push(AT);}}}return{nodeKeys:AP,hostKey:AT};}function W(AP){var AS=AP.parent,AU=AS.data,AQ=mstrmojo.all[K],AR=AQ.host,AT=AR.controller,AO=hostKey=AR.k,AV=new mstrmojo.ui.menus.MenuConfig();AQ.joinActions=AQ.joinActions||{};if(AR.hasArrayGSI){AO=AS.dataGrid.columnSetKey;}if(AU.did==="AllAttr"){S.forEach(function(AW){AV.addMenuItem(AW.n,"",function(){AP.parent.jtValue.set("text",AW.n);AU.v=AW.v;AU.dv=AW.n;AQ.joinActions.AllAttr=AT.dataService().getSetVLDBPropAction(c,"attributeJoin",AO,AW.v,hostKey);});});}else{z.forEach(function(AW){AV.addMenuItem(AW.n,"",function(){AP.parent.jtValue.set("text",AW.n);AU.v=AW.v;AU.dv=AW.n;var AX={unitId:AU.did,dataType:AU.dt,unitType:AU.t};AQ.joinActions[AU.did]=AT.dataService().getSetVLDBPropAction(Y,"metricJoin",AO,AW.v,hostKey,AX);});});}AV.hostId=K;AV.isHostedWithin=false;AV.hostElement=AP.domNode;AV.menuCssClass="joinbehavior";AV.setAlignment(3,2);AQ.openPopup(AV.newInstance());}function P(AP){if(!AP||AP<=0){return 1000;}var AO=Math.floor(10000/AP)*2.7;if(AO<50){return 50;}if(AO>1000){return 1000;}return Math.round(AO/50)*50;}function J(AO,AP){if(AP){AO.set("visible",true);window.setTimeout(function(){AO.showTooltip();AO._autoHideTimeout=window.setTimeout(function(){AO.hideTooltip();},3000);},0);}else{AO.hideTooltip();AO.set("visible",false);}}mstrmojo.vi.ui.editors.MoreOptionsEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.editors.MoreOptionsEditor",host:undefined,showHeadersSection:false,showSelectionLimitSection:false,showIncrementalFetchSection:false,data:undefined,lockHeadersCase:undefined,update:undefined,newData:undefined,joinActions:undefined,cssClass:"mstrmojo-MoreOptions-Editor",title:mstrmojo.desc(9126,"More options"),help:"more_options_dialog_box.htm",submitAction:mstrmojo.emptyFn,supportCartesianJoin:false,init:function AE(AO){this._super(AO);if(mstrApp.isInVFConfigMode){this.children.splice(2,1);}K=this.id;this.newData=this.update={};this.joinActions={};this.onshowHeadersSectionChange(this.showHeadersSection);this.onshowSelectionLimitSectionChange(this.showSelectionLimitSection);this.onshowIncrementalFetchSectionChange(this.showIncrementalFetchSection);},onOpen:function a(){d();var AX=this.host,AQ=AX&&AX.gridData,AO=N.walk("rw.row.bc",AQ),AW=AQ&&AQ.olm&&!(AQ.rw&&AQ.rw.row.bc>0);this.olm=!!AW;if(this.JoinBehaviorSection){var AR=this.JoinBehaviorSection.joinUnits,AP=AR.dataGrid,AV=AR.columnSetPD;if(AX.hasArrayGSI){var AS=AD.getGSI(AQ.gsi,0),AU=AX.model.docModel;if(!AV){AV=new mstrmojo.ui.editors.controls.ColumnSetGroup({value:AS.k,gsi:AF.safeCall("getRegularColumnSetsInGrid",AX)()||AQ.gsi,titleMap:AD.getGsiTitles(AQ.gsi,AU),cssClass:"columnSets-pd",alias:"columnSetPD",includeAll:false,width:"181px",callback:function(AY){AP.columnSetKey=AY;AP.updateUnits(AY);AR.refresh();},});AR.addChildren(AV,0);}else{AV.updatePulldownItems(AF.safeCall("getRegularColumnSetsInGrid",AX)()||AQ.gsi,AD.getGsiTitles(AQ.gsi,AU),0,AS.k);}AP.columnSetKey=AS.k;}else{if(AV){AR.removeChildren(AV);AP.columnSetKey=null;}}}if(this.showIncrementalFetchSection){this.initIncrementalFetchSectionStatus(AO,this.olm);}if(this.showSelectionLimitSection){var AT=this.SelectionLimitSection.children[1].children[1].provider;AT.curVal=AX.readGlobalProperty("slctnLmt");this.limitVal=undefined;}this.refresh();},onifCheckedChange:function(){var AO=this.IncrementalFetchSection.gridIfTwoColumnContainer.gridIfTwoColumnContainer2.gridIfTextBox;AO.set("enabled",this.ifChecked);},_set_lockHeadersCase:function m(AR,AO){this.lockHeadersCase=AO;var AP=this.data,AQ=this.lockHeadersCase;if(!AP){AP=this.data={rows:{},cols:{}};}else{AP.rows=AP.rows||{};AP.cols=AP.cols||{};}AP.rows.lhv=(AQ===I||AQ===B)?"-1":"0";AP.cols.lhv=(AQ===I||AQ===AB)?"-1":"0";},onshowHeadersSectionChange:function O(AO){this.showSectionChange(AO,"headersSection");},onshowSelectionLimitSectionChange:function o(AO){this.showSectionChange(AO,"SelectionLimitSection");},onshowIncrementalFetchSectionChange:function AM(AO){this.showSectionChange(AO,"IncrementalFetchSection");},showSectionChange:function R(AO,AS){var AR=AO.value,AP=this[AS],AQ="_orphaned"+AS;if(!AR&&AP){this[AQ]=AP;this.removeChildren(AP);}else{if(AR&&!AP){this.addChildren(this[AQ]);this.children.sort(function(AU,AT){return AU.canonicalPosition-AT.canonicalPosition;});}}},initIncrementalFetchSectionStatus:function AL(AO,AX){const AV=this.IncrementalFetchSection.gridIfCheckBox;const AQ=this.IncrementalFetchSection.gridIfTwoColumnContainer;const AR=AQ.gridIfTwoColumnContainer2;const AS=AR.gridIfTextBox;const AW=AQ.gridIfLabel;const AY=this.host&&this.host.isCustomVis;const AP=N.walk("handler.dataInterface.agColumnDefs",this.host);var AU;var AZ;if(AP){AU=AP.length;AZ=P(AU);}else{AZ=-1;}if(AY){AV.set("label",i);AW.set("text",AC);AQ.set("col1Width",h);}else{AV.set("label",L);AW.set("text",g);AQ.set("col1Width",b);}AS.set("enabled",AO!==-1);AV.set("enabled",!AX);AV.checked=AO!==-1;AS.value=AO===-1?"":AO;this.ifChecked=AV.checked;this.ifMaxRows=AO;this.suggestedFetchSize=AZ;this.columnCount=AU;const AT=AR.helpIcon;if(AT){AT.set("visible",AZ!==-1);}},children:[X("26%","74%",[Z(mstrmojo.desc(2967,"Headers"),"col1Node",{cssClass:"title"}),X("20%","80%",G(mstrmojo.desc(2968,"Rows"),"rows"),{slot:"col2Node"}),X("20%","80%",G(mstrmojo.desc(122,"Columns"),"cols"),{slot:"col2Node"})],{alias:"headersSection",canonicalPosition:0,cssClass:"headers",width:E}),X("26%","74%",[Z(mstrmojo.desc(4083,"Display"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row0",children:[Z(mstrmojo.desc(18955,"Position of the parent elements")+":","containerNode",null),AI(t,function(AO){AA(p.PARENT_POSITION,AO.v,mstrmojo.all[K]?mstrmojo.all[K].newData:null);},0,{width:"151px",preBuildRendering:function A(){var AO=mstrmojo.all[K]?this.items.map(function(AP){return AP.v;}).indexOf(mstrmojo.all[K].data[p.PARENT_POSITION]):0;this.selectedIndex=Math.max(AO,0);},postBuildRendering:function Q(){var AP=mstrmojo.all[K]?mstrmojo.all[K].data[p.PARENT_POSITION]>-1:false;var AO=this.parent.children[0];this.set("visible",AP);AO.set("visible",AP);this.constructor.prototype.postBuildRendering.call(this);}},true)]},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Z(mstrmojo.desc(8503,"Show attribute form names:"),"containerNode",null),AI(F,function(AO){AA(p.LONG_NAME,AO.v,mstrmojo.all[K].newData);},0,{width:"181px",preBuildRendering:function A(){var AO=this.items.map(function(AP){return AP.v;}).indexOf(mstrmojo.all[K].data[p.LONG_NAME]);this.selectedIndex=Math.max(AO,0);}},true)]},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row2",children:[Z(mstrmojo.desc(13200,"Hide metric nulls and zeros"),"containerNode",null),AI(n,function(AP){var AO=AP.v,AQ=AO==="-1"?"-1":"0";if(AO!=="-1"){AA(p.HIDE_NULL,AO,mstrmojo.all[K].newData);}AA(p.SHOW_ALL_ROWS,AQ,mstrmojo.all[K].newData);},0,{width:"181px",preBuildRendering:function A(){var AP=mstrmojo.all[K].data,AO=AP[p.SHOW_ALL_ROWS]==="-1"?0:this.items.map(function(AQ){return AQ.v;}).indexOf(AP[p.HIDE_NULL]);this.selectedIndex=Math.max(AO,0);}},true)]}],{alias:"viewSection",canonicalPosition:1,cssClass:"view",width:E}),X("26%","74%",[Z(mstrmojo.desc(13546,"Filtering"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Z(mstrmojo.desc(13547,"When this visualization is filtered by multiple other visualizations, filter by:"),"containerNode",{cssClass:"dropdownLabel"}),AI(U,function(AO){var AP=mstrmojo.all[K],AQ=AP.host;if(AQ.switchFilterType){AP.update=AQ.switchFilterType(AO.v);}},0,{width:"181px",preBuildRendering:function A(){var AO=mstrmojo.all[K].host;if(AO.getFilterType){this.selectedIndex=AO.getFilterType();}}},true)]}],{alias:"filteringSection",canonicalPosition:2,cssClass:"filtering",width:E}),X("26%","74%",[Z(mstrmojo.desc(5618,"Incremental Fetch"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.CheckBox",label:L,alias:"gridIfCheckBox",slot:"col2Node",cssText:"line-height: 26px",oncheckedChange:function(){var AO=mstrmojo.all[K];AO.set("ifChecked",this.checked);}},{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",slot:"col2Node",cssClass:"rowPrePage",col1Width:b,col2Width:"50%",formatGroup:"overall",alias:"gridIfTwoColumnContainer",children:[Z(g,"col1Node",{alias:"gridIfLabel",}),{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",slot:"col2Node",cssClass:"rowPrePageSetting",col1Width:"53%",col2Width:"20%",formatGroup:"overall",alias:"gridIfTwoColumnContainer2",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",slot:"col1Node",dtp:1,alias:"gridIfTextBox",constraints:{min:1,max:1000000},onValid:function(){var AO=mstrmojo.all[K];AO.ifMaxRows=parseInt(this.value,10);}},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",slot:"col2Node",alias:"helpIcon",richTooltip:{cssClass:"vi-regular vi-tooltip-C canvas-size-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,enableHover:true},useRichTooltip:true,tooltipOpenDelay:100,tooltipCloseDelay:100,updateTooltipConfig:function AH(){var AQ=this.richTooltip,AP=mstrmojo.all[K],AO=mstrmojo.dom.position(this.domNode);AQ.left=AO.x+AO.w-6;AQ.top=AO.y-7;AQ.content='<div><div class="tooltip-page-size"><span>'+mstrmojo.desc(29033,"Recommended: ###. For optimal performance, adjust this value according to your column count.").replace("###",'<span style="font-weight: bold;">'+AP.suggestedFetchSize+"</span>")+'<span class="help-link-label" mstreventmark="labelNode" mstrevent="click">  '+mstrmojo.desc(134,"Apply")+"</span></span></div></div>";AQ.eventHandlerMap={labelNode:{click:{requiredParams:[],handlerFn:function(){return function(){var AR=mstrmojo.all[K];if(AR&&AR.ifChecked){AR.ifMaxRows=AR.suggestedFetchSize;var AS=AR.IncrementalFetchSection.gridIfTwoColumnContainer.gridIfTwoColumnContainer2.gridIfTextBox;if(AS){AS.set("value",AR.suggestedFetchSize.toString());}}};}}}};}},]}]}],{alias:"IncrementalFetchSection",canonicalPosition:3,cssClass:"incrementalfetch",width:E}),X("26%","73%",[Z(mstrmojo.desc(16265,"Selection Data Limit"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Z(mstrmojo.desc(16264,"Set a limit for the maximum quantity of data points that a user can select on this visualization."),"containerNode",{cssClass:"stepperLabel"}),{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:"75px",preBuildRendering:function A(){C.addWidgetCssClass(this,"selection");mstrmojo.ui.editors.controls.Stepper.prototype.preBuildRendering.call(this);},provider:new mstrmojo.NumStepperContentProvider({item:{interval:1},min:1,max:200000,onTraverse:function(){var AO=mstrmojo.all[K];AO.limitVal=this.item.value;}})},Z(mstrmojo.desc(16263,"(Max quantity should be no more than 200K.)"),"containerNode",{cssClass:"stepperLabel"})]}],{alias:"SelectionLimitSection",canonicalPosition:4,cssClass:"filtering",width:E}),X("26%","74%",[Z(mstrmojo.desc(17612,"Data Join"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",alias:"joinOptions",children:[{scriptClass:"mstrmojo.Box",slot:"containerNode",alias:"labelRow",cssText:"overflow: hidden",children:[{scriptClass:"mstrmojo.Label",cssClass:"joinLabel",text:mstrmojo.desc(17606,"Cartesian Join Governing"),postBuildRendering:function(){var AO=mstrmojo.all[K];this.set("enabled",AO.supportCartesianJoin);this.constructor.prototype.postBuildRendering.call(this);}},{scriptClass:"mstrmojo.Button",cssClass:"warningTooltipBtn",alias:"warningBtn",visible:false,useRichTooltip:true,tooltipOpenDelay:0,richTooltip:{cssClass:"vi-warning vi-tooltip-C A-center disabled-cartesian",posType:mstrmojo.tooltip.POS_TOPLEFT,enableHover:true},showTooltip:function AN(){window.clearTimeout(this._autoHideTimeout);this._autoHideTimeout=undefined;if(this.hasOpenTooltip){this.hideTooltip();}this.constructor.prototype.showTooltip.call(this);},updateTooltipConfig:function AH(){var AP=this.richTooltip,AO=M.position(this.domNode);AP.left=AO.x+AO.w+12;AP.top=AO.y-9;AP.content=mstrmojo.desc(17609,"Executing cartesian joins is not a recommended option.");},onvisibleChange:function(){J(this,this.visible);}}]},AI(D,function(AP){var AQ=mstrmojo.all[K],AS=AQ.host,AT=AS.controller,AR=H(AS),AO=AR.nodeKeys,AU=AR.hostKey;x.forEach(AO,function(AV){AQ.joinActions["Cartesian"+AV]=AT.dataService().getSetVLDBPropAction(AK,"cartesianJoin",AV,AP.v,AU);});this.parent.labelRow.warningBtn.set("visible",parseInt(AP.v,10)===2);},0,{alias:"cartesianPulldown",width:"181px",postBuildRendering:function Q(){var AR=mstrmojo.all[K],AS=AR.host,AU=AS.hasArrayGSI?AD.getGSI(AS.gridInfo,0).k+".":"",AP=N.walk(AU+AJ,AS.tmsProps.tpltProp),AQ=x.filterOne(AP,function(AV){return AV.n===AK;})||{},AT=AQ&&AQ.v||undefined,AO=this.items.map(function(AV){return AV.v;}).indexOf(AT);this.selectedIndex=Math.max(AO,0);this.set("enabled",AR.supportCartesianJoin);this.parent.labelRow.warningBtn.set("visible",parseInt(AT,10)===2);this.constructor.prototype.postBuildRendering.call(this);}},true)],useRichTooltip:false,richTooltip:{cssClass:"vi-warning vi-tooltip-C A-center disabled-cartesian",posType:mstrmojo.tooltip.POS_TOPLEFT,enableHover:true},updateTooltipConfig:function AH(){var AP=this.richTooltip,AO=M.position(this.cartesianPulldown.domNode);AP.left=AO.x+AO.w+12;AP.top=AO.y-7;},onenabledChange:function(){this.useRichTooltip=!this.enabled;},buildRendering:function s(){var AP=mstrmojo.all[K],AO=mstrApp.isCartesianJoinSupported&&mstrApp.isCartesianJoinSupported(),AQ=AO?"":mstrApp.getCartesianJoinTtp&&mstrApp.getCartesianJoinTtp();this.set("enabled",AO);AP.supportCartesianJoin=AO;this.richTooltip.content=AQ;this.constructor.prototype.buildRendering.call(this);}},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row2",alias:"joinUnits",children:[Z(mstrmojo.desc(4571,"Join Behavior"),"containerNode",{cssClass:"joinLabel"}),{scriptClass:"mstrmojo.DataGridWithTooltip",cssClass:"jointype",banding:false,lockHeader:true,alias:"dataGrid",columns:[{headerText:mstrmojo.desc(5467,"Objects"),dataField:"n",headerCss:"objects-hd",tooltip:false,itemTooltipField:"tf",itemCSSField:"itemCss",colWidth:115,colHeight:24},{headerText:mstrmojo.desc(13176,"Join Type"),headerCss:"jointype-hd",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"jt-col",children:[{scriptClass:"mstrmojo.Label",cssClass:"jt-value",alias:"jtValue",bindings:{text:function(){return this.parent.data.dv;}}},{scriptClass:"mstrmojo.Button",cssClass:"jt-menu",alias:"jtBtn",onclick:function(){var AO=mstrmojo.all[K];W.call(AO,this);}}]}}],items:[],columnSetKey:null,itemFunction:function(){var AO=mstrmojo.DataGridWithTooltip.prototype.itemFunction.apply(this,arguments);AO.themeClassName=!!mstrApp.isWSStyling?"":"mojo-theme-dark";return AO;},updateUnits:function e(AR){var Ac=mstrmojo.all[K].host,Ab=Ac.model&&Ac.model.docModel,AY=Ac.tmsProps,AU=N.walk((Ac.hasArrayGSI?AR+".":"")+AJ,AY.tpltProp),AW=[],AS=AD.getGSI(Ac.gridInfo,AR)||{},Ad=AS.rows||[],AZ=AS.cols||[],Aa=AS.mx||[],AV=AS.dmx||[],AX=[].concat(AY.mxProp),AT=0,AQ=[];var AO=x.filterOne(AU,function(Ae){return Ae.n===c;})||{},AP=AO&&AO.v;AP=(AP&&AP.length)?AP:"-1";(Ad.concat(AZ)).some(function(Ae){if(Ae.t===12){AW.push({did:"AllAttr",n:mstrmojo.desc(13185,"All Attributes"),v:AP,dv:q[AP],itemCss:"jt-allattr"});return true;}return false;});Aa=x.filter(Aa,function(Af){var Ag=u.getUnitFromDataset(Ab.datasets,Af.did,4),Ae=Af.isSmart&&Af.decomposable===2;return Ag&&(!Ag.um||Af.afb||!Af.isSmart||Ae);});if(Ac.hasArrayGSI){AD.forEachGSI(Ac.gridInfo,function(Ag,Af){var Ae=Ag&&Ag.mx||[];Ae.forEach(function(Ah){if(AR===Af&&AX[AT]&&AX[AT][Ah.did]){AQ.push(AX[AT]);}AT++;});},AR);}else{AQ=AX;}AV.forEach(function(Af){var Ae={};Ae[Af.did]=Af.prop;AQ.push(Ae);});(Aa||[]).forEach(function(Af){var Ae={v:"-1"};(AQ||[]).forEach(function(Ag){if(Ag[Af.did]){(Ag[Af.did]["VLDB Select"]||[]).forEach(function(Ah){if(Ah.n==="Metric Join Type"){Ae=Ah;}});}});AW.push({did:Af.did,n:AG.encodeHtmlString(Af.n),dt:Ae.dt,t:4,v:Ae.v,dv:k[Ae.v],itemCss:"jt-metric"});});this.items=AW;mstrmojo.DataGridWithTooltip.prototype.preBuildRendering.apply(this,arguments);},preBuildRendering:function A(){var AO=mstrmojo.all[K].host,AP=this.columnSetKey||AD.getGSI(AO.gridInfo,0).k||AO.k;this.updateUnits(AP);},postBuildRendering:function Q(){mstrmojo.DataGridWithTooltip.prototype.postBuildRendering.apply(this,arguments);this.domNode.style.overflow="hidden";}}]}],{alias:"JoinBehaviorSection",canonicalPosition:5,cssClass:"joinbehavior",width:E}),{alias:"buttonBar",canonicalPosition:6,scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[j(mstrmojo.desc(221,"Cancel"),function(){l(false);}),j(mstrmojo.desc(118,"Save"),function(){l(true);},true)]}]});mstrmojo.DataGridWithTooltip=mstrmojo.declare(mstrmojo.DataGrid,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.DataGridWithTooltip",tooltip:"",useRichTooltip:true,itemFunction:function(AQ,AO,AP){var AR=new mstrmojo.DataRow({columns:AP.columns,data:AQ,idx:AO,dataGrid:AP,parent:AP});AP.dataTextCSSClass=AR.dataTextCSSClass;return AR;},updateTooltipConfig:function AH(AP){var AQ=AP.target||M.eventTarget(AP.hWin,AP.e),AO=M.position(AQ);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMRIGHT,content:this.getTooltipContent(AP),top:AO.y+1.5*AO.h,left:AO.x,cssClass:"vi-regular vi-tooltip-D"};},getTooltipContent:function(AO){return AG.encodeHtmlString(AO.target.innerText);},showTooltip:function AN(AO,AP){if(AO.target.className===this.dataTextCSSClass){this._super(AO,AP);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisUtility");var E=mstrmojo.array,D=mstrmojo.hash,A=mstrmojo.func.wrapMethods;function B(F){return F.model.controller.cmdMgr;}mstrmojo._colorPalette=mstrmojo.provide("mstrmojo._colorPalette",{listenToUpdateColorMap:function(I){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var H=this,G,F=(H.getDocModel&&H.getDocModel())||H.model.docModel;if(F){return F.attachEventListener("colorMapChanged",H.id,function(K){G=H.parent.parent;if(G.isPanelDisplaying()){I.call(H);}else{var J=G.attachEventListener("panelDisplaying",H.id,function(L){if(H.postBuilderingCalled){I.call(H);}G.detachEventListener(J);});}});}},detachUpdateColorMapListener:function(G){if(!G){return ;}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel;F.detachEventListener(G);},submitUpdatesAndPersistXML:function C(H,L,F,P){if(!H||H.length===0){return ;}var G={},M=this,Q=(M.getDocModel&&M.getDocModel())||M.model.docModel,O=Q.getDataService(),I=M.model.controller||Q.controller,J=I._getXtabCallback(M);if(F){D.copy(mstrmojo.DocDataService.SUPPRESS_DATA,G);}if(P){D.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,G);}var K=false;E.forEach(H,function(R){if(R.act==="updateElementsPropertiesMap"){K=true;}});if(K){A(Q.getUpdateColorMapCallback(),J);}B(M).execute({execute:function N(){var R=O.newUpdate(this,undefined);R.add(H,L,G);this.submitUpdate(R);},urInfo:{callback:J}});},updateColorMap:function(I,G,K){if(!E.isArray((G))){G=[G];I=[I];}if(I.length!==G.length){throw new Error("comb and color number mismatch");}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel,J=mstrmojo.VisUtility.getUpdateColorMapAction.bind(this),H=I.map(function(M,L){return J(M,JSON.stringify({color:G[L]}));});this.submitUpdatesAndPersistXML(H,K?A(F.getUpdateColorMapCallback(),K):F.getUpdateColorMapCallback(),false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.vi.viz.MapHelper");var P=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,O=mstrmojo.vi.viz.MapHelper,N=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(Q){return Q.model.controller.cmdMgr;}function M(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function Q(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(R,U){var Q,Y,S,W,X={};X.tks=this.k;X.selectorObjects=R;X.keepOnly=!!U;X.isDocVis=true;Q=M.call(this);Y=Q.getDataService();S=Y.getGMViewFilterAction(X);W=Q.getSliceCallback(X);return{action:S,callbacks:W};}function B(S,R){var Q,W,U;Q=M.call(this);U=Q.getDataService();if(!this.isXMLDirty()){U.submitUpdates(S,R);}else{W=this.getPersistAction();U.submitUpdates([S,W],R);this.resetXMLDirtyFlag();}}function A(){var c=this,g=this.modelData||this.model.data,W=g.k,e,d="FormattingWidget",Y,X,b,R,S,U=[],a=[],Z=this.edtModel;if(!g){console.log("warning: modelData is missing");return null;}var f=function(i,k){var h=X.createElement(k),j;if(i instanceof Object){for(j in i){if(i.hasOwnProperty(j)){var l=f(i[j],j);if(l){h.appendChild(l);}}}}else{if(c.isVisMap){h.setAttribute("value",O.convertToReferenceFormat(i,k));}else{h.setAttribute("value",i);}}return h;};var Q=function(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;");};b=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!b||b.length===0){Y=this.getProperties(W);if(this.useCompatibleXML){X=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");X.firstChild.appendChild(f(Y,"fmt"));}else{X=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");X.firstChild.firstChild.appendChild(f(Y,"fmt"));}b=(new XMLSerializer()).serializeToString(X);}R=Q(b);S={act:"setProperty",nodeKey:W,prs:d,pri:4,v:R};U.push(S);return U;}function F(R,S,Q,X){if(!(X instanceof Function)){return D;}var W=this.id;function U(Y){return function(){var a=mstrmojo.all[W],Z;if(!a){return ;}Z=a.getProperties();Z[R]=Y;X.call(a,Y,true);a.getDocModel().selectVIUnit(a.parent.id,true);};}return{silent:true,undo:U(Q),redo:U(S)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(U){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var S=this,R,Q=(S.getDocModel&&S.getDocModel())||S.model.docModel;if(Q){return Q.attachEventListener("colorMapChanged",S.id,function(X){R=S.parent&&S.parent.parent;if(S.forceUpdateColorMap||(R&&R.isPanelDisplaying())){U.call(S);}else{var W=R.attachEventListener("panelDisplaying",S.id,function(Y){if(S.postBuilderingCalled){U.call(S);}R.detachEventListener(W);});}});}},detachUpdateColorMapListener:function(R){if(!R){return ;}var Q=(this.getDocModel&&this.getDocModel())||this.model.docModel;Q.detachEventListener(R);},updateTargets:function(R){var W={},S=this,Q=M.call(this);W.fromGM=true;W.type=1;W.src=this.k;W.selectorObjects=R;function U(Z){var X=S.modelData||S.model.data,Y=X.sc;if(Y!==undefined){return Y[Z];}return undefined;}W.keepOnly=true;W.ck=U.call(this,"ck");W.keyContext=W.ck;W.tks=U.call(this,"tks");W.ckey=U.call(this,"ckey");W.isDocVis=true;W.include=true;W.showall=U.call(this,"showall");Q.slice(W);},updateAfterViewFilter:function(S,Q){var Z,Y,R,X,W,a,U;Z=M.call(this);Y=Z.getDataService();X=E.call(this,S,Q);R=X.action;W=X.callbacks;U=this.model.controller||Z.controller;if(this.currKeepOnlyAction){a=[C.clone(this.currKeepOnlyAction)];}else{a=E.call(this,[],false).action;}this.currKeepOnlyAction=R;U.submitUndoRedoUpdates([R],a,W);},updateAfterKeepOnly:function(U){var S=M.call(this),R=this.model.controller||S.controller,W=N(R._getXtabCallback(this),H.call(this));var Q={keepOnly:U,data:this.getContextMenuSelections()};if(this.passThroughExpression){Q.isPassThroughExpression=true;Q.expr=this.passThroughExpression;}R.applyKeepOnly(this,W,Q,U?-2:undefined);if(!U){this.clearSelections();this.endSelections();}},updateAfterKeepOnlyForMultiTemplate:function(S){var R=M.call(this),Q=this.model.controller||R.controller,U=N(Q._getXtabCallback(this),H.call(this));Q.applyKeepOnlyForMutilTemplate(S,U,true);},updateAfterDrill:function(Q,g,c){var d=this,h=M.call(this),f=h.getDataService(),X=f.newUpdate(),U=this.getContextMenuSelections(),R=c||this,W=R.model,Y=R.model.data||R.node.data,b=W.getSelectorDataFromTemplateLimit(Y.tpl).concat({keepOnly:true,data:U}),S=h.getKeepOnlyOrExcludeAction(Y.k,b),Z=d.model.controller||h.controller,a=Z._getXtabCallback(d);X.add(Q,N(g,a));X.add(S,H.call(d));K(d).execute({execute:function e(){this.submitUpdate(X);},urInfo:{callback:X.callback}});},updateAfterSort:function(U){var R=this,Q=M.call(this),W=Q.getDataService(),X=Q.getSliceCallback({tks:R.k});K(R).execute({execute:function S(){var Z=W.newUpdate(this,undefined),Y={act:"sortGM",nodeKey:R.k,subActions:U,partialUpdate:{nodes:[R.k]}};Z.add(Y,X,undefined);if(R.isXMLDirty()){Z.addActions(R.getPersistAction());}this.submitUpdate(Z,undefined);},urInfo:{callback:X}});},updateAfterAction:function(X,Q,R,e,b){if(!X){return ;}var Z=this,S=Z.parent&&Z.parent.id,f=Z.model.docModel,Y=Z.model.controller||f.controller,d,c,W={},a,U=b||D;if(R){d=mstrmojo.emptyFn;a=function(){this.submitSilent(X);};}else{d=f.getSliceCallback({tks:this.k});d.success=G([d.success,function(){f.selectVIUnit(S,true);}]);a=function(){this.submit(X,d,W);};}c=Y._getXtabCallback(Z);if(Q){d=N(d,Q);c=N(c,Q);}c.success=G([c.success,function(){f.selectVIUnit(S,true);}]);if(R){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,W);}if(e){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,W);}K(this).execute({execute:a,urInfo:{silent:U.silent,callback:c,redo:U.redo,undo:U.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(R,S,Q,U){this.updateAfterAction(A.call(this),R,S,Q,U);},setProperty:function(Z,U,X){var R=X.callback,S=!!X.suppressData,b=X.requestDefinition,W=X.clientUndoRedoCallback,a=this.getProperties(),Q=a[Z],Y;if(Z===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,U);}}else{if(a&&(a[Z]===undefined||a[Z].toString()!==U.toString())){a[Z]=U;Y=F.call(this,Z,U,Q,W);this.updateAfterPropertiesChange(R,S,b,Y);}}},showData:function(Q){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);},onUnRender:function L(){if(this._super){this._super();}this.postBuilderingCalled=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.func","mstrmojo.DocDataService","mstrmojo.vi.enums.EnumFeatures");mstrmojo.requiresDescs(14570,3396);var G=mstrmojo.dom,L=mstrmojo.hash,R=mstrmojo.func,D=mstrmojo.vi.enums.EnumFeatures;var B={GM:"GM",Grid:"Grid",Waterfall:"Waterfall",BoxPlot:"BoxPlot",Histogram:"Histogram",Network:"Network",HeatMap:"HeatMap",Mapbox:"Mapbox",EsriMap:"EsriMap",KPI:"KPI",Filter:"Filter",Text:"Text",Image:"Image",HTMLContainer:"HTMLContainer",Button:"Button",Shape:"Shape",PanelStack:"PanelStack",MultiMetricKPI:"MultiMetricKPI",ComparisonKPI:"ComparisonKPI",Sankey:"Sankey",TimeSeries:"TimeSeries",Gauge:"Gauge",Unknown:"Unknown"},P={Template:"template",Control:"control",Field:"field",Section:"section"};function N(Y){if(!Y||!Y.boxContent){return B.Unknown;}var Z=Y.boxContent,b=Z.GMController,a=Y.scriptClass,X=Z.scriptClass;switch(a){case"mstrmojo.vi.ui.rw.FilterBox":case"mstrmojo.vi.ui.rw.PanelSelectorBox":case"mstrmojo.vi.ui.rw.AMSelectorBox":case"mstrmojo.vi.ui.rw.ParameterSelectorBox":case"mstrmojo.vi.ui.rw.ActionSelectorBox":return B.Filter;case"mstrmojo.vi.ui.rw.ShapeBox":return B.Shape;case"mstrmojo.vi.ui.rw.TextBox":return B.Text;case"mstrmojo.vi.ui.rw.ButtonBox":return B.Button;case"mstrmojo.vi.ui.rw.ImageBox":return B.Image;case"mstrmojo.vi.ui.rw.HtmlBox":return B.HTMLContainer;case"mstrmojo.vi.ui.rw.PanelStackBox":case"mstrmojo.vi.ui.rw.InfoWindowBox":return B.PanelStack;default:break;}switch(X){case"mstrmojo.gm.VisGraphMatrix":return B.GM;case"mstrmojo.ngm.VisNewGraphMatrix":if(b.isWaterfall){return B.Waterfall;}if(b.isBoxPlot){return B.BoxPlot;}if(b.isHistogram){return B.Histogram;}break;case"mstrmojo.ag.AgXtab":case"mstrmojo.vi.ui.rw.Xtab":case"mstrmojo.vi.ui.rw.MultiXtab":return B.Grid;case"mstrmojo.netviz.VisNetwork":return B.Network;case"mstrmojo.heatmap.vi.VisHeatMap":return B.HeatMap;case"mstrmojo.mapbox.VisMapbox":return B.Mapbox;case"mstrmojo.VisMapBase":return B.EsriMap;case"mstrmojo.kpicard.VisKPICard":return B.KPI;case"mstrmojo.plugins.MultiMetricKPI.MultiMetricKPI":return B.MultiMetricKPI;case"mstrmojo.plugins.ComparisonKPI.ComparisonKPI":return B.ComparisonKPI;case"mstrmojo.plugins.Sankey.Sankey":return B.Sankey;case"mstrmojo.plugins.TimeSeries.TimeSeries":return B.TimeSeries;case"mstrmojo.plugins.Gauge.Gauge":return B.Gauge;default:break;}return B.Unknown;}function E(X){switch(X){case B.Filter:return P.Control;case B.Text:case B.Image:case B.Shape:case B.HTMLContainer:case B.Button:return P.Field;case B.PanelStack:return P.Section;default:return P.Template;}}function A(Y){if(!Y){return"";}var Z=Y.boxContent,X=Z.scriptClass;switch(X){case"mstrmojo.ag.AgXtab":case"mstrmojo.vi.ui.rw.MultiXtab":return L.walk("gridInfo.0.k",Z);default:break;}return Y.k;}function J(c){if(!c){return[];}var Z=c.model,X=c.boxContent,b=N(c),Y=E(b),a=[{nodeKey:c.k,nodeType:Y}];switch(b){case B.Mapbox:case B.EsriMap:a=a.concat((Z.getMapLayerKeys(X)||[]).map(function(d){return{nodeKey:d,nodeType:Y};}));break;default:break;}return a;}function O(b){if(!b){return ;}var Y=b.model,a=N(b),Z=A(b),X=E(a);if(!Y.cmdMgr().isStateIdle()){return ;}Y.execute({execute:function(){this.submit([{act:"copyFormat",nodeKey:Z,nodeType:X}],{success:function(){mstrApp.copiedUnitFormatType=a;var c=Y.getDataService().stid||0,d=Y.lastSavedStid||0;if(c-d===1){Y.lastSavedStid=c;}},failure:function(){mstrApp.copiedUnitFormatType=undefined;}},L.copy(mstrmojo.DocDataService.SUPPRESS_DATA,{config:{silent:true}}));},isUntracked:true});}function Q(Z){if(!Z||!Z[0]){return ;}var Y=Z[0].model,b=L.walk("defn.iifp",Z[0]),X=Y.controller,c=Z.flatMap(J),a={act:"pasteFormat",targetNodes:c,partialRetrieval:{nodes:c.map(function(d){return d.nodeKey;})}};if(!Y.cmdMgr().isStateIdle()){return ;}X.submitUndoRedoUpdates(a,null,{success:function(h){var e,g=h.pukeys,i=g&&g.split("\u001E"),f=Y.getAllVisibleUnitsMap(),d=Z.map(function(j){return f[j.k];}).filter(Boolean);if(g){e=Y.getUnitDefinitions(g);}Y.updateDefnCache(h.defn,i);d.forEach(function(j){var k=Y.getNodeDataByKey(j.k);if(k&&k.defn&&k.defn.fmts){k.defn.fmts.top=0;k.defn.fmts.left=0;}j.refreshFormats();});Y.partialUpdate(h.data,e,undefined,i,h.puFilters,undefined,h.txns||{});if(d.length){if(b){Y.rebuildVizBox(d[0].k);}else{d[0].parent.rebuildChildren(d);}d[0].selectVIUnit(true);}},failure:function(d){if(!(mstrApp.isSingleTier&&d.code===403)){mstrmojo.alert(d.message,undefined,mstrmojo.desc(96,"Error"));}}},L.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,{config:{hideFailureErr:true}}));}mstrmojo.vi.ui._SupportCopyPasteFormat=mstrmojo.provide("mstrmojo.vi.ui._SupportCopyPasteFormat",{_mixinName:"mstrmojo.vi.ui._SupportCopyPasteFormat",isCopyAndPasteFormatEnabled:function W(){if(!mstrApp.supportFeature(D.SUPPORT_COPY_PASTE_FORMAT)){return false;}var X=R.safeCall("isAppStatePresentation",mstrApp)();if(X){return false;}return true;},canCopySelfFormat:function H(){if(!this.isCopyAndPasteFormatEnabled()){return false;}return true;},canPasteFormatToSelf:function C(){if(!this.isCopyAndPasteFormatEnabled()){return false;}if(!mstrApp.copiedUnitFormatType){return false;}return true;},copySelfFormat:function S(){if(!this.canCopySelfFormat()){return ;}O(this);},pasteFormatTo:function K(Y){var X=Y||[this];if(X.every(function(Z){return Z.canPasteFormatToSelf();})){Q(X);}},addCopyFormatMenuItem:function F(Y){if(!this.isCopyAndPasteFormatEnabled()){return ;}var X=mstrmojo.desc(14570,"Copy Formatting");if(this.canCopySelfFormat()){Y.addMenuItem(X,"cp-fmt",function(){this.copySelfFormat();}.bind(this));}else{Y.addNonInteractiveMenuItem(X,null,true);}},addPasteFormatMenuItem:function M(a,b){if(!this.isCopyAndPasteFormatEnabled()){return ;}var X=b?b.map(function(c){return mstrmojo.all[c];}).filter(Boolean):[this],Z=X.every(function(c){return c.canPasteFormatToSelf();}),Y=mstrmojo.desc(3396,"Paste Formatting");if(Z){a.addMenuItem(Y,"pst-fmt",function(){this.pasteFormatTo(X);}.bind(this));}else{a.addNonInteractiveMenuItem(Y,null,true);}},addCopyPasteSelfFormatMenuItems:function U(X){if(!this.isCopyAndPasteFormatEnabled()){return ;}if(mstrApp.isInVFInteractMode){return ;}if(X.hasMenuItems()){X.addSeparator();}this.addCopyFormatMenuItem(X);this.addPasteFormatMenuItem(X);},onkeydown:function I(Y){if(this._super){this._super(Y);}if(!this.isCopyAndPasteFormatEnabled()){return ;}var c=Y.e||Y;var a=G.isMetaKey(Y.hWin,Y.e)&&G.shiftKey(Y.hWin,Y.e),b=a&&["c","C"].includes(c.key),d=a&&["v","V"].includes(c.key);if(b||d){c.preventDefault();c.stopPropagation();}var X=this.parent,Z=R.safeCall("model.getMultiSelectUnits",X)()||[],e=Z.map(function(f){return mstrmojo.all[f];}).filter(Boolean);if(b){if(e.length!==1){return ;}if(!e[0].canCopySelfFormat()){return ;}e[0].copySelfFormat();}if(d){e[0].pasteFormatTo(e);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.DocDataService","mstrmojo.vi.controllers.EnumEvents","mstrmojo.mstr.EnumWebAPIErrorCodes","mstrmojo.util.PlatformHelper","mstrmojo.vi.enums.EnumFeatures");var I=mstrmojo.hash.copy,X=mstrmojo.func,b=X.wrapMethods,D=mstrmojo.vi.controllers.EnumEvents,c=mstrmojo.mstr.EnumWebAPIErrorCodes,F=mstrmojo.vi.enums.EnumFeatures,O=mstrmojo.util.PlatformHelper;var M=1,G=2,A=3;var S={FIRST:1,MIDDLE:2,LAST:3};var R={BUSY:1,INTERIM:2,DONE:3,SILENT:4,CANCELED:5};var H=I(mstrmojo.DocDataService.SUPPRESS_DATA,{preserveUndo:true,config:{silent:true}});function B(d,f,e){if(f.stid==="undefined"){e.submission=function(j,g,h){var k=h.params,i=JSON.parse(k.params);i.actions[0].stid=d.action===M?d.undoStateId:d.redoStateId;k.params=JSON.stringify(i);};}return e;}function K(e,i){var f=e.mgr;i.disablePU=true;var h=B(e,i,{success:function g(){e.state=R.DONE;},failure:function d(){f.onFailure();}});e.state=R.SILENT;f.dataService.submitUpdates(i,h,H);f.onSuccess(e);}function a(n,i){var m=n.urInfo,l=m.puKeys,t=m.puObjs,j=m.puFilters,o=n.mgr,k=o.model,p=o.dataService;if(l||t){if(l){i.partialRetrieval={nodes:l,filters:j};}if(t){k.addUpdateObjects(i,t);}}else{i.disablePU=true;}var g=B(n,i,{success:function s(){n.state=R.DONE;o.onSuccess(n);if(n.skipUIState){return ;}k.raiseEvent({name:D.REDO_UNDO});k.restoreUIState(n.action===M?n.undoUIState:n.redoUIState);k.syncUnstructuredDataItems();},failure:function f(){o.onFailure();},complete:function e(){o.resetState();}}),d=m.callback||k.getRebuildCallback(),q=b(d,g),h=I(m.extras);if(i.act==="undo"&&h!==undefined){h.hideCancel=true;if(i.killJob){h.message=mstrmojo.desc(14586,"Canceling...");}}n.state=R.BUSY;p.submitUpdates(i,q,h);}function P(g){var d=g.urInfo,e=g.mgr.model;if(!d.extras){var f=(d.treesToRender!==undefined)?d.treesToRender:g._treesFromRes;if(!d.disablePU&&!g._hasFullUpdate&&(!d.puKeys||!d.puKeys.length)){f=0;d.callback=b(e.getDatasetsUpdateCallback(),d.callback);}d.extras={style:{params:{treesToRender:f}}};}}mstrmojo.vi.controllers.UICmd=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmd",mgr:null,redoStateId:null,undoStateId:null,execute:mstrmojo.getMissingFn(),discard:mstrmojo.emptyFn,isUntracked:false,action:null,state:R.INTERIM,urInfo:null,isCancelPrompt:false,isCancelPromptAnswer:false,getStateValue:function Z(e,d){return this.action===M?d:e;},init:function U(d){I(d,this);this._treesFromRes=0;this.urInfo=this.urInfo||{};this.submitCount=0;},undoRedo:function J(t){var m=this,f,j=this.urInfo,l=j.silent,k,o=this.mgr,q=o.dataService;if(m.action===A){f={act:"redo",stid:m.redoStateId};k=j.redo;}else{if(m.action===M){var i=m.isCancelPromptAnswer||m.isCancelPrompt;f={act:"undo",stid:m.undoStateId,isCancelPrompt:i,killJob:t};if(m.isCancelPromptAnswer){f={act:"undo",stid:m.undoStateId,isCancelPrompt:false,killJob:true,isCancelPromptAnswer:true};}k=j.undo;}else{o.handleError();}}if(k){q.blockRequests=true;try{l=!!k.call(m)||l;}finally{q.blockRequests=false;}}if(m.action===M&&t&&(O.isLibraryOrWS())&&X.safeCall("supportFeature",mstrApp)(F.CANCEL_EXECUTION)&&X.safeCall("supportFeature",mstrApp)(F.CANCEL_REVERSE_UNDO_DASHBOARD_AUTHORING)){var p=mstrApp.isVI,e=X.safeCall("supportFeature",mstrApp)(F.SUPPORT_DEFAULT_AI_CONFIG_SETTINGS),n=p&&e;if(n){var h=j.extras&&j.extras.style&&j.extras.style.params&&j.extras.style.params.treesToRender;var s=(h&2)>0;if(!s){f.keepDocumentInstance=true;f.resolveExecution=true;var g=o.model,d=X.safeCall("hasLiveDataset",g)();if(d){g.needRebuildAfterCancel=true;}}}}if(l){K(m,f);}else{a(m,f);}},submitUpdate:function L(e,d){this.submit(e.actions,e.callback,e.extras,d);},submit:function N(h,s,g,p){var m=this,n=m.mgr,j=n.model,o=n.dataService,l=mstrmojo.array.ensureArray(h);s=s?I(s):j.getRebuildCallback();m.state=R.BUSY;function i(t,u){return !(t&&t[u]&&t[u].length);}if(m._hasFullUpdate||l.some(function(t){return t.disablePU;})||l.every(function(u){var w=u.partialRetrieval,t=u.partialUpdate;return i(w,"nodes")&&i(t,"nodes")&&i(t,"selectors")&&i(t,"objects");})){m._hasFullUpdate=true;}X.override({submission:function f(){if(m.submitCount===0){m.undoStateId=o.stid;}m.submitCount++;},success:function q(y,z){if(m.action!==G){n.handleError();}m.redoStateId=y.stid;var x=!p||p===S.LAST;if(x){m.state=R.DONE;}else{m.state=R.INTERIM;}var w=m.urInfo;if(!w.disablePU){var t=w.puKeys||[],AA=y.pukeys&&y.pukeys.split("\u001E");if(AA&&AA.length){t=t.concat(AA);var u=w.extraPuKeys;if(u){t=t.concat(u);delete w.extraPuKeys;}}if(t.length){w.puKeys=t;}}m._treesFromRes|=(y.defn?1:0)|(y.data?2:0);if(this._super){this._super(y,z);}if(x){m.completeSubmit();}},failure:function e(t,x){var w=(g&&g.skipUICmdMgrOnFailure)||[],u=parseInt(t.code||t.iServerErrorCode||(t.getResponseHeader&&t.getResponseHeader("X-MSTR-TaskErrorCode")||c.UICMD_DEFAULT_ERROR),10);if(w.indexOf(u)===-1&&w.indexOf(mstrmojo.mstr.EnumWebAPIErrorCodes.E_UNUSED)===-1){n.onFailure();}if(u===c.MSI_REPORT_INCOMPLETE_OP){m.urInfo.puKeys=m.urInfo.extraPuKeys;}if(this._super){this._super(t,x);}},canceled:function k(t){if(this._super){this._super(t);}window.setTimeout(function(){m.cancel(true);},0);},complete:function d(){if(!p||p===S.LAST){n.resetState();}if(this._super){this._super();}n.executeDelayedCmd();}},s);o.submitUpdates(h,s,g);},submitInterim:function W(e,f,d){this.submit(e,f,d,S.MIDDLE);},resetCmdMgrOnComplete:function C(){this._resetMgr=true;},completeSubmit:function Q(){var e=this,f=e.mgr,d=f.model;if(!e.completed){e.completed=true;e.state=R.DONE;f.onSuccess(e);P(e);e.redoUIState=d.getUIState();if(e.isUntracked){f.untrackLastCmd();}else{if(e._resetMgr){f.reset();}}}},cancel:function E(d){this.state=R.CANCELED;if(this._hasFullUpdate){this._treesFromRes=3;}P(this);this.mgr.onCancel(this,d);},submitSilent:function Y(f){var h=this,i=h.mgr,g=i.model,j=i.dataService;h.state=R.SILENT;i.onSuccess(h);h.redoUIState=g.getUIState();var k={submission:function e(){h.undoStateId=j.stid;h.submitCount++;},success:function l(m){h.state=R.DONE;h.redoStateId=m.stid;},failure:function d(){i.onFailure();}};j.submitUpdates(f,k,H);}});mstrmojo.vi.controllers.UICmd.CMD_PHASE=S;mstrmojo.vi.controllers.UICmd.CMD_STATE=R;mstrmojo.vi.controllers.UICmd.CMD_ACT_TYPE={UNDO:M,EXEC:G,REDO:A};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.mstr.EnumFunction","mstrmojo.warehouse.EnumDatabaseType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.models.template.DataInterface","mstrmojo.vi.viz.EnumDSSDropZones");mstrmojo.requiresDescs(5421,5422,13355);var R=mstrmojo.hash,M=mstrmojo.array,G=mstrmojo.desc,H=mstrmojo.DocDataService,Y=mstrmojo.warehouse.EnumDatabaseType,C=mstrmojo.string,e=mstrmojo.mstr.EnumFunction,f=mstrmojo.mstr.EnumDSSXMLObjectTypes,N=mstrmojo.models.template.DataInterface;var E=mstrmojo.vi.viz.EnumDSSDropZones;function L(t,h,AB,AD){var l=t.model,x=t.cmSelCells,AC=[],AK=l.getCellTitleInfo(h).title,AM,AE,o=function(i){var w=t.getCellForNode(i);AC.push(t.getCellUnitIndex(w));AM=w.dpt;},u,AH=h.lv>=0,AN,AA=h.setIdx,g=t.k,n=l.getFullObjectInfo(AK.id);if(t.hasArrayGSI){g=(typeof AA==="number"&&AA>-1)?N.getGSI(t.gridData.gsi,AA).k:t.gridData.sortIndex;}if(typeof AD==="string"&&AD.indexOf(";")>0){AE=parseInt(AD.substring(AD.indexOf(";")+1),10);AD=parseInt(AD.substring(0,AD.indexOf(";")),10);}if(AE===1&&!AB){x.reverse().forEach(o);}else{if(AE===1){u=1;x.forEach(o);}else{x.forEach(o);}}AN={oId:AK.id,oTp:AK.otp,depth:AM,ordinals:AC.join(","),sliceId:t.sid,viewKey:g,funcVal:AD,switchOrder:u,art:(n||{}).art,isRA:AH};if(AH&&AD===e.FunctionApplySimple){var z=l.docModel.datasets[l.data.datasetId];var j=R.walk("tables.0.dbt",z);if(j===Y.EssBase||j===Y.SAPHANAMDX||j===Y.KYLIGENCEMDX){AN.peName=AK.v||AK.n;}else{var p=t.getCellForNode(x[0]),AL=p._e.id;AN.peId=AL;AN.peName=p._e.ori_n||p._e.n;try{if(AK.fix>=0){var m=l.docModel.findUnitInDataSet(AK.id).fs,s=M.filterOne(m,function(i){return i.fnm==="DESC";}).fid;if(s){var AI=t.dataBlocks&&t.dataBlocks[p._gd]||l.data,AG=AI.gts[(AK.axis===E.Rows)?"row":"col"],q=M.filterOne(AG,function(i){return i.id===AK.id&&i.fid===s;}),AJ=q.es[p.idx];AN.peName=AJ&&(AJ.ori_n||AJ.n)||AN.peName;}}else{var y;M.forEach(AK.fs,function(AO,w){if(AO.n==="DESC"){y=w;return false;}});if(y!==undefined){var k=[];if(AK.axis===E.Rows){var AF;for(AF=p.idx;AF>-1;AF--){if(AK.es[AF].id===AL){k=[AK.es[AF].ori_n||AK.es[AF].n].concat(k);}else{break;}}for(AF=p.idx+1;AF<AK.es.length;AF++){if(AK.es[AF].id===AL){k.push(AK.es[AF].ori_n||AK.es[AF].n);}else{break;}}}else{k=M.map(M.filter(AK.es,function(i){return i.id===AL;}),function(i){return i.ori_n||i.n;});}AN.peName=k[y]||AN.peName;}}}catch(AJ){}}}return AN;}function D(i,h,k){var n=i.getDEInfo(h),m=n&&n.deObject&&n.deObject.des,l=1,j=k===-1?G(5187,"Group"):(k===e.FunctionApplySimple?G(13355,"Calculated Member"):G(5188,"Calculation")),g=function(o){return o.n===j+" "+l;};while(true&&m){if(m.some(g)){l++;}else{break;}}i.controller.onAddQuickDE(i,R.copy(L(i,h,false,k),{act:"addQuickDE",deName:j+" "+l}),h.setIdx);}function d(g,i){var h;for(h in g){if(M.find(g[h].att,"did",i)>-1){return h;}}return undefined;}function b(g){var i=g.split(";"),h;if(i.length>1&&i[i.length-2].slice(-1)!=="//"){i.splice(-1,1);}h=i.join(";");return h.replace(/\\:/g,"*:").replace(/\\;/g,";").replace(/\\\\/g,"\\").substring(1);}function A(t,h,o,k,g){var n=o.es,i=o.id,m;g.forEach(function(u){m=u[0];if(m.eid.indexOf(i)<0){n.push({n:C.decodeHtmlString(m.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:b(m.eid)});}});var j=t.controller,s=t.model&&t.model.docModel,q=j._getXtabCallback(t),l={act:"applyDEChanges",deId:h.did,attId:h.attId,attName:h.attName,dsId:h.dsId,k:t&&t.k,actions:[Z(o,k)]};s.addUpdateObjects(l,{id:l.deId||l.attId,type:47,flag:H.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});q=mstrmojo.func.wrapMethods(q,s.getDatasetsUpdateCallback(),s.getUpdateHiddenLayoutsCallback(),{success:function(){s.callOnNDECreated([o]);}});var p=function(u){return function(){if(l&&u){l.partialRetrieval={nodes:c(t,s,h)};}var w=u?s.wrapUnsetVisualizationFilterAction(l):l;j.submitUndoRedoUpdates(w,{},q,H.REQUEST_DEFN_DATA);};};s.checkAndNotifyVFChangeOnGroupUpdate({actions:l},p(true),p(false));}function Z(h,g){return{act:"update",position:g+1,item:h};}function F(i,h,l,k,j){var g=i.model.getCellTitleInfo(h).title;i.controller.onSetDEHierachyOptions(i,{act:"setDEHierarchyOptions",oId:g.id,eId:l.id,splice:k,expand:j},h.setIdx);}function Q(k,h){var g=[],j=h.t,i=h.did;k.getDropZones().zones.forEach(function(l){((l&&l.items)||[]).forEach(function(n){var o=n.t,m=n.did;if(o!==21&&m!=="-1"&&m!=="00000000000000000000000000000000"&&((o===4&&j===4)||(o!==4&&j!==4))&&m!==i&&M.find(g,"did",m)===-1){g.push(n);}});});k.docModel.getDatasetUnits(j===4?["mx"]:["att"]).forEach(function(l){if(M.find(g,"did",l.did)===-1&&l.did!==i&&!l.hide){g.push(l);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(g);}function c(j,g,i){var h=g.getSourceFilterKeys(j.zonesModel.getHost().k);M.forEach(j.parent.parent.children,function(m){var k=m.boxContent.gridInfo;if(k){var n=(k.rows.concat(k.cols)).some(function(o){return o.did===i.did;}),l=h.some(function(o){return o===m.k;});if(n&&!l){h.push(m.k);}}});return h;}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function O(g){D(this,g,-1);},addElementsToGroup:function P(i,j,h,g){A(this,i,j,h,g);},derivedElementCalculation:function B(h,g){D(this,h,g);},separateOthers:function S(g,h){F(this,g,h,1,1);},renameDEList:function J(g){this.controller.onEditQuickDEList(this,R.copy(L(this,g,true,-1),{act:"editQuickDEList",deName:g.v}));},editQuickDECalculationNumberFormat:function K(h,i){var g=L(this,h);g.deId=i.de.id;g.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,R.copy(g,this.model.docModel.createNumberFormatParams(i)),h.setIdx);},editDECalculation:function I(h,g){if(g!==undefined&&g!==null){this.controller.editQuickDECalculation(this,R.copy(L(this,h,true,g),{act:"editQuickDECalculation"}),h.setIdx);}else{this.controller.onEditQuickDECalculation(this,R.copy(L(this,h,true),{act:"editQuickDECalculation",deName:h.v}));}},createDEParam:function L(g,i,h){return L(this,g,i,h);},removeQuickDE:function W(o,t){var k=t&&t.deObject,l=(k&&k.des)||[],u=this,w=2,s=M.filter(l,function(y){return !y.ido;},{max:w+1});if(k&&(l.length<=w||s.length<=w)){var n=[],q=this.zonesModel.getZoneForObject(k.did),i=Q(this.zonesModel,k),h=M.find(i,"did",k.attId),g=h>=0?i[h]:null,p={};if(g&&q){n=this.zonesModel.getUngroupAddActions(q,k,g);p=this.controller._getXtabCallback(this);}n.push({act:"removeNDEFromDS",dsid:k.dsId,oid:k.did,disablePU:true});p=mstrmojo.func.wrapMethods(this.controller.model.getDatasetsUpdateCallback(),this.controller.model.getReloadLayoutModelCallback(),p,this.controller.getReloadLayoutViewCallback());var x=u.model&&u.model.docModel;var j=function(y){return function(){var z=(y&&x)?x.wrapUnsetVisualizationFilterAction(n):n;u.controller.submitUndoRedoUpdates(z,null,p,H.REQUEST_DEFN_DATA);};};if(x){x.checkAndNotifyVFChangeOnGroupUpdate({actions:n,zm:x},j(true),j(false));}}else{var m=R.copy(L(this,o),{act:"removeQuickDE"});this.controller.removeQuickDE(this,m,o.setIdx);}},derivedElementsEdit:function X(o,j){if(!j){j=this.getDEInfo(o);}var k=this.model,h=k.getCellTitleInfo(o).title,i=j&&j.deObject,n=j&&j.de,g,m,l;if(!i){g=this.gridData.datasetId||d(k.docModel.datasets,h.id);m=h.id;l=h.n?C.decodeHtmlString(h.n):undefined;}this.controller.openDEEditor(this,{dsId:g,attId:m,attName:l,deObj:i,elemId:n&&n.id,dispName:o.n?C.decodeHtmlString(o.n):l,setIdx:o.setIdx});},getDEInfo:function a(o){var j=this.model,l=j.getCellTitleInfo(o),m=l.isSrcTitle,h=l.title,g=o.dei,i,n;if((h&&h.ost!==12033)||(m&&o.otp!==f.Consolidation)){return null;}var k=(h&&h.id)||(m&&o.otp===f.Consolidation&&o.id);i=j.docModel.getDEObject(k);if(i&&g!==undefined){n=i.des[g];}return{deObject:i,de:n,ttl:h};},getOthersDEInfo:function U(h){var g;M.forEach(h.des,function(i){if(i.t===4){g=i;return false;}});return g;}});}());(function(){mstrmojo.requiresCls("mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.hash","mstrmojo.url","mstrmojo.EnumRWUnitType");var Q=mstrmojo,J=mstrmojo.hash,M=mstrmojo.url,A=mstrmojo.EnumRWUnitType,L=mstrmojo.chart.model.enums.EnumDSSObjectType,E=mstrmojo.vi.viz.EnumVisualizationTemplates,B=1,P=["#d70e12","#fa660f","#fecb34","#4bc995","#1aae6b"],F=[0.2,0.4,0.6,0.8],I=["#ec7b75","#f6db7f","#84c87b"],O=[0.35,0.65],N=Q.models.FormatModel,D=N.ENUM_PROPERTY_NAMES;function S(W,U,X,Y){U.reverse().forEach(function(Z){Y.push(W.getClearThresholdAction(X.did,X.t||L.DssTypeMetric,Z.tid));});}mstrmojo.vi.util.ThresholdUtils=mstrmojo.provide("mstrmojo.vi.util.ThresholdUtils",{addClearAllThresholdsActions:function R(U,X,b){var a=X.data.gsi,W=a.mx,Y=a.thresholds,Z;if(Y){W.forEach(function(c){Z=Y[c.did];if(Z){S(U,Z,c,b);}});a.thresholds={};}},addThresholds:function C(d,k,Y,c,a,U,W,Z){var b,g=[],f=new mstrmojo.threshold.ThresholdModel({});f.set("data",Y.data);var h=J.walk("gsi.thresholds",f),X=h&&h[c.did],e=J.walk("defn.t",Y)===A.GRID;a=a||[];if(X&&f.isAdvanced(c.did)&&!e){X=false;}if(!X||Z){if(!U&&!W){U=P;W=F;}else{U=U||I;W=W||O;}for(b=0;b<U.length;b++){var j={};j.fmt=N.getFormatUpdate(D.BACKGROUND_COLOR,U[b]);N.getFormatUpdate(D.FILL_STYLE,0,j.fmt);if(b>0){j.flr=f.getRealValue(W[b-1],B);}if(b<W.length){j.ceil=f.getRealValue(W[b],B);}g.push(j);}a.push(d.getClearThresholdAction(c.did,L.DssTypeMetric,-1));a.push(d.getCreateSimpleThresholdAction(g,k.k,c.did,B,null,4));}f.destroy();return a;},getDefaultMapThreshold:function H(){return{colors:P,ranges:F};},getDefaultGMThreshold:function G(X){var W,U;switch(X){case E.GRAPHMATRIXHORIZONTALBARCLUSTERED:case E.GRAPHMATRIXHORIZONTALBARSTACKED:case E.GRAPHMATRIXHORIZONTALBARPERCENT:case E.GRAPHMATRIXVERTICALBARCLUSTERED:case E.GRAPHMATRIXVERTICALBARSTACKED:case E.GRAPHMATRIXVERTICALBARPERCENT:case E.GRAPHMATRIXVERTICALBARAUTOMATIC:case E.GRAPHMATRIXGRIDCHART:case E.GRAPHMATRIXPIE:case E.GRAPHMATRIXBUBBLECIRCLEMM:case E.GRAPHMATRIXBUBBLEGRIDCIRCLEAA:case E.GRAPHMATRIXBUBBLEGRIDSQUAREAA:case E.GRAPHMATRIXBUBBLESQUAREAM:case E.GRAPHMATRIXBUBBLESQUAREMM:case E.GRAPHMATRIXVERTICALLINECLUSTERED:case E.GRAPHMATRIXVERTICALLINESTACKED:case E.GRAPHMATRIXVERTICALLINEPERCENT:case E.GRAPHMATRIXVERTICALLINEAUTOMATIC:case E.GRAPHMATRIXHORIZONTALLINECLUSTERED:case E.GRAPHMATRIXHORIZONTALLINESTACKED:case E.GRAPHMATRIXHORIZONTALLINEPERCENT:case E.GRAPHMATRIXHORIZONTALLINEAUTOMATIC:case E.GRAPHMATRIXVERTICALAREACLUSTERED:case E.GRAPHMATRIXVERTICALAREASTACKED:case E.GRAPHMATRIXVERTICALAREAPERCENT:case E.GRAPHMATRIXVERTICALAREAAUTOMATIC:case E.GRAPHMATRIXHORIZONTALAREACLUSTERED:case E.GRAPHMATRIXHORIZONTALAREASTACKED:case E.GRAPHMATRIXHORIZONTALAREAPERCENT:case E.GRAPHMATRIXHORIZONTALAREAAUTOMATIC:W=P;U=F;break;default:break;}return{colors:W,ranges:U};},getDefaultAltByImageURL:function K(Z){try{var Y=mstrApp.customization.getCustomThresholds();if(Y){var U=Y.image;if(U){for(var X=0;X<U.length;X++){var b=U[X];for(var W=0;W<b.bands.length;W++){var c=b.bands[W];if(c.alt&&(c.url===Z||M.getRealURL(c.url)===Z)){return mstrmojo.desc(c.alt);}}}}}}catch(a){console.error("Error getting default alt text for image URL: "+Z);console.error(a);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.GridBase","mstrmojo.Grid","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.models.template.DataInterface","mstrmojo.ag.EnumSectionDisplayMode","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.elementHelper","mstrmojo.util.XtabHelper");mstrmojo.XtabZone=mstrmojo.declare(mstrmojo.Grid,null,{scriptClass:"mstrmojo.XtabZone",markupString:'<div id="{@id}" class="mstrmojo-XtabZone {@cssClass}" style="position:relative;{@cssText}"></div>',markupSlots:{gridContainerNode:function(){return this.domNode;}},init:function(A){if(mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C){A.cssClass=mstrmojo.string.trim(A.cssClass||" ie");}this._super(A);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.vi.util","ThresholdUtils");var K=mstrmojo.models.template.DataInterface,X=mstrmojo.chart.model.enums.EnumDSSBaseFormType,S=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,N=mstrmojo.hash,U=mstrmojo.elementHelper,A=mstrmojo.vi.util.ThresholdUtils,F=4,Y=1,L=2;mstrmojo.XtabCP=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.XtabCP",base:null,lookupBase:null,colWidths:null,forceAutoRowHeight:false,startIndexInContainer:0,updatedRows:null,preServeUpdatedRows:true,init:function P(Z){mstrmojo.hash.copy(Z,this);},initContent:function W(c){this.startIndexInContainer=c||this.startIndexInContainer||0;var b=this.base||[],Z=b.show||this.needRC,a=b.items;this.rc=Z&&a?a.length:0;this.colWidths=(Z&&b.cws)||[];this.isDownloading=false;this.isDownloaded=true;this.invalidData=false;},isDataAvailable:function O(a,Z){return !this.invalidData;},doRowRangesContainData:function I(Z){return this.isDataAvailable();},download:function D(b,a,Z){if(!this.isDownloaded&&!this.isDownloading&&this.dataSource){this.isDownloading=true;this.dataSource.download(0,Z);}},invalid:function R(){this.invalidData=true;this.isDownloading=false;this.isDownloaded=false;this.preServeUpdatedRows=true;if(this.gridData){this.oldGridData=this.gridData;this.oldBase=this.base;this.updatedRows={};}},getRowHeight:function G(){return this.gridData.rh;},getNumAutoHeightRows:function(){return this.forceAutoRowHeight?this.rc:0;},getAvailableRowsCount:function Q(){return this.rc;},getAvailableRowRanges:function C(){var Z=this.startIndexInContainer,a=this.getAvailableRowsCount();if(!this.isDataAvailable()){return[];}return[[Z,Z+a]];},getUpdatedRows:function B(){return this.updatedRows;},getRowCells:function(AC,a,AM){var l=this.base||[],AO=l.items||[],AH=AO[AC]||[],m=AH.items,AD=this.lookupBase,f=this.interactiveCellsArray,AS=this.gridData,k=AS.css,n=K.getGSI(AS.gsi),AA=n.thresholds||{},g={},h=K.getAllThresholds(AS.gsi),AK=!!AS.stitchSectionKey,AN=n&&n.prop&&n.prop.cols&&n.prop.cols.mg,AQ=null,x=AS.ghs.rhs,AP,AF,AG,i,AL,t,AJ,b,y,z,AE="-1",Z=AS.gts,u=Z&&Z.rec,o;if(AM===undefined){AM=[];}N.forEach(n.mx,function(AT,AU){var e=!N.isEmpty(AA)&&AA.hasOwnProperty(AT.did);if(e){g[AU]=true;}});if(this.oldGridData){AP=this.oldBase;AF=AP&&AP.items;AG=AF[AC]&&AF[AC].items;}for(AL=0,i=(m&&m.length)||0;AL<i;AL++){t=m[AL];if(t){t.v=t.v||t.n;if(AD&&!t._e){AJ=AD[t.tui];b=t.fi;y=(AJ&&AJ.fs)||[];z=y[b]||y[0];if(!t.stt){t.ts=t.ts||z&&z.bftp;}o=AJ&&AJ.otp===S.Consolidation&&AJ.ost===H.ConsolidationManaged;if((z&&z.n==="DYNAMICLINK")||(t.ts===X.DssBaseFormHTMLTag&&AJ&&AJ.ost===H.DerivedAttribute)){t.isDynamicLink=true;}else{if(o){t.id=AJ.id;t.isNDE=true;}}AQ=AJ&&AJ.es[t.idx];if(AQ){t.v=t.v||AQ.n;if(AQ.rv){t.rv=AQ.rv;}if(AQ.isObjHeader){t.isObjHeader=AQ.isObjHeader;}t._e=AQ;}}if(!(o||t.isNDE)&&u&&t.cs&&t.cs>1){if(AM[AC]){AM[AC]+=t.cs-1;}else{AM[AC]=t.cs-1;}}if(!t.css){var s=t.cni;if(s!==undefined){t.css=k[s].n;if(!t.isObjHeader&&(g[t.mix]||(t._e&&AA.hasOwnProperty(U.getAttributeId(t._e.id))))){t.hcCss="hc-threshold";}}else{t.css="";}}if(!t._d&&AG&&this.preServeUpdatedRows){var c=AG[AL];if(!c||(c.rs!==t.rs)){this.preServeUpdatedRows=false;this.updatedRows={};}else{if((c.v&&t.v!==c.v)){var AR={};if(t.v!==c.v){AR.v=c.v;}if(t.css!==c.css){AR.css=c.css;}t._d=AR;this.updatedRows[this.startIndexInContainer+AC]=true;}}}t._gd=this.gridData._bidx||0;if(f){if(!a&&(t._ei===undefined||f[t._ei]!==t)){t._ei=f.push(t)-1;}}if(this.axis){t.axis=this.axis;}var q=t.pi,AB=function AB(AV,AT,e){var AU=AV&&AV[AT];return AU&&AU.es[e];},AI=function AI(AX,AU,AY,AT,AW){var AV=AX.items[AU],e;if(AM[AU]&&AY>=AM[AU]){e=AV&&AV.items[AY-AM[AU]];}else{e=AV&&AV.items[AY];}if(e){e.axis=e.axis||AT;if(e._e===undefined){e._e=AB(AX.show?AD:AW,e.tui,e.idx);}}return e;};if(q){if(q.ri!==undefined&&q.ci!==undefined){if(t.axis===2&&AN!==AE&&!AK){t._p=AO[q.ri].items[AL];}else{t._p=AO[q.ri].items[q.ci];}}else{var j=this instanceof mstrmojo.XtabOnDemandCP?this.dataSource.gridData.ghs.chs:this.gridData.ghs.chs,d=q.left,w=q.top;if(d){t._lp=AI(x,d.ri,d.ci,Y,Z.row);}if(w){t._tp=AI(j,w.ri,w.ci,L,Z.col);}}}var p=function(Ab,AT,Aa,AZ){try{var AW,AU;if(Ab._e&&Ab._e.id){AU=U.getAttributeId(Ab._e.id);if(!Aa){AW=AT[0];}else{AW=Ab.csIdx!==undefined&&AT[Ab.csIdx];}}else{if(Ab.mix!==undefined&&(Ab._tp||Ab._lp)){if(!Aa){AW=AT[0];AU=AZ&&AZ.mx&&AZ.mx[Ab.mix]&&AZ.mx[Ab.mix].did;}else{AW=Ab.csIdx!==undefined&&AT[Ab.csIdx];var AV=Ab.csIdx!==undefined&&AS.gsi&&AS.gsi[Ab.csIdx];AU=AV&&AV.mx&&AV.mx[Ab.mix]&&AV.mx[Ab.mix].did;}}}if(AW&&AU&&AW[AU]){var AX=AW[AU][Ab.ti-1];if(AX){Ab.alt=AX.alt;}}if(Ab.alt===undefined){var Ac=A.getDefaultAltByImageURL(Ab.v);if(Ac!==undefined){Ab.alt=Ac;}}}catch(AY){console.error("Error processing cell alt text",AY);}};if(t.ts===F&&typeof t.ti==="number"){p(t,h,AK,n);}}}return m;},getUnmergedCells:function E(g){var j=[],k=(this.base&&this.base.items)||[];if(g>k.length-1||g<0){return j;}var b=this.gridData.css,i=k[g].items[0],a=i&&i.pi,Z=a&&a.ri,e=a&&a.ci,f=i.ui||0,h=false;while(a&&Z>-1&&e>-1){i=i._p||k[Z].items[e];h=i&&i.ui===f;if(!h){var d={};N.copy(i,d);if(!d.css){d.css=b[d.cni].n;}d.rs=i.rs-g+Z;j.splice(0,0,d);}a=i&&i.pi;Z=a&&a.ri;e=a&&a.ci;if(i&&!i.fi){f=i.ui;}}return j;},getIndentPadding:function J(Z){return Z*14;},getCell:function M(Z,a){var b=this.base.items;return b[Z].items[a];}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H=mstrmojo.array;mstrmojo.XtabVACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabVACP",cps:[],initContent:function G(O){this.startIndexInContainer=O||0;this.rc=0;this.type=0;this.colWidths=[];var M;for(M=0;M<this.cps.length;++M){var N=this.cps[M];N.initContent(this.startIndexInContainer+this.rc);this.rc+=N.rc;this.type|=N.type;var L=N.colWidths;if(L&&(L.length>this.colWidths.length)){this.colWidths=L;}}},getNumAutoHeightRows:function(){return this.cps[0].getNumAutoHeightRows();},getRowHeight:function E(){return this.cps[0].getRowHeight();},getRowCells:function(M,L,O){var N=0,P=this.cps[N],Q;while(M>=P.rc){M-=P.rc;P=this.cps[++N];}if(this.renderingNewPage){P.updateCounter=0;this.renderingNewPage=false;}Q=P.getRowCells(M,L,O);this.updateCounter=P.updateCounter;return Q;},getUnmergedCells:function(L){var M=0,N=this.cps[M];while(L>=N.rc){L-=N.rc;N=this.cps[++M];}return N.getUnmergedCells(L);},getCell:function(L,N){var M=0,O=this.cps[M];while(L>=O.rc){L-=O.rc;O=this.cps[++M];}return O.getCell(L,N);},isDataAvailable:function B(O,N){var M=this._getCPs(O,N),L;for(L=0;L<M.length;++L){if(!M[L].isDataAvailable(O,N)){return false;}}return true;},doRowRangesContainData:function D(M){var L=this.getAvailableRowRanges();return H.some(L,function(N){var O=N[0],P=N[1];return M>=O&&M<P;});},getAvailableRowsCount:function K(){var N=0,L;for(L=0;L<this.cps.length;++L){var M=this.cps[L];if(M.isDataAvailable()){N+=M.getAvailableRowsCount();}}return N;},getAvailableRowRanges:function I(){var L=[],O=this.cps,M;for(M=0;M<O.length;++M){var N=O[M];if(N.isDataAvailable()){L=L.concat(N.getAvailableRowRanges());}}return L;},_getCPs:function C(Q,O){var M=0,P=this.cps[M],L=P&&P.startIndexInContainer,N=[];if(P){Q-=L;O-=L;}while(P&&Q>=P.rc){Q-=P.rc;O-=P.rc;P=this.cps[++M];}while(P&&O>=P.rc){O-=P.rc;N.push(P);P=this.cps[++M];}if(P){N.push(P);}return N;},invalid:function F(){var L;for(L=0;L<this.cps.length;++L){var M=this.cps[L];M.invalid();}this.updatedRows={};},getUpdatedRows:function J(){var L={},M;for(M=0;M<this.cps.length;++M){var N=this.cps[M];if(!N.preServeUpdatedRows){return{};}mstrmojo.hash.copy(N.getUpdatedRows(),L);}this.updatedRows=L;return L;},download:function A(Q,P,L){var O=this._getCPs(Q,P),M;for(M=0;M<O.length;++M){var N=O[M];N.download(Q,P,L);}}});}());(function(){mstrmojo.XtabHACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabHACP",cps:[],initContent:function E(L){this.startIndexInContainer=L||0;this.type=0;this.colWidths=[];var K;for(K=0;K<this.cps.length;++K){this.cps[K].initContent(this.startIndexInContainer);this.type|=this.cps[K].type;var J=this.cps[K].colWidths;if(J){this.colWidths=this.colWidths.concat(J);}}this.rc=Math.max(this.cps[0].rc,this.cps[1].rc);},getNumAutoHeightRows:function(){return Math.max(this.cps[0].getNumAutoHeightRows(),this.cps[1].getNumAutoHeightRows());},getRowHeight:function D(){return this.cps[0].getRowHeight();},getRowCells:function(L,K,P){var Q=this.cps,M=[],J=Q.length,O;if(K===undefined){K=false;}if(P===undefined){P=[];}for(O=0;O<J;O++){if(Q[O].getAvailableRowsCount()>0&&Q[O].rc>L){var N=Q[O].getRowCells(L,K,P);if(N){M=M.concat(N);}}}return M;},getUnmergedCells:function(J){return this.cps[0].getUnmergedCells(J);},isDataAvailable:function B(K,J){return this.cps[1].isDataAvailable(K,J);},doRowRangesContainData:function C(J){return this.isDataAvailable();},getAvailableRowsCount:function I(){return Math.max(this.cps[0].getAvailableRowsCount(),this.cps[1].getAvailableRowsCount());},getAvailableRowRanges:function G(){return this.cps[1].getAvailableRowRanges();},invalid:function F(){var K,J,L;for(K=0,J=this.cps.length;K<J;++K){L=this.cps[K];L.invalid();}this.updatedRows={};},getUpdatedRows:function H(){var J={},K;for(K=0;K<this.cps.length;++K){var L=this.cps[K];if(!L.preServeUpdatedRows){return{};}mstrmojo.hash.copy(L.getUpdatedRows(),J);}this.updatedRows=J;return J;},download:function A(M,K,J){var L=this.cps[1];L.download(M,K,J);}});}());(function(){var D=4,A=mstrmojo.mstr.EnumDSSXMLObjectTypes,B=mstrmojo.util.XtabHelper;mstrmojo.XtabLevelHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.XtabLevelHACP",allCells:[],updateCounter:0,pageNum:0,getEmptyCell:function C(E,F,H){var G={css:E.css.replace(" hl",""),v:"",fillerCell:true};if(F){G.cs=this.headerCells[H].cs||1;}return G;},getUnmergedCells:function(E){},getRowCells:function(X){var P=this.cps,J=[],h=P.length,M=false,n=this.gridData,Q=(n&&n.lvlepd)||-1,U=this.outlineState,I=this.allCells,f,e,d,G,F,o,c=0,L=-10;o=this.updateCounter;X-=o;if(I.length>0){return I.splice(0,1)[0];}var S=function(t){var u=t.gridData||(t.cps[0]&&t.cps[0].gridData),x=(u&&u.gts.row),k=(x&&x.length)||0,j=[],s=0,y="",q=0,w,p;j[0]=0;for(p=0;p<k;p++){w=x[p];if(y!==w.id){j[q]=s;q++;y=w.id;s+=w.cs||1;}else{s++;}}this.columnAdjuster=j;this.unmergedHeaderCellCount=s;};var Z=function(t){var u=t.gridData||(t.cps[0]&&t.cps[0].gridData),x=(u&&u.gts.row),p=(x&&x.length)||0,w,j,s,k=false,q;this.headerCells=w=mstrmojo.hash.clone(x);this.origHeaderCells=x;for(q=0;q<w.length;q++){s=w[q];if(s.cs>1&&s.otp===A.Filter){for(e=1;e<s.cs;e++){j=this.getEmptyCell(s,false);j.otp=s.otp;w.splice(q+1,0,j);}s.cs=1;}if(s.cs>1){k=true;}}for(q=w.length-1;q>0;q--){if(w[q].id&&w[q].id===w[q-1].id){w.splice(q,1);}}p=w.length;this.maxLevel=u.maxLevel=p;this.gridData=u;return k;};var H=function(s){var j,q,k,p;for(p=s.length-1;p>0;p--){q=s[p-1];j=s[p];if(j.ui===q.ui&&this.origHeaderCells[j.tui].otp!==A.Filter){if(j.v&&j.v!==""){if(j.ts===D){if(j.v.indexOf("#srcstart")===0){k=j.v;}else{k="#srcstart"+j.v+(j.alt!==undefined?"#altmarker"+(j.alt):"")+"#srcend";}if(q.ts!==D){k=q.v+" "+k;}else{k="#srcstart"+q.v+(q.alt!==undefined?"#altmarker"+(q.alt):"")+"#srcend "+k;}q.v=k;}else{if(q.ts===D){q.v="#srcstart"+q.v+(q.alt!==undefined?"#altmarker"+(q.alt):"")+"#srcend "+j.v;}else{q.v=(q.v?q.v:"")+" "+j.v;if(q._e&&j._e){q._e.n=(q._e.n?q._e.n:"")+" "+j._e.n;}}}j.v="";}s.splice(p,1);}}return s;};var m=function(p){var k=this.headerCells,s=k.length,j=k[p].cs?(k[p].cs-1):0;var q=0;for(q=p+1;q<k.length;q++){j+=k[q].cs?(k[q].cs-1):0;}return j;};var E=function(p){var k=p.gridData||(p.cps[0]&&p.cps[0].gridData),i=k.gts,j=false;if(i.col.length===0){j=true;}else{j=i.rec;}return j?0:1;};for(f=0;f<h;f++){if(P[f].getAvailableRowsCount()>0&&P[f].rc>X){var K=P[f].getRowCells(X,false,[]),N=mstrmojo.hash.clone(K.slice(0));if(P[f].type===4){if(X===0){this.hasMultiFormAttributes=Z.call(this,P[f]);this.metricAdjuster=E(P[f]);S.call(this,P[f]);if(Q===-1){Q=this.gridData&&this.gridData.lvlepd;}}if(this.hasMultiFormAttributes){N=H.call(this,N);}var l,g=0;if(mstrApp.isVI){for(e=0;e<K.length;e++){l=K[e];if(l.stt&&(l.idx<0||(!l._e||l._e.n))){continue;}g=B.getCellDepth(K[e],this.origHeaderCells)-1;l.colIx=this.columnAdjuster[g];}}var R=N.length;for(d=R-1;d>=0;d--){G=N[d];var b=B.getCellDepth(G,this.origHeaderCells);if(d===0){for(e=1;e<b;e++){N.splice(e-1,0,this.getEmptyCell(G,this.hasMultiFormAttributes,e-1));}}else{if(G.stt&&G.idx<0){N.splice(d,1);continue;}else{if(G.stt===1&&(!G._e||G._e.n)){N.splice(d,1);F=N[d-1];if(G._e&&G.hst&&G.hst!==L&&F&&F._e&&F.v===F._e.n){F.v+=" ("+G._e.n+")";}continue;}else{var W=[];N.splice(d,1);for(e=1;e<b;e++){W.push(this.getEmptyCell(G,this.hasMultiFormAttributes,e-1));}W.push(G);I.splice(0,0,W);M=true;o++;this.rc++;}}}G.rs=1;G.outLvl=b;if(U&&U.collapseToLevel){if(b<=U.collapseToLevel){if(b<U.collapseToLevel||!U.isExpanding){delete U.collapseToLevel;I.forEach(function(i){i.forEach(function(j){if(!j.fillerCell&&j._ei){delete U[j._ei];j.epd=false;j.hidden=false;}});});}else{if(U.isExpanding){U.hasTBodyElementsToExpand=true;}U[G._ei]={expanded:false,hidden:true};}}else{U[G._ei]={expanded:false,hidden:true};}}if(U&&U[G._ei]!==undefined){G.epd=!(U[G._ei].expanded);G.hidden=U[G._ei].hidden;}else{G.epd=Q>0&&Q<=b;G.hidden=false;}if(this.hasMultiFormAttributes){c=m.call(this,b-1);}if((c||this.metricAdjuster)&&b===this.maxLevel){G.isLeaf=true;}G.cs=R>1?(R-d+c+this.metricAdjuster):(R+c+this.metricAdjuster);}this.updateCounter=o;}else{if(mstrApp.isVI){for(e=0;e<K.length;e++){K[e].colIx=this.unmergedHeaderCellCount+e;}}if(M){var Y=I.length-1,O=I[Y],a;I[Y]=O.concat(N);for(e=0;e<Y;e++){O=I[e];a=O[0];for(d=0;d<N.length;d++){O.push(this.getEmptyCell(a||N[d]));}}a=J[J.length-1];for(d=0;d<N.length;d++){J.push(this.getEmptyCell(a||N[d]));}continue;}}if(N){J=J.concat(N);}}}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.util.XtabHelper");var H=-1,I=mstrmojo.util.XtabHelper,Q=mstrmojo.mstr.EnumDSSXMLObjectTypes;function N(W){var U=0;for(U=0;U<W.length;U++){if(W[U].otp===-1){return true;}}return false;}function E(U){var Y,X,W;for(W=U.length-1;W>0;W--){Y=U[W];X=U[W-1];if(Y.id===X.id){U.splice(W,1);if(X.v===X.n){X.v+=" | "+Y.v;X.cs=(X.cs||1)+(Y.cs||1);}}}return U;}function A(U){return U.gts.col.length>0&&U.gts.rec===false;}mstrmojo.XtabTitlesCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabTitlesCP",init:function K(U){this._super(U);},download:function F(X,W,U){},shouldClonedLastTitleCell:function B(){return(this.gridData.lhv!==0);},updateMetricsLabel:function C(U){if(mstrApp.isVI&&U.otp===H){var W=this.showMetricsLabel?mstrmojo.desc(3582,"Metrics"):"";U.n=W;if(U.v){U.v=W;}}},initContent:function S(d){this.startIndexInContainer=0;if(!this.cts){this.cts=mstrmojo.hash.clone(this.gridData.gts.col);}var o=this.gridData,t=this.defn,W=o.gts,p=o.ghs,Y=W.row||[],U=W.col||[],f=W.show||(this.needRC&&mstrmojo.hash.walk("rhs.show",p)),c=W.rec,m=this.cts||[],l=Y.length,e=m.length,j=o.css;this.base={items:[]};this.rc=(f&&m.length)||0;if(this.rc===0&&f){this.rc=l>0?1:0;}this.colWidths=this.getColWidth(f);if(!this.rc){if(this.needRC&&!I.isDisplayOutline(o,t)){this.rc=1;}this.nRowSpan=this.nColSpan=0;return ;}var a={items:[]},g=0,X=1,h,k,q=this,Z=q.base.items,n=function(i,s){if(q.shouldClonedLastTitleCell()&&s>1){i.rs=1;h=mstrmojo.hash.clone(i,{});h.n="&nbsp;";i.cni=j.push({n:(j[i.cni].n||"")+" fsbp_1"})-1;}},b=function(u){var i=u;while(i-->1){if(q.shouldClonedLastTitleCell()){var s=mstrmojo.hash.clone(h,{});s.cni=j.push({n:(j[s.cni].n||"")+" fsbp_"+((i==1)?"3":"2")})-1;Z.push({items:[s]});}else{Z.push({items:[]});}}};for(k=0;k<l;++k){this.updateMetricsLabel(Y[k]);Y[k].axis=1;Y[k].ui=k;g+=Y[k].cs||1;a.items.push(Y[k]);}if(e>0){this.updateMetricsLabel(m[0]);m[0].axis=2;m[0].ui=0;U[0].axis=2;U[0].ui=0;X=m[0].rs||1;n(m[0],X);g+=m[0].cs||1;a.items.push(m[0]);}Z.push(a);for(k=1;k<e;++k){this.updateMetricsLabel(m[k]);if(X>1){b(X);}m[k].axis=2;m[k].ui=k;U[k].axis=2;U[k].ui=k;X=m[k].rs||1;n(m[k],X);Z.push({items:[m[k]]});}this.rc=Z.length;this.nRowSpan=this.rc+X-1;this.nColSpan=g;if(c){this._removeExtraColumn(Y,m);}},getColWidth:function R(U){var X=this.gridData.gts,W=X.row||[],Y=(U&&X.cws)||[];if(this.needRC&&Y.length===1&&!W.length){Y=[];}return Y;},getAvailableRowsCount:function M(){return this.rc;},getAvailableRowRanges:function D(){var U=this.startIndexInContainer,W=this.getAvailableRowsCount();if(!this.isDataAvailable()){return[];}return[[U,U+W]];},getSpanDimension:function L(){return{nRow:this.nRowSpan||0,nCol:this.nColSpan||0};},isDataAvailable:function J(W,U){return true;},doRowRangesContainData:function G(U){return this.isDataAvailable();},getRowCells:function O(b,f,g){if(f===undefined){f=false;}var e=this._super(b,f,g),a=this.gridData;if(a.olm&&!(a.rw&&a.rw.row.bc>0)&&!(this.dataSource&&this.dataSource.defn.txi)){e=E(e);var X=0,W=0,U,d,Y=1;e=mstrmojo.hash.clone(e);for(X=0;X<e.length;X++){d=e[X];if(d.axis===1&&d.cs>1&&d.otp===Q.Filter&&((d.rs||1)>=Y)){Y=d.rs||1;for(W=1;W<d.cs;W++){U={};U.css=d.css.replace(" hl","");U.v="&nbsp;";if(d.rs){U.rs=d.rs;}U.hostCell=d;e.splice(X+1,0,U);}d.cs=1;}}var c=A(a),Z=c?e.length-1:e.length;for(X=0;X<Z-1;X++){e[X].expandLevel=X+1;}}return e;},_removeExtraColumn:function P(Y,q){var o=Y&&Y.length,d=q&&q.length,U=this.gridData.gts,g=U.row||[],b=U.col||[],W=g.length,m=b.length;if(!o||!d){if(d===1){var s=q[d-1];if(s.otp==-1){if(m>0){b[m-1]._hid=true;}this.base.items=[];this.nRowSpan=this.nColSpan=this.rc=0;}}return ;}var X=Y[o-1],h=this.rc,Z=this.base.items;if(X){if(X.otp==-1){if(W>0){g[W-1]._hid=true;}if(this.nColSpan){this.nColSpan-=X.cs||1;}Z[0].items.splice(o-1,1);}else{var e=h>1?h-1:0,f=Z[e],p=f.items.length;if(p>0&&m>0){b[m-1]._hid=true;}var a=X.fix;if(a){var n;for(n=0;n<a;n++){f.items[p-1+n]=Y[o-a+n];}}else{f.items[p-1]=X;}for(var l=0,k=d-1;l<k;l++){q[l].cs=a||X.cs;}var c=a||1;Z[0].items.splice(o-c,c);if(this.nColSpan){this.nColSpan-=1;}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.util.XtabHelper","mstrmojo.ag.models.template.AgDataInterface");var D=mstrmojo.array,A=mstrmojo.util.XtabHelper,C=mstrmojo.ag.models.template.AgDataInterface;mstrmojo.MultiXtabTitlesCP=mstrmojo.declare(mstrmojo.XtabTitlesCP,null,{scriptClass:"mstrmojo.MultiXtabTitlesCP",initContent:function B(G){var N=this.gridData,Q=this.defn,E=N.gts,L=E.row||[],O=L.length,H=N.ghs,M=E.show||(this.needRC&&H.rhs.show),F=N.stitchSectionKey&&N.sdm===mstrmojo.ag.EnumSectionDisplayMode.COMPOUND_GRID,P=D.filter(H.chs.items,function(S){return F?true:(S&&S.items&&S.items.length>0);}).length;this.startIndexInContainer=0;if(N.gsi.length===1&&!A.isDisplayOutline(N,Q)&&!C.hasMicrocharts(N.gsi[0])){return mstrmojo.XtabTitlesCP.prototype.initContent.call(this,G);}this.base={items:[]};this.rc=(M&&P)||0;if(this.rc===0&&M){this.rc=O>0?1:0;}this.colWidths=this.getColWidth(M);if(!this.rc){if(this.needRC&&!A.isDisplayOutline(N,Q)){this.rc=1;}this.nRowSpan=this.nColSpan=0;return ;}var R={items:[]},I=0,K,J=this.base.items;for(K=0;K<O;++K){this.updateMetricsLabel(L[K]);L[K].axis=1;L[K].ui=K;L[K].rs=this.rc;I+=L[K].cs||1;R.items.push(L[K]);}if(R.items.length){J.push(R);}this.rc=J.length;this.nRowSpan=Math.max(this.rc,P);this.nColSpan=I;}});})();(function(){mstrmojo.XtabOnDemandCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabOnDemandCP",blockNum:0,listeners:null,initContent:function G(H){if(H!==undefined){this.startIndexInContainer=H;}this.isDownloaded=(this.base!==null);this.isDownloading=false;if(this.base){this._super(this.startIndexInContainer);this.notifyListeners();}},addCPListener:function F(H){if(!this.listeners){this.listeners=[];}this.listeners.push(H);},notifyListeners:function E(){var H,J=this.listeners,I=(J&&J.length)||0;for(H=0;H<I;H++){if(J[H]&&J[H].onDemandDataReady){J[H].onDemandDataReady(this);}}},getAvailableRowsCount:function D(){return this.isDownloaded?this.rc:0;},getAvailableRowRanges:function A(){var H=this.startIndexInContainer,I=this.getAvailableRowsCount();if(!this.isDataAvailable()){return[];}return[[H,H+I]];},download:function(H){if(!this.isDownloaded&&!this.isDownloading){this.isDownloading=true;this.dataSource.download(this.blockNum,H);}},invalid:function(){if(this._super){this._super();}this.isDownloaded=false;this.isDownloading=false;},isDataAvailable:function C(I,H){return this.isDownloaded;},doRowRangesContainData:function B(H){return this.isDataAvailable();}});})();(function(){var d=1,h=2,p=4,Z=8,j=1,k=2,H=3,f=4,o=5,X=6,N=7,m=8,a=4,G={},C={},J=4,S=1,K={TITLE:"ig-title",GROUPING:"iggroup",BANDING:"igbanding",RIGHT_ALIGN:"rtAlign",LEFT_ALIGN:"leftAlign",TOTAL_ROW:"total"},W=mstrmojo.hash,Y=mstrmojo.array;function c(w,t){var u=w[0],q=t.gts,s=q.cws.length;return(t.vp.gr==="1"&&(s>1));}function l(s,y){var w=function(z,AA){if(AA&&z&&z.css&&z.css.indexOf(AA)<0){z.css+=" "+AA;}};var u=y.type,t=y.col,x=(t&&t.cl)||0,q=(u===h||u===d);if(u===h||u===Z){w(s,K.RIGHT_ALIGN);}else{if(u===d||u===p){w(s,K.LEFT_ALIGN);}}if(q){if(t&&t.tg&&x>1){if(!s._v){s._v=s.v;s.v="<span class='toggleHeader'>"+s.v+"</span>";}}w(s,K.TITLE);}Y.forEach(y.extraCss,function(z){w(s,z);});}function A(q){return 0;}function n(w){var t,u=w.cg,q=u&&u.cgc,s=1;for(t=0;t<q;t++){if(u&&u[t]&&!u[t].tg&&u[t].cl>s){s=u[t].cl;}}return s;}function O(s,q){var t=o;if(q===2){if(s===0){t=j;}else{if(s===1){t=f;}}}else{if(q>2){if(s===0){t=j;}else{if(s===1){t=k;}else{if(s===q-1){t=f;}else{if(s<q-1&&s>1){t=H;}}}}}}return t;}function M(q,w,t,s){var y=s&&s.cols&&s.cols.cg,u,z=0,x=0;if(y){for(u=0;u<w;u++){if(q[u]){z+=q[u].length;}}z+=(t+1);for(u=0;u<y.cgc;u++){x+=y[u].cl;if(x>=z){return u;}}}return -1;}function Q(z,u,s,q){var y=[],x,t,w,AA;for(t=0,w=z.length;t<w;t++){if(z[t].length===1){x=z[t][0];x.rowType=(x.rowType!==m)?O(u,s):m;x.singleStack=(s>1);x=W.copy(x);if(x.ts===J){if(s===1){x.rowType=o;x.colIdx=M(z,t,u,q);}else{if(!u){x.colIdx=M(z,t,u,q);}else{delete x.ts;x.v="";}}}else{if(u){x.v="";}}}else{x=z[t][u];if(!x){AA=z[t].length;x=W.copy(z[t][AA-1],{});x.v="";if(x.hasOwnProperty("ts")){delete x.ts;}}else{if(x.ts===J){x.colIdx=M(z,t,u,q);}}x.rowType=(x.rowType!==m)?O(u,s):m;}y.push(x);}return y;}function R(q){if(q===0){return 0;}var s=this.sectionMap[q-1]||0;return Math.floor((q-s)/this.stackLevels);}function E(z){var x,y,w=this.sectionInfo,q=w.length,u=this.srh,t=this.lastSectionIndex;y=w[t];if(z>=y.rs&&z<(y.rs+u)){return y;}if(z<y.rs){x=t-1;if(x<=0){this.lastSectionIndex=0;return null;}do{y=w[x];if(z>y.rs&&z<=(y.rs+u)){this.lastSectionIndex=x;return y;}}while(z<y.rs&&--x>0);this.lastSectionIndex=x;return y;}x=t+1;if(x>=q){this.lastSectionIndex=q-1;return null;}do{y=w[x];if(z>y.rs&&z<=(y.rs+u)){this.lastSectionIndex=x;return y;}}while(z>(y.rs+u)&&++x<q);this.lastSectionIndex=x-1;return null;}function g(AA,t,q,z){var y=AA[0],w,x=AA.length,s=y&&y.rowType,u={v:"",css:"empty-igcell",rowType:s};if(q!==undefined&&y&&(s===j||s===o||s===X)){u={v:'<div><div class="IG-ActionArrow-IMG" style="height:'+z+"px;top:-"+(0.5*G[s])+'px;"></div></div>',css:"IG-ActionArrow",_ei:q};}for(w=x-1;w>=x-t;w--){y=AA&&AA[w];if(y){y.css+=" IG-lastdatacolumn";}}AA.push(u);}function U(AN,AI,t){var AE=AN.cols,AF=AE.cg,q=[{w:"0px"}];if(AE&&AI){var AO=AE.cws,s=[],AM=AO.length,AQ=0,AA=(parseInt(AN.ar,10)===1)?(AI/AM):-1,AD,u,AC=false,x=0,AG=AI,AH=0,AL;for(AL=0;AL<AM;AL++){u=s[AL]=AO[AL];AD=u.w;if(AD===""){AC=true;}else{if(u.xc){AQ+=parseInt(AD);AG-=AQ;x++;}else{AH+=parseFloat(AD,10);}}}if(AC||AH<100){AA=AG/(AM-x);}for(AL=0;AL<AM;AL++){u=AO[AL];if(u.xc){continue;}else{if(AA===-1){AD=parseInt(u.w,10)*AG/100;if(!AD&&AD!==0){AD=parseInt(AG/AF.cgc,10);}}else{AD=(parseInt(u.w,10)<0)?0:AA;}}s[AL]={w:AD+"px"};}if(t){return s;}var AB=[],AK=0;for(AL=0;AL<AM;AL++){var AP=AF[AL],z=AP.tg?AP.cl:1,AJ=0;for(AJ=0;AJ<z;AJ++){var y="0px";if(AJ===AP.cc){y=s[AL].w;}AB[AK+AJ]={w:y};}AK+=z;}return AB.concat(q);}if(t){return null;}return cp.cws.concat(q);}function D(){delete this.lastStackCols;delete this.lastAttRow;delete this.lastMtxRow;}mstrmojo.InteractiveGridHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.InteractiveGridHACP",sectionMap:[],stackLevels:1,gridWidth:480,tdWidths:null,lastSectionIndex:0,adjustCPMaps:function P(){var AB=this.cps,AA=this.cps[0],AG=Math.max(AB[0].rc,AB[1].rc);if(AA.type!==d){var AL=this.gridData,AF=function(AO,AR){var AN=AO.base.items,AP=AO.lookupBase[0].es,AQ=AN[AR].items[0],AM=AP&&AP[AQ.idx];return(AM&&AM.n)||((AQ.pi&&AP[AQ.pi.ri||0])||"");},AJ,AI,q=1,y,s,AD,u=0,t=-1,AE,AK,AH=0,AC=this.groupEnabled;for(AE=0,AJ=0,AK=AA.cps?AA.cps.length:1;AE<AK;AE++){var x=AA.cps?AA.cps[AE]:AA,z=x.rc;u=t+1;t=u+z-1;if(x.isDataAvailable(u,t)){if(x.lastRow){AH=x.lastRow;s=x.lastSection;}else{AJ=AH||0;for(AI=0,q=this.sectionMap[AJ-1]||0;AI<z;AI++){var w=this.stackLevels;AD=AF(x,AI);if(AC&&AD!==s){s=AD;this.sectionInfo.push({sn:AD,rs:this.srh*q+this.stackedRh*Math.floor((AJ-q)/this.stackLevels)});this.sectionMap[AJ]=++q;AJ++;}while(w){this.sectionMap[AJ]=q;w--;AJ++;}}AH=x.lastRow=AJ;x.lastSection=AD;}}else{break;}}this.rc=(this.stackLevels>1?AG*this.stackLevels:AG)+(AC?q:0);}},onDemandDataReady:function e(){this.adjustCPMaps();},initContent:function b(AB){var AA=this.cps,AM=this.gridData=AA[0].gridData||AA[0].cps[0].gridData,AI=AM.vp=this.gridVp=this.gridVp||AM.vp,t=AI.daf&&AI.daf.split(":"),AC=AI.cols,AD=AC.cg,AJ=AC.cws,z=AA[A(AD)],AG=AM.gts.row,s=AM.gts,AK=c(AA,AM),y=z.type!==d,AF,AH,w,q,AE,x,AL,u=(typeof (mstrMobileApp)!=="undefined"&&mstrMobileApp.getDeviceDPI)?mstrMobileApp.getDeviceDPI():160;if(u===160){G={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};C={1:11,2:11,3:1,4:16,5:16};}else{if(u===213){G={1:45,2:31,3:26,4:39,5:71,6:40,7:35,8:71};C={1:15,2:15,3:2,4:21,5:21};}else{if(u===240){G={1:50,2:34,3:30,4:44,5:80,6:40,7:40,8:80};C={1:16,2:16,3:2,4:24,5:24};}else{if(u===320){G={1:67,2:44,3:38,4:58,5:107,6:40,7:53,8:107};C={1:22,2:22,3:2,4:32,5:32};}else{G={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};C={1:11,2:11,3:1,4:16,5:16};}}}}if(y){if(AI.dafIdx===undefined&&t){for(AF=0;AF<AG.length;AF++){if(AG[AF].id===t[0]&&AG[AF].fid===t[1]){AI.dafIdx=AF;break;}}}}for(AF=0;AF<AD.cgc;AF++){if(AD[AF]&&AD[AF].tg){break;}}if(AF===AD.cgc){AM.gts.show=false;AM.ghs.chs.show=false;}this._super(AB);this.colWidths=U(AI,this.gridWidth);this.tdWidths=U(AI,this.gridWidth,true);if(y){this.stackLevels=n(AC);if(this.stackLevels>1){this.srh=G[N];this.rh=G[o];this.mrh=G[H];this.stackedRh=G[j]+(this.stackLevels-2)*G[k]+G[H];}else{this.srh=G[N];this.rh=this.stackedRh=this.mrh=G[o];}if(AK||this.stackLevels>1){this.sectionMap=[];this.sectionInfo=[];this.groupEnabled=AK;this.adjustCPMaps();q=this.cps[0].cps;if(q){AL=this;for(AF=0,AH=q.length;AF<AH;AF++){x=q[AF];if(x&&x.addCPListener){x.addCPListener(AL);}}}}}},getUnmergedCells:function(q){},getResolvedGroupHeader:function(t,w){var s=this.gridData,u=s.gts.row[w].es,q=s.ghs.rhs.items[t].items[w];if(q){if(!q.css){q.css=s.css[q.cni].n+" iggroup";q.n=u[q.idx].n;}}else{return{css:" iggroup",n:""};}return q;},getRowCells:function(AK){var AF=this.cps,y=[],AY=this.gridData,AU=AY.vp,AI=AU.cols.cg,AD=AF[A(AI)],AH=this.groupEnabled,t=AU.bn==="1",AV=[],AJ=R.call(this,AK),z,u,AL=1,AE,s,AB,AR,AQ,AT,AX,AC;if(AH&&(this.sectionMap[AK]!==this.sectionMap[AK-1])){var w=W.copy(AD.getRowCells(AJ)[0],{});w.cs=this.colWidths.length;w.rowType=N;l(w,{col:null,type:AD.type,extraCss:[K.GROUPING]});return[w];}if(!AK){D.call(this);}this.lastAttRow=this.lastAttRow||(AF[0].rc?AF[0].getRowCells(AJ):[]);this.lastMtxRow=this.lastMtxRow||(AF[1].rc?AF[1].getRowCells(AJ):[]);AB=this.lastAttRow;AT=AB.length;if(AT>0&&AB[0].stt){AE=true;for(AR=0;AR<AT;AR++){AX=AB[AR];if(AX.stt===S){s=AX;break;}}}if(!this.lastStackCols){Y.forEach([this.lastAttRow,this.lastMtxRow],function(AZ){for(AR=0;AR<AZ.length;AR++){if(AZ[AR]._ei!==undefined){if(AU.dafIdx>=0){AC=AD.getRowCells(AJ)[AU.dafIdx];}z=(AU.dafIdx>=0)?(AC&&AC._ei):"";return false;}}},this);var AP=function(AZ,Aa){if(AZ&&(Aa.type===d||Aa.type===h)){if(AN.tg===false){AZ.n=AZ.v="";}AZ.rowType=m;}l(AZ,{col:AN,type:Aa.type,extraCss:[((Aa.type===Z||Aa.type===p)&&t&&(AJ%2===1))?K.BANDING:null,AE?K.TOTAL_ROW:null]});if(AZ){AZ.cs=1;if(AZ._ei===undefined&&AU.dafIdx!==undefined){AZ._ei=z;}}};this.lastRowIndex=0;for(AQ=0;AQ<AI.cgc;AQ++){var AN=AI[AQ],AS=AN["mix"+AN.cc],x=AS!==undefined,AA=AF[x?1:0],AO,AM,AG,AW={n:"",stt:S,css:"xtab-td"},q=[];if(AN.tg){for(var AR=0;AR<AN.cl;AR++){q=[];AG=x?AN["mix"+AR]:AN.attForms[AR].idx;var AB=x?this.lastMtxRow:this.lastAttRow;AX=AB[AG];if(AE){if(!AX){AX=AW;}else{if(AX&&AX.stt===S){AX=W.copy(s,AW);}else{AX=W.copy(AX,{});}}}else{AX=W.copy(AX,{});}AP(AX,AA);q.push(AX);AV.push(q);}if(AQ+1===AI.cgc){AL=AN.cl;}}else{for(AO=0,AT=AN.cl;AO<AT;AO++){if(x){AM=AN["mix"+AO];if(AM!==undefined){AX=this.lastMtxRow[AM];}}else{AM=AN.attForms[AO];if(AM){AX=this.lastAttRow[AM.idx];}if(AE&&!AX){AX=AW;}}AP(AX,AA);q.push(AX);}AV.push(q);}}this.lastStackCols=AV;}y=Q(this.lastStackCols,this.lastRowIndex++,this.stackLevels,AU);if(this.lastRowIndex>=this.stackLevels){D.call(this);}return y;},getRowHeight:function F(s){var q=G[o];return G[s]||q;},getPadding:function L(q){return C[q]||C[a];},isDataAvailable:function i(t,q){if(!this.onDemandIF||!this.cps[1].cps){return true;}var w=this.sectionMap.length,u;if(!w){return this.cps[1].isDataAvailable(t,q);}if(q>w){if(t<w){u=R.call(this,t);return this.cps[1].isDataAvailable(u,u+(q-t));}return false;}return this.cps[1].isDataAvailable(R.call(this,t),R.call(this,q));},doRowRangesContainData:function B(s){var q=this.getAvailableRowRanges();return Y.some(q,function(t){var u=t[0],w=t[1];return s>=u&&s<w;});},download:function I(y,u,z){var t=R.call(this,y),q=t+Math.ceil((u-y)/this.stackLevels),w=this.cps[0],s,AA,x=!w.cps?[w]:this.cps[0]._getCPs(t,q);for(s=0;s<x.length;++s){AA=x[s];AA.download(t,q,z);}},getRowCellInfo:function(u){var t=E.call(this,u+this.srh),q,s=this.lastSectionIndex;if(t){q=this.sectionInfo[s-1];return{rowStart:t.rs,isNextRowNewSection:true,sectionName:q&&q.sn};}return{isNextRowNewSection:false,sectionName:this.sectionInfo[s].sn};}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.vi.controllers.UICmd","mstrmojo.func");var Q=mstrmojo.hash.copy,b=mstrmojo.array.forEach,F=mstrmojo.vi.controllers.UICmd;var E=2,S=1,g=F.CMD_ACT_TYPE.UNDO,h=F.CMD_ACT_TYPE.EXEC,Z=F.CMD_ACT_TYPE.REDO;var B=F.CMD_PHASE;var j=F.CMD_STATE;function L(){b(this._delayRemovedCmds,function(n){n.discard();});this._delayRemovedCmds=null;}function O(){this.cmds=this.cmds.concat(this._delayRemovedCmds);this._delayRemovedCmds=null;}function M(o){var n=this.cmds,p=this.pos;this._delayRemovedCmds=n.splice(p+1);if(p>=this.size-1){n.shift().discard();}n.push(o);this.pos=n.length-1;}mstrmojo.vi.controllers.UICmdMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmdMgr",cmds:null,delayedCmds:null,pos:-1,size:20,_delayRemovedCmds:null,controller:null,dataService:null,model:null,state:S,cancelPromptUndoStateId:-1,cancelController:null,CMD_PHASE:B,init:function k(n){Q(n,this);this.cmds=[];this.delayedCmds=[];},executeDelayedCmd:function i(){if(this.delayedCmds&&this.delayedCmds.length>0){var o=this.delayedCmds.shift(),n=true;if(o.delayProcessFn){n=o.delayProcessFn()!==false;delete o.delayProcessFn;delete o.canDelay;}if(n){this.execute(o);}}},execute:function e(p){if(this.state===E){if(p.canDelay){this.delayedCmds.push(p);return ;}this.handleError();}try{p=Q(p,{mgr:this,undoUIState:this.model.getUIState(),action:h});var n=this.curCmd=new F(p);M.call(this,n);this.state=E;mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);n.execute();}catch(o){this.reset();throw o;}},getInterimCmd:function C(){if(this.state===E){var n=this.cmds[this.pos];if(n&&n.state===j.INTERIM){return n;}}return null;},combineMultipleCMDs:function K(u,t,w){var s=this.cmds.length,p=t-u;if(p<=0||u<0||t>=s){return false;}var o=this.cmds[u],n=this.cmds[t];n.undoStateId=o.undoStateId;n.undoUIState=o.undoUIState;var q;for(q=u;q<t;q++){this.cmds[q].discard();}this.cmds.splice(u,p);if(this.pos>=t){this.pos-=p;}this.controller.onCmdMgrChanged();if(w){Q(w,this.cmds[u]);}},undo:function R(s,n,o){if(this.canUndo()){this.state=E;mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);try{var p=(this.curCmd=this.cmds[this.pos--]);p.action=g;if(!p.skipUIState){this.model.setVizContentComponentByUIState(p.undoUIState);}p.redoUIState=this.model.getUIState();p.isCancelPrompt=p.isCancelPrompt||!!n;p.isCancelPromptAnswer=p.isCancelPromptAnswer||!!o;p.undoRedo(s);}catch(q){this.reset();throw q;}}},redo:function J(){if(this.canRedo()){this.state=E;mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);try{var n=this.curCmd=this.cmds[++this.pos];n.action=Z;if(!n.skipUIState){this.model.setVizContentComponentByUIState(n.redoUIState);}n.undoUIState=this.model.getUIState();n.undoRedo();}catch(o){this.reset();throw o;}}},createMockCmdForAutoDashExecution:function A(u,s,n,o){try{var p,t={mgr:this,action:h,state:j.DONE,completed:true,undoStateId:u,redoStateId:s,skipUIState:true};if(n){t.urInfo=n;}p=(this.curCmd=new F(t));M.call(this,p);this.dataService.stid=s;if(o){this.controller.onCmdMgrChanged();}}catch(q){this.reset();throw q;}},createUndoCmdForReport:function c(o,n){try{var s={mgr:this,undoUIState:this.model.getUIState(),action:h,};if(n){s.urInfo=n;}var p=(this.curCmd=new F(s));M.call(this,p);p.undoStateId=o-1;p.redoStateId=o;this.dataService.stid=o;}catch(q){this.reset();throw q;}},createUndoCmdForReportPrompt:function W(o,n){try{var s={mgr:this,undoUIState:this.model.getUIState(),action:h,};if(n){s.urInfo=n;}this.saveCancelPromptUndoStateId();var p=(this.curCmd=new F(s));M.call(this,p);p.undoStateId=this.cancelPromptUndoStateId+1;p.isCancelPrompt=true;p.isCancelPromptAnswer=o||false;}catch(q){this.reset();throw q;}},clearDelayRemovedCmds:function H(){L.call(this);},onSuccess:function a(p){var o=p&&p.urInfo;var n=o&&o.extras&&o.extras.isCancelReportManipulation;if(this.state===S&&!n){this.handleError();}if(p!==this.curCmd){this.handleError("Wrong command");}this.state=S;L.call(this);this.controller.onCmdMgrChanged();mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);},onFailure:function m(){L.call(this);this.reset();},onCancel:function Y(o,p){this.state=S;var n=!!o.submitCount;if(n){this.undo(p);}else{this.pos--;}this.cmds.pop();o.discard();if(n){L.call(this);}else{O.call(this);}this.controller.onCmdMgrChanged();mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);},untrackLastCmd:function f(){var n=this.cmds.pop();n.discard();this.pos--;this.controller.onCmdMgrChanged();},untrackCancelPromptCmd:function G(){var n=this.cmds.pop();n.discard();},saveCancelPromptUndoStateId:function I(){if(this.cmds&&this.cmds.length>0&&this.pos>=0&&this.pos<this.cmds.length&&this.cmds[this.pos]&&typeof this.cmds[this.pos].undoStateId!=="undefined"){this.cancelPromptUndoStateId=this.cmds[this.pos].undoStateId;}},reset:function f(){b(this.cmds,function(n){n.discard();});this.saveCancelPromptUndoStateId();this.cmds.length=0;this.pos=-1;this.state=S;this.controller.onCmdMgrChanged();mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);},resetState:function X(){this.state=S;mstrmojo.func.safeCall("controller.onCmdMgrStateChanged",this)(this.state);},canUndo:function U(){return this.state===S&&this.pos>=0;},canRedo:function N(){return this.state===S&&this.pos<this.cmds.length-1;},onSubmitUpdates:function P(){if(this.state===S){this.cmds.splice(this.pos+1);this.controller.onCmdMgrChanged();}},isUndoRedo:function D(){var n=this.curCmd||{};return(this.state===E&&(n.action===g||n.action===Z));},handleError:function l(n){this.reset();throw new Error(n||"Invalid state.");},isStateIdle:function d(){return this.state===S;}});mstrmojo.vi.controllers.UICmdMgr.STATES={BUSY:E,IDLE:S};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.array","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.Label","mstrmojo.EnumRWUnitType","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.editors.MoreOptionsEditor","mstrmojo.vi.ui.editors.MoreOptionsEditorReact","mstrmojo.models.template.DataInterface");var J=mstrmojo.array,Q=mstrmojo.hash,L=mstrmojo.EnumRWUnitType,M=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,Z="mstrmojo-more-options-editor",G="mstrmojo-more-options-editor-visfilter",K=mstrmojo.models.template.DataInterface,H=mstrmojo.vi.enums.EnumFeatures,O=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES;mstrmojo.vi.models.editors.EditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.ControlsViewFactory,null,{scriptClass:"mstrmojo.vi.models.editors.EditorModel",hostId:"",help:"",getHost:function D(){return mstrmojo.all[this.hostId];},docModel:null,getEditorContents:mstrmojo.emptyFn,getGroupTitle:function E(b){return new mstrmojo.Label({cssClass:"edt-title",text:b});},getShowTitleCheckbox:function R(){var b=this.getHost();return this.getCheckboxAndLabel(b.parent.getTitleBarVisibility(),mstrmojo.desc(13599,"Show titlebar"),function(c){b.parent.toggleTitleBar(!!c);});},getTextAlign:function I(d,e,c){var b=new mstrmojo.vi.ui.TextAlignButtonBar(!c?null:{itemsValueMap:c});b.singleSelect(J.find(b.items,"id",d));b.onValueChange=e;return b;},getWrapText:function X(c,b){return this.getCheckboxAndLabel(c,mstrmojo.desc(13577,"Wrap text"),b);},getChangeFormatPropertyFn:function A(b,c){var d=this.id;return function(g,e){var f=mstrmojo.all[d];f.docModel.changeUnitFormatProperty(f.getHost().parent,[{formatType:c||1,propertyName:b,newValue:g,oldValue:e}]);};},getChangeGroupLayoutFn:function P(){var b=this.docModel;return function(c,f,d){var e=["left","top","width","height"].indexOf(c)>-1,g={};if(e){g[c]=f;b.changeUnitBoxLayout(g);}};},getChangeGroupPropertyFn:function a(b){var c=this.id;return function(d,f,e){(mstrmojo.all[c].getChangeFormatPropertyFn(d,b))(f,e);};},getCharacterGroup:function B(e,b,c){var f={onGroupValueChange:e};if(c){f.visibleControls=c;}var d=new mstrmojo.ui.editors.controls.CharacterGroup(f);d.setFormatSource(b);return d;},isContainerPositionSizeEnabled:function C(){var e=this.getHost(),d,b=false,c=this.docModel,f=Q.walk("defn.t",e)===L.PANEL;if(!f&&c){d=c.getOwningPanel(e);if(d&&!d.isFilterPanel()){b=d.isManualMode();}}return b;},getContainerGroup:function W(b,f,c,e){var d=this.docModel,h=this.isContainerPositionSizeEnabled(),g=M.FILL_COLOR+M.BORDER+(h?M.SIZE_POSITION:0),i=new mstrmojo.ui.editors.controls.ContainerGroup(Q.copy(e,{onGroupValueChange:f||this.getChangeGroupPropertyFn(),onGroupLayoutChange:this.getChangeGroupLayoutFn(),visibleControls:c||g}));i.setFormatSource(b);if(h){d.attachEventListener("setPositionAndSize",this.id,function(j){i.setPositionAndSize(j);});}d.raiseSetPositionSizeEvent();return i;},getMoreOptionsEditorLink:function S(d,c,e,b){return new mstrmojo.Label({text:mstrmojo.desc(9126,"More options"),cssClass:"edt-link",onclick:function(){this.openMoreOptionsEditor(d,c,e,b);}.bind(this)});},openMoreOptionsEditor:function U(h,d,i,c){var g=this.getHost(),f;var e=function(t,o,q,l){var s=this.host,j=s.controller,p=j.dataService(),m=[],n=s.model,k=s.k;if(!Q.isEmpty(t)){q=mstrmojo.func.wrapMethods(j._getXtabCallback(s),q);K.forEachGSI(s.gridInfo,function(w,u){m=m.concat([p.getUpdateTemplateAction(u,[n.getAdvancedPropertiesAction(t)],null,k)]);},k);}m=m.concat(o||[]);if(!Q.isEmpty(m)){j.submitUndoRedoUpdates(m,null,q,l);}};var b=mstrApp.supportFeature(H.REACT_INTEGRATION_ENABLED);if(mstrApp.isInVFConfigMode){f=mstrmojo.all[G]||(b?new mstrmojo.vi.ui.editors.MoreOptionsEditorReact({id:G,submitAction:e}):new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:G,submitAction:e}));}else{f=mstrmojo.all[Z]||(b?new mstrmojo.vi.ui.editors.MoreOptionsEditorReact({id:Z,submitAction:e}):new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:Z,submitAction:e}));}f.set("data",h);f.set("showHeadersSection",!!d);f.set("showSelectionLimitSection",!!g.GMController);f.set("showIncrementalFetchSection",!!c);f.set("lockHeadersCase",i);f.set("host",g);f.open();return f;},replaceChildControls:function N(d,c){var b=[].concat(d.children||[]);d.removeChildren();b.forEach(function(e){e.destroy();});d.addChildren(c);d.doLayout();},checkPaddingMode:function Y(d,c,b){if(mstrApp.supportFeature(H.SUPPORT_NEW_PADDING)&&!Q.walk("fmts.padding-mode",d)&&(c===O.CONTAINER_PADDING)){b.push({formatType:1,propertyName:O.PADDING_MODE,newValue:1,oldValue:0});}},getHelpUrl:function F(){return this.help;}});}());(function(){mstrmojo.requiresCls("mstrmojo._DocXtabModelShared","mstrmojo.hash","mstrmojo.array","mstrmojo.string","mstrmojo.expr","mstrmojo.elementHelper","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.EnumDragSources","mstrmojo.fe.FilterUtils","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.enums.EnumFeatures","mstrmojo.models.template.DataInterface","mstrmojo.models.FormatModel","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.enums.EnumVisFilterType");var Q=mstrmojo.hash,l=mstrmojo.array,U=mstrmojo.string,J=mstrmojo.expr,L=J.FN,N=J.ET,E=mstrmojo.mstr.EnumDSSXMLObjectTypes,q=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,f=mstrmojo.elementHelper,s=mstrmojo.vi.models.EnumDragSources,AE=mstrmojo.fe.FilterUtils.getExprXml,C=mstrmojo.fe.FilterUtils.isExprEmpty,y=mstrmojo.vi.ui.DatasetUnitMenuUtils,c=mstrmojo.vi.enums.EnumFeatures,AC=mstrmojo.models.template.DataInterface,AG=AC.ENUM_GRID_RESIZE.FIT_TO_CONTENTS,O=mstrmojo.EnumRWUnitType,AF=mstrmojo.models.FormatModel,u=mstrmojo.vi.enums.EnumVisFilterType,AD=mstrmojo._DocXtabModelShared;var I=4,b=12,w="-1";var B=3;function G(AH){return AH.docModel.controller.cmdMgr;}function n(AK){var AH=[],AL="The expression is not supported by the View Filter Exception Parser.",AI=function AI(AP){if(f.isNullElem(AP.id)&&U.isEmpty(AP.v)){throw AL;}},AO=function AO(AR){var AQ=null;if([N.AE,N.ANDOR].indexOf(AR.et)>-1||(AR.et===N.AQ&&AR.fn===L.IS_NULL)){if(!AR){return true;}var AP=AR.nds;AQ=!(AR.not||AR.fn===L.NOT||AR.fn===L.NOT_IN_LIST);if(AP){AP.every(function(AS){AQ=AQ&&AO(AS);});}}else{throw AL;}return AQ;},AN=function AN(AR){var AQ=false;if([N.AE,N.ANDOR].indexOf(AR.et)>-1||(AR.et===N.AQ&&AR.fn===L.IS_NULL)){AQ=(AR.fn===L.DESCENDANT);var AP=AR.nds;if(AP){AP.every(function(AS){AQ=AQ||AN(AS);});}}else{throw AL;}return AQ;},AJ=function AJ(AR,AT,AV){var AX=AR&&AR.nds,AQ=AR.fn===L.OR;AV=AV||AT;if(AX&&AX.length){var AS=AT;AX.forEach(function(AY){if(AQ){AS=[];}AJ(AY,AS,AV);if(AQ&&AS.length>0){AT.push(AS);}});}else{if(AR.fn===L.IS_NULL){var AW=AR.a=AR.a||{n:"Null Attribute",did:""};AT.push({tn:AW.n,tid:AW.did,eid:null,v:""});}else{if(AR.et===N.AE){var AP=AR.es||[];var AU=AP.length;if(AU===1){AI(AP[0]);AT.push({tn:AR.a.n,tid:AR.a.did,eid:AP[0].v,v:AP[0].n});}else{if(AV){AP.forEach(function(AY){AI(AY);AV.push([{tn:AR.a.n,tid:AR.a.did,eid:AY.v,v:AY.n}]);});}}}}}return AT;};try{if(AK){(AK.nds||[]).forEach(function(AP){var AQ=AJ(AP,[]);if(AQ.length>0){AH.push({keepOnly:AO(AP),isBranch:AN(AP),data:AQ});}});}}catch(AM){if(AM!==AL){console.error("vi.models.DocXtabModel: Encountered a problem parsing the view filter expression ("+AM+")");}else{return[];}}return AH;}mstrmojo.vi.models._DocXtabModelShared=mstrmojo.provide("mstrmojo.vi.models._DocXtabModelShared",Q.copy({mixinName:"mstrmojo.vi.models._DocXtabModelShared",getUnHiddenDrillPathsForCell:function z(AH,AL){var AJ=this.getAllDrillPathsForCell(AH,AL),AK=this.docModel.datasets,AI=function(AM,AP){var AN=l.find(AM,"did",AP.id),AO=AM[AN];if(AO&&!AO.hide){AP.n=AO.n;return true;}return false;};return l.filter(AJ,function(AO){var AM;for(AM in AK){var AN=AK[AM];if(AI(AN.att,AO)){return true;}}return false;});},getAllDrillWithinPathsForCell:function g(AH,AK,AJ){var AI=AJ?this.getUnHiddenDrillPathsForCell(AH,AK):this.getAllDrillPathsForCell(AH,AK);return AI.filter(function(AL){return !!AL.within;});},addEditNodeForDatasetAction:function Y(AJ,AI){this.augmentDropContextForSchema(AJ,this.docModel);var AN=AJ.getCtxtDragData(),AM=AN.src;if(AM===s.DATASETS||AM===s.ALL_OBJECT_LIST){var AL=AN.dsid,AK=Q.walk("xtab.gridData.datasetId",this),AH=Q.walk("xtab.gridData.dataSourceState",this),AO=AJ.actions||[];if(AL&&!AH&&!AK){AO.push({act:"editNode",nodeKey:AI,datasetId:AL});}AJ.actions=AO;}},getSaveViewFilterAction:function P(AH,AI){return{act:"saveViewFilter",nodeKey:AH||this.xtab.k,expr:C(AI)?'<exp><nd et="14" fn="19"></nd></exp>':AE(AI)};},_clearDrillingActionsHelper:function R(AL,AK){var AH=this.docModel,AJ=AL.model,AI;return function(AN,AM){AI=AH.getVfNdFromExpr(AN)||{et:14,nds:[]};AK.actions.push(AJ.getSaveViewFilterAction(AM,AI));};},getClearFiltersForVisActions:function h(AJ,AK,AH,AL){var AI={actions:[],callback:AL};AH=[].concat(AH);if(l.includes(AH,u.KEEP_ONLY)){AI=this.addClearKeepOnlyActions(AJ,AK,AI);}if(l.includes(AH,u.ADV_QUALIFICATION)){AI=this.addClearAdvQualActions(AJ,AK,AI,AH);}if(l.includes(AH,u.DOSSIER_LINKING)){AI=this.addClearDossierLinkingActions(AJ,AK,AI);}if(l.includes(AH,u.DRILLING)){AI=this.addClearDrillingActions(AJ,AK,AI);}if(l.includes(AH,u.LINKING)){AI=this.addClearLinkingActions(AJ,AK,AI);}return AI;},getClearLinkViewFilterAction:function H(AJ){var AH=this.docModel,AI=(AJ&&AJ.k)||this.xtab.k;return{act:"clearLinkViewFilter",nodeKey:AI,partialRetrieval:{nodes:[AI].concat(AH.getSourceFilterKeys(AI))}};},getClearLinkingAction:function k(AI){var AH=this.docModel,AJ=AI.k;return AH.getClearLinkingActionByUnitKey(AJ);},getPivotFormAction:function X(AQ,AI,AM){var AJ=this.getCellTitleInfo(AQ),AN=AJ.title,AK=AN.id,AL=this.getAttributeFormsInTemplate(AK),AP=(AN.fix&&AN.fix-1)||(AQ.fi||0),AH=AL[AP],AO;if(AI==="l"){AO=AP-1;}else{if(AI==="r"){AO=AP+1;}}return{act:"pivot",unitPos:AO+1,attFormId:AH.id,unitId:AK,unitType:AM||"",originUnitPos:AP+1};},addClearKeepOnlyActions:function e(AJ,AK,AI){var AH=AJ.model;return AH.getKeepOnlyActionsForAssociatedNodes([],AI.callback,AK);},_clearAdvQualActionsHelper:function p(AM,AN,AL,AK){var AH=this.docModel,AO=AH.getDataService(),AJ=AM.model,AI=(AN&&AN.k)||this.xtab.k;return function(AQ,AR,AP){if(AQ){AL.actions.push(AO.getUpdateTemplateAction(AP,AJ.getRemoveMetricLimitsAction(AQ),null,AI));}if(AR){if(AK>-1){AL.actions.push(AJ.getSaveViewFilterAction(AP));return true;}AL.actions.push(AJ.getSaveViewFilterAction(AP,AH.getVfexprWithUpdatedVf(AI)));}return false;};},getRemoveMetricLimitsAction:function AB(AH){var AJ=[],AK=[],AI=function AI(AM,AN){if(!AM){return ;}var AL=AM.nds;if(AL){AL.forEach(function(AP){var AO=AP.m;if(AO!==undefined){AN.push(AO.did);}else{AI(AP,AN);}});}};if(AH){AI(AH,AJ);AJ.forEach(function(AL){AK.push({act:"removeMetricLimits",unitId:AL});});}return AK;},addClearDossierLinkingActions:function W(AJ,AK,AI){var AH=AJ.model;AI.actions.push(AH.getClearLinkViewFilterAction(AK));return AI;},addClearLinkingActions:function F(AJ,AK,AI){var AH=AJ.model;AI.actions=AI.actions.concat(AH.getClearLinkingAction(AJ));AI.extras={style:{params:{treesToRender:3}}};return AI;},showNumberFormat:function(AQ){var AR=[1,2,8,9,11],AO;var AN;if(AQ.t===b){var AI=this.xtab.node.data,AH=AI&&AI.gts,AJ=new mstrmojo.models.template.DataInterface(AI),AM=AH&&(AJ.getRowTitles().titles||[]).concat(AJ.getColTitles().titles||[]),AP=l.filterOne(AM,function(AS){return AQ.did===AS.id;}),AL=((AP&&AP.fs)||[]).map(function(AS){return AS.id;});AO=(AQ.fs||[]).some(function(AS){return AR.indexOf(AS.bftp)!==-1&&AL.indexOf(AS.fid||AS.id)!==-1&&!AS.fgr;});}else{if(AQ.t===I){AN=mstrmojo.NumberFormat.isNumberFormatDT(AQ.dt);}}var AK=mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(c.NUMBER_FORMATTING);return(AQ.t===I&&AN&&AQ.did!==w&&AK)||!!AO;},getNumberFormatEditorCfg:function d(AJ){var AI=AJ.item,AK=this.getNumberFormatData(AI),AH=l.find(AK,"id",AI.did),AL=AH===-1?{}:AK[AH];return y.getNumberFormatEditor(AJ.item,AL,this.getNumberFormatEditorAcceptCallback(AI),null,AJ.blacklist);},hasDerivedElements:function A(AH){var AI=this.getObjectInfo(AH);return !!(AI&&AI.de);},getTemplateLimit:function t(){return this.data.tpl;},getSelectorDataFromViewFilter:function x(AH){return n(AH);},getSelectorDataFromTemplateLimit:function K(AH){return this.getSelectorDataFromViewFilter(AH);},isRecursiveAttribute:function m(AH){var AJ=this.docModel.getDEObject(AH),AI=this.getFullObjectInfo(AJ?AJ.attId:AH)||this.getObjectInfo(AJ?AJ.attId:AH);return AI&&AI.t===12&&AI.st===3076;},isSubtotalValue:function D(AH){var AI=this.getCellDataUnion(AH);return !AH.stt&&AI.some(function(AJ){return !!AJ.isSubtotal;});},supportsDSLKViewFilter:function o(AH){var AI=this.getObjectInfo(AH);return AI&&!AI.de&&(AI.t!==1)&&(AI.t!==47);},getDossierInfo:function(AI,AH,AJ){return mstrmojo.ui.editors.controls.ContextualLink.genDLAction(this.data.doslinkinfo,this.docModel,AI,AH,AJ);},getUnitNameInDataSet:function(AH){return this.docModel.findUnitNameInDataSetFromUnit(AH);},getAdvancedPropertiesAction:function j(AH){return{act:"advancedProperties",props:AH};},moveSubTotals:function S(AI,AJ){var AL=this,AM=AL.xtab,AN=AM.gridData.gsi,AH=[],AK=AL.docModel.getDataService(),AO;AC.forEachGSI(AN,function(AQ,AP){AO=AL.getMoveSubTotalAction(AI.data,AJ,AP);AH.push(AK.getUpdateTemplateAction(AP,AO,null,AM.k));},AM.k);AM.submitUndoRedoActionsWithCallback(AH);},getApplyGridCellFormatToSubtotalAction:function M(AO){var AS=[],AR=this.xtab,AL=AR.model,AM=AR.controller,AJ=AM.dataService(),AN=AR.gridData.gsi,AH,AI,AK,AQ,AP=function(AV,AU){Q.forEach(AV,function(AX,AW){AQ=AF.getFormatPropertyInfo(AW);if(AQ&&AQ.ps!==AF.ENUM_PROPERTY_SETS.FORMATTING_NUMBER){AI=Q.mergeHashes(AI,AF.getFormatUpdate(AW,(AQ.pt===B)?AX:AF.decodeValue(AW,AX)));}});var AT=AL.getZoneFormatAction.call(AL,AO,AI,AU,{isSubtotalFormat:true});AS.push(AJ.getUpdateTemplateAction(AU,AT,null,AR.k));};AC.forEachGSI(AN,function(AU,AT){AI={};AH=AU.fmts;AK=AH[AO];AP(AK,AT);},AR.k);return AS;},getCreateCSVizActions:function a(AI,AJ,Ab,AH){var AQ=[],AP=[],AY=this.docModel,AW=AY.getDataService(),AR=AY.getVizContentPanel(),AO=AR.k,Af=this.xtab,AM=Af.k,AL=Af.parent,Ac=this.data.gsi,AT=Ac,AN=AM;if(l.isArray(Ac)){AT=Ac[0];AN=AT.k;}AQ.push({act:"macroCopyUnit",newKey:Ab,unitType:O.GRID,unitKey:AN,toKey:AO,partialRetrieval:{nodes:[Ab]}});var AZ=AY.clearVisAsFilterAction(AL),AV=AZ&&AZ.actions;l.forEach(AV,function(Ag){if(!Ag.controlKey){Ag.nodeKey=Ab;AQ.push(Ag);}});var AU=AL.parent.children,AS,AK=Af.getFilterType()===1;l.forEach(AU,function(Ai){if(l.find(Ai.defn&&Ai.defn.an,"k",AM)!==-1){AQ.push({act:"associateNodes",nodeKey:Ai.k,targetKeys:[Ab]});var Ah=Ai.boxContent.selectorControl;if(Ah){var Ag=Aj===undefined||AK,Aj=Ag?AY.getNextKey():Aj;AQ.push({act:"addVisToFilter",parentKey:AM,targetKey:Ab,ctrlKey:Ah.ckey,newCGB:Ag,cgbKey:Aj});}}});l.forEach(AU,function(Ah){var Ag=Ah.defn,Ai=(Ag&&Ag.tks||"").split("\u001E");l.forEach(Ai,function(Aj){if(Aj===AM){var An=Ag.ck,Am=Ag.srct,Ak=Ag.srcst,Ao=(Am===E.Consolidation&&Ak!==q.ConsolidationManaged)||Am===E.Filter;if(Ah.isAMSelector&&Ah.isAMSelector()){return ;}var Al=AW.getAddCtrlTargetAction(An,Ab,Ab,Ao);AQ.push(Al);}});});var Aa=this.data,Ad=this,AX=function(Ag,Ah){l.forEach(Ag,function(Aj,Ai){if(Aj.did==="-1"){l.forEach(AT.mx,function(An,Al){var Am=Q.copy(An);Am.axis=-1;Am.unitPos=Al+1;AP.push(Ad.getRemoveTemplateUnitAction(Am));});}else{if(Aj.did!==AI.id){var Ak=Q.copy(Aj);Ak.axis=Ah;Ak.unitPos=Ai+1;AP.push(Ad.getRemoveTemplateUnitAction(Ak));}}});};AX(AT.rows,1);AX(AT.cols,2);if(AJ===2){AP.push(this.getPivotUnitAction(1,0,AI.id,12,2,0));}AP.push({act:"advancedProperties",props:{"Template Formatting":{ShowColumnHeaders:"-1",LockColumnHeaders:"-1"}}});var Ae=new AC(Aa);if(Ae.getColResizeScenario()!==AG){AP.push({act:"changeXtabColWidthScenario",value:AG});}if(AH){AP=AP.concat(AH);}l.forEach(AP,function(Ag){delete Ag.partialRetrieval;});AQ.push(AW.getUpdateTemplateAction(Ab,AP));return AQ;},hasRecursiveAttribute:function AA(AH){var AI=this,AJ=(AH||this.data).gsi||{};if(l.isArray(AJ)){return AJ.some(function(AK){return(AK.rows||[]).concat(AK.cols||[]).some(function(AL){return AI.isRecursiveAttribute(AL.did);});});}return(AJ.rows||[]).concat(AJ.cols||[]).some(function(AK){return AI.isRecursiveAttribute(AK.did);});},createDrillActionsByParams:function Z(AH){return this.docModel.getDataService().getDrillGridAction(AH);},drillGrid:function i(AJ,AK){var AH=this;G(this).execute({execute:function AI(){var AN=AH.createDrillActionsByParams(AJ);var AM=l.isArray(AN)&&AN.some(function(AO){return AO.act==="pauseTxn";});var AL=undefined;if(AM){AL={style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}};}this.submit(AN,AK,AL);}});}},Q.copy(AD)));mstrmojo.vi.models._DocXtabModelShared.fnGetSelectorDataFromViewFilterExpr=n;})();(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo._DocXtabModelShared","mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.elementHelper","mstrmojo.DocDataService","mstrmojo.models.template.DataInterface","mstrmojo.models.datasets.DataInterface","mstrmojo.string");var m="Metrics",G=2,X=mstrmojo.array,I=mstrmojo.hash,j=mstrmojo.func,i=mstrmojo.DocDataService,A="\u001E",C=mstrmojo.models.template.DataInterface.getGSI;function Q(q){if(!q){return false;}var s=this.scm,t,x,w,u,p,o=false;for(x in s){w=s[x];u=w.cgb;for(t in u){p=q[u[t]];if(p){if(!w.tks){w.tks=p;o=true;}else{if(w.tks&&(w.tks.indexOf(p)<0)){w.tks+=A+p;o=true;}}}}}return o;}function c(){var p=this.data,o=p.gts;if(!o){return ;}var q;X.forEach([o.row,o.col],function(s){X.forEach(s,function(t){if(t.sc){q=q||{};q[t.id||m]=t.sc;if(t.fid){q[t.id+"_"+t.fid]=t.sc;}}});});this.scm=q;Q.call(this,this.docModel.getCGBMap());}function n(o,p){var q=this.getDataService();q[o].apply(q,p);}mstrmojo.DocXtabModel=mstrmojo.declare(mstrmojo.XtabModel,[mstrmojo._DocXtabModelShared],{scriptClass:"mstrmojo.DocXtabModel",docModel:null,allowMetricHeaderSelection:false,init:function k(o){this._super(o);var p=this;this.docModel.attachEventListener("CGBMapChange",this.id,function(q){if(p.xtab.onCGBMapChange){p.xtab.onCGBMapChange(q);}});},ondataChange:function e(){c.call(this);},getGridInfo:function h(o){var q=this.xtab,p=q&&q.gridInfo;return C(p,o);},getMessageId:function H(){return this.docModel.mid;},getAction:function W(AE,t,z){var AC=AE[0],p=AC&&AC.at;var s;if(p){if((p&G)>0){var q=this.getCellTitleInfo(AC),AA=q&&q.title,o=AA&&AA.id,AB=this.scm;this.sti={titleId:o||m};var y=(o&&AB[o])||AB[m],x=function(){var AF=[];X.forEach(AE,function(AG){if(AG._e&&AG._e.id){AF.push(AG._e.id);}});return AF.join(A);};if(y){var AD=this.xtab,u=(AD.allowToggleSelections&&y.all&&z),w=(q.isSrcTitle||u);this.sti.deselectCurrent=u;s={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:t,ck:y.ck,tks:y.tks,eid:w?"OA:(All)":x(),ctlKey:y.ckey,sliceId:AD.sid,isUConDS:y.isUConDS,ifw:y.ifw}};}}}if(!s){s=this._super(AE);}if(s&&s.a){s.a.sliceId=this.xtab.sid;}return s;},getDownloadAction:function g(q,w,t,s,x,p,u,y){var o=this._super(q,w,t,s,x,u,p);o.sliceId=this.xtab.sid;if(y&&y.name==="TransactionUpdates"){if(o.partialUpdate){if(o.partialUpdate.selectors){o.partialUpdate.selectors.push(y.ctlKey);}else{o.partialUpdate.selectors=[y.ctlKey];}}else{o.partialUpdate={selectors:[y.ctlKey]};}}return o;},sort:function l(p,q){var o=this.xtab;p.stp=p.stp||this.getSubTotalsPos();p.subTotalsPos=p.stp;p.nodeKey=o.k;p.treeType=o.treeType||1;if(o.gridData.ctlTPKeys){p.selectors=o.gridData.ctlTPKeys.split(A);}n.call(this,"sortGrid",[p,q]);},pivot:function J(o,p){n.call(this,"pivot",[o,p]);},removeUnit:function O(o,p){n.call(this,"removeUnit",[o,p]);},showTotals:function D(o,p){n.call(this,"showTotals",[o,p]);},drillGrid:function U(o,p){n.call(this,"drillGrid",[o,p]);},downloadGridData:function b(o,p){n.call(this,"downloadGridData",[o,p]);},loadLayout:function Y(o){this.docModel.loadLayout(o);},resizeXtabColumn:function L(o,p){n.call(this,"resizeXtabColumn",[o,p]);},getDerivedMetricAction:function f(o,p){return{did:o._e.oid,um:o.um,alias:o._e.n,n:o._e.n,v:o.um?o.formula:o._e.v,mix:o.mix,cmd:p,model:this};},getAddTemplateUnitAction:function E(t,w,q,o){var p=t.t,u=this.data.gsi,s={act:"addUnit",unitId:t.did,unitType:p,unitPos:++o,dsId:w,isFirst:!u||(u.cols.length===0&&u.rows.length===0),paramTargetType:t.targetType};if((p!==4&&(p!==10||(t.targetType&&t.targetType!==4)))||!u||!u.mx.length){s.axis=q;}return s;},doesNameExistOnTemplate:function B(q,w,t,p){var u=q.node.data.gsi,o=t===4,s=o?u.mx:u.rows.concat(u.cols);return s.some(function(x){return x.did!==w&&(o||x.t===t)&&x.n===p;});},getPivotUnitAction:function N(s,y,q,x,t,o,p){y++;var w=parseInt(t,10),u=parseInt(o,10);return I.copy(isNaN(w)||isNaN(u)?{}:{originAxis:w,originUnitPos:++u},{act:"pivot",unitId:String(q||""),unitType:x||"",paramTargetType:p||"",axis:s,unitPos:y});},getLinkedAttributes:function d(o){var p;if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}p=this.docModel.als&&this.docModel.als.idLinks||{};return p[o];},getObjectInfo:function F(o){var p,q=this.data.gsi;X.forEach((q.cols||[]).concat(q.rows||[]).concat(q.pages||[]),function(s){if(s.did===o){p=s;}});return p;},supportsViewFilterActions:function K(o){if(this.data&&this.data.gsi){var p=this.getObjectInfo(o);return this.isObjectFilterable(p);}return false;},isObjectFilterable:function Z(o){return o&&!o.de&&(o.t!==1)&&(o.t!==47||o.st===12033);},submitDEAction:function R(p,w){var q=this.docModel,o=q.controller,u=q.getDataService(),t;o._addNodeKeyToAction(p,w);t=u.getUpdateTemplateAction(p.k,w);q.addUpdateObjects(t,{id:w.oId,type:47,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});var s=function(y){var x=[t];return function(){if(y){x=o.model.wrapUnsetVisualizationFilterAction(x);}o.submitUndoRedoUpdates(x,{},j.wrapMethods(q.getRebuildCallback(),q.getDatasetsUpdateCallback(),q.getUpdateHiddenLayoutsCallback()),i.REQUEST_DEFN_DATA);};};q.checkAndNotifyVFChangeOnGroupUpdate({actions:t},s(true),s(false));},submitDEHierachyOptionsActions:function S(o,p){this.submitDEAction(o,p);},submitQuickDECalculationActions:function P(o,p){this.submitDEAction(o,p);},submitQuickDECalculationNumberFormatActions:function M(o,p){this.submitDEAction(o,p);},submitRemoveQuickDEActions:function a(o,p){this.submitDEAction(o,p);},});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.func","mstrmojo.taphold","mstrmojo.VisUtility","mstrmojo.CustomVisUtility","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.FormatControlHelper","mstrmojo.customviz.GraphicModel","mstrmojo.customviz.CustomVisEnums","mstrmojo.JSONSchemaUtils","mstrmojo.elementHelper");mstrmojo.CUSTOM_CONTEXT_MENU={NORMAL:"normal",TOGGLE:"toggle",SUBMENU:"submenu",SEPARATOR:"seperator",SINGLE_SELECT_LIST:"single_select_list",MULTI_SELECT_LIST:"multiple_select_list",FORMAT:"format"};mstrmojo.DEFAULT_CONTEXT_MENU={KEEP_ONLY:"KEEP_ONLY",EXCLUDE:"EXCLUDE",DRILL:"DRILL",GROUP:"GROUP",CALCULATION:"CALCULATION",SHOW_DATA:"SHOW_DATA",GO_TO_TARGETS:"GO_TO_TARGETS",SHOW_LEGEND:"SHOW_LEGEND",CHANGE_VISUALIZATION:"Change_VIZ",COPY_PASTE_FORMAT:"Copy_Paste_Format"};var M=mstrmojo.dom,j=mstrmojo.array,N=mstrmojo.hash,C=mstrmojo.css,AB=mstrmojo.func,n=mstrmojo.CustomVisUtility,AD=mstrmojo.CUSTOM_CONTEXT_MENU,x=mstrmojo.DEFAULT_CONTEXT_MENU,S=n.log,o=mstrmojo.FormatControlHelper,AF=o.FORMAT_CONTROL_TYPE,a=mstrmojo.VisUtility,b=mstrmojo.vi.enums.EnumFeatures,L=mstrmojo.customviz.CustomVisEnums,A=L.ENUM_LEGEND_PROPS,K=3,k="touchstart",p="mousedown",E=M.isIOSTouch,W=E?k:p,R,Y=mstrmojo.JSONSchemaUtils,d=mstrmojo.elementHelper;function e(AH,AG){return AH&&AH[AG]&&AH[AG] instanceof Function;}function F(AG){return function(){AG(true);};}function u(AG){return function(){AG(false);};}function s(AI,AJ,AG){var AH=AG.propertyName;if(AH){AG.currentValue=AI.getProperty(AH);AG.onClick=function(AK){AI.savePropertyAndUpdateWidget(AH,AK.toString(),AG.config,AG.showFormatPanel);};}AJ.addToggleMenuItem(AG.name,AG.cls||"",F(AG.onClick),u(AG.onClick),AI.id,n.parseBoolean(AG.currentValue),AG.ctxt);}function t(AG){return j.map(AG,function(AH){return{text:AH.name,value:AH.value};});}function y(AJ,AG,AH){var AI=AH.propertyName;if(AI){AH.currentValue=AJ.getProperty(AI);AH.onClick=function(AK){AJ.savePropertyAndUpdateWidget(AI,AK,AH.config,AH.showFormatPanel);};}AG.addRadioMenuGroup(AH.currentValue,AH.onClick,t(AH.items),AH.cls||"",AH.ctxt);}function J(AJ,AG,AH){var AI=AH.propertyName,AK;if(AI&&AH.items){AK=AJ.getProperty(AI)||{};j.forEach(AH.items,function(AN){var AM=AN.propertyName,AL=N.clone(AK);if(AM){AN.currentValue=AK[AM];AN.onClick=function(AO){AL[AM]=AO;AJ.savePropertyAndUpdateWidget(AI,AL,AH.config,AH.showFormatPanel);};}AG.addToggleMenuItem(AN.labelText,AH.cls||"",F(AN.onClick),u(AN.onClick),AJ.id,n.parseBoolean(AN.currentValue),AN.ctxt);});}}function U(AH,AI,AG){if(AG.isDisabled){AI.addNonInteractiveMenuItem(AG.name,AG.cls||"",true);}else{AI.addMenuItem(AG.name,AG.cls||"",AG.onClick,AG.ctxt);}}function i(AJ,AK,AG,AH){var AI=AG.onClick;AG.onClick=function(){AJ.openFormatEditor(AH,AG.formatConfig);if(AG.showFormatPanelName){AJ.openFormatPanelByName(AG.showFormatPanelName);}AI&&AI();};AK.addMenuItem(AG.name,AG.cls||"",AG.onClick,AG.ctxt);}function B(AG){return j.filter(AG,function(AH){var AI;switch(AH.type){case AD.NORMAL:AI=R.customConfig.validNormalSchema(AH);break;case AD.TOGGLE:AI=R.customConfig.validToggleSchema(AH);break;case AD.SEPARATOR:AI=true;break;case AD.SUBMENU:AI=R.customConfig.validSubMenuSchema(AH);break;case AD.SINGLE_SELECT_LIST:AI=R.customConfig.validSingleSelectListSchema(AH);break;case AD.MULTI_SELECT_LIST:AI=R.customConfig.validMultiSelectListSchema(AH);break;case AD.FORMAT:AI=R.customConfig.validFormatSchema(AH);break;default:AI=true;}return AI&&(AH.isShown!==false);});}function I(AH,AI,AG){var AJ=new mstrmojo.ui.menus.MenuConfig();if(!R.customConfig.validCommonSchema(AI)){return ;}AI=B(AI);j.forEach(AI,function(AK){switch(AK.type){case AD.NORMAL:U(AH,AJ,AK);break;case AD.TOGGLE:s(AH,AJ,AK);break;case AD.SEPARATOR:AJ.addSeparator();break;case AD.SUBMENU:if(AK.subMenuConfig){AK.getSubMenuConfig=function(){return I(AH,AK.subMenuConfig);};}AJ.addPopupMenuItem(AK.name,AH.id,AK.getSubMenuConfig,AK.cls||"",AK.ctxt);break;case AD.SINGLE_SELECT_LIST:y(AH,AJ,AK);break;case AD.MULTI_SELECT_LIST:J(AH,AJ,AK);break;case AD.FORMAT:i(AH,AJ,AK,AG);break;default:AJ.addNonInteractiveMenuItem(AK.name,"",true);}});return AJ;}function l(AI,AK,AH){var AG=[],AJ;if(!R.formatControlConfig.validCommonSchema(AK)){return ;}AK=B(AK);j.forEach(AK,function(AM,AL){AM.provideDefaultWidth=true;switch(AM.type){case AF.FILLGROUP:if(R.formatControlConfig.validFillGroupSchema(AM)){AJ=o.getFillGroupControl(AI,AM);}break;case AF.LINEGROUP:if(R.formatControlConfig.validLineGroupSchema(AM)){AJ=o.getLineGroupControl(AI,AM);}break;case AF.CHARACTERGROUP:if(R.formatControlConfig.validCharacterGroupSchema(AM)){N.copy({cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"397px",height:"22px"},AM);AJ=o.getCharacterGroupControl(AI,AM);}break;case AF.COLORBYGROUP:if(R.formatControlConfig.validColorByGroupSchema(AM)){AJ=o.getColorByFillGroupControl(AI,AM);}break;}if(AJ){if(AL>0&&AH){AJ.cssClass=(AJ.cssClass?AJ.cssClass+" ":"")+"mstrmojo-ui-rowContainer";}AG.push(AJ);}});return AG;}function G(AX,AY){var AZ=this,AM=AY.updateActions,AQ={act:"updateTemplate",keyContext:AZ.k,actions:[]},AU=AQ.actions,AP=[a.pick(AX,["did","t"])],AJ=AY.drillFromUnit.id,AN=AY.drillFromUnit.n,AR=AZ.zonesModel,AL=AR.getCustomDropZones(),AT,AG,AV,AK,AI,AS,AH;if(AM&&AM instanceof Array){for(AH=0;AH<AM.length;++AH){var AW=AM[AH];AT=parseInt(AW.dropZoneIndex);if(!isNaN(AT)&&AT>=0){AV=AR.getZoneModelByZoneId(AT+K);if(AV){var AO=AL[AT].maxCapacity||Infinity;AG={id:AT+K};AK=AV.items||[];AS=a.findInArray(AK,function(Aa){return Aa.did===AJ;});if(!AW.keepParent){if(AS!==-1){AI=AK[AS];Array.prototype.push.apply(AU,AR.getRemoveDropZoneUnitActions(AG,AI));Array.prototype.push.apply(AU,AR.getAddDropZoneUnitsActions(AG,AP,AI.idx));}else{S('The attribute "'+AN+'" to replace does not exist in drop zone ['+AT+"].");}}else{if(AK.length<AO){AI=AK[AS];Array.prototype.push.apply(AU,AR.getAddDropZoneUnitsActions(AG,AP,AI?AS+1:0));}else{S("Can not append attribute to drop zone ["+AT+"].");}}}}else{S('The parameter "dropZoneIndex" is invalid in the item ['+AH+'] of the parameter "updateDropZoneActions".');}}}else{S('Parameter "updateDropZoneActions" does not exist or is invalid.');}return AQ;}function AC(AH,AG,AJ){var AI={};AI[AH]=[{id:AG,n:AJ}];return AI;}mstrmojo.customviz._HasCustomContextMenu=mstrmojo.provide("mstrmojo.customviz._HasCustomContextMenu",{_mixinName:"mstrmojo.customviz._HasCustomContextMenu",selectionSupportsVizFilter:function P(AK){if(this.isBinaryData){const AJ=this.model;if(!AJ){return false;}const AN=AK&&AK[0];if(!AN||!AN.length){return false;}const AM=this.getData().gsi.rows;for(var AH=0;AH<AN.length;AH++){const AG=AM.find(function(AO){return AO.did===AN[AH].tid;});if(!AJ.isObjectFilterable(AG)){return false;}}return true;}var AL=this.model,AI=true;if(!AL){return false;}j.forEach(AK,function(AO){j.forEach(AO,function(AP){if(!AL.supportsViewFilterActions(AP.tid)){AI=false;return false;}});});return AI;},updateAfterKeepOnly:function q(AG){if(AG&&this.isBinaryDataUseJointElementFilter&&this.isBinaryDataUseJointElementFilter()){const AH=this.getBinaryDataSelectedIndices();if(!AH||AH.length===0){return ;}this.passThroughExpression=this.binaryDataInterface.buildJointElementExpression(AH);this._super(AG);this.passThroughExpression=null;return ;}this._super(AG);},getHost:function g(){return this;},canDrill:function Q(AG){var AH={show:false,enable:false};if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(b.WEB_DRILL_AND_LINK)){AH.show=true;if(a.getDrillCandidates(this,AG.tid).length>0){AH.enable=true;}else{S('The drill action can not be performed, may be the given parameter "drillFrom" is not right or there is no attribute left to drill');}}else{S("The drill action not supported, may be you do not have the privilege or you are editing a viz filter.");}return AH;},canDoGroupCalculation:function D(){var AG={show:false,enable:false};if(!mstrApp.isAppStatePresentation()&&!mstrApp.isInVFConfigMode){AG.show=true;AG.enable=true;}else{S("The group/calculation action not supported, may be you are in the presentation mode or editing a viz filter.");}return AG;},canShowData:function Z(){var AG={show:false,enable:false};if(!mstrApp.isDossier&&!this.excludeData&&(AB.safeCall("parent.isShowDataEnabled",this)()!==false)){AG.show=true;AG.enable=true;}else{S("The show data action not supported, may be you are in the pause mode or not editing a dashboard.");}return AG;},getSelectionGroupMenuConfig:function O(AO,AS){var AP={},AN=AO.hasOwnProperty("group"),AQ=AO.hasOwnProperty("calculation"),AK,AI,AM,AH=AS[0].isAttributeSelector(),AG=true;j.forEach(AS,function(AU){if((AH&&!AU.isAttributeSelector())||(!AH&&AU.isAttributeSelector())){AG=false;S("The group/calculation action cannot be performed, because the context menu selection has both headers and data points.");return false;}AI=AU.getGroupHeaders();if(AI.length===0){AG=false;S('The group/calculation action cannot be performed, please check the format of parameter "headers" you passed to "setGroupOptions()" of graphic model.');return false;}for(AK=0;AK<AI.length;++AK){AM=AI[AK];if(AM.headerObj&&!e(AM.headerObj,"getElementId")){AG=false;S('The group/calculation action cannot be performed, please check the format of parameter "headers" you passed to "setGroupOptions()" of graphic model.');return false;}}});if(!AG){return AP;}var AJ=function(AU){return AU.getName();},AL,AT=function(AX,AW){var AU=[],Ab,Aa,AY,AZ,AV={};j.forEach(AX,function(Ac){AZ=Ac.getGroupHeaders();j.forEach(AZ,function(Ad){Ab=Ad.headerObj.getElementId();AY=d.getAttributeId(Ab);if(!Aa){Aa=AY;}if(!AV.hasOwnProperty(Ab)){AV[Ab]=true;if(!AW||AY===Aa){AU.push(Ad.headerObj);}}});});return AU;};if(AH){var AR=AS[0].getGroupHeaders()[0];AL=this.getCellForNode(AR.headerObj);AP=a.getGroupAndCalculationContextMenu(this,AL,{skipSingleAttrCheck:true,selection:AT(AS,true),fnCellName:AJ,hideGroupMenu:AN,hideCalculationMenu:AQ});}else{AP=a.getGroupAndCalculationContextMenuForDataPoints(this,{selection:AS,fnCellName:AJ,fnUnique:AT,fnMakeNode:function(AU){return AU;},hideGroupMenu:AN,hideCalculationMenu:AQ});}if(Object.getOwnPropertyNames(AP).length===0){S("The group/calculation action can not be performed, please check the given headers.");}return AP;},getCustomDrillMenu:function(AG,AM,AI){var AL=AG,AK=AL.tid,AJ=AL.n,AH={id:AK,n:AJ};return a.getDrillMenu.bind(a,this,AK,AM,{drillFromUnit:AH,updateActions:AI});},getMenuHandler:function c(AK){var AM=this,AJ;switch(AK){case x.KEEP_ONLY:AJ=function AI(){AM.updateAfterKeepOnly(true);};break;case x.EXCLUDE:AJ=function AN(){AM.updateAfterKeepOnly(false);};break;case x.DRILL:AJ=function AL(AO){a.doDrill(AM,AO.ctxt.drillUnit,G,AO.ctxt);};break;case x.SHOW_DATA:AJ=function AG(){AM.showData();};break;case x.GO_TO_TARGETS:AJ=function(){AM.genGotoTargetMenuConfig().handler();};break;case x.SHOW_LEGEND:AJ=function AH(){AM.saveObjectProperty(L.LEGEND_PROPERTY_SET,A.SHOW_LEGEND,true,undefined,true);};break;default:AJ=mstrmojo.emptyFn;break;}return AJ;},getCustomMenuConfig:function w(AG,AH){AG=j.ensureArray(AG);return I(this,AG,AH);},getCommonMenuConfig:function H(AU){var AY=this.getContextMenuSelExtraInfo(),AR={},AX,AZ,AO={showLegend:this.getShowLegendMenuConfig(AU)},AG={changeViz:this.getChangeVizMenuConfig(AU)},AL={copyPasteFormat:this.getCopyPasteFormatMenuConfig(AU)},AN;if(AY.length>0){var AK=new mstrmojo.ui.menus.MenuConfig(),AT=new mstrmojo.ui.menus.MenuConfig(),Aa=this.selectionSupportsVizFilter(this.getContextMenuSelections()),AI,AW,AQ,AP,Ac,AV,AH=AY[0]&&AY[0].getDrillHeader&&AY[0].getDrillHeader(),Ab=AY[0]&&AY[0].getUpdateDropZoneActions&&AY[0].getUpdateDropZoneActions();AR={filter:AK,showData:AT};this.modelData=this.model.data;AQ=j.find(AU,"type",x.GO_TO_TARGETS);if(AQ!==-1){AW=AU[AQ];AV=this.genGotoTargetMenuConfig();if(Aa&&AV.menuText){AI=this.getMenuHandler(AW.type);AK.addMenuItem(AV.menuText,"",AI);AK.addSeparator();}}AQ=j.find(AU,"type",x.KEEP_ONLY);if(AQ!==-1){AW=AU[AQ];if(Aa){AI=this.getMenuHandler(AW.type);AK.addMenuItem(mstrmojo.desc(11701,"Keep only"),AW.cls||"",AI,AW.ctxt);}}AQ=j.find(AU,"type",x.EXCLUDE);if(AQ!==-1){AW=AU[AQ];if(Aa){AI=this.getMenuHandler(AW.type);AK.addMenuItem(mstrmojo.desc(3946,"Exclude"),AW.cls||"",AI,AW.ctxt);}}AQ=j.find(AU,"type",x.DRILL);if(AQ!==-1){AW=AU[AQ];if(Aa){Ac=this.canDrill(AH);if(Ac.show&&Ac.enable){var AM;AM=this.getCustomDrillMenu(AH,this.getMenuHandler(AW.type),Ab);AK.addPopupMenuItem(mstrmojo.desc(145,"Drill"),AW.cls||"",AM,AW.ctxt);}else{if(Ac.show&&!Ac.enable){AK.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),AW.cls||"",true);}}}}AQ=j.find(AU,"type",x.SHOW_DATA);if(AQ!==-1){AW=AU[AQ];if(Aa){Ac=this.canShowData();if(Ac.show&&Ac.enable){AI=this.getMenuHandler(AW.type);AT.addMenuItem(mstrmojo.desc(13537,"Show Data..."),AW.cls||"",AI,AW.ctxt);}else{if(Ac.show&&!Ac.enable){AK.addNonInteractiveMenuItem(mstrmojo.desc(13537,"Show Data..."),AW.cls||"",true);}}}}AQ=j.find(AU,"type",x.GROUP);AP=j.find(AU,"type",x.CALCULATION);if(AQ!==-1||AP!==-1){Ac=this.canDoGroupCalculation();if(Ac.show&&Ac.enable){var AS={};AX=this.getSelectionGroupMenuConfig(AS,AY);}else{if(Ac.show&&!Ac.enable){AX={};}}}}AN=a.mergeHashes(AR,AX,AZ,AO,AG,AL);var AJ=[{name:"filter"},{name:"editGroup"},{name:"editCalculation"},{name:"createDe"},{name:"showData"},{name:"renameDe"},{name:"showLegend"},{name:"changeViz"},{name:"copyPasteFormat"}];return a.mergeMenuConfigs(AN,AJ);},getShowLegendMenuConfig:function(AK){var AI=new mstrmojo.ui.menus.MenuConfig(),AH,AL,AG,AJ;if(this.enableLegend){AH=j.find(AK,"type",x.SHOW_LEGEND);AL=this.getLegendProperty(A.SHOW_LEGEND);if(AH!==-1&&!AL){AG=AK[AH];AJ=this.getMenuHandler(AG.type);AI.addMenuItem(mstrmojo.desc(12001,"Show Legend"),AG.cls||"",AJ,AG.ctxt);}}return AI;},getChangeVizMenuConfig:function(AI){var AH=new mstrmojo.ui.menus.MenuConfig(),AG=j.find(AI,"type",x.CHANGE_VISUALIZATION);if(AG>-1&&AI[AG].isShown!==false){a.addChangeVizContextMenu(AH,this);}return AH;},getCopyPasteFormatMenuConfig:function(AH){var AI=new mstrmojo.ui.menus.MenuConfig(),AG=j.find(AH,"type",x.COPY_PASTE_FORMAT);if(AG>-1&&AH[AG].isShown!==false){this.parent.addCopyPasteSelfFormatMenuItems(AI);}return AI;},getMobileMenuConfig:function X(AI,AK){var AH,AJ,AG={},AL=AK&&AK.getDrillHeader(),AM=AK&&AK.getUpdateDropZoneActions();for(AH in x){AJ=x[AH];if(j.find(AI,"type",AJ)!==-1){if(AJ===x.DRILL){AG[x.DRILL]={drillFrom:AL,updateDropZoneActions:AM};}else{AG[AJ]=true;}}}return AG;},getMousePositionFromEvent:function m(AG){if(AG.touches&&AG.touches.length>0){AG=AG.touches[0];}return M.getMousePosition(AG,window);},showContextMenu:function f(AH,AM,AT){if(this.isBinaryData){const AG=this.isBinaryDataUseJointElementFilter&&this.isBinaryDataUseJointElementFilter();const AS=this.hasBinaryDataSelection();const AR=AG&&AS;const AJ=this._viSelections;if(AR){this._viSelections={};const AL=this.getBinaryDataSelectionAttributes();const AP=this.binaryDataInterface.generateCandidate(AL,0);this.addMetricValueSelection(AP);}this._customVizContextMenuSelExtraInfo=this._viSelections;this._viContextMenuSelections=this._viSelections;if(AR){this._viSelections=AJ;}}var AI=this;if(mstrApp.isExpress||mstrApp.isInVFInteractMode||AB.safeCall("parent.isContextMenuDisabled",this)()){M.stopPropogation(window,AH);M.preventDefault(window,AH);return false;}if(AH.e){AH=AH.e;}var AV=this.getCommonMenuConfig(AM),AU=this.getCustomMenuConfig(AT,AH),AO={common:AV,custom:AU},AQ=[{name:"common"},{name:"custom"}],AN=a.mergeMenuConfigs(AO,AQ),AK;if(!AN.hasMenuItems()){AK=false;}else{AN.hostId=this.id;AN.isHostedWithin=false;AN.position=this.getMousePositionFromEvent(AH);AN.menuCssClass+=" mstrmojo-customvis-contextmenu";if(e(this.contextMenu,"destroy")){this.contextMenu.destroy();}AK=true;if(!mstrApp.isDisplayOnMobile){this.contextMenu=AN.newInstance();if(this.contextMenu){this.contextMenu.onCloseMenuCallBack=function(){AI.applySelection([],{forContextMenu:true});AI.updateHighlight();j.removeItem(AI.disposables,this);};}this.openPopup(this.contextMenu);}AH.stopPropagation();AH.preventDefault();}return AK;},addSelectionBySelectors:function z(AQ,AJ,AR){var AP=this,AM,AL,AH=AQ[0]&&AQ[0].isSelectAttr,AO,AG=0,AN=0,AK=0,AI={x:0,y:0};for(AM=0;AM<AQ.length;++AM){AL=AQ[AM];if(AH){AL=AC(AL.tid,AL.eid,AL.n);}AO=AP.addSelectionBySingleSelector(AL,AH,false,AJ,AR);if(AR){AG+=AO.xTotal;AN+=AO.yTotal;AK+=AO.count;}}if(AK===0&&AQ.length!==0){if(!this.isBinaryData){S('We did not get any graphic model by the selector given what may lead to the functionality of restore context menu not work, please check the function "getGraphicModelBySelector()" you have implemented.');}}else{if(AR){AI.x=AG/AK;AI.y=AN/AK;}}return AI;},updateContextMenu:function AE(AJ,AK){var AH=this,AI,AG={x:0,y:0};AI=AH.isHighlightedAsTarget;AH.isHighlightedAsTarget=false;AG=this.addSelectionBySelectors(AJ,true,true);this.addSelectionBySelectors(AK,false);AH.isHighlightedAsTarget=AI;if(this.plotted){this.updateHighlight();}var AL={messageType:"updatePosition",pos:AG};return a.sendToMobileDevice(AL);},getContextMenuConfig:mstrmojo.emptyFn,openFormatEditor:function h(AJ,AH){var AI=this.getHost(),AL=this.formatPopupPlaceholder;var AG=l(AI,AH,true);var AK=new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolbarBorderAndFill",children:AG}]});if(!AL){AL=document.createElement("div");AL.setAttribute("class","gm-menu-placeholder");this.formatPopupPlaceholder=AL;}M.emptyNode(AL);document.body.appendChild(AL);AK.hostId=AI.id;AK.hostElement=AL;if(AJ.e){AJ=AJ.e;}AK.position=this.getMousePositionFromEvent(AJ);AK.isHostedWithin=false;if(n.isLibrary()){AK.hostProxyCssClass="mojo-theme-light";AK.cssClass="mstrmojo-FormatPopupEditor";}if(!AK.cssClass){AK.cssClass="";}this.openPopup(AK.newInstance({onClose:function(){C.toggleClass(document.body,"hasToolbarPopup",false);}}));C.toggleClass(document.body,"hasToolbarPopup",true);},init:function AA(AG){if(this._super){this._super(AG);}Y&&Y.loadSchemaValidator();}});R=mstrmojo.customviz._HasCustomContextMenu.ValidationHelper={customConfig:{validCommonSchema:function(AG){return Y.validateJSONConfig("CustomMenuCommon",AG);},validNormalSchema:function(AG){var AH=Y.validateJSONConfig("CustomMenuNormal",AG);if(!AG.isDisabled&&(!AG.onClick||typeof AG.onClick!=="function")){AH=false;S("onClick function is required for "+AG.type+" context menu");}return AH;},validToggleSchema:function(AG){var AH=Y.validateJSONConfig("CustomMenuToggle",AG);if(!AG.propertyName&&typeof AG.onClick!=="function"){AH=false;S("onClick function is required for "+AG.type+" context menu when not bingding with property");}return AH;},validSingleSelectListSchema:function(AG){var AH=Y.validateJSONConfig("CustomMenuSingleSelectList",AG);if(!AG.propertyName&&typeof AG.onClick!=="function"){AH=false;S("onClick function is required for "+AG.type+" context menu when not bingding with property");}return AH;},validMultiSelectListSchema:function(AG){return Y.validateJSONConfig("CustomMenuMultiSelectList",AG);},validSubMenuSchema:function(AG){var AH=Y.validateJSONConfig("CustomMenuSubMenu",AG);if(AG.getSubMenuConfig&&typeof AG.getSubMenuConfig!=="function"){AH=false;S("getSubMenuConfig must be a function for "+AG.type+" context menu");}return AH;},validFormatSchema:function(AG){AG.name=AG.name||mstrmojo.desc(1918,"Format");AG.isShown=AG.isShown||!n.isLibrary()&&!n.isVIPresentationMode();return Y.validateJSONConfig("CustomMenuFormat",AG);}},formatControlConfig:{validCommonSchema:function(AG){return Y.validateJSONConfig("FormatControlCommon",AG);},validFillGroupSchema:function(AG){return Y.validateJSONConfig("FormatControlFillGroup",AG);},validLineGroupSchema:function(AG){return Y.validateJSONConfig("FormatControlLineGroup",AG);},validCharacterGroupSchema:function(AG){return Y.validateJSONConfig("FormatControlCharacterGroup",AG);},validColorByGroupSchema:function(AG){return Y.validateJSONConfig("FormatControlColorByGroup",AG);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.models.ParametersInterface","mstrmojo.XMLBuilder","mstrmojo.gm.GMEnums","mstrmojo.gm.GMAxisScale","mstrmojo.VisUtility","mstrmojo.gm.GMProperty");var X=mstrmojo,L=X.hash,I=X.array,W=X.vi.viz,R=W.EnumDSSDropZones,J=mstrmojo.models.ParametersInterface,O=1,H=0,M=W.DropZoneHelper.METRIC_NAMES_ID,K,Z=mstrmojo.gm.DualAxisSubAxisBit,Y=mstrmojo.gm.EnumFeatureFlags,B=mstrmojo.gm.GMProperty,D=mstrmojo.vi.viz.EnumVisualizationTemplates,C=mstrmojo.gm.GMAxisScale,G=Z.PRIMARY,A=mstrmojo.vi.viz.EnumVizStyles,S=mstrmojo.VisUtility;function Q(a){if(this.AxisScaleSyncMode){a.AxisScaleSyncMode=this.AxisScaleSyncMode;a.MinMax="Custom";a.AxisScale=C.serializeCollection2String([],true);}switch(this.visType){case D.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:a.userVisType=D.GRAPHMATRIXVERTICALBARCLUSTERED;break;case D.VERTICALSYNCHRONIZEDAXISBAR:case D.HORIZONTALSYNCHRONIZEDAXISBAR:break;default:a.userVisType=this.visType;break;}}mstrmojo.vi.viz.GraphMatrixHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.GraphMatrixHelper",handled:false,rowObjects:null,columnObjects:null,xAxisObjects:null,yAxisObjects:null,angleObjects:null,sliceObjects:null,breakByObjects:null,colorByObjects:null,currentXML:"",sizeByObjects:null,tooltipMetrics:null,data:null,metricsDropZone:"",secondaryMetricsDropZone:"",shape:"",subtype:"",metricShapes:null,visType:-1,init:function P(a){this.rowObjects=[];this.columnObjects=[];this.xAxisObjects=[];this.yAxisObjects=[];this.angleObjects=[];this.sliceObjects=[];this.breakByObjects=[];this.colorByObjects=[];this.sizeByObjects=[];this.tooltipMetrics=[];this.currentXML="";this.metricsDropZone="";this.secondaryMetricsDropZone="";this.shape="";this.subtype="";this.metricShapes="{}";this._super(a);},clone:function U(b){var a=this;a.rowObjects=b.rowObjects.concat();a.columnObjects=b.columnObjects.concat();a.xAxisObjects=b.xAxisObjects.concat();a.yAxisObjects=b.yAxisObjects.concat();a.angleObjects=b.angleObjects.concat();a.sliceObjects=b.sliceObjects.concat();a.breakByObjects=b.breakByObjects.concat();a.colorByObjects=b.colorByObjects.concat();a.sizeByObjects=b.sizeByObjects.concat();a.tooltipMetrics=b.tooltipMetrics.concat();a.currentXML=b.currentXML;a.metricsDropZone=b.metricsDropZone;a.secondaryMetricsDropZone=b.secondaryMetricsDropZone;a.shape=b.shape;a.subtype=b.subtype;a.metricShapes=b.metricShapes;},exists:function(c,a){var d=this[a],b=false;I.forEach(d,function(e){b=(e.did===c.did);if(b){return false;}});return b;},removeAngleMetricFromOthers:function(a){["xAxisObjects","yAxisObjects","tooltipMetrics"].every(function(d){var c=this[d],b=I.find(c,"did",a.did);if(b>-1){c.splice(b,1);return false;}});},getXml:function N(e){var a=this.data.dz,d=B.convertToReferenceFormat,f,b=a?L.copy(a.visProp&&a.visProp.fmt,{}):{},c=new mstrmojo.XMLBuilder();if(e&&L.walk("property.scriptClass",e)==="mstrmojo.gm.GMProperty"){f=e.property;}if(this.data.visName===A.MAPBOX){delete b.cr;}if(this.visStyle){b.visStyle=this.visStyle;}if(this.shape){b.Shape=this.shape;}if(this.subtype){b.Subtype=this.subtype;}if(this.metricShapes){b.metricShapes=this.metricShapes;}if(this.groupInfo){b.groupInfo=this.groupInfo;}b.visType=this.visType;Q.call(this,b);S.addDefaultProps(b);S.addVisFeatureFlags(Y,b);c.addChild("props");c.addChild("widgetProps");c.addChild("fmt");L.forEach(b,function(g,h){c.addChild(h);c.addAttribute("value",f?d.call(f,h,g):g);c.closeElement();});c.closeElement();c.closeElement();c.closeElement();return c.toString();},setData:function E(d){if(!d){return ;}var b=this,c=function(f,g){if(f){var e=(f.TemplateUnit||[]).concat(f.TemplateMetric||[]);if(e){e.forEach(function(h){var i=L.copy(h);if(!i.did){i.did=i.id;}g.push(i);});}}};c(d[K.PROP_ROWS],this.rowObjects);c(d[K.PROP_COLUMNS],this.columnObjects);c(d[K.PROP_XAXIS],this.xAxisObjects);c(d[K.PROP_YAXIS],this.yAxisObjects);c(d[K.PROP_BREAKBY],this.breakByObjects);c(d[K.PROP_COLORBY],this.colorByObjects);c(d[K.PROP_SIZEBY],this.sizeByObjects);c(d[K.PROP_SLICE],this.sliceObjects);c(d[K.PROP_ANGLE],this.angleObjects);c(d[K.PROP_TOOLTIPMETRICS],this.tooltipMetrics);var a=d.visProp.fmt;this.shape=a[K.PROP_SHAPE];this.subtype=a[K.PROP_SUBTYPE];},setMetricsDropZone:function F(a){if(!a){return ;}var b=this;[K.PROP_ROWS,K.PROP_COLUMNS,K.PROP_XAXIS,K.PROP_YAXIS,K.PROP_BREAKBY,K.PROP_SLICE,K.PROP_COLORBY].forEach(function(c){if(a[c]&&a[c].hasOwnProperty("MetricNames")){if(b.metricsDropZone){b.secondaryMetricsDropZone=c;}else{b.metricsDropZone=c;}}});},getAddDropZonesAction:function(){var f=this,c=this.metricsDropZone,a=this.secondaryMetricsDropZone,d={act:"updateTemplate",keyContext:this.data.k,actions:[]},e=function(g){d.actions.push({act:"addDropZoneUnit",zoneId:R[g],unitId:M,unitType:H});};const b=this.visStyle===A.NEW_GRAPH_MATRIX;[{p:"rowObjects",v:"Rows"},{p:"columnObjects",v:"Columns"},{p:"xAxisObjects",v:"XAxis"},{p:"yAxisObjects",v:"YAxis"},{p:"breakByObjects",v:"BreakBy"},{p:"colorByObjects",v:"ColorBy"},{p:"sizeByObjects",v:"SizeBy"},{p:"angleObjects",v:"Angle"},{p:"sliceObjects",v:"SliceBy"},{p:"tooltipMetrics",v:"AdditionalMetrics"}].forEach(function(i){var g=f[i.p],j=R[i.v];g.forEach(function(k){if(k){d.actions.push({act:"addDropZoneUnit",zoneId:j,unitId:k.did,unitType:k.t,ax:k.ax||G});}});if(c===i.v){var h=function(k){if(b){k=k.filter(function(l){return !J.isObjectParameterItem(l);});}return(k&&(k.length>O)&&f.isMetricZone(k));};if(h(f.xAxisObjects)||h(f.yAxisObjects)||h(f.angleObjects)){e(c);}}});if(a==="ColorBy"){e(a);}return d;}});K=mstrmojo.vi.viz.GraphMatrixHelper;K.PROP_ROWS="Rows";K.PROP_COLUMNS="Columns";K.PROP_HORIZONTAL_AXIS="HorizontalAxis";K.PROP_VERTICAL_AXIS="VerticalAxis";K.PROP_XAXIS="XAxis";K.PROP_YAXIS="YAxis";K.PROP_SLICE="SliceBy";K.PROP_ANGLE="AngleBy";K.PROP_BREAKBY="BreakBy";K.PROP_COLORBY="ColorBy";K.PROP_SIZEBY="SizeBy";K.PROP_TOOLTIPMETRICS="AdditionalMetrics";K.PROP_SHAPE="Shape";K.PROP_SUBTYPE="Subtype";K.PROP_METRICSHAPES="metricShapes";K.PROP_SHAPE_AREA="Area";K.PROP_SHAPE_LINE="Line";K.PROP_SHAPE_BAR="Bar";K.PROP_SHAPE_CIRCLE="Circle";K.PROP_SHAPE_SQUARE="Square";K.PROP_SHAPE_PIE="Pie";K.PROP_SHAPE_RING="Ring";K.PROP_SHAPE_TICK="Tick";K.PROP_SUBTYPE_CLUSTERED="Clustered";K.PROP_SUBTYPE_AUTOMATIC="Automatic";K.PROP_SUBTYPE_STACKED="Stacked";K.PROP_SUBTYPE_ABSOLUTE="Absolute";K.PROP_SUBTYPE_PERCENT="Percent";}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.desc","mstrmojo.hash","mstrmojo.models.TransactionsInterface","mstrmojo.ui.Pulldown","mstrmojo.ui.MultiSelectSearchablePulldown","mstrmojo.Box","mstrmojo.Button","mstrmojo.Container","mstrmojo.Label","mstrmojo.VisUtility","mstrmojo.XMLParser");var G=mstrmojo.hash,H=mstrmojo.array,A=mstrmojo.VisUtility,E=mstrmojo.models.TransactionsInterface,C=new mstrmojo.XMLParser();LabelWidth=0,STYLE={fontSize:"12px",fontFamily:"Arial"};mstrmojo.vi.ui.DDICCandidatePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.vi.ui.DDICCandidatePicker",markupString:'<div class="candidate-picker-curtain"><div class="ddic-candidate-picker"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},selector:null,targetDDICs:[],selectedIndices:[],init:function F(I){this._super(I);this.initCandidateList();},getCandidateData:function B(){var K=G.walk("viUnit.boxContent.model.data",this),J=G.walk("viUnit.model.datasets",this),M=K&&K.gsi,L=[];if(!M){return L;}var I=Array.isArray(M)?M[0]:M,N=(I.rows||[]).concat(I.cols||[]).concat(I.mx||[]);H.forEach(N,function(O){if(!O.tmaps){return ;}H.forEach(O.tmaps,function(Q){var P=Q&&Q.ck,U=O.did;if(P){var W=Q[P],X=W.txnfmt,R=X.indexOf("<cp>")>-1?C.xml2Object(X).pr[0]:JSON.parse(X);if(R.t===E.ENUM_INPUT_CONTROL_TYPES.DROPDOWN&&R.ipt===E.ENUM_INPUT_VALUE_TYPES.DATASET){var S=G.clone(O);S.ck=Q.ck;G.keyarray(J).forEach(function(Y){var Z=J[Y];H.forEach(Z.att,function(a){if(a.did===U){H.forEach(a.fs,function(b){if(b.fid===Q.fid){S.n=O.n+"@"+b.fnm;}});}});});L.push(S);}}});});return L;},initCandidateList:function D(){var N=this.getCandidateData(),L=this,M=[],J={},O=[],I=L.selector instanceof mstrmojo.vi.ui.rw.VizBox,K=I?mstrmojo.desc(28785,"Allow the visualization to filter the dropdown list of the following grid column"):mstrmojo.desc(27189,"Allow the selector to filter the dropdown list of the following grid column");if(N.length===0||!this.selector.getTargetKeys){return ;}H.forEach(N,function(P){M.push({n:P.n,v:P.ck,t:P.t});});if(M.length){O=this.selector.getTargetKeys();H.forEach(M,function(Q,P){if(O&&O.indexOf(Q.v)>-1){J[P]=true;if(L.selector.targetDDICs.indexOf(Q.v)===-1){L.selector.targetDDICs.push(Q.v);}}else{if(L.selector.targetDDICs.indexOf(Q.v)>-1){H.removeItem(L.selector.targetDDICs,Q.v);}}});this.targetDDICs=G.clone(L.selector.targetDDICs);}this.selectedIndices=J;this.addChildren({scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:click></div>',alias:"pickerInnerBox",slot:"containerNode",onclick:function(P){P.cancel();},children:[{scriptClass:"mstrmojo.Label",text:K},{scriptClass:"mstrmojo.ui.MultiSelectSearchablePulldown",cssClass:"candiPickerPulldown",isHostedWithin:false,multiSelect:true,allowEmptyText:true,alias:"ddicCheckList",selectedIndices:J,items:M,onchange:function(){var Q=Object.keys(this.selectedIndices);L.selectedIndices=this.selectedIndices;H.forEach(M,function(U,S){if(Q.indexOf(S.toString())>-1){if(L.selector.targetDDICs.indexOf(U.v)===-1){L.selector.targetDDICs.push(U.v);L.parent.parent.parent.selectVIUnit(U,false);}}else{if(L.selector.targetDDICs.indexOf(U.v)>-1){H.removeItem(L.selector.targetDDICs,U.v);L.parent.parent.parent.selectVIUnit(U,false);}}});L.targetDDICs=G.clone(L.selector.targetDDICs);var R=mstrmojo.func.safeCall("viUnit.parent.getTgtSelections",L)();var P=R&&R.notify;if(P instanceof Function){P();}},setDefaultListAndIndex:function(Q){var P=this.getPopupList();P.set("items",Q);this.set("selectedIndices",P.selectedIndices.keys);}}]});},});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Box","mstrmojo.Editor","mstrmojo.StackContainer","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.LinkGroup","mstrmojo.TextBox","mstrmojo.array","mstrmojo.hash","mstrmojo.XMLBuilder","mstrmojo.ui.Checkbox","mstrmojo.ui.editors.controls.PromptAndAnswerList","mstrmojo.vi.enums.EnumPromptType","mstrmojo.EnumRWUnitType","mstrmojo.DocSelector","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.util.PlatformHelper","mstrmojo.vi.enums.EnumDSSAccessRightFlags","mstrmojo.vi.enums.EnumFeatures");var d=mstrmojo.array,Q=mstrmojo.hash,H=mstrmojo.DocSelector,D=mstrmojo.EnumRWUnitType,P=mstrmojo.vi.models.VIComponentMap.TYPES,C=H.STYLES,n=mstrmojo.ui.editors.controls.PromptAndAnswerList,O=mstrmojo.vi.enums.EnumPromptType,p=mstrmojo.func,j=mstrmojo.ui.editors.controls.LinkGroup.getFileBrowser,k=mstrmojo.ui.editors.controls.LinkGroup.getCtrlBtns,X=mstrmojo.ui.editors.controls.LinkGroup.getPageSelector,g=mstrmojo.ui.editors.controls.LinkGroup.getFilterMultiTargetsSelector,Y=mstrmojo.ui.editors.controls.LinkGroup.getLinkSourceObjectSelector,t=mstrmojo.ui.editors.controls.LinkGroup.genDLXML,s=mstrmojo.ui.editors.controls.LinkGroup.getInfoOfDossier,q=mstrmojo.util.PlatformHelper,w=mstrmojo.vi.enums.EnumFeatures,e=mstrmojo.vi.enums.EnumDSSAccessRightFlags;var R={THIS_DOSSIER:0,ANOTHER_DOSSIER:1};var U=2;var l=[{n:mstrmojo.desc(16999,"Select a page in the dashboard"),idx:0}];var K=null;var N=[];var G=null;var B=function(x){return mstrmojo.desc(16991,"Go to Dashboard: #").replace("#",x||"...");};var L=function(x){return x.dtxt?x.dtxt:B(x.tnm);};var E=function(y,x){var z=d.filterOne(x,function(AA){return AA.navPage===y;})||{};return z.idx;};var i=function(z,y){var AA={},x=Q.clone(y)||[];d.forEach(z,function(AB){AA[AB.id]=AB;});return x.map(function(AB){return Q.copy(AA[AB.id],AB);});};var m=function(AA,y){var z=function(AC){return(AC||[]).map(function(AD){return{id:AD.id,am:AD.am};});};var AB=Q.clone(AA);var x=Q.clone(y);AB.prms=z(AB.prms);x.prms=z(x.prms);return Q.equals(AB,x);};var b=function(z,x){var AA={},y;d.forEach(z,function(AB){var AC=AB.d;d.forEach(AC,function(AD){if(AD.id===x){var AE=AD.v;d.forEach(AD.elems,function(AG,AF){if(!AA[AG]){AA[AG]={ei:AG,emt:1,disp_n:AE[AF]};}});return false;}});});AA=Q.valarray(AA);if(AA.length>0){y={es:AA};}return y;};function M(x){return x&&(x.sections||x.subsections||x.objects||x.panels);}function W(z,x,AA){var y=z&&AA&&z[AA.k],AB;if(y&&y.t===D.SELECTOR&&y.srcid===x){return{data:AA,defn:y};}d.forEach(M(AA),function(AC){AB=W(z,x,AC);if(AB){return false;}});return AB;}var I=function(x){var y=d.ensureArray(x.ces);if(y.length===1&&y[0].t===14){return{promptUser:false};}if(y.length>1000){return{promptUser:true};}y=y.map(function(z){return{ei:z.v,emt:z.t!==undefined?z.t:1,disp_n:z.n};});return{promptUser:false,answer:{es:y}};};var A=function(AE,AB){if(!AE){return{promptUser:true};}var x=AE.getCurrentLayoutKey(),z=Q.walk("data.layouts",AE),AF=Q.walk("defn.layouts",AE),AA=d.filterOne(z,function(AI){return AI.k===x;}),AD=d.filterOne(AF,function(AI){return AI.k===x;}),AH=AD&&AD.units,y=W(AH,AB,AA),AC=y&&y.data,AG=y&&y.defn;if(AC&&AG){if(!AG.include){return{promptUser:true};}if(AG.style!==C.ATTR_QUAL){return I(AC);}}return{promptUser:true};};var J=function(y,x){if(!y){return{promptUser:true};}var z=y.getVIComponent(P.FILTER_STACK),AB=z&&z.getFilterBySrcId(x),AC=AB&&AB.defn,AA;if(AC&&AC.style===C.ATTR_QUAL){AA=AB.buildPromptAnswerInfo();if(!Q.isEmpty(AA)){return{promptUser:false,answer:{exp:AA}};}}return{promptUser:true};};var Z=function(y,AA){var x={};d.forEach(y,function(AB){var AC=AB.d;d.forEach(AC,function(AD){x[AD.id]=true;});if(Object.keys(x).length>1){return false;}});var z=Object.keys(x);return z.length===1&&AA[z[0]];};var a=function(AH,AA,y){var AF=new mstrmojo.ResSetLink({mid:AH&&AH.mid,srct:AA.ttp||55,aopam:AA.aopam}),AB=AA.prms,AE=AA.psv===undefined?true:!!AA.psv,z=AE&&!!y,AC=false,x={},AD,AG;if(AB&&AB.length>0){AF.prms=[];AD=AF.prms;}d.forEach(AB,function(AJ){var AI={};Q.copyProps(["id","nm","am","pt","orid","ortp"],AJ,AI);switch(AJ.am){case AF.DYNAMIC:if(AJ.pt===O.ATTRIBUTE_LELMENT_LSIT&&AJ.orid){AG=b(y,AJ.orid);if(AG){AI.pa=AG;AC=true;x[AJ.orid]=true;}}break;case AF.USE_FILTER_PANEL_SELECTIONS:if(AJ.pt===O.ATTRIBUTE_LELMENT_LSIT&&AJ.orid){AI.am=AF.DYNAMIC;AG=A(AH,AJ.orid);if(AG.promptUser){AI.am=AF.DO_NOT_ANSWER;}else{if(AG.answer){AI.pa=AG.answer;}}}else{if(AJ.pt===O.EXPRESSION&&AJ.orid){if(!mstrApp.isDossier){AG=J(AH,AJ.orid);if(AG.promptUser){AI.am=AF.DO_NOT_ANSWER;}else{if(AG.answer){AI.pa=AG.answer;}}}}else{AI.am=AF.DO_NOT_ANSWER;}}break;case AF.DO_NOT_ANSWER:case AF.CLOSE:case AF.USE_DEFAULT_ANSWER:case AF.SAME_PROMPT:default:break;}AD.push(AI);});if(AC&&Z(y,x)){z=false;}return{hyperLink:AF,passSelection:z};};var F=function(){return mstrApp.supportFeature(w.CROSS_PROJECT_CONTEXTUAL_LINKING);};var h=function(){return mstrApp.supportFeature(w.CONTEXTUAL_LINKING_FILTER_MULTI_TARGETS);};var S=function(){return mstrApp.supportFeature(w.SUPPORT_ASO_OBJECT_LINK);};var c=function(z){var AA=[];for(var y=0;y<z.length;y++){for(var x=0;x<z[y].d.length;x++){AA.push(z[y].d[x].id);}}return d.distinct(AA).join(",");};var u=function(y,x,AB,AA){if(!y&&!x&&!AB){return"?fields=";}var z=[];if(y){z.push("selectors");}if(x){z.push("filters");}if(y||x){z.push("timezone");}return("?fields="+z.join(",")+(AB?"&attributes="+c(AA):""));};var o=function(AD,AI,y,AB,AG){var AH=a(AI,AD,y),z=AH.hyperLink,AA=AH.passSelection,AF=AD.linkTarget,AC=((AD.psf||AD.pics||AD.psv)&&!!AD.navpage)?AD.ftgs:undefined;AD.so=2;if(!AF){if(AD.onw===undefined){AF=(mstrApp&&mstrApp.isDossier)?"_self":"_blank";}else{AF=AD.onw===0?"_self":"_blank";}}var x={linkInfo:AD,isDossierLink:true,linkTarget:AF,evt:3140,objectID:AD.tid,srcMsgId:AI&&AI.mid,link:z,passFilter:AD.psf,passInCanvasSelection:AD.pics,targetPageKey:AD.navpage,filterTargetKeys:AC,vizSelection:JSON.stringify({sels:AA?y:[],isBranch:!!AB})};if(mstrApp&&mstrApp.isDossier===undefined&&mstrApp.isVI&&mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()&&!mstrApp.isWorkstation&&(!mstrApp.isEmbeddedEnvironment||!mstrApp.isEmbeddedEnvironment())){x.isPresentation=true;}if(AD.pid&&F()){var AE=u(AD.pics,AD.psf,AD.psv,y);AI.controller.onGetLinkingInfo(AE,AI,function(AJ){AG(Object.assign(x,AJ));});}else{AG(x);}};var f=function(x,y){return(!!x&&x.pid&&x.pid!==y&&!F());};mstrmojo.ui.editors.controls.ContextualLink=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.ui.editors.controls.ContextualLink",cssClass:"link-editor contextual-link-editor mojo-theme-light",showTitle:true,title:mstrmojo.desc(17513,"Contextual Link"),autoClose:true,top:"100px",zIndex:8,onSelectThisDossier:mstrmojo.emptyFn,onLinkUpdated:mstrmojo.emptyFn,btns:undefined,dossierTextBox:undefined,pageTextBox:undefined,tooltipTextBox:undefined,passFilterCheckbox:undefined,passFilterLabel:undefined,passInCanvasSelectionCheckbox:undefined,passInCanvasSelectionLabel:undefined,passInCanvasSelectionTooltip:undefined,passSelValueCheckbox:undefined,passSelValueLabel:undefined,openNewWCheckbox:undefined,promptWrapper:undefined,filterMultiTargetsLabel:undefined,filterMultiTargetsSelectorBox:undefined,linkSourceObjectSelectorBox:undefined,linkData:undefined,canSave:true,requesting:false,init:function(x){this._super(x);if(mstrApp){K=mstrApp.projectId;if(G===null){G=q.isLibraryOrWS();}}this.resetData();this.addChildren([this.createConfigContainer()]);},suppressClose:function(){return true;},updateFtgsSelectorBoxEnabled:function(){var x=this.linkData,y=(x.psv||x.pics||x.psf)&&x.navpage;if(this.filterMultiTargetsSelectorBox){this.filterMultiTargetsSelectorBox.set("passFilterChecked",!!y);}},fieldChange:function(z,y){this.setData(z,y);var x=!m(this.linkData,this.originalLinkData)&&this.linkData.tid&&this.linkData.navpage;this.set("canSave",!!x);},setSaveBtnState:function(){this.btns.rtBtns.saveBtn.set("enabled",this.canSave&&!this.requesting);},oncanSaveChange:function(){this.setSaveBtnState();},onrequestingChange:function(){this.setSaveBtnState();},getTargetDossierProjectName:function(x){var y=d.filterOne(N,function(z){return z.did===x;});return y?y.n:null;},setDashboardTextBoxValue:function(y,z){if(F()&&z&&z!==K){var x="("+this.getTargetDossierProjectName(z)+")";this.dossierTextBox.text.set("value",y+" "+x);}else{this.dossierTextBox.text.set("value",y);}},fetchProjects:function(){var y=this,x=q.isLibrary();mstrApp.serverRequest({taskId:"getProjects"},{success:function(z){var AC=z.servers[0].projects;for(var AB=0;AB<AC.length;AB+=1){var AA=AC[AB].acg;if(AA&&!(AA&e.DssAccessRightUseFlag)){continue;}N[AB]={n:(x?AC[AB].alias:"")||AC[AB].name,did:AC[AB].id};if(AC[AB].id===K){N.unshift(N[AB]);N.splice(AB+1,1);}}y.setDashboardTextBoxValue(y.linkData.tnm,y.linkData.pid);}});},resetFilterMultiTargetsSelectorBox:function(z,y){var x=this.filterMultiTargetsSelectorBox;if(x){x.set("infoPages",z);x.set("navPage",y!==undefined?y:Q.walk("linkData.navpage",this));x.set("filterTgts",y!==undefined?y:Q.walk("linkData.ftgs",this)||Q.walk("linkData.navpage",this));this.updateFtgsSelectorBoxEnabled();}},getTemplateDataForAsobsLink:function(){var x=this.host.getDocModel();if(!this.host.boxContent.isVisMap){var y=x.getNodeDataByKey(this.host.k);return y&&y.data;}else{return{gsi:d.map(this.host.boxContent.getNodeKeys(),function(AA){var z=x.getNodeDataByKey(AA);return z&&z.data.gsi;}).filter(Boolean)};}},resetLinkSourceObjectSelectorBox:function(){var AA=this.linkSourceObjectSelectorBox;if(AA){var y=this.host.getDocModel();var z=this.getTemplateDataForAsobsLink();AA.set("templateData",z);AA.set("datasetData",y.datasets);var x=d.map(Q.walk("linkData.asobs",this),function(AB){return AB.id;});AA.set("selectedObjectIds",x);AA.set("selectedTab",-1);}},resetUI:function(){var AA=this.id,z=this.host,y=z.getDocModel(),x=z.boxContent.hasDossierLink();if(N.length===0&&G&&!q.isWSLocalMode()&&F()){this.fetchProjects();}else{this.setDashboardTextBoxValue(this.linkData.tnm,this.linkData.pid);}this.resetFilterMultiTargetsSelectorBox();this.resetLinkSourceObjectSelectorBox();if(x){s(this.linkData.tid,this.linkData.ttp,y,function(AB){var AC=mstrmojo.all[AA];if(!AC){return ;}AC.pageTextBox.set("enabled",true);AC.pageTextBox.set("items",AB.pages);AC.resetFilterMultiTargetsSelectorBox(AB.pages);AC.pageTextBox.set("selectedIndex",E(AC.linkData.navpage,AB.pages)||0);AC.fieldChange("prms",i(AC.linkData.prms,AB.prms));AC.setStateOfPrompts();},this.linkData.pid,null,null,this,{projects:N,defaultProjectId:K});}else{this.pageTextBox.set("enabled",false);this.pageTextBox.set("items",l);this.pageTextBox.set("selectedIndex",0);this.setStateOfPrompts();}this.tooltipTextBox.set("value",this.linkData.dtxt);if(f(this.linkData,K)){this.groupFilterLabel.set("visible",false);this.passFilterCheckbox.set("checked",false);this.passFilterCheckbox.set("visible",false);this.passFilterLabel.set("visible",false);this.passInCanvasSelectionCheckbox.set("checked",false);this.passInCanvasSelectionCheckbox.set("visible",false);this.passInCanvasSelectionLabel.set("visible",false);this.passInCanvasSelectionTooltip.set("visible",false);this.passSelValueCheckbox.set("checked",false);this.passSelValueCheckbox.set("visible",false);this.passSelValueLabel.set("visible",false);if(this.filterMultiTargetsLabel){this.filterMultiTargetsLabel.set("visible",false);}if(this.filterMultiTargetsSelectorBox){this.filterMultiTargetsSelectorBox.set("visible",false);}}else{this.passFilterCheckbox.set("checked",this.linkData.psf);if(this.passInCanvasSelectionCheckbox){this.passInCanvasSelectionCheckbox.set("checked",this.linkData.pics);}this.passSelValueCheckbox.set("checked",this.linkData.psv);}this.openNewWCheckbox.set("checked",this.linkData.onw);this.btns.rmvBtn.set("enabled",x);this.set("canSave",false);this.set("requesting",false);},setStateOfPrompts:function(){if(this.linkData.pid&&this.linkData.pid!==K){return ;}this.promptWrapper.set("visible",this.linkData.prms.length>0);this.promptWrapper.set("prompts",this.linkData.prms);this.promptWrapper.set("aopam",this.linkData.aopam);},setData:function(y,x){if(typeof y==="string"){this.linkData[y]=x;}else{if(typeof y==="object"){Q.copy(y,this.linkData);}}},resetData:function(){var AA=this.host,x=AA.boxContent.hasDossierLink(),y=x?AA.boxContent.model.data.doslinkinfo:{},AB=0,z=1;if(y.pics===undefined){AB=x?0:1;}else{AB=y.pics;}z=y.psv===undefined?1:y.psv;this.originalLinkData=Q.copy(y,{tid:"",tnm:"",navpage:"",navpagenm:"",dtxt:"",psf:1,pics:AB,psv:z,onw:1,aopam:2,prms:[],ftgs:"",asobs:[]});this.linkData=Q.clone(this.originalLinkData);},writeData:function(y,z){var x=mstrmojo.all[y];if(Q.walk("model.data",x)){x.model.data.doslinkinfo=z;this.onLinkUpdated(x);}},submit:function(AF,AM){var AL=this.id,z=this.host.model,AJ=this.host.boxContent,AQ=AJ.id,AP=Q.clone(Q.walk("boxContent.model.data.doslinkinfo",this.host)),x=AF?undefined:Q.clone(this.linkData),AA=AF?"":t(this.linkData,Q.walk("linkData.onw",this)),AC=this.linkData.asobs,y=AC&&AC.length>0,AO=AP&&Q.walk("asobs.length",AP)>0,AG=function(){var AS=mstrmojo.all[AL];if(AS){AS.set("canSave",true);}},AD=function(){var AS=mstrmojo.all[AL];if(AS){AS.writeData(AQ,AF?undefined:AS.linkData);}},AI=function(){var AS=mstrmojo.all[AL];if(AS){AS.set("requesting",false);}},AR=this.writeData.bind(this,AQ,AP),AH=this.writeData.bind(this,AQ,x),AB={failure:AG,success:AD,complete:AI,undo:AR,redo:AH};if(S()&&(y||AO)){var AE=[];var AK=[AJ.k];if(AJ.hasArrayGSI){AK=d.map(AJ.gridData.gsi,function(AS){return AS.k;});}d.forEach(AK,function(AT){var AS=((y&&AF)||(!y&&AO))?{act:"removeAsoObjLink",nodeKey:AT}:{act:"setAsoObjLink",nodeKey:AT,linkXML:AA,asobs:AC};if(!AF&&y&&AO){AS.index=1;}AE.push(AS);});if(!AF){if(AP&&!AO){if(AJ.hasArrayGSI){AE=z.getCompoundGridLinkAction(AJ,{Hyperlinks:""}).concat(AE);}else{AE.unshift(z.getLinkAction(AJ,{Hyperlinks:""}));}}else{if(AO&&!y){if(AJ.hasArrayGSI){AE=AE.concat(z.getCompoundGridLinkAction(AJ,{Hyperlinks:AA}));}else{AE.push(z.getLinkAction(AJ,{Hyperlinks:AA}));}}}}if(AM){return{actions:AE,callbacks:{success:AD},undo:AR,redo:AH};}this.set("requesting",true);var AN=z.getDataService();z.execute({execute:function(){var AS=this,AT=AN.newUpdate(AS,{actions:AE,callback:AB,extras:mstrmojo.DocDataService.SUPPRESS_DATA});AT.submit();},urInfo:{silent:true,undo:AR,redo:AH}});return{};}AA={Hyperlinks:AA};if(AM){return{actions:AJ.hasArrayGSI?z.getCompoundGridLinkAction(AJ,AA):z.getLinkAction(AJ,AA),callbacks:{success:AD},undo:AR,redo:AH};}this.set("requesting",true);z.editLink(AJ,AA,AB,mstrmojo.DocDataService.SUPPRESS_DATA);return{};},createConfigContainer:function(){var AE=this.id,AJ=this.host.getDocModel(),AB={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(15463,"Dashboard")},this.dossierTextBox=j(this.linkData.tnm,function(AL){var AM=mstrmojo.all[AE];if(!AM){return ;}AM.setDashboardTextBoxValue(AL.n,AL.targetProjectId);AM.fieldChange({tid:AL.did,tnm:AL.n,ttp:AL.t,vwm:AL.dvm,pid:AL.targetProjectId,pnm:AM.getTargetDossierProjectName(AL.targetProjectId)});s(AL.did,AL.t,AM.host.getDocModel(),function(AO){var AN=mstrmojo.all[AE];if(!AN){return ;}AN.pageTextBox.set("enabled",true);AN.pageTextBox.set("items",AO.pages);AN.resetFilterMultiTargetsSelectorBox(AO.pages,"");AN.pageTextBox.set("selectedIndex",U);AN.fieldChange("prms",AO.prms);AN.setStateOfPrompts();},AM.linkData.pid,null,null,AM,{projects:N,defaultProjectId:K});},{slot:"col2Node",placeholder:mstrmojo.desc(17004,"Choose a dashboard to link to"),noReport:true,folderLinksContextId:30,browsableViewMedias:"2048,8192",parentFolderId:AJ&&AJ.pfid,projects:F()?N:undefined})]},AI={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(3687,"Page")},this.pageTextBox=X(this.linkData.navpage,l,function(){return null;},function(AM){var AN=mstrmojo.all[AE];if(AN){AN.fieldChange({navpage:AM.navPage,navpagenm:AM.n});var AL=AN.filterMultiTargetsSelectorBox;if(AL){if(AM.navPage){AL.setFilterTgtsWhenNavPageChange(AM.navPage);AL.set("navPage",AM.navPage);AN.fieldChange("ftgs",AL.filterTgts);}else{AL.set("navPage",undefined);AL.set("filterTgts",undefined);AN.fieldChange("ftgs",undefined);}AN.updateFtgsSelectorBoxEnabled();}}},{slot:"col2Node"})]},AK={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(15698,"Tooltip")},this.tooltipTextBox=new mstrmojo.TextBox({alias:"text",slot:"col2Node",valueChangeDelay:1000,value:this.linkData.dtxt,onfocus:function(){if(!this.value){var AL=mstrmojo.all[AE];if(AL){this.set("value",B(AL.linkData.tnm));}}},onkeydown:function(AL){if(AL.e.keyCode===13){this.blur();}},onvalueChange:function AG(){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange("dtxt",this.value.trim());}}})]},AH={scriptClass:"mstrmojo.Box",cssClass:"open-in-new-tab",children:[this.openNewWCheckbox=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:this.linkData.onw,oncheckedChange:function(){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange("onw",Number(this.checked));}}}),new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(18451,"Open in new tab"),onclick:function(){this.parent.children[0].onclick();}}),new mstrmojo.Label({cssDisplay:"inline-block",cssClass:"desc-text",text:mstrmojo.desc(18449,"(Web only)"),onclick:function(){this.parent.children[0].onclick();}})]},y={scriptClass:"mstrmojo.Box",alias:"passFilterCtrls",cssClass:"should-pass-filter-new-layout",children:[this.passFilterCheckbox=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:this.linkData.psf,oncheckedChange:function(){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange("psf",Number(this.checked));AL.updateFtgsSelectorBoxEnabled();}}}),this.passFilterLabel=new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(26327,"Pass the filter panel selections to the chapter of the target page"),onclick:function(){this.parent.children[0].onclick();}})]},AF={scriptClass:"mstrmojo.Box",alias:"passICSCtrls",cssClass:"should-pass-in-canvas-selection",children:[this.passInCanvasSelectionCheckbox=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:this.linkData.pics,oncheckedChange:function(){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange("pics",Number(this.checked));AL.updateFtgsSelectorBoxEnabled();}}}),this.passInCanvasSelectionLabel=new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(26328,"Pass selections in all visualization filters to the target page"),onclick:function(){this.parent.children[0].onclick();}}),this.passInCanvasSelectionTooltip=new mstrmojo.Label({cssDisplay:"inline-block",cssClass:"info-icon",richTooltip:{cssClass:"vi-regular V-right vi-tooltip-V only-for-contextual-link",posType:mstrmojo.tooltip.POS_BOTTOMRIGHT,enableHover:true,content:mstrmojo.desc(26329,"The target page must have matching visualization filters.")},useRichTooltip:true,updateTooltipConfig:function AD(){var AM=this.richTooltip,AL=mstrmojo.dom.position(this.domNode);AM.left=AL.x+AL.w/2+12;AM.top=AL.y-10;}})]},z={scriptClass:"mstrmojo.Box",cssClass:"should-pass-selected-value",alias:"passSelValueCtrls",children:[this.passSelValueCheckbox=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:this.linkData.psv,oncheckedChange:function(){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange("psv",Number(this.checked));AL.updateFtgsSelectorBoxEnabled();}}}),this.passSelValueLabel=new mstrmojo.Label({cssDisplay:"inline-block",text:mstrmojo.desc(26929,"Pass the selected values to the target page"),onclick:function(){p.safeCall("parent.children.0.onclick",this)();}})]},AA={scriptClass:"mstrmojo.Box",cssClass:"pass-filter-to-multi-targets-selector",children:[this.filterMultiTargetsLabel=new mstrmojo.Label({text:mstrmojo.desc(28886,"Pass selected filters to following pages of target dashboard")}),this.filterMultiTargetsSelectorBox=g(this.linkData,null,function(AL){var AM=mstrmojo.all[AE];if(AM){AM.fieldChange({ftgs:AL});}},{slot:"containerNode"})]},x={scriptClass:"mstrmojo.Box",cssClass:"link-source-object-selector-container",children:[new mstrmojo.Label({cssClass:"group-title-target",text:mstrmojo.desc(29406,"Enable link for")}),this.linkSourceObjectSelectorBox=Y(this.linkData,this.getTemplateDataForAsobsLink(),AJ.datasets,function(AM){var AL=mstrmojo.all[AE];if(AL){AL.fieldChange({asobs:AM});}})]},AC=[new mstrmojo.Label({cssClass:"group-title-target",text:mstrmojo.desc(26325,"Target")}),AB,AI,AK,AH,this.groupFilterLabel=new mstrmojo.Label({cssClass:"group-title-filter",text:mstrmojo.desc(26326,"Filter")}),y,AF,z];if(h()){AC.push(AA);}if(S()){AC.unshift(x);}return new mstrmojo.Box({cssClass:"link-config-container",alias:"linkConfigContainer",children:AC.concat([this.promptWrapper=new n({fromVis:true,prompts:this.linkData.prms,aopam:this.linkData.aopam,onAnswerChange:function(AM,AL){var AN=mstrmojo.all[AE];if(AN){AN.fieldChange(AM?"aopam":"prms",AL);}}}),this.btns=k(function(){var AL=mstrmojo.all[AE];if(AL){AL.submit(true);AL.close();}},function(){var AL=mstrmojo.all[AE];if(!AL){return ;}if(AL.host.boxContent.hasSelectTarget()){AL.host.clearTargets(AL.submit(false,true));}else{AL.submit();}AL.close();},function(){var AL=mstrmojo.all[AE];if(AL){AL.close();}})])});},onOpen:function(){mstrmojo.ui.PopupConfig.directionCfg.setDirection(false);this.resetData();this.resetUI();this.adjustEditorWidth();},adjustEditorWidth:function(){var y=this.linkConfigContainer,AA=Q.walk("passFilterCtrls.domNode.clientWidth",y),AB=Q.walk("passICSCtrls.domNode.clientWidth",y),z=Q.walk("passSelValueCtrls.domNode.clientWidth",y),x=Math.max(AA,AB,z,364)+"px";if(y&&Q.walk("domNode.style",y)&&y.domNode.style.width!==x){y.domNode.style.width=x;this.positionDialog();}}});mstrmojo.ui.editors.controls.ContextualLink.LINK_TYPE=R;mstrmojo.ui.editors.controls.ContextualLink.getLinkTooltip=L;mstrmojo.ui.editors.controls.ContextualLink.genDLAction=o;mstrmojo.ui.editors.controls.ContextualLink.buildLink=a;mstrmojo.ui.editors.controls.ContextualLink.shouldHideLinkingContext=f;}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.Label","mstrmojo.ui.CheckList","mstrmojo.ui.Checkbox","mstrmojo.ui.editors.controls.ThreeColumnContainer","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.datasets.DataInterface","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.dom","mstrmojo.func","mstrmojo.string","mstrmojo.VisUtility","mstrmojo.vi.util.DIUtils","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi.enums.EnumFeatures","mstrmojo.DocSelector","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.css","mstrmojo.Editor","mstrmojo.Button","mstrmojo.pendo.PendoHelper","mstrmojo.pendo.PendoParameterEnums","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.UUID","mstrmojo.util.PlatformHelper");mstrmojo.requiresDescs(2031,3945,3946,11505,11571,13629,13630,13860,14595,15952,26332,26333,18465,29398);var Q=mstrmojo.hash,AE=mstrmojo.vi.ui.DatasetUnitMenuUtils,e=mstrmojo.models.datasets.DataInterface,i=mstrmojo.expr.DTP,d=mstrmojo.expr.TP,AB=mstrmojo.expr.STP,h=mstrmojo.array,F=mstrmojo.num,y=mstrmojo.string,O=mstrmojo.dom,x=mstrmojo.func,z=mstrmojo.VisUtility,j=mstrmojo.vi.util.DIUtils,m=j.DIConstants,H=mstrmojo.vi.enums.EnumFeatures,Y=mstrmojo.DocSelector.UNSET_STATUS,E=mstrmojo.DocSelector.STYLES,c=mstrmojo.elementHelper,C=mstrmojo.css,u=mstrmojo.UUID.EMPTY,AC=mstrmojo.pendo.PendoHelper,AD=mstrmojo.pendo.PendoParameterEnums,o=mstrmojo.util.PlatformHelper;var f=[{n:mstrmojo.desc(18465,"This Chapter Only")}];function N(AM){var AK=350,AF={fontFamily:"Arial",fontSize:"12px"},AJ=z.measureTextWidth(AM,AF);if(AJ>AK){var AI,AG,AH=AM.indexOf(" "),AL=AH;while(AH>-1){AI=AM.substring(0,AH);AG=z.measureTextWidth(AI,AF);if(AG>=AK){break;}AL=AH;AH=AM.indexOf(" ",AH+1);}if(AH>-1){AM=AM.substring(0,AL)+"\n"+AM.substring(AL);}}return AM;}function W(AF){var AN,AK=AF.selector,AO=AF.fn(),AP=AO.keys,AI=AO.items,AQ=AI.reduce(function(AU,AV){if(AV.fgk!==undefined){AU.push(AI.indexOf(AV));}return AU;},[]),AT=new mstrmojo.ui.CheckList({alias:"unitCheckList",cssClass:"units",items:AI.map(function(AU){AU.css=AE.getUnitCssClass(AU.src||{});return AU;}),onchange:function(AU){var AV=AU.added||AU.removed;if(AN&&AV.length===1){AN.set("okEnabled",true);if(AQ.length>1&&AT.items[AV[0]].fgk){AT[AU.added?"addSelect":"removeSelect"](AQ);}}}}),AJ=N(AF.title);var AH=parseInt(Q.walk("defn.adts",AK)||0,10)===1,AG=AH,AS=x.safeCall("isVIADTSSettingVisible",AK)(),AL={scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",cssClass:"mstrmojo-vi-ADTS-setting-content",children:[{scriptClass:"mstrmojo.ui.Checkbox",slot:"col1Node",alias:"settingCheckbox",cssClass:"setting-checkbox",cssDisplay:"inline-block",checked:AH,oncheckedChange:function(){AG=!!this.checked;if(AN){AN.set("okEnabled",true);}}},{scriptClass:"mstrmojo.Label",slot:"col2Node",cssClass:"setting-label",cssDisplay:"inline-block",text:mstrmojo.desc(26332,"Update targets automatically"),onclick:function(){var AU=this.parent.settingCheckbox;AU.set("checked",!AU.checked);}},{scriptClass:"mstrmojo.Label",slot:"col3Node",cssDisplay:"inline-block",cssClass:"info-icon",richTooltip:{cssClass:"vi-regular V-right vi-tooltip-V",posType:mstrmojo.tooltip.POS_BOTTOMRIGHT,enableHover:true,content:mstrmojo.desc(26333,"The target filters automatically unset when this filter selection changes. If a target filter is dynamic, the default selection applies. This setting does not apply to visualizations being targeted by this selector.")},useRichTooltip:true,updateTooltipConfig:function AM(){var AV=this.richTooltip,AU=O.position(this.domNode);AV.left=AU.x+AU.w-5;AV.top=AU.y-10;}}]};AT.setSelectedItems(AI.filter(function(AU){return AP.indexOf(AU.id)>-1;}));var AR=[{scriptClass:"mstrmojo.Label",text:AJ},AT];if(AS){AR.push(AL);}AN=new mstrmojo.ui.menus.EditorConfig({contents:new mstrmojo.Box({cssClass:"mstrmojo-vi-FilterBox-content",children:AR}),okEnabled:false,data:{},onOpen:function(){AT.updateScrollbars();},cssClass:"mstrmojo-vi-FilterBox-targets",okBtnText:mstrmojo.desc(2031,"Apply"),fnOk:function(){AK.model.changeFilterTargets(AK,AP,AT.getSelectedItems().map(function(AU){return AU.id;}),AK.isInFilterPanel(),undefined,(AS&&AH!==AG)?(AG===true?1:0):undefined);}});return AN;}function n(AF,AG){return function(AH,AI){var AJ=AH!==AI;if(AJ){AF.set(AG,AH);}return AJ;};}mstrmojo.vi.ui.rw.selectors._HasFilterContextMenu=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasFilterContextMenu",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasFilterContextMenu",addModeMenuItems:function L(AG,AF,AH){if(!AF.supportsInclude()){return false;}if(AF.isVisFilter()&&AF.getNonExecuteSelectionsErrMsg()){return false;}var AI=function(AN,AK){var AL=AF.include===AK,AJ=x.safeCall("isMandatory",AF)(),AM;if(!AK&&AJ){AM={n:AN,ttp:mstrmojo.desc(27771,"Selection Required is checked"),};AG.addNonInteractiveMenuItem(AM,"not-to-warn",true);return true;}AG.addMenuItem(AN,AL?"on":"",function(){if(!AL){AF.set("include",AK);this.generateToolbar();if(AH){AH();}}return !AL;}.bind(this));}.bind(this);AI(mstrmojo.desc(3945,"Include"),true);AI(mstrmojo.desc(3946,"Exclude"),false);AG.hasToggleItem=true;AG.addSeparator();return true;},addShowAllMenuItem:function I(AG,AF){if(!AF.supportsShowAllToggle()||AF.isAttrQualSelector()||AF.isRecursiveAttributeSelector()||AF.isSearchBox()||x.safeCall("isUsedInPushDownFilter",AF)()||mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){return false;}var AI=mstrmojo.desc(4741,"Show Option for All");if(!AF.include||(AF.defn.scs&&!!(mstrApp&&mstrApp.supportFeature(H.USE_FILTER_ENHANCEMENT)))){AI={n:mstrmojo.desc(4741,"Show Option for All"),ttp:AF.defn.scs?mstrmojo.desc(26330,"The option to clear this filter has been disabled."):"",};AG.addNonInteractiveMenuItem(AI,"not-to-warn",true);return true;}var AH=function(){var AL=!AF.defn.showall,AJ=AF.model,AK=AJ.getSelectorPropsChangeAction(AF,{showAll:AL}),AM=AK.concat(AJ.getCtrlActionsByStyleForToggleShowAll(AF,AL));AJ.submitToggleShowAllActions(AF,AM);};AG.addToggleMenuItem(AI,"",AH,AH,this.id,AF.defn.showall);return true;},addClearFilterMenuItem:function J(AH,AF,AJ){var AI=x.safeCall("isActionSelector",AF)();if(AI){return false;}var AG=x.safeCall("isMandatory",AF)();if(mstrApp.isAppStatePresentation()&&(AF.hasDynamicSelection()||AG)){return false;}AH.addMenuItem(AF.getClearFilterLabel(),"",function(){var AM=mstrApp.isAppStatePause(),AK=true,AL;if(AF.isInFilterPanel()&&!AM){AL=AF.getFilterPanel();AK=AL&&AL.isAutoApply();}var AN=!!(mstrApp&&mstrApp.supportFeature(H.USE_FILTER_ENHANCEMENT));if(AN&&!AF.isInFilterPanel()){if(AF.defn){AF.defn.scs=0;}AF.parent.raiseEvent({name:"disableClearingThisFilter",});}AF.clearSelector(AK);if(AJ){AJ();}});return true;},addResetToDynamicItem:function D(AH,AG,AI){var AK=AI.sus,AF=AI.suc,AJ=AK===Y.FIRST?mstrmojo.desc(17762,"Reset to First ##"):mstrmojo.desc(19389,"Reset to Last ##");AJ=AJ.replace("##",AF);AH.addMenuItem(AJ,"",function(){AG.configDynamicSelection(AK,AF);});},addDynamicSelConsumptionItems:function K(AG,AF){var AI=AF.style,AL=AF.node.data,AK=AF._dynamicSelDefn,AJ=AF.content,AH=AJ&&AJ.items;if(AI===E.SEARCH_BOX){if(AH.length&&Q.walk("defn.scs",this)!==1){AG.addMenuItem(mstrmojo.desc(2119,"Clear All"),"",function(){AF.updateSelectionsByStyle([]);});}}else{if(AF.useAttrStyle()&&!AF.showall&&AF.include){if(AF.defn&&AF.defn.scs!==1){AG.addMenuItem(mstrmojo.desc(3474,"Select All"),"",function(){AF.updateSelectionsByStyle(AF.multi?AL.elms:[c.ELEM_ALL_ID]);});}}}if(AK&&!AL.unset){this.addResetToDynamicItem(AG,AF,AK);}},addDynamicSelectionMenuItem:function t(AM,AS){var AJ=mstrApp&&mstrApp.supportFeature(H.DYNAMIC_SEL_AND_SORT),AX=mstrApp&&mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),AO=AS.node.data.dt;if(!(x.safeCall("isObjectParameterSelector",AS)()&&mstrApp.serverSupportCheck(H.DYNAMIC_SELECTION_ON_OBJECT_PARAMETER))&&(!AJ||AX||(!AS.isAttributeSelector()&&!AS.isSlicingSelector())||AS.isRecursiveAttributeSelector()||AS.isCalendarStyle()||AS.isEventTimeRangeFilter()||x.safeCall("isUsedInPushDownFilter",AS)())){return false;}var AH=AS.defn,AQ=AH.isObjectParameter,AV=1,AW=2000000000,Aa=999,AR={1:0,2:1,4:2},AZ={selectedIndex:AR[AH.sus||1],count:AH.suc||AV},AI=!AS.multi,AP=[{n:"<div>"+mstrmojo.desc(11722,"Unset")+"</div>",v:1,hid:AZ.selectedIndex>0},{n:AI?(AQ?mstrmojo.desc(28878,"First Object"):mstrmojo.desc(17765,"First Element")):(AQ?mstrmojo.desc(28879,"First N Objects"):mstrmojo.desc(17577,"First N Elements")),v:2},{n:AI?(AQ?mstrmojo.desc(28880,"Last Object"):mstrmojo.desc(17770,"Last Element")):(AQ?mstrmojo.desc(28881,"Last N Objects"):mstrmojo.desc(17578,"Last N Elements")),v:4}],AL=!!(mstrApp&&mstrApp.supportFeature(H.USE_FILTER_ENHANCEMENT)),AK,AG,AY,AU;if(AL){AK=parseInt(Q.walk("defn.scs",AS)||0,10)===1;if(!Q.walk("defn.include",AS)){AK=false;}if(mstrApp&&x.safeCall("supportFeature",mstrApp)(H.USE_FILTER_ENHANCEMENT)){AH.isNewDynamicFilter=AH.sus>1?false:true;}AY=AH.sus&&AH.include;AU=AK||AH.isNewDynamicFilter;AG=AK||AU;}function AF(Ae){var Ad=Ae.getBoundingClientRect();if(Ad.width>window.innerWidth-Ad.left){var Ab="inset: 0px calc(100% + 0px) auto auto";var Ac="inset: 0px auto auto calc(100% + 0px)";Ae.style.cssText=Ae.style.cssText.replace(Ac,Ab);}}var AT=[{alias:"dynamicStates",scriptClass:"mstrmojo.ui.Pulldown",cssClass:"dynamicSelectionOptions",selectedIndex:AZ.selectedIndex,isHostedWithin:false,items:AP,allowHTML:true,onitemSelected:function(Ac){if(!this.hasRendered){return ;}if(Ac.v>1){if(!AI){this.parent.quantity.set("visible",true);if(AL&&AH.include){C.toggleClass(this.parent.domNode,"disableClearFilter",true);AF(this.parent.domNode);}}if(AI){if(AL&&AH.include){C.toggleClass(this.parent.domNode,"disableClearFilterWithoutQuantity",true);AF(this.parent.domNode);}}}else{this.parent.quantity.set("visible",false);if(AL){var Ab=AI?"disableClearFilterWithoutQuantity":"disableClearFilter";C.toggleClass(this.parent.domNode,Ab);this.parent.disableClear.set("visible",false);}}this.parent.data.set("selectedIndex",Ac._renderIdx);}},{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"quantity",cssClass:"quantity-selector",width:"140px",cssText:"padding-top:10px;",col1Width:"90px",col2Width:"90px",visible:AZ.selectedIndex>0&&!AI,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(17769,"Quantity"),slot:"col1Node",},{scriptClass:"mstrmojo.TextBox",alias:"value",slot:"col2Node",value:AZ.count,lastValidValue:AZ.count,onvalueChange:function(){var Ab=this.value,Ae=F.parseInteger(this.value),Ad=y.isEmpty(Ab);if(!Ad&&F.inNumericRange(Ae,AV,AW)!==0){var Ac=Ae>AW;AS.set("validation",{invalid:true,errorCode:Ac?"maxValueVIWarning":"minValueVIWarning",args:Ac?undefined:[0],refNode:this.domNode,offsetAlgo:true,position:4});Ae=NaN;}else{if(Ae>Aa){AS.set("validation",{invalid:true,errorCode:"largeSelectionVIWarning",refNode:this.domNode,offsetAlgo:true,position:4});}else{if(AS.hideWarning){AS.hideWarning();}}if(!Ad){this.lastValidValue=Ae;}}this.parent.parent.data.set("count",Ae);},onblur:function(){var Ab=this.value,Ac=F.parseInteger(this.value);if(Ab.length===0||isNaN(Ac)||Ac>AW){this.set("value",this.lastValidValue);}else{if(Ac<AV){this.set("value",AV);}}}}]},];if(AL){AT.push({scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"disableClear",width:"193px",cssClass:"disableClear",col1Width:"23px",col2Width:"170px",visible:false,children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"scsCheckbox",checked:AU,cssClass:"setting-checkbox",cssDisplay:"inline-block",slot:"col1Node",oncheckedChange:function(){AG=!!this.checked;x.safeCall("parent.parent.data.set",this)("newSCS",AG);}},{scriptClass:"mstrmojo.Label",alias:"checkboxLabel",cssClass:"setting-label",cssDisplay:"inline-block",text:mstrmojo.desc(26331,"Disable clearing this filter"),slot:"col2Node",onclick:function(){var Ab=this.parent.scsCheckbox;Ab.set("checked",!Ab.checked);}}]});}function AN(){var Ab="dynamicSelection";if(AY){if(AI){Ab+=" disableClearFilterWithoutQuantity";}else{Ab+=" disableClearFilter";}}return Ab;}AM.addPopupMenuItem(mstrmojo.desc(17768,"Dynamic Selection"),this.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:AN(),data:Q.clone(AZ),bindings:{okEnabled:function(){var Ae=this.data.selectedIndex,Af=this.data.count,Ag=!isNaN(Af),Ad=this.data.newSCS;return(Ae!==AZ.selectedIndex||Af!==AZ.count||(Ad!==undefined&&Ad!==AK))&&Ag;}},contents:AT,fnOk:function Ac(Ah){var Ag=AP[Ah.selectedIndex].v,Af=AH.scs===1,Ae=!AH.sus||AH.sus<=1,Ad=(Ae&&AS.include)||Af;if(AS.warning&&AS.warning.visible&&AS.hideWarning){AS.hideWarning();}if(Q.walk("defn.isNewDynamicFilter",AS)){delete AS.defn.isNewDynamicFilter;}AS.configDynamicSelection(Ag,AI?1:Ah.count,{scs:Ad});},fnCancel:function Ab(){if(AS.warning&&AS.warning.visible&&AS.hideWarning){AS.hideWarning();}}});});return true;},isSortingAllowed:function Z(AG){var AI=mstrApp&&mstrApp.supportFeature(H.DYNAMIC_SEL_AND_SORT),AH=mstrApp&&mstrApp.isAppStatePresentation(),AF=[mstrmojo.DocSelector.STYLES.CHECKBOX,mstrmojo.DocSelector.STYLES.PULLDOWN,mstrmojo.DocSelector.STYLES.RADIO,mstrmojo.DocSelector.STYLES.LINK,mstrmojo.DocSelector.STYLES.BUTTON,mstrmojo.DocSelector.STYLES.SEARCH_BOX,mstrmojo.DocSelector.STYLES.SCROLLER,mstrmojo.DocSelector.STYLES.LIST],AJ=AG.node.data.dt;if(!AI||AH||(!AG.isAttributeSelector()&&!AG.isConsolidationSelector())||AG.isCalendarStyle()||x.safeCall("isUsedInPushDownFilter",AG)()||AG.isScopeFilter()){return false;}return AF.indexOf(AG.style)!==-1;},addLockFilterMenuItem:function s(AG,AF){if(!mstrApp.supportFeature(H.LOCK_FILTER)){return ;}var AI,AH=AF.model;if(AF.isVisFilter()){AI=Q.walk("node.data.sc.cacs",AF);}else{AI=Q.walk("defn.cacs",AF);}var AJ=(1<<0);AG.addMenuItem(mstrmojo.desc(25520,"Disable Interactions in Library"),AI&AJ?"on":"",function(){AH.setSelectorStatus(AF,AI^AJ);if(AC.isPendoEnabled()&&AF.isParameterSelector()){window.pendo.track(AD.EVENT_NAME.PARAMETER_SELECTOR_CREATION,{selectorStyle:AC.resolveSelectorStyle(AF.style),location:AD.SELECTOR_LOCATION.FILTER_PANEL,configurations:((AI^AJ)===1)?AD.SELECTOR_CONFIGURATIONS.CHECK_DISABLE_INTERACTIONS_IN_LIBRARY:AD.SELECTOR_CONFIGURATIONS.UNCHECK_DISABLE_INTERACTIONS_IN_LIBRARY});}});AG.addSeparator();},addSelectionRequiredMenuItem:function M(AM,AI){var AH=mstrApp&&mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),AN=AI.node.data.dt,AF=Q.walk("defn.scs",AI),AK,AL,AJ,AG={n:mstrmojo.desc(27770,"Selection Required"),ttp:mstrmojo.desc(27772,"Exclude is checked")};if(AH||(!AI.isAttributeSelector()&&!AI.isSlicingSelector())&&!AI.isParameterSelector()||AI.isRecursiveAttributeSelector()||(AI.isAttrQualSelector()&&(AN===i.DATE||AN===i.TIMESTAMP))||AI.isEventTimeRangeFilter()){return false;}if(!AI.include){AM.addNonInteractiveMenuItem(AG,"not-to-warn",true);return true;}AM.addMenuItem(mstrmojo.desc(27770,"Selection Required"),AF===1?"on":"",function(){AK=AF!==1;if(AI.hasDynamicSelection(true)){AL=Q.walk("defn.sus",AI);AJ=Q.walk("defn.suc",AI);AI.configDynamicSelection(AL,AJ,{scs:AK});}else{AI.configureScsAction(AK);}if(AC.isPendoEnabled()&&AI.isParameterSelector()){window.pendo.track(AD.EVENT_NAME.PARAMETER_SELECTOR_CREATION,{selectorStyle:AC.resolveSelectorStyle(AI.style),location:AI.isInFilterPanel()?AD.SELECTOR_LOCATION.FILTER_PANEL:AD.SELECTOR_LOCATION.IN_CANVAS,configurations:AI.defn.scs===1?AD.SELECTOR_CONFIGURATIONS.CHECK_SELECTION_REQUIRED:AD.SELECTOR_CONFIGURATIONS.UNCHECK_SELECTION_REQUIRED});}});},addAttributeSortMenuItem:function A(AK,AS,AX){if(mstrmojo.resolveFeature("set-attributeform-display")){var AH=AS.defn,AP=AH.sorts&&AH.sorts[0]||{},AO=(AP.key||"").split("!"),AQ=AO.length&&AO[2],AU=AP.isAsc===AX,AI=AS.model,AL=AI.datasets,AF=AH.srcid,AT=AS.isNewDerivedElementSelector(),AR=AT&&AE.getUnitFromDataset(AL,AF,AH.srct),AJ=e.getFormsByAttrId(AR?AR.attId:AF,AL),AN=AJ.length>1,AM,AW,AG;if(AN){AM=AX?mstrmojo.desc(17761,"Sort Ascending By"):mstrmojo.desc(17766,"Sort Descending By");}else{AM=AX?mstrmojo.desc(7974,"Sort Ascending"):mstrmojo.desc(7975,"Sort Descending");}AK.addMenuItem(AM,AU?"on":"attrSort",function(){if(AN){AW=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"hasToggleItem sortAttributeForm"});if(AS.isRecursiveAttributeSelector()){AJ=h.filter(AJ,function(AZ){return AZ.fid!=="A9BFF03B4D72CC4F457ACBB4B185E91D"&&AZ.fnm!=="LEVEL_NUMBER";});}AW.addDisabledMenuItem(mstrmojo.desc(17763,"Attribute Form"),"label");AW.addSeparator();AJ.forEach(function(AZ){var Ab=AZ.fid,Aa=AQ===Ab&&AU;AW.addMenuItem(AZ.fnm,Aa?"on":"",AI.sortSelectorByAttrForm.bind(AI,AS,false,AX,Ab));},this);return AW;}else{AG=AJ.length===1?AJ[0].fid:undefined;AI.sortSelectorByAttrForm(AS,false,AX,AG);}});if(AN){var AY=AK.getMenuItems(),AV=AY.length-1;AY[AV].pop=true;AY[AV].scope=this.id;}return true;}},addClearSortMenuItem:function L(AG,AF){var AH=AF.model;AG.addMenuItem(mstrmojo.desc(17764,"Clear Sort..."),"",AH.sortSelectorByAttrForm.bind(AH,AF,true));return true;},addDossierLevelFilterMenuItem:function R(AK,AG){var AO=mstrApp&&mstrApp.supportFeature(H.DOSSIER_LEVEL_FILTER),AF=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),AJ=AG.model,AI=AG.n,AL=(AJ.datasetsSettings&&AJ.datasetsSettings.units)||{},AM=AL[AI]&&AL[AI].completeHide,AH=x.safeCall("isParameterSelector",AG)();if(!AO||AF||AG.isVisFilter()||AM||AH){return false;}var AN=[{n:mstrmojo.desc(18465,"This Chapter Only"),v:false},{n:mstrmojo.desc(18463,"All Chapters Containing This Filter"),v:true}];AK.addPopupMenuItem(mstrmojo.desc(18464,"Apply Selections To"),this.id,function(){var AQ=AG.defn.sync,AR=new mstrmojo.ui.menus.MenuConfig(),AP=function(AS){return function(){if(AQ!==AS){AJ.synchronizeSelector(AG,AS);}};};if(o.isAIBotAdvancedMode()){AR.setWhitelist(f);}AN.forEach(function(AS){AR.addMenuItem(AS.n,AQ===AS.v?"on":"",AP(AS.v));},this);AR.hasToggleItem=true;return AR;});return true;},addMenuItemIfSelectTargetsValid:function AA(AG,AF,AH){if(!mstrApp.isAppStatePresentation()){var AI=this.getTargetInfo();if(AI.items.length){AG.addEditorMenuItem(mstrmojo.desc(13629,"Select Targets"),this.id,W,{selector:AF,fn:this.getTargetInfo.bind(this),title:AH});}}},addSelectorTargetsMenuItem:function g(AG,AF){if(!mstrApp.isAppStatePresentation()){AG.addMenuItem(!!AF.tks?mstrmojo.desc(16874,"Edit Targets"):mstrmojo.desc(13629,"Select Targets"),"uaf",function(){mstrApp.rootCtrl.view.openInlineDialog({scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",vis:AF.parent});});}},addFilterStyleMenuItem:function b(AG,AF){var AH;if(mstrApp.isAppStatePresentation()||AF.isSolrSelector()||AF.isEventTimeRangeFilter()||(AF.isScopeFilter()&&AF.defn.style===mstrmojo.DocSelector.STYLES.METRIC_QUAL)){return false;}AH=AF.getSelectorStyleList();if(!AH.length){return false;}AG.addSubMenuItem(mstrmojo.desc(11505,"Display Style"),"",this.id,function(){var AJ=AF.defn.style,AI=function(AM){return function(){if(AM!==AJ){var AN=mstrmojo.DocSelector.STYLES.ATTR_QUAL;if(AM===AN||AJ===AN){AF.model.openSelWarnFlag(AF.k);}AF.model.changeFilterStyle(AF,AM);if(AC.isPendoEnabled()&&AF.isParameterSelector()){window.pendo.track(AD.EVENT_NAME.PARAMETER_SELECTOR_CREATION,{selectorStyle:AC.resolveSelectorStyle(AF.style),location:AF.isInFilterPanel()?AD.SELECTOR_LOCATION.FILTER_PANEL:AD.SELECTOR_LOCATION.IN_CANVAS,configurations:AD.SELECTOR_CONFIGURATIONS.CHANGE_STYLE.replace("#",AC.resolveSelectorStyle(AM))});}}};};var AK=new mstrmojo.ui.menus.MenuConfig(),AL=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(AF.isDynamicAttributeSelector()&&AF.expr&&!AL){AK.useTooltip=true;AH.forEach(function(AN){var AM=AN.n;if(AJ!==AN.v){AM=typeof AM==="object"?AM.n:AM;AK.addDisabledMenuItem({n:AM,ttp:mstrmojo.desc(15952,"Please unset filter selections before switching to the # display style").replace("#",AM)});}else{AK.addMenuItem(AM,"on",mstrmojo.emptyFn);}});}else{AH.forEach(function(AM){var AN=AM.v;AK.addMenuItem(AM.n,AJ===AN?"on":"",AI(AN));},this);}AK.hasToggleItem=true;return AK;});return true;},addMultiSelectMenuItem:function q(AG,AF){if(!AF.allowsTogglingMultiSelect()||mstrApp.isAppStatePresentation()){return false;}if((AF.isAMSelector()&&!AF.isParameterSelector())&&!AF.parent.isAllGrid){return false;}if(AF.isParameterSelector()&&AF.isValueParameter()){return false;}if(AF.shouldDisableAllowMulti()){AG.addNonInteractiveMenuItem(mstrmojo.desc(13860,"Allow Multiple Selections"),null,true);}else{AG.addMenuItem(mstrmojo.desc(13860,"Allow Multiple Selections"),AF.multi?"on":"",function(){AF.model.changeFilterStyle(AF,AF.style,!AF.multi,AF.iase);});AG.hasToggleItem=true;}return true;},addAutoSearchMenuItem:function l(AG,AF){if(!AF.allowsTogglingAutoSearch()||mstrApp.isAppStatePresentation()){return false;}AG.addMenuItem(mstrmojo.desc(15913,"Allow Instant Search"),AF.iase?"on":"",function(){AF.model.changeFilterStyle(AF,AF.style,AF.multi,!AF.iase);});AG.hasToggleItem=true;return true;},addEnablePreLoadOptionsMenuItem:function a(AG,AF){if(!AF.allowsTogglingPreloadOptions()||mstrApp.isAppStatePresentation()){return false;}var AI=Q.walk("defn.cacs",AF),AH=AF.model;var AJ=(1<<1);AG.addMenuItem(mstrmojo.desc(28832,"Pre-load Elements"),AI&AJ?"on":"",function(){AH.setSelectorStatus(AF,AI^AJ);});},addConfigVisSelectorMenu:function B(AG,AF){var AI=this,AH=AF.getNonExecuteSelectionsErrMsg();AG.addMenuItem(mstrmojo.desc(3224,"Edit..."),AH?"disabled":"",AH?mstrmojo.emptyFn:function(){AI.closeVisSelectorPanel();var AK=AF.model,AJ=AF.k;AK.checkLargeItemsForVisFilter(AJ,function(){var AL=AK.addVisFilterContainer(),AN=AK.getSelectedViUnit(),AM;AK.oldSelectedVizBoxId=AN?AN.id:null;mstrApp.set("isInVFConfigMode",true);mstrApp.restoreVFKey=AJ;AK.beforeEnterVFConfigMode();AM=AK.insertVizBox(AJ,AL,{});AK.controller.rootCtrl.initPanelStautsInConfigMode();AK.selectVIUnit(AM.id,true,{isAddAction:true});mstrApp.getRootController().enterVizFilterConfigMode(AF.parent.baseTitle,true);});});},addQualMenuItems:function X(AG,AF){if(AF.isSolrSelector()||!AF.isMetricSelector()||AF.isRankMetricSelector()||!AF.isNumericMetricSelector()||AF.isParameterSelector()){return false;}AG.addRadioMenuGroup(AF.qua>0?1:0,n(AF,"qua"),[{value:0,text:mstrmojo.desc(11571,"Qualify on Value")},{value:1,text:mstrmojo.desc(13630,"Qualify on Rank")}],"",undefined,true);AG.addSeparator();return true;},addBFAMenuItem:function G(AG,AF){if(AF.isRecursiveAttributeSelector()&&AF.showBFAMenu&&!mstrApp.isDossier&&!mstrApp.isAppStatePresentation()){AG.addMenuItem(mstrmojo.desc(17314,"Use Alternate Filter Technique"),AF.defn.pdf?"on":"",function(){AF.changeFilterTechnique();});AG.hasToggleItem=true;}},addSetDisplayFormsMenuItem:function w(AN,AJ){var AH=AJ.node.data.dt;if(!AJ.isAttributeSelector()&&!AJ.isNewDerivedRecursiveElementSelector()||AJ.isCalendarStyle()||x.safeCall("isUsedInPushDownFilter",AJ)()){return false;}var AL=AJ.model,AO=AJ.defn,AI=[],AS=AE.getUnitFromDataset(AL.datasets,AO.srcid,AO.srct),AQ=AS&&AS.attId,AF=e.getFormsByAttrId(AQ||AO.srcid,AL.datasets),AK=AL.datasets[AO.dsid];if(AJ.isRecursiveAttributeSelector()){AF=h.filter(AF,function(AT){return AT.fid!=="A9BFF03B4D72CC4F457ACBB4B185E91D"&&AT.fnm!=="LEVEL_NUMBER";});}if(AF.length<2){return false;}var AP=AO.fs||AO.sfs;if(!AP){var AM=[],AR=AL.getDatasetUnits(["att","mx"],function(AT){return AT.did===(AQ||AO.srcid);})[0]||{};(AR.fs||[]).forEach(function(AT){if(AT.isbf){AM.push({did:AT.fid});}});if(AM.length){AP=AM;}}if(AK&&AK.xdaType===m.xdaType.customFreeFormSQL&&!!AO.sfs){var AG=!!AO.fs?AO.fs.concat(AO.sfs):AO.sfs;AF=h.filter(AF,function(AT){return h.find(AG,"did",AT.fid)!==-1||AT.fnm==="ID";});}AF=h.map(AF,function(AU,AT){var AV=AU.fid;if(h.find(AP,"did",AV)!==-1){AI[AT]=true;}return{id:AV,n:AU.fnm};});if(mstrmojo.resolveFeature("set-attributeform-display")&&!mstrApp.isAppStatePresentation()){AN.addPopupMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),this.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{defn:AO,oldSelectedIndices:AI.slice()},contents:[{alias:"formCheckList",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:AF,selectedIndices:AI.slice()}],fnOk:function AU(Ac,Af){var AY=[],Ag=[],Ad=Af.formCheckList,Ah=Ad.items,AV=Ad.selectedIndices,Ab=Ac.defn.fs||Ac.defn.sfs,Aa=false,AX,AZ;for(AZ=0;AZ<Ah.length;AZ++){var AW=!!Ac.oldSelectedIndices[AZ],Ae=!!AV[AZ];if(AW!==Ae){Aa=true;break;}}if(!Aa){return ;}h.forEach(AV,function(Ai,Aj){if(Ai){AY.push(Ah[Aj]);}});h.forEach(Ab,function(Ai){AX=h.filterOne(AY,function(Aj){return Aj.id===Ai.did;});if(AX){Ag.push(AX);h.removeItem(AY,AX);}});Ag=Ag.concat(AY);AL.setFilterDisplayForms(AJ,Ag);},onOpen:function AT(){this.formCheckList.updateScrollbars();}});});}},addReplaceWithMenuItem:function k(AG,AF){var AH=AF.getSelectorReplaceUnitList();if(AH.length===0){return false;}AG.addEditorMenuItem(mstrmojo.desc(14003,"Replace with"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"replaceReference",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AF.getSelectorReplaceUnitList(),listHooks:{select:function AI(AJ,AK){if(AF.isInFilterPanel()){AF.model.replaceFilterStackSelectors(AF.defn,AK);}else{AF.model.replaceFilter(AF,AK);}if(AF.collapseSelectorInPause){AF.collapseSelectorInPause();}if(this.parent.parent.closeAllMenus){this.parent.parent.closeAllMenus();}}}}]}]});});return true;},addAdvancedOptionsMenuItem:function U(AG,AF){if(AF.isEventTimeRangeFilter()){return ;}var AH=AF&&AF.id;AG.addMenuItem(mstrmojo.desc(3653,"Advanced Options"),"",function(){var AL=mstrmojo.all[AH],AM=Q.walk("defn.n",AL),AJ=function(AO){return typeof AO==="string"&&AO!=="";},AI=mstrmojo.insert({scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(3653,"Advanced Options"),_selectorName:AM,cssClass:"filter-advanced-options mojo-theme-light",buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){AI.destroy();var AS=mstrmojo.all[AH],AP=AS&&AS.model,AQ=AS&&AS.ckey,AR=Q.walk("defn.n",AS),AO=AI._selectorName,AU={success:function AT(AW){var AV=mstrmojo.all[AH];AV.n=AW;}};if(AR!==AO){AP.updateSelectorName(AO,AR,AQ,AU);}},true,{alias:"okBtn",enabled:false}),mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AI.destroy();})],children:[{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",alias:"selectorNameRow",children:[{scriptClass:"mstrmojo.Label",slot:"col1Node",text:mstrmojo.desc(26404,"Selector name")},{scriptClass:"mstrmojo.Label",slot:"col2Node",cssDisplay:"inline-block",cssClass:"info-icon",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-left filter-advanced-options-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,enableHover:true,content:mstrmojo.desc(26405,"This name property is only for purposes of passing filter selections when performing contextual linking to or from this dossier.")},useRichTooltip:true,updateTooltipConfig:function AK(){var AP=this.richTooltip,AO=O.position(this.domNode);AP.left=AO.x-11;AP.top=AO.y+AO.h+11;}},{scriptClass:"mstrmojo.TextBox",alias:"selectorNameTextBox",slot:"col3Node",valueChangeDelay:200,value:AM,onvalueChange:function AN(){var AP=this.value.trim(),AO=AM,AR=AO!==AP,AQ=AJ(AP);AI._selectorName=AP;if(AR&&AQ){x.safeCall("btnHbox.okBtn.set",AI)("enabled",true);x.safeCall("selectorNameRow.selectorNameTextBox.set",AI)("textValid",true);}else{x.safeCall("btnHbox.okBtn.set",AI)("enabled",false);if(!AQ){x.safeCall("selectorNameRow.selectorNameTextBox.set",AI)("textValid",false);}}}}]}]});AI.open();});},addSelectSourceDatasetMenuItem:function P(AL,AH){if(mstrApp.isAppStatePresentation()||!(AH.isAttrElemListSelector()||(AH.isElementListParameter&&AH.isElementListParameter())||AH.isCalendarStyle())){return false;}var AK=AH.model,AP=AK.datasets,AM=[],AN=Q.walk("defn.srcid",AH),AG=e.getAttributeDatasetId(AN,AP),AQ={did:u,type:d.REPORT,},AO=Q.walk("defn.sdsid",AH)||AQ.did,AF=[],AI=function(AS){return function(){AH.model.changeSelectorTargetDataset(AH,AS);};},AJ=x.safeCall("isUsedInPushDownFilter",AH)();function AR(AX,AY,AT){var AZ=AP[AY],AV=AZ&&AZ.att,AW=AV&&AV[h.find(AV,"did",AX)],AU=AW&&AW.st,AS=[AB.CUSTOMGROUP,AB.CONS,AB.NDE,AB.RECURSIVE_ATTR];if(!AT){AS.push(AB.DERIVED_ATTR);}return !AS.includes(AU);}if(!AR(AN,AG[0],false)){return false;}if(AK.als&&AK.populateAttributeIdLinkInfo){AK.populateAttributeIdLinkInfo();AF=AK.als.idLinks[AN];h.forEach(AF,function(AT){var AS=e.getAttributeDatasetId(AT,AP);if(AR(AT,AS[0],true)){AG=AG.concat(AS);}});}AM=Object.values(AP).filter(function(AS){return AG.includes(AS.did);});AL.addSubMenuItem(mstrmojo.desc(27799,"Limit Element Source"),"",this.id,function(){var AU=new mstrmojo.ui.menus.MenuConfig();if(AJ){var AT=Q.walk("defn.parasid",AH),AS=AP[AT];AU.addNonInteractiveMenuItem(mstrmojo.desc(27885,'This is an element parameter sourced from "{{datasetName}}". The source cannot be changed.').replace("{{datasetName}}",AS.name),"push-down-filter-warning",false,0);return AU;}AU.addMenuItem(mstrmojo.desc(27800,"All available datasets"),AO===AQ.did?"on":"",AI(AQ),null,0);Object.values(AM).forEach(function(AV){AU.addMenuItem(AV.name,AO===AV.did?"on":"",AI(AV));});AU.hasToggleItem=true;return AU;});return true;},addSearchBehaviorMenuItem:function p(AG,AF){return false;if(!AF.isSearchBox||!AF.isSearchBox()){return false;}AG.addMenuItem(mstrmojo.desc(28854,"Exact Match"),AF.isExactMatch?"on":"",function(){AF.isExactMatch=!AF.isExactMatch;});},getTargetInfo:function S(){this.throwAbstractMethodError("getTargetInfo");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.ui._HasScroller","mstrmojo.ui.editors.controls.ContextualLink","mstrmojo.VisUtility","mstrmojo.HTMLSanitizeUtil","mstrmojo.mobile._MobileVisTooltip");var B=mstrmojo.css,K=mstrmojo.dom,d=mstrmojo.VisUtility,c=mstrmojo.array,p=mstrmojo.func,L=mstrmojo.hash,h=mstrmojo.HTMLSanitizeUtil,b="new-vis-tooltip",C=16,N=12,U=20,l=5,g=20,a=2,Q=220,t=300,k=300,X=200,o=120,u="px",R=200,J=mstrmojo.ui.editors.controls.ContextualLink.getLinkTooltip,E=["mouseenter","mouseleave"];function s(x){var z=this.tableNode;K.emptyNode(z);for(var y=0;y<x;y++){z.appendChild(document.createElement("COL"));}return z;}function j(AA,x){if(x===undefined){return ;}var y=this.id,z=AA.querySelectorAll("img[src]")||[];z.forEach(function(AB){AB.onload=function(){var AC=mstrmojo.all[y],AD=this;if(AD&&AC){AC.updateTableSize(x,AD.width,AD.height);}};AB.onerror=function(){var AC=mstrmojo.all[y];if(AC){AC.updateTableSize(x,0,0);}};});this.imagesCount+=z.length;}function S(){var x=this.tableNode,y=(x&&x.querySelectorAll("img[src]"))||[];y.forEach(function(z){z.onload=null;z.onerror=null;});this.imagesCount=0;}function f(AE,AB,AA,AG){var AF=AA&&AA.ft,z=AA&&AA.mft,x=document.createElement("div"),AH,AD,AC,y;AB.appendChild(x);if(d.showImageTag(AF,AE)){x.appendChild(h.sanitizeHTMLByDOMPurify(AE));j.call(this,AB,AG);AH=x.textContent;}else{AD=h.sanitizeUnitText(AE,{formTypes:AF,mft:z});if(AD instanceof DocumentFragment){x.appendChild(AD);AH=x.textContent;}else{x.textContent=AD;AH=AD;}}AC=d.getComputedFontStyle(AB);y=Math.ceil(d.measureTextWidth(AH,AC,AC.bonus));if(y>Q){AB.setAttribute("title",AH);}return Math.min(y,Q);}function M(){var AC=this.tableNode,z=AC&&AC.childNodes,AB=this.columnWidths,AD=(AB&&AB.length)||0,x=0,y,AA;if(!z||(z.length<AD)){return ;}for(y=0;y<AD;y++){AA=AB[y]+((y<AD-1)?C:1);z[y].style.width=AA+u;x+=AA;}AC.style.width=x+u;}function D(AD){var y=this,AC,z,x,AA,AB;if((mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode()&&!y.tooltipContainsHTMLAnchor)||K.isMobile){return ;}if(this.exitFixMode){this.exitFixMode();}if(this.isVisible()){x=function(AE,AI){var AH=y.domNode.getBoundingClientRect();var AG=Math.min(Math.abs(AH.left-AE),Math.abs(AH.left+AH.width-AE));var AF=Math.min(Math.abs(AH.top-AI),Math.abs(AH.top+AH.height-AI));return Math.sqrt(AG*AG+AF*AF);};AC=x(AD.x,AD.y);z=function(){K.detachEvent(document,"mousemove",AB,true);K.detachEvent(document,"contextmenu",AA,true);y.exitFixMode=null;};AB=function(AF){var AE=x(AF.clientX,AF.clientY);var AG=30;if(AE>AC+AG){z();}};AA=function(AE){if(!K.contains(y.domNode,AE.target,true)){z();}};K.attachEvent(document,"mousemove",AB,true);K.attachEvent(document,"contextmenu",AA,true);K.attachOneTimeEvent(this.domNode,"mouseenter",z);this.exitFixMode=z;}}mstrmojo.NewVisTooltip=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.NewVisTooltip",infoObj:null,link:null,exitFixMode:null,visId:null,hideTooltipHandler:null,imagesCount:0,columnWidths:[],currentPos:null,domEventListeners:{},markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="new-vis-tooltip-container-wrapper"><div class="new-vis-tooltip-container"><div class="new-vis-tooltip-table"></div></div><div class="new-vis-tooltip-link" mstrAttach:click></div></div></div>',markupSlots:{containerNode:".new-vis-tooltip-container",wrapperNode:".new-vis-tooltip-container-wrapper",linkNode:".new-vis-tooltip-link",tableNode:".new-vis-tooltip-table"},init:function q(x){this._super(x);B.addWidgetCssClass(this,(x&&x.widgetClass)?[x.widgetClass,b]:b);if(K.isChromebook()){B.addWidgetCssClass(this,"chromebook");}},postBuildRendering:function P(){this._super();this.attachListeners();},attachListeners:function W(){this.detachListeners();c.forEach(E,function(x){this.domEventListeners[x]=K.attachMarkupEvent(this.id,this.domNode,x);},this);},setupScrollNodes:function i(){this.scrollNode=this.containerNode;this.scrollbarHostNode=this.domNode;},toggle:function Y(x){var y=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=x&&!y?"block":"none";}},isVisible:function F(){return this.domNode&&(this.domNode.style.display!=="none");},hasTableContent:function A(){return this.tableNode;},clearTooltipHandler:function G(){if(this.hideTooltipHandler){clearTimeout(this.hideTooltipHandler);this.hideTooltipHandler=null;}},renderTooltip:function e(y,z,x){if(!y&&!x){return ;}this.toggle(true);if(c.isArray(y)){this.showSimpleInfo(y,z);}else{this.showGridInfo(y,z);}this.renderLink(x,!y);},renderLink:function(y,x){if(y){this.linkNode.innerText=J(y);}B.toggleClass(this.linkNode,"hide",!y||(mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode()));B.toggleClass(this.linkNode,"single",x);},showDossierTtp:function n(z,AA,x,y){if(!y&&this.exitFixMode){return ;}if(!this.domNode.parentNode){document.body.appendChild(this.domNode);}this.clearTooltipHandler();this.currentPos=AA;if(this.isVisible()&&L.equals(this.infoObj,z)&&L.equals(x,this.link)){this.moveTo(AA,true);}else{this.infoObj=z;this.link=x;S.call(this);this.renderTooltip(z,AA,x);this.moveTo(AA);}if(this.tableNode&&mstrApp&&mstrApp.isSingleTier&&!d.shouldEncodeHtmlContent()){K.redirectUrlToFormWrapper(this.tableNode);}if(y){this.enterFixMode(AA);}},displayInfo:function I(y,AC,AB,x,z,AA){this.showDossierTtp(y,AC,z,AA);return this.tableNode;},showSimpleInfo:function H(y){if(!y||y.length<=0){return ;}var AB=s.call(this,2),z=document.createElement("tbody"),AA=this,AC=0,x=0;AB.appendChild(z);c.forEach(y,function(AE){var AF=z.insertRow(-1),AG=AF.insertCell(-1),AD=AF.insertCell(-1);if(!AE){B.addClass(AF,"seperator");}else{B.addClass(AG,"name");AC=Math.max(AC,f.call(AA,AE.n,AG));x=Math.max(x,f.call(AA,AE.v,AD,AE,1));}});this.columnWidths=[AC,x];M.call(this);},showGridInfo:function Z(y){var z=y&&y.header,AE=y&&y.body,AA=(y&&y.bftp)||[],AB=(y&&y.mfts)||[],AH=y&&y.attrCount;if(!z||z.length<=0){return ;}var AJ=this,AG=z.length,AL=s.call(this,AG),AI=document.createElement("thead"),AD=document.createElement("tbody"),AF=AI.insertRow(-1),AC=[];AL.appendChild(AI);AL.appendChild(AD);c.forEach(z,function(AO,AM){var AN=AF.insertCell(-1);B.addClass(AN,"header");if(AM>=AH){B.addClass(AN,"metric");}AC[AM]=f.call(AJ,AO,AN);});var x=function(){var AM=0;return function(AS){var AO=document.createDocumentFragment();var AQ,AR,AT;for(var AN=0;AN<100;AN++){if(AM>=AE.length){break;}AQ=AE[AM];if(AS){AR=AD.insertRow(-1);}else{AR=document.createElement("tr");AO.appendChild(AR);}for(var AP=0;AP<AG;AP++){AT=AR.insertCell(-1);if(AM===0){B.addClass(AT,"firstRow");}if(AP>=AH){B.addClass(AT,"metric");}if(AS){AC[AP]=Math.max(AC[AP],f.call(AJ,AQ[AP],AT,{ft:AA[AP],mft:AB[AP]},AP));}else{f.call(AJ,AQ[AP],AT,{ft:AA[AP],mft:AB[AP]});}}AM++;}if(!AS){AD.appendChild(AO);}return AM<AE.length;};};var AK=x();if(AK(true)){this.onScrollEnd=p.throttle(function(){var AM=AJ.scrollNode;if(AM.scrollTop+AM.clientHeight>AM.scrollHeight-150){if(!AK()){AJ.onScrollEnd=null;}}},100);}this.columnWidths=AC;M.call(this);},updateTableSize:function w(y,AA,x){var z=this.columnWidths;if(z){z[y]=Math.min(Math.max(z[y],AA),k);}this.imagesCount--;if(this.imagesCount<=0){M.call(this);this.moveTo(this.currentPos,true);}},moveTo:function(AG,z){if(!AG||isNaN(AG.x)||isNaN(AG.y)||!this.tableNode){return ;}var AI=mstrmojo.dom.position(document.body,mstrApp&&mstrApp.isNativeEmbedded),AQ=this.domNode,AB=this.containerNode,AP=this.tableNode,AS=AQ.style,AC=AB.style,AA=AI.x+AI.w,AJ=AI.y+AI.h,AK=AG.x,AH=AG.y,AF=AK+N,AD=AH+U,AL,AO,AT,AE,AN,AM,AR;if(this.link){AT=d.getComputedFontStyle(this.linkNode);AN=Math.ceil(d.measureTextWidth(J(this.link),AT,AT.bonus));AM=Math.max(AP.offsetWidth,AN>t?t:AN,o-g);}else{AM=AP.offsetWidth;}AL=AM+g+a;if(AL>AI.w*0.8){AL=AI.w*0.8;}AR=AL<o?(o-AL)/2:0;AC.paddingLeft=AR+u;if(AL<o){AL=o;}this.wrapperNode.style.width=AL-g-a+u;AC.width=this.wrapperNode.offsetWidth-2*AR+u;AE=this.link?this.linkNode.offsetHeight:0;AO=AP.offsetHeight+g+a+AE;if(AO>AI.h*0.8){AO=AI.h*0.8;}AC.height=AO-g-a-AE+u;AL+=l;AO+=l;if(AF+AL<=AA&&AD+AO>AJ){AD=AJ-AO;}else{if(AF+AL>AA&&AD+AO<=AJ){AF=AA-AL;}else{if(AF+AL>AA&&AD+AO>AJ){AF=AA-AL;if(AH>=AO+l){AD=AH-AO-l;}else{if(AH>AJ-AH){AD=l;AC.height=AH-2*l-g-a-AE+u;}else{AC.height=AJ-AH-U-l-g-a-AE+u;}}}}}AS.left=AF+u;AS.top=AD+u;this.updateScrollbars();if(AC.overflowY==="scroll"||AC.overflowX==="scroll"){if(!z){AB.scrollLeft=0;AB.scrollTop=0;}}},enterFixMode:D,onmouseenter:function(){this.clearTooltipHandler();},onmouseleave:function(){this.hide(true);},hide:function m(x){if(this.exitFixMode){return ;}var y=this;if(this.isVisible()){if(x){if(!this.hideTooltipHandler){this.hideTooltipHandler=setTimeout(function(){y.toggle(false);},R);}}else{this.clearTooltipHandler();this.toggle(false);}}},onclick:function(){var x=mstrmojo.all[this.visId];if(x){x.goToDocument();this.hide();}},detachListeners:function O(){c.forEach(E,function(x){var y=this.domEventListeners[x];if(y){K.detachEvent(this.domNode,x,y);}},this);this.domEventListeners={};},destroy:function(){S.call(this);this.detachListeners();this.clearTooltipHandler();this._super();}});mstrmojo.NewVisTooltip.enterFixMode=D;if(K.isTouchOptimizationEnabled()){mstrmojo.mixin(mstrmojo.mobile._MobileVisTooltip,mstrmojo.NewVisTooltip.prototype);}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.ui.editors.controls.ContextualLink","mstrmojo.util.PlatformHelper","mstrmojo.EnumRWUnitType");var D=mstrmojo.hash,J=mstrmojo.array,B=mstrmojo.func,F=mstrmojo.ui.editors.controls.ContextualLink.LINK_TYPE,M=mstrmojo.ui.editors.controls.ContextualLink.shouldHideLinkingContext,G=mstrmojo.util.PlatformHelper;mstrmojo._HasContextualLink=mstrmojo.provide("mstrmojo._HasContextualLink",{isContextualLinkDisabledInNewTab:function(){return G.isContextualLinkDisabledMode()&&D.walk("model.data.doslinkinfo.onw",this)===1;},genGotoTargetMenuConfig:function E(Q,P){var N=this.getLinkType(),O,R;if(N===undefined||mstrApp.isNativeEmbedded||this.shouldDisableCrossProjectLink()||this.isContextualLinkDisabledInNewTab()){return{};}if(N===F.ANOTHER_DOSSIER&&(P?P():true)&&!(mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode())){if(this.isLinkBlockByAsobs()){return{};}R=mstrmojo.desc(16991,"Go to Dashboard: #").replace("#",this.getTargetDossierName());O=this.goToDocument.bind(this,true);}else{if(N===F.THIS_DOSSIER&&this.isLinkedFilterEnabled&&this.isLinkedFilterEnabled()&&(Q?Q():true)){R=mstrmojo.desc(16992,"Go to Page: #").replace("#",this.getTargetPageName());O=this.handleContextMenuSelectionData.bind(this,true);}}return{menuText:R,handler:O};},isLinkBlockByAsobs:function H(){var O=["GraphMatrixVisualizationStyle","VIHeatMapVisualizationStyle","NetworkVisualizationStyle","NewGraphMatrixVisualizationStyle","MapboxVisualizationStyle","GoogleMapVisualizationStyle",];var N=D.walk("defn.vis.vn",this);if(this.defn.t===mstrmojo.EnumRWUnitType.GRID||J.includes(O,N)){return false;}return this.checkLinkInfoBlockedByAsobs();},genGotoOneClickConfig:function C(R,P){var N=this.getLinkType(),O,S,Q;if(N===undefined||this.shouldDisableCrossProjectLink()){return{};}if(N===F.ANOTHER_DOSSIER&&(P?P():true)&&!(mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode())){S=mstrmojo.desc(16991,"Go to Dashboard: #").replace("#",this.getTargetDossierName());Q=this.getLinkTooltip();O=this.goToDocument.bind(this,false);}else{if(N===F.THIS_DOSSIER&&this.isLinkedFilterEnabled&&this.isLinkedFilterEnabled()&&(R?R():true)){S=mstrmojo.desc(16992,"Go to Page: #").replace("#",this.getTargetPageName());O=this.handleContextMenuSelectionData.bind(this,true);}}return{menuText:S,tooltip:Q,handler:O};},shouldDisableCrossProjectLink:function(){var N=D.walk("model.data.doslinkinfo",this);return M(N,mstrApp.projectId);},hasLink:function(O){if(this.isContextualLinkDisabledInNewTab()){return false;}var N=this.getLinkType();if(this.shouldDisableCrossProjectLink()){return false;}if(O===undefined){return N!==undefined;}return N===O;},hasDossierLink:function(){return this.hasLink(1);},hasSelectTarget:function(){return this.hasLink(0);},hasLinkTooltip:function(){return this.hasDossierLink()&&D.walk("model.data.doslinkinfo.dtxt",this);},hasAsobsLink:function(){return this.hasDossierLink()&&D.walk("model.data.doslinkinfo.asobs.length",this)>0;},getAsobsLimitedObjectIds:function(){if(!this.hasAsobsLink()){return[];}var N=this.model.docModel,O=N&&N.datasets||{},P=[];J.forEach(this.model.data.doslinkinfo.asobs,function(R){var Q=O[R.id];if(Q){J.forEach(Q.att.concat(Q.mx),function(S){P.push(S.did);});}else{P.push(R.id);}});return P;},getLinkType:function(){var O=this,Q=O.selectorControl||O.findSelectorControl(),N=O.model.data.doslinkinfo,P=B.safeCall("parent.isTargetOnlyIfw",O)(Q);if((!D.isEmpty(Q)&&!P)||O.hasAssociatedNodes()){return F.THIS_DOSSIER;}if(!D.isEmpty(N)&&N.tnm&&(N.isAvailable!==false)&&!mstrApp.isExpress&&!(mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode())){return F.ANOTHER_DOSSIER;}return undefined;},getPageName:function(P,O){var N="";J.forEach(P,function(Q){J.forEach(Q.pages,function(R){var S=R.key.split("--")[0];if(S===O){N=R.name;return false;}});if(N!==""){return false;}});return N;},getTargetPageName:function(){var Q=this,N=Q.model.docModel,R=Q.selectorControl||Q.findSelectorControl(),O=R&&R.navPage,P;if(N&&O){P=N.getLayoutUnitDefn(O,N.getLayoutKeyByUnitKey(O));}return P?P.ttl:this.getPageName(N.toc,O);},getTargetDossierName:function(){return D.walk("model.data.doslinkinfo.tnm",this)||"";},getLinkTooltip:function L(){return D.walk("model.data.doslinkinfo.dtxt",this);},getSelection4Linking:function(O){var U=O?"getContextMenuSelectionHash":"getSelectionHash",R=O?this.getContextMenuSelectionType():undefined;if(this.isVisMap){var N=this,P=this.mapViewer,Q=[],S;if(P&&typeof P.forEachGraphicLayer==="function"){P.forEachGraphicLayer(function(W){S=W[U]();R=O?B.safeCall("getContextMenuSelectionType",W)():undefined;Q=Q.concat(N.getSelectionDataTree(S,R,true,W));});}return Q;}return this.getSelectionDataTree(this[U](),R,true);},goToDocument:function(N){var P=this,O=this.getSelection4Linking(N);P.model.getDossierInfo(O,false,function(Q){P.controller.onLink(P,Q);});},checkLinkInfoBlockedByAsobs:function K(N,Q){var S=this.getAsobsLimitedObjectIds();if(S.length===0){return false;}if(!Q&&this.defn&&this.defn.t!==mstrmojo.EnumRWUnitType.GRID){var R=this.getSharedMetricIds();if(R.length>0&&J.intersection(R,S).length>0){return false;}}if(N&&N.length>0){if(J.intersection(N,S).length>0){return false;}return true;}var P=this.model.docModel,U=!this.isVisMap?this.model.data.gsi:J.map(this.getNodeKeys(),function(W){return P.getNodeDataByKey(W).data.gsi;}).filter(Boolean);if(!J.isArray(U)){U=[U];}var O=J.map(U.reduce(function(W,X){return W.concat(X.rows,X.cols,X.mx);},[]),function(W){return W.did;}).filter(function(W){return W&&W!=="-1";});if(J.intersection(O,S).length>0){return false;}return true;},getSharedMetricIds:function I(){var N=this.model.data.dz;if(!N){return[];}var Q=[],P=this.getNotSharedMetricDropzoneNames(),O=P.reduce(function(S,R){var U=N[R];if(U&&U.TemplateMetric){S=S.concat(J.map(U.TemplateMetric,function(W){return W.id;}));}return S;},[]);D.forEach(N,function(S,R){if(P.indexOf(R)===-1){Q=Q.concat(J.map(S.TemplateMetric||[],function(U){return U.id;}));}});return J.difference(Q,O);},getNotSharedMetricDropzoneNames:function A(){return["YAxis","XAxis"];}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabModel","mstrmojo.vi.ui.rw.xtab._SupportXtabThresholds","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.models.template.DataInterface","mstrmojo.vi.models.EnumDragSources","mstrmojo.array","mstrmojo.expr","mstrmojo.func","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.fe.FilterUtils","mstrmojo.vi.enums.EnumVisFilterType","mstrmojo.models.FormatModel","mstrmojo.models.ParametersInterface","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.ui.editors.controls.ContextualLink","mstrmojo.NumberFormat","mstrmojo.vi.models._DocXtabModelShared");var S=mstrmojo.hash,N=mstrmojo.array,d=mstrmojo.array,A=mstrmojo.models.FormatModel,O=mstrmojo.models.ParametersInterface,E=A.ENUM_PROPERTY_NAMES,P=mstrmojo.vi.enums.EnumVisFilterType;var a=4;var X=3;var Q=[E.GRID_VERTICAL_PADDING,E.GRID_HORIZONTAL_PADDING],h={},g="tp",D="lp";h[E.GRID_VERTICAL_PADDING]=g;h[E.GRID_HORIZONTAL_PADDING]=D;function J(i){return i.docModel.controller.cmdMgr;}mstrmojo.vi.models.DocXtabModel=mstrmojo.declare(mstrmojo.DocXtabModel,[mstrmojo.vi.ui._CanDropFromSchema,mstrmojo.vi.ui.rw.xtab._SupportXtabThresholds,mstrmojo.vi.models._DocXtabModelShared],{scriptClass:"mstrmojo.vi.models.DocXtabModel",sort:function e(k,l){var i=this;J(this).execute({execute:function j(){var o=i.xtab,n=o.k,q=i.docModel.getDataService(),m=[{act:"sort",sorts:k.sorts,nodeKey:n,subTotalsPos:k.stp||i.getSubTotalsPos(),stt:k.stt||-1}],p=[];p.push(q.getUpdateTemplateAction(n,m,null,n));this.submit(p,l);}});},customSort:function Y(m,n,j){var k=this,i=S.clone(m);J(this).execute({execute:function l(){var o=k.xtab.k;this.submit(k.docModel.getDataService().getUpdateTemplateAction(o,i),n,j);}});},getZoneFormatAction:function Z(u,x,q,m){var o=m&&m.skipSubtotals,k=m&&m.isSubtotalFormat,t=m&&m.isSubtotalUseGridFormatting,s=[],l=[],p="h",i="g",w="sh",n="sg",j=function(y,z){l.push({axis:y,regions:z});};if(k){switch(u){case"ch":j(2,[w]);break;case"rh":j(1,[w]);break;case"va":j(1,[n]);j(2,[n]);break;}}else{switch(u){case"ch":j(1,[p]);j(2,!o&&t?[p,i,w]:[p,i]);break;case"rh":j(1,!o&&t?[i,w]:[i]);break;case"va":this.data.gsi.mx.forEach(function(y){s.push({unitId:y.did,unitType:4,regions:[i]});});if(!o&&t){j(1,[n]);j(2,[n]);}break;}}return{act:"formatGridZone",nodeKey:q,props:x,units:s,axis:l};},getAddTemplateUnitAction:function R(m,n,k,i){var l=this._super(m,n,k,i),j=this.getPartialRetrievalKeys(this,l);if(j.length>0){l.partialRetrieval={nodes:j};}return l;},getRemoveTemplateUnitAction:function F(k){var j=this._super(k),i=this.getPartialRetrievalKeys(this,j);if(k.axis!==undefined&&k.unitPos!==undefined){j.axis=k.axis;j.unitPos=k.unitPos;}if(i.length>0){j.partialRetrieval={nodes:i};}return j;},canShowCellMenu:function W(i){return true;},getKeepOnlyActionsForAssociatedNodes:function L(j,p,l){var i=this.docModel,o=[i.getKeepOnlyOrExcludeAction(this.xtab.k,j,this.xtab.k)],k=!!l?l:this.xtab,n=!mstrApp.isInVFConfigMode?(k.getAssociatedNodes&&k.getAssociatedNodes()||[]):[];p=mstrmojo.func.wrapMethods(p,{success:function m(){d.forEach(n,function(s){var q=i.getPanel().getUnitByKey(s.k);if(q&&q.boxContent){q.boxContent.raiseEvent({name:"regenerateToolbar"});}});}});d.forEach(n,function(q){o.push(i.getKeepOnlyOrExcludeAction(q.k,j));});return{actions:o,callback:p};},addClearAdvQualActions:function b(t,s,q,k){var n=(s&&s.k)||this.xtab.k,m=t.gridData||t.model.data||t.node.data,i=m.vfexpr,o=m.vlexpr,j=k.indexOf(P.DRILLING),p=this._clearAdvQualActionsHelper(t,s,q,j),l=p(o,i,n);if(j>-1&&l){k.splice(j,1);}return q;},addClearDrillingActions:function U(l,n,k){var i=(n&&n.k)||this.xtab.k,m=l.gridData||l.model.data||l.node.data,o=m.vfexpr,j=this._clearDrillingActionsHelper(l,k);j(o,i);return k;},getObjectInfo:function M(q){var o=this.xtab.zonesModel,k=(this.docModel||{}).datasets||{},s=null,j=function(t){if(O.isObjectParameterItem(t)&&t.selections){const i=N.filterOne(t.selections,function(u){return u.id===q;});if(i){s=i;return true;}}else{if(t.did===q){s=t;return true;}}};if(o){(o.getDropZones().zones||[]).some(function(i){return !!i.items.some(function(t){if(!t.cols){return j(t);}else{return !!t.cols.some(j);}});});}else{s=this._super(q);}if(!s){for(var n in k){var l=k[n]||{},p=(l.att||[]).concat(l.mx||[]);for(var m=0;m<p.length;m++){if(p[m].did===q){return p[m];}}}}return s;},hasSameRecursiveAttributeGroup:function B(m,k,j){var i=this.docModel,o=m.did,l=i.getDEObject(o),n=(k||this.data).gsi||{};if(this.isRecursiveAttribute(o)){return d.filterOne((n.rows||[]).concat(n.cols||[]),function(s){var p=s.did,q=i.getDEObject(p);return d.find(d.ensureArray(j),"did",p)<0&&(p!==o)&&(l?l.attId:o)===(q?q.attId:p);});}return false;},supportsViewFilterActions:function c(i){var j=this.getObjectInfo(i);return j&&!j.de&&(j.t!==1)&&(j.t!==47||j.st===12033);},getCurrentUnitAxisAndPosition:function I(i){return new mstrmojo.models.template.DataInterface(this.data).getUnitById(i);},getNumberFormatData:function H(){var i=this,j=i.data;return(j.gnf||[]).concat(j.gnfu);},getNumberFormatEditorAcceptCallback:function G(j){var i=this,k=i.xtab;return function(p){var n=i.docModel.getNumberFormatAction(j.did,j.t,p),m=!!n.partialRetrieval,o,l,t=[];if(m){o=mstrmojo.DocDataService.REQUEST_DEFN_DATA;l={treesToRender:3};}var q=k.k,s=k.controller.dataService();t.push(s.getUpdateTemplateAction(q,n));k.controller.submitUndoRedoTemplateWithCallback(k,t,i.docModel.controller._getXtabCallback(k,undefined,m),o,l);};},getAttributeFormsInTemplate:function(k){var i=this.data.gts,j=[];(i.row||[]).concat(i.col||[]).forEach(function(l){if(l.id===k&&l.fs){j=j.concat(l.fs);}});return j;},getValuesDefaultFormatGridZoneAction:function C(p,m){var k={},y,w=this.xtab,n=w&&w.gridInfo,j=n&&n.fmts,o=[],u,l={};S.forEach(p,function(z){o.push({unitId:z.did,unitType:a,regions:["g"]});});if(j){var q=j.va,t=j.rh,i=j.ch;S.forEach(j.va,function(AA,z){u=A.getFormatPropertyInfo(z);if(u&&u.ps!==A.ENUM_PROPERTY_SETS.FORMATTING_NUMBER){k=S.mergeHashes(k,A.getFormatUpdate(z,(u.pt==X)?AA:A.decodeValue(z,AA)));}});var x=q[g]?q:(t[g]?t:i),s;N.forEach(Q,function(z){u=A.getFormatPropertyInfo(z);if(u){s=x[h[z]];k=S.mergeHashes(k,A.getFormatUpdate(z,A.decodeValue(z,s)));}});}l.skipSubtotals=m;y=w.model.getZoneFormatAction.call(w.model,"va",k,w.k,l);y.units=[].concat(o);return y;},getRAExpandAction:function f(j,o,l){var n=this.getCellTitleInfo(j).title.id,m=this.docModel.getDEObject(n),i={act:"raExpandCollapse",sliceId:o,depth:j.dpt,ordinal:(j.o!==undefined)?j.o:j._ei,id:j._e&&j._e.id,isExpand:l?1:(j.epd?0:1)},k=this.getPartialRetrievalKeys(this);if(l){i.expand_dsts=1;}i[m?"deId":"attId"]=n;if(k.length>0){i.partialRetrieval={nodes:k};}return i;},getRAExpandAllAction:function K(m,l){var k=this.docModel.getDEObject(m),i={act:"raExpandCollapseAll",isExpandAll:l?1:0},j=this.getPartialRetrievalKeys(this);i[k?"deId":"attId"]=m;if(j.length>0){i.partialRetrieval={nodes:j};}return i;},});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.desc","mstrmojo.Container","mstrmojo.vi.ui.AMSelectorCandidatePicker","mstrmojo.vi.ui.DDICCandidatePicker","mstrmojo.vi.enums.EnumFeatures","mstrmojo.ui.Pulldown");var I=mstrmojo.css,A=mstrmojo.hash,L=mstrmojo.vi.enums.EnumFeatures,F=mstrmojo.dom;var C={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-A tgt-tt",topOffset:15,leftOffset:-15};mstrmojo.vi.ui.TargetMask=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.TargetMask",markupString:'<div class="mstrmojo-hasTgt" mstrAttach:contextmenu><div class="tgt"><div class="icon-placeholder"></div>'+mstrmojo.desc(4787,"Target")+'</div><div class="src"><div class="icon-placeholder"></div>'+mstrmojo.desc(4283,"Source")+"</div></div>",markupSlots:{visSelectorModeNodeParent:function(){return this.domNode.firstChild;}},useRichTooltip:true,isDynamicTooltip:true,tooltipContent:mstrmojo.desc(15275,"This container cannot be selected as target"),allowFilters:false,source:null,init:function M(N){if(this._super){this._super(N);}},setMaskClass:function(W,U){var P=this.parent,N=P instanceof mstrmojo.vi.ui.rw.PanelStackBox,R=P instanceof mstrmojo.vi.ui.rw.VizBox,O=P instanceof mstrmojo.vi.ui.rw.FilterBox,S=mstrmojo.all[W],Q=A.walk("mstrmojo.vi.ui.rw.SurveyBox")&&(P instanceof mstrmojo.vi.ui.rw.SurveyBox);if(this.domNode){if(P.id===W){I.addClass(this.domNode,"sourced");}else{if(!N&&!(O&&this.allowFilters)&&!Q&&(!R||A.walk("boxContent.disableDataFunctionality",P))){I.addClass(this.domNode,"disabled");}else{if(U){I.addClass(this.domNode,U);}else{I.addClass(P.domNode,"targeted");}}}if(P.id!==W&&S instanceof mstrmojo.vi.ui.rw.VizBox){I.toggleClass(this.domNode.firstChild,"isVizTarget",true);}else{I.toggleClass(this.domNode.firstChild,"isVizTarget",false);}this.domNode.style.display="block";return true;}return false;},clearDisableClass:function(){I.removeClass(this.domNode,"disabled");},clearMaskClass:function(){var N=this.parent;I.removeClass(this.domNode,"sourced");I.removeClass(this.domNode,"disabled");I.removeClass(N.domNode,"targeted");this.domNode.style.display="none";},moveTooltip:function H(O,R){var Q=this,N={x:O.clientX-10,y:O.y},P=Q.AMSelectorSpecificTooltipConfig;this.richTooltip={posType:C.posType,cssClass:C.cssClass,content:this.tooltipContent,top:O.clientY+C.topOffset,left:O.clientX+C.leftOffset};if(P){this.richTooltip.cssClass=P.cssClass;this.richTooltip.content=P.tooltipContent;this.richTooltip.top=O.clientY+P.topOffset;this.richTooltip.left=O.clientX+P.leftOffset;this.richTooltip.updatePosition=function(){P.updatePosition.call(this,N,N,P.cssClassPrefix);};this.tooltipOpenDelay=P.tooltipOpenDelay;}this._super(O,R);},oncontextmenu:function(O,N){F.preventDefault(N,O);},addCandidatePicker:function K(O,N){this.addChildren([{scriptClass:"mstrmojo.vi.ui.AMSelectorCandidatePicker",alias:"candidatePicker",slot:"domNode",selector:O,viUnit:N}]);},removeCandidatePicker:function D(){if(this.candidatePicker){this.removeChildren(this.candidatePicker);}},addDDICCandidatePicker:function E(O,N){this.addChildren([{scriptClass:"mstrmojo.vi.ui.DDICCandidatePicker",alias:"ddicCandidatePicker",slot:"domNode",selector:O,viUnit:N}]);},addVisAsFilterModelSelector:function J(W,P,U){var R=this.parent,N=R&&R.isFormPanel,S=this,Q=R.model,O=R.parent;this.source=W;this.addChildren({scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" mstrAttach:click></div>',alias:"visSelectorModeNode",slot:"visSelectorModeNodeParent",cssClass:"pulldown-container",cssDisplay:"",onclick:function(X){X.cancel();},children:[N?null:{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-filter-type",cssDisplay:"inline-block",alias:"filterType",isHostedWithin:true,enabled:!U,selectedIndex:P?0:1,items:[{n:mstrmojo.desc(11953,"Highlight"),v:false},{n:mstrmojo.desc(8689,"Filter"),v:true}],onitemSelected:function(Z){R.setHighlightInTargetSelectionMode(!Z.v);var b=mstrmojo.func.safeCall("parent.parent.getTgtSelections",S)();mstrmojo.func.safeCall("notify",b)();var a;if(S.currentPanelKey){var X=Q.getNodeDataByKey(S.currentPanelKey);if(X&&X.id&&mstrmojo.all[X.id]){a=mstrmojo.all[X.id];}}else{a=Q.getVizContentPanel();}if(a&&!U&&R&&R instanceof mstrmojo.vi.ui.rw.VizBox&&mstrApp.serverSupportCheck(L.SUPPORT_VIZ_TARGET_DDIC)){if(Z.v){var Y=Q&&Q.getDDICCandidates(R.k),c=S&&S.ddicCandidatePicker;if(W&&Y&&Y.length>0&&!c&&(S.addDDICCandidatePicker instanceof Function)){S.addDDICCandidatePicker(W,R);}}else{if(!Z.v&&S.ddicCandidatePicker){S.removeDDICCandidatePicker();}}}if(!mstrApp.supportFeature(L.SUPPORT_SELECTION_MODE_PER_TARGET)){O.syncVisAsFilterHelper(Z.v,R);}}}]});},removeDDICCandidatePicker:function B(){if(this.ddicCandidatePicker){this.removeChildren(this.ddicCandidatePicker);}},removeVisAsFilterModelSelector:function G(){if(this.visSelectorModeNode){this.removeChildren(this.visSelectorModeNode);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.GraphMatrixHelper","mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.viz.EnumVisualizationTemplates","mstrmojo.vi.util.ThresholdUtils","mstrmojo.gm.GMEnums","mstrmojo.gmaps.MapEnums","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.gmaps._AreaMapHelper","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.template.DataInterface","mstrmojo.ag.models.template.AgDataInterface","mstrmojo.models.ParametersInterface","mstrmojo.DocDataService","mstrmojo.expr");var e=mstrmojo,f=e.array,s=e.func,C=e.vi.viz,Q=e.gm.EnumGMZoneIds,d=C.EnumVisualizationTemplates,P=e.gmaps,D=mstrmojo.models.ParametersInterface,h=C.GraphMatrixHelper,g=C.EnumDSSDropZones,b=C.KnownVisualizations,M=e.vi.util.ThresholdUtils,o=e.chart.model.enums.EnumDSSObjectType,k=P.EnumGraphicType,K=P.EnumPropertyType,B=P.EnumDefaultShapeFormatStyle,x=e.gm.EnumABLDirection,t=C.MapHelper,w=e.vi.ui.DatasetUnitMenuUtils,H=P.CustomShapeId,U=mstrmojo.expr,c=U.TP,j=mstrmojo.vi.viz.EnumDSSDropZones,p=mstrmojo.models.template.DataInterface,u=mstrmojo.ag.models.template.AgDataInterface,n=mstrmojo.DocDataService.EnumTreesToRender,O="-1";function W(y){return y&&y.getHostModel&&y.getHostModel();}function X(y){if(!y){return false;}return y.t===o.DssTypeMetric||D.isMetricParameterItem(y);}function S(z){var y=false;if(!X(z)){f.forEach(z.fs||[],function(AA){if(AA.ftr||AA.bftp===1||AA.bftp===8||AA.bftp===9){y=true;return false;}});}return y;}function F(z,AB){var y=z.getHost(),AA=y.GMController;if(AA){switch(AB){case"bp":return AA.isBoxPlot;case"wf":return AA.isWaterfall;case"hg":return AA.isHistogram;default:break;}}return false;}function q(y){if(!y||!y.gsi){return{};}const z=y.gsi;if(z.parameterLayout){return z.parameterLayout;}return z;}function J(AA){if(!AA){return ;}const z=AA.dz;const y=AA.dzParameterLayout;if(y){y.visProp=z&&z.visProp;return y;}return z;}function I(Ac,AL,Ay,AG,AS){var AQ=J(Ay),AW=q(Ay),Aq=[],Aw=false,AB=false,Af=false,AI=AG.getHost(),An=AI.GMController,z=parseInt(An.property.hGetPropValue("visType")),AZ=z===d.GRAPHMATRIXGRIDCHART,AF=z===d.GRAPHCOMBINATIONBARAREADUALAXIS,Ap=z===d.VERTICALDUALAXISLINECHART||z===d.HORIZONTALDUALAXISLINECHART,AX=AI.getChartStyle()==="NewGraphMatrixVisualizationStyle",AN=F(AG,"bp"),Au=F(AG,"wf"),Ak=F(AG,"hg"),AM=An.isDualAxis,AJ=["Reserved","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy"],Ag=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALBARAUTOMATIC:case d.GRAPHMATRIXHORIZONTALBARAUTOMATIC:return true;default:return false;}},Ah=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALBARCLUSTERED:case d.GRAPHMATRIXVERTICALBARSTACKED:case d.GRAPHMATRIXVERTICALBARPERCENT:case d.GRAPHMATRIXHORIZONTALBARCLUSTERED:case d.GRAPHMATRIXHORIZONTALBARSTACKED:case d.GRAPHMATRIXHORIZONTALBARPERCENT:case d.GRAPHMATRIXVERTICALAREASTACKED:case d.GRAPHMATRIXHORIZONTALAREASTACKED:case d.GRAPHMATRIXVERTICALAREACLUSTERED:case d.GRAPHMATRIXHORIZONTALAREACLUSTERED:return true;default:return false;}},AO=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALBARCLUSTERED:case d.GRAPHMATRIXVERTICALBARSTACKED:case d.GRAPHMATRIXVERTICALBARPERCENT:case d.GRAPHMATRIXHORIZONTALBARCLUSTERED:case d.GRAPHMATRIXHORIZONTALBARSTACKED:case d.GRAPHMATRIXHORIZONTALBARPERCENT:case d.VERTICALSYNCHRONIZEDAXISBAR:case d.HORIZONTALSYNCHRONIZEDAXISBAR:case d.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:case d.GRAPHMATRIXVERTICALLINEAUTOMATIC:case d.GRAPHMATRIXHORIZONTALLINEAUTOMATIC:case d.VERTICALDUALAXISLINECHART:case d.HORIZONTALDUALAXISLINECHART:case d.GRAPHMATRIXVERTICALAREASTACKED:case d.GRAPHMATRIXHORIZONTALAREASTACKED:case d.GRAPHMATRIXVERTICALAREACLUSTERED:case d.GRAPHMATRIXHORIZONTALAREACLUSTERED:return true;default:return false;}},AT=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALBARCLUSTERED:case d.GRAPHMATRIXVERTICALBARSTACKED:case d.GRAPHMATRIXVERTICALBARPERCENT:case d.VERTICALSYNCHRONIZEDAXISBAR:case d.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:case d.GRAPHMATRIXVERTICALBARAUTOMATIC:return true;default:return false;}},AC=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXHORIZONTALBARCLUSTERED:case d.GRAPHMATRIXHORIZONTALBARSTACKED:case d.GRAPHMATRIXHORIZONTALBARPERCENT:case d.HORIZONTALSYNCHRONIZEDAXISBAR:case d.GRAPHMATRIXHORIZONTALBARAUTOMATIC:return true;default:return false;}},Az=function(A1){return AT(A1)||AC(A1);},Ae=function(A1){switch(parseInt(A1.visType)){case d.HORIZONTALSYNCHRONIZEDAXISBAR:case d.VERTICALSYNCHRONIZEDAXISBAR:case d.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:return true;default:return false;}},As=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALLINEAUTOMATIC:case d.GRAPHMATRIXHORIZONTALLINEAUTOMATIC:case d.VERTICALDUALAXISLINECHART:case d.HORIZONTALDUALAXISLINECHART:return true;default:return false;}},AK=function(A1){switch(parseInt(A1.visType)){case d.GRAPHMATRIXVERTICALAREACLUSTERED:case d.GRAPHMATRIXVERTICALAREASTACKED:case d.GRAPHMATRIXHORIZONTALAREACLUSTERED:case d.GRAPHMATRIXHORIZONTALAREASTACKED:return true;default:return false;}},Ad=function(A1){return Az(A1)||As(A1)||AK(A1);},AD=function(A4){var A3=parseInt(A4.visType),A1=!A4.breakByObjects.length&&A4.metricsDropZone!=="BreakBy",A2="";switch(A3){case d.GRAPHMATRIXVERTICALBARCLUSTERED:case d.GRAPHMATRIXHORIZONTALBARCLUSTERED:case d.VERTICALCLUSTEREDSYNCHRONIZEDAXISBAR:case d.GRAPHMATRIXVERTICALAREACLUSTERED:case d.GRAPHMATRIXHORIZONTALAREACLUSTERED:A2=h.PROP_SUBTYPE_CLUSTERED;break;case d.GRAPHMATRIXVERTICALBARSTACKED:case d.GRAPHMATRIXHORIZONTALBARSTACKED:A2=h.PROP_SUBTYPE_STACKED;break;case d.GRAPHMATRIXVERTICALAREASTACKED:case d.GRAPHMATRIXHORIZONTALAREASTACKED:A2=(A4.subtype===h.PROP_SUBTYPE_PERCENT)?h.PROP_SUBTYPE_PERCENT:h.PROP_SUBTYPE_STACKED;break;case d.GRAPHMATRIXVERTICALAREAPERCENT:case d.GRAPHMATRIXHORIZONTALAREAPERCENT:A2=A1?h.PROP_SUBTYPE_STACKED:h.PROP_SUBTYPE_PERCENT;break;case d.GRAPHMATRIXVERTICALBARPERCENT:case d.GRAPHMATRIXHORIZONTALBARPERCENT:A2=h.PROP_SUBTYPE_PERCENT;break;case d.GRAPHMATRIXVERTICALBARAUTOMATIC:case d.GRAPHMATRIXHORIZONTALBARAUTOMATIC:A2=h.PROP_SUBTYPE_AUTOMATIC;break;case d.VERTICALSYNCHRONIZEDAXISBAR:case d.HORIZONTALSYNCHRONIZEDAXISBAR:A2=(A4.subtype!=="Automatic"&&A4.subtype)||h.PROP_SUBTYPE_CLUSTERED;break;}return A2;},y=function(A1){return A1.shape==="Pie"||A1.shape==="Ring";},A0=function(){var A1=AG.getHost();return A1&&A1.GMController&&A1.GMController.isBubbleOrScatter();},Av=function(A1,A9,A3,A5){const A2=A5||Ac;const A6=!!A2.paraId;if(D.isMetricParameterItem(A2)&&A1===g.ColorBy){return ;}const A4=A6?A2.paraId:A2.did;const BA=A6?o.DssTypeParameter:A2.t;Aq.push({ax:A3||0,act:"addDropZoneUnit",zoneId:A1,datasetId:AL,unitId:A4,unitType:BA,unitPos:A9||0});Aw=true;Af=(A1===g.ColorBy);AB=(A1===g.AdditionalMetrics);var A8=AJ[A1],A7=X(A2)?"TemplateMetric":"TemplateUnit";if(AQ[A8]){if(!AQ[A8][A7]){AQ[A8][A7]=[];}A2.ax=A3||0;AQ[A8][A7].push(A2);}},AA=function(A1,A2){if(A2){Aq.push({act:"removeDropZoneUnit",zoneId:A1,unitId:A2.did,unitType:A2.t});}},Ao=function(A1){Aq.push({act:"addDropZoneUnit",zoneId:A1,unitId:"00000000000000000000000000000000",unitType:0});},AU=new C.GraphMatrixHelper({data:Ay}),AH=function(A1){if(!AU.shape){AU.shape=A1;AS=true;}},AP=function(A1){if(!AU.subtype||AU.subtype!==A1){AU.subtype=A1;if(!AS){delete AQ.visProp.fmt.LegendVisibleness;delete AQ.visProp.fmt.ShwAllLbl;AS=true;}}},At=function(A8,A1){var A6=(A1===Q.XAXIS),A7=A6?A8.rowObjects:A8.columnObjects,A5=A6?A8.columnObjects:A8.rowObjects,A4=A6?A8.yAxisObjects.slice(1):A8.xAxisObjects.slice(1),A3=A4.concat(A5).concat(A7),A2=A3[A3.length-1];if(A2){Av(g.BreakBy,undefined,undefined,A2);if(!A8.exists(Ac,"colorByObjects")&&!AG.isMetricZone(g.ColorBy)){Av(g.ColorBy,undefined,undefined,A2);}}},Aj=function(A3,A1,A2){if(Ad(A3)&&!Ae(A3)&&!Ap){if(AO(A3)&&!A3.breakByObjects.length){Ao(g.BreakBy);}else{Ao(A1);}}else{Ao(A2);}},AR=function(A4,A9){var BB,BA=AJ[A4],A8=AQ[BA]||[],A5=A8.TemplateMetric?A8.TemplateMetric.length:0,A7=!AU.breakByObjects.length,BE=AG.getHost(),BC=BE.GMController,A1,BD=!AF,A3=BC.getChartInfo(),A2={dndGM:false};if(AF||AM||Ap){BC.shallWeUseGroupInfo=true;}if(!AU.metricsDropZone){if(A4===g.XAxis&&AU.xAxisObjects.length){Aj(AU,g.Rows,g.Columns);}else{if(A4===g.YAxis&&AU.yAxisObjects.length){Aj(AU,g.Columns,g.Rows);}}}if(BC.shallWeUseGroupInfo){if(Ap||AF){A1=AG.fillGroupInfo(A2,BC.getGroupInfo(),Ac.did,false,false,true);for(var A6=0;A6<A1.length;A6++){if(A1[A6][0]===Ac.did){BB=0;break;}if(A1[A6][1]===Ac.did){BB=1;break;}}}else{A1=!AF||!A5?BC.getGroupInfo():BC.getDummyGroupInfo();if((A3.dirc===x.VERTICAL&&A4===g.YAxis)||(A3.dirc===x.HORIZONTAL&&A4===g.XAxis)){A1=AG.fillGroupInfo(A2,A1,Ac.did,!BB,BD);}}BC.setGroupInfo(A1);AS=true;}Av(A4,A9,BB);if(Ah(AU)&&!A5&&A7){At(AU,A4);}};AU.setData(AQ);AU.setMetricsDropZone(AQ);AU.visType=An.property.hGetPropValue("visType");if(X(Ac)){if(Ak){if(!AU.yAxisObjects.length){Av(g.YAxis);}else{AA(g.YAxis,AU.yAxisObjects[0]);AA(g.AdditionalMetrics,AU.tooltipMetrics.filter(function(A1){return X(A1);})[0]);Av(g.YAxis);}}else{if(AZ){var AV=!AU.colorByObjects.length?g.ColorBy:(!AU.sizeByObjects.length?g.SizeBy:g.AdditionalMetrics);if(AV!==g.AdditionalMetrics||(!AU.exists(Ac,"colorByObjects")&&!AU.exists(Ac,"sizeByObjects"))){Av(AV);if(AV===g.ColorBy&&X(Ac)){var Ai=M.getDefaultGMThreshold(d.GRAPHMATRIXGRIDCHART);M.addThresholds(AI.model,AI,AI.node,Ac,Aq,Ai.colors,Ai.ranges,false);}}}else{if(AU.exists(Ac,"yAxisObjects")||AU.exists(Ac,"xAxisObjects")||AU.exists(Ac,"sizeByObjects")||AU.exists(Ac,"colorByObjects")||AU.exists(Ac,"angleObjects")){var AY=!AU.exists(Ac,"yAxisObjects")&&!AU.exists(Ac,"xAxisObjects");if(AY&&(!AU.yAxisObjects.length||X(AU.yAxisObjects[0]))){AR(g.YAxis);}else{if(AY&&(!AU.xAxisObjects.length||X(AU.xAxisObjects[0]))){AR(g.XAxis);}else{if(!AU.angleObjects.length&&y(AU)){Av(g.Angle);}else{if(!AN&&!AU.colorByObjects.length&&AU.secondaryMetricsDropZone!=="ColorBy"){Av(g.ColorBy);}else{if(!AU.sizeByObjects.length||(!AU.exists(Ac,"sizeByObjects")&&A0())){Av(g.SizeBy);}}}}}}else{if(!AN&&!AU.angleObjects.length&&y(AU)){Av(g.Angle);}else{if((!AU.yAxisObjects.length)&&(!AU.xAxisObjects.length)){if(AC(AU)){Av(g.XAxis);}else{Av(g.YAxis);}if(!AN&&!Au){AH(h.PROP_SHAPE_BAR);}}else{if(AU.yAxisObjects.length&&!AU.xAxisObjects.length){if((AN||Au)&&X(AU.yAxisObjects[0])){AR(g.YAxis);}else{if(!AU.exists(Ac,"yAxisObjects")){if((Ad(AU)||AF)&&X(AU.yAxisObjects[0])){AR(g.YAxis);if(AF&&(AU.metricsDropZone!==h.PROP_COLUMNS&&AU.metricsDropZone!==h.PROP_ROWS&&(!AU.colorByObjects.length||!X(AU.colorByObjects[0])))){Ao(g.ColorBy);}}else{AR(g.XAxis);}if(!AN&&!Au){AH(AG.isMetricZone(g.YAxis)?h.PROP_SHAPE_CIRCLE:h.PROP_SHAPE_BAR);}}}}else{if((!AU.yAxisObjects.length)&&AU.xAxisObjects.length){if((AN||Au)&&X(AU.xAxisObjects[0])){AR(g.XAxis);}else{if(!AU.exists(Ac,"xAxisObjects")){if((Ad(AU)||AF)&&X(AU.xAxisObjects[0])){AR(g.XAxis);if(AF&&(AU.metricsDropZone!==h.PROP_COLUMNS&&AU.metricsDropZone!==h.PROP_ROWS&&(!AU.colorByObjects.length||!X(AU.colorByObjects[0])))){Ao(g.ColorBy);}}else{AR(g.YAxis);}if(!AN&&!Au){AH(AG.isMetricZone(g.XAxis)?h.PROP_SHAPE_CIRCLE:h.PROP_SHAPE_BAR);}}}}else{if(!X(AU.xAxisObjects[0])&&X(AU.yAxisObjects[0])&&!AU.exists(Ac,"yAxisObjects")&&!AU.exists(Ac,"sizeByObjects")&&!AU.exists(Ac,"colorByObjects")){AR(g.YAxis);if(AU.metricsDropZone!==h.PROP_COLUMNS&&AU.metricsDropZone!==h.PROP_ROWS&&(!AU.colorByObjects.length||!X(AU.colorByObjects[0]))){Ao(g.ColorBy);}}else{if(X(AU.xAxisObjects[0])&&!X(AU.yAxisObjects[0])&&!AU.exists(Ac,"xAxisObjects")&&!AU.exists(Ac,"sizeByObjects")&&!AU.exists(Ac,"colorByObjects")){AR(g.XAxis);if(AU.metricsDropZone!==h.PROP_COLUMNS&&AU.metricsDropZone!==h.PROP_ROWS&&(!AU.colorByObjects.length||!X(AU.colorByObjects[0]))){Ao(g.ColorBy);}}else{if(X(AU.xAxisObjects[0])&&X(AU.yAxisObjects[0])&&!AU.exists(Ac,"xAxisObjects")&&!AU.exists(Ac,"yAxisObjects")&&!AU.exists(Ac,"sizeByObjects")&&!AU.exists(Ac,"colorByObjects")){if(!AN&&!AU.colorByObjects.length&&AU.metricsDropZone!==h.PROP_COLORBY){Av(g.ColorBy);}else{if(!AU.sizeByObjects.length&&AU.shape!=="Area"){Av(g.SizeBy);}else{if(AU.xAxisObjects.length===1){AR(g.XAxis);}else{if(AU.yAxisObjects.length===1){AR(g.YAxis);}else{if(AU.sizeByObjects.length===1&&AU.shape!=="Area"){Av(g.SizeBy);}else{if(!AU.exists(Ac,"tooltipMetrics")){Av(g.AdditionalMetrics);}}}}}}}else{if(!AN&&!AU.colorByObjects.length&&AU.metricsDropZone!==h.PROP_COLORBY){Av(g.ColorBy);}else{if(!AU.sizeByObjects.length){Av(g.SizeBy);}else{if(!AU.exists(Ac,"tooltipMetrics")){Av(g.AdditionalMetrics);}}}}}}}}}}if((!AB)&&Aw){if(AU.exists(Ac,"tooltipMetrics")){var Ax=f.find(AU.tooltipMetrics,"did",Ac.did);if(Ax>-1){AU.tooltipMetrics.splice(Ax,1);AA(g.AdditionalMetrics,Ac);}}}}if(Aw&&Af){var AI=AG.getHost(),Ab=AI.getVisType().vt,Ai=M.getDefaultGMThreshold(Ab);M.addThresholds(AI.model,AI,AI.node,Ac,Aq,Ai.colors,Ai.ranges,false);}}}}else{if(Ak){Av(g.XAxis);}else{if((AW.rows||[]).concat(AW.cols||[]).some(function(A1){return A1.did===Ac.did;})){if(AN&&AU.exists(Ac,"breakByObjects")){}else{if(!AU.colorByObjects.length||(!X(AU.colorByObjects[0])&&!AU.exists(Ac,"colorByObjects"))){if(!Ag(AU)&&!AZ){Av(g.ColorBy);}}}}else{if(!AN&&!AU.sliceObjects.length&&y(AU)){Av(g.SliceBy);if(!AU.colorByObjects.length){Av(g.ColorBy);}}else{if((!AU.yAxisObjects.length)&&(!AU.xAxisObjects.length)){if(AC(AU)){Av(g.YAxis);}else{Av(g.XAxis);}if(!AN&&!Au){AH(S(Ac)?h.PROP_SHAPE_LINE:h.PROP_SHAPE_BAR);}}else{if((AU.yAxisObjects.length)&&(!AU.xAxisObjects.length)){if((AN||Au)&&!X(AU.yAxisObjects[0])){Av(g.Rows);}else{if(!X(AU.yAxisObjects[0])&&(Ad(AU)||AF)){Av(g.Rows);}else{Av(g.XAxis);}if(!AN&&!Au){AH(S(Ac)&&AU.yAxisObjects[0]===4?h.PROP_SHAPE_LINE:h.PROP_SHAPE_BAR);}}}else{if((!AU.yAxisObjects.length)&&(AU.xAxisObjects.length)){if((AN||Au)&&!X(AU.xAxisObjects[0])){Av(g.Columns);}else{if(!X(AU.xAxisObjects[0])&&(Ad(AU)||AF)){Av(g.Columns);}else{Av(g.YAxis);}if(!AN&&!Au){AH(S(Ac)&&AU.xAxisObjects[0]===4?h.PROP_SHAPE_LINE:h.PROP_SHAPE_BAR);}}}else{if(!X(AU.xAxisObjects[0])&&X(AU.yAxisObjects[0])){if(AN&&!AU.breakByObjects.length){Av(g.BreakBy);}else{if(!AU.colorByObjects.length&&!AN&&!Ag(AU)&&AU.secondaryMetricsDropZone!=="ColorBy"){Av(g.ColorBy);if(!AU.exists(Ac,"breakByObjects")){Av(g.BreakBy);}}else{if(AO(AU)&&!AU.breakByObjects.length&&AU.metricsDropZone!=="BreakBy"){Av(g.BreakBy);if(!AU.exists(Ac,"colorByObjects")&&!AG.isMetricZone(g.ColorBy)){Av(g.ColorBy);}}else{Av(g.Columns);}}}}else{if(X(AU.xAxisObjects[0])&&!X(AU.yAxisObjects[0])){if((AN||Au)&&!AU.breakByObjects.length){Av(g.BreakBy);}else{if(!AU.colorByObjects.length&&!AN&&!Ag(AU)&&AU.secondaryMetricsDropZone!=="ColorBy"){Av(g.ColorBy);if(!AU.exists(Ac,"breakByObjects")&&AU.metricsDropZone!=="BreakBy"){Av(g.BreakBy);}}else{if(AO(AU)&&!AU.breakByObjects.length&&AU.metricsDropZone!=="BreakBy"){Av(g.BreakBy);if(!AU.exists(Ac,"colorByObjects")&&!AG.isMetricZone(g.ColorBy)){Av(g.ColorBy);}}else{Av(g.Rows);}}}}else{if(!X(AU.xAxisObjects[0])&&!X(AU.yAxisObjects[0])){if(AC(AU)){Av(g.Rows);}else{Av(g.Columns);}}else{if(X(AU.xAxisObjects[0])&&X(AU.yAxisObjects[0])){if((AN||Au)&&!AU.breakByObjects.length){Av(g.BreakBy);}else{if(!AU.colorByObjects.length&&!AN){Av(g.ColorBy);if(!AU.exists(Ac,"breakByObjects")){Av(g.BreakBy);}}else{if(!AU.columnObjects.length&&AU.rowObjects.length&&!X(AU.rowObjects[0])){Av(g.Rows);}else{Av(g.Columns);}}}}}}}}}}}}}}var Am=[];if(Aq.length){if(AX){Av(g.AdditionalMetrics,AG.getTooltipDropzoneIdx(Ac)+1);}var Al=AG.getUpdateTemplateAction(Aq);var AE=AG.docModel,Aa=AE.controller.view.builder,Ar=Aa.getLayoutVIMap(AE.getCurrentLayoutKey()).getComponent(mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK);if(Ar&&!mstrApp.isInVFConfigMode){Al.partialRetrieval.nodes.push(Ar.k);}Am.push(Al);}if(Az(AU)||AK(AU)){AP(AD(AU));}if(AS){Am.push({act:"setProperty",nodeKey:Ay.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(AU.getXml(AI))});}if(Am.length){AG.clearCardinalityFlags();AG.findLargeItemsForAddUnits([Ac]);}return Am;}function G(AB,AD,AC,y){var z,AA=true;function AE(AI,AK,AH){var AJ=y.getZoneModelByZoneId(AI);if(y.getUnitIndexInZone(AJ,AB)===-1&&(!AH||AH(AJ))){var AG=AK?0:AJ.items.length;z=y.getAddItemActions(AJ,[AB],AG,false,AK?AJ.items[AG]:null,AD);AJ.items.push(AB);return false;}return true;}function AF(AG){return AG.items.length===0;}if(!y.isMetric(AB)){AA=AE(g.ColorBy,false,AF);AA=AA&&AE(g.Grouping);if(z){y.clearCardinalityFlags();y.findLargeItemsForAddUnits([AB]);}}else{AA=AE(g.SizeBy,false,AF);AA=AA&&AE(g.ColorBy,false,AF);AA=AA&&AE(g.SizeBy,true,function(AG){return AG.items[0].did===y.getZoneModelByZoneId(g.ColorBy).items[0].did;});AA=AA&&AE(g.AdditionalMetrics,false,function(){return y.getUnitIndexInZone(y.getZoneModelByZoneId(g.SizeBy),AB)===-1&&y.getUnitIndexInZone(y.getZoneModelByZoneId(g.ColorBy),AB)===-1;});}return z?[y.docModel.getDataService().getUpdateTemplateAction(y.getHost().k,z)]:[];}function a(AA,AC,AB,y){var z=null,AD=!y.isMetric(AA)?[g.FromItem,g.ToItem]:[g.ColorBy,g.ItemSize,g.SizeBy];f.forEach(AD,function(AE){var AF=y.getZoneModelByZoneId(AE);if(AF.items.length===0){z=y.getAddItemActions(AF,[AA],0,AC);AF.items.push(AA);return false;}});if(z){y.clearCardinalityFlags();y.findLargeItemsForAddUnits([AA]);return[y.docModel.getDataService().getUpdateTemplateAction(y.getHost().k,z)];}return[];}function i(AG,AC,z,AF){var y=null,AB=!AF.isMetric(AG)?[g.BreakBy,g.Trend]:[g.Metric],AE=AF.getZoneModelByZoneId(g.Trend);if(w.isTimeAttr(AG)&&AE.items.length===0){y=AF.getAddItemActions(AE,[AG],0,AC);AE.items.push(AG);}else{for(var AA=0;AA<AB.length;AA++){var AD=AF.getZoneModelByZoneId(AB[AA]);if(AD.items.length===0){y=AF.getAddItemActions(AD,[AG],0,AC);AD.items.push(AG);break;}}}if(y){AF.clearCardinalityFlags();AF.findLargeItemsForAddUnits([AG]);return[AF.docModel.getDataService().getUpdateTemplateAction(AF.getHost().k,y)];}return[];}function N(AA,AC,AB,y){var z=null,AD=!y.isMetric(AA)?[g.GeoAttribute,g.Layout]:[g.ColorBy,g.SizeBy,g.AdditionalMetrics];f.forEach(AD,function(AE){var AF=y.getZoneModelByZoneId(AE);if((AE===g.AdditionalMetrics||AF.items.length===0)&&y.isZoneAvalaible(AE)){z=y.getAddDropZoneUnitsActions(AF,[AA],0,{datasetId:AC});return false;}});return z?[y.docModel.getDataService().getUpdateTemplateAction(y.getHost().k,z)]:[];}function R(AW,AI,Ai,AB,AA,Ak){var AP=Ai.gsi||{},Ae=AB.getHost(),AC=Ae.fnGetWidget(),Ag=AC&&AC.scriptClass==="mstrmojo.mapbox.VisMapbox",Ab=[],Ac=false,AX=AB.getZoneModelByZoneId(g.GeoAttribute),AK=AB.getZoneModelByZoneId(g.Geometry),AH=AB.getZoneModelByZoneId(g.Latitude),Ad=AB.getZoneModelByZoneId(g.Longitude),AU=AB.getZoneModelByZoneId(g.ColorBy),AF=AB.getZoneModelByZoneId(g.SizeBy),AN=AB.getZoneModelByZoneId(g.Angle),AL=AB.getZoneModelByZoneId(g.SliceBy),Aa=AB.getZoneModelByZoneId(g.AdditionalMetrics),Ah=false,AG=function(At,As,Ao,Au){if(At){var Ar=AB.getCreateDropZonesAction(Ao);Ab=Ab.concat(Ar.length?AB.getUpdateTemplateAction(Ar):[]);Ab.push(AB.getUpdateTemplateAction([{act:"addDropZoneUnit",zoneId:Ao,unitId:At,unitType:As,datasetId:Au}]));if(Ao===g.ColorBy){var Aq=M.getDefaultMapThreshold();Ab.push(AB.getUpdateTemplateAction(M.addThresholds(Ae.model,Ae,Ae.node,AW,undefined,Aq.colors,Aq.ranges)));}}switch(Ao){case g.GeoAttribute:AA.geoAttribute=At;break;case g.Latitude:AA.latitude=At;break;case g.Longitude:AA.longitude=At;break;case g.Geometry:AA.geometry=At;break;case g.SliceBy:if(!AA.slice){AA.slice=[];}AA.slice.push(At);break;case g.ColorBy:AA.colorBy=At;break;case g.SizeBy:AA.sizeBy=At;break;case g.Angle:AA.angle=At;break;case g.AdditionalMetrics:AA.tooltip.push(At);break;}var Ap=AB.getZoneModelByZoneId(Ao);if(Ap&&f.isArray(Ap.items)){Ap.items.push(AW);}Ah=true;},AM=function(Aq,Ap,Ao,Ar){AG(Aq,Ap,Ao,Ar);if(Ag&&t.shouldSyncItemToTooltipZone(Aq,Ao,AA&&AA.tooltip)){AG(Aq,Ap,g.AdditionalMetrics,Ar);}},AO=function(Ar,Aq,Ao){if(Ar){Ab.push(AB.getUpdateTemplateAction([{act:"removeDropZoneUnit",zoneId:Ao,unitId:Ar,unitType:Aq}]));}switch(Ao){case g.geoAttribute:AA.geoAttribute="";break;case g.Latitude:AA.latitude="";break;case g.Longitude:AA.longitude="";break;case g.Geometry:AA.geometry="";break;case g.SliceBy:var Ap=AA.slice.indexOf(Ar);if(Ap!==-1){AA.slice(Ap,1);}break;case g.Angle:AA.angle="";break;case g.ColorBy:AA.colorBy="";break;case g.SizeBy:AA.sizeBy="";break;case g.AdditionalMetrics:AA.tooltip=f.filter(AA.tooltip,function(As){return As!==Ar;},{max:AA.tooltip.length});break;}},y=function(Ao,Ap){Ab.push(AB.getUpdateTemplateAction({act:"addForm",unitId:Ao,attFormId:Ap,unitPos:0}));};AA.setWidget(Ae);f.forEach((AP.rows||[]).concat(AP.cols||[]),function(Ao){if(Ao.did===AW.did){Ac=true;return false;}});if(Ac){return[];}switch(AW.t){case c.METRIC:if(AU&&!AU.items.length){AM(AW.did,AW.t,g.ColorBy,AI);}else{if(AF&&!AF.items.length){AM(AW.did,AW.t,g.SizeBy,AI);}else{if(AN&&!AN.items.length){AM(AW.did,AW.t,g.Angle,AI);}else{if(Aa){var z=AW.did;if(AA.colorBy.indexOf(z)<0&&AA.sizeBy.indexOf(z)&&AA.angle.indexOf(z)&&AA.tooltip.indexOf(z)<0){AM(z,AW.t,g.AdditionalMetrics,AI);}}}}}break;default:var Al=AC.edtModel.getEditingPropertyVal(K.graphicType),AD=Al===k.Area,AQ=AX?!AX.items.length:true,AT=AH?!AH.items.length:true,AR=Ad?!Ad.items.length:true,Af=AK?!AK.items.length:true,AV=AQ&&((!AD&&AT&&AR)||(AD&&Af)),An=t.getGeoForm(AW,function(Ao){return t.isGeoRoleSupportArea(Ao.fgr);}),AY=t.getLatitudeForm(AW),AS=t.getLongitudeForm(AW),AJ=t.getGeometryForm(AW),Aj=function(){var Ao=AA.vp,Aq=AA.tooltip;if(!t.canShowSizeByZone(Ao)&&AA.sizeBy&&Aq.indexOf(AA.sizeBy)<0){AM(AA.sizeBy,4,g.AdditionalMetrics);AO(AA.sizeBy,4,g.SizeBy);}if(!t.canShowColorByZone(Ao)&&AA.colorBy&&Aq.indexOf(AA.colorBy)<0){AM(AA.colorBy,4,g.AdditionalMetrics);AO(AA.colorBy,4,g.ColorBy);}if(!t.showAngleZone(Ao)&&AA.angle&&Aq.indexOf(AA.angle)<0){AM(AA.angle,4,g.AdditionalMetrics);AO(AA.angle,4,g.Angle);}if(!t.showSliceZone(Ao)&&AA.slice&&AA.slice.length>0){var Ap=AA.slice;f.forEach(Ap,function(Ar){AM(Ar,12,g.AdditionalMetrics);AO(Ar,12,g.SizeBy);});}};if(Ag&&AV&&AJ){AA.setMapType(k.Area);AA.setShapeFile(H);if(An){AM(AW.did,AW.t,g.GeoAttribute,AI);y(AW.did,AJ.fid);AM(AJ.fid,21,g.Geometry,AI);AA.setUseAttributeForm(true);}else{AM(AW.did,AW.t,g.Geometry,AI);y(AW.did,AJ.fid);AA.setUseAttributeForm(false);}AA.setBorderStyle(B.BORDER_STYLE);}else{if(AV&&An&&!(!AD&&(AY||AS))){AA.setMapType(k.Area);if(Ag){AA.setBorderStyle(B.BORDER_STYLE);}AA.setUseAttributeForm(false);AM(AW.did,AW.t,g.GeoAttribute,AI);y(AW.did,An.fid);}else{var AZ=(Ak&&AW.card>500)?k.Density:(!AD?Al:k.Marker);if(AY&&AS&&AV){AM(AW.did,AW.t,g.GeoAttribute,AI);AA.setMapType(AZ);if(Ag&&AZ===k.Marker&&AD){AA.setBorderStyle(B.BORDER_STYLE_CIRCLE);}AA.setUseAttributeForm(true);y(AW.did,AY.fid);y(AW.did,AS.fid);AM(AY.fid,21,g.Latitude,AI);AM(AS.fid,21,g.Longitude,AI);}else{if((AY||t.isLatitude(AW.n))&&(!AS&&!t.isLongitude(AW.n))&&AQ&&AT){AM(AW.did,AW.t,g.Latitude,AI);AA.setMapType(AZ);AA.setUseAttributeForm(false);}else{if((!AY&&!t.isLatitude(AW.n))&&(AS||t.isLongitude(AW.n))&&AQ&&AR){AM(AW.did,AW.t,g.Longitude,AI);AA.setMapType(AZ);AA.setUseAttributeForm(false);}else{if(!AY&&!AS&&!An&&AL){AM(AW.did,AW.t,g.SliceBy,AI);}else{if(AA.tooltip.indexOf(AW.did)<0){AM(AW.did,AW.t,g.AdditionalMetrics,AI);}}}}}}}if(Ah){Aj();}break;}if(Ah){Ab.push({act:"setProperty",nodeKey:Ai.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(AA.getXml())});}if(Ab.length){var AE=Ai.visName,Al=AA.getMapType(),Am=AA.getLayerName();AB.addAttributeNameAndTargetVisForAddUnits(Ai,[AW],AE,Al,Am);AB.clearCardinalityFlags();AB.findLargeItemsForAddUnits([AW]);}return Ab;}function Y(AG,AE,AD,AB,AH,AA){var AF,y,AC,z;AF=!!f.filterOne(AB,function(AI){return AI.t!==c.METRIC;});y=!!f.filterOne(AH,function(AI){return AI.t!==c.METRIC;});AC=!!f.filterOne(AH,function(AI){return AI.did==="-1";});if(AG.t===c.METRIC||(AG.t===c.PARAMETER&&AG.targetType===c.METRIC)){z=j.Columns;if(AA.length===0){if(!y&&AF){z=j.Rows;AE.findEstimatedTotalRow([AG],z);}else{AD+=AB.length;}}else{if(AC){AE.findEstimatedTotalRow([AG],j.Rows);}}AD+=AA.length;}else{if(AF&&!y){z=j.Columns;AD+=AB.length;AE.findLargeItemsForAddUnits([AG]);AE.findTotalColumnCount([AG],null);}else{z=j.Rows;AD+=AH.length;AE.findEstimatedTotalRow([AG],z);}}return{axis:z,idx:AD};}function l(AD,AA,z,AC,AB){var y=AD?(AD.rows||[]).concat(AD.cols||[]).concat(AD.mx||[]):[];if(AA&&(AB.length||mstrmojo.array.find(y,"did",z.did)!==-1)){AB.push({act:"editNode",nodeKey:AC,datasetId:AA});}}function m(AX,AH,Ae,AM,AJ){var Ad=AM.getHost(),AG=Ad.model,AQ=AM.activeTemplateSet,AP=AQ,AV=AX.did,AZ=Ad.gridData.gsi,AO=AJ||0,AE,y,AL,AN,AS,AY,AW,AB,AU,AC,Aa,AA=AX.t===c.METRIC,AD=true,AF=-1,Ab=false,Ac,z,AI=function(Af){return !u.hasMicrocharts(Af);},AK=[],AT,AR;for(AT=AZ.length-1;AT>=0;AT--){AR=AZ[AT];if(AI(AR)){AF=AT;break;}}Ab=AP===-1||AF===-1;if(AP===-1){AP=AF;}AE=p.getGSI(AZ,AP)||{};y=AE.k;AD=AI(AE);if(!AD){Ab=true;}AL=AE.rows||[];AN=AE.cols||[];AS=AE.mx||[];AY=AD&&f.find(AL.concat(AN).concat(AS),"did",AV)>-1;AM.clearCardinalityFlags();if(!AY&&!AG.hasSameRecursiveAttributeGroup(AX)){AW=Y(AX,AM,AO,AN,AL,AS);AB=AW.axis;AO=AW.idx;AU=f.find(AL,"did",O);Aa=AU>-1;AU=Aa?AU:f.find(AN,"did",O);if(AA&&Aa){AO=AU+AS.length;AB=j.Rows;}else{if(AX.t===c.ATTR){AB=j.Rows;}}if(AB===j.Rows){AY=false;p.forEachGSI(AZ,function(Ah){var Af=Ah&&Ah.cols||[];for(var Ag=0;Ag<Af.length;Ag++){if(Af[Ag].did===AV||Af[Ag].paraId===AV){AY=true;return false;}}});if(!AY){p.forEachGSI(AZ,function(Af,Ag){AK.push(AM.getUpdateTemplateAction(AM.getAddAction(Ad,AX,AB,AH,AO,AP,false),Ag));});}}else{if(AB===j.Columns){if(AA){if(AU>0){AO++;}}else{AC=f.findLast(AN,"t",c.ATTR);if(AC>-1){AO=AC+1;}else{AO=0;}}if(Ab){Ac=AM.getAddColumnSetAction();AK.push.apply(AK,Ac);AP=AZ.length;y=f.filterOne(Ac,function(Af){return Af.act==="copyUnit";}).newKey;AM.activeTemplateSet=AP;}z=AM.getAddAction(Ad,AX,AB,AH,AO,AP,false);if(AA&&Ab){z.push(Ad.model.getValuesDefaultFormatGridZoneAction([AX],true,y,true));}AK.push(AM.getUpdateTemplateAction(z,y));}}}if(!Ae.dataSourceState&&!AE.datasetId){l(AE,AH,AX,AE.k,AK);}return AK;}function A(AK,AD,AC,AJ,y){var AI=AJ.getHost(),AM=AI.model,AH=AC.gsi||{},AL=(AH.parameterLayout?AH.parameterLayout.rows:AH.rows)||[],AF=(AH.parameterLayout?AH.parameterLayout.cols:AH.cols)||[],AE=(AH.parameterLayout?AH.parameterLayout.mx:AH.mx)||[],AB=[],z,AG=y||0,AA;if(AI.hasArrayGSI){return m(AK,AD,AC,AJ,y);}AJ.clearCardinalityFlags();if(f.find(AL.concat(AF).concat(AE),"did",AK.did)===-1&&!AM.hasSameRecursiveAttributeGroup(AK)){AA=Y(AK,AJ,AG,AF,AL,AE);z=AA.axis;AG=AA.idx;AB.push({act:"updateTemplate",keyContext:AC.k,actions:[AM.getAddTemplateUnitAction(AK,AD,z,AG)]});}return AB;}var L=function(AJ,AD,AC,AH,y){var AB=[];var AA=AH.getActionsForDoubleClick(AJ,AD,y),AE=AA.length&&AA[0].zoneId===g.BreakBy,AI=AH.getHost(),AG=AH.docModel,AF=AI.defn.vis.vn;if(f.isArray(AA)&&AA.length>0){AB.push(AH.getUpdateTemplateAction(AA));}if(s.safeCall("isTimeSeriesInsightsViz",AG)(AF)&&AE){var z=AG.getInsightVizBreakByAction(AH,AJ);AB.push(z);}return AB;};function E(AA,y){if(!AA){return false;}const z=[b.NEWGRAPHMATRIX,b.ESRIMAP,b.GOOGLEMAP,b.MAPBOX,b.HEATMAP,b.NETWORK,b.KPICARD,b.IMAGELAYOUT,b.CUSTOM];return z.indexOf(y)!==-1;}mstrmojo.vi.models.DatasetDoubleClick=mstrmojo.provide("mstrmojo.vi.models.DatasetDoubleClick",{addObject:function(AI,AC,AG,y){var AA=[];const AB=W(AG);if(!AI||!AB){return AA;}const AJ=AB.visName||"Grid";const AD=b.getDefinition(AJ).id;const z=D.isObjectParameterItem(AI);if(E(z,AD)){return AA;}switch(AD){case b.GRAPHMATRIX:case b.NEWGRAPHMATRIX:AA=I(AI,AC,AB,AG);break;case b.ESRIMAP:case b.GOOGLEMAP:AA=R(AI,AC,AB,AG,new C.MapHelper({data:AB}),true);break;case b.MAPBOX:AA=R(AI,AC,AB,AG,new C.MapHelper({data:AB}),false);break;case b.HEATMAP:AA=G(AI,AC,AB,AG);break;case b.NETWORK:AA=a(AI,AC,AB,AG);break;case b.KPICARD:AA=i(AI,AC,AB,AG);break;case b.IMAGELAYOUT:AA=N(AI,AC,AB,AG);break;case b.CUSTOM:if(AG.getCustomDropZones&&AG.getCustomDropZones()){AA=L(AI,AC,AB,AG,y);}else{AA=A(AI,AC,AB,AG,y);}break;default:AA=A(AI,AC,AB,AG,y);break;}if(!AB.dataSourceState&&!AB.datasetId){const AH=AG.getHost();if(!AH.hasArrayGSI){const AF=AH.model.data.gsi;const AE=AG.getHost();l(AF,AC,AI,AE.k,AA);}}return AA;},getExtras:function Z(z){var y=z.getHost(),AA=y.scriptClass;if(AA==="mstrmojo.vi.ui.rw.MultiXtab"||AA==="mstrmojo.ag.AgXtab"){return{style:{params:{treesToRender:n.BOTH}}};}return{style:{params:{treesToRender:n.DATA}}};}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.ui.editors.CharacterToolbarPopup","mstrmojo.array","mstrmojo.hash","mstrmojo.VisEnum");var B=0,I=mstrmojo.array,J=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,a=mstrmojo.models.FormatModel,H=a.ENUM_PROPERTY_NAMES.TEXT_ALIGN,N=mstrmojo.hash,b=B,R=B,L=mstrmojo.VisEnum.SERVER_JSON_ERROR_TYPE,Y=mstrmojo.vi.ui.TextAlignButtonBar.TEXT_ALIGN;function O(h,c,e,i,f){var d=h===this.getTitleFormatCode(),g;if(e===H){g=function(j){return this.titleAlignButtonBar.items.filter(function(k){return k.v===j;})[0].id;}.bind(this);}this.getHost().parent.changeUnitFormats(d,h,c,e,i,f,g,function(j){this.raiseEvent({name:"BEMFormatChange",propertyName:e,value:j,isTitle:d});}.bind(this));}function X(d,e){var c=new mstrmojo.vi.ui.TextAlignButtonBar({includeJustify:false});this.titleAlignButtonBar=c;c.singleSelect(c.items.map(function(f){return f.id;}).indexOf(d));c.onValueChange=function(g,f){e(H,g,f);};return c;}function C(f){var k=this.getHost(),i=k.getFormats(),l=i.ttl,e=k.hideTitleCtrl&&k.hideTitleCtrl(),j=[];if(l&&!e){var g=this,c=O.bind(this,this.getTitleFormatCode(),i),d=k.parent.getTitleBarVisibility(),h=[this.getCharacterGroup(c,l),X.call(this,a.getFormatBlockValue(l,H),c),this.getContainerGroup(l,c,J.FILL_COLOR+J.FILL_ALPHA,{showBackgroundNoFill:true})];h.forEach(function(m){m.set("enabled",d);});j.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(4756,"Title")),this.getCheckboxAndLabel(d,mstrmojo.desc(13599,"Show Title Bar"),function(n){var m=g.getHost();if(m){m.parent.toggleTitleBar(!!n);}})].concat(h),{cssClass:"bem-tc-title",showDivider:false}));}j.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(11917,"Container")),this.getContainerGroup(i,O.bind(this,this.getContainerFormatCode(),i),this.getContainerCtrlFlags(),{showBackgroundNoFill:true,showBorderNoFill:true})],{cssClass:"bem-tc-container"}));this.replaceChildControls(f,j.concat(this.getTitleAndContainerControls()));}function D(c){var e=this.getTargetPulldownItems(c);var d=this.getPulldown(e,function(f){if(e.length>1){b=f;}else{b=R;}e[e.map(function(g){return g.v;}).indexOf(f)].h(f);if(c&&c.postUpdateFn){c.postUpdateFn();}});if(d.items&&d.items.length){d.set("selectedIndex",Math.max(e.map(function(f){return f.v;}).indexOf(b),0));}return d;}mstrmojo.vi.models.editors.BaseEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.EditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.BaseEditorModel",titleAlignButtonBar:null,init:function U(c){this._super(c);R=this.getInitialTarget(b);b=R;},selectTargetByValue:function P(c){if(c!==undefined){var d=this._targetPulldown;if(d){d.selectItemByField("v",c);}}},getInitialTarget:function Z(){return B;},getEditorContents:function S(c){var d=this.getEditorGroup([],{cssClass:"bem-dynamic-grp",showDivider:false,isNested:true,isContainer:true,postUpdateFn:c});var g=this._targetPulldown;if(g&&"function"===typeof g.destroy){I.removeItem(this.disposables,g);g.destroy();}var f=this._targetPulldown=D.call(this,d),e=[d].concat(this.getCommonControls());if(f.items.length>1){e.unshift(this.getEditorGroup([f]));}this.addDisposable(f);return e;},getFormattingToolbar:function F(d,i,e){if(d===B){var h=this.getHost(),c=h.getFormats(),g=c.ttl;if(g){g=N.copy(g);if(!this.titleAlignButtonBar){this.titleAlignButtonBar=new mstrmojo.vi.ui.TextAlignButtonBar({includeJustify:false});}g[H]=this.titleAlignButtonBar.items.filter(function(j){return j.id===g["text-align"];});g[H]=g[H].length>0?g[H][0].v:Y.LEFT;var f=new mstrmojo.ui.editors.CharacterToolbarPopup(N.copy({onGroupValueChange:O.bind(this,this.getTitleFormatCode(),c),textAlignJustify:false,textAlignFmtName:H,anchorElement:i},e));f.setFormatSource(g);return f;}}return null;},getCommonControls:function E(){return[];},getContainerCtrlFlags:function A(){var c=this.isContainerPositionSizeEnabled();return J.FILL_COLOR+J.BORDER+(c?J.SIZE_POSITION:0)+J.FILL_ALPHA;},getTitleAndContainerControls:function W(){return[];},getTargetPulldownItems:function G(d){var f=this.getHost(),c=f.getFormats(),e=[];if(c&&(f.showTitleAndContainerFormats!==false)&&!mstrApp.isInVFConfigMode){e.push({n:mstrmojo.desc(12049,"Title and Container"),v:B,h:C.bind(this,d)});}return e;},getTitleFormatCode:function K(){return 2;},getContainerFormatCode:function M(){return 1;},isNormalOrExcludeAllDataButNotInPauseMode:function Q(e){var c=!e.isEmpty()||e.errorType===L.EMPTY_DATA,d=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();return c&&!d;}});mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE=B;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr");var b=mstrmojo.func,X=mstrmojo.hash,R=mstrmojo.array,H=mstrmojo.dom,O=mstrmojo.vi.controllers.UICmdMgr.STATES,L={SHARED:0,SEPARATE:1},P={AND:19,OR:20},h=function h(l,k){var i={},j=function(o,n){var m=[];if(!n){return o;}R.forEach((n||[]),function(p){m.push(p);});R.forEach((o||[]),function(q){var p=R.find(n,"id",q.id);if(!~p){m.push(q);}});return m;};X.forEach(k,function(m,n){i[n]=m;});X.forEach(l,function(m,n){i[n]=j(m,k[n]);});return i;},D=function D(i){var j=[];X.forEach(i,function(k){j.push({ft:P.AND,d:k});});return j;},M=function(j){var i={},k=function(l){var m=X.keyarray(l)[0];return{id:m,d:l[m][0]};};X.forEach(j,function(o){var n={},l=k(o),m=n[l.id];if(l.id){if(!m){n[l.id]=m=[];}m.push(l.d);}i=h(i,n);},this);return[{ft:P.OR,d:i}];},C=function C(n,u,t,m){var o=m||this.model,s,j=[],k=mstrmojo.vi.ui.rw.SelectionType,p=true,l=false,q=false,i=this;if(!u){u=this.getSelectionType();}if(!X.isEmpty(n)){if(u===k.METRICS){s=D.call(this,n);}else{s=M.call(this,n);}}X.forEach(s,function(w){p=false;var x=[];X.forEach(w.d,function(z,AE){var AD;if(t){AD=m?m.supportsDSLKViewFilter(AE):o.supportsDSLKViewFilter(AE);}else{AD=m?m.supportsViewFilterActions(AE):i.isSupportViewFilterForSelection(AE);}if(AD){l=true;var AA=[],y=z.reverse(),AC={id:AE,elems:AA,fm:z[0].fm,v:R.map(y,function(AF){return AF.n;})},AB=o.getObjectInfo(AE);if(AB){AC.t=AB.t;AC.st=AB.st;if(i.isVIXtab&&u===k.ATTS&&i.model.isRecursiveAttribute(AB.did)){q=true;}if(AB.st===12033){AC.attId=AB.attId;}}R.forEach((y||[]),function(AF){AA.push(AF.id);});x.push(AC);}});if(x.length){j.push({ft:w.ft,d:x});}});j.hasElements=l;j.clearSelections=p;j.isRecursiveAttribute=q;return j;},F=function F(k){var i=this.getContextMenuSelectionType(),j=[];j=C.call(this,k,i);return j;},J=function J(){var j=X.walk("event.target",window),i=H.isTouchOptimizationEnabled();if(!j&&i){j=this.tapElement;}return j;},e=function e(q,t,k,i){var p=this.selectorControl,m,l,s,o=this,n,j;if(p){if(q.clearSelections||q.hasElements){m=this.controller;if(t){l=m.model;j=p.navPage;n=l.getLayoutKeyByUnitKey(j);this.clearSelections();this.setSelectionCache();}p.exp=null;if(m.onGridSelector){s=function(){m.onGridSelector(o,{type:mstrmojo.EnumRWUnitType.GRID,ck:p.ck,tks:p.tks,cgb:X.valarray(p.cgb),ifwCgbNodes:i,ctlKey:p.ckey,sliceId:this.sid,isBranch:k,isUConDS:p.isUConDS,isNavigation:t,fromKeyboard:o.isHandlingKeyboard,layoutKey:n,panelKey:j,ct:p.ct,anchor:J.call(o),anchorPos:X.walk("event.anchorPos",window)||X.walk("singleTapEvt.anchorPos",o),selections:q,callerId:o.id});};if(this.multiUnitCtrlInterval){window.clearInterval(this.multiUnitCtrlInterval);this.multiUnitCtrlInterval=null;}if(m.cmdMgr.state===O.BUSY){this.multiUnitCtrlInterval=window.setInterval(function(){if(m.cmdMgr.state!==O.BUSY){window.clearInterval(o.multiUnitCtrlInterval);if(!o.destroyed){o.multiUnitCtrlInterval=null;s();}}},1000);}else{s();}}}}},B=function B(k){var i={type:mstrmojo.vi.ui.rw.SelectionType.ATTS,data:k},j=function(l,m){if(parseInt(l.fn,10)===22&&parseInt(m,10)===19){i.type=mstrmojo.vi.ui.rw.SelectionType.METRICS;}R.forEach((l.nds||[]),function(n){j(n,l.fn);});};j(k,null);return i;},f=function f(){return this.parent.model.getCurrentLayoutDef().cgbMap;},Q=function Q(){var i=f.call(this),j=[];X.forEach(i,function(m,l){if(this.k===m){j.push(l);}},this);return j;},g=function g(){var i=this.controller&&this.controller.cmdMgr;if(i&&i.isUndoRedo()){return true;}return false;};mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",selectorControl:null,multiUnitCtrlInterval:null,postBuildRendering:function c(){if(this._super){this._super();}var i=mstrApp.isInVFConfigMode||this.isCustomSort?null:this.findSelectorControl();if(g.call(this)){this.clearSelections();}if(i&&!i.isNavigation&&!X.isEmpty(i.exp)&&this.addSelectionsFromExpression){this.addSelectionsFromExpression(B(i.exp));if(this.highlight){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getSelectorDataFromExpression:B,getSelectionDataTree:C,getContextMenuSelectionDataTree:F,deleteSelectorControl:function E(){if(this._super){return this._super();}this.throwAbstractMethodError("deleteSelectorControl");},findSelectorControl:function a(){if(this._super){return this._super();}this.throwAbstractMethodError("findSelectorControl");},handlesMultiSelection:function I(i){return(this._super&&this._super(i))||!!this.selectorControl;},isSupportViewFilterForSelection:function K(j){var i=this.model;return i.supportsViewFilterActions(j);},isLinkedFilter:function(){var i=this.findSelectorControl&&this.findSelectorControl();return i&&i.isNavigation;},isLinkedFilterEnabled:function(){return this.isLinkedFilter()&&this.getContextMenuSelectionHash&&!X.isEmpty(this.getContextMenuSelectionHash());},getTargetIWCGBKeysFromLinkedFilter:function W(){var n=this.findSelectorControl&&this.findSelectorControl(),j=X.walk("parent.model",this),i=b.safeCall("getCGBMap",j)(),m=X.valarray(n&&n.cgb),l=n&&n.isNavigation;if(!l||!m){return undefined;}var k=m.filter(function(p){var o=i&&i[p];return b.safeCall("isInfoWindow",j)(o);});if(k.length>0){return k;}return undefined;},handleContextMenuSelectionData:function G(j,i){this.isNavigation=j;this.isBranch=i;this.onContextMenuSelectionChange(this.getContextMenuSelectionHash&&this.getContextMenuSelectionHash());},onSelectionChange:function S(k){var l=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),n=false,s=this.isNavigation,i=this.getTargetIWCGBKeysFromLinkedFilter(),o=(typeof this.getVisType==="function"?this.getVisType():{}).s,p=this.defn.t===mstrmojo.EnumRWUnitType.GRID&&mstrApp.isAppStateTransactionMode&&mstrApp.isAppStateTransactionMode();if(s){delete this.isNavigation;}if(this._super){n=this._super(k);}if(!i&&!s&&this.isLinkedFilter()){return true;}if(l.length>0){this.singleUnitSelect();n=true;}else{if(!!this.selectorControl&&!this.isCustomSort&&!p){if(this.hasElementSelection){delete this.hasElementSelection;}var q=C.call(this,k);if(this.passThroughExpression){q.passThroughExpression=this.passThroughExpression;}e.call(this,q,s,q.isRecursiveAttribute&&this.selectionContainsOnlyLeafNode&&!this.selectionContainsOnlyLeafNode(),i);var t=X.walk("model.docModel",this),u=this.selectorControl.tks,m=!!u&&u.split("\u001e"),j=t&&m&&m.length===1&&t.getTargetInfoWin(m[0]).length;if(j){return n;}return true;}}return n;},onContextMenuSelectionChange:function N(k){var n=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),m=false,l=this.isNavigation,i=this.isBranch;if(l){delete this.isNavigation;}if(i){delete this.isBranch;}if(this._super){m=this._super(k);}if(!l&&this.isLinkedFilter()){return true;}if(n.length>0){this.singleUnitSelect();m=true;}else{if(this.selectorControl){var j=F.call(this,k);e.call(this,j,l,i);return true;}}return m;},singleUnitSelect:function A(){if(this._super){this._super();}},clearAllSelections:function Z(){return this.selectorControl&&this.selectorControl.showall;},onClearBrushing:function d(i){if(this.selectorControl){return true;}if(this._super){return this._super(i);}return false;},getFilterType:function U(){return this.defn.ins||L.SHARED;},switchFilterType:function Y(w){var p=this,u,q=p.getFilterType(),n=p.parent.model,m,l={actions:[]},x,k=f.call(p),i,o=false,s,AA,t,z,j;if(q!==w){u=Q.call(p);s=n.getCurrentLayoutDef().units;if(u.length&&q===L.SHARED){x=R.filterOne(u,function(AB){AA=s[AB];if(AA){t=AA.scs||[];return true;}m=n.getSourceControls(p.parent,AB);t=m;return m.length;});if(!m||!m.length){m=n.getSourceControls(p.parent,x);m=R.filter(m,function(AB){z=AB.control.key;return !R.find(t,"ckey",z);});t=t.concat(m);}R.forEach(t,function(AB,AC){if(AC!==0){i=n.getNextKey();k[i]=p.k;l.actions.push(n.redoFilterAssociations(true,AB.ckey||AB.control.ckey,AB.pnk||AB.sourceKey,p.k,x,i));o=true;}});}else{j="";R.forEach(u,function(AB){AA=s[AB];if(!AA){m=n.getSourceControls(p.parent,AB);AA=m.length&&m[0];if(!AA){return true;}AA.pnk=AA.sourceKey;AA.ckey=AA.control.ckey;}if(!j){j=AB;}else{delete k[AB];t=(AA.scs&&AA.scs[0])||AA;l.actions.push(n.redoFilterAssociations(false,t.ckey,t.pnk,p.k,AB,j));o=true;}});}l.actions.push(n.getUnitFormatAction(p,1,{FormattingSelector:{IndependentNodeSelector:w}},true));var y=false;l.callback=({success:function(){p.defn.ins=y?q:w;y=!y;}});if(o){l.callback=b.wrapMethods(l.callback,n.getRebuildCallback());}}l.extras={style:{params:{treesToRender:3}}};return l;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.XtabZone","mstrmojo.DICFactory","mstrmojo.DynamicClassFactory");var F=102,m=1,K=2,Y=1,y=4,AP=mstrmojo.css,AM=mstrmojo.dom,AJ=mstrmojo.hash,AQ=mstrmojo.array,H=mstrmojo.DynamicClassFactory.newComponent,p=1,AC=2,AL=4,f=1,AE=2,k=1,g=2,x=1,U=2,B=1,P=2,AD=2,AI=1,l=6,AY=7,Q=function(Aa){if(Aa){return Aa.tui>=0?("h_"+Aa.tui+"_"+Aa.fi+"_"+Aa.axis):("m_"+Aa.mix);}return"";};function o(Ag,Ac,Ad){var Af=this.nm[Ac],Ab=Ad.v,Ae=Ad.dv;Ag.rv=Ab;Ag.v=Ae;Ag.mdf=1;if(Ag._src){Ag._src.rv=Ab;Ag._src.v=Ae;Ag._src.mdf=1;}var Aa=this.dicGroupMap[Q(Ag)].widgetsMap[Ag._ei];if(!Aa.showByDefault){if(Aa.hasPreview){Aa.renderPreview();}else{if(AM.isIE7&&mstrmojo.string.isEmpty(Ab)){Ab=" ";}Af[Af.innerText!==undefined?"innerText":"textContent"]=(!Ab?"\u00a0":Ab);}}return Af;}function G(Ad,Ae,Aa){if(Aa[Ae]===0){return true;}if(Ad&&Aa[Ae]===undefined){try{var Ab=Ad.getRowCells(Ae),Af=Ab&&Ab[0];if(Af&&Af.o===Ae){if(Af.sst){Aa[Ae]=0;}return !!Af.stt;}if(Af&&Af.o){return G(Ad,Ae+Ae-Af.o,Aa);}return false;}catch(Ac){return false;}}else{return false;}}function AV(Ab,Aa){AQ.forEach(Ab,function(Ac){Aa[Ac.o]=1;});}function M(Aa){if(Aa.mgh&&(Aa.mgh&m)){this.mghMarks={};}}function s(Ac,Ae){var Ab=Ae.bb-1,Aa=Math.min(Ab+Ae.bc,Ae.tc),Ad;AJ.forEach(Ac,function(Ag,Af){Ad=Number(Af);if(!isNaN(Ad)&&Ad>=Ab&&Ad<Aa){delete Ac[Af];}});}function Z(Ad,Ac){var Aa=this.editing?1:(Ad.rs||1),Ab;for(Ab=0;Ab<Aa;Ab++){this.dirtyRows[Ac+Ab]=1;}}function AW(Aa){return Aa&&parseInt(Aa.ipt,10)===AD;}function d(Aa){var Ab;this.delegateGridAction(function(Ac){if(!Ab&&Ac.posMap&&Ac.posMap[Aa._ei]){Ab=Ac;}},"getRowIndex");return Ab.getRowIdxByCell(Aa);}function AH(Aa){var Ag=Aa.thPosMap,Ai=Aa.slot,Af=Ag&&Ag.length||0,Ak=this.lastHeaderIndexs[Ai]||0,Ae=[Aa.tableNode],Ah,Ac,Aj,Ad;if(this.getStickedTableNodes){Ae=Ae.concat(this.getStickedTableNodes());}for(Ad=Ak;Ad<Af;++Ad){Ah=Ag[Ad],Aj=Ah.obj;if(this.isEditableHeader(Aj)){for(var Ab in Ae){q(Ae[Ab],Ah);}}}this.lastHeaderIndexs[Ai]=Ad;}function q(Aa,Ac){var Ab=Aa.tBodies[Ac.page].rows[Ac.row].cells[Ac.cell];Ab.innerHTML='<div class="editable-column">'+Ab.innerHTML+"</div>";}function O(Ac){var Ae=true,Ab=Ac||[];for(var Ad=0,Aa=Ab.length;Ad<Aa;Ad++){if(Ab[Ad]&&(Ab[Ad].w==="")){Ae=false;break;}}return Ae?"40px":"";}function z(Aa){return !Aa.tav||!(Aa.tav&Y);}function AU(Ae,Ac,Ag,An){var Ah=false;for(var Af=0;Af<Ae.length;Af++){var Ak=Ae[Af],Ab=Ak.style,Ad=parseFloat(AP.getStyleValue(Ak,"padding-left"))||0,Aa=parseFloat(AP.getStyleValue(Ak,"padding-right"))||0,Am=parseFloat(AP.getStyleValue(Ak,"padding-top"))||0,Ai=parseFloat(AP.getStyleValue(Ak,"padding-bottom"))||0;var Al=Ak.getElementsByClassName("tableLayoutList")[0];var Aj=Ak.getElementsByClassName("mstrmojo-TableLayoutList")[0];if(Al&&Aj){if(Al.clientWidth>Ac[Af]){Ab.width=Al.clientWidth+"px";Aj.style.width="auto";Ah=true;}else{Ab.width=Ac[Af]-Ad-Aa+"px";}if(Al.clientHeight>Ag[Af]){Ab.height=Al.clientHeight+"px";Aj.style.height="auto";Ah=true;}else{Ab.height=Ag[Af]-Am-Ai+"px";}}else{Ab.width=Ac[Af]-Ad-Aa+"px";Ab.height=Ag[Af]-Am-Ai+"px";}}if(Ah){An.style.width="auto";}}function b(Ac,Aa){var Ab=Ac+"_"+Aa;return this.copiedCellsMap[Ab];}function AK(Ab,Ad,Aa){var Ac=Ad+"_"+Aa;this.copiedCellsMap[Ac]=Ab;}function AA(Ae,Ac,Aa){var Ad=b.call(this,Ac,Aa),Ab=this.interactiveCellsArray;if(!Ad){Ad=Ab.push(Ae)-1;AK.call(this,Ad,Ac,Aa);}return Ad;}mstrmojo._IsEditableGridCP={_mixinName:"mstrmojo._IsEditableGridCP",copiedCellsMap:{},initContent:function AX(Ad){this._super(Ad);var Aj=this.gridData,Ab=Aj&&Aj.vp,Ah,Ag,Ai,Al,Aa,Ak,Ac,Af;if(((this.type===p)||(this.type===AL))&&Ab&&Ab.cols&&!Ab._adjusted){Aa=Ab.cols.cg;Ac=Ab.cols.cws;if(Aa&&Aa.cgc>0){for(Ah=Aa.cgc;Ah>0;Ah--){Aa[Ah]=AJ.copy(Aa[Ah-1],{});Ak=Aa[Ah];var Ae=Ak.attForms;if(Ae){for(Ag=0,Al=Ae.length;Ag<Al;Ag++){Ai=Ae[Ag];Ai.idx+=1;}}}Aa[0]={tg:false,cc:0,cl:1,attForms:[{n:"",idx:0}]};Aa.cgc+=1;}if(Ac){Ac.splice(0,0,{w:"60px",xc:true});}if(Ab.dafIdx!==undefined){Ab.dafIdx+=1;}Af=Aj.gts.row;for(Ah=0,Al=Af.length;Ah<Al;Ah++){Af[Ah].ci=Ah+1;}Ab._adjusted=true;}if(!this.isDossierTransaction){this.colWidths=[{w:O(this.colWidths)}].concat(this.colWidths);}this.unmergedCells=[];this.copiedCellsMap={};},getUnmergedCells:function X(){return null;},getRowCells:function A(An){var Ad=this._super(An),Ab=Ad[0],Ar=(Ab&&Ab.o)||0,Aa=Ab&&Ab.isObjHeader,Ao=Ab&&Ab.axis===AE,Ah=this.isDossierTransaction&&(Aa||Ao),Ap=(this.tp===p),Ag=this.interactiveCellsArray,Aq={css:"",v:""},Au=[],Ac=[],Av,Aw;if(!Ad.length){return Ad;}if(!Ap&&!Ah){var Aj=this.base.items,At=this.lookupBase,As=this.gridData.css,Az=Ab&&Ab.pi,Am=Az&&Az.ri,Ay=Az&&Az.ci,Ak=Ab.stt>0;while(Az&&Am>-1&&Ay>-1){Ab=Ab._p||Aj[Am].items[Ay];var Ae=AJ.copy(Ab,{});Ae._src=Ab;if(!Ae.css){Ae.css=As[Ae.cni].n;}var Al=At[Ab.tui],Ax=Al&&Al.es[Ab.idx];if(Ax){Ae.v=Ab.v||Ax.n;Ae._e=Ax;}Ae.rs=1;if(Ak){Ae.at&=~32;}if(Ar>-1){Ae.o=Ar;}if(!Ae.axis&&this.axis){Ae.axis=this.axis;}if(this.isDossierTransaction){Ae._ei=AA.call(this,Ae,Ab._ei,An);}else{Ae._ei=Ag.push(Ae)-1;}Au.splice(0,0,Ae);Az=Ab&&Ab.pi;Am=Az&&Az.ri;Ay=Az&&Az.ci;}for(Av=0,Aw=Ad.length;Av<Aw;Av++){var Af=Ad[Av];if(Af.rs>1){var Ai=AJ.copy(Af,{});Ai.rs=1;Af=Ai;}Ac.push(Af);}}else{Ac=Ad;if(An>0){return Ad;}}if(Ac[0]&&!this.isDossierTransaction){Aq=AJ.copy(Ac[0],{});Aq.rv=Aq.v="";if(this.tp===p){Aq.n=Aq.v="";Aq.markAll=true;}else{Aq.n="";}Aq._ei=Ag.push(Aq)-1;Aq.at=32;Aq.cs=1;Aq.mark=true;Aq.mix="x";Aq.css=(Au[0]&&Au[0].css)||Aq.css;delete Aq.ui;delete Aq.tui;delete Aq.fs;delete Aq.mdf;}if(this.isDossierTransaction){return Au.concat(Ac);}return[Aq].concat(Au.concat(Ac));}};mstrmojo._IsEditableXtab=mstrmojo.provide("mstrmojo._IsEditableXtab",{_mixinName:"mstrmojo._IsEditableXtab",update:function W(Ac){var Aa,Ab=Ac.data;if(this._super){this._super(Ac);}this.kc={};this.rs={};this.rsDelta={};M.call(this,Ab);if(Ab.eg!==undefined){return ;}Aa=Ac.data.marked;if(Aa){AV(Aa,this.rs);}if(!Ab.rw){var Ad=Ab.gvs.items.length;Ab.rw={row:{bb:1,bc:Ad,tc:Ad},col:{bb:-1,bc:-1,tc:0}};}},initCP:function c(Ac,Ab,Ah,Ae,Ag,Ad,Af){var Aa={gridData:Ac,type:Ah,interactiveCellsArray:Ab};Aa.base=Ae||Aa.base;Aa.lookupBase=Ag||Aa.lookupBase;Aa.axis=Ad||Aa.axis;Aa.dataSource=this;if(!Af){if(this.tca===K&&this.editing){if(Ah===p){mstrmojo.EditableXtabTitlesCP=H(mstrmojo.XtabTitlesCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabTitlesCP",tp:p});Af=new mstrmojo.EditableXtabTitlesCP(Aa);}else{if(Ah===AL){mstrmojo.EditableXtabCP=H(mstrmojo.XtabCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabCP"});Af=new mstrmojo.EditableXtabCP(Aa);}else{Af=new mstrmojo.XtabCP(Aa);}}}else{if(Ah===p){Af=new mstrmojo.XtabTitlesCP(Aa);}else{Af=new mstrmojo.XtabCP(Aa);}}}else{AJ.copy(Aa,Af);}return Af;},createOnDemandCP:function AR(Ab,Ac,Aa){var Ad;if(this.tca===K&&this.editing&&Aa===AL){mstrmojo.EditableXtabOnDemandCP=H(mstrmojo.XtabOnDemandCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabOnDemandCP"});Ad=new mstrmojo.EditableXtabOnDemandCP();}else{Ad=new mstrmojo.XtabOnDemandCP();}Ad.dataSource=this;Ad.blockNum=Ab;Ad.rc=Ac;return Ad;},preBuildRendering:function R(){var Aa=this.defn.txi;if(this._super){this._super();}this.txar=Aa.txar;this.sci=Aa.sci;this.tca=Aa.tca;if(this.tca!==K){this.editing=false;}else{if(mstrApp.isMobile){this.editing=this.alwaysEditing=true;}}this.nm={};this.ko={};this.dirtyRows={};this.requiredCellsMap={};this.dicGroupMap={};this.lastIndex=0;this.lastHeaderIndexs={};this.columnNames={};},postBuildRendering:function AZ(){if(this._super){this._super();}if(this.tca===K&&this.gridData.eg===undefined){var Ac=Math.max(-16,-this.domNode.offsetTop),Ad=this;if(!this.alwaysEditing){var Aa=mstrmojo.Button.newIconButton(mstrmojo.desc(8324,"Mark rows"),"mstrmojo-EditButton",function(){if(!Ad.recalculating){Ad.editing=!Ad.editing;Ad.refresh();}}),Ab=new mstrmojo.Button(mstrmojo.hash.copy({cssText:"top:"+Ac+"px;"},Aa));Ab.render();this.domNode.appendChild(Ab.domNode);if(this.editing){this.domNode.style.zIndex=1000;AP.addClass(Ab.domNode,"close");}else{AP.removeClass(Ab.domNode,"close");}}}},dataDownloadErr:function AS(Ab){if(this.txar&&this.recalculating){this.delegateGridAction(function(Ad){Ad.isDownloading=false;},"isDownloading");this.rhsCP.initContent();this.valuesCP.initContent();AP.removeClass(this.maskNode,"wait");this.recalculating=false;if(Ab){var Ac=this;var Aa=function(Af,Ae){var Ad=window.mstrConfig&&!window.mstrConfig.simpleDialog;if(Ad){mstrmojo.alert(Af,Ae,null,null,null,{allowHTML:true});}else{mstrmojo.alert(Af);Ae();}};Aa(mstrmojo.desc(16652,"The task cannot be completed due to a malformed request. Please try again."),function(){if(!mstrApp.useBinaryMode){var Ad={model:Ac.model.docModel};Ac.controller.onReExecute(Ad,true);}});}}},dataDownloaded:function AN(Ad,Ab){var Ac=Ad.data;if(this.txar){var Aa=Ab.blockNum,Ae;if(this.recalculating){Ab.recalculating=true;this.interactiveCellsArray=[];this.requiredCellsMap={};this.dirtyRows={};this.lastIndex=0;this.lastHeaderIndexs={};this.kc={};this.nm={};this.updatedCellsMap={};this.recalculating=false;this.destroyDICs();}else{Ab.recalculating=false;}if(Aa===0){this.gridData=Ac;}if(Ac.eg){this.refresh();return ;}Ae=this.interactiveCellsArray;this.initCP(Ac,Ae,p,null,null,null,this.titlesCP);this.initCP(Ac,Ae,AC,Ac.ghs.chs,Ac.gts.col,AE,this.chsCP);this.titlesCP.initContent();this.chsCP.initContent();this.delegateGridAction(function(Af){if(Ae&&Ae.length===0){Af.refresh();}},"refreshOnDataDownloaded");}if(this._super){this._super(Ad,Ab);}M.call(this,Ac);s(this.rs,Ac.rw.row);if(Ac.marked){AV(Ac.marked,this.rs);this.rsDelta={};}},closeDownloadStatus:function AF(){if(this._super){this._super();}mstrmojo.css.removeClass(this._STATUS,"recalculate");},kc:null,ko:null,nm:null,rs:null,dicGroupMap:null,lastIndex:0,lastHeaderIndexs:{},columnNames:null,getDataInputInfo:function t(Aa,Ad){var Ai=Aa._ei,Ah,Ac=this.node.defn,Aq=this.gridData;if(Aa.mark){Ah=Aa.o;if(Aa.stt){this.rs[Ah]=0;return ;}this.ko[Ah]=Ai;Aa.rv=Aa.v=this.rs[Ah]||-1;this.kc[Ai]={rowop:true};return{key:Ai,t:F,vls:[{v:-1},{v:1}],wm:1,w:22,hm:1,h:16,dm:1};}var Al=this.model.getCellTitleInfo(Aa,this.dataBlocks[Aa._gd]),Ar=Al&&Al.title,An=Ar&&Ar.es,Ag=(Aa.mti!==undefined)?Aa.mti:Aa.mix,Ae=(Aa.mix!==undefined),Ao=Ac.txi.dic,Ak;Ak=AJ.copy(!Ae?Ao.att&&Ar&&Ao.att[Ar.id]&&Ao.att[Ar.id][Ar.fs[Aa.fi].id]:Ao.mtx&&Ao.mtx[An[Ag].oid],{});if(!Ak){return null;}if(this.columnNames[Ad]===undefined){this.columnNames[Ad]=!Ae?Ar.n:An[Ag].n;}if(AW(Ak)){Ak.vls=(Aq.dcv&&Aq.dcv[Ak.k])||[];}if(Aq.tcs&&Aq.tcs[Ak.k]){var Aj=Aq.tcs[Ak.k];if(Aj&Y){Ak.disabled=true;}if(Aj&y){Ak.req=1;}}if(Ai>=0&&!this.kc[Ai]){var Ap=!Aa.axis,Af={isMv:Ap};if(Ap){var Am=Aa.pi,Ab=Am&&Am.top;Af.co=(Ab&&Ab.ci)||0;Af.metric_id=An[Ag].oid;Aa.o=Af.o=(Aa._lp&&Aa._lp.o)||0;Af.tp=g;}else{Af.ax=Aa.axis;Af.atid=Ar.id;Af.form_id=Ar.fs[Aa.fi].id;Af.o=Aa.o;Af.tp=k;Af.fi=Aa.fi;Af.ui=Aa.ui;Af.tui=Aa.tui;Af.rs=Aa.rs;}Af.dt=Ak.dt;if(AW(Ak)){Af.vls=Ak.vls;Af.k=Ak.k;}this.kc[Ai]=Af;}Ak.key=Ai;if(Ak.dm){Ak.dm=parseInt(Ak.dm,10);}return Ak;},isEditableHeader:function h(Aa){var Ab=this.node.defn,Ac=Ab.txi.dic;if(Aa.sst||!Ac){return false;}if(Aa.id!==undefined&&Ac.att){return !!(Ac.att[Aa.id]&&(Aa.fix?Ac.att[Aa.id][Aa.fid]:Ac.att[Aa.id]));}if(Aa.tui!==undefined&&Aa.mix!==undefined&&Ac.mtx){return !!(Ac.mtx[Aa._e.oid]);}return false;},dataChanged:function I(Ac,Ad,Ab,Ae,Aa){if(!this.recalculating){if(Ae){this.nm[Ac]=Ae;}if(this._super){this._super(Ac,Ad,Ab,Ae,Aa);}}},updateValue:function E(Ad,Ab){if(this._super){this._super(Ad,Ab);}var Ah=this.interactiveCellsArray[Ad],Al=Ab.v,Am,Aa=d.call(this,Ah);this.lmr=null;Am=o.call(this,Ah,Ad,Ab);this.updateDirtyUnits();if(Ah.r!==Al){if(!Ah.mark){Ah.mdf=1;mstrmojo.css.removeClass(Am,"required");Z.apply(this,[Ah,Aa]);this.flagDirtyUnit(Am);}}else{this.clearDirtyUnit(Am);}if(this.onCellUpdated){this.onCellUpdated(Ah,Am);}if(this.tca===K){if(Ah.mark){var Af=Ah.markAll?-1:Ah.o,Aj=this.rsDelta;this.rs[Af]=Al;this.lmr={r:Af,v:Al};if(Ah.markAll){Aj=this.rsDelta={};Aj[Af]=Al;this.mghMarks={};}else{if(Aj[Af]&&Aj[Af]!==Al){delete Aj[Af];}else{if(Aj[-1]!==Al){Aj[Af]=Al;}}}}else{if(this.rs[Ah.o]!==0){this.rs[Ah.o]=1;}if(!this.editing&&this.mghMarks&&(Ah.mix===undefined)){if(!this.mghMarks[Ah.o]||this.mghMarks[Ah.o].rs<Ah.rs){this.mghMarks[Ah.o]={o:Ah.o,rs:Ah.rs,k:Ad};}var Ae,Ai,Ag=this;AJ.forEach(this.rsDelta,function(An,Ao){Ae=parseInt(Ao,10);Ai=parseInt(Ah.o,10);if(Ae>=Ai&&Ae<=(Ai+Ah.rs)){delete Ag.rsDelta[Ao];}});}else{this.rsDelta[Ah.o]=1;}if(!this.editing&&Ah.rs>1){var Ac=Ah.o+1;while(Ac-Ah.o<Ah.rs){if(!G(this.rhsCP,Ac,this.rs)){this.rs[Ac]=1;}Ac+=1;}}if(this.editing){var Ak=this.dicGroupMap.m_x.widgetsMap[this.ko[Ah.o]];if(Ak){Ak.set("checked",true);}}}}if(this.txar&&!Ah.mark){return true;}return false;},autoRefresh:function AT(Aa){this.delegateGridAction(function(Ab){Ab.invalidAllPages();},"invalidAllPages");this.rhsCP.invalid();this.valuesCP.invalid();AP.addClass(this._STATUS,"recalculate");this.delegateGridAction(function(Ab){var Ac=Ab.parent;if(Ac&&!Ab.connectedScrollbox){Ac.connectScrollbox(Ab);Ab.connectedScrollbox=true;}Ab.onscroll(true,Aa);},"scrollOnAutoRefresh");this.recalculating=true;},getKeyContext:function a(Aa){return this.kc[Aa];},getUpdateObject:function e(){var Af=[],Ad,Ag,Ah,Ab=this.lmr,Ac,Ae={};if(Ab){this.lmr=null;return{manipulation:x,actionType:(Ab.v===-1)?B:P,rowOrdinal:Ab.r,nodeKey:this.k,sliceId:this.sid};}Ag=this.getUpdatedValues();for(Ad=0;Ad<(Ag&&Ag.length);Ad++){if(!Ag[Ad].rowop){Ah=Ag[Ad];break;}}if(Ah){Ac=mstrmojo.string.encodeXMLAttribute(String(Ah.v));if(Ah.k!==undefined&&Ah.vls){var Aa=AQ.find(Ah.vls,"v",Ah.v);if(Aa!==-1){Ae={controlKey:Ah.k,elementId:Ah.vls[Aa].eid};}}if(Ah.isMv){Af.push(AJ.copy(Ae,{rowOrdinal:Ah.o,colOrdinal:Ah.co,newValue:Ac,dataType:Ah.dt}));}else{Af.push(AJ.copy(Ae,{rowOrdinal:Ah.o,attId:Ah.atid,formId:Ah.form_id,unitIndex:Ah.tui||Ah.ui,newValue:Ac,dataType:Ah.dt}));}}return{manipulation:U,nodeKey:this.k,sliceId:this.sid,cells:Af,autoRefresh:this.txar};},getUpdates:function S(){var Ak=this,Af,Ag,Aa=Ak.getUpdatedValues(),Ad=this.rsDelta,Ae=[],Aj=[],Ah=false,Ac="";Ae.push('<gr rw_tree_type="'+Ak.treeType+'" rw_node_key="'+Ak.k+'" slice_id="'+Ak.sid+'">');for(Af in Aa){if(Aa.hasOwnProperty(Af)){Ag=Aa[Af];if(!Ag.rowop){var Al=mstrmojo.string.encodeXMLAttribute(String(Ag.v)),Ab=AQ.find(Ag.vls,"v",Ag.v);if(Ag.k&&Ag.vls&&Ab===-1){if(Ag.isMv){Aj.push('<cli cordinal="'+Ag.co+'" metric_id="'+Ag.metric_id+'"><updt types="'+AY+'" rordinal="'+Ag.o+'" rw_control_key="'+Ag.k+'"/></cli>');}else{Aj.push('<cli ax="'+Ag.ax+'" attribute_id="'+Ag.atid+'" form_id="'+Ag.form_id+'"><updt types="'+l+'" ordinal="'+Ag.o+'" rw_control_key="'+Ag.k+'" flags="1"/></cli>');}}else{if(Ag.k&&Ag.vls&&Ab!==-1){Ac='rw_control_key="'+Ag.k+'" element_id="'+mstrmojo.string.encodeXMLAttribute(String(Ag.vls[Ab].eid))+'" ';}if(Ag.isMv){Aj.push('<cli cordinal="'+Ag.co+'" metric_id="'+Ag.metric_id+'"><updt types="'+Ag.tp+'" rordinal="'+Ag.o+'" '+Ac+'value="'+Al+'" dt="'+Ag.dt+'"/></cli>');}else{Aj.push('<cli ax="'+Ag.ax+'" attribute_id="'+Ag.atid+'" form_id="'+Ag.form_id+'"><updt types="'+Ag.tp+'" ordinal="'+Ag.o+'" '+Ac+'value="'+Al+'" dt="'+Ag.dt+'"'+(this.mghMarks?' flags="1"':"")+"/></cli>");}}Ah=true;}}}if(!AJ.isEmpty(this.mghMarks)){var Ai=this;AJ.forEach(this.mghMarks,function(Am,An){Ac=Ai.getKeyContext(Am.k);Aj.push('<mark rordinal="'+An+'" types="4" flags="1" attribute_id="'+Ac.atid+'" form_id="'+Ac.form_id+'"/>');});}if(Ad&&!AJ.isEmpty(Ad)){Ah=true;AQ.forEach(AJ.keyarray(Ad).sort(),function(Am){if(Ad[Am]===1){Aj.push('<mark rordinal="'+Am+'" types="4"/>');}else{Aj.push('<mark rordinal="'+Am+'" types="5"/>');}});}Ae.push(Aj.join(""));Ae.push("</gr>");if(!Ah){Ae=[];}return Ae.join("");},flagDirtyUnit:function j(Ab){if(Ab&&this.sci){if(this._super){this._super(Ab);return ;}var Aa=document.createElement("div"),Af,Ac=false,Ae=AP.getStyleValue(this.domNode,AM.CSS3_TRANSFORM),Ad;Aa.className="flag-container";Aa.innerHTML='<div class="dirty-cell"/>';if(Ab.insertBefore){Ab.insertBefore(Aa,Ab.firstChild);Ad=(Aa.offsetParent===Ab);}Ac=mstrmojo.string.isEmpty(Ae)||Ae==="none";Af=Aa.firstChild;Af.style.top=((!Ac||Ad)?(-Aa.offsetTop):(Ab.offsetTop-Aa.offsetTop))+"px";Af.style.left=(Ab.clientWidth+((!Ac||Ad)?(-Aa.offsetLeft):(Ab.offsetLeft-Aa.offsetLeft))-8)+"px";}},updateDirtyUnits:function AG(){var Aa=this.domNode,Ac=Aa.getElementsByClassName("dirty-cell"),Ae=AP.getStyleValue(Aa,AM.CSS3_TRANSFORM),Ab=mstrmojo.string.isEmpty(Ae)||Ae==="none",Ad;AQ.forEach(Ac,function(Ah){var Af=Ah.parentNode,Ag=Af&&Af.parentNode;Ad=Ag.insertBefore?Af.offsetParent===Ag:false;Ah.style.top=((!Ab||Ad)?(-Af.offsetTop):(Ag.offsetTop-Af.offsetTop))+"px";Ah.style.left=(Ag.clientWidth+((!Ab||Ad)?(-Af.offsetLeft):(Ag.offsetLeft-Af.offsetLeft))-8)+"px";});},clearDirtyUnit:function AO(Aa){if(this._super){this._super(Aa);return ;}var Ab=Aa.firstChild;if(Aa){if(Ab&&Ab.className&&Ab.className==="flag-container"){Aa.removeChild(Ab);}}},onvisibleChange:function N(){if(this.visible===true){var Aa=this;setTimeout(function(){Aa.configureActions();},10);}},configureActions:function L(){if(this.visible===false){return ;}this.configureCellsAction();this.lastIndex=this.interactiveCellsArray.length;var Aa=this;this.delegateGridAction(function(Ab){AH.call(Aa,Ab);},"markEditableColHeaders");this.registerTxWidget();if(this._super){this._super();}},configureCellsAction:function C(Ac,Am,A7,Ae){var Ak=this,A0=this.getTargetZone(),A7=A7||A0.posMap,Ai=Ac||this.interactiveCellsArray,Am=(Am===undefined?this.lastIndex:Am),BC=this.dicGroupMap,At=[],BA,Al,A8,A6,Ap,Aq,Ar,A2,BB,Ag,Ay,Ah,A4,Ao=function(){var BD=[];this.delegateGridAction(function(BE){BD.push(BE);},"configureActions");return BD;},As=Ao.call(this),Au=(As.length>1),Aj=function(BD){var BF=BD.length,BE;for(BE=0;BE<BF;BE++){Ak.flagDirtyUnit(BD[BE]);}};for(BA=Am,Al=Ai.length;Ai[BA]&&BA<Al;BA++){Ap=Ai[BA];Aq=A7&&A7[BA];if(!Aq&&Au){A0=(As[0]===A0)?As[1]:As[0];A7=A0&&A0.posMap;Aq=A7&&A7[BA];}if(Aq&&((Ap.at&32)>0)){Ap.at=32;if(Ap.rv==null){Ap.rv=isNaN(Ap.mix)?Ap._e.n:Ap.v;}A2=Q(Ap);Ay=this.getDataInputInfo(Ap,A2);Ah=BC[A2];if((Ap.axis===AE||Ap.axis===f&&Ap.o===undefined)&&this.clonedColHeader&&this.clonedColHeader.isRendered()){A4=this.clonedColHeader.getTableNode();}else{if(Ap.axis===f&&this.clonedRowHeader){if(this.clonedRowHeader.isRendered()){A4=this.clonedRowHeader.getTableNode();}else{A4=A0.tableNode;if(Ay&&!Ah){this.clonedRowHeader.addGroupKey(A2);}this.clonedRowHeader.addTempDICInfo(Ap,Aq);}}else{A4=A0.tableNode;}}Ar=A4.tBodies[Aq.page].rows[Aq.row].cells[Aq.cell];if(Ay){if(!Ah){Ah=BC[A2]=mstrmojo.DICFactory.createDICGroup({gk:A2,dic:Ay,owner:this,openerType:AI});}var Az=!z(Ap)||Ay.disabled;var An={value:(Ap.rv===undefined)?(Ap.v||Ap.n):(typeof Ap.rv==="string"?mstrmojo.string.decodeHtmlString(Ap.rv):Ap.rv),dv:Ap.v||Ap.n,ts:Ap.ts,markAll:Ap.markAll,openerNode:Ar,k:Ap._ei,ownerCell:Ap,enabled:!Az,popupTitle:this.columnNames[A2]},Ad=A0.cp.stackedRh;if(Ad&&Ap.singleStack&&(mstrmojo.DICConfig.showDICByDefault(Ay,1)||mstrmojo.DICConfig.hasDICPreview(Ay,1))){var A5=Ar.offsetHeight;Ar.className+=" igDIC";Ar.style.cssText="height:"+A5+"px;";if(Ah.showByDefault){Ar.className+=" sbd";}mstrmojo.hash.copy({inlineExtraCssText:"position:absolute;top:"+parseInt(Ad/2-A5/2+1,10)+"px;"},An);}Ah.addDIC(Ap._ei,An);BB=Aq.page*A0.rowsPerPage+Aq.row;if(Ay.req){for(A6=0;A6<(this.editing?1:(Ap.rs||1));A6++){Ag=this.requiredCellsMap[BB+A6];if(!Ag){this.requiredCellsMap[BB+A6]=Ag=[];}Ag.push(Ap);}}if(Ap.mdf&&!Ae){At.push(Ar);Z.apply(this,[Ap,BB]);}if(Az&&!mstrmojo.DICConfig.showDICByDefault(Ay,1)){var Aw=document.createElement("div"),Ax=document.createElement("span"),A1=Ar.currentStyle||document.defaultView.getComputedStyle(Ar,null),Aa={marginLeft:"-"+A1.paddingLeft,paddingLeft:A1.paddingLeft,marginRight:"-"+A1.paddingRight,paddingRight:A1.paddingRight,marginTop:"-"+A1.paddingTop,paddingTop:A1.paddingTop,marginBottom:"-"+A1.paddingBottom,paddingBottom:A1.paddingBottom};Aw.className="xtab-dic-disabled";AJ.copy(Aa,Aw.style);Ax.appendChild(Ar.firstChild);Aw.appendChild(Ax);Ar.appendChild(Aw);}}}}this.lastIndex=BA;var A9=A0.tableNode.rows,Av=A9&&A9.length>=2,Af,Ab=[],A3=[];if(Av){Af=A9[1].children;AQ.forEach(Af,function(BD){Ab.push(BD.clientWidth);A3.push(BD.clientHeight);});}for(A2 in BC){BC[A2].render();}if(Av){AU(Af,Ab,A3,A0.tableNode);}setTimeout(function(){Aj(At);},25);},destroyDICGroup:function AB(Ab){var Ac=this.dicGroupMap,Aa,Ad,Ae;if(Ac&&(Ab instanceof Array)){for(Aa in Ab){Ad=Ab[Aa];Ae=Ac[Ad];if(Ae){Ae.destroy();delete Ac[Ad];}}}},showPopupDIC:function w(Ad){var Ab=Ad&&AM.findAncestorByAttr(Ad,"ei",true,this.viewport);if(Ab){var Ae=Ab.node,Aa=this.getCellForNode(Ae),Ac=this.dicGroupMap[Q(Aa)];if(Ac&&!Ac.dic.disabled&&!(Aa.tav&&(Aa.tav&Y))){Ac.showPopupDIC(Aa._ei);return true;}}return false;},onclick:function n(Ab){var Aa=mstrmojo.dom.eventTarget(window,Ab.e);if(!this.showPopupDIC(Aa)&&this._super){this._super(Ab);}},unrender:function i(){if(this._super){this._super();}this.destroyDICs();},destroyDICs:function D(){var Aa=this.dicGroupMap;this.dicGroupMap={};setTimeout(function(){var Ab;for(Ab in Aa){Aa[Ab].destroy();}},10);},checkRequiredObjects:function J(){if(this.hasRendered&&!(this.isInteractiveGrid&&this.isInteractiveGrid())&&!this.gridData.eg){var Ac=this.getTargetZone();if(!Ac){return true;}var Ae=Ac.posMap,Ag,Ad=this,Ab=this.rs,Aa=true,Af=function(Am,Ai){var Al=true,Aj=Ad.requiredCellsMap[Am],Ah=(Aj&&Aj.length)||0,Ak;for(Ak=0;Ak<Ah;Ak++){if(!Aj[Ak].mdf){AP.toggleClass(Ac.getNodeByPosition(Ae[Aj[Ak]._ei]),"required",Ai);Al=!Ai;}}return Al;};if(this.tca===K){for(Ag in Ab){Aa=Af(parseInt(Ag,10)+1,Ab[Ag]>0)&&Aa;}}else{for(Ag in this.dirtyRows){Aa=Af(Ag,true)&&Aa;}}return Aa;}return true;},editNext:function u(Ac){if(this.recalculating){return false;}var Ad=this.interactiveCellsArray,Aa=Ad.length,Ae=Ac+1,Af,Ab;do{if(Ae>=Aa){Ae%=Aa;}if(Ae===Ac){return false;}Af=Ad[Ae];var Ag=this.dicGroupMap[Q(Af)];if(Ag&&!Ag.dic.disabled&&z(Af)){if(mstrmojo.DICConfig.isKeyNavigable(Ag.dic)){if(!Ag.showByDefault){Ag.showPopupDIC(Ae);}else{Ab=Ag.widgetsMap[Ae];Ab.focus();}return true;}}Ae++;}while(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.XtabZone","mstrmojo.css","mstrmojo.hash","mstrmojo.dom","mstrmojo.func","mstrmojo.array");var g=0,A=1,AF=2,K=3,o={1:"_BL",2:"_TR",3:"_TL"},AO=1,AB=2,u={position:"absolute",overflow:"hidden",width:"auto"},y={position:"absolute",top:0,left:0},F=mstrmojo.css,i=mstrmojo.hash,m=mstrmojo.dom,p=mstrmojo.array,AK=mstrmojo.func;function M(AS,AR,AP,AQ){if(AQ){AS.replaceChild(AR,AS.tBodies[AP]);}else{AS.appendChild(AR);}}function J(AP){AP.offsetCellNode=null;AP.fstValueCellValidation=null;}function W(){var AW={x:0,y:0};if(this.lockHeadersCase&&!this.offsetCellNode&&!this.fstValueCellValidation){var AX=this.titlesCP.getSpanDimension(),AP=AX.nRow,AT=AX.nCol,Af=this.scrollboxNode.firstChild.firstChild,Ab=Af&&Af.rows[AP];if(AP===0||AT===0){this.lockHeadersCase=g;return null;}if(!Af.rows.length){return null;}if(!Ab){this.fstValueCellValidation|=AO;this.lockHeadersCase&=AO;Ab=Af.rows[0];}var Ae=Ab&&Ab.cells,Aa=(Ae&&Ae.length)||0,AR,AY,AZ;for(AY=AZ=0;AY<Aa&&AZ<AT;AY++){AZ+=Ae[AY].colSpan||1;}AR=Ae&&Ae[AY];if(!AR){this.fstValueCellValidation|=AB;this.lockHeadersCase&=AB;this.offsetCellNode=Ae&&Ae[0];}else{this.offsetCellNode=AR;}var Ad=this;var AS=function(){Ad._adjustClipSize();};var AV=function(Ak,An){var Ai,Ah,Ag,Al,Aj,Am;An=Math.min(Ak.rows.length,An);for(Ai=0;Ai<An;Ai++){Ag=Ak.rows[Ai].getElementsByTagName("img");for(Ah=0;Ah<Ag.length;Ah++){Al=Ag[Ah];Aj=Al.onload;Am=Aj?function(){Aj.call(this);AS();}:AS;Al.onload=Am;Al.onerror=Am;}}};AV(Af,AP||0);}if(this.lockHeadersCase){var AU=AK.safeCall("getScale",this)(),Ac=m.positionWithScale(this.offsetCellNode,undefined,AU),AQ=m.positionWithScale(this.scrollboxNode.firstChild,undefined,AU);AW.x=Ac.x-AQ.x;AW.y=Ac.y-AQ.y;}return AW;}function P(AR,AP,AQ,AV){if(this.parent.isAutoTableLayout()&&this.isRendered()){if(!this.fragment){this.fragment=document.createDocumentFragment();}if(AV){var AS=AR.cloneNode(true);if(!this.renderedPages){x.call(this);}if(AQ&&this.renderedPages[AP]){var AU=this.renderedPages[AP],AT=this.getTableNode();if(AU.parentNode===AT){AT.replaceChild(AS,AU);}else{this.fragment.replaceChild(AS,AU);}}else{this.fragment.appendChild(AS);}this.renderedPages[AP]=AS;}}}function AI(AQ,AP){for(var AR in AQ){if(AQ[AR]!=AP[AR]){return false;}}return true;}function z(){var AQ=this.fragment,AP,AT,AR;if(AQ&&AQ.childNodes.length>0&&this.isRendered()){var AS=this.getTableNode();if(this.parent.isOutlineMode){while(AQ.childNodes.length>0){AP=AQ.childNodes[0];AT=parseInt(AP.getAttribute("n"),10);if(AS.tBodies[AT]){AS.replaceChild(AP,AS.tBodies[AT]);}else{AS.appendChild(AP);}}}else{AS.appendChild(AQ);}}}function w(){var AQ=this.xtabClonedNodes,AU=this.cellHoverMgr,AS,AT,AP,AR;if(!AU){return ;}for(AP in AQ){AS=AQ[AP];AR=AS.getID();AT=AS.isRendered();if(!this.zones[AR]&&AT){this.zones[AR]={tableNode:AS.getTableNode()};if(typeof (AU)!=="string"){AU.addMgrElement(AR);}}}}function O(AQ,AP){var AR=this.parent,AT=AR&&AR.zone,AS=AK.safeCall("parent.model.docModel.getZoomFactor",this)()||1;if(AP&&AT&&AT.addCoverTable){if(AS!==1){AR.attachLoadEventHandlerToImages(AP.getElementsByTagName("img"),AS);}AT.addCoverTable(AQ,AP);}if(AR.hasAccessibility){F.addClass(AP.parentElement,"gridAccessible");AP.tabIndex="-1";}}function s(AQ,AP,AR){AQ.width=((AR&&AR.width<AP.right)?AR.width:AP.right)+"px";AQ.height=((AR&&AR.height<AP.bottom)?AR.height:AP.bottom)+"px";}function x(){this.renderedPages={};var AU=this.getTableNode(),AQ=AU.tBodies,AR=this.fragment,AW=AR&&AR.children,AT=this.renderedPages,AP,AS,AV=function(AX){var AY=AX.getAttribute("n")||0;AT[AY]=AX;};for(AS=0,AP=AQ.length;AS<AP;++AS){AV(AQ[AS]);}for(AS=0,AP=(AW&&AW.length)||0;AS<AP;++AS){AV(AW[AS]);}}function L(AT,AP,AQ){var AR=AP&&AP.rows[AT.row],AS=AR&&AR.cells[AT.cell];if(AS&&AQ!==AS){AR.replaceChild(AQ.cloneNode(true),AS);}}function S(AQ,AP){if(this.isRendered()){if(!this.renderedPages){x.call(this);}L(AQ,this.renderedPages[AQ.page||0],AP);}}function D(AQ,AS){var AP=AQ&&AQ.tBodies[AS.page||0],AR=AP&&AP.rows[AS.row];return AR&&AR.cells[AS.cell];}mstrmojo.XtabZoneWithClonedCover=mstrmojo.declare(mstrmojo.XtabZone,null,{scriptClass:"mstrmojo.XtabZoneWithClonedCover",isAutoTBLayout:null,addCoverTable:function N(AP,AQ){if(!this.coverTableNodes){this.coverTableNodes={};}this.coverTableNodes[o[AP]]=AQ;},getClonedNodesByPositions:function R(AW){var AV=this.coverTableNodes,AQ=AV&&AV[o[K]],AY=AV&&AV[o[AF]],AS=AV&&AV[o[A]],AR=[AQ,AY,AS],AP,AZ,AU=[];for(var AT in AW){AP=AW[AT];if(AP.page&&AS){AZ=D(AS,AP);if(AZ){AU.push(AZ);}}else{for(var AX in AR){if(AR[AX]){AZ=D(AR[AX],AP);if(AZ){AU.push(AZ);}}}}}return AU;},getSpecClonedNodesByPositions:function b(AU){var AP,AW=[],AR,AT,AS=this,AX=this.coverTableNodes&&this.coverTableNodes[o[A]],AV=this.coverTableNodes&&this.coverTableNodes[o[AF]],AQ=function(AY,AZ){p.forEach(AZ,function(Aa){AP=D(AY,Aa);if(AP){AW.push(AP);}});};p.forEach(AU,function(AY){AR=AY._ei;AT=AS.eiMap[AR]||(AS.posMap[AR]&&[AS.posMap[AR]])||[];if(AY.axis===1){AQ(AX,AT);}else{AQ(AV,AT);}});return AW;},setHilites:function X(AZ,AT){var AU=AT.getAttribute("ei"),AY=this.eiMap[AU]||(this.posMap[AU]&&[this.posMap[AU]])||[],AW=this.hiliteCellsMap,AS=this.parent,AQ=this.getNodesByPositions(AY),AP=function(Aa){F.addClass(Aa,"sc_"+AS.k);};if(!AW[AZ]){AW[AZ]={pos:[],nodes:[]};}if(!AQ.length){AP(AT);AW[AZ].nodes.push(AT);}else{if(AY.length!==0){var AR=this.getClonedNodesByPositions(AY),AX=AW[AZ].pos;AQ=AR.concat(AQ);for(var AV in AQ){AP(AQ[AV]);}AW[AZ].pos=AX.concat(AY);}}},clearHilites:function C(AQ){var AT=this.hiliteCellsMap[AQ],AR=AT&&AT.nodes,AU=(AR&&AR.length===0&&AT.pos)||[],AS=this.parent;if(AU.length!==0){AR=this.getNodesByPositions(AU);AR=AR.concat(this.getClonedNodesByPositions(AU));}for(var AP in AR){F.removeClass(AR[AP],"sc_"+AS.k);}this.hiliteCellsMap[AQ]={nodes:[],pos:[]};},isAutoTableLayout:function AG(){if(this.isAutoTBLayout===null&&this.tableNode){this.isAutoTBLayout=(this.tableNode.style.tableLayout!=="fixed");}return this.isAutoTBLayout;},unrender:function B(AP){this.coverTableNodes={};this.isAutoTBLayout=null;this._super(AP);}});mstrmojo.XtabClonedNode=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.XtabClonedNode",domNode:null,left:0,top:0,lockType:g,scrollDM:mstrmojo.emptyFn,refreshNode:mstrmojo.emptyFn,createDomNode:function f(){var AP=this._getClonedFragment();this.containerNode.appendChild(AP);O.call(this,this.lockType,this.getTableNode());},getID:function Y(){return this.id;},getTableSize:function d(){var AQ=this.parent.zone.tableNode,AP=this.parent.hasCustomScrollbar?"offset":"client";return{width:AQ[AP+"Width"],height:AQ[AP+"Height"]};},isRendered:function I(){return !!this.domNode;},getTableNode:function AM(){return this.isRendered()?this.domNode.firstChild.firstChild:null;},destroy:function AC(AP){if(this.isRendered()){this.unrender(true);}this._super(AP);},unrender:function B(AP){this.domNode=null;this.lastClipRect=null;this._super&&this._super(AP);},insertPage:function AN(AR,AP,AQ,AS){if(this.isRendered()){M(this.getTableNode(),AR.cloneNode(true),AP,AQ);}},_getClipStr:function e(AP){this.lastClipRect=AP;return"rect("+AP.top+"px, "+AP.right+"px, "+AP.bottom+"px, "+AP.left+"px)";},adjustClip:function h(AR){var AP=this._getClipRect&&this._getClipRect(AR);if(this.isRendered()){if(this.getTableNode().offsetHeight>this.domNode.offsetHeight){this.domNode.style.height=this.getTableNode().offsetHeight+"px";}if(AP&&!(this.lastClipRect&&AI(AP,this.lastClipRect))){this.domNode.style.clip=this._getClipStr(AP);var AQ={};s(AQ,AP,this.getTableSize());i.copy(AQ,this.curtainNode.style);}}this.offset=AR;}});mstrmojo.XtabClonedRowHeader=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedRowHeader",lockType:A,interactiveCellsArray:[],interactivePosArray:[],dicGroupKey:[],init:function AJ(AP){this._super(AP);if((this.lockHeadersCase&A)&&this.left){this.createDomNode();}},_getClipRect:function E(AQ){var AP=this.parent.hasCustomScrollbar?"offset":"client";AQ=AQ||this.offset;return{top:0,right:AQ.x||0,bottom:this.toCloneNode[AP+"Height"],left:0};},_clearLocalData:function H(){this.interactiveCellsArray=[];this.interactivePosArray=[];this.dicGroupKey=[];},_getClonedFragment:function c(){var AV=document.createDocumentFragment(),AQ=this.toCloneNode.cloneNode(true),AU=document.createElement("div"),AW=i.clone(u),AP=i.clone(y),AT=this._getClipRect();AW.clip=this._getClipStr(AT);AW.zIndex=2;if(this.parent.zone&&this.parent.zone.autoFitWindow){AW.width="100%";}AW.overflowY="hidden";AQ.id=this.getID();i.copy(AW,AQ.style);i.copy({top:-this.top+"px"},AQ.firstChild.style);this.domNode=AQ;s(AP,AT,this.getTableSize());AP.zIndex=1;i.copy(AP,AU.style);this.curtainNode=AU;AV.appendChild(AQ);AV.appendChild(AU);var AS=this.parent.scrollboxNode,AX=mstrmojo.dom.isFF?"DOMMouseScroll":"wheel",AR=function(AY){var Ab=AS.scrollTop,AZ=Math.floor((AS.scrollHeight-AS.clientHeight)-Ab),Aa=Math.max(-1,Math.min(1,(AY.wheelDelta||-AY.detail||-AY.deltaY)))*60;if(Ab===0&&Aa>0){return ;}if(Aa<0&&AZ===0){return ;}AY.preventDefault();AY.stopPropagation();AS.scrollTop-=Aa;};AQ.addEventListener(AX,AR,false);return AV;},scrollDM:function k(AQ,AW,AY){var AR=this.parent.shouldClipLockableXtab,AS;if(this.lockHeadersCase&A){if(!this.isRendered()){this.top=AW;this.createDomNode();this.domNode.style.width="100%";this.domNode.style.height="100%";var AV=this;setTimeout(function(){AV._updateDICGroup();if(AV.parent){AV.parent.updateSelectionsForCopy(AV.getTableNode());}},10);}else{var AX=this.domNode.firstChild,AP=AX.style;AP.top=-AW+"px";this.top=AW;if(AR){if(AP.position!=="absolute"){AP.position="absolute";AP.width="100%";}if(this.lockHeadersCase&AF){AS={top:this.offset.y+AW,right:this.offset.x,bottom:AX.offsetHeight,left:0};AP.clip=this._getClipStr(AS);}}}if(AR&&this.isRendered()){var Aa=this.getTableNode();AS={top:0,right:Math.max(Aa.offsetWidth,AY.offsetWidth),bottom:Math.max(Aa.offsetHeight,AY.offsetHeight),left:this.offset.x+AQ};var AU=AY.style,AT=AY.parentNode,AZ=AT.style;if(AU.position!=="absolute"){if(isNaN(parseInt(AZ.width,10))){AZ.width=AT.offsetWidth+"px";}if(isNaN(parseInt(AZ.height,10))){AZ.height=AT.offsetHeight+"px";}AU.position="absolute";AU.width="100%";if(isNaN(parseInt(AZ.width,10))){AZ.width=AS.right+"px";}}AU.clip=this._getClipStr(AS);}}},_updateDICGroup:function n(){var AP=this.parent;if(this.interactivePosArray.length&&this.interactiveCellsArray.length){AP.destroyDICGroup(this.dicGroupKey);AP.configureCellsAction(this.interactiveCellsArray,0,this.interactivePosArray,true);}this._clearLocalData();},addTempDICInfo:function AH(AP,AQ){if(!this.isRendered()){this.interactiveCellsArray.push(AP);this.interactivePosArray.push(AQ);}},addGroupKey:function AL(AP){if(!this.isRendered()){this.dicGroupKey.push(AP);}},onCellUpdated:function AA(AU,AR){if(this.isRendered()){var AP=this.getTableNode(),AQ=AP&&AP.tBodies[AU.page||0],AS=AQ&&AQ.rows[AU.row],AT=AS&&AS.cells[AU.cell];if(AT&&AR!==AT){AS.replaceChild(AR.cloneNode(true),AT);}}},unrender:function B(AP){this._clearLocalData();this._super&&this._super(AP);}});mstrmojo.XtabClonedColHeader=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedColHeader",lockType:AF,init:function AJ(AP){this._super(AP);if(this.lockHeadersCase&AF){this.createDomNode();}},_getClipRect:function E(AQ){var AP=this.parent.hasCustomScrollbar?"offset":"client";AQ=AQ||this.offset;return{top:0,right:this.toCloneNode[AP+"Width"],bottom:AQ.y||0,left:0};},_getClonedFragment:function c(){var AP=document.createDocumentFragment(),AT=this.toCloneNode.cloneNode(true),AS=document.createElement("div"),AR=i.clone(u),AU=i.clone(y),AQ=this._getClipRect();AR.clip=this._getClipStr(AQ);AR.zIndex=4;if(this.parent.zone&&this.parent.zone.autoFitWindow){AR.width="100%";}AT.id=this.getID();i.copy(AR,AT.style);i.copy({left:-this.left+"px"},AT.firstChild.style);this.domNode=AT;s(AU,AQ,this.getTableSize());AU.zIndex=3;i.copy(AU,AS.style);this.curtainNode=AS;AP.appendChild(AT);AP.appendChild(AS);return AP;},scrollDM:function k(AQ,AV,AX){var AR=this.parent.shouldClipLockableXtab,AS;if(this.lockHeadersCase&AF){if(!this.isRendered()){this.left=AQ;this.createDomNode();this.domNode.style.width="100%";this.domNode.style.height="100%";}else{var AZ=this.getTableNode();var AW=this.domNode.firstChild,AP=AW.style;this.domNode.style.width="100%";this.domNode.style.height="100%";AP.left=-AQ+"px";this.left=AQ;if(AR){if(AP.position!=="absolute"){AP.position="absolute";AP.width="100%";}if(this.lockHeadersCase&A){AS=this._getClipRect();AS.left=AQ+this.offset.x;AS.right=Math.max(AW.offsetWidth,AZ.offsetWidth);AP.clip=this._getClipStr(AS);}}}if(AR){var AU=AX.style,AT=AX.parentNode,AY=AT.style;AS={top:this.offset.y+AT.scrollTop,right:Math.max(AZ.offsetWidth,AX.offsetWidth),bottom:Math.max(AZ.offsetHeight,AX.offsetHeight,AT.clientHeight),left:0};if(this.lockHeadersCase&A){AS.left=this.offset.x+AQ;}if(AU.position!=="absolute"){if(isNaN(parseInt(AY.width,10))){AY.width=AT.offsetWidth+"px";}if(isNaN(parseInt(AY.height,10))){AY.height=AT.offsetHeight+"px";}AU.position="absolute";AU.width="100%";if(isNaN(parseInt(AY.width,10))){AY.width=AZ.offsetWidth+"px";}}AU.clip=this._getClipStr(AS);}}},insertPage:P,refreshNode:z,onCellUpdated:S,unrender:function B(AP){this._super(AP);this.fragment=null;this.renderedPages=null;}});mstrmojo.XtabClonedTitle=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedTitle",_getClipRect:function E(AP){AP=AP||this.offset;return{top:0,right:AP.x||0,bottom:AP.y||0,left:0};},init:function AJ(AP){this._super(AP);if(this.lockHeadersCase===K&&this.left){this.createDomNode();}},_getClonedFragment:function c(){var AP=document.createDocumentFragment(),AT=this.toCloneNode.cloneNode(true),AS=document.createElement("div"),AR=i.clone(u),AU=i.copy(y),AQ=this._getClipRect();AR.clip=this._getClipStr(AQ);AR.zIndex=6;if(this.parent.zone&&this.parent.zone.autoFitWindow){AR.width="100%";}i.copy(AR,AT.style);AT.firstChild.style.left=0;AT.id=this.getID();this.domNode=AT;s(AU,AQ,this.getTableSize());AU.zIndex=5;i.copy(AU,AS.style);this.curtainNode=AS;AP.appendChild(AT);AP.appendChild(AS);return AP;},scrollDM:function k(AS,AR,AQ){if(this.lockHeadersCase===K&&!this.isRendered()){this.createDomNode();this.domNode.style.width="100%";this.domNode.style.height="100%";}if(this.parent.shouldClipLockableXtab&&this.isRendered()){var AP=this.domNode.firstChild.style;if(AP.position!=="absolute"){AP.position="absolute";AP.width="100%";}AP.clip=this._getClipStr(this._getClipRect());}},insertPage:P,refreshNode:z,onCellUpdated:S,unrender:function B(AP){this._super(AP);this.fragment=null;this.renderedPages=null;}});mstrmojo._IsLockableXtab={_mixinName:"mstrmojo._IsLockableXtab",initLock:function AE(AX){var AT=W.call(this),AW=this.scrollboxNode;if(this.lockHeadersCase&&AW&&AT){var AV=document.createElement("div"),AP=i.copy(AX,{containerNode:AV,toCloneNode:AW,offset:AT,lockHeadersCase:this.lockHeadersCase,parent:this});if(!this.xtabClonedNodes){this.xtabClonedNodes=[];}if(this.lockHeadersCase&A){if(!this.clonedRowHeader){this.clonedRowHeader=this.addDisposable(new mstrmojo.XtabClonedRowHeader(AP));this.xtabClonedNodes.push(this.clonedRowHeader);}}if(this.lockHeadersCase&AF){if(!this.clonedColHeader){this.clonedColHeader=this.addDisposable(new mstrmojo.XtabClonedColHeader(AP));this.xtabClonedNodes.push(this.clonedColHeader);}}if(this.lockHeadersCase===K){if(!this.clonedTitle){var AR=this.clonedColHeader,AU=AR.domNode,AQ=AR.fragment;AP.toCloneNode=AU||AP.toCloneNode;AP.fragment=AQ&&AQ.cloneNode();this.clonedTitle=this.addDisposable(new mstrmojo.XtabClonedTitle(AP));this.xtabClonedNodes.push(this.clonedTitle);}}var AS=this.hasCustomScrollbar?"offset":"client",AZ=(m.isChrome&&!this.hasCustomScrollbar&&window.devicePixelRatio!==1&&this.gridData.afw)?0.5:0,AY={top:0,left:0,position:"absolute",overflow:"hidden",width:AW[AS+"Width"]+AZ+"px",height:AW[AS+"Height"]+"px"};i.copy(AY,AV.style);this.tableContainerNode.appendChild(AV);this.lockFragment=AV;w.call(this);}},getColClonedZone:function G(){return this.clonedColHeader&&this.clonedColHeader.domNode.firstChild;},createZone:function t(AP){return new mstrmojo.XtabZoneWithClonedCover(AP||{});},getStickedTableNodes:function a(){var AQ=this.xtabClonedNodes,AR=[];if(AQ instanceof Array){for(var AP in AQ){var AS=AQ[AP];if(AS.isRendered()){AR.push(AS.getTableNode());}}}return AR;},_adjustClipSize:function l(){if(this.lockHeadersCase){var AR=this.xtabClonedNodes;if(AR&&AR.length){var AS=W.call(this),AQ=(m.isChrome&&!this.hasCustomScrollbar&&window.devicePixelRatio!==1&&this.gridData.afw)?0.5:0;this.lockFragment.style.width=(this.hasCustomScrollbar?parseInt(this.scrollboxNode.style.width,10):this.scrollboxNode.clientWidth)+AQ+"px";this.lockFragment.style.height=this.scrollboxNode.clientHeight+"px";for(var AP in AR){AR[AP].adjustClip(AS);}}}},getValueCellOffset:function U(){return W.call(this);},_refreshClonedNodes:function Z(){var AS=this.xtabClonedNodes,AY=this.scrollboxNode.firstChild.firstChild,AP=this.titlesCP.getSpanDimension().nRow,AX=AY&&(AY.rows[AP]||AY.rows[0]),AW=AX&&AX.cells,AQ=AW&&AW.length,AT=[],AV=!this.lastCellsRBOffsetLeft,AU;for(AU=0;AU<AQ;++AU){var AR=AW[AU].offsetWidth;AT.push(AR);if(!AV){AV=(this.lastCellsRBOffsetLeft[AU]!=AR);}}this.lastCellsRBOffsetLeft=AT;if(AV){for(AU in AS){AS[AU].refreshNode();}this._adjustClipSize();this.alignLockNodes(this.scrollboxLeft,this.scrollboxTop);}else{this._adjustClipSize();}},alignLockNodes:function AD(AS,AR){var AQ=this.xtabClonedNodes;if(AQ&&AQ.length){for(var AP in AQ){AQ[AP].scrollDM(AS,AR,this.scrollboxNode.firstChild);}w.call(this);}},isAutoTableLayout:function AG(){return this.zone.isAutoTableLayout();},onPageRendered:function Q(AS,AP,AQ,AU){this._super&&this._super(AS,AP,AQ,AU);if(AQ&&AP===0){J(this);}var AR=this.xtabClonedNodes;if(AR&&AR.length){for(var AT in AR){AR[AT].insertPage(AS,AP,AQ,AU);}}},resetColgroupNodes:function q(AS){var AQ=this.xtabClonedNodes,AP,AR;if(AQ&&AQ.length){for(AP in AQ){AR=AQ[AP].getTableNode();if(AR&&AR.firstChild&&AR.firstChild.tagName==="COLGROUP"){AR.replaceChild(AS.cloneNode(true),AR.firstChild);}}}},gridPagesRendered:function j(){this._super&&this._super();if(!this.lockHeadersCase){return ;}if(!this.xtabClonedNodes){this.initLock();}else{if(this.isAutoTableLayout()){this._refreshClonedNodes();}}},onCellUpdated:function AA(AP,AS){var AT=this.zone,AU=AT.posMap[AP._ei],AQ=AT.tableNode.tBodies[AU.page||0],AR=this.xtabClonedNodes;L(AU,AQ,AS);for(idx in AR){AR[idx].onCellUpdated(AU,AS);}if(this.isAutoTableLayout()){this._refreshClonedNodes();}},unrender:function B(AR){var AQ=this.xtabClonedNodes,AP;if(AQ&&AQ.length){for(AP in AQ){AQ[AP].unrender(true);}}this.zones=null;J(this);this.lockFragment=null;this.xtabClonedNodes=null;this.clonedColHeader=null;this.clonedRowHeader=null;this.clonedTitle=null;this.lastCellsRBOffsetLeft=null;this._super(AR);}};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.XtabZone","mstrmojo._IsEditableXtab","mstrmojo.DynamicClassFactory","mstrmojo.ag.models.template.AgDataInterface");var H=1,G=2,I=4,R=8,f=1,M=2,a=mstrmojo.DynamicClassFactory.newComponent,L=-1,J=mstrmojo.array,N=mstrmojo.hash,F=mstrmojo.ag.models.template.AgDataInterface;function b(g){var h=null;if(g&&g.length>1){h=new mstrmojo.XtabVACP();h.cps=g;}return h;}function P(j){if(!j||this._onDemandCP){return null;}var w=j.bc,s=j.tc,k=j.tbc,x=j.rm===2,h=x?this.gridData.ghs.rhs.items.length:w,l=s-h,m=x?k-w:s-h,t=Math.ceil(m/w),o=[],p=[],n;if(x){w=Math.floor(l/t);}for(n=0;n<t;++n){if(x&&t===(n+1)&&l>w){w=l;}var g=Math.min(l,w),q,u;q=this.createOnDemandCP(n+1,g,I);u=this.createOnDemandCP(n+1,g,R);o.push(e.call(this,q,this.rhsCPList,n+1));p.push(e.call(this,u,this.valuesCPList,n+1));l-=w;}this._onDemandCP={rhs:o,vls:p};return this._onDemandCP;}function S(h,j){var g=(h&&h.items)||[];if(j&&!h.ignoreCells&&g.length){var i=[];g[0].items.forEach(function(){i.push({items:[]});});g.forEach(function(k){k.items.forEach(function(m,l){i[l].items.push(m);});});h.items=i;}return h;}function Q(o,i,m,j){if(o.isv){var l=o.gts&&o.gts.page;if(m&&l&&l.length){var n=-1;l.some(function(q,p){if(q.otp===L){q.n=mstrmojo.desc(3582,"Metrics");n=p;return true;}});if(n>-1){var h=o.ghs&&o.ghs.phs,g=h&&h.items,k=[];J.forEach(g,function(p){J.forEach(p.items,function(q){if(q.ui===n&&q.cet){q.ui=q.tui=0;delete q.o;q.isObjHeader=true;k.push(q);return false;}});});if(!m.length){j.push(l[n]);m.push({items:k});i.cws.push({w:""});}}}}}function e(k,h,g){if(this.isTxnModeChanging&&h){var j=J.find(h,"blockNum",g),i=j!==-1?h[j]:{};return Object.assign(k,i);}return k;}mstrmojo.XtabTitlesCP.prototype.shouldClonedLastTitleCell=function(){return false;};mstrmojo._HasContentProvider=mstrmojo.provide("mstrmojo._HasContentProvider",{titlesCP:null,chsCP:null,rhsCP:null,valuesCP:null,dataBlocks:null,onDemandIF:true,initDataBlocks:function d(g){if(!this.dataBlocks){this.dataBlocks=[];}this.dataBlocks[0]=g;},prepareCP:function Z(){var g=this.gridData,i=this.rw=g.rw,h=this.rhsCP;if(h&&i&&i.row.tc===0&&i.col.tc===0){h.rc=0;}this._onDemandCP=null;},_setupCP:function E(m){var j=this.titlesCP=this.getTitleCP(m),l=this.chsCP=this.getColumnHeadersCP(m),h=this.rhsCP=this.getRowHeadersCP(m),i=this.valuesCP=this.getValuesCP(m);j.forceAutoRowHeight=l.forceAutoRowHeight=m.rh;var p=new mstrmojo.XtabVACP();var g=this.getHACP();g.cps=[j,l];p.cps=[g];var n=this.getHACP(this.useLevelHACP());n.cps=[h,i];p.cps.push(n);var o=m.gmh&&m.gmh.gmrh,k=m.rw&&m.rw.row;if(o&&k){p.gsmh={};p.gemh={};p.gsmh[k.bb]=o.gsmh;p.gemh[k.bb+k.bc-1]=o.gemh;}this.zone.cp=p;},destroy:function c(g){this.rhsCP=null;this.chsCP=null;this.valuesCP=null;this.titlesCP=null;this.dataBlocks=null;this.rhsCPList=null;this.valuesCPList=null;this._onDemandCP=null;this._super(g);},useLevelHACP:function B(){return !!this.isOutlineMode;},getTitleCP:function D(g){return this.initCP(g,this.interactiveCellsArray,H);},initCP:function O(n,o,m,h,j,g,k){var l={gridData:n,type:m,interactiveCellsArray:o,defn:this.defn},i=!!this.isEnteringTxnMode;l.base=h||l.base;l.lookupBase=j||l.lookupBase;l.axis=g||l.axis;if(!k){if(m===H){l.showMetricsLabel=n.gridProps&&n.gridProps.sml;if(n.stitchSectionKey){k=new mstrmojo.MultiXtabTitlesCP(l);}else{k=new mstrmojo.XtabTitlesCP(l);}}else{if(i){mstrmojo.EditableTxnXTabCP=a(mstrmojo.XtabCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableTxnXTabCP",isDossierTransaction:true});k=new mstrmojo.EditableTxnXTabCP(l);}else{k=new mstrmojo.XtabCP(l);}}}else{N.copy(l,k);}if(this.needRCForHeaders){k.needRC=(m===H||m===M);}return k;},getColumnHeadersCP:function K(n){var i=n.gts&&n.gts.col;i.some(function(w){if(w.otp===L){w.n=mstrmojo.desc(3582,"Metrics");return true;}});var h=n.ghs&&n.ghs.chs,l=h&&h.items;Q.call(this,n,h,l,i);if(n.isv&&i.length>0){var o=0,k=l.length,u,j,s=[],m=[],q=[],t,p,g=0;J.forEach(l,function(w){g=0;J.forEach(w.items,function(x){g+=x.rs||1;});o=Math.max(g,o);q.push(1);m.push(0);});for(u=0;u<o;u++){t=[];for(j=0;j<k;){p=l[j].items[m[j]]||{rs:1,cs:0,isDummy:true};if(!p.rs||(p.rs===1&&!p.isDummy)){t.push(p);m[j]+=1;}else{if(p.rs===q[j]){q[j]=1;m[j]+=1;}else{if(q[j]===1){t.push(p);}q[j]+=1;}}j+=p.cs||1;}s.push({items:t});}h.items=s;if(this.onColHeadersRotated){this.onColHeadersRotated(h);}}return this.initCP(n,this.interactiveCellsArray,G,h,i,M);},shouldIncludeRhs:function U(h){var i,g;if(!h.stitchSectionKey){return true;}i=h.gts&&h.gts.row;if(h.gsi.length===1&&!this.isOutlineMode&&!F.hasMicrocharts(h.gsi[0])){g=h.gts.col;return(i&&i.length>0)||(g&&(g.length>1||(g.length&&g[0].otp!==L)));}return i&&i.length>0;},getRowHeadersCP:function A(g){var j=g.gts&&g.gts.row,h;j.some(function(k){if(k.otp===L){k.n=mstrmojo.desc(3582,"Metrics");return true;}});if(this.shouldIncludeRhs(g)){h=g.ghs&&g.ghs.rhs;}var i=this.initCP(g,this.interactiveCellsArray,I,h,j,f);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){P.call(this,this.rw.row);}this.rhsCPList=[i].concat(this._onDemandCP.rhs);return b(this.rhsCPList)||i;}return i;},getValuesCP:function X(i){var g=S(i.gvs,i.isv),h=this.initCP(i,this.interactiveCellsArray,R,g,i.gts&&i.gts.col);i.isv=false;if(this.onDemandIF&&this.rw){if(!this._onDemandCP){P.call(this,this.rw.row);}this.valuesCPList=[h].concat(this._onDemandCP.vls);return b(this.valuesCPList)||h;}return h;},getHACP:function C(h){var g;if(h){g=new mstrmojo.XtabLevelHACP();if(this.outlineState){g.outlineState=this.outlineState;}}else{g=(this._super&&this._super())||new mstrmojo.XtabHACP();}return g;},createOnDemandCP:function Y(g,h){var i;if(mstrApp.isAppStateTransactionMode&&mstrApp.isAppStateTransactionMode()){mstrmojo.EditableTxnXtabOnDemandCP=a(mstrmojo.XtabOnDemandCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableTxnXtabOnDemandCP",isDossierTransaction:true});i=new mstrmojo.EditableTxnXtabOnDemandCP();}else{i=new mstrmojo.XtabOnDemandCP();}i.dataSource=this;i.blockNum=g;i.rc=h;return i;},dataDownloaded:function W(h,n){if(this.destroyed){return ;}var p=n.blockNum,g=this.rhsCPList[p],i=this.valuesCPList[p],o=h.data,l=this.gridData;o._bidx=p;this.dataBlocks[p]=o;if(!g||!i){return ;}var q=S(o.gvs,o.isv);o.isv=false;this.initCP(o,this.interactiveCellsArray,I,o.ghs&&o.ghs.rhs,o.gts&&o.gts.row,f,g);this.initCP(o,this.interactiveCellsArray,R,q,l.gts&&l.gts.col,null,i);g.initContent();i.initContent();this.numRowsDownloaded+=parseInt(g.rc,10);if(this.updateStatus){this.updateStatus(mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);}var k=this.zone;if(k){var m=k.cp;if(m){var s=o.gmh&&o.gmh.gmrh,j=o.rw&&o.rw.row;if(s&&j){m.gsmh[j.bb]=s.gsmh;m.gemh[j.bb+j.bc-1]=s.gemh;}}k.dataDownloaded();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.models.TransactionsInterface","mstrmojo.ag.EnumRefreshActions","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumVisualizationTemplates","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.DatasetDoubleClick","mstrmojo.vi.models._CheckDataCards","mstrmojo.models.ParametersInterface","mstrmojo.vi.util.TemplateUtils","mstrmojo.vi.controllers.EnumEvents","mstrmojo.vi.ui.rw._VisDnDHelpers","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.pendo.PendoHelper","mstrmojo.pendo.PendoParameterEnums");var O=mstrmojo.hash,K=mstrmojo.array,Y=mstrmojo.func,j=mstrmojo.vi.util.TemplateUtils,AG=mstrmojo.vi.ui.DatasetUnitMenuUtils,X=mstrmojo.vi.ui.rw._VisDnDHelpers,B="00000000000000000000000000000000",AP=mstrmojo.vi.models.EnumDragSources,l=mstrmojo.models.ParametersInterface,AL=mstrmojo.chart.model.enums.EnumDSSObjectType,t=mstrmojo.vi.enums.EnumFeatures,AS=mstrmojo.vi.controllers.EnumEvents,AJ=mstrmojo.vi.viz.EnumVisualizationTemplates,b=mstrmojo.vi.viz.EnumDSSDropZones,AK=mstrmojo.models.TransactionsInterface,w=mstrmojo.ag.EnumRefreshActions,P=mstrmojo.mstr.EnumDSSXMLObjectTypes,f=mstrmojo.pendo.PendoHelper,A=mstrmojo.pendo.PendoParameterEnums;var e={ABOVE:0,ON:1,BELOW:2};mstrmojo.vi.models.DropZoneItemType=null;mstrmojo.vi.models.DropZoneType=null;mstrmojo.vi.models.DropZonesEditorConfigType=null;function u(Ac,AY,Aa,Ad,Ag,Ab,Ae,Af){var AZ={act:Ac,zoneId:AY,unitId:Aa,unitType:Ad};if(Ag!==undefined){AZ.unitPos=Ag+1;}if(Af!==undefined){AZ.is_disableonly=Af;}if(Ab){AZ.datasetId=String(Ab);AZ.datasetType=String(Ae);}return AZ;}function AT(AY){return function(AZ){var Aa=[{t:AY,did:NaN}];return !!this.getAllowDropInfo(AZ,Aa,AZ.items.length-1,e.BELOW,{src:{data:{src:AP.DATASETS}}}).allowedItems.length;};}function AE(Ad,Af){var Ac=this.getZoneModelByZoneId(b.XAxis).items,Ah=this.getZoneModelByZoneId(b.YAxis).items,Ae;if(Ac.length&&this.isMetric(Ac[0])){Ae=false;}else{if(Ah.length&&this.isMetric(Ah[0])){Ae=true;}else{if(Ac.length&&!Ah.length){Ae=true;}else{if(!Ac.length&&Ah.length){Ae=false;}else{Ae=Af.isBar?Af.isVerticalBarVis(Af.getVisType()):true;}}}}var Ai,AY=Ae?Ac:Ah,Aa=Ae?Ah:Ac,AZ=[],Ab=[],Ag=[];while(Ad.length){Ai=Ad.shift();if(this.isMetric(Ai)){Ab.push(Ai);}else{AZ.push(Ai);}}if(AZ.length&&!AY.length){Ag.push(AZ.shift());}if(Ab.length&&!Aa.length){Ag.push(Ab.shift());}return Ag.concat(AZ).concat(Ab);}function AD(AZ){var AY=[],Ab=false,Aa=this;K.forEach(AZ,function(Ac){if(Aa.isMetric(Ac)&&!Ab){AY.push(Ac);Ab=true;}else{if(!Aa.isMetric(Ac)){AY.push(Ac);}}});return AY;}mstrmojo.vi.models.DropZonesModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.models._CheckDataCards],{scriptClass:"mstrmojo.vi.models.DropZonesModel",hostId:"",docModel:null,getDropZones:mstrmojo.emptyFn,postAddActions:mstrmojo.emptyFn,getDZFlatStruct:function i(){var Ac=this.getHost().model.data,Ad=Ac.gsi||{},AZ=(Ad.rows||[]).concat(Ad.cols||[]),Ab={},Aa={},AY=Ac.dz;AZ.forEach(function(Ae){if(Ae.hasOwnProperty("st")&&Ae.hasOwnProperty("did")){Ab[Ae.did]=Ae.st;}});if(AY){Object.keys(AY).forEach(function(Ai){var Ae=AY[Ai],Af=Ae.TemplateUnit||[],Ah=Ae.TemplateMetric||[],Ag=Af.concat(Ah);Ag.forEach(function(Aj){var Ak=Aj.id;if(Aj.st===undefined&&Ab.hasOwnProperty(Ak)){Aj.st=Ab[Ak];}});if(Af.length>0&&Ah.length>0){Ag.sort(function(Ak,Aj){return Ak.idx-Aj.idx;});}Aa[Ai]=Ag;});}return Aa;},getAvatarIconClass:function G(){throw new Error(this.scriptClass+" must implement getAvatarIconClass method.");},canSwapAxis:function AB(){return false;},swapAxis:function AF(){if(this.canSwapAxis()){throw new Error(this.scriptClass+" must implement swapAxis method if this.canSwapAxis returns true.");}},canDefineSubtotals:function(){var AY=this.getHost();if(AY&&AY.GMController&&AY.GMController.isWaterfall){return true;}return false;},hasVisibleSubtotals:function AU(){var AY=this.getHost();return AY.getWidgetPropertyValue("totalShw");},showQuickSubtotals:function h(){var AY=this.getHost();AY.writeGlobalProperty("totalShw",true);},hideDefinedSubtotals:function M(){var AY=this.getHost();AY.writeGlobalProperty("totalShw",false);},getZoneMenuItems:function N(AZ,AY){},getUnitMenuWhitelist:function Z(){},getUnitMenuItems:function AO(AZ,AY,Ab,Aa){},getMultiUnitsMenuItems:function n(AZ,AY,Aa){var Ab=this.id;if(!mstrApp.isInVFConfigMode&&AG.getMultiSelectionShortcutMetricFunctions(Aa).length&&mstrmojo.resolveFeature(t.INSERT_NEW_METRIC)){AZ.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[Ab].getMultipleMetricsCalcMenus(AY,Aa,true);});}AZ.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[Ab].deleteItems(AY,Aa);});},deleteItem:function AX(AZ,AY){this.throwAbstractMethodError("deleteItem");},deleteItems:function AX(AY,AZ){this.throwAbstractMethodError("deleteItems");},isMetricLike:function AR(AY){if(!AY){return false;}return AY.t===P.Metric||l.isMetricParameterItem(AY);},addZoneItem:function AA(Ab,Ac){Ab.t=Ab.t||4;if(Ab.did===undefined){Ab.did=Ab.id;}var Aa=this.getHost(),Af=O.walk("model.data.gsi",Aa),AY=Af&&j.findUnitsById(Af,Ab.did)[0];if(AY){O.copyProps(["n","um"],AY,Ab);}var AZ=this.docModel.datasets,Ae=false,Ad=this.isMetricLike(Ab)?"mx":"att";Object.keys(AZ).every(function(Ag){(AZ[Ag][Ad]||[]).every(function(Ai){if(Ai.did===Ab.did){Ae=true;var Aj,Ah=Ai.n;for(Aj in Ai){if(!Ab.hasOwnProperty(Aj)){Ab[Aj]=Ai[Aj];}}if(Ah!==Ab.n){Ab.objectNameinDataset=Ah;}}return !Ae;});return !Ae;});Ac.push(Ab);},getZone:function D(Ad,Ac,Ab,AY,AZ){var Aa=[];(Ab||[]).forEach(function(Ae){this.addZoneItem(O.copy(Ae),Aa,AZ);},this);return{n:Ad,id:Ac,enabled:!AY,cssClass:(AZ&&AZ.allowSingle)?"singleUnitZone":"",getDropIconCls:function(){return"pivot";},title:(AZ&&AZ.title)||"",items:Aa};},getZoneForObject:function q(AZ){var AY=null;this.getDropZones().zones.every(function(Aa){if(K.find(Aa.items,"did",AZ)>-1){AY=Aa;return false;}return true;});return AY;},getUnitIndexInZone:function o(AY,Aa){var AZ=K.find(AY.items,"did",Aa.did);if(AZ===-1&&Aa.paraId){return K.find(AY.items,"did",Aa.paraId);}return AZ;},blockDropWithBinaryData:function F(AZ){if(!AZ){return false;}const Aa=AZ.t;const Ab=AZ.de;const AY=AZ.st===12033;return Aa==P.Consolidation||Aa==P.Filter||Ab||AY;},isZoneDropAllowed:function AW(AY,Ad){var AZ=Ad.items,Ab=AZ&&AZ.length&&AZ[0],Aa=this.getHost(),Ac=Aa&&Aa.isBinaryData;if(!AY.enabled){return false;}if(!X.canDropItem(Ab)){return false;}if(Ac&&this.blockDropWithBinaryData(Ab)){return false;}return true;},getAllowDropInfo:function z(AZ,Aa,AY,Ab){return{allowedItems:Aa.concat(),removeReplaced:Ab===e.ON&&AZ&&AZ.items&&AZ.items[AY]&&K.find(Aa,"did",AZ.items[AY].did)===-1};},getTargetEdgePortion:function L(AY){return 0.33;},allowInsertNewMetric:function(AY){return AY.id!==b.SizeBy&&AT(4).call(this,AY);},allowInsertNewAttribute:AT(12),unitsDropped:function Q(AY,AZ,Aa,Ac,Ab){if(this.unitDropped!==mstrmojo.vi.models.DropZonesModel.prototype.unitDropped){return this.unitDropped(AY,AZ,Aa.idx,Aa.edge,Ac,Ab);}this.throwAbstractMethodError("unitsDropped");},getHost:function y(){return mstrmojo.all[this.hostId];},getHostModel:function W(){this.throwAbstractMethodError("getHostModel");},shouldMetricNameShowIcon:function d(){return true;},getAddUnitsFromDataSourceAction:function AC(Aj,Ae,Ah){var Ap=this,Ag=Ap.getHost(),Am=Ap.docModel,Ak=Am.controller,Aq=this.getHost(),Ao=Aq&&Aq.GMController,AY=Ao&&Ao.isBar,Al=Ao&&Ao.isHistogram,An=Ao&&Ao.isArea,Ai=Ao&&Ao.isLine,AZ=Ao&&Ao.getVisType()===AJ.GRAPHCOMBINATIONBARAREADUALAXIS,Ad,Ac;if(AY||An||Ai||AZ){Aj=AE.call(this,Aj,Ao);}if(Al){Aj=AD.call(this,Aj);}Ah=Ah||[];var Ab=false,Af=[],Aa;[].concat(Aj).forEach(function(As,Ar){Aa=this.isMetric(As);Ab=Aa||Ab;Ad=mstrmojo.vi.models.DatasetDoubleClick.addObject(As,Ae||As.datasetId,this,Ar);Ac=Ad&&O.walk("0.actions",Ad);Ah=Ah.concat(Ad);if(Aa){Af.push(As);}},this);if(Ah&&Ah.length){if(Ab&&Ac){Ac.push(Aq.model.getValuesDefaultFormatGridZoneAction(Af,true));}}return Ah;},addUnitsFromDataSource:function AH(Ah,Ae,Ac,AZ){var Aj=this,Am=Aj.getHost(),An=Aj.docModel,Al=Am.k,Ad=An.controller,Aa=mstrmojo.vi.models.DatasetDoubleClick.getExtras(this),AY=An.parameters,Ag=An.datasets[Ae]&&An.datasets[Ae].parameters,Ak=O.walk("defn.vis.vn",Am),Ab=this.isEnhancedKPI(Ak);Ac=this.getAddUnitsFromDataSourceAction(Ah,Ae,Ac);var Ai=Ad.cmdMgr.pos+1;var Af=function(){if(Ac&&Ac.length){var Ap=Ad._getXtabCallback(Aj.getHost());Ap=Y.wrapMethods(Ap,{success:function(Aq){An.raiseEvent({name:AS.UNIT_DROP_ZONE_MODIFIED,srcKey:Al});if(Ab){Am.raiseEvent({name:AS.ICONIC_VIZ_DROP_ZONE_MODIFIED,srcKey:Al,info:{beginPos:Ai}});}if(f.isPendoEnabled()){var Ar=null;K.forEach(Ac,function(As){if(As.act==="updateTemplate"){K.forEach(As.actions,function(At){if(At.act==="addUnit"&&At.paramTargetType!==undefined){Ar=At.unitId;}else{if(At.act==="addDropZoneUnit"){var Au=K.find(AY,"did",At.unitId);if(Au===-1){Au=K.find(Ag,"did",At.unitId);}if(Au!==-1){Ar=At.unitId;}}}});if(Ar){window.pendo.track(A.EVENT_NAME.PARAMETER_ADDITION_TO_VIZ,{visualizationType:Am.gridData!==undefined?A.VIZ_TYPE.GRID:f.resolveGraphType(Am),parameterID:Ar});}}});}}});if(AZ){Ap=Y.wrapMethods(AZ,Ap);}var Ao=function(){An.checkAndNotifyVFChangeOnDZUnitsUpdate({actions:Ac,zm:Aj},function(){Ac=An.wrapUnsetVisualizationFilterAction(Ac);return Ad.submitUndoRedoUpdates(Ac,{},Ap,Aa);},function(){return Ad.submitUndoRedoUpdates(Ac,{},Ap,Aa);});};if(Aj.existLargeOrManyItems()){Aj.warnAndExecCallBackForAddUnits(function(){Ao();});return ;}if(Am.isOutlineMode){Aj.warnAndExecCallBackForOutlineAddUnits(function(){Ao();});return ;}Ao();}};Af();},changeZoneUnits:function AM(AZ,AY,Aa){},getZoneAddCandidates:function k(AY){return[];},getUpdateCallback:function AI(){var AY=this.id;return{success:function(Ac){var AZ=mstrmojo.all[AY];if(!AZ){return ;}var Ai=AZ.getHost();if(!Ai){return ;}var Ae=mstrmojo.all.visualizationFilterToolbar,Ah=AZ.docModel,Af,Aa,Ag,Ab;if(mstrApp.isInVFConfigMode){Af=Ai.zonesModel;Ai.parent.selectVIUnit(true);Ab=Af&&Af.isTemplateContainAttCategoryItem();mstrApp.isEnableSaveBtn=Ab;Ae.toggleSaveBtn(Ab);}else{if(Ai.isAMSelector&&Ai.isAMSelector()){Aa=Ai.k;}else{Aa=Ai.parent&&Ai.parent.k;}Ag=Ah.getPanel().getUnitByKey(Aa);const Ad=Ac&&Ac.shouldSelectVIUnit;if(Ag&&(!mstrApp.isAIMode||Ad===true)){Ag.selectVIUnit(true);}}}};},getUpdateTemplateAction:function s(AY,AZ){return this.docModel.getDataService().getUpdateTemplateAction(AZ||this.getHost().k,AY);},getReplaceCandidates:function p(Ae,Al){var Ag=[],Ad=Al.t,AY=l.isObjectParameterItem(Al),Ai=AY&&Al.targetType===4,Ac=this.getHostModel().datasetId,Aj=Ae.id===b.AdditionalMetrics,Ak=this.getHost(),Ah=Ak.getChartStyle&&Ak.getChartStyle()==="NewGraphMatrixVisualizationStyle",Aa=Ak&&Ak.isBinaryData,Af=this;const Ab=function(Am,An){if(An.paraId){return Am===An.paraId;}else{return Am===An.did;}};this.getDropZones().zones.forEach(function(Am){((Am&&Am.items)||[]).forEach(function(Ap){const Aq=Ap.t;if(Aa&&Af.blockDropWithBinaryData(Ap)){return ;}const An=Ap.did;const Ao=(Aq===4&&Ad===4)||(Aq!==4&&Ad!==4);if(Aq!=undefined&&An!=undefined&&Aq!==21&&An!=="-1"&&An!==B&&Ao&&!Ab(An,Al)&&!Ap.paraId&&!l.isObjectParameterItem(Ap)&&K.find(Ag,"did",An)===-1){Ag.push(Ap);}});});if(!Ah||!Aj){if(Ac){const AZ=(Ad===4||Ai)?["mx"]:["att"];this.docModel.getDatasetUnits(AZ,null,Ac).forEach(function(Am){if(Aa&&Af.blockDropWithBinaryData(Am)){return ;}if(K.find(Ag,"did",Am.did)===-1&&!Ab(Am.did,Al)&&!Am.hide&&!Am.paraId&&!l.isObjectParameterItem(Am)&&!Ak.model.hasSameRecursiveAttributeGroup(Am,Ak.gridData,Al)){Ag.push(Am);}});}}return AG.getSortedDatasetUnits(Ag);},getDropTargetIndex:function AQ(AZ,Ab){var AY=Ab.idx,Aa=(Ab.edge===e.ON&&!Ab.removeReplaced)?e.BELOW:Ab.edge,Ad=AY,Ac=this,Ae={};Ab.allowedItems.forEach(function(Ag){var Af=Ac.getUnitIndexInZone(AZ,Ag);if(Af!==-1){Ae[Af]=Ag;}});O.forEach(Ae,function(Ag,Ah){var Af=parseInt(Ah,10);if(Af<AY){Ad--;}else{if(Af===AY){Aa=e.ON;}}});return Aa===e.BELOW?(Ad+1):Ad;},getAddDropZoneUnitAction:function C(AZ,Ab,AY,Aa){return u("addDropZoneUnit",AZ.id,Ab.did,Ab.t,AY,Aa&&Aa.datasetId,(Aa&&Aa.datasetType)||AL.DssTypeReportDefinition);},getAddDropZoneUnitsActions:function AN(AZ,Aa,AY,Ab){return Aa.reverse().map(function(Ac){return u("addDropZoneUnit",AZ.id,Ac.did,Ac.t,AY,Ab&&Ab.datasetId,(Ab&&Ab.datasetType)||AL.DssTypeReportDefinition);});},getRemoveThresholdsActions:function I(AY,Aa){var Af=Aa.id||Aa.did;var Ab=this.getHostModel(),Ae=Ab&&Ab.gsi,Ac=Ae&&Ae.thresholds&&Ae.thresholds[Af]||[],Ad=[];for(var AZ=Ac.length-1;AZ>=0;AZ--){Ad.push({act:"clearThreshold",unitId:Af,unitType:Aa.t,tid:Ac[AZ].tid});}return Ad;},getRemoveDropZoneUnitActions:function S(AY,Ab,Ac){if(Ac===undefined||Ac===null){Ac=1;}var Ad=[];var Aa=this.getHost(),AZ=Aa.isCustomVis;if(AY.id===b.ColorBy&&this.isMetric(Ab)&&!AZ){Ad=this.getRemoveThresholdsActions(AY,Ab);}if(Ab){Ad.push(u("removeDropZoneUnit",AY.id,Ab.did,Ab.t,undefined,undefined,undefined,Ac));}return Ad;},checkAndAddThresholdAction:function H(Aa,AY,AZ){return false;},getAllZones:function(){return this.getDropZones().zones||[];},getClearAllUnitsActions:function AV(){var AY=[];(this.getAllZones()).forEach(function(AZ){((AZ&&AZ.items)||[]).forEach(function(Aa){Array.prototype.push.apply(AY,this.getRemoveDropZoneUnitActions(AZ,Aa));},this);},this);return AY;},getClearAllUnitsUnTemplateActions:function g(){return[];},clearAllDropZones:function x(Ae){var Aa=this.docModel,Ac=this,AZ=Ac.getHost(),Ad=O.walk("defn.vis.vn",AZ),AY=Ac.getAllZones().filter(function(Ag){return Ag&&Ag.items&&Ag.items.length;}).map(function(Ag){return Ag.id;}),Ab=function(){Ae=Ae||{actions:[]};Ae.actions=Aa.wrapUnsetVisualizationFilterAction(Ae.actions);Ac.clearAllDropZonesDeferred(Ae);},Af=function(){Ae=Ae||{actions:[]};if(Y.safeCall("isTimeSeriesInsightsViz",Aa)(Ad)&&AY.includes(b.BreakBy)){var Ag=Aa.getInsightVizBreakByAction(Ac);Ae.actions.push(Ag);}Ac.clearAllDropZonesDeferred(Ae);};return Aa&&Aa.checkAndNotifyVFChangeOnClearAll({zm:Ac,ca:AY,cmb:true},Ab,Af);},postClearAllFn:mstrmojo.emptyFn,clearAllDropZonesDeferred:function J(Am){var Ag=this,Ac=this.getClearAllUnitsActions(),Ai=this.getClearAllUnitsUnTemplateActions(),Aa=this.getHost(),Aj=Aa.id,Ap=Aa.gridData||Aa.model.data||Aa.node.data,Af=Ap.vlexpr,Al=this.docModel,AY=Aa.model,Ah=Al.controller,Ak=true,AZ=Y.wrapMethods({success:function(){var Aq=mstrmojo.all[Aj];if(Aq._viSelections){Aq.clearSelections();Aq.endSelections();}}},Ah._getXtabCallback(Aa),{success:function Ab(){var Aq=mstrmojo.all[Aj];Aq.raiseEvent({name:"regenerateToolbar"});if(Ag.postClearAllFn){Ag.postClearAllFn();}}}),An=AY.getKeepOnlyActionsForAssociatedNodes([],AZ);if(Af){An.actions.push(Ah.dataService().getUpdateTemplateAction(Aa.k,AY.getRemoveMetricLimitsAction(Af)));}if(Am){Am.actions=[].concat(Am.actions).concat(An.actions);Am.callback=Y.wrapMethods(Am.callback,An.callback);}else{Am=An;}if(Ai&&Ai.length>0){Am.actions=Am.actions.concat(Ai);}var Ao=Y.safeCall("hasActionButton",Aa)(),Ad=Y.safeCall("getActionButtonConfig",Aa)();if(Aa.hasTransaction&&Aa.hasTransaction()&&Aa.canConfigureTransactions&&!Ao){var Ae=Aa.transactionHandler.getPauseTransactionsAction();if(Ae){Am.actions=Am.actions.concat(Ae);}Ak=false;}else{if(Ao&&Ad.actionButtonDefn.trid){Am.actions.push({act:"clearTxn",nodeKey:Aa.getTemplateKey()});}}this.submitDropZoneTemplateUpdates(Ac,Am,Ak);},getUngroupAddActions:function U(AZ,Ac,AY){var Ab=this.getHost(),Aa=Ab.model,Ad=[O.copy({isUngroup:1,deId:Ac.did},Aa.getAddTemplateUnitAction(AY,Ac.dsId,AZ.id,K.find(AZ.items,"did",Ac.did)))];return[this.getUpdateTemplateAction(Ad)];},isEnhancedKPI:function E(AY){var AY=AY||O.walk("defn.vis.vn",this.getHost());return"ImageEnhancedKPI"===AY;},submitDropZoneUpdates:function R(Ab,Ag,Aa,AY){var Ai=this.getHost(),Ah=this.docModel,Ae=Ah.controller,Ac=this.isEnhancedKPI(),AZ=[].concat(Ab||[]);if(AZ&&AZ.length){if(!AY){if(Y.safeCall("hasActionButton",Ai)()){mstrApp.showActionImpactWaning=true;}else{if(Y.safeCall("hasTransaction",Ai)()){mstrApp.showTxnImpactWarning={nodeKey:Ai.getNodeKey()};}}}var Ad=Ag||Ae._getXtabCallback(Ai);var Af=Ae.cmdMgr.pos+1;Ad=Y.wrapMethods(Ad,{success:function(Aj){if(Ac){Ai.raiseEvent({name:AS.ICONIC_VIZ_DROP_ZONE_MODIFIED,srcKey:Ai.k,result:Aj,info:{beginPos:Af}});}}});Ae.cmdMgr.execute({execute:function(){this.submit(AZ,Ad,Aa);},urInfo:{callback:Ad}});}},submitDropZoneTemplateUpdates:function a(AY,Ab,AZ){var Aa=(AY&&AY.length)?[this.getUpdateTemplateAction(AY)]:[];if(Ab&&Ab.actions){Aa=Aa.concat(Ab.actions);}this.submitDropZoneUpdates(Aa,Ab&&Ab.callback,Ab&&Ab.extras,AZ);},getHighlightTargets:function m(AZ,AY){return[AY];},getHostKey:function c(){var AY=this.getHost();return AY.k;}});mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION=e;mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE={ATTRIBUTE:12,METRIC:4,LONGITUDE:"long",LATITUDE:"lat"};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TargetMask","mstrmojo.css","mstrmojo.desc","mstrmojo.hash");var B="targetMask";mstrmojo.vi.ui._HasTargets=mstrmojo.provide("mstrmojo.vi.ui._HasTargets",{_mixinName:"mstrmojo.vi.ui._HasTargets",init:function C(D){if(this._super){this._super(D);}this.addChildren([{scriptClass:"mstrmojo.vi.ui.TargetMask",alias:B,slot:"domNode",tooltipContent:this.maskTooltip,allowFilters:this.allowFilters}]);},setMaskClass:function(E,D){if(this[B].setMaskClass(E,D)){if(!this._originalContextMenu){this._originalContextMenu=this.shouldShowCustomizeContextMenu;this.shouldShowCustomizeContextMenu=function(){return false;};}if(this._originalIsDraggable===undefined){this._originalIsDraggable=this.draggable;this.draggable=false;}}},clearDisableClass:function(){this[B].clearDisableClass&&this[B].clearDisableClass();},clearMaskClass:function(){this.shouldShowCustomizeContextMenu=this._originalContextMenu;delete this._originalContextMenu;this.draggable=this._originalIsDraggable;delete this._originalIsDraggable;this[B].clearMaskClass();},widgetResized:function A(){this._super();if(this.targetMask&&this.targetMask.candidatePicker){this.targetMask.candidatePicker.resize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.models.DocXtabModel","mstrmojo.EnumRWUnitType");var C=mstrmojo.array,B=mstrmojo.hash;var F="Metrics",D=2,H="\u001E",E="\u001F";mstrmojo.vi.models.DocVisModel=mstrmojo.declare(mstrmojo.vi.models.DocXtabModel,null,{scriptClass:"mstrmojo.vi.models.DocVisModel",getHMSelecAttrElemIdsInfo:function(R){var Q=R[0],L=Q.tid,N=Q.tids,M=Q.selections,K={},S=[],P=this.scm,O=(L&&P&&P[L]);C.forEach(M,function(W){var U=(W&&W.length)||0,X=U>0?W[U-1]:{},Y=X.tid;if(P[Y]){if(!K[Y]){K[Y]=[];}K[Y].push(X.eid);}});B.forEach(K,function(U){S.push(U.join(H));});if(O&&O.showall&&S.length===0){C.forEach(N,function(U){S.push("OA:(All)");K[U]=[];});}return{eids:S.join(E),tids:Object.keys(K)};},getSelectedAttributeElementIdStr:function(S){var R=S[0],K=R.tid,L,M=R.selections,N=[],P=[];C.forEach(M||[],function(U){N=N.concat(C.filter(U,function(W){return W.tid===K;}));});N=C.distinct(N,"eid");(N||[]).forEach(function(U){P.push(U.eid);});L=P.join(H);var Q=this.scm,O=(K&&Q[K]);if(O&&O.showall&&P.length===0){L="OA:(All)";}return L;},getHMAction:function A(a){var Z=a[0],N=Z&&Z.at,R=Z.anchor,M=Z.selections,X=this.scm,K=[],O=[],Q=[],b=[],S,U,Y,L,W,P;W=this.getHMSelecAttrElemIdsInfo(a);L=W.eids;if(M.length!==0&&L===""){return null;}if(N&&((N&D)>0)&&X){C.forEach(W.tids,function(d){var c=X[d];if(c){K.push(c);O.push(c.ck);Q.push(c.ckey);b.push(c.tks);}});S=O.join(E);U=Q.join(E);Y=b.join(H);if(K.length&&L!==""){P={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:R,ck:S,tks:Y,eid:L,ctlKey:U,sliceId:this.xtab.sid,isUConDS:K[0].isUConDS,isDocVis:true}};}}return P;},getDrillWithinActionsForAssociatedNodes:function G(K,L,Q,R){var O=this,U=this.docModel,M=[U.getDataService().getDrillGridAction(this.getDrillAction(this.xtab.k,L,K))],S=R||this.xtab,N=!mstrApp.isInVFConfigMode?(S.getAssociatedNodes&&S.getAssociatedNodes()||[]):[];Q=mstrmojo.func.wrapMethods(Q,{success:function P(){C.forEach(N,function(X){var W=U.getPanel().getUnitByKey(X.k);if(W&&W.boxContent){W.boxContent.raiseEvent({name:"regenerateToolbar"});}});}});C.forEach(N,function(W){M.push(U.getDataService().getDrillGridAction(O.getDrillAction(W.k,L,K)));});return{actions:M,callback:Q};},getDrillAction:function I(L,N,K){function M(S){var R=[];for(var Q=0,O=S.length;Q<O;Q++){var W=S[Q];for(var P=0,X=W.length;P<X;P++){var U=W[P];if(mstrApp.useBinaryFormat){R.push(U.axis+"A"+(U.ui+1)+"A"+U.o);}else{R.push(U.axis+"A"+(U.ui+1)+"A"+U.o);}}}return(mstrApp.useBinaryFormat)?R:R.join(",");}return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,nodeKey:L,retainParent:K.retainParent||"",isWithin:K.drillPath.within,drillPathKey:K.drillPath.k,drillPathIndex:K.drillPath.dpi,drillElements:M(N)};},getAction:function J(U){var S=U[0],N=S&&S.at,P=S.anchor,K=S.tid,L,O,M=S.selections;L=this.getSelectedAttributeElementIdStr(U);if(M.length!==0&&L===""){return null;}if(N&&((N&D)>0)){var R=this.scm;var Q=(K&&R[K])||R[F];if(Q&&L!==""){O={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:P,ck:Q.ck,tks:Q.tks,eid:L,ctlKey:Q.ckey,sliceId:this.xtab.sid,isUConDS:Q.isUConDS,isDocVis:true}};}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.VisEnum","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasContextualLink","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.VisUtility","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw._SupportViewFilterInVizBox","mstrmojo.util.FontLoader","mstrmojo.mobile.VisRenderProfiler");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var U=mstrmojo.dom;var i={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var X=["background-color","fx"],N={width:"width",height:"height"},q=mstrmojo.array,AD=mstrmojo.func,W=mstrmojo.hash,AC=mstrmojo.VisEnum,R=AC.SERVER_JSON_ERROR_TYPE,h=mstrmojo.VisUtility,j=mstrmojo.vi.enums.EnumFeatures,y=mstrmojo.models.FormatModel,AG=y.ENUM_REACT_FORMAT_TABS,D=mstrmojo.mobile.VisRenderProfiler;var s="accessible";mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate,mstrmojo._HasContextualLink,mstrmojo.vi.ui.rw._SupportViewFilterInVizBox,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,excludeData:false,skipReRender:false,triggerReRender:false,updateFormatsOnUpdate:true,bgFormats:{},originalData:null,init:function AE(AO){this.excludeData=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());if(this._super){this._super(AO);}if(mstrApp.isInAIBot){this.excludeData=false;}},setModel:function AJ(AO){this.set("model",AO);},destroy:function AB(){var AO=this.model;if(AO&&AO.destroy){AO.destroy();delete this.model;}this._super();},resize:function b(){var AO=this.getFormats();if(parseInt(AO.height,10)===0||parseInt(AO.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(AO.height,AO.width);this.domNode.style.display="";}},setDimensions:function z(AQ,AP){var AO=this._super(AQ,AP);if(AO&&this.hasRendered&&!this.skipReRender){this.reRender();}return AO;},reRender:function S(){this.unrender();this.render();},unrender:function F(AO){mstrmojo.util.FontLoader.cancelLoadRequests(this.id,true);this._super(AO);},getWidth:function AK(){return parseInt(this.width,10);},getHeight:function o(){return parseInt(this.height,10);},getLeft:function m(){return parseInt(this.left,10);},getTop:function B(){return parseInt(this.top,10);},needExtraPaddingTop4Legend:function(){var AO=h.isOnExpressMode();return !AO&&this.parent&&this.parent.showTitleBar===false;},getFonts:mstrmojo.emptyFn(),loadFonts:function K(AO,AP){if(mstrmojo.util.FontLoader.load(this.id,AO,AP)){AP.success();}},getNodeKey:function L(){return this.node.k;},getTemplateKey:function e(){return this.node.k;},preBuildRendering:function A(){D.onRenderStart(this);if(this.requirePreload){var AO=function AO(){this.requirePreload=false;this.render();};if(mstrmojo.util.FontLoader.load(this.id,this.getFonts(),{success:AO.bind(this),failure:AO.bind(this)})){return this._super();}return false;}return this._super();},buildRendering:function E(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function w(){},getErrorTypeForControls:function H(){return this.gridData&&this.gridData.egt;},isDataNotReady:function x(){const AO=this.gridData&&this.gridData.egt;return AO===R.DATA_NOT_READY;},postBuildRendering:function(){var AP=this.isEmpty(),AO=this.getErrorTypeForControls(),AQ=this.isDataNotReady();if(mstrApp.isInAIBot){AD.safeCall("clearColorByMap",this.getDocModel())();}this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:AP||this.excludeData||AQ,controls:this.getVisEmptyMsgControls(AO)});this.applyBackground();this.addA11yClassForContent();D.onRenderFinishFromPostRendering(this);return !AP;},applyBackground:function n(){var AP=this.bgFormats,AR,AO,AS,AQ;if(mstrApp.isExpress&&!W.isEmpty(AP)){AR=this.formatHandlers=this.formatHandlers||{};AS=AR.domNode=AR.domNode||[];AO="BG";AQ=q.indexOf(AS,AO);if(AQ<0){AS.push(AO);}this.applyCSSFormatToNode("domNode",AP);}},setPalette:function AA(AQ){const AP=this.getModel();if(!AP){return ;}const AO=AP.controller;if(!AO){return ;}AO.submitUndoRedoUpdates([{act:"setPreferredPalette",pltid:AQ,nodeKey:this.getNodeKey(),partialRetrieval:{nodes:[this.getNodeKey()]}}],null,AO._getXtabCallback(this));},getVisPaletteId:function d(){return W.walk("model.data.plt.did",this);},getVisPalette:function u(){return W.walk("model.data.plt",this);},getVisPaletteColors:function Z(){const AQ=this.getVisPalette();if(AQ&&AQ.colors){return AQ.colors;}const AP=this.getVisPaletteId();if(!AP){return ;}const AO=this.getDocModel();if(!AO){return ;}return AO.getPaletteColorsForId&&AO.getPaletteColorsForId(AP);},parseBgFormats:function M(){var AO=this.id;return{success:function(AU){var AR,AW,AT,AP,AV,AQ,AS=mstrmojo.all[AO],AX=AS&&AS.getDocModel();if(AU.defn&&AU.defn.layouts&&AS&&AX){AW=AU.defn.layouts;AR=q.find(AW,"k",AX.getCurrentLayoutKey());AT=AW[AR];AP=AT&&AT.units&&AT.units[AS.k];AV=AP&&AP.fmts;if(AV){AQ=AS.bgFormats={};q.forEach(X,function(AY){if(AV[AY]){AQ[AY]=AV[AY];}});}}}};},onAppStateChange:function(AO){var AP=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),AQ=AO.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PAUSE;this.excludeData=!!(mstrConfig.resolveOnly||AP);if(this._super){this._super(AO);}if(!this.skipUpdateOverlay&&((AP&&!AQ)||(!AP&&AQ&&!mstrApp.enableUpdate))){this.raiseEvent({name:"toggleCtrlOverlay",visible:this.excludeData||this.isEmpty(),controls:this.getVisEmptyMsgControls()});if(this.triggerReRender){this.refresh();this.triggerReRender=false;}}},refresh:function AL(AO){if(this.excludeData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}this._super(AO);},getColorByDropZone:function G(){var AO=this.getData();return AO&&W.walk("dz.ColorBy.TemplateUnit",AO);},update:function p(AR){AR=AR||this.node;if(mstrApp.supportFeature&&mstrApp.supportFeature(j.SUPPORT_GLOBAL_LEGEND)){var AT=AR&&AR.keepOriginalData;if(AT){delete AR.keepOriginalData;}if((!this.originalData||!AT)&&AR&&AR.data){this.originalData=JSON.parse(JSON.stringify(AR.data));}}if(AR){var AO=AR.data;if(AO){this.model.set("data",AO);}this.waitingForData=!!AO.nsj;if(this.waitingForData){var AP="ServerJsonRWDStyle";var AS=this.model,AQ=AS.getDataService(),AU={host:this,nodes:[this.k]},AX;if(AO.wid!==undefined){AU.slices=[AO.wid];}AX=mstrmojo.func.wrapMethods(this.parseBgFormats(),AS.docModel.getUpdateColorMapCallback(),AS.docModel.getUpdateThemePaletteCallback(true),AS.controller._getXtabCallback(this,false));AQ.retrieveServerJson(AU,AX,{preserveUndo:true,style:{name:AP,params:{treesToRender:3}},params:{styleName:AP}});this.updated=true;return false;}this.updateContentFormats(AR);}if(this.model){var AW=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(AW&&AW.getDocBuilder){var AV=AW.getDocBuilder().getMojoVisName(AR);if(AV){AR.data.visName=AV;}}}this.updated=true;if(this._super){return this._super(AR);}return true;},updateContentFormats:function Y(AS){var AQ,AT,AP,AR=AS.defn,AO=this.builder;if(this.updateFormatsOnUpdate&&AR){if(AO&&AO.isPortlet&&AO.isPortlet(AR)){AT=N;}else{AT=i;}AP=AR.fmts||AR.units[this.model.k].fmts;for(AQ in AT){if(AT.hasOwnProperty(AQ)&&AP.hasOwnProperty(AQ)){this[AT[AQ]]=AP[AQ];}}}},isEmpty:function a(){return false;},canDuplicate:function g(){return true;},getVisEmptyMsgControls:function P(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function AM(){return this.model;},getData:function f(){return this.model.data;},getRowsAndCols:function(){var AO=this.model.data.gts;return(AO.row||[]).concat(AO.col||[]);},getExp:function(){var AO=this.model.data,AP=AO&&AO.sc&&AO.sc.exp;return AP;},getDocModel:function AF(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function l(){return mstrmojo.emptyFn;},renderErrorMessage:function AN(AO){var AP=document.createElement("div");AP.className="mstrmojo-message";AP.textContent=AO;this.domNode.appendChild(AP);},getMessageID:function k(){return this.model.docModel.mid||this.model.mid;},performAction:function AI(AO){var AP=this.model,AS=this.scriptClass==="mstrmojo.heatmap.vi.VisHeatMap",AR=AS?AP.getHMAction(AO):AP.getAction(AO),AQ=AR&&AR.h;if(AQ&&this.controller[AQ]){this.controller[AQ](this,AR.a);return true;}return false;},deleteSelectorControl:function c(){var AO=this.getData(),AP=AO.sc;if(AP&&parseInt(AP.ct,10)===6){delete AO.sc;}},findSelectorControl:function J(){var AP=this.getData(),AO=AP&&AP.sc;if(AO&&parseInt(AO.ct,10)===6){this.selectorControl=AO;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;},displayVizBoxVisFilterIndicator:function C(AO,AP){if(AO&&AP&&AP.displayVisFilterIndicator){AP.displayVisFilterIndicator();}},isCurrentVizBoxSelected:function O(){var AP=this.getDocModel(),AQ,AO;if(AP&&typeof AP.getSelectedViUnit==="function"){AQ=AP.getSelectedViUnit();AO=AQ&&AQ.boxContent;return AO===this;}},supportFeatureImpl:function(AQ,AS,AP,AR){var AO=AQ[AS][AP];if(AR!==undefined&&AO!==undefined){return(AR&AO)>0;}return false;},syncWithReactFormatPanel:function I(AP){if(mstrApp.supportFeature&&mstrApp.supportFeature(j.DOSSIER_REACT_FORMAT_PANEL)){var AO;if(!AP){AO=AG.PROPERTY_TAB;}this.raiseEvent({name:"updateFormatPanelSelection",tabId:AO});}},shouldEncodeHtmlContent:function(){var AO=this.getDocModel();return AD.safeCall("shouldEncodeHtmlContent",AO)();},addA11yClassForContent:function AH(){if(W.walk("parent.attachedA11yClass",this)&&this.toggleBoxContentItemsCSS){this.toggleBoxContentItemsCSS(true,s);}},getVisTooltipNode:function Q(){return this.tooltipWin||this.tooltip;},disableLassoForAIBotAndAutoAnswer:function t(){var AO=AD.safeCall("isInAIBotOrAutoAnswer",mstrApp)();if(AO){this.lassoSelectorEnabled=false;}},getScale:function(){return(mstrApp&&mstrApp.isInVFInteractMode)?1:(AD.safeCall("model.docModel.getPageScale",this)()||1);}});if(U.isTouchOptimizationEnabled()){mstrmojo.mixin(mstrmojo.mobile.vi.ui.rw._IsInPanelStack,mstrmojo.VisBase.prototype);mstrmojo.mixin(mstrmojo.mobile._VisBaseSupportsTouches,mstrmojo.VisBase.prototype);}}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.NewVisTooltip","mstrmojo.hash","mstrmojo.func");var H=mstrmojo.array,F=mstrmojo.NewVisTooltip,D=mstrmojo.hash,B=mstrmojo.func;mstrmojo.customviz._TooltipHelper=mstrmojo.provide("mstrmojo.customviz._TooltipHelper",{_mixinName:"mstrmojo.customviz._TooltipHelper",initTooltip:function A(){if(!this.tooltipWin){this.tooltipWin=this.addDisposable(new F({visId:this.id,widgetClass:this.cssClass}));this.tooltipWin.render();}},showTooltip:function J(P,R,Q){var O=this.hasLinkTooltip();if(!mstrApp.isDisplayOnMobile){var L=this.tooltipWin,K=L&&L.domNode,N=this.getTooltipContent(P);if(!K.parentNode){document.body.appendChild(K);}var M=O&&this.model.data.doslinkinfo;if(M&&this.checkLinkInfoBlockedByAsobs()){M=null;}L.showDossierTtp(N,R,M,Q);}},hideTooltip:function I(K){if(!mstrApp.isDisplayOnMobile){if(this.tooltipWin){this.tooltipWin.hide(K!==false);}}},getTooltipContent:function G(L){var M=L.additional&&L.additional.length||1,K;if(M===1){K=this.generateSimpleInfoObj(L);}else{K=this.generateGridInfoObj(L);}return K;},generateSimpleInfoObj:function C(P){var L=[],S=this,K,O=P.idValueMapping,N=P.additional,U={},R,Q,M;if(N){U=N[0].idValueMapping;}H.forEach(this.tooltipObjsInOrder,function(W){R=B.safeCall("model.getFullObjectInfo",S)(W)||B.safeCall("model.docModel.getObjectInfo",S)(W)||{};Q=D.walk("formType",R);M=D.walk("mft",R);if(W!=="seperate"){K=S.idTitleMapping[W];if(U[W]!==undefined){L.push({n:K,v:U[W],ft:Q,mft:M});}else{if(O[W]!==undefined){L.push({n:K,v:O[W],ft:Q,mft:M});}}}else{L.push(null);}});return L;},generateGridInfoObj:function E(P){var R=this,M={header:[],body:[]},L,O=P.idValueMapping,N=P.additional,S;var K=function(){var U=M.header;H.forEach(R.tooltipObjsInOrder,function(W){if(W!=="seperate"){L=R.idTitleMapping[W];U.push(L);}});if(U.length>0){return true;}return false;},Q=function(){var X=M.body,W,U;for(U=0;U<N.length;U++){W=[];X.push(W);S=N[U].idValueMapping;H.forEach(R.tooltipObjsInOrder,function(Y){if(Y!=="seperate"){if(S[Y]!==undefined){W.push(S[Y]);}else{if(O[Y]!==undefined){W.push(O[Y]);}}}});}};if(!K()){return M;}Q();return M;}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!=="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(U,S){var R=this._super(U,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=mstrmojo.boxmodel.offset(this.domNode);this.offsetTop=R.top;this.offsetLeft=R.left;},update:function F(X){X=X||this.node;if(X){if(X.data){this.set("model",X.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",X.data);}this.model=X.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(X.data.extProps,this);}var U=this.controller,S=U.view,Z=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(U.view.fullScreenInfoWindow&&(Z&&Z.defn.visName)){var Y=mstrApp.rootView.getContentDimensions();this.height=Y.h+"px";this.width=Y.w+"px";}else{this.fmts=X.defn.fmts||X.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var W in L){v=L[W];if(W in R){this[v]=R[W];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}return this.model;},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){var S=document.createElement("div");S.className="mstrmojo-message";S.textContent=R;this.domNode.appendChild(S);},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(W){var d=this.xtabModel,c=(d&&d.docModel);var e=false;if(c){var b=c.defn&&c.defn.layouts,U=null;var S;if(b){for(S in b){if(b[S].loaded){U=b[S];break;}}}var X=U&&U.units;this.selectorTargets={};if(X&&W.scObjList){for(var S=0;S<W.scObjList.length;S++){var Y=W.scObjList[S];var Z=Y.sc.tks.split("\x1E");for(var R=0;R<Z.length;R++){var a=X[Z[R]];if(a){this.selectorTargets[Z[R]]=a;if(!this.isChildOfIfw(X,a)){e=true;}}}}}}return e;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var U=this.xtabModel.getAction(R),S=U&&U.h;if(S&&this.controller[S]){this.controller[S](this,U.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,a,S){var Y=a;var W=R.getChildren(a,false);for(var U=0;U<W.length;U++){var Z=W[U];if(Z.k==S){return Z;}var X=mstrmojo.Vis.getVisGrid(R,Z,S);if(X){a=Y;return X;}}};mstrmojo.Vis.DataParser=function(U){var c=mstrmojo.Vis;return{getRowTitles:function(){return new c.Titles(U,true);},getColTitles:function(){return new c.Titles(U,false);},findMetricValue:function(g,l){var k=U.ghs.rhs.items;for(var h in k){var j=k[h].items;var f=true;for(var d in g){if(g[d]!=j[d].idx){f=false;break;}}if(f){return new mstrmojo.Vis.MetricValue(U.gvs.items[h].items[l]);}}},getTotalRows:function Y(){var d=U.ghs&&U.ghs.rhs&&U.ghs.rhs.items;return(U.eg||!d)?0:d.length;},getTotalColHeaderRows:function W(){return(!U.ghs.chs.items?0:U.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function b(d){return new c.Headers(U,d,true);},getColHeaders:function a(d){return new c.Headers(U,d,false);},getMetricValue:function Z(e,d){return new c.MetricValue(U,U.gvs.items[e].items[d]);},getColumnHeaderCount:function X(){return U.gvs.items[0].items.length;},getCSSString:function S(){return U.cssString;}};};mstrmojo.Vis.Titles=function(R,Y){var X=(Y)?R.gts.row:R.gts.col;return{size:function W(){return X.length;},getTitle:function U(Z){return new mstrmojo.Vis.Title(X[Z]);},getCSS:function S(Z){return R.css[X[Z].cni].n;}};};mstrmojo.Vis.Headers=function(S,U,Z){var a=(Z)?S.gts.row:S.gts.col;var Y=(Z)?S.ghs.rhs:S.ghs.chs;var W=Y.items&&Y.items[U].items;return{size:function b(){return(!W?0:W.length);},getHeader:function R(c){return W&&W[c]&&new mstrmojo.Vis.Header(W[c],Z?a[c]:a[U]);},getCSS:function X(c){return W&&S.css[W[c].cni].n;},getHeaderCell:function(c){return W&&W[c];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function U(X){return S.es[X].n;},getHeaderId:function U(X){return S.es[X].id;},getForms:function W(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(U,R){return{getName:function X(){return(U.idx===-1)?"":R.es[U.idx].n;},getElementId:function a(){return(U.idx===-1)?"":R.es[U.idx].id;},getObjectId:function W(){return(U.idx===-1)?"":R.es[U.idx].oid;},getElementIndex:function S(){return U.idx;},getActionType:function Z(){return U.at;},isTotal:function Y(){return U.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,a){var Z=a;return{getValue:function S(){return Z.v;},getThresholdType:function U(){return Z.ty;},getRawValue:function Y(){return Z.rv;},getCSS:function W(){return R.css[Z.cni].n;},getThresholdValue:function b(c){if(Z.ti==undefined){return c;}return R.th[Z.ti].n;},getFillColor:function X(c){if(Z.ci==undefined){return c;}return R.fc[Z.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.vi.models.DropZonesModel","mstrmojo.array","mstrmojo.hash","mstrmojo.vi.models._DropZoneCommon","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLBaseFormType");mstrmojo.requiresDescs(190,1388,3224,5188,11806,12287,13295,13296,13624,13625,14003,14655,14656,14717);var H=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.vi.ui.DatasetUnitMenuUtils,I="-1",D=mstrmojo.mstr.EnumDSSXMLBaseFormType,J=mstrmojo.vi.enums.EnumFeatures,F=mstrmojo.mstr.EnumDSSXMLObjectTypes;mstrmojo.vi.models.TemplateBasedDropZones=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{enableRAEntries:true,getClearAllUnitsActions:function G(){var L=[],K=this.getHost().model;this.getDropZones().zones.forEach(function(M){var N=M.id;M.items.forEach(function(P,O){if(P.did!==I){L.push(K.getRemoveTemplateUnitAction(C.copy(P,{axis:N,unitPos:O+1})));}});});return L;},getMultiUnitsMenuItems:function B(L,K,M){var N=this.id;if(!mstrApp.isInVFConfigMode&&E.getMultiSelectionShortcutMetricFunctions(M).length&&mstrmojo.resolveFeature(J.INSERT_NEW_METRIC)){L.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[N].getMultipleMetricsCalcMenus(K,M,false);});L.addSeparator();}L.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[N].deleteItems(K,M);});},getExtraUnitMenuItems:function A(L,K,N,M){},getUnitMenuItems:function A(P,d,b,c,Z){if(!b){throw new Error(this.scriptClass+"::getUnitMenuItems: Item must be provided.");}var W=d.items,L=this.getHost(),a=W.length,N=d.id,Q={zone:d,axis:N,idx:H.indexOf(W,b),cnt:a,item:b,metricsAxis:(this.getHost().gridInfo||{}).tma,useDropzone:Z||false},g=this,X=this.id,M=b.did===I,R=(b.t===F.Consolidation&&b.st===12033),h=mstrApp.isInVFConfigMode,O=mstrmojo.resolveFeature(J.INSERT_NEW_METRIC),Y=this.docModel,e=b.did,K=(L&&(typeof L.getNdeInfosOfGrid==="function")&&L.getNdeInfosOfGrid())||[];if(R&&!h){P.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",function(){var i={otp:b.t,id:e,n:b.n,axis:d.id,ui:Q.idx};L.derivedElementsEdit(i);});P.addSeparator();}if(!M){if(L.model.isRecursiveAttribute(b.did)&&this.enableRAEntries){P.addMenuItem(mstrmojo.desc(14655,"Expand All Levels"),"",function(){var i={id:b.did};L.raExpandAll(i,true);});P.addMenuItem(mstrmojo.desc(14656,"Collapse All Levels"),"",function(){var i={id:b.did};L.raExpandAll(i,false);});P.addSeparator();}if(this.supportWebSort()){this.addSortMenu(Q,P,true,K);}P.addSeparator();if(b.t===F.Metric&&!h){if(O){if(b.um){P.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){g.editDerivedMetric(Q);},Q);P.addSeparator();}if(Y.findDatasetIdFromUnit(e)&&!Y.isFromSolrCube(e)&&!Y.isFromMDXCube(e)){P.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",X,g.getAggregateByMetricSubMenu,Q);P.addSeparator();}P.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),X,g.getCalculationEditorCfg,Q);P.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",X,g.getShortcutMetricSubMenu,Q);P.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){g.newDerivedMetric(Q);},Q);}}if(b.t===F.Attribute){var U=b.did||"",S=U?E.getDatasetFromAttributeId(this.docModel.datasets,U):null,f=this.isDynamicLink(b);if((!S||!this.docModel.isMDXDataset(S))&&!h){if(b.da){P.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){g.editDerivedAttribute(Q);},Q);P.addSeparator();}if(((!S)||!E.isCGorCon(b,S))&&!f&&O){P.addMenuItem(mstrmojo.desc(13625,"New Attribute..."),"",function(){g.newDerivedAttribute(Q,g.allowInsertNewAttribute?!g.allowInsertNewAttribute(d):false);},Q);P.addMenuItem(mstrmojo.desc(14717,"Create Links..."),"",function(){g.newDynamicLinkAttr(Q);},Q);}}if(!h&&!E.hasOldDEOverDatasets(b.did,this.docModel.datasets)&&!f){P.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"eg",function(){var i={otp:b.t,id:b.did,n:b.n,axis:d.id,ui:Q.idx};L.derivedElementsEdit(i);});}}this.getExtraUnitMenuItems(P,d,b,Q);P.addSeparator();if(!b.isParameter&&g.hasReplaceCandidates(Q)&&(!(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||!!mstrmojo.resolveFeature(J.WEB_DRILL_AND_LINK))){P.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"mnu--unit-replace",X,g.getReplaceSubMenu,Q);}if(!b.isParameter){P.addMenuItem(mstrmojo.desc(1388,"Rename"),X,function(){mstrmojo.all[X].renameItem(c,b);});}P.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[X].deleteItem(d,Q.idx);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.models.DropZonesModel","mstrmojo.vi.models._DropZoneCommon","mstrmojo.vi.ui.DatasetUnitMenuUtils");var B=mstrmojo.hash;mstrmojo.vi.models.AMSelectorDropZones=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{scriptClass:"mstrmojo.vi.models.AMSelectorDropZones",getHostModel:function H(){return this.getHost().selectorModel.data;},getHost:function J(){var K=this._super();return K.parent;},getDropZones:function I(){var L=this.getHost(),K=[this.getZone(mstrmojo.desc(2870,"Objects"),1,L.objects,false,{title:mstrmojo.desc(16873,"Add attributes or metrics here"),})];this.dropZones=K;return{n:this.getHost().defn.ttl,zones:K};},getAllowDropInfo:function F(P,N,R,M,K){var L=this._super(P,N,R,M,K),S=this.getHost(),Q={edge:M},O=S.getAllowedDragItems(K,Q);return B.copy({allowedItems:O},L);},unitsDropped:function D(K,L,M){var N=this.getHost();N.dropFromDataSource(L,M);},deleteItem:function C(L,K){var M=this.getHost();M.objects.splice(K,1);M.getUpdateCandAction();},deleteItems:function E(K,L){var M=this.getHost();M.objects.splice(L[0]._renderIdx,L.length);M.getUpdateCandAction();},getUnitMenuItems:function A(L,K,O,M){var N=this;L.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){N.deleteItem(K,N.getUnitIndexInZone(K,O));});},addUnitsFromDataSource:function G(K,M){var L=this.getHost();L.dropFromDataSource({getCtxtDragData:function(){return{items:K};}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo.locales","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.DocDataService","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.util.TelemetryUtil","mstrmojo._HasContentProvider","mstrmojo.util.XtabHelper");var M=mstrmojo.array,I=mstrmojo.dom,R=mstrmojo.hash,c=mstrmojo.models.template.DataInterface,S=mstrmojo.util.XtabHelper,Q=c.ENUM_GRID_RESIZE,Y=Q.FIXED,B=Q.FIT_TO_WINDOW,d=Q.FIT_TO_CONTENTS,N=I.position,J=mstrmojo.EnumRWUnitType,h=mstrmojo.mstr.EnumDSSXMLObjectTypes,W=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,j=mstrmojo.util.TelemetryUtil,K="px";function k(l){return l&&l.otp===h.Consolidation&&l.ost===W.ConsolidationManaged;}function P(){var s=36;var m=this.model.docModel.getPanel(),o=m.containerNode,n=N(o),l=mstrApp.rootCtrl.view.toolbar,t=N(l.domNode);var q={};q.x=n.x;q.w=n.w;q.y=(t.y+t.h)-s;q.h=(n.y+n.h)-q.y;var p=n.y-(t.y+t.h);return{csPanelPos:q,spacerHeight:p};}mstrmojo.SharedXtabBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasContentProvider],{scriptClass:"mstrmojo.SharedXtabBase",isRTL:false,rtlHTML:"",init:function Z(l){if(this._super){this._super(l);}if(mstrmojo.locales.isRTL(mstrApp&&mstrApp.whLocaleId)){this.isRTL=true;this.rtlHTML="dir='rtl'";}},getActionCells:function g(l){var m=[],o=this.selections||{};var p=l.axis+"A"+(l.ui+1),q=o[p],n;if(q&&q[l.o]){for(n in q){var s=this.getCellForNode(q[n][0]);m.push(s);}}else{m.push(l);}return m;},getCellUnitIndex:function D(l){if(l.lo!==undefined){return l.lo;}if(l.o!==undefined){return l.o;}return l._ei;},getTargetZone:function U(){return this.zone;},supportColumnTitleSection:function O(){var m=this.gridData,l=this.defn,n=m.gsi;return M.isArray(n)?n.length===1&&!S.isDisplayOutline(m,l):true;},sort:function f(m,n,o,l){j.sortInitManipInfo(m,n);this.controller.onSort(this,this.model.getSortAction(m,n,o,l));},advSort:function e(l,n,o,m){this.controller.onGetAdvSortData(this,n,l._e&&l._e.otp,o,m);},clearSort:function b(l,m){j.clearSortInitManipInfo(l);this.controller.onClearSort(this,m);},customSort:function X(t,n){var q=this,w=this.model,s=w.getDataService(),u=w.docModel,l=u.getUnitDefinitions(this.k)[this.k].pnk,p=u.currlaykey,m=u.getNextKey(),o=w.getCreateCSVizActions(t,n,m);s.submitUpdates(o,{success:function(AC,y){var AB=AC.data,AA=M.filterOne(AB.layouts,function(AG){return AG.k===p;}),x={};x[m]=AA.xtabStyles[m];u.controller.view.updateXtabStyles(p,x);u.updateDefnCache(AC.defn,[m,l]);u.updateDataCache(AB,u.getTargetDefn(m));var AF=P.call(q),AD=N(q.domNode),z=600,AE=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.rw.CustomSortDisplayPanel",model:u,nodeKey:m,srcPanelKey:l,srcLayoutKey:p,srcViz:q,srcUnit:t,srcAxis:n,width:Math.max(AD.w,z)+"px",height:AF.csPanelPos.h+"px",left:((typeof AD.x==="number")?AD.x:0)+"px",top:((typeof AF.csPanelPos.y==="number")?AF.csPanelPos.y:0)+"px",spacer:AF.spacerHeight});AE.setVizBoxPortalStateRestore();AE.open();AE.parent=mstrmojo.findAncestor(q,"openXtabCellMenu");},failure:function(AA,AB){var y=6,AC=10000,z=0,x=function(){s.submitUpdates({act:"undo",stid:s.stid},{success:function(AD,AE){mstrApp.hideWait();},failure:function(AD,AE){if(++z<y&&AD.code==mstrmojo.mstr.EnumWebAPIErrorCodes.MSI_ADDUSERJOB_ERROR){setTimeout(x,AC);}else{mstrApp.hideWait();}}},{config:{silent:true},hideCancel:true,noUpdate:true,preserveStid:true,noDeltaXML:true});};mstrApp.showWait();x();}},{style:{params:{treesToRender:3}},noUpdate:true,preserveStid:true,noDeltaXML:true,hideCancel:true});},hasHiddenSubtotal:function a(){var m=this.gridData.gsi,l=M.isArray(m)?m[0]&&m[0].hidesb:m&&m.hidesb;return !!l;},setAllXtabWidths:function i(o){var n=this.gridData.twm||{},l=n.top,m=n.bottom,p=o?(o+K):o;(m||[]).forEach(function(q,s){l[s]=l[s]||{};l[s].w=q.w=p;});},updateScenario:function H(n,l){var m=this.gridData;m.afc=n===d;m.afw=n===B;if(n!==Y){this.setAllXtabWidths("");this.cachedMaxHeight=0;}if(l){l();}else{this.refresh();}},updateRelatedColWidths:function F(y,u){var o,l,p,q,s,z,n,x,t,m,w;if(this.isCustomSort&&this.getActionMgr().isCurrentActionSilent()){return ;}o=this.templateInterface||(new mstrmojo.models.template.DataInterface(this.gridData));l=o.getColumnHeaderData(true);p=this.gridData.twm||{};q=p.bottom;s=p.top;z=this.getTargetZone();m=false;(y||[]).forEach(function(AC){var AB=AC.colIndex,AD=l[AB]||{},AA=AD._ridx||[];n=AC.value;if(s&&q){if(AA.length>1){AA.forEach(function(AE){s[AE]=s[AE]||{};s[AE].w=q[AE].w=n;if(!m){m=true;}});}else{s[AB]=s[AB]||{};s[AB].w=q[AB].w=n;}}if(z){z.autoFitWindow=false;z.autoFitContent=false;}});w=u||(u===undefined&&m);if(w&&this.resizeColumnsBasedOnTwm){this.resizeColumnsBasedOnTwm();}this.refresh();x=this.parent;while(x){t=x.defn;if(t){if(t.t===J.SUBSECTION&&t.ck&&t.ck.hasOwnProperty(this.k)){x.adjustSectionSize();}}x=x.parent;}},changeRowScenario:function C(l,n,m){l=l||0;n=n||Y;m=!!m;var o=this,p=[];c.forEachGSI(o.gridData.gsi,function(q,s){p=p.concat(o.model.getDataService().getUpdateTemplateAction(s,{act:"changeXtabRowHeightScenario",value:n,height:l},null,o.k));},o.k);if(!m){o.submitUndoRedoActionsWithCallback(p);}},changeRowHeight:function L(l){this.changeRowScenario(l);},getBasicSubtotalEditorConfig:function A(o,p){var n=this.hasAccessibility,l=new mstrmojo.ui.menus.EditorConfig({contents:new mstrmojo.express.ui.SubtotalsWidget({onchange:function m(){var q=this.getSubtotalTypes(),s=q[0].length>0||q[1].length>0;l.set("okEnabled",s);},navMode:n}),data:{},okEnabled:false});if(!this.hasHiddenSubtotal(p)){l.contents.set("selectedItems",o||[]);}return l;},getNdeInfosOfGrid:function(){var l=[];var o=this;var n=this.model,m=this.interactiveCellsArray;M.forEach(m,function(y){if(y.isObjHeader){var w=y,s=w.otp,q=w.ost,x=o.getDEInfo(w),u=x&&x.deObject,z={did:w.id||(u&&u.did),t:s||(u&&u.t),st:q||(u&&u.st),attId:u&&u.attId,ndetype:u&&u.ndetype},t=z.attId&&k(w)&&n.getNDEFormsFromDataset(z.attId),p={n:w.n,did:w.id,t:z.t,st:z.st,ndeForms:t};l.push(p);}});return l;},shouldEncodeHtmlContent:function G(){var l=R.walk("controller.model",this),m=(l&&l.shouldEncodeHtmlContent())&&!this.isViewOnly;return m;},shouldEncodeMetricContent:function E(){var l=R.walk("controller.model",this),m=(l&&l.shouldEncodeMetricContent());return m;},isLinkInfoBlockedByAsobs:function(m){if(!m||!this.hasAsobsLink()){return false;}var n=this.model.getCellInfo(m),l=n.isMetric?this.getToCheckIdsForMetricCell(m):(n.isTitle||(m.stt===1)||m.isNDE||(!n.isHeader&&!n.isOPItem))?this.getToCheckIdsForTitleCell(m):[];return l.length>0?this.checkLinkInfoBlockedByAsobs(l):false;},getToCheckIdsForTitleCell:function(m){var l=this.model.getCellTitleInfo(m),o=l&&l.title,n=o&&(o.oid||o.id);return n?[n]:[];},getToCheckIdsForMetricCell:function(l){if(l.isMicrochart){var m=this.getColumnSetCellBelongsTo(l);if(!m){return[];}return m.mx.concat(m.cols).map(function(q){return q.did;}).filter(function(q){return q&&q!=="-1";});}var p=this.hasArrayGSI?(this.getColumnSetCellBelongsTo(l)||this.gridData.gsi[0]):this.gridData.gsi,o=p&&p.mx,n=o&&o[l.mix]&&o[l.mix].did;return n?[n]:[];}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.SharedXtabBase","mstrmojo._HasScrollbox","mstrmojo.XtabZone","mstrmojo._ShowsStatus","mstrmojo.boxmodel","mstrmojo._IsLockableXtab","mstrmojo._IsDocumentTemplate","mstrmojo.hash","mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.models.template.DataInterface","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string","mstrmojo.tooltip","mstrmojo.vi.ui.DatasetUnitMenuUtils");var e=mstrmojo.models.template.DataInterface,s=e.ENUM_LOCKED_HEADERS,Y=s.OFF,J=s.BOTH,c=mstrmojo.dom,i=mstrmojo.array,P=mstrmojo.hash,x=mstrmojo.tooltip,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,AC=mstrmojo.string,AB=mstrmojo.EnumRWUnitType,R=mstrmojo.chart.model.enums.EnumDSSBaseFormType,o,M="-1",K=-1;var X=c.isTouchOptimizationEnabled()?["touchstart"]:["click","mousemove","mouseleave","selectstart","touchstart","keydown","scroll","wheel"];function Q(AH){var AI=c.findWidget(AH),AG=[];while(AI){if(AI.defn&&AI.defn.t===AB.PANEL&&AI.domNode.style&&AI.domNode.style.display==="none"){return AI;}AI=AI.parent;}}function H(){var AG=mstrmojo.findAncestor(this,"fixedSizeCanHideShow",null,mstrmojo.DocSection);if(AG){AG.fixedSizeCanHideShow();}}function E(AG){return AG&&(AG.show?(AG.items&&AG.items.length||1):0)-1;}mstrmojo.XtabBase=mstrmojo.declare(mstrmojo.SharedXtabBase,[mstrmojo._IsLockableXtab,mstrmojo._HasScrollbox,mstrmojo._ShowsStatus,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.XtabBase",dataRenderMode:"vscroll",shouldClipLockableXtab:true,handleClicks:function F(){return true;},markupString:'<div {@rtlHTML} id="{@id}" k="{@k}" class="mstrmojo-Xtab {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div style="display: none;{@msgNodeCssText}"><div class="text"><div class="warning-icon"></div><div>&nbsp;</div></div></div><div class="mstrmojo-Xtab-overlay"></div><div class="mstrmojo-Xtab-content {@cssDefault}" title="{@tooltip}" style="{@viewportCssText}" mstrAttach:'+X.join(",")+'><table cellspacing="0" cellpadding="0"><tr><td style="vertical-align:top;padding:0;"><div style="position: relative;"><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_scrollbox" style="position:relative;{@scrollboxNodeCssText};{@scrollboxNodeOverflow}"></div></div></td></tr></table></div></div>',markupSlots:{overlayNode:function(){return this.domNode;},msgNode:function(){return this.domNode.firstChild;},maskNode:function(){return this.domNode.childNodes[1];},viewport:function(){return this.domNode.lastChild;},contentNode:function(){return this.domNode.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.lastChild;},tableContainerNode:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild;},_STATUS:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild;},_STATUS_TXT:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild.firstChild;},_TB_CELL:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},zone:null,lockHeadersCase:J,interactiveCellsArray:null,numRowFixed:false,heightLimit:0,height:0,widthLimit:0,width:0,useTouchScrolling:false,scrollInterval:0,selections:null,getCellUnitIndex:function l(AG){if(AG.lo!==undefined){return AG.lo;}if(AG.o!==undefined){return AG.o;}return AG._ei;},getCellTitleId:function d(AG){var AH="";if(AG.axis&&AG.ui!==undefined){AH=AG.axis+"A"+(AG.ui+1);}else{if(AG.mix!==undefined){AH="0A"+AG.mix;}}return AH;},getCellTooltip:function m(AT,AP){var AJ=this.shouldEncodeHtmlContent(),AM=c.position(AP);if(AJ&&AT.ts===R.DssBaseFormHTMLTag&&!AT.isDynamicLink){return{cssClass:"vi-regular vi-tooltip-C",posType:x.POS_TOPLEFT,content:mstrmojo.desc(19767,"This content has been disabled.##Please contact your administrator.").replace("##","</br>"),top:AM.y-6,left:AM.x+AM.w-6,keepArrowYPos:true,enableHover:true};}var AH=AT._e&&AT._e.oid,AV=!!AH,AL=AT.id,AU=!!AL,AQ,AO,AR,AI,AS,AN,AK,AG;if(AU){AQ=p.getUnitFromDataset(this.model.docModel.datasets,AL);}else{if(AV){AQ=p.getUnitFromDataset(this.model.docModel.datasets,AH,AT._e.otp);}}AO=AQ&&(AQ.dsc||AQ.desc);if(!AO){return null;}if(AT.isObjHeader){AR=AM.y+AM.h+3;AI=AM.x+(AM.w/2);AS=x.POS_TOPCENTER;AN="vi-regular vi-tooltip-A A-center";AK=true;}else{AR=AM.y-6;AI=AM.x+AM.w-6;AS=x.POS_TOPLEFT;AN="vi-regular vi-tooltip-C";AG=true;}return{cssClass:AN,posType:AS,content:'<div class="name">'+AT.v+'</div><div  class="dsc">'+AC.encodeHtmlString(AO,true)+"</div>",top:AR,left:AI,keepArrowXPos:!!AK,keepArrowYPos:!!AG,enableHover:true};},updateTooltipConfig:function AD(AH){var AI=AH.target||c.eventTarget(AH.hWin,AH.e),AG=this.getCellForNode(AI);if(AG){this.richTooltip=this.getCellTooltip(AG,AI);}},update:function j(AI){var AJ=P.walk("data.gsi",AI),AH=function(AK){if(!AK){return ;}if(AK.mx&&AK.mx.length){["cols","rows"].some(function(AL){return AK[AL].some(function(AM){if(AM.did===M){AM.n=mstrmojo.desc(11808,"Metric Names");return true;}});});}};if(!i.isArray(AJ)){AH(AJ);}this.set("gridData",AI.data[0]||AI.data);var AG=this.defn||AI.defn;this.sid=this.gridData.sid;this.treeType=(AG&&AG.tt)||1;this.interactiveCellsArray=[];if(this._super){return this._super(AI);}return true;},preBuildRendering:function C(){var AI=this.gridData,AG=this.height,AH=this.width,AJ=AI.rw;this.usesTouches=this.usesTouches||c.isTouchOptimizationEnabled();this.lockHeadersCase=AI.lhv||Y;this.selections={};this.numRowFixed=!!(!AG&&AJ&&AJ.row&&(AJ.row.bc<AJ.row.tc));this.prepareCP();if(AH){this.widthLimit=parseInt(AH,10);}if(AG){this.heightLimit=parseInt(AG,10);}return this._super();},renderEmptyGrid:function q(){var AJ=this.gridData,AH=this.msgNode,AI=AH.style,AG=this.viewport;if(mstrApp.isOIVM&&mstrApp.isOIVM()){AH.firstChild.childNodes[1].innerHTML=AJ.eg;}else{AH.firstChild.childNodes[1].innerText=AJ.eg;}if(AJ.eg!==""&&!this.excludeData){AI.display="block";AI.overflow="hidden";AH.className="mstrmojo-message";AG.style.display="none";}return true;},postBuildRendering:function S(){var AP=this.gridData,AH=!!this.viewport&&AP,AI=this.msgNode,AM=this.viewport,AJ=AP.gts,AN;if(mstrApp.isExpress){H.call(this);}if(AP.eg===undefined){if(AI.style.display==="block"){AI.style.display="none";AM.style.display="block";}}else{return this.renderEmptyGrid();}i.forEach(AJ.row,function(AQ){AQ.isObjHeader=true;});i.forEach(AJ.col,function(AQ){if(AQ.otp===-1){i.forEach(AQ.es,function(AR){AR.isObjHeader=true;});}else{AQ.isObjHeader=true;}});if(!this.interactiveCellsArray){this.interactiveCellsArray=[];}if(AH){AP.ghs=AP.ghs||[];AP.gts=AP.gts||[];this._setupZone(AP);this._setupCP(AP);var AK=this.zone;if(AK.parent!==this){this.addChildren(AK);}this.shouldClipLockableXtab=!this.zone.icr.isIncremental;if(this.scrollboxNode){var AL=this.heightLimit;this.scrollboxHeightFixed=!isNaN(AL)&&(AL>0);if(this.scrollboxHeightFixed){this.scrollboxHeight=AL;}this.scrollboxLeft=this.scrollboxTop=0;this.connectScrollbox(this);}}this.renderChildren();if(this.controller&&this.controller.getScrollPosition){var AO=this.controller.getScrollPosition(this.controller.model.oid+"."+this.gridData.k);if(AO){this.scrollTo(AO);}}AN=this._super();if(this.numRowFixed){if(!this.height){this.heightLimit=this.zone.getPageHeight(0);this.height=this.heightLimit+"px";}else{this.heightLimit=parseInt(this.height,10);}}if((AH&&this.scrollboxNode&&AP.afc)||this.numRowFixed){this.resizeScrollBox();}this.onGridWidthChanged(AP.afc||AP.afw);this._onContainerGrowShrink(this.widthLimit,this.heightLimit);if(this.scrollboxNode&&this.scrollboxNode.childNodes&&this.scrollboxNode.childNodes[0]){this.scrollboxNode.style.zIndex=this.scrollboxNode.childNodes[0].style.zIndex;}if(this.lockHeadersCase&&this.initLock){if(this.scrollboxNode.clientWidth===0&&this.scrollboxNode.clientHeight===0){var AG=Q.call(this,this.scrollboxNode.parentNode);if(mstrApp.isExpress&&AG){AG.refreshWhenVisible=true;}}this.initLock({top:this.scrollboxTop,left:this.scrollboxLeft});}if(this.configureActions){this.configureActions();}return AN;},onclick:function n(AH){var AJ=mstrmojo.dom,AL=AH.getTarget(),AK=AL&&AJ.findAncestorByName(AL,"td",true,this.viewport);if(AL.nodeName.toLowerCase()==="a"&&AK.getAttribute("ei")){try{var AI=this.interactiveCellsArray[parseInt(AK.getAttribute("ei"),10)];if(AI&&AI.ts===mstrmojo.chart.model.enums.EnumDSSBaseFormType.DssBaseFormHTMLTag){AL.href=mstrmojo.addCSRFTokenToURL(AL.href);}}catch(AM){}}if(AK){var AG=AJ.findAncestorByName(AL,"span",true,AK);if(AG&&!AH.shiftKey&&!AH.ctrlKey){this.defaultAction(AK);}else{this.doSelection(AH.e,AH.hWin,AK);}}if(this.isSelectingText){this.isSelectingText=false;}},ontouchend:function f(AH,AG){this.onclick(mstrmojo._HasMarkup.newDomEvent("click",AG,AH));},onselectstart:function t(AH,AG){if(this.isHandleNode&&this.isHandleNode(AH.getTarget())){c.preventDefault(AG,AH);}return false;},onscroll:function w(){var AG=this.zone.icr;if(AG&&AG.isIncremental){window.clearTimeout(this.scrollingTimeOut);this.scrollingTimeOut=window.setTimeout(function(){this.zone.renderPageInView(true);this._alignHeaders();}.bind(this),100);}else{this._alignHeaders();}if(this.controller&&this.controller.addScrollPosition){this.controller.addScrollPosition(this.controller.model.oid+"."+this.gridData.k,this.scrollboxLeft,this.scrollboxTop);}},resizeScrollBox:function G(){var AJ=this.scrollboxNode,AI=AJ&&AJ.style,AH=this._TB_CELL;if(!AI||!AH){return ;}var AG=this.heightLimit;if(!AG){AI.height="auto";this.scrollboxHeightFixed=false;}else{if(AG>0){AI.height=AG+"px";this.scrollboxHeight=AG;this.scrollboxHeightFixed=true;}}this._resizeScrollBoxWidth();},_onContainerGrowShrink:function AF(AH,AK){var AG=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection),AJ=AH||null,AI=AK||null;if(AJ||AI){if(AG){AG.fixedSizeCanGrowShrink(this,AI,AJ);}}else{if(AG){AG.performCanGrowCanShrink([this],true);}}},_resizeScrollBoxWidth:function W(){var AL=this.scrollboxNode,AK=AL.scrollWidth+(AL.offsetWidth-AL.clientWidth),AN=AL&&AL.style,AI=this._TB_CELL;if(this.useTouchScrolling||!AN||!AI){return ;}var AH=this.widthLimit;if(!AH){var AJ=AL.firstChild.style,AO=c.isChrome&&window.devicePixelRatio!==1?0.5:0,AM=AJ.position;AJ.position="relative";AN.width="auto";AK=AL.firstChild.firstChild.offsetWidth+(AL.offsetWidth-AL.clientWidth);if(AK>0){AK+=AO;}AL.firstChild.style.position=AM;}if((AK&&(AK>0))&&(!AH||(AH&&(AK<AH)))&&(AL.firstChild.firstChild.offsetWidth>=AL.clientWidth)){AN.width=AK+"px";var AG=AN.height;AN.height=AL.offsetHeight-1+"px";window.setTimeout(function(){AN.height=AG;},10);}},onGridWidthChanged:function b(AH){if(!AH){this._resizeScrollBoxWidth();}var AG=this.widthLimit;if(!AG){this.width=o;}this._onContainerGrowShrink(AG,null);},getGridDimension:function N(AJ){var AH=1,AI=AJ===AH?"Height":"Width",AK=AI.toLowerCase(),AG=this[AK+"Limit"];if(!AG&&(this[AK]===o||this[AK]===0)){AG=this.viewport["offset"+AI];this[AK]=AG+"px";return AG;}return AG||parseInt(this[AK],10);},_alignHeaders:function B(AG){var AI=this.scrollboxLeft,AH=this.scrollboxTop;if(this.lockHeadersCase&&this.alignLockNodes){this.alignLockNodes(AI,AH);}},defaultAction:function O(AL,AH){var AG=AH||this.getCellForNode(AL),AK=AL&&AL.className.indexOf("sc_")>0;if(this.model&&this.model.data&&this.model.data.visName&&this.model.data.visName==="InteractiveGridAjaxVisualizationStyle"){AK=this.isReselectedTD(AG);if(AK&&this.hasSelectAll&&this.hasSelectAll(AG)){this.IGCurrentSelectedCell=null;}else{this.IGCurrentSelectedCell=AG;}}var AJ=this.model.getAction(this.getActionCells(AG),AL,AK),AI=AJ&&AJ.h;this._currentSelectedTD=AL;if(AI&&this.controller[AI]){this.controller[AI](this,AJ.a);return true;}return false;},createZone:function h(AH){var AI=AH||{},AG=this._super&&this._super(AI);if(!AG){AG=new mstrmojo.XtabZone(AI);}return AG;},_setupZone:function u(AK){this.zones={};if(!this.zone){this.zone=this.createZone({renderMode:this.dataRenderMode,cssText:"z-index: 1",slot:"scrollboxNode"});}var AG=this.zone;this.zones.origin=AG;AG.rh=AK.rh;AG.autoFitWindow=!!AK.afw;AG.autoFitContent=!!AK.afc;if(!this.isVIXtab){AG.tableCssClass="r-cssDefault"+(this.k?"_"+this.k:"");}AG.numColumnCanMerge=AK.gts&&AK.gts.cws?(AK.gts.cws.length-1):0;var AL=[],AI=undefined,AN=null,AJ,AH;mstrmojo.array.forEach(AK.gts&&AK.gts.row,function(AO){AJ=AN&&AN.id===AO.id;if(AJ){AL[AL.length-1]+=AO.fs&&AO.fs.length||1;}else{if(AO.otp===K){AI=0;mstrmojo.array.forEach(AL,function(AP){AI+=AP;});}AL.push(AO.fs&&AO.fs.length||1);}AN=AO;});AG.acws=AL;var AM=e.getGSI(AK.gsi);AG.rowMerge=AM&&AM.prop&&AM.prop.rows&&AM.prop.rows.mg!=="0";AH=AK.ghs&&AK.ghs.chs;this.updateHeaderOffset(AH);AG.mxPos=AI;AG.icr.isIncremental=AH&&AH.cws&&AH.cws.length>AG.icr.limit&&mstrmojo.resolveFeature("use-grid-inc-col-render");},onColHeadersRotated:function k(AG){this.updateHeaderOffset(AG);},updateHeaderOffset:function U(AH){var AG=this.zone;if(AG){AG.headerOffset=E(AH);}},ongridDataChange:function Z(){var AG=this.model;if(AG){AG.set("data",this.gridData);this.initDataBlocks(this.gridData);}},gridPagesRendered:function a(){if(this._super){this._super();}},showDownloadStatus:function L(AG){if(!AG){return ;}if(this.showingStatus){this.numRowsToDownload+=AG;}else{this.numRowsToDownload=AG;this.numRowsDownloaded=0;}if(this.showStatus){this.showStatus(true,mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);}},closeDownloadStatus:function g(){this.numRowsToDownload=0;if(this.showStatus){this.showStatus(false);}},download:function I(AJ,AG,AN){var AM=this.gridData.rw,AI=AM.row,AK=AM.col,AL=AI.rm,AH=AI.bc;this.rhsCPList[AJ].isDownloading=this.valuesCPList[AJ].isDownloading=true;if(AH){this.controller.onDownloadGridData(this,this.model.getDownloadAction(AJ*AH+1,AH,AK.bb,AK.bc,this.id,AL,{blockNum:AJ},AG),AN);}},unrender:function D(AG){this.width=this.widthLimit=this.height=this.heightLimit=0;this.disconnectScrollbox(this);this._super(AG);},getCellForNode:function AA(AH){var AG=AH&&parseInt(AH.getAttribute("ei"),10);if(isNaN(AG)){return null;}return this.interactiveCellsArray[parseInt(AG,10)];},setModel:function AE(AG){this.model=AG;if(AG.data){this.set("gridData",AG.data);}},delegateGridAction:function A(AG,AH){if(this._shouldResponseToAction(AH)){AG(this.zone);}},_shouldResponseToAction:function y(AG){return AG!=="refreshOnDataDownloaded";},destroy:function z(){var AG=this.model;if(this.controller&&this.controller.addScrollPosition){this.controller.addScrollPosition(this.gridData.datasetId+"."+this.gridData.k,this.scrollboxLeft,this.scrollboxTop);}if(AG&&AG.destroy){AG.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.TemplateBasedDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.array","mstrmojo.hash","mstrmojo.func");var I=mstrmojo.array,C=mstrmojo.hash,M="-1",P=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION;function O(){var Q=this.getHostModel();return Q?Q.gsi:null;}function L(a,X,U,Z,Q){var b=this.getHost(),W=b.controller,S,Y;S=a.did;Y=a.t;if(Q){var R=this.getUnitIndexInZone(X,a);if(R!==-1){if(R<Z){Z--;}}}W.submitUndoRedoUpdates(this.getUpdateTemplateAction([b.model.getPivotUnitAction(U,Z,S,Y)]),null,mstrmojo.func.wrapMethods(W._getXtabCallback(b),this.getUpdateCallback()));}function J(U){var e=U.item,Z=U.zone,Q=U.dsid,c=U.index,R=U.edge,b=U.isPivot;var f=this.getHost(),Y=f.controller,d=Z.items,X=f.model,S=Z.id,W=[];if(d.length){if(R===P.ON){var a=d[c];W.push(X.getRemoveTemplateUnitAction(a));}else{if(R===P.BELOW){c++;}}}else{c=0;}if(b&&R!==P.ON){L.call(this,e,Z,S,c,true);return ;}W.push(X.getAddTemplateUnitAction(e,Q,S,c));Y.submitUndoRedoUpdates((U.actions||[]).concat(this.getUpdateTemplateAction(W)),null,mstrmojo.func.wrapMethods(Y._getXtabCallback(f),this.getUpdateCallback()));}function K(Q){return Q.src.data.src===mstrmojo.vi.models.EnumDragSources.VIZ_EDITOR;}mstrmojo.vi.models.BaseVisDropZones=mstrmojo.declare(mstrmojo.vi.models.TemplateBasedDropZones,null,{scriptClass:"mstrmojo.vi.models.BaseVisDropZones",addZoneItem:function A(S,U,R){var W=R.mx,Q;if(S.did===M){I.forEach(W,function(X){Q={did:X.did,n:X.n,t:4};U.push(Q);});}else{this._super(S,U);}},getDropZones:function N(){var Q=O.call(this),R=this.getHost();return Q?{n:R.defn.ttl,zones:[this.getZone(mstrmojo.desc(3581,"Attributes"),1,Q.rows,false,{mx:Q.mx,title:mstrmojo.desc(13828)}),this.getZone(mstrmojo.desc(3582,"Metrics"),-1,Q.mx,false,{mx:Q.mx,title:mstrmojo.desc(13827)})]}:{n:R.defn.ttl,zones:[]};},getAvatarIconClass:function G(){return"viXtab";},getAllowDropInfo:function F(R,S,Q,W,U){var Y=this._super(R,S,Q,W,U),X=R.id===-1;return C.copy({allowedItems:Y.allowedItems.filter(function(a){var Z=a.t===4;return X?Z:!Z;})},Y);},unitsDropped:function E(Q,S,U,X,W){var R=U.allowedItems[0];J.call(this,{item:R,zone:Q,dsid:S.src.data.dsid,index:U.idx,edge:U.edge,isPivot:K(S),actions:S.actions});},deleteItem:function B(R,Q){this.deleteItems(R,[R.items[Q]]);},deleteItems:function D(R,S){var U=this.getHost(),Q=U.controller,W=[];(S||[]).forEach(function(X){W.push(U.model.getRemoveTemplateUnitAction(X));});if(W.length){Q.submitUndoRedoUpdates(this.getUpdateTemplateAction(W),null,mstrmojo.func.wrapMethods(Q._getXtabCallback(U),this.getUpdateCallback()));}},getExtraUnitMenuItems:function H(R,Q,U,S){this._super(R,Q,U,S);if(U.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Metric&&this.getHost().showThreshold){R.addSeparator();this.buildThresholdMenuOptions(R,{item:U},true);}},getHostModel:function(){return this.getHost().model.data;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var L=mstrmojo.css,J=mstrmojo.dom,G="px";var F=J.isTouchOptimizationEnabled()?[]:["mouseover","mouseout","click"];function B(R,Q){return{x:R.x-Q.x,y:R.y-Q.y};}function N(R,Q){return(R.x-Q.x)*(R.x-Q.x)+(R.y-Q.y)*(R.y-Q.y);}function O(Q){var R=Q.src.data;return(!R||!R.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:'+F.join(",")+'><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=J.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(S){var Q=this.dockedPositions;if(Q&&Q.length>0){var Z=B(S.tgt.pos,this.boundaryPosition);var X=N(Z,Q[0]),W=0,R,Y;for(R=1;R<Q.length;R++){Y=N(Z,Q[R]);if(Y<X){X=Y;W=R;}}if(W!==this.currDockedPositionIdx){var U=this.dropZoneNode.style;U.left=Q[W].x+G;U.top=Q[W].y+G;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(Q[W],W);}this.currDockedPositionIdx=W;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function P(Q){L.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,Q);},isDragValid:O,ondragstart:function E(Q){if(!O(Q)){return ;}this._super(Q);this.toggleDropZoneBorder(true);},ondragmove:function A(Q){if(!O(Q)){return ;}this.updateDropZoneNode(Q);this._super(Q);},allowDrop:function I(Q){var S=Q.src,R=S&&S.widget;return(R&&R!==this&&R.parent===this.parent);},ondrop:function K(S){var Q=this.domLegend;L.removeClass(Q,this.avatarCssClass);var U=Q.style;U.left="0";U.top="0";this.dropZoneNode.firstChild.appendChild(Q);if(this.widget.onLegendDropped){var R=this.getDockedPosition();this.widget.onLegendDropped(R&&R.pos);}S.dropSuccessful=true;},getDockedPosition:function H(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(Q){if(!O(Q)){return ;}this._super(Q);if(!Q.dropSuccessful){this.ondrop(Q);}this.toggleDropZoneBorder(false);},positionAvatar:function M(X){var S=this,R=this.avatar,U=R.style,W=this.boundaryPosition;var Q=function(Y,Z){if(Y==="x"){if(Z<W.x){return W.x;}return Math.min(Z,W.x+W.w-S.domNode.offsetWidth);}if(Y==="y"){if(Z<W.y){return W.y;}return Math.min(Z,W.y+W.h-S.domNode.offsetHeight);}};U.left=Q("x",X.x)+G;U.top=Q("y",X.y)+G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo._FormateVisLegend","mstrmojo.gm.SingleColorByLegend","mstrmojo.gm.SingleSizeByLegend","mstrmojo.vi.enums.EnumFeatures");var Az=mstrmojo,Au=Az.gm,AN=Az.dom,At=Az.css,Q=Az.array,U=Az.hash,Ad=Az.VisUtility,g=Au.GMUtility,m=Az.func,AO=mstrmojo.vi.enums.EnumFeatures,AP=Au.WidgetPropertyTag,B=Az.VisEnum.ControlType,q=Au.EnumLegendSlot,Ab=Au.EnumDockPosition,w=Au.EnumLegendSlot,AU=Au.EnumIdentityType,AR=Au.EnumShape,Ao=Az.VisEnum.GMLegendDataType,H=mstrmojo.desc(13966,"Size by:"),AI="px",D=1.35,f=0.75,a=5,I=20,t=I,c=30,AS=5,A=5,j=A,Am=5,AJ=16,A0=AJ,Aw=7,l=15,F=16,AY=20,AB=20,E=150,AD=15,Ax=1,AM="setAttribute",s=3,o=2,R=8,AA=15,Ai=14,AG=1,S=2,n=4,A1=8,Ay=16,K=10,Ak=3,Aa=50,x=50,Af=-3,AE=5,e=20-A,P=20-A,AK=16,Ar=10,Ag="gm-legend-lock-icon",Ac=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),O="http://www.w3.org/2000/svg",AH="\u2026",L=/[ \-]/;var AC=[{pos:w.LEFT_TOP},{pos:w.LEFT_MIDDLE},{pos:w.LEFT_BOTTOM},{pos:w.RIGHT_TOP},{pos:w.RIGHT_MIDDLE},{pos:w.RIGHT_BOTTOM}];function W(A2){return{top:A2?a*4:a,bottom:a};}function N(A2,A4){var A3=W(A4);return A2-A3.top-A3.bottom;}function Ah(A7,A9,A2,BA){if(!A7){return ;}var A4,BD,A5,BC,A8=A7.style,BE=A9===Ab.TOP,A3=A9===Ab.BOTTOM,BB=A9===Ab.LEFT,A6=A9===Ab.RIGHT;if(BE||A3){A4=A2;BD=1;A5=-1;BC=Af;if(A3){BC+=BA;}}else{if(BB||A6){A4=1;BD=BA;BC=-1;A5=Af;if(A6){A5+=A2;}}}A8.cssText="left:"+A5+AI+";top:"+BC+AI+";width:"+A4+AI+";height:"+BD+AI+";";if(mstrApp.isInVFInteractMode){A8.cursor="default";}}function G(A3){var A2=String(A3);return A2.indexOf(" ")>=0||A2.indexOf("-")>=0;}function b(A6,A4,A7){var A2=typeof A6==="string"?g.restoreSpecialChars(A6):A6,A5=Ad.getMeasuringOptFlag(),A3;Ad.setMeasuringOptFlag(false);A3=Ad.measureTextWidth(A2,A4,A7,undefined,true,true);Ad.setMeasuringOptFlag(A5);return A3;}function AX(A6,A5,A3,A2){var A4=b(A5,A3,K);A6.setAttribute("measureWidth",A4);if(A4>A2){A4=A2;}else{A6.style.overflow="visible";}A6.setAttribute("displayWidth",A4);A6.style.width=A4+AI;return A4;}function Av(A7,A6){var A5=A7.cloneNode(true),A2,A4,A3;document.body.appendChild(A5);A4=A5.style;for(A3 in A6){A4[A3]=A6[A3];}A4.visibility="hidden";A2=A5.offsetHeight;document.body.removeChild(A5);return A2;}function i(A4){var A3=A4.getAttribute("measureWidth"),A2=A4.getAttribute("displayWidth");if(!A3){A4[AM]("title","");}A3=parseFloat(A3,10);A2=parseFloat(A2,10);if((A3-A2)>0.1){A4[AM]("title",A4.textContent);}else{A4[AM]("title","");}}function AZ(A6,A2,A3,A5){var A4=document.createElement("div");A4[AM]("class","gm-legend-underLine");A4.style.width=A5-K+AI;A4.style.left=A2+5+AI;A4.style.top=A3+AI;A6.appendChild(A4);}function An(A5,A2,A3){var A4=document.createElement("div");A4[AM]("class","gm-legend-underLine-anchorPoint");A4.style.left=A2+AI;A4.style.top=A3-3+AI;A5.appendChild(A4);}function AW(A5,A2,A3,A4){AZ(A5,A2,A3,A4);An(A5,A2,A3);}function u(A4,BF,BB,A9,BD){var BA,A5,BC,A2,BE=A4.textContent,A8=BE.length,A6=0,A3=A8,A7=false;if(A4.scrollHeight>1.5*F){BA=b(A4.textContent,BF,K);A5=BA-BB+K;if(A5>BD){while((A3-A6)>1){BC=(A6+A3)>>1;A2=BE.substring(0,BC)+AH;BA=b(A2,BF,K);A5=BA-BB+K;if(A5>BD){A3=BC;}else{A6=BC;}}A4.textContent=BE.substring(0,A6)+AH;A4[AM]("title",BE);A7=true;BA=b(A4.textContent,BF,K);A5=BA-BB+K;}AZ(A4,0,A9+F,(A5<BD)?A5:BD);}if(BB>BD){A4[AM]("title",BE);}else{if(!A7){A4[AM]("title","");}}}function AL(A2,BB,A7,A3,BA,BC){var A4,A6,A8,A9,A5=document.createElement("div");A5[AM]("class","gm-legend-textcell");A5[AM]("type",B.LGD_TEXT);A5.style.lineHeight=l+AI;if(BA){A9=this.setTextWidth(A5,BB,BC,BA);}if(A3&AG){A4=(AY+Ai)/2+A7*AY;A8=AJ;}else{A4=(AD+Ai)/2+A7*AD;if(A3&A1){if(A3&Ay){A8=0;}else{A8=AA;}}else{if(A3&n){A8=R;}else{A8=0;}}}A6=A9||AA+K;A5.innerText=BB;A5.identity={objType:AU.LEGEND_TEXT};AW(A2,A8,A4,A6);this.textDivs.push(A5);A2.appendChild(A5);}function Ap(A2,A5){var A3,A7,A6,A4=0;if(A2){A6=A2.elements;for(A3=0,A7=A6.length;A3<A7;A3++){A4=Math.max(A4,b(A6[A3].label,A5,K));}A4+=AJ+A*2+Ak;}return A4;}function Z(A5,A4){var A8,A2,A7,A6=A5.items,A3=0;if(!A6){return 0;}A8=A6.length;A7=A5.custMetrics;for(A2=0;A2<A8;A2++){if(A7&&A7.indexOf(A6[A2])!==-1){A3=Math.max(A3,b(A6[A2],A4,K)+R);}else{A3=Math.max(A3,b(A6[A2],A4,K));}}return A3;}function Ae(A5,A4){var A2,A7,A6,A3=0;if(A5){A6=A5.elements;A7=A6.length;if(A5.caseFlag===1){A3=Z(A5,A4);}else{if(A5.caseFlag===0){for(A2=0;A2<A7;A2++){A3=Math.max(A3,b("Max: "+A6[A2].v,A4,K));}A3+=AD*s;A3=Math.max(A3,Z(A5,A4));}else{if(A5.caseFlag===2){for(A2=0;A2<A7;A2++){A3=Math.max(A3,b(A6[A2].v,A4,K));}A3+=AD*A7+AA;A3=Math.max(A3,Z(A5,A4));}else{if(A5.caseFlag===3){for(A2=0;A2<A7;A2++){A3=Math.max(A3,b(A6[A2].v,A4,K));}A3+=AD*AE;}}}}A3=Math.max(A3,b(H,A4,K));A3+=A*3;}return A3;}function AV(A3,A5){var A9=[],A6=0,BA=1,A4=0,A7,A8,A2;Q.forEach(A3,function(BB){A7=BB.label?String(BB.label).split("\n").length:1;BA=Math.max(BA,A7);A6=A6+1;if(A6%A5===0||A6===A3.length){if(BA===1){A4=AY;}else{A4=Math.max(AY,l*BA+2);}A9.push(A4);BA=1;}});return A9;}function k(BO,BF,A8,BN,A9,A5,A7){if(!BO||!BO.length||BO.length<1){return 0;}var BJ,BH,BA,BB,BE,A4,A2,BI,BK,A3,BL,BC,BG,BD=t+2*Ax,A6=BD,BM;A7=A7||1;for(BJ=0;BJ<BO.length;BJ++){A2=BO[BJ];if(A2.dataType===Ao.COLOR_BY){BI=A2.dataObj;if(BI){if(A9||BN){A3=AS;}else{A3=2*AS+F;}BA=g.removeExtraSpace(BI.item);A4=b(BA,A8,K);if((A4+2*A>BF-2*Ax)&&G(BA)){A3+=F;}BB=BI.elements;BH=Math.ceil(BB.length*1/A7);A3+=A;A3+=o;BB.forEach(function(BP){if(Ad.showImageTag(BP.bftps,BP.label)){Au.GMLegend.IMAGE_SIZE_FIXED=E;AY=E;}});BM=AV(BB,A7);BL=A3;Q.forEach(BM,function(BP){BL+=BP;});BC=A3+(BH>0?AY:0);BD+=BL;A6+=BC;A2.height=BL;A2.minHeight=BC;}}else{if(A2.dataType===Ao.SIZE_BY){if(A5){continue;}BK=A2.dataObj;if(BK){BG=2*AS+F;BA=g.removeExtraSpace(BK.item);A4=b(BA,A8,K);if((A4+2*A>BF-2*Ax)&&G(BA)){BG+=F;}BE=BK.caseFlag;if(BE===1){BH=0;}else{if(BE===0){BH=2;}else{if(BK.caseFlag===2||BE===3){BH=BK.elements.length;}}}BH+=(BK.items&&BK.items.length)||0;BG+=AD*BH;BG+=A;BG+=o;A2.height=BG;A2.minHeight=BG;BD+=BG;A6+=BG;}}}}return{height:BD,minHeight:A6,rowHeights:BM};}function Aq(A2,A3){var A5=0,A4=0;Q.forEach(A2||[],function(A6){var A7;if(A6.dataType===Ao.COLOR_BY){A7=Ap(A6.dataObj,A3);if(A7>A5){A5=A7;}}else{if(A6.dataType===Ao.SIZE_BY){A7=Ae(A6.dataObj,A3);if(A7>A4){A4=A7;}}}});return Math.max(A5,A4)+2*Ax;}function J(A2,A8){var A7=A2.reduce(function(A9,BA){return A9+(BA.dataType===Ao.SIZE_BY?(BA.height||0):0);},0),A6=A8-(t+2*Ax)-A7,A3=function(A9){return U.walk("dataObj.elements.length",A9);},A4=A2.reduce(function(A9,BA){return A9+(BA.dataType===Ao.COLOR_BY?A3(BA):0);},0),A5;Q.forEach(A2,function(A9){A5=A3(A9);if(A9.dataType===Ao.COLOR_BY&&A5>=0){A9.maxHeight=Math.max(A5/A4*A6,A9.minHeight);if(A9.height>A9.maxHeight){A9.cutBy=A9.height-A9.maxHeight;}A6-=Math.min(A9.height,A9.maxHeight);A4-=A5;}});}function p(BA,A5,A4,BC,A6,A7,A2){var A9=k(BA,A5,BC,false,A7,A2),BB=A9.height,A3=N(A4,A6),A8={};A8.autoCollapse=false;A8.minHeight=A9.minHeight;A8.width=A5;A8.height=Math.min(BB,A3);A8.rowHeights=A9.rowHeights;if(BB>A3){J(BA,A3);}return A8;}function AT(A2){A2=Q.ensureArray(A2);return Q.filter(A2,function(A3){return A3&&A3.dataType===Ao.COLOR_BY&&A3.dataObj;});}function AF(A2){A2=Q.ensureArray(A2);return Q.filter(A2,function(A3){return A3&&A3.dataType===Ao.SIZE_BY&&A3.dataObj;});}function M(A2){var A4=[],A3;A2=AT(A2);Q.forEach(A2,function(A5){A3=A5.dataObj;A4=A4.concat(A3.elements);});return A4;}function d(){return AT(this.dataArray).length;}function Aj(){var A2,A3,BE,A5=this.triBtn,BA=this.closeBtn,A7=this.cbContainer,A9,A6=this.height-t-A-2*Ax,BB=this.width-2*A-2*Ax,A4,A8=this.getDockedPosition(),BD=A8&&A8.pos,BC=this.isOnLeft(BD);A5[AM]("class","gm-legend-tri-button-collapsed");A5[AM]("title",this.autoCollapse?mstrmojo.desc(13682,"There is not enough space to display the legend"):mstrmojo.desc(13683,"Maximize Legend"));BA.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";A7.style.top=t+AI;A7.style.width=BB+AI;A2=M(this.dataArray);Q.forEach(this.colorByChildren,function(BF,BG){A4=BF.domNode.style;if(BG===0){A3=BF.cbTitle;A3.style.display="none";At.addClass(BF.sepLine,"toggleHide");A9=BF.cbTableContainer;A9.style.top="0px";BE=BF.cbTable;BF.fillColorByTableInMinMode(A2,A6);A9.style.top=A+AI;A9.style.height=BE.offsetHeight+AI;A7.style.height=A6+AI;if(BC){A7.style.left="4px";BF.sepLine.style.left="-2px";}else{A7.style.left="";BF.sepLine.style.left="";}}else{A4.display="none";}});}function Al(A3,BA){var A9=1,A2,A7=1.5*F,A8=A3.textContent,A4=A8.split(L),BB,A5;var A6=function(BC){A5=A8[BC];return A5!==undefined?A5:"";};if(A3.scrollHeight>A7){if(!A4[0]){return 0;}A2=A4[0]+A6(A4[0].length);while(A4[A9]!==undefined){BB=A2+A4[A9];BB+=A6(BB.length);A3.textContent=BB;if(A3.scrollHeight>A7){break;}A2=BB;A9++;}A3.textContent=A8;}else{A2=A8;}return b(A2,BA,K);}function Y(){var A4="."+Ag,A2=this.domLegend.querySelectorAll(A4),A3;Q.forEach(A2,function(A5){A3=A5.parentNode;if(A3){A3.removeChild(A5);}});}function As(){var A7=[],A4,A5=AT(this.dataArray),A3=AF(this.dataArray),A2=0,A6=this;this.colorByChildren=[];this.sizeByChildren=[];this.destroyChildren();A4=this.width-2*A-2*Ax;Q.forEach(A5,function(A9){A7.push({scriptClass:"mstrmojo.gm.SingleColorByLegend",slot:"cbContainer",data:A9,coreWidth:A4,isHorizontal:false,rowHeight:AY,rowHeights:A6.rowHeights});A2++;});var A8=0;Q.forEach(A3,function(A9){A7.push({scriptClass:"mstrmojo.gm.SingleSizeByLegend",slot:"sb"+ ++A8+"Container",data:A9,coreWidth:A4,isHorizontal:true,rowHeight:AY});});this.addChildren(A7);this.colorByChildren=this.children?this.children.slice(0,A2):[];this.sizeByChildren=this.children?this.children.slice(A2,this.children.length):[];}function X(){var Be,BW,Bj=0,Bk,BO,BY,BS,A6,Bb,Bf,BC,Bi,BQ=0,Bd,A3=this.width-2*Ax,BH=A3-2*A,A9=document,A5=this.triBtn,BX=this.closeBtn,BV=this.cbContainer,BI,Bn=this.sb1Container,BB=this.sb2Container,BG,BD,A8,BE,BZ,BA=0,BK,BU=0,Bg=0,BT=this.styles,Ba,Bh,BN=(F+Ai)/2,A4,BJ,Bm,BR,BP,BM=!this.sizeByHide,Bl=!this.titleHide;A5[AM]("class","gm-legend-tri-button");A5[AM]("title",mstrmojo.desc(13684,"Minimize Legend"));BX.style.display="block";BX[AM]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();this.removeCustomScaleIcon();this.domNode.style.overflow="visible";BV.style.top=t+AI;BV.style.width=BH+AI;BV.style.left="";for(BW=0;this.dataArray&&BW<this.dataArray.length;BW++){BD=this.dataArray[BW];BZ=null;BK=null;if(BD.dataType===Ao.COLOR_BY){BZ=BD.dataObj;if(BZ){Bm=this.colorByChildren[BA++];BR=Bm.domNode.style;BR.top=BU+AI;BR.width=BH+AI;BI=Bm.cbTableContainer;BS=g.removeExtraSpace(BZ.item);A6=BZ.elements;Be=A6.length;Bi=0;if(Bg===0){At.addClass(Bm.sepLine,"toggleHide");Bg++;}Bk=Bm.cbTitle;if(Bl){Bk.style.display="block";}else{Bk.style.display="none";}this.setTextWidth(Bk,BS,BT,BH);Bk.textContent=BS;Bi+=Bl?this.getDivHeight(Bk,BT)+2*AS:AS;A4=this.getFirstLineTitleWidth(Bk,BT);this.generateExtraUnderLineForTitle(Bk,BT,A4,BN,BH);this.generateUnderlineWithAnchorPoint(Bk,0,BN,(A4<BH)?A4:BH);BO=Bm.cbTable;BO.style.display="block";BO.style.width=(BH-Ak)+AI;BO.style.marginLeft=Ak+AI;Bm.fillColorByTableInNormalMode(BZ,0);Bb=0;Q.forEach(this.rowHeights,function(Bp){Bb+=Bp;});Bb=Bb+1;BI.style.top=Bi+AI;BO.style.display="table";Bi+=Bb+A;if(BD.cutBy>0){Bi-=BD.cutBy;Bb-=BD.cutBy;}BI.style.height=Bb+AI;BQ+=Bi;BU+=Bi+o;}}else{if(BD.dataType===Ao.SIZE_BY){if(!BM){break;}BK=BD.dataObj;if(BK){BP=this.sizeByChildren[Bj++];var Bo=BP.sepLine,A2=BP.sbScrollNode,BF=BP.sbTitle,Bc={objType:AU.LEGEND};if(Bo){Bo.style.width=this.width-2*Ax+AI;}if(BF){BF.style.lineHeight=F+AI;BF.style.maxHeight=2*F+AI;BF.identity={objType:AU.LEGEND_TEXT,parentIdentity:Bc};}if(Bj===1){A8=Bn;}else{A8=BB;}BE=BF;BY=BP.sbMetricNamesTable;BO=BP.sbDataTable;BG=BP.sbCanvas;if(Bl){BE.style.display="block";}else{BE.style.display="none";}A8.style.display="block";BS=g.removeExtraSpace(BK.item);A6=BK.elements;Be=A6.length;A8.style.top=(t+BU)+AI;A8.style.left=0+AI;A8.style.width=BH+AI;Bi=0;if(Bg===0){At.addClass(BP.sepLine,"toggleHide");Bg++;}if(BK.caseFlag===0){Bf=s*AD;BC=2*AD;}else{if(BK.caseFlag===3){Bf=AE*AD;BC=Be*AD;}else{Bf=Be*AD;BC=Bf;}}Bk=BE;Bk.textContent=BS;Bh=BK.custMetrics&&BK.custMetrics.indexOf(BS)!==-1;if(Bh){BJ=BH-R;}else{BJ=BH;}this.setTextWidth(Bk,BS,BT,BJ);if(Bh){Ba=A9.createElement("div");Ba.setAttribute("class",Ag);Ba.setAttribute("title",Ac);A8.appendChild(Ba);Ba.style.top=(Bk.offsetHeight-8)/2+AS+o+AI;Ba.style.left=Bk.offsetWidth+"px";}A4=this.getFirstLineTitleWidth(Bk,BT);this.generateExtraUnderLineForTitle(Bk,BT,A4,BN,BJ);this.generateUnderlineWithAnchorPoint(Bk,0,BN,(A4<BJ)?A4:BJ);Bi+=this.getDivHeight(Bk,BT)+2*AS;Bd=BH;var BL=0,A7=Bi;AN.emptyNode(BY);if(BK.items&&BK.items.length>0){BY.style.display="block";BP.fillSizeByTableInNormalMode(this,BY,BK,Bd,1);}else{BY.style.display="none";}BY.style.top=0;BY.style.left="0"+AI;BY.style.width=Bd+AI;Bi+=BY.offsetHeight;BL+=BY.offsetHeight;if(Bf>0){Bd-=Bf+A;}AN.emptyNode(BO);if(BK.elements&&BK.elements.length>0){BO.style.display="block";BP.fillSizeByTableInNormalMode(this,BO,BK,Bd,BK.caseFlag);}else{BO.style.display="none";}BG.style.position="absolute";BG.style.top=BL+AI;BG.style.marginLeft=A+AI;BO.style.top=BL+AI;BO.style.left=(Bf+A)+AI;BO.style.width=Bd+AI;Bi+=BC+A;BL+=BC+A;A8.style.height=Math.min(Bi,this.height-t)+AI;BO.style.display="table";BG.width=Bf;BG.height=BC;BP.drawSizeByIndicator(this,BG,BK);BU+=Bi+o;A2.style.top=A7+AI;A2.style.height=(this.height-t-A7-j)+AI;}}}}if(BA>0){BV.style.height=BQ+AI;}}function y(){var A2,A3=this.textDivs,A4=A3.length;for(A2=0;A2<A4;A2++){i(A3[A2]);}}function h(A2){Q.forEach(this.colorByChildren,function(A3){if(A2){A3.cbTableContainer.scrollTop=A3.cbTableScrollTop;}else{A3.cbTableScrollTop=A3.cbTableContainer.scrollTop;}});Q.forEach(this.sizeByChildren,function(A3){if(A2){A3.domLgdContent.scrollTop=A3.domLgdScrollTop;}else{A3.domLgdScrollTop=A3.domLgdContent.scrollTop;}});}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:null,dockPos:Ab.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-button"><div class="gm-legend-tri-button"></div><div class="gm-legend-name"></div><div class="gm-legend-close-button"></div></div><div class="gm-legend-container"></div><div class="gm-legend-container"></div><div class="gm-legend-container"></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AQ(A3){this.styles={};this.dataArray=null;this.textDivs=[];this.dockedPositions=[{pos:w.LEFT_TOP},{pos:w.LEFT_MIDDLE},{pos:w.LEFT_BOTTOM},{pos:w.RIGHT_TOP},{pos:w.RIGHT_MIDDLE},{pos:w.RIGHT_BOTTOM}];var A4=A3.placeholder,A2=A4.style;if(A4){this.cssClass=A4.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(A3.hasOwnProperty("width")===false){A3.width=(A2&&A2.width)||A4.clientWidth;}if(A3.hasOwnProperty("height")===false){A3.height=(A2&&A2.height)||A4.clientHeight;}if(A3.hasOwnProperty("left")===false){A3.left=A4.offsetLeft;}if(A3.hasOwnProperty("top")===false){A3.top=A4.offsetTop;}}this._super(A3);},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?Ab.RIGHT:Ab.LEFT;},isOnRight:function(A2){return(A2===w.RIGHT_MIDDLE||A2===w.RIGHT_TOP||A2===w.RIGHT_BOTTOM||A2===w.RIGHT);},isOnLeft:function(A2){return(A2===w.LEFT_MIDDLE||A2===w.LEFT_TOP||A2===w.LEFT_BOTTOM||A2===w.LEFT);},updateAlignClass:function(){var A6=this.getDockedPosition(),A7=A6&&A6.pos,A4=this.isOnRight(A7),A2=this.domLegend,A3=this.domNode,A5=this.resizeRect;if(A4){At.removeClass(A2,"gm-align-left");At.addClass(A2,"gm-align-right");At.toggleClass(A2,"gm-legend-alignRight",true);At.toggleClass(A2,"gm-legend-alignLeft",false);At.toggleClass(A3,"gm-legend-alignRight",true);At.toggleClass(A3,"gm-legend-alignLeft",false);At.toggleClass(A5,"gm-legend-alignRight",true);At.toggleClass(A5,"gm-legend-alignLeft",false);}else{At.removeClass(A2,"gm-align-right");At.addClass(A2,"gm-align-left");At.toggleClass(A2,"gm-legend-alignRight",false);At.toggleClass(A2,"gm-legend-alignLeft",true);At.toggleClass(A3,"gm-legend-alignRight",false);At.toggleClass(A3,"gm-legend-alignLeft",true);At.toggleClass(A5,"gm-legend-alignRight",false);At.toggleClass(A5,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var A6=this.styles,A4=this.domNode,A8=this.domLegend.childNodes,A3=A8[1],A5=A8[2],A7=A8[3],A2={objType:AU.LEGEND};this.addSlots({lgdBtn:A8[0],triBtn:A8[0].firstChild,lgdName:A8[0].childNodes[1],closeBtn:A8[0].lastChild,cbContainer:A3,sb1Container:A5,sb2Container:A7,splitter:A8[4],resizeRect:A8[5]});Au.GMLegend.applyHTML5Props(A6);this.bgColor=A6.background||A6.backgroundColor||"transparent";Ad.applyStyle2Legend(A6,A4,this.domLegend);if(mstrApp.isInVFInteractMode||AN.isTouchOptimizationEnabled()){this.closeBtn.style.visibility="hidden";}this.dockPos=this.getSplitterDockPos();this.identity=A4.identity=A2;this.updateAlignClass();},feedData:function(A2,A3){this.dataArray=A2;this.prepareColorAndSizeByContainer();this.isMinimal=A3;this.textDivs=[];Au.GMLegend.applyHTML5Props(this.styles,Au.GMLegend.isHorizontal(this.currDockedPositionIdx));this.autoCollapseLegend();var A4=this.cbContainer,A5=this.sb1Container,A6=this.sb2Container;A4.style.display=d.call(this)>0?"block":"none";A5.style.display="none";A6.style.display="none";if(A3||this.autoCollapse){this.renderMinMode();this.draggable=false;}else{this.renderNormalMode();this.draggable=true;}y.call(this);Q.forEach(this.children,function(A7){A7.updateScrollbars();});},autoCollapseLegend:function(){this.autoCollapse=false;},updateColorBySquare:function(A2){if(!this.colorByChildren){return ;}var A3=this.colorByChildren.filter(function(A4){return A4.data&&A4.data.inColorByDropZone===true;});if(A3.length>0){A3=A3[0];A3.data.dataObj=A2;if(this.isMinimal){this.renderMinMode();}else{A3.prevScrpllTop=null;m.safeCall("updateColorByTable",A3)();}}},updateContainerSize:function(A2,A3){this.GMW=A2;this.GMH=A3;this.calculateDockedPositions(A2,A3);},updateAfterResize:function(){Au.GMLegend.applyHTML5Props(this.styles);var A6=0,A4=this.width,A2=this.cbContainer,A5=this.sb1Container,A7=this.sb2Container,A3=A4-2*Ax-2*A;Q.forEach(this.dataArray||[],function(A8){if(A8.dataType===Ao.COLOR_BY){if(A8.dataObj){if(A2){A2.style.width=A3+AI;}}}else{if(A8.dataType===Ao.SIZE_BY){if(A8.dataObj){A6++;if(A6===1&&A5){A5.style.width=A3+AI;}if(A6===2&&A7){A7.style.width=A3+AI;}}}}});this.domLegend.style.width=this.width+AI;this.domLegend.style.height=this.height+AI;},updateStyle:function(A2){this.styles=A2;this.bgColor=A2.background||A2.backgroundColor||"transparent";Ad.applyStyle2Legend(A2,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var A3,A6,A4=U.walk("sizeByChildren.0.sbTitle",this),A2=U.walk("sizeByChildren.1.sbTitle",this),A7=A4&&A4.style,A5=A2&&A2.style;Au.GMLegend.applyHTML5Props(this.styles,Au.GMLegend.isHorizontal(this.currDockedPositionIdx));if(A7){A7.lineHeight=F+AI;A7.maxHeight=2*F+AI;}if(A5){A5.lineHeight=F+AI;A5.maxHeight=2*F+AI;}Q.forEach(this.colorByChildren,function(A8){A3=A8.cbTitle;A6=A3.style;A6.lineHeight=F+AI;A6.maxHeight=2*F+AI;});},getSplitterPosition:function(A4){var A3=A4.src.startPos+A4.tgt.pos.x-A4.src.pos.x,A6=A4.src.posInfo,A5=A6&&A6.min,A2=A6&&A6.max;if(A5!==undefined){A3=Math.max(A3,A5);}if(A2!==undefined){A3=Math.min(A3,A2);}return A3;},positionResizeRect:function(A2,A3){var A5=A2.src.posInfo.dockPosition===Ab.LEFT,A6=A3-Af,A7=A5?A6:0,A4=A5?this.width-A6:A6;this.resizeRect.style.left=(A7-1)+AI;this.resizeRect.style.width=(A4-2)+AI;},updateLegendSlot:function(A4){var A3=this.getDockedPosition(),A2=A3&&A3.pos;if(A2!==A4){this.currDockedPositionIdx=this.getLegendDockPosIdx(A4);this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},isDragValid:function z(A2){return !mstrApp.isInVFInteractMode&&this._super(A2);},ondragstart:function(A2){var A4=A2.src.e.target,A3=A2.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(A4===this.splitter){A2.src.startPos=A4.offsetLeft;A2.src.posInfo=this.getSplitterInfo(A4);this.positionResizeRect(A2,A2.src.startPos);At.addClass(this.resizeRect,"resizing");}else{h.call(this,false);this._super(A2);if(!A3||!A3.isScrollBar){this.clearSelectedTargets();At.toggleClass(this.domNode,"gm-legend-hover",false);At.toggleClass(this.domLegend,"active",false);h.call(this,true);this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function C(A2){var A4=A2.src.e.target,A3;if(A4===this.splitter){A3=this.getSplitterPosition(A2);A4.style.left=A3+AI;this.positionResizeRect(A2,A3);}else{this._super(A2);}},ondragend:function(A2){var A4=A2.src.e.target;if(A4===this.splitter){At.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(A2)-A2.src.startPos,A2.src.posInfo);}else{this._super(A2);var A3=A2.src.data;if(!A3||!A3.isScrollBar){h.call(this,true);this.domLegend.style.background="transparent";this.isDragging=false;}}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},calculateDockedPositions:function(A9,A3){var A2,A6=this.getWidth(),A5=this.getHeight(),A7=this.dockedPositions,A4=this.widget&&this.widget.needExtraPaddingTop4Legend&&this.widget.needExtraPaddingTop4Legend(),A8=W(A4),BA=function(BB){switch(BB.pos){case q.LEFT_TOP:BB.x=0;BB.y=A8.top;break;case q.LEFT_MIDDLE:BB.x=0;BB.y=Math.max(A8.top,(A3-A5)>>1);break;case q.LEFT_BOTTOM:BB.x=0;BB.y=Math.max(A8.top,A3-A5-A8.bottom);break;case q.RIGHT_TOP:BB.x=A9-A6;BB.y=A8.top;break;case q.RIGHT_MIDDLE:BB.x=A9-A6;BB.y=Math.max(A8.top,(A3-A5)>>1);break;case q.RIGHT_BOTTOM:BB.x=A9-A6;BB.y=Math.max(A8.top,A3-A5-A8.bottom);break;default:}};for(A2=0;A2<A7.length;A2++){BA(A7[A2]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var A2=this.getDockedPosition(),A3=this.dropZoneNode.style;A3.left=A2.x+AI;A3.top=A2.y+AI;},updateDropZoneNode:function(A2){this._super(A2);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(A2){var A4=this.domLegend,A8=A2.getTarget(),A5=A8.getAttribute("type"),A7=this.widget,A3;if(this.isDragging){return ;}var A6=U.copy(this.styles);A6.opacity+=0.4;Ad.applyStyles2DomNode(this.domNode,A6);if(AN.contains(A4,A8,true)){At.addClass(A4,"active");}if(A5===B.LGD_COLORBOX){A8=A8.parentNode;A5=A8.getAttribute("type");}if(A5===B.LGD_COLORBOX_CTN){A3=A8.firstChild.identity;if(!A3||!A3.comb){return ;}At.toggleClass(A8,"hover-colorsquare",true);return ;}if(A7.formattingMode){switch(A5){case B.LGD_TITLE:case B.LGD_TEXT:At.toggleClass(A4,"hover-txt",true);break;default:At.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(A3){var A5=this.domLegend,A2=A3.e.toElement||A3.e.relatedTarget,A8=A3.getTarget(),A6=A8.getAttribute("type"),A7=this.widget,A4;Ad.applyStyles2DomNode(this.domNode,this.styles);if(!AN.contains(A5,A2,true)){At.removeClass(A5,"active");}if(A6===B.LGD_COLORBOX){A8=A8.parentNode;A6=A8.getAttribute("type");}if(A6===B.LGD_COLORBOX_CTN){A4=A8.firstChild.identity;if(!A4||!A4.comb){return ;}At.toggleClass(A8,"hover-colorsquare",false);return ;}if(A7.formattingMode||A7.isOnFormattingMode){switch(A6){case B.LGD_COLORBOX_CTN:case B.LGD_COLORBOX:break;case B.LGD_TITLE:case B.LGD_TEXT:At.toggleClass(A5,"hover-txt",false);break;default:At.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},handleSingleTap:function(A2){At.toggleClass(this.domLegend,"active",true);if(this.isMinimal||A2===this.triBtn){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});At.toggleClass(this.domLegend,"active",!this.isMinimal);}},onclick:function(A2){var A5=A2.getTarget(),A3=A5.getAttribute("type"),A4=this.widget;if(A5===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(A5===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close",mousePos:A2.e});}else{if(A3===B.LGD_COLORBOX){A5=A5.parentNode;A3=A5.getAttribute("type");}if(A4.formattingMode||A4.isOnFormattingMode){if(A3===B.LGD_COLORBOX_CTN){this.selectColorBox(A5,true);}else{if(A3===B.LGD_TEXT||A3===B.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}AN.stopPropogation(null,A2.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var A3=this,A2=this.domLegend;this.clearSelectTargetfn=function(A7){var A6=A7.target,A4=A3.widget.toolEditor,A5;if(!AN.contains(A2,A6,true,A2)){if(A4){A5=A4.domNode;if(!AN.contains(A5,A6,true,A5)){A3.clearSelectedTargets();}}else{A3.clearSelectedTargets();}}};AN.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var A2=this.selectedColorBox;if(A2){At.toggleClass(A2,"select",false);At.toggleClass(A2,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){At.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){At.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){AN.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(A4,A3){var A2=A4.firstChild.identity;if(!A2||!A2.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==A4){this.clearSelectedColorBox();this.selectedColorBox=A4;if(A3){At.toggleClass(A4,"selectfmt",true);}else{At.toggleClass(A4,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();At.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();At.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(A2){var A5=AN.position(A2),A3=0,A4={};if(this.currDockedPositionIdx<3){A4.x=A5.x+A5.w+A3;A4.alignLeft=true;}else{A4.x=A5.x-A3;A4.alignLeft=false;}A4.y=A5.y+A5.h+A3;return A4;},getSplitterInfo:function(A7){if(!A7){return{};}var A3=this.dockPos,A6={},A5=this.width,A2=Aa,A4=Math.floor(this.GMW/3);A6.dockPosition=A3;if(A3===Ab.LEFT){A6.min=Math.min(A5-A4,0);A6.max=Math.max(A5-A2,0);}else{if(A3===Ab.RIGHT){A6.min=A2;A6.max=A4;}}A6.min+=Af;A6.max+=Af;return A6;},splitterMoved:function(A2,A3){if(A2===0){return ;}if(A3.dockPosition===Ab.LEFT){A2=-A2;}this.raiseEvent({name:"gm-legend-resized",position:A2});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){Ah(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+AI;},getLegendDockPosIdx:function(A2){return Q.find(AC,"pos",A2);},getLegendDockPosByIdx:function(A2){return(A2>=0&&A2<AC.length)?AC[A2].pos:w.RIGHT_MIDDLE;},fillTextInDiv:AL,setTextWidth:AX,generateUnderlineWithAnchorPoint:AW,generateExtraUnderLineForTitle:u,getLegendTopBottomSpace:W,removeCustomScaleIcon:Y,getDivHeight:Av,getFirstLineTitleWidth:Al,renderNormalMode:X,positionSplitter:Ah,renderMinMode:Aj,prepareColorAndSizeByContainer:As,getSizeByWidth:Ae,setDockPosIdx:function(A2){this.currDockedPositionIdx=this.dockedPositions.findIndex(function(A3){return A2===A3.pos;});}});Au.GMLegend.IMAGE_SIZE_FIXED=0;Au.GMLegend.Constants={SB_TABLE_LINE_HEIGHT:AD,SET_ATTR:AM,TYPE_SIZEBY:S,HAS_SIGN:A1,IS_SIGN:Ay,SIGN_WIDTH:AA,DRAW_METRIC_ICON:n,ICON_WIDTH:R,CUSTOM_SCALE_ICON_CLASSNAME:Ag,CUSTOM_SCALE_ICON_TITLE:Ac,SIZEBY_CANVAS_SCALE:s,TEXT_LINE_HEIGHT:l,TYPE_COLORBY:AG,CB_TABLE_ROW_HEIGHT:AY,STANDED_LINE_HEIGHT:Ai,COLOR_BOX_SIZE:AJ,TEXT_PADDING:K,TRI_BUTTON_SIZE:A0,LEGEND_CONTAINER_MARGIN:Am,TABLE_TITLE_LINE_HEIGHT:F,TABLE_ELEM_MARGIN_LEFT:Ar,COLORBY_TABLE_MARGIN:Ak,TABLE_MARGIN:A,TITLE_BAR_HEIGHT:t,LEGEND_DATA_TYPE:Ao,TABLE_CONTENT_MARGIN_LEFT:e,TITLE_MARGIN:AS,TABLE_CONTENT_MARGIN_RIGHT:P,TABLE_TOP_MARGIN_TITLE_SAME_LINE:Aw,TABLE_FIRST_ELEM_MARGIN_LEFT:AK,SEPARATOR_LINE_HEIGHT:o,BORDER_WIDTH:Ax,NV_EDGE_SIZE_CANVAS_WIDTH:AE,COLOR_BY_CONTENT_MARGIN:j,TITLE_BAR_HEIGHT_DEFAULT:I,SPLITTER_PADDING:Af,TITLE_BAR_WIDTH:c,CB_H_TABLE_BOX_WIDTH:AB,MIN_LEGEND_WIDTH:Aa,GM_LEGEND_SPACING:a,IMAGE_SIZE_FIXED:E};Au.GMLegend.isHorizontal=function(A2){return A2>5;};Au.GMLegend.measureTextWidth=function(A3,A2,A4){return b(A3,A2,A4);};Au.GMLegend.getLegendHeight=function(A2,A8,A5,A4,A6,A7,A3){return k(A2,A8,A5,A4,A6,A7,A3);};Au.GMLegend.recalculateColorBySlotHeight=function(A2,A3){return J(A2,A3);};Au.GMLegend.getSizeByWidth=function(A3,A2){return Ae(A3,A2);};Au.GMLegend.getColorByDataArray=function(A2){return AT(A2);};Au.GMLegend.getSizeByDataArray=function(A2){return AF(A2);};Au.GMLegend.getAllColorByElements=function(A2){return M(A2);};Au.GMLegend.applyHTML5Props=function(A4,A6){var A5=parseInt(A4.fontSize,10)||8,A3;if(A4.fontSize.indexOf("px")>=0){A5=Math.floor(A5*f+0.5);}A3=Math.floor(A5/f*D+0.5);F=Au.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT=Math.max(A5,8)+9;Ai=Au.GMLegend.Constants.STANDED_LINE_HEIGHT=Math.floor(A5/f+0.5);l=Au.GMLegend.Constants.TEXT_LINE_HEIGHT=Math.max(A3,15);AY=Au.GMLegend.Constants.CB_TABLE_ROW_HEIGHT=Au.GMLegend.IMAGE_SIZE_FIXED||(Math.max(A3,20)+2);AD=Au.GMLegend.Constants.SB_TABLE_LINE_HEIGHT=Math.max(A3,14)+2;Ax=Au.GMLegend.Constants.BORDER_WIDTH=parseInt(A4.borderWidth,10)||1;var A2=parseInt(A4.tbHeight,10);t=Au.GMLegend.Constants.TITLE_BAR_HEIGHT=isNaN(A2)?Au.GMLegend.Constants.TITLE_BAR_HEIGHT_DEFAULT:A2;if(A6){F=Au.GMLegend.Constants.TABLE_TITLE_LINE_HEIGHT=Au.GMLegend.Constants.TEXT_LINE_HEIGHT;}};Au.GMLegend.getLegendSize4MinMode=function(A3,A4,A8){var A7,A5,A6=N(A4,A8),A2=t+2*Ax;if(A3){A5=A3.elements||M(A3);A7=A5.length;A2+=AY*A7;A2+=2*A;}A2=Math.min(A2,A6);return{width:AJ+5+7+2*Ax,height:A2};};Au.GMLegend.getLegendSize=function(BK,BI,BE,BL,A7,A3,A8,A6){var BD,BB,A9,BG,BF=N(BL,A3),BH=0,BJ=0,A5={},BC,A2,A4,BA;if(!BK||!BK.length||BK.length<1){return{};}if(BI!==undefined){BA=Math.floor(Aq(BK,A7)*BI);BG=Math.min(BA,Math.floor(BE/3));BG=Math.max(BG,50);return p(BK,BG,BL,A7,A3,A8,A6);}BG=Math.min(Math.floor(0.2*BE),300);for(BD=0;BD<BK.length;BD++){A2=BK[BD];if(A2.dataType===Ao.COLOR_BY){BC=Ap(A2.dataObj,A7);if(BC>BH){BH=BC;}A2.cutBy=0;}else{if(A2.dataType===Ao.SIZE_BY){BC=A6?0:Ae(A2.dataObj,A7);if(BC>BJ){BJ=BC;}}}}BB=Math.max(BH,BJ)+2*Ax;A5.width=Math.min(BB,BG);A5.scale=A5.width/BB;A4=k(BK,A5.width,A7,false,A8,A6);A9=A4.height;A5.rowHeights=A4.rowHeights;A5.autoCollapse=false;A5.minHeight=A4.minHeight;A5.height=Math.min(A9,BF);if(A9>BF){J(BK,BF);}return A5;};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.BaseVisDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.vi.util.ThresholdUtils","mstrmojo.CustomVisUtility","mstrmojo.array","mstrmojo.hash","mstrmojo.func");mstrmojo.requiresDescs(7974,7975,11099,13295,13296);var o=mstrmojo.array,b=mstrmojo.hash,AI=mstrmojo.func,AB=mstrmojo.vi.ui.DatasetUnitMenuUtils,p=mstrmojo.vi.models.EnumDragSources,AA=mstrmojo.emptyFn,z="-1",AH=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,i=mstrmojo.vi.viz.EnumDSSDropZones,y=mstrmojo.vi.viz.EnumWidgetTypes,P=mstrmojo.vi.util.ThresholdUtils,B=mstrmojo.CustomVisUtility.error,Q=mstrmojo.CustomVisUtility.warn;var AD=0,N=1,H=2,u=3;var e={ATTRIBUTE:":ATTR",METRIC:":METR"};var G=["XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","Angle","Grouping","GeoAttribute","Layout","FromItem","ToItem","ItemSize","Latitude","Longitude","Metric","Trend"];function R(AO){var AP={Angle:"AngleBy",Grouping:"Grp",GeoAttribute:"Geo",Layout:"layout",FromItem:"from",ToItem:"to",ItemSize:"itemsz",Latitude:"Lat",Longitude:"Long",Metric:"metric",Trend:"trend"};if(AP.hasOwnProperty(AO)){return AP[AO];}return AO;}function L(AO){return AO===-1||AO===i.Rows||AO===i.Columns;}function C(){var AR=[],AO=this.getHost().model,AQ=this.getHostStructure(),AP=[{n:"rows",axis:i.Rows},{n:"cols",axis:i.Columns},{n:"mx",axis:-1}];o.forEach(AP,function(AS){o.forEach(AQ[AS.n],function(AU,AT){if(AU.did!==z){AR.push(AO.getRemoveTemplateUnitAction(b.copy(AU,{axis:AS.axis,unitPos:AT+1})));}});});return AR;}function AM(AP){var AO=false;o.forEach(this.getCustomDropZones(),function(AR,AT){var AS=G[AT],AQ=i[AS];if(AP.id===AQ){AO=!!AR.isColorBy;return false;}});return AO;}function A(AO){return AO.id===i.BreakBy;}function q(AO,AP){return AM.call(this,AO)&&this.isMetric(AP);}function AG(AU,AT,AQ){var AV=this.getHost(),AW=AT&&AT[0],AR,AO,AP,AS=false;if(q.call(this,AU,AW)){AR=this.getDefaultThresholdColorsAndBands();if(AR){AO=AR.colors;AP=AR.bands;if(!o.isArray(AO)||!o.isArray(AP)){B("Type of threshold colors and bands should be Array!");AS=true;}if(AP.length!==AO.length-1){B("The length of threshold bands should be equal to the length of threshold colors - 1");AS=true;}}if(AS){AO=undefined;AP=undefined;}P.addThresholds(AV.model,AV,AV.node,AW,AQ,AO,AP);}}function E(AP,AO){var AQ=AP.allowObjectType;if(AP.isColorBy){if(!AO.cbDefined){AO.cbDefined=true;}else{Q("More than one dropzone are marked as 'isColorBy'.");}if(AQ===X.ATTRIBUTE_AND_METRIC){Q("The dropzone marked as 'isColorBy' should NOT accept 'ATTRIBUTE_AND_METRIC' object type. Otherwise, we will use color by attributes by default.");}else{if(AQ===X.METRIC&&AP.maxCapacity!==1){Q("The 'maxCapacity' should be 1 for the dropzone marked as 'isColorBy' and allowObjectType is 'METRIC'. Otherwise we will only use the first metric.");}}}if(AP.isSizeBy){if(!AO.sbDefined){AO.sbDefined=true;}else{Q("More than one dropzone are marked as 'isSizeBy'.");}if(AQ!==X.METRIC){Q("The dropzone marked as 'isSizeBy' should ONLY accept 'METRIC' object type.");}if(AP.maxCapacity!==1){Q("The 'maxCapacity' should be 1 for the dropzone marked as 'isSizeBy'. Otherwise we will only use the first metric.");}}}function U(AP){var AV=AP&&AP.length;if(!AV){return null;}var AR=G.length;if(AV>AR){throw"ERROR: Defined drop zones exceeds max capacity: "+AR+"!";}var AU=this,AQ=[],AS=[],AO={};var AT=function(AY){if(AY===true||AY==="true"){return true;}if(AY===false||AY==="false"){return false;}var AW=false;try{if(AY){AW=(new Function("return "+AY)).call(this);}}catch(AX){AW=false;}return AW;};o.forEach(AP,function(AW,AY){var AZ=AW.name,AX=G[AY];if(o.indexOf(AS,AZ)>-1){throw"ERROR: More than one drop zones have same name!";}AS.push(AZ);E(AW,AO);AQ.push(AU.getZone(AZ,i[AX],AU.getDZFlatStruct()[R(AX)],AT.call(AU,AW.disabled),{title:AW.title,allowSingle:AW.maxCapacity===1}));});return AQ;}function n(AP){var AO=-1;o.forEach(this.getCustomDropZones(),function(AQ,AR){if(AQ.name===AP){AO=AR;return false;}});return AO;}function a(AV,AR,AQ,AP){var AW=this,AS=AD,AO=Number.MAX_VALUE,AP=typeof AP==="number"?AP:0,AU=-1;o.forEach(this.getCustomDropZones(),function(AZ,Aa){if(AZ.name===AV.n){AS=AZ.allowObjectType;AO=AZ.maxCapacity;AU=Aa;return false;}});if(AU===-1){return AR;}var AX=this.isReplacing(AQ),AT=this.getDropZoneObjectsByIndex(AU),AY=AT.length;if(!AX&&AY+AP>=AO){return[];}return o.filter(AR,function(Aa){var AZ=AW.isMetric(Aa);switch(AS){case N:return !AZ;case H:return AZ;case u:return !AY?true:((AY===1&&AX)||(AW.isMetric(AT[0])===AZ));}return true;},{max:AO});}function AN(AP,AS,AT){var AR=this,AO=AP.allowObjectType;if(AO!==AT&&AS.length>0){if(AO===u&&AT===N&&o.filterOne(this._dropZoneTransitions,function(AU){return AU.toZoneId===i[G[n.call(AR,AP.name)]]&&!AR.isMetric(AU.obj);})){return ;}var AQ=Math.min(AP.maxCapacity||Number.MAX_VALUE,AS.length);this.transitionObjectsToZone(AP.name,AS.splice(0,AQ));}}function O(AP,AO,AQ){var AT=this.getCustomDropZones(),AS=[],AR=this;o.forEach(AT,function(AU,AV){if(AU[AP]){AS=AR.getDropZoneObjectsByIndex(AV);return false;}});return o.filter(AS,function(AU){return AO?AR.isMetric(AU):!AR.isMetric(AU);},AQ);}function AK(AP,AO){return AP.indexOf(AO,AP.length-AO.length)!==-1;}mstrmojo.vi.models.CustomVisDropZones=mstrmojo.declare(mstrmojo.vi.models.BaseVisDropZones,null,{scriptClass:"mstrmojo.vi.models.CustomVisDropZones",enableRAEntries:false,hideDropZones:false,getDropZones:function t(){var AQ=this.getHostStructure(),AR=this.getHost(),AP=U.call(this,this.getCustomDropZones()),AO=AQ?(AP||this._super().zones):[];this.dropZones=AO;return{n:AR.defn.ttl,zones:AO};},getAllowDropInfo:function D(AP,AQ,AO,AS,AR){AQ=a.call(this,AP,AQ,AS,AO);return b.copy(this.shouldAllowObjectsInDropZone(AP,AQ,AO,AS,AR),{allowedItems:AQ.concat(),removeReplaced:AS===AH.ON&&AP.items[AO]&&o.find(AQ,"did",AP.items[AO].did)===-1});},unitsDropped:function AJ(Ae,AO,AS){var AT=this.getHost(),Ac=b.walk("defn.vis.vn",AT),AP=AO.src.data,AU=AO.actions||[],AW=AS.idx,AQ,AX,Af=this,Ab=Af.docModel,AV=AS.allowedItems,AY=(this.isReplacing(AS.edge)&&AS.removeReplaced)?Ae.items[AW]:null,AZ=this.getAddItemActions(Ae,AV,this.getDropTargetIndex(Ae,AS),AY,AP.dsid);AZ=AZ.concat(this.getActionsForObjectsDropped(Ae,AV,this.getDropTargetIndex(Ae,AS),AY,{datasetId:AP.dsid})||[]);AQ=AU.concat(this.getUpdateTemplateAction(AZ));if(AI.safeCall("isTimeSeriesInsightsViz",Ab)(Ac)&&A(Ae)){var Aa=AS.removeReplaced,Ad=Aa?AV[0]:AS.item,AR=Ab.getInsightVizBreakByAction(this,Ad);AQ.push(AR);}AX=function(Ag){return function(){var Ah=Ag?AT.model.wrapUnsetVisualizationFilterAction(AQ):AQ;Af.submitDropZoneUpdates(Ah,AI.wrapMethods(AO.callback,AT.model.docModel.controller._getXtabCallback(AT)));};};Ab.checkAndNotifyVFChangeOnDZUnitsUpdate({actions:AQ,zm:Af},AX(true),AX(false));},getAddItemActions:function AC(AX,AW,AY,AP,AU){var AZ=this.getHost(),AT=AZ.model,AO=AX.id,AV=L(AO),AQ={datasetId:AU},AR=[];if(!AV){var AS=true;o.forEach(this.dropZones,function(Aa){if(Aa.items.length>0){AS=false;return false;}});if(AS){AR.push({act:"createDefaultDropZones",nodeKey:AZ.k,treeType:AZ.defn.tt,datasetId:AT.data.datasetId,datasetType:3,widgetType:y.CUSTOM,partialUpdate:{nodes:[AZ.k]}});AR=AR.concat(C.call(this));}}if(AP){if(AV){AR.push(AT.getRemoveTemplateUnitAction(AP));}else{AR=AR.concat(this.getRemoveDropZoneUnitActions(AX,AP));}}if(AV){o.forEach(AW,function(Aa){AR.push(AT.getAddTemplateUnitAction(Aa,AU,AO,AY));});}else{AR=AR.concat(this.getAddDropZoneUnitsActions(AX,AW,AY,AQ)||[]);}AG.call(this,AX,AW,AR);return AR;},getRemoveDropZoneUnitActions:function F(AO,AP,AQ){var AR=this._super(AO,AP,AQ);if(q.call(this,AO,AP)){AR=this.getRemoveThresholdsActions(AO,AP).concat(AR);}return AR;},deleteItems:function I(AR,AQ){var AS=this,AU=AS.getHost(),AW=AS.docModel,AV=b.walk("defn.vis.vn",AU),AP=[],AT={actions:[]};o.forEach(AQ,function(AX){if(L(AR.id)){AP.push(AS.getHost().model.getRemoveTemplateUnitAction(AX));}else{AP=AP.concat(AS.getRemoveDropZoneUnitActions(AR,AX));}});AP=AP.concat(this.getActionsForObjectsRemoved(AR,AQ)||[]);if(AI.safeCall("isTimeSeriesInsightsViz",AW)(AV)&&A(AR)){var AO=AW.getInsightVizBreakByAction(AS);AT.actions.push(AO);}this.submitDropZoneTemplateUpdates(AP,AT);},getUnitMenuItems:function s(AX,AY,Ac,AQ){var Ab=this.getCustomDropZones()!==undefined;this._super(AX,AY,Ac,AQ,Ab);var Aa=this.getHost(),AW=Aa&&Aa.isBinaryData,AP=AX.getMenuItems(true),AZ=o.find(AP,"n",mstrmojo.desc(13296,"Edit Groups...")),AU=o.find(AP,"n",mstrmojo.desc(13295,"Create Groups...")),Ad=b.walk("model.data.gts.row",Aa),AT=Ad?o.find(Ad,"id",Ac.did):-1;if(Ad&&AT!==-1){var AO,AR=function(){var Ae={otp:Ac.t,id:Ac.did,n:Ac.n,axis:1,ui:AT};Aa.derivedElementsEdit(Ae);};if(AZ!==-1){AO=AP[AZ];AO.fn=AR;}if(AU!==-1){AO=AP[AU];AO.fn=AR;}}if(!Aa.showThreshold&&q.call(this,AY,Ac)){AX.addSeparator();this.buildThresholdMenuOptions(AX,{item:Ac},true);}if(AW){const AS=[mstrmojo.desc(7974,"Sort Ascending"),mstrmojo.desc(7975,"Sort Descending"),mstrmojo.desc(11099,"Advanced Sort..."),mstrmojo.desc(13295,"Create Groups..."),];for(var AV=AX.menus.length-1;AV>=0;AV--){if(AS.indexOf(AP[AV].n)!==-1){AX.menus.splice(AV,1);}}}this.getDropZoneContextMenuItems(AX,AY,Ac,AQ);},getClearAllUnitsActions:function S(){if(this.getCustomDropZones()===undefined&&this._super){return this._super();}return mstrmojo.vi.models.DropZonesModel.prototype.getClearAllUnitsActions.call(this);},transitionDropZones:function J(AO,AP){this._dropZoneTransitions=[];this.customDropZonesTransition(AO,AP);return this._dropZoneTransitions;},getColorByAttributes:function(){return O.call(this,"isColorBy",false);},getColorByMetric:function(){return O.call(this,"isColorBy",true,{max:1})[0];},getSizeByMetric:function(){return O.call(this,"isSizeBy",true,{max:1})[0];},useAbsoluteSizeByValue:function(){var AP=this.getCustomDropZones(),AO=o.find(AP,"isSizeBy",true);return AO>-1?!!AP[AO].useAbsolute:false;},getDropZone:function(AO){switch(typeof AO){case"number":return this.dropZones[AO];case"string":return this.getDropZone(o.find(this.dropZones,"n",AO));case"object":return AO;default:return undefined;}},getDefaultTooltipOrder:function h(){var AP=this.getCustomDropZones(),AO=[];o.forEach(AP,function(AQ){AO.push(AQ.name);});return[AO];},setTooltipObjsOrder:function Y(AP){var AT=this.getHost(),AX=[],AV=[],AS,AR=AP.length,AU,AW,AQ=this;for(var AO=0;AO<AR;AO++){AU=AP[AO];if(o.isArray(AU)){o.forEach(AU,function(AY){AW=undefined;if(AK(AY,e.ATTRIBUTE)){AY=AY.replace(e.ATTRIBUTE,"");AW=false;}if(AK(AY,e.METRIC)){AY=AY.replace(e.METRIC,"");AW=true;}AX=AQ.getDropZoneObjectsByName(AY);o.forEach(AX,function(AZ){if(AW===undefined||(AW===true&&AQ.isMetric(AZ))||(AW===false&&!AQ.isMetric(AZ))){if(AV.indexOf(AZ.id)===-1){AV.push(AZ.id);}}});});AS=AV.length;if(AS&&(AV[AS-1]!=="seperate")&&(AO<(AR-1))){AV.push("seperate");}}}if(AV.length&&AV[0]==="seperate"){AV=AV.shift();}AS=AV.length;if(AS&&AV[AS-1]==="seperate"){AV.pop();}AT.tooltipObjsInOrder=AV;},getNotAdditionalAttrIds:function M(){var AR=this.getCustomDropZones(),AP,AQ=[],AO=this;o.forEach(AR,function(AS){if(AS.isAdditionalInfo!==true){AP=AO.getDropZoneObjectsByName(AS.name);o.forEach(AP,function(AT){if(!AO.isMetric(AT)){AQ.push(AT.id);}});}});return AQ;},getAdditionalAttrIds:function g(){var AS=this.getCustomDropZones(),AP,AR=[],AO=this,AQ=this.getNotAdditionalAttrIds();o.forEach(AS,function(AT){if(AT.isAdditionalInfo===true){AP=AO.getDropZoneObjectsByName(AT.name);o.forEach(AP,function(AU){if(!AO.isMetric(AU)&&(AQ.indexOf(AU.id)===-1)){AR.push(AU.id);}});}});return AR;},getCustomDropZones:AA,getActionsForDoubleClick:function(AR,AQ,AP){var AO=this;var AS=[];o.forEach(this.dropZones,function(AT){if(AO.isObjectAllowedForDropZone(AR,AT,AP)){AS=AO.getAddItemActions(AT,[AR],AT.items.length,null,AQ);return false;}});return AS;},isObjectAllowedForDropZone:function(AS,AT,AO,AR){var AP=this.getDropZone(AT);if(!AP){return false;}var AQ=this.getAllowDropInfo(AP,[AS],AO===undefined?AP.items.length:AO,AR===undefined?AH.BELOW:AR,{src:{data:{src:p.DATASETS}}});return AQ.allowedItems.length>0;},getActionsForObjectsDropped:AA,getActionsForObjectsRemoved:AA,getDropZoneContextMenuItems:AA,shouldAllowObjectsInDropZone:AA,getDefaultThresholdColorsAndBands:AA,getHostStructure:function AF(){var AO=this.getHostModel();return AO&&AO.gsi;},getDropZoneObjectsByIndex:function j(AO){return this.getDZFlatStruct()[R(G[AO])]||[];},getAddDropZoneObjectsActions:function k(AU,AT,AS,AO,AR){var AP=this.getDropZone(AT);var AQ=this.getAddDropZoneUnitsActions(this.getZoneModelByName(AT),o.ensureArray(AS),AO===undefined?AP.items.length:AO,AR);o.insert(AU,undefined,AQ);},getRemoveDropZoneObjectsActions:function x(AR,AQ,AP){var AO=this;o.forEach(o.ensureArray(AP),function(AS){Array.prototype.push.apply(AR,AO.getRemoveDropZoneUnitActions(AO.getZoneModelByName(AQ),AS));});},getReplaceDropZoneObjectsActions:function(AS,AR,AP,AO){var AQ=this.getDropZone(AR).items;this.getRemoveDropZoneObjectsActions(AS,AR,AQ[AO]?[AQ[AO]]:[]);this.getAddDropZoneObjectsActions(AS,AR,[AP],AO);},getDropZoneObjectsByName:function m(AO){return this.getDropZoneObjectsByIndex(n.call(this,AO));},isMetric:function w(AO){return AO&&(AO.t===4||(AO.t===10&&AO.targetType===4));},isGeoAttr:function(AO){return AB.isGeoAttr(AO,AO.useAvailGeoFmsOnly);},isTimeAttr:function(AO){return AB.isTimeAttr(AO);},isSameObject:function d(AP,AO){return AP&&AO&&(AP.did||AP.oid||AP.id)===(AO.did||AO.oid||AO.id);},isReplacing:function l(AO){return AO===AH.ON;},isObjectInZone:function Z(AO,AQ){var AP=this;return o.filter(AP.getDropZoneObjectsByName(AQ),function(AR){return AP.isSameObject(AR,AO);}).length>0;},isZoneEmpty:function AL(AO){return(this.getDropZoneObjectsByName(AO)||[]).length===0;},getZoneModelByName:function W(AO){return this.getZoneModelByZoneId(i[G[n.call(this,AO)]]);},getAvatarIconClass:function f(){return"viXtab";},getDropZoneName:function AE(AO){return AO&&AO.n;},transitionObjectsToZone:function c(AQ,AP){var AO=this._dropZoneTransitions,AR=n.call(this,AQ);if(AO&&AR!==-1&&AP){o.ensureArray(AP).forEach(function(AS){AO.push({obj:AS,toZoneId:i[G[AR]]});});}},customDropZonesTransition:function K(AQ,AR){var AS=this,AP=this.getCustomDropZones()||[];if(AS.scriptClass==="mstrmojo.plugins.ImageEnhancedKPI.ImageEnhancedKPIDropZones"){var AO=AP[1];AP[1]=AP[2];AP[2]=AO;}AP.forEach(function(AT){AN.call(AS,AT,AQ,H);AN.call(AS,AT,AR,N);});}});mstrmojo.vi.models.CustomVisDropZones.ENUM_ALLOW_DROP_TYPE={ATTRIBUTE_AND_METRIC:AD,ATTRIBUTE:N,METRIC:H,ATTRIBUTE_OR_METRIC:u};var X=mstrmojo.vi.models.CustomVisDropZones.ENUM_ALLOW_DROP_TYPE;mstrmojo.vi.models.CustomVisDropZones.CUSTOM_DZ_SUFFIX=e;}());(function(){mstrmojo.requiresCls("mstrmojo.XtabBase","mstrmojo._Formattable","mstrmojo._IsSelectorTarget","mstrmojo._IsDocXtab","mstrmojo._XtabSelections","mstrmojo._XtabCellHoverMgr","mstrmojo.XtabCellHoverPopup","mstrmojo._HasPopup","mstrmojo._HasContextualLink","mstrmojo.dom","mstrmojo.vi.ui.rw._SupportTabNav","mstrmojo.vi.ui.rw.CustomSortDisplayPanel","mstrmojo.mstr.EnumWebAPIErrorCodes","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes");var b=0,A=1,z=2,M=3,k="overflow:auto",i="overflow:hidden",Q=mstrmojo.dom,y="mstrmojo.DocPanelStack",AB="px",H=mstrmojo.DocDataService.SUPPRESS_DATA,s=mstrmojo.models.template.DataInterface,N=s.ENUM_GRID_RESIZE,x=N.FIXED,J=Q.isIOSTouch,D=mstrmojo.css;var l=function P(AD,AE){var AF=AD&&AD.parent;while(AF&&AF.scriptClass!==y){if(AF.scriptClass===AE){return AF;}AF=AF.parent;}return AF;};function F(){var AD=window.event,AE=AD.target,AK=AD.keyCode;var AJ=Q.findWidget(this),AM=AJ&&AJ.zone.tableNode.rows;if(AE.getAttribute("role")==="grid"&&(AD.keyCode===37||AD.keyCode===38||AD.keyCode===39||AD.keyCode===40)){var AL=AJ.getCellFromTableToBeFocussed(AE.rows[0].cells[0],AJ);AL.focus();D.addClass(AL,"xtabCellFocus");AD.preventDefault();}else{if(AE.tagName==="TD"||AE.tagName==="TABLE"){var AL,AH=AE.parentElement.rowIndex;switch(AK){case 37:case 39:var AI=AK===37;AL=o.call(this,AM,AH,AE,AI,AJ);AD.preventDefault();break;case 38:case 40:var AG=AK===40;AL=S.call(this,AM,AH,AE,AG,AJ);AD.preventDefault();break;case 121:if(AD.shiftKey&&AJ&&AJ.cellHoverMgr&&AJ.cellHoverMgr.oncontextmenu){AJ.cellHoverMgr.oncontextmenu(AD,self,AE);}break;case 13:var AF=AE.firstChild;if(AF.tagName==="A"&&AD.altKey){window.open(AF.getAttribute("href"),"_blank");}else{E.call(this,AE,AJ);}break;}if(AL){window.setTimeout(function(){AL.focus();D.removeClass(AE,"xtabCellFocus");D.addClass(AL,"xtabCellFocus");},100);}}}}function o(AI,AH,AG,AJ,AD){var AF=AJ?AG.previousElementSibling:AG.nextElementSibling,AE=AJ?AI[AH-1]:AI[AH+AG.rowSpan];if(AF===null&&AE){AF=AJ?AE.lastChild:AE.firstChild;}if(AF){return AD.getCellFromTableToBeFocussed(AF,AD);}}function E(AF,AD){var AE=Q.findAncestorByName(AF,"table",false);if(AE){AD.handleSelection(event,AE,AF);}}function S(AL,AU,AH,AI,AG){var AP=AI?AL[AU+AH.rowSpan]:AL[AU-1],AS=AH.parentElement,AM=AS.childElementCount,AQ=AH.cellIndex,AE,AR;var AK=[],AT=[],AO=[],AN=[],AJ=0,AF=0,AD=0;for(AR=0;AR<AM;AR++){AK[AR]=AS.childNodes[AR].colSpan;AJ+=AK[AR];if(AR===0){AO[0]=AK[0];}else{AO[AR]=AO[AR-1]+AK[AR];}}if(AP){AE=AP.childElementCount;for(AR=0;AR<AE;AR++){AT[AR]=AP.childNodes[AR].colSpan;AF+=AT[AR];if(AR===0){AN[0]=AT[0];}else{AN[AR]=AN[AR-1]+AT[AR];}}}AD=AO[AQ]-AK[AQ];if(AJ<AF){AQ=AD+(AF-AJ);}else{if(AJ>AF){AQ=AD-(AJ-AF);}else{AQ=AD;}}for(AR=0;AR<AN.length;AR++){if((AN[AR]-AT[AR])<=AQ&&AQ<(AN[AR])){AQ=AR;break;}}if(AQ<0&&AU>0){AU-=1;return S.call(this,AL,AU,AH,AI,AG);}if(AU>0||AI){return AG.getCellFromTableToBeFocussed(AP.cells[AQ],AG);}}function U(){var AE=false,AF=this.gridData,AG=(AF&&AF.olm&&!(AF.rw&&AF.rw.row.bc>0)&&!this.defn.txi),AD=this.defn.txi,AH=false;if(this.model.hasRecursiveAttribute){AH=this.model.hasRecursiveAttribute(AF);}if(mstrApp.isDossier&&mstrApp.enableGridAccessibility&&mstrApp.isVI&&!AG&&!AH&&!AD&&!J){AE=true;}return AE;}function h(AH){var AE=this,AD=AE.clonedColHeader&&AE.clonedColHeader.isRendered()&&AE.clonedColHeader.getTableNode(),AF=AE.clonedRowHeader&&AE.clonedRowHeader.isRendered()&&AE.clonedRowHeader.getTableNode(),AG=AE.clonedTitle&&AE.clonedTitle.isRendered()&&AE.clonedTitle.getTableNode();if(AD){D.toggleClass(AD,"displayBorder",AH);}if(AF){D.toggleClass(AF,"displayBorder",AH);}if(AG){D.toggleClass(AG,"displayBorder",AH);}}mstrmojo.Xtab=mstrmojo.declare(mstrmojo.XtabBase,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._IsDocXtab,mstrmojo._XtabSelections,mstrmojo._HasContextualLink,mstrmojo._HasPopup,mstrmojo.vi.ui.rw._SupportTabNav,],{scriptClass:"mstrmojo.Xtab",cellHoverMgr:"mstrmojo._XtabCellHoverMgr",cellHoverPopupRef:"mstrmojo.XtabCellHoverPopup",preBuildRendering:function B(){var AF=this._super();var AE=this.gridData;var AD=this.lockHeadersCase===b&&AE.co;this.scrollboxNodeOverflow=AD&&!this.numRowFixed?i:k;var AG=this.getFormats();if(mstrmojo.dom.isIE8&&!AE.co&&this.lockHeadersCase===b&&(!AE.rw||(AE.rw&&(AE.rw.row.bc>=AE.rw.row.tc)))&&mstrmojo.string.isEmpty(AG.height)&&mstrmojo.string.isEmpty(AG.width)){this.scrollboxNodeOverflow="";}this._useFilter=this._useFilter||AE.cssflt||false;return AF;},postBuildRendering:function m(){var AI=this.gridData,AH=this._super(),AF=this.scrollboxNode;var AK=this;if(this.viewport){var AJ=function(){AK.addDisposable(AK.requiresContrib("cellHoverMgr",true));if(J){AK.viewport.ontouchstart=null;}else{AK.viewport.onmouseover=null;}if(event.type==="focus"&&AK.hasAccessibility&&AK.lockHeadersCase){h.call(AK,true);}};if(J||Q.isTouchOptimizationEnabled()){this.viewport.ontouchstart=AJ;}else{this.viewport.onmouseover=AJ;}}if(!this.getFormats().width&&this.model.docModel.addAutoWidthID&&(this.parent&&this.parent.scriptClass!=="mstrmojo.ExpressDocPanel")){this.model.docModel.addAutoWidthID(this.id);AI=this.gridData;var AG=AI&&AI.afc;if(AG&&mstrmojo.dom.isIE7){var AD=l(this,y);if(AD&&AD.scriptClass===y){this.viewport.style.width=this.contentNode.offsetWidth+(this.scrollboxNode.offsetWidth-this.scrollboxNode.clientWidth)+"px";}}}if(Q.isIE&&!Q.isIE8&&this._useFilter){window.setTimeout(function(){var AM=document.createElement("img");AF.appendChild(AM);AF.removeChild(AM);},0);}if(U.call(this)){var AL=this.zone&&this.zone.tableNode;this.hasAccessibility=true;if(AL){this.domNode.onkeydown=this.keyDownHandler;AL.onfocus=AJ;AL.onblur=this.onblur;mstrmojo.css.addClass(this.zone.gridContainerNode,"gridAccessible");if(this.isMenuClicked){AL.focus();this.isMenuClicked=false;}}else{if(this.isMenuClicked){this.isMenuClicked=false;this.parent.menuBtnInfo.btn.focus();}}if((this.lockHeadersCase&M)||(this.lockHeadersCase&z)){var AE=this.clonedColHeader&&this.clonedColHeader.isRendered()&&this.clonedColHeader.getTableNode();if(AE){D.addClass(AE.parentElement,"gridAccessible");AE.tabIndex="-1";}}}return AH;},isValidTarget:function O(AE){if(!this._super(AE)){return false;}var AD=true;if(AE.classList&&AE.classList.contains("invalid")){AD=false;}return AD;},initTabNavigation:function(){if(this.viewDataDialog){return ;}this._super();},buildNavList:function u(){var AF=this.parent,AD=AF&&AF.menuBtnInfo&&AF.menuBtnInfo.btn,AH=AF&&AF.filterBtnNode,AG=AF&&AF.maxRestoreBtnNode,AE=[AH,AG,AD];titleButtonsNavList=AF.getTitleButtonsNavList&&AF.getTitleButtonsNavList()||[];AE=titleButtonsNavList.concat(AE);if(U.call(this)){AE.unshift(this);}this.navList=AE;},enterUnit:function f(){this.resetTabNav();this.grabFocus();this.navigateToFirstValidTarget();},grabFocus:function K(AD){if(this._super){this._super(AD);}var AE=this.zone&&this.zone.tableNode;if(AE&&AD&&U.call(this)){AE.focus();}},loseFocus:function p(AE){if(this._super){this._super(AE);}var AD=this.zone&&this.zone.tableNode;if(AD&&AE){AD.blur();}},onkeydown:function X(AD){if(this._super){this._super(AD);}if(this.viewDataDialog){return ;}var AF=AD.e||AD,AE=AF.key;if(this.handleTab(AD)){return ;}if(AE==="Escape"){AD.preventDefault();AF.stopPropagation();this.navigateToParent(true);}},onCGBMapChange:function(AD){if(this._resolveCGBToTKS(AD.cgbMap)&&this._currentSelectedTD){this.defaultAction(this._currentSelectedTD);}},_resolveCGBToTKS:function t(AL){if(!AL){return false;}var AJ=this.model.scm,AF="\u001E",AH,AE,AI,AG,AD,AK=false;for(AE in AJ){AI=AJ[AE];AG=AI.cgb;for(AH in AG){AD=AL[AG[AH]];if(AD){if(!AI.tks){AI.tks=AD;AK=true;}else{if(AI.tks&&(AI.tks.indexOf(AD)<0)){AI.tks+=AF+AD;AK=true;}}}}}return AK;},onGridWidthChanged:function d(AD){if(this._super){this._super(AD);}if(this.cellHoverMgr.onXtabWidthChanged){this.cellHoverMgr.onXtabWidthChanged();}},getDim:function(){var AD=this.contentNode;return{w:AD.scrollWidth,h:AD.scrollHeight};},unrender:function C(AD){var AE=this.cellHoverMgr;if(AE&&AE.shutdown){AE.shutdown();}this._super(AD);},link:function I(AE,AD){this.controller.onLink(this,this.model.getLinkAction(AE,AD));},pivot:function R(AD,AE){this.controller.onPivot(this,this.model.getPivotAction(AD,AE));},drill:function AA(AD,AE){this.controller.onDrill(this,this.model.getDrillAction(this.getActionCells(AD),AE));},removeUnit:function Y(AD){this.controller.onRemoveUnit(this,this.model.getRemoveTemplateUnitAction({id:AD._e?AD._e.oid:AD.id,t:AD._e?AD._e.otp:AD.otp}));this.onDemandDrillItems=null;this.onDemandDrillDynamicItems=null;},showViewFilter:function a(AD){this.controller.onShowFilterEditor(this,AD);},showTotal:function L(AD,AF,AE){this.controller.onShowTotals(this,this.model.getTotalsAction(AD,AF,AE));},supportAdvancedSort:function w(){return !mstrApp.isDossier&&!this.hasArrayGSI;},deleteSelectorControl:function W(){var AD=this.gridData,AE=AD.sc;if(AE&&parseInt(AE.ct,10)===6){delete AD.sc;}},findSelectorControl:function G(){var AD=this.gridData.sc;if(AD&&parseInt(AD.ct,10)===6){this.selectorControl=AD;}else{delete this.selectorControl;}return this.selectorControl;},handlesMultiSelection:function q(AE){var AD=this.getCellForNode(Q.findAncestorByName(AE.getTarget(),"td",true,this.viewport)),AG=AD&&this.model.data.gts[AD.axis===1?"row":"col"][AD.tui||AD.ui],AF=AG&&AG.id&&AG.sc;return !!(this.findSelectorControl()||AF);},setAllXtabWidths:function AC(AD){},changeResizeScenario:function n(AL,AQ,AR,AM){var AT=new mstrmojo.models.template.DataInterface(this.gridData),AF=this.gridData.twm||{},AG=AF.bottom,AD=AT.getColumnHeaderData(true),AN=this,AJ=this.model,AE=this.id,AS=this.k,AH=[],AI=[],AK=1,AP=[];if(AQ){AH.push({act:"changeXtabColWidthScenario",value:AL});AD.forEach(function(AW,AV){var Ab=AW.oid||AW.id,AZ=function(Ac){return Ac.unitId===Ab&&Ac.depth===AK;};if(!(AW.fs&&AW.fs.length>0)){AK=1;}var AY=Ab===(AR&&AR.did);if(!AP.some(AZ)){AP.push({unitId:Ab,depth:AK});var Aa=Aa||AJ&&AJ.docModel.getZoomFactor(),AX=AY?AR.width:parseInt((AG[AV].w)||0,10),AU=Math.round(AX/Aa);AI.push({colIndex:AV,value:AY?AR.width+AB:AX+AB});if(AL===x){AH.push(AJ.getColumnResizeAction(Ab,AW.otp,AU,AK,AY?AR.isExtra:false));}}AK++;});var AO=function AO(AU,AW){var AV=mstrmojo.all[AE];if(AU===x){AN.updateRelatedColWidths(AW);}AN.updateScenario(AU);};AO(AL,AI);AN.submitColumnWidthChange(AH,AM);}return AM?AH:undefined;},submitColumnWidthChange:function c(AF,AD){if(!AD){this.model.getDataService().submitTemplateUpdates(this.k,AF,{success:function AE(){}},H);}},changeColumnWidth:function Z(AI,AP,AF,AQ,AG,AM){var AT=new mstrmojo.models.template.DataInterface(this.gridData),AD=AT.getColumnHeaderData(true),AK=this.model,AH=[],AO=this,AJ=[],AL=1,AN=-1,AR=[];if(AT.getColResizeScenario()!==x){AH=this.changeResizeScenario(x,true,{did:AI,t:AP,width:AF,depth:AQ,isExtra:AG},AM);return AM?AH:undefined;}var AE=AE||this.model.docModel.getZoomFactor(),AS=Math.round(AF/AE);if(AI==="all"){AD.forEach(function(AV,AU){var AY=AV.oid||AV.id,AX=function(AZ){return AZ.unitId===AY&&AZ.depth===AL;},AW=AD[AU-1];if(!(AV.fs&&AV.fs.length>0)||(AW&&AY!==(AW.oid||AW.id))){AL=1;}if(!AR.some(AX)){AR.push({unitId:AY,depth:AL});AJ.push({colIndex:AU,value:AF+AB});AH.push(AK.getColumnResizeAction(AY,AV.otp,AS,AL,false));}AL++;});}else{AD.every(function(AV,AU){var AW=(AV.oid===AI||AV.id===AI);if(AW){AN=AU+AQ-1;}return !AW;});if(AN>=0){AJ.push({colIndex:AN,value:AF+AB});AH.push(AK.getColumnResizeAction(AI,AP,AS,AQ,AG));}}AO.updateRelatedColWidths(AJ);AO.submitColumnWidthChange(AH,AM);return AM?AH:undefined;},keyDownHandler:function j(){F.call(this);},onblur:function e(){var AD=Q.findWidget(this),AE=AD&&AD.parent;if(AE){h.call(AE,false);}},getCellFromTableToBeFocussed:function g(AG,AO){var AF=AG,AN=AO.getCellForNode(AG),AH=AO.model.getCellInfo(AN),AL=AG.parentElement&&AG.parentElement.rowIndex||0,AM=AG.cellIndex,AJ=AO.lockHeadersCase,AD=AO.zone.tableNode;if(AJ){var AE=AO.clonedColHeader&&AO.clonedColHeader.isRendered()&&AO.clonedColHeader.getTableNode(),AK=AO.clonedRowHeader&&AO.clonedRowHeader.isRendered()&&AO.clonedRowHeader.getTableNode(),AI=AO.clonedTitle&&AO.clonedTitle.isRendered()&&AO.clonedTitle.getTableNode();if(AH.isTitle){if((AJ!==M)&&(AJ&A)){AF=AK?AK.rows[AL].cells[AM]:AD.rows[AL].cells[AM];}else{if((AJ!==M)&&(AJ&z)&&(AE)){AF=AE.rows[AL].cells[AM];}else{AF=AI?AI.rows[AL].cells[AM]:AE.rows[AL].cells[AM];}}}else{if(AH.isHeader){if((AJ!==M)&&(AJ&A)){AF=AD.rows[AL].cells[AM];}else{AF=AE.rows[AL].cells[AM];}}else{if(AN&&AN.axis===2){if((AJ&z)&&(AE)){AF=AE.rows[AL].cells[AM];}else{AF=AD.rows[AL].cells[AM];}}else{AF=(!AH.isMetric&&AO.clonedRowHeader&&AO.clonedRowHeader.isRendered())?AK.rows[AL].cells[AM]:AD.rows[AL].cells[AM];}}}}AD.rows[AL].cells[AM].focus();return AF;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.array","mstrmojo.expr","mstrmojo.hash","mstrmojo.color","mstrmojo._HasLayout","mstrmojo.vi.ui._IsPanel","mstrmojo._HasPopup","mstrmojo._HasOwnAvatar","mstrmojo.vi.controllers.EnumEvents","mstrmojo.vi.ui._HasTargets","mstrmojo.vi.ui._IsBoxLayoutChild","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._Formattable","mstrmojo.vi.ui._IsUnitContainerTitleBar","mstrmojo.DynamicClassFactory","mstrmojo.Box","mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.string","mstrmojo.models.FormatModel","mstrmojo.DocDataService","mstrmojo.vi.ui.TitleBar","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.ui.rw._HasVisFilterIndicator","mstrmojo.EnumRWUnitType","mstrmojo.vi.ui._CanGroup","mstrmojo._IsAccessibleMenu","mstrmojo.util.ui._HostsSplitter","mstrmojo.vi.ui._CanFreeformGroup","mstrmojo.vi.ui._SupportLayerNode","mstrmojo.vi.ui.rw._boxCornerResizer","mstrmojo.VisUtility","mstrmojo.VisBase","mstrmojo.Xtab","mstrmojo.vi.util.A11yUtility","mstrmojo.vi.ui.rw._SupportTabNav","mstrmojo.vi.ui.VizFloatingIcon","mstrmojo.vi.ui._HasSkeleton","mstrmojo.vi.ui._SupportCopyPasteFormat","mstrmojo.vi.ui.rw._SupportConditionalFormat","mstrmojo.vi.ui.rw._SupportChatPanel","mstrmojo.vi.ui.rw._HasDupCopyMoveMenuItems","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(629,1388,3099,3100,3101,3102,3499,3500,3501,3502,3503,3504,3506,3507,11477,11478,25843);var DP=mstrmojo.array,Ct=mstrmojo.css,CB=mstrmojo.dom,Bf=mstrmojo.hash,Aa=mstrmojo.func,Bx=mstrmojo.string,AT=mstrmojo.color,AD=mstrmojo.vi.util.A11yUtility,CH=mstrmojo.vi.models.EnumDragSources,AV=mstrmojo.models.FormatModel,Bm=AV.ENUM_PROPERTY_NAMES,Cb=AV.ENUM_REACT_FORMAT_TABS,Dz=mstrmojo.mstr.EnumDSSXMLObjectTypes,AQ=mstrmojo.vi.enums.EnumFeatures,DB=mstrmojo.EnumRWUnitType,Dd=mstrmojo.VisUtility,B5=mstrmojo.vi.models.VIComponentMap.TYPES,An=mstrmojo.expr,AV=mstrmojo.models.FormatModel,DF=AV.getFormatUpdate,B2=An.STP;EVENTS=mstrmojo.vi.controllers.EnumEvents,DEFAULT_Z_INDEX=1,CSS_BTN_VISIBLE="visible",CSS_MOUSE_LEFT="mouse-left",CSS_NO_MENU="no-menu",CSS_OVERLAY="ctrlOverlay",CSS_OR_VERTICAL="or-v",CSS_OR_HORIZONTAL="or-h",CSS_BTN_ACCESSIBLE="accessible",CSS_SELECTED="selected",CSS_HAS_SUBTITLE="has-subtitle",SPLITTER_POS_ADJUST=3.5,RESIZER_POS_ADJUST=5,RIGHT_SPLITTER=2,LEFT_SPLITTER=0,UNIT_CONTAINER_ROOT_CLASS_NAME="mstrmojo-UnitContainer-root",$ENUM_COPY_MOVE_TYPES=mstrmojo.vi.models.EnumCopyMoveTypes,ERROR_TYPE=mstrmojo.VisEnum.SERVER_JSON_ERROR_TYPE;var C0=CB.isTouchOptimizationEnabled()?[]:["mouseenter","mouseover","mouseleave","mousemove","mouseout","click","contextmenu","keydown","keyup","focus","blur"];var BG='{"txnVisible":true,"txnLabelType":0,"exportVisible":true,"exportLabelType":"0","exportOptions":"0","maximizeVisible":true,"contextMenuVisible":true}';var DQ={SHORT:"ghost-short",TALL:"ghost-tall",GRANDE:"ghost-grande",VENTI:"ghost-venti",HIDE_TITLE:"ghost-hide-title",HIDE_DESC:"ghost-hide-desc"};var BC={BLACK:"ghost-black",WHITE:"ghost-white",GREY:"ghost-grey"};var q=Bf.valarray(DQ);var e=Bf.valarray(BC);var D=q.concat(e);var DY={W_LV1:{H_LV1:[DQ.VENTI],H_LV2:[DQ.GRANDE],H_LV3:[DQ.TALL],H_LV4:[DQ.TALL,DQ.HIDE_TITLE],H_LV5:[DQ.SHORT,DQ.HIDE_TITLE],H_LV6:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC]},W_LV2:{H_LV1:[DQ.GRANDE],H_LV2:[DQ.GRANDE],H_LV3:[DQ.TALL],H_LV4:[DQ.TALL,DQ.HIDE_TITLE],H_LV5:[DQ.SHORT,DQ.HIDE_TITLE],H_LV6:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC]},W_LV3:{H_LV1:[DQ.TALL],H_LV2:[DQ.TALL],H_LV3:[DQ.TALL],H_LV4:[DQ.TALL,DQ.HIDE_TITLE],H_LV5:[DQ.SHORT,DQ.HIDE_TITLE],H_LV6:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC]},W_LV4:{H_LV1:[DQ.SHORT],H_LV2:[DQ.SHORT],H_LV3:[DQ.SHORT],H_LV4:[DQ.SHORT,DQ.HIDE_TITLE],H_LV5:[DQ.SHORT,DQ.HIDE_TITLE],H_LV6:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC]},W_LV5:{H_LV1:[DQ.SHORT],H_LV2:[DQ.SHORT],H_LV3:[DQ.SHORT],H_LV4:[DQ.SHORT,DQ.HIDE_TITLE],H_LV5:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC],H_LV6:[DQ.SHORT,DQ.HIDE_TITLE,DQ.HIDE_DESC]}};var DC=200;var A4={txn:"txnButtonNode","export":"exportButtonNode",maximize:"maximizeButtonNode",contextMenu:"contextMenuButtonNode",};function u(D1){var D4=D1?D1.c1||D1:"",D3=AT.getLuminance(D4),D0=255,D5=68.7914,D2=Math.max(D0/D3,D3/D0),D6=Math.max(D5/D3,D3/D5);if(D2>=D6){return BC.WHITE;}if(D3<190){return BC.BLACK;}return BC.GREY;}function Bh(){if(!this){return ;}if(typeof this.getFormats!=="function"){return ;}var D0=this.getFormats();return D0&&D0["background-color"];}function AF(D3,D0){var D5,D4,D2;if(D3>=1024){D5="W_LV1";}else{if(D3>=640){D5="W_LV2";}else{if(D3>=320){D5="W_LV3";}else{if(D3>=100){D5="W_LV4";}else{D5="W_LV5";}}}}if(D0>=1024){D4="H_LV1";}else{if(D0>=640){D4="H_LV2";}else{if(D0>=320){D4="H_LV3";}else{if(D0>=200){D4="H_LV4";}else{if(D0>=100){D4="H_LV5";}else{D4="H_LV6";}}}}}D2=DY[D5][D4];if(this.getFormats){var D1=Bh.call(this);if(!D1){D1=Bh.call(this.parent);}D2=D2.concat(u(D1));}return D2;}function AR(D0){D0=document.createElement("div");D0.className="hover-drag-icon-btn";D0.setAttribute("tabindex","0");D0.setAttribute("role","button");D0.setAttribute("data-icon-type","drag");var D1="Drag Icon for "+this.title;D0.setAttribute("aria-label",D1);if(this.menuBtnInfo.btn){this.domNode.insertBefore(D0,this.menuBtnInfo.btn);}else{this.domNode.appendChild(D0);}return D0;}function Da(D0){return D0===DB.SHAPE||D0===DB.IMAGE||D0===DB.LINE||D0===DB.TEXTFIELD||D0===DB.HTMLCONTAINER||D0===DB.SURVEYCONTAINER||D0===DB.BUTTONFIELD||D0===DB.ROUNDEDRECTANGLE;}function E(D0){return D0===DB.SELECTOR;}mstrmojo.vi.ui.rw.UnitContainerTitleBar=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.vi.ui.TitleBar,[mstrmojo.vi.ui._IsUnitContainerTitleBar],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar"});var Aq={n:mstrmojo.desc(11477,"Hide Titlebar"),cls:"htb",fn:function(){this.toggleTitleBar(false);},dsbld:false};var Dc={n:mstrmojo.desc(11478,"Show Titlebar"),cls:"stb",fn:function(){this.toggleTitleBar(true);},dsbld:false};var Cq={n:mstrmojo.desc(28913,'Hide "Maximize"'),cls:"hmm",fn:function(){this.formatButtonProps("maximizeVisible",false);},dsbld:false};var BI={n:mstrmojo.desc(28914,'Show "Maximize"'),cls:"smm",fn:function(){this.formatButtonProps("maximizeVisible",true);},dsbld:false};var Ai={n:mstrmojo.desc(28915,"Hide Context Menu"),cls:"hcm",fn:function(){this.formatButtonProps("contextMenuVisible",false);},dsbld:false};var AY={n:mstrmojo.desc(28916,"Show Context Menu"),cls:"scm",fn:function(){this.formatButtonProps("contextMenuVisible",true);},dsbld:false};function F(D1,D0,D2){var D3=mstrApp.isAppStatePresentation(),D4=this.domNode;Ct.toggleClass(this.domNode,"pulse",D1&&!D3&&!D2);if(D0){setTimeout(function(){Ct.toggleClass(D4,"pulse",false);},500);}}function CS(D3,D0){var D1=mstrmojo.all[D3],D2=D1.getNodeDataByKey(D0).id;return mstrmojo.all[D2].parent;}function AZ(D0,D1){Ct.toggleClass(D0,CSS_BTN_VISIBLE,D1);Ct.toggleClass(D0,CSS_MOUSE_LEFT,!D1);}function Db(D0,D2){var D1=this.getContextDragData(D0);return !!(D1&&(D1.src===D2));}function Ay(D0){return Db.call(this,D0,CH.FILTERS);}function Di(D0){return Db.call(this,D0,CH.DATASETS);}function Bw(D0){return Db.call(this,D0,CH.ALL_OBJECT_LIST);}function CC(D0){return Db.call(this,D0,CH.VIZ_GALLERY);}function CN(D0){return Bf.walk("src.data.item.isParameter",D0);}function DR(){return function(D0){return{act:"addTitleButton",nodeKey:D0,};};}function Ab(D0){var D1=D0.children;if(D1&&D1.length){D1=D1.slice();D0.removeChildren();D1.forEach(function(D2){Aa.safeCall("destroy",D2)();});}}function l(){var D0=this.boxContent;if(D0&&D0.getFormats){return D0.getFormats();}return null;}function C5(D0){if(D0.visible){if(D0.controls){this.showControlOverlay(D0.controls);}else{throw new Error('mstrmojo.vi.ui.rw.UnitContainer: "controls" should be provided when showing the control overlay');}}else{this.hideControlOverlay();}}function CK(D4,D1){var D2=this.model.controller,D3="propertiesPanel",D0=function(){var D6=this.getFormatMenuItemTarget(D4);var D8=this.getEditorModel();if(D8.selectTargetByValue){D8.selectTargetByValue(D6,D4&&D4.data);}if(D1){D1(D6);}var D5=D2.getViPanel(D3),D7=D5&&D5.parent;if(D7&&D7.highlightSelected){D7.highlightSelected();}}.bind(this);if(D2.getViPanel(D3)){D2.selectViPanel(D3);D0();}else{D2.openViPanel(D3,{success:D0});}}function Ck(D4,D0,D3){var D1=D3||(D4?["titleBarContainerExtendedBackgroundNode","titlebarNode","subtitlebarNode"]:["domNode","customShadowNode","customShadowHoverNode"]);this.clearCache();for(var D2=0;D2<D1.length;D2++){this.clearSlotBackgroundCSS(D1[D2]);this.applyCSSFormatToNode(D1[D2],D0);}}function Ce(D1){var D0=D1.n||"",D2=A4[D0];if(!D2){return null;}return[D2];}function A9(D0){if(this.scriptClass==="mstrmojo.vi.ui.rw.DocQuillTextField"){Ct.toggleClass(Bf.walk("parent.domNode",this),"hasLink",D0||this.hasActiveLink());return ;}Ct.toggleClass(this.domNode,"hasLink",D0||this.hasActiveLink());}function Cy(D0){if(!D0){return false;}return this.domNode===CB.findAncestorByClassName(D0,UNIT_CONTAINER_ROOT_CLASS_NAME,true,this.parent.domNode);}function c(D1,D0){var D2=mstrmojo.insert({scriptClass:"mstrmojo.Editor",showTitle:false,cssClass:"mstr-auto-narrative-delete-confirmation",buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(13039,"Delete"),function(){D2.close();D2.destroy();D0();},true,{alias:"deleteBtn",cssClass:"deleteBtn"}),mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){D2.close();D2.destroy();},false,{cssClass:"cancelBtn"})],children:[{scriptClass:"mstrmojo.VBox",alias:"warningBox",children:[{scriptClass:"mstrmojo.Box",alias:"iconBox",cssClass:"iconContainer",cssDisplay:"flex",children:[{scriptClass:"mstrmojo.Box",alias:"iconBox",cssClass:"icon"}]},{scriptClass:"mstrmojo.Label",alias:"title",text:D1.title,cssClass:"title"},{scriptClass:"mstrmojo.Label",alias:"details",text:D1.details,cssClass:"details"}]}]});D2.open();}function Cw(D3){if(!this.model._multiSelectUnits){return false;}var D2=this.model._multiSelectUnits.map(function(D4){return mstrmojo.all[D4];});var D1=D2.some(function(D4){return D4.defn.t===DB.SELECTOR||(D4.defn.t===DB.PANELSTACK&&D4.isIfw);});var D0=D2.some(function(D4){return !(D4.canDuplicate&&D4.canDuplicate());});return D1||D0;}function BQ(){return Bf.walk("boxContent.isImageEnhancedKPI",this);}function Bc(){return Bf.walk("boxContent.isGlobalLegend",this);}mstrmojo.vi.ui.rw.UnitContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._HasPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsBoxLayoutChild,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode,mstrmojo.vi.ui._HasTargets,mstrmojo.vi.ui.rw._HasVisFilterIndicator,mstrmojo.vi.ui._CanGroup,mstrmojo.util.ui._HostsSplitter,mstrmojo.vi.ui.rw._boxCornerResizer,mstrmojo.vi.ui._CanFreeformGroup,mstrmojo.vi.ui._SupportLayerNode,mstrmojo.vi.ui.rw._SupportTabNav,mstrmojo.vi.ui._HasSkeleton,mstrmojo.vi.ui._SupportCopyPasteFormat,mstrmojo.vi.ui.rw._SupportConditionalFormat,mstrmojo.vi.ui.rw._HasDupCopyMoveMenuItems],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainer",markupString:'<div id="{@id}" tabindex = "-1" role="group" aria-label="{@en@ariaLabel}" aria-roledescription="{@roleDesc}" class="mstrmojo-UnitContainer mstrmojo-UnitContainer-root {@cssClass}" style="{@cssText} {@domNodeCssText}" mstrAttach:'+C0.join(",")+'><div class="mstrmojo-UnitContainer-titleBarContainer-extendedBackgroundWrapper"><div class="mstrmojo-UnitContainer-titleBarContainer-extendedBackground" style="{@titleBarContainerExtendedBackgroundNodeCssText}"></div></div><div class="mstrmojo-UnitContainer-SplitterHost"><div class="mstrmojo-UnitContainer-ContentBox"><div class="mstrmojo-UnitContainer-titleBarContainer"><div class="mstrmojo-UnitContainer-titlesContainer"><div class="mstrmojo-UnitContainer-titlebar" role="heading" aria-level="2" style="{@titlebarNodeCssText}"></div><div class="mstrmojo-UnitContainer-subtitlebar" role="heading" aria-level="2" style="{@subtitlebarNodeCssText}"></div></div><div class="mstrmojo-UnitContainer-titleButtonsContainer"><div class="mstrmojo-UnitContainer-titleButton mstrmojo-UnitContainer-textButton txn" role="button" style="{@txnButtonNodeCssText}"></div><div class="mstrmojo-UnitContainer-titleButton mstrmojo-UnitContainer-textButton export" role="button" style="{@exportButtonNodeCssText}"></div><div class="mstrmojo-UnitContainer-titleButton mstrmojo-UnitContainer-iconButton maximize" role="button" style="{@maximizeButtonNodeCssText}"></div><div class="mstrmojo-UnitContainer-titleButton mstrmojo-UnitContainer-iconButton contextMenu" role="button" style="{@contextMenuButtonNodeCssText}"></div></div></div><div class="mstrmojo-TransactionsInlineDialog"></div><div class="mstrmojo-UnitContainer-content"></div><div class="mstrmojo-VIDND-mask"></div></div></div><div class="mstrmojo-UnitContainer-WarningMessage"></div><div class="mstrmojo-UnitContainer-HighlightBorder"></div><div class="mstrmojo-UnitContainer-CustomShadow" style="{@customShadowNodeCssText}"></div><div class="mstrmojo-UnitContainer-CustomShadow-Hover" style="{@customShadowHoverNodeCssText}"></div><div class="mstrmojo-UnitContainer-skeleton"><div class="skeleton-mask"><div class="skeleton-content"></div></div><div class="skeleton-animation"></div></div></div>',markupSlots:{titleBarContainerExtendedBackgroundWrapperNode:function(){return this.domNode.firstChild;},titleBarContainerExtendedBackgroundNode:function(){return this.domNode.firstChild.firstChild;},titleBarContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},titlesContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild;},titlebarNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild.firstChild;},subtitlebarNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild.lastChild;},titleButtonsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.lastChild;},txnButtonNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.lastChild.firstChild;},exportButtonNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.lastChild.childNodes[1];},maximizeButtonNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.lastChild.childNodes[2];},contextMenuButtonNode:function(){return this.domNode.childNodes[1].firstChild.firstChild.lastChild.childNodes[3];},inlineDialogNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[2];},splitterHostNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},skeletonNode:function(){return this.domNode.childNodes[6];},skeletonMaskNode:function(){return this.domNode.childNodes[6].firstChild;},skeletonAnimateNode:function(){return this.domNode.childNodes[6].lastChild;},warningMessageNode:function(){return this.domNode.childNodes[2];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},highlightBorderNode:function(){return this.domNode.childNodes[3];},customShadowNode:function(){return this.domNode.childNodes[4];},customShadowHoverNode:function(){return this.domNode.childNodes[5];},},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||DEFAULT_Z_INDEX;},ondraggableChange:function(){if(this.titleBar.lblTitle.domNode){this.titleBar.lblTitle.domNode.style.cursor=this.draggable?"move":"auto";}if(this.subtitleBar&&this.subtitleBar.lblTitle&&this.subtitleBar.lblTitle.domNode){this.subtitleBar.lblTitle.domNode.style.cursor=this.draggable?"move":"auto";}if(!this.draggable){AZ(this.dragIcon,this.draggable&&!this.getTitleBarVisibility());}},onresizableChange:function(){if(this.resizerCache){var D0=this;this.resizerCache.forEach(function(D2,D1){D2.style.cursor=D0.resizable?(D1&2?"s":"n")+(D1===0||D1===3?"w":"e")+"-resize":"auto";});this.splitterCache.forEach(function(D2,D1){D2.style.cursor=D0.resizable?(D1%2?"ns":"ew")+"-resize":"auto";});}},onmaxRestoreActiveChange:function(){if(this.maxRestoreBtnNode){this.maxRestoreBtnNode.style.display=this.maxRestoreActive&&this.toolbarActive?"":"none";}},ontoolbarActiveChange:function(){if(this.menuBtnInfo&&this.menuBtnInfo.btn){this.menuBtnInfo.btn.style.display=this.toolbarActive?"":"none";}},oneditableChange:function(){this.editable=this.editable&&mstrApp.allowWebDashboardDesign();var D0=this.editable;if(this.titleBar.lblTitle){this.titleBar.lblTitle.set("editOnDoubleClick",D0);}this.set("draggable",D0);this.set("resizable",D0);},onenabledChange:function(){Ct.toggleClass(this.domNode,"inactive",!this.enabled);},onorientationChange:function(){var D1=this.ctrlOverlay.domNode,D0=this.orientation;Ct.toggleClass(D1,CSS_OR_VERTICAL,D0==="v");Ct.toggleClass(D1,CSS_OR_HORIZONTAL,D0==="h");this.orientationHasChanged();},onghostImgCssChange:function(){var D1=this.ctrlOverlay.domNode,D0=this.ghostImgCss;Ct.removeClass(D1,D);Ct.addClass(D1,D0);},onariaLabelChange:function(){var D0=Bx.encodeHtmlString(this.ariaLabel,true).replace(/<br\s*\/?>/gi," ");this.domNode.setAttribute("aria-label",D0);},onroleDescChange:function(){this.domNode.setAttribute("aria-roledescription",Bx.encodeHtmlString(this.roleDesc,true));},oncontentAriaHiddenChange:function(){if(this.splitterHostNode){if(this.contentAriaHidden){this.splitterHostNode.setAttribute("aria-hidden","true");this.splitterHostNode.setAttribute("role","presentation");}else{this.splitterHostNode.removeAttribute("aria-hidden");this.splitterHostNode.removeAttribute("role");}}},ontitleChange:function(){this.updateAriaLabel();}},layoutConfig:{h:{titleBarContainerNode:"auto",titlebarNode:"auto",subtitlebarNode:"auto",titleButtonsContainerNode:"auto",containerNode:"100%"},w:{titleBarContainerNode:"100%",titlebarNode:"100%",subtitlebarNode:"100%",titleButtonsContainerNode:"100%",containerNode:"100%"},xt:true},formatHandlers:{domNode:["B","BG"],customShadowNode:["S"],customShadowHoverNode:["S"],titleBarContainerExtendedBackgroundNode:{src:"ttl",props:["BG"]},titlebarNode:{src:"ttl",props:["F","BG","text-align"]},subtitlebarNode:{src:"sttl",props:["F","BG","text-align"]},txnButtonNode:{isTitleButton:true,src:"txn",props:["B","F","BG"]},exportButtonNode:{isTitleButton:true,src:"export",props:["B","F","BG"]},maximizeButtonNode:{isTitleButton:true,src:"maximize",props:["B","F","BG"]},contextMenuButtonNode:{isTitleButton:true,src:"contextMenu",props:["B","F","BG"]},},ariaLabel:"",roleDesc:"Unit Container",contentAriaHidden:false,onlyRedraw:false,allowConditionalFormat:false,canTargetSelectorWindow:false,updateOverlay:mstrmojo.emptyFn,isHighlightInTargetSelectionMode:undefined,contextMenuLabel:null,setHighlightInTargetSelectionMode:function Dp(D0){this.isHighlightInTargetSelectionMode=D0;},isCanvasChild:function A3(){return true;},getCacheKey:function w(){return this._super()+"-vi-uc";},getPanelForAddAction:function AA(){return"propertiesPanel";},getExcludedPanels:function B(){return["editPanel"];},getEditorPanelContents:function BN(D1,D2,D0){return undefined;},getEditorPanelContentsBase:function p(EF,D6,EM){var EL=this,EG=[],D7=EL.openMoreOptions;var EB=(mstrApp.isWSStyling)?"mstrmojo.vi.ui.VisualizationEditorPanelPortlet":"mstrmojo.vi.ui.PanelPortlet",EA=function(EN){return{scriptClass:EN.scriptClass==="mstrmojo.gmaps.MapLayerZone"?"mstrmojo.vi.ui.PanelPortlet":EB,title:EN.n,panelId:EM,canCollapse:false,enabled:EN.enabled,portletSrc:EN,children:[EN]};},EK=function(EP){var EO=EF.getEditorListCls?EF.getEditorListCls(EP):"mstrmojo.vi.ui.VisualizationEditorUnitList";var EN={scriptClass:EB,title:EP.n,getTitleBarCfg:function(){return Bf.copy({useRichTooltip:true,shouldShowTooltip:function(){return true;},getTooltipContent:function(){return EP.title;}},this.constructor.prototype.getTitleBarCfg.call(this));},panelId:EM,canCollapse:false,enabled:EP.enabled,portletSrc:EP,children:[{scriptClass:EO,items:EP.items,alias:"unitList",cssClass:EP.cssClass,panelId:EM,zonesModel:EF,zonesSource:EP}]};if(EP.siblings){EN.children=EN.children.concat(EP.siblings);}return EN;},ED=[],D8=EF.docModel.datasets,EJ=function(EN){(EN||[]).forEach(function(EO){if(EO.usedInDropZones){EO.usedInDropZones=false;}});},D2=function(EN,EP){var EO=DP.find(EN,"did",EP.did);if(EO>-1){EN[EO].usedInDropZones=true;return true;}return false;},D5=new mstrmojo.ui.menus.ToolbarConfig({supportsScroll:true,alignWithAnchor:true,isHostedWithin:false,maxHeight:CB.getMaxScrollHeight()});D5.setWhitelist(this.getMenuWhitelist());(D6.zones||[]).forEach(function(EN){ED=ED.concat(EN.items);});var EH=this.isAMSelector();if(!EH){if(EF.canSwapAxis()){D5.addToolbarBtn(mstrmojo.desc(11658,"Swap"),"swap",function(){EF.swapAxis();});}else{D5.addDisabledToolbarBtn(mstrmojo.desc(11658,"Swap"),"swap");}if(EF.canDefineSubtotals()){D5.addToggleToolbarButton(mstrmojo.desc(6193,"Show Totals"),"totals",function(){EF.showQuickSubtotals();},function(){EF.hideDefinedSubtotals();},null,EF.hasVisibleSubtotals());}else{D5.addDisabledToolbarBtn(mstrmojo.desc(6193,"Show Totals"),"totals");}}var D0=function(ES,ER){var EQ=ES&&ES.boxContent,EO=EQ&&EQ.isVisMap,EP,EN=ER.docModel;if(!mstrApp.isInVFConfigMode&&EQ.isInFilterPanel&&EQ.isInFilterPanel()){if(EO){EP=EN.clearVisAsFilterActionForMapLayer(ES,EQ.getEditingHost(),false);}else{EP=EN.clearVisAsFilterAction(ES,false);}}ER.clearAllDropZones(EP);};var EC=mstrmojo.all[EF.hostId];if(EH){D5.addToolbarBtn(mstrmojo.desc(14389,"Remove Data"),"clearall",function(){EL.objects=[];EL.getUpdateCandAction();});}else{D5.addToolbarBtn(mstrmojo.desc(14389,"Remove Data"),"clearall",function(){D0(EL,EF);});}if(D7){D5.addToolbarDivider();D5.addToolbarBtn(mstrmojo.desc(9126,"More Options"),"moreOptions",D7.bind(EL));}EG.push({scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",alias:"toolbar",visible:true,useRichTooltip:true,cssClass:"VizEditorToolbar",getItemMarkup:function D4(EN){return this.constructor.prototype.getItemMarkup.call(this,EN).replace("{@en@n}",'<div class="icn"></div>');},getLayoutOffsets:function(){return{w:6};}});Bf.keyarray(D8).forEach(function(EN){EJ(D8[EN].att);EJ(D8[EN].mx);(ED||[]).forEach(function(EO){if(!D2(D8[EN].att,EO)){D2(D8[EN].mx,EO);}});});(D6.zones||[]).forEach(function(EN){if(EN.scriptClass){EG.push(EA(EN));}else{EG.push(EK(EN));}});if(EH){var EI=this.id,D3=this.selectorHasSource(),D1=this.hasTargets(),D9=function(EN){var EO=mstrmojo.all[EI];mstrApp.rootCtrl.view.openInlineDialog({scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",vis:EO});EN.cancel();},EE=mstrmojo.Button.newWebButton(D1?mstrmojo.desc(16874,"Edit Targets"):mstrmojo.desc(13629,"Select Targets"),D3?D9:mstrmojo.emptyFn,true,{alias:"btnSelect",enabled:D3});EE.cssClass+=" btn-select-targets";EG.push(EE);}return{contents:EG,toolbarCfg:D5};},titleBarCss:"",orientation:"h",k:"",boxContent:null,parent:null,enabled:true,isUnitContainer:true,draggable:true,editable:true,resizable:true,ctrlOverlay:null,nonExecutableOverlay:null,model:null,title:"",subtitle:"",subtitleDefined:false,titleBar:null,subtitleBar:null,showTitleBar:false,showTitles:false,showTwoLinesTitles:false,showTitleButtons:false,bubbleMouseOver:true,dimensionsSet:false,getEditOverlayControls:mstrmojo.emptyFn,isNewUnitContainer:false,ghostImgCss:[],isGhstImgVisible:false,splittersInfo:null,resizerInfo:null,splitterCache:null,resizerCache:null,timer:null,titleSelectedIndex:0,getTitleSelectedIndex:function I(){return this.titleSelectedIndex;},setTitleSelectedIndex:function n(D0){this.titleSelectedIndex=D0;},getMenuWhitelist:function B4(){},shouldShowCustomizeContextMenu:function(D0){var D1=D0.getTarget(),D2=D1&&D1.nodeName.toLowerCase();return D2&&!(D2==="textarea"||(D2==="input"&&D1.type.toLowerCase()==="text"));},switchToEditMode:function o(){this.showControlOverlay(this.getEditOverlayControls());},init:function Dl(D3){this._super(D3);var D6=this.id,D1=this.model,D5=this.boxContent,D0;D1.attachEventListener(EVENTS.SELECT_UNIT,D6,function(D7){var D9=this;var EA=D9.model.isCurPanelManual()||mstrApp.supportFeature(AQ.SUPPORT_AUTO_LAYOUT_MULTI_SELECTION);var D8=!mstrApp.isAIMode&&(D7&&(D7.ctrlKey||D7.metaKey)&&!mstrApp.isLayoutModePreview())&&D9.model._multiSelectUnits&&EA;if(!D8){this.toggleBoxSelection(D6===D7.id,D7);}if(D9.model.isCurPanelManual()){if(D6===D7.id&&this.parent.groupTreeLayoutConfig&&this.parent.groupTreeLayoutConfig.getFloatGroupTree()){this.selectGroup();}}});D1.attachEventListener("viIconTabClicked",D6,function(D8){var D7=D1.hgl;if(D1.getSelectedViUnit()&&D8.id!=="vi_flt"&&!D7){F.call(this,D6===D1.getSelectedViUnit().id,true,false);}});D1.attachEventListener("viVizEditorDrag",D6,function(D8){var D7=D1.hgl;if(D1.getSelectedViUnit()&&D8.id!=="vi_flt"&&!D7){F.call(this,D6===D1.getSelectedViUnit().id,false,!D8.isIn);}});var D2=[this.getTitleBarCfg(),this.getSubtitleBarCfg()].concat(this.getTitleButtonCfgs()).concat([{scriptClass:"mstrmojo.Box",cssClass:CSS_OVERLAY,alias:"ctrlOverlay",slot:"containerNode",visible:false}]);this.addChildren(D2,0);D0=this.titleBar;if(D0&&D0.tbToolbar){D0.tbToolbar.toolbarClicked=function(){D1.selectVIUnit(D6);};}this.menuBtnInfo={};this.showTitleBar=(BQ.call(this)||Bc.call(this))?false:!!this.defn.httl;if(mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)){this.showTitles=!!this.defn.httls||this.defn.httls===undefined;this.showTwoLinesTitles=this.defn.ttlsls===2;this.showTitleButtons=!!this.defn.htbs;if(!this.defn.btn_props){this.defn.btn_props=BG;}}else{this.showTitles=true;this.showTwoLinesTitles=false;this.showTitleButtons=false;}this.draggable=mstrApp.allowWebDashboardDesign();D5.attachEventListener("toggleCtrlOverlay",this.id,C5);var D4=D5.edtModel;if(D4){D4.attachEventListener("BEMFormatChange",this.id,"updateGhostImgCss");}this.applyNoFillClass();this.applyCustomShadowAppliedClass();if(!!(this.model.chatbotVizConfig)){mstrmojo.mixin(mstrmojo.vi.ui.rw._SupportChatPanel,this);this.initSupportChatPanel();}},getDocModel:function AM(){return this.model;},getScale:function Ag(){return Aa.safeCall("model.getPageScale",this)()||1;},getBoxBorderWidth:function Z(){var D0=l.call(this),D3=D0&&D0.border;if(D3){if(mstrApp.isExporting||!this.domNode){var D4=[2.66,5.34];return D3.indexOf("2pt")>-1?D4[1]:D4[0];}var D2=window.getComputedStyle(this.domNode),D1=2*parseFloat(D2["border-width"]||D2.borderTopWidth);return D1;}return 0;},onFormat:function Cm(){var D0=this.boxContent;if(D0.execFormatHandler){D0.execFormatHandler();return ;}CK.call(this);},showNonExecutableOverlay:function Bj(D0){this.nonExecutableOverlay=new mstrmojo.Label({scriptClass:"mstrmojo.Label",cssClass:"nonExecuteMsg",text:D0,alias:"nonExecutableOverlay"});this.showControlOverlay([this.nonExecutableOverlay]);},hideNonExecutableOverlay:function Aj(){if(this.nonExecutableOverlay){this.hideControlOverlay();Aa.safeCall("destroy",this.nonExecutableOverlay)();this.nonExecutableOverlay=null;}},showControlOverlay:function A0(D2,D1){var D3=this.ctrlOverlay,D4=D3.domNode;if(D4){var D0=[CSS_OVERLAY];D0.push((this.orientation==="v")?CSS_OR_VERTICAL:CSS_OR_HORIZONTAL);D0=D0.concat(this.ghostImgCss);if(D1){D0.push(D1);}D4.className=D0.join(" ");}D3.set("visible",true);Ab(D3);if(D2){D3.addChildren(D2);this.isGhstImgVisible=true;}},hideControlOverlay:function CI(){var D0=this.ctrlOverlay;D0.set("visible",false);Ab(D0);this.isGhstImgVisible=false;},editingTitleCallback:function C7(D0){var D1=this.menuBtnInfo;Ct.toggleClass(D1.btn,"editing-title",D0);},getTitleBarCfg:function Cu(){return{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar",slot:"titlebarNode",alias:"titleBar",title:this.title,editTitleOnDoubleClick:mstrApp.allowWebDashboardDesign(),beganEditingTitlebar:function D2(){this.parent.editingTitleCallback(true);},titleEdited:function D0(){this.parent.editingTitleCallback(false);},close:function(){this.parent.deleteSelf();},getLayoutOffsets:function D1(){return{h:mstrApp.getThemeProps(mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE.LAYOUT).ucTBLOHeight,w:1};}};},getSubtitleBarCfg:function Bt(){return undefined;},getTitleButtonCfgs:function At(){return[];},getDisplayName:function C4(){return this.title;},updateDisplayName:function Do(D3,D4,D5,D0){var D1=this.model,D2=this.k;if(D0){D1.renameRWUnitTitle(D3,D4,D2,Aa.wrapMethods({success:function(D6){this.set("title",D6);}.bind(this),failure:function(D6){mstrmojo.err(D6);this.set("title",D4);}.bind(this)},D5));}else{D1.renameRWUnit(D3,D4,D2,Aa.wrapMethods({success:function(){this.set("title",D3);this.synchronizeEditors();}.bind(this)},D5));}},ontitleChange:function AC(){this.titleBar.set("title",this.title);if(!this._skipLayerUpdate&&this.parent){this.parent.buildLayers();}},oncontextmenu:function Cr(EC){if(mstrApp.isDossier){this.toggleTitleBarButtonCSS(false);}if(mstrApp.isInVFInteractMode||(this.boxContent&&this.boxContent.isCustomSort)||mstrApp.isInAIBot){CB.preventDefault(window,EC.e);}else{if(this.shouldShowCustomizeContextMenu(EC)){const EE=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-unit-container-menu",position:CB.getMousePosition(EC.e,EC.hWin),isHostedWithin:false});EE.setWhitelist(this.getMenuWhitelist());const EL=this.addContextMenuItems(EE,EC);CB.preventDefault(window,EC.e);var EF=this.model&&this.model._multiSelectUnits,D9=this.parent.boxLayoutConfig,EI=function EB(){var ES=D9.box.floatChildren.children,ER=D4.getMultiSelectUnits(),EQ=ER.map(function(ET){return mstrmojo.all[ET];}),EP={},EO;ES.forEach(function(EV){if(EV.t==="g"){var ET=EV.children;for(var EU=0;EU<ET.length;EU++){EO=EA.parent.getUnitByKey(ET[EU].k);if(!EP[EV.k]&&ER.indexOf(EO.id)!==-1){EP[EV.k]=EV;}}}else{EO=EA.parent.getUnitByKey(EV.k);if(ER.indexOf(EO.id)!==-1){EP[EV.k]=EV;}}});return EP;},EM=EF&&EF.length>1&&!mstrApp.isLayoutModePreview();if(EM&&D9&&this.model.isCurPanelManual()){var EA=this,D4=this.model,D7=function D7(EO){EA.parent.saveBoxLayout(EO);},D5=function D5(EP,EO){return{execute:function(){D7(this);},urInfo:{callback:mstrmojo.DocDataService.EMPTY_CALLBACK,extras:mstrmojo.DocDataService.SUPPRESS_DATA},undoUIState:EP,redoUISTate:EO};},EJ=EI(),D3=function D3(EQ,EW,EU,ES,EO,ER){EQ.preBoxOp();if(!ER){EU(EQ,EO);}D9.updateFloatLayout(null,EQ);EQ.updateSelfSplitter();EQ.parent.snapGuide.boxIntervalOperations(EQ,"insert");var EP=EQ.parent.model.getUIState(),ET=ES.length,EV=ES.indexOf(EQ);if((!ER&&EV===ET-1)||(!!ER&&EV===ET-2)){D4.execute(D5(EW,EP));}},D8=function D8(ES){var EU=Number.MAX_VALUE,ER=Number.MAX_VALUE,EQ=0,EW=0,ET;if(DP.isArray(ES)){ET=ES.map(function(Ec){var Eb=mstrmojo.all[Ec],Ea=Eb.domNode.style,EZ=Eb.getBoxBorderWidth?parseInt(Eb.getBoxBorderWidth(),10):0;EU=Math.min(parseInt(Ea.top,10),EU);ER=Math.min(parseInt(Ea.left,10),ER);EQ=Math.max(parseInt(Ea.left,10)+parseInt(Ea.width,10)+EZ,EQ);EW=Math.max(parseInt(Ea.top,10)+parseInt(Ea.height,10)+EZ,EW);return Eb;});}else{for(var EY in ES){var EX=ES[EY],EP=EX.getBoxBorderWidth?parseInt(EX.getBoxBorderWidth(),10):0;EU=Math.min(parseInt(EX.top.split("|")[1],10),EU);ER=Math.min(parseInt(EX.left.split("|")[1],10),ER);EQ=Math.max(parseInt(EX.left.split("|")[1],10)+parseInt(EX.width.split("|")[1],10)+EP,EQ);EW=Math.max(parseInt(EX.top.split("|")[1],10)+parseInt(EX.height.split("|")[1],10)+EP,EW);}}var EO=Math.floor((EW+EU)/2),EV=Math.floor((ER+EQ)/2);return{vizArr:ET,lowestTop:EU,lowestLeft:ER,biggestRight:EQ,biggestBottom:EW,center:EO,mid:EV};},D1=function D1(ET,EV,EU){var EO=0,EX,EQ,EW;for(var ER=1;ER<ET.length;ER++){EX=ET[ER];EQ=ET[ER-1];EW=!EU?parseInt(EQ[EV?"top":"left"],10)+parseInt(EQ[EV?"height":"width"],10):parseInt((EQ[EV?"top":"left"]).split("|")[1],10)+parseInt((EQ[EV?"height":"width"]).split("|")[1],10);var ES=!EU?parseInt(EX[EV?"top":"left"],10):parseInt((EX[EV?"top":"left"]).split("|")[1],10),EP=ES-EW;EO+=EP;}return EO/(ET.length-1);},D2=function D2(ER){var EP=D8(D4._multiSelectUnits),EO=EP.vizArr,EQ=EA.parent.model.getUIState();DP.forEach(EO,function(ES){D3(ES,EQ,ER,EO,EP);});EA.parent.applyGroupTree();},ED=function ED(EW,ES){var EV=EW==="v",EO=D8(D4.getMultiSelectUnits()),EY=ES.parent.model.getUIState(),ET=EO.vizArr.sort(function(Ea,EZ){var Ec=parseInt(Ea[EV?"top":"left"],10)+parseInt(Ea[EV?"height":"width"],10)/2,Eb=parseInt(EZ[EV?"top":"left"],10)+parseInt(EZ[EV?"height":"width"],10)/2;return Ec-Eb;}),EP,EX,EU=D1(EO.vizArr,EV),EQ;for(EQ=1;EQ<ET.length-1;EQ++){var ER=ET[EQ];EP=ET[EQ-1];EX=parseInt(EP.domNode.style[EV?"top":"left"],10)+parseInt(EP[EV?"height":"width"],10);ER.domNode.style[EV?"top":"left"]=EX+EU+"px";D3(ER,EY,null,ET,EO,true);}},D0=function(EZ){var EY=D4.getMultiSelectUnits().map(function(Ef){return mstrmojo.all[Ef];}),EO=D8(EJ),Ee=EA.parent.model.getUIState();for(var Eb in EJ){var Ea=EJ[Eb];if(Ea.t==="g"){var ES=parseInt(Ea.left.split("|")[1]),EP=parseInt(Ea.width.split("|")[1]),EX=parseInt(Ea.top.split("|")[1]),Ed=parseInt(Ea.height.split("|")[1]);switch(EZ){case"left":Ea.delta={x:EO.lowestLeft-ES,y:0};break;case"right":Ea.delta={x:EO.biggestRight-ES-EP,y:0};break;case"top":Ea.delta={x:0,y:EO.lowestTop-EX};break;case"middle":Ea.delta={x:0,y:EO.center-(EX+Math.floor(Ed/2))};break;case"center":Ea.delta={x:EO.mid-(ES+Math.floor(EP/2)),y:0};break;default:Ea.delta={x:0,y:EO.biggestBottom-EX-Ed};}}else{Ea=EA.parent.getUnitByKey(Eb);Ea.preBoxOp();var EU=Ea.domNode.style,ES=parseInt(EU.left,10),EP=parseInt(EU.width,10),EX=parseInt(EU.top,10),Ed=parseInt(EU.height,10),EV=Ea.getBoxBorderWidth?parseInt(Ea.getBoxBorderWidth(),10):0;switch(EZ){case"left":Ea.domNode.style.left=EO.lowestLeft+"px";break;case"center":Ea.domNode.style.left=(ES+(EO.mid-(ES+Math.floor(EP/2)+Math.floor(EV/2))))+"px";break;case"right":Ea.domNode.style.left=(ES+(EO.biggestRight-ES-EP-EV))+"px";break;case"top":Ea.domNode.style.top=EO.lowestTop+"px";break;case"middle":Ea.domNode.style.top=(EX+(EO.center-(EX+Math.floor(Ed/2)+Math.floor(EV/2))))+"px";break;case"bottom":Ea.domNode.style.top=(EX+(EO.biggestBottom-EX-Ed-EV))+"px";break;}D9.updateFloatLayout(null,Ea);Ea.updateSelfSplitter();Ea.parent.snapGuide.boxIntervalOperations(Ea,"insert");}}for(var Eb in EJ){var Ea=EJ[Eb];if(Ea.t==="g"){var ER=Ea.children;for(var ET=0;ET<ER.length;ET++){var EQ=EA.parent.getUnitByKey(ER[ET].k),EW=parseInt(EQ.domNode.style.left,10),Ec=parseInt(EQ.domNode.style.top,10);EQ.preBoxOp();if(EZ==="left"||EZ==="center"||EZ==="right"){EQ.domNode.style.left=EW+Ea.delta.x+"px";}else{EQ.domNode.style.top=Ec+Ea.delta.y+"px";}D9.updateFloatLayout(null,EQ);EQ.updateSelfSplitter();EQ.parent.snapGuide.boxIntervalOperations(EQ,"insert");}}}D4.execute(D5(Ee,EA.parent.model.getUIState()));EA.parent.applyGroupTree();},EH=function EH(Eb){var EY=D4.getMultiSelectUnits().map(function(Ef){return mstrmojo.all[Ef];}),Ea=Eb==="v",EO=D8(EJ),ES=EK.sort(function(Eg,Ef){var Ei=parseInt(Eg[Ea?"top":"left"],10)+parseInt(Eg[Ea?"height":"width"],10)/2,Eh=parseInt(Ef[Ea?"top":"left"],10)+parseInt(Ef[Ea?"height":"width"],10)/2;return Ei-Eh;}),EV=Bf.clone(ES),Ee=EA.parent.model.getUIState(),Ec,ER,EZ=D1(EV,Ea,true);for(var EU=1;EU<EV.length;EU++){Ec=EV[EU];var EX=EV[EU-1],Ed=parseInt(EX[Ea?"top":"left"].split("|")[1],10)+parseInt(EX[Ea?"height":"width"].split("|")[1],10);if(Ec.t==="g"){var EW=parseInt(Ec[Ea?"top":"left"].split("|")[1],10);EV[EU][Ea?"top":"left"]="|"+(Ed+EZ)+"px";if(Ea){Ec.delta={x:0,y:Ed+EZ-EW};}else{Ec.delta={x:Ed+EZ-EW,y:0};}}else{ER=EA.parent.getUnitByKey(Ec.k);EV[EU][Ea?"top":"left"]="|"+(Ed+EZ)+"px";}}for(EU=1;EU<EV.length;EU++){Ec=EV[EU];if(Ec.t==="g"){var EQ=Ec.children;for(var ET=0;ET<EQ.length;ET++){var EP=EA.parent.getUnitByKey(EQ[ET].k);EP.preBoxOp();if(Ea){EP.domNode.style.top=parseInt(EP.domNode.style.top,10)+Ec.delta.y+"px";}else{EP.domNode.style.left=parseInt(EP.domNode.style.left,10)+Ec.delta.x+"px";}D9.updateFloatLayout(null,EP);EP.updateSelfSplitter();EP.parent.snapGuide.boxIntervalOperations(EP,"insert");}}else{ER=EA.parent.getUnitByKey(Ec.k);ER.domNode.style[Ea?"top":"left"]=Ec[Ea?"top":"left"].split("|")[1];D9.updateFloatLayout(null,ER);ER.updateSelfSplitter();ER.parent.snapGuide.boxIntervalOperations(ER,"insert");}}D4.execute(D5(Ee,EA.parent.model.getUIState()));};EL.menus.length=0;var D6=false,EK=[];for(var EN in EJ){EK.push(EJ[EN]);}if(EK.length>1&&EK.some(function(EO){return EO.children;})){D6=true;}EL.addMenuItem(mstrmojo.desc(3499,"Align Left"),"align align-left",function(){if(!D6){D2(function(EP,EO){EP.domNode.style.left=EO.lowestLeft+"px";});}else{D0("left");}});EL.addMenuItem(mstrmojo.desc(3500,"Align Center"),"align align-center",function(){if(!D6){D2(function(ER,EO){var EQ=ER.domNode.style,EP=ER.getBoxBorderWidth?parseInt(ER.getBoxBorderWidth(),10):0;ER.domNode.style.left=(parseInt(EQ.left,10)+(EO.mid-(parseInt(EQ.left)+Math.floor(parseInt(EQ.width)/2)+Math.floor(EP/2))))+"px";});}else{D0("center");}});EL.addMenuItem(mstrmojo.desc(3501,"Align Right"),"align align-right",function(){if(!D6){D2(function(ER,EO){var EQ=ER.domNode.style,EP=ER.getBoxBorderWidth?parseInt(ER.getBoxBorderWidth(),10):0;ER.domNode.style.left=(parseInt(EQ.left,10)+(EO.biggestRight-parseInt(EQ.left,10)-parseInt(EQ.width,10)-EP))+"px";});}else{D0("right");}});EL.addSeparator();EL.addMenuItem(mstrmojo.desc(3502,"Align Top"),"align align-top",function(){if(!D6){D2(function(EP,EO){EP.domNode.style.top=EO.lowestTop+"px";});}else{D0("top");}});EL.addMenuItem(mstrmojo.desc(3503,"Align Middle"),"align align-middle",function(){if(!D6){D2(function(ER,EO){var EQ=ER.domNode.style,EP=ER.getBoxBorderWidth?parseInt(ER.getBoxBorderWidth(),10):0;ER.domNode.style.top=(parseInt(EQ.top,10)+(EO.center-(parseInt(EQ.top)+Math.floor(parseInt(EQ.height)/2)+Math.floor(EP/2))))+"px";});}else{D0("middle");}});EL.addMenuItem(mstrmojo.desc(3504,"Align Bottom"),"align align-bottom",function(){if(!D6){D2(function(ER,EO){var EQ=ER.domNode.style,EP=ER.getBoxBorderWidth?parseInt(ER.getBoxBorderWidth(),10):0;ER.domNode.style.top=(parseInt(EQ.top,10)+(EO.biggestBottom-parseInt(EQ.top,10)-parseInt(EQ.height,10)-EP))+"px";});}else{D0("bottom");}});EL.addSeparator();EL.addMenuItem(mstrmojo.desc(3506,"Distribute Horizontally"),"align dist-h",function(){if(D6){EH("h");}else{ED("h",EA);}EA.parent.applyGroupTree();});EL.addMenuItem(mstrmojo.desc(3507,"Distribute Vertically"),"align dist-v",function(){if(D6){EH("v");}else{ED("v",EA);}EA.parent.applyGroupTree();});this.addContextMenuGroupingMenuItem(EL,EF);EL.addSeparator();this.addPasteFormatMenuItem(EL,EF);EL.addSeparator();var EG={hideCopy:Cw.call(this,true),hideDuplicate:true,hideMove:true};this.addDupCopyMoveMenuItems(EL,false,$ENUM_COPY_MOVE_TYPES.MIXED,EG);this.openPopup(EL.newInstance());}else{if(EM&&!this.model.isCurPanelManual()){EL.menus.length=0;this.addPasteFormatMenuItem(EL,EF);EL.addSeparator();var EG={hideCopy:Cw.call(this,false),hideDuplicate:true,hideMove:true};this.addDupCopyMoveMenuItems(EL,false,$ENUM_COPY_MOVE_TYPES.MIXED,EG);if(EL.hasMenuItems()){this.openPopup(EL.newInstance());}}else{if(EL.hasMenuItems()){this.addContextMenuGroupingMenuItem(EL);this.openPopup(EL.newInstance());}}}}}EC.cancel();},addContextMenuItems:function s(D5,D0){var D3=this.getEditorModel(),D1;if(D3.getFormattingToolbar){D1=function(D6){if(this.scriptClass==="mstrmojo.vi.ui.rw.ButtonBox"){return ;}var D7=D3.getFormattingToolbar(D6,D0.getTarget());if(D7){this.openPopup(D7);}}.bind(this);}var D2=this.boxContent;if(D2&&(D2 instanceof mstrmojo.SharedXtabBase||D2 instanceof mstrmojo.VisBase)){Dd.addChangeVizContextMenu(D5,D2);}this.addConditionalFormatMenuItem(D5);if(!mstrApp.isInVFConfigMode){this.addFormatMenuItem(D5,D0,D1);}const D4=D2&&D2.isBinaryData;if(!D4){this.addCopyPasteSelfFormatMenuItems(D5);}return D5;},addFormatMenuItem:function Av(D2,D1,D0){if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){D2.addMenuItem(mstrmojo.desc(1918,"Format"),"mnu--xtab-format",function(){this.launchFormatEditor(D1,D0);}.bind(this));}return D2;},launchFormatEditor:function BF(D2,D0){this.selectVIUnit();CK.call(this,D2,D0);if(!!D2&&mstrApp.supportFeature(AQ.DOSSIER_REACT_FORMAT_PANEL)){var D1=this.getFormatMenuItemTarget(D2)===mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE?Cb.TITLE_TAB:Cb.PROPERTY_TAB;this.raiseEvent({name:"switchTab",tabId:D1});}},updateSelfSplitter:function AU(){if(this.getSplitterHost&&this.calculateContainerRect){this.calculateContainerRect();this.updateSplitters();}},preBoxOp:function C8(){if(this.timer){clearTimeout(this.timer);if(this.originBox){this.parent.snapGuide.boxIntervalOperations([],"delete",this.originBox);this.originBox=null;}this.timer=null;}else{this.parent.snapGuide.boxIntervalOperations(this,"delete");}},getContainer:function C3(){return this.parent;},shouldSaveBoxDimensionChange:function Ch(){return !(mstrApp.isWaiting()||mstrApp.hasRequests());},postBoxOp:function DT(D4,D6,D3,D1){var D5=this.id,D2=this.parent.id,D0=this.model;if(D4){D1=D1||function(D9){var D8=mstrmojo.all[D5],D7=mstrmojo.all[D2];D8.updateLayout(D3);D8.raiseEvent({name:"member_snap_guide_changed_pre"});D7.applyGroupTree(undefined,D8.getPUKeys(false));D8.updateSelfSplitter();D7.applyGroupSplitterOfBox(D8.k);D7.snapGuide.boxIntervalOperations(D8,"insert");D8.raiseEvent({name:"member_snap_guide_changed_post"});D7.saveBoxLayout(D9);},exe={execute:function(){D1(this);},urInfo:{extras:mstrmojo.DocDataService.SUPPRESS_DATA}};if(D6){exe.undoUIState=D6;}if(this.shouldSaveBoxDimensionChange()){D0.execute(exe);}else{D1();}}},createGuidesDiv:function Ak(D0){return this.parent.createGuidesDiv(D0);},updateGuidesDiv:function AL(D2,D1,D0){return this.parent.updateGuidesDiv(D2,D1,D0);},toggleGuidesDiv:function k(D1,D0){this.parent.toggleGuidesDiv(D1,D0);},resizerMouseDown:function N(D0){if(!D0.skipGuideOperation){this.preBoxOp();}D0.parentRect=this.parent.parentRect;D0.parentScrollPos=(this.parent.getScrollPosition&&this.parent.getScrollPosition())||{scrollLeft:0,scrollTop:0};this.getSplitterHost().appendChild(D0.boxOverlay);},splitterMouseDown:function AW(){if(this.parent&&this.parent.snapGuide){this.preBoxOp();}},postResizerMouseUp:function Dg(D3){var D2=this,D0=this.parent,D1=this.model,D4=D1.getUIState();D0.boxLayoutConfig.updateFloatLayout(D3,D2);this.postBoxOp(true,D4,D3);},getSplitterHost:function Bv(){return this.splitterHostNode;},getSplitterInfo:function As(D3){if(this.parent){var D0=this.parent.parentRect,D1=this.domNode.getBoundingClientRect(),D2=D3.orientation;return{splitter:D3,min:D2&2?4:D2%2?D0.top-D1.top+10:D0.left-D1.left+10,max:D2&2?D2%2?D0.bottom-D1.top-10:D0.right-D1.left-10:D2%2?D1.height:D1.width};}},getZIndex:function BB(){return this.unDocked?this.zIndex:DEFAULT_Z_INDEX;},isGroup:function Cj(){return false;},calculateContainerRect:function W(){if(!this.domNode){return ;}var D0=this,D1=this.getSplitterHost().getBoundingClientRect(),D3=this.getScale();if(Bf.walk("domNode.style.padding",this)){var D2=Bf.walk("domNode.style.padding",this)||"0";D2=parseInt(D2,10)*D3;D1.left-=D2;D1.top-=D2;D1.right+=D2;D1.bottom+=D2;D1.x-=D2;D1.y-=D2;D1.width+=D2*2;D1.height+=D2*2;}["left","top","right","bottom"].forEach(function(D4,D5){(D0.splittersInfo=D0.splittersInfo||[]).push({left:(D5%2?D1.left:D1[D4]-3.5*D3)+"px",top:(D5%2?D1[D4]-3.5*D3:D1.top)+"px",width:(D5%2?D1.width:7)+"px",height:(D5%2?7:D1.height)+"px"});(D0.resizerInfo=D0.resizerInfo||[]).push({left:((D5===0||D5===3)?D1.left:(D1.right-5*D3))+"px",top:(D5&2?D1.bottom-5*D3:D1.top-5*D3)+"px",width:"7px",height:"7px"});});},splitterMoved:function DO(EI,EH){var D8=this,D0=EH&&EH.splitter,D9=mstrmojo.all[this.model.id].getPanel(),EG=this.model.getUIState(),D6=D9.boxLayoutConfig,EB=D6.box.floatChildren,EC=D0.orientation;if(D0){if(D6&&D6.findFloatKey(this)){var D2=EC%2?"height":"width",D5=DP.find(EB,"k",this.k);if(D5!==-1){var D4=EB[D5],EF=D6.getBoxTreeRoots(D9,D4.rk),D7=EF[D2],EE=EI/D7*100,ED=D4[D2].split("|"),D3=parseFloat(ED[0]),D1=parseFloat(ED[1]);D4[D2]=EC&2?(D3+EE)+"|"+(D1+EI):(D3-EE)+"|"+(D1-EI);if(!(EC&2)){var EA=EC?"top":"left";ED=D4[EA].split("|");D3=parseFloat(ED[0]);D1=parseFloat(ED[1]);D4[EA]=(D3+EE)+"|"+(D1+EI)+"px";}this.postBoxOp(true,EG,D9.calculateFloatBoxLayout(D4,EF,D8.fixed));}}else{this.updateSplitters();}}},toggleDock:function CQ(){this.unDocked=!this.unDocked;if(!this.unDocked){this.set("zIndex",1);}},getGroupOperationCallback:function AP(D3,D2,D4){var D1,D0,D5=function(D6,D7,D8){return function(){var D9=D7.parent,EB=D9.id,EA=D9.model,ED=mstrmojo.DocDataService,EC=D9.model.getUIState();EA.execute({execute:function(){var EE=mstrmojo.all[EB];D8(D6,D7,D4);EE.applyGroupTree(undefined,D0);EE.applyGroupSplitter();EE.snapGuide.reconstructTree(EE);EE.saveBoxLayout(this);},urInfo:{extras:ED.SUPPRESS_DATA},undoUIState:EC});};};if(D3==="ungroup"){D1=D5(D2,this,function(D8,D7){var D9=D8[0].getParentGroup(),D6=D9.parent;D0=[D6.k].concat(D9.getPUKeys());D8.forEach(function(EA){EA.unGroup();});});}else{if(D3==="moveToGroup"){D1=D5(D2,this,function(D7,D6,D8){D7.forEach(function(D9){D9.moveToGroup(D8);});});}else{D1=D5(D2,this,function(D7,D6){var D8=D6.createGroup(D7);D8.editable=true;D8.displayGroupNode(true,true);D0=undefined;});}}return D1;},addGroupingMenuItem:function i(D7,D0){if(!D0||D0.length===0){D0=[this];}var D4=D0[0],D3,D6;for(var D2=0;D2<D0.length;D2++){var D5=D0[D2];if(!D5.editable){D3=true;D6=true;break;}if(D5.isGrouped()){D3=true;}else{D6=true;}if(D0.length===1){D3=true;}if(D3&&D6){break;}}var D1=[];if(DP.find(D7.getMenuItems(),"ctxt","group")<0&&!D3){D1.push({text:mstrmojo.desc(17264,"Group"),cls:"",ctxt:"group",fn:D4.getGroupOperationCallback("group",D0)});}if(DP.find(D7.getMenuItems(),"ctxt","ungroup")<0&&!D6){D1.push({text:mstrmojo.desc(17333,"Remove from group"),cls:"",ctxt:"ungroup",fn:D4.getGroupOperationCallback("ungroup",D0)});}if(D1.length>0){D7.addSeparator();}D1.forEach(function(D8){D7.addMenuItem(D8.text,D8.cls,D8.fn,D8.ctxt);});},addToolbarGroupingMenuItem:function Cs(D0){if(!this.isInfoWindowBox()&&Bf.walk("parent.groupTreeLayoutConfig.getFloatGroupTree",this)){this.addGroupingMenuItem(D0);}},addContextMenuGroupingMenuItem:function X(D2,D0){if(Bf.walk("parent.groupTreeLayoutConfig.getFloatGroupTree",this)){var D1=[this];if(D0&&D0.indexOf(this.id)>-1){D1=D0.filter(function(D4){return D4;}).map(function(D4){return mstrmojo.all[D4];});}var D3=DP.some(D1,function(D4){return !!(D4.isInfoWindowBox&&D4.isInfoWindowBox());});if(!D3){this.addGroupingMenuItem(D2,D1);}}},addUnDockMenuItem:function CF(D6){if(!this.isInfoWindowBox()&&!mstrApp.isLayoutModePreview()&&!(mstrApp.isInVFConfigMode||mstrApp.isInVFInteractMode)){var D5=this.k,D0=this.parent;if(this.unDocked){if(D0.boxOperation&&D0.groupTreeLayoutConfig.getFloatGroupTree()&&this.editable){var D4=[[true,true],[true,true]];if(D0.maximizedBox){D4[0]=D4[1]=[false,false];}else{var D1=D0.groupTreeLayoutConfig.getFloatGroupTreeNode(D5);if(D1.parent){D1.parent.children.sort(function(D9,D8){return parseFloat(D9.zIndex)-parseFloat(D8.zIndex);});if(D1.parent.children[0].k===D5){D4[1]=[false,false];}else{if(D1.parent.children[D1.parent.children.length-1].k===D5){D4[0]=[false,false];}}}}var D3=D4.reduce(function(D8,D9){return D8.concat(D9);});var D2=[{strId:3100,fn:"bringToFront"},{strId:3102,fn:"bringForward"},{strId:3099,fn:"sendToBack"},{strId:3101,fn:"sendBackward"}],D7="";DP.forEach(D2,function(D9,D8){D7=mstrmojo.desc(D9.strId,D9.fn);if(D3[D8]){D6.addMenuItem(D7,"",function(){D0.boxOperation(D9.fn,D0.getUnitByKey(D5));});}else{D6.addDisabledMenuItem(D7,"");}});}}}return D6;},unrender:function d(){this.splitterCache=null;this.resizerCache=null;return this._super();},getFormatMenuItemTarget:function C6(D0){return mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE;},applyBoxSize:function B9(D0,D2,D5,D4){this._super(D0,D2,D5,D4);this.dimensionsSet=true;var D3=parseInt(D2,10),D6=parseInt(D0,10);Aa.safeCall("adjustPaddingForBorderRadiusForPS",this)(Math.min(D3,D6));var D1=D3>D6?"h":"v";if(D1!==this.orientation&&!this.isActionSelector()){this.set("orientation",D1);}this.set("ghostImgCss",AF.call(this,D3,D6));},childRenderCheck:function Au(D1){var D0=this._super(D1);if(D1===this.boxContent){D0=D0&&this.dimensionsSet;}return D0;},hasDimensionChanged:function AI(D1,D4,D2,D0){if(D2===D0){return false;}if(CB.isChrome&&Math.abs(D2-D0)===1&&D1.getBoundingClientRect){var D3=mstrmojo.func.safeCall("getScale",this)()||1;D2=Math.round(D1.getBoundingClientRect()[D4.toLowerCase()]/D3);}return D2!==D0;},postUpdateLayout:function Cx(D4,D1){var D7=this.boxContent;var D6=true;if(!D1&&this._currentLayout&&D4&&Math.abs(parseFloat(D4.width)-parseFloat(this._currentLayout.width))<0.1&&Math.abs(parseFloat(D4.height)-parseFloat(this._currentLayout.height))<0.1){D6=false;}if(!this.domNode){return ;}if(!D7.hasRendered){D7.render();var D3=this.parent,D0=this.model,D2=D0.getLatestSelectedViObjKey(),D5=D2&&D3.getUnitByKey(D2);if(!D5){D3.selectFirstBox();}else{if(!D5.isIfw){D0.selectVIUnit(D5.id);}}this.updateA11yEffect();}else{if(D6){this.updateVisFilterIndicator();D7.refresh(null,!mstrApp.isPartialUpdate);}}this.isNewUnitContainer=false;},orientationHasChanged:mstrmojo.emptyFn,onRender:function L(){this._super();if(!(mstrApp&&mstrApp.isAIMode)){var D0=this.model.getSelectedViUnit();this.toggleBoxSelection(D0&&D0.k===this.k);}},onAppStateChange:function Bi(EA){var D4=mstrmojo.vi.VisualInsightApp.APP_STATES,D9=D4.SELECTOR_TARGETING,D6=D4.PRESENTATION,EB=D4.PAUSE,D8=mstrApp.isAppStatePresentation(),D3=mstrApp.isAppStatePause(),D2=mstrApp.isAppStateTransactionMode(),D5=this.dragIcon,D7=this.isInChatPanel;if((D8||EA.valueWas&D6)){this.draggable=!(D8||D2||mstrApp.isLayoutModePreview());this.generateToolbar();}if(EA.valueWas&D9||mstrApp.isAppStateSelection()||!D7&&(D3||EA.valueWas&EB)){this.generateToolbar();}var D0=this.model.getSelectedViUnit(),D1=D0&&D0.k===this.k;this.toggleBoxSelection(D1);if(D5){AZ(D5,this.draggable&&!D8&&D1&&!this.getTitleBarVisibility());}},onLayoutModeChange:function BO(D0){var D1=mstrApp.isLayoutPreview(D0.value);this.set("editable",!(mstrApp.isAppStatePresentation()||D1));if(D1||mstrApp.isLayoutPreview(D0.valueWas)){this.generateToolbar();}},selectVIUnit:function Bo(D0,D1){var D3=this.parent;var D5=mstrApp.isAIMode&&mstrApp.getAllowShowingActiveVizOutline&&mstrApp.getAllowShowingActiveVizOutline(),D2=this.isSelectorPanelButtonField&&this.isSelectorPanelButtonField(),D4=this.isActionSelector&&this.isActionSelector();if((this.enabled||D2||D4)&&D3&&D3.selectVIUnit&&(!(mstrApp.isAppStateSelection()&&mstrApp.isLayoutModePreview())||D5)){if(mstrApp.isAIMode&&!D5&&this.isInInfoWindowBox()){return ;}var D7=DB.SURVEYCONTAINER;if(D3.getTgtSelections()&&this.defn.t===D7){var D6=D3.getTargetKeysByType([D7]);DP.forEach(D6,function(D8){var D9=D3.getUnitByKey(D8);D9.toggleBoxSelection(D9.parent.selectVIUnit(D9,D0,D1),D1);});}else{if(this.isPredefinedNLGInfoWindow){this.toggleBoxSelection(this.parent.selectVIUnit(Bf.walk("boxContent.children.1.children.0",this),D0,D1),D1);return ;}this.toggleBoxSelection(this.parent.selectVIUnit(this,D0,D1),D1);}}},toggleTabSelectionEffect:function Cp(D0){if(this.domNode){Ct.toggleClass(this.domNode,AD.CSS_FOCUS_VISIBLE,D0);}},grabFocus:function M(D0){if(this._super){this._super();}this.selectVIUnit();this.toggleTabSelectionEffect(true);this.toggleTitleBarButtonCSS(true);if(D0){this.domNode.focus();}},loseFocus:function h(D0){if(this._super){this._super();}this.toggleTabSelectionEffect(false);this.toggleTitleBarButtonCSS(false);if(D0){this.domNode.blur();}},buildNavList:function Ds(){if(Bf.walk("menuBtnInfo.btn",this)&&Bf.walk("menuBtnInfo.menuCfg",this)){this.navList=[this.menuBtnInfo.btn];}else{this.navList=[];}},isValidTarget:function Bl(D1){if(!this._super(D1)){return false;}var D0=true;if(D1.classList&&D1.classList.contains("invalid")){D0=false;}return D0;},enterUnit:function DX(){if(this.boxContentSupportAccessibility()){return ;}if(Bf.walk("navList.length",this)>0){this.toggleTabSelectionEffect(false);this.resetTabNav();this.navigateToFirstValidTarget();}},boxContentSupportAccessibility:function DS(){return this.boxContent&&this.boxContent.canTab;},getLayerActionIconConfig:function BW(){var D0=this.parent,D3=D0.model,D6=D0.getTgtSelections(),D5=D6&&mstrmojo.all[D6.id],D4=D6?D6.getSelections():D3.getMultiSelectUnitKeys(),D7=!!Bf.walk("targetMask.candidatePicker.rplObj",this),D2,D1=function(D8,EA,D9){D2={};D2.cssClassName=D8;D2.role=EA;D2.ariaLabel=D9;};if(!D5){return undefined;}if(D5.k===this.k){D1("source","img",mstrmojo.desc(4283,"Source"));}else{if(D4.indexOf(this.k)!==-1){D1(!D5.isAMSelector()?"target":D7?"target with-default":"target without-default","button",!D5.isAMSelector()?mstrmojo.desc(4787,"Target"):D7?mstrmojo.desc(17531,"Target without a default value"):mstrmojo.desc(17532,"Target with a default value"));}}return D2;},synchronizeEditors:function Dm(){if(this.model.getLatestSelectedViObjKey()===this.k){this.selectVIUnit(true);}},addToggleTitleMenuItem:function Az(D0){var D1=[Aq,Dc];if(!this.showTitleBar){D1.reverse();}D0.addDualStateItem(this.id,D1[0],D1[1]);},addToggleMaximizeMenuItem:function Cc(D0){var D1=[Cq,BI];if(!this.isMaximizeVisible()){D1.reverse();}D0.addDualStateItem(this.id,D1[0],D1[1]);},addToggleContextMenuMenuItem:function Ci(D0){var D1=[Ai,AY];if(!this.isContextMenuVisible()){D1.reverse();}D0.addDualStateItem(this.id,D1[0],D1[1]);},isMaximizeVisible:function Dx(){if(mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)&&this.defn&&this.defn.btn_props){var D1=JSON.parse(this.defn.btn_props),D0=D1.maximizeVisible;return D0;}return true;},isContextMenuVisible:function a(){if(mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)&&this.defn&&this.defn.btn_props){var D1=JSON.parse(this.defn.btn_props),D0=D1.contextMenuVisible;return D0;}return true;},canShowDesignMenuItems:function DV(){return mstrApp.allowWebDashboardDesign();},updateToolbar:function BE(D6){var D5=D6.ENUM_CORNERS,D0=this.boxContent,D3=D0&&D0.isBinaryData,D1=D0&&D0.node,D4=D1&&(!D1.defn.vis||!D1.defn.vis.ve),D8=this.isSelectorPanelButtonField&&this.isSelectorPanelButtonField(),D2=this.isActionSelector&&this.isActionSelector(),D7=D2&&Bf.walk("defn.aa",this)===mstrmojo.vi.ui.rw.ActionSelectorBox.ACTION_TYPES.RESET;D6.setAlignment(D5.BOTTOM_RIGHT,D5.TOP_RIGHT);D6.isHostedWithin=false;D6.showContextMenu=false;if(!D8){this.addConditionalFormatMenuItem(D6);}if(this.canShowDesignMenuItems()&&!mstrApp.isAppStatePresentation()){if(!D8){D6.addSeparator();}if(!(mstrApp.isInVFConfigMode&&!D4)){this.addFormatMenuItem(D6);}if(!D3){this.addCopyFormatMenuItem(D6);this.addPasteFormatMenuItem(D6);}if(this.showTitleBar){D6.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){this.draggable=false;this.titleBar.editTitle();}.bind(this));}if(!D8&&!(this.isContentDisabled&&this.isContentDisabled())&&this.editable&&undefined!==this.getEditOverlayControls()){D6.addMenuItem(mstrmojo.desc(3272,"Edit"),"cls",this.switchToEditMode.bind(this));}if(!D8&&(!D2||D7)){this.addDeleteMenuItem(D6);}this.addUnDockMenuItem(D6);this.addToolbarGroupingMenuItem(D6);}return D6;},isInSelectorPanel:function Ae(){var D0=this.parent&&this.parent.parent;return D0&&D0.isSelectorPanel;},isInFormPanel:function DI(){var D0=this.parent&&this.parent.parent;return D0&&D0.isFormPanel;},addDeleteMenuItem:function Bb(D1){if(!mstrApp.isLayoutModePreview()&&!(mstrApp.isInVFConfigMode||mstrApp.isInVFInteractMode)&&this.editable){var D0=this.k,D2=this.model.id;D1.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){var D3=CS(D2,D0),D4=D3.canDelete();if(D4.canDelete){D3.deleteSelf();}else{c(D4,function(){CS(D2,D0).deleteSelf();});}});}return D1;},canDelete:function A8(){return{canDelete:true};},deleteSectionNodeDefn:function CW(D6,D1,D2){if(D6&&D1&&D2&&D2.length){var D3=function D5(){var D8=D1.getCGBMap(),D9=D1.getCurrentLayoutDef(),D7=D9&&D9.units;if(D8&&D7){DP.forEach(D2,function(EA){delete D8[EA];delete D7[EA];});}};D6.addCallbacks({success:D3});var D4=D1.cmdMgr(),D0=Bf.walk("curCmd.urInfo",D4);if(D0){D0.callback=Aa.wrapMethods({success:D3},D0.callback||mstrmojo.emptyFn);}}},cleanSelfAndDescendants:function DU(D4){var D1=this.model,D3=D1.data,D0,D2=function(D8,D7){var D6=D1.extractChildren(D8),D5;if(D6){for(D5=0;D5<D6.length;D5++){if((D6[D5]&&D6[D5].k)===D7){DP.removeIndices(D6,D5,1);D0=D6;return ;}D2(D6[D5],D7);}}};D2(D3,this.k);D1.deleteDataCache(this.boxContent&&this.boxContent.id);Aa.safeCall("removeInsightsNodes",D1)(this,D0);},deleteLastUnitHandler:function CY(D3,D2,D4,D1){var D0=mstrApp.supportFeature(AQ.MAKE_MODERN_GRID_DEFAULT);if(!D3){D2.addVisualizationDeferred(D4,D1.k,undefined,{changeToMultiGrid:D0},undefined,undefined,undefined,D0);}},getTargetedInfoWindowKeys:function Cl(){if(this.getSelectedIFW){var D0=this.getSelectedIFW();return D0?[D0]:[];}return[];},deleteSelf:function J(D5){var EE,D1=this.k,D3=this.model,D7=D3.id,D9=D3.getDocVIVisualizationsMainPanel(),EA=CS(D7,D1).parent,EG=EA.k,ED=[EG],EH=[],D6=[],EI=[],EK,D4={success:function(){D3=mstrmojo.all[D7];if(D3){D3.syncLocalPanelNode(EG);if(EK){D3.syncPageIfwData(EI);}}}},D2=Aa.wrapMethods(D3.getRebuildCallback(),D4,{}),D0=Aa.wrapMethods({success:function(){var EL=CS(D7,D1);EL.cleanSelfAndDescendants(EI);}},D3.getRebuildCallback(),D4,{}),D8=function(EM){var EL=mstrmojo.all[D7];EL.syncSecondaryDataProviderDefn(D1,EE,EM);D3.markSrcPageUcNodeDirty(D9.k,D6);};EH=EH.concat(D3.getSourceFilterKeys(D1,true));EH=EH.concat(D3.getTargetFilterKeys(this));EH=EH.concat(D3.getPanelSelectorKeys(this.k));D6=D3.getAllPageUCChildKeysMaps(EH);if(!this.isIfw){EI=this.getTargetedInfoWindowKeys();ED=ED.concat(EI);EH=EH.concat(EI);EK=EI.length>0;}var EC=function EC(){D3.clearCGBMapForTargets(EI);};var EF=EA.parent||{};if(EF.isSelectorPanel){EF.clearSingleBuffSlice(D1);}this.model.execute({execute:function(){var EM=CS(D7,D1);if(EM){var EL=EM.parent,EN=mstrmojo.all[D7],EQ=EN.getDataService().newUpdate();var EO=EL.hasMultipleChildren();EM.createDeleteUpdate(EQ);EN.markSrcPageUcNodeDirty(D9.k,D6);EE=EN.getMapLayerKeys(EM.boxContent);EQ.addActions(EN.getDeleteMapLayersActions(EE));EQ.addCallbacks({success:function EP(ER){EN.partialUpdate(ER.data,EN.getTargetDefn(EH),ER.defn,EH,undefined,undefined,ER.txns||{});EC();EM.cleanSelfAndDescendants(EI);EN.syncSecondaryDataProviderDefn(D1,EE,true);EM.destroy();EL.generateTxnFields();EL.selectFirstBox(true);}});EN.setAutoNarrativeStalePerSource(D1);EL.deleteBoxAndSubmitDeferred(EQ,EM,null,true);EM.deleteLastUnitHandler(EO,EN,EQ,EL);if(EM.isMaxed){EL.toggleCurtain(false,EM.isInInfoWindowBox());}EL.selectFirstBox();EQ.addCallbacks(D5);EQ.addExtras({style:{params:{treesToRender:EK?mstrmojo.DocDataService.EnumTreesToRender.DATA:mstrmojo.DocDataService.EnumTreesToRender.NONE}}});this.submitUpdate(EQ);}},urInfo:{undo:function EJ(){D8(false);this.urInfo.callback=D2;},redo:function EB(){D8(true);this.urInfo.callback=Aa.wrapMethods(D0,{success:EC});},puKeys:ED,extras:mstrmojo.DocDataService.REQUEST_DEFN_DATA}});},undoInsert:function DH(){var D0=this.parent,D1=mstrmojo.all[this.model.id];D0.deleteBoxAndSubmitDeferred(D1.getDataService().newUpdate(),this,null,true);D0.selectFirstBox();D0.buildLayers();this.destroy();},createDeleteUpdate:function AX(D1){var D0=this.getTargetedInfoWindowKeys();if(D0&&D0.length){DP.forEach(D1.actions,function(D2){if(D2.act==="removeUnit"||D2.act==="removeField"){if(Bf.walk("partialRetrieval.nodes",D2)){D2.partialRetrieval.nodes=D2.partialRetrieval.nodes.concat(D0);}else{D2.partialRetrieval={nodes:D0};}return false;}},this);}},getKeyDownHandler:function(D1){var D0=this;return function(D2){var D4=D0.boxContent,D3=D0.boxContentSupportAccessibility(),D5=D3?D4:D0;if(D5.handleTab(D2,this)){return ;}switch(D2.keyCode){case mstrmojo.Enum_Keys.ESCAPE:D2.stopPropagation();if(this.loseFocus){this.loseFocus(true);}D5.navigateToParent(!!D3);if(!D3){D5.grabFocus(true);}break;case mstrmojo.Enum_Keys.ENTER:case mstrmojo.Enum_Keys.SPACE:D2.stopPropagation();D1(D2);break;}};},getTitleBarVisibility:function Be(){return this.getTitleVisibility()||this.getSubtitleVisibility()||this.getTitleButtonsVisibility();},getTitleVisibility:function Cg(){return this.titleBar&&this.showTitleBar&&this.showTitles;},getSubtitleVisibility:function BK(){if(!mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)){return false;}return this.titleBar&&this.showTitleBar&&this.showTitles&&this.showTwoLinesTitles;},getTitleButtonsVisibility:function Bz(){var D0=this instanceof mstrmojo.vi.ui.rw.VizBox;if(!mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)){return false;}if(CB.isTouchOptimizationEnabled()){return false;}return this.titleBar&&this.showTitleBar&&this.showTitleButtons&&D0;},createButton:function AE(D8,D6,D1,D5){var D2=this.boxContent.canTab||this.canTab,D0,D7,D3=function(D9){if(D0&&D0.hideTooltip){D0.hideTooltip();}D1(D9);},D4={cssClass:D8,onclick:D3,label:D6||""};D0=this.addDisposable(new mstrmojo.vi.ui.VizFloatingIcon(Bf.copy(D5,D4)));D7=D0.getDomNode();CB.attachEvent(D7,"keydown",this.getKeyDownHandler(D3));if(D2){AD.enableAccessibility({domNode:D7,grabFocusCallback:function(D9){if(D9&&D9.skipTooltip){return ;}D0.showTooltip&&D0.showTooltip();},loseFocusCallback:function(){D0.hideTooltip&&D0.hideTooltip();}});}return D7;},isMenuBtnVisible:function f(){var D2=this.menuBtnInfo,D3=D2&&D2.menuCfg,D1=D3&&D3.menus,D0=(D1&&D1.length>0);return D0&&!CB.isTouchOptimizationEnabled()&&!Aa.safeCall("isSnapshotViewPushdownParameterSelector",this)();},setMenuButtonVisibility:function Ap(){var D2=this.menuBtnInfo,D0=D2&&D2.btn,D3=this.isMenuBtnVisible(),D1=this.dragIcon;if(D0){D0.style.display=D3&&!this.isPredefinedNLGInfoWindow?"block":"none";}Ct.toggleClass(this.domNode,CSS_NO_MENU,!D3);if(this.isPredefinedNLGInfoWindow){AZ(D1,false);}else{AZ(D1,this.draggable&&!D3&&!mstrApp.isAppStatePresentation());}},getDefaultTooltipConfiguration:function K(D1,D0,D3){if(D3&&mstrApp.isAppStatePresentation()){return{};}var D4=D0&&D0.useRightArrow,D2=D0&&D0.topOffset;return{useRichTooltip:true,tooltipOpenDelay:0,updateTooltipConfig:function(D9){var D6=CB.position(this.domNode),D5,EB=typeof D1==="function"?D1():D1,EA=-10,D8=12,EC=12,D7=D2||9;this.richTooltip={cssClass:"vi-regular vi-tooltip-A",content:D3&&mstrApp.isAppStatePresentation()?null:EB,refNode:this.domNode,offsetAlgo:true,autoAdjust:true,topOffset:(D6.h+D7)};this.richTooltip.absoluteTop=D6.y+D6.h+D7;this.richTooltip.absoluteLeft=D6.x+EA;this.richTooltip.left=D6.w/2-D8/2-EC;this.richTooltip.keepArrowXPos=true;if(D4){D5=CB.position(document.body);if(D6.x+35>=D5.w){this.richTooltip.cssClass+=" A-right";this.richTooltip.absoluteLeft=D6.x-70;}}}};},openUnitContainerMenu:function CJ(EB,D5,EA,D6,D1,D7){if(D5.menuCfg&&D5.menuCfg.destroy){D5.menuCfg.destroy();const D2=new mstrmojo.ui.menus.ToolbarConfig();D2.setWhitelist(this.getMenuWhitelist());EA.set("toolbarCfg",this.updateToolbar(D2));D5.menuCfg=EA.getMenuConfig();}var D0=mstrmojo.all[D1],D8=D5.menuCfg,D9=D0.boxContent.hasAccessibility||D7;D8.hostId=D1;D8.hostElement=D6;D8.supportsScroll=true;D8.isHostedWithin=false;D8.maxHeight=CB.getMaxScrollHeight();D8.hasAccessibility=D9;D8.menuCssClass="mnu--vi-container";var D4=mstrmojo.ui.menus.Menu;if(D7){D4=mstrmojo.DynamicClassFactory.newComponent(D4,[mstrmojo._IsAccessibleMenu,mstrmojo.vi.ui.rw._SupportTabNav]);D0.boxContent.isMenuClicked=true;}else{if(D9){D4=mstrmojo.DynamicClassFactory.newComponent(D4,[mstrmojo._IsAccessibleMenu]);D0.boxContent.isMenuClicked=true;}}D0.addToolbarGroupingMenuItem(D8);var D3=new D4({popupConfig:D8});if(D9){D3.onCloseMenuCallBack=D0.onMenuClose;}if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()&&CB.isMobile){D3.orientationAngle=window.orientation||Bf.walk("screen.orientation.angle",window);}D3.navMode=AD.isKeyBoardEvent(EB);if(D3.navMode){D0.attachEventListenerOnce("menuClosed",D1,function(EC){if(EC&&EC.needFocus){D6.grabFocus(true,{skipTooltip:true});}});}D0.openPopup(D3);EB.preventDefault();},setTitleBarVisibility:function AH(D4){var D7=this;var D8=this.titleBar;D8.set("visible",D4);this.titlesContainerNode.style.display=D4?"":"none";var D2=this.menuBtnInfo,D3=D2&&D2.btn;if(D2){if(!D2.menuCfg){D2.menuCfg=D8.getMenuConfig();}if(mstrApp&&mstrApp.isInVFInteractMode){D2.menuCfg=null;}if(!D3&&!Bf.walk("boxContent.isPredefinedNLG",this)){var D6=this.boxContentSupportAccessibility(),D5=D6?this.boxContent.canTab:this.canTab;var D0=this.id;var D9=this.contextMenuLabel||mstrmojo.desc(25843,"Context Menu");var EA=function(EB){D7.openUnitContainerMenu(EB,D2,D8,D3,D0,D5);};var D1=Bf.copy({ariaPopup:"menu"},this.getDefaultTooltipConfiguration(D9,{useRightArrow:true}));D3=D2.btn=this.createButton("hover-menu-btn",D9,EA,D1);if(this.menuBtnInfo&&this.menuBtnInfo.btn){CB.attachEvent(this.menuBtnInfo.btn,"mousedown",function(){this.generateToolbar();}.bind(this));}}if(!Bf.walk("boxContent.isPredefinedNLG",this)){this.domNode.appendChild(D3);}}this.setMenuButtonVisibility();this.doLayout();},setSubtitleBarVisibility:function B1(D0){var D1=this.subtitleBar;if(D1){D1.set("visible",D0);}if(D0){Ct.addClass(this.titleBarContainerExtendedBackgroundNode,CSS_HAS_SUBTITLE);Ct.addClass(this.titlebarNode,CSS_HAS_SUBTITLE);Ct.addClass(this.subtitlebarNode,CSS_HAS_SUBTITLE);}else{Ct.removeClass(this.titleBarContainerExtendedBackgroundNode,CSS_HAS_SUBTITLE);Ct.removeClass(this.titlebarNode,CSS_HAS_SUBTITLE);Ct.removeClass(this.subtitlebarNode,CSS_HAS_SUBTITLE);}this.doLayout();},setTitleButtonsVisibility:function CR(D0){if(this.toggleMenuButtonTitleCSS){this.toggleMenuButtonTitleCSS();}Aa.safeCall("menuBtnInfo.btn.classList.toggle",this)("invalid",D0&&mstrApp.isAppStatePresentation());this.doLayout();},refresh:function BP(){delete this._currentLayout;if(this.parent&&!this.parent.boxLayoutConfig.dirty){this._super();if(this.hasRendered&&this.parent.isManualMode()){this.updateSelfSplitter();}}else{Ck.call(this,false,this.getFormats());Ck.call(this,true,this.getFormats());}this.applyNoFillClass();this.applyCustomShadowAppliedClass();},refreshFormats:function Am(D0){this.clearFormats();if(this.titlebarNode&&this.titlebarNode.style){this.titlebarNode.style.textDecoration="";}if(this.subtitlebarNode&&this.subtitlebarNode.style){this.subtitlebarNode.style.textDecoration="";}if(this.domNode&&this.domNode.style){this.domNode.style.border="";}Ck.call(this,false,this.getFormats());Ck.call(this,true,this.getFormats());this.applyNoFillClass();this.applyCustomShadowAppliedClass();this.doLayout();if(D0){this.postUpdateLayout();}if(this.checkSubtitleFormatExistence){this.checkSubtitleFormatExistence();}this.adjustPaddingForBorderRadius();},resetTopLeftAndRefreshFormats:function Cd(){if(this.defn&&this.defn.fmts){this.defn.fmts.top=0;this.defn.fmts.left=0;}this.refreshFormats();},hasAtLeastOneVisibleTitleButton:function Af(){var D0=[this.txnButtonNode,this.exportButtonNode,this.maximizeButtonNode,this.contextMenuButtonNode];return D0.some(function(D1){return D1&&!Ct.hasClass(D1,"invalid");});},afterLayout:function A7(){var D2=this.titleBarContainerNode&&this.titleBarContainerExtendedBackgroundNode;if(D2){var D4=Aa.safeCall("getScale",this)()||1,D8=this.titleBarContainerNode.getBoundingClientRect().height/D4,D3=window.getComputedStyle(this.titlesContainerNode).borderBottomWidth,D0=parseFloat(D3)||0,D5=D8>D0,D6=parseInt(this.domNode.style.padding,10)||0;if(mstrApp.supportFeature(AQ.SUPPORT_RADIUS_AND_SPACING)&&D5){this.titleBarContainerExtendedBackgroundNode.style.height=D8+D6+"px";this.titleBarContainerExtendedBackgroundNode.style.display="block";}else{this.titleBarContainerExtendedBackgroundNode.style.display="none";}}if(this.highlightBorderNode){this.highlightBorderNode.style.position="absolute";this.highlightBorderNode.style.pointerEvents="none";var D1=parseInt(this.domNode.style.borderWidth,10)||0;var D7=1-D1;this.highlightBorderNode.style.inset=D7+"px";}},addFormatProps:function AN(D1,D0){return D1;},isKBSupportEditing:function B8(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||mstrApp.isInVFConfigMode||mstrApp.isVisBuilder);},isKBSupportAccessibility:function By(){return this.isKBSupportEditing()||(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation());},onkeydown:function Dt(EB){var EH=this,EI=EB.e.key,D8=EH.parent,D1=EH.isKBSupportEditing(),EC=EH.isKBSupportAccessibility(),D6=D8&&Aa.safeCall("isRootPanel",D8)();if(!EC||EH.isDragging||!D8){return ;}if(this._super){this._super(EB);}if(EI==="Escape"){this.loseFocus(true);}var D5=EB.e.keyCode,D3=EB.e.target,EA=D8.model?DP.map(D8.model._multiSelectUnits,function(EK){return mstrmojo.all[EK];}):[],D9=EA.length===1,ED,D7,D2,EG=function(){return DP.some(EA,function(EO){if(EB.keyboardSupport){var EL=D3&&D3.tagName;return !(typeof EL==="string"&&EL.toUpperCase()==="INPUT");}var EN=D3===EO.domNode||D3===EO.domNode.getElementsByClassName("hover-drag-icon-btn visible")[0];if(CB.isIE11){if(D3.getAttribute&&D3.getAttribute("spellcheck")){return false;}var EK=CB.findAncestorByAttr(D3,"onkeydown",true),EM=function(EP){return DP.some(["mstmojo-ghostImgTableCell","ghost-vis-img","ctrlOverlay","hover-drag-icon-btn mouse-left"],function(EQ){return EP.indexOf(EQ)!==-1;});};return EN||(EM(D3.className)&&EK&&EK.node===EO.domNode);}return EN;});},EE=function(){var EL=document.createElement("div"),EK=EL.style;EK.left="0px";EK.top="0px";EK.position="fixed";EK.right="0px";EK.bottom="0px";EK.visible="true";EK.opacity=0;EK.zIndex=99999;EL.id="disableClickOverlay";EL.onclick=function(){EH.onkeyup({e:null,stopMoveNow:true});};document.body.appendChild(EL);};if(!D6){if(D5===27){this.loseFocus(true);EB.e.preventDefault();EB.e.stopPropagation();var EJ=D8.parent,D0=EJ&&EJ.parent;if(EJ.isSwitchModeNone()||(Bf.walk("selector.children.length",EJ)===1&&mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())){D0.grabFocus(true);}else{EJ.restoreFocus();}return ;}}if(D9&&D5===mstrmojo.Enum_Keys.ENTER){D2=EG();}else{if(D1&&D9&&(D5===46||D5===8)){D7=EG();}else{if(D1&&D5>=37&&D5<=40){EB.e.stopPropagation();if(!this.isMaxed&&D8.isManualMode()){ED=EG();}}}}if(D7&&!D8.isKeyboardMoving){EB.e.preventDefault();EB.e.stopPropagation();DP.some(EA,function(EK){EK.deleteSelf();});}else{if(ED){var D4;EB.e.preventDefault();EB.e.stopPropagation();window.clearTimeout(D8.updatePanelDataTimer);if(!D8.isKeyboardMoving){D8.isKeyboardMoving=true;EE();DP.forEach(EA,function(EK){D8.snapGuide.boxIntervalOperations(EK,"delete");});}D8.curKeyBoardMoveCount+=1;if(EB.e.shiftKey){D8.curKeyBoardMoveCount=0;D4=10;}else{D4=Math.min(D8.maxKeyBoardMoveSpeed,Math.floor(D8.curKeyBoardMoveCount/10)+1);}var EF=D8.getCanvasWidthAndHeight();DP.forEach(EA,function(EL){var EK;switch(D5){case 37:EK=parseFloat(EL.left);if(EK-D4>=10-parseFloat(EL.width)){EL.set("left",EK-D4+"px");}break;case 38:EK=parseFloat(EL.top);if(EK-D4>=10-parseFloat(EL.height)){EL.set("top",EK-D4+"px");}break;case 39:EK=parseFloat(EL.left);if(EK+D4<=parseFloat(EF.width)-10){EL.set("left",EK+D4+"px");}break;case 40:EK=parseFloat(EL.top);if(EK+D4<=parseFloat(EF.height)-10){EL.set("top",EK+D4+"px");}break;}});}else{if(D2){this.enterUnit();EB.cancel();EB.preventDefault();}}}},onkeyup:function AB(D1){if(!this.isKBSupportEditing()){return ;}var D0=this.parent;if(D0&&D0.isKeyboardMoving){D1.e.preventDefault();D1.e.stopPropagation();D0.curKeyBoardMoveSpeed=1;D0.curKeyBoardMoveCount=0;var D3=DP.map(D0.model._multiSelectUnits,function(D5){return mstrmojo.all[D5];}),D4=function(){D0.updateBoxDimensionByKeyBoardMove(D3);D0.isKeyboardMoving=false;var D5=document.getElementById("disableClickOverlay");if(D5){document.body.removeChild(D5);}};if(D1&&D1.stopMoveNow){D4();}else{var D2=Bf.walk("e.keyCode",D1);if(!(D2&&D2>=37&&D2<=40)){return ;}D0.updatePanelDataTimer=window.setTimeout(function(){D4();},300);}}},shouldSelectVIUnit:function BV(D0){if(mstrApp.isAIMode){var D5=Bf.walk("src.domNode.classList",D0);if(D5&&!D5.contains("mstrmojo-VIBox")){return false;}}if(mstrApp.isAppStateSelection()){var D4=this.model.getDocVIVisualizationsMainPanel(),D3=D4._tgtSelections;if(!D3.id){return true;}var D2=D3.k,D1=D4.model.getTargetDefn(D2)[D2];if(D1&&D1.ct==="3"&&D1.t===DB.SELECTOR){return true;}if(!mstrApp.supportFeature(AQ.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){return true;}if(D3.isAcrossPageSelection()){return true;}}return Cy.call(this,Aa.safeCall("getTarget",D0)());},onclick:function B7(D0){if(!this.shouldSelectVIUnit(D0)){return ;}D0.e.justSwitched=this.k!==this.getDocModel().getLatestSelectedViObjKey();this.selectVIUnit(null,D0);if(!D0.e.ptvSelected&&this.switchPropertyOnClick(D0)){this.boxContent.edtModel.selectTargetByValue(mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE);}if(Bf.walk("parent.updateCanTab",this)){this.parent.updateCanTab(true);}},switchPropertyOnClick:function CO(){var D0=this.boxContent.edtModel;return !!(D0&&D0.selectTargetByValue);},getZonesModel:function Dj(){return null;},getEditorModel:function Ac(){return this.boxContent.edtModel;},onmouseenter:function Dr(){var D3=this.menuBtnInfo,D1=this.dragIcon;if(D3&&D3.menuCfg){Ct.addClass(D3.btn,CSS_BTN_VISIBLE);Ct.removeClass(D3.btn,CSS_MOUSE_LEFT);}if(D1&&!this.getTitleBarVisibility()&&!mstrApp.isAppStatePresentation()&&!mstrApp.isLayoutModePreview()){AZ(D1,this.draggable);}if(this.isPredefinedNLGInfoWindow){AZ(D1,this.draggable);}if(Bf.walk("parent.groupTreeLayoutConfig.getFloatGroupTree",this)&&this.parent.groupTreeLayoutConfig.getFloatGroupTree()){var D4=this.getParentGroup();if(D4&&D4.editable){this.parent.groupTreeLayoutConfig.editGroup();}this.selectGroup();}if(this.boxContent){var D2=this.boxContent,D0=!!Bf.walk("defn.iwKey",D2);if((D2.scriptClass==="mstrmojo.vi.ui.rw.DocTextfield"||D2.scriptClass==="mstrmojo.vi.ui.rw.DocImage"||D2.scriptClass==="mstrmojo.vi.ui.rw.DocQuillTextField")){A9.call(D2,D0);}}},onmouseleave:function BH(){var D2=this.menuBtnInfo,D1=this.dragIcon,D0=this.isInChatPanel;if(D2&&D2.menuCfg&&!D0){Ct.addClass(D2.btn,CSS_MOUSE_LEFT);Ct.removeClass(D2.btn,CSS_BTN_VISIBLE);}if(D1&&this.model.getLatestSelectedViObjKey()!==this.k&&!this.getTitleBarVisibility()&&!mstrApp.isAppStatePresentation()){AZ(D1,false);}if(this.isPredefinedNLGInfoWindow){AZ(D1,false);}},onfocusin:function CZ(){var D1=CB.findWidget(this),D0=D1&&D1.boxContent&&D1.boxContent.hasAccessibility;if(D0){D1.toggleTitleBarButtonCSS(true);}},onMenuClose:function O(){var D2=window.event,D3=D2&&D2.currentTarget;if(D3&&D3.tagName==="BODY"){var D1=this.opener&&this.opener.containerNode,D0=D1&&CB.findWidget(D1);if(D0&&D0.toggleTitleBarButtonCSS){D0.toggleTitleBarButtonCSS(false);}}},onfocusout:function z(){var D5=CB.findWidget(this),D2=D5&&D5.boxContent&&D5.boxContent.hasAccessibility,D3=window.event;if(D2){var D1=CB.findWidget(D3.currentTarget),D4=CB.findWidget(D3.relatedTarget),D0;if(D4&&(D4.isUnitContainer||D4.parent)){D0=D4.isUnitContainer?D4:D4.parent.parent;}if(D1&&D0&&D1.isUnitContainer&&D0.isUnitContainer&&D1!==D0){D1.toggleTitleBarButtonCSS(false);D0.toggleTitleBarButtonCSS(true);}else{if(D1&&D1.isUnitContainer&&!D4){D1.toggleTitleBarButtonCSS(false);}}}},onblur:function U(){this.toggleTabSelectionEffect(false);},toggleTitleBarButtonCSS:function DK(D5){var D4=this.menuBtnInfo,D1=this.filterBtnNode&&this.filterMenuCfg,D3=this.maxRestoreBtnNode,D0=this.nlgCopyBtnNode;if(D4&&D4.menuCfg){Ct.toggleClass(D4.btn,CSS_BTN_ACCESSIBLE,D5);}if(D1){Ct.toggleClass(this.filterBtnNode,CSS_BTN_ACCESSIBLE,D5);}if(D3){Ct.toggleClass(D3,CSS_BTN_ACCESSIBLE,D5);}if(D0){Ct.toggleClass(D0,CSS_BTN_ACCESSIBLE,D5);}var D2=this.boxContent;if(D2&&D2.toggleBoxContentItemsCSS){D2.toggleBoxContentItemsCSS(D5,CSS_BTN_ACCESSIBLE);}if(D5){this.attachedA11yClass=true;}else{delete this.attachedA11yClass;}},onmouseover:function BR(D0){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){D0.cancel();}var D1=this._panelTimeout;if(D1){window.clearTimeout(D1);delete this._panelTimeout;}if(this.titleBar.visible&&!mstrApp.isAppStateSelection()){this.titleBar.setToolbarVisibility(true);}},onmouseout:function Ba(){var D0=this.id;this._panelTimeout=window.setTimeout(function(){var D1=mstrmojo.all[D0];if(D1){D1.titleBar.setToolbarVisibility(false);}},200);},menuDisplayCallback:function t(D1){var D0=this.menuBtnInfo;Ct.toggleClass(D0.btn,CSS_BTN_VISIBLE,D1);Ct.toggleClass(D0.btn,CSS_MOUSE_LEFT,!D1);},isMenuButtonHovered:function Bn(){const D0=this.menuBtnInfo;if(!D0||!D0.btn){return false;}return D0.btn.matches(":hover");},onmousemove:function AG(){var D0=this,D1=D0.menuBtnInfo;if(D0.titleBar&&!D0.titleBar.visible&&D1&&D1.menuCfg){if(D0.mouseMovingTimer){clearTimeout(D0.menuDisplayTimeout);}if(D0.isMenuButtonHovered()){clearTimeout(D0.menuDisplayTimeout);}else{D0.mouseMovingTimer=setTimeout(function(){clearTimeout(D0.menuDisplayDelay);D0.menuDisplayDelay=null;clearTimeout(D0.menuDisplayTimeout);D0.menuDisplayTimeout=setTimeout(function(){if(D0.isMenuButtonHovered()){return ;}D0.menuDisplayCallback(false);},1500);},100);}if(!D0.menuDisplayDelay){D0.menuDisplayDelay=setTimeout(function(){D0.menuDisplayCallback(true);},500);}}},isDragValid:function A2(D1){var D3=D1.src.node,D0=D3.tagName,D2=D3.getAttribute("class");D0=(D0&&D0.toLowerCase())||"";D2=(D2&&D2.toLowerCase())||"";if(D0==="input"||D0==="textarea"||D2.indexOf("hover-menu-btn")>-1||D2.indexOf("icn")>-1||D2.indexOf("edge")>-1||D2.indexOf("resizer")>-1){return false;}return(this.unDocked&&this.parent.hasFloatChildren())||this.parent.hasMultipleChildren();},initializeDrag:function Dw(){if(this._super()!==false){this.selectVIUnit();}},getTargetDropZone:function CG(D0){if(Di.call(this,D0)||Bw.call(this,D0)){return"";}return this._super(D0);},allowDrop:function Y(D0){try{const D1=this instanceof mstrmojo.vi.ui.rw.VizBox;const D4=this.getContextDragData(D0);var D8=D4.items;if(!D8||D8.length===0){D8=D4.item?[D4.item]:[];}const D9=DP.some(D8,function(ED){return ED.t===10;});const D6=["mstrmojo.gm.VisGraphMatrix","mstrmojo.vi.ui.rw.Xtab","mstrmojo.vi.ui.rw.MultiXtab","mstrmojo.ag.AgXtab"];const EC=!this.boxContent||D6.includes(this.boxContent.scriptClass);if(D1&&!EC&&D9){return false;}else{if(D1&&D9&&this.boxContent.scriptClass==="mstrmojo.gm.VisGraphMatrix"){const D3=this.boxContent;if(D3.isTargetedByAMSelector()){return false;}}}}catch(D7){}var EB=D0.src,D5=EB&&EB.widget,EA=this.parent,D2=false;if(EA&&EA.isManualMode&&typeof EA.isManualMode==="function"){D2=EA.isManualMode();}if(this.boxContent&&this.boxContent.hasArrayGSI&&Bf.walk("widget.scriptClass",EB)!=="mstrmojo.vi.ui.VizGalleryContainer"&&!Bf.isEmpty(this.getContextDragData(D0))){return false;}if(D5&&D5===this){return false;}if(D2&&D5&&D5.isUnitContainer&&EA===D5.parent){return false;}if(CN.call(this,D0)&&this.blockDropWithParameter(D0)){return false;}if(this.boxContent&&this.boxContent.isBinaryData&&this.blockDropWithBinaryData(EB)){return false;}if(Ay.call(this,D0)&&this.allowDropFromFilter(D0)&&!D2){return true;}if(CC.call(this,D0)&&this.allowDropFromVizGallery(D0)&&!D2){return true;}if(Di.call(this,D0)&&this.allowDropFromDataset(D0)){return true;}if(Bw.call(this,D0)&&this.allowDropFromAllObjectsBrowser(D0)){return true;}return this._super(D0);},allowDropFromFilter:function Dh(D0){var D2=D0&&D0.src,D1=D2&&D2.widget;return mstrApp.allowWebDashboardDesign()&&!(D1&&D1.isVisFilter());},blockDropWithBinaryData:function C1(D2){const D1=Bf.walk("data.item.t",D2);const D3=Bf.walk("data.item.de",D2);const D0=Bf.walk("data.item.st",D2)===12033;return D1==Dz.Consolidation||D1==Dz.Filter||D3||D0;},allowDropFromVizGallery:function Al(D0){return true;},allowDropFromDataset:function Dq(D0){return false;},allowDropFromAllObjectsBrowser:function BJ(D0){return this.allowDropFromDataset(D0);},blockDropWithParameter:function BZ(D1){var D0=Bf.walk("src.data.item.st",D1)===B2.PARAMETER_OBJECT;return !D0;},allowContainerSwitch:function Dy(D0){return false;},getSelectedViUnitFnName:function BS(){return undefined;},close:function(){this.parent.deleteBoxAndSubmit(this);this.parent.removeChildren(this);mstrApp.rootCtrl.generateToolbar();this.destroy();},createAvatar:function CX(){this.domNode.style.zIndex="-1";var D0=document.createElement("div");D0.className=this.getAvatarCls().join(" ");D0.textContent=this.getDisplayName();return this.offsetAvatar(D0);},duplicateUnit:function Q(D2){var D1=this.model.getMultiSelectUnits(),D3=Bf.walk(D1[0]+".parent.k",mstrmojo.all),D0=Bf.walk("parent.k",D2);if(D0!==D3){D2.selectVIUnit();}},canDuplicate:function(){var D0=this.boxContent;return !!D0.canDuplicate&&D0.canDuplicate()&&(this.isSelectorPanelButtonField===undefined||!this.isSelectorPanelButtonField())&&(this.isActionSelector===undefined||!this.isActionSelector());},ondragstart:function B6(D0){this.isDragging=true;this._super(D0);},ondragmove:function CV(D0){if(D0.src.widget&&D0.src.widget.unDocked&&(D0.delay^=1)){this.parent.processGuidesMove(D0);}},ondragend:function Cz(D0){this.domNode.style.zIndex=D0.floatIndex?D0.floatIndex:DEFAULT_Z_INDEX;this.isDragging=false;this._super(D0);},wasDropped:function A5(D0){this.domNode.style.zIndex=DEFAULT_Z_INDEX;this._super(D0);},ondrop:function Dk(D0){var D2=Ay.call(this,D0),D6=CC.call(this,D0),D1=this.maskNode.zone,D4,D9=this.getDocModel(),D8=this;if(D2){D4=D0.src.widget.selector.node;}this._super(D0);if(Di.call(this,D0)){D9.selectVIUnit(this.id);this.dropFromDataset(D0);}if(Bw.call(this,D0)){var D5=D0.src.widget,D3=D5&&D5.dataProvider;if(D3){D3.loadObjects(D0.getCtxtDragData().items,{success:function(){D8.dropFromAllObjects(D0);}});}}var D7;if(D2){D7=this;if(!D1){D1=this.parent.getPanelTargetEdge(D0);if(D1){D7=null;}}this.parent.restoreAnyMaxedVizBox();this.model.insertExistingFilter(D4,D7,D1,D7.parent);}else{if(D6){D7=this;var EA=D0.getCtxtDragData().vizItem;if(!D1){D1=this.parent.getPanelTargetEdge(D0);if(D1){D7=null;}}this.parent.restoreAnyMaxedVizBox();this.model.dndInsertNewBox(EA,{targetBox:D7,targetPanelKey:D7.parent.k,edge:D1});}}},postDropBox:function Df(){this.domNode.style.zIndex=DEFAULT_Z_INDEX;},rebuildBoxContent:function Ad(D0){var D3=this.boxContent,D1=this.parent;this.removeChildren(D3);D3.destroy();if(D0){var D2=D1.builder.build([D0],this.model,{pk:D1.k})[0];D3=D2.boxContent;D2.removeChildren(D3);D2.destroy();}else{D3=this.model.rebuildUnitFromDataCache(D3.id,D1.k,D1.builder).boxContent;}this.defn=D3.defn;this.addChildren([D3]);},dropFromDataset:mstrmojo.emptyFn,dropFromAllObjects:mstrmojo.emptyFn,generateToolbar:function S(){var D1=this.titleBar,D2=D1.toolbarCfg,D3=this.menuBtnInfo;if(D3){if(D2){D2.destroy();}if(D3.menuCfg&&D3.menuCfg.destroy){D3.menuCfg.destroy();}if(mstrApp&&mstrApp.isInVFInteractMode||mstrApp.isAppStateSelection()||mstrApp.isAppStateTransactionMode()){D3.menuCfg=null;}else{const D0=new mstrmojo.ui.menus.ToolbarConfig();D0.setWhitelist(this.getMenuWhitelist());D1.set("toolbarCfg",this.updateToolbar(D0));D3.menuCfg=D1.getMenuConfig();}}if(this.hasRendered){this.setMenuButtonVisibility();}if(CB.isTouchOptimizationEnabled()){if(this.isToolbarShow&&this.isToolbarShow()){this.showMobileDossierToolbar();}}},getTitleVisibilityFmts:function DG(D2,D1){var D0={FormattingView:{ShowTitleBar:D2}};if(mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)&&D1&&this.defn.t!==DB.SELECTOR){D0.FormattingView.ShowTitles=D2;}return D0;},getTitlesVisibilityFmts:function AK(D2,D1){var D0={FormattingView:{ShowTitles:D2}};if(D1){D0.FormattingView.ShowTitleBar=D2;}return D0;},getTitlesLinesFmts:function Ca(D0){return{FormattingView:{TitlesLines:D0}};},getTitleButtonsVisibilityFmts:function P(D2,D1){var D0={FormattingView:{ShowTitleButtons:D2}};if(D1){D0.FormattingView.ShowTitleBar=D2;}return D0;},getTitleAlignmentFmts:function Co(D0){var D1={left:0,center:2,right:1}[D0]||0;return{FormattingAlignment:{Horizontal:D1}};},toggleTitleBar:function CT(D1){var D7=this.boxContent.id,D5=this.model,D4=D1===true&&this.showTitleButtons===false&&this.showTitles===false,D6=function D6(D8){var EA=mstrmojo.all[D7],D9=EA.parent;clearTimeout(D9.mouseMovingTimer);clearTimeout(D9.menuDisplayTimeout);clearTimeout(D9.menuDisplayDelay);D9.showTitleBar=D8;D9.defn.httl=D8;if(D4){D9.showTitles=D8;D9.defn.httls=D8;}D9.updateTitleComponentsVisibility();D9.parent.selectVIUnit(D9,true);D9.applyBoxSize(D9.height,D9.width,D9.top,D9.left);D9.generateToolbar();EA.refresh(null,true);},D0=this.id;D6(D1);D5.controller.cmdMgr.execute({execute:function(){var D8=mstrmojo.all[D7].parent;this.submit([D5.getUnitFormatAction(D8,D8.defn.t===DB.SELECTOR?5:1,D8.getTitleVisibilityFmts(D1?1:0,D4),true)],{success:function EA(){mstrmojo.all[D0].defn.httl=D1;},failure:function D9(){D6(!D1);}},mstrmojo.DocDataService.RAPID_EXEC);D6(D1);},urInfo:{silent:true,undo:function D2(){D6(!D1);},redo:function D3(){D6(D1);}}});},toggleTitles:function Aw(D1){var D6=this.boxContent.id,D4=this.model,D5=this.showTitleButtons===false&&D1===false,D7=function D7(D8){var EA=mstrmojo.all[D6],D9=EA.parent;D9.showTitles=D8;D9.defn.httls=D8;if(D5){D9.showTitleBar=D8;D9.defn.httl=D8;}D9.updateTitleComponentsVisibility();D9.generateToolbar();D9.parent.selectVIUnit(D9,true);D9.applyBoxSize(D9.height,D9.width,D9.top,D9.left);EA.refresh(null,true);},D0=this.id;D7(D1);D4.controller.cmdMgr.execute({execute:function(){var D8=mstrmojo.all[D6].parent;this.submit([D4.getUnitFormatAction(D8,1,D8.getTitlesVisibilityFmts(D1?1:0,D5),true)],{success:function EA(){mstrmojo.all[D0].defn.httls=D1;if(D5){mstrmojo.all[D0].defn.httl=D1;}},failure:function D9(){D7(!D1);}},mstrmojo.DocDataService.RAPID_EXEC);D7(D1);},urInfo:{silent:true,undo:function D2(){D7(!D1);},redo:function D3(){D7(D1);}}});},toggleSubtitleShow:function A1(D2){var D7=this.boxContent.id,D5=this.model,D1=function D1(D8){var EA=mstrmojo.all[D7],D9=EA.parent;D9.showTwoLinesTitles=D8;D9.defn.ttlsls=D8?2:1;D9.setSubtitleBarVisibility(D9.getSubtitleVisibility());D9.parent.selectVIUnit(D9,true);D9.applyBoxSize(D9.height,D9.width,D9.top,D9.left);EA.refresh(null,true);},D0=this.id;D1(D2);var D6=D2?2:1;D5.controller.cmdMgr.execute({execute:function(){var D8=mstrmojo.all[D7].parent;this.submit([D5.getUnitFormatAction(D8,1,D8.getTitlesLinesFmts(D6),true)],{success:function EA(){mstrmojo.all[D0].defn.ttlsls=D6;},failure:function D9(){D1(!D2);}},mstrmojo.DocDataService.RAPID_EXEC);D1(D2);},urInfo:{silent:true,undo:function D3(){D1(!D2);},redo:function D4(){D1(D2);}}});},getRenameSubtitleAction:function CD(D1,D0){return{act:"setSubtitle",nodeKey:D1,unitType:521,subtitle:D0};},getDefaultSubtitleFormatAction:function A(D0){var D1={FormattingFont:{Bold:0,Italic:0,Underline:0,Strikeout:0,Size:9,Color:3815477,Name:"Open Sans"}};return{act:"format",unitKey:D0,unitType:521,formatType:3,format:D1};},createSubtitle:function DJ(){var D2=this.model,D4=this.k,D3=this.boxContent.id,D1=mstrmojo.all[D3].parent,D0=function D0(D6){var D8=mstrmojo.all[D3],D7=D8.parent;D7.showTwoLinesTitles=D6;D7.defn.ttlsls=D6?2:1;D7.setSubtitleBarVisibility(D7.getSubtitleVisibility());D7.parent.selectVIUnit(D7,true);D7.applyBoxSize(D7.height,D7.width,D7.top,D7.left);D8.refresh(null,true);},D5=function D5(D7,D6){D2.partialUpdate(D7.data,D2.getTargetDefn(D4),D7.defn,[D4]);D2.synchronizeLayoutTreeData(D4);D1.resetTopLeftAndRefreshFormats();D0(D6);D1.subtitleDefined=D6;D1.parent.selectVIUnit(D1,true);};D2.controller.cmdMgr.execute({execute:function(){var D7=D2.getDataService(),D8=D7.newUpdate(this);D8.addActions([D2.getUnitFormatAction(D1,1,D1.getTitlesLinesFmts(2),true)]);D8.addActions([D1.getRenameSubtitleAction(D4,mstrmojo.desc(28912,"Add bottom line"))]);D8.addActions([D1.getDefaultSubtitleFormatAction(D4)]);D8.addExtras(mstrmojo.DocDataService.REQUEST_DEFN_DATA);D8.addCallbacks({success:function D6(D9){D5(D9,true);}.bind(this),});D8.submit();},urInfo:{undo:function(){this.urInfo.puKeys=[D4];this.urInfo.callback={success:function(D6){D5(D6,false);},};return false;},redo:function(){this.urInfo.puKeys=[D4];this.urInfo.callback={success:function(D6){D5(D6,true);},};return false;}}});},toggleSubtitle:function Cn(D0){if(this.subtitleDefined||!D0){this.toggleSubtitleShow(D0);}else{this.createSubtitle();}},toggleTitleButtonShow:function CP(D4){var EC=this.boxContent.id,D3=this.model,D1=this.showTitles===false&&D4===false,D8=this.getFormats(),D2=D8.ttl,D5=D2&&D8.ttl["text-align"],D0=D4&&D5==="right",D7=this,EA=function EA(EE,ED){var EG=mstrmojo.all[EC],EF=EG.parent;EF.showTitleButtons=EE;EF.defn.htbs=EE;if(D1){EF.showTitleBar=EE;EF.defn.httl=EE;}EF.setTitleButtonsVisibility(EF.getTitleButtonsVisibility());if(D0){AV.updateFormatBlock(D2,"alh",ED);if(D8.sttl){AV.updateFormatBlock(D8.sttl,"alh",ED);}Ck.call(D7,true,D7.getFormats());}EF.parent.selectVIUnit(EF,true);EF.applyBoxSize(EF.height,EF.width,EF.top,EF.left);EG.refresh(null,true);},EB=this.id;EA(D4,"left");D3.controller.cmdMgr.execute({execute:function(){var ED=mstrmojo.all[EC].parent;var EG=[D3.getUnitFormatAction(ED,1,ED.getTitleButtonsVisibilityFmts(D4?1:0,D1),true)];if(D0){EG.push(D3.getUnitFormatAction(ED,2,ED.getTitleAlignmentFmts("left"),true));EG.push(D3.getUnitFormatAction(ED,3,ED.getTitleAlignmentFmts("left"),true));}this.submit(EG,{success:function EF(){mstrmojo.all[EB].defn.htbs=D4;if(D1){mstrmojo.all[EB].defn.httl=D4;}},failure:function EE(){EA(!D4,D5);}},mstrmojo.DocDataService.SUPPRESS_DATA);EA(D4,"left");},urInfo:{silent:true,undo:function D9(){EA(!D4,D5);},redo:function D6(){EA(D4,"left");}}});},createTitleButtons:function j(){var D3=this.model,D6=this.k,D8=this.boxContent.id,D5=mstrmojo.all[D8].parent,D7=this.getFormats(),D2=D7.ttl,D4=D2&&D7.ttl["text-align"],D0=D4==="right",D1=function D1(EC,EA){var EB=mstrmojo.all[D8].parent||{},D9=EB.getFormats(),ED=EB.boxContent;D3.partialUpdate(EC.data,D3.getTargetDefn(D6),EC.defn,[D6]);EB.showTitleButtons=!!EB.defn.htbs;D3.synchronizeLayoutTreeData(D6);EB.resetTopLeftAndRefreshFormats();EB.setTitleButtonsVisibility(EB.getTitleButtonsVisibility());if(D0){AV.updateFormatBlock(D2,"alh",EA);if(D9.sttl){AV.updateFormatBlock(D9.sttl,"alh",EA);}Ck.call(EB,true,EB.getFormats());}EB.parent.selectVIUnit(EB,true);EB.applyBoxSize(EB.height,EB.width,EB.top,EB.left);ED.refresh(null,true);DP.forEach(Bf.valarray(EB.defn.btn_flds),function(EE){Ck.call(EB,false,EE.fmts,Ce.call(EB,EE));});};D3.controller.cmdMgr.execute({execute:function(){var EA=D3.getDataService(),EB=EA.newUpdate(this);D3.addTitleButtonAction(EB,D5);EB.addActions([D3.getUnitFormatAction(D5,1,D5.getTitleButtonsVisibilityFmts(1,false))]);if(D0){EB.addActions([D3.getUnitFormatAction(D5,2,D5.getTitleAlignmentFmts("left"),true),D3.getUnitFormatAction(D5,3,D5.getTitleAlignmentFmts("left"),true)]);}EB.addExtras(mstrmojo.DocDataService.REQUEST_DEFN_DATA);EB.addCallbacks({success:function D9(EC){D1(EC,"left");}.bind(this),});EB.submit();},urInfo:{undo:function(){this.urInfo.puKeys=[D6];this.urInfo.callback={success:function(D9){D1(D9,D4);},};return false;},redo:function(){this.urInfo.puKeys=[D6];this.urInfo.callback={success:function(D9){D1(D9,"left");},};return false;}}});},toggleTitleButtons:function CU(D0){if(this.defn.btn_flds){this.toggleTitleButtonShow(D0);}else{if(D0){this.createTitleButtons();}}},getFormats:function BY(){var D0=this.boxContent;if(D0){return D0.getFormats();}return null;},clearFormats:function C(){var D0=this.boxContent;if(D0&&D0.clearFormats){D0.clearFormats();}},preBuildRendering:function Dn(){var D0=this.boxContent;if(D0){D0.attachEventListener("regenerateToolbar",this.id,"generateToolbar");D0.attachEventListener("gridInfoUpdated",this.id,"refreshTitleButtons");}this.generateToolbar();return this._super();},updateNotReadyEffect:function G(){const D2=this.boxContent;const D1=D2&&D2.node&&D2.node.data;var D0=D1&&D1.egt===ERROR_TYPE.DATA_NOT_READY;if(D2&&D2.isBinaryData){D0=Aa.safeCall("isDataNotReady",D2)();}Ct.toggleClass(this.domNode,"data-not-ready",D0);Ct.toggleClass(this.domNode,"conditional-formatting",D0&&this.isFieldWithConditionalFormatting());Ct.toggleClass(this.domNode,"mstr-not-ready-field",D0&&this.supportLoadingEffect());},updateDisableInteractionEffect:function DN(){var D0=this.model&&this.model.controller;if(D0&&D0.isDossierInstanceReady&&D0.disableInteraction){if(!D0.isDossierInstanceReady()){D0.disableInteraction(this.domNode);}}},updateA11yEffect:function DZ(){var D0=this.model&&this.model.controller,D1=this.boxContent&&this.boxContent.node&&this.boxContent.node.defn;if(E(D1&&D1.t)&&D0&&D0.isDossierInstanceReady&&!D0.isDossierInstanceReady()){if(D0.disableA11y){D0.disableA11y(this.domNode);}}},isFieldWithConditionalFormatting:function AJ(){var D1=this.boxContent&&this.boxContent.node&&this.boxContent.node.defn,D0=D1&&D1.t;return D1&&D1.thresholds&&D1.thresholds.length>0&&Da(D0);},supportLoadingEffect:function y(){var D1=this.boxContent&&this.boxContent.node&&this.boxContent.node.defn,D0=D1&&D1.t;return D1&&(Da(D0)||E(D0));},removeNotReadyEffect:function Bd(){Ct.toggleClass(this.domNode,"data-not-ready",false);Ct.toggleClass(this.domNode,"conditional-formatting",false);Ct.toggleClass(this.domNode,"mstr-not-ready-field",false);},updateTitleComponentsVisibility:function BM(){this.setTitleBarVisibility(this.getTitleVisibility());this.setSubtitleBarVisibility(this.getSubtitleVisibility());this.setTitleButtonsVisibility(this.getTitleButtonsVisibility());},postBuildRendering:function Bs(){this.updateTitleComponentsVisibility();this.updateNotReadyEffect();this.updateDisableInteractionEffect();if((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this._super();this.titleBar.setToolbarVisibility(false);this.applyBoxSize(this.height,this.width,this.top,this.left);this.updateSplitters();if(!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode&&!(this.boxContent&&this.boxContent.isCustomSort)){this.dragIcon=AR.call(this,this.dragIcon);}this.updateAriaLabel();this.adjustPaddingForBorderRadius();this.canTab=true;return true;},expandNodeByBorderWidths:function m(D2,D0,D3,D4,D1){if(D2){D2.style.left="-"+D0;D2.style.right="-"+D3;D2.style.top="-"+D4;D2.style.bottom="-"+D1;}},adjustPaddingForBorderRadius:function DA(D5){var D6=this.getActualRadius(D5)||0,D2=this.getBoxPaddingWidth(D5)/2,D3=Aa.safeCall("getScale",this)()||1;if(this.domNode){this.domNode.style.padding=Math.ceil(D2)+"px";if(Aa.safeCall("isSelectorPanelButtonField",this)()||this.isActionSelector()){this.domNode.style.borderRadius=D6+"px";}if(this.titleBarContainerExtendedBackgroundNode){var D9=(this.titleBarContainerNode&&this.titleBarContainerNode.getBoundingClientRect().height||0)/D3;this.titleBarContainerExtendedBackgroundNode.style.height=(D9+Math.ceil(D2))+"px";}var D4=window.getComputedStyle(this.domNode),D8=D4.borderLeftWidth,D0=D4.borderRightWidth,D7=D4.borderTopWidth,D1=D4.borderBottomWidth;this.expandNodeByBorderWidths(this.titleBarContainerExtendedBackgroundWrapperNode,D8,D0,D7,D1);this.expandNodeByBorderWidths(this.customShadowNode,D8,D0,D7,D1);this.expandNodeByBorderWidths(this.customShadowHoverNode,D8,D0,D7,D1);}if(this.menuBtnInfo&&this.menuBtnInfo.btn){this.menuBtnInfo.btn.style.marginRight=Math.ceil(D2)+"px";this.menuBtnInfo.btn.style.marginTop=Math.ceil(D2)+"px";}if(this.dynamicSelIcon&&this.dynamicSelIcon.domNode){this.dynamicSelIcon.domNode.style.marginRight=Math.ceil(D2)+"px";this.dynamicSelIcon.domNode.style.marginTop=Math.ceil(D2)+"px";}if(this.leftBtnContainer){this.leftBtnContainer.style.marginLeft=Math.ceil(D2)+"px";this.leftBtnContainer.style.marginTop=Math.ceil(D2)+"px";}if(this.rightBtnContainer){this.rightBtnContainer.style.marginRight=Math.ceil(D2)+"px";this.rightBtnContainer.style.marginTop=Math.ceil(D2)+"px";}},getActualRadius:function BU(D0){if(Aa.safeCall("isSelectorPanelButtonField",this)()||this.isActionSelector()){this.actualRadius=this.calculateButtonRadius(D0);}else{var D2=Bf.walk("defn.fmts.radius",this)||0,D1=D0?D0/2:this.actualRadius||D2;this.actualRadius=Math.min(D2,D1);}return this.actualRadius;},updateAriaLabel:function Cv(){var D0=this.title;if(D0!==this.ariaLabel){this.set("ariaLabel",D0);}},isTitleAndSubtitleSharedFormat:function Cf(D0){if(!mstrApp.supportFeature(AQ.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)){return false;}return D0===Bm.BACKGROUND_COLOR||D0===Bm.FILL_OPACITY||D0===Bm.TEXT_ALIGN;},changeUnitFormats:function DD(D3,D6,EB,D8,D2,D0,D4,D7){var EE=this.getTitleSelectedIndex(),EA=D3&&this.isTitleAndSubtitleSharedFormat(D8)&&(EE===1||this.subtitleDefined);var D5=function(EK){if(D4){EK=D4(EK);}AV.updateFormatBlock(D3?((EE===0?EB.ttl:EB.sttl)||EB):EB,D8,EK);if(EA){var EL=D3?(EE===0?EB.sttl:EB.ttl):EB;if(EL){AV.updateFormatBlock(EL,D8,EK);}}var EH=this.parent,EI=EH?this:this.model.getSelectedViUnit();if(D3&&(D8===Bm.BUTTON_RADIUS||D8===Bm.BUTTON_SIZE)){EI.defn[D8]=EK;EI.generateToolbar();}if(EH&&EH.isManualMode()&&EB.border){EH.snapGuide.boxIntervalOperations(EI,"delete");}if(Aa.safeCall("isSelectorPanelButtonField",this)()&&D8===Bm.BUTTON_RADIUS){EI.defn[D8]=EK;}else{if(this.isActionSelector()&&D8===Bm.RADIUS){EI.defn[D8]=EK;}}var EG=EB;if(typeof EI.filterFormats==="function"){EG=EI.filterFormats(D3,EB);}Ck.call(EI,D3,EG);this.applyNoFillClass();this.applyCustomShadowAppliedClass();if(EH&&EH.isManualMode()&&EB.border){EH.snapGuide.boxIntervalOperations(EI,"insert");}var EJ=this.boxContent;if(!EJ.excludeData){if(!D3&&EJ.restylePlotly&&EJ._slots){EJ.restylePlotly(EB);}}this.raiseEvent({name:"unitFormatsChanged",formats:EB});if(D7){D7(EK);}EI.synchronizeEditors();if(D3&&(D8===Bm.FONT_SIZE||D8===Bm.BUTTON_SIZE)){EI.doLayout();EI.postUpdateLayout();}else{if(D8===Bm.RADIUS&&!this.isActionSelector()){EI.updateLayout(this._currentLayout,undefined,true);}}if(Aa.safeCall("isSelectorPanelButtonField",this)()&&D8===Bm.BUTTON_RADIUS){this.raiseEvent({name:"buttonRadiusChanged"});}else{if(this.isActionSelector()&&D8===Bm.RADIUS){this.raiseEvent({name:"buttonRadiusChanged"});}}if(BQ.call(this)&&(D8===Bm.BORDER_COLOR||D8===Bm.SHADOW_COLOR||D8===Bm.SHADOW_OPACITY||D8===Bm.SHADOW_SIZE||D8===Bm.SHADOW_DISTANCE||D8===Bm.SHADOW_ANGLE)){this.boxContent.raiseEvent({name:"kpiContainerPropertyChanged",propertyName:D8});}},D9=function(EI){var EH,EG=this.model.currlaykey;EH=DP.filterOne(EI.defn.layouts,function(EJ){return(EJ.k===EG&&EJ.loaded);});EB.border=EH.units[this.k].fmts.border;},ED={success:D5.bind(this,D2)};var EF="none",D1=mstrmojo.DocDataService.SUPPRESS_DATA;if(D8===Bm.BORDER_STYLE&&D0===EF){D1=mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION;ED=mstrmojo.func.wrapMethods({success:D9.bind(this)},ED);}var EC=[{formatType:D6,propertyName:D8,newValue:D2,oldValue:D0}];if(EA){EC.push({formatType:5-D6,propertyName:D8,newValue:D2,oldValue:D0});}this.model.saveUnitFormatProperty(this,EC,ED,D1,{silent:true,undo:D5.bind(this,D0),redo:D5.bind(this,D2)});},redraw:function BA(){if(this.onlyRedraw||this.boxContent.redraw()===true){return true;}return this._super();},getAvatarCls:function C9(){return["mstrmojo-VIUnit-avatar","icn-avi",mstrApp.getThemeClassName()];},addDragHandle:function C2(){var D0=document.createElement("div");D0.className="uc-drag-handle";this.domNode.appendChild(D0);},toggleDragHandleVisibility:function x(D0){Ct.toggleClass(this.domNode,"no-handler",!D0);},isHighlightedInChat:function Bg(){return Ct.hasClass(this.domNode,CSS_SELECTED);},shouldDeselectVizInChat:function Ax(D2,D0){if(!this.titlebarNode||!D2||!this.isHighlightedInChat()){return false;}var D1=Bf.walk("e.target",D0);return this.titlebarNode.contains(D1)||this.titlebarNode===D1;},shouldChangeHighlightInChat:function A6(D3,D0){if(!D3){return false;}var D2=Date.now();var D1=!this.chatSelectStartTime||((D2-this.chatSelectStartTime)>DC);if(D1){this.chatSelectStartTime=D2;}return D1;},toggleBoxSelection:function Dv(D2,EA){if(mstrApp.isInVFInteractMode){return ;}var D5=mstrApp.isAppStatePresentation(),D9=mstrApp.isAppStatePrintPreview(),EB=this.domNode,D6=this.model,D8=this.dragIcon,D7=this.model.getMultiSelectUnits(),D0=D7.length>1,D4=D7.length===2&&mstrmojo.all[D7[0]];var D3=mstrApp.isAIMode&&mstrApp.getAllowShowingActiveVizOutline&&mstrApp.getAllowShowingActiveVizOutline(EB);if(D3&&D6&&D6.isA11yNavigating){return ;}var D1=false;if(D3){if(this.shouldChangeHighlightInChat(D2,EA)){D1=!this.shouldDeselectVizInChat(D2,EA);}else{D1=D2&&this.isHighlightedInChat();}}else{D1=D2&&(!(D5||D9));}Ct.toggleClass(EB,CSS_SELECTED,D1);if(D3&&mstrApp.aiEventBus){mstrApp.aiEventBus.emit("viz:active",D1?this.boxContent.k:null);}if(this.isGhstImgHidden()){if(D0){this.ctrlOverlay.set("visible",D2);if(D4&&!D4.ctrlOverlay.visible){D4.ctrlOverlay.set("visible",D2);}}else{this.ctrlOverlay.set("visible",false);}}if(D8&&!this.getTitleBarVisibility()&&!mstrApp.isAppStatePresentation()){AZ(D8,this.draggable&&D2);}if(D2&&mstrmojo.util.PlatformHelper.isLibraryAuthoring()){this.hideIconVisibilityOnParent();}if(!D2){this.toggleTabSelectionEffect(D2);}},hideIconVisibilityOnParent:function B0(){var D0=this;while(D0.parent){if(D0.parent.isPanelStackBox){D0.hideButtonsWhenChildSelected();}D0=D0.parent;}},isGhstImgHidden:function CM(){return !this.isGhstImgVisible;},updateGhostImgCss:function De(D0){if(D0.propertyName===Bm.BACKGROUND_COLOR&&!D0.isTitle){var D1=this.ghostImgCss||[];D1=DP.filter(D1,function(D2){return e.indexOf(D2)===-1;});D1=D1.concat(u(D0.value));this.set("ghostImgCss",D1);}},isAMSelector:function Ah(){return this.scriptClass==="mstrmojo.vi.ui.rw.AMSelectorBox";},isPanelSelector:function B3(){return this.scriptClass==="mstrmojo.vi.ui.rw.PanelSelectorBox";},isParameterSelector:function BT(){return this.scriptClass==="mstrmojo.vi.ui.rw.ParameterSelectorBox";},isActionSelector:function DW(){return this.scriptClass==="mstrmojo.vi.ui.rw.ActionSelectorBox";},isPanelStackBox:function g(){return this.scriptClass==="mstrmojo.vi.ui.rw.PanelStackBox";},isInfoWindowBox:function BL(){return this.scriptClass==="mstrmojo.vi.ui.rw.InfoWindowBox";},isInInfoWindowBox:function b(){var D0=this;while(D0){if(this.isInfoWindowBox.call(D0)){return true;}D0=D0.parent;}return false;},getCopyMoveTargetPanelStack:function Bu(){var D0=this.model,D2=this.boxContent.k,D1=D0.getCurrentLayoutKey();return D0.getOwningWidgetByType(DB.PANELSTACK,D2,D1);},applyNoFillClass:function CE(){var D0=this.getFormats(),D2=Bf.walk("background-color",D0),D1=D2==="transparent"||D2===undefined;if(!D0){return ;}if(this.domNode){if(D1){Ct.addClass(this.domNode,"noFill");}else{Ct.removeClass(this.domNode,"noFill");}}else{if(D1){Ct.addWidgetCssClass(this,"noFill");}}},applyCustomShadowAppliedClass:function DL(){var D0=this.getFormats(),D2=Bf.walk("shadow-color",D0),D1=D2!==undefined;if(!D0){return ;}if(this.domNode){if(D1){Ct.addClass(this.domNode,"custom-shadow-applied");}else{Ct.removeClass(this.domNode,"custom-shadow-applied");}}else{if(D1){Ct.addWidgetCssClass(this,"custom-shadow-applied");}}},getUnitType:function Bq(){return this.defn.t;},selectFromLayer:function Bk(D5,D8,D9,D7){var D2=this.parent.getTgtSelections(),D3=Bf.clone(this.model._multiSelectUnits)||[],D4=D3.indexOf(this.id)!==-1,D1=D5.indexOf(this.id)!==-1,EA=D8&&(D8.ctrlKey||D8.metaKey)&&(this.parent.isManualMode()||mstrApp.supportFeature(AQ.SUPPORT_AUTO_LAYOUT_MULTI_SELECTION)),D0=D5.length===1&&!EA,D6=this;D9=D9||function(){D6.selectVIUnit();};D7=D7||function(EC){D6.toggleBoxSelection(EC);if(EC){var EB=D6&&D6.parent,ED=EB.parent;if(D6.model.getVIComponent(B5.VIZ_CONTENT)!==ED){D6.model.setVizContentComponent(ED);}}};this.parent.infoWindowViewHandler(this);if(D2){this.selectVIUnit(true);}else{if(D0&&D1){D9();}else{if(D1&&!D4){D7(true);}else{if(!D1&&D4){D7(false);}}}}this._super();},renameFromLayer:function BX(D2,D0,D1){this.updateDisplayName(D2,D0,D1);},deleteFromLayer:function AO(){this.deleteSelf();},formatFromLayer:function AS(){this.launchFormatEditor();},showErrorMessageOverlay:function CL(D1,D2){var D0=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg"+(D2?" include-warning-icon":""),markupString:'<div class="{@cssClass}"><div class="error-content"><div class="text">'+D1+"</div></div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];this.showControlOverlay(D0);},getDeploymentErrorMsg:function BD(){return this.boxContent.getDeploymentErrorMsg&&this.boxContent.getDeploymentErrorMsg();},addDirtyKey:function Ar(D0){var D1=this.parent;if(D1&&D1.addDirtyKey){D1.addDirtyKey(D0);}},removeDirtyKey:function Br(D0){var D1=this.parent;if(D1&&D1.addDirtyKey){D1.removeDirtyKey(D0);}},getSkeletonMaskColor:function DE(){var D2=this.parent.getFormats(),D1=D2&&D2["background-color"],D0=D2&&D2["background-opacity"];if(!D1||D1==="transparent"){return this.defaultMaskColor;}if(D0&&parseInt(D0)<100){return this.defaultMaskColor;}return D1;},setWarningMessageOn:function CA(D1,D0){this.warningMessageNode.textContent=D1?D0:"";this.warningMessageNode.style.display=D1?"block":"none";},getSelfBoxConfig:function H(){var D1=this.k,D0=Aa.safeCall("parent.groupTreeLayoutConfig.getLeafNodeArray",this)()||[];return DP.filterOne(D0,function(D2){return D2.k===D1;});},updateButtonAlias:function Du(D5,D6,D0){var D7=this.boxContent.id,D2=this.model,D4=mstrmojo.all[D7].parent,D1=D4.defn.btn_flds&&D4.defn.btn_flds[D5],D8=D1&&D1.n,D3=function D3(EB){var D9=mstrmojo.all[D7].parent||{},EA=D9.defn.btn_flds&&D9.defn.btn_flds[D5];EA.btn_als=EB;D9.generateToolbar();D9.parent.selectVIUnit(D9,true);};if(!D1){return ;}D2.controller.cmdMgr.execute({execute:function(){this.submit([D2.getTitleButtonAliasUpdateAction(D4.k,D5,D8,D6)],{success:D3.bind(this,D6),},mstrmojo.DocDataService.SUPPRESS_DATA);},urInfo:{silent:true,undo:D3.bind(this,D0),redo:D3.bind(this,D6)}});},formatButton:function Ao(D3,D5,D1,D0){var D7=this.boxContent.id,D2=this.model,D4=mstrmojo.all[D7].parent||{},D8=function D8(EB){var D9=mstrmojo.all[D7].parent||{},EA=D9.defn.btn_flds[D5];AV.updateFormatBlock(EA.fmts,D3,EB);D9.generateToolbar();Ck.call(D9,false,EA.fmts,Ce.call(D9,EA));D9.parent.selectVIUnit(D9,true);},D6={k:D5,specialFieldType:3,defn:{t:DB.BUTTONFIELD,fgk:D4.k,tt:1,}};D2.controller.cmdMgr.execute({execute:function(){this.submit([D2.getUnitFormatAction(D6,1,DF(D3,D1))],{success:D8.bind(this,D1),},mstrmojo.DocDataService.SUPPRESS_DATA);},urInfo:{silent:true,undo:D8.bind(this,D0),redo:D8.bind(this,D1),}});},formatButtonProps:function Bp(D3,D7){var D5=this.defn&&this.defn.btn_props&&JSON.parse(this.defn.btn_props)||{},D1=D5[D3],D8=this.boxContent.id,D2=this.model,D0=mstrmojo.all[D8],D4=D0.parent;D6=function D6(EA){var D9=mstrmojo.all[D8].parent||{};D5[D3]=EA;D9.defn.btn_props=JSON.stringify(D5);D9.generateToolbar();D9.parent.selectVIUnit(D9,true);};D2.controller.cmdMgr.execute({execute:function(){D5[D3]=D7;this.submit([D2.getUnitFormatAction(D4,1,DF(Bm.BUTTON_PROPS,JSON.stringify(D5)))],{success:D6.bind(this,D7),},mstrmojo.DocDataService.SUPPRESS_DATA);},urInfo:{silent:true,undo:D6.bind(this,D1),redo:D6.bind(this,D7)}});},isInputControlBox:function DM(){return false;},needRebuildInputControlBox:function R(){var D0=this.isInputControlBox(),D1=!!(this.defn.tmaps&&this.defn.tmaps.length>0&&this.defn.tmaps[0].tf);return D0!==D1||(Aa.safeCall("boxContent.needUpdateDICStyle",this)());}});mstrmojo.vi.ui.rw.UnitContainer.__UNIT_TEST__={belongsToUnitContainer:Cy,isMultiSelectCopyDisabled:Cw};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.gm.GMLegend","mstrmojo.gm.GMUtility","mstrmojo.customviz.CustomVisEnums");var K=mstrmojo.array,F=mstrmojo.dom,N=mstrmojo.hash,H=mstrmojo.gm.GMLegend,O=mstrmojo.gm.GMUtility,I=mstrmojo.customviz.CustomVisEnums,U=I.ENUM_LEGEND_DATA_TYPE,A=I.ENUM_LEGEND_DISPLAY_MODE,J=I.ENUM_LEGEND_DISPLAY_MODE,L=I.ENUM_LEGEND_PROPS,G=I.ENUM_FONT_STYLE;var C=5,M=0.000001,D="clrSqrClr";var B={lgdFntClr:L.LEGEND_FONT_COLOR,lgdFntSz:L.LEGEND_FONT_SIZE,lgdFntFml:L.LEGEND_FONT_FAMILY,lgdFntStyle:[L.LEGEND_FONT_ITALIC,L.LEGEND_FONT_WEIGHT,L.LEGEND_FONT_LINE_THROUGH,L.LEGEND_FONT_UNDERLINE],lgdBgFillClr:L.LEGEND_BG_COLOR,lgdBgFillTrans:L.LEGEND_BG_FILL_TRANSPARENCY};var E={fontItalic:G.FS_ITALIC,fontWeight:G.FS_BOLD,fontUnderline:G.FS_UNDERLINE,fontLineThrough:G.FS_STRIKETHROUGH};function W(X){var Y=this.cachedDimension,a=Y&&Y.scale,b=Y&&Y.fixedWidth,Z=X.getLegendProperty(L.LEGEND_WIDTH_SCALE);if(isNaN(Z)){Z=undefined;}if(Z===undefined){return{scale:undefined,fixedWidth:undefined};}if((a===undefined)||(Math.abs(a-Z)>=M)){return{scale:Z,fixedWidth:undefined};}return{scale:a,fixedWidth:b};}function P(Z,X,a){var Y=N.clone(Z.getProperty(I.LEGEND_PROPERTY_SET))||{};if(X){Y[X]=a;}return Y;}function R(Y,X){if(!Y||!X){return ;}Y.fontWeight=(X[L.LEGEND_FONT_WEIGHT]?"bold":"normal");Y.fontStyle=(X[L.LEGEND_FONT_ITALIC]?"italic":"normal");if(X[L.LEGEND_FONT_LINE_THROUGH]&&X[L.LEGEND_FONT_UNDERLINE]){Y.textDecoration="line-through underline";}else{if(X[L.LEGEND_FONT_LINE_THROUGH]){Y.textDecoration="line-through";}else{if(X[L.LEGEND_FONT_UNDERLINE]){Y.textDecoration="underline";}else{Y.textDecoration="none";}}}}function S(){var Z=this.widget,Y={},X={};K.forEach([L.LEGEND_FONT_WEIGHT,L.LEGEND_FONT_ITALIC,L.LEGEND_FONT_UNDERLINE,L.LEGEND_FONT_LINE_THROUGH],function(a){X[a]=Z.getLegendProperty(a);});Y.backgroundColor=Z.getLegendProperty(L.LEGEND_BG_COLOR);Y.opacity=Z.getLegendProperty(L.LEGEND_BG_FILL_TRANSPARENCY)/100;Y.fontFamily=Z.getLegendProperty(L.LEGEND_FONT_FAMILY);Y.fontSize=Z.getLegendProperty(L.LEGEND_FONT_SIZE);Y.color=Z.getLegendProperty(L.LEGEND_FONT_COLOR);R(Y,X);return Y;}mstrmojo.customviz.CustomVisLegend=mstrmojo.declare(mstrmojo.gm.GMLegend,null,{scriptClass:"mstrmojo.customviz.CustomVisLegend",init:function(Y){this._super(Y);var X=this.widget.getLegendProperty(L.LEGEND_POSITION);this.currDockedPositionIdx=this.getLegendDockPosIdx(X);this.styles=S.call(this);this.cssClass="gm-legend";this._resetLegendSize();},postBuildRendering:function(){this._super();this._initListeners();this._toggleLegendDisplay(false);},renderLegend:function(){this._updateLegendStyle();this._measureLegendSize();this._updateLegend();},_updateLegendStyle:function(){if(this.canRenderLegend()){this.updateStyle(S.call(this));}},canRenderLegend:function(){return this.widget.canRenderLegend();},_getLegendWidth:function(){var X=this.width+this.padding;if(isNaN(X)){X=0;}return parseInt(X);},_resetLegendSize:function(){this.width=this.height=this.padding=0;},_isCollapsedMode:function(){var a=this.widget,Z=L.LEGEND_MODE,X,Y,b;if(F.isIPhone){X=a.getProperties()[I.LEGEND_PROPERTY_SET]||{};Y=X[Z];if(!Y){return true;}b=parseInt(Y);}else{b=a.getLegendProperty(Z);}return b===A.MINIMIZED;},_measureLegendSize:function(){var Z,c=this.widget,Y=c.getWidth(),X=c.getHeight(),b,a;if(!this.canRenderLegend()){this._resetLegendSize();}else{a=this.styles;H.applyHTML5Props(a);b=W.call(this,c);this.legendData=[{dataType:U.COLOR_BY,dataObj:this.colorByInfo},{dataType:U.SIZE_BY,dataObj:this.sizeByInfo}];Z=H.getLegendSize(this.legendData,b.scale,Y,X,a,this.needExtraPaddingTop4Legend());if(this._isCollapsedMode()||Z.autoCollapse){Z=H.getLegendSize4MinMode(this.colorByInfo,X,this.needExtraPaddingTop4Legend());}this.width=Z.width;this.height=Z.height;this.padding=C;this.rowHeights=Z.rowHeights;}},_updateLegend:function(){var X=this.canRenderLegend();this._toggleLegendDisplay(X);if(X&&this.width>0&&this.height>0){var Y=this.widget;this.domNode.style.width=this.width+"px";this.domNode.style.height=this.height+"px";this.updateContainerSize(Y.getWidth(),Y.getHeight());this.feedData(this.legendData,this._isCollapsedMode());this.updateAfterResize();}},readGlobalProperty:function(b){var a=this.widget,Y,Z;var X=B[b];if(b===D){Y=a.colorSqureIdentity;if(Y){Z={color:Y.decodedColor,isDefaultColor:Y.isDefaultColor};}else{Z={color:this.defaultGraphicColor,isDefaultColor:true};}}else{if(K.isArray(X)){Z=G.FS_NORMAL;K.forEach(X,function(c){if(a.getLegendProperty(c)){Z|=E[c];}});}else{Z=a.getLegendProperty(X);if(X.indexOf("Color")>0){Z=O.encodeColor(Z);}}}return Z;},writeGlobalProperty:function(d,e){var c=this.widget,X=B[d],Y=P(c),a,Z,b;if(d===D){Z=c.colorSqureIdentity;if(Z){c.updateColorMap(Z.comb,e);}return ;}if(K.isArray(X)){K.forEach(X,function(h){var g=Y[h],f=(e&E[h])>0;Y[h]=f;if(g!==f){a=h;}});}else{if(X.indexOf("Color")>0){e=O.decodeColor(e);}Y[X]=e;a=X;}b=c._wrapLegendCallbackConfig(I.LEGEND_PROPERTY_SET,a);c.savePropertyAndUpdateWidget(I.LEGEND_PROPERTY_SET,Y,b);},configureLegendPopup:function(X,Y){X.hostId=this.widget.id;X.hostElement=Y;},_initListeners:function(){var X=this.id;this.resizeListener=this.attachEventListener("gm-legend-resized",X,function(Y){this._onLegendResized(Y.position);});this.clickListener=this.attachEventListener("gm-legend-clicked",X,function(Y){this._onLegendClicked(Y);});this.contextMenuHandler=F.attachMarkupEvent(X,this.domNode,"contextmenu");},_unSubscribeListeners:function(){if(this.resizeListener){this.resizeListener.clear();delete this.resizeListener;}if(this.clickListener){this.clickListener.clear();delete this.clickListener;}if(this.contextMenuHandler){F.detachEvent(this.domNode,"contextmenu",this.contextMenuHandler);delete this.contextMenuHandler;}},oncontextmenu:function(X){if(this.widget._isConsumeMode()){F.stopPropogation(window,X);F.preventDefault(window,X);return false;}this.handleRMCOnLegend(X);this.widget.openFormatPanelByProperty(I.LEGEND_PROPERTY_SET);},_onLegendResized:function(b){var Z=this.widget,Y=Z.getLegendProperty(L.LEGEND_WIDTH_SCALE)||1,a=this.width+b,X=(a)/(this.width/Y);this.cachedDimension={scale:X,fixedWidth:a,resized:true};Z._cacheLegendDimension(this.cachedDimension);Z.savePropertyAndUpdateWidget(I.LEGEND_PROPERTY_SET,P(Z,L.LEGEND_WIDTH_SCALE,X));},_onLegendClicked:function(X){var Z=this.widget,Y=X.action,a={close:{prop:L.SHOW_LEGEND,val:false},minimize:{prop:L.LEGEND_MODE,val:J.MINIMIZED},restore:{prop:L.LEGEND_MODE,val:J.RESTORED}}[Y];Z.savePropertyAndUpdateWidget(I.LEGEND_PROPERTY_SET,P(Z,a.prop,a.val));},_onLegendDropped:function(X){var Z=this.widget,Y={callback:mstrmojo.emptyFn,clientUndoRedoCallback:function(b){var a=this.legend,d=L.LEGEND_POSITION,c;if(a){c=b&&b[d];if(c===undefined){c=this.getLegendProperty(d);}else{c=parseInt(c);}a.updateLegendSlot(c);}}};Z.savePropertyAndUpdateWidget(I.LEGEND_PROPERTY_SET,P(Z,L.LEGEND_POSITION,X),Y);},_getLegendPosition:function(){return this.getLegendDockPosByIdx(this.currDockedPositionIdx);},_toggleLegendDisplay:function(X){var Y=this.domNode;if(Y&&Y.style){Y.style.display=X?"block":"none";}},unrender:function Q(X){this._unSubscribeListeners();this._super(X);}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.ArrowUtils","mstrmojo.VisEnum","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo._VizSelectionHelper","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.Button","mstrmojo.models.template.DataInterface","mstrmojo.models.template.BinaryDataInterface","mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.hash","mstrmojo.gm.GMUtility","mstrmojo.func","mstrmojo.util.color","mstrmojo._colorPalette","mstrmojo.CustomVisUtility","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._SupportPagination","mstrmojo._SupportIncrementalFetch","mstrmojo.vi.ui.rw._XtabIncrementalFetchControl","mstrmojo.PerformanceLogOutput","mstrmojo.vi.enums.EnumFeatures","mstrmojo._TouchGestures","mstrmojo.vi.viz.EnumVizStyles");mstrmojo.requiresClsP("mstrmojo.customviz","_HasCustomContextMenu","GraphicModel","_TooltipHelper","CustomVisEnums","CustomVisLegend","_HasExtraSelectionInfo","_SupportCustomVizBrushesAndHighlights");var $DOM=mstrmojo.dom,$ARR=mstrmojo.array,$DSSOBJ_TYPES=mstrmojo.chart.model.enums.EnumDSSObjectType,$HASH=mstrmojo.hash,$NWB=mstrmojo.Button.newWebButton,$FUNC=mstrmojo.func,$COMPOS=$FUNC.composite,$FNEMPTY=mstrmojo.emptyFn,$UTIL=mstrmojo.VisUtility,$ARROW_UTILS=mstrmojo.ArrowUtils,$VIS_ENUM=mstrmojo.VisEnum,$ERROR_TYPE=$VIS_ENUM.SERVER_JSON_ERROR_TYPE,$CLRUTIL=mstrmojo.util.color,$GM_UTIL=mstrmojo.gm.GMUtility,$CUSTOM_VIS_UTIL=mstrmojo.CustomVisUtility,CustomVisLegend=mstrmojo.customviz.CustomVisLegend,$CustomVisEnums=mstrmojo.customviz.CustomVisEnums,$ENUM_LEGEND_PROPS=$CustomVisEnums.ENUM_LEGEND_PROPS,$DEFAULT_LEGEND_PROP_VALUE=$CustomVisEnums.DEFAULT_LEGEND_PROP_VALUE,$ENUM_LEGEND_PROPERTY_TYPE=$CustomVisEnums.ENUM_LEGEND_PROPERTY_TYPE,$LEGEND_FORMATTING_PROPERTY=$CustomVisEnums.ENUM_LEGEND_FORMATTING_PROPERTY,$LOG=$CUSTOM_VIS_UTIL.log,$FEATURES=mstrmojo.vi.enums.EnumFeatures,$PerfLog=mstrmojo.PerformanceLogOutput,$EnumVizStyles=mstrmojo.vi.viz.EnumVizStyles;var DARK_THEME_ID="F1FED8AC42B57AC1B0E9518FED0F89D6",DEFAULT_THEME_ID="0C2437E3440A676379C06C8C7C6E2AA6";var DEFAULT_GRAPHIC_COLOR="#436CD3";var ATTACHED_EVENTS=["mousemove","click","contextmenu"];var FILTER_TYPE={SHARED:0};var EXTERNAL_LIBS={D3:"d3"};const ENUM_BINARY_SELECTION_TYPE={ATTRIBUTE:0,METRIC:1,};const ENUM_BINARY_COLORBY_TYPE={ATTRIBUTE:0,METRIC:1,};var MARKUP_STRING_WITH_LEGEND='<div id="{@id}" class="custom-vis-layout {@cssClass}" style="position:absolute;font-size:8pt;width:{@width}px;height:{@height}px;z-index:{@zIndex};{@viewportCssText}" mstrAttach:contextmenu,click,mousemove><div class="canvasContainer"></div><div></div></div>',MARKUP_SLOTS_WITH_LEGEND={canvasContainer:function(){return this.domNode.firstChild;},legendPlaceHolder:function(){return this.domNode.lastChild;}};function setUserDefinedError(errorMsg){var msg=errorMsg||this.errorMessage+" "+this.errorDetails;this.setError(msg);}function toggleError(show,errorMsg){setUserDefinedError.call(this,errorMsg);this.raiseEvent({name:"toggleCtrlOverlay",visible:show,controls:this.getVisEmptyMsgControls()});}function toggleLoading(show){var controls=[{scriptClass:"mstrmojo.Container",cssClass:"vis-loading",markupString:'<div class="{@cssClass}"><div class="loading-cell"><span></span><p>{@msg}</p></div></div>',msg:mstrmojo.desc(16650,"Rendering Visualization...")}];this.raiseEvent({name:"toggleCtrlOverlay",visible:show,controls:controls});}function isInsightLineChart(vizName){return vizName&&vizName.includes($EnumVizStyles.INSIGHT_LINE_CHART);}function isImageEnhancedKPI(){return this.isImageEnhancedKPI;}function isMobileLibrary(){return(mstrmojo.dom&&mstrmojo.dom.isAndroidLibrary)||(mstrApp&&mstrApp.isDisplayOnMobile);}function hideFilterMenuOption(){var vizContainer=this.parent,titleBar=vizContainer&&vizContainer.titleBar,toolbarCfg=titleBar&&titleBar.getMenuConfig();if(!toolbarCfg){return ;}toolbarCfg.menus=$ARR.filter(toolbarCfg.menus,function(item){return item.cls!=="uaf";});}function openAndRefreshFormatPanel(){var docModel=this.getDocModel(),docCtrl=$HASH.walk("rootCtrl.docCtrl",mstrApp);if(docModel&&docCtrl&&(typeof docCtrl.selectViPanel==="function")){docCtrl.selectViPanel("propertiesPanel");docModel.selectVIUnit(this.parent.id,true);}}function getSetPropertiesAction(){var modelData=this.model.data,xmlDom,xmlString;var convertJSONToXML=function(object,tagName){if(object===undefined||object===null){return ;}var ret=xmlDom.createElement(tagName),key;if(object instanceof Object){for(key in object){if(object.hasOwnProperty(key)){var child=convertJSONToXML(object[key],key);if(child){ret.appendChild(child);}}}}else{ret.setAttribute("value",object);}return ret;},encodeXMLString=function(xmlString){return xmlString.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;");};xmlDom=(new DOMParser()).parseFromString("<props><widgetProps><fmt></fmt></widgetProps></props>","text/xml");xmlDom.firstChild.firstChild.firstChild.appendChild(convertJSONToXML(this.getProperties(),"cvp"));xmlString=(new XMLSerializer()).serializeToString(xmlDom);return[{act:"setProperty",nodeKey:modelData.k,prs:"FormattingWidget",pri:4,v:encodeXMLString(xmlString)}];}function isValidProperties(properties,level){var isObject=typeof properties==="object";if((level===0&&!isObject)||(level===2&&isObject)){return false;}for(var key in properties){var value=properties[key];if(typeof value==="object"&&!isValidProperties(value,level+1)){return false;}}return true;}function reserveExternalLibrarys(noConflictLibs){var _noConflictLibs=this._noConflictLibs,D3=EXTERNAL_LIBS.D3;if(!_noConflictLibs){_noConflictLibs=this._noConflictLibs={};}$ARR.forEach(noConflictLibs,function(lib){if(!_noConflictLibs[D3]){switch(lib){case D3:_noConflictLibs[D3]=window.d3;return ;}}});}function getNoConflictLibraryReference(noConflictLibraries){var code="",D3=EXTERNAL_LIBS.D3;$ARR.forEach(noConflictLibraries,function(lib){switch(lib){case D3:code+="var d3 = this._noConflictLibs['"+D3+"'];";return ;}});return code;}function getColorByAttsNames(colorByItems){var gts=$HASH.walk("dataInterface.data.gts",this)||{},units=(gts.row||[]).concat(gts.col||[]),names="",index,item;$ARR.forEach(colorByItems,function(itm){index=$ARR.find(units,"id",itm.id);if(index>-1){item=units[index];names+=(item.dn||item.n)+" ";}});if(names.length>0){names=names.substring(0,names.length-1);}return names;}function getColorByInfo(){var zonesModel=this.zonesModel,colorByAttrs=zonesModel&&zonesModel.getColorByAttributes(),colorByMetric=zonesModel&&zonesModel.getColorByMetric(),index,colorByLabel="",colorByItems=[];if(colorByAttrs&&colorByAttrs.length>0){var colorByAttrInfo=this.getColorByAttInfo(colorByAttrs),element,singleItem;colorByLabel=getColorByAttsNames.call(this,colorByAttrs);for(index=1;index<colorByAttrInfo.length;index++){element=colorByAttrInfo[index];singleItem={};$HASH.copyProps(["color","encodedColor","isDefaultColor","opacity","comb"],element,singleItem);singleItem.decodedColor=element.color;singleItem.label=element.text;singleItem.token={elements:element.colorByElementIDs,levels:element.colorByAttributeIDs,types:element.colorByTypes};colorByItems.push(singleItem);}return{item:colorByLabel,elements:colorByItems};}if(colorByMetric){var colorByMetricId=colorByMetric.id,modelData=$HASH.walk("dataInterface.data",this),gsi=modelData&&modelData.gsi,mx=gsi&&gsi.mx,thresholds=gsi&&gsi.thresholds,cbMetric,colorThresholds,rankMode,nfs,fs,defaultColor;index=$ARR.find(mx,"did",colorByMetricId);if(colorByMetricId&&thresholds&&index>-1){cbMetric=mx[index];colorThresholds=thresholds[colorByMetricId];if(colorThresholds&&colorThresholds.length>0){rankMode=$UTIL.getRankMode(colorThresholds);nfs=$UTIL.getNumberFormat(modelData,index);fs=nfs?$UTIL.getColorByFormatStr(nfs.replace(/\'/g,'"'),rankMode):"";defaultColor=$CLRUTIL.getCSSColorString(DEFAULT_GRAPHIC_COLOR);colorByItems=$UTIL.getColorByItems(colorThresholds,rankMode,cbMetric.max,cbMetric.min,cbMetric.cnt,fs,defaultColor);colorByLabel=$UTIL.getColorByTitle(cbMetric.n,rankMode);return{item:colorByLabel,elements:colorByItems};}}}}function getSizeByInfo(){var zonesModel=this.zonesModel,sizeByMetric=zonesModel&&zonesModel.getSizeByMetric(),useAbsolute=zonesModel&&zonesModel.useAbsoluteSizeByValue(),row,col,maxFormatVal,minFormatVal,minValue=Infinity,maxValue=useAbsolute?0:-Infinity,sizeByLabel="",caseFlag=0,sizeByItems=[];if(sizeByMetric){var sizeByMetricId=sizeByMetric.id,modelData=$HASH.walk("dataInterface.data",this),gsi=modelData&&modelData.gsi,gvs=modelData&&modelData.gvs,mx=gsi&&gsi.mx,items=gvs&&gvs.items,itemsNum=(items&&items.length)||0,value,sizeByVal;col=$ARR.find(mx,"did",sizeByMetricId);if(sizeByMetricId&&col>-1){sizeByLabel=useAbsolute?$UTIL.getAbsoluteSizeByTitle(mx[col].n):mx[col].n;for(row=0;row<itemsNum;row++){value=items[row].items[col];sizeByVal=useAbsolute?Math.abs(value.rv):value.rv;if(sizeByVal>maxValue){maxValue=sizeByVal;maxFormatVal=value.v;}if(sizeByVal<minValue){minValue=sizeByVal;minFormatVal=value.v;}}if(Math.abs(maxValue-minValue)<0.000001){caseFlag=2;sizeByItems=[{diameter:12,sign:"=",v:minFormatVal}];}else{sizeByItems.push({sign:"=",v:maxFormatVal});sizeByItems.push({sign:"=",v:minFormatVal});}return{item:sizeByLabel,elements:sizeByItems,caseFlag:caseFlag};}}}function transformLegendProperty(propName,propVal){if(propVal===undefined||propVal===null){return propVal;}if($ENUM_LEGEND_PROPERTY_TYPE[propName]==="Boolean"){return $CUSTOM_VIS_UTIL.parseBoolean(propVal);}if($ENUM_LEGEND_PROPERTY_TYPE[propName]==="Integer"){return parseInt(propVal);}if($ENUM_LEGEND_PROPERTY_TYPE[propName]==="Float"){return parseFloat(propVal);}return propVal;}function getBuiltInLegendProperties(){var themeName=this.isDefaultTheme()?"defaultTheme":"classicTheme";return $DEFAULT_LEGEND_PROP_VALUE[themeName];}var prevCache={};function genLibConflictChecker(scriptClass){var checkList={d3:function(prev,curr){return prev.version!==curr.version;}};return function(){var arr=[],global=mstrmojo.global;$HASH.forEach(checkList,function(fn,k){if(prevCache[k]===undefined&&global[k]!==undefined){prevCache[k]=[scriptClass,$HASH.copy(global[k])];}else{if(prevCache[k]!==undefined&&(global[k]===undefined||fn(prevCache[k][1],global[k]))){arr.push([k,prevCache[k][0],scriptClass]);}}});if(arr.length>0){console.log("lib conflict: ",arr);}};}mstrmojo.CustomVisBase=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.vi.ui.rw._XtabDE,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo._VizSelectionHelper,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo._colorPalette,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.customviz._HasCustomContextMenu,mstrmojo.customviz._HasExtraSelectionInfo,mstrmojo.customviz._SupportCustomVizBrushesAndHighlights,mstrmojo.customviz._TooltipHelper,mstrmojo._SupportPagination,mstrmojo._SupportIncrementalFetch,mstrmojo.vi.ui.rw._XtabIncrementalFetchControl],{scriptClass:"mstrmojo.CustomVisBase",plotted:false,markupString:'<div id="{@id}" class="custom-vis-layout {@cssClass}" style="position:absolute;font-size:8pt;width:{@width}px;height:{@height}px;z-index:{@zIndex};{@viewportCssText}" mstrAttach:contextmenu,click,mousemove></div>',supportPagination:false,supportIncrementalFetch:false,markupSlots:{containerNode:function(){return this.domNode;},viewport:function(){return this.domNode;}},formatHandlers:{viewport:["background-color","left","top"]},bindings:{gridData:function(){return this.model.data;}},externalLibraries:null,cssFiles:null,errorMessage:"There is either not enough data to display the visualization or an error occurred while executing the visualization.",errorDetails:"",isDynamicTooltip:true,tooltipWin:null,tooltipObjsInOrder:[],additionalAttrIds:[],reuseDOMNode:false,noConflictLibraries:null,enableLegend:false,isCustomVis:true,disableChangeVisualization:false,disableDataFunctionality:false,disableCopyMoveVisualization:false,dataInterface:null,binaryDataInterface:null,hideUseAsFilterMenuItem:undefined,graphicModels:[],graphicModelsNA:false,noHighlightAfterKeepOnlyExcludeDrill:false,normalizedIdCache:{},isBinaryData:false,binaryData:null,isBinaryDataInitialLoadStalled:false,isBinaryDataInitiallyLoaded:false,suppressRefreshOnResize:false,splitDomNodes:function(){if(this.enableLegend){this.markupString=MARKUP_STRING_WITH_LEGEND;$HASH.copy(MARKUP_SLOTS_WITH_LEGEND,this.markupSlots);}},init:function init(props){this.initLog();this.addLog("Init Started");this.splitDomNodes();if(window.mstrApp&&window.mstrApp.isVI){var viewportHandler=this.formatHandlers.viewport;if(viewportHandler){var idx=$ARR.indexOf(viewportHandler,"background-color");if(idx>-1){viewportHandler.splice(idx,1);}}}this._super(props);var cssFiles=this.cssFiles;if(cssFiles){mstrmojo.insertCSSLinks(cssFiles);}this.hideUseAsFilterMenuItem=true;this.graphicModels=[];this.graphicModelsNA=false;this.noHighlightAfterKeepOnlyExcludeDrill=false;this.initTooltip();const visName=$HASH.walk("node.data.vis.vn",props);this.isBinaryData=$UTIL.isBinaryDataVisualization(visName);this.addLog("Init Finished");},initLog:function initLog(){this.customVizLogs=[];},addLog:function addLog(msg){const t=new Date();const log={msg:msg,t:t.getTime(),};this.customVizLogs.push(log);if(this.customVizLogs.length>100){this.customVizLogs.shift();}},printLog:function printLog(){if(this.customVizLogs.length<2){return ;}for(var i=1;i<this.customVizLogs.length;i++){const prev=this.customVizLogs[i-1];const curr=this.customVizLogs[i];const elapsed=curr.t-prev.t;console.log(prev.msg+"  "+curr.msg+": "+elapsed+" ms");}},destroy:function destroy(){if(this.dataChangedListener){this.getDocModel().detachEventListener(this.dataChangedListener);this.dataChangedListener=null;}if(this.messageReadyListener){this.getDocModel().detachEventListener(this.messageReadyListener);this.messageReadyListener=null;}if(this.initialMessageReadyListener){this.getDocModel().detachEventListener(this.initialMessageReadyListener);this.initialMessageReadyListener=null;}if(this.binarySelectionChangedListener){this.getDocModel().detachEventListener(this.binarySelectionChangedListener);this.binarySelectionChangedListener=null;}if(this.itCheckLoading){clearInterval(this.itCheckLoading);this.itCheckLoading=null;}this._super();},getColorByDropZone:function getColorByDropZone(){var zonesModel=this.zonesModel;return zonesModel&&zonesModel.getColorByAttributes();},refresh:function refresh(){if(!this.isBinaryData||!this.binaryData){this._super();return ;}var canRefresh=true;if(this.suppressRefreshOnResize){canRefresh=this.refreshForBinaryDataUpdate;}if(canRefresh){this.refreshForBinaryDataUpdate=false;this._super();}},isUnderFilterPanelStack:function isUnderFilterPanelStack(nodeKey){const docModel=this.getDocModel();if(!docModel){return false;}var res=false;try{const layoutKey=docModel.getLayoutKeyByUnitKey(nodeKey);const filterPanelKey=docModel.getFilterPanelKey(layoutKey);const filterPanel=docModel.getPanel(filterPanelKey);const children=$HASH.walk("children",filterPanel);res=$ARR.some(children,function(child){return child.k===nodeKey;});}catch(e){res=false;}return res;},isInPartialUpdateKeys:function isInPartialUpdateKeys(evt){const pukeysStr=$HASH.walk("res.pukeys",evt);if(!pukeysStr){return false;}const pukeys=pukeysStr.split("\u001E");if(pukeys.indexOf(this.getNodeKey())>=0){return true;}return false;},isCurrentWidgetAffected:function isCurrentWidgetAffected(evt){if(!evt){return false;}const actions=evt.actions;if(!actions||actions.length===0){return this.isInPartialUpdateKeys(evt);}const firstAction=actions[0];if(firstAction.act==="addNewPanelStack"){return false;}var isMayAffectedActionIndex=[];var isChangingVisFilterTypeUnderFilterPanel=false;var me=this;$ARR.forEach(actions,function(action,index){if(action.act==="format"||action.act==="setControlSource"&&action.unitType===10||action.act==="changeGridDisplayMode"&&action.nodeKey!==me.getNodeKey()||action.act==="updateTemplate"&&action.keyContext!==me.getNodeKey()){return ;}if(action.act==="changeGridDisplayMode"&&me.isUnderFilterPanelStack(action.nodeKey)){isChangingVisFilterTypeUnderFilterPanel=true;return false;}isMayAffectedActionIndex.push(index);});if(isMayAffectedActionIndex.length===0||isChangingVisFilterTypeUnderFilterPanel){return false;}if(this.isInPartialUpdateKeys(evt)){return true;}var me=this;var isMayAffected=false;$ARR.forEach(isMayAffectedActionIndex,function(actionIndex){const action=actions[actionIndex];if(action.act==="removeControlTarget"&&action.tgtKey){var cur=me;while(cur&&cur.k!==action.tgtKey){cur=cur.parent;}if(cur&&cur.k===action.tgtKey){isMayAffected=true;return false;}}});return isMayAffected;},onmodelChange:function onmodelChange(evt){this._super(evt);if(!this.isBinaryData){return ;}const vizId=this.id;if(!this.dataChangedListener){this.dataChangedListener=this.getDocModel().attachEventListener("gjsSuccessWithPUKeys",this.id,function(evt){const me=mstrmojo.all[vizId];if(!me){return ;}if(!me.isCurrentWidgetAffected(evt)){return ;}this.binaryData=null;this.binaryDataInterface=null;});}if(!this.messageReadyListener){this.messageReadyListener=this.getDocModel().attachEventListener("messageReady",this.id,function(evt){const viz=mstrmojo.all[vizId];if(!viz){return ;}if(evt.failed){viz.checkMessageReadyFailed=true;return ;}if(viz.isMessageNotReady){viz.isMessageNotReady=false;viz.clearError();viz.loadBinaryData();}});}if(!this.initialMessageReadyListener&&!this.readyToFetchBinaryData()){this.initialMessageReadyListener=this.getDocModel().attachEventListener("vizStatusChange",this.id,function(){const viz=mstrmojo.all[vizId];if(!viz){return ;}if(viz.binaryData||viz.readyToFetchBinaryData()){viz.getDocModel().detachEventListener(this.initialMessageReadyListener);viz.initialMessageReadyListener=null;}if(!viz.binaryData&&viz.readyToFetchBinaryData()){viz.loadBinaryData();}});}if(!this.binarySelectionChangedListener){this.binarySelectionChangedListener=this.getDocModel().attachEventListener("binarySelectionChanged",this.id,function(evt){const viz=mstrmojo.all[vizId];const tgtKeys=evt&&evt.tgtKeys||[];if(!viz||tgtKeys.length===0){return ;}const key=viz.getNodeKey();if(tgtKeys.includes(key)&&typeof viz.binarySelectionChangedHandler==="function"){viz.binarySelectionChangedHandler(evt.selections);}});}},readyToFetchBinaryData:function readyToFetchBinaryData(){const data=$HASH.walk("node.data",this);if(!data||!data.k){return false;}const isPauseMode=this.excludeData;return !isPauseMode&&(data.egt===undefined&&data.eg===undefined);},isServerSideUsingBinaryData:function isServerSideUsingBinaryData(){return $HASH.walk("node.data.vis.rbr",this);},fetchRestApi:function fetchRestApi(api,isProjectLevel,options,noParse){if(!options){options={};}if(!options.headers){options.headers={};}if(isProjectLevel){options.headers["X-MSTR-ProjectID"]=mstrApp.projectId;}return mstrApp.fetchRestApi(api,noParse,options);},loadBinaryData:function loadBinaryData(){if(!this.isBinaryData){return ;}if(!mstrApp.supportFeature||!mstrApp.supportFeature($FEATURES.VIZ_BINARY_DATA)){this.displayError(mstrmojo.desc(29045,"Binary data Visualization is not supported on this platform."));return ;}const isOldViz=!this.isServerSideUsingBinaryData();if(isOldViz){this.displayError(mstrmojo.desc(29046,"Old visualization does not support binary data. Please re-create the visualization to use binary data."));return ;}if(!window.fflate||!window.Arrow||!mstrApp.fetchRestApi){console.error("Required libraries or APIs are not available");return ;}if(this.readyToFetchBinaryData()&&!this.isLoadingBinaryData){this.isLoadingBinaryData=true;mstrApp.showWait();this.addLog("Load Binary Data Started");const me=this;this.fetchDataWithRetry().then(function(data){const decompressedStream=me.createGunzipReadableStream(data);return me.parseBinaryData(decompressedStream);}).then(function(table){me.addLog("Load Binary Data Finished");me.isLoadingBinaryData=false;mstrApp.hideWait();me.binaryData=table;me.cleanupOnBinaryDataUpdate();me.update();me.refreshForBinaryDataUpdate=true;me.refresh();},function(error){me.isLoadingBinaryData=false;mstrApp.hideWait();me.displayError(error.message);});}},fetchDataWithRetry:function fetchDataWithRetry(){const me=this;const docModel=this.getDocModel();const data=this.node.data;const dashboardId=docModel.oid;const instanceId=docModel.mid;const chapterKey=docModel.getCurrentLayoutKey();const visualizationKey=data.k;const api="/openSemanticLayer/dossiers/"+dashboardId+"/instances/"+instanceId+"/chapters/"+chapterKey+"/visualizations/"+visualizationKey+"?limit=-1&cacheLatencyThreshold=0";return this.fetchRestApi(api,true,{useParallelFetch:false,},true).then(function(res){if(res.status===202){return me.pollStatusAndFetchData();}const stream=res.body;if(!stream){throw new Error("No response body");}return stream;},function(res){if(res&&res.iServerErrorCode===-2147467261){me.isMessageNotReady=true;throw new Error(mstrmojo.desc(15105,"Loading data..."));}throw new Error(mstrmojo.desc(29075,"Error fetching data: ")+(res&&res.message?res.message:mstrmojo.desc(13687,"Unknown error")));});},pollStatusAndFetchData:function pollStatusAndFetchData(){const viz=this;return this.pollStatus().then(function(){return viz.fetchDataWithRetry();},function(error){viz.getDocModel().raiseEvent({name:"messageReady",failed:true});throw error;});},pollStatus:function pollStatus(){const viz=this;const docModel=viz.getDocModel();const dashboardId=docModel.oid;const instanceId=docModel.mid;const api="/dossiers/"+dashboardId+"/instances/"+instanceId+"/executionStatus";return this.fetchRestApi(api,true,{},true).then(function(res){if(!res||!res.ok){throw new Error("Error fetching status: "+(res&&res.message?res.message:"Unknown error"));}if(res&&res.status===200){return res.json().then(function(jsonBody){if(jsonBody&&jsonBody.execution_status===1){viz.getDocModel().raiseEvent({name:"messageReady",});}else{return viz.pollStatus();}},function(error){throw new Error("Error parsing status response: "+error.message);});}return viz.pollStatus();},function(error){throw new Error("Error polling status: "+error.message);});},createGunzipReadableStream:function createGunzipReadableStream(compressedStream){const reader=compressedStream.getReader();return new ReadableStream({start:function start(controller){const gunzip=new fflate.Gunzip();gunzip.ondata=function(chunk,isFinal){controller.enqueue(chunk);if(isFinal){controller.close();}};function process(props){const done=props.done;const value=props.value;if(done){try{gunzip.push(new Uint8Array(0),true);}catch(e){}return ;}gunzip.push(value);return reader.read().then(process);}reader.read().then(process,function(err){controller.error(err);});}});},parseBinaryData:function parseBinaryData(decompressedStream){return Arrow.RecordBatchReader.from(decompressedStream).then(function(reader){$ARROW_UTILS.alertMultipleBatches(reader);return reader.readAll();}).then(function(batches){const batch=batches&&batches[0];return new Arrow.Table(batch);},function(error){console.error("Error parsing binary data:",error);throw error;});},getFonts:function(){if(!this.enableLegend){return[];}return[{name:this.getLegendProperty($ENUM_LEGEND_PROPS.LEGEND_FONT_FAMILY),isItalic:this.getLegendProperty($ENUM_LEGEND_PROPS.LEGEND_FONT_ITALIC),isBold:this.getLegendProperty($ENUM_LEGEND_PROPS.LEGEND_FONT_WEIGHT)}];},plot:mstrmojo.emptyFn,getFilterType:function getFilterType(){return this.defn.ins||FILTER_TYPE.SHARED;},destroyLegend:function(){var legend=this.legend;if(this.enableLegend&&legend&&typeof legend.destroy==="function"){legend.destroy();this.legend=undefined;}},unrender:function unrender(ignoreDom){if(this.defn){this.clearCache();}this.destroyLegend();this._super(ignoreDom);},displayError:function displayError(errorMsg){if(!this.destroyed){toggleError.call(this,true,errorMsg);}this.renderFinished=true;},renderVisualization:function renderVisualization(){if(this.graphicModelsNA||this.excludeData||this.gridData&&this.gridData.egt===$ERROR_TYPE.DATA_NOT_READY){this.plotted=false;return ;}if(!this.isBinaryData&&this.isServerSideUsingBinaryData()){this.displayError(mstrmojo.desc(29063,"Old visualization needs binary data. Please re-create the visualization to use JSON data."));return ;}function doRender(){try{this.renderFinished=false;var sub=this.attachEventListener("renderFinished",this.id,function(){var me=this;setTimeout(function(){me.renderFinished=true;},0);me.detachEventListener(sub);});toggleLoading.call(this,false);this._renderLegend();this._positionCanvasContainer();$PerfLog.visPrint("plot custom viz started");var timerid_plotCustomViz=$PerfLog.startTimer({functionName:"CustomVizBase.plot: ",purpose:"plot the custom viz and update highlight"});if(this.isBinaryData&&!this.binaryDataInterface){const div=document.createElement("div");div.textContent=mstrmojo.desc(15105,"Loading data...");this.domNode.appendChild(div);}else{var noConflictLibraries=this.noConflictLibraries;if(noConflictLibraries&&noConflictLibraries.length>0){var codeString=this.plot.toString();eval(getNoConflictLibraryReference(noConflictLibraries)+codeString.substring(codeString.indexOf("{")+1,codeString.lastIndexOf("}")));}else{this.plot();}}this.updateHighlight();this.plotted=true;$PerfLog.endTimer(timerid_plotCustomViz);$PerfLog.visPrint("plot custom viz ended");}catch(e){console.error(e);this.displayError(e.message);this.plotted=false;}}toggleLoading.call(this,true);this.loadFonts(this.getFonts(),{success:doRender.bind(this),failure:doRender.bind(this)});},setForceReload:function(externalLibs){return externalLibs.map(function(lib){var l=$HASH.copy(lib,{});l.forceReload=!!lib.forceReload;return l;});},getErrorTypeForControls:function getErrorTypeForControls(){const res=this._super();if(!this.isBinaryData){return res;}if(this.isDataNotReady()){return $ERROR_TYPE.DATA_NOT_READY;}return res;},isDataNotReady:function isDataNotReady(){const res=this._super();if(!this.isBinaryData){return res;}if(res){return res;}return !this.isBinaryDataInitialLoadCompleted()&&this.isLoadingBinaryData;},postBuildRendering:function postBuildRendering(){var me=this,libraries,res,sub;if(me.waitingForData){return ;}sub=me.listenToUpdateColorMap(function(){me.legendColorByInfo=getColorByInfo.call(me);me.render();if(sub&&me.detachUpdateColorMapListener instanceof Function){me.detachUpdateColorMapListener(sub);}});hideFilterMenuOption.call(me);if(this.isEmpty()){if($UTIL.isOnExpressMode()){$UTIL.renderWidgetErrorRSD(this,$HASH.walk("model.data.eg",this),ATTACHED_EVENTS);}else{this._super();}this.hasRendered=true;return false;}var exp=this.getExp(),gtsModel=this.getRowsAndCols();$UTIL.modifyScExp(exp,gtsModel,this.model,this.normalizedIdCache);res=this._super();if(!this.externalLibraries){libraries=undefined;}else{if(!$ARR.isArray(this.externalLibraries)){console.error("externalLibraries should be an array: ",this.externalLibraries);libraries=undefined;}else{libraries=this.setForceReload(this.externalLibraries);}}this._initLegend();this.renderFinished=false;if(libraries){var url,arr=this.scriptClass&&this.scriptClass.split("."),pluginName=arr&&arr[2],prefix;if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode()&&mstrApp.dossierServerBaseUrl&&mstrConfig.dossierServerPluginNames.indexOf(pluginName)>-1){prefix=mstrApp.dossierServerBaseUrl+"plugins/";$ARR.forEach(libraries,function(library,index){url=library.url;if(url.substr(0,7)==="file://"){url=url.substr(7);}if(url.substr(0,4)!=="http"&&url.substr(0,2)!=="//"){libraries[index].url=prefix+url;}});}toggleLoading.call(me,true);var libConflict=genLibConflictChecker(this.scriptClass);this.requiresExternalScripts(libraries,function(){libConflict();if(me.destroyed){return ;}toggleLoading.call(me,false);var noConflictLibraries=me.noConflictLibraries;if(noConflictLibraries&&noConflictLibraries.length>0){reserveExternalLibrarys.call(me,noConflictLibraries);}me.renderVisualization();});}else{me.renderVisualization();}return res;},getCanvasContainerSize:function(){var legend=this.legend,width=this.getWidth(),height=this.getHeight(),legendWidth;if(legend&&this.canRenderLegend()){legendWidth=legend._getLegendWidth();width-=legendWidth;}return{width:width,height:height};},canRenderLegend:function(){if(!this.enableLegend){return false;}var showLegend=this.getLegendProperty($ENUM_LEGEND_PROPS.SHOW_LEGEND);return showLegend&&this.hasColorByOrSizeBy();},_initLegend:function(){if(!this.enableLegend){return ;}this.legend=this.addDisposable(new CustomVisLegend({widget:this,placeholder:this.legendPlaceHolder,defaultGraphicColor:DEFAULT_GRAPHIC_COLOR,colorByInfo:this.legendColorByInfo,sizeByInfo:this.legendSizeByInfo,cachedDimension:this._legendDimension}));this.legend.render();},_renderLegend:function(){if(this.enableLegend&&this.legend){this.legend.renderLegend();}},_cacheLegendDimension:function(dimension){this._legendDimension=dimension;},_wrapLegendCallbackConfig:function(propName,subPropName,config){if(propName===$CustomVisEnums.LEGEND_PROPERTY_SET&&$LEGEND_FORMATTING_PROPERTY.indexOf(subPropName)>=0){var callback=function(){var legend=this.legend;if(legend){legend._updateLegendStyle();}};return{callback:callback,clientUndoRedoCallback:callback};}return config;},_positionCanvasContainer:function(legendPosition){var canvasContainer=this.canvasContainer,containerSize=this.getCanvasContainerSize(),legend=this.legend;if(!this.enableLegend||!canvasContainer){return ;}canvasContainer.style.width=containerSize.width+"px";canvasContainer.style.height=containerSize.height+"px";if(!legend||!this.canRenderLegend()){canvasContainer.style.left="0px";return ;}if(legendPosition===undefined){legendPosition=legend._getLegendPosition();}canvasContainer.style.left=legend.isOnRight(legendPosition)?"0px":(legend._getLegendWidth()+"px");},onLegendDropZoneChange:function(dropZoneInfo){this._positionCanvasContainer(dropZoneInfo&&dropZoneInfo.pos);},onLegendDropped:function(legendDockPos){if(this.legend){this.legend._onLegendDropped(legendDockPos);}},_isConsumeMode:function(){return $CUSTOM_VIS_UTIL.isRWDExpressMode()||$CUSTOM_VIS_UTIL.isLibrary()||$CUSTOM_VIS_UTIL.isVIPresentationMode()||mstrApp.isInVFInteractMode||mstrApp.isDisplayOnMobile;},redraw:function redraw(){if(this.excludeData){return false;}if(this.reuseDOMNode){if(this.plotted){this.renderVisualization();}return this.plotted;}return false;},createZoneModel4ConvertedRWD:function createZoneModel4ConvertedRWD(nodeData){var customVis=this,dz=nodeData&&nodeData.dz;if(mstrApp.isExpress&&dz&&Object.keys(dz).length>0){var visName=this.getVisName(nodeData),zoneModelClassName=$HASH.walk("pluginsVisList."+visName+".dz",mstrConfig)||"vi.models.BaseVisDropZones",ViewClass;if(zoneModelClassName){mstrmojo.requiresCls("mstrmojo."+zoneModelClassName);ViewClass=$HASH.walk(zoneModelClassName,mstrmojo);customVis.zonesModel=customVis.addDisposable(new ViewClass({hostId:customVis.id,docModel:customVis.getDocModel(),visModel:customVis.model}));}}},checkBinaryDataLoadingStatus:function checkBinaryDataLoadingStatus(){if(this.binaryData){this.onBinaryDataLoaded();}const isWaitExecutionReady=this.gridData&&this.gridData.egt===$ERROR_TYPE.DATA_NOT_READY;const isWaitReexecutionReady=this.isMessageNotReady&&!this.checkMessageReadyFailed;const willAutoRefetch=isWaitExecutionReady||isWaitReexecutionReady;if(!this.isLoadingBinaryData&&!willAutoRefetch){this.onBinaryDataLoadStalled();}},update:function update(node){if(this.isBinaryData&&!this.itCheckLoading){this.itCheckLoading=setInterval(function(){this.checkBinaryDataLoadingStatus();if(this.isBinaryDataInitialLoadCompleted()){clearInterval(this.itCheckLoading);this.itCheckLoading=null;$FUNC.safeCall("removeNotReadyEffect",this.parent)();}}.bind(this),100);}if(this._super&&!this._super(node)){return false;}this.clearError();var nodeData=this.getData();if(!nodeData){this.setError(mstrmojo.desc(8426,"No model provided"));return false;}this.dataInterface=new mstrmojo.models.template.DataInterface({data:nodeData,binaryInfo:{isBinaryData:this.isBinaryData,binaryData:this.binaryData}});if(this.isBinaryData){this.binaryDataInterface=new mstrmojo.models.template.BinaryDataInterface({viz:this,binaryData:this.binaryData,});}this.createZoneModel4ConvertedRWD(nodeData);var egt=nodeData.egt,eg=nodeData.eg;if(!this.excludeData&&(egt!==undefined||eg!==undefined)){this.setError(eg,egt);}if(this.isEmpty()||this.excludeData||(this.isBinaryData&&!this.binaryData)){this.graphicModelsNA=true;if(this.isBinaryData&&!this.binaryData){this.loadBinaryData();}return ;}this.legendColorByInfo=getColorByInfo.call(this);this.legendSizeByInfo=getSizeByInfo.call(this);this.idTitleMapping=this.generateIdTitleMapping();var dropZoneModel=this.zonesModel;if(dropZoneModel){var tooltipOrder=dropZoneModel.getDefaultTooltipOrder();dropZoneModel.setTooltipObjsOrder(tooltipOrder);this.additionalAttrIds=dropZoneModel.getAdditionalAttrIds();}this.currColorbyAttrListIdx=0;try{this.graphicModels=this.createGraphicModels();this.graphicModelsNA=false;}catch(e){console.error(e);this.graphicModelsNA=true;setUserDefinedError.call(this);$LOG("Error occurred when creating the graphic models");}},getVisName:function getVisName(data){var visObj=data.vis,visName=data.visName||(visObj&&visObj.vn);return visName;},moveTooltip:function moveTooltip(evt,win){var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),that=this,content,getTitle=function getTitle(node){var i,children=node.childNodes;for(i=0;i<children.length;i++){var child=children[i];if(child.nodeName==="title"){return child;}}if(node!==that.domNode){return getTitle(node.parentNode);}return null;},title=getTitle(target);if(title){var tooltip=title.innerHTML;if(tooltip.length){content=tooltip;title.tt=tooltip;$DOM.emptyNode(title);}else{if(title.tt!==undefined){content=title.tt;}}}this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:content,top:evt.clientY+12,left:evt.clientX-12,cssClass:"vi-regular vi-tooltip-A"};this._super(evt,win);},setError:function(msg,type){var translatedError=$UTIL.translateGridError(msg,type);this.error=translatedError.msg;this.errorType=translatedError.type;},clearError:function(){this.error=undefined;this.errorType=undefined;},hasError:function(){return this.error!==undefined||this.errorType!==undefined;},isEmpty:function(){return this.hasError();},onBinaryDataLoadStalled:function onBinaryDataLoadStalled(){if(this.isBinaryDataInitialLoadCompleted()){return ;}this.isBinaryDataInitialLoadStalled=true;if(this.isBinaryDataInitialLoadCompleted()){this.onBinaryDataInitialLoadCompleted();}},onBinaryDataLoaded:function onBinaryDataLoaded(){if(this.isBinaryDataInitialLoadCompleted()){return ;}this.isBinaryDataInitiallyLoaded=true;if(this.isBinaryDataInitialLoadCompleted()){this.onBinaryDataInitialLoadCompleted();}},isBinaryDataInitialLoadCompleted:function isBinaryDataInitialLoadCompleted(){return this.isBinaryDataInitiallyLoaded||this.isBinaryDataInitialLoadStalled;},onBinaryDataInitialLoadCompleted:function onBinaryDataInitialLoadCompleted(){const docCtrl=$HASH.walk("rootCtrl.docCtrl",window.mstrApp);if(!docCtrl){return ;}var pageKey=null;try{const docModel=this.getDocModel();if(docModel){pageKey=docModel.getDocVIVisualizationsMainPanel().k;const layoutKey=docModel.getCurrentLayoutKey();const psKey=docModel.getFilterPanelStackKey(layoutKey);pageKey=pageKey+"--"+psKey;}}catch(e){}$FUNC.safeCall("addCompletedBinVizCount",docCtrl)(pageKey);},getVisEmptyMsgControls:function getVisEmptyMsgControls(errorType){return $UTIL.getVisEmptyMsgControls.call(this,errorType);},hasColorByOrSizeBy:function hasColorByOrSizeBy(){var zonesModel=this.zonesModel;if(!zonesModel){return false;}return zonesModel.getColorByAttributes().length>0||zonesModel.getColorByMetric()||zonesModel.getSizeByMetric();},getProperties:function getProperties(){var data=this.model.data,vp=data.vp;if(!vp){data.vp={cvp:{}};}else{if(!vp.cvp){vp.cvp={};}}return data.vp.cvp;},getDefaultProperties:function getDefaultProperties(){return this.dvp||{};},getLegendProperty:function(propertyName){if(!this.enableLegend){return ;}var legendPropSet=$CustomVisEnums.LEGEND_PROPERTY_SET,props=this.getProperties()[legendPropSet]||{},defProps=this.getDefaultProperties()[legendPropSet]||{},builtInDefProps=getBuiltInLegendProperties.call(this),propValue;propValue=props[propertyName];if(propValue===undefined){propValue=defProps[propertyName];if(propValue===undefined){propValue=builtInDefProps[propertyName];}}return transformLegendProperty(propertyName,propValue);},getLegendProperties:function(){var me=this,props={},propName;$ARR.forEach(Object.keys($ENUM_LEGEND_PROPS),function(key){propName=$ENUM_LEGEND_PROPS[key];props[propName]=me.getLegendProperty(propName);});return props;},setDefaultPropertyValues:function setDefaultPropertyValues(dvp){if(dvp instanceof Object){this.dvp=dvp;}else{this.dvp={};}},getProperty:function getProperty(propertyName){if(propertyName===$CustomVisEnums.LEGEND_PROPERTY_SET){return this.getLegendProperties();}var props=this.getProperties(),defProps=this.getDefaultProperties(),propValue;propValue=props[propertyName]===undefined?defProps[propertyName]:props[propertyName];if(["mstrmojo.plugins.MultiMetricKPI.MultiMetricKPI","mstrmojo.plugins.ComparisonKPI.ComparisonKPI","mstrmojo.plugins.Gauge.Gauge","mstrmojo.plugins.ImageEnhancedKPI.ImageEnhancedKPI",].includes(this.scriptClass)&&props[propertyName]&&defProps[propertyName]){propValue=JSON.stringify($HASH.copy(JSON.parse(props[propertyName]),JSON.parse(defProps[propertyName])));}if(typeof propValue==="object"){propValue=$HASH.copy(props[propertyName],defProps[propertyName]);}return propValue;},getSetInnerPropertyAction:function getSetInnerPropertyAction(propertyName,newValue){var outerProps=this.getProperties(),propsStr=outerProps&&outerProps.properties,props;if(!outerProps){return[];}try{props=JSON.parse(propsStr||"{}");}catch(e){console.w("Failed to parse inner properties: "+e);return[];}if(props&&!$HASH.equals(props[propertyName],newValue)){props[propertyName]=newValue;outerProps.properties=JSON.stringify(props);return getSetPropertiesAction.call(this);}return[];},getInnerProperty:function getInnerProperty(propertyName){var outerProps=this.getProperties(),propsStr=outerProps&&outerProps.properties,props;if(!propsStr){return null;}try{props=JSON.parse(propsStr);}catch(e){console.w("Failed to parse inner properties: "+e);return null;}return props[propertyName]||null;},setProperty:function setProperty(propertyName,newValue,config){var properties=this.getProperties(),oldValue=properties[propertyName];if(properties&&!$HASH.equals(oldValue,newValue)){properties[propertyName]=newValue;if(config&&config.onPropertyChange instanceof Function){var changedProperties=config.onPropertyChange(propertyName,newValue);if(isValidProperties(changedProperties,0)){$HASH.copy(changedProperties,properties);}else{mstrmojo.warn("Results of onPropertyChange() is invalid. It must be an JSON object that contains the properties and values you want to change, and can't have child properties that exceeds two levels.",{},{buttons:[$NWB(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}}if(mstrApp.isDisplayOnMobile){return ;}var suppressData=!!(config&&config.suppressData),requestDefinition=config&&config.requestDefinition,customUndoRedoCallback=config&&config.clientUndoRedoCallback,hasClientUndoRedoCallback=customUndoRedoCallback&&(customUndoRedoCallback instanceof Function),me=this,visId=me.id,boxId=me.parent.id,visModel=me.model,docModel=visModel.docModel,controller=visModel.controller,actions=getSetPropertiesAction.call(this),callback,undoredoCallback,extra={},execute,visKey=visModel.data.k,needExtraAction=config&&config.needExtraAction;if(needExtraAction){if(isInsightLineChart(visModel.data.visName)){var templateKey=config&&config.templateKey,tct=config&&config.tct,propertyTitle=config&&config.propertyTitle,tsp=config&&config.tsp;actions.push({act:"format",unitKey:templateKey,unitType:521,formatType:1,format:{Visualization:{TemplateCalculationType:tct,TimeSeriesParameters:tsp},FormattingView:{Title:propertyTitle}},partialRetrieval:{nodes:[visKey,templateKey]}});}if(isImageEnhancedKPI.call(this)){actions=actions.concat(config.extraActions);}}var getClientUndoRedoCallback=function getClientUndoRedoCallback(val){return suppressData?function(){var vis=mstrmojo.all[visId],properties=vis.getProperties();properties[propertyName]=val;if(hasClientUndoRedoCallback){customUndoRedoCallback.call(vis,val);}else{vis.renderVisualization();}vis.getDocModel().selectVIUnit(vis.parent.id,true);}:$FNEMPTY;};if(suppressData){callback=mstrmojo.emptyFn;execute=function(){this.submitSilent(actions);};}else{callback=docModel.getSliceCallback({tks:visModel.data.k});callback.success=$COMPOS([callback.success,function(){docModel.selectVIUnit(boxId,true);}]);execute=function(){this.submit(actions,callback,extra);};}undoredoCallback=controller._getXtabCallback(me);undoredoCallback.success=$COMPOS([undoredoCallback.success,function(){docModel.selectVIUnit(boxId,true);}]);if(requestDefinition){$HASH.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,extra);}controller.cmdMgr.execute({execute:execute,urInfo:{silent:suppressData,callback:undoredoCallback,redo:getClientUndoRedoCallback(newValue),undo:getClientUndoRedoCallback(oldValue)}});}},openFormatPanelByProperty:function openFormatPanelByProperty(propName){var edtModel=this.edtModel;this.openFormatPanelByIdx(function(){return $HASH.walk("propertyPanelIdxMap."+propName,edtModel);},true);},openFormatPanelWithColorbyGroup:function openFormatPanelWithColorbyGroup(){var edtModel=this.edtModel;this.openFormatPanelByIdx(function(){return $HASH.walk("colorbyGroupPanelIdx",edtModel);},true);},openFormatPanelByIdx:function openFormatPanelByIdx(getFormatPanelIdx,shouldOpenFormat){var edtModel=this.edtModel,formatPanelIdx;if($CUSTOM_VIS_UTIL.isLibrary()||$CUSTOM_VIS_UTIL.isRWDExpressMode()||$CUSTOM_VIS_UTIL.isVIPresentationMode()){return ;}openAndRefreshFormatPanel.call(this);if(typeof getFormatPanelIdx==="number"){formatPanelIdx=getFormatPanelIdx;}else{if(typeof getFormatPanelIdx==="function"){formatPanelIdx=getFormatPanelIdx();}}if(formatPanelIdx>=0){edtModel._targetPulldown.set("selectedIndex",formatPanelIdx);if(shouldOpenFormat&&mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature($FEATURES.DOSSIER_REACT_FORMAT_PANEL)){this.raiseEvent({name:"updateFormatPanelSelection",value:formatPanelIdx,});}}},openFormatPanelByName:function openFormatPanelByName(name){this.openFormatPanelByIdx(function(){var edtModelPulldownItems=$HASH.walk("edtModel._targetPulldown.items",this);return $ARR.find(edtModelPulldownItems,"n",name);}.bind(this));},savePropertyAndUpdateWidget:function savePropertyAndUpdateWidget(propName,newValue,config,showFormatPanel){if(!config||config.suppressData===undefined){config=$HASH.copy({suppressData:true},config);}this.setProperty(propName,newValue,config);if(config.suppressData){var fn=config.callback instanceof Function?config.callback:this.renderVisualization.bind(this);fn.call(this);if(!this._isConsumeMode()){var propertiesPanel=this.controller.getViPanel("propertiesPanel"),isFormatPanelOpened=propertiesPanel&&propertiesPanel.getOpenStatus();if(!!showFormatPanel){this.openFormatPanelByProperty(propName);}else{if(isFormatPanelOpened){var edtModel=this.edtModel,targetPulldown=edtModel&&edtModel._targetPulldown,formatPanelIdx=targetPulldown&&targetPulldown.selectedIndex;if(formatPanelIdx>=0){this.openFormatPanelByIdx(formatPanelIdx);}}}}}},saveObjectProperty:function(propName,subPropName,newValue,config,showFormatPanel){var savedProperties=$HASH.clone(this.getProperty(propName))||{};savedProperties[subPropName]=newValue;config=this._wrapLegendCallbackConfig(propName,subPropName,config);this.savePropertyAndUpdateWidget(propName,savedProperties,config,showFormatPanel);},addThresholdMenuItem:function addThresholdMenuItem(){this.showThreshold=true;},addUseAsFilterMenuItem:function addUseAsFilterMenuItem(){var vizContainer=this.parent;this.hideUseAsFilterMenuItem=false;if(vizContainer&&vizContainer.generateToolbar){vizContainer.generateToolbar();}},getColorBy:function(eids,visPalette){if(!eids||!this.zonesModel){return null;}var zoneItems=this.zonesModel.getColorByAttributes(),colorObj,gts=$HASH.walk("dataInterface.data.gts",this)||{},tids=[],isAttr=function(item){return item.t===$DSSOBJ_TYPES.DssTypeAttribute;},isConsolidation=function(item){return item.t===$DSSOBJ_TYPES.DssTypeConsolidation;},isCG=function(item){return item.t===$DSSOBJ_TYPES.DssTypeFilter;};$ARR.forEach(gts.row.concat(gts.col),function(item){$ARR.forEach(zoneItems,function(itm){if((isAttr(itm)||isConsolidation(itm)||isCG(itm))&&itm.id===item.id){tids.push(itm.id);}});});colorObj=this.model.docModel.getColorBy(tids,eids,visPalette);return $GM_UTIL.decodeColor(colorObj.color);},getColorByAttInfo:function getColorByAttInfo(zoneItems){function getShapeColorAndOpacity(cbElements){var me=this,colorObj,tid,eid,strtid,streid,attr,opacity,props=this.props||{},opacities=props.attrColorByOpacity||{};var visPalette=this.getVisPalette&&this.getVisPalette();cbElements.map(function(item){tid=item.colorByAttributeIDs;eid=item.colorByElementIDs;strtid=tid&&tid.join("|");streid=eid&&eid.join("|");attr=opacities[strtid]||{};opacity=attr&&attr[streid];if(opacity===undefined){opacity=100;}item.opacity=opacity;if(tid&&eid){colorObj=me.model.docModel.getColorBy(tid,eid,visPalette);item.encodedColor=colorObj.color;item.color=$GM_UTIL.decodeColor(colorObj.color);item.isDefaultColor=!colorObj.isManual;}});}function getCbElements(zoneItems){var cbElements,cbAtt=[],gts=$HASH.walk("dataInterface.data.gts",this)||{},units=(gts.row||[]).concat(gts.col||[]);$ARR.forEach(zoneItems,function(item){$ARR.forEach(units,function(itm){if(itm.id===item.id){cbAtt.push(itm);}});});function descartes(arr){var rs=[],len=arr.length,m,str,bothDescartes=function(arr1,arr2){var r=[],i,j,idx=0,len1=arr1.length,len2=arr2.es.length;for(i=0;i<len1;i++){for(j=0;j<len2;j++){str=arr1[i].text+" "+arr2.es[j].n;idx++;r.push({comb:arr1[i].comb.concat({eid:arr2.es[j].id,tid:arr2.id,tp:arr2.otp}),colorByAttributeIDs:arr1[i].colorByAttributeIDs.concat(arr2.id),colorByElementIDs:arr1[i].colorByElementIDs.concat(arr2.es[j].id),colorByTypes:arr1[i].colorByTypes.concat(arr2.otp),text:str});}}return r;};for(m=0;m<len;m++){if(m===0){var arr0=arr[0];$ARR.forEach(arr0.es,function(itm){rs.push({comb:[{tid:arr0.id,eid:itm.id,tp:arr0.otp}],colorByAttributeIDs:[arr0.id],colorByElementIDs:[itm.id],colorByTypes:[arr0.otp],text:itm.n});});}else{rs=bothDescartes(rs,arr[m]);}}return rs;}cbElements=descartes(cbAtt);cbElements.unshift({text:mstrmojo.desc(2461,"All"),color:"#ffffff",opacity:100,comb:[]});return cbElements;}var cbElements=getCbElements.call(this,zoneItems);getShapeColorAndOpacity.call(this,cbElements);return cbElements;},applySelection:function applySelection(selectInfo,config,extraInfo){if(!selectInfo){return ;}selectInfo=$ARR.ensureArray(selectInfo);extraInfo=$ARR.ensureArray(extraInfo);if(extraInfo.length>0&&extraInfo.length!==selectInfo.length){extraInfo=[];$LOG("extraInfo should be empty or same length with selectInfo, ignore the extraInfo here!");}config=config||{};if(!config.isModify){var clearSelectionsFN=config.forContextMenu?"clearCxtMnuSelection":"clearSelections";this[clearSelectionsFN]();}if(selectInfo.length>0){var isAttrSel=selectInfo[0].isSelectAttr,funcName=(config.isRemove===true?"remove":"add")+(config.forContextMenu===true?"ContextMenu":"")+(isAttrSel?"Attribute":"MetricValue")+"Selection",me=this;}$ARR.forEach(selectInfo,function(selection,index){if(isAttrSel){me[funcName](selection.tid,selection.eid,selection.n,extraInfo[index]);}else{me[funcName](selection,extraInfo[index]);}});if(!config.forContextMenu){this.endSelections();}},isDarkTheme:function isDarkTheme(){return $HASH.walk("model.docModel.thm.did",this)===DARK_THEME_ID;},isDefaultTheme:function(){return $HASH.walk("model.docModel.thm.did",this)===DEFAULT_THEME_ID;},getCellUnitIndex:function getCellUnitIndex(cell){return cell.o;},getCellForNode:function getCellForNode(headerObj){var h=headerObj&&headerObj.h,t=headerObj&&headerObj.t;return{at:h.at,dei:h.dei,dpt:h.dpt,o:h.o,n:t.n,tui:h.tui,ui:h.ui,axis:1,v:headerObj.getName(),tid:t.id};},isInSelection:function isInSelection(isSelectAttr,selector){if(isSelectAttr){return this.isAttSelected(selector.tid,selector.eid);}else{return this.isMetricValueSelected(selector);}},isInContextMenuSelection:function isInContextMenuSelection(isSelectAttr,selector){if(isSelectAttr){return this.isCtxMnuAttSelected(selector.tid,selector.eid);}else{return this.isCtxMnuMetricValueSelected(selector);}},graphicNeedsHighlight:function graphicNeedsHighlight(graphicModel,forContextMenu){var isSelectAttr=graphicModel.isAttributeSelector(),selector=graphicModel.getSelector();if(forContextMenu){return this.needContextMenuHighlight(isSelectAttr,selector);}else{return this.needHighlight(isSelectAttr,selector);}},createGraphicModels:function createGraphicModels(){return[];},getGraphicModels:function getGraphicModels(){return this.graphicModels;},sendMessageToMobileDevice:function sendMessageToMobileDevice(msgType,event,graphicModel){var viz=this,menuConfig=this.getContextMenuConfig(graphicModel),commonConfig=menuConfig&&menuConfig.common,selector=graphicModel&&graphicModel.getSelector(),messageToMobileDevice={messageType:msgType,selectedElement:selector||[],ctxMenuConfig:{pos:viz.getMousePositionFromEvent(event),items:commonConfig?viz.getMobileMenuConfig(commonConfig,graphicModel):[]},toolTip:graphicModel&&this.getTooltipContent(graphicModel)};$UTIL.sendToMobileDevice(messageToMobileDevice);},handleSelection:function handleSelection(event,graphicModel){var isMultiSelectMode=event.ctrlKey||event.metaKey,isSelectAttr=graphicModel&&graphicModel.isAttributeSelector(),selector=graphicModel&&graphicModel.getSelector(),isClearAllDisabled=this.isClearAllDisabled(),needUpdateHighlight=false;if(this.misMatchWithVisSelection){this.synchronizeToVisSelection();needUpdateHighlight=true;}if(graphicModel&&selector){var prevIsSelected=this.isInSelection(isSelectAttr,selector),single=this.getSelections().length===1;if(isMultiSelectMode){if(prevIsSelected&&((single&&!isClearAllDisabled)||!single)){this.applySelection(selector,{isModify:true,isRemove:true},graphicModel);needUpdateHighlight=true;}else{if(!prevIsSelected){this.applySelection(selector,{isModify:true,isRemove:false},graphicModel);needUpdateHighlight=true;}}}else{if(prevIsSelected&&single&&!isClearAllDisabled){this.applySelection([]);needUpdateHighlight=true;}else{if((prevIsSelected&&!single)||!prevIsSelected){this.applySelection(selector,null,graphicModel);needUpdateHighlight=true;}}}}else{if(!isClearAllDisabled){this.applySelection([]);needUpdateHighlight=true;}}if(mstrApp.isDisplayOnMobile){this.sendMessageToMobileDevice("singletap",event,graphicModel);}else{if(needUpdateHighlight){this.updateHighlight();}}},handleContextMenuSelection:function handleContextMenuSelection(event,graphicModel){var isSelectAttr=graphicModel&&graphicModel.isAttributeSelector(),selector=graphicModel&&graphicModel.getSelector();if(this.misMatchWithVisSelection){this.synchronizeToVisSelection();}if(graphicModel&&selector){var isNodeSelected=this.isInSelection(isSelectAttr,selector);if(!isNodeSelected){this.applySelection(selector,{forContextMenu:true},graphicModel);}else{this.synchronizeContextMenuSelection();}}else{this.applySelection([],{forContextMenu:true});}if(mstrApp.isDisplayOnMobile){this.sendMessageToMobileDevice("longpress",event,graphicModel);}else{var menuConfig=this.getContextMenuConfig(graphicModel),commonConfig=menuConfig&&menuConfig.common,customConfig=menuConfig&&menuConfig.custom;if(commonConfig&&customConfig){this.showContextMenu(event,commonConfig,customConfig);}this.updateHighlight();}},isClearAllDisabled:function isClearAllDisabled(){var sc=this.findSelectorControl();return sc&&!sc.showall;},generateIdTitleMapping:function generateIdTitleMapping(){var me=this,rowTitles=$HASH.walk("gridData.gts.row",this),cols=$HASH.walk("gridData.gts.col",this),colTitles=(cols&&cols.length===1)&&(cols[0].otp===-1)&&cols[0].es,idTitleMapping={};me.tooltipObjsInOrder=[];$ARR.forEach(rowTitles,function(title){idTitleMapping[title.id]=title.n;me.tooltipObjsInOrder.push(title.id);});$ARR.forEach(colTitles,function(title){idTitleMapping[title.oid]=title.n;me.tooltipObjsInOrder.push(title.oid);});return idTitleMapping;},applyJointElementFilter:function applyJointElementFilter(){if(!this.binaryDataInterface){return ;}const selectedIndices=this.getBinaryDataSelectedIndices();const attributes=this.getBinaryDataSelectionAttributes();if(!selectedIndices||selectedIndices.length===0||!attributes||attributes.length===0){return ;}const viSelectionBk=this._viSelections;this._viSelections={};const fakeCandidate=this.binaryDataInterface.generateCandidate(attributes,0);this.addMetricValueSelection(fakeCandidate);const selectInfo=Object.values(this._viSelections);this.passThroughExpression=this.binaryDataInterface.buildJointElementExpression(selectedIndices);this.applySelection(selectInfo);this.passThroughExpression=null;this._viSelections=viSelectionBk;},setBinaryDataSelectedIndices:function setBinaryDataSelectedIndices(selectedIndices){this.binaryDataSelectedIndices=selectedIndices;},getBinaryDataSelectedIndices:function getBinaryDataSelectedIndices(){return this.binaryDataSelectedIndices||[];},setBinaryDataSelectionAttributes:function setBinaryDataSelectionAttributes(attributes){this.binaryDataSelectionAttributes=attributes;},getBinaryDataSelectionAttributes:function getBinaryDataSelectionAttributes(){return this.binaryDataSelectionAttributes||[];},setBinaryDataSelectedInfo:function setBinaryDataSelectedInfo(selectedInfo){this.binaryDataSelectedInfo=selectedInfo;},getBinaryDataSelectedInfo:function getBinaryDataSelectedInfo(){return this.binaryDataSelectedInfo||{};},setBinaryDataSelectedNameInfo:function setBinaryDataSelectedNameInfo(nameInfo){this.binaryDataSelectedNameInfo=nameInfo;},getBinaryDataSelectedNameInfo:function getBinaryDataSelectedNameInfo(){return this.binaryDataSelectedNameInfo||{};},hasBinaryDataSelection:function hasBinaryDataSelection(){if(this.isBinaryDataMetricSelection()){return this.getBinaryDataSelectedIndices().length>0;}else{return Object.keys(this.getBinaryDataSelectedInfo()).length>0;}},setBinaryDataSelectionType:function setBinaryDataSelectionType(selectionType){this.binaryDataSelectionType=selectionType;},getBinaryDataSelectionType:function getBinaryDataSelectionType(){return this.binaryDataSelectionType;},isBinaryDataMetricSelection:function isBinaryDataMetricSelection(){return this.getBinaryDataSelectionType()===ENUM_BINARY_SELECTION_TYPE.METRIC;},isBinaryDataUseJointElementFilter:function isBinaryDataUseJointElementFilter(){const isJointElementEnabled=window.mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature($FEATURES.JOINT_ELEMENT);return this.isBinaryData&&isJointElementEnabled&&this.isBinaryDataMetricSelection();},updateBinaryDataVisSelections:function updateBinaryDataVisSelections(){const viz=this;this.clearViSelection();const isMetricSelection=this.isBinaryDataMetricSelection();if(isMetricSelection){const selectedIndices=this.getBinaryDataSelectedIndices();const attributes=this.getBinaryDataSelectionAttributes();if(attributes.length===0||selectedIndices.length===0){return ;}selectedIndices.forEach(function(index){const candidate=viz.binaryDataInterface.generateCandidate(attributes,index);viz.addMetricValueSelection(candidate);});}else{const selectedInfo=this.getBinaryDataSelectedInfo();const selectedNameInfo=this.getBinaryDataSelectedNameInfo();Object.keys(selectedInfo).forEach(function(attributeId){const eids=selectedInfo[attributeId];const enames=selectedNameInfo[attributeId]||[];for(var i=0;i<eids.length;i++){const eid=eids[i];const ename=enames[i]||"";viz.addAttributeSelection(attributeId,eid,ename);}});}},applySelectionToTargets:function applySelectionToTargets(selectionInfo,options){if(!this.isBinaryData){return ;}if(!selectionInfo){return ;}const selectionType=selectionInfo.selectionType;if(Object.values(ENUM_BINARY_SELECTION_TYPE).indexOf(selectionType)===-1){return ;}const selectedRowIndices=selectionInfo.selectedRowIndices;const selectedInfo=selectionInfo.selectedInfo;if(selectionType===ENUM_BINARY_SELECTION_TYPE.METRIC&&!selectedRowIndices||selectionType===ENUM_BINARY_SELECTION_TYPE.ATTRIBUTE&&!selectedInfo){return ;}const newHighlightKeys=this.binaryDataInterface.getNewHighlightTargetKeys();const hasNewHighlightTgt=newHighlightKeys.length>0;const oldHighlightKeys=this.binaryDataInterface.getOldHighlightTargetKeys();const hasOldHighlightTgt=oldHighlightKeys.length>0;const hasContextMenuSelection=options&&options.hasContextMenuSelection;const an=this.getAssociatedNodes();const highlightKeys=this.getHighlightKeys();const hasFilterTgt=(an.length-highlightKeys.length)>0;if(!hasNewHighlightTgt&&!hasOldHighlightTgt&&!hasFilterTgt&&!hasContextMenuSelection){return ;}const attributeIds=selectionInfo.attributeIds||this.binaryDataInterface.getAttributeIds();if(hasNewHighlightTgt){this.addLog("New Highlight Started");if(selectionType===ENUM_BINARY_SELECTION_TYPE.METRIC){this.getDocModel().raiseEvent({name:"binarySelectionChanged",srcKey:this.getData().k,tgtKeys:newHighlightKeys,selections:{srcId:this.id,attributeIds:attributeIds,selectedIndices:selectedRowIndices}});}else{const selections=this.binaryDataInterface.generateSelectionExpression(selectedInfo);this.getDocModel().raiseEvent({name:"binarySelectionChanged",srcKey:this.getData().k,tgtKeys:newHighlightKeys,selections:selections});}this.addLog("New Highlight Finished");}if(hasOldHighlightTgt){}if(hasFilterTgt||hasContextMenuSelection){this.setBinaryDataSelectionType(selectionType);this.setBinaryDataSelectedIndices(selectedRowIndices);this.setBinaryDataSelectionAttributes(attributeIds.map(function(id){return{id:id};}));const useJointElement=this.isBinaryDataUseJointElementFilter();if(useJointElement){if(selectedRowIndices.length===0&&hasFilterTgt){this.clearSelections();this._customVizContextMenuSelExtraInfo=this._viSelections;this._viContextMenuSelections=this._viSelections;this.applySelection([]);}else{if(hasFilterTgt){this.applyJointElementFilter();}}}else{if(selectionType===ENUM_BINARY_SELECTION_TYPE.ATTRIBUTE){const oldSelectionInfo={};const oldSelectionNameInfo={};const viz=this;Object.keys(selectedInfo).forEach(function(attrId){const indices=selectedInfo[attrId];const elementIdsNames=viz.binaryDataInterface.getElementIdsNames(attrId,indices);if(!elementIdsNames){return ;}oldSelectionInfo[attrId]=elementIdsNames.eids;oldSelectionNameInfo[attrId]=elementIdsNames.enames;});this.setBinaryDataSelectedInfo(oldSelectionInfo);this.setBinaryDataSelectedNameInfo(oldSelectionNameInfo);}this.updateBinaryDataVisSelections();if(hasFilterTgt){this.applySelection(Object.values(this._viSelections));this._customVizContextMenuSelExtraInfo=this._viSelections;this._viContextMenuSelections=this._viSelections;}}}},clearBinaryDataSelections:function clearBinaryDataSelections(){if(!this.isBinaryData){return ;}this.setBinaryDataSelectionType(null);this.setBinaryDataSelectedIndices(null);this.setBinaryDataSelectionAttributes(null);this.setBinaryDataSelectedInfo(null);this.setBinaryDataSelectedNameInfo(null);this.clearViSelection();this.setSelectionCache({});this._customVizContextMenuSelExtraInfo=this._viSelections;this._viContextMenuSelections=this._viSelections;},cleanupOnBinaryDataUpdate:function cleanupOnBinaryDataUpdate(){this.clearBinaryDataSelections();},});mstrmojo.CustomVisBase.ENUM_EXTERNAL_LIBS=EXTERNAL_LIBS;mstrmojo.CustomVisBase.ENUM_BINARY_SELECTION_TYPE=ENUM_BINARY_SELECTION_TYPE;mstrmojo.CustomVisBase.ENUM_BINARY_COLORBY_TYPE=ENUM_BINARY_COLORBY_TYPE;if($DOM.isTouchOptimizationEnabled()){mstrmojo.mixin(mstrmojo._TouchGestures,mstrmojo.CustomVisBase.prototype);mstrmojo.mixin(mstrmojo.mobile.customviz._CustomVizSupportsTouches,mstrmojo.CustomVisBase.prototype);}}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.rw.UnitContainer","mstrmojo.vi.ui.rw.selectors._HasFilterContextMenu","mstrmojo.vi.ui.TargetSelector","mstrmojo.vi.ui.FilterBoxInlineDialog","mstrmojo.Label","mstrmojo.dom","mstrmojo.css","mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.tooltip","mstrmojo.DocSelector","mstrmojo.vi.ui._HasMask","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.vi.models.EnumDragSources","mstrmojo.models.FormatModel","mstrmojo.EnumRWUnitType","mstrmojo.vi.enums.EnumFeatures","mstrmojo.DocDataService","mstrmojo.expr","mstrmojo.models.ParametersInterface","mstrmojo.pendo.PendoHelper","mstrmojo.pendo.PendoParameterEnums","mstrmojo.vi.enums.SelectorEnums","mstrmojo.vi.ui.GenerateURLIndicator");var Ag=mstrmojo.css,y=mstrmojo.dom,e=mstrmojo.func,M=mstrmojo.array,U=mstrmojo.string,O=mstrmojo.hash,u=mstrmojo.DocSelector,s=mstrmojo.pendo.PendoHelper,B=mstrmojo.pendo.PendoParameterEnums,t=mstrmojo.models.ParametersInterface,Y="\u001E",AJ=mstrmojo.EnumRWUnitType,X=mstrmojo.models.FormatModel,AR=X.getFormatUpdate,S=X.ENUM_PROPERTY_NAMES,Al=u.STYLES,C=u.CONTROL_TYPE,K=mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY,Ad=mstrmojo.vi.ui.rw.GhostImageContainer,AW=[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:"amselector",visDesc:Ad.getVisDesc("amselector")}],AZ=mstrmojo.DocDataService.EnumTreesToRender,AL=mstrmojo.vi.enums.EnumFeatures,Aj=mstrmojo.expr.TP,c="setControlShowAll",AK=150,L=42,n=L+"px",Am=mstrmojo.vi.enums.SelectorEnums,Ao=Am.ENUM_CONTROL_ORIENTATION,Ai=Am.ENUM_ORIENTATION_VALUES,AX="1";function l(As){return As&&As.did!=="-1"&&As.t!==Aj.DIM;}function An(As){return As&&l(As)&&!As.prmid;}function Ab(As){var At=As.getCtxtDragData();return(At.items||[]).filter(l)[0];}function AO(At){var Au=At.getCtxtDragData(),As=Au.items||[];return Au.src&&As.some(An);}function Ap(){var At=this.getSelectorSource(),As=this.model.getDatasetUnits(["att","mx"],function(Au){return Au.did===At;});return(As.length&&As[0])||null;}function AG(){var As=this;this.showControlOverlay([mstrmojo.Button.newWebButton(mstrmojo.desc(1088,"Edit"),function(){var At=As.boxContent;if(At&&At.expandOrEditToFetchElements){At.expandOrEditToFetchElements();}As.hideControlOverlay();},false,{alias:"ctrlEditBtn",enabled:true,cssClass:"filterBoxEdit"})]);Ag.toggleClass(this.ctrlOverlay&&this.ctrlOverlay.domNode,"editOverLay",true);}function f(As){return{scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",vis:As};}function AU(){var As=this,At=mstrmojo.Button.newWebButton(mstrmojo.desc(4799,"Select Target"),function(Au){var Av=mstrmojo.all[As.id];Av.selectVIUnit(null,Au);mstrApp.rootCtrl.view.openInlineDialog(f(Av));Au.cancel();},true,{alias:"btnSelect"});At.cssClass+=" btn-select-targets";this.showControlOverlay([At]);this.setSelectTargetsState(true);}function Af(){var As=this.boxContent;if(As.isInvalid){this.showInvalidMessage();return ;}if(this.isParameterSelector()||this.isActionSelector()){return ;}if(this.isAMSelector()&&this.selectorHasSource()&&!this.selectorNotExecutable()&&mstrApp&&mstrApp.isDossier){this.hideControlOverlay();As.set("visible",true);return ;}if(!this.isPanelSelector()&&(!this.selectorHasSource()||this.selectorNotExecutable()||(mstrApp&&(mstrApp.isAppStatePresentation()||mstrApp.isAppStatePrintPreview())))){return ;}if(this.getTargetKeys().length>0){if(O.walk("boxContent.node.data.disabled",this)){AG.call(this);}else{this.hideControlOverlay();}return ;}this.showTargetControl();}function W(){return !this.isActionSelector()&&!this.defn.ob;}function h(As){this.set("useRichTooltip",As);}function d(){Ag.toggleClass(this.domNode,"horizontal",!!this.defn.horiz);}mstrmojo.vi.ui.rw.FilterBox=mstrmojo.declare(mstrmojo.vi.ui.rw.UnitContainer,[mstrmojo.vi.ui.rw.selectors._HasFilterContextMenu,mstrmojo.vi.ui._CanDropFromSchema,mstrmojo.vi.ui._HasMask],{scriptClass:"mstrmojo.vi.ui.rw.FilterBox",targetSelector:null,useRichTooltip:true,isDynamicTooltip:true,tooltipOpenDelay:K,maskTooltip:mstrmojo.desc(15274,"Selector cannot be selected as target"),allowFilters:true,targetDDICs:[],shouldHideDynamicSelIcon:false,markupMethods:O.mergeHashes(mstrmojo.vi.ui.rw.UnitContainer.prototype.markupMethods,{onenabledChange:function(){Ag.toggleClass(this.domNode,"inactive",!this.enabled);this.targetMask.set("useRichTooltip",!this.enabled);}}),init:function AE(Au){this._super(Au);this.targetDDICs=[];if(mstrApp.isDossier){var At=this.boxContent,As=O.walk("node.defn",At)||{};if(At.hasDynamicSelection()){At._dynamicSelDefn={sus:As.sus,suc:As.suc};}}Ag.addWidgetCssClass(this,"mstrmojo-FilterBox");},getSelectorSource:function R(){var As=this.boxContent.defn;return As.srcid;},selectorHasSource:function AQ(){return !!this.getSelectorSource()||this.boxContent.defn.ct==="4";},selectorNotExecutable:function I(){return O.walk("boxContent.executable",this)===false;},showTargetControl:AU,onclick:function x(As){var Aw=y.isPrimaryMouseBtn(As.e),At=this.selectorHasSource(),Av=y.contains(this.containerNode,As.getTarget(),true,this.domNode),Au;if(Aw&&At){if(Av){Au=true;As.e.ptvSelected=true;}else{if(!y.contains(this.titlebarNode,As.getTarget(),true,this.domNode)){As.e.ptvSelected=true;}}}this._super(As);if(Au){this.getEditorModel().selectTargetByValue(mstrmojo.vi.models.editors.FilterEditorModel.SELECTOR_VALUE);}},onmouseenter:function AF(){this._super();var As=this.boxContent,At;if(this.selectorHasSource()&&this.dynamicSelIcon&&As.hasDynamicSelection()&&!mstrApp.isAppStatePresentation()&&!mstrApp.isAppStateSelection()){At=As.isDsIconVisible();this.dynamicSelIcon.set("visible",At);this.shouldHideDynamicSelIcon=At;}},onmouseleave:function Ar(){this._super();if(this.shouldHideDynamicSelIcon){this.dynamicSelIcon.set("visible",false);this.shouldHideDynamicSelIcon=false;}},moveTooltip:function J(As,Av){if(this.isActionSelector()){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;if(this.hideTooltip){this.hideTooltip();}else{mstrmojo.tooltip.close();}}var Ax=this,At=As,Aw=Av;this._tooltipTimeOut=setTimeout(function(){Ax.showTooltip(At,Aw);},this.tooltipOpenDelay);}else{var Au=y.findWidget(As.target);if(Au.id!==this.boxContent.id){return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-A",content:this.getTooltipContent(),top:As.clientY+15,left:As.clientX-15};this._super(As,Av);}},showTooltip:function Ah(Aw,Av){var Au=this,At=this.boxContent;if(At.canShowContentTooltip&&!At.canShowContentTooltip(Aw,Av)){return ;}if(!Au.hasOpenTooltip&&At){var As=y.getMousePosition(Aw,Av);Au.richTooltip={cssClass:"vi-regular vi-tooltip-A",content:At.tooltip,top:Math.max(As.y+this.tooltipTopOffset,0),left:Math.max(As.x-this.tooltipLeftOffset,0),posType:mstrmojo.tooltip.POS_TOPLEFT};this._super(Aw,Av);}},getTooltipContent:function p(){var Az=Ap.call(this),Av=Az&&Az.n,Ax=this.getDisplayName(),A2=this.isAMSelector(),Aw=this.isParameterSelector(),A1=(Ax!==Av),A6='<div class="name">'+U.encodeHtmlString(Ax,true)+"</div>",A8=A2||!A1||Aw;try{var A0=this.getSelectorSource();var At=this.model;if(At.showCtlDesc){var A4=At.datasets;var Ay=At.parameters;var As="";var Au=Array.isArray(Ay)&&Ay.find(function(BA){return BA.did===A0;});var A5=A4&&Object.keys(A4).reduce(function(BB,BA){if(BB){return BB;}var BC=A4[BA];return(Array.isArray(BC.mx)&&BC.mx.find(function(BD){return BD.did===A0;})||Array.isArray(BC.att)&&BC.att.find(function(BD){return BD.did===A0;})||Array.isArray(BC.parameters)&&BC.parameters.find(function(BD){return BD.did===A0;}));},null);if(Au){As=Au.dsc;}else{if(A5){As=A5.dsc;}}var A9=Av||Ax;var A3=A9?'<div class="name">'+U.encodeHtmlString(A9,true)+"</div>":"";if(As){return A3+'<div class="dsc">'+U.encodeHtmlString(As,true)+"</div>";}return A3;}}catch(A7){console.error(A7);}return A8?A6:A6+'<div class="dsc">'+U.encodeHtmlString(mstrmojo.desc(15112,"Name in Dataset:")+" "+Av,true)+"</div>";},setSelectTargetsState:function z(As){var At=(this.ctrlOverlay||{}).btnSelect;if(At){At.set("enabled",As);At.set("visible",As);}},addMenuItemIfSelectTargetsValid:function AD(At,As,Au){if(As.isParameterSelector()){return ;}if(!mstrApp.supportFeature(AL.SUPPORT_ACROSS_PANEL_TARGET_SELECTION)){this._super(At,As,Au);return ;}if(!mstrApp.isAppStatePresentation()){var Av=this.id;At.addMenuItem(mstrmojo.desc(15069,"Edit Targets..."),"",function(){mstrApp.rootCtrl.view.openInlineDialog({scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",vis:mstrmojo.all[Av]});});}},destroy:function F(){if(this.listenerAbortController){this.listenerAbortController.abort();this.listenerAbortController=null;}if(this._super){this._super();}},postBuildRendering:function Aq(){d.call(this);this._super();this.generateToolbar();var Av=this.boxContent,Az=this.isAMSelector(),At=this.isPanelSelector(),Au=mstrApp.isAppStatePresentation(),Aw=mstrApp&&mstrApp.supportFeature(AL.DYNAMIC_SEL_AND_SORT);if(this.selectorNotExecutable()){var Ax=O.walk("node.data.em",Av)||Av.nonExecutableErrMsg;Av.set("visible",false);this.showControlOverlay([{scriptClass:"mstrmojo.Label",cssClass:"nonExecuteMsg",text:Ax}]);return ;}if(this.isActionSelector()){return ;}if(At){if(!this.getTargetKeys().length){this.showTargetControl();}}else{if(!this.selectorHasSource()){this.setSelectTargetsState(false);Av.set("visible",false);if(Az){this.showControlOverlay(AW);}else{if(this.isParameterSelector()){this.showControlOverlay([{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(27147,"Drag a parameter here.")}]);}else{this.showControlOverlay([{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(13258,"Drag object here.")}]);}}}else{if(Av&&Av.isInvalid){this.showInvalidMessage();}else{if(!this.getTargetKeys().length&&!Au){this.showTargetControl();}else{if(O.walk("node.data.disabled",Av)){AG.call(this);}}}}}if(Aw&&!Au){var A0=this.addDisposable(Av.createDynamicSelectionIcon());A0.render();this.domNode.insertBefore(A0.domNode,this.menuBtnInfo.btn);this.dynamicSelIcon=A0;}if(this.model){this.model.itemsFitContent=this.defn.iwm===1;Ag.toggleClass(this.domNode,"items-fit-content",this.model.itemsFitContent);}if(this.toggleGenerateURLSelection){var Ay=this;if(!this.generateURLIndicator){var As=new mstrmojo.vi.ui.GenerateURLIndicator({clickFn:function(){Ay.toggleGenerateURLSelection();},isDynamicValueSupported:Ay.isDynamicValueSupported()});this.generateURLIndicator=As;As.render();As.onDynamicButtonClick=function(){Ay.toggleGenerateURLDynamic();};}if(this.listenerAbortController){this.listenerAbortController.abort();}this.listenerAbortController=new AbortController();this.addUrlGenerationStateListener(function(A1){Ay.generateURLIndicator.domNode.classList.toggle("selected",A1.isSelected);Ay.generateURLIndicator.setDynamic(A1.isDynamic);},this.listenerAbortController.signal);}},showInvalidMessage:function AV(){this.showControlOverlay([{scriptClass:"mstrmojo.Label",cssClass:"invalidMsg",text:this.boxContent.getInvalidTooltip()}]);},onRender:function AS(){if(this._super){this._super();}h.call(this,!this.showTitleBar);},orientationHasChanged:function k(){if(W.call(this)){var As=this.orientation,Av=As===Ai.HORIZONTAL,Au=this.boxContent,At=Au.content;this.defn.horiz=Av;if(Au.isRecursiveAttributeSelector()&&At.isHoriz!==Av){M.removeItem(this.boxContent.disposables,Au.defn);this.rebuildBoxContent(Au.node);this.doLayout();}else{At.isHoriz=Av;At.set("orientation",As);}d.call(this);}},addFormatProps:function P(Au,At){var As,Av;Au=this._super(Au,At);As=this.orientation;Av=As===Ai.HORIZONTAL;if(!this.skipOrientationAction&&W.call(this)&&!this.isActionSelector()){Au=Au||this.model.getUnitFormatAction(this,NaN,null,At);mstrmojo.models.FormatModel.getFormatUpdate(mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.CONTROL_ORIENTATION,Av?Ao.HORIZONTAL:Ao.VERTICAL,Au.format);}this.skipOrientationAction=false;return Au;},createDeleteUpdate:function j(Aw){var At=this.model,As=this.boxContent,Au=As.isFilterNothing&&As.isFilterNothing();Aw.addUpdate(At.getRemoveControlUpdate(this.k,this.parent.k,this.defn.tks||""));if(this.isPanelSelector()){Aw.setTreesToRender(AZ.DEFN);}else{if(this.defn.tks&&(!Au||As.hasDynamicSelection(true))){Aw.setTreesToRender(AZ.BOTH);}}Aw.addUpdate(At.associatedNodesUpdate(this.parent.children));if(this.isAMSelector&&this.isAMSelector()){var Av=O.valarray(this.defn.cgb);this.deleteSectionNodeDefn(Aw,At,Av);}this._super(Aw);},updateToolbar:function Z(A1){Af.call(this);var Aw=this.boxContent,A3=Aw.isAMSelector(),Au=Aw.isActionSelector&&Aw.isActionSelector(),A5=e.safeCall("isMandatory",Aw)();if(Aw&&this.selectorHasSource(this)&&!this.selectorNotExecutable()){if(mstrApp.isDossier){if(A5){var Ax=[],A0=O.walk("defn.backup",this),Ay=!A0?(O.walk("oces",Aw)||[]):[],As=O.walk("elms",A0),At=O.walk("cs.0.v",A0)||O.walk("node.data.min",Aw)||O.walk("node.data.cs.0.v",Aw),Az=As||Ay,A4=O.walk("node.data.unset",Aw);if(Az&&Az.length){M.forEach(Az,function(A6){if(Aw&&Aw.isSearchBox&&Aw.isSearchBox()){Ax.push(A6);}else{Ax.push(A6.id||A6.v);}});}else{if(!Ay.length||O.isEmpty(A0)){var Av=O.walk("node.data.elms.0.v",Aw);if(Av){Ax.push(Av);}}}if(!A4){if(Aw._dynamicSelDefn){this.addResetToDynamicItem(A1,Aw,Aw._dynamicSelDefn);}else{A1.addMenuItem(mstrmojo.desc(1905,"Reset"),"",function(){Aw.isResetting=true;if(e.safeCall("isValueParameter",Aw)()){e.safeCall("handleUserInput",Aw)(At);}else{Aw.updateSelectionsByStyle(Ax);}Aw.isResetting=false;});}}}else{this.addModeMenuItems(A1,Aw);A1.addSeparator();this.addSearchBehaviorMenuItem(A1,Aw);A1.addSeparator();}if(!A5&&!this.addClearFilterMenuItem(A1,Aw)){this.addDynamicSelConsumptionItems(A1,Aw);this.addSelectionRequiredMenuItem(A1,Aw);}}else{if(this.canShowDesignMenuItems()){if(this.isSortingAllowed(Aw)){this.addAttributeSortMenuItem(A1,Aw,true);this.addAttributeSortMenuItem(A1,Aw,false);if(Aw.defn.sorts){this.addClearSortMenuItem(A1,Aw);}A1.addSeparator();}this.addModeMenuItems(A1,Aw);A1.addSeparator();this.addSearchBehaviorMenuItem(A1,Aw);A1.addSeparator();this.addDynamicSelectionMenuItem(A1,Aw);this.addSelectionRequiredMenuItem(A1,Aw);if(!this.addClearFilterMenuItem(A1,Aw)){this.addDynamicSelConsumptionItems(A1,Aw);}A1.addSeparator();if(!A3){this.addQualMenuItems(A1,Aw);this.addSetDisplayFormsMenuItem(A1,Aw);A1.addSeparator();}this.addFilterStyleMenuItem(A1,Aw);this.addMultiSelectMenuItem(A1,Aw);this.addSelectSourceDatasetMenuItem(A1,Aw);if(!A3){this.addAutoSearchMenuItem(A1,Aw);}this.addEnablePreLoadOptionsMenuItem(A1,Aw);A1.addSeparator();if(!(Aw.isObjectParameterSelector&&Aw.isObjectParameterSelector())&&!Au){if(!A3){this.addMenuItemIfSelectTargetsValid(A1,Aw,mstrmojo.desc(12288,"Target the following elements:"));}else{this.addSelectorTargetsMenuItem(A1,Aw);}A1.addSeparator();}if(!mstrApp.isAppStatePresentation()&&!Au){this.addToggleTitleMenuItem(A1);}if(mstrApp.supportFeature(AL.SUPPORT_ICS_HIDEMENU)&&!Au){this.addToggleContextMenuMenuItem(A1);}A1.addSeparator();if(!A3){this.addReplaceWithMenuItem(A1,Aw);A1.addSeparator();}this.addBFAMenuItem(A1,Aw);}else{this.addModeMenuItems(A1,Aw);A1.addSeparator();this.addClearFilterMenuItem(A1,Aw);}}}var A2=this._super(A1);if(Aw&&e.safeCall("supportFeature",mstrApp)(AL.USE_FILTER_ENHANCEMENT)&&!e.safeCall("isAppStatePresentation",mstrApp)()&&this.selectorHasSource(this)&&!this.selectorNotExecutable()&&!A3&&!Au){A1.addSeparator();this.addAdvancedOptionsMenuItem(A1,Aw);}return A2;},showControlOverlay:function D(At,As){this._super(At,As);Ag.addClass(this.domNode,"overlay");},hideControlOverlay:function AY(){this._super();Ag.removeClass(this.domNode,"overlay");},onAppStateChange:function AN(At){var Ay=mstrmojo.vi.VisualInsightApp.APP_STATES,Av=mstrApp.isAppStatePause(),Ax=!!(At.valueWas&Ay.PAUSE),Aw=mstrApp.isAppStatePresentation(),Az=!!(At.valueWas&Ay.PRESENTATION),Au=mstrApp.isAppStateSelection(),As=mstrApp.isAppStateGenerateURL();if(this.generateURLIndicator){if(As){this.domNode&&this.domNode.appendChild(this.generateURLIndicator.domNode);}else{this.generateURLIndicator.domNode.remove();}}if(Aw!==Az){h.call(this,!Aw&&!this.showTitleBar);}if(Au){if(this.dynamicSelIcon){this.dynamicSelIcon.set("visible",false);}}if(this._super){this._super(At);}},addContextMenuItems:function Q(Au,At){this._super(Au,At);var As=this.boxContent;if(!As.isAMSelector()&&this.selectorHasSource()&&!(As&&(As.isInvalid||!As.executable))){this.addMenuItemIfSelectTargetsValid(Au,As,mstrmojo.desc(12288,"Target the following elements:"),false);}if(As&&As.isInvalid){this.addDeleteMenuItem(Au);}return Au;},getFormatMenuItemTarget:function i(As){if(!As||!y.contains(this.titlebarNode,As.getTarget(),true,this.domNode)){return mstrmojo.vi.models.editors.FilterEditorModel.SELECTOR_VALUE;}return this._super(As);},getTargetInfo:function m(){var Aw=this,Av=this.parent,At=this.model,Au=[AJ.GRID,AJ.GRAPH,AJ.MOJOVISUALIZATION,AJ.SURVEYCONTAINER,AJ.PANELSTACK].concat(At.isFromSolrCube(this.getSelectorSource())?[]:[AJ.SELECTOR]),Ax=Av&&Av.getTargetKeysByType(Au),As=[];M.forEach(Ax,function(Ay){var A0=Av.getUnitByKey(Ay),Az=A0.defn;if(!(e.safeCall("isAMSelector",A0)()||e.safeCall("isPanelSelector",A0)()||A0.isIfw||!!(Az&&Az.parasid)||(!!(Az&&Az.paraid)&&(Az.ct!==AX||e.safeCall("isAMSelector",Aw)()||e.safeCall("isPanelSelector",Aw)())))){As.push({n:A0.getDisplayName(),id:Ay,st:Az.style,src:At.getObjectInfo(Az.srcid),fgk:Az.fgk});}});As=As.filter(function(Ay){return Ay.id!==this.k&&Ay.st!==Al.ATTR_QUAL;},this)||[];return{keys:this.getTargetKeys(),items:As};},toggleTitleBar:function AA(As){this._super(As);h.call(this,!As&&!mstrApp.isAppStatePresentation());if(s.isPendoEnabled()&&this.isParameterSelector()){window.pendo.track(B.EVENT_NAME.PARAMETER_SELECTOR_CREATION,{selectorStyle:s.resolveSelectorStyle(this.boxContent.style),location:B.SELECTOR_LOCATION.IN_CANVAS,configurations:As?B.SELECTOR_CONFIGURATIONS.SHOW_TITLE_BAR:B.SELECTOR_CONFIGURATIONS.HIDE_TITLE_BAR});}},updateDisplayName:function q(At,Au,Av,As){this._super(At,Au,Av,As!==undefined?As:true);},getAvatarCls:function AM(){return this._super().concat(["filterAvatar"]);},getSelectorOrientation:function Ak(As){return this.orientation===Ai.VERTICAL?Ao.VERTICAL:Ao.HORIZONTAL;},allowDropFromDataset:function AP(As){return !this.selectorHasSource()&&AO.call(this,As)&&mstrApp.allowWebDashboardDesign();},blockDropWithParameter:function Aa(){return true;},getFormatRelatedActions:function G(A5){var Ax=[],Aw=this.boxContent,A2=Aw.isAMSelector(),Ay=Aw.isParameterSelector(),Au=e.safeCall("isUsedInPushDownFilter",Aw)()||(A5&&A5.isReportParameter),Az=this.getDocModel(),At=this.defn,A1=0,A4=this.height,A3,As,Av=false,A0=function A0(){Ax.push(Az.getUnitFormatAction(this,5,AR(S.SHOW_TITLE_BAR,true)));if(this.orientation===Ai.HORIZONTAL&&!Av){var A6=this.parent,A9=A6.boxLayoutConfig,A7=A9.box,A8=A7&&A7.children&&A7.children[A9.getBoxPath(this)];A1+=Az.getICSCtrlMoveHeightByStyle(A3);if(A8&&A8.f){A8.l+=A1;Ax=Ax.concat(A6.getChildPositionActions(true));Ax=Ax.concat(A6.getBoxLayoutActions(true));}}};if(A2){A3=At.style;}else{if(Ay){A3=Az.getCtrlStyleFromParameterUnit(A5);}else{A3=Az.getCtrlStyleFromDatasetUnit(A5);}}As=this.getSelectorOrientation(A3);Ax=Ax.concat(Az.getCtrlActionsByStyle(A5,Aw.ck,A3,As,parseInt(this.height,10),parseInt(this.width,10),undefined,undefined,{isAMSelector:A2,isParameterSelector:Ay,isReportParameter:Au},undefined,Object.assign(Aw.fmts=Aw.fmts||{},{selectionColor:At.ssc})));if(Ay){if(A4===n){A1=20;if(A3===Al.CHECKBOX){A1+=30;}}else{Av=true;}A0.call(this);}else{if(!A2){if(A5.t===Aj.METRIC){if(A4==="40px"){A1=20;}A0.call(this);}}}return Ax;},dropFromDataSource:function AT(As){var A8=Ab.call(this,As),A1,A6,Av,Ax,Aw,Ay,Au,A5,A4,Az,A7,A2,At,A3,A0;if(A8){A1=this.getDocModel();A6=A1.getDataService();Av=this.defn;Ax=this.getTargetKeys();Aw=[this.k].concat(Ax);Ay=this.boxContent;Au=Ay.k;A5=O.valarray(Av.cgb).map(function(A9){return[A9,true];});A0=this.isParameterSelector();A4=A0&&t.isElementListParameterItem(A8)?C.ELEMENT_LIST:t.isObjectParameterItem(A8)?C.ATTRIBUTE_LIST:C.VALUE;Az=(As.actions||[]).concat([A6.getSetCtrlSourceAction(Av.ck,A8.did,A8.t,A5,A4)]);A7=e.wrapMethods(As.callback,{success:function(BA){var BD=A1.getVizContentPanel().getUnitByKey(Au),BC,BB,A9;A1.partialUpdate(BA.data,A1.getTargetDefn(Aw.join(Y)),BA.defn,[Ay.defn.ckey]);if(mstrApp&&e.safeCall("supportFeature",mstrApp)(AL.USE_FILTER_ENHANCEMENT)){if(BD&&BD.defn){BD.defn.isNewFilter=true;}}if(!(mstrApp.isAppStatePause&&mstrApp.isAppStatePause())){BD=BD.parent.rebuildChild(BD);}BC=O.walk("defn.srcid",BD);BB=O.walk("defn.paraid",BD);A9=e.safeCall("selectorNotExecutable",BD)();BD.boxContent.set("visible",!A9&&(!!BC||!!BB));BD.generateToolbar();if(s.isPendoEnabled()&&A0){window.pendo.track(B.EVENT_NAME.PARAMETER_SELECTOR_CREATION,{selectorStyle:s.resolveSelectorStyle(BD.boxContent.style),location:B.SELECTOR_LOCATION.IN_CANVAS,configurations:B.SELECTOR_CONFIGURATIONS.DEFAULT});}}});if(Av.sus){Az.push(A6.getUnsetSelectorAction({ck:Av.ck,ckey:Av.ckey,resetSuc:true}));}Az.push(A1.getUnitFormatAction(this,1,AR(S.TITLE,A8.n)));A2=this.getFormatRelatedActions(A8);if(A0){A2.some(function(A9,BA){if(A9.act===c){At=BA;return true;}return false;});if(At){A3=A2.splice(At,1)[0];Az=Az.concat(A2);Az.unshift(A3);}else{Az=Az.concat(A2);}}else{Az=Az.concat(A2);}A1.controller.cmdMgr.execute({execute:function(){var A9=A6.newUpdate(this,{extras:mstrmojo.DocDataService.REQUEST_DEFN_DATA});A9.addActions(Az);A9.addCallbacks(A7);this.submitUpdate(A9);},urInfo:{callback:A7,undo:function(){var A9=A1.getVizContentPanel().getUnitByKey(Au),BA=A9.defn;delete BA.srcid;delete BA.httl;if(A0){delete BA.paraid;delete BA.isps;}}}});}},dropFromDataset:function o(As){this.dropFromDataSource(As);},dropFromAllObjects:function b(As){this.augmentDropContextForSchema(As,this.getDocModel());this.dropFromDataSource(As);},validateTarget:function AC(As,At){return !As&&!At;},setTargets:function E(As){this.getDocModel().changeFilterTargets(this,this.getTargetKeys(),As,true,true);},setTargetsWithADTSSetting:function AB(At,As){this.getDocModel().changeFilterTargets(this,this.getTargetKeys(),At,true,true,As);},getTargetKeys:function AI(){var As=this.parent,Au=this.defn.tks,At=(Au&&Au.split(Y))||[],Aw=(As&&As.getTargetKeysByType([AJ.SURVEYCONTAINER]))||[],Av=[];At=At.concat(Aw.reduce(function(Az,Ax){var Ay=As.getUnitByKey(Ax),A0=Ay.defn.fgk;if(At.indexOf(A0)>-1){Av.push(A0);Az.push(Ay.k);}return Az;},[]));At=At.filter(function(Ax){return Av.indexOf(Ax)===-1;});return At;},isSelectionDirty:function A(As){return As.length;},getTitleBarCfg:function w(){var As=this._super(),At=this;As.titleEdited=function Au(Aw,A0,Av){var Az=this.parent,A2={success:function A1(A3){Az.defn.ttl=A3;Az.set("title",A3);},failure:function Ay(A3){mstrApp.onerror(A3);Az.titleBar.set("title",Av);}};Az.draggable=true;if(A0){var Ax=Az.getDocModel();Ax.updateTitle(Aw,this.title,Az.k,Ax.currlaykey,"ttl",A2);}Az.editingTitleCallback(false);};As.getTooltipContent=function(){return At.getTooltipContent();};As.shouldShowTooltip=function(){return !At.isAMSelector()&&!mstrApp.isAppStatePresentation();};As.tooltipOpenDelay=K;return As;},toggleMenuButtonTitleCSS:function H(){var As=mstrApp.isAppStatePresentation(),At=this.isContextMenuVisible(),Au=As&&!At;Ag.toggleClass(this.menuBtnInfo.btn,"context-menu-hidden",Au);},applyCSSFormatToNode:function AH(At,As){var Av=this.boxContent;if(Av&&Av.content&&Av.content.hasRendered){var Au=Av._inSyncPhase;Av._inSyncPhase=true;Av.content.refresh();Av._inSyncPhase=Au;}this._super(At,As);},getBoxConfiguration:function Ac(){var As=this._super();if(this.showTitleBar){As=mstrmojo.hash.clone(As);As.f.v+=20;}return As;},cancel:function N(){this.refresh();},updateAriaLabel:function Ae(){var At=this.title,As=mstrmojo.desc(6189,"Filter");if(At!==this.ariaLabel){this.set("ariaLabel",At);}if(As!==this.roleDesc){this.set("roleDesc",As);}},onfocus:function a(){var As=this.boxContent;if(As.updateAriaLabel){As.updateAriaLabel();}},enterUnit:function g(){this.toggleTabSelectionEffect(false);var As=this.boxContent;if(As&&As.enterUnit){As.enterUnit();}}});mstrmojo.vi.ui.rw.FilterBox.boxConfiguration={f:{h:AK,v:L},o:Ai.VERTICAL};mstrmojo.vi.ui.rw.FilterBox.AMSelectorCtrlOverLay=AW;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.FilterBoxInlineDialog","mstrmojo.Label","mstrmojo.css","mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.DocSelector","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.models.AMSelectorDropZones","mstrmojo.vi.ui.rw.FilterBox","mstrmojo.EnumRWUnitType","mstrmojo.vi.enums.SelectorEnums");var E=mstrmojo.css,d=mstrmojo.array,o=mstrmojo.func,O=mstrmojo.hash,D="\u001E",Q="amselector_default",L={n:mstrmojo.desc(4897,"Default"),t:18,v:Q},H=mstrmojo.vi.ui.rw.FilterBox.AMSelectorCtrlOverLay,l=mstrmojo.EnumRWUnitType,F=mstrmojo.DocDataService.REQUEST_DEFN_DATA,G=mstrmojo.mstr.EnumDSSXMLObjectTypes,S=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,M=mstrmojo.vi.enums.SelectorEnums.ENUM_CONTROL_ORIENTATION;function K(u){return u&&u.did!=="-1"&&u.t!==14;}function g(u){return u&&u.t===G.Metric;}function I(u){return !g(u);}function k(u){return u&&u.isParameter;}function i(u){return !g(u)&&!k(u);}function X(u){if(k(u)){return k;}if(g(u)){return g;}return i;}mstrmojo.vi.ui.rw.AMSelectorBox=mstrmojo.declare(mstrmojo.vi.ui.rw.FilterBox,null,{scriptClass:"mstrmojo.vi.ui.rw.AMSelectorBox",isAllGrid:true,objects:[],replaceRelation:{},tmp_replaceRelation:{},targetDDICs:[],isAttrSelector:undefined,allowFilters:false,init:function p(x){this._super(x);var w,y,u=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if((u||mstrConfig.resolveOnly)&&this.defn.elms){w=O.walk("defn.elms",this);y=O.walk("defn.ces",this);}else{w=O.walk("selectorModel.data.elms",this);y=O.walk("selectorModel.data.ces",this);}this.constructRelation(w,y);E.addWidgetCssClass(this,"mstrmojo-AMSelectorBox");},constructRelation:function c(u,y){var AA=this;this.replaceRelation={};this.tmp_replaceRelation={};this.targetDDICs=[];this.objects=[];this.isAttrSelector=undefined;var AD=this.model.getCGBMap();O.forEach(this.defn.cgb,function(AE){var AF=AA.model.getLayoutUnitDefn(AE);if(AF){AA.replaceRelation[AD[AE]]={id:AF.replace_object,tp:AF.replace_object_type};AA.isAttrSelector=AF.replace_object_type!==4;}});var w=O.walk("defn.tks",this);this.isAllGrid=!(w&&w.split(D).some(function(AE){var AF=AA.model.getLayoutUnitDefn(AE);return AF&&AF.t!==l.GRID;}));if(u&&u.length){var x=this.model.datasets,AB=[],z,AC=u.filter(function(AE){return AE.did!==Q;});AA.isAttrSelector=AC[0].v[0]!=="i";O.forEach(x,function(AF){var AE=AA.isAttrSelector?AF.att:AF.mx;AB=AB.concat(AE);});d.forEach(AC,function(AE){d.forEach(AB,function(AF){if(AE.did===AF.did){z=O.clone(AF);z.n=AE.n;AA.objects.push(z);return false;}});});}},hasTargets:function Y(){return !O.isEmpty(this.replaceRelation);},getSelectorSource:function f(){return d.map(this.objects,function(u){return u.did;});},selectorHasSource:function t(){return this.objects.length;},getZonesModel:function N(){return this.boxContent.zonesModel;},warnClearTargets:function B(x,y,z){var w=mstrmojo.desc(16877,"This selector was used to replace ##. Add ### in this selector will clear all the selected targets. Targets need to be reselected to replace ###.").replace("##",this.isAttrSelector?"attributes":"metrics").replace(/###/g,this.isAttrSelector?"metrics":"attributes");var u=[];var AA=this;u.push(mstrmojo.Button.newWebButton(mstrmojo.desc(2544,"Continue"),function(){var AB=AA.defn,AC=AA.defn.tks.split(D),AD=AA.model.getDataService();y.actions=[].concat(AC.map(function(AE){return AD.getRemoveCtrlTargetAction(AB.ck,AE,AE,false);}));AA.updateCandidates(x,y,z,F);},true));u.push(mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){if(mstrApp.isSingleTier){window.FormWrapper.closeWindow("{}");}}));mstrmojo.warn(w,{},{buttons:u});},allowDropFromDataset:function U(u){return mstrApp.allowWebDashboardDesign()&&this.getAllowedDragItems(u).length;},getAllowedDragItems:function e(u,w){var y=u.getCtxtDragData(),x=(y.items||[]).filter(K);if(x.length){if(this.objects.length===0){return x.filter(X(x[0]));}if(this.objects.length===1&&w&&w.edge===S.ON){return x.filter(X(x[0]));}if(this.isAttrSelector===undefined){this.isAttrSelector=!i(x[0]);}if(this.isAttrSelector){return x.filter(i);}return x.filter(g);}return[];},blockDropWithParameter:function C(){return true;},dropFromDataSource:function q(w,x){var u=this.getAllowedDragItems(w,x);if(u.length){if(!O.isEmpty(this.replaceRelation)&&this.isAttrSelector===g(u[0])&&(this.objects.length===1&&x&&x.edge===S.ON||this.objects.length===0)){this.warnClearTargets(u,w,x);}else{this.updateCandidates(u,w,x);}}},updateCandidates:function b(u,w,y,x){this.updateObjects.call(this,u,y);this.getUpdateCandAction.call(this,w,x);},updateObjects:function J(w,x){var z=this;this.isAttrSelector=!g(w[0]);var AA=w.map(function(AB){d.forEach(z.objects,function(AC,AD){if(AC.did===AB.did){z.objects.splice(AD,1,{});return false;}});return AB;});if(x){var u=x.idx,y=x.edge;switch(y){case S.ON:this.objects.splice(u,1);d.forEach(AA,function(AC,AB){z.objects.splice(u+AB,0,AC);});break;case S.BELOW:d.forEach(AA,function(AC,AB){z.objects.splice(u+1+AB,0,AC);});break;case S.ABOVE:d.forEach(AA,function(AC,AB){z.objects.splice(u+AB,0,AC);});break;}}else{this.objects=this.objects.concat(AA);}this.objects=this.objects.filter(function(AB){return !O.isEmpty(AB);});},getUpdateCandAction:function W(w,AB){var u=this.id,AD=this.getDocModel(),AG=AD.getDataService(),x=this.defn,z=this.getTargetKeys(),y=[this.k].concat(z),AA=this.boxContent,AE=this.objects.map(function(AI){return{id:AI.did,tp:AI.t};}),AC=(w&&w.actions||[]).concat([AG.getSetCandidateObjectsAction(x.ck,AE)]).concat(this.getFormatRelatedActions()),AH=o.wrapMethods(w&&w.callback,{success:function(AJ){var AI=mstrmojo.all[u];AD.partialUpdate(AJ.data,AD.getTargetDefn(y.join(D)),AJ.defn,[AA.defn.ckey]);if(AI){AD.selectVIUnit(u,true);AI.boxContent.set("visible",true);AI.generateToolbar();if(!AI.selectorHasSource()){AI.showControlOverlay(H);}}}});var AF=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(AF){AB=F;}AD.controller.submitUndoRedoUpdates(AC,null,AH,AB);},dropFromDataset:function P(u){this.dropFromDataSource(u);},dropFromAllObjects:function n(u){this.augmentDropContextForSchema(u,this.getDocModel());this.dropFromDataSource(u);},validateTarget:function A(u,w,x){return this.id===x;},setTargets:function a(u){this.getDocModel().changeFilterTargets(this,this.getTargetKeys(),u,false,true);},getPanelForAddAction:function h(){return"editPanel";},getExcludedPanels:function s(){return[];},getEditorPanelContents:function m(w,x,u){return this.getEditorPanelContentsBase(w,x,u);},getTemplateKey:function R(){return this.k;},getSelectorOrientation:function Z(u){return this.defn.horiz?M.HORIZONTAL:M.VERTICAL;},updateAriaLabel:function j(){var w=this.title,u=mstrmojo.desc(4728,"Selector");if(w!==this.ariaLabel){this.set("ariaLabel",w);}if(u!==this.roleDesc){this.set("roleDesc",u);}}});mstrmojo.vi.ui.rw.AMSelectorBox.boxConfiguration={f:{h:150,v:42},o:"v"};mstrmojo.vi.ui.rw.AMSelectorBox.DefaultV=Q;mstrmojo.vi.ui.rw.AMSelectorBox.DefaultOption=L;mstrmojo.vi.ui.rw.AMSelectorBox.DefaultOptionElm=O.copy(L,{did:Q});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.BaseEditorModel","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.CustomVisBase","mstrmojo.ui.CheckList","mstrmojo.ui.editors.controls.Stepper","mstrmojo.NumGroupStepperContentProvider","mstrmojo.gm.GMEnums","mstrmojo.FormatControlHelper","mstrmojo.CustomVisUtility","mstrmojo.customviz.CustomVisEnums");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","ComboBox","PreviewButton","CharacterGroup","FillConfigGroup","LineConfigGroup");var a=mstrmojo.emptyFn,R=mstrmojo.array,H=mstrmojo.hash,h=R.ensureArray,S=mstrmojo.Button.newWebButton,W=mstrmojo.FormatControlHelper,U=mstrmojo.CustomVisUtility,F=mstrmojo.customviz.CustomVisEnums,A=F.ENUM_LEGEND_PROPS,d="30%",e="70%";function b(n,p){var o=null,q;if(typeof p==="number"){R.forEach(n,function(t,s){if(!q){o=s;}else{if((p-t.value)*(p-q.value)<=0){o=Math.abs(p-t.value)<Math.abs(p-q.value)?s:s-1;return false;}}q=t;});}else{if(typeof p==="string"){R.forEach(n,function(t,s){if(t.value.toString()===p){o=s;return false;}});}}return o;}function L(n){return h(n).map(function(o){return{n:o.name,v:o.value};});}function B(p,q,n){var o=this.getHost();o.savePropertyAndUpdateWidget(p,q,n);}function J(o,n){o.set("enabled",!n.disabled);var p=h(n.items);if(p.length>0&&o.getChildControl instanceof Function){p.forEach(function(q){var t=o.getChildControl(q.childName),s=q.disabled;if(t&&s!==undefined){t.set("enabled",!s);}});}}function g(n,q,p,o){n.forEach(function(u,t){u.slot="col"+(t+1)+"Node";});o=H.copy(o,{col1Width:q,col2Width:p,children:n});var s=new mstrmojo.ui.editors.controls.TwoColumnContainer(o);J(s,o);return s;}function f(t){var q=this,p=q.getHost(),n=t.propertyName,o=b.call(this,t.items,p.getProperty(n));var s=this.getPulldown(L(t.items),function(u){B.call(q,n,u,t.config);},o||0);J(s,t);return s;}function l(o,n){var p={};if(n){o.forEach(function(s,q){var t=n[s.propertyName];if(U.parseBoolean(t)){p[q]=true;}});}return p;}function Q(u){var p=this,o=p.getHost(),n=u.propertyName,s=o.getProperty(n),t=U.parseBoolean(s);var q=this.getCheckboxAndLabel(t,u.labelText,function(w){B.call(p,n,w.toString(),u.config);});J(q,u);return q;}function i(o,n,t){var u=this,x=u.getHost(),q=o.propertyName,s=h(o.items).map(function(y){return{n:y.labelText,propertyName:y.propertyName};});var w={items:s,multiSelect:o.multiSelect,selectedIndices:l(s,x.getProperty(q)),postselectionChange:function(y){var AB=y.added,AC=this.items[AB?AB[0]:y.removed[0]],AA=!!AB,z=H.clone(x.getProperty(q))||{};if(this.multiSelect){z[AC.propertyName]=AA.toString();}else{this.items.forEach(function(AD){z[AD.propertyName]=(AD===AC?AA:!AA).toString();});}B.call(u,q,z,o.config);}};H.copy(t,w);var p=new n(w);J(p,o);return p;}function D(n){return i.call(this,n,mstrmojo.ui.ButtonBar,{showIcon:false});}function G(n){return i.call(this,n,mstrmojo.ui.CheckList,{cssClass:"selectors",orientation:n.orientation});}function E(p){var o=this,n=[];R.forEach(p,function(q){n.push(K.call(o,q));});return n;}function O(n){return new mstrmojo.Label({text:n});}function I(u){var s=this,q=s.getHost(),n=u.propertyName,o=u.config;var p={value:q.getProperty(n),onValid:function(){B.call(s,n,this.value,o);}};var t=new mstrmojo.ui.editors.controls.ValidationTextBox(p);J(t,u);return t;}function m(t){var q=this,p=q.getHost(),n=t.propertyName;var o={provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,value:Number(p.getProperty(n))||t.min||0},min:t.min,max:t.max,container:this,onTraverse:function(){B.call(q,n,this.curVal,t.config);}})};var s=new mstrmojo.ui.editors.controls.Stepper(o);J(s,t);return s;}function C(t){var q=this,p=q.getHost(),n=t.propertyName;var o={selectedValue:p.getProperty(n),items:L(t.items),isHostedWithin:false,postselectedValueChange:function(u){B.call(q,n,u.value,t.config);}};var s=new mstrmojo.ui.editors.controls.ComboBox(o);J(s,t);return s;}function Z(p){var o=this.getHost().id;var n=new mstrmojo.Button(mstrmojo.Button.newWebButton(p.labelText,function(){if(typeof p.callback==="function"){p.callback.call(mstrmojo.all[o]);}},p.isHotButton));J(n,p);return n;}function Y(s,w,q,u){var p=s.style,t=s.propertyName,n=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE,o=/^[a-z A-Z\u4e00-\u9fa5:]{1}([\w]|[\u4e00-\u9fa5]|[-.:_]){1,}$/;if(p&&s.style!==n.TWOCOLUMN&&s.style!==n.EDITORGROUP){if(!!t&&q.indexOf(t)!==-1&&w.indexOf(t)===-1){w.push(t);}else{if(!!t&&q.indexOf(t)===-1){q.push(t);}}if(!o.test(t)&&u.indexOf(t)===-1){u.push(t);}return ;}if(p&&(s.style===n.TWOCOLUMN||s.style===n.EDITORGROUP)){Y(h(s.items),w,q,u);}R.forEach(s,function(x){Y(x,w,q,u);});}function K(u){var t=this.getHost();switch(u.style){case P.TWOCOLUMN:var p=h(u.items),s=p[0],o=p[1],q,n;q=(s&&s.width)||d;n=(o&&o.width)||e;return g.call(this,E.call(this,p),q,n,u);case P.PULLDOWN:return f.call(this,u);case P.LABEL:return O.call(this,u.labelText);case P.BUTTONBAR:return D.call(this,u);case P.CHECKBOXANDLABEL:return Q.call(this,u);case P.CHECKLIST:return G.call(this,u);case P.TEXTBOX:return I.call(this,u);case P.STEPPER:return m.call(this,u);case P.COMBOBOX:return C.call(this,u);case P.CHARACTERGROUP:return W.getCharacterGroupControl(t,u);case P.FILLGROUP:return W.getFillGroupControl(t,u);case P.LINEGROUP:return W.getLineGroupControl(t,u);case P.COLORBYGROUP:return W.getColorByGroupControl(t,u);case P.BUTTON:return Z.call(this,u);}}function k(o){var p=this,n=[];R.forEach(h(o),function(q){n.push(K.call(p,q));});return n;}function M(s,o){var n=[],p,q=this;R.forEach(s,function(t){p=h(t.items);switch(t.style){case"EditorGroup":if(p&&p.length){n.push(q.getEditorGroup(k.call(q,p)));}break;default:n.push(K.call(q,t));}});this.replaceChildControls(o,n);}function j(s){var u,n,q,t={},p=-1,o=function(x,w){R.forEach(x,function(AA){var y=AA.style,z=AA.propertyName;if(y){if(y===P.TWOCOLUMN||y===P.EDITORGROUP){o(AA.items,w);}else{if(y===P.COLORBYGROUP){p=w;}else{if(z){t[z]=w;}}}}});};for(q=0;q<s.length;q++){u=s[q];n=u&&u.v;o(n,q);}this.propertyPanelIdxMap=t;this.colorbyGroupPanelIdx=p;}function N(s){var u=this,t=u.getHost(),q=F.LEGEND_PROPERTY_SET,p=t.getLegendProperty(A.SHOW_LEGEND),n=t.getLegendProperty(A.LEGEND_WIDTH_SCALE),o=[],w;w=this.getCheckboxAndLabel(p,mstrmojo.desc(13600,"Show legend"),function(x){t.saveObjectProperty(q,A.SHOW_LEGEND,x.toString());});o.push(w);o.push(K.call(this,{style:P.CHARACTERGROUP,propertyName:q,disabled:!p}));o.push(K.call(this,{style:P.LABEL,labelText:mstrmojo.desc(13601,"Fill:")}));o.push(K.call(this,{style:P.FILLGROUP,propertyName:q,disabled:!p}));o.push(K.call(this,{style:P.BUTTON,labelText:mstrmojo.desc(16685,"Reset Width"),callback:function(){t.saveObjectProperty(q,A.LEGEND_WIDTH_SCALE,undefined);},disabled:!p||n===undefined}));this.replaceChildControls(s,[this.getEditorGroup(o)]);}mstrmojo.vi.models.editors.CustomVisEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.BaseEditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.CustomVisEditorModel",getTargetPulldownItems:function c(t){var p=this._super(t),u,w=this,AC=this.getHost(),x=[],n=[],y=[],s=[],AB,z;u=L(this.getCustomProperty());R.forEach(u,function(AD){if(AD.v){x=x.concat(AD.v);}});if(x.length){Y(x,n,y,s);}AB=n&&n.length;z=s&&s.length;if(AB||z){var AA=mstrmojo.desc(25872,"The following property name is repeated: ##."),o=mstrmojo.desc(25873,"The following property name is invalid: **."),q=(AB&&z)?AA+o:(AB?AA:o);mstrmojo.warn(mstrmojo.desc(null,q).replace("##",n).replace("**",s),{},{buttons:[S(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}else{if(u.length){p=(h(p)).concat(u);R.forEach(p,function(AD){if(AD.v){AD.h=M.bind(w,h(AD.v),t);}});j.call(this,p);}}if(AC.enableLegend&&!U.isInPauseMode()&&AC.hasColorByOrSizeBy()){p.push({n:mstrmojo.desc(2403,"Legend"),v:"CATEGORIES_LEGEND",h:N.bind(this,t)});this.propertyPanelIdxMap[F.LEGEND_PROPERTY_SET]=p.length-1;}return p;},openMoreOptionsEditor:function X(n){return this._super(n,false,false,this.getHost().supportIncrementalFetch);},getCustomProperty:a});var P=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE={PULLDOWN:"PullDown",BUTTONBAR:"ButtonBar",CHECKLIST:"CheckList",STEPPER:"Stepper",COMBOBOX:"ComboBox",TEXTBOX:"TextBox",CHECKBOXANDLABEL:"CheckBoxAndLabel",EDITORGROUP:"EditorGroup",TWOCOLUMN:"TwoColumn",LABEL:"Label",CHARACTERGROUP:"CharacterGroup",FILLGROUP:"FillGroup",LINEGROUP:"LineGroup",COLORBYGROUP:"ColorByGroup",BUTTON:"Button"};mstrmojo.vi.models.editors.CustomVisEditorModel.ENUM_LINE_STYLE=mstrmojo.gm.EnumCombinedLineStyle;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo.VisUtility","mstrmojo.elementHelper","mstrmojo.expr","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.UUID","mstrmojo.ExpressVisList","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.viz.MapHelper","mstrmojo.vi.ui.rw.AMSelectorBox","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.vi.ui.editors.MandatoryFilterNotification","mstrmojo.EnumDSSTemplateCalculationType","mstrmojo.vi.models.VIComponentMap","mstrmojo.util.PlatformHelper","mstrmojo.mstr.EnumWebAPIErrorCodes","mstrmojo.publisher","mstrmojo.vi.models.EnumFieldTypes","mstrmojo.vi.util.FontDetectionUtils");var Cp=mstrmojo.EnumRWUnitType,CH=mstrmojo.EnumReadystate,A9=mstrmojo.hash,AZ=A9.forEach,AM=mstrmojo.func,BM=mstrmojo.Obj.free,CO=mstrmojo.array,BX=mstrmojo.boxmodel,BL=mstrmojo.mixin,CQ=mstrmojo.VisUtility,CZ=mstrmojo.elementHelper,BB=mstrmojo.MetricSelectorUtility,Cb=mstrmojo.UUID,AV=mstrmojo.vi.viz.EnumVizStyles,q=mstrmojo.vi.viz.EnumWidgetTypes,Ce=mstrmojo.vi.viz.EnumDSSDropZones,AK=mstrmojo.vi.viz.MapHelper,CF=mstrmojo.vi.ui.rw,AA=CF._HasVisSelections,Bu=CF.selectors._BrushesAndHighlights,Ah=mstrmojo.DocSelector.DATAPARAMS,G=mstrmojo.publisher,U="\u001E",Bl=CF.AMSelectorBox.DefaultV,B2=mstrmojo.EnumDSSTemplateCalculationType.DSSTemplateCalculationDesignTemplate,A4=mstrmojo.vi.enums.EnumFeatures,BR=mstrmojo.vi.models.VIComponentMap.TYPES,O=mstrmojo.mstr.EnumWebAPIErrorCodes,Cg=mstrmojo.vi.models.EnumFieldTypes,Ac=mstrmojo.expr,CD=Ac.FN,Bq=Ac.TP;var BI={},Bx={},Bm={},CW={},Bh="76CB9F3E366345DF89811386CBAA82CB",BC=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE.DEFAULT,Az=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807],Y=mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK,Be={ESRIMapVisualizationStyle:"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer",GoogleMapVisualizationStyle:"com.microstrategy.web.vf.viewer.GoogleMapApplicationViewer",MapboxVisualizationStyle:"com.microstrategy.web.vf.viewer.MapboxApplicationViewer",KPICardVisualizationStyle:"com.microstrategy.web.vf.viewer.KPICardApplicationViewer",NewGraphMatrixVisualizationStyle:"com.microstrategy.flex.viewer.NewGraphMatrixViewer"},Ax="com.microstrategy.web.vf.viewer.CustomVisApplicationViewer",A8={KeyDriver:Cp.KEYDRIVER,InsightLineChart:Cp.TIMESERIES,InsightLineChartForecast:Cp.TIMESERIES,InsightLineChartOutlier:Cp.TIMESERIES,InsightLineChartSeasonality:Cp.TIMESERIES,InsightLineChartTrend:Cp.TIMESERIES,},Ch=[AV.AUTONARRATIVES,AV.IMAGEENHANCEDKPI];mstrmojo.MultiRWUnitFormatEventsType=null;var Aq={isObservable:function(Ct){var Cs=Ct&&Ct.t;if((!Cs&&Cs!==Cp.LAYOUT)||!this.hasOwnProperty(Cs)||Ct.scriptClass||(Cs===Cp.TEXTFIELD&&!Ct.tmaps)){return false;}return(Cs!==Cp.SUBSECTION||!Ct.dt);},makeObservable:function(Cs){var Ct=Cs.audibles=this[Cs.t]||{};if(Ct.hasOwnProperty("readyState")){Cs.readyState=CH.IDLE;}return new mstrmojo.Model(Cs);},undoObservable:function(Ct){if(!Ct.scriptClass){return Ct;}var Cs={},Cu={id:true,audibles:true,readyState:true,destroyed:true,hasInitBindings:true,disposables:true,_super:true,};Object.keys(Ct).filter(function(Cv){return !(typeof Ct[Cv]==="function")&&!Cu[Cv];}).forEach(function(Cv){Cs[Cv]=Ct[Cv];});return Cs;}};Aq[Cp.PANELSTACK]={"*":false,selKey:true,readyState:true};Aq[Cp.GRID]={"*":false,readyState:true,ds:true};Aq[Cp.GRAPH]={"*":false,readyState:true,ds:true};Aq[Cp.GRIDGRAPH]={"*":false,qsm:true,ds:true};Aq[Cp.SUBSECTION]={"*":false,resize:true,adjustSize:true};Aq[Cp.VISUALIZATION]={"*":false,ds:true};Aq[Cp.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};Aq[Cp.MOJOVISUALIZATION]={"*":false,ds:true};Aq[Cp.LAYOUT]={"*":false,readyState:true};Aq[Cp.TEXTFIELD]={"*":false,cek:true,ds:true,readyState:true};var Ba={};function BD(Cs){return Ba[Cs]||Ba["*"];}Ba["*"]={update:function y(Ct,Cu,Cs,Cw,Cv){if(Cu&&Cu.isNavigation){delete Cu.exp;}A9.copy(Cs,Cu);if(Cs){if(!Cs.ck){delete Cu.ck;}if(!Cs.fs){delete Cu.fs;}if(!Cs.sus){delete Cu.sus;delete Cu.suc;}if(!Cs.sorts){delete Cu.sorts;}if(!Cs.an){delete Cu.an;}if(!Cs.trid){delete Cu.trid;}if(Cs.pta===undefined){delete Cu.pta;}if(!Cs.txninfo){delete Cu.txninfo;}if(!Cs.ccfa){delete Cu.ccfa;}if(!Cs.htbs){delete Cu.htbs;}if(!Cs.btn_flds){delete Cu.btn_flds;}if(!Cs.tmaps){delete Cu.tmaps;}}}};Ba[Cp.UNITCONDITION]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(!Cs){Ct.deleteLayoutUnitDefn(Cv,Ct.getCurrentLayoutKey());}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.PANEL]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(Cu!==Cs){delete Cu.layoutXML;}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.PANELSTACK]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(Cs&&!Cs.iwTabCloseToDismiss){delete Cu.iwTabCloseToDismiss;}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.SELECTOR]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(Cs&&!Cs.cacs){Cs.cacs=0;}if(Cs&&!Cs.scs){Cs.scs=0;}if(Cs&&!Cs.adts){Cs.adts=0;}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.GRID]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(Cs&&!Cs.nonExecutableDataPoints){delete Cu.nonExecutableDataPoints;}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.GRAPH]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if(Cs&&!Cs.nonExecutableDataPoints){delete Cu.nonExecutableDataPoints;}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));Ba[Cp.TEXTFIELD]=BL({update:function y(Ct,Cu,Cs,Cw,Cv){if((Cu&&Cu.tmaps)||(Cs&&Cs.tmaps)){A9.recursiveCopy(Cs,Cu);Cs.fmts=Cu.fmts;if(Cs.tmaps){Cs.tmaps=Cu.tmaps;}}this._super(Ct,Cu,Cs);}},A9.copy(Ba["*"]));function BG(Cy,Cz){function Cx(C1,C0){CO.forEach(C1.disposables,function(C4,C3,C2){if(C4&&C4.k===C0.k){C4.destroy();C2.splice(C3,1);return false;}});return C1.addDisposable(C0);}var Ct=Cy&&Cy.layoutMap&&Cy.layoutMap[Cz];if(Ct){if(!Ct.t){Ct.t=Cp.LAYOUT;}if(Aq.isObservable(Ct)){Ct=Cy.layoutMap[Cz]=Cx(this,Aq.makeObservable(Ct));}return Ct;}var Cs=Cy&&Cy.layouts,Cw=(Cs&&Cs.length)||0,Cv;for(Cv=0;Cv<Cw;Cv++){if(Cs[Cv].k===Cz){var Cu=Cs[Cv];if(!Cu.t){Cu.t=Cp.LAYOUT;}if(Aq.isObservable(Cu)){Cs[Cv]=Cx(this,Aq.makeObservable(Cu));}return Cs[Cv];}}return null;}function x(Cv,Cx,Cu,Ct){var Cs=BG.call(this,Cv,Cx);if(Cu===Cx){Cs._lkz=Cx;return Cs;}if(Cs){var Cw=Cs.units[Cu];if(Cw){if(parseInt(Cw.t,10)===Cp.GRIDGRAPH){if(!Cs.units[Cu+"_0"]){Cs.units[Cu+"_0"]={ck:Cw.ck,fmts:Cw.fmts.gd,txi:Cw.txi,t:Cp.GRID};Cs.units[Cu+"_1"]={ck:Cw.ck,fmts:Cw.fmts.gp,t:Cp.GRAPH};}}if(!Ct&&Aq.isObservable(Cw)&&!Cw.skipObservable){Cw=Cs.units[Cu]=Aq.makeObservable(Cw);var Cy=this.id;Cw.addDisposable({destroy:function(){var C1=mstrmojo.all[Cy];if(!C1){return ;}var C0=C1.disposables.indexOf(Cw);if(C0>=0){C1.disposables[C0]=null;}if(!Cs.units[Cu]){return ;}if(!(mstrApp&&mstrApp.isExpress)){Cs.units[Cu]=Aq.undoObservable(Cs.units[Cu]);}var C2=C1.getWidgetId({k:Cu,wid:1},Cx),Cz=C1.getLayoutDataCache(Cx);if(Cz&&Cz[C2]){Cz[C2].defn=C1.getUnitDefinitions([Cu])[Cu];}}});this.addDisposable(Cw);}Cw._lkz=Cx;}}return Cs&&Cs.units[Cu];}function Cc(Cw,Cv,Cu,Cs){var Ct=this.getChildren(Cw,Cv,0);return(mstrApp.isMobile?(CO.filter(Ct,function(Cz){var Cx=Cu&&Cu.indexOf(Cz.defn.t),Cy=Cz.defn.dk;return Cs?(Cx>-1&&Cy===-1):(Cx<0||Cy!==-1);})):(Cs?[]:Ct));}var Bt=function(Cs,Ct){var Cu=new mstrmojo.StringBuffer();if(Ct){Cu.append("*l"+Ct);}Cu.append("*k"+Cs.k);if(Cs.hasOwnProperty("wid")){Cu.append("*x"+Cs.wid);}Cu.append("*t"+this.buildTime);return Cu.toString();};function CY(Cu){var Ct,Cs,Cx=this.delta,Cv=this.pendingUpdate=this.pendingUpdate||{},Cw=[];if(!A9.isEmpty(Cx)){Cw.push("<updates>");for(Ct in Cx){if(Cx.hasOwnProperty(Ct)){Cs=Cx[Ct];Cw.push(Cs.getUpdates());}}Cv[Cu]=Cx;this.delta={};Cw.push("</updates>");}return Cw.join("");}function AN(Cx,Ct){var Cw;if(Cx){var Cs=CO.isArray(Cx)?Cx:Cx.split(Ct||U),Cv=Cs.length,Cu;for(Cu=0;Cu<Cv;Cu++){Cw=Cw||{};Cw[Cs[Cu]]=x.call(this,this.defn,this.currlaykey,Cs[Cu]);}}return Cw;}function Ae(Cs,Ct){return mstrmojo.all[Bt.call(this,{k:Cs,wid:Ct},this.currlaykey)];}function Br(Ct,Cs){var Cu=(typeof Ct==="string")?this.getLayoutUnitDefn(Ct,Cs):Ct;return(Cu&&Cu.t===Cp.PANELSTACK&&Cu.ifw);}function AX(Ct,Cs){return !Cs||(Ct.wid===Cs);}function J(Cw,C4){var Cz=this,C5=Cz.getSliceCallback(C4),Cu=C5.shared,C6=C4.tks,Ct=C4.eid,C2=Cz.getDataService();if(!C6){return ;}var C1=x.call(Cz,Cz.defn,Cz.currlaykey,Ct);if(!C1){return ;}var Cy=Ct,C0=Cu.tgtDefs[C6],Cs=function(){C0.set("selKey",Ct);},Cv;C0.newSelKey=Ct;if(C1.l){var Cx=C1.dirtyKeys;if(!!Cx){Cy=A9.keyarray(Cx).join(",");Cu.orignalTargetDefs=Cu.tgtDefs=AN.call(Cz,Cy,",");Cv=function(){Cs();AZ(Cu.dataCacheUpdate.upd,function(C7,C8){var C9=mstrmojo.all[C8];if(C9&&C9.setDirty){C9.setDirty(false);}});};}else{if(C4.skipServerCall){Cs();return ;}C2.requestPanelChangeDeferred(Cw,Ct,null,false,false,Cz.newCallback({method:"slice",success:Cs}));return ;}}else{Cv=function(){Cs();C1.l=true;};}var C3=C5.success;C5.success=function(C8){if(!Cz.checkStatus(C8)){return ;}Cz.updateDefnCache(C8.defn,[Ct]);C3(C8);mstrmojo.vi.util.FontDetectionUtils.checkAndShowMissingFontDialog(C8);Cv();var C7=Ae.call(Cz,C4.tks,0);if(C7){C7.clearDirtyChild(Ct);}};C2.requestPanelChangeDeferred(Cw,Ct,Cy,true,!C4.hasLoader,C5);}function B0(Cs,Ct){if(Ct[Ah.ELMSREADY]){Cs[Ah.ELMSREADY]=Ct[Ah.ELMSREADY];Cs.elms=Ct.elms;}if(Ct[Ah.CESREADY]){Cs[Ah.CESREADY]=Ct[Ah.CESREADY];Cs.ces=Ct.ces;}if(Ct[Ah.ELMSREQUEST]){Cs[Ah.ELMSREQUEST]=Ct[Ah.ELMSREQUEST];}if(Ct[Ah.METRICVALUES]){BB.restoreMetricSelectorProps(Cs,Ct);Cs[Ah.METRICVALUES]=Ct[Ah.METRICVALUES];}if(Ct[Ah.CSREADY]){Cs[Ah.CSREADY]=Ct[Ah.CSREADY];BB.restoreMetricSelectorSelections(Cs,Ct);}if(Ct[Ah.DISABLED]){Cs[Ah.DISABLED]=Ct[Ah.DISABLED];}}function CL(Cu,Cs,Ct){if(Cu.defn&&Cu.defn.t>=Cp.GRID){mstrmojo.models.template.DataInterface.inflateGridData(Cu.data);}var Cw=Cu.id,Cv=Cs[Cw]&&Cs[Cw].data;if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&Cv&&Cu.defn.t===Cp.SELECTOR){if(!Cu.data){Cu.data={};}B0(Cu.data,Cv);}if(!Ct){Cs[Cu.id]=Cu;}return Cu;}function X(DF,DL,C8,Ct,DI,C0){var DM=this.currlaykey,DP;if(DF){DP=DF.defn;DM=(DP&&DP._lkz)||DF.k;}var Cz=this.getLayoutDataCache(DM),DD=(!C8&&!A9.isEmpty(Cz)),Cu;if(!DF){Cu=this.data;}else{var C7=DF.data||DF;if(DD){Cu=Cz[Bt.call(this,C7,DM)];Cu=(Cu&&Cu.data)||Cu||C7;}else{Cu=C7;}}if(!!Cu.sections){this._buildingLayoutKey=Cu.k;}var C2=Cu?this.extractChildren(Cu):[],DE=[];var C4=(C2&&C2.length)||0;if(C4){DP=this.defn;var DG=!DF,DB=DF?DM:null,DS=(DF&&((DF.defn)?DF.defn.t:x.call(this,DP,DB,DF.k).t));var Cw=(DS===Cp.GRIDGRAPH),C9=(DS===Cp.DETAILS),DN,C5;C2=DL(C2);for(DN=0,C5=C2.length;DN<C5;DN++){var DA=C2[DN];if(Cw){DA.k=DF.k;DA.wid=DF.data.wid;}var C3=DA.k,DO=DA.wid,DH=Bt.call(this,DA,DB),DC=!DG&&Br.call(this,C3,DB),Cx;if(!C0){if(!DG&&DC&&(!C8||!this.getInfoWinByKey(C3))){var Cs=this.getLayoutUnitDefn(C3),DJ=CL({data:DA,defn:Cs,id:DH,k:C3,p:Cu},Cz,DI);if(!this.getInfoWinByKey(C3,DO)){var Cy=this.infoWindows=this.infoWindows||{};Cy[Cs.n]=DJ;this.addInfoWinByKey(C3,DJ);}continue;}else{if(!DG&&DC&&C8){var Cv=this.getInfoWinByKey(C3,DO);if(Cv){this.mergeInfoWin(DA,Cv.data,this.getCurrentLayoutKey());}}}}if(Cw){DH+="_"+DN;Cx=x.call(this,DP,DB,DA.k+"_"+DN);}else{Cx=x.call(this,DP,DB||DA.k,DA.k);}if(C9){Cx.dt=true;}if(Cz===null&&(Cx.t===Cp.LAYOUT)){Cz=this.getLayoutDataCache(DA.k);}var DQ;if(Cx&&Cx.t===Cp.PANEL&&Cz[DH]&&DD){var C1=this.extractChildren(DA)||[],DK=this.extractChildren(Cz[DH].data)||[],DR=false;if(C1.length!==DK.length){CO.forEach(DK,function(DU){var DT=CO.find(C1,"k",DU.k);if(DT>-1){C1[DT]=DU;DR=true;}});if(DR){DK.splice(0,DK.length);CO.forEach(C1,function(DT){DK.push(DT);});}}DQ=DA;}else{DQ=DD?(Cz[DH]&&Cz[DH].data)||DA:DA;}var C6={k:DA.k,id:DH,defn:Cx,data:DQ,p:Cu};if(!Cz[DH]){CL(C6,Cz,DI);}DE.push(C6);}}return Ct?{nodes:DE,total:C4}:DE;}function CR(Cy,Ct,Cx){var Cs=BX.px2Inches,Cu=this.getZoomProps(),Cw=1,Cv=2;if((Cx&Cw)>0){Cy.FormattingPosition={Left:Cs(Cu,Ct.x||0),Top:Cs(Cu,Ct.y||0)};}if((Cx&Cv)>0){Cy.FormattingSize={Height:Cs(Cu,Ct.h||0),Width:Cs(Cu,Ct.w||0)};}if(Ct.z){Cy.FormattingOrder={ZIndex:Ct.z};}}function Aw(Ct){function Cs(Cv,Cu){return Cv<Cu?-1:(Cv>Cu?1:0);}Ct.sort(function(Cv,Cu){var Cw=Cs(Cv.levelID,Cu.levelID);return Cw!==0?Cw:Cs(Cv.elemID,Cu.elemID);});return Ct;}function BT(Cs,Ct){return Cs.map(function(Cu){return Cu[Ct];}).join(U);}function AQ(Cs){return BT(Cs,"levelID");}function h(Cs){return BT(Cs,"elemID");}function Bs(Cu){if(Cu){this.resetColorByPalette();}this.resetColorBy();var Ct=this.getColorByObject();var Cs=this.defn&&this.defn.epm;if(Cs){Cs.forEach(function(Cv){Cv.epmv.forEach(function(Cw){var Cy=Aw(Cw.k.chn.map(function(C1){var C0=C1.emt!==2;return{levelID:C0?(C1.at.did||C1.ei.split(";").slice(-1)):"-1",elemID:C0?C1.ei:C1.mt.did};})),Cz=AQ(Cy),Cx=h(Cy);if(!Ct[Cz]){Ct[Cz]={};}Ct[Cz][Cx]=JSON.parse(Cw.v.vv);});});}}function Q(Cs){if(Cs){Cs=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(Cs);}return Cs;}function BK(){var Ct=this.data&&this.data.layouts,Cs=Ct[CO.find(Ct,"k",this.getCurrentLayoutKey())],Cv=Cs&&Cs.gbys&&Cs.gbys.groupbys,Cu=false;CO.forEach(Cv,function(Cw){if(Cw.unit&&Cw.unit.elms&&Cw.unit.elms[Cw.unit.idx].v==="u;"){Cu=true;return false;}});return Cu;}function B5(Cs,Cu,Ct){Cs=Cs.replace(Cu,function(Cv,Cw){if(Cw==="&"){return(Ct+"&");}return Ct;});if(mstrmojo.dom.isIE){Cs+="&cb"+mstrmojo.now()+"=1";}return Cs;}function B4(C5,C3,Cx,C8,Cy){var Cu=Cy?C3:C3.data,C4=this.getChildren(C3,true,undefined,undefined,undefined,true),C1=mstrmojo.all[C3.id];if(!C4.length){return ;}var Cv,Cz=[],C7=false,C0=this.extractChildren(Cu);for(Cv in C4){var Cs=C4[Cv],Ct=Cs.id,C6,Cw=Cs.k;if(C0){var C2=CO.find(C0,"k",Cw);C6=C2>=0?C0[C2]:null;if(C6&&C5.hasOwnProperty(Cw)){Cz.push({id:Ct,parentArray:C0,childData:C6});if(A9.walk("defn.t",C1)===Cp.PANEL){C7=true;}}}B4.call(this,C5,Cs,Cx,C8);}Cz.forEach(function(C9){CO.removeItem(C9.parentArray,C9.childData);delete Cx[C9.id];});if(C7&&C1){C8.changedParentPanel[C1.id]=true;C8.upd[C1.id]=true;}}function By(Cu,Ct,Cs,Cx){Ct=Ct||this.getCurrentLayoutKey();Cx=Cx||[];var Cw=this,Cv=Cw.extractChildren(Cu)||[];Cv.forEach(function(C0){var Cz=false;if(C0.k){Cz=Cx.indexOf(C0.k)!==-1;if(!Cz){var Cy=Bt.call(Cw,{k:C0.k,wid:1},Ct);Cw.deleteDataCache(Cy,Ct);Cs[C0.k]=Cy;}}if(!Cz){By.call(Cw,C0,Ct,Cs,Cx);}});}function Bg(Cs,Cw,Cy){var Ct=Cw.k,Cu=Cs.defn._lkz,Cx={k:Ct,id:Bt.call(this,Cy,Cu),data:Cy},Cv=Cy.f;Cw._lkz=Cu;Cw.isScopeFilter=true;Cw.iifp=true;if(Cw.fmts&&!Cw.fmts.height){Cw.fmts.height=(Cv===CD.BETWEEN||Cv===CD.NOT_BETWEEN)?"120px":"0px";}if(Cy&&Cy.fid&&!Cy.dt&&Array.isArray(Cy.cs)){Cy.cs.some(function(Cz){Cy.dt=Cz.dtp;return true;});}if(Aq.isObservable(Cw)){Cx.defn=Aq.makeObservable(Cw);}return Cx;}function Ao(C3,C2,C4){if(!C3){return ;}var Cw=function(){var C5;if(this.getVIMap&&this.getVIMap()&&this.getVIComponent){C5=this.getVIComponent(BR.FILTER_PANEL);}return C5&&C5.node;},Cu=Cw.call(this);if(!Cu){return ;}var Cv=C3.globalFilterControls||[],Ct=function(){if(!C2){return false;}var C5=Object.keys(C2);if(C5.length===1&&C5[0]==="undefined"){return false;}return true;};if(!Ct()){var Cy=this.data,C1=Cy&&Cy.globalFilterControls||[],Cx=function Cx(){if(C1.length!==Cv.length){return true;}var C5=new Set(Cv.map(function(C6){return C6.k;}));return C1.some(function(C6){return !C5.has(C6.k);});},C0=function C0(){var C7=new Map(C1.map(function(C8){return[C8.k,C8];})),C5=new Map(Cv.map(function(C8){return[C8.k,C8];})),C6=[];C7.forEach(function(DA,C8){var C9=(DA&&DA.cs)||[],DD=C5.get(C8),DC=(DD&&DD.cs)||[];if(C9.length!==DC.length){C6.push(C8);return ;}var DB=C9.some(function(DF,DE){return !A9.equals(DF,DC[DE]);});if(DB){C6.push(C8);}});return C6;};if(Cx()){this.data.globalFilterControls=Cv;C4.tgts[Cu.id]=true;C4.upd[Cu.id]=true;}else{var Cz=C0();if(Cz.length>0){this.data.globalFilterControls=Cv;var Cs=this.getScopeFilters(Cu,Cz);Cs.forEach(function(C5){var C6=C5.id;C4.tgts[C6]=true;C4.upd[C6]=true;});}}return ;}if(Object.keys(C2).length===0){return ;}this.data.globalFilterControls=Cv;var Cs=this.getScopeFilters(Cu,Object.keys(C2));Cs.forEach(function(C5){var C6=C5.id;C4.tgts[C6]=true;C4.upd[C6]=true;});}function Cq(Cs,Cv){var Cy=Cs&&Cs.FormattingPatterns||{},Cu=Cs&&Cs.FormattingView||{},Cw=Cs&&Cs.FormattingSize||{},Ct=Cs&&Cs.FormattingBorder||{},Cx=Cs&&Cs.FormattingAppearance||{};return Cv===3||Cy.SelectorSelectionColor!==undefined||Cu.SelectorRadius!==undefined||Cw.SelectorWidth!==undefined||Ct.SelectorBorderColor!==undefined||Cy.SelectorBackgroundColor!==undefined||Cx.FormatVersionControl!==undefined||Cy.SelectorSelectionMarkerColor!==undefined||Ct.SelectorSelectionMarkerBorderColor!==undefined||Cy.SelectorSelectionRangeColor!==undefined||Cy.SelectorSelectionSliderFontColor!==undefined||Cy.SelectorSliderColor!==undefined;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",allowHtmlContent:undefined,forbidHtmlContent:undefined,encodeHtmlContent:undefined,encodeMetricContent:undefined,colorBy:{},colorByPalette:{},init:function Ci(Cs){this._super(Cs);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();Bs.call(this);Bm={};CW={};this.buildTime=mstrmojo.now();},hasFeatures:function F(Cw){var Cu=this.features;if(!Cu){return false;}var Ct=Cw.split(","),Cs=Ct.length,Cv;for(Cv=0;Cv<Cs;Cv++){var Cx=Ct[Cv],Cy=Cx.match(/^!/);if(Cy){Cx=Cx.replace("!","");}if(!!Cy===!!Cu[Cx]){return false;}}return true;},makeObservable:function I(Cs){return Aq.makeObservable(Cs);},isObservable:function CK(Cs){return Aq.isObservable(Cs);},undoObservable:function Ap(Cs){return Aq.undoObservable(Cs);},checkStatus:function e(Cs){if(parseInt(Cs.status,10)===4){Cs.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(Cs);return false;}return true;},getDataService:function CI(){var Ct=this.dataService;if(!Ct){var Cs={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){Ct=mstrApp.modelFactory.newDataService("Document",Cs);}else{Ct=mstrApp.viewFactory.newDocDataService(Cs);}this.dataService=Ct;this.disposables.push(Ct);}return Ct;},getNextKey:function Ca(){return"W"+(mstrmojo.resolveFeature("guid-as-node-identifier")?Cb.create():this.keySeed++);},resetKeySeed:function Bd(Cs){this.keySeed=Cs;},getWidgetId:function Cj(Cs,Ct){return Bt.call(this,Cs,Ct||this.getCurrentLayoutKey());},getUIState:function Bo(){return{};},ondefnChange:function Ad(){var Cx=this.defn,Cu=Cx&&Cx.layouts,Ct={};if(Cx){Cx.layoutMap=Ct;var Cw=(Cu&&Cu.length)||0,Cv;for(Cv=0;Cv<Cw;Cv++){var Cs=Cu[Cv];Ct[Cs.k]=Cs;}}},extractChildren:function CM(Cs){return Cs&&(Cs.sections||Cs.subsections||Cs.objects||Cs.panels||Cs.layouts||Cs.children);},getChildren:function Z(Cw,Cv,Cz,Cu,Cy,Ct,Cs){Cz=Cz||0;var Cx=function(C0){return C0.slice(Cz,Cz+(Cu||C0.length));};return X.call(this,Cw,Cx,Cv,Cy,Ct,Cs);},getChildrenByKey:function AU(Cv,Cu,Ct,Cx,Cs){var Cw=function(Cz){var Cy=[],C0;CO.forEach(Ct,function(C1){C0=CO.find(Cz,"k",C1);if(C0!==-1){Cy.push(Cz[C0]);}});return Cy;};return X.call(this,Cv,Cw,Cu,Cx,undefined,Cs);},getTargetDefn:function Ak(Cs){return AN.call(this,Cs);},getUnitDefinitions:function(Ct,Cs){return AN.call(this,Ct,Cs);},getUnitInstance:function B(Cs,Ct){return mstrmojo.all[Bt.call(this,{k:Cs,wid:Ct},this.currlaykey)];},getFirstUnitInstanceByName:function Ck(Cv){var Cs=BG.call(this,this.defn,this.currlaykey);if(Cs){var Ct=Cs.units,Cu;for(Cu in Ct){var Cw=Ct[Cu];if(Cw.n===Cv){return this.getUnitInstance(Cu,1);}}}return null;},getLayoutUnitDefn:function BU(Ct,Cs){return x.call(this,this.defn,Cs||this.currlaykey,Ct);},mergeInfoWin:function AI(Cw,Cv,Cs){if(Cw.k&&Cv.k&&Cw.k===Cv.k){var Cu=this;var Ct=this.getLayoutUnitDefn(Cw.k,Cs);if(Ct&&Ct.t===Cp.PANELSTACK){CO.forEach(Cv.panels,function(Cy){var Cx=CO.filterOne(Cw.panels,function(Cz){return Cz.k&&Cz.k===Cy.k;});if(!Cx){Cw.panels.push(Cy);}else{AI.call(Cu,Cx,Cy,Cs);}});}else{CO.forEach(Cv.objects,function(Cy){var Cx=CO.filterOne(Cw.objects,function(Cz){return Cz.k&&Cz.k===Cy.k;});if(!Cx){if(Cw.objects){Cw.objects.push(Cy);}}else{AI.call(Cu,Cx,Cy,Cs);}});}}},getRawLayoutUnitDefn:function Cf(Ct,Cu,Cs){return x.call(this,Cu||this.defn,Cs||this.currlaykey,Ct,true);},getSelectedKey:function AW(Cs){return(!Cs&&this.currlaykey)||null;},getCurrentLayoutKey:function A7(){return this.currlaykey;},getAllLayoutKeys:function g(){var Cs=[];CO.forEach(A9.walk("defn.layouts",this),function(Ct){Cs.push(Ct.k);});return Cs;},getLayoutKeyByUnitKey:function CS(Cw){var Cu=this.defn,Cv=Cu&&Cu.layouts,Cs,Ct=null;CO.forEach(Cv,function(Cx){Cs=Cx.units;if(Cs[Cw]&&(!Cs[Cw]._isDeleted)){Ct=Cx.k;return !Cs[Cw];}});return Ct;},deleteLayoutUnitDefn:function BO(Cu,Cs){var Ct=this.getLayoutDefn(Cs||this.getLayoutKeyByUnitKey(Cu));if(Ct){delete Ct.units[Cu];}},getUpdateLayoutDefaultPanelCallback:function Co(){var Cs=this;return{success:function(Ct){if(Ct&&Ct.defn&&Ct.defn.layouts){var Cu=Cs.defn.layoutMap;CO.forEach(Ct.defn.layouts,function(Cy){var Cx=Cu[Cy.k];if(Cy.units&&Cx&&Cx.units){var Cw=Cy.units,Cv=Cx.units;A9.forEach(Cw,function(C0,Cz){if(Cv[Cz]&&C0.t===Cp.PANEL&&C0.l!==undefined&&C0.layoutXML){Cv[Cz].l=C0.l;}if(Cv[Cz]&&C0.t===Cp.SELECTOR&&C0.sync!==undefined){Cv[Cz].sync=C0.sync;}});}});}}};},getLayoutDefn:function Bb(Cs){var Ct=this.defn,Cu=Ct&&Ct.layouts;return Cu&&Cu[CO.find(Cu,"k",Cs)];},getCurrentLayoutDef:function R(){return this.getLayoutDefn(this.getCurrentLayoutKey());},updateDatasets:mstrmojo.emptyFn,replaceLayout:function A2(C0,Ct,C1){var Cx=this.defn,Cw=this.data,Cu=Ct&&Ct.defn,Cs=Ct&&Ct.data,C2=this.dataCache;if(C2&&C2[C0]){C2[C0]={};}var Cz=(Cw&&Cw.layouts)||(Cx&&Cx.layouts),Cv,Cy=false;for(Cv=(Cz&&Cz.length-1)||0;Cv>=0;Cv--){if(Cz[Cv].k===C0){break;}}if(C1&&Cv<0){Cv=CO.find(Cs.layouts||Cu.layouts,"k",C0);Cy=true;}this.bs=Ct.bs;if(Cs){if(Cy){CO.insert(Cw.layouts,Cv,[Cs.layouts[Cv]]);}else{Cw.layouts[Cv]=Cs.layouts[Cv];}Cw.elems=Cs.elems;}if(Cu){if(Cy){CO.insert(Cx.layouts,Cv,[Cu.layouts[Cv]]);}else{Cx.layouts[Cv]=Cu.layouts[Cv];}this.ondefnChange();}},replaceMultipleLayouts:function E(Cw){var Cv=this.defn,Cx=this.data,Ct=Cw&&Cw.defn,Cu=Cw&&Cw.data,Cs=this.dataCache;if(Cs){CO.forEach(Object.keys(Cs),function(Cy){delete Cs[Cy];});}this.bs=Cw.bs;if(Cu){Cx.layouts.splice(0,Cx.layouts.length);CO.forEach(Cu.layouts,function(Cy){Cx.layouts.push(Cy);});Cx.elems=Cu.elems;}if(Ct){Cv.layouts.splice(0,Cv.layouts.length);CO.forEach(Ct.layouts,function(Cy){Cv.layouts.push(Cy);});this.ondefnChange();}},loadLayout:function C(Cs,Cu,Ct){this.replaceLayout(Cs.currlaykey,Cs);this.raiseEvent({name:"rebuildLayout",unloadCache:!!Cu,restoreIW:!!Ct});},loadLayoutForAutoDash:function BF(C0,Cx){var C2=this,C3=this.controller.view,Cy=A9.walk("defn.layouts",this)||[],Cu=A9.walk("data.layouts",this)||[],Cs=A9.walk("defn.layouts",C0)||[],C6=Cs.length>Cy.length,Cz=Cs.length<Cy.length;if(Cx){this.replaceMultipleLayouts(C0);this.updateTxns(C0.txns);C3.updateLayouts(C0);}else{if(C6){var C4=Cs.map(function(C9){return C9.k;}),C1=Cy.reduce(function(DA,C9){DA[C9.k]=true;return DA;},{}),Ct=CO.filter(C4,function(C9){return C1[C9]!==true;});CO.forEach(Cs,function(C9){C2.replaceLayout(C9.k,C0,Ct.includes(C9.k));});C3.autoDashAddLayoutCallback(C0,Ct,C3.getSelectedLayoutWidget());}else{if(Cz){var Cw=Cy.map(function(C9){return C9.k;}),C5=Cs.reduce(function(DA,C9){DA[C9.k]=true;return DA;},{}),C8=CO.filter(Cw,function(C9){return C5[C9]!==true;}),Cv=C8[0],C7=this.currlaykey!==C0.currlaykey;CO.forEach(C8,function(DA){var C9=Cw.indexOf(DA);if(C9!==-1){Cw.splice(C9,1);Cy.splice(C9,1);Cu.splice(C9,1);}});this.updateTxns(C0.txns);this.replaceLayout(C0.currlaykey,C0,false);C3.autoDashDeleteLayoutCallback(C0,Cv,C7);}else{CO.forEach(Cs,function(C9){C2.replaceLayout(C9.k,C0);});}}}this.raiseEvent({name:"rebuildLayout",unloadCache:false,restoreIW:false});},getLayoutDataNode:function t(Ct){var Cs=this.data&&this.data.layouts;return CO.filterOne(Cs,function(Cu){return Cu.k===Ct;});},getLayoutDataCache:function CU(Ct){if(!Ct){return null;}var Cs=this.dataCache;if(!Cs){Cs=this.dataCache={};}if(!Cs[Ct]){Cs[Ct]={};}return Cs[Ct];},saveRW:function BV(Ct,Cv){var Cu=mstrmojo.desc,Cs=this.getDataService();Cs.saveRW({objName:Ct||this.n,folderID:this.pfid,saveAsFlags:1},Cv||{success:function(Cw){mstrmojo.alert(Cu(3819,"Document Saved")+": "+Cw.n);}});},saveAsRW:function Cl(Cw,Cv){var Cu=this,Ct=!!(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig&&mstrConfig.resolveOnly),Cs=Cu.prompt_option;switch(Cs){case 0:Cs=3;break;case 4:Cs=1;break;default:Cs=2;}var Cx=mstrmojo.hash.copy(Cw,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||Cu.sfid||Cu.pfid,saveFromDesignMode:false,saveAsReportSaveAsFlags:Cs,resolveOnly:Ct,rwb:Cu.bs});if(Cv){Cx.target=Cv;Cx.saveAsOrigin=13;}mstrmojo.form.send(Cx,null,"post");},getDocPropsActions:function AL(Cs){var Ct={act:"setDocumentProperties",props:Cs};A9.forEach(Cs.RWDocumentProperties,function(Cv,Cu,Cw){Cw[Cu]=String(Cv);});return Ct;},saveDocProps:function BH(Ct,Cx,Cv,Cz,C0){var Cy=this.getDataService(),Cs=Cv?null:mstrmojo.DocDataService.RAPID_EXEC,Cu=mstrmojo.DocDataService.REQUEST_DEFN_DATA,Cw=C0||[];if(Object.keys(Ct).length){Cw.push(this.getDocPropsActions(Ct));}if(Cx){this.controller.cmdMgr.execute({execute:function(){this.submit(Cw,Cz||{},A9.copy(Cu,A9.copy(Cs,{})));},urInfo:Cx});}else{Cy.submitUpdates(Cw,Cz||{},A9.copy(Cu,A9.copy(Cs,{preserveUndo:true})));}},saveDocTimeZone:function AP(Ct,Cs,Cu){this.controller.cmdMgr.execute({execute:function(){this.submit(Ct,Cu||{},{style:{params:{treesToRender:Cs}}});},urInfo:{callback:Cu}});},partialUpdate:function CJ(Cv,Cu,C0,C2,Ct,Cw,Cx,Cs,Cz){var C1=this,Cy=function(){CO.forEach(C2,function(C4){var C5=Ae.call(C1,C4,1);if(C5&&C5.parent&&C5.parent.hasRendered&&C5.parent.toggleMenuButtonTitleCSS){C5.parent.toggleMenuButtonTitleCSS(true,true);}});};if(C0){this.updateBaseTypePropsInLayoutDefnCache(C0,["executable","em"]);this.updateDefnCache(C0,C2,Ct);}if(Cx){this.updateTxns(Cx);}if(Cs){this.updateDatasets(Cs,this.datasetsSettings);}if(Cv){if(mstrApp){mstrApp.isPartialUpdate=true;}var C3=this.updateDataCache(Cv,Cu,undefined,Ct,Cz);if(Cw){C3=Cw(C3);}this.raiseEvent({name:"partialUpdate",tree:Cv,ids:C3});if(mstrApp){mstrApp.isPartialUpdate=false;}Cy();return C3;}Cy();},clearNotReadyEffects:function l(Cs){if(!Cs||!CO.isArray(Cs)){return ;}var Ct=this;CO.forEach(Cs,function(Cv){var Cw=Ct&&Ct.getVisUnitByKeyFromMojoAll&&Ct.getVisUnitByKeyFromMojoAll(Cv);if(!Cw){return ;}var Cu=true;if(Cw.boxContent&&Cw.boxContent.isBinaryData){Cu=!AM.safeCall("isDataNotReady",Cw.boxContent)();}if(Cu){AM.safeCall("removeNotReadyEffect",Cw)();}});},notifyVizStatusChange:function Bj(){this.raiseEvent({name:"vizStatusChange"});},refreshDefinition:function CV(Cv,Cu,Ct,Cw){var Cs=this.getLayoutUnitDefn(Cv,Ct||this.getCurrentLayoutKey());if(!Cs){return ;}BD(Cs.t).update(this,Cs,Cu,Cw,Cv);},loadPartialData:function H(Cx,Ct){var Cv={};Cv[Ct]=x.call(this,this.defn,this.currlaykey,Ct);var Cu=this.updateDataCache(Cx,Cv),Cs=this.getLayoutDataCache(this.getCurrentLayoutKey()),Cw=this;CO.forEach(Cx.layouts,function(Cy){var Cz=Cy&&Cy.xtabStyles;if(Cz){Cw.raiseEvent({name:"updateStyles",key:Cy.k,updatedStyles:Cz});}});AZ(Cu,function(Cz,Cy){if(Cy==="upd"){AZ(Cz,function(C1,C2){var C0=mstrmojo.all[C2];if(C0&&C0.update){C0.update(Cs[C2]);}});}});},updateDefnCache:function N(Ct,C0,Cx){var C3=this.currlaykey,Cw=BG.call(this,Ct,C3),C5=BG.call(this,this.defn,C3),C1=function(C6,C7){var C8;for(C8 in C7){if(C6[C8]===undefined){C6[C8]=C7[C8];}else{if(C6[C8].latestctlkey!==C7[C8].latestctlkey){C6[C8].latestctlkey=C7[C8].latestctlkey;}}}},C4=Cw&&Cw.units,C2=C5&&C5.units,Cv=Cw&&Cw.cgbMap,Cs=C5&&C5.cgbMap,Cy=Cx&&Q(Cx).defn,Cz=this;if(C4&&C0){C0=C0.reduce(function(C7,C9){var C8=C2[C9],C6=C4[C9];C7.push(C9);if(C8&&C8.t===Cp.UNITCONDITION&&!C6){A9.forEach(C2,function(DB,DA){if(DB&&DB.pnk===C9){C7.push(DA);}});}return C7;},[]);}CO.forEach(C0,function(C6){Cz.refreshDefinition(C6,C4&&C4[C6],null,Cy&&Cy[C6]);});if(C4){C1(C2,C4);}if(Cv){C1(Cs,Cv);this.raiseEvent({name:"CGBMapChange",cgbMap:Cs});}if(Ct){this.defn.globalFilterControls=Ct.globalFilterControls;const Cu=Ct.root&&Ct.root.pdfHeaderAndFooters;if(Cu&&this.defn.root){this.defn.root.pdfHeaderAndFooters=Cu;}}},updateBaseTypePropsInLayoutDefnCache:function AH(Cu,Cx){var Cw=this.currlaykey,Ct=function(C0,Cz){var C2=C0&&C0.layouts,C1;if(!C2){return ;}CO.forEach(C2,function(C3){if(C3.k===Cz){C1=C3;return false;}});return C1;},Cs=Ct(Cu,Cw),Cv=Ct(this.defn,Cw),Cy=A9.walk("defn.layoutMap."+Cw,this);if(Cv&&Cs){CO.forEach(Cx,function(Cz){if(typeof Cs[Cz]==="object"){return ;}if(!Cs.hasOwnProperty(Cz)){delete Cv[Cz];if(Cy){delete Cy[Cz];}}else{Cv[Cz]=Cs[Cz];if(Cy){Cy[Cz]=Cs[Cz];}}});}},deleteDataCache:function B6(Cu,Ct){Ct=Ct||this.getCurrentLayoutKey();var Cs=this.getLayoutDataCache(Ct);if(Cs[Cu]){delete Cs[Cu];}},cleanDescendantsDataCache:function Bz(Cu,Ct,Cv){var Cs={};By.call(this,Cu,Ct,Cs,Cv);return Cs;},setDataReady:function Bp(C1,Cy,Ct,Cz,Cs,C2){var Cw=this.extractChildren(this.data),Cu=this.getLayoutDataCache(this.getCurrentLayoutKey()),Cx=this,C0=false;if(!Cw){return ;}function Cv(C3){if(!C3){return ;}CO.forEach(C3,function(C4){if(C4.k===C1){if(Ct){C4[Ct]=Cz;}if(CO.isArray(Cs)&&C2){CO.forEach(Cs,function(C6,C5){C4[C6]=C2[C5];});}else{if(Cs){C4[Cs]=C2;}}C0=true;return false;}else{if(!C0){Cv(Cx.extractChildren(C4));}}});}Cv(Cw);if(!Cu[Cy]){Cu[Cy]={};}Cu[Cy][Ct]=Cz;},cleanLocalLayoutData:function Cd(Ct,Cw){var Cs={changedParentPanel:{},upd:{}},Cv=this.data.layouts,Cu={};Ct.forEach(function(Cy){var Cx=Cw||this.getLayoutKeyByUnitKey(Cy);if(!Cx){return ;}if(!Cu[Cx]){Cu[Cx]={};}Cu[Cx][Cy]=true;},this);A9.forEach(Cu,function(C0,Cz){var Cx=Cv[CO.find(Cv,"k",Cz)],Cy=this.getLayoutDataCache(Cz);B4.call(this,C0,Cx,Cy,Cs,true);},this);return Cs;},updateTxns:function Aj(Cs){if(A9.isEmpty(Cs)){delete this.txns;delete this.hasTxn;}else{this.txns=Cs;this.hasTxn=true;}},updateDataCache:function w(C3,Cs,Cw,Cx,Cz){var Cv=this.getLayoutDataCache(this.getCurrentLayoutKey()),C5=Cx&&Q(Cx).data,C1={changedParentPanel:{},ifws:{},upd:{},tgts:{},def:{},secs:{}},C7=this,Cy=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),C8=function(DD,DB){var DE=C7.extractChildren(DD.data);if(DE){return ;}var DG=C7.extractChildren(DB);for(var DC in (DG||[])){if(!!DG[DC]){var DF=DG[DC];if(DF.k===DD.k){if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&DG[DC]&&DD.defn&&DD.defn.t===Cp.SELECTOR){if(!DD.data){DD.data={};}B0(DD.data,DG[DC]);}DG[DC]=DD.data;}}}},C0=function(DI,DC,DB){var DG=Cv[DI],DD=DG&&DG.k;if(C5){var DF=mstrmojo.all[DI];if(DF){var DE=C5[DD];if(DE){if(!A9.isEmpty(DE.exclude)){A9.copy(DC.data,DG.data);}else{DC.data=A9.copyProps(DE.serialized.split(";"),DC.data,DG.data);}}}}if(DD&&A9.walk("data.elms",DC)){var DH=AM.safeCall("getPushDownFilterElmsCache",C7)(DD);if(DH){DC.data.elms=[].concat(DH);}else{if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly){if(DG.defn.isObjectParameter){DC.data.elms=[].concat(DG.data.elms);}}}}CL(DC,Cv);C8(DC,DB);};function Ct(DT,DZ,DC,DF){var DI=false,DP=this.getChildren(DT,true),DN;if(!DP.length){return ;}if(DC){DN=mstrmojo.all[DT.id];DI=!DT.id||!!DN;}var DH=DT.defn,DD=DT.data,DV;if(DH&&DH.t===Cp.PANELSTACK&&DH.od){DV=DD.selKey;}var DU,DR=false,DG=A9.walk("defn.t",DN)===Cp.PANELSTACK,DJ;for(DU in DP){var DQ=DP[DU],DS=DQ.id,DE=null,DW,DM=DQ.k,DK=mstrmojo.all[DS];if(DZ){DJ=this.extractChildren(DZ);if(DJ){var DX=CO.find(DJ,"k",DM);DW=DX>=0?DJ[DX]:null;if(!DW){DJ.push(DQ.data);if(Cs.hasOwnProperty(DM)&&A9.walk("defn.t",DN)===Cp.PANEL){DR=true;}}}else{A9.copy(DT.data,DZ);if(Cs.hasOwnProperty(DM)&&A9.walk("defn.t",DN)===Cp.PANEL){DR=true;}}}if(DK){DI=true;}if(Cs.hasOwnProperty(DM)){if(Br.call(this,DM)&&AX(DQ.data,Cw)){C0(DS,DQ,DZ);var Da=this.getInfoWinByKey(DM);if(!DF&&Da){C1.ifws[DM]=Da.id;}}DE=DM;if(DI){if(DV&&DV!==DM){continue;}if(!DF){C1.tgts[DS]=true;}var DB=DN&&DN.defn,DY=DB&&DB.t,DL=DB&&DB.ck;if(DY===Cp.SUBSECTION&&(DL&&DL.hasOwnProperty(DM))){C1.secs[DN.id]=true;}}}if((DF||DE)&&(!DV||DV===DM)){C0(DS,DQ,DZ);C1.def[DM]=true;if(DI){C1.upd[DS]=true;if(Cy&&DK&&DK.isDynamicAttributeSelector&&DK.isDynamicAttributeSelector()){C1.tgts[DS]=true;}}}var DH=DK?CQ.getPropertyByPath(DK,"node.defn"):null;if(mstrApp.isInVFConfigMode&&DH&&DH.iifp){var DO=this.adjustNodeId(DQ.id);if(mstrmojo.all[DO]){DQ.id=DO;C0(DO,DQ,DZ);DQ.id=this.restoreNodeId(DO);C1.upd[DO]=true;C1.tgts[DO]=true;}else{if((DH.t===Cp.GRID||DH.t===Cp.GRAPH)&&DF&&Cs[mstrmojo.all[DQ.id].k]){C1.upd[DQ.id]=true;C1.tgts[DQ.id]=true;}}}Ct.call(this,DQ,DW,DI,DF||DE);}if(DR){C1.changedParentPanel[DN.id]=true;C1.upd[DN.id]=true;}}if(C3&&C3.layouts&&Cs){var DA=CO.filterOne(C3.layouts,function(DB){return(DB.loaded);}),C6=this.data.layouts;if(DA){var C4=C6[CO.find(C6,"k",DA.k)];Ct.call(this,DA,C4,true);if(Cz&&DA.xtabStyles&&C4){if(!C4.xtabStyles){C4.xtabStyles={};}var Cu=C4.xtabStyles;var C2=DA.xtabStyles;for(var C9 in C2){if(C2.hasOwnProperty(C9)&&!Cu.hasOwnProperty(C9)){Cu[C9]=C2[C9];}}}}}Ao.call(this,C3,Cs,C1);if(C3&&this.data){this.data.pdfHeaderAndFooters=C3.pdfHeaderAndFooters;}return C1;},getDimensionAndPositionAction:function CX(Ct,Cs,Cv){var Cu=this.getUnitFormatAction(Ct,null,null,Cv);CR.call(this,Cu.format,Cs,3);return Cu;},getDimensionAction:function CX(Ct,Cs,Cv){var Cu=this.getUnitFormatAction(Ct,null,null,Cv);CR.call(this,Cu.format,Cs,2);return Cu;},getUnitFormatAction:function z(C2,Cv,C1,Cx){var Cz=C2.defn,C3=(Cz&&Cz.t)||1,Cs=C2.specialFieldType,Ct=Cz&&Cz.tt||1,C0=C2.k,Cy=[C0];var Cu={act:"format",unitKey:C0,unitType:C3===115?521:C3,formatType:Cv||1,format:C1||{}};if(Cs){Cu.specialFieldType=Cs;Cu.treeType=Ct;}if(A9.walk("FormattingSize.LayoutXML",C1)){Cu.isJson=mstrApp.supportFeature(A4.SUPPORT_FREE_FORM_LAYOUT);}if(!Cx){Cu.partialRetrieval={nodes:Cy};}if(C3===Cp.SELECTOR){var C4=Cz.ck;Cu.keyContext=C4;Cy[0]=this.getDataService().getNodeKeyFromKeyContext(C4);}if(C3===Cp.TEXTFIELD||C3===Cp.IMAGE||C3===Cp.HTMLCONTAINER||C3===Cp.SURVEYCONTAINER||C3===Cp.BUTTONFIELD||(mstrApp.isVI&&C3===Cp.SHAPE)){if(Cz.tmaps&&Cz.tmaps.length>0&&Cz.tmaps[0].tf&&Cq.call(this,C1,Cv)){var C4=Cz.tmaps[0].ck;Cu.nodeKey=Cz.fgk;Cu.keyContext=C3+U+Cz.fgk+U+C4;Cy[0]=Cz.fgk;Cu.fieldKey=C4;Cu.unitType=Cp.SELECTOR;}else{var Cw=C2.nk||Cz.fgk;Cu.fieldKey=C0;Cu.nodeKey=Cw;Cu.keyContext=C3+U+Cw+U+C0;Cy[0]=Cw;}}return Cu;},updateUnitFormat:function f(Ct,Cv,Cw,Cx,Cs){var Cu=this.getUnitFormatAction(Ct,Cv,Cw);this.getDataService().submitUpdates(Cu,Cx,Cs);},selectPanelDeferred:function(Cx,Cw,Cv,Cu,Ct,Cs){J.call(this,Cx,{type:3,tks:Cw,eid:Cv,sid:Cu||1,ck:Cw,hasLoader:Ct,skipServerCall:Cs});},getSearchElemsCache:function o(){var Cs=this.searchElemsCache;if(!Cs){Cs=this.searchElemsCache={};}return Cs;},getCGBMap:function BN(){var Cs=BG.call(this,this.defn,this.currlaykey);return Cs&&Cs.cgbMap;},getIfwId:function At(Cs){return Cs+"_ifw";},isInfoWindow:function AY(Cs){return Br.call(this,Cs);},updateDefnForSlice:function AB(Cs,Cv,Ct){var Cu=Cs.events||{0:Cs};for(var Cw in Cu){var Cx=Cu[Cw];if(Cx.refreshDefn){this.updateDefnCache(Cv.defn,[Cx.ctlKey]);}}},getSliceCallback:function CA(Cs){var Cv=this,Cw={};Cw.dataCacheUpdate=null;Cw.tgtDefs=Cs.tks?AN.call(this,Cs.tks):null;Cw.orignalTargetDefs=Cw.tgtDefs;var Cu=Cw.tgtDefs,Ct=function(Cz){var C0=Cu;if(Cs.disablePU){C0=AN.call(Cv,Cv.currlaykey);}AZ(C0,function(C1){if(C1&&C1.set){C1.set("readyState",Cz);}});},Cy=this.newCallback({method:"slice",shared:Cw,submission:function(){Ct(CH.WAITING);},success:function(C1){if(!Cv.checkStatus(C1)){return ;}if(Cs.disablePU){Cv.loadLayout(C1,Cs.isUConDS,Cs.restoreIW);return ;}if(C1.pukeys){var C0=Object.values(Cs.events||{}).map(function(C2){return C2.ctlKey;});Cw.tgtDefs=AN.call(Cv,C1.pukeys.split(U).concat(C0));Cv.raiseEvent({name:"gjsSuccessWithPUKeys",res:C1});}Cv.updateDefnForSlice(Cs,C1,Cw.tgtDefs);if(C1.datasets){Cv.updateDatasets(C1.datasets,Cv.datasetsSettings);}Cw.dataCacheUpdate=Cv.updateDataCache(C1.data,Cw.tgtDefs,Cs&&Cs.sid,C1.puFilters);if(typeof C1==="object"){A9.copyProps(["bs","exopt","dty"],C1,Cv);}var Cz={name:"partialUpdate",tree:C1.data,ids:Cw.dataCacheUpdate,unloadCache:Cs.isUConDS};if(!mstrmojo.hash.isEmpty(Cz.ids.ifws)){if(Cs&&!Cs.suppressIW&&(Cs.type===Cp.GRID||Cs.type===Cp.GRAPH)){Cz.anchor=Cs.anchor;}else{Cz.ids.ifws={};}}if(mstrApp){mstrApp.isPartialUpdate=true;}Cv.raiseEvent(Cz);if(mstrApp){mstrApp.isPartialUpdate=false;}},complete:function(){Ct(CH.IDLE);},failure:function(C0){if(parseInt(C0&&(C0.code||C0.iServerErrorCode),10)===O.MSI_REPORT_INCOMPLETE_OP){C0.message=mstrmojo.desc(28731,"An issue occurred with your recent selection that caused an error. This selection has been automatically undone to prevent further issues.");var Cz=Cv.controller;if(Cz&&Cz.undo&&Cz.cmdMgr&&Cz.cmdMgr.resetState){Cv.controller.cmdMgr.resetState();window.setTimeout(function(){Cv.controller.undo();},50);}}}}),Cx={success:function(){AZ(Cw.orignalTargetDefs,function(DB,C9){var DA=Ae.call(Cv,C9,1);if(!DA){if(!!Cv.sdp&&!!Cv.sdp[C9]){var C8=Cv.getLayoutDataCache(Cv.getCurrentLayoutKey());var DC=Bt.call(Cv,{k:C9,wid:1},Cv.getLayoutKeyByUnitKey(C9));Cv.raiseEvent({name:"secondaryDataSliced",key:C9,data:C8[DC].data});}return ;}if(Cw.dataCacheUpdate&&!Cw.dataCacheUpdate.def.hasOwnProperty(C9)){if(DA.setDirty){DA.setDirty(true);}}else{if(parseInt(DB.t,10)===Cp.PANELSTACK){DA.setDirtyChildren();}}});var C7=Cs.events||{K0:Cs},C3;for(C3 in C7){var Cz=Ae.call(Cv,C7[C3].ctlKey,1);if(Cz&&Cw.dataCacheUpdate&&!Cw.dataCacheUpdate.upd.hasOwnProperty(Cz.id)){var C6=(Cz.children&&Cz.children[0].selectedIndices)||{},C2=Cz.node.data,C0=mstrmojo.DocSelector.STYLES,C1=[];if(Cz.isDynamicAttributeSelector()){C2.exp=Cz.expr;if(!Cz.expr&&CO.find(C2.elms,"v",CZ.ELEM_ALL_ID)>=0){C1.push(CZ.ELEM_ALL);}}else{if(Cz.style===C0.SEARCH_BOX){var C5=(Cz.children&&Cz.children[0].items)||[];CO.forEach(C5,function(C8){C1.push(A9.clone(C8));});}else{if(Cz.style===C0.METRIC_QUAL){if(A9.walk("content._restoreFocusCallback",Cz)){Cz.content._restoreFocusCallback();}}else{A9.forEach(C6,function(C9,C8){if(C9){C1.push(C2.elms[C8]);}});}}}var C4=CO.find(C1,"v",CZ.ELEM_ALL_ID);if(C4>-1){C1=[C1[C4]];}C2.ces=C1;Cz.selIdx=C6;}}}};if(Cs.isUConDS||(parseInt(Cs.type,10)===Cp.GRAPH&&Cs.tty===1)){Cy.success=function(Cz){Cv.controller.setData(Cz,true);};return Cy;}if((parseInt(Cs.type,10)===3)){return Cy;}return AM.wrapMethods(Cy,Cx);},slice:function AG(Cs){var Ct=AM.safeCall("controller.isSnapshotView",this)();if(Ct){var Cu=Cs.isUConDS||(parseInt(Cs.type,10)===Cp.GRAPH&&Cs.tty===1);if(Cu){return ;}}var Cv=this.getDataService(),Cw=Cv.newUpdateWithoutCmd();this.sliceDeferred(Cw,Cs);if(Cw.actions&&Cw.actions.length>0){Cv.addSuppressData(Cw.extras);if(Cs.isUConDS){Cv.sendBrowserInfo=true;}Cw.submit();}},sliceDeferred:function(C7,DB){var C5={};try{if(!DB||(!mstrmojo.dom.isAndroid&&!DB.tks&&!DB.multiSelect&&(DB.type===3||(DB.type===Cp.GRAPH&&parseInt(DB.tty,10)!==1)))){return C5;}var Cz=this.getSliceCallback(DB),DL=this,DE=this.getDataService(),DA=DL.controller.view;var DM=parseInt(DB.type,10);if(DM===3){if(mstrApp.isVI){var C3=this.getOwningWidgetByType(Cp.PANEL,DB.src),DD=C3.getUnitByKey(DB.tks).boxContent,C9=DB.eid,DH=C9.substring(1,C9.length-1);var DC={success:function(){var DO=Ae.call(DL,DB.ctlKey,1),DR=(DO.children&&DO.children[0].selectedIndices)||{},DP=DO.node.data,DQ=[];A9.forEach(DR,function(DT,DS){if(DT){DQ.push(DP.elms[DS]);}});DP.ces=DQ;DO.selIdx=DR;}};DD.selectPanel(DH,false,false,null,DC);}else{J.call(DL,C7,DB);}return ;}if(DB.multiSelect){if(DB.selectorObjects.length>0){DE.setMultiDocSelectorElements(DB.selectorObjects,DB.multiSelect,Cz);}return ;}if(DM===Cp.GRAPH){C7.add(DE.getGraphSelectionAction(DB.src,DB.cks,DB.sid,DB.x,DB.y,(DB.tty===1),DB.w,DB.h),Cz);if(!!DB.showLoadingIcon){C7.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var Cu=DB.events||{K0:DB},C8=[],DK,C0={config:mstrmojo.DocDataService.PROGRESS_CONFIG,skipUICmdMgrOnFailure:[O.MSI_REPORT_INCOMPLETE_OP]},DJ=C0.params={},DG,Ct={},C2=null,Cv=function(DP,DO){if(DP){Ct[DO]=DP.visName;}};var Cy=[],Cx=[];for(var DN in Cu){if(DN.endsWith("_include")){Cx.push(Cu[DN]);}else{Cy.push(Cu[DN]);}}var DF=Cx.concat(Cy),Cw=[];for(var DG=0;DG<DF.length;DG++){DB=DF[DG];Cw=Cw.concat(DB.cgb);if(!DB){break;}if(DB.hasSelectorClear||DB.dynamicSelection){DK=[];if(DB.resetToDefault){DK.push(DE.getUnsetSelectorAction(DB));}if(DB.hasSelectorClear){DK.push(DE.getSelectorClearAction(DB));DK=DK.concat(this.getSelectorPropsChangeAction(DB.selector,{showAll:!DB.scs&&DB.include&&!DB.isObjectParameter}));if(DB.isInFilterPanel&&!DB.newValue&&!DB.valueParameter){DK=DK.concat(this.getCtrlActionsByStyleForToggleShowAll(DB.selector,!DB.scs&&DB.include&&!DB.isObjectParameter));}else{DK.push(this.getStyleForToggleShowAllInCanvas(DB.selector,!DB.scs&&!DB.isObjectParameter));}if(DB.newValue){DK.push(DE.getChangeControlValueAction(DB));}if(DB.eid){DK.push(DE.getSelectorElementsAction(DB));}}if(DB.dynamicSelection){DK.push(DE.getDynamicSelectionAction(DB));}}else{if(DB.hasOwnProperty("eid")){if(DB.isUConDS){DB.disablePU=true;}if(BK.call(this)){DB.disablePU=true;DB.restoreIW=true;}if(DB.eid===Bl){DB.eid="";}DK=DE.getSelectorElementsAction(DB);if(DL.sdp){Ct={};AZ(DL.sdp,Cv);DJ.sdpKeys=JSON.stringify(Ct);}if(DB.disablePU){DJ.disablePU=true;}}else{if(DB.fromGM){DK=DE.getSelectorFromGMAction(DB);}else{if(parseInt(DB.srct,10)===4||DB.fid){if(DB.fid&&BK.call(this)){DB.disablePU=true;}DK=DE.getSelectorExpressionAction(DB);}else{if(DB.unset){DK=DE.getUnsetSelectorAction(DB);}else{if(DB.expr){DK=DE.getAttributeSelectorExpressionAction(DB);}else{if(parseInt(DB.ct,10)===6){DK=CO.isArray(DB.ck)?DE.getCompoundGridMultiUnitSelectorAction(DB):DE.getMultiUnitSelectorAction(DB);DL.hasUnitSelector=DB.selections&&DB.selections.hasElements;}else{if(DB.isEventTimeRange){if(!DB.ltifv){DK=DE.getUnsetSelectorAction(DB);}else{DK=DE.getRealTimeSelectorExpressionAction(DB);}}else{if(DB.changeControlValue){DK=DE.getChangeControlValueAction(DB);}else{if(DB.changeInclude){DK=[DE.getSelectorShowAllAction({ck:DB.ck,ckey:DB.ckey,type:DB.type,showAll:!DB.scs&&DB.include}),DE.getSelectorIncludeAction({ck:DB.ck,ckey:DB.ckey,type:DB.type,include:DB.include})];C2={selector:DB.selector,disablePU:DB.disablePU,isElementListParameter:DB.isElementListParameter};}else{DK=DE.getSelectorIncludeAction(DB);}}}}}}}}}}C8=C8.concat(DK);}C7.add(C8,Cz,C0);var C6=function(DO){DO.extras.style={params:{treesToRender:3}};DO.callback=AM.wrapMethods({success:function DP(DQ){DL.partialUpdate(DQ.data,DL.getUnitDefinitions(Cw),DQ.defn,Cw,DQ.puFilters,undefined,undefined,DQ.datasets);}},DO.callback);return DO;};if(DB.isNavigation){var C1=(DA._layouts||[]).filter(function(DO){return DO.k===DB.layoutKey;})[0];if(C1){if(!DA.showLayout(C1,null,C7,DB.panelKey)){C7=C6(C7);DA.showPanel(DB.panelKey,DB.layoutKey,C7);}}else{DA.loadDocLayout({layoutKey:DB.layoutKey,panelKey:DB.panelKey},null,C7);}}else{C7=C6(C7);if(DB.hasSelectorClear){if(DB.isInFilterPanel){C7.callback=AM.wrapMethods({success:function C4(DP){DL.partialUpdate(DP.data,DL.getTargetDefn(DB.ctlKey),DP.defn,[DB.ctlKey]);var DO=DL.getVIComponent(BR.FILTER_PANEL);DO.rebuildChild(DO.children.filter(function(DQ){return DQ.k===DB.ctlKey;})[0]);}},C7.callback);}}if(DB.updateExecute){var Cs=DB.ck.split(U)[1];C7.callback=AM.wrapMethods({success:function C4(DO){DL.partialUpdate(DO.data,DL.getTargetDefn(Cs),DO.defn,[Cs]);}},C7.callback);}}if(C2){C7.callback=AM.wrapMethods(C7.callback,{success:function(DO){DE.getIncludeChangeCallback(DO,C2.selector,C2.disablePU,C2.isElementListParameter);C2.selector.syncSelectorsInConsumptionMode();}});}}catch(DI){mstrmojo.err(DI);}},getInfoWindow:function c(Ct){var Cs=this.infoWindows;return Cs&&Cs[Ct];},getTargetInfoWin:function(Ct){var Cs=[],Cu=AN.call(this,Ct);if(Cu){var Cv;for(Cv in Cu){if(Cu[Cv]&&Cu[Cv].ifw){Cs.push(Cv);}}}return Cs;},getTargetInfoWinInLyt:function(Cw,Cv){var Cs=this.getLayoutDefn(Cv),Ct=Cs&&Cs.units||[],Cu=Cw&&Cw.split(U);return CO.filterOne(Cu,function(Cx){return Ct[Cx]&&Ct[Cx].ifw;});},cleanInfoWindowCache:function B3(){this.infoWinByKey={};},addInfoWinByKey:function Cm(Ct,Cs){if(!this.infoWinByKey){this.infoWinByKey={};}if(!this.infoWinByKey[Ct]){this.infoWinByKey[Ct]=[Cs];return ;}if(CO.find(this.infoWinByKey[Ct],"id",Cs.id)===-1){this.infoWinByKey[Ct].push(Cs);}},getInfoWinByKey:function AO(Cu,Cs,Cx){var Cw=null,Ct=this.getCurrentLayoutKey(),Cv=this.infoWinByKey;if(Cv&&Cv[Cu]){CO.forEach(Cv[Cu],function(Cy){var Cz=Cy&&Cy.id;if(Cz&&Cz.indexOf(Cu)>-1&&Cz.indexOf(Ct)>-1){if(!Cs||(Cx&&Cv[Cu].length===1)||Cz.indexOf("*x"+Cs)>-1){Cw=Cy;return false;}}});}return Cw;},showInfoWin:function P(Cw,Cv,Ct,Cx,Cz,Cs,Cy){var Cu=this.getInfoWinByKey(Cw,Cs,Cy);if(Cu===null){return ;}this.raiseEvent({name:"showInfoWin",psId:Cu.id,psKey:Cu.k,anchor:Cv,anchorOrientation:Ct,anchorPosition:Cz,invalidate:Cx});},getSelectedXtabStyles:function L(Cu){var Ct=Cu||this.currlaykey;var Cw={};var Cs=this.data&&this.data.layouts,Cv;for(Cv in Cs){if(Cs[Cv].k===Ct){Cw=Cs[Cv].xtabStyles;break;}}return Cw;},downloadGridData:function CG(Cy,Cz,Cx){var Cv=this,Cu=Cy.xtabId,Ct=Cy.memo,Cw=mstrmojo.all[Cu],Cs=this.newCallback({success:function(C7){function C0(DB,DD){var DE=Cv.getChildren(DB,true),DC=DE.length,DA;for(DA=0;DA<DC;DA++){var DF=DE[DA];if(DD===DF.id){return DF;}var C9=C0(DF,DD);if(C9){return C9;}}return null;}var C4=BG.call(Cv,C7.data,Cv.currlaykey);if(C4){if(Cv.restoreNodeId){Cu=Cv.restoreNodeId(Cu);}var C3=C0(C4,Cu);if(C3){mstrmojo.models.template.DataInterface.inflateGridData(C3.data);if(Cw){Cw.dataDownloaded(C3,Ct);}}var C6=C4.xtabStyles;if(C6){Cv.raiseEvent({name:"updateStyles",key:C4.k,updatedStyles:C6});}}var C5=x.call(Cv,Cv.defn,Cv.currlaykey,Cy.nodeKey);if(C5&&C5.t===Cp.GRIDGRAPH&&Ct.recalculating&&Cw){var C2=Cw.parent,C8=C2&&C2.getGraphWidget();if(C8&&C2.updateGraph){C2.updateGraph(C0(C4,C8.id));}}if(C7.pukeys){var C1=AN.call(Cv,C7.pukeys);delete C1[Cy.nodeKey];if(!A9.isEmpty(C1)){Cv.partialUpdate(C7.data,C1);}}},failure:function(C0){if(!Cx&&Cw&&Cw.dataDownloadErr){Cw.dataDownloadErr(C0);}else{mstrmojo.emptyFn();}}});this.getDataService().downloadGridData(Cy,AM.wrapMethods(Cs,Cz));},getFixedHeaders:function(Ct,Cs){return Cc.call(this,Ct,Cs,[Cp.PAGEHEADER],true);},getFixedFooters:function(Ct,Cs){return Cc.call(this,Ct,Cs,[Cp.PAGEFOOTER],true);},getNonFixedSections:function(Ct,Cs){return Cc.call(this,Ct,Cs,[Cp.PAGEHEADER,Cp.PAGEFOOTER],false);},addAutoWidthID:function Bi(Cu){var Ct=this.aws||{},Cs=Ct[this.currlaykey]||[];Cs.push(Cu);Ct[this.currlaykey]=Cs;this.aws=Ct;},getAutoWidthIDs:function Aa(){var Cu=this.aws,Cs=this.currlaykey;var Ct=Cu&&Cu[Cs];if(Ct){delete Cu[Cs];}return Ct;},getTransactionUpdates:function Av(Cs){return this.txDiscardTargets?"":CY.call(this,Cs);},clearTransactionUpdates:function A3(Cs){this.clearTxDeltaUpdate(Cs);},resetTransactionUpdates:function Cr(Cs){var Ct=this.pendingUpdate,Cu=this.delta;if(Ct&&Ct[Cs]){AZ(Ct[Cs],function(Cv,Cw){if(Cu&&!Cu[Cw]){Cu[Cw]=Cv;}});delete Ct[Cs];}},transactionUpdate:function B9(Cu,Ct){if(!Cu.data){return null;}var Cw;if(Ct&&Ct.tks){Cw=AN.call(this,Ct.tks);}if(Cu.pukeys){Cw=AN.call(this,Cu.pukeys);var Cx;for(Cx in Cw){if(Cw[Cx]&&Cw[Cx].cek){Cw[Cx].cek=null;}}}if(Cu.txrcd){this.txrcd=Cu.txrcd;}else{delete this.txrcd;}var Cv=this.updateDataCache(Cu.data,Cw,Ct&&Ct.sid),Cs={name:"partialUpdate",tree:Cu.data,ids:Cv};if(!A9.isEmpty(Cv.ifws)){if(Ct&&Ct.type===Cp.GRID){Cs.anchor=Ct.anchor;}else{Cv.ifws={};}}this.raiseEvent(Cs);return Cv;},deltaUpdate:function B8(Cs){var Ct=this.delta;if(!Ct){Ct=this.delta={};}Ct[Cs.id]=Cs;},clearTxDeltaUpdate:function Bw(Ct){var Cw=this.txDiscardTargets,Cs=!Cw,Cv=this.pendingUpdate,Cu=this;if(!Cs){AZ(Cw,function(Cx,Cy){if(Cu.delta&&Cu.delta[Cy]){Cu.delta[Cy].clear();delete Cu.delta[Cy];}});}if(Cv&&Cv[Ct]){AZ(Cv[Ct],function(Cx){Cx.clear();});delete this.pendingUpdate[Ct];}},sendTransactionActions:function AS(Ct,Cs,Cv){var Cu=this;mstrmojo.mask.show("Running");if(!Cv){Cv={success:function(Cw){Cu.transactionUpdate(Cw);}};}Cu.getDataService().sendTransactionActions({keyContext:Ct,actions:Cs,txrcd:this.txrcd},AM.wrapMethods(Cv,{complete:function(){mstrmojo.mask.hide();}}));},sendTransactionUpdates:function k(Cs){var Cu=this.getSliceCallback(Cs),Ct=this.getDataService();Ct.submitUpdates([Ct.getUpdateTransactionAction(Cs)],Cu);},addSDP:function BJ(Ct,Cs){if(!Ct||!Cs){return ;}if(!this.sdp){this.sdp={};}this.sdp[Ct]={k:Cs.k,visName:Cs.visName};},removeSDP:function Ag(Cs){if(!Cs||!this.sdp||!this.sdp[Cs]){return ;}delete this.sdp[Cs];},getUpdateColorMapCallback:function AJ(){var Cs=this;return{success:function(Ct){Cs.defn.epm=Ct.defn&&Ct.defn.epm;Bs.call(Cs);Cs.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallbackHandler:function s(Cs){var Ct=this;return{success:function(Cu){Ct.thm=Cu.thm;Ct.plt=Cu.plt;Ct.defmts=Cu.defmts;Ct.accentColor=Cu.accentColor;Bs.call(Ct,!Cs);Ct.layoutstyle=Cu.layoutstyle;}};},getUpdateThemePaletteCallback:function Ab(Cu){var Cv=this,Cs,Ct;if(mstrApp.isInVFConfigMode){mstrApp.requireRestoreVFConfigMode=true;Cs=Cv.getVIMap().getComponent(Y);Ct=mstrApp.getRootController();mstrApp.isInVFConfigPage=false;Ct.view.closeInlineDialog();Cv.destroyVisualiztionselector();Ct.restorePanelStatus(Cs);Ct.maskMenuToolbar(false);}return this.getUpdateThemePaletteCallbackHandler(Cu);},getCurrentPaletteColors:function b(){return(this.plt&&this.plt.colors)||Az;},getCurrentPaletteId:function CN(){return this.plt&&this.plt.did;},getCurrentDefaultPaletteId:function BP(){return(this.thm&&this.thm.dplt)||Bh;},getCurrentLayoutStyle:function A1(){return this.layoutstyle||BC;},getColorBy:function(Cx,Cs,Ct){var Cv=Cs.map(function(Cz,Cy){return{levelID:Cx[Cy].toString(),elemID:Cz};});if(Cv&&Cv.length>1){Aw(Cv);}const Cw=AQ(Cv);const Cu=h(Cv);if(Ct){return this.getColorByForElementsForPalette(Cw,Cu,Ct);}else{return this.getColorByForElements(Cw,Cu);}},getColorByForElements:function(Cx,Cv){var Cu=this.getColorByObject(),Cw=this.getColorByPalette(),Ct=Cw[Cx];if(!Ct){Ct=Cw[Cx]={_currentColorIdx:0};}if(Ct[Cv]===undefined){var Cs=this.getCurrentPaletteColors();Ct[Cv]=Cs[Ct._currentColorIdx];Ct._currentColorIdx=(Ct._currentColorIdx+1)%Cs.length;}if(Cu[Cx]&&Cu[Cx][Cv]){return{color:Cu[Cx][Cv].color,isManual:true};}return{color:Ct[Cv],isManual:false};},getColorByForElementsForPalette:function(Cz,Cx,Ct){const Cv=Ct.did;var Cy=this.getColorByPaletteForId(Cv),Cu=Cy[Cz];if(!Cu){Cu=Cy[Cz]={_currentColorIdx:0};}if(Cu[Cx]===undefined){var Cs=Ct.colors||this.getPaletteColorsForId(Cv);Cu[Cx]=Cs[Cu._currentColorIdx];Cu._currentColorIdx=(Cu._currentColorIdx+1)%Cs.length;}const Cw=this.getColorByObject();if(Cw[Cz]&&Cw[Cz][Cx]){return{color:Cw[Cz][Cx].color,isManual:true};}return{color:Cu[Cx],isManual:false};},getZoomFactor:function AD(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function CC(){return{dpi:this.dpi,zf:this.getZoomFactor()};},getCtrlHeightByStyle:function As(Ct,Cs){var Cu={"default":140,4:Cs>15?243:235,9:140,1:100,3:Cs>15?243:235,0:80,7:100,8:86,10:80,11:55,12:50,13:86};if((Ct===3||Ct===4)&&Cs<=8){return 26*Math.max(Cs,2)+27;}return Cu[Ct]||Cu["default"];},clearAllSelectionAndHighlightCache:function(){AA.clearAllSelectionsCache();Bu.clearAllHighlightsCache();},executeLink:function K(Cs,Cu,Cw){if(Cs.indexOf("prevMsgID")>0){Cs=B5(Cs,/prevMsgID=0($|&)/g,"prevMsgID="+this.mid);}if(Cs.indexOf("originMessageID")>0){Cs=B5(Cs,/originMessageID=[a-zA-Z0-9]*($|&)/g,"originMessageID="+this.mid);}Cs=mstrmojo.addCSRFTokenToURL(Cs);if(Cs.indexOf(mstrApp.name+"=")===-1&&!mstrmojo.isUrlExternal(Cs)){var Cv=mstrApp.servletState||mstrConfig.servletState||"";var Ct=mstrApp.name+"="+window.encodeURIComponent(Cv);if(Cs.indexOf("?")>-1){if(Cs.charAt(Cs.length-1)!=="&"){Cs+="&";}}else{Cs+="?";}Cs+=Ct;}this.controller.onLink(this,{url:Cs,target:Cu,src:Cw||null,submitAsPost:!mstrmojo.isUrlExternal(Cs)});},getDatasetUnits:function CT(Cu,Ct,Cw,Cz,Cy){var Cx=this.datasets,Cv=[],Cs=["did","attId","n","t","st","ndetype","formType","dt","f","hide","usedInDropZones","card","lock","fs","lvfs","nonAggregatable","paraId","isParameter","isReportParameter","targetType"];A9.keyarray(Cx).forEach(function(C1){if(!Cw||C1===Cw){var C2=Cx[C1],C0=C2,C3=[];Cu.forEach(function(C5){if(Cz!==undefined){C0=C2.tables[Cz];}(C0[C5]||[]).forEach(function(C6){if(!Ct||Ct(C6)){C3.push(C6);}});if(!Cy){var C4=C0.parameters||[];C4.forEach(function(C6){if((C5==="att"&&C6.targetType===Bq.ATTR)||(C5==="mx"&&C6.targetType===Bq.METRIC)){if(!Ct||Ct(C6)){C3.push(C6);}}});}});Cv=Cv.concat(C3.map(function(C5){var C4=mstrmojo.hash.copyProps(Cs,C5,{ds:C2.name,dsId:C1,dm:!!C5.um,da:!!C5.da,de:!!C5.de});if(C5.semanticRole){C4.semanticRole=C5.semanticRole;}return C4;}));}});return Cv;},getMapLayerKeys:function Al(Cs){if(Cs&&Cs.getSdpKeyArr){return Cs.getSdpKeyArr();}return[];},getDeleteMapLayersActions:function CB(Cu){var Cs,Cv=[],Ct=this;(Cu||[]).forEach(function(Cw){Cs=Ct.getLayoutUnitDefn(Cw);Cv.push({act:"removeUnit",unitKey:Cw,unitType:(Cs&&Cs.t)||522});});return Cv;},syncSecondaryDataProviderDefn:function n(Cw,Cu,Ct){var Cv=this.getCurrentLayoutDef(),Cs=(Cv&&Cv.units)||{};(Cu||[]).forEach(function(Cx){if(Cs[Cx]){if(Ct){Cs[Cx]._isDeleted=true;}else{delete Cs[Cx]._isDeleted;}}});if(Ct){mstrApp.primaryScdpMap[Cw]=[];}else{mstrApp.primaryScdpMap[Cw]=Cu;}},getFormatSDPAction:function Bn(Cu,Ct){var Cs={FormattingWidget:{SecondaryDataProviders:Ct.join(",")}};return this.getUnitFormatAction(Cu,1,Cs,true);},addSecondaryDataProviderActions:function M(Cv,C1,Cz,Cx){var C0=Cz.newKey,Ct=Cz.style,Cs=Cz.widgetType,Cy=Cz.widgetProps,Cu=Cz.extraFormatting,C2=this.getWidgetClassNameByStyle(Ct,Cs),Cw={k:C0,defn:{t:521}};Cv.push(this.getCopyEmptyTemplateAction(C0,C1));Cv.push({act:"updateTemplate",keyContext:C0,actions:[{act:"createDefaultDropZones",nodeKey:C0,treeType:1,datasetType:3,widgetType:Cs}].concat(Cx)});if(!Cu){Cu={};}if(!Cu.FormattingAppearance){Cu.FormattingAppearance={};}Cu.FormattingAppearance.Visible=0;Array.prototype.push.apply(Cv,this.getUnitChangeVizActions(Ct,C2,Cw,Cy,Cu));Cv.push({act:"changeGridDisplayMode",nodeKey:C0,displayMode:1});},addMapLayerActions:function BY(C2,Cw,Cy,Cx){var Cz=this.getNextKey(),Cu=this.getPanel().k,C1=C2.scriptClass==="mstrmojo.mapbox.VisMapbox",Ct=C1?AV.MAPBOX:AV.GOOGLE_MAP,Cs=C1?q.MAPBOX:q.GOOGLEMAP,C0=this.getMapLayerKeys(C2),Cv={FormattingAppearance:{Name:Cx}};this.addSecondaryDataProviderActions(Cw,Cu,{newKey:Cz,style:Ct,widgetType:Cs,widgetProps:Cy,extraFormatting:Cv},[]);Cw.push(this.getFormatSDPAction(C2,C0.concat(Cz)));return Cz;},removeMapLayerActions:function AE(Cu,Ct,Cv){var Cs=this.getLayoutUnitDefn(Ct);Cv.push({act:"removeUnit",unitKey:Ct,unitType:(Cs&&Cs.t)||522});Cv.push(this.getFormatSDPAction(Cu,this.getMapLayerKeys(Cu)));},removeGeometryInfoActions:function Cn(Cv,Cs){var Cz=Cv.zonesModel.getZoneModelByZoneId(Ce.Geometry),Cy=Cz&&Cz.items&&Cz.items[0],Ct;if(Cy){if(Cy.fs){var Cu=AK.getGeometryForm(Cy);if(Cu){if(Cy.fs.length===1){Ct=[{act:"removeDropZoneUnit",zoneId:Ce.Geometry,unitId:Cy.did,unitType:Cy.t}];}else{Ct=[{act:"removeForm",unitId:Cy.did,unitType:Cu.t,attFormId:Cu.fid}];}}}else{var Cx=Cv.zonesModel.getZoneModelByZoneId(Ce.GeoAttribute),Cw=Cx&&Cx.items&&Cx.items[0];Ct=[{act:"removeForm",unitId:Cw.did,unitType:Cy.t,attFormId:Cy.did}];}if(Ct){Cs.push({act:"updateTemplate",keyContext:Cv.k,actions:Ct});}}return Cs;},getExtraActionsForChangeMapViz:function p(Cv,Cu,Cz){var Cw=Cv.parent,Cx,Ct=this,Cy=AM.safeCall("getSelectedIFW",Cw)(),Cs=Ct.isFilterConditionPassed(Cy);if(Cs){Cz=Cz.concat(Ct.passFilterContextToInfoWindowHandler(Cy,false).actions);}if(Cu&&Cu.length>0){CO.forEach(Cu,function(C0){if(!Cv.isPrimaryKey(C0)){Cx=Ct.clearVisAsFilterActionForMapLayer(Cw,Cv.fnGetWidget(C0),true);if(Cx&&Cx.actions){Cz=Cz.concat(Cx.actions);}}});Cz=Cz.concat(this.getDeleteMapLayersActions(Cu));Cz.push(this.getFormatSDPAction(Cv,[]));this.syncSecondaryDataProviderDefn(Cv.k,Cu,true);}return Cz;},isSecondaryDataProvider:function Ai(Ct){var Cs=false;A9.forEach(mstrApp.primaryScdpMap,function(Cu){if(Cu.indexOf(Ct)>=0){Cs=true;return false;}});return Cs;},isHiddenInsightsTemplate:function CP(Cx){var Cu=this,Cs,Cv,Cw,Cy,Ct=false;CO.forEach(A9.walk("defn.layouts",this),function(Cz){Cs=Cz&&Cz.units;Cv=Cs&&Cs[Cx];Cw=A9.walk("vis.vn",Cv);Cy=A9.walk("vis.tct",Cv);if(typeof Cy==="number"&&Cy>B2&&AM.safeCall("isInsightsViz",Cu)(Cw)){Ct=true;return false;}});return Ct;},getHostKeyByNodeKey:function Bf(Ct){var Cs=Ct;A9.forEach(mstrApp.primaryScdpMap,function(Cv,Cu){if(Cv.indexOf(Ct)>=0){Cs=Cu;return false;}});return Cs;},getInsightParentSectionKey:function B1(Ct){var Cu=this.getLayoutUnitDefn(Ct),Cv=A9.walk("vis.vn",Cu),Cs=A8[Cv];return this.getParentNodeKeyByType(Ct,Cs);},getHiddenInsightTemplateKeys:function W(Cy){var Cu=this,Cs,Cw,Cx,Cv,Ct=[];CO.forEach(A9.walk("defn.layouts",this),function(Cz){Cs=Cz&&Cz.units;Cw=Cs&&Cs[Cy];if(Cw){Cx=A9.walk("vis.vn",Cw);if(AM.safeCall("isInsightsViz",Cu)(Cx)){Cv=Cu.getInsightParentSectionKey(Cy);A9.forEach(Cs,function(C2,C1){var C3=A9.walk("vis.vn",C2),C0=Cu.getInsightParentSectionKey(C1),C4=Cx;if(Cx.includes(AV.INSIGHT_LINE_CHART)){C4=AV.INSIGHT_LINE_CHART;}if(C0===Cv&&C1!==Cy&&C3===C4){Ct.push(C1);}});}return false;}});return Ct;},getDataOfScdpByHostKey:function Bv(Cy){var Cu={},Cx,Cw=this,Cv=mstrApp.primaryScdpMap[Cy],Ct=this.getCurrentLayoutKey(),Cs=this.getLayoutDataCache(Ct);CO.forEach(Cv,function(Cz){Cx=Cs[Bt.call(Cw,{k:Cz,wid:1},Ct)];Cu[Cz]=Cx&&Cx.data;});return Cu;},getNodeDataByKey:function m(Ct,Cu){var Cv=Cu||this.getLayoutKeyByUnitKey(Ct),Cs=this.getLayoutDataCache(Cv);return Cs&&Cs[Bt.call(this,{k:Ct,wid:1},Cv)];},getMapLayerDataByLayerKey:function BQ(Cs){var Ct=this.getNodeDataByKey(Cs);return Ct&&Ct.data;},updatePrimaryScdpMap:function CE(Cw,Cu,Ct){var Cs,Cv=mstrApp.primaryScdpMap[Cw];if(!Cv){Cv=mstrApp.primaryScdpMap[Cw]=[];}Cs=Cv.indexOf(Cu);if(Ct&&Cs<0){Cv.push(Cu);}else{if(!Ct&&Cs>=0){Cv.splice(Cs,1);}}},updateWidgetsProps:function S(){this.raiseEvent({name:"updWgtsProps"});},restoreVFConfigMode:function BA(){var Cs=this;return{success:function(){if(mstrApp.requireRestoreVFConfigMode){mstrApp.requireRestoreVFConfigMode=false;var Cw=Cs,Ct=mstrApp.isVFEditingMode,Cv=mstrApp.restoreVFKey,Cu=mstrApp.restoreVFTitle;Cw.checkLargeItemsForVisFilter(Cv,function(){var Cx=Cw.addVisFilterContainer(),C0=Cw.getSelectedViUnit(),Cz;Cw.oldSelectedVizBoxId=C0?C0.id:null;mstrApp.set("isInVFConfigMode",true);Cz=Cw.insertVizBox(Cv,Cx,{});Cw.controller.rootCtrl.initPanelStautsInConfigMode();Cw.selectVIUnit(Cz.id,true,{isAddAction:true});mstrApp.getRootController().enterVizFilterConfigMode(Cu,Ct);if(Ct===false){mstrApp.restoreVFCreate=true;var Cy=mstrmojo.all.visualizationFilterToolbar;Cy.toggleSaveBtn(mstrApp.isEnableSaveBtn);}});}}};},getWidgetClassNameByStyle:function BW(Cu,Ct){var Cs=mstrmojo.ExpressVisList.findWidgetName(Cu)||Be[Cu];if(!Cs&&parseInt(Ct)===q.CUSTOM){Cs=Ax;}return Cs||"";},shouldHideVizTitleByStyle:function AR(Cs){return CO.includes(Ch,Cs);},clearColorByMap:function AC(){this.resetColorByPalette();},shouldEncodeHtmlContent:function Af(){if(mstrApp.supportFeature){if(this.allowHtmlContent===undefined){this.allowHtmlContent=mstrApp.supportFeature(A4.ENV_ALLOWS_CUSTOM_HTML);}return !this.allowHtmlContent||!!this.encodeHtmlContent;}return !!this.encodeHtmlContent;},shouldEncodeMetricContent:function A6(){return !!this.encodeMetricContent;},shouldForbidHtmlContent:function Bc(){if(mstrApp.supportFeature){if(this.allowHtmlContent===undefined){this.allowHtmlContent=mstrApp.supportFeature(A4.ENV_ALLOWS_CUSTOM_HTML);}var Cs=mstrApp.supportFeature(A4.SERVER_CAN_RESTRICT_HTML_CONTENT)?this.forbidHtmlContent:this.encodeHtmlContent;return !this.allowHtmlContent||!!Cs||!mstrApp.supportFeature(A4.CREATE_HTML_CONTAINER);}return !!this.forbidHtmlContent;},destroy:function j(Cs){this.clearColorByMap();this.dataCache=null;this._super(Cs);},getSelectorPropsChangeAction:function a(Cs,Ct){var Cu=Cs.defn.ck;return[A9.copy(Ct,{act:"editSelectorProps",keyContext:Cu,ctrlKey:Cs.k,partialRetrieval:{nodes:[this.getDataService().getNodeKeyFromKeyContext(Cu)]}})];},getStyleForToggleShowAllInCanvas:function An(Cu,Cw){var Cv=Cu.defn.ck,Ct=Cu.k;var Cs={act:"format",format:{},keyContext:Cv,unitKey:Ct,unitType:Cp.SELECTOR,formatType:1,showAll:Cw,partialRetrieval:{nodes:[Ct]}};return Cs;},getCtrlActionsByStyleForToggleShowAll:function Ar(Cw,Cv){var Ct={},Cx=[],Cy=Cw.isInFilterPanel(),Cs=Cw.style,Cz=Cw.k,C1=this.getDatasetUnits(["att","mx"],function(C2){return C2.did===Cw.defn.srcid;})[0],Cu=C1&&C1.card,C0=Cw.defn.ck;if(Cy){this.getControllerHeightFormatObject(Ct,Cs,Cu,Cv);Cx.push({act:"format",unitKey:Cz,unitType:Cp.SELECTOR,formatType:1,format:Ct,keyContext:C0});}return Cx;},checkForNotificationBeforeSaving:function D(Ct,Cs){return(["dSave","saveAs","save"].includes(Ct))?this.checkForMandatoryNotificationWarning(Cs):Cs();},checkForMandatoryNotificationWarning:function BZ(Cv){var Cu=!this.isScopeFilterSelectionValid();if(this.hasEmptyMandatoryFilters()||Cu){var Cs=function(){this.close();this.destroy();},Ct=new mstrmojo.vi.ui.editors.MandatoryFilterNotification({onSave:function(){Cv();Cs.call(this);},onCancel:function(){Cs.call(this);}});if(Cu){AM.safeCall("warningBox.warningBoxContent.warningBoxMessage.set",Ct)("text",mstrmojo.desc(28992,"Your filter selection does not meet the recommended criteria. Are you sure you want to save the dashboard?"));}Ct.open();return true;}return Cv();},saveDefaultAiConfigSettings:function A5(Cu){var Cy=this,Cv=Cy.isnew,C1={formatObject:{},urInfo:null,requestData:true,callback:{},actions:[]},Cs,C0=mstrApp.isVI,Ct=mstrmojo.func.safeCall("supportFeature",mstrApp)($FEATURES.SUPPORT_DEFAULT_AI_CONFIG_SETTINGS),Cz=C0&&Ct,Cw=mstrApp&&mstrApp.isAppStatePresentation(),Cx=mstrmojo.dom.isAndroid;if(mstrApp&&!mstrApp.isVisBuilder&&Cv&&Cz&&!Cw&&!Cx&&A9.walk("aibotInfo.configSettings",Cy)==="{}"&&!Cy.hasSavedBotConfigOnOpen){Cs=Cy.getConfigSettings();C1.actions.push(Cy.getSetBotConfigAction(Cs));C1.callback=AM.wrapMethods(C1.callback,Cy.getSetBotConfigCallback());if(Cu){C1.callback=AM.wrapMethods(C1.callback,{success:Cu,failure:Cu});}Cy.hasSavedBotConfigOnOpen=true;Cy.saveDocProps(C1.formatObject,C1.urInfo,C1.requestData,C1.callback,C1.actions);return true;}return false;},getTitleButtonAliasUpdateAction:function Ay(Cu,Ct,Cs,Cv){var Cw={act:"editField",nodeKey:Cu,fieldKey:Ct,treeType:1,fieldType:Cg.BUTTON,fieldName:Cs,fieldValue:Cv,specialFieldType:3};return Cw;},loadScopeFilters:function A0(Cs){var Ct=Cs&&Cs.defn,Cu=Cs&&Cs.data;if(Ct&&this.defn){this.defn.globalFilterControls=Ct.globalFilterControls||[];}if(Cu&&this.data){this.data.globalFilterControls=Cu.globalFilterControls||[];}},getScopeFilters:function d(Cx,C1){if(!mstrApp.supportFeature(A4.SCOPE_FILTER)||!this.defn.globalFilterControls||!this.data.globalFilterControls){return[];}var C2=this.defn.globalFilterControls.slice(),Cz=this.data.globalFilterControls.slice(),Ct=[],Cw=Cx.defn._lkz,Cv=this.getLayoutDataCache(Cw),Cy=this,C0=Array.isArray(C1)?function Cs(C3){return C1.indexOf(C3.k)>=0;}:function Cu(){return true;};C2.filter(C0).forEach(function(C6){var C3=C6.k,C5=Cz.find(function(C8){return C8.k===C3;}),C4=Bg.call(Cy,Cx,C6,C5),C7=AM.safeCall("getPushDownFilterElmsCache",Cy)(C3);if(C7){C4.data.elms=[].concat(C7);}Ct.push(C4);Cv[C4.id]=C4;});return Ct;},getCurrentScopeFilterSelectorDefn:function AT(){return this.getCurrentScopeFilterSelectors().reduce(function(Ct,Cs){Ct[Cs.ckey]=Cs.node.defn;return Ct;},{});},getCurrentScopeFilterSelectors:function BE(){var Ct=this.getVIComponent(BR.FILTER_PANEL),Cs=(Ct&&Ct.children)||[];return Cs.map(function(Cu){return Cu.selector;}).filter(function(Cu){return Cu.isScopeFilter();});},hasScopeFilters:function Au(){return this.getCurrentScopeFilterSelectors().length>0;},isScopeFilterSelectionValid:function Bk(){var Cu=this.getVIComponent(BR.FILTER_PANEL),Ct=(Cu&&Cu.children)||[],Cs;Cs=Ct.some(function(Cw){var Cv=Cw.selector;if(!Cv.isScopeFilter()||!Cv.isEditable()){return false;}return !Cv.isSelectionValid;});return !Cs;},hasPartiallyDumpedDataset:function BS(){var Cs=false;A9.forEach(this.aiDatasets||{},function(Ct){if(Ct&&Ct.dumpLevel===1){Cs=true;}});return Cs;},getColorByObject:function A(){return mstrApp.isNativeEmbedded?this.colorBy:BI;},getColorByPalette:function Am(){return mstrApp.isNativeEmbedded?this.colorByPalette:Bx;},getColorByPaletteForId:function B7(Cs){const Ct=this.getCurrentPaletteId();if(Cs===Ct){return this.getColorByPalette();}if(Bm[Cs]===undefined){Bm[Cs]={};}return Bm[Cs];},getPaletteColorsForId:function u(Cu){if(CW[Cu]!==undefined){return CW[Cu];}var Ct,Cw;const Cs=A9.walk("paletteThemes.palettes",window.mstrConfig);Ct=CO.filterOne(Cs,function(Cx){return Cx.id===Cu;});if(Ct){Cw=Ct.colors.map(function(Cx){return Number(Cx);});CW[Cu]=Cw;return Cw;}const Cv=this.dashboardPalettes;Ct=CO.filterOne(Cv,function(Cx){return Cx.did===Cu;});if(Ct){Cw=Ct.colors;CW[Cu]=Cw;return Cw;}CW[Cu]=Az;return Az;},resetColorBy:function AF(){if(mstrApp.isNativeEmbedded){this.colorBy={};}else{BI={};}},resetColorByPalette:function i(){if(mstrApp.isNativeEmbedded){this.colorByPalette={};}else{Bx={};}}});mstrmojo.DocModel.fnBuildId=Bt;mstrmojo.DocModel.fnGetWidget=Ae;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.Refine.DateTimeUtil=mstrmojo.declare(mstrmojo.Obj,null,null);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var B=Date,A=B.prototype,D=B.CultureInfo,G=function(I,H){if(!H){H=2;}return("000"+I).slice(H*-1);};A.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};A.setTimeToNow=function(){var H=new Date();this.setHours(H.getHours());this.setMinutes(H.getMinutes());this.setSeconds(H.getSeconds());this.setMilliseconds(H.getMilliseconds());return this;};B.today=function(){return new Date().clearTime();};B.compare=function(I,H){if(isNaN(I)||isNaN(H)){throw new Error(I+" - "+H);}else{if(I instanceof Date&&H instanceof Date){return(I<H)?-1:(I>H)?1:0;}else{throw new TypeError(I+" - "+H);}}};B.equals=function(I,H){return(I.compareTo(H)===0);};B.getDayNumberFromName=function(I){var M=D.dayNames,H=D.abbreviatedDayNames,L=D.shortestDayNames,K=I.toLowerCase();for(var J=0;J<M.length;J++){if(M[J].toLowerCase()==K||H[J].toLowerCase()==K||L[J].toLowerCase()==K){return J;}}return -1;};B.getMonthNumberFromName=function(I){var L=D.monthNames,H=D.abbreviatedMonthNames,K=I.toLowerCase();for(var J=0;J<L.length;J++){if(L[J].toLowerCase()==K||H[J].toLowerCase()==K){return J;}}return -1;};B.isLeapYear=function(H){return((H%4===0&&H%100!==0)||H%400===0);};B.getDaysInMonth=function(H,I){return[31,(B.isLeapYear(H)?29:28),31,30,31,30,31,31,30,31,30,31][I];};B.getTimezoneAbbreviation=function(K){var J=D.timezones,I;for(var H=0;H<J.length;H++){if(J[H].offset===K){return J[H].name;}}return null;};B.getTimezoneOffset=function(H){var K=D.timezones,J;for(var I=0;I<K.length;I++){if(K[I].name===H.toUpperCase()){return K[I].offset;}}return null;};A.clone=function(){return new Date(this.getTime());};A.compareTo=function(H){return Date.compare(this,H);};A.equals=function(H){return Date.equals(this,H||new Date());};A.between=function(I,H){return this.getTime()>=I.getTime()&&this.getTime()<=H.getTime();};A.isAfter=function(H){return this.compareTo(H||new Date())===1;};A.isBefore=function(H){return(this.compareTo(H||new Date())===-1);};A.isToday=function(){return this.isSameDay(new Date());};A.isSameDay=function(H){return this.clone().clearTime().equals(H.clone().clearTime());};A.addMilliseconds=function(H){this.setMilliseconds(this.getMilliseconds()+H);return this;};A.addSeconds=function(H){return this.addMilliseconds(H*1000);};A.addMinutes=function(H){return this.addMilliseconds(H*60000);};A.addHours=function(H){return this.addMilliseconds(H*3600000);};A.addDays=function(H){this.setDate(this.getDate()+H);return this;};A.addWeeks=function(H){return this.addDays(H*7);};A.addMonths=function(H){var I=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+H);this.setDate(Math.min(I,B.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};A.addYears=function(H){return this.addMonths(H*12);};A.add=function(I){if(typeof I=="number"){this._orient=I;return this;}var H=I;if(H.milliseconds){this.addMilliseconds(H.milliseconds);}if(H.seconds){this.addSeconds(H.seconds);}if(H.minutes){this.addMinutes(H.minutes);}if(H.hours){this.addHours(H.hours);}if(H.weeks){this.addWeeks(H.weeks);}if(H.months){this.addMonths(H.months);}if(H.years){this.addYears(H.years);}if(H.days){this.addDays(H.days);}return this;};var E,F,C;A.getWeek=function(){var O,N,M,L,K,J,I,H,Q,P;E=(!E)?this.getFullYear():E;F=(!F)?this.getMonth()+1:F;C=(!C)?this.getDate():C;if(F<=2){O=E-1;N=(O/4|0)-(O/100|0)+(O/400|0);M=((O-1)/4|0)-((O-1)/100|0)+((O-1)/400|0);Q=N-M;K=0;J=C-1+(31*(F-1));}else{O=E;N=(O/4|0)-(O/100|0)+(O/400|0);M=((O-1)/4|0)-((O-1)/100|0)+((O-1)/400|0);Q=N-M;K=Q+1;J=C+((153*(F-3)+2)/5)+58+Q;}I=(O+N)%7;L=(J+I-K)%7;H=(J+3-L)|0;if(H<0){P=53-((I-Q)/5|0);}else{if(H>364+Q){P=1;}else{P=(H/7|0)+1;}}E=F=C=null;return P;};A.getISOWeek=function(){E=this.getUTCFullYear();F=this.getUTCMonth()+1;C=this.getUTCDate();return G(this.getWeek());};A.setWeek=function(H){return this.moveToDayOfWeek(1).addWeeks(H-this.getWeek());};B._validate=function(K,J,H,I){if(typeof K=="undefined"){return false;}else{if(typeof K!="number"){throw new TypeError(K+" is not a Number.");}else{if(K<J||K>H){throw new RangeError(K+" is not a valid value for "+I+".");}}}return true;};B.validateMillisecond=function(H){return B._validate(H,0,999,"millisecond");};B.validateSecond=function(H){return B._validate(H,0,59,"second");};B.validateMinute=function(H){return B._validate(H,0,59,"minute");};B.validateHour=function(H){return B._validate(H,0,23,"hour");};B.validateDay=function(I,H,J){return B._validate(I,1,B.getDaysInMonth(H,J),"day");};B.validateMonth=function(H){return B._validate(H,0,11,"month");};B.validateYear=function(H){return B._validate(H,0,9999,"year");};A.set=function(H){if(B.validateMillisecond(H.millisecond)){this.addMilliseconds(H.millisecond-this.getMilliseconds());}if(B.validateSecond(H.second)){this.addSeconds(H.second-this.getSeconds());}if(B.validateMinute(H.minute)){this.addMinutes(H.minute-this.getMinutes());}if(B.validateHour(H.hour)){this.addHours(H.hour-this.getHours());}if(B.validateMonth(H.month)){this.addMonths(H.month-this.getMonth());}if(B.validateYear(H.year)){this.addYears(H.year-this.getFullYear());}if(B.validateDay(H.day,this.getFullYear(),this.getMonth())){this.addDays(H.day-this.getDate());}if(H.timezone){this.setTimezone(H.timezone);}if(H.timezoneOffset){this.setTimezoneOffset(H.timezoneOffset);}if(H.week&&B._validate(H.week,0,53,"week")){this.setWeek(H.week);}return this;};A.moveToFirstDayOfMonth=function(){return this.set({day:1});};A.moveToLastDayOfMonth=function(){return this.set({day:B.getDaysInMonth(this.getFullYear(),this.getMonth())});};A.moveToNthOccurrence=function(I,J){var H=0;if(J>0){H=J-1;}else{if(J===-1){this.moveToLastDayOfMonth();if(this.getDay()!==I){this.moveToDayOfWeek(I,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(I,+1).addWeeks(H);};A.moveToDayOfWeek=function(H,I){var J=(H-this.getDay()+7*(I||+1))%7;return this.addDays((J===0)?J+=7*(I||+1):J);};A.moveToMonth=function(J,H){var I=(J-this.getMonth()+12*(H||+1))%12;return this.addMonths((I===0)?I+=12*(H||+1):I);};A.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};A.getTimezone=function(){return B.getTimezoneAbbreviation(this.getUTCOffset());};A.setTimezoneOffset=function(J){var H=this.getTimezoneOffset(),I=Number(J)*-6/10;return this.addMinutes(I-H);};A.setTimezone=function(H){return this.setTimezoneOffset(B.getTimezoneOffset(H));};A.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};A.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};A.getUTCOffset=function(){var I=this.getTimezoneOffset()*-10/6,H;if(I<0){H=(I-10000).toString();return H.charAt(0)+H.substr(2);}else{H=(I+10000).toString();return"+"+H.substr(1);}};A.getElapsed=function(H){return(H||new Date())-this;};if(!A.toISOString){A.toISOString=function(){function H(I){return I<10?"0"+I:I;}return'"'+this.getUTCFullYear()+"-"+H(this.getUTCMonth()+1)+"-"+H(this.getUTCDate())+"T"+H(this.getUTCHours())+":"+H(this.getUTCMinutes())+":"+H(this.getUTCSeconds())+'Z"';};}if(A._toString==undefined){A._toString=A.toString;}A.toString=function(J){var H=this;if(J&&J.length==1){var K=D.formatPatterns;H.t=H.toString;switch(J){case"d":return H.t(K.shortDate);case"D":return H.t(K.longDate);case"F":return H.t(K.fullDateTime);case"m":return H.t(K.monthDay);case"r":return H.t(K.rfc1123);case"s":return H.t(K.sortableDateTime);case"t":return H.t(K.shortTime);case"T":return H.t(K.longTime);case"u":return H.t(K.universalSortableDateTime);case"y":return H.t(K.yearMonth);}}var I=function(L){switch(L*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return J?J.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(L){if(L.charAt(0)==="\\"){return L.replace("\\","");}H.h=H.getHours;switch(L){case"hh":return G(H.h()<13?(H.h()===0?12:H.h()):(H.h()-12));case"h":return H.h()<13?(H.h()===0?12:H.h()):(H.h()-12);case"HH":return G(H.h());case"H":return H.h();case"mm":return G(H.getMinutes());case"m":return H.getMinutes();case"ss":return G(H.getSeconds());case"s":return H.getSeconds();case"yyyy":return G(H.getFullYear(),4);case"yy":return G(H.getFullYear());case"dddd":return D.dayNames[H.getDay()];case"ddd":return D.abbreviatedDayNames[H.getDay()];case"dd":return G(H.getDate());case"d":return H.getDate();case"MMMM":return D.monthNames[H.getMonth()];case"MMM":return D.abbreviatedMonthNames[H.getMonth()];case"MM":return G((H.getMonth()+1));case"M":return H.getMonth()+1;case"t":return H.h()<12?D.amDesignator.substring(0,1):D.pmDesignator.substring(0,1);case"tt":return H.h()<12?D.amDesignator:D.pmDesignator;case"S":return I(H.getDate());default:return L;}}):this._toString();};}());(function(){var Q=Date,G=Q.prototype,R=Q.CultureInfo,K=Number.prototype;G._orient=+1;G._nth=null;G._is=false;G._same=false;G._isSecond=false;K._dateElement="day";G.next=function(){this._orient=+1;return this;};Q.next=function(){return Q.today().next();};G.last=G.prev=G.previous=function(){this._orient=-1;return this;};Q.last=Q.prev=Q.previous=function(){return Q.today().last();};G.is=function(){this._is=true;return this;};G.same=function(){this._same=true;this._isSecond=false;return this;};G.today=function(){return this.same().day();};G.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}return false;};G.at=function(X){return(typeof X==="string")?Q.parse(this.toString("d")+" "+X):this.set(X);};K.fromNow=K.after=function(X){var Y={};Y[this._dateElement]=this;return((!X)?new Date():X.clone()).add(Y);};K.ago=K.before=function(X){var Y={};Y[this._dateElement]=this*-1;return((!X)?new Date():X.clone()).add(Y);};var E=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),H=("january february march april may june july august september october november december").split(/\s/),J=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),L=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),B=("final first second third fourth fifth").split(/\s/),U;G.toObject=function(){var Y={};for(var X=0;X<J.length;X++){Y[J[X].toLowerCase()]=this["get"+L[X]]();}return Y;};Q.fromObject=function(X){X.week=null;return Date.today().set(X);};var S=function(X){return function(){if(this._is){this._is=false;return this.getDay()==X;}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}this._isSecond=false;var Z=this._nth;this._nth=null;var Y=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(X,Z);if(this>Y){throw new RangeError(Q.getDayName(X)+" does not occur "+Z+" times in the month of "+Q.getMonthName(Y.getMonth())+" "+Y.getFullYear()+".");}return this;}return this.moveToDayOfWeek(X,this._orient);};};var F=function(X){return function(){var Z=Q.today(),Y=X-Z.getDay();if(X===0&&R.firstDayOfWeek===1&&Z.getDay()!==0){Y=Y+7;}return Z.addDays(Y);};};for(var P=0;P<E.length;P++){Q[E[P].toUpperCase()]=Q[E[P].toUpperCase().substring(0,3)]=P;Q[E[P]]=Q[E[P].substring(0,3)]=F(P);G[E[P]]=G[E[P].substring(0,3)]=S(P);}var W=function(X){return function(){if(this._is){this._is=false;return this.getMonth()===X;}return this.moveToMonth(X,this._orient);};};var I=function(X){return function(){return Q.today().set({month:X,day:1});};};for(var O=0;O<H.length;O++){Q[H[O].toUpperCase()]=Q[H[O].toUpperCase().substring(0,3)]=O;Q[H[O]]=Q[H[O].substring(0,3)]=I(O);G[H[O]]=G[H[O].substring(0,3)]=W(O);}var C=function(X){return function(){if(this._isSecond){this._isSecond=false;return this;}if(this._same){this._same=this._is=false;var c=this.toObject(),b=(arguments[0]||new Date()).toObject(),a="",Z=X.toLowerCase();for(var Y=(J.length-1);Y>-1;Y--){a=J[Y].toLowerCase();if(c[a]!=b[a]){return false;}if(Z==a){break;}}return true;}if(X.substring(X.length-1)!="s"){X+="s";}return this["add"+X](this._orient);};};var D=function(X){return function(){this._dateElement=X;return this;};};for(var N=0;N<J.length;N++){U=J[N].toLowerCase();G[U]=G[U+"s"]=C(J[N]);K[U]=K[U+"s"]=D(U);}G._ss=C("Second");var A=function(X){return function(Y){if(this._same){return this._ss(arguments[0]);}if(Y||Y===0){return this.moveToNthOccurrence(Y,X);}this._nth=X;if(X===2&&(Y===undefined||Y===null)){this._isSecond=true;return this.addSeconds(this._orient);}return this;};};for(var M=0;M<B.length;M++){G[B[M]]=(M===0)?A(-1):A(M);}}());(function(){Date.Parsing={Exception:function(I){this.message="Parse error at '"+I.substring(0,10)+" ...'";}};var A=Date.Parsing;var C=A.Operators={rtoken:function(I){return function(J){var K=J.match(I);if(K){return([K[0],J.substring(K[0].length)]);}else{throw new A.Exception(J);}};},token:function(I){return function(J){return C.rtoken(new RegExp("^s*"+J+"s*"))(J);};},stoken:function(I){return C.rtoken(new RegExp("^"+I));},until:function(I){return function(J){var K=[],M=null;while(J.length){try{M=I.call(this,J);}catch(L){K.push(M[0]);J=M[1];continue;}break;}return[K,J];};},many:function(I){return function(J){var M=[],K=null;while(J.length){try{K=I.call(this,J);}catch(L){return[M,J];}M.push(K[0]);J=K[1];}return[M,J];};},optional:function(I){return function(J){var K=null;try{K=I.call(this,J);}catch(L){return[null,J];}return[K[0],K[1]];};},not:function(I){return function(J){try{I.call(this,J);}catch(K){return[null,J];}throw new A.Exception(J);};},ignore:function(I){return I?function(J){var K=null;K=I.call(this,J);return[null,K[1]];}:null;},product:function(){var J=arguments[0],K=Array.prototype.slice.call(arguments,1),L=[];for(var I=0;I<J.length;I++){L.push(C.each(J[I],K));}return L;},cache:function(K){var I={},J=null;return function(L){try{J=I[L]=(I[L]||K.call(this,L));}catch(M){J=I[L]=M;}if(J instanceof A.Exception){throw J;}else{return J;}};},any:function(){var I=arguments;return function(K){var L=null;for(var J=0;J<I.length;J++){if(I[J]==null){continue;}try{L=(I[J].call(this,K));}catch(M){L=null;}if(L){return L;}}throw new A.Exception(K);};},each:function(){var I=arguments;return function(K){var N=[],L=null;for(var J=0;J<I.length;J++){if(I[J]==null){continue;}try{L=(I[J].call(this,K));}catch(M){throw new A.Exception(K);}N.push(L[0]);K=L[1];}return[N,K];};},all:function(){var J=arguments,I=I;return I.each(I.optional(J));},sequence:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;if(I.length==1){return I[0];}return function(O){var P=null,Q=null;var S=[];for(var N=0;N<I.length;N++){try{P=I[N].call(this,O);}catch(R){break;}S.push(P[0]);try{Q=J.call(this,P[1]);}catch(M){Q=null;break;}O=Q[1];}if(!P){throw new A.Exception(O);}if(Q){throw new A.Exception(Q[1]);}if(K){try{P=K.call(this,P[1]);}catch(L){throw new A.Exception(P[1]);}}return[S,(P?P[1]:O)];};},between:function(J,K,I){I=I||J;var L=C.each(C.ignore(J),K,C.ignore(I));return function(M){var N=L.call(this,M);return[[N[0][0],r[0][2]],N[1]];};},list:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;return(I instanceof Array?C.each(C.product(I.slice(0,-1),C.ignore(J)),I.slice(-1),C.ignore(K)):C.each(C.many(C.each(I,C.ignore(J))),px,C.ignore(K)));},set:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;return function(Z){var L=null,N=null,M=null,O=null,P=[[],Z],Y=false;for(var R=0;R<I.length;R++){M=null;N=null;L=null;Y=(I.length==1);try{L=I[R].call(this,Z);}catch(W){continue;}O=[[L[0]],L[1]];if(L[1].length>0&&!Y){try{M=J.call(this,L[1]);}catch(X){Y=true;}}else{Y=true;}if(!Y&&M[1].length===0){Y=true;}if(!Y){var S=[];for(var Q=0;Q<I.length;Q++){if(R!=Q){S.push(I[Q]);}}N=C.set(S,J).call(this,M[1]);if(N[0].length>0){O[0]=O[0].concat(N[0]);O[1]=N[1];}}if(O[1].length<P[1].length){P=O;}if(P[1].length===0){break;}}if(P[0].length===0){return P;}if(K){try{M=K.call(this,P[1]);}catch(U){throw new A.Exception(P[1]);}P[1]=M[1];}return P;};},forward:function(I,J){return function(K){return I[J].call(this,K);};},replace:function(J,I){return function(K){var L=J.call(this,K);return[I,L[1]];};},process:function(J,I){return function(K){var L=J.call(this,K);return[I.call(this,L[0]),L[1]];};},min:function(I,J){return function(K){var L=J.call(this,K);if(L[0].length<I){throw new A.Exception(K);}return L;};}};var H=function(I){return function(){var J=null,M=[];if(arguments.length>1){J=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){J=arguments[0];}}if(J){for(var L=0,K=J.shift();L<K.length;L++){J.unshift(K[L]);M.push(I.apply(null,J));J.shift();return M;}}else{return I.apply(null,arguments);}};};var G="optional not ignore cache".split(/\s/);for(var D=0;D<G.length;D++){C[G[D]]=H(C[G[D]]);}var F=function(I){return function(){if(arguments[0] instanceof Array){return I.apply(null,arguments[0]);}else{return I.apply(null,arguments);}};};var E="each any all".split(/\s/);for(var B=0;B<E.length;B++){C[E[B]]=F(C[E[B]]);}}());(function(){var E=Date,K=E.prototype,F=E.CultureInfo;var G=function(M){var N=[];for(var L=0;L<M.length;L++){if(M[L] instanceof Array){N=N.concat(G(M[L]));}else{if(M[L]){N.push(M[L]);}}}return N;};E.Grammar={};E.Translator={hour:function(L){return function(){this.hour=Number(L);};},minute:function(L){return function(){this.minute=Number(L);};},second:function(L){return function(){this.second=Number(L);};},meridian:function(L){return function(){this.meridian=L.slice(0,1).toLowerCase();};},timezone:function(L){return function(){var M=L.replace(/[^\d\+\-]/g,"");if(M.length){this.timezoneOffset=Number(M);}else{this.timezone=L.toLowerCase();}};},day:function(L){var M=L[0];return function(){this.day=Number(M.match(/\d+/)[0]);};},month:function(L){return function(){this.month=(L.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(L)/4:Number(L)-1;};},year:function(L){return function(){var M=Number(L);this.year=((L.length>2)?M:(M+(((M+2000)<F.twoDigitYearMax)?2000:1900)));};},rday:function(L){return function(){switch(L){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(L){L=(L instanceof Array)?L:[L];for(var N=0;N<L.length;N++){if(L[N]){L[N].call(this);}}var M=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=M.getDate();}if(!this.year){this.year=M.getFullYear();}if(!this.month&&this.month!==0){this.month=M.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>E.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var O=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){O.set({timezone:this.timezone});}else{if(this.timezoneOffset){O.set({timezoneOffset:this.timezoneOffset});}}return O;},finish:function(L){L=(L instanceof Array)?G(L):[L];if(L.length===0){return null;}for(var Q=0;Q<L.length;Q++){if(typeof L[Q]=="function"){L[Q].call(this);}}var N=E.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){N=new Date();}}var R=!!(this.days&&this.days!==null||this.orient||this.operator);var S,P,O;O=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){N.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;R=true;}}if(!R&&this.weekday&&!this.day&&!this.days){var M=Date[this.weekday]();this.day=M.getDate();if(!this.month){this.month=M.getMonth();}this.year=M.getFullYear();}if(R&&this.weekday&&this.unit!="month"){this.unit="day";S=(E.getDayNumberFromName(this.weekday)-N.getDay());P=7;this.days=S?((S+(O*P))%P):(O*P);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){N.set({day:this.value*1});if(!R){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;R=true;}if(R&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";S=(this.month-N.getMonth());P=12;this.months=S?((S+(O*P))%P):(O*P);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*O;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*O;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var M=Date[this.weekday]();this.day=M.getDate();if(M.getMonth()!==N.getMonth()){this.month=M.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(R&&this.timezone&&this.day&&this.days){this.day=this.days;}return(R)?N.add(this):N.set(this);}};var H=E.Parsing.Operators,D=E.Grammar,J=E.Translator,B;D.datePartDelimiter=H.rtoken(/^([\s\-\.\,\/\x27]+)/);D.timePartDelimiter=H.stoken(":");D.whiteSpace=H.rtoken(/^\s*/);D.generalDelimiter=H.rtoken(/^(([\s\,]|at|@|on)+)/);var A={};D.ctoken=function(P){var O=A[P];if(!O){var Q=F.regexPatterns;var N=P.split(/\s+/),M=[];for(var L=0;L<N.length;L++){M.push(H.replace(H.rtoken(Q[N[L]]),N[L]));}O=A[P]=H.any.apply(null,M);}return O;};D.ctoken2=function(L){return H.rtoken(F.regexPatterns[L]);};D.h=H.cache(H.process(H.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),J.hour));D.hh=H.cache(H.process(H.rtoken(/^(0[0-9]|1[0-2])/),J.hour));D.H=H.cache(H.process(H.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),J.hour));D.HH=H.cache(H.process(H.rtoken(/^([0-1][0-9]|2[0-3])/),J.hour));D.m=H.cache(H.process(H.rtoken(/^([0-5][0-9]|[0-9])/),J.minute));D.mm=H.cache(H.process(H.rtoken(/^[0-5][0-9]/),J.minute));D.s=H.cache(H.process(H.rtoken(/^([0-5][0-9]|[0-9])/),J.second));D.ss=H.cache(H.process(H.rtoken(/^[0-5][0-9]/),J.second));D.hms=H.cache(H.sequence([D.H,D.m,D.s],D.timePartDelimiter));D.t=H.cache(H.process(D.ctoken2("shortMeridian"),J.meridian));D.tt=H.cache(H.process(D.ctoken2("longMeridian"),J.meridian));D.z=H.cache(H.process(H.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),J.timezone));D.zz=H.cache(H.process(H.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),J.timezone));D.zzz=H.cache(H.process(D.ctoken2("timezone"),J.timezone));D.timeSuffix=H.each(H.ignore(D.whiteSpace),H.set([D.tt,D.zzz]));D.time=H.each(H.optional(H.ignore(H.stoken("T"))),D.hms,D.timeSuffix);D.d=H.cache(H.process(H.each(H.rtoken(/^([0-2]\d|3[0-1]|\d)/),H.optional(D.ctoken2("ordinalSuffix"))),J.day));D.dd=H.cache(H.process(H.each(H.rtoken(/^([0-2]\d|3[0-1])/),H.optional(D.ctoken2("ordinalSuffix"))),J.day));D.ddd=D.dddd=H.cache(H.process(D.ctoken("sun mon tue wed thu fri sat"),function(L){return function(){this.weekday=L;};}));D.M=H.cache(H.process(H.rtoken(/^(1[0-2]|0\d|\d)/),J.month));D.MM=H.cache(H.process(H.rtoken(/^(1[0-2]|0\d)/),J.month));D.MMM=D.MMMM=H.cache(H.process(D.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),J.month));D.y=H.cache(H.process(H.rtoken(/^(\d\d?)/),J.year));D.yy=H.cache(H.process(H.rtoken(/^(\d\d)/),J.year));D.yyy=H.cache(H.process(H.rtoken(/^(\d\d?\d?\d?)/),J.year));D.yyyy=H.cache(H.process(H.rtoken(/^(\d\d\d\d)/),J.year));B=function(){return H.each(H.any.apply(null,arguments),H.not(D.ctoken2("timeContext")));};D.day=B(D.d,D.dd);D.month=B(D.M,D.MMM);D.year=B(D.yyyy,D.yy);D.orientation=H.process(D.ctoken("past future"),function(L){return function(){this.orient=L;};});D.operator=H.process(D.ctoken("add subtract"),function(L){return function(){this.operator=L;};});D.rday=H.process(D.ctoken("yesterday tomorrow today now"),J.rday);D.unit=H.process(D.ctoken("second minute hour day week month year"),function(L){return function(){this.unit=L;};});D.value=H.process(H.rtoken(/^\d\d?(st|nd|rd|th)?/),function(L){return function(){this.value=L.replace(/\D/g,"");};});D.expression=H.set([D.rday,D.operator,D.value,D.unit,D.orientation,D.ddd,D.MMM]);B=function(){return H.set(arguments,D.datePartDelimiter);};D.mdy=B(D.ddd,D.month,D.day,D.year);D.ymd=B(D.ddd,D.year,D.month,D.day);D.dmy=B(D.ddd,D.day,D.month,D.year);D.date=function(L){return((D[F.dateElementOrder]||D.mdy).call(this,L));};D.format=H.process(H.many(H.any(H.process(H.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(L){if(D[L]){return D[L];}else{throw E.Parsing.Exception(L);}}),H.process(H.rtoken(/^[^dMyhHmstz]+/),function(L){return H.ignore(H.stoken(L));}))),function(L){return H.process(H.each.apply(null,L),J.finishExact);});var I={};var C=function(L){return I[L]=(I[L]||D.format(L)[0]);};D.formats=function(M){if(M instanceof Array){var N=[];for(var L=0;L<M.length;L++){N.push(C(M[L]));}return H.any.apply(null,N);}else{return C(M);}};D._formats=D.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);D._start=H.process(H.set([D.date,D.time,D.expression],D.generalDelimiter,D.whiteSpace),J.finish);D.start=function(L){try{var M=D._formats.call({},L);if(M[1].length===0){return M;}}catch(N){}return D._start.call({},L);};E._parse=E.parse;E.parse=function(L){var M=null;if(!L){return null;}if(L instanceof Date){return L;}try{M=E.Grammar.start.call({},L.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(N){return null;}return((M[1].length===0)?M[0]:null);};E.getParseFunction=function(M){var L=E.Grammar.formats(M);return function(N){var O=null;try{O=L.call({},N);}catch(P){return null;}return((O[1].length===0)?O[0]:null);};};E.parseExact=function(L,M){return E.getParseFunction(M)(L);};}());}());
// DO NOT UPDATE THIS FILE MANUALLY
// this file is generated by "json-schema-validator" project in Mojo
!function(){var e,r={380:function(e,r,t){"use strict";var a=t(495);a.code='require("ajv/dist/runtime/equal").default',r.A=a},767:function(e,r){"use strict";function t(e){for(var r,t=e.length,a=0,s=0;s<t;)a++,(r=e.charCodeAt(s++))>=55296&&r<=56319&&s<t&&56320==(64512&(r=e.charCodeAt(s)))&&s++;return a}r.A=t,t.code='require("ajv/dist/runtime/ucs2length").default'},495:function(e){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==r(t)&&"object"==r(a)){if(t.constructor!==a.constructor)return!1;var s,o,i;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(o=s;0!=o--;)if(!e(t[o],a[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(a,i[o]))return!1;for(o=s;0!=o--;){var n=i[o];if(!e(t[n],a[n]))return!1}return!0}return t!=t&&a!=a}},485:function(e,r,t){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r.ClearVisAsFilter=function e(r){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.instancePath,n=void 0===i?"":i;if(o.parentData,o.parentDataProperty,o.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.act&&(t="act")||void 0===r.nodeKey&&(t="nodeKey"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.act){if("clearVisAsFilter"!==r.act)return e.errors=[{instancePath:n+"/act",schemaPath:"#/properties/act/const",keyword:"const",params:{allowedValue:"clearVisAsFilter"},message:"must be equal to constant"}],!1;var p=!0}else p=!0;if(p){if(void 0!==r.nodeKey){if("string"!=typeof r.nodeKey)return e.errors=[{instancePath:n+"/nodeKey",schemaPath:"#/properties/nodeKey/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=!0}else p=!0;if(p){if(void 0!==r.controlKey){if("string"!=typeof r.controlKey)return e.errors=[{instancePath:n+"/controlKey",schemaPath:"#/properties/controlKey/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=!0}else p=!0;if(p){if(void 0!==r.associatedNodes){var m=r.associatedNodes;if(!Array.isArray(m))return e.errors=[{instancePath:n+"/associatedNodes",schemaPath:"#/properties/associatedNodes/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var y=m.length,h=0;h<y;h++){if("string"!=typeof m[h])return e.errors=[{instancePath:n+"/associatedNodes/"+h,schemaPath:"#/properties/associatedNodes/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;0}p=!0}else p=!0;if(p)if(void 0!==r.cgbNodeKeys){var c=r.cgbNodeKeys;if(!Array.isArray(c))return e.errors=[{instancePath:n+"/cgbNodeKeys",schemaPath:"#/properties/cgbNodeKeys/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var u=c.length,l=0;l<u;l++){var f=c[l];if(!Array.isArray(f))return e.errors=[{instancePath:n+"/cgbNodeKeys/"+l,schemaPath:"#/properties/cgbNodeKeys/items/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var d=f.length,g=0;g<d;g++){var P=f[g];if("string"!=typeof P&&"boolean"!=typeof P)return e.errors=[{instancePath:n+"/cgbNodeKeys/"+l+"/"+g,schemaPath:"#/properties/cgbNodeKeys/items/items/type",keyword:"type",params:{type:s.properties.cgbNodeKeys.items.items.type},message:"must be string,boolean"}],!1;0}0}p=!0}else p=!0}}}return e.errors=null,!0};var s={type:"object",required:["act","nodeKey"],properties:{act:{const:"clearVisAsFilter"},nodeKey:{type:"string"},controlKey:{type:"string"},associatedNodes:{type:"array",items:{type:"string"}},cgbNodeKeys:{type:"array",items:{type:"array",items:{type:["string","boolean"]}}}},$id:"ClearVisAsFilter"};r.CustomMenuCommon=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.instancePath,i=void 0===s?"":s;if(t.parentData,t.parentDataProperty,t.rootData,!Array.isArray(r))return e.errors=[{instancePath:i,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length>0){var n,p=r[0];if(!p||"object"!=a(p)||Array.isArray(p))return e.errors=[{instancePath:i+"/0",schemaPath:"#/items/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===p.type&&(n="type"))return e.errors=[{instancePath:i+"/0",schemaPath:"#/items/0/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==p.type){var m=p.type;if("string"!=typeof m)return e.errors=[{instancePath:i+"/0/type",schemaPath:"#/items/0/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(m)<1)return e.errors=[{instancePath:i+"/0/type",schemaPath:"#/items/0/properties/type/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var y=!0}else y=!0;if(y)if(void 0!==p.isShown){if("boolean"!=typeof p.isShown)return e.errors=[{instancePath:i+"/0/isShown",schemaPath:"#/items/0/properties/isShown/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=!0}else y=!0}return e.errors=null,!0};var o=t(767).A;r.CustomMenuFormat=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.formatConfig&&(t="formatConfig"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.name){var p=r.name;if("string"!=typeof p)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(p)<1)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var m=!0}else m=!0;if(m){if(void 0!==r.isShown){if("boolean"!=typeof r.isShown)return e.errors=[{instancePath:n+"/isShown",schemaPath:"#/properties/isShown/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}else m=!0;if(m){if(void 0!==r.formatConfig){if(!Array.isArray(r.formatConfig))return e.errors=[{instancePath:n+"/formatConfig",schemaPath:"#/properties/formatConfig/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;m=!0}else m=!0;if(m)if(void 0!==r.showFormatPanelName){var y=r.showFormatPanelName;if("string"!=typeof y)return e.errors=[{instancePath:n+"/showFormatPanelName",schemaPath:"#/properties/showFormatPanelName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(y)<1)return e.errors=[{instancePath:n+"/showFormatPanelName",schemaPath:"#/properties/showFormatPanelName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;m=!0}else m=!0}}return e.errors=null,!0},r.CustomMenuMultiSelectList=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.instancePath,p=void 0===n?"":n;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:p,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.items&&(t="items")||void 0===r.propertyName&&(t="propertyName"))return e.errors=[{instancePath:p,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.propertyName){var m=r.propertyName;if("string"!=typeof m)return e.errors=[{instancePath:p+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(m)<1)return e.errors=[{instancePath:p+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var y=!0}else y=!0;if(y){if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:p+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;if(y=!0)if(void 0!==r.items){var h=r.items;if(!Array.isArray(h))return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(h.length<1)return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;for(var c=!0,u=h.length,l=0;l<u;l++){var f=h[l];if(!f||"object"!=a(f)||Array.isArray(f))return e.errors=[{instancePath:p+"/items/"+l,schemaPath:"#/properties/items/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=void 0;if(void 0===f.labelText&&(d="labelText")||void 0===f.propertyName&&(d="propertyName"))return e.errors=[{instancePath:p+"/items/"+l,schemaPath:"#/properties/items/items/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;if(void 0!==f.labelText){var g=f.labelText;if("string"!=typeof g)return e.errors=[{instancePath:p+"/items/"+l+"/labelText",schemaPath:"#/properties/items/items/properties/labelText/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(g)<1)return e.errors=[{instancePath:p+"/items/"+l+"/labelText",schemaPath:"#/properties/items/items/properties/labelText/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var P=!0}else P=!0;if(P)if(void 0!==f.propertyName){var v=f.propertyName;if("string"!=typeof v)return e.errors=[{instancePath:p+"/items/"+l+"/propertyName",schemaPath:"#/properties/items/items/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(v)<1)return e.errors=[{instancePath:p+"/items/"+l+"/propertyName",schemaPath:"#/properties/items/items/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;P=!0}else P=!0;if(!(c=!0))break}if(c){var b,w=h.length;if(w>1)for(;w--;)for(b=w;b--;)if(i(h[w],h[b]))return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/uniqueItems",keyword:"uniqueItems",params:{i:w,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+w+" are identical)"}],!1}y=!0}else y=!0}return e.errors=null,!0};var i=t(380).A;r.CustomMenuNormal=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.name&&(t="name"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.name){var p=r.name;if("string"!=typeof p)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(p)<1)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var m=!0}else m=!0;if(m)if(void 0!==r.isDisabled){if("boolean"!=typeof r.isDisabled)return e.errors=[{instancePath:n+"/isDisabled",schemaPath:"#/properties/isDisabled/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}else m=!0;return e.errors=null,!0},r.CustomMenuSingleSelectList=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.instancePath,p=void 0===n?"":n,m=(s.parentData,s.parentDataProperty,s.rootData,null),y=0,h=y,c=!1,u=y;if(r&&"object"==a(r)&&!Array.isArray(r)&&void 0===r.propertyName&&(t="propertyName")){var l={instancePath:p,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"};null===m?m=[l]:m.push(l),y++}var f=u===y;if(!(c=c||f)){var d,g=y;if(r&&"object"==a(r)&&!Array.isArray(r)&&(void 0===r.currentValue&&(d="currentValue")||void 0===r.onClick&&(d="onClick"))){var P={instancePath:p,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"};null===m?m=[P]:m.push(P),y++}f=g===y,c=c||f}if(!c){var v={instancePath:p,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===m?m=[v]:m.push(v),y++,e.errors=m,!1}if(y=h,null!==m&&(h?m.length=h:m=null),0===y){if(!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:p,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var b;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.items&&(b="items"))return e.errors=[{instancePath:p,schemaPath:"#/required",keyword:"required",params:{missingProperty:b},message:"must have required property '"+b+"'"}],!1;if(void 0!==r.currentValue){var w=r.currentValue,k=y;if(y===k){if("string"!=typeof w)return e.errors=[{instancePath:p+"/currentValue",schemaPath:"#/properties/currentValue/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(w)<1)return e.errors=[{instancePath:p+"/currentValue",schemaPath:"#/properties/currentValue/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}var N=k===y}else N=!0;if(N){if(void 0!==r.propertyName){var A=r.propertyName,q=y;if(y===q){if("string"!=typeof A)return e.errors=[{instancePath:p+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(A)<1)return e.errors=[{instancePath:p+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}N=q===y}else N=!0;if(N){var j=y;if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:p+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;if(N=j===y)if(void 0!==r.items){var F=r.items,C=y;if(y===C){if(!Array.isArray(F))return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(F.length<1)return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;for(var K=!0,O=F.length,D=0;D<O;D++){var L=F[D],S=y;if(y===S){if(!L||"object"!=a(L)||Array.isArray(L))return e.errors=[{instancePath:p+"/items/"+D,schemaPath:"#/properties/items/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=void 0;if(void 0===L.name&&(T="name")||void 0===L.value&&(T="value"))return e.errors=[{instancePath:p+"/items/"+D,schemaPath:"#/properties/items/items/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;if(void 0!==L.name){var V=L.name,I=y;if(y===I){if("string"!=typeof V)return e.errors=[{instancePath:p+"/items/"+D+"/name",schemaPath:"#/properties/items/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(V)<1)return e.errors=[{instancePath:p+"/items/"+D+"/name",schemaPath:"#/properties/items/items/properties/name/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}var x=I===y}else x=!0;if(x)if(void 0!==L.value){var M=L.value,G=y;if(y===G){if("string"!=typeof M)return e.errors=[{instancePath:p+"/items/"+D+"/value",schemaPath:"#/properties/items/items/properties/value/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(M)<1)return e.errors=[{instancePath:p+"/items/"+D+"/value",schemaPath:"#/properties/items/items/properties/value/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}x=G===y}else x=!0}if(!(K=S===y))break}if(K){var B,$=F.length;if($>1)for(;$--;)for(B=$;B--;)if(i(F[$],F[B]))return e.errors=[{instancePath:p+"/items",schemaPath:"#/properties/items/uniqueItems",keyword:"uniqueItems",params:{i:$,j:B},message:"must NOT have duplicate items (items ## "+B+" and "+$+" are identical)"}],!1}}N=C===y}else N=!0}}}return e.errors=m,0===y},r.CustomMenuSubMenu=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i,p=(s.parentData,s.parentDataProperty,s.rootData,null),m=0,y=m,h=!1,c=m;if(r&&"object"==a(r)&&!Array.isArray(r)&&void 0===r.subMenuConfig&&(t="subMenuConfig")){var u={instancePath:n,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"};null===p?p=[u]:p.push(u),m++}var l=c===m;if(!(h=h||l)){var f,d=m;if(r&&"object"==a(r)&&!Array.isArray(r)&&void 0===r.getSubMenuConfig&&(f="getSubMenuConfig")){var g={instancePath:n,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};null===p?p=[g]:p.push(g),m++}l=d===m,h=h||l}if(!h){var P={instancePath:n,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===p?p=[P]:p.push(P),m++,e.errors=p,!1}if(m=y,null!==p&&(y?p.length=y:p=null),0===m){if(!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var v;if(void 0===r.name&&(v="name"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;if(void 0!==r.name){var b=r.name,w=m;if(m===w){if("string"!=typeof b)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(b)<1)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}var k=w===m}else k=!0;if(k)if(void 0!==r.subMenuConfig){var N=m;if(!Array.isArray(r.subMenuConfig))return e.errors=[{instancePath:n+"/subMenuConfig",schemaPath:"#/properties/subMenuConfig/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;k=N===m}else k=!0}return e.errors=p,0===m},r.CustomMenuToggle=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i,p=(s.parentData,s.parentDataProperty,s.rootData,null),m=0,y=m,h=!1,c=m;if(r&&"object"==a(r)&&!Array.isArray(r)&&(void 0===r.name&&(t="name")||void 0===r.propertyName&&(t="propertyName"))){var u={instancePath:n,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"};null===p?p=[u]:p.push(u),m++}var l=c===m;if(!(h=h||l)){var f,d=m;if(r&&"object"==a(r)&&!Array.isArray(r)&&(void 0===r.name&&(f="name")||void 0===r.currentValue&&(f="currentValue")||void 0===r.onClick&&(f="onClick"))){var g={instancePath:n,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"};null===p?p=[g]:p.push(g),m++}l=d===m,h=h||l}if(!h){var P={instancePath:n,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===p?p=[P]:p.push(P),m++,e.errors=p,!1}if(m=y,null!==p&&(y?p.length=y:p=null),0===m){if(!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0!==r.name){var v=r.name,b=m;if(m===b){if("string"!=typeof v)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(v)<1)return e.errors=[{instancePath:n+"/name",schemaPath:"#/properties/name/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}var w=b===m}else w=!0;if(w){if(void 0!==r.currentValue){var k=m;if("boolean"!=typeof r.currentValue)return e.errors=[{instancePath:n+"/currentValue",schemaPath:"#/properties/currentValue/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;w=k===m}else w=!0;if(w){if(void 0!==r.propertyName){var N=r.propertyName,A=m;if(m===A){if("string"!=typeof N)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(N)<1)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1}w=A===m}else w=!0;if(w){var q=m;if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:n+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;w=q===m}}}}return e.errors=p,0===m},r.FormatControlCharacterGroup=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.propertyName&&(t="propertyName"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.propertyName){var p=r.propertyName;if("string"!=typeof p)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(p)<1)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var m=!0}else m=!0;if(m){if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:n+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}return e.errors=null,!0},r.FormatControlColorByGroup=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.colorInfo&&(t="colorInfo"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.colorInfo){var p=r.colorInfo;if(!Array.isArray(p))return e.errors=[{instancePath:n+"/colorInfo",schemaPath:"#/properties/colorInfo/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(p.length<1)return e.errors=[{instancePath:n+"/colorInfo",schemaPath:"#/properties/colorInfo/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;for(var m=p.length,y=0;y<m;y++){var h=p[y];if("string"!=typeof h)return e.errors=[{instancePath:n+"/colorInfo/"+y,schemaPath:"#/properties/colorInfo/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(h)<1)return e.errors=[{instancePath:n+"/colorInfo/"+y,schemaPath:"#/properties/colorInfo/items/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;0}var c=!0}else c=!0;if(c){if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:n+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;c=!0}return e.errors=null,!0},r.FormatControlCommon=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.instancePath,i=void 0===s?"":s;if(t.parentData,t.parentDataProperty,t.rootData,!Array.isArray(r))return e.errors=[{instancePath:i,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length>0){var n,p=r[0];if(!p||"object"!=a(p)||Array.isArray(p))return e.errors=[{instancePath:i+"/0",schemaPath:"#/items/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===p.type&&(n="type"))return e.errors=[{instancePath:i+"/0",schemaPath:"#/items/0/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==p.type){var m=p.type;if("string"!=typeof m)return e.errors=[{instancePath:i+"/0/type",schemaPath:"#/items/0/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(m)<1)return e.errors=[{instancePath:i+"/0/type",schemaPath:"#/items/0/properties/type/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var y=!0}else y=!0;if(y){if(void 0!==p.isShown){if("boolean"!=typeof p.isShown)return e.errors=[{instancePath:i+"/0/isShown",schemaPath:"#/items/0/properties/isShown/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=!0}else y=!0;if(y)if(void 0!==p.label){var h,c=p.label;if(!c||"object"!=a(c)||Array.isArray(c))return e.errors=[{instancePath:i+"/0/label",schemaPath:"#/items/0/properties/label/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===c.text&&(h="text"))return e.errors=[{instancePath:i+"/0/label",schemaPath:"#/items/0/properties/label/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"}],!1;if(void 0!==c.text){if("string"!=typeof c.text)return e.errors=[{instancePath:i+"/0/label/text",schemaPath:"#/items/0/properties/label/properties/text/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=!0}else u=!0;if(u)if(void 0!==c.width){var l=c.width;if("string"!=typeof l)return e.errors=[{instancePath:i+"/0/label/width",schemaPath:"#/items/0/properties/label/properties/width/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(l)<1)return e.errors=[{instancePath:i+"/0/label/width",schemaPath:"#/items/0/properties/label/properties/width/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;u=!0}else u=!0;y=!0}else y=!0}}return e.errors=null,!0},r.FormatControlFillGroup=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.propertyName&&(t="propertyName"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.propertyName){var p=r.propertyName;if("string"!=typeof p)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(p)<1)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var m=!0}else m=!0;if(m){if(void 0!==r.showFillColor){if("boolean"!=typeof r.showFillColor)return e.errors=[{instancePath:n+"/showFillColor",schemaPath:"#/properties/showFillColor/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}else m=!0;if(m){if(void 0!==r.showFillAlpha){if("boolean"!=typeof r.showFillAlpha)return e.errors=[{instancePath:n+"/showFillAlpha",schemaPath:"#/properties/showFillAlpha/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}else m=!0;if(m){if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:n+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}}}return e.errors=null,!0},r.FormatControlLineGroup=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=s.instancePath,n=void 0===i?"":i;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:n,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.showFormatPanel&&(r.showFormatPanel=!0),void 0===r.propertyName&&(t="propertyName"))return e.errors=[{instancePath:n,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.propertyName){var p=r.propertyName;if("string"!=typeof p)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(o(p)<1)return e.errors=[{instancePath:n+"/propertyName",schemaPath:"#/properties/propertyName/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"}],!1;var m=!0}else m=!0;if(m){if(void 0!==r.hideColorControl){if("boolean"!=typeof r.hideColorControl)return e.errors=[{instancePath:n+"/hideColorControl",schemaPath:"#/properties/hideColorControl/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}else m=!0;if(m){if("boolean"!=typeof r.showFormatPanel)return e.errors=[{instancePath:n+"/showFormatPanel",schemaPath:"#/properties/showFormatPanel/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;m=!0}}return e.errors=null,!0},r.SetVisAsFilter=function e(r){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.instancePath,i=void 0===o?"":o;if(s.parentData,s.parentDataProperty,s.rootData,!r||"object"!=a(r)||Array.isArray(r))return e.errors=[{instancePath:i,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0===r.act&&(t="act")||void 0===r.sourceKey&&(t="sourceKey")||void 0===r.targetKeys&&(t="targetKeys"))return e.errors=[{instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;if(void 0!==r.act){if("setVisAsFilter"!==r.act)return e.errors=[{instancePath:i+"/act",schemaPath:"#/properties/act/const",keyword:"const",params:{allowedValue:"setVisAsFilter"},message:"must be equal to constant"}],!1;var p=!0}else p=!0;if(p){if(void 0!==r.sourceKey){if("string"!=typeof r.sourceKey)return e.errors=[{instancePath:i+"/sourceKey",schemaPath:"#/properties/sourceKey/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=!0}else p=!0;if(p){if(void 0!==r.controlKey){if("string"!=typeof r.controlKey)return e.errors=[{instancePath:i+"/controlKey",schemaPath:"#/properties/controlKey/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=!0}else p=!0;if(p){if(void 0!==r.associatedNodes){var m=r.associatedNodes;if(!Array.isArray(m))return e.errors=[{instancePath:i+"/associatedNodes",schemaPath:"#/properties/associatedNodes/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var y=m.length,h=0;h<y;h++){if("string"!=typeof m[h])return e.errors=[{instancePath:i+"/associatedNodes/"+h,schemaPath:"#/properties/associatedNodes/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;0}p=!0}else p=!0;if(p){if(void 0!==r.targetKeys){var c=r.targetKeys;if(!Array.isArray(c))return e.errors=[{instancePath:i+"/targetKeys",schemaPath:"#/properties/targetKeys/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var u=c.length,l=0;l<u;l++){if("string"!=typeof c[l])return e.errors=[{instancePath:i+"/targetKeys/"+l,schemaPath:"#/properties/targetKeys/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;0}p=!0}else p=!0;if(p){if(void 0!==r.CGBKeys){var f=r.CGBKeys;if(!Array.isArray(f))return e.errors=[{instancePath:i+"/CGBKeys",schemaPath:"#/properties/CGBKeys/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var d=f.length,g=0;g<d;g++){var P=f[g];if(!Array.isArray(P))return e.errors=[{instancePath:i+"/CGBKeys/"+g,schemaPath:"#/properties/CGBKeys/items/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;for(var v=P.length,b=0;b<v;b++){var w=P[b];if("string"!=typeof w&&"boolean"!=typeof w)return e.errors=[{instancePath:i+"/CGBKeys/"+g+"/"+b,schemaPath:"#/properties/CGBKeys/items/items/type",keyword:"type",params:{type:n.properties.CGBKeys.items.items.type},message:"must be string,boolean"}],!1;0}0}p=!0}else p=!0;if(p){if(void 0!==r.showAll){if("boolean"!=typeof r.showAll)return e.errors=[{instancePath:i+"/showAll",schemaPath:"#/properties/showAll/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;p=!0}else p=!0;if(p)if(void 0!==r.fos){if("boolean"!=typeof r.fos)return e.errors=[{instancePath:i+"/fos",schemaPath:"#/properties/fos/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;p=!0}else p=!0}}}}}}return e.errors=null,!0};var n={type:"object",required:["act","sourceKey","targetKeys"],properties:{act:{const:"setVisAsFilter"},sourceKey:{type:"string"},controlKey:{type:"string"},associatedNodes:{type:"array",items:{type:"string"}},targetKeys:{type:"array",items:{type:"string"}},CGBKeys:{type:"array",items:{type:"array",items:{type:["string","boolean"]}}},showAll:{type:"boolean"},fos:{type:"boolean"}},$id:"SetVisAsFilter"}}},t={},a=function e(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return r[a](o,o.exports,e),o.exports}(485);mstrmojo=null!==(e=mstrmojo)&&void 0!==e?e:{},mstrmojo.JSONSchemaValidator=a}();