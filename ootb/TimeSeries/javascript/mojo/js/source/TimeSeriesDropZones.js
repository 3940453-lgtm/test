(()=>{"use strict";mstrmojo.plugins.TimeSeries||(mstrmojo.plugins.TimeSeries={});for(var e={INDICATORS:{KEY:"indicators",VALUE:[]},LINE_CHART_COLORS_CONFIG:{KEY:"lineChartColorConfig",VALUE:[]},GRAPH_SHAPE:"graphShape",TIME_RANGE_OPTIONS:"timeRangeOptions",SELECTOR_LAYOUT:"selectorLayout",SELECTOR_POSITION:"selectorPosition",VOLUME_POSITION:"volumePosition",AXIS_TYPE:"axisType",Y_AXIS_LAYOUT:"axisVerticalLayout",X_AXIS_LAYOUT:"axisHorizontalLayout",INTERVAL_VALUE:"intervalValue",INTERVAL_UNIT:"intervalUnit",TIME_FRAME:"timeFrame",IS_AXIS_MOVED_TO_RIGHT:"isAxisMovedToRight",AXIS_SCALE:"axisScale",KPI_SOURCE:"kpiSource",IS_LEGEND_ON:"isLegendOn",IS_DATA_LABEL_ENABLED:"isDataLabelEnabled",DATA_LABEL_AND_MARKERS_FONT_CONFIG_HIDEABLE:"dataLabelAndMarkersFontConfigHideable",DATA_LABEL_BACKGROUND:"dataLabelBackground",DATA_LABEL_BACKGROUND_OPACITY:"dataLabelBackgroundOpacity",GRAPH_SHAPE_TYPE_EDITOR:"graphShapeTypeEditor",CANDLESTICK_EDITOR_LAYOUT:"candleStickEditorLayout",LINE_EDITOR_LAYOUT:"lineEditorLayout",CANDLESTICK_INCREASE_COLOR:"candlestickIncreaseColor",CANDLESTICK_DECREASE_COLOR:"candlestickDecreaseColor",LINE_CHART_LINES_EDITOR:"lineChartLinesEditor",LINE_CHART_COLOR_PICK:"lineChartColorPick",LINE_CHART_COLOR_PICK_OPACITY:"lineChartColorPickOpacity",INDICATOR_EDITOR:"indicatorEditor",VOLUME_OPACITY:"volumeOpacity",HORIZONTAL_AXIS_LINE_COLOR:"horizontalAxisLineColor",HORIZONTAL_AXIS_LINE_STYLE:"horizontalAxisLineStyle",VERTICAL_AXIS_LINE_COLOR:"verticalAxisLineColor",VERTICAL_AXIS_LINE_STYLE:"verticalAxisLineStyle",SHOW_HORIZONTAL_AXIS_LABEL:"showHorizontalAxisLabel",SHOW_VERTICAL_AXIS_LABEL:"showVerticalAxisLabel",SHOW_BOTH_AXIS_LABEL:"showBothAxisLabel",GRID_LINES_STYLE:"gridLinesStyle",GRID_LINES_COLOR:"gridLinesColor",IS_KPI_ENABLED:"isKpiEnabled",IS_KPI_LABEL_ENABLED:"isKpiLabelEnabled",IS_KPI_TREND_ENABLED:"isKpiTrendEnabled",KPI_VALUE_COLOR:"kpiValueColor",INCREASE_COLOR:"increaseColor",DECREASE_COLOR:"decreaseColor",INDICATOR_LINE_COLOR_PICK:"indicatorLineColorPick",TREND_NO_CHANGE_COLOR:"trendNoChangeColor",KPI_LABEL_HIDEABLE:"kpiLabelHideable",KPI_TREND_HIDEABLE:"kpiTrendHideable",FONT_FAMILY_GLOBAL:"fontFamilyGlobal",FONT_SIZE_GLOBAL:"fontSizeGlobal",FONT_STYLE_GLOBAL:"fontStyleGlobal",FONT_COLOR_GLOBAL:"fontColorGlobal",FONT_FAMILY_DATA_LABEL:"fontFamilyDataLabel",FONT_SIZE_DATA_LABEL:"fontSizeDataLabel",FONT_STYLE_DATA_LABEL:"fontStyleDataLabel",FONT_COLOR_DATA_LABEL:"fontColorDataLabel",FONT_FAMILY_HORIZONTAL_AXIS:"fontFamilyHorizontalAxis",FONT_SIZE_HORIZONTAL_AXIS:"fontSizeHorizontalAxis",FONT_STYLE_HORIZONTAL_AXIS:"fontStyleHorizontalAxis",FONT_COLOR_HORIZONTAL_AXIS:"fontColorHorizontalAxis",FONT_FAMILY_VERTICAL_AXIS:"fontFamilyVerticalAxis",FONT_SIZE_VERTICAL_AXIS:"fontSizeVerticalAxis",FONT_STYLE_VERTICAL_AXIS:"fontStyleVerticalAxis",FONT_COLOR_VERTICAL_AXIS:"fontColorVerticalAxis",FONT_FAMILY_BOTH_AXES:"fontFamilyBothAxes",FONT_SIZE_BOTH_AXES:"fontSizeBothAxes",FONT_STYLE_BOTH_AXES:"fontStyleBothAxes",FONT_COLOR_BOTH_AXES:"fontColorBothAxes",FONT_FAMILY_KPI_TREND:"fontFamilyKpiTrend",FONT_SIZE_KPI_TREND:"fontSizeKpiTrend",FONT_STYLE_KPI_TREND:"fontStyleKpiTrend",FONT_COLOR_KPI_TREND:"fontColorKpiTrend",FONT_FAMILY_KPI_LABEL:"fontFamilyKpiLabel",FONT_SIZE_KPI_LABEL:"fontSizeKpiLabel",FONT_STYLE_KPI_LABEL:"fontStyleKpiLabel",FONT_COLOR_KPI_LABEL:"fontColorKpiLabel",FONT_FAMILY_KPI_VALUE:"fontFamilyKpiValue",FONT_SIZE_KPI_VALUE:"fontSizeKpiValue",FONT_STYLE_KPI_VALUE:"fontStyleKpiValue",FONT_COLOR_KPI_VALUE:"fontColorKpiValue",FONT_FAMILY_LEGEND:"fontFamilyLegend",FONT_SIZE_LEGEND:"fontSizeLegend",FONT_STYLE_LEGEND:"fontStyleLegend",FONT_COLOR_LEGEND:"fontColorLegend",SELECTED_TIME_RANGE:"selectedTimeRange",USE_TIME_RANGE_SELECTOR_VALUE:"useTimeRangeSelectorValue",IS_BANDING_ENABLED:"isBandingEnabled",PERCENTAGE_SCALE_SOURCE:"percentageScaleSource",AXIS_GRID_LINES_ENABLED:"axisGridLinesEnabled",AXIS_GRID_LINES_HIDEABLE_LAYOUT:"axiGgridLinesHideableLayout",AXIS_GRID_LINES:"axisGridLines",DATA_ZOOM_START:"dataZoomStart",DATA_ZOOM_END:"dataZoomEnd",VOLUME_COLOR:"volumeColor"},t=1;t<5;t++)e.INDICATORS.VALUE.push({IS_ENABLED:"isIndicatorEnabled".concat(t),LABEL:"indicatorLabel".concat(t),SOURCE:"indicatorSource".concat(t),LENGTH:"indicatorLength".concat(t),LINE_COLOR:"indicatorLineColor".concat(t),INDEX:t});for(var o={Open:0,Close:1,Lowest:2,Highest:3},i=0;i<4;i++)e.LINE_CHART_COLORS_CONFIG.VALUE.push({ID:"".concat(Object.keys(o)[i].toLowerCase()),OPACITY:"metricLineOpacity".concat(Object.keys(o)[i]),LINE_COLOR:"metricLineColor".concat(Object.keys(o)[i])});function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)}return o}function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}mstrmojo.plugins.TimeSeries||(mstrmojo.plugins.TimeSeries={}),mstrmojo.plugins.TimeSeries||(mstrmojo.plugins.TimeSeries={}),mstrmojo.descriptors["TimeSeries.1"]||mstrmojo.requiresDescsWPrefix("TimeSeries.",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99),mstrmojo.requiresCls("mstrmojo.vi.models.CustomVisDropZones");var s=mstrmojo.vi.models.CustomVisDropZones.ENUM_ALLOW_DROP_TYPE,_=s.ATTRIBUTE,E=s.METRIC,L={OPEN:mstrmojo.descP("TimeSeries.","65","Open"),CLOSE:mstrmojo.descP("TimeSeries.","66","Close"),LOWEST:mstrmojo.descP("TimeSeries.","67","Lowest"),HIGHEST:mstrmojo.descP("TimeSeries.","68","Highest"),VOLUME:mstrmojo.descP("TimeSeries.","69","Volume")},O=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){a(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({TIME_ATTRIBUTE:mstrmojo.descP("TimeSeries.","64","Time Attribute")},L),l=mstrmojo.descP("TimeSeries.","70","Drag time attribute here"),A=mstrmojo.descP("TimeSeries.","71","Drag metric here");mstrmojo.plugins.TimeSeries.TimeSeriesDropZones=mstrmojo.declare(mstrmojo.vi.models.CustomVisDropZones,null,{scriptClass:"mstrmojo.plugins.TimeSeries.TimeSeriesDropZones",cssClass:"TimeSeries-dropzones",supportWebSort:function(){return!1},getCustomDropZones:function(){return[{name:O.TIME_ATTRIBUTE,title:l,maxCapacity:1,allowObjectType:_},{name:O.OPEN,title:A,maxCapacity:1,allowObjectType:E},{name:O.CLOSE,title:A,maxCapacity:1,allowObjectType:E},{name:O.LOWEST,title:A,maxCapacity:1,allowObjectType:E},{name:O.HIGHEST,title:A,maxCapacity:1,allowObjectType:E},{name:O.VOLUME,title:A,maxCapacity:1,allowObjectType:E}]},getEmptyMetricDropzonesCount:function(){var e=this;return Object.values(L).filter(function(t){return e.isZoneEmpty(t)}).length},getObjectDropzones:function(e){var t=this;return Object.values(O).filter(function(o){return t.isObjectInZone(e,o)})},getActionsForDoubleClick:function(e){var t=this,o=0===this.getEmptyMetricDropzonesCount(),i=this.isAttribute(e)||o,r=this._super(e);if(!r.length)return[];var n=this.getObjectDropzones(e);i||n.forEach(function(o){t.getRemoveDropZoneObjectsActions(r,o,e)});var a=this.dropZones.find(function(e){return e.id===r.find(function(e){return"addDropZoneUnit"===e.act}).zoneId}).n,s=this.getHost();return c("add",s,a,this.dropZones),r},getActionsForObjectsDropped:function(e,t){var o=this,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i,r,n=[],a=!0,s=!1;try{for(o=o.call(e);!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,1)[0],n=[];this.getObjectDropzones(i).forEach(function(e){o.getRemoveDropZoneObjectsActions(n,e,i)});var a=this.getHost();return c("add",a,e.n,this.dropZones),n},getActionsForObjectsRemoved:function(e){var t=this.getHost();return T(t,e.n,this.dropZones),[]}});var T=function(t,o,i){var r=c("remove",t,o,i);r.length&&(I(r,e.PERCENTAGE_SCALE_SOURCE,t),I(r,e.KPI_SOURCE,t),I(r,e.INDICATORS.VALUE[0].SOURCE,t),I(r,e.INDICATORS.VALUE[1].SOURCE,t),I(r,e.INDICATORS.VALUE[2].SOURCE,t),I(r,e.INDICATORS.VALUE[3].SOURCE,t))},I=function(e,t,o){e.find(function(e){return e.dssid===parseInt(o.getProperty(t))})||o.setProperty(t,null,{suppressData:!0})},c=function(e,t,o,i){var r=[];if(i.slice(1,5).forEach(function(t,i){var n=t.n,a=t.items;("add"===e?a.length||o===n:a.length&&o!==n)&&r.push({n,dssid:i})}),r.length){var n,a=(null===(n=r.find(function(e){return 1===e.dssid}))||void 0===n?void 0:n.dssid)||r[0].dssid;t.defaultDropdownItem=a,t.dropdownItems=r}return r}})();