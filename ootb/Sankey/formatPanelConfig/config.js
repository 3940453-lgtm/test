!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var o in a)("object"==typeof exports?exports:e)[o]=a[o]}}(self,()=>(()=>{"use strict";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{mstrSankey:()=>te}),mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var a={HORIZONTAL_ALIGN_OPTIONS:["align-left","align-center","align-right"],HORIZONTAL_ALIGN_STYLE:"toggle-button-radio _3item"},o="nameSelect",n="style";mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var l,r,i={POSITION_AND_SIZE_SECTION:"positionAndSizeSection",TITLEBAR_SHOW:"title_tbShw",TITLEBAR_FONTSTYLE:"title_fontStyle",TITLEBAR_TEXT_ALIGNMENT:"title_alh",TITLEBAR_FONT_COLOR:"title_fc",TITLEBAR_BACKGROUND_COLOR:"title_bc",TITLEBAR_BACKGROUND_OPACITY:"title_fill_opacity",TITLEBAR_FONT_SIZE:"title_fsz",TITLEBAR_FONT_FAMILY:"title_ff",TITLEBAR_TITLES_SHOW:"title_titleShw",TITLEBAR_TITLE_LINES:"title_lines",TITLEBAR_TITLE_INDEX:"title_index",CONTAINER_FILL_COLOR:"containerFill",CONTAINER_BORDER_OPACITY:"container_bo",CONTAINER_BORDER_STYLE:"container_borderStyle",CONTAINER_BORDER_COLOR:"container_borderColor",CONTAINER_RADIUS:"container_radius",CONTAINER_LEFT_POSITION:"container_left",CONTAINER_TOP_POSITION:"container_top",CONTAINER_HEIGHT:"container_height",CONTAINER_WIDTH:"container_width",CONTAINER_SHADOW_COLOR:"container_shadow_color",CONTAINER_SHADOW_OPACITY:"container_shadow_opacity",CONTAINER_SHADOW_SIZE:"container_shadow_size",CONTAINER_SHADOW_ANGLE:"container_shadow_angle",CONTAINER_SHADOW_DISTANCE:"container_shadow_distance",ENABLE_TITLE_BUTTON:"enableButton",BUTTON_RADIUS:"btnrd",BUTTON_SIZE:"btnsz",TRANSACTION_VISIBLE:"txnVisible",TRANSACTION_LABEL_TYPE:"txnLabelType",TRANSACTION_BUTTON_ALIAS:"txnButtonAlias",TRANSACTION_FONT_NAME:"txnFontName",TRANSACTION_FONT_STYLE:"txnFontStyle",TRANSACTION_FONT_COLOR:"txnFontColor",TRANSACTION_BUTTON_FILL_COLOR:"txnButtonFillColor",TRANSACTION_BUTTON_BORDER_COLOR:"txnButtonBorderColor",TRANSACTION_BUTTON_FILL_OPACITY:"txnButtonFillOpacity",TRANSACTION_BUTTON_BORDER_STYLE:"txnButtonBorderStyle",EXPORT_VISIBLE:"exportVisible",EXPORT_LABEL_TYPE:"exportLabelType",EXPORT_BUTTON_ALIAS:"exportButtonAlias",EXPORT_OPTIONS:"exportOptions",EXPORT_FONT_NAME:"exportFontName",EXPORT_FONT_STYLE:"exportFontStyle",EXPORT_FONT_COLOR:"exportFontColor",EXPORT_BUTTON_FILL_COLOR:"exportButtonFillColor",EXPORT_BUTTON_BORDER_COLOR:"exportButtonBorderColor",EXPORT_BUTTON_FILL_OPACITY:"exportButtonFillOpacity",EXPORT_BUTTON_BORDER_STYLE:"exportButtonBorderStyle",MAXIMIZE_VISIBLE:"maximizeVisible",MAXIMIZE_FONT_COLOR:"maximizeFontColor",MAXIMIZE_BUTTON_FILL_COLOR:"maximizeButtonFillColor",MAXIMIZE_BUTTON_BORDER_COLOR:"maximizeButtonBorderColor",MAXIMIZE_BUTTON_FILL_OPACITY:"maximizeButtonFillOpacity",MAXIMIZE_BUTTON_BORDER_STYLE:"maximizeButtonBorderStyle",CONTEXTMENU_VISIBLE:"contextMenuVisible",CONTEXTMENU_FONT_COLOR:"contextMenuFontColor",CONTEXTMENU_BUTTON_FILL_COLOR:"contextMenuButtonFillColor",CONTEXTMENU_BUTTON_BORDER_COLOR:"contextMenuButtonBorderColor",CONTEXTMENU_BUTTON_FILL_OPACITY:"contextMenuButtonFillOpacity",CONTEXTMENU_BUTTON_BORDER_STYLE:"contextMenuButtonBorderStyle",FONT_CONFIG:"fontConfig",VIZ_PALETTE_COLORS:"vizPaletteColors"},s="fontLayout",d="FontColor";mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var m=function(){return{tagName:"FontConfig",key:i.FONT_CONFIG,keyIDs:{fontName:i.TITLEBAR_FONT_FAMILY,fontStyle:i.TITLEBAR_FONTSTYLE,fontSize:i.TITLEBAR_FONT_SIZE,fontColor:i.TITLEBAR_FONT_COLOR,textAlignment:i.TITLEBAR_TEXT_ALIGNMENT,paletteColors:i.VIZ_PALETTE_COLORS},displayOptions:[o,n,"sizeAndColor","horizontalAlign"],horizontalAlignmentOptions:a.HORIZONTAL_ALIGN_OPTIONS,textAlignmentStyle:a.HORIZONTAL_ALIGN_STYLE}},c=function(){var e,t,a={tagName:"VerticalLayout",className:"container-radius-section",children:[{tagName:"Text",text:{desc:14447,name:"Radius"}},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-2vs1-stretch",children:[{tagName:"Slider",className:"new-style-slider",min:0,max:40,value:0,key:i.CONTAINER_RADIUS},{tagName:"InputNumber",className:"radius-input",format:"",min:0,max:40,value:0,showStepper:!1,key:i.CONTAINER_RADIUS}]}]};return null!==(e=mstrApp)&&void 0!==e&&null!==(t=e.supportFeature)&&void 0!==t&&t.call(e,mstrmojo.vi.enums.EnumFeatures.SUPPORT_RADIUS_AND_SPACING)?a:null},u=function(){var e,t,a={tagName:"VerticalLayout",className:"container-radius-section",children:[{tagName:"Text",text:{desc:29150,name:"Shadow"}},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-1vs2-stretch",children:[{tagName:"Text",text:{desc:13601,name:"Fill"}},{tagName:"ColorPickerWithOpacity",keyIDs:{color:i.CONTAINER_SHADOW_COLOR,opacity:i.CONTAINER_SHADOW_OPACITY,paletteColors:i.VIZ_PALETTE_COLORS},format:"%",min:0,max:100}]},{tagName:"Text",text:{desc:4906,name:"Blur"}},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-2vs1-stretch",children:[{tagName:"Slider",className:"new-style-slider",min:0,max:40,value:0,key:i.CONTAINER_SHADOW_SIZE},{tagName:"InputNumber",className:"shadow-input",format:"",min:0,max:40,value:0,showStepper:!1,key:i.CONTAINER_SHADOW_SIZE}]},{tagName:"Text",text:{desc:13325,name:"Distance"}},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-2vs1-stretch",children:[{tagName:"Slider",className:"new-style-slider",min:0,max:30,value:0,key:i.CONTAINER_SHADOW_DISTANCE},{tagName:"InputNumber",className:"shadow-input",format:"",min:0,max:30,value:0,showStepper:!1,key:i.CONTAINER_SHADOW_DISTANCE}]},{tagName:"Text",text:{desc:14294,name:"Angle"}},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-2vs1-stretch",children:[{tagName:"Slider",className:"new-style-slider",min:0,max:359,value:0,key:i.CONTAINER_SHADOW_ANGLE},{tagName:"InputNumber",className:"shadow-input",format:"Â°",min:0,max:359,value:0,showStepper:!1,key:i.CONTAINER_SHADOW_ANGLE}]}]};return null!==(e=mstrApp)&&void 0!==e&&null!==(t=e.supportFeature)&&void 0!==t&&t.call(e,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)?a:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{tagName:"FontConfig",keyIDs:{fontLayout:"".concat(e.propPrefix).concat(s),fontName:"".concat(e.propPrefix).concat("FontName"),fontStyle:"".concat(e.propPrefix).concat("FontStyle"),fontColor:"".concat(e.propPrefix).concat(d),paletteColors:i.VIZ_PALETTE_COLORS},fontColorStyle:"horizontal-flex-space-between _2item-1vs2-stretch",displayOptions:[o,n,"color"]}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{tagName:"HorizontalLayout",key:e.buttonTitle,className:"horizontal-flex-space-between title-button-layout no-bottom-margin ".concat("txn"===e.propPrefix?"txn-button":""),children:[{tagName:"Text",text:e.buttonTitle},{tagName:"ToggleIconButton",key:"".concat(e.propPrefix).concat("Visible"),icon:"button-invisible",alterIcon:"button-visible",func:{type:"disable",targets:["".concat(e.propPrefix,"-button-popover")]}},{tagName:"ToggleIconButton",key:"".concat(e.propPrefix,"-button-popover"),icon:"format",alterIcon:"format-highlight",popoverConfig:{placement:"rightTop",overlayClassName:"action-btn-popover",overlayInnerStyle:{width:184},offsetX:6,offsetY:0,content:[{tagName:"VerticalLayout",className:"".concat(e.propPrefix,"-button-popover-content"),children:[{tagName:"Text",className:"section-header-text",text:e.popoverTitle},{tagName:"Select",className:"title-button-label-type",key:"".concat(e.propPrefix).concat("LabelType"),options:[{desc:29037,name:"Text only",value:0},{desc:9867,name:"Icon only",value:1},{desc:28927,name:"Icon and text",value:2}],funcs:[{type:"hide",targets:["".concat(e.propPrefix,"-button-alias"),"".concat(e.propPrefix).concat(s)],valueMap:e.iconOnly?function(e){return!1}:function(e){return"1"===e}},{type:"hide",targets:["".concat(e.propPrefix,"IconColorSetting")],valueMap:e.iconOnly?function(e){return!1}:function(e){return"1"!==e}}]},{tagName:"Select",className:"export-button-options",key:"".concat(e.propPrefix).concat("Options"),options:[{desc:28928,name:"All options",value:0},{desc:5212,name:"Export to PDF",value:1},{desc:5213,name:"Export to Excel",value:2},{desc:28929,name:"Export to Data",value:3}]},{tagName:"HorizontalLayout",key:"".concat(e.propPrefix,"-button-alias"),className:"horizontal-flex-space-between _2item-stretch button-alias",children:[{tagName:"Text",text:{desc:11916,name:"Alias"}},{tagName:"Input",key:"".concat(e.propPrefix).concat("ButtonAlias"),applyChangeOnFocusOut:!0}]},y(e),{tagName:"HorizontalLayout",key:"".concat(e.propPrefix,"IconColorSetting"),className:"horizontal-flex-space-between _2item-1vs2-stretch",children:[{tagName:"Text",text:{desc:7809,name:"Icon"}},{tagName:"ColorPicker",keyIDs:{color:"".concat(e.propPrefix).concat(d),paletteColors:i.VIZ_PALETTE_COLORS}}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-1vs2-stretch",children:[{tagName:"Text",text:{desc:13601,name:"Fill"}},{tagName:"ColorPickerWithOpacity",keyIDs:{color:"".concat(e.propPrefix).concat("ButtonFillColor"),opacity:"".concat(e.propPrefix).concat("ButtonFillOpacity"),paletteColors:i.VIZ_PALETTE_COLORS},format:"%",min:0,max:100}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _3item-stretch",children:[{tagName:"Text",text:{desc:18345,name:"Border"}},{tagName:"Select",key:"".concat(e.propPrefix).concat("ButtonBorderStyle"),ariaLabel:{desc:18345,name:"Border"},innerClassName:"lines",showOptionTooltip:!1,options:[{desc:2057,name:"None",value:"none"},{desc:19532,name:"1 point dotted",value:"1pt dotted"},{desc:19530,name:"1 point dashed",value:"1pt dashed"},{desc:19531,name:"1 point solid",value:"1pt solid"},{desc:19533,name:"2 point solid",value:"2pt solid"}],icons:["none","dot","dash","solid","solid-thick"]},{tagName:"ColorPicker",keyIDs:{color:"".concat(e.propPrefix).concat("ButtonBorderColor"),paletteColors:i.VIZ_PALETTE_COLORS}}]}]}]}}]}},N=function(){var e,t,a={tagName:"VerticalLayout",className:"title-button-section",children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between no-bottom-margin",children:[{tagName:"Text",text:{desc:28920,name:"Title buttons"}},{tagName:"Switch",key:i.ENABLE_TITLE_BUTTON,func:{type:"hide",targets:["titleButtonContent"]}}]},{tagName:"VerticalLayout",key:"titleButtonContent",children:[{tagName:"Text",text:{desc:28921,name:"Button radius"}},{tagName:"Radio",key:i.BUTTON_RADIUS,className:"toggle-button-radio _4item",innerClassName:"rectangle-icons",useIcons:!0,useButtons:!0,horizontal:!0,useTooltips:!0,options:[{name:"no-radius",ariaLabel:{desc:19516,name:"No Radius"},value:0},{name:"small-radius",ariaLabel:{desc:19519,name:"Small Radius"},value:10},{name:"medium-radius",ariaLabel:{desc:19517,name:"Medium Radius"},value:30},{name:"large-radius",ariaLabel:{desc:19526,name:"Large Radius"},value:50}]},{tagName:"Text",text:{desc:28922,name:"Button size"}},{tagName:"Radio",key:i.BUTTON_SIZE,useButtons:!0,horizontal:!0,useIcons:!0,useTooltips:!0,className:"toggle-button-radio _3item title-button-size",innerClassName:"title-button-size-icons",options:[{name:"small",ariaLabel:{desc:11446,name:"Small"},value:0},{name:"medium",ariaLabel:{desc:2263,name:"Medium"},value:1},{name:"large",ariaLabel:{desc:11447,name:"Large"},value:2}]},p({buttonTitle:{desc:246,name:"Export"},popoverTitle:{desc:28924,name:"Export Button"},propPrefix:"export"}),p({buttonTitle:{desc:4541,name:"Maximize"},popoverTitle:{desc:28925,name:"Maximize Button"},propPrefix:"maximize",iconOnly:!0}),p({buttonTitle:{desc:28926,name:"Context menu"},popoverTitle:{desc:25843,name:"Context Menu"},propPrefix:"contextMenu",iconOnly:!0})]}]};return null!==(e=mstrApp)&&void 0!==e&&null!==(t=e.supportFeature)&&void 0!==t&&t.call(e,mstrmojo.vi.enums.EnumFeatures.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)?a:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{tagName:"BorderAndColorFillConfig",keyIDs:{fillColor:i.CONTAINER_FILL_COLOR,fillOpacity:i.CONTAINER_BORDER_OPACITY,borderStyle:i.CONTAINER_BORDER_STYLE,borderColor:i.CONTAINER_BORDER_COLOR,paletteColors:i.VIZ_PALETTE_COLORS},useFillGradient:e.useFillGradient}},T={tagName:"PositionSizeConfig",min:0,max:100,format:"%",keyIDs:{section:i.POSITION_AND_SIZE_SECTION,leftPosition:i.CONTAINER_LEFT_POSITION,topPosition:i.CONTAINER_TOP_POSITION,width:i.CONTAINER_WIDTH,height:i.CONTAINER_HEIGHT}},v={tagName:"VerticalLayout",className:"title-and-container-layout",key:"graphFont",children:[{tagName:"VerticalLayout",children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between title-bar-container",children:[{tagName:"Text",className:"section-header-text title-bar-text",text:{desc:7806,name:"Title Bar"}},{tagName:"Switch",key:i.TITLEBAR_SHOW,func:{type:"hide",targets:["titleFontContent"]}}]},{tagName:"VerticalLayout",key:"titleFontContent",children:[m(),{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _3item-stretch",children:[{tagName:"Text",text:{desc:13601,name:"Fill"}},{tagName:"ColorPicker",keyIDs:{color:i.TITLEBAR_BACKGROUND_COLOR,paletteColors:i.VIZ_PALETTE_COLORS}},{tagName:"InputNumber",key:i.TITLEBAR_BACKGROUND_OPACITY,format:"%",min:0,max:100,value:100}]}]}]},g(),c(),u(),T].filter(function(e){return!!e})};function S(){return{tagName:"VerticalLayout",key:"fontContent",children:[m()]}}var f={tagName:"VerticalLayout",className:"title-and-container-layout",key:"graphFont",children:[{tagName:"VerticalLayout",children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between title-bar-container",children:[{tagName:"Text",className:"section-header-text title-bar-text",text:{desc:7806,name:"Title Bar"}},{tagName:"Switch",key:i.TITLEBAR_SHOW,func:{type:"hide",targets:["fillAndTitlesContent"]}}]},{tagName:"VerticalLayout",key:"fillAndTitlesContent",children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _3item-stretch",children:[{tagName:"Text",text:{desc:13601,name:"Fill"}},{tagName:"ColorPicker",keyIDs:{color:i.TITLEBAR_BACKGROUND_COLOR,paletteColors:i.VIZ_PALETTE_COLORS}},{tagName:"InputNumber",key:i.TITLEBAR_BACKGROUND_OPACITY,format:"%",min:0,max:100,value:100}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between title-bar-container",children:[{tagName:"Text",text:{desc:3449,name:"Titles"}},{tagName:"Switch",key:i.TITLEBAR_TITLES_SHOW,func:{type:"hide",targets:["titleFontContent"]}}]},{tagName:"VerticalLayout",key:"titleFontContent",children:[{tagName:"Radio",key:i.TITLEBAR_TITLE_LINES,className:"toggle-button-radio _2item title-font-content",horizontal:!0,useButtons:!0,options:[{desc:28908,name:"1 Line",value:1},{desc:28909,name:"2 Lines",value:2}]},{tagName:"SegmentControlDropdownMenu",className:"title-font-content",key:i.TITLEBAR_TITLE_INDEX,ariaLabel:{desc:28944,name:"Title index"},optionDisplayNames:[{desc:28910,name:"Top line"},{desc:28911,name:"Bottom line"}],func:{type:"query",targets:[i.TITLEBAR_FONT_FAMILY,i.TITLEBAR_FONTSTYLE,i.TITLEBAR_FONT_SIZE,i.TITLEBAR_FONT_COLOR,i.TITLEBAR_TEXT_ALIGNMENT]},children:[S(),S()]}].filter(function(e){return!!e})},N()].filter(function(e){return!!e})}]},g(),c(),u(),T].filter(function(e){return!!e})},h=null!==(l=mstrApp)&&void 0!==l&&null!==(r=l.supportFeature)&&void 0!==r&&r.call(l,mstrmojo.vi.enums.EnumFeatures.SUPPORT_SUBTITLE_AND_TITLE_BUTTONS)?f:v;function L(e){return 0===(e=parseInt(e,10))?"#000000":"#".concat((16777216+65536*(255&e)+(65280&e)+(16711680&e)/65536).toString(16).substring(1).toUpperCase())}function O(){return mstrmojo._FormatDefinition.Families.slice(1).map(function(e){var t={n:e.n};return e.symbolic||(t.style={fontFamily:e.n}),t})}function P(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=Array(t);a<t;a++)o[a]=e[a];return o}[{tagName:"VerticalLayout",children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between title-bar-container",children:[{tagName:"Text",className:"section-header-text title-bar-text",text:{desc:7806,name:"Title Bar"}},{tagName:"Switch",key:i.TITLEBAR_SHOW,func:{type:"hide",targets:["titleFontContent"]}}]},{tagName:"VerticalLayout",children:[m(),{tagName:"Text",text:{desc:3905,name:"Background"}},{tagName:"HorizontalLayout",className:"background-color-container",children:[{tagName:"ColorPicker",keyIDs:{color:i.TITLEBAR_BACKGROUND_COLOR,paletteColors:i.VIZ_PALETTE_COLORS}},{tagName:"InputNumber",format:"%",min:0,max:100,value:100}]},N()].filter(function(e){return!!e})}]},g(),c(),u(),T].filter(function(e){return!!e}),[g(),c(),u(),T].filter(function(e){return!!e}),mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={}),mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var b=function(e){return{tagName:"Text",key:e,text:""}},_=function(e){return{tagName:"ColorPalette",keyIDs:{customPalette:e,paletteColors:"vizPaletteColors"},useGradient:!1}},A=function(e,t){var a=C(t),o=a.themePaletteId,n=a.themePaletteColors,l=t.getProperty("prevThemePaletteId"),r=n.map(function(e){return{color:e,changed:!1}});if(!e)return r;var i=JSON.parse(e);return l===o?i:[].concat(P(r),P(i.filter(function(e){return!0===e.changed})))},C=function(e){var t,a,o,n=null==e||null===(t=e.getVisPaletteId)||void 0===t?void 0:t.call(e),l=null==e||null===(a=e.getVisPaletteColors)||void 0===a?void 0:a.call(e);l=l&&l.map(function(e){return L(e)});var r=null===(o=window.mstrApp.rootCtrl)||void 0===o?void 0:o.docCtrl.model.plt,i=l||r.colors.map(function(e){return L(e)});return{themePaletteId:n||r.did,themePaletteColors:i}};function x(e){var t,a=null==e||null===(t=e.getVisPaletteColors)||void 0===t?void 0:t.call(e);return a?a.map(function(e){return L(e)}):[]}mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var I=[{title:{desc:8970,name:"Expand All"},itemIndex:"expand"},{title:{desc:8971,name:"Collapse All"},itemIndex:"collapse"}],E={type:"set",targets:["dataLabelsHideableLayout","layoutHideableLayout","minorValuesHideableLayout","nodesHideableLayout","templateHideableLayout","totalHideableLayout"]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const R={tagName:"HideableLayout",key:"templateHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","18","Template"),children:[{tagName:"HorizontalLayout",className:"horizontal-flex-space-between color-by",children:[{tagName:"Text",className:"format-select-text",text:mstrmojo.descP("Sankey.","19","Color by")},{tagName:"Select",key:"colorByNode",options:[{name:mstrmojo.descP("Sankey.","20","Node"),value:!0},{name:mstrmojo.descP("Sankey.","21","Level"),value:!1}]}]},b("nodeColorPaletteTitle"),_("nodeColorPalette"),{tagName:"Divider"}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const F={tagName:"HideableLayout",key:"layoutHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","6","Layout"),children:[{tagName:"VerticalLayout",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","7","Node align")},{tagName:"Radio",horizontal:!0,key:"nodeAlignment",className:"toggle-button-radio _3item",innerClassName:"sankey-node-alignment-icons",options:[{name:"left",value:"left",tooltipText:mstrmojo.descP("Sankey.","28","Left Aligned")},{name:"middle",value:"middle",tooltipText:mstrmojo.descP("Sankey.","49","Justified")},{name:"right",value:"right",tooltipText:mstrmojo.descP("Sankey.","29","Right Aligned")}],useButtons:!0,useIcons:!0,useTooltips:!0}]},{tagName:"VerticalLayout",children:[{tagName:"Checkbox",checked:!1,key:"isReverseGraphEnabled",text:mstrmojo.descP("Sankey.","8","Reverse the graph")},{tagName:"Checkbox",checked:!1,key:"showLevelName",text:mstrmojo.descP("Sankey.","9","Show level names")},{tagName:"Checkbox",checked:!1,key:"isVerticalScrollEnabled",text:mstrmojo.descP("Sankey.","10","Enable vertical scroll")}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","11","Dragging of items")},{tagName:"Text",className:"sankey-dnd-icon"},{tagName:"Switch",key:"isDraggingOfNodesEnabled"}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between",children:[{tagName:"Text",text:{desc:null,name:""}},{tagName:"Button",text:mstrmojo.descP("Sankey.","12","Reset"),key:"resetCachedNodes"}]},{tagName:"Divider"}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const B={tagName:"HideableLayout",key:"totalHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","22","Total"),withSwitch:!0,children:[{tagName:"VerticalLayout",children:[{tagName:"Checkbox",checked:!1,key:"showTotalOnLabel",text:mstrmojo.descP("Sankey.","23","Show total on label")},{tagName:"Radio",horizontal:!0,key:"totalAlignment",className:"toggle-button-radio _2item",options:[{name:mstrmojo.descP("Sankey.","24","Adjacent"),value:"adjacent"},{name:mstrmojo.descP("Sankey.","25","Below"),value:"below"}],useButtons:!0,useIcons:!1}]},{tagName:"Divider"}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const W={tagName:"HideableLayout",withSwitch:!0,key:"dataLabelsHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","69","Data Labels"),children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","1","Label alignment")},{tagName:"HorizontalLayout",className:"two-to-one-layout",children:[{tagName:"Text",className:"format-select-text",text:mstrmojo.descP("Sankey.","2","Source")},{tagName:"Select",key:"sourceLabelAlignment",className:"sankey-viz-dropdown",innerClassName:"sankey-label-alignment-icons",options:[{name:mstrmojo.descP("Sankey.","28","Left Aligned"),value:"left"},{name:mstrmojo.descP("Sankey.","29","Right Aligned"),value:"right"}],icons:["left","right"]}]},{tagName:"HorizontalLayout",className:"two-to-one-layout",children:[{tagName:"Text",className:"format-select-text",text:mstrmojo.descP("Sankey.","3","Waypoint")},{tagName:"Select",key:"waypointLabelAlignment",className:"sankey-viz-dropdown",innerClassName:"sankey-label-alignment-icons",options:[{name:mstrmojo.descP("Sankey.","28","Left Aligned"),value:"left"},{name:mstrmojo.descP("Sankey.","29","Right Aligned"),value:"right"}],icons:["left","right"]}]},{tagName:"HorizontalLayout",className:"two-to-one-layout",children:[{tagName:"Text",className:"format-select-text",text:mstrmojo.descP("Sankey.","4","Target")},{tagName:"Select",key:"targetLabelAlignment",className:"sankey-viz-dropdown",innerClassName:"sankey-label-alignment-icons",options:[{name:mstrmojo.descP("Sankey.","28","Left Aligned"),value:"left"},{name:mstrmojo.descP("Sankey.","29","Right Aligned"),value:"right"}],icons:["left","right"]}]},{tagName:"Checkbox",checked:!1,key:"showLabelOnNode",className:"sankey-viz-checkbox",text:mstrmojo.descP("Sankey.","5","Show label on node")},{tagName:"Divider"}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const j={tagName:"HideableLayout",key:"nodesHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","14","Nodes"),children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","26","Density")},{tagName:"HorizontalLayout",className:"two-to-one-layout",children:[{tagName:"Select",key:"densityMode",options:[{name:mstrmojo.descP("Sankey.","15","Auto"),value:"auto"},{name:mstrmojo.descP("Sankey.","16","Fixed"),value:"fixed"}]},{tagName:"InputNumber",key:"density",showStepper:!0,value:0,min:0,max:Number.MAX_SAFE_INTEGER,applyChangeOnFocusOut:!1}]},{tagName:"Text",text:mstrmojo.descP("Sankey.","63","Node width")},{tagName:"Radio",horizontal:!0,key:"nodeWidthMode",className:"toggle-button-radio _2item",options:[{name:mstrmojo.descP("Sankey.","64","All"),value:"all"},{name:mstrmojo.descP("Sankey.","65","By level"),value:"byLevel"}],useButtons:!0,useIcons:!1},{tagName:"HorizontalLayout",className:"two-to-one-layout",key:"nodeWidthAllContainer",children:[{tagName:"Select",key:"nodeWidthAllMode",options:[{name:mstrmojo.descP("Sankey.","15","Auto"),value:"auto"},{name:mstrmojo.descP("Sankey.","16","Fixed"),value:"fixed"}]},{tagName:"InputNumber",key:"nodeWidthAllValue",showStepper:!0,value:0,min:0,max:Number.MAX_SAFE_INTEGER,applyChangeOnFocusOut:!1}]},{tagName:"VerticalLayout",key:"nodeWidthByLevelContainer",children:[{tagName:"Select",key:"nodeWidthSelectedLevel",options:[]},{tagName:"HorizontalLayout",className:"two-to-one-layout",children:[{tagName:"Select",key:"nodeWidthByLevelMode",options:[{name:mstrmojo.descP("Sankey.","15","Auto"),value:"auto"},{name:mstrmojo.descP("Sankey.","16","Fixed"),value:"fixed"}]},{tagName:"InputNumber",key:"nodeWidthByLevelValue",showStepper:!0,value:0,min:0,max:Number.MAX_SAFE_INTEGER,applyChangeOnFocusOut:!1}]}]},{tagName:"Divider"}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const w={tagName:"HideableLayout",key:"minorValuesHideableLayout",contextMenuItems:I,func:E,title:mstrmojo.descP("Sankey.","13","Minor values"),children:[{tagName:"VerticalLayout",children:[{tagName:"Radio",key:"minorValuesGroupNodes",horizontal:!0,className:"toggle-button-radio _2item",options:[{name:mstrmojo.descP("Sankey.","14","Nodes"),value:"nodes"},{name:mstrmojo.descP("Sankey.","50","Flows"),value:"flows"}],useButtons:!0,trueKey:0},{tagName:"Checkbox",key:"minorValuesIsHidingEnabled",checked:!1,text:mstrmojo.descP("Sankey.","51","Hide values smaller than")},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-stretch",children:[{tagName:"Text",text:"<"},{tagName:"InputNumber",key:"minorValuesHideThreshold",showStepper:!1,applyChangeOnFocusOut:!1,min:0,max:Number.MAX_SAFE_INTEGER}]},{tagName:"Checkbox",key:"isMinorValuesGroupEnabled",checked:!1,text:mstrmojo.descP("Sankey.","52","Group")},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _2item-stretch",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","53","Label")},{tagName:"Input",className:"sankey-viz-group__input",key:"minorValuesGroupLabel",applyChangeOnFocusOut:!0}]},{tagName:"Radio",key:"minorValuesGroupMode",horizontal:!0,className:"toggle-button-radio _3item minor-values-group-mode",options:[{name:mstrmojo.descP("Sankey.","76","Value"),value:"byValue"},{name:mstrmojo.descP("Sankey.","77","Rank"),value:"byRankValue"},{name:"%",value:"byRankPercent"}],useButtons:!0,trueKey:0},{tagName:"Text",text:mstrmojo.descP("Sankey.","59","Values cannot overlap"),key:"overlapWarning",className:"sankey-viz-overlap__warning"},{tagName:"HorizontalLayout",key:"minorValuesGroupFromLayout",className:"horizontal-flex-space-between _2item-stretch",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","54","From")},{tagName:"InputNumber",key:"minorValuesGroupFrom",showStepper:!1,applyChangeOnFocusOut:!1,min:0,max:Number.MAX_SAFE_INTEGER,precision:2}]},{tagName:"HorizontalLayout",key:"minorValuesGroupToLayout",className:"horizontal-flex-space-between _2item-stretch",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","55","To")},{tagName:"InputNumber",key:"minorValuesGroupTo",showStepper:!1,applyChangeOnFocusOut:!1,min:0,max:Number.MAX_SAFE_INTEGER,precision:2}]},{tagName:"HorizontalLayout",key:"mvgRankValueLayout",className:"two-to-one-layout",children:[{tagName:"Select",key:"mvgRankValueTarget",options:[{name:mstrmojo.descP("Sankey.","78","Bottom"),value:"bottom"},{name:mstrmojo.descP("Sankey.","80","Exclude Top"),value:"excludeTop"}]},{tagName:"InputNumber",key:"mvgRankValueThreshold",showStepper:!1,applyChangeOnFocusOut:!1,min:0,max:Number.MAX_SAFE_INTEGER}]},{tagName:"HorizontalLayout",key:"mvgRankPercentLayout",className:"two-to-one-layout",children:[{tagName:"Select",key:"mvgRankPercentTarget",options:[{name:mstrmojo.descP("Sankey.","78","Bottom"),value:"bottom"},{name:mstrmojo.descP("Sankey.","80","Exclude Top"),value:"excludeTop"}]},{tagName:"InputNumber",key:"mvgRankPercentThreshold",showStepper:!1,applyChangeOnFocusOut:!1,format:" %",precision:1,min:0,max:100}]}]}]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const z={tagName:"VerticalLayout",children:[R,F,B,W,j,w]};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=Array(t);a<t;a++)o[a]=e[a];return o}mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var D,U={tagName:"FontConfig",keyIDs:{fontName:"fontFamilyGlobal",fontSize:"fontSizeGlobal",fontStyle:"fontStyleGlobal",fontColor:"fontColorGlobal",paletteColors:i.VIZ_PALETTE_COLORS},displayOptions:["nameSelect","style","sizeAndColor"]},H={tagName:"FontConfig",keyIDs:{fontName:"fontFamilyName",fontSize:"fontSizeName",fontStyle:"fontStyleName",fontColor:"fontColorName",paletteColors:i.VIZ_PALETTE_COLORS},displayOptions:["nameSelect","style","sizeAndColor"]},M={tagName:"FontConfig",keyIDs:{fontName:"fontFamilyTotal",fontSize:"fontSizeTotal",fontStyle:"fontStyleTotal",fontColor:"fontColorTotal",paletteColors:i.VIZ_PALETTE_COLORS},displayOptions:["nameSelect","style","sizeAndColor"]},G={tagName:"FontConfig",keyIDs:{fontName:"fontFamilyLevelName",fontSize:"fontSizeLevelName",fontStyle:"fontStyleLevelName",fontColor:"fontColorLevelName",paletteColors:i.VIZ_PALETTE_COLORS},displayOptions:["nameSelect","style","sizeAndColor"]},X={tagName:"VerticalLayout",key:"entireGraphFontConfig",children:[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","30","Font")},U,{tagName:"Checkbox",checked:!1,key:"isTextWrapEnabled",text:mstrmojo.descP("Sankey.","31","Wrap text")}]},Z={tagName:"VerticalLayout",key:"dataLabelFontConfig",children:[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","30","Font")},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","32","Show data labels")},{tagName:"Switch",key:"showName",func:{type:"hide",targets:["dataLabelFontConfigHideable"]}}]},{tagName:"VerticalLayout",key:"dataLabelFontConfigHideable",children:[H]}]},Y={tagName:"VerticalLayout",key:"totalFontConfig",children:[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","30","Font")},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","33","Show total")},{tagName:"Switch",key:"showTotal",func:{type:"hide",targets:["totalFontConfigHideable"]}}]},{tagName:"VerticalLayout",key:"totalFontConfigHideable",children:[M]}]},J={tagName:"VerticalLayout",key:"levelFontConfig",children:[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","30","Font")},G,{tagName:"Checkbox",checked:!1,key:"isTextWrapEnabledLevelName",text:mstrmojo.descP("Sankey.","31","Wrap text")}]},K={tagName:"VerticalLayout",key:"nodeFontConfig",children:[].concat((D=[{tagName:"Text",className:"section-header-text",key:"shape_title",text:{desc:29321,name:"Palette"}},{tagName:"PalettePicker",keyIDs:{paletteId:"vizPaletteId",paletteColors:"vizPaletteColors"}}],function(e){if(Array.isArray(e))return V(e)}(D)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(D)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(e,t):void 0}}(D)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","34","Shape")},{tagName:"Radio",horizontal:!0,className:"toggle-button-radio _2item sankey-radio-color-palette-disabled",key:"radioForNodeColorPalettesDisabled",options:[{name:mstrmojo.descP("Sankey.","14","Nodes"),value:"nodes"},{name:mstrmojo.descP("Sankey.","35","Grouped"),value:"groupedNodes",tooltipText:mstrmojo.descP("Sankey.","66","Add group to enable")}],useButtons:!0,useTooltips:!0},{tagName:"Radio",horizontal:!0,className:"toggle-button-radio _2item",key:"radioForNodeColorPalettes",options:[{name:mstrmojo.descP("Sankey.","14","Nodes"),value:"nodes"},{name:mstrmojo.descP("Sankey.","35","Grouped"),value:"groupedNodes"}],useButtons:!0},{tagName:"VerticalLayout",key:"nodeColorPaletteContainer",children:[b("nodeColorPaletteTitle"),_("nodeColorPalette")]},{tagName:"ColorPicker",keyIDs:{color:"groupedNodeColor",paletteColors:"vizPaletteColors"}}])},q={tagName:"VerticalLayout",key:"flowFontConfig",children:[{tagName:"Text",className:"section-header-text",text:mstrmojo.descP("Sankey.","34","Shape")},{tagName:"Select",key:"flowFillType",options:[{name:mstrmojo.descP("Sankey.","36","Solid"),value:"solid"},{name:mstrmojo.descP("Sankey.","37","Color from source"),value:"fromSource"},{name:mstrmojo.descP("Sankey.","38","Color from target"),value:"fromTarget"},{name:mstrmojo.descP("Sankey.","39","Gradient"),value:"gradient"}]},{tagName:"HorizontalLayout",className:"horizontal-flex-space-between _3item-stretch",children:[{tagName:"Text",text:mstrmojo.descP("Sankey.","40","Fill")},{tagName:"ColorPicker",keyIDs:{color:"flowFillColor",paletteColors:"vizPaletteColors"},className:"sankey__flow-color-picker"},{tagName:"InputNumber",value:100,format:" %",min:0,max:100,key:"flowOpacityPercent",showStepper:!1,applyChangeOnFocusOut:!1}]}]};const $={tagName:"SegmentControlDropdownMenu",optionDisplayNames:[mstrmojo.descP("Sankey.","41","Entire Graph"),mstrmojo.descP("Sankey.","42","Data Label"),mstrmojo.descP("Sankey.","22","Total"),mstrmojo.descP("Sankey.","21","Level"),mstrmojo.descP("Sankey.","20","Node"),mstrmojo.descP("Sankey.","50","Flows")],key:"sankeySpecificFontAndColorProperties",children:[X,Z,Y,J,K,q]};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});const Q=["colorByNode","showLabelOnNode","dataLabelsHideableLayout","sourceLabelAlignment","waypointLabelAlignment","targetLabelAlignment","isReverseGraphEnabled","showLevelName","isVerticalScrollEnabled","isDraggingOfNodesEnabled","resetCachedNodes","nodeAlignment","totalHideableLayout","totalAlignment","showTotalOnLabel","fontFamilyGlobal","fontSizeGlobal","fontStyleGlobal","fontColorGlobal","isTextWrapEnabled","fontFamilyName","fontSizeName","fontStyleName","fontColorName","showName","fontFamilyTotal","fontSizeTotal","fontStyleTotal","fontColorTotal","showTotal","fontFamilyLevelName","fontSizeLevelName","fontStyleLevelName","fontColorLevelName","radioForNodeColorPalettes","nodeColorPalette","nodeColorPaletteTitle","groupedNodeColor","density","densityMode","flowFillType","flowOpacityPercent","flowFillColor","minorValuesGroupNodes","minorValuesIsHidingEnabled","minorValuesHideThreshold","isMinorValuesGroupEnabled","minorValuesGroupMode","minorValuesGroupLabel","minorValuesGroupFromLayout","minorValuesGroupFrom","minorValuesGroupToLayout","minorValuesGroupTo","mvgRankValueLayout","mvgRankValueTarget","mvgRankValueThreshold","mvgRankPercentLayout","mvgRankPercentTarget","mvgRankPercentThreshold","overlapWarning","userPalette","nodeColorPaletteContainer","nodeWidthMode","nodeWidthByLevelContainer","nodeWidthAllContainer","nodeWidthSelectedLevel","nodeWidthAllMode","nodeWidthAllValue","nodeWidthByLevelMode","nodeWidthByLevelValue","isTextWrapEnabledLevelName","radioForNodeColorPalettesDisabled","vizPaletteId","vizPaletteColors"];mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var ee=function(e){var t,a=null===(t=e.controller.model)||void 0===t?void 0:t.defmts.find(function(e){return"Text"===e.n}),o=e.isIOS?"Helvetica":"Open Sans";return(null==a?void 0:a.props.FormattingFont.Name)||o};mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});mstrmojo.plugins.Sankey||(mstrmojo.plugins.Sankey={});var te={config:{tagName:"SegmentControl",key:"tabSelector",options:[{icon:"sankey",ariaLabel:{desc:19962,name:"Visualization Options"}},{icon:"text-format",ariaLabel:{desc:19961,name:"Text and Form"}},{icon:"title-container",ariaLabel:{desc:12049,name:"Title and Container"}}],children:[z,$,h]},properties:Q,apply:function(e,t,a){var o;if(Q.indexOf(t)<0)return{};var n={suppressData:!0,callback:function(){return e.refresh()},clientUndoRedoCallback:function(){return e.refresh()}},l={callback:function(){},clientUndoRedoCallback:function(){return e.refresh()}},r=ee(e);switch(t){case"fontFamilyTotal":e.savePropertyAndUpdateWidget("dossierFontFamilyTotal",r,l),e.savePropertyAndUpdateWidget(t,a,n);break;case"fontFamilyName":e.savePropertyAndUpdateWidget(t,a,l),e.savePropertyAndUpdateWidget("dossierFontFamilyName",r,n);break;case"fontFamilyLevelName":e.savePropertyAndUpdateWidget(t,a,l),e.savePropertyAndUpdateWidget("dossierFontFamilyLevelName",r,n);break;case"radioForNodeColorPalettes":case"nodeWidthSelectedLevel":e.savePropertyAndUpdateWidget(t,a,l);break;case"densityMode":"auto"===a&&e.savePropertyAndUpdateWidget("density",e.defaultDensity,l),e.savePropertyAndUpdateWidget(t,a,n);break;case"density":a!==e.defaultDensity&&e.savePropertyAndUpdateWidget("densityMode","fixed",l),e.savePropertyAndUpdateWidget(t,a,n);break;case"isVerticalScrollEnabled":e.savePropertyAndUpdateWidget(t,a,l),e.savePropertyAndUpdateWidget("densityMode","auto",n),e.savePropertyAndUpdateWidget("density",e.defaultDensity,l);break;case"dataLabelsHideableLayout":e.savePropertyAndUpdateWidget("showName",!a,n);break;case"totalHideableLayout":e.savePropertyAndUpdateWidget("showTotal",!a,n);break;case"resetCachedNodes":e.savePropertyAndUpdateWidget("cachedNodesOrder",JSON.stringify({}),n);break;case"fontSizeGlobal":e.savePropertyAndUpdateWidget("fontSizeTotal",a,l),e.savePropertyAndUpdateWidget("fontSizeName",a,l),e.savePropertyAndUpdateWidget("fontSizeLevelName",a,l),e.savePropertyAndUpdateWidget("fontSizeGlobal",a,n);break;case"fontFamilyGlobal":e.savePropertyAndUpdateWidget("dossierFontFamilyGlobal",r,l),e.savePropertyAndUpdateWidget("dossierFontFamilyTotal",r,l),e.savePropertyAndUpdateWidget("dossierFontFamilyName",r,l),e.savePropertyAndUpdateWidget("dossierFontFamilyLevelName",r,l),e.savePropertyAndUpdateWidget("fontFamilyTotal",a,l),e.savePropertyAndUpdateWidget("fontFamilyName",a,l),e.savePropertyAndUpdateWidget("fontFamilyLevelName",a,l),e.savePropertyAndUpdateWidget("fontFamilyGlobal",a,n);break;case"fontColorGlobal":e.savePropertyAndUpdateWidget("fontColorTotal",a,l),e.savePropertyAndUpdateWidget("fontColorName",a,l),e.savePropertyAndUpdateWidget("fontColorLevelName",a,l),e.savePropertyAndUpdateWidget("fontColorGlobal",a,n);break;case"fontStyleGlobal":e.savePropertyAndUpdateWidget("fontStyleName",JSON.stringify(a),l),e.savePropertyAndUpdateWidget("fontStyleTotal",JSON.stringify(a),l),e.savePropertyAndUpdateWidget("fontStyleLevelName",JSON.stringify(a),l),e.savePropertyAndUpdateWidget("fontStyleGlobal",JSON.stringify(a),n);break;case"fontStyleName":e.savePropertyAndUpdateWidget("fontStyleName",JSON.stringify(a),n);break;case"fontStyleTotal":e.savePropertyAndUpdateWidget("fontStyleTotal",JSON.stringify(a),n);break;case"fontStyleLevelName":e.savePropertyAndUpdateWidget("fontStyleLevelName",JSON.stringify(a),n);break;case"nodeColorPalette":e.savePropertyAndUpdateWidget("prevThemePaletteId",(null==e||null===(o=e.getVisPaletteId)||void 0===o?void 0:o.call(e))||e.model.docModel.plt.did,l),e.savePropertyAndUpdateWidget(t,JSON.stringify(a),n);break;case"userPalette":if(!a)return;var i=a.split(",");mstrmojo.util.ui.ColorPicker.addCustomColor(i[i.length-1]),e.savePropertyAndUpdateWidget(t,a,l);break;case"nodeWidthAllMode":"auto"!==a&&void 0!==e.getProperty("nodeWidthAllValue")||e.savePropertyAndUpdateWidget("nodeWidthAllValue",e.defaultNodeWidthAll,l),e.savePropertyAndUpdateWidget(t,a,n);break;case"nodeWidthAllValue":a!==e.defaultNodeWidthAll&&e.savePropertyAndUpdateWidget("nodeWidthAllMode","fixed",l),e.savePropertyAndUpdateWidget(t,parseInt(a),n);break;case"nodeWidthByLevelValue":var s=e.getProperty("nodeWidthSelectedLevel")||e.defaultNodeWidthSelectedLevel,d=JSON.parse(e.getProperty("nodeWidthByLevelData"));d[s]={width:parseInt(a),defaultWidth:e.nodeWidthByLevelData[s].defaultWidth},a!==e.nodeWidthByLevelData[s].defaultWidth&&(d[s].mode="fixed"),e.savePropertyAndUpdateWidget("nodeWidthByLevelData",JSON.stringify(d),n);break;case"nodeWidthByLevelMode":var m=e.getProperty("nodeWidthSelectedLevel")||e.defaultNodeWidthSelectedLevel,c=JSON.parse(e.getProperty("nodeWidthByLevelData"));c[m]={width:e.nodeWidthByLevelData[m].width,defaultWidth:e.nodeWidthByLevelData[m].defaultWidth},"auto"===a?delete c[m]:c[m].mode="fixed",e.savePropertyAndUpdateWidget("nodeWidthByLevelData",JSON.stringify(c),n);break;case"isTextWrapEnabled":e.savePropertyAndUpdateWidget("isTextWrapEnabledLevelName",a,l),e.savePropertyAndUpdateWidget(t,a,n);break;case"isMinorValuesGroupEnabled":!1===a&&e.savePropertyAndUpdateWidget("radioForNodeColorPalettes","nodes",l),e.savePropertyAndUpdateWidget(t,a,n);break;case"vizPaletteId":e.setPalette(a);break;default:e.savePropertyAndUpdateWidget(t,a,n)}},query:function(e,t){var a,o=!!e.model;if(Q.indexOf(t)<0||!o)return{};var n,l,r=e.getProperty(t),i=ee(e);switch(t){case"fontFamilyTotal":return i&&e.getProperty("dossierFontFamilyTotal")!==i?{value:{value:i,items:O()}}:{value:{value:r,items:O()}};case"fontFamilyName":return i&&e.getProperty("dossierFontFamilyName")!==i?{value:{value:i,items:O()}}:{value:{value:r,items:O()}};case"fontFamilyLevelName":return i&&e.getProperty("dossierFontFamilyLevelName")!==i?{value:{value:i,items:O()}}:{value:{value:r,items:O()}};case"fontFamilyGlobal":return i&&e.getProperty("dossierFontFamilyGlobal")!==i?{value:{value:i,items:O()}}:{value:{value:r,items:O()}};case"groupedNodeColor":return"groupedNodes"!==e.getProperty("radioForNodeColorPalettes")?{value:r,visible:!1}:{value:r,visible:!0};case"overlapWarning":return"byRankValue"===e.getProperty("minorValuesGroupMode")||"byRankPercent"===e.getProperty("minorValuesGroupMode")?{visible:!1}:(parseInt(e.getProperty("minorValuesGroupFrom"))<parseInt(e.getProperty("minorValuesHideThreshold"))||parseInt(e.getProperty("minorValuesGroupTo"))<parseInt(e.getProperty("minorValuesHideThreshold")))&&JSON.parse(e.getProperty("isMinorValuesGroupEnabled"))&&JSON.parse(e.getProperty("minorValuesIsHidingEnabled"))?{visible:!0}:{visible:!1};case"minorValuesGroupFromLayout":case"minorValuesGroupToLayout":return{visible:"byRankValue"!==e.getProperty("minorValuesGroupMode")&&"byRankPercent"!==e.getProperty("minorValuesGroupMode")};case"mvgRankValueLayout":return{visible:"byRankValue"===e.getProperty("minorValuesGroupMode")};case"mvgRankPercentLayout":return{visible:"byRankPercent"===e.getProperty("minorValuesGroupMode")};case"dataLabelsHideableLayout":return{value:{switchValue:JSON.parse(e.getProperty("showName"))}};case"totalHideableLayout":return{value:{switchValue:JSON.parse(e.getProperty("showTotal"))}};case"flowFillColor":return"solid"!==e.getProperty("flowFillType")?{value:r,enable:!1}:{value:r,enable:!0};case"totalAlignment":return JSON.parse(e.getProperty("showTotalOnLabel"))?{value:r,enable:!0}:{value:r,enable:!1};case"density":return"auto"===e.getProperty("densityMode")?{value:e.defaultDensity}:{value:r};case"nodeColorPaletteContainer":return"nodes"!==e.getProperty("radioForNodeColorPalettes")?{visible:!1}:{visible:!0};case"nodeColorPalette":return{value:A(r,e),visible:!0};case"nodeColorPaletteTitle":var s=function(e){var t,a=C(e);return null===(t=window.mstrConfig.paletteThemes.palettes.find(function(e){return e.pltid===a.themePaletteId}))||void 0===t?void 0:t.n}(e),d="".concat(s," ").concat(mstrmojo.descP("Sankey.","67","palette"));return{value:(n=e.getProperty("nodeColorPalette"),0!==(null==(l=n&&JSON.parse(n))?void 0:l.length)&&l.find(function(e){return e.changed})||!s?mstrmojo.descP("Sankey.","68","Custom palette"):d)};case"isVerticalScrollEnabled":return r&&(document.querySelector(".sankey").style["overflow-y"]="scroll"),{value:r};case"userPalette":var m=mstrmojo.util.ui.ColorPicker.getCustomColors(),c=r&&r.split(",");return r&&0===m.length&&c.forEach(function(e){return mstrmojo.util.ui.ColorPicker.addCustomColor(e)}),{value:null==c?void 0:c.join()};case"resetCachedNodes":return{enable:JSON.parse(e.getProperty("isDraggingOfNodesEnabled"))};case"nodeWidthAllContainer":return{visible:"all"===e.getProperty("nodeWidthMode")};case"nodeWidthByLevelContainer":return{visible:"byLevel"===e.getProperty("nodeWidthMode")};case"nodeWidthSelectedLevel":var u=e.dataInterface.getRowTitles().titles.map(function(e){return{n:e.n,dssid:e.id}});return JSON.parse(e.getProperty("isReverseGraphEnabled"))&&u.reverse(),{value:{value:u.find(function(e){return e.dssid===r})?r:e.defaultNodeWidthSelectedLevel,items:u}};case"nodeWidthAllValue":return"auto"===e.getProperty("nodeWidthAllMode")?{value:e.defaultNodeWidthAll}:{value:r};case"nodeWidthByLevelValue":if("byLevel"===e.getProperty("nodeWidthMode")){var y,p;if(!e.nodeWidthByLevelData)return{value:"auto"};var N=e.getProperty("nodeWidthSelectedLevel");return{value:e.nodeWidthByLevelData&&e.nodeWidthByLevelData[N]?null===(y=e.nodeWidthByLevelData[N])||void 0===y?void 0:y.width:null===(p=e.nodeWidthByLevelData[e.defaultNodeWidthSelectedLevel])||void 0===p?void 0:p.width}}break;case"nodeWidthByLevelMode":if("byLevel"===e.getProperty("nodeWidthMode")){var g,T;if(!e.nodeWidthByLevelData)return{value:"auto"};var v=e.getProperty("nodeWidthSelectedLevel");return{value:e.nodeWidthByLevelData&&e.nodeWidthByLevelData[v]?null===(g=e.nodeWidthByLevelData[v])||void 0===g?void 0:g.mode:null===(T=e.nodeWidthByLevelData[e.defaultNodeWidthSelectedLevel])||void 0===T?void 0:T.mode}}break;case"radioForNodeColorPalettesDisabled":return{value:r,enable:!1,visible:!JSON.parse(e.getProperty("isMinorValuesGroupEnabled"))};case"radioForNodeColorPalettes":return{value:r,visible:JSON.parse(e.getProperty("isMinorValuesGroupEnabled"))};case"vizPaletteId":return{value:(null==e||null===(a=e.getVisPaletteId)||void 0===a?void 0:a.call(e))||"00000000000000000000000000000000"};case"vizPaletteColors":return{value:x(e)};default:try{r=JSON.parse(r)}catch(e){}return{value:r,enable:!0,visible:!0}}}};return t})());