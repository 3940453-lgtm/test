"use strict";(self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[]).push([[39],Array(232).concat([(t,e,o)=>{o.r(e),o.d(e,{vitaraGridHelper:()=>bt});var r=o(233),n=o(45),i=o(234),a=o(236),l=o(237),s=o(238),u=o(239),d=o(240),c=o(241),h=o(257),g=o(258),p=o(265),m=o(266),f=o(269),v=o(270),C=o(271),T=o(272),M=o(273),y=o(276),S=o(277),b=o(278),x=o(279),w=o(284),A=o(321),G=o(322),V=o(323),O=o(324),_=o(325),E=o(327),D=o(328),F=o(331),I=o(332),k=o(333),R=o(334),P=o(335),B=o(336),L=o(337),N=o(338),H=o(339),J=o(340),Q=o(341),U=o(342),W=o(343),j=o(344),z=o(345),K=o(347),Z=o(348),Y=o(349),q=o(350),X=o(351),$=o(352),tt=o(353),et=o(354),ot=o(355),rt=o(356),nt=o(357),it=o(358),at=o(359),lt=o(360),st=o(362),ut=o(363),dt=o(364),ct=o(365),ht=o(366),gt=o(367),pt=o(393),mt=o(394),ft=o(395),vt=o(396),Ct=o(397),Tt=o(4);function Mt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return yt(t,void 0);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?yt(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bt=function(t){console.time("gridHelperTime");var e,o=this,a=0,l={};document.createElement("style"),o.customFormatEditor=null,o.utils=n.utils,o.customGridOptions=t,o.columnAutoSize={},o.groupLevelAgg={},o.colDataTemplate={},o.dragResized="",o.cellElement=null,o.spanStyle="",o.renderValue="";var s={gridArea:null,suppressPropertyNamesCheck:!0,width:"100%",height:"auto",propMenuWidth:"400px",propMenuHeight:"600px",rowPerPage:25,groupHeaders:!0,toolPanel:"columns",forPrint:!1,groupUseEntireRow:!1,getRowHeight:S,suppressContextMenu:!0,suppressMenuFilterPanel:!1,suppressFieldDotNotation:!0,components:{customTooltip:Z.CustomTooltip},headerComponentParams:{gridContext:this,filterModel:o.filterModel},isExternalFilterPresent:b,doesExternalFilterPass:x,customThemes:[],customIcons:[],showModules:["autosize","resetcolumns","advanceSorting","thresholds","gridtheme","showhide","export","footer"],colDef:{menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"]},getRowId:function(t){return t.data.id}},u=function(t,e){var o;for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},d=this.gridOptions=u(s,arguments[0]);d.enableRtl=o.getPropertyEditorRTLLayoutModel().getLayoutModel(),this.gridOptions.enableRtl=d.enableRtl,d.pivotPanelShow=o.getPivotDropZoneModel().isPivotDropZoneVisible(d),d.suppressColumnFilter=!0,d.rowGroupPanelShow=o.getGroupingDropZoneModel().isGroupingDropZoneVisible(d),d.groupMultiAutoColumn=!1,d.animateRows=o.getAnimationModel().isAnimated(),d.suppressColumnMoveAnimation=!o.getAnimationModel().isAnimated(),d.suppressDragLeaveHidesColumns=!0,d.rowSelection="multiple",d.rowDeselection=!0,d.multiSortKey="ctrl",d.groupSelectsChildren=!1,d.pivotColumnGroupTotals=o.getSubTotalsModel().isPivotGroupTotals()?"after":void 0,d.pivotRowTotals=o.getSubTotalsModel().isPivotRowTotals()?"after":void 0;var c=o.getThemeFormattingModel().themeHeaderFormattingModel.getHeight();d.headerHeight=c+3,d.groupHeaderHeight=c+3,d.pivotHeaderHeight=c+3,d.pivotGroupHeaderHeight=c+3,d.suppressExpandablePivotGroups=!o.getSubTotalsModel().isPivotMetricTotals(),d.tooltipShowDelay=250,d.tooltipHideDelay=2500,d.localeTextFunc=function(t,e){var o=d.context.utils.convertStringLanguage(e);return void 0===o&&(o=t),o},isExporting()&&(d.suppressAnimationFrame=this.gridOptions.context.platformContext.isAnimationFrameEnabled()),d.processPivotResultColDef=function(t){t.filter=!1},d.maintainColumnOrder=!0,d.processPivotResultColGroupDef=function(t){if(0===t.pivotKeys.length){var e=o.getColumnStateMaster().getAllMetrics(),r=e.indexOf("Total");r>-1&&e.splice(r)}if(!o.getSubTotalsModel().isPivotGroupTotals())if(o.getSubTotalsModel().isPivotMetricTotals()){if(o.getMetricToRowsModel().isMetricToRows())return;t.children.length===o.gridOptions.chartDataMapper.numMetrics&&(t.children[0].columnGroupShow=null)}else t.children.forEach((function(t,e){t.columnGroupShow=0===e?null:"open"}))};var h=o.getAggregationHelper(),g=h.ratioAggregationFunction.bind(h),p=h.sumAggregation.bind(h),m=h.minAggregation.bind(h),f=h.maxAggregation.bind(h),v=h.firstAggregation.bind(h),C=h.lastAggregation.bind(h),T=h.meanAggregation.bind(h),M=h.countAggregation.bind(h);function y(){d&&d.api&&setTimeout((function(){d.api.redrawRows()}),0),o.getEventDispatcher().createAndDispatchEvent("redrawRows","gridContext")}function S(t){return void 0!==t&&t.node.group?o.getThemeFormattingModel().themeBodyFormattingModel.getGroupedHeight():o.getThemeFormattingModel().themeBodyFormattingModel.getHeight()}function b(){return!0}function x(t){if(0===o.getFilterModel().getAllThresholds().length)return!0;var e=[];return void 0!==t.data&&Object.keys(t.data).forEach((function(r){var n=!0;"object"===St(t.data[r])&&(n=null===o.getFilterModel().getThresholdStyles(r,t.data[r].rawValue)==(0===o.getFilterModel().filterThresholdByMetric(r).length),e.push(n))})),!(e.indexOf(!1)>-1)}d.aggFuncs={ratio:g,sum:p,min:m,first:v,last:C,max:f,avg:T,count:M,choosecolumn:p,clearAggregation:p},o.showColumn=[],d.getRowClass=function(t){if(t.node.isRowPinned())return" vitara-grand-totals vitara-grand-totals-row ";var e="vitara-row ";return t.node.group&&(e+="vitara-grid-row-group ",t.node.expanded?e+="vitara-grid-row-group-expanded ":e+="vitara-grid-row-group-contracted "),t.node.selected&&(e+="vitara-grid-row-selected "),t.node.rowIndex%2==0?e+="vitara-grid-row-even ":e+="vitara-grid-row-odd ",e},o.redrawRows=Tt.debounce(y,500,{leading:!1,trailing:!0,maxWait:1e3}),o.defaultColumnDef,o.customGridMenuItems=[],o.columnvalues=[],o.columnaggregates=[],o.columnuniquevalues=[],o.bottompercentages=[],o.toppercentages=[],o.betweenpercentages=[],o.newBetweenpercentages=[],o.bottombetweenpercentages=[],o.topbetweenpercentages=[],o.iconsettoppercentages=[],o.iconsetbottompercentages=[],o.filterThresholdArrays={},o.filterThresholdArrays.filter={},o.filterThresholdArrays.threshold={},o.filter=[],o.recentColors=[],o.saveColorHistoryKey="vitara.recentColors",o.destroy=function(){isExporting()||(o.gridOptions,Object.keys(o).forEach((function(t){"object"===St(o[t])&&"renderedGrid"!==t&&(o[t]=null)})),o.groupedColumns=null,o.renderedGrid&&(o.renderedGrid.destroy(),o.renderedGrid=null))},o.setEditorContext=function(t){this.gridOptions.context.propMenu=t},o.styleMapper={"font-size":"fontSize","text-decoration":"textDecoration","font-style":"fontStyle","font-family":"fontFamily","font-weight":"fontWeight","text-align":"textAlign",color:"color","background-color":"bgColor"};var w=function(){d.chartDataMapper||(d.chartDataMapper=new i.chartDataMapperBase(d.interface.getDataAsArray(),d.interface.getTitles(),d.interface.numAttributes,{data:d.interface.data}));var t,e=d.chartDataMapper,r=[],n=[],a=D,l=e.numColumns,s=e.dataRows.length,u=parseFloat,c=isNaN,h=[],g=[],p={},m=o.getTitles(),f=m.slice();void 0!==o.getColumnOrderModel().orderModel&&(f=(f=o.getColumnOrderModel().getOrderedTitles(m.slice())).filter((function(t){return"ag-Grid-AutoColumn"!==t&&"Total"!==t})));var v,C=function(t){r[t]={},r[t].id=t,f.forEach((function(n,i){var a,l=m.indexOf(n);if(p[l])(""==(a=e.hcMetricVal(e.dataRows[t][l]))||c(a))&&(a=0),r[t].selector=e.dataRows[t][l].selector,null!==a&&(a=u(a)),r[t][h[i]]={},r[t][h[i]].value=e.hcFormattedMetricVal(e.dataRows[t][l]),r[t][h[i]].rawValue=a,o.columnaggregates[g[i]].total+=a,o.columnvalues[g[i]][t]=a,o.uniqueCollector[g[i]]||(o.uniqueCollector[g[i]]={}),o.uniqueCollector[g[i]][a]=T;else{var s=e.dataRows[t][l].t;r[t][h[i]]=s,o.columnvalues[g[i]][t]=s}r[t].dataRow=e.dataRows[t]}))};v=!1,t=e.numAttributes,f.forEach((function(r,i){var l=m.indexOf(r);p[l]=!(l<t),p[l]&&(o.colDataTemplate[r]=e.hcFormattedMetricVal(e.dataRows[0][l])),h.push(o.formatNames(r));var s=r.toLowerCase();g.push(s),v=v||null!==o.getColumnStateMaster().getSubStateValue("pivotIndex",r,null),n[i]=a(r,r,p[l],o),void 0===o.columnvalues[s]&&(o.columnvalues[s]=[],o.columnaggregates[s]=[],o.columnaggregates[s].total=0),void 0===o.columnuniquevalues[s]&&(o.columnuniquevalues[s]=[])})),o.getSubTotalsModel().isMetricTotals()&&!v&&n.push(a("Total","Total",!0,o)),o.uniqueCollector=[];for(var T="",M=0;M<s;++M)C(M);for(var y=t;y<l;++y)o.uniqueCollector[m[y]]&&(o.columnuniquevalues[g[y]]=Object.keys(o.uniqueCollector[m[y].toLowerCase()]),o.columnuniquevalues[g[y]]=o.columnuniquevalues[g[y]].map((function(t){return parseFloat(t)})).sort(R),o.columnvalues[g[y]]=o.columnvalues[g[y]].sort(R));o.defaultColumnDef=n;for(var S=o.getColumnGrouping().getColumnGroupingModel(),b=0;b<S.length;b++){var x=S[b];if(void 0!==x.columns)for(var w=x.columns,A=0;A<w.length;A++){var G=w[A];0==o.defaultColumnDef.filter((function(t){return t.colId==G})).length&&w.splice(A,1)}S[b].columns=w}return o.groupedColumns=S,o.getColumnGrouping().getColumnGroupingModel().length,{columnDefs:n,rowData:r}},A=function(){vitaraJQ(d.gridArea).append('<div id="context-menu" class="vitara-grid-menu-container"><div class="vitara-grid-menu-mid"><div class="vitara-grid-menu-inner"><ul role="menu" class="vitara-grid-menu-items"></ul></div></div></div>'),e=d.gridArea.querySelector("#context-menu")},G=function(t){var e=document.createElement("style");return e.id=t,document.head.appendChild(e),e},V=function(){var t=document.getElementById("VitaraGridChartStyles");return t||(t=G("VitaraGridChartStyles")),t},O=function(t){var e=V().sheet;e.insertRule(t,e.cssRules.length||0)},_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=V().sheet;if(void 0!==o.cssRules){for(var r=!1,n=0;n<o.cssRules.length;n++)if(o.cssRules[n].selectorText===e){o.deleteRule(n),o.insertRule(t,n),r=!0;break}r||O(t)}else O(t)};this.updateCssRule=_;var E=function(t){if(o.gridState="initializing",d){if(d.gridArea){d.proversion={menus:[]},d.hideClearGrouping=!1,d.gridArea.style.width=d.width,d.gridArea.style.height=d.height,d.gridArea.style.position="relative",d.gridArea.className=d.class;var i=0,s=""}d.columnDefs=t.columnDefs,d.rowData=null,d.onGridReady=function(){if(d){if(isExporting()){var t=d.columnApi;t&&t.getColumnGroupState().forEach((function(e){e&&t.setColumnGroupOpened(e.groupId,!0)}))}else this.context.platformContext.getResultPropMenuChecks()&&o.getCustomFormatEditor().initEditor({selector:"".concat(this.context.getUniqueIdInContainer("editorTextarea"))});o.getRowGroupOpenedModel().hideBottomLeafRow();var e=o.getColumnOrderModel();e.registerEventListeners(),e.reorderAutocol(!0),e.reorderTotalColumn(),o.getSortingModel().addEventListeners(),o.getSortingModel()._setColumnSortingState(),o.getEventDispatcher().createAndDispatchEvent("gridReady",null),o.gridOptions.api.addEventListener("columnRowGroupChanged",(function(t){o.getGroupingDropZoneModel().isGroupingDropZoneVolatile()&&o.getPivotDropZoneModel().isPivotDropZoneVolatile()?(o.getGroupingDropZoneModel().setGroupingDropZoneVisible(),o.getPivotDropZoneModel().setPivotDropZoneVisible()):o.getPivotDropZoneModel().showPivotDropZone()})),o.gridOptions.api.addEventListener("columnPivotChanged",(function(t){o.getGroupingDropZoneModel().isGroupingDropZoneVolatile()&&o.getPivotDropZoneModel().isPivotDropZoneVolatile()?(o.getGroupingDropZoneModel().setGroupingDropZoneVisible(),o.getPivotDropZoneModel().setPivotDropZoneVisible()):o.getPivotDropZoneModel().showPivotDropZone()})),o.getRowSelectedModel().setRowsSelected(),o.getColumnResizedModel().checkAndApplyResizing(!0),o.getHeaderFormattingView(),o.getColumnGrouping().addEventListeners(),o.getColumnStateMaster().registerEventListeners(),o.getColumnGroupOpenedModel().applyColumnGroupState(),o.getChartTypeModel().isMicroChart()&&o.hideMicroAttribute(),o.getHeaderFormattingView().applyHeaderColors()}if(o.gridState="ready",console.timeEnd("gridHelperTime"),d.gridReadyCallback)try{d.gridReadyCallback.call()}catch(t){console.error(t)}},r.agGrid.LicenseManager.setLicenseKey("Using_this_AG_Grid_Enterprise_key_( AG-048674 )_in_excess_of_the_licence_granted_is_not_permitted___Please_report_misuse_to_( legal@ag-grid.com )___For_help_with_changing_this_key_please_contact_( info@ag-grid.com )___( Vitara LLC )_is_granted_a_( Single Application )_Developer_License_for_the_application_( VitaraCharts )_only_for_( 1 )_Front-End_JavaScript_developer___All_Front-End_JavaScript_developers_working_on_( VitaraCharts )_need_to_be_licensed___( VitaraCharts )_has_been_granted_a_Deployment_License_Add-on_for_( 1 )_Production_Environment___This_key_works_with_AG_Grid_Enterprise_versions_released_before_( 8 December 2024 )____[v2]_MTczMzYxNjAwMDAwMA==3d5514a89bc8943ace85178191f5b10b"),o.renderedGrid=new r.agGrid.Grid(d.gridArea,d),o.getGridOptions=function(){return o.gridOptions},"micro"===o.customGridOptions.chartType?o.getChartTypeModel().setMicroChart():o.getChartTypeModel().setGridChart(),o.getPivotDropZoneModel().showPivotDropZone(),o.getGridThemeView(),o.newTitles=o.getTitles(),o.gridOptions.chartDataMapper.titles=o.newTitles,o.getThemeModel();var u=o.getColumnStateMaster();u.updateState(),u.declareModels(),u.manageTotalsColumn(),u.columnShowHideModel.applyColumnVisibility(),o.columnGroupingModel=o.getColumnGrouping(),o.getShowDetailRowsModel(),o.getColumnGroupingView(),o.getColumnFormattingModel(),o.getThemeFormattingModel(),o.getAggregationWrapperModel(),o.getColumnResizedModel(),o.getRowSelectedModel(),o.getPropertyEditorRTLLayoutModel(),o.getColumnOrderModel(),o.getScalingModel(),!o.getMetricToRowsModel().isMetricToRows()&&o.getMetricGroupingModel().isMetricGroupsPresent()?o.getMetricGroupingModel().convertToColumnGrouping():o.getColumnGrouping().isColumnGroupingCleared()||o.getColumnGrouping().ApplyGroupColDef(),o.filter=o.getStateManager().restoreSpecificState("filter"),void 0===o.filter&&(o.filter=[]),d&&(A(),o.getGrandTotalsModel(),o.getSubTotalsModel(),o.getChartEventListener(a,e).setGridChartEventListener(o).setEventListeners(i,s,o.themeFormat),n.utils.setBackgroundImage(vitaraJQ(d.gridArea).parent(),l))}};o.formatNames=function(t){return t.replace(/([])+/g,"_").replace(/^(_)+|(_)+$/g,"_")},o.removeSpecials=function(t){return t.replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g,"-").replace(/^(-)+|(-)+$/g,"-")},o.isColorTransparent=function(t){var e=(t?t.replace(/\s/g,""):"").match(/rgba?\((\d+),(\d+),(\d+),([0-9.]+)\)/);return!!e&&0===Number(e[4])},o.getTitles=function(){var t=o.gridOptions.chartDataMapper.titles.slice(),e=[];return t.forEach((function(t){e.push(o.formatNames(t))})),e},o.isMetric=function(t){return"string"!=typeof t?(console.error("isMetric expected a string, got a ",St(t)),!1):o.getTitles().indexOf(t)>=o.gridOptions.chartDataMapper.numAttributes},o.isGrouped=function(t){var e=o.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal(),r=t.node.group;if(e.length>=1){var n=o.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();if(t.node.field===n[n.length-1])return!1}return r},o.getUpdatedColumnDefs=function(){var t=o.defaultColumnDef;return Tt.each(t,(function(t){o.appendColStateToDef(t)})),t},o.appendColStateToDef=function(t){var e=this.getColumnStateMaster().getColumnStateById(t.colId);null!==e&&(t.width=e.width,t.hide=e.hide,t.pinned=e.pinned,t.sort=e.sort,t.isMetric?t.aggFunc=e.aggFunc:(t.rowGroupIndex=e.rowGroupIndex,t.pivotIndex=e.pivotIndex))};var D=function(t,e,r,n){t=o.formatNames(t);var i=o,a=o.getAggregationHelper(),l=a.genericValueGetter.bind(a),s=a.totalValueGetter.bind(a),u=(n.getColumnStateMaster(),t),d={colId:u,headerName:o.formatNames(e),headerTooltip:e,isMetric:r,enableRowGroup:!0,enablePivot:!0,menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"],lockPinned:!1,lockVisible:!1,sortable:!0,resizable:!0,filter:!0,comparator:function(t,e,o,r,n){return i.getSortingModel().customComparatorSelector(t,e,o,r,n,u)},pivotComparator:function(t,e){return i.getSortingModel().customPivotComparator(t,e,this)},width:200,hide:!1,pinned:null};return r&&(d.enableRowGroup=!1,d.enablePivot=!1,"Total"===t?(d.valueGetter=s,d.vitaraTotalsField=!0):d.valueGetter=l,d.aggFunc="sum"),r||(d.aggFunc=null,d.rowGroupIndex=null,d.pivotIndex=null),n.gridOptions.enablePropMenu||(d.suppressMenu=!0,d.suppressSorting=!0),o.appendColStateToDef(d),o.CustomPinnedRowRenderer=function(){},o.setCustomPinnedRowRenderer=function(t){if(t.node.rowPinned)return{component:o.CustomPinnedRowRenderer}},o.CustomPinnedRowRenderer.prototype.init=function(t){var e=i.getDefaultRenderer(),o=i.getGrandTotalsModel(),r=document.createElement("span"),n="Total"!==t.colDef.headerName&&Object.keys(t.data).indexOf(t.colDef.colId)>-1;if(this.eGui=document.createElement("div"),this.eGui.innerHTML="",n&&!t.colDef.isMetric&&(this.eGui.innerHTML=t.data[t.colDef.colId]),this.eGui.innerHTML===o.getGrandTotalsText()?(this.eGui.style["font-weight"]=o.getGrandTotalsTextWeight(),this.eGui.style["text-decoration"]=o.getGrandTotalsTextDecoration(),this.eGui.style["font-style"]=o.getGrandTotalsTextStyle(),this.eGui.style["font-family"]="'".concat(o.getGrandTotalsTextFamily(),"'"),this.eGui.style["font-size"]=o.getGrandTotalsTextSize()+"px",this.eGui.style["justify-content"]=o.getGrandTotalsTextAlign(),this.eGui.style["align-items"]=o.getGrandTotalsTextVerticalAlign(),this.eGui.style.color=o.getGrandTotalsTextColor()):(this.eGui.style["font-weight"]=o.getGrandTotalsValueWeight(),this.eGui.style["text-decoration"]=o.getGrandTotalsValueDecoration(),this.eGui.style["font-style"]=o.getGrandTotalsValueStyle(),this.eGui.style["font-family"]="'".concat(o.getGrandTotalsValueFamily(),"'"),this.eGui.style["font-size"]=o.getGrandTotalsValueSize()+"px",this.eGui.style["justify-content"]=o.getGrandTotalsValueAlign(),this.eGui.style["text-align"]="flex-end"===o.getGrandTotalsValueAlign()?"right":"flex-start"===o.getGrandTotalsValueAlign()?"left":o.getGrandTotalsValueAlign(),this.eGui.style["align-items"]=o.getGrandTotalsValueVerticalAlign(),this.eGui.style.color=o.getGrandTotalsValueColor()),this.eGui.innerHTML===o.getGrandTotalsText()?(vitaraJQ(this.eGui).addClass(" vitara-grand-totals-header "),vitaraJQ(this.eGui).addClass(" vitara-grand-totals-text "),vitaraJQ(t.eParentOfValue).css("background-color",o.getGrandTotalsTextBgColor()),vitaraJQ(t.eParentOfValue).addClass(" vitara-grand-totals-header vitara-grand-totals-cell ")):(vitaraJQ(this.eGui).addClass(" vitara-grand-totals-value "),vitaraJQ(this.eGui).addClass(" vitara-grand-totals-text "),vitaraJQ(t.eParentOfValue).css("background-color",o.getGrandTotalsValueBgColor()),vitaraJQ(t.eParentOfValue).addClass(" vitara-grand-totals-value "),vitaraJQ(t.eParentOfValue).addClass(" vitara-grand-totals-row "),vitaraJQ(t.eParentOfValue).addClass(" vitara-grand-totals-value vitara-grand-totals-cell ")),this.eGui.style.display="flex",n&&t.colDef.isMetric){var a,l,s={params:t,elementValue:null===(a=t.data)||void 0===a||null===(a=a[t.colDef.colId])||void 0===a?void 0:a.rawValue,element:this.eGui,rowData:t.data,element_fv:null===(l=t.data)||void 0===l||null===(l=l[t.colDef.colId])||void 0===l?void 0:l.value,metricName:t.colDef.colId},u=e.thresholdRendererHelper(s);this.eGui=u.element,u.wrapper?u.barLabelWrapper?(u.barLabelWrapper.append(u.wrapper),this.eGui.append(u.barLabelWrapper)):this.eGui.append(u.wrapper):(r.innerText=u.elementValue?s.element_fv:"",this.eGui.append(r))}},o.CustomPinnedRowRenderer.prototype.getGui=function(){return this.eGui},r?(d.enableValue=!0,d.field=t+".rawValue",d.filter="agNumberColumnFilter",d.cellRenderer=o.getDefaultRenderer().rendererSelector,d.filterValueGetter=function(t){var e,o;return null===(e=t.data)||void 0===e||null===(e=e[null===(o=t.column)||void 0===o?void 0:o.colId])||void 0===e?void 0:e.rawValue}):(d.field=t,d.filter="agTextColumnFilter",d.cellRenderer=o.getDefaultRenderer().attributeRenderer),d.cellRendererSelector=o.setCustomPinnedRowRenderer,d.tooltipComponent="customTooltip",d.tooltipValueGetter=function(t){return t.value},d},F=function(t){var e=d.columnApi.getColumnState(),r=e.length;if(o.groupedColumns.length>0)for(var n=0;n<o.groupedColumns.length;n++)for(var i=o.groupedColumns[n].columns,a=0;a<i.length;a++){var l=e.map((function(t){return t.colId})).indexOf(i[a]);-1!==l&&l<r&&(r=l)}for(a=0;a<e.length;a++){var s=e[a];0==(p=o.defaultColumnDef.filter((function(t){return t.colId==s.colId}))).length&&e.splice(a,1),(p=t.filter((function(t){return t.colId==s.colId}))).length>0&&(p[0].aggFunc=p[0].aggFunc||s.aggFunc,e[a].width=p[0].width,e[a].aggFunc=p[0].aggFunc)}var u,c=e.slice(0,r),h=e.slice(r);for(a=0;a<o.groupedColumns.length;a++)for(i=o.groupedColumns[a].columns,n=0;n<i.length;n++){var g=h.filter((function(t){return t.colId==i[n]}));void 0!==g[0]&&null!==g[0]&&""!==g[0]&&(c[c.length]=g[0])}for(a=0;a<c.length;a++){var p;s=c[a],(p=t.filter((function(t){return t.colId==s.colId}))).length>0&&(c[a]=p[0])}u=d.hasOwnProperty("rowSelection")?t.slice(0,t.length):e.slice(0,t.length);var m=0;for(a=0;a<t.length;a++)(f=o.defaultColumnDef.filter((function(e){return e.colId==t[a].colId})))&&f[0]&&0==f[0].isMetric&&(m=a+1);for(a=0;a<c.length;a++){var f;s=c[a],u.map((function(t){return t.colId})).indexOf(s.colId)<0&&(0==(f=o.defaultColumnDef.filter((function(t){return t.colId==s.colId})))[0].isMetric?u.splice(m,0,c[a]):u[u.length]=c[a])}for(var v in u)for(var C in t)if(u[v].colId==t[C].colId){u[v].hide=t[C].hide;break}return t=u};o.callPrepareColumnState=F;var I=function(){return JSON.parse(sessionStorage.getItem(o.saveColorHistoryKey))||[]},k=function(){sessionStorage.setItem(o.saveColorHistoryKey,JSON.stringify(o.recentColors))},R=function(t,e){return t-e};o.setVitaraColorPicker=function(t,e,o){vitaraJQ(t,e).vitaracolorpicker({showOn:"button",color:o||"",initialHistory:I(),customHistoryClose:!0,sliders:"wv",indicatorStyle:"arrow",defaultPalette:"custom"}).off("changecolor").on("changecolor",P)};var P=function(t,e){e&&(0===o.recentColors.length&&(o.recentColors=I(),o.recentColors.length>9&&o.recentColors.splice(0,1),o.recentColors.push(e)),o.recentColors.length>10&&o.recentColors.splice(10),k(),L("#header_font_color"),L("#body_font_color"),L(".thresholdColorpicker"))},L=function(t){try{vitaraJQ(t,o.gridOptions.gridArea).vitaracolorpicker("updateHistory",o.recentColors)}catch(t){console.log("update color failed")}},N=function(t){var e="34%";if((document.documentMode||window.StyleMedia)&&(isMSTRDashBoard()||isMSTRDesktop())&&!isMSTRMobile()){if(vitaraJQ(".mstrmojo-VIDocLayout").length>0){if(vitaraJQ(".mstrmojo-VIDocLayout")[0].getBoundingClientRect()&&vitaraJQ(".mstrmojo-VIDocLayout")[0].getBoundingClientRect().right)e=vitaraJQ(".mstrmojo-VIDocLayout")[0].getBoundingClientRect().right;else if(vitaraJQ(".mstrmojo-RootView-gallery").length>0){var o=vitaraJQ(".mstrmojo-RootView-gallery").width();o&&(e-=o)}}else e=window.innerWidth;e-=t?parseInt(t):parseInt(d.propMenuWidth)}return e};function H(t){var e={};o.getColumnStateMaster().columnAggregationModel.fixaggregation(),o.getTrendingModel(),d.api.setRowData(t.rowData);var r=o.getRowGroupOpenedModel();if(o.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length>0&&r.getIsAnyRowGroupExpanded()&&r.drawRowGroupOpened(),o.getGrandTotalsModel().onGrandTotalsChange(),void 0!==e.exportToCSV&&""!=e.exportToCSV&&e.exportToCSV){var n={skipHeader:!1,skipFooters:!1,skipGroups:!1,allColumns:!1,fileName:d.id+".csv",columnSeparator:","};d.api.exportDataAsCsv(n),e.exportToCSV=!1}}o.callPopupLeftPosition=N,o.initiateGridAndRender=function(){if(o.gridOptions=d,null!==d.gridArea){o.getColumnStateMaster();for(var t=w(),e=0;e<d.customIcons.length;e++){var r=d.customIcons[e];o.icons[r.id]=r.icons}if(d.getMainMenuItems=o.getHamBurgerMenu().getGridChartHamburgerMenu(o).getMainMenuItems,d.autoGroupColumnDef={cellRenderer:"agGroupCellRenderer",cellRendererSelector:o.setCustomPinnedRowRenderer,field:"groupedCol",filter:"agGroupColumnFilter",width:o.getColumnStateMaster().getSubStateValue("width","ag-Grid-AutoColumn",200),resizable:!0,enablePivot:!1,enableRowGroup:!1,headerClass:"vitara-header vitara-grid-header-cell",sortable:!0,pinned:o.getColumnStateMaster().getSubStateValue("pinned","ag-Grid-AutoColumn",null),menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"],cellClass:function(t){var e=[" vitara-cell","vitara-grid-cell","vitara-grid-column","vitara-context-menu-target"];return o.isGrouped(t)&&(e=[].concat(Mt(e),["vitara-grid-subtotals-header","vitara-grid-subtotals-cell"])),e},cellRendererParams:{suppressCount:o.getChildrenCountModel().isChildrenCountHidden(),checkbox:o.getGridCheckboxModel().isGridCheckboxEnabled()},tooltipValueGetter:function(t){var e=t.node.allChildrenCount;return null!==e?"".concat(t.value," (").concat(e,")"):t.value}},d.defaultColDef={headerComponent:B.VitaraGridChartSimpleHeaderComponent,headerClass:"vitara-header vitara-grid-header-cell",tooltipComponent:"customTooltip",cellClass:function(t){var e=[" vitara-cell","vitara-grid-cell","vitara-grid-column","vitara-context-menu-target"];return o.isGrouped(t)&&(e=[].concat(Mt(e),["vitara-grid-subtotals-value","vitara-grid-subtotals-cell"])),e}},d.defaultColGroupDef={headerGroupComponent:ft.CustomHeaderGroup,headerClass:"vitara-header vitara-grid-grouped-header-cell"},o.gridOptions=d,E(t),d.dontPopulateData)o.lazyDataSetter=function(){H(t)};else{H(t);var n=o.getColumnStateMaster().columnPivotModel;o.getMetricToRowsModel().initMetricModel(),n.initSubModel(),o.getColumnStateMaster().columnShowHideModel.applyVisibilityWrapper(),o.getThresholdModel(),o.getFilterModel(),o.getFilterModel().getAllThresholds().length>0&&o.getHeaderFormattingView().refreshHeader()}}else console.log("Invalid grid area");o.gridOptions=d}};vitaraJQ.extend(bt.prototype,{getColumnMenu:function(){return this.columnMenu||(this.columnMenu=new a.VitaraGridChartColumnMenu(this)),this.columnMenu},getLegacyColumnMenu:function(t,e){return this.legacyColumnMenu||(this.legacyColumnMenu=new l.VitaraGridChartLegacyColumnMenu(t,e)),this.legacyColumnMenu},getHamBurgerMenu:function(){return this.hamburgerMenu||(this.hamburgerMenu=new s.VitaraGridChartHamburgerMenu),this.hamburgerMenu},getChartEventListener:function(t,e){return this.chartEventListener||(this.chartEventListener=new u.VitaraGridChartEventListeners(t,e)),this.chartEventListener},getFilterThreshold:function(t){return this.filterThreshold||(this.filterThreshold=new d.VitaraGridChartFilterThreshold(t)),this.filterThreshold},getColumnGrouping:function(){return this.columnGrouping||(this.columnGrouping=new p.VitaraGridChartColumnGroupingModel(this)),this.columnGrouping},getStateManager:function(){return this.stateManager||(this.stateManager=new c.VitaraStateManager(this)),this.stateManager},getSortingModel:function(){return this.sortChart||(this.sortChart=new h.VitaraGridChartSortingModel(this)),this.sortChart},getColumnStateMaster:function(){return this.columnStateMaster||(this.columnStateMaster=new g.VitaraGridChartColumnStateMaster(this)),this.columnStateMaster},getChildrenCountModel:function(){return this.childrenCountModel||(this.childrenCountModel=new f.VitaraGridChartChildrenCountModel(this)),this.childrenCountModel},getColumnFormattingModel:function(){return this.columnFormattingModel||(this.columnFormattingModel=new m.VitaraGridChartColumnFormattingModel(this)),this.columnFormattingModel},getThemeFormattingModel:function(){return this.themeFormattingModel||(this.themeFormattingModel=new M.VitaraGridChartThemeFormattingModel(this)),this.themeFormattingModel},getAggregationWrapperModel:function(){return this.aggregationWrapperModel||(this.aggregationWrapperModel=new y.VitaraGridChartAggregationWrapperModel(this),this.aggregationWrapperModel._initAggregation()),this.aggregationWrapperModel},getAggregationHelper:function(){return this.aggregationHelper||(this.aggregationHelper=new st.VitaraGridChartAggregationHelper(this)),this.aggregationHelper},getGridOptions:function(){return this.gridOptions},getColumnGroupingView:function(){return this.columnGroupingView||(this.columnGroupingView=new T.VitaraGridChartColumnGroupingView(this)),this.columnGroupingView},getVitaraGridPropertyEditorMapper:function(){return this.vitaraGridPropertyEditorMapper||(this.vitaraGridPropertyEditorMapper=new S.VitaraGridPropertyEditorMapper(this)),this.vitaraGridPropertyEditorMapper},getHeaderFormattingView:function(){return this.headerFormattingView||(this.headerFormattingView=new b.VitaraGridChartHeaderFormattingView(this)),this.headerFormattingView},getThresholdModel:function(){return this.thresholdModel||(this.thresholdModel=new w.VitaraGridChartThresholdModel(this,"thresholds")),this.thresholdModel},getFilterModel:function(){return this.filterModel||(this.filterModel=new w.VitaraGridChartThresholdModel(this,"filter")),this.filterModel},getEventDispatcher:function(){return this.eventDispatcher||(this.eventDispatcher=new A.VitaraGridChartEventDispatcher(this)),this.eventDispatcher},getChooseColumnModel:function(){return this.chooseColumnModel||(this.chooseColumnModel=new G.VitaraGridChartChooseColumnModel(this)),this.chooseColumnModel},getGrandTotalsModel:function(){return this.grandTotalsModel||(this.grandTotalsModel=new v.VitaraGridChartGrandTotalsModel(this)),this.grandTotalsModel},getSubTotalsModel:function(){return this.subTotalsModel||(this.subTotalsModel=new C.VitaraGridChartSubTotalsModel(this)),this.subTotalsModel},getThresholdView:function(t){return this.thresholdView||(this.thresholdView=new V.VitaraGridChartThresholdView(this,t)),this.thresholdView},getRatioAggregationModel:function(){return this.ratioAggregationModel||(this.ratioAggregationModel=new O.VitaraGridChartRatioModel(this)),this.ratioAggregationModel},getRatioAggregationView:function(){return this.ratioAggregationView||(this.ratioAggregationView=new _.VitaraGridChartRatioView(this)),this.ratioAggregationView},getRowGroupOpenedModel:function(){return this.rowGroupOpenedModel||(this.rowGroupOpenedModel=new E.VitaraGridChartRowGroupOpenedModel(this)),this.rowGroupOpenedModel},getColumnResizedModel:function(){return this.columnResizeModel||(this.columnResizeModel=new D.VitaraGridChartColumnResizeModel(this)),this.columnResizeModel},getGridThemeView:function(){return this.gridThemeView||(this.gridThemeView=new F.VitaraGridChartGridThemeView(this)),this.gridThemeView},getFormatColumnView:function(t){return this.formatColumnView||(this.formatColumnView=new I.VitaraGridChartFormatColumnView(this,t)),this.formatColumnView},getThemeModel:function(){return this.themeModel||(this.themeModel=new k.VitaraGridChartGridThemeModel(this)),this.themeModel},getMicroChartTypeModel:function(){return this.microChartTypeModel||(this.microChartTypeModel=new R.VitaraMicroChartTypeModel(this)),this.microChartTypeModel},getPlotTypeSelectorModel:function(){return this.plotTypeSelectorModel||(this.plotTypeSelectorModel=new P.VitaraMicroChartPlotTypeSelectorModel(this)),this.plotTypeSelectorModel},getPivotDropZoneModel:function(){return this.pivotDropZoneModel||(this.pivotDropZoneModel=new L.VitaraGridChartPivotDropZoneModel(this)),this.pivotDropZoneModel},getGroupingDropZoneModel:function(){return this.groupingDropZoneModel||(this.groupingDropZoneModel=new N.VitaraGridChartGroupingDropZoneModel(this)),this.groupingDropZoneModel},getRowSelectedModel:function(){return this.rowSelectedModel||(this.rowSelectedModel=new H.VitaraGridChartRowSelectedModel(this)),this.rowSelectedModel},getChartTypeModel:function(){return this.chartTypeModel||(this.chartTypeModel=new J.VitaraChartTypeModel(this,"GridChart")),this.chartTypeModel},getPropertyEditorRTLLayoutModel:function(){return this.propertyEditorRTLModel||(this.propertyEditorRTLModel=new Q.VitaraGridChartPropertyEditorRTLLayoutModel(this)),this.propertyEditorRTLModel},getExportToCSV:function(){return this.exportToCSV||(this.exportToCSV=new U.VitaraGridChartExportToCSV(this)),this.exportToCSV},getFilterView:function(){return this.filterView||(this.filterView=new W.VitaraGridChartFilterView(this)),this.filterView},getColumnOrderModel:function(){return this.columnOrderModel||(this.columnOrderModel=new j.VitaraGridChartColumnOrderModel(this)),this.columnOrderModel},getMetricToRowsModel:function(){return this.metricToRowsModel||(this.metricToRowsModel=new z.VitaraGridChartMetricToRowsModel(this)),this.metricToRowsModel},getCustomTooltipModel:function(){return this.customTooltipModel||(this.customTooltipModel=new K.VitaraGridChartCustomTooltipModel(this)),this.customTooltipModel},getTrendingModel:function(){return this.trendingModel||(this.trendingModel=new Y.VitaraGridChartTrendingModel(this)),this.trendingModel},getScalingModel:function(){return this.scalingModel||(this.scalingModel=new dt.VitaraGridChartScalingModel(this)),this.scalingModel},getScalingView:function(){return this.scalingView||(this.scalingView=new ct.VitaraGridChartScalingView(this)),this.scalingView},getMetricGroupingModel:function(){return this.metricGroupingModel||(this.metricGroupingModel=new vt.VitaraGridChartMetricGroupingModel(this)),this.metricGroupingModel},getMetricGroupingView:function(){return this.metricGroupingView||(this.metricGroupingView=new Ct.VitaraGridChartMetricGroupingView(this)),this.metricGroupingView},getDragDropManager:function(t){return this.dragDropManager&&(this.dragDropManager=null),this.dragDropManager=new ht.VitaraGridChartDragDropManager(t),this.dragDropManager},getTrendlineRenderer:function(){return this.trendlineRenderer||(this.trendlineRenderer=new q.VitaraGridChartTrendlineRenderer(this)),this.trendlineRenderer},getTrendlineOptionsView:function(){return this.trendlineOptionsView||(this.trendlineOptionsView=new nt.VitaraGridChartTrendlineOptionsView(this)),this.trendlineOptionsView},getAnimationModel:function(){return this.animationModel||(this.animationModel=new X.VitaraGridChartAnimationModel(this)),this.animationModel},getAllowUrlsToVisualModel:function(){return this.allowUrlsToVisualModel||(this.allowUrlsToVisualModel=new $.VitaraGridChartAllowURLsModel(this)),this.allowUrlsToVisualModel},getGridCheckboxModel:function(){return this.gridCheckboxModel||(this.gridCheckboxModel=new tt.VitaraGridChartCheckboxModel(this)),this.gridCheckboxModel},getColumnGroupOpenedModel:function(){return this.columnGroupOpenedModel||(this.columnGroupOpenedModel=new ot.VitaraGridChartColumnGroupOpenedModel(this)),this.columnGroupOpenedModel},getCustomMarkerModel:function(){return this.customMarkerModel||(this.customMarkerModel=new et.VitaraGridChartCustomMarkerModel(this)),this.customMarkerModel},getShowDetailRowsModel:function(){return this.showDetailRowsModel||(this.showDetailRowsModel=new ut.VitaraMicroChartShowDetailRowsModel(this)),this.showDetailRowsModel},getSortingView:function(){return this.sortingView||(this.sortingView=new rt.VitaraGridChartSortingView(this)),this.sortingView},getGrandTotalsView:function(t){return this.grandTotalsView||(this.grandTotalsView=new it.VitaraGridChartGrandTotalsView(this,t)),this.grandTotalsView},getSubTotalsView:function(t){return this.subTotalsView||(this.subTotalsView=new at.VitaraGridChartSubTotalsView(this,t)),this.subTotalsView},getCustomMarkerView:function(){return this.customMarkerView||(this.customMarkerView=new lt.VitaraGridChartCustomMarkerView(this)),this.customMarkerView},getDefaultRenderer:function(){return this.defaultRenderer||(this.defaultRenderer=new x.VitaraGridChartDefaultRenderer(this)),this.defaultRenderer},getCustomFormatEditor:function(){return this.customFormatEditor||(this.customFormatEditor=new gt.VitaraGridCustomFormattingEditor(this)),this.customFormatEditor},getCustomFormatEditorModel:function(){return this.customFormatEditorModel||(this.customFormatEditorModel=new pt.CustomFormattingEditorModel(this)),this.customFormatEditorModel},getColumnSelectionModel:function(){return this.columnSelectionModel||(this.columnSelectionModel=new mt.ColumnSelectionModel(this)),this.columnSelectionModel}})},,,,(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChartColumnMenu:()=>l});var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e}var e,o;return e=t,(o=[{key:"getAutoSizeColumnMenu",value:function(){var t=this.gridContext.getColumnResizedModel().getFitToContentModel(),e=this.gridContext.getColumnResizedModel().getFitToGridWidthModel(),o=[{name:"Fit to Content",key:"Fit to Content",type:mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,currentValue:t.isAllColumnWidthToContent(),onClick:function(){t.setAllColumnsToContent()}},{name:"Fit to Grid Width",key:"Fit to Grid Width",type:mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,currentValue:e.isFitToGridWidth(),onClick:function(){e.setFitToGridWidth()}}];return this._get_multi_select_list("Auto Size","Auto Size",this._get_submenu_helper_wrapper(o))}},{key:"clearThresholds",value:function(t){t.getThresholdModel().clearThresholdModel(),t.redrawRows()}},{key:"clearSorting",value:function(t){t.getSortingModel().clearSorting(),t.getSortingModel()._setPseudoState(),t.getHeaderFormattingView().refreshHeader()}},{key:"getResetColumnsColumnMenu",value:function(){var t=this,e=this.gridContext,o=[{name:"Clear Sorting",key:"Clear Sorting",onClick:function(){t.clearSorting(e)}},{name:"Clear Thresholds",key:"Clear Thresholds",onClick:function(){t.clearThresholds(e)}},{name:"Clear Filters",key:"Clear Filters",onClick:function(){e.getFilterModel().clearThresholdModel(),e.gridOptions.api.onFilterChanged(),e.redrawRows()}},{name:"Clear Pinned Columns",key:"Clear Pinned Columns",onClick:function(){e.getColumnStateMaster().columnPinningModel.unpinAllColumns()}},{name:"Clear Grouping",key:"Clear Grouping",onClick:function(){e.getColumnStateMaster().columnRowGroupingModel.ungroupRows()}},{name:"Clear Column Grouping",key:"Clear Column Grouping",onClick:function(){e.getColumnGrouping().ungroupColumns()}},{name:"Clear Scaling Grouping",key:"Clear Scaling Grouping",onClick:function(){e.getScalingModel().resetModel()}},{name:"Clear Metric Grouping",key:"Clear Metric Grouping",onClick:function(){e.getMetricGroupingModel().ungroupMetrics()}}];return this._get_multi_select_list("Reset Columns","Reset Columns",this._get_submenu_helper_wrapper(o))}},{key:"getThresholdColumnMenu",value:function(){var t=this,e=this.gridContext,o=[];isMSTRStatePresentation()||o.push({name:"Manage Thresholds",key:"Manage Thresholds",onClick:function(){e.gridOptions.context.editorInterfaceRef.openEditor("thresholds")}}),o.push({name:"Clear Thresholds",key:"Clear Thresholds",onClick:function(){t.clearThresholds(e)}});var r=this._get_submenu_helper_wrapper(o);return this._get_multi_select_list("Thresholds","Thresholds",r)}},{key:"getAdvanceSortingColumnMenu",value:function(){var t=this.gridContext,e=this,o=[];isMSTRStatePresentation()||o.push({name:"Manage Sorting",onClick:function(){t.gridOptions.context.editorInterfaceRef.openEditor("advanceSort")}}),o.push({name:"Clear Sorting",onClick:function(){e.clearSorting(t)}});var r=this._get_submenu_helper_wrapper(o);return this._get_multi_select_list("Advance Sorting","Advance Sorting",r)}},{key:"getGridThemeColumnMenu",value:function(){var t=this.gridContext,e=[];isMSTRStatePresentation()||e.push({name:"Edit Theme",key:"Edit Theme",onClick:function(){t.gridOptions.context.editorInterfaceRef.openEditor("gridTheme")}});var o,r,i,a=(o=Object.keys(t.getThemeModel().themeMap),r=t.getThemeModel().getGridThemeModel(),i=[],o.forEach((function(e){var o={};o.name=e,o.key=e,o.type=mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,o.currentValue=e===r,o.onClick=function(){t.getThemeModel().setGridThemeModel(e)},i.push(o)})),i);return e=[].concat(n(a),n(e)),this._get_multi_select_list("Grid Theme","Grid Theme",this._get_submenu_helper_wrapper(e))}},{key:"getGridDropZoneColumnMenu",value:function(){var t=this.gridContext,e=!0,o=[{name:"Show",key:"Show",onClick:function(){t.getPivotDropZoneModel().setPivotDropZoneVisible(),t.getGroupingDropZoneModel().setGroupingDropZoneVisible()},type:mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,currentValue:t.getPivotDropZoneModel().isPivotDropZoneVisible()},{name:"Hide",key:"Hide",onClick:function(){t.getPivotDropZoneModel().setPivotDropZoneInvisible(),t.getGroupingDropZoneModel().setGroupingDropZoneInvisible()},type:mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,currentValue:!t.getPivotDropZoneModel().isPivotDropZoneVisible()}];return(isMSTRDashBoard()&&isMSTRStatePresentation()||t.getChartTypeModel().isMicroChart())&&(e=!1),this._get_multi_select_list("Group/Pivot Dropzones","Group/Pivot Dropzones",this._get_submenu_helper_wrapper(o),e)}},{key:"getShowHideColumnMenu",value:function(){var t=this.gridContext,e=[];return t.getColumnStateMaster().columnShowHideModel.getShowHideColumnState().forEach((function(o){var r={};r.name=o.headerName,r.key=o.headerName,r.type=mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE,r.currentValue=!o.hidden,r.onClick=function(){t.getColumnStateMaster().columnShowHideModel.toggleColumnShowHide(o.headerName)},e.push(r)})),this._get_multi_select_list("Show/Hide Columns","Show/Hide Columns",this._get_submenu_helper_wrapper(e))}},{key:"getGrandTotalsColumnMenu",value:function(){var t=[],e=this.gridContext.getGrandTotalsModel();if(e.isGrandTotalsVisible()){var o={name:"Hide",key:"Hide",onClick:function(){e.setGrandTotalsHide()}};t.push(o),o="top"===e.getGrandTotalsPosition()?{name:"Move to Bottom",key:"Move to Bottom",onClick:function(){e.setGrandTotalsPositionBottom()}}:{name:"Move to Top",key:"Move to Top",onClick:function(){e.setGrandTotalsPositionTop()}},t.push(o)}else t.push({name:"Show",key:"Show",onClick:function(){e.setGrandTotalsShow()}});return this._get_multi_select_list("Grand Totals","Grand Totals",this._get_submenu_helper_wrapper(t))}},{key:"_get_multi_select_list",value:function(t,e,o){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return{isShown:r,type:mstrmojo.CUSTOM_CONTEXT_MENU.SUBMENU,name:t,key:e,subMenuType:mstrmojo.CUSTOM_CONTEXT_MENU.MULTI_SELECT_LIST,items:o}}},{key:"_get_submenu_helper",value:function(t,e,o,r,n){var i={isShown:!0};return void 0===r&&(r=mstrmojo.CUSTOM_CONTEXT_MENU.NORMAL),r===mstrmojo.CUSTOM_CONTEXT_MENU.TOGGLE&&(i.currentValue=n),i.name=t,i.key=e,i.type=r,i.onClick=o,i}},{key:"_get_submenu_helper_wrapper",value:function(t){var e=this,o=[];return t.forEach((function(t){o.push(e._get_submenu_helper(t.name,t.key,t.onClick,t.type,t.currentValue))})),o}}])&&a(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{function r(t,e){this.contextMenuState=t,this.contextMenu=e}o.r(e),o.d(e,{VitaraGridChartLegacyColumnMenu:()=>r}),vitaraJQ.extend(r.prototype,{getGridChartColumnMenu:function(t){var e=t,o=this;return{getGridMenuOptions:function(){var t=["Show/Hide Columns"],o="";for(var r in this.getGridMenus(),e.customGridMenuItems){var n=e.customGridMenuItems[r],i=e.gridOptions.context.utils.convertStringLanguage(n.title);if(o+='<li class="menu-item">',o+='<button data-menuitem="'+r+'" type="button" class="vitara-grid-menu-item">',e.gridOptions.enableRtl?(n.icon="fa fa-arrow-left",o+='<i class="'+n.icon+'">&nbsp;</i> <span style="text-align: right;">'+i+"</span>"):o+="<span>"+i+'</span><i class="'+n.icon+'">&nbsp;</i>',o+="</button>",void 0!==n.menuItems&&null!=n.menuItems&&""!=n.menuItems&&n.menuItems.length>0){o+='<ul class="vitara-sub-menu">';var a="";for(var l in n.menuItems){var s=n.menuItems[l];a=t.indexOf(n.title)>-1?s.title:e.gridOptions.context.utils.convertStringLanguage(s.title),o+='<li role="menuitem" class="menu-item">',e.gridOptions.enableRtl?(o+='<button data-menuitem="'+r+'" data-submenuitem="'+l+'" type="button" class="vitara-grid-menu-item" style="text-align: right;">',o+=a+' <i class="'+s.icon+'">&nbsp;</i> '):(o+='<button data-menuitem="'+r+'" data-submenuitem="'+l+'" type="button" class="vitara-grid-menu-item">',o+='<i class="'+s.icon+'">&nbsp;</i> '+a),o+="</button>",o+="</li>"}o+="</ul>"}o+="</li>"}vitaraJQ(e.gridOptions.gridArea).find(".vitara-grid-menu-items").html(o)},getGridMenus:function(t){var o=[];switch(o[0]=o[1]=o[2]=o[3]="fa fa-check fa-invisible",t){case"fresh":o[0]="fa fa-check";break;case"blue":o[1]="fa fa-check";break;case"dark":o[2]="fa fa-check"}var r=["fresh","blue","dark"],n=e.gridOptions.customThemes;if(r=r.concat(n),vitaraJQ.inArray("autosize",e.gridOptions.showModules)>=0&&(e.customGridMenuItems=[{title:"Auto Size",icon:"fa fa-arrow-right",type:"buttons",hasMenu:!0,action:function(t){return!1},menuItems:[{title:"Fit to Content",icon:e.getColumnResizedModel().getFitToContentModel().isAllColumnWidthToContent()?"fa fa-check":"",action:function(t){e.getColumnResizedModel().getFitToContentModel().setAllColumnsToContent(),vitaraJQ("button:contains('Fit to Content')",e.gridOptions.gridArea).find("i").addClass("fa fa-check"),vitaraJQ("button:contains('Fit to Grid Width')",e.gridOptions.gridArea).find("i").removeClass("fa fa-check")}},{title:"Fit to Grid Width",icon:e.getColumnResizedModel().getFitToGridWidthModel().isFitToGridWidth()?"fa fa-check":"",action:function(t){e.getColumnResizedModel().getFitToGridWidthModel().setFitToGridWidth(),vitaraJQ("button:contains('Fit to Grid Width')",e.gridOptions.gridArea).find("i").addClass("fa fa-check"),vitaraJQ("button:contains('Fit to Content')",e.gridOptions.gridArea).find("i").removeClass("fa fa-check")}}]}]),vitaraJQ.inArray("resetcolumns",e.gridOptions.showModules)>=0){var i=e.customGridMenuItems.length;e.customGridMenuItems[i]={title:"Reset Columns",icon:"fa fa-arrow-right",type:"buttons",hasMenu:!0,action:function(t){return!1},menuItems:[{title:"Clear Sorting",icon:"filter success",action:function(t){e.getColumnMenu().clearSorting(e)}},{title:"Clear Thresholds",icon:"filter success",action:function(t){e.getColumnMenu().clearThresholds(e)}},{title:"Clear Filters",icon:"filter success",action:function(t){e.gridOptions.api.setFilterModel({}),e.getFilterModel().clearThresholdModel(),e.gridOptions.api.onFilterChanged(),e.redrawRows()}},{title:"Clear Pinned Columns",icon:"filter success",action:function(t){e.getColumnStateMaster().columnPinningModel.unpinAllColumns()}}]},e.gridOptions.hideClearGrouping||e.customGridMenuItems[i].menuItems.push({title:"Clear Grouping",icon:"filter success",action:function(t){e.getColumnStateMaster().columnRowGroupingModel.ungroupRows()}}),e.customGridMenuItems[i].menuItems.push({title:"Clear Column Grouping",icon:"filter success",action:function(){e.getColumnGrouping().ungroupColumns()}}),e.customGridMenuItems[i].menuItems.push({title:"Clear Scaling Grouping",icon:"filter success",action:function(){e.getScalingModel().resetModel()}})}if(vitaraJQ.inArray("thresholds",e.gridOptions.showModules)>=0){var a=[];isMSTRStatePresentation()||a.push({title:"Manage Thresholds",icon:"","data-dismiss":"modal",action:function(t){e.gridOptions.context.editorInterfaceRef.openEditor("thresholds")}}),a.push({title:"Clear Thresholds",icon:"",action:function(t){e.getColumnMenu().clearThresholds(e)}}),e.customGridMenuItems[e.customGridMenuItems.length]={title:"Thresholds",icon:"fa fa-arrow-right",type:"buttons",hasMenu:!0,action:function(t){return!1},menuItems:a}}if(vitaraJQ.inArray("advanceSorting",e.gridOptions.showModules)>=0){var l=[];isMSTRStatePresentation()||l.push({title:"Manage Sorting",icon:"","data-dismiss":"modal",action:function(t){e.gridOptions.context.editorInterfaceRef.openEditor("advanceSort")}}),l.push({title:"Clear Sorting",icon:"",action:function(t){e.getColumnMenu().clearSorting(e)}});var s={title:"Advance Sorting",icon:"fa fa-arrow-right",type:"buttons",hasMenu:!0,action:function(t){return!1},menuItems:l};e.customGridMenuItems.push(s)}if(vitaraJQ.inArray("gridtheme",e.gridOptions.showModules)>=0){var u="Grid Theme";vitaraJQ.inArray("theme",e.gridOptions.proversion.menus)>=0&&(u+=" (PRO)");var d={title:u,icon:"fa fa-arrow-right",type:"selectbox",hasMenu:!0,action:function(t){return!1},menuItems:[]};if(vitaraJQ.inArray("theme",e.gridOptions.proversion.menus)<0){var c=[],h=e.getThemeModel().getGridThemeModel();Object.keys(e.getThemeModel().themeMap).forEach((function(t){var o="fa fa-check";t!==h&&(o+=" fa-invisible"),c.push({title:t,icon:o,action:function(o){e.getThemeModel().setGridThemeModel(t)}})})),d.menuItems=c,isMSTRStatePresentation()||(d.menuItems[d.menuItems.length]={title:"Edit Theme",type:"buttons",noshow:!0,icon:"",action:function(t){e.gridOptions.context.editorInterfaceRef.openEditor("gridTheme")}})}e.customGridMenuItems.push(d)}if(vitaraJQ.inArray("showhide",e.gridOptions.showModules)>=0){var g={title:"Group/Pivot Dropzones",icon:"fa fa-arrow-right",type:"selectbox",hasMenu:[],menuItems:[{title:"Show",icon:e.getPivotDropZoneModel().isPivotDropZoneVisible()&&e.getGroupingDropZoneModel().isGroupingDropZoneVisible()?"fa fa-check":"",action:function(t){e.getPivotDropZoneModel().setPivotDropZoneByValue("show"),e.getGroupingDropZoneModel().setGroupingDropZoneByValue("show"),e.getPivotDropZoneModel().showPivotDropZone()}},{title:"Hide",icon:e.getPivotDropZoneModel().isPivotDropZoneVisible()&&e.getGroupingDropZoneModel().isGroupingDropZoneVisible()?"":"fa fa-check",action:function(t){e.getPivotDropZoneModel().setPivotDropZoneByValue("hide"),e.getGroupingDropZoneModel().setGroupingDropZoneByValue("hide"),e.getPivotDropZoneModel().showPivotDropZone()}}]};e.getChartTypeModel().isGridChart()&&e.customGridMenuItems.push(g)}if(vitaraJQ.inArray("showhide",e.gridOptions.showModules)>=0){var p={title:"Show/Hide Columns",icon:"fa fa-arrow-right",type:"checkbox",hasMenu:!0,menuItems:[]};vitaraJQ.each(e.getColumnStateMaster().columnShowHideModel.getShowHideColumnState(),(function(t,o){var r=p.menuItems.length,n="fa fa-check";o.hidden&&(n+="  fa-invisible"),p.menuItems[r]={title:o.headerName,icon:n,action:function(t){e.getColumnStateMaster().columnShowHideModel.toggleColumnShowHide(o.headerName,!0),e.getChartTypeModel().isMicroChart()&&e.hideMicroAttribute()}}})),e.customGridMenuItems.push(p)}if(vitaraJQ.inArray("footer",e.gridOptions.showModules)>=0&&e.customGridMenuItems.push({title:"Grand Totals",icon:"fa fa-arrow-right",type:"selectbox",hasMenu:!0,action:function(t){return!1},menuItems:function(){if(e.getGrandTotalsModel().isGrandTotalsVisible()){var t={title:"Hide",action:function(t){e.getGrandTotalsModel().setGrandTotalsHide()}},o={};return"top"===e.getGrandTotalsModel().getGrandTotalsPosition()?(o.title="Move to Bottom",o.action=function(t){e.getGrandTotalsModel().setGrandTotalsPositionBottom()}):(o.title="Move to Top",o.action=function(t){e.getGrandTotalsModel().setGrandTotalsPositionTop()}),[t,o]}return[t={title:"Show",action:function(t){e.getGrandTotalsModel().setGrandTotalsShow()}}]}()}),vitaraJQ.inArray("background",e.gridOptions.showModules)>=0){u="Background",vitaraJQ.inArray("background",e.gridOptions.proversion.menus)>=0&&(u+=" (PRO)");var m={title:u,icon:"fa fa-arrow-right",type:"buttons",hasMenu:!0,action:function(t){return!1},menuItems:[{title:"Enable Background",icon:"",noshow:!0,action:function(t){return!1}}]};e.customGridMenuItems.push(m)}},toggleCustomContextMenuShow:function(){1!==o.contextMenuState&&(o.contextMenuState=1,o.contextMenu.classList.add("context-menu-active"))},positionContextMenu:function(t){var r=this.getPosition(t),n=r.x,i=r.y,a=o.contextMenu.offsetWidth+100,l=o.contextMenu.offsetHeight+100,s=e.gridOptions.gridArea.offsetWidth,u=e.gridOptions.gridArea.offsetHeight;if(e.gridOptions.enableRtl)if(n<a)for(o.contextMenu.style.left=n+"px",d=o.contextMenu.querySelectorAll(".vitara-sub-menu"),c=0;c<d.length;c++)d[c].style.left="100%";else if(s-n<a)for(o.contextMenu.style.left=s-a+"px",d=o.contextMenu.querySelectorAll(".vitara-sub-menu"),c=0;c<d.length;c++)d[c].style.right="100%";else for(o.contextMenu.style.left=n+"px",d=o.contextMenu.querySelectorAll(".vitara-sub-menu"),c=0;c<d.length;c++)d[c].style.right="100%";else if(s-n<a){o.contextMenu.style.left=s-a+"px";for(var d=o.contextMenu.querySelectorAll(".vitara-sub-menu"),c=0;c<d.length;c++)d[c].style.right="100%"}else{o.contextMenu.style.left=n+"px";for(d=o.contextMenu.querySelectorAll(".vitara-sub-menu"),c=0;c<d.length;c++)d[c].style.left="100%"}o.contextMenu.style.top=u<l?"0px":u-i<l?u-l+"px":i+"px"},getPosition:function(t){var o=0,r=0;if(t||(t=window.event),t.pageX||t.pageY){var n=vitaraJQ(e.gridOptions.gridArea).offset().left,i=vitaraJQ(e.gridOptions.gridArea).offset().top;o=t.pageX-n,r=t.pageY-i}else(t.clientX||t.clientY)&&(o=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:o,y:r}}}}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartHamburgerMenu:()=>n});var r=o(45);function n(){}vitaraJQ.extend(n.prototype,{getGridChartHamburgerMenu:function(t){var e=t;function o(t,o,r){var i=[],a={name:"Clear",disabled:e.getAggregationWrapperModel().isClearAggregationFlag(t.column.colDef.headerName),action:function(){e.getAggregationWrapperModel().setClearAggregationFlag(t.column.colDef.headerName),e.redrawRows()}},l={name:"Choose Column",disabled:r.length<=1||e.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length<=0,action:function(){return!1},subMenu:o},s=e.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),u="No Grouping";return 1===s.length&&(u=s[0]),i=n(t,0,0,u),"Total"===t.column.colDef.headerName||e.getMetricToRowsModel().isMetricToRows()||i.push(l),"Total"!==t.column.colDef.headerName&&i.push(a),i}function n(t,o,r,n){var i=[];return i=[{name:"Avg",checked:"avg"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"avg")}},{name:"Count",checked:"count"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"count")}},{name:"First",checked:"first"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"first")}},{name:"Last",checked:"last"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"last")}},{name:"Max",checked:"max"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"max")}},{name:"Min",checked:"min"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"min")}},{name:"Sum",checked:"sum"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getAggregationWrapperModel().setAggregationAtAllLevels(t.column.colDef.headerName,"sum")}}],isMSTRStatePresentation()||i.push({name:"Ratio",checked:"ratio"===e.getAggregationWrapperModel().getAggregationAtLevel(t.column.colDef.headerName,n),level:n,action:function(){e.getRatioAggregationView().initiateRatioPopupModal(t)}}),e.getMetricToRowsModel().isMetricToRows()&&i.splice(i.length-1,1),i}return{getMainMenuItems:function(t){var n=t.defaultItems.slice(0).indexOf("valueAggSubMenu"),i=[],a=i.indexOf("autoSizeThis");-1!=a&&(i=i.slice(0,a));var l=[],s=e.getAggregationWrapperModel().getAllValueColumns(),u=e.getColumnStateMaster().getAllMetricColumns(),d=[],c=function(t,o){return d=[],s.length>0&&vitaraJQ.each(u,(function(r,n){n.colId!==t.column.colDef.headerName&&"Total"!==n.colDef.headerName&&(d[d.length]={name:n.colDef.headerName,checked:e.getChooseColumnModel().isChooseColumn(t.column.colDef.headerName,n.colDef.headerName,o),action:function(){console.log(t),e.getMetricToRowsModel().isMetricToRows()||(e.getChooseColumnModel().setChooseColumn(t.column.colDef.headerName,n.colDef.headerName,o),e.redrawRows())}})})),d},h=e.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();h.length>1?h.forEach((function(e){l.push({name:e,subMenu:c(t,e)})})):l=1===h.length?c(t,h[0]):[];var g={name:"Value Aggregation",icon:'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMZJREFUeNpi/P//PwMlgImBQjDwBrCgmMYENq8RiLVxqL8KxPX//v1DiIACEYYZGRlBmBOIe4B4PRDrQMUYoGyQGIoebAbADJkAxFuAWA9JXJdYA0CYC4inAPFOINZHlkPWgxKIcFMhQA0aFveB+DbOUERxDhQAbTEC4qNAPBfqEmRx3F6AAhOgojNAvBikGckumDiKHhY0B3ECcTVQQhRIg/B1NNeeB1IgQ7/BXYvmdE6oAnYcPv4NxF+BerAbMDTzAkCAAQChYIl8b86M1gAAAABJRU5ErkJggg==">',subMenu:o(t,l,s)};t.column.colDef.isMetric&&"Total"!==t.column.colDef.headerName&&i.splice(n,0,g);var p=[];if(e.getTrendingModel().isColumnEligibleForTrending(t.column)&&p.unshift.apply(p,[{name:"Line Chart",action:function(){e.getTrendingModel().setTrendWrapper();var o=t.column.colDef.headerName;e.getMicroChartTypeModel().setChartType(o,"line"),e.redrawRows()},checked:"line"==e.getMicroChartTypeModel().getChartType(t.column.colDef.headerName)&&"trendline"==e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)},{name:"Bar Chart",action:function(){e.getTrendingModel().setTrendWrapper();var o=t.column.colDef.headerName;e.getMicroChartTypeModel().setChartType(o,"bar"),e.redrawRows()},checked:"bar"==e.getMicroChartTypeModel().getChartType(t.column.colDef.headerName)&&"trendline"==e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)},{name:"Bullet Chart",action:function(){e.getTrendingModel().setTrendWrapper();var o=t.column.colDef.headerName;e.getMicroChartTypeModel().setChartType(o,"bullet"),e.redrawRows()},checked:"bullet"===e.getMicroChartTypeModel().getChartType(t.column.colDef.headerName)&&"trendline"===e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)}]),!isMSTRStatePresentation()){var m;p.push.apply(p,[{name:"Horizontal Bars",action:function(){var o=t.column.colDef.headerName;e.getMicroChartTypeModel().setChartType(o,"variance"),e.redrawRows()},checked:"variance"===e.getMicroChartTypeModel().getChartType(t.column.colDef.headerName)&&"trendline"===e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)},{name:"Horizontal Pins",action:function(){var o=t.column.colDef.headerName;e.getMicroChartTypeModel().setChartType(o,"variancepercentage"),e.redrawRows()},checked:"variancepercentage"===e.getMicroChartTypeModel().getChartType(t.column.colDef.headerName)&&"trendline"===e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)},{name:"Value",action:function(){e.getPlotTypeSelectorModel().setPlotType(t.column.colDef.headerName,"numeric"),e.redrawRows()},checked:"numeric"===e.getPlotTypeSelectorModel().getPlotType(t.column.colDef.headerName)},{name:"More Options...",action:function(){e.getTrendlineOptionsView().moreOptionsPopup(t)},checked:!1}]);var f={name:"Display Style",subMenu:[{name:"Custom Markers",action:function(){e.getCustomMarkerView().customMarkerPopup(t)}}]};(m=f.subMenu).unshift.apply(m,p);var v=e.getTitles().slice(e.gridOptions.chartDataMapper.numAttributes);v.push("Values"),v.indexOf(t.column.colDef.headerName)>-1&&i.unshift(f)}var C={name:"Autosize",subMenu:[{name:"Fit this Column to Content",checked:e.getColumnResizedModel().getFitToContentModel().isColumnWidthToContent(t.column.colId),action:function(){e.getColumnResizedModel().getFitToContentModel().setColumnToContent(t.column,!1,!1)}},{name:"Fit all Columns to Content",checked:e.getColumnResizedModel().getFitToContentModel().isAllColumnWidthToContent(),action:function(){e.getColumnResizedModel().getFitToContentModel().setAllColumnsToContent()}},{name:"Fit all Columns to Grid Width",checked:e.getColumnResizedModel().getFitToGridWidthModel().isFitToGridWidth(),action:function(){e.getColumnResizedModel().getFitToGridWidthModel().setFitToGridWidth()}}]};i.splice(n,0,C);var T={name:"Clear Formatting",action:function(){e.getColumnFormattingModel().clearColumnFormatting(t.column.colId),e.getHeaderFormattingView().refreshHeader(),e.redrawRows()}},M=2;if(!isMSTRStatePresentation()){var y={name:"Format",action:function(){if(e.getChartTypeModel().isGridChart()){var o=vitaraJQ(".vitara-header.vitara-grid-header-cell.ag-column-menu-visible",t.context.chartNode);e.getColumnSelectionModel().setSelection(o,t.column,!0)}else e.gridOptions.context.editorInterfaceRef.openEditor("columnformat")}};i.splice(n+M++,0,y)}i.splice(n+M++,0,T),i.splice(n+M,0,"separator");var S=[];if(e.getChartTypeModel().isGridChart()){if(t.column.colDef.isMetric||!t.column.primary||t.column.isRowGroupActive()||e.gridOptions.columnApi.getPivotColumns().length>0||S.push({name:"Group by "+t.column.getColDef().headerName,action:function(){e.getColumnStateMaster().columnRowGroupingModel.groupBy(t.column)}}),isMSTRStatePresentation()||S.push({name:"Manage Column Grouping",action:function(){e.getColumnGroupingView().showView()}}),!isMSTRStatePresentation()&&e.getMetricToRowsModel().isMetricToRows()&&S.push({name:"Manage Metric Grouping",action:function(){e.getMetricGroupingView().showView()}}),"agGroupCellRenderer"===t.column.colDef.cellRenderer?S[0]={name:"Un-Group all columns",action:function(){e.getColumnStateMaster().columnRowGroupingModel.ungroupRows(),e.redrawRows()}}:t.column.isRowGroupActive()&&t.column.primary&&S.unshift({name:"Un-Group by "+t.column.getColDef().headerName,action:function(){e.gridOptions.columnApi.removeRowGroupColumn(t.column)}}),t.column.colDef.isMetric&&"Total"!==t.column.colDef.headerName){var b={};e.getMetricToRowsModel().isMetricToRows()?(b.name="Move to Columns",b.action=function(){e.getMetricToRowsModel().setMetricToColumns(),e.getColumnResizedModel().checkAndApplyResizing()}):(b.name="Move to Rows",b.action=function(){e.getMetricToRowsModel().setMetricToRows(),e.getColumnResizedModel().checkAndApplyResizing()}),i.push(b)}if(!t.column.colDef.isMetric&&"ag-Grid-AutoColumn"!==t.column.colDef.colId){var x={name:"Move to Columns",action:function(){"Metrics"===t.column.colDef.colId?e.getMetricToRowsModel().setMetricToColumns():(e.getColumnStateMaster().columnPivotModel.groupByVisibleAttributes([t.column]),e.getColumnStateMaster().columnPivotModel.addPivotColumn(t.column.colDef.colId))}};i.push(x)}}S.push({name:"Manage Scaling Grouping",action:function(){e.getScalingView().showView()}});var w={name:"Grouping",subMenu:S};if(i.push(w),t.column.colDef.isMetric||i.push("separator"),"ag-Grid-AutoColumn"!==t.column.colId&&"Total"!==t.column.colDef.headerName&&i.push({name:"Hide Column",action:function(){e.getColumnStateMaster().columnShowHideModel.setColumnHidden(t.column.colDef.headerName)}}),t.column.colDef.isMetric){var A=[],G=[];isMSTRStatePresentation()||(i.push({name:"Filter Data",action:function(){e.filter=e.getStateManager().restoreSpecificState("filter"),e.getFilterView().filterViewPopup(e.gridOptions.gridArea,t,!1,!0)}}),A.push({name:"Manage Sorting",action:function(){e.gridOptions.context.editorInterfaceRef.openEditor("advanceSort")}}),G.push({name:"Manage Thresholds",action:function(){e.gridOptions.context.editorInterfaceRef.openEditor("thresholds")}})),A.push({name:"Clear Sorting",action:function(){e.getSortingModel().clearSorting(),e.getSortingModel()._setPseudoState(),e.getHeaderFormattingView().refreshHeader()}}),G.push({name:"Clear Thresholds",action:function(){e.getThresholdModel().clearThresholdModel(),e.redrawRows()}}),i.push({name:"Advance Sorting",subMenu:A}),i.push({name:"Thresholds",subMenu:G})}return i.unshift("pinSubMenu"),i.forEach((function(t){"string"!=typeof t&&(t.name=r.utils.convertStringLanguage(t.name),void 0!==t.subMenu&&t.subMenu.forEach((function(t){t.name=r.utils.convertStringLanguage(t.name)})))})),i},createValueAggregationSubmenu:o,addAgg:n}}})},(t,e,o)=>{function r(t,e){this.contextMenuState=t,this.contextMenu=e}o.r(e),o.d(e,{VitaraGridChartEventListeners:()=>r}),vitaraJQ.extend(r.prototype,{setGridChartEventListener:function(t){var e=t,o=this;return{setEventListeners:function(t,r,n){vitaraJQ(e.gridOptions.gridArea).on("click",".ag-group-contracted",(function(t){vitaraJQ(this).closest(".ag-cell").hasClass("ag-cell-focus")&&vitaraJQ(this).closest(".ag-cell").toggleClass("ag-cell-focus ag-cell-no-focus")})),vitaraJQ(e.gridOptions.gridArea).on("click",".ag-cell",e.gridOptions,(function(o){""==r||r.is(vitaraJQ(this))||(t=0,r.closest(".ag-row").hasClass("ag-row-selected")&&r.closest(".ag-row").removeClass("ag-row-selected")),0==t?(t=1,vitaraJQ(this).closest(".ag-row").hasClass("ag-row-group")||vitaraJQ(this).closest(".ag-row").hasClass("ag-row-selected")?vitaraJQ(this).hasClass("ag-cell-no-focus")&&vitaraJQ(this).toggleClass("ag-cell-focus ag-cell-no-focus"):(vitaraJQ(this).closest(".ag-row").addClass("ag-row-selected"),vitaraJQ(this).toggleClass("ag-cell-focus ag-cell-no-focus"))):(t=0,vitaraJQ(this).toggleClass("ag-cell-focus ag-cell-no-focus"),vitaraJQ(this).closest(".ag-row").toggleClass("ag-row-focus ag-row-no-focus"),vitaraJQ(this).closest(".ag-row").hasClass("ag-row-selected")&&vitaraJQ(this).closest(".ag-row").removeClass("ag-row-selected"),vitaraJQ(this).closest(".ag-row-group").hasClass("ag-row-selected")&&vitaraJQ(this).closest(".ag-row-group").removeClass("ag-row-selected"),o.data.api.forEachNode((function(t){t.isSelected()&&(t.selected=!1)}))),r=vitaraJQ(this),vitaraJQ(e.gridOptions.gridArea).find("#context-menu .vitara-grid-menu-items, #column-menu .vitara-grid-menu-items").html("")})),!e.gridOptions.context.platformContext.isMSTRContextMenuSupported()&&e.gridOptions.context.platformContext.isContextMenuRequired()&&e.gridOptions.gridArea.addEventListener("contextmenu",(function(t){t.preventDefault(),vitaraJQ(e.gridOptions.gridArea).trigger("click"),isMSTRMobile()||(e.getLegacyColumnMenu(o.contextMenuState,o.contextMenu).getGridChartColumnMenu(e).getGridMenuOptions(),e.getLegacyColumnMenu(o.contextMenuState,o.contextMenu).getGridChartColumnMenu(e).toggleCustomContextMenuShow(),e.getLegacyColumnMenu(o.contextMenuState,o.contextMenu).getGridChartColumnMenu(e).positionContextMenu(t))})),vitaraJQ(e.gridOptions.gridArea).on("focus","select",(function(){vitaraJQ(e.gridOptions.gridArea).closest(".vitara-chart-container").each((function(){this.style&&this.style.setProperty("overflow","visible","important")}))})),vitaraJQ(e.gridOptions.gridArea).on("click",".vitara-property-menu button",(function(){if(1!=vitaraJQ(this).data("noaction")){var t=vitaraJQ(this).data("menuitem"),o=vitaraJQ(this).data("submenuitem");null!=o?e.customGridMenuItems[t].menuItems[o].action():e.customGridMenuItems[t].action()}})),vitaraJQ(e.gridOptions.gridArea).on("change",'.vitara-property-menu select, .vitara-property-menu input[type="checkbox"]',(function(){if(1!=vitaraJQ(this).data("noaction")){var t=vitaraJQ(this).data("menuitem"),o=vitaraJQ(this).val();null!=o?e.customGridMenuItems[t].menuItems[o].action():e.customGridMenuItems[t].action()}})),vitaraJQ(e.gridOptions.gridArea).on("click","#context-menu.vitara-grid-menu-container .menu-item button",(function(){if(1!=vitaraJQ(this).data("noaction")){var t=vitaraJQ(this).data("menuitem"),o=vitaraJQ(this).data("submenuitem");null!=o?(e.customGridMenuItems[t].menuItems[o].action(),vitaraJQ(e.gridOptions.gridArea).find("#context-menu .vitara-grid-menu-items").html("")):e.customGridMenuItems[t].action()}})),vitaraJQ(e.gridOptions.gridArea).on("click","#column-menu.vitara-grid-menu-container .menu-item button",(function(){if(1!=vitaraJQ(this).data("noaction")){var t=vitaraJQ(this).data("menuitem"),o=vitaraJQ(this).data("submenuitem");null!=o?(e.customColumnMenuItems[t].menuItems[o].action(),vitaraJQ(e.gridOptions.gridArea).find("#column-menu .vitara-grid-menu-items").html("")):(e.customColumnMenuItems[t].action(),vitaraJQ(e.gridOptions.gridArea).find("#column-menu .vitara-grid-menu-items").html(""))}})),vitaraJQ(e.gridOptions.gridArea).bind("click",(function(){vitaraJQ(e.gridOptions.gridArea).find("#context-menu .vitara-grid-menu-items, #column-menu .vitara-grid-menu-items").html(""),vitaraJQ(".myMenuButton").css("display","")}))}}}})},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){"object"===r(this.style)&&(this.style.cssText=t)}o.r(e),o.d(e,{VitaraGridChartFilterThreshold:()=>n}),vitaraJQ.extend(n.prototype,{getFilterThreshold:function(t){if(t)var e=t;var o=this;function n(t,e){var o=!1;return t&&t.length>0&&t.indexOf(e)>=0&&(o=!0),o}function i(t){var o=null;t.node.group&&null!=t.node.field&&e.groupLevelAgg.hasOwnProperty(t.colDef.colId)&&e.groupLevelAgg[t.colDef.colId].hasOwnProperty(t.node.field)?o=e.groupLevelAgg[t.colDef.colId][t.node.field]:t.node.group&&e.groupLevelAgg.hasOwnProperty(t.colDef.colId)&&!e.groupLevelAgg[t.colDef.colId].hasOwnProperty(t.node.field)?o=null!=t.node.key&&"Grand Total"!=t.node.key?"":e.groupLevelAgg[t.colDef.colId][e.groupLevelAgg.grandTotal]:void 0!==t.column.aggFunc&&(o=t.column.aggFunc);var r="",n="",i="",a="",l="",s=0,u=t.node.allLeafChildren.length;if(u>0){n=t.node.allLeafChildren[0].data[t.colDef.field.replace(".rawValue","")].rawValue,l=a=t.node.allLeafChildren[0].data[t.colDef.field.replace(".rawValue","")].rawValue,i=t.node.allLeafChildren[u-1].data[t.colDef.field.replace(".rawValue","")].rawValue;for(var d=0;d<t.node.allChildrenCount;d++)if(""!==t.node.allLeafChildren[d].data[t.colDef.field.replace(".rawValue","")].value){var c=t.node.allLeafChildren[d].data[t.colDef.field.replace(".rawValue","")].rawValue;s+=c;t.node.allLeafChildren[d].data[t.colDef.field.replace(".rawValue","")].value;a>c&&(a=c),l<c&&(l=c)}}if(r="",t.node.group)if("first"==o)r=n;else if("last"==o)r=i;else if("max"==o)r=l;else if("min"==o)r=a;else if("avg"==o)r=s/(1*u);else if("sum"==o)r=s;else if("count"==o)r=u,"Grand Total"!=t.node.key&&null!=t.node.key||(r=s);else if("ratio"==o){if(e.ratioOnMetric&&e.ratioOnMetric.hasOwnProperty(t.colDef.colId)&&t.node.group){var h=e.getAggregatedValueforColumn(t,e.ratioOnMetric[t.colDef.colId].Numerator),g=e.getAggregatedValueforColumn(t,e.ratioOnMetric[t.colDef.colId].Denominator);if(h&&g){var p=h/g;r=p=p.toFixed(e.ratioOnMetric[t.colDef.colId].Precision)}else r=""}}else r="";return isNaN(r)?r:parseFloat(r)}function a(t,e){return t+e}function l(t,e,o){return t+e+o}function s(t,o,r,n,i){var l="",s=t.value[0].values,u=e.columnvalues[o],d=a(o,r);if(null!=t&&""!=t&&void 0!==t){if(t.groupId&&"No-Group"!=t.groupId)return"";if("top"===t.condition)n[d]=e.columnuniquevalues[o].reverse().slice(0,s),e.columnuniquevalues[o].reverse();else if("bottom"===t.condition)n[d]=e.columnuniquevalues[o].slice(0,s);else if("toppercentage"===t.condition){var c=u.length*s/100;n[d]=u.reverse().slice(0,Math.ceil(c)),u.reverse()}else if("bottompercentage"===t.condition)c=u.length*s/100,n[d]=u.slice(0,Math.ceil(c));else if("betweenpercentage"===t.condition){var h=s[0],g=s[1],p=Math.floor(u.length*h/100),m=Math.ceil(u.length*g/100);n[d]=u.slice(p,m)}var f=t.icon;void 0!==f&&""!=f&&null!==f&&(l="."+e.gridOptions.id+"-thresholdicon-"+o+"-"+r+":before { font-family: fontello; color: "+t.iconcolor+"; font-size: "+t.iconsetSize+"px; }")}return l}function u(t,o,r){var n=document.getElementById("thresholdColSelect").value,i=(document.getElementById("thresholdId").value,document.getElementById("thresholdFormat").value);if(void 0!==i&&null!=i&&""!=i){var a=document.getElementById("thresholdValue1").value,l=document.getElementById("thresholdValue2").value,s=i,u=[];""!==a&&u.push(Number(a)),""!==l&&u.push(Number(l));var d={thresholdGroupingValue:"No Grouping",thresholdMetricValue:n,thresholdConditionValue:s,valuesArr:u};void 0===r&&(r=e.getFilterModel().createThreshold({},!0)),!function(t,e){t.setThresholdGroup(e.thresholdGroupingValue,!0),t.setThresholdMetric(e.thresholdMetricValue,!0),t.setThresholdSource(e.thresholdMetricValue,!0),t.setThresholdCondition(e.thresholdConditionValue,!0),t.setThresholdValues(e.valuesArr,!0),t.checkout()}(r,d),e.getFilterView().manageThresholdClick(t,o),e.gridOptions.api.onFilterChanged()}}function d(t,e){document.getElementById("thresholdValue1");var o=document.getElementById("thresholdValue2"),r=document.getElementById("thresholdValues"),n=document.getElementById("thresholdColorPickers"),i=document.getElementById("iconsets");r.style.display="none",n.style.display="none",o.style.display="none",i.style.display="none","Icon Sets"==t?e||(i.style.display="block"):"Between"==t||"Between Percentage"==t?(r.style.display="block",e||(n.style.display="block"),o.style.display="block"):"Above Average"==t||"Below Average"==t||"Min"==t||"Max"==t||"Last"==t||"First"==t?(r.style.display="none",e||(n.style.display="block"),o.style.display="block"):""!=t&&(r.style.display="block",e||(n.style.display="block"),o.style.display="none")}function c(){var t="";t+="<tr>",t+='<td width="50%"><strong>Condition</strong></td>',t+='<td width="50%"><strong>Action</strong></td>',t+="</tr>";var o=e.getFilterModel().filterThresholdByMetric(document.getElementById("thresholdColSelect").value);return o.length>0?o.forEach((function(e){t+="<tr>",t+="<td>"+e.getThresholdCondition()+"</td>",t+="<td>",t+='<a data-type="threshold" data-colid="'+e.getThresholdID()+'" data-thresholdid="'+e.getThresholdID()+'" class="thresholdEdit" href="javascript:void(0);">Edit</a>',t+="/",t+='<a data-type="threshold" data-colid="'+e.getThresholdID()+'" data-thresholdid="'+e.getThresholdID()+'" class="thresholdDelete" href="javascript:void(0);">Delete</a></td>',t+="</tr>"})):(t+="<tr>",t+='<td colspan="2">',t+="No filter(s) found",t+="<td>",t+="</tr>"),t}function h(){vitaraJQ(".manage-thresholds").hide(),vitaraJQ(".add-edit-thresholds").show(),vitaraJQ("#thresholdButton").show(),vitaraJQ("#addNewThresholds").hide(),vitaraJQ("#okThresholds").hide(),vitaraJQ("#cancelThresholdsFilter").show()}function g(t){var e=c();vitaraJQ(".manage-thresholds table").html(e),vitaraJQ("#thresholdColSelect").find(":selected").attr("value"),vitaraJQ(t).find(".modal-header1").hide()}function p(t,e){return t-e}return{applyThreshold:function(t,o,s,u){var d=Object.keys(e.groupingOnAttribute).length,c=o.value;"object"===r(c)&&null!==c&&void 0!==c.value&&(c=Math.round(100*c.value)/100);var h="",g="";function p(t,o){return"No-Group"===o?Math.max.apply(null,e.columnvalues[t]):Math.max.apply(null,e.groupValues[t][o])}function m(t,o){return"No-Group"===o?Math.min.apply(null,e.columnvalues[t]):Math.min.apply(null,e.groupValues[t][o])}var f=function(t,r,n,i){var a=n;if("row"===t.target)return{style:{"background-color":r.background,row:!0}};var l=r,s=t.icon,d="",h="";for(var g in l)a[g]="color"==g?t.iconcolor:l[g];if(y=r.color,"dark"==e.themeFormat&&"#222222"==y?y="#cccccc":"dark"!=e.themeFormat&&"#cccccc"==y&&(y="#222222"),void 0!==s&&""!=s&&null!==s){var f=e.gridOptions.id+"-thresholdicon-"+o.colDef.colId+"-"+x;d="threshold-avail "+e.icons[s][0]+" "+f,"bar"==t.icon&&(h='<div class="div-outer-div"><div class="div-percent-bar" style="width:100%; '+function(t,e,o){var r,n;o<0?(r=t-(o*=-1),n=t):(r=t,n=t+o);var i=" background: #9c9e9f; /* Old browsers */ ";return i+=" background: -moz-linear-gradient(left,  transparent 0%, transparent "+r+"%, "+e+" "+r+"%, "+e+" "+n+"%, transparent "+n+"%, transparent 100%); /* FF3.6+ */",i+=" background: -webkit-gradient(linear, left top, right top, color-stop(transparent 0%, transparent "+r+"%, "+e+" "+r+"%, "+e+" "+n+"%, transparent "+n+"%, transparent 100%)); /* Chrome,Safari4+ */",i+=" background: -webkit-linear-gradient(left,  transparent 0%, transparent "+r+"%, "+e+" "+r+"%, "+e+" "+n+"%, transparent "+n+"%, transparent 100%); /* Chrome10+,Safari5.1+ */",i+=" background: -o-linear-gradient(left,  transparent 0%, transparent "+r+"%, "+e+" "+r+"%, "+e+" "+n+"%, transparent "+n+"%, transparent 100%); /* Opera 11.10+ */",(i+=" background: -ms-linear-gradient(left,  transparent 0%, transparent "+r+"%, "+e+" "+r+"%, "+e+" "+n+"%, transparent "+n+"%, transparent 100%); /* IE10+ */")+" filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="+e+", endColorstr=transparent ,GradientType=1 ); /* IE6-9 */"}(function(t,e){var o=m(t.colDef.colId,e),r=p(t.colDef.colId,e);if(o>=0)return 0;if(r<0)return 100;var n=r-o;return 100*Math.abs(o)/n}(o,t.groupId),t.iconcolor,function(t,e,o){var r=m(e.colDef.colId,o);return 100*t/(p(e.colDef.colId,o)-r)}(c,o,t.groupId))+" "+("center"===u?"":"float:"+u)+';">{{value}}</div></div>'),void 0!==O&&""!=O&&null!==O&&(d+=" vitara-icon-set "+t.icon),void 0!==_&&""!=_&&null!==_&&"yes"==_&&(d+=" hide-text")}return{html:h,style:a,className:d,textColor:y}};if(e.ratioOnMetric&&e.ratioOnMetric.hasOwnProperty(o.colDef.colId)&&o.node.group){var v=e.getAggregatedValueforColumn(o,e.ratioOnMetric[o.colDef.colId].Numerator),C=e.getAggregatedValueforColumn(o,e.ratioOnMetric[o.colDef.colId].Denominator);if(v&&C){var T=v/C;T=T.toFixed(e.ratioOnMetric[o.colDef.colId].Precision),c=parseFloat(T)}else c=null}if(void 0!==c&&""!==c&&null!=c){var M={},y="",S=e.filterThresholdArrays.threshold,b=null;for(var x in t){var w=t[x];if(""!=w&&void 0!==w&&null!=w&&"object"===r(w.value)){if(d>1&&!o.node.group&&("No-Group"!==t[x].groupId||void 0!==o.node.field))continue;var A=w.value,G=w.formatting,V=A.length,O=(w.icon,w.iconsetSize),_=w.iconOnly,E=!1,D=a(o.colDef.colId,x),F=l(o.colDef.colId,w.groupId,x),I=o.node.group;if(I&&(!o.node.field||o.node.field.toLowerCase()!==w.groupId))continue;switch(w.condition){case"equalto":for(var k=0;k<V;k++)I?(R=i(o))==A[k].values&&(E=!0):o.node.group||c!=A[k].values||(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M));break;case"between":for(k=0;k<V;k++)I?(R=i(o))>=A[k].values[0]&&R<=A[k].values[1]&&(E=!0):!o.node.group&&c>=A[k].values[0]&&c<=A[k].values[1]&&(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M));break;case"greaterthan":for(k=0;k<V;k++)I?(R=i(o))>A[k].values&&(E=!0):!o.node.group&&c>A[k].values&&(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M));break;case"lessthan":for(k=0;k<V;k++)I?(R=i(o))<A[k].values&&(E=!0):!o.node.group&&c<A[k].values&&(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M));break;case"greaterthanequalto":for(k=0;k<V;k++)I?(R=i(o))>=A[k].values&&(E=!0):!o.node.group&&c>=A[k].values&&(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M));break;case"lessthanequalto":for(k=0;k<V;k++){var R;I?(R=i(o))<=A[k].values&&(E=!0):!o.node.group&&c<=A[k].values&&(E=!0),E&&(b=f(w,G[A[k].formatting].styleObject,M))}break;case"top":case"bottom":for(k=0;k<V;k++)I?E=n(S[F],i(o)):o.node.group||(E=n(S[D],c)),E&&(M={},b=f(w,G[A[k].formatting].styleObject,M));break;case"aboveaverage":for(k=0;k<V;k++){if(I)E=n(S[F],i(o));else if(!o.node.group){var P=e.columnaggregates[o.colDef.colId].total/e.columnvalues[o.colDef.colId].length;E=c>P}E&&(M={},b=f(w,G[A[k].formatting].styleObject,M))}break;case"belowaverage":for(k=0;k<V;k++)I?E=n(S[F],i(o)):o.node.group||(P=e.columnaggregates[o.colDef.colId].total/e.columnvalues[o.colDef.colId].length,E=c<P),E&&(M={},b=f(w,G[A[k].formatting].styleObject,M));break;case"toppercentage":for(k=0;k<V;k++){var B,L;if(E=!1,I)if(null==S[F])E=!1;else{B=S[F].length,L=S[F][B-1];var N=i(o);N>=L&&(E=!0)}else o.node.group||(S[D]?(B=S[D].length,L=S[D][B-1],c>=L&&(E=!0)):E=!1);E&&(M={},b=f(w,G[A[k].formatting].styleObject,M))}break;case"bottompercentage":for(k=0;k<V;k++){var H,J;E=!1,I?null==S[F]?E=!1:(N=i(o),H=S[F].length,N<=(J=S[F][H-1])&&(E=!0)):S[D]?(H=S[D].length,J=S[D][H-1],c<=J&&(E=!0)):E=!1,E&&(M={},b=f(w,G[A[k].formatting].styleObject,M))}break;case"betweenpercentage":if(E=!1,I)if(null==S[F])E=!1;else{var Q=S[F].indexOf(i(o));E=Q>-1}else!o.node.group&&S[D]&&(E=(Q=S[D].indexOf(c))>-1);E&&(M={},b=f(w,G[A[0].formatting].styleObject,M))}}}if(b&&(M=b.style,h=b.className,g=b.html,y=b.textColor),"style"==s)return null!==M&&""!==M&&("dark"==e.themeFormat&&"#222222"==M.color?M.color="#cccccc":"dark"!=e.themeFormat&&"#cccccc"==M.color&&(M.color="#222222")),M;if("class"==s)return h;if("html"==s)return[g,y];if("all"==s)return null!==M&&""!==M&&("dark"==e.themeFormat&&"#222222"==M.color?M.color="#cccccc":"dark"!=e.themeFormat&&"#cccccc"==M.color&&(M.color="#222222")),[M,h,g,y]}},getAggregatedCellValue:i,findElementsMatchingFilterCondition:function(){if(void 0!==e.filter[0])for(var t in e.filter[0]){var o=e.filter[0][t];for(var r in o)null!=o[r]&&s(o[r],t,r,e.filterThresholdArrays.filter)}},findElementsMatchingFThresholdCondition:function(){if(void 0!==e.thresholds[0]){var t="";for(var r in e.thresholds[0]){var n=e.transformGroupedColumnDefintionToLinear().filter((function(t){return t.headerName==r}));if(!n||!n[0]||n[0].colId==n[0].headerName){var i=e.thresholds[0][r];for(var a in i)t+=s(i[a],r,a,e.filterThresholdArrays.threshold)}}o.style&&(o.style.innerHTML+=t,vitaraJQ(e.gridOptions.gridArea).append(o.style))}},computeGroupConditionalValues:function(){var t="",r={},n=function(t,o){if(e.groupValues[t]){var r=e.groupValues[t][o];if(r&&r.length>0)return r.reduce((function(t,e){return t+e}))/r.length}return null};if(void 0!==e.thresholds[0])for(var i in e.thresholds[0]){var a=e.transformGroupedColumnDefintionToLinear(),s=a.filter((function(t){return t.headerName==i}));if(!s||!s[0]||s[0].colId==s[0].headerName){var u=e.thresholds[0][i];for(var d in u){var c=u[d],h=l(i,c.groupId,d),g=e.filterThresholdArrays.threshold,m=(s=a.filter((function(t){return t.headerName==c.colDisplayName})))[0].colId;if(null!=c&&""!=c&&void 0!==c&&"No-Group"!=c.groupId){if(!e.groupValues[m][c.groupId])continue;switch(c.condition){case"equalto":case"between":case"greaterthan":case"lessthan":case"greaterthanequalto":case"lessthanequalto":g[h]=e.groupValues[m][c.groupId];break;case"top":g[h]=e.groupValues[m][c.groupId].sort(p).reverse().slice(0,c.value[0].values);break;case"bottom":g[h]=e.groupValues[m][c.groupId].sort(p).slice(0,c.value[0].values);break;case"toppercentage":var f=e.groupValues[m][c.groupId].length*c.value[0].values/100,v=e.groupValues[m][c.groupId].sort(p).reverse().slice(0,Math.ceil(f));g[h]=v.filter((function(t,e,o){return e==o.indexOf(t)}));break;case"bottompercentage":f=e.groupValues[m][c.groupId].length*c.value[0].values/100,v=e.groupValues[m][c.groupId].sort(p).slice(0,Math.ceil(f)),g[h]=v.filter((function(t,e,o){return e==o.indexOf(t)}));break;case"betweenpercentage":var C=c.value[0].values[0],T=c.value[0].values[1]-c.value[0].values[0],M=Math.floor(e.groupValues[m][c.groupId].length/100*C),y=Math.ceil(e.groupValues[m][c.groupId].length/100*T);g[h]=e.groupValues[m][c.groupId].sort(p).slice(M,M+y);break;case"aboveaverage":var S=n(m,c.groupId);g[h]=e.groupValues[m][c.groupId].filter((function(t){return t>S}));break;case"belowaverage":S=n(m,c.groupId),g[h]=e.groupValues[m][c.groupId].filter((function(t){return t<S}))}var b=c.icon;void 0!==b&&""!=b&&null!==b&&(t+="."+e.gridOptions.id+"-thresholdicon-"+i+"-"+d+":before { font-family: fontello; color: "+c.iconcolor+"; font-size: "+c.iconsetSize+"px; }"),g[h]&&g[h].length>0&&(r[i]||(r[i]=[]),r[i].push(d))}}}}return o.style&&(o.style.innerHTML+=t,vitaraJQ(e.gridOptions.gridArea).append(o.style)),r},computeFilter:u,getThresholdHtml:c,prepareFilterState:function(t){if(void 0!==t[0]){if(t.length>1||null==t[0]){var o=e.filter,r=[];for(var n in r[0]={},t)if(null!=(o=t[n])&&o.length>0)for(var i in o)if(""!=(l=o[i])&&void 0!==l&&null!=l){var a=l.colDisplayName.toLowerCase();void 0===r[0][a]&&(r[0][a]=[]),r[0][a][r[0][a].length]=l}t=r}else if(void 0!==t[0].colDisplayName){for(var n in o=e.filter,(r=[])[0]={},t)if(null!=(o=t[n])&&o.length>0)for(var i in o){var l;""!=(l=o[i])&&void 0!==l&&null!=l&&(a=l.colDisplayName.toLowerCase(),void 0===r[0][a]&&(r[0][a]=[]),r[0][a][r[0][a].length]=l)}t=r}for(var a in t[0])0==e.defaultColumnDef.filter((function(t){return t.colId==a})).length&&(t[0][a]=[])}return t},checkFilter:function(t,o,r,n,i,a,l){t.addEventListener("click",(function(){var t=void 0,o=document.getElementById("thresholdId").value;""!==o&&(t=e.getFilterModel().filterThresholdById(o)[0]),u(i,l,t),e.getHeaderFormattingView().refreshHeader()})),vitaraJQ(a).off("click",".thresholdEdit").on("click",".thresholdEdit",(function(){var t=vitaraJQ(this).data("thresholdid"),o=e.getFilterModel().filterThresholdById(t)[0];if(void 0===o)return!1;vitaraJQ("#colId").val(o.getThresholdMetric()),vitaraJQ("#thresholdId").val(t),vitaraJQ("#thresholdFormat").val(o.getThresholdCondition());var r=o.getThresholdValues();return 1===r.length?vitaraJQ("#thresholdValue1").val(r[0]):(vitaraJQ("#thresholdValue1").val(r[0]),vitaraJQ("#thresholdValue2").val(r[1])),d(o.getThresholdCondition(),!0),h(),!1})),vitaraJQ(a).off("click",".thresholdDelete").on("click",".thresholdDelete",(function(){var t=vitaraJQ(this).data("thresholdid");return e.getFilterModel().deleteThresholdById(t),vitaraJQ(this).closest("tr").remove(),g(a),e.gridOptions.api.onFilterChanged(),!1}))},refreshManageThreshold:g,getThresholdColumns:function(t,o){var r="";for(var n in e.defaultColumnDef){var i=e.defaultColumnDef[n];if(null!=i&&""!=i&&void 0!==i&&(i.isMetric||o)){var a="";null!==t&&i.headerName===t.column.colDef.headerName&&(a=' selected="selected"'),r+='<option value="'+i.colId+'"'+a+">",r+=i.headerName,r+="</option>"}}return r},getGroupedColumnsThreshold:function(){var t="";for(var o in e.groupingOnAttribute)t+='<option value="'+o+'">',t+=e.groupingOnAttribute[o],t+="</option>";return t},addThresholdClick:h,getThresholdKey:a,checkThresholds:d,formThreshold:function(t,o,r,n,i,a,l,s,u,d,c){var h={};if(null===s){var g=e.defaultColumnDef.filter((function(t){return document.getElementById("thresholdColSelect").value==t.colId}));h.colName=g[0].headerName}else h.colDisplayName=s.column.colDef.headerName,h.colName=h.colDisplayName;if(h.condition=t,h.conditionName=o,h.value=[],h.value[0]={},null!=c&&(h.groupId=c),null!=u&&(h.iconsetSize=u),null!=d&&""!==d&&(h.iconOnly=d),void 0!==n&&""!==n&&null!==n&&(h.icon=n,h.iconcolor=i),Object.keys(r).length>0&&(h.value[0].formatting=0,h.formatting=[],h.formatting[0]={},h.formatting[0].styleObject=r),"between"==t||"betweenpercentage"==t){if(""==l)return;h.value[0].values=[],h.value[0].values[0]=a,h.value[0].values[1]=l}else"aboveaverage"!=t&&"belowaverage"!=t&&(h.value[0].values=a);return h}}}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraStateManager:()=>n});var r=o(242),n=function(t){var e=this;e.state={},e.allowRestore=!0,e.gridOptions=t.getGridOptions(),e.gridContext=t,e.versionNumber="4.7.1",this.saveVersion=function(){e.state.version=e.versionNumber,e._saveState()},this.restoreSpecificState=function(t){return e._restoreState(t),e.state[t]},this.saveSpecificState=function(t){var o=t.getStateRepresentation();if(0===Object.keys(o).length)console.error("[StateManager] Recieved empty dictionary");else{var r=Object.keys(o)[0],n=o[r];e.state[r]=n,e._saveState()}},this._saveState=function(){e.allowRestore=!0,e.gridOptions&&e.gridOptions.saveCallback(JSON.stringify(e.state))},this._getVersionFromState=function(t){return t.lastSaveInfo&&t.lastSaveInfo.version?t.lastSaveInfo.version.slice(0,5):t.version},this.makeBackwardsCompatible=function(t){return void 0!==t&&void 0!==t.columnState&&e._getVersionFromState(t)!==e.versionNumber},this._restoreState=function(){if(e.allowRestore)try{e.allowRestore=!1,e.state=e.gridOptions.fetchCallback.fetch(),e.makeBackwardsCompatible(e.state)&&e.getCompatibilityChain().play(),void 0!==e.state&&""!==e.state||(e.state={}),e.state.version!==e.versionNumber&&e.saveVersion()}catch(t){e.state={}}},this._globalRestore=function(){}};vitaraJQ.extend(n.prototype,{getCompatibilityChain:function(){return this.preStampStateCompatibility||(this.preStampStateCompatibility=new r.VitaraGridChartBackwardCompatibilityChain(this)),this.preStampStateCompatibility}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartBackwardCompatibilityChain:()=>v});var r=o(243),n=o(244),i=o(245),a=o(246),l=o(247),s=o(248),u=o(249),d=o(250),c=o(251),h=o(252),g=o(253),p=o(254),m=o(255),f=o(256),v=function(t){var e=this;e.compatibiltyHelpers=[],e.currStateVersion="0.0",e.stateContext=t,this.getCurrGridVersion=function(){return e.stateContext.gridContext.customGridOptions.context.getVersion()},this.setCurrStateVersion=function(t){e.currStateVersion=t},this.getCurrStateVersion=function(){return e.currStateVersion},this.getState=function(){return e.stateContext.state},this.getStateKey=function(t){return e.stateContext.state.lastSaveInfo&&e.stateContext.state.lastSaveInfo[t]?e.stateContext.state.lastSaveInfo[t].slice(0,5):e.stateContext.state[t]},this.getStateVersion=function(){return e.stateContext.state.lastSaveInfo&&e.stateContext.state.lastSaveInfo.version?e.stateContext.state.lastSaveInfo.version.slice(0,5):e.getStateKey("version")},this.populateCompatibilityHelpers=function(){[this.getPreStampStateCompatibility(),this.get4_0StateCompatibility(),this.get4_1StateCompatibility(),this.get4_2StateCompatibility(),this.get4_2_1StateCompatibility(),this.get4_3StateCompatibility(),this.get4_4StateCompatibility(),this.get4_4_1StateCompatibility(),this.get4_4_2StateCompatibility(),this.get4_5StateCompatibility(),this.get4_5_1StateCompatibility(),this.get4_7_1StateCompatibility(),this.get5_2_2StateCompatibility(),this.get5_2_8StateCompatibility()].forEach((function(t){e.registerCompatibilityHelper(t)}))},this.registerCompatibilityHelper=function(t){e.compatibiltyHelpers.push(t)},this.cleaner=function(t){var o=this;o.skipTransition=!1,this.beforeCleanup=function(){var r=e._isVersionHigher(e.getCurrStateVersion(),t.getVersion());o.skipTransition=r>-1},this.cleanUp=function(){t.startCompatibility()},this.afterCleanUp=function(){o.setCurrStateVersion(t.getVersion()),e.stateContext.state.version=t.getVersion()},o.beforeCleanup(),o.skipTransition||(o.cleanUp(),o.afterCleanUp())},this.startCleaning=function(){e.compatibiltyHelpers.forEach((function(t){e.cleaner(t)}))},this.play=function(){var t=e.getStateVersion();void 0!==t&&t.split(".").length-1!=3||(t="0.0"),e.setCurrStateVersion(t),e.populateCompatibilityHelpers(),e.startCleaning()},this._sortCompatibilityHelpers=function(){},this._isVersionHigher=function(t,e){if(t===e)return 0;for(var o=t.split("."),r=e.split("."),n=Math.min(o.length,r.length),i=0;i<n;i++){if(parseInt(o[i])>parseInt(r[i]))return 1;if(parseInt(o[i])<parseInt(r[i]))return-1}return o.length>r.length?1:o.length<r.length?-1:0}};vitaraJQ.extend(v.prototype,{getPreStampStateCompatibility:function(){return this.preStampStateCompatibility||(this.preStampStateCompatibility=new r.VitaraGridChartPreStampStateCompatibility(this.stateContext)),this.preStampStateCompatibility},get4_0StateCompatibility:function(){return this.on4_0StateCompatibility||(this.on4_0StateCompatibility=new n.VitaraGridChart4_0Compatibility(this.stateContext)),this.on4_0StateCompatibility},get4_1StateCompatibility:function(){return this.on4_1StateCompatibility||(this.on4_1StateCompatibility=new i.VitaraGridChart4_1Compatibility(this.stateContext)),this.on4_1StateCompatibility},get4_2StateCompatibility:function(){return this.on4_2StateCompatibility||(this.on4_2StateCompatibility=new a.VitaraGridChart4_2Compatibility(this.stateContext)),this.on4_2StateCompatibility},get4_2_1StateCompatibility:function(){return this.on4_2_1StateCompatibility||(this.on4_2_1StateCompatibility=new l.VitaraGridChart4_2_1Compatibility(this.stateContext)),this.on4_2_1StateCompatibility},get4_3StateCompatibility:function(){return this.on4_3StateCompatibility||(this.on4_3StateCompatibility=new s.VitaraGridChart4_3Compatibility(this.stateContext)),this.on4_3StateCompatibility},get4_4StateCompatibility:function(){return this.on4_4StateCompatibility||(this.on4_4StateCompatibility=new u.VitaraGridChart4_4Compatibility(this.stateContext)),this.on4_4StateCompatibility},get4_4_1StateCompatibility:function(){return this.on4_4_1StateCompatibility||(this.on4_4_1StateCompatibility=new d.VitaraGridChart4_4_1Compatibility(this.stateContext)),this.on4_4_1StateCompatibility},get4_4_2StateCompatibility:function(){return this.on4_4_2StateCompatibility||(this.on4_4_2StateCompatibility=new c.VitaraGridChart4_4_2Compatibility(this.stateContext)),this.on4_4_2StateCompatibility},get4_5StateCompatibility:function(){return this.on4_5StateCompatibility||(this.on4_5StateCompatibility=new h.VitaraGridChart4_5Compatibility(this.stateContext)),this.on4_5StateCompatibility},get4_5_1StateCompatibility:function(){return this.on4_5_1StateCompatibility||(this.on4_5_1StateCompatibility=new g.VitaraGridChart4_5_1Compatibility(this.stateContext)),this.on4_5_1StateCompatibility},get4_7_1StateCompatibility:function(){return this.on4_7_1StateCompatibility||(this.on4_7_1StateCompatibility=new p.VitaraGridChart4_7_1Compatibility(this.stateContext)),this.on4_7_1StateCompatibility},get5_2_2StateCompatibility:function(){return this.on5_2_2StateCompatibility||(this.on5_2_2StateCompatibility=new m.VitaraGridChart5_2_2Compatibility(this.stateContext)),this.on5_2_2StateCompatibility},get5_2_8StateCompatibility:function(){return this.on5_2_8StateCompatibility||(this.on5_2_8StateCompatibility=new f.VitaraGridChart5_2_8Compatibility(this.stateContext)),this.on5_2_8StateCompatibility}})},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.r(e),o.d(e,{VitaraGridChartPreStampStateCompatibility:()=>n});var n=function(t){var e=this;e.currVersionNumber="4.0.0",e.stateContext=t,this.columnStateMasterCompatibility=function(){var t=e.stateContext.state.columnState,o=!1;void 0!==t&&t.forEach((function(t){var r=e._headerIdMapper(t.colId,!0);void 0!==r&&(t.colId=r),null!==t.rowGroupIndex&&(o=!0)}));var r={};if(o){r.colId="ag-Grid-AutoColumn",r.hide=!1,r.aggFunc=null;var n=e.stateContext.state.groupedColumnWidth;void 0===n&&(n=200),r.width=n,r.pivotIndex=null;var i=e.stateContext.state.pinColumn["ag-Grid-AutoColumn"];void 0===i&&(i=null),r.pinned=i}0!==Object.keys(r).length&&t.unshift(r),e.stateContext.state.columnState=t},this.thresholdsUpdate=function(){var t=e.stateContext.state.thresholds,o=[],r={circle:"Circle",square:"Square",directionup:"Arrow Up",directiondown:"Arrow Down",directionleft:"Arrow Left",directionright:"Arrow Right",bar:"Bars"};void 0!==t&&0!==t.length&&(t.forEach((function(t){for(var n=Object.keys(t),i=0;i<n.length;i++){var a=n[i];e.stateContext.gridContext.gridOptions.interface.getTitles().indexOf(e._headerIdMapper(a))>-1&&t[a].forEach((function(t){if(null!==t){var n={};n.ID=e._thresholdIDGenerator();var i=e._headerIdMapper(t.groupId);void 0===i&&(i="No Grouping"),void 0!==t.groupTarget&&(i=e._headerIdMapper(t.groupTarget)),n.groupTarget=i,n.metric=e._headerIdMapper(t.colName.toLowerCase()),n.condition=t.conditionName;var a=t.target;a=void 0===a?"Cell":a[0].toUpperCase()+a.slice(1,a.length),n.formatTarget=a,n.formatColor=t.formatting[0].styleObject.color,n.backgroundColor=t.formatting[0].styleObject.background,void 0!==t.value[0].values&&(Array.isArray(t.value[0].values)?n.values=t.value[0].values:n.values=[t.value[0].values]),n.icon=r[t.icon],n.iconColor=t.iconcolor;var l=parseInt(t.iconsetSize);isNaN(l)&&(l="small"===t.iconsetSize?9:"medium"===t.iconsetSize?12:16),n.iconSize=l,n.iconOnly="yes"===t.iconOnly,o.push(n)}}))}})),e.stateContext.state.thresholds=o)},this.sortUpdate=function(){var t=e.stateContext.state.sortModel,o=[];t.forEach((function(t){o.push({colId:e._headerIdMapper(t.colId),sort:t.sort})})),e.stateContext.state.sortModel=o},this.aggregationUpdate=function(){var t=this;t.key="aggregationModel",t.newObject={},this.getGroupColumns=function(){var t=e.stateContext.state.columnState,o=[];return t.forEach((function(t){var e=t.rowGroupIndex;null!=e&&(o[e]=t.colId)})),o},this.getClearAggregation=function(){var t=[];if(void 0!==e.stateContext.state.clearValueAgg){var o=e.stateContext.state.clearValueAgg;Object.keys(o).forEach((function(r){o[r]&&t.push(e._headerIdMapper(r))}))}else if(void 0!==e.stateContext.state.metricValueAgg){var r=e.stateContext.state.metricValueAgg;t=e._getColumns("metrics").slice(),Object.keys(r).forEach((function(o){void 0!==r[o]&&null!==r[o]&&t.splice(t.indexOf(e._headerIdMapper(o)),1)}))}else e.stateContext.state.columnState.forEach((function(e){null===e.aggFunc&&t.push(e.colId)}));if(void 0!==e.stateContext.state.otherColumnAgg){var n=e.stateContext.state.otherColumnAgg[0],i=t.slice();t.forEach((function(t){var o=n[e._headerIdMapper(t,!1)];void 0!==o&&""!==o&&i.splice(i.indexOf(t),1)})),t=i.slice()}return t},this.getGroupingLevels=function(){var o={},n=e.stateContext.state.metricValueAgg;return t.groupColumns.forEach((function(i){var a=e.stateContext.gridContext.gridOptions.interface,l=a.getTitles(),s=l.slice(a.getNumAttributes(),l.length);o[i]={},s.forEach((function(a){if(-1===t.clearAggregation.indexOf(a)){var l=void 0,s=e.stateContext.state.otherColumnAgg[0];if("string"==typeof n[e._headerIdMapper(a,!1)])l=n[e._headerIdMapper(a,!1)];else if(void 0===s[e._headerIdMapper(a,!1)]||""===s[e._headerIdMapper(a,!1)])void 0===n||void 0===n[e._headerIdMapper(a,!1)]||null===n[e._headerIdMapper(a,!1)]?null===(l=e._extractPropertyFromColumnState("colId",a,"aggFunc"))&&(l=void 0,t.clearAggregation.push(a)):l=n[e._headerIdMapper(a,!1)];else if("string"==typeof s[e._headerIdMapper(a,!1)])l=null;else if("object"===r(s[e._headerIdMapper(a,!1)])){var u=s[e._headerIdMapper(a,!1)],d=Object.keys(u);l="sum";for(var c=0;c<d.length;c++){var h=d[c];if(e._headerIdMapper(h.toLowerCase())===i){l=null;break}}}o[i][a]=l}}))})),o},this.createModel=function(){t.groupColumns=t.getGroupColumns(),t.clearAggregation=t.getClearAggregation();var o=t.getGroupingLevels();o.clearAggregation=t.clearAggregation,e.stateContext.state.aggregationModel=o},t.createModel()},this.chooseColumnUpdate=function(){var t=e.stateContext.state.otherColumnAgg;if(void 0!==t){t=t[0];var o=Object.keys(t),n={};o.length>0&&o.forEach((function(o){var i=t[o];if(""!==i){var a={};if("string"==typeof i){var l=e._headerIdMapper(i.toLowerCase()),s=e.stateContext.state.aggregationModel.groupColumns.slice();s.push("No Grouping"),s.forEach((function(t){a[t]=l}))}else"object"===r(i)&&Object.keys(i).forEach((function(t){a[e._headerIdMapper(t.toLowerCase())]=e._headerIdMapper(i[t])}));n[e._headerIdMapper(o)]=a}})),e.stateContext.state.chooseColumn=n}},this.themeFormattingUpdate=function(){var t=this;t.key="themeFormatting",this.headerBodyFlatUpdate=function(){var t={headerStyles:{},bodyStyles:{}},o=e.stateContext.state,r=t.headerStyles,n=t.bodyStyles;return n.fontWeight="normal",1===o.bodyFontBold&&(n.fontWeight="bold"),n.fontStyle="normal",1===o.bodyFontItalic&&(n.fontStyle="italic"),n.textDecoration="none",1===o.bodyFontUnderline&&(n.textDecoration="underline"),1===o.bodyFontColor&&(n.color=o.bodyFontColor),void 0!==o.bodyFontAlignment&&(n.textAlign=o.bodyFontAlignment),void 0!==o.bodyFontSize&&(n.fontSize=o.bodyFontSize),r.fontWeight="normal",1===o.headerFontBold&&(r.fontWeight="bold"),r.fontStyle="normal",1===o.headerFontItalic&&(r.fontStyle="italic"),r.textDecoration="none",1===o.headerFontUnderline&&(r.textDecoration="underline"),void 0!==o.headerFontColor&&(r.color=o.headerFontColor),void 0!==o.headerFontAlignment&&(r.textAlign=o.headerFontAlignment),void 0!==o.headerFontSize&&(r.fontSize=Number(o.headerFontSize),isNaN(r.fontSize)?r.fontSize=25:r.fontSize=Math.trunc(r.fontSize*(96/72))),t},this.headerBodyFormattingUpdate=function(t){var o=t,r=e.stateContext.state[o];if(r=r[0],0===Object.keys(r).length)return{};var n={};return n.fontFamily=r.family,""===n.fontFamily&&(n.fontFamily=void 0),n.fontSize=r.size,""===n.fontSize&&(n.fontSize=Number(n.fontSize)),"headerstyles"===t&&(isNaN(n.fontSize)||(n.fontSize=Math.trunc(96*n.fontSize/72))),n.textAlign=r.align,""===n.textAlign&&(n.textAlign=void 0),n.fontWeight=r.stylebold,!0===n.fontWeight?n.fontWeight="bold":!1===n.fontWeight&&(n.fontWeight="normal"),n.fontStyle=r.styleitalic,!0===n.fontStyle?n.fontStyle="italic":!1===n.fontStyle&&(n.fontStyle="normal"),n.textDecoration=r.styleunderline,!0===n.textDecoration?n.textDecoration="underline":!1===n.textDecoration&&(n.textDecoration="none"),n.color=r.color,n},this.createModel=function(){var o={},r=e.stateContext.state;r.headerstyles&&r.bodyStyles?(o.headerStyles=t.headerBodyFormattingUpdate("headerstyles"),o.bodyStyles=t.headerBodyFormattingUpdate("bodyStyles")):o=t.headerBodyFlatUpdate(),o.headerStyles.height=e.stateContext.state.headerHeight,o.bodyStyles.height=e.stateContext.state.rowHeight,o.bodyStyles.groupedHeight=e.stateContext.state.groupedRowHeight,e.stateContext.state[t.key]=o},t.createModel()},this.columnFormattingModel=function(){var t=this;t.key="columnFormatting",t.stateOBj=e.stateContext.state[t.key],this.headerBodyFormattingUpdate=function(e,o){var r=t.stateObj[e][o],n={};return n.textAlign=r["text-align"],n.fontFamily=r["font-family"],n.color=r.color,n.fontSize=r["font-size"].replace("px",""),n.fontWeight=r["font-weight"],n.fontStyle=r["font-style"],n},this.createModel=function(){if(void 0!==e.stateObj){var o={},r=e.stateObj;Object.keys(r).forEach((function(r){var n=t.headerBodyFormattingUpdate(r,"headerstyles"),i=t.headerBodyFormattingUpdate(r,"bodyStyles"),a=e._headerIdMapper(r);o[a].headerStyles=n,o[a].bodyStyles=i}))}},t.createModel()},this.rowGroupOpenedUpdate=function(){var t={},o=e.stateContext.state.rowGroupOpened;if(void 0!==o){var r=e.stateContext.gridContext.gridOptions.interface.getTitles(),n=[];r.forEach((function(t){n.push(e._fieldNameHelper(t))})),o.forEach((function(e){for(var o=0;o<n.length;o++)if(0===e.indexOf(n[o])){var i=r[o],a=e.slice(r[o].length+1,e.length);void 0===t[i]&&(t[i]=[]),t[i].push(a)}})),e.stateContext.state.rowGroupOpened=t}},this.columnGroupingUpdate=function(){var t=e.stateContext.state.groupedColumns,o=[];void 0!==t&&Array.isArray(t)&&t.forEach((function(t){var r={columns:[]};t.columns.forEach((function(t){r.columns.push(e._headerIdMapper(t))})),r.openColumn=e._headerIdMapper(t.openColumn),r.headerName=t.headerName,o.push(r)})),e.stateContext.state.groupedColumns=o},this.chartTypesUpdate=function(){var t={},o=e.stateContext.state.chartTypes;void 0!==o&&(Object.keys(o[0]).forEach((function(r){var n=e._headerIdMapper(r.toLowerCase());if(n){var i=o[0][r];"bullet"===i.chartType&&(["target","band1","band2","band3"].forEach((function(t){void 0!==i[t]?i[t]=e._headerIdMapper(i[t].toLowerCase()):i[t]=n})),i.band1Agg||(i.band1Agg="min"),i.band2Agg||(i.band2Agg="avg"),i.band3Agg||(i.band3Agg="max")),t[n]=o[0][r]}})),e.stateContext.state.chartTypes=t)},this.deleteIrrelevantKeys=function(){["linkStyles","headerstyles","bodyStyles","pivotedColumns","rowHeight","headerHeight","groupedRowHeight","otherColumnAgg","groupvalues","grandTotals"].forEach((function(t){delete e.stateContext.state[t]}))},this._getColumns=function(t){void 0===t&&(t="all");var o=e.stateContext.gridContext.gridOptions.interface,r=o.getTitles();return"all"===t?r:"attributes"===t?r.slice(0,o.getNumAttributes()):"metrics"===t?r.slice(o.getNumAttributes(),r.length):null},this._headerIdMapper=function(t,o){return void 0===e.headerMap&&void 0===e.idMap&&(e.headerMap=e.stateContext.gridContext.gridOptions.interface.getTitles(),e.idMap=[],e.headerMap.forEach((function(t){e.idMap.push(e._formatNamesHelper(t))}))),"ag-Grid-AutoColumn"===t?t:void 0===o||o?e.headerMap[e.idMap.indexOf(t)]:e.idMap[e.headerMap.indexOf(t)]},this._formatNamesHelper=function(t){return t.replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g,"-").replace(/^(-)+|(-)+$/g,"-").toLowerCase()},this._fieldNameHelper=function(t){return t.replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/? ])+/g,"-").replace(/^(-)+|(-)+$/g,"-")},this._thresholdIDGenerator=function(){return"VCT-"+Math.random().toString(36).toUpperCase().substr(2)},this._extractPropertyFromColumnState=function(t,o,r){for(var n=e.stateContext.state.columnState,i=0;i<n.length;i++)if(n[i][t]===o)return n[i][r]},this.columnFormattingCompatibility=function(){var t=this;t.keyMapper={"font-size":"fontSize","font-family":"fontFamily","text-decoration":"textDecoration","font-style":"fontStyle","font-weight":"fontWeight",color:"color","text-align":"textAlign"},this.first_support=function(){e.stateContext.state},this.hierarchy_support=function(o){var r=Object.keys(o),n={};r.forEach((function(r){void 0!==e._headerIdMapper(r)&&(r=e._headerIdMapper(r),n[r]={},o[r]&&(n[r].headerStyles=t._populateHelper(o[r].header),n[r].bodyStyles=t._populateHelper(o[r].body)))})),e.stateContext.state.columnFormatting=n},this._populateHelper=function(e){var o={};return Object.keys(e).forEach((function(r){o[t.keyMapper[r]]="font-size"===r?Number(e[r].replace("px","")):e[r]})),o},this.createModel=function(){var o=e.stateContext.state.columnFormatting;void 0===o?t.first_support():t.hierarchy_support(o)},t.createModel()},this.columnAutoSizeUpdate=function(){var t={},o={},r=e.stateContext.state.columnAutoSize;if(void 0!==r){o.fitAllColumnsToContent=r.fitAllColumnsToContent,o.fitAllColumnsToGridWidth=r.fitAllColumnsToGridWidth;var n=r.fitThisColumnToContent;o.fitThisColumnToContent={};var i=[];Object.keys(n).forEach((function(t){o.fitThisColumnToContent[e._headerIdMapper(t)]=n[t],n[t]&&i.push(e._headerIdMapper(t))})),e.stateContext.state.fitToGridContent=i,e.stateContext.state.fitToGridWidth=o.fitAllColumnsToGridWidth,t=o,e.stateContext.state.columnResize=t}},this.grandTotalsUpdate=function(){var t=e.stateContext.state.showBottomRows,o={visible:!1,position:"bottom"};"show"!==t&&"1"!==t&&!0!==t||(o.visible=!0),e.stateContext.state.grandTotals=o},this.themeFormatUpdate=function(){var t=e.stateContext.state.themeFormat,o=t;"bootstrap"===t&&(o="fresh"),e.stateContext.state.themeFormat=o},this.dropZonesUpdate=function(){e.stateContext.state.groupingDropZone="volatile",e.stateContext.state.pivotDropZone="volatile"},this.pinColumnUpdate=function(){var t=e.stateContext.state.pinColumn,o={};Object.keys(t).forEach((function(r){o[e._headerIdMapper(r)]=t[r]})),e.stateContext.state.pinColumn=o},this.columnOrderUpdate=function(){var t=e.stateContext.state.columnState,o=[];t.forEach((function(t){o.push(t.colId)})),e.stateContext.state.columnOrder=o},this.filterUpdate=function(){var t=e.stateContext.state.filterModel;if(void 0!==t&&0!==t.length){t=t[0];var o=[];Object.keys(t).forEach((function(r){t[r].forEach((function(t){var r={};if(r.ID=e._thresholdIDGenerator(),r.groupTarget="No Grouping",r.condition=t.conditionName,r.metric=e._headerIdMapper(t.colName.toLowerCase()),r.values=t.value[0].values,r.formatTarget="row",void 0===r.values)r.values=[];else if("string"==typeof r.values)r.values=[Number(r.values)];else for(var n=0;n<r.values.length;n++)r.values[n]=Number(r.values[n]);o.push(r)}))})),e.stateContext.state.filter=o}},this.ratioUpdate=function(){var t=e.stateContext.state.ratioOnMetric;void 0===t&&(t={});var o={};Object.keys(t).forEach((function(r){var n=t[r],i={};i.Numerator=e._headerIdMapper(n.Numerator),i.Denominator=e._headerIdMapper(n.Denominator),i.Precision=n.Precision,i.PercentageFormat=n.PercentageFormat,o[e._headerIdMapper(r)]=i})),e.stateContext.state.ratio=o},this.plotTypeSelectorUpdate=function(){var t=e.stateContext.state.aggregationModel,o=e.stateContext.state.columndefs,r=[],n={};void 0!==t&&void 0!==t.clearAggregation&&(r=t.clearAggregation),o.forEach((function(t){if(t.isMetric){var o=e._headerIdMapper(t.colId);r.indexOf(o)>-1?n[o]="trendline":n[o]="numeric"}})),e.stateContext.state.selectorModel=n},this.startCompatibility=function(){if(void 0!==e.stateContext.state.columnState){try{e.columnStateMasterCompatibility()}catch(t){console.error("Error in restoring columnStateMasterCompatibility")}try{e.sortUpdate()}catch(t){console.error("Error in restoring sortUpdate")}try{e.columnAutoSizeUpdate()}catch(t){console.error("Error in restoring columnAutoSizeUpdate")}try{e.aggregationUpdate()}catch(t){console.error("Error in restoring aggregationUpdate")}try{e.chooseColumnUpdate()}catch(t){console.error("Error in restoring chooseColumnUpdate")}try{e.themeFormattingUpdate()}catch(t){console.error("Error in restoring themeFormattingUpdate")}try{e.columnFormattingCompatibility()}catch(t){console.error("Error in restoring columnFormattingCompatibility")}try{e.thresholdsUpdate()}catch(t){console.error("Error in restoring thresholdsUpdate")}try{e.columnGroupingUpdate()}catch(t){console.error("Error in restoring columnGroupingUpdate")}try{e.grandTotalsUpdate()}catch(t){console.error("Error in restoring grandTotalsUpdate")}try{e.rowGroupOpenedUpdate()}catch(t){console.error("Error in restoring rowGroupOpenedUpdate")}try{e.themeFormatUpdate()}catch(t){console.error("Error in restoring themeFormatUpdate")}try{e.chartTypesUpdate()}catch(t){console.error("Error in restoring chartTypesUpdate")}try{e.dropZonesUpdate()}catch(t){console.error("Error in restoring dropZonesUpdate")}try{e.ratioUpdate()}catch(t){console.error("Error in restoring ratioUpdate")}try{e.columnOrderUpdate()}catch(t){console.error("Error in restoring column order")}try{e.pinColumnUpdate()}catch(t){console.error("Error in restoring pin column")}try{e.filterUpdate()}catch(t){console.error("Error in restoring filter")}try{e.plotTypeSelectorUpdate()}catch(t){console.error("Error in restoring plot type selector")}}},this.getVersion=function(){return"4.0.0"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_0Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.1.0",e.stateContext=t,this.animationCompatibility=function(){var t=e.stateContext.state.animation;void 0===t&&(t=!1),e.stateContext.state.animation=t},this.startCompatibility=function(){try{e.animationCompatibility()}catch(t){console.error("Unable to restore animation compatibility")}},this.getVersion=function(){return"4.1.0"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_1Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.2.0",e.stateContext=t,this.fontFamilyCompatibility=function(){var t=e.stateContext.state.themeFormatting;void 0===t&&(t={}),void 0===t.headerStyles&&(t.headerStyles={}),void 0===t.bodyStyles&&(t.bodyStyles={}),void 0===t.headerStyles.fontFamily&&(t.headerStyles.fontFamily="Times New Roman"),void 0===t.bodyStyles.fontFamily&&(t.bodyStyles.fontFamily="Times New Roman"),e.stateContext.state.themeFormatting=t},this.fitAllToContentState=function(){var t=e.stateContext.state,o=t.columnState,r=t.fitToGridContent;if(void 0!==r){var n={},i=r.indexOf("ag-Grid-AutoColumn"),a=r.slice();i>-1&&a.splice(i,1);var l=!1;o.length===a.length&&(l=!0),n.fit_all_to_content=l,n.columns=r,t.fitToGridContent=n}},this.startCompatibility=function(){try{e.fontFamilyCompatibility()}catch(t){console.error("Error in restoring font family compatibility")}try{e.fitAllToContentState()}catch(t){console.error("Error in restoring fit to content")}},this.getVersion=function(){return"4.2.0"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_2Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.2.1",e.stateContext=t,this.childrenCountCompatibility=function(){var t=e.stateContext.state.hideChildrenCount;void 0===t&&(t=!0),e.stateContext.state.hideChildrenCount=t},this.trendCompatibility=function(){var t=e.stateContext.state.chartTypes;void 0!==t&&Object.keys(t).forEach((function(e){"bar"===t[e].chartType&&(t[e].axisSpecificity="cell")})),e.stateContext.state.chartTypes=t},this.startCompatibility=function(){try{e.childrenCountCompatibility()}catch(t){console.error("Unable to restore children count compatibility")}try{e.trendCompatibility()}catch(t){console.error("Error in handling trendline axis compatibility")}},this.getVersion=function(){return"4.2.1"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_2_1Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.3.0",e.stateContext=t,this.enableMarkerCompatibility=function(){var t=e.stateContext.state.thresholds,o=[];void 0!==t&&(t.forEach((function(t){""===t.icon||"Bars"===t.icon?(t.enableMarker=!1,"Bars"===t.icon&&(t.icon="bar")):t.enableMarker=!0,"string"==typeof t.icon&&(t.icon=t.icon.replace(/\s/g,"").toLowerCase()),o.push(t)})),e.stateContext.state.thresholds=o)},this.columnGroupOpenCompatibility=function(){for(var t=e.stateContext.state.columnState,o=!1,r=0;r<t.length;r++)if(null!==t[r].pivotIndex||void 0!==t[r].pivotIndex){o=!0;break}if(o){var n=e.stateContext.state.columnGroupOpened;if("undefined"==typeof columnGroupOpened)n=[];else for(r=0;r<n.length;r++)null!==n[r].open&&(n[r].open=!0);e.stateContext.state.columnGroupOpened=n}},this.startCompatibility=function(){try{e.enableMarkerCompatibility()}catch(t){console.error("Unable to restore Enable marker threshold compatibility")}try{e.columnGroupOpenCompatibility()}catch(t){console.error("Unable to restore column group open close compatibility")}},this.getVersion=function(){return"4.3.0"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_3Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.3.1",e.stateContext=t,this.addSubTotalsState=function(){e.stateContext.state.subTotals={useBodyStyle:!0}},this.startCompatibility=function(){try{e.addSubTotalsState()}catch(t){console.error("Error restoring subtotals state")}},this.getVersion=function(){return"4.3.1"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_4Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.4.1",e.stateContext=t,this.customCssCompatibility=function(){var t=e.stateContext.state.themeFormatting;void 0===t&&(t={}),void 0===t.headerStyles&&(t.headerStyles={}),void 0===t.bodyStyles&&(t.bodyStyles={}),void 0===t.headerStyles.fontFamily&&(t.headerStyles.fontFamily="Arial"),void 0===t.headerStyles.fontSize&&(t.headerStyles.fontSize="12"),void 0===t.bodyStyles.fontFamily&&(t.bodyStyles.fontFamily="Arial"),void 0===t.bodyStyles.fontSize&&(t.bodyStyles.fontSize="12"),e.stateContext.state.themeFormatting=t},this.pivotOrderCompatibility=function(){var t=e.stateContext.state.sortModel;void 0===t&&(t={});for(var o=e.stateContext.state.columnState,r=!1,n=0;n<o.length;n++)if(null!==o[n].pivotIndex){r=!0;break}r&&(t.pivotSort=!0,e.stateContext.state.sortModel=t)},this.startCompatibility=function(){try{e.pivotOrderCompatibility()}catch(t){console.error("Unable to add quality pivot sort")}try{e.customCssCompatibility()}catch(t){console.error("Unable to add font sizes")}},this.getVersion=function(){return"4.4.1"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_4_1Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.4.2",e.stateContext=t,this.themeCompatibility=function(){var t=e.stateContext.state.themeFormat;void 0===t&&(t="balham"),"balham"===(t=t[0].toUpperCase()+t.slice(1,t.length)).toLowerCase()&&(t="Fresh"),e.stateContext.state.themeFormat=t},this.startCompatibility=function(){try{e.themeCompatibility()}catch(t){console.error("Unable to restore theme correctly")}},this.getVersion=function(){return"4.4.2"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_4_2Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.5",e.stateContext=t,this.getNewStyle=function(t){return{left:"flex-start",center:"center",right:"flex-end"}[t]},this.replaceTextAlign=function(t){var o=t;return void 0!==o.textAlign&&(o.textAlign=e.getNewStyle(o.textAlign)),o},this.restoreTextAlign=function(t,o){var r=e.stateContext.state[t];if(void 0!==r&&void 0!==(r=r[o])){var n=e.replaceTextAlign(r);e.stateContext.state[t][o]=n}},this.startCompatibility=function(){try{e.restoreTextAlign("themeFormatting","headerStyles"),e.restoreTextAlign("themeFormatting","bodyStyles"),e.restoreTextAlign("columnFormatting","headerStyles"),e.restoreTextAlign("columnFormatting","bodyStyles"),e.restoreTextAlign("subTotals","subTotalsText"),e.restoreTextAlign("grandTotals","grandTotalsText"),e.restoreTextAlign("grandTotals","grandTotalsValue")}catch(t){console.error("Unable to restore text alignment")}},this.getVersion=function(){return"4.5"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_5Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.5.1",e.stateContext=t,this.clearAggregationCompatibility=function(){var t=e.stateContext.state.columnState,o=e.stateContext.gridContext.gridOptions.interface,r=o.getTitles(),n=r.slice(o.getNumAttributes(),r.length);t.forEach((function(t,e){n.indexOf(t.colId)>-1&&null===t.aggFunc&&(t.aggFunc="clearAggregation")})),e.stateContext.state.columnState=t},this.startCompatibility=function(){try{e.clearAggregationCompatibility()}catch(t){console.error("Unable to restore clear aggregation compatibility")}},this.getVersion=function(){return"4.5.1"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart4_5_1Compatibility:()=>r});var r=function(t){var e=this;e.currVersionNumber="4.6",e.stateContext=t,this.createThresholdSource=function(){var t=e.stateContext.state.thresholds;void 0!==t&&Array.isArray(t)&&(t.forEach((function(t){t.source=t.metric,t.sourceType="metric"})),e.stateContext.state.thresholds=t)},this.trendCompatibility=function(){var t=e.stateContext.state.chartTypes;void 0!==t&&Object.keys(t).forEach((function(e){void 0===t[e].axisSpecificity&&"bar"===t[e].chartType&&(t[e].axisSpecificity="column"),void 0===t[e].axisSpecificity&&"line"===t[e].chartType&&(t[e].axisSpecificity="cell")})),"micro"===e.stateContext.gridContext.gridOptions.chartType&&(void 0===t&&(t={}),e.stateContext.state.columnState.forEach((function(e){null!==e.aggFunc&&void 0===t[e.colId]&&(t[e.colId]={chartType:"line",color:"#9fa3a8",axisSpecificity:"cell"})}))),e.stateContext.state.chartTypes=t},this.startCompatibility=function(){try{e.createThresholdSource()}catch(t){console.error("Unable to restore threshold source and target compatibility")}try{e.trendCompatibility()}catch(t){console.error("Unable to restore trendline axis specificity")}},this.getVersion=function(){return"4.6"}}},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChart4_7_1Compatibility:()=>i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateContext=e,this.currentVersionNumber="4.7.1"}var e,o;return e=t,(o=[{key:"getVersion",value:function(){return this.currentVersionNumber}},{key:"trendCompatibility",value:function(){var t=this.stateContext.state.chartTypes;void 0!==t&&(Object.keys(t).forEach((function(e){var o=t[e],r=o.chartType;"bar"!==r&&"line"!==r||void 0!==o.startAxis||void 0!==o.endAxis||(t[e].startAxis="min",t[e].endAxis="max")})),this.stateContext.state.chartTypes=t)}},{key:"startCompatibility",value:function(){try{this.trendCompatibility()}catch(t){console.error("[4.7.1] Unable to restore trendline axis specificity")}}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChart5_2_2Compatibility:()=>a});var r=o(45);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(i)?i:String(i)),r)}var i}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateContext=e,this.currentVersionNumber="5.2.2"}var e,o;return e=t,(o=[{key:"getVersion",value:function(){return this.currentVersionNumber}},{key:"customFormatCompatibility",value:function(){var t=this.stateContext.state.customFormatModel;if(void 0!==t){var e=r.utils.convertStringLanguage("Group");t[e]&&(t.Group=t[e],delete t[e]),this.stateContext.state.customFormatModel=t}}},{key:"startCompatibility",value:function(){try{this.customFormatCompatibility()}catch(t){console.error("[5.2.2] Unable to process locale specific custom format")}}}])&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChart5_2_8Compatibility:()=>i}),o(45);var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateContext=e,this.currentVersionNumber="5.2.8"}var e,o;return e=t,(o=[{key:"getVersion",value:function(){return this.currentVersionNumber}},{key:"subTotalCompatibility",value:function(){var t=this.stateContext.state.subTotals;if(void 0!==t){var e,o=null===(e=this.stateContext.state.columnState)||void 0===e?void 0:e.filter((function(t){return null!==t.pivotIndex&&void 0!==t.pivotIndex}));t.metricTotals&o.length>0&&(t.pivotGroupTotals=!0,t.pivotRowTotals=!0,t.metricTotals=!1,this.stateContext.state.subTotals=t)}}},{key:"startCompatibility",value:function(){try{this.subTotalCompatibility()}catch(t){console.error("[5.2.8] Unable to convert metric totals to group & row options")}}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartSortingModel:()=>l});var r=o(46),n=o.n(r),i=o(4);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=function(t){var e=this;e.stateKey="sortModel",e.stateSubKey="sort",e.sortModel={},e.stateManager=t.getStateManager(),e.gridOptions=t.getGridOptions(),e.max_sort_priority={},e.SORT_ORDER_ARR=["asc","desc",void 0],e.isGridReady=!1,this.getStateSubKey=function(){return e.stateSubKey},this.applySortModel=function(){e.isGridReady=!0;var t=e.isHeaderSortable();e.disallowHeaderSortable(),t&&e.allowHeaderSortable()},this.setSortModel=function(t,o){e.sortModel=t,o||e._saveState()},this.setSortingForColumn=function(t,o){e._getRowGroupColumnsInternal().forEach((function(r){e.setSortingForColumnAtLevel(t,r,o,!0)})),e._saveState()},this.setSortingForColumnAtLevel=function(o,r,n,i){void 0===e.sortModel[o]&&(e.sortModel[o]={}),void 0===e.sortModel[o][r]&&(e.sortModel[o][r]={}),e.sortModel[o][r].sort=n,t.gridOptions.api.refreshClientSideRowModel("aggregate"),t.redrawRows(),i||e._saveState()},this.setSortAscendingForColumnAtLevel=function(t,o){e.setSortingForColumnAtLevel(t,o,"asc")},this.setSortAscendingForColumn=function(t){e.setSortingForColumn(t,"asc")},this.setSortDescendingForColumnAtLevel=function(t,o){e.setSortingForColumnAtLevel(t,o,"desc")},this.setSortDescendingForColumn=function(t){e.setSortingForColumn(t,"desc")},this.setSortClearForColumnAtLevel=function(t,o){e.setSortingForColumnAtLevel(t,o,void 0)},this.setSortClearForColumn=function(t){e.setSortingForColumn(t,void 0)},this.rotateSortForColumnAtLevel=function(t,o){var r=e.getSortingForColumn(t,o);r=e.SORT_ORDER_ARR[(e.SORT_ORDER_ARR.indexOf(r)+1)%3],e.setSortingForColumnAtLevel(t,o,r)},this.rotateSortForColumn=function(t){var o=e.getSortingForColumn(t);o=e.SORT_ORDER_ARR[(e.SORT_ORDER_ARR.indexOf(o)+1)%3],e.setSortingForColumnAtLevel(t,o)},this.getSortingForColumn=function(t,o){if(void 0!==e.sortModel[t]&&void 0!==e.sortModel[t][o])return e.sortModel[t][o].sort},this.getSortCount=function(){return e.getFlatSortingModel().length},this.getFlatSortingModel=function(){var t=[];return Object.keys(e.sortModel).forEach((function(o){void 0!==e.sortModel[o]&&"headerSort"!==o&&"ag-Grid-AutoColumn"!==o&&Object.keys(e.sortModel[o]).forEach((function(r){void 0!==e.sortModel[o][r]&&void 0!==e.sortModel[o][r].sort&&t.push({metric:o,grouping:r,sort:e.sortModel[o][r].sort})}))})),t},this.isSortAscendingAtColumn=function(t,o){return"asc"===e.getSortingForColumn(t,o)},this.isSortDescendingAtColumn=function(t,o){return"desc"===e.getSortingForColumn(t,o)},this.isSortClearedAtColumn=function(t,o){return void 0===e.getSortingForColumn(t,o)},this.setHeaderSortable=function(t,o){e.sortModel.headerSort=t,o||e._saveState()},this.isHeaderSortable=function(){return!!e.isGridReady&&(void 0===e.sortModel.headerSort||e.sortModel.headerSort)},this.allowHeaderSortable=function(t){e.setHeaderSortable(!0,t)},this.disallowHeaderSortable=function(t){e.setHeaderSortable(!1,t)},this.addColumnSorting=function(){e.isHeaderSortable()&&(t.getTitles().forEach((function(t){var o=e.getSortingForColumn(t,"No Grouping");e.setSortingForColumn(t,o)})),t.getHeaderFormattingView().refreshHeader())},this.deleteSortingExceptGrouping=function(){var t=e._getRowGroupColumnsInternal(),o=e.sortModel,r=!1;Object.keys(o).forEach((function(e){"headerSort"!==e&&o[e]&&Object.keys(o[e]).forEach((function(n){-1===t.indexOf(n)&&(delete o[e][n],r=!0)}))})),r&&(e.sortModel=o,e._saveState())},this.deleteSortingExceptColumns=function(){var o=t.getTitles();o.push("headerSort");var r=e.sortModel;Object.keys(r).forEach((function(t){-1===o.indexOf(t)&&(r[t]=void 0)})),e.sortModel=r,e._saveState()},this.clearSorting=function(t){e._setPseudoState(),e.sortModel={},e._saveState()},this.isSortingCleared=function(){if(0===Object.keys(e.sortModel).length)return!0;for(var t=Object.keys(e.sortModel),o=0;o<t.length;o++){var r=Object.keys(e.sortModel[t[o]]);if(0!==r.length)for(var n=0;n<r.length;n++){var i=r[n];if(0!==Object.keys(e.sortModel[t[o]][i])&&void 0!==e.sortModel[t[o]][i].sort)return!1}}return!0},this.getSortingPriorityNumber=function(t,e){return console.warn("Sorting priority number is broken"),1},this._baseSortLogic=function(t,o,r,n){var i=0,a=-1;if("asc"===r)i=t-o;else{if("desc"!==r)return 0;i=o-t}return e.isHeaderSortable()?i*(a=n?-1:1):i*a},this.customNumberComparator=function(o,r,n,i,a,l){try{var s=void 0;if(n.group){var u,d=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();u=void 0===n.field?d[d.length-1]:n.field,s=e.getSortingForColumn(l.colId,u);var c=l.colId,h=t.getColumnStateMaster().columnAggregationModel.getAggregation(c);if("ratio"===h||"choosecolumn"===h){var g={colDef:{}};g.colDef.headerName=c,g.node=n,""===(o=t.getAggregationWrapperModel().getAggregationValueInternal(g).v)&&(o=-1/0),g.node=i,""===(r=t.getAggregationWrapperModel().getAggregationValueInternal(g).v)&&(r=-1/0)}}else s=e.getSortingForColumn(l.colId,"No Grouping");return e._baseSortLogic(o,r,s,a)}catch(t){return-1}},this.customDateComparator=function(t,o,r,i,a,l){var s=e.gridOptions.chartDataMapper.dataRows.metaInfo[e.gridOptions.chartDataMapper.titles.slice().indexOf(l.colId)].dateFormat,u=n()(t,s),d=n()(o,s),c=e.getSortingForColumn(l.colId,"No Grouping");return e._baseSortLogic(u,d,c,a)},this.customStringComparator=function(t,e,o,r,n,i){return t==e?0:t>e?1:-1},this.customComparatorSelector=function(o,r,n,i,l,s){var u=t.gridOptions.columnApi.getColumn(s),d=e.gridOptions.chartDataMapper.dataRows.metaInfo[e.gridOptions.chartDataMapper.titles.slice().indexOf(u.colId)];if(void 0===d){if("Total"!==u.colId)return 0;d={type:"number"}}return null!==o&&"object"===a(o)&&(o=o[Object.keys(o)[0]]),null!==r&&"object"===a(r)&&(r=r[Object.keys(r)[0]]),"number"===(d=d.type)?e.customNumberComparator(o,r,n,i,l,u):"date"===d?e.customDateComparator(o,r,n,i,l,u):"string"===d?e.customStringComparator(o,r,n,i,l,u):0},this.customPivotComparator=function(t,e,o){return 0},this.manageSorting=function(t){e.deleteSortingExceptGrouping(t),e.addColumnSorting()},this._getRowGroupColumnsInternal=function(){var e=[];return t.gridOptions.columnApi.getRowGroupColumns().forEach((function(t){e.push(t.colDef.headerName)})),e.unshift("No Grouping"),e},this._preRenderSortingState=function(){var t={},o=e.sortModel;return Object.keys(o).forEach((function(r){"headerSort"!==r&&(t[r]={colId:r,sort:e.getDefaultSortValue(o[r],r)})})),t},this.getColumnDataType=function(t){return e.gridOptions.chartDataMapper.dataRows.metaInfo[e.gridOptions.chartDataMapper.titles.slice().indexOf(t)]},this.getDefaultSortValue=function(t,o){var r,n="",a=o&&"string"===(null===(r=e.getColumnDataType(o))||void 0===r?void 0:r.type),l=this.isHeaderSortable();return i.each(t,(function(t,e){if(t&&t.sort)return n=a||l?t.sort:"desc",!1})),n},this._getModelState=function(){var o=[],r=e.sortModel;return 0===t.getColumnStateMaster().getColumnPivotModel().getPivotColumnsInternal().length?Object.keys(r).forEach((function(n){var i=t.gridOptions.columnApi.getColumn(n);i&&"headerSort"!==n&&o.push({colId:n,sort:e.getDefaultSortValue(r[n],i.colId)})})):Object.keys(r).forEach((function(n){if("headerSort"!==n){var i=t.gridOptions.columnApi.getPivotResultColumns();null!==i&&i.forEach((function(t){t.colDef.headerName===n&&o.push({colId:t.colDef.colId,sort:e.getDefaultSortValue(r[n],n)})}));var a=t.gridOptions.columnApi.getColumns();null!==a&&a.forEach((function(i){var a;i.colDef.headerName===n&&o.push({colId:i.colDef.colId,sort:e.getDefaultSortValue(r[n],null===(a=t.gridOptions.columnApi.getColumn(n))||void 0===a?void 0:a.colId)})}))}})),o},this._setPseudoState=function(){t.gridOptions.columnApi.applyColumnState({defaultState:{sort:null}})},this._setColumnSortingState=function(){t.gridOptions.columnApi.applyColumnState({state:e._getModelState(),defaultState:{sort:null}})},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.sortModel,t},this._restoreState=function(){if(e.sortModel=e.stateManager.restoreSpecificState(e.stateKey),Array.isArray(e.sortModel)){var t=e._getRowGroupColumnsInternal(),o=e.sortModel;e.sortModel={},o.forEach((function(o){e.sortModel[o.colId]={},t.forEach((function(t){e.sortModel[o.colId][t]={},e.sortModel[o.colId][t].sort=o.sort}))})),e.sortModel.headerSort=!1}else void 0!==e.sortModel&&void 0!==Object.keys(e.sortModel).length&&0!==Object.keys(e.sortModel).length||(e.sortModel={})},this._saveState=function(o){e.stateManager.saveSpecificState(e),o&&t.redrawRows()},this._setSortModel=function(t,o){void 0===t&&null===t||"object"!==a(t)||0===t.length?e.gridOptions.api.setSortModel([]):e.gridOptions.api.setSortModel(t),o||e._saveState()},this.saveSortingState=function(){t.getColumnStateMaster().setStateFromDefaults(e)},this.addEventListeners=function(){e.gridOptions.api.addEventListener("columnRowGroupChanged",e.manageSorting),e.gridOptions.api.addEventListener("sortChanged",e.saveSortingState),e.gridOptions.api.addEventListener("columnPivotChanged",e.applySortModel)},e._restoreState(),e.applySortModel()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnStateMaster:()=>d});var r=o(259),n=o(260),i=o(261),a=o(262),l=o(263),s=o(264),u=o(4),d=function(t){var e=this;e.stateKey="columnState",e.columnStateModel=[],e.stateManager=t.getStateManager(),e.gridOptions=t.getGridOptions(),e.gridContext=t,e.eventDispatcher=t.getEventDispatcher(),this.setColumnState=function(t,o){e.columnStateModel=t,e.gridOptions.columnApi.applyColumnState(t),o||e._saveState()},this.saveAggridState=function(){e.columnStateModel=e._getDefaultModel(),e._saveState()},this.getColumnState=function(){var t=e.columnStateModel;return void 0===t?e._getDefaultModel():t},this.getAllColumns=function(o){var r="";if("colDef"===o){var n=t.gridOptions.columnApi.getColumns();r=[],n.forEach((function(t){r.push(t.colDef)}))}else r="colId"===o?e._getAllSubStateValue("colId"):t.gridOptions.columnApi.getColumns();return r},this.getColumnStateById=function(t){var o;return(o=u.filter(e.getColumnState(),(function(e){return e.colId===t}))).length>0?o[0]:null},this.getAllAttributes=function(t){return e._getAllAttributesOrMetrics(t)},this.getAllMetrics=function(t){return e._getAllAttributesOrMetrics(t,"metric")},this._getAllAttributesOrMetrics=function(e,o){var r=!1;void 0===o&&"metric"!==o||(r=!0);var n=t.gridOptions.columnApi.getColumns(),i=[],a="headerName";return void 0!==e&&!1!==e||(a="colId"),n.forEach((function(t){t.colDef.isMetric===r&&i.push(t.colDef[a])})),i},this.getAllAttributeColumns=function(){return e._getAllAttributeOrMetricColumns()},this.getAllMetricColumns=function(){return e._getAllAttributeOrMetricColumns(!0)},this._getAllAttributeOrMetricColumns=function(e){void 0===e&&(e=!1);var o=[];return t.gridOptions.columnApi.getColumns().forEach((function(t){t.colDef.isMetric===e&&o.push(t)})),o},this.getColumnState=function(){return e.columnStateModel.slice()},this.columnExists=function(t){return e.getAllColumns().indexOf(t)>-1},this.getSubStateValue=function(t,o,r){if(void 0!==e.columnStateModel)for(var n=0;n<e.columnStateModel.length;n++)if(e.columnStateModel[n].colId===o)return e.columnStateModel[n][t];return r},this.applyAllSubState=function(t,o){if("function"==typeof o){var r=[];return e.columnStateModel.forEach((function(e){r.push(o(e[t.getStateSubKey()]))})),r}console.error("The given parameter is not a function")},this.setStateFromDefaults=function(o){var r=o;"string"!=typeof r&&(r=o.getStateSubKey());var n=t.gridOptions.columnApi.getColumnState(),i={};n.forEach((function(t){i[t.colId]=t})),e.columnStateModel.forEach((function(t){void 0!==i[t.colId]&&(t[r]=i[t.colId][r])})),e._saveState()},this.setAllSubStateValue=function(t,o){var r=0;e.columnStateModel.forEach((function(e){var n=null;Array.isArray(o)?(n=o[r],void 0===o[r]&&console.warn("Setting column state to undefined!")):n=o,e[t.getStateSubKey()]=n,r+=1})),e._saveState()},this.setSubStateValue=function(t,o,r){e.columnStateModel.forEach((function(e){e.colId===o&&(e[t.getStateSubKey()]=r)})),e._saveState()},this._getAutoColumnIndex=function(t){void 0===t&&(t=e.columnStateModel);for(var o=0;o<t.length;o++)if("ag-Grid-AutoColumn"===t[o].colId)return o;return-1},this.addAutoColumn=function(){var o=t.gridOptions.columnApi.getColumnState(),r=e._getAutoColumnIndex(o),n=e._getAutoColumnIndex();r>-1&&-1===n&&e.columnStateModel.unshift(o[r]),e._saveState()},this.removeAutoColumn=function(){var t=e._getAutoColumnIndex();t>-1&&e.columnStateModel.splice(t,1),e._saveState()},this.headerIdMapper=function(t,o){var r="colId",n="headerName";void 0!==o&&(r="headerName",n="colId");for(var i=e.gridOptions.columnDefs,a=0;a<i.length;a++)if(i[a])if(i[a].children){for(var l=0;l<i[a].children.length;l++)if(i[a].children[l]&&i[a].children[l][r]===t)return i[a].children[l][n]}else if(i[a][r]===t)return i[a][n];return t},this._getDefaultModel=function(){if(e.gridOptions&&e.gridOptions.columnApi)return e.gridOptions.columnApi.getColumnState()},this._getAllSubStateValue=function(t){var o=[];return e.columnStateModel.forEach((function(e){o.push(e[t])})),o},this._applyState=function(){t.gridOptions.columnApi.setColumnState(e.columnStateModel)},this._notifyModelUpdate=function(){e.columnStateModel=e.gridContext.gridOptions.columnApi.getColumnState(),e._saveState()},this.getColumnIndex=function(t,e){for(var o=-1,r=0;r<t.length;r++)if(t[r].colId===e){o=r;break}return o},this.manageTotalsColumn=function(){var o=e.getColumnIndex(e.columnStateModel,"Total");if(t.getSubTotalsModel().isMetricTotals()){var r=e.gridContext.gridOptions.columnApi.getColumnState(),n=e.getColumnIndex(r,"Total");-1===o&&-1!==n&&e.columnStateModel.push(r[n])}else-1!==o&&e.columnStateModel.splice(o,1);e._saveState()},this.notifyModelUpdate=u.debounce(this._notifyModelUpdate,500,{leading:!1,trailing:!0,maxWait:1e3}),this.getStateRepresentation=function(){var t={};return(void 0===e.columnStateModel||null===e.columnStateModel||Array.isArray(e.columnStateModel)&&0===e.columnStateModel.length)&&(console.warn("Bad state trying to restore to default"),e.columnStateModel=e.gridContext.gridOptions.columnApi.getColumnState()),t[e.stateKey]=e.columnStateModel,t},this.__saveState=function(){e.stateManager.saveSpecificState(e)},this._saveState=this.__saveState,this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t=[]),e.columnStateModel=t},this.getNewColumnStateObj=function(e){var o={};return o.colId=t.formatNames(e.title),o.headerName=t.formatNames(e.title),o.hide=!1,o.rowGroupIndex=null,o.pivotIndex=null,o.pinned=null,o.aggFunc=(null==e?void 0:e.aggFunc)||null,o},this.updateState=function(){var o=t.getColumnOrderModel().getOrderedTitles(t.getTitles().slice()),r=t.gridOptions.chartDataMapper.numAttributes;if(o.slice().splice(0,t.gridOptions.chartDataMapper.numAttributes),o.slice().splice(t.gridOptions.chartDataMapper.numAttributes,o.length),0===e.columnStateModel.length)e.columnStateModel=e._getDefaultModel(),e._saveState();else if(!t.getMetricToRowsModel().isMetricToRows()){var n=[];e.columnStateModel.forEach((function(t){n.push(t.colId)}));var i=["ag-Grid-AutoColumn","Total"];n.forEach((function(t){-1===i.indexOf(t)&&-1===o.indexOf(t)&&e.columnStateModel.splice(n.indexOf(t),1)})),o.forEach((function(i){if(-1===n.indexOf(i)){var a={};a.colId=t.formatNames(i),a.headerName=t.formatNames(i),a.hide=!1,a.rowGroupIndex=null,a.pivotIndex=null,a.pinned=null,o.indexOf(i)<r?a.aggFunc=null:a.aggFunc="sum",e.columnStateModel.splice(o.indexOf(i),0,a)}}))}e.__saveState()},e._restoreState(),this.declareModels=function(){e.getColumnPinningModel(),e.getColumnWidthModel(),e.getColumnShowHideModel(),e.getColumnRowGroupingModel(),e.getColumnPivotModel()},e.getColumnAggregationModel(),this.initModel=function(){e.columnPinningModel.initSubModel(),e.columnWidthModel.initSubModel(),e.columnShowHideModel.initSubModel(),e.columnRowGroupingModel.initSubModel(),e.columnPivotModel.initSubModel()},this.registerEventListeners=function(){e.columnPinningModel.registerEventListener()}};vitaraJQ.extend(d.prototype,{getColumnPinningModel:function(){return this.columnPinningModel||(this.columnPinningModel=new r.VitaraGridChartColumnPinningModel(this)),this.columnPinningModel},getColumnWidthModel:function(){return this.columnWidthModel||(this.columnWidthModel=new i.VitaraGridChartColumnWidthModel(this)),this.columnWidthModel},getColumnShowHideModel:function(){return this.columnShowHideModel||(this.columnShowHideModel=new n.VitaraGridChartColumnShowHideModel(this)),this.columnShowHideModel},getColumnRowGroupingModel:function(){return this.columnRowGroupingModel||(this.columnRowGroupingModel=new a.VitaraGridChartRowGroupingModel(this)),this.columnRowGroupingModel},getColumnPivotModel:function(){return this.columnPivotModel||(this.columnPivotModel=new l.VitaraGridChartPivotModel(this)),this.columnPivotModel},getColumnAggregationModel:function(){return this.columnAggregationModel||(this.columnAggregationModel=new s.VitaraGridChartAggregationModel(this)),this.columnAggregationModel}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnPinningModel:()=>r});var r=function(t){var e=this;e.stateSubKey="pinned",e.stateParentKey="columnState",e.columnContext=t,this.getStateSubKey=function(){return e.stateSubKey},this.unpinColumn=function(t){e.setColumnPin(t,null)},this.unpinAllColumns=function(){t.getAllColumns().forEach((function(t){e.unpinColumn(t)})),e.unpinColumn("ag-Grid-AutoColumn")},this.pinColumnRight=function(t){e.setColumnPin(t,"right")},this.pinColumnLeft=function(t){e.setColumnPin(t,"left")},this.getColumnPin=function(o){return t.getSubStateValue(e.getStateSubKey(),o)},this.getAllColumnPins=function(){var o={};return t.getAllColumns().forEach((function(t){o[t.colDef.colId]=e.getColumnPin(t.colDef.colId)})),o},this.isPinningCleared=function(){for(var t=e.getAllColumnPins(),o=0;o<Object.keys(t).length;o++)if(null!==t[Object.keys(t)[o]])return!1;return!0},this.setColumnPin=function(o,r){t.gridOptions.columnApi.setColumnPinned(o,r),t.setStateFromDefaults(e)},this.initSubModel=function(){t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(o){var r=t.getSubStateValue(e.getStateSubKey(),o.colDef.headerName);null!==r&&""!==r&&t.gridContext.gridOptions.columnApi.setColumnPinned(o,r)}))},this.registerEventListener=function(){t.gridOptions.api.addEventListener("columnPinned",(function(o){if(null!=o.column&&"api"!==o.source){var r=o.column.colDef.headerName;t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(e){e.colDef.headerName===r&&t.gridContext.gridOptions.columnApi.setColumnPinned(e,o.pinned)})),e.columnContext.setSubStateValue(e,r,o.pinned),e.columnContext.setStateFromDefaults(e)}})),t.gridOptions.api.addEventListener("columnPivotChanged",(function(t){e.initSubModel()}))}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnShowHideModel:()=>r});var r=function(t){var e=this;e.stateSubKey="hide",e.stateParentKey="columnState",e.columnContext=t,this.getStateSubKey=function(){return e.stateSubKey},this.setColumnHidden=function(t){e._setColumnVisibility(t,!0)},this.setColumnVisible=function(t){e._setColumnVisibility(t,!1)},this.setColumnHiddenWrapper=function(o){var r=[],n=t.gridContext.getTitles().slice().splice(0,t.gridContext.gridOptions.chartDataMapper.numAttributes),i=t.columnPivotModel.getPivotColumnsInternal();t.gridContext.getMetricToRowsModel().isMetricToRows()&&n.push("Metrics"),n.indexOf(o)>-1&&(i.indexOf(o)>-1&&t.gridContext.gridOptions.columnApi.removePivotColumn(o),t.columnRowGroupingModel.getRowGroupColumnsInternal().indexOf(o)>-1&&n.indexOf(o)>-1&&t.gridContext.gridOptions.columnApi.removeRowGroupColumn(o)),t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(t){t.colDef.headerName===o&&r.push(t)})),t.gridContext.gridOptions.columnApi.setColumnVisible(o,!1),t.gridContext.gridOptions.columnApi.setColumnsVisible(r,!1),t.setSubStateValue(e,o,!0),t.__saveState(),t.setStateFromDefaults("rowGroupIndex"),t.setStateFromDefaults("pivotIndex")},this.setColumnVisibleWrapper=function(o){var r=[],n=t.gridContext.getTitles().slice().splice(0,t.gridContext.gridOptions.chartDataMapper.numAttributes),i=t.columnPivotModel.getPivotColumnsInternal();t.gridContext.getMetricToRowsModel().isMetricToRows()&&n.push("Metrics"),n.indexOf(o)>-1&&i.length>0&&-1===i.indexOf(o)&&t.gridContext.gridOptions.columnApi.addRowGroupColumn(o),t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(t){t.colDef.headerName===o&&r.push(t)})),t.gridContext.gridOptions.columnApi.setColumnVisible(o,!0),t.gridContext.gridOptions.columnApi.setColumnsVisible(r,!0),t.setSubStateValue(e,o,!1),t.__saveState(),t.setStateFromDefaults("rowGroupIndex"),t.setStateFromDefaults("pivotIndex")},this.getShowHideColumnState=function(){var o=[];return t.gridContext.gridOptions.columnApi.getColumns().forEach((function(t){"Total"!==t.colDef.headerName&&o.push({headerName:t.colDef.headerName,hidden:e.isColumnHidden(t.colDef.headerName)})})),o},this._setColumnVisibility=function(t,o,r){o?e.setColumnHiddenWrapper(t):e.setColumnVisibleWrapper(t)},this.setColumnHiddenValue=e._setColumnVisibility,this.isColumnHidden=function(o){var r=t.columnRowGroupingModel.getRowGroupColumnsInternal(),n=t.columnPivotModel.getPivotColumnsInternal();return!(r.indexOf(o)>-1||n.indexOf(o)>-1)&&t.getSubStateValue(e.getStateSubKey(),o)},this.isColumnVisible=function(t){return!e.isColumnHidden(t)},this.getHiddenColumns=function(){return e._getColumnsWithVisibility(!0)},this.getVisibleColumns=function(){return e._getColumnsWithVisibility(!1)},this._getColumnsWithVisibility=function(o){var r=e.isColumnVisible;o&&(r=e.isColumnHidden);var n=[];return t.gridContext.getTitles().slice().forEach((function(t){r(t)&&n.push(t)})),n},this.toggleColumnShowHide=function(t){e.isColumnHidden(t)?e.setColumnVisible(t):e.setColumnHidden(t)},this.applyColumnVisibility=function(){if(0===t.columnPivotModel.getPivotColumnsInternal().length){var o=t.columnRowGroupingModel.getRowGroupColumnsInternal();t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(r){var n=t.getSubStateValue(e.getStateSubKey(),r.colDef.headerName);o.indexOf(r.colDef.headerName)>-1&&(n=!0),t.gridContext.gridOptions.columnApi.setColumnVisible(r,!n)}))}},this.applyPivotColumnVisibility=function(){var o=t.gridContext;null!==o.gridOptions.columnApi.getPivotResultColumns()&&o.gridOptions.columnApi.getPivotResultColumns().forEach((function(o){if("Total"!==o.colDef.headerName&&void 0===o.colDef.pivotTotalColumnIds){var r=t.getSubStateValue(e.getStateSubKey(),o.colDef.headerName);t.gridContext.gridOptions.columnApi.setColumnVisible(o,!r)}}))},this.applyVisibilityWrapper=function(){t.gridContext.getMetricToRowsModel().isMetricToRows()||(0===t.columnPivotModel.getPivotColumnsInternal().length?e.applyColumnVisibility():e.applyPivotColumnVisibility())},t.gridContext.gridOptions.api.addEventListener("columnPivotChanged",(function(t){e.applyVisibilityWrapper()})),t.gridContext.gridOptions.api.addEventListener("columnVisible",(function(e){"api"!==e.source&&t.setStateFromDefaults("hide")})),this.initSubModel=function(){}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnWidthModel:()=>r});var r=function(t){var e=this;e.stateSubKey="width",e.stateParentKey="columnState",e.allowApiMutex=!1,this.setAllowApiMutex=function(){e.allowApiMutex=!0},this.unsetAllowApiMutex=function(){e.allowApiMutex=!1},this.toggleAllowApiMutex=function(){e.allowApiMutex=!e.allowApiMutex},this.getStateSubKey=function(){return e.stateSubKey},this.setColumnWidth=function(t,e){},this.setAllColumnsWidth=function(e){t.notifyModelUpdate(!0)},this.initSubModel=function(){e.applyResize()},this.applyResize=function(){t.gridContext.getColumnResizedModel().getFitToGridWidthModel().isFitToGridWidth()||t.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(o){var r=e._getColumnName(o);if(!t.gridContext.getColumnResizedModel().getFitToContentModel().isColumnWidthToContent(r)){var n=t.getSubStateValue(e.getStateSubKey(),r);t.gridContext.gridOptions.columnApi.setColumnWidth(o,n)}}))},this._getColumnName=function(t){var e=t.colDef.headerName;return"ag-Grid-AutoColumn"===t.colDef.colId&&(e="ag-Grid-AutoColumn"),e},this.resizeHandler=function(o){if(null===o.column)o.columns.forEach((function(o){var r=e._getColumnName(o);t.setSubStateValue(e,r,o.actualWidth)}));else{var r=e._getColumnName(o.column);t.setSubStateValue(e,r,o.column.actualWidth)}o.finished&&"api"!==o.source&&e.applyResize()},this.setAutosizeWidths=function(o){t.gridContext.gridOptions.columnApi.getColumnState().forEach((function(o){t.setSubStateValue(e,o.colId,o.width)})),o||t.__saveState()},t.eventDispatcher.addEventListener("columnResized","gridOptions",e.resizeHandler),t.gridContext.gridOptions.api.addEventListener("columnResized",(function(o){"api"!==o.source&&t.gridContext.gridOptions.context.enableDocumentStorage(),o.finished&&(e.allowApiMutex?e.resizeHandler(o):"uiColumnResized"===o.source&&(null===o.column?(o.columns.forEach((function(e){t.gridContext.getColumnResizedModel().getFitToContentModel().unsetColumnToContent(e.colDef.colId)})),t.gridContext.getColumnResizedModel().getFitToGridWidthModel().unsetFitToGridWidth(),e.resizeHandler(o)):(t.gridContext.getColumnResizedModel().getFitToContentModel().unsetColumnToContent(o.column.colDef.colId),t.gridContext.getColumnResizedModel().getFitToGridWidthModel().unsetFitToGridWidth(),e.resizeHandler(o))))})),t.gridContext.gridOptions.api.addEventListener("columnPivotChanged",(function(t){e.applyResize()})),t.eventDispatcher.addEventListener("fitAllColumnsToContent","gridContext",e.setAutosizeWidths),t.eventDispatcher.addEventListener("fitColumnToGridWidth","gridContext",e.setAutosizeWidths)}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartRowGroupingModel:()=>r});var r=function(t){var e=this;e.stateSubKey="rowGroupIndex",e.columnContext=t,e.stateParentKey="columnState",e.aggregationWrapperModel=null,e.eventDispatcher=t.gridContext.getEventDispatcher(),this.getStateSubKey=function(){return e.stateSubKey},this.groupBy=function(o){Array.isArray(o)||(o=[o]),t.gridOptions.columnApi.addRowGroupColumns(o),t.gridOptions.columnApi.setColumnsVisible(o,!1),e._saveGroupingState(),t.setStateFromDefaults("hide")},this.isGroupedBy=function(o){var r=t.getSubStateValue(e.getStateSubKey(),o);return e._isGroupedByHelper(r)},this.ungroupRow=function(o){e._ungroupWrapper(),t.gridContext.gridOptions.columnApi.removeRowGroupColumn(o),t.gridContext.gridOptions.columnApi.setColumnVisible(o,!0),e.manageAutoColumn(),t.setStateFromDefaults(e)},this.ungroupRows=function(){e._ungroupWrapper(),t.gridOptions.columnApi.setRowGroupColumns([]),e.manageAutoColumn(),t.setStateFromDefaults(e)},this.getRowGroupColumnsInternal=function(){var e=[];return t.gridContext.gridOptions.columnApi.getRowGroupColumns().forEach((function(t){e.push(t.colId)})),e},this.getRowGroupColumns=function(){console.log("Returning cached results");var e=[];return t.gridContext.gridOptions.columnApi.getColumnState().forEach((function(o){if("ag-Grid-AutoColumn"!==o.colId){var r=t.getSubStateValue("rowGroupIndex",o.colId);null!==r&&(e[r]=o.colId)}})),e},this.invalidateRowGroupingColumnsCache=function(){e.groupedColumnCache=!1},this.isRowGroupingCleared=function(){return 0===e.getRowGroupColumnsInternal().length},this.manageAutoColumn=function(){0===e.getRowGroupColumnsInternal().length?t.removeAutoColumn():t.addAutoColumn()},this._ungroupWrapper=function(){var o=t.columnPivotModel.getPivotColumnsInternal();e.getRowGroupColumnsInternal().forEach((function(e){o.length>0?t.columnShowHideModel.setColumnHiddenValue(e,!0,!0):t.columnShowHideModel.setColumnHiddenValue(e,!1,!0)}))},this._isGroupedByHelper=function(t){return null!==t||void 0!==t},this._saveGroupingState=function(){e.manageAutoColumn(),t.setStateFromDefaults(e)},t.gridOptions.api.addEventListener("columnRowGroupChanged",(function(o){if(t.gridContext.getRowGroupOpenedModel().hideBottomLeafRow(),"api"!==o.source){var r=t.columnPivotModel.getPivotColumnsInternal(),n=e.getRowGroupColumnsInternal(),i=e.getRowGroupColumns().slice();if(n.length<i.length){var a=[];i.forEach((function(t){-1===n.indexOf(t)&&a.push(t)})),r.length>0?t.columnShowHideModel.setColumnHidden(a[0]):(t.columnShowHideModel.setColumnVisible(a[0]),t.gridOptions.columnApi.setColumnVisible(a[0],!0))}else if(n.length>i.length){var l=o.columns;t.gridOptions.columnApi.setColumnsVisible(l,!1)}var s={bubbles:!1,cancelable:!1,detail:o.columns};e.eventDispatcher.createAndDispatchEvent("columnRowGroupChanged","gridContext",s)}if("toolPanelUi"===o.source){var u=t.gridOptions.columnApi.getRowGroupColumns(),d=t.gridOptions.columnApi.getColumnState(),c=[];d.forEach((function(t){null!==t.rowGroupIndex&&(c[t.rowGroupIndex]=t)})),c.length<u.length&&t.gridOptions.columnApi.removeRowGroupColumn(o.columns[o.columns.length-1])}e._saveGroupingState()})),this.initSubModel=function(){}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartPivotModel:()=>n});var r=o(4),n=function(t){var e=this;e.stateSubKey="pivotIndex",e.parentKey="columnState",e.pivotModel=!1,e.DEFAULT_MODEL=!1,e.eventDispatcher=t.gridContext.getEventDispatcher(),this.controlTotalsColumn=function(){t.gridContext.gridOptions.columnApi.getPivotColumns().length>0?t.gridContext.gridOptions.columnApi.removeValueColumn("Total"):t.gridContext.gridOptions.columnApi.addValueColumn("Total")},this.addPivotColumn=function(o){t.gridContext.gridOptions.columnApi.addPivotColumn(o),t.gridContext.gridOptions.columnApi.setPivotMode(!0),t.setStateFromDefaults(e)},this.addPivotColumns=function(o){var r=t.gridContext.gridOptions.columnApi.getColumns(),n=[];r.forEach((function(t){o.indexOf(t.colDef.colId)>-1&&n.push(t)}));var i=t.getAllAttributes(),a=[];i.forEach((function(t){-1===o.indexOf(t)&&n.indexOf(t)&&a.push(t)})),t.columnRowGroupingModel.groupBy(a),t.gridContext.gridOptions.columnApi.setPivotColumns(n),t.gridContext.gridOptions.columnApi.setPivotMode(!0),t.setStateFromDefaults(e)},this.groupByVisibleAttributes=function(e){var o=t.gridContext,r=t.gridContext.getTitles().slice().splice(0,t.gridContext.gridOptions.chartDataMapper.numAttributes);o.getMetricToRowsModel().isMetricToRows()&&(r.push("Metrics"),o.getMetricGroupingModel().isMetricGroupsPresent()&&r.push(o.getMetricGroupingModel().getDefaultColId())),o.gridOptions.columnApi.getRowGroupColumns().forEach((function(t){r.splice(r.indexOf(t.colDef.colId),1)})),o.gridOptions.columnApi.getPivotColumns().forEach((function(t){r.splice(r.indexOf(t.colDef.colId),1)})),void 0!==e&&e.forEach((function(t){r.splice(r.indexOf(t.colId),1)})),o.getColumnStateMaster().columnShowHideModel.getHiddenColumns().forEach((function(t){var e=r.indexOf(t);e>-1&&r.splice(e,1)})),o.gridOptions.columnApi.addRowGroupColumns(r),o.gridOptions.columnApi.setColumnsVisible(r,!1),t.setStateFromDefaults("rowGroupIndex")},this.removePivotColumns=function(o){t.gridContext.gridOptions.columnApi.removePivotColumns(o),t.setStateFromDefaults(e)},this.removePivotColumn=function(o){t.gridContext.gridOptions.columnApi.removePivotColumn(o),t.setStateFromDefaults(e)},this.removeAllPivotColumns=function(){var o=t.gridContext.gridOptions.columnApi.getPivotColumns();e.removePivotColumns(o)},this.getPivotColumnsInternal=function(){var e=[];return t.gridContext.gridOptions.columnApi.getPivotColumns().forEach((function(t){e.push(t.colId)})),e},this.getPivotColumns=function(){var e=[];return t.getAllColumns().forEach((function(o){var r=t.getSubStateValue("pivotIndex",o.colId);null!==r&&(e[r]=o)})),e.slice()},this.getPivotResultCols=function(e){var o=t.gridContext.gridOptions.columnApi.getPivotResultColumns();return r.filter(o,(function(t){return t.colDef.pivotKeys.includes(e)}))},this.getPivotResultMetricToRowColNames=function(e){var o=!1;return r.each(t.gridContext.gridOptions.columnApi.getPivotColumns(),(function(t){"Metrics"===t.colId&&(o=!0)})),o?this.getPivotResultCols(e).map((function(t){return t.colId})):[]},this.getStateSubKey=function(){return e.stateSubKey},this.initSubModel=function(){e.getPivotColumnsInternal().length>0&&(t.gridContext.gridOptions.columnApi.setPivotMode(!0),e.groupByVisibleAttributes()),t.gridContext.gridOptions.api.addEventListener("columnPivotChanged",(function(o){if(t.gridContext.getMetricToRowsModel().isMetricToRows(),"api"!==o.source){var r=[];e.getPivotColumns().forEach((function(t){r.push(t.colDef.headerName)}));var n=[];t.gridContext.gridOptions.columnApi.getPivotColumns().forEach((function(t){n.push(t.colDef.headerName)}));var i=null===o.column&&0===o.columns.length,a=o.column;i&&(r.forEach((function(t){-1===n.indexOf(t)&&(a=t)})),t.gridContext.gridOptions.columnApi.setColumnVisible(a,!0),t.setStateFromDefaults("hide")),t.gridContext.gridOptions.columnApi.getPivotColumns().length>0?(e.groupByVisibleAttributes(),t.gridContext.gridOptions.columnApi.setPivotMode(!0)):t.gridContext.gridOptions.columnApi.setPivotMode(!1),n.length<2&&t.gridContext.getSubTotalsModel().isPivotMetricTotals()&&t.gridContext.getSubTotalsModel().setPivotMetricTotalsByValue(!1),t.gridContext.thresholdModel=void 0,e.controlTotalsColumn(),t.gridContext.gridOptions.context.enableDocumentStorage(),t.setStateFromDefaults(e)}}))}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartAggregationModel:()=>r});var r=function(t){var e=this;e.stateSubKey="aggFunc",e.parentKey="columnState",this.setAggregation=function(o,r,n){var i=t.gridContext.gridOptions.columnApi.getColumn(o);t.gridContext.gridOptions.columnApi.setColumnAggFunc(i,r),t.gridContext.gridOptions.columnApi.addValueColumn(i.colId),t.setStateFromDefaults(e)},this.unsetAggregation=function(o){var r=t.gridContext.gridOptions.columnApi.getColumn(o);t.gridContext.gridOptions.columnApi.removeValueColumn(r.colDef.headerName),t.gridContext.gridOptions.columnApi.setColumnAggFunc(r,null),t.setStateFromDefaults(e)},this.getAggregation=function(o){var r=t.getSubStateValue(e.getStateSubKey(),o,"sum");return null===r&&t.gridContext.getChartTypeModel().isGridChart()?"sum":r},this.getStateSubKey=function(){return e.stateSubKey},this.initAggregation=function(){},this.fixaggregation=function(){var o=t.gridContext.gridOptions.chartDataMapper,r=t.gridContext.getTitles().slice().splice(o.numAttributes,t.gridContext.getTitles().length),n=t.gridContext.getAggregationWrapperModel(),i=t.gridContext.getChooseColumnModel(),a=["No Grouping"];t.gridContext.gridOptions.columnApi.getRowGroupColumns().forEach((function(t){a.push(t.colDef.colId)})),r.forEach((function(t){if(""!==i.getChooseColumn(t,a[a.length-1]))e.setAggregation(t,"choosecolumn",!0);else for(var o=0;o<a.length;o++)if("ratio"===n.getAggregationAtLevel(t,a[o])){e.setAggregation(t,"ratio",!0);break}}))}}},(t,e,o)=>{function r(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.r(e),o.d(e,{VitaraGridChartColumnGroupingModel:()=>a});var a=function(t){var e=this;e.stateKey="groupedColumns",e.stateManager=t.getStateManager(),e.columnGroupingModel=[],e.gridOptions=t.getGridOptions(),e.DEFAULT_MODEL=[],e.gridContext=t,this.getColumnGroupingModel=function(){return e.columnGroupingModel},this.isColumnGroupingCleared=function(){return 0===e.getColumnGroupingModel().length},this.setColumnGroupingModel=function(o){var r=null;t.getMetricToRowsModel().isMetricToRows()&&(r=t.getMetricToRowsModel().getAllMetricToRowCols()),e.columnGroupingModel=o;var n=e.stateHolder();n.backupState(),e.ApplyGroupColDef(r),n.applyState(),t.getHeaderFormattingView().applyHeaderColors(),t.redrawRows(),e._saveState()},this.stateHolder=function(){var t=this;t.tempState=[],t.gridContext=e.gridContext;var o=t.gridContext.getSortingModel(),r=t.gridContext.getColumnStateMaster();return this.backupState=function(){t.tempState.push(o.getStateRepresentation()),t.tempState.push(r.getStateRepresentation())},this.applyState=function(){o.setSortModel(t.tempState[0].sortModel),r.setColumnState(t.tempState[1].columnState);var n=e.gridOptions.columnApi.getRowGroupColumns();0!==n.length&&e.gridOptions.columnApi.setColumnsVisible(n,!1)},{backupState:t.backupState,applyState:t.applyState}},this._createColumnDefinition=function(){},this.updateModel=function(t){e.setColumnGroupingModel(t.getColumnDefinition())},this.getGroupedColumnDef=function(t){for(var o,r=e.getColumnGroupingModel().length,n=[],a=[],l=0;l<t.length;l++){var s=t[l];if(null!==s&&""!==s){var u=0,d="";s.columnGroupShow=null;for(var c=0;c<r;c++)if(null!=(o=e.getColumnGroupingModel()[c])&&""!==o&&o.columns.indexOf(s.colId)>=0)if(d=o.headerName,u=c+1,void 0!==o.openColumn)o.openColumn===s.colId||(s.columnGroupShow="open");else if(void 0!==o.customOpenColumn){s.columnGroupShow="open",a.length,a[c+1]={},a[c+1].headerName=o.customOpenColumn.aggType.toUpperCase(),a[c+1].colId=o.customOpenColumn.colId,a[c+1].columnGroupShow="closed",a[c+1].visible=!0;var h=[];switch(vitaraJQ.each(o.columns,(function(e,o){h[h.length]="data."+t[o].field})),o.customOpenColumn.aggType){case"sum":a[c+1].valueGetter="("+h.join("+")+")";break;case"avg":a[c+1].valueGetter="("+h.join("+")+")/"+o.columns.length;break;case"min":a[c+1].valueGetter=m;break;case"max":a[c+1].valueGetter=f;break;case"count":a[c+1].valueGetter="'"+o.columns.length+"'"}}t[l]=s,void 0===n[u]&&(n[u]={}),n[u].headerName=d,void 0===n[u].children&&(n[u].children=[]);var g=n[u].children.length;n[u].children[g]=s}}n.length>0&&void 0===n[0]&&n.shift();for(var p=0;p<r;p++)void 0!==n[p+1]&&void 0!==a[p+1]&&(g=n[p+1].children.length,n[p+1].children[g]=a[p+1]);function m(e){var r=[];return vitaraJQ.each(o.columns,(function(o,n){var a=formatNames(t.filter((function(t){return t.colID==n})).headerName);"object"===i(e.data[a])?r[r.length]=e.data[a].rawValue:r[r.length]=e.data[a]})),Math.min.apply(Math,r)}function f(e){var r=[];return vitaraJQ.each(o.columns,(function(o,n){var a=formatNames(t.filter((function(t){return t.colID==n})).headerName);"object"===i(e.data[a])?r[r.length]=e.data[a].rawValue:r[r.length]=e.data[a]})),Math.max.apply(Math,r)}return n},this.convertToRowMetricGrouping=function(){var t=this.gridContext,e=t.gridOptions.chartDataMapper,o=e.getTitles().slice(e.getNumAttributes(),e.getNumColumns()),i={},a=[],l=t.getMetricGroupingModel().getMetricGroups();this.getColumnGroupingModel().forEach((function(t){var e=t.headerName,r=t.columns,n=r.filter((function(t){return o.includes(t)})),l=r.filter((function(t){return!o.includes(t)}));n.length>0&&(i[e]=n),l.length>0&&a.push({columns:l,openColumn:l[0],headerName:e})})),l.forEach((function(t){var e,a,l=t.name,s=t.columns;i[l]?(e=i[l]).push.apply(e,function(t){if(Array.isArray(t))return n(t)}(a=s.filter((function(t){return o.includes(t)})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||r(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):i[l]=s}));var s=Object.entries(i).map((function(t){var e,o,n=(o=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,n,i,a,l=[],s=!0,u=!1;try{if(i=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;s=!1}else for(;!(s=(r=i.call(o)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){u=!0,n=t}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,o)||r(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],columns:n[1]}}));this.columnGroupingModel=a,this._saveState(),t.getMetricGroupingModel().setMetricGroup({groups:s})},this.ApplyGroupColDef=function(o){var r=e.getGroupedColumnDef(o||t.getUpdatedColumnDefs());t.filter,r.length>1||(r=r[0].children),e.gridOptions.api.setColumnDefs(r),e.gridOptions.api.setHeaderHeight(e.gridContext.getThemeFormattingModel().themeHeaderFormattingModel.getHeight()),e.gridOptions.columnDefs=r},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.columnGroupingModel,t},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);e._initModel(t)},this._initModel=function(o){void 0===o&&(o=e.DEFAULT_MODEL);var r=e.gridContext.gridOptions.interface.getTitles();t.getSubTotalsModel().isMetricTotals()&&r.push("Total");var n=[];vitaraJQ.each(o,(function(t,e){e.columns&&e.columns.length>0&&vitaraJQ.each(e.columns,(function(t,o){-1===r.indexOf(o)&&e.columns.splice(t,1)})),e.columns&&e.columns.length>0&&(e.openColumn=e.columns[0],n.push(e))})),o=n,e.columnGroupingModel=o},this._saveState=function(t){e.stateManager.saveSpecificState(e)},this.ungroupColumns=function(){e.isColumnGroupingCleared()||e.setColumnGroupingModel([])},this.addEventListeners=function(){void 0!==e.gridOptions.api&&(e.gridOptions.api.addEventListener("columnGroupOpened",(function(t){e.gridContext.gridOptions.context.enableDocumentStorage(),e._saveState(!0),e.gridContext.getColumnResizedModel().checkAndApplyResizing()})),e.gridOptions.api.addEventListener("columnValueChanged",(function(){e.gridContext.gridOptions.context.enableDocumentStorage(),e._saveState()})))},this.createColumnGrouping=e.setColumnGroupingModel,e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnFormattingModel:()=>i});var r=o(267),n=o(268),i=function(t){var e=this;e.getColumnHeaderFormattingModel(),e.getColumnBodyFormattingModel(),e.stateKey="columnFormatting",e.columnFormattingModel={},e.stateManager=t.getStateManager(),e.gridContext=t,e.themeFormattingModel=t.getThemeFormattingModel(),e.eventDispatcher=t.getEventDispatcher(),this.setFormattingProperty=function(t,o,r,n,i){var a=t.stateSubKey,l=e.columnFormattingModel;l[o]||(l[o]={}),l[o][a]||(l[o][a]={}),l[o][a][r]=n,e.columnFormattingModel=l,void 0!==i&&!1!==i||e._saveState()},this.getFormattingProperty=function(t,o,r){var n=t.stateSubKey,i=e.columnFormattingModel;return void 0===i[o]||void 0===i[o][n]||void 0===i[o][n][r]?e.themeFormattingModel.getFormattingProperty(t,r):i[o][n][r]},this.setAllFormattingProperty=function(t,o,r){var n=e.getAllColumns(),i=0;n.forEach((function(o){var n=r;Array.isArray(r)&&(n=r[i++]),e.setFormattingProperty(t,o,n,!0)})),e._saveState()},this.clearColumnFormatting=function(t){void 0!==e.columnFormattingModel[t]&&(e.columnFormattingModel[t]=void 0),e._saveState()},this.getAllFormattingProperty=function(t,o){var r=[];return e.getAllColumns().forEach((function(n){r.push(e.getFormattingProperty(t,n,o,!0))})),r},this.getAllColumns=function(){return t.getColumnStateMaster().getAllColumns()},this.columnExists=function(t){return e.columnState.columnExists(t)},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.columnFormattingModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);e.columnFormattingModel=void 0!==t?t:{}},e._restoreState(),e.getColumnHeaderFormattingModel(),e.getColumnBodyFormattingModel(),e.eventDispatcher.addEventListener("columnRowGroupChanged","gridOptions",(function(){e.gridContext.getColumnStateMaster().columnRowGroupingModel.isRowGroupingCleared()&&e.clearColumnFormatting("ag-Grid-AutoColumn")}))};vitaraJQ.extend(i.prototype,{getColumnHeaderFormattingModel:function(){return this.columnHeaderFormattingModel||(this.columnHeaderFormattingModel=new n.VitaraGridChartColumnHeaderFormattingModel(this)),this.columnHeaderFormattingModel},getColumnBodyFormattingModel:function(){return this.columnBodyFormattingModel||(this.columnBodyFormattingModel=new r.VitaraGridChartColumnBodyFormattingModel(this)),this.columnBodyFormattingModel}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnBodyFormattingModel:()=>r});var r=function(t){var e=this;e.stateSubKey="bodyStyles",e.columnFormattingContext=t,this.setFontSize=function(t,o){e._setAllOrOneById(t,"fontSize",o)},this.setFontColor=function(t,o){e._setAllOrOneById(t,"color",o)},this.setBgColor=function(t,o){e._setAllOrOneById(t,"bgColor",o)},this.setTextDecoration=function(t,o){e._setAllOrOneById(t,"textDecoration",o)},this.setFontStyle=function(t,o){e._setAllOrOneById(t,"fontStyle",o)},this.setFontWeight=function(t,o){e._setAllOrOneById(t,"fontWeight",o)},this.setTextAlign=function(t,o){e._setAllOrOneById(t,"textAlign",o)},this.setVerticalAlign=function(t,o){e._setAllOrOneById(t,"verticalAlign",o)},this.setFontFamily=function(t,o){e._setAllOrOneById(t,"fontFamily",o)},this.setBold=function(t){e.setFontWeight(t,"bold")},this.unsetBold=function(t){e.setFontWeight(t,"normal")},this.isBold=function(t){return"bold"===e.getFontWeight(t)},this.toggleBold=function(t){e.isBold(t)?e.unsetBold(t):e.setBold(t)},this.setItalic=function(t){e.setFontStyle(t,"italic")},this.unsetItalic=function(t){e.setFontStyle(t,"none")},this.isItalic=function(t){return"italic"===e.getFontStyle(t)},this.toggleItalic=function(t){e.isItalic(t)?e.unsetItalic(t):e.setItalic(t)},this.setUnderline=function(t){e.setTextDecoration(t,"underline")},this.unsetUnderline=function(t){e.setTextDecoration(t,"none")},this.isUnderline=function(t){return"underline"===e.getTextDecoration(t)},this.toggleUnderline=function(t){e.isUnderline(t)?e.unsetUnderline(t):e.setUnderline(t)},this.getFontSize=function(t){return e._getAllOrOneById(t,"fontSize")},this.getFontColor=function(t){return e._getAllOrOneById(t,"color")},this.getBgColor=function(t){return e._getAllOrOneById(t,"bgColor")},this.getTextDecoration=function(t){return e._getAllOrOneById(t,"textDecoration")},this.getFontStyle=function(t){return e._getAllOrOneById(t,"fontStyle")},this.getFontWeight=function(t){return e._getAllOrOneById(t,"fontWeight")},this.getTextAlign=function(t){return e._getAllOrOneById(t,"textAlign")},this.getVerticalAlign=function(t){return e._getAllOrOneById(t,"verticalAlign")},this.getFontFamily=function(t){return e._getAllOrOneById(t,"fontFamily")},this.getStateSubKey=function(){return e.stateSubKey},this._getAllOrOneById=function(t,o){return void 0===t?e.columnFormattingContext.getAllFormattingProperty(e,o):e.columnFormattingContext.getFormattingProperty(e,t,o)},this._setAllOrOneById=function(t,o,r){"all"===t?e.columnFormattingContext.setAllFormattingProperty(e,o,r):e.columnFormattingContext.setFormattingProperty(e,t,o,r)}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnHeaderFormattingModel:()=>r});var r=function(t){var e=this;e.stateSubKey="headerStyles",e.columnFormattingContext=t,e.DEFAULTS={fontSize:"",color:"",textDecoration:"",fontStyle:"",fontWeight:"",textAlign:"",fontFamily:"",bgColor:"",verticalAlign:""},this.setFontSize=function(t,o){e._setAllOrOneById(t,"fontSize",o)},this.setFontColor=function(t,o){e._setAllOrOneById(t,"color",o)},this.setBgColor=function(t,o){e._setAllOrOneById(t,"bgColor",o)},this.setTextDecoration=function(t,o){e._setAllOrOneById(t,"textDecoration",o)},this.setFontStyle=function(t,o){e._setAllOrOneById(t,"fontStyle",o)},this.setFontWeight=function(t,o){e._setAllOrOneById(t,"fontWeight",o)},this.setTextAlign=function(t,o){e._setAllOrOneById(t,"textAlign",o)},this.setVerticalAlign=function(t,o){e._setAllOrOneById(t,"verticalAlign",o)},this.setFontFamily=function(t,o){e._setAllOrOneById(t,"fontFamily",o)},this.setBold=function(t){e.setFontWeight(t,"bold")},this.unsetBold=function(t){e.setFontWeight(t,"normal")},this.isBold=function(t){return"bold"===e.getFontWeight(t)},this.toggleBold=function(t){e.isBold(t)?e.unsetBold(t):e.setBold(t)},this.setItalic=function(t){e.setFontStyle(t,"italic")},this.unsetItalic=function(t){e.setFontStyle(t,"none")},this.isItalic=function(t){return"italic"===e.getFontStyle(t)},this.toggleItalic=function(t){e.isItalic(t)?e.unsetItalic(t):e.setItalic(t)},this.setUnderline=function(t){e.setTextDecoration(t,"underline")},this.unsetUnderline=function(t){e.setTextDecoration(t,"none")},this.isUnderline=function(t){return"underline"===e.getTextDecoration(t)},this.toggleUnderline=function(t){e.isUnderline(t)?e.unsetUnderline(t):e.setUnderline(t)},this.getFontSize=function(t){return e._getAllOrOneById(t,"fontSize")},this.getFontColor=function(t){return e._getAllOrOneById(t,"color")},this.getBgColor=function(t){return e._getAllOrOneById(t,"bgColor")},this.getTextDecoration=function(t){return e._getAllOrOneById(t,"textDecoration")},this.getFontStyle=function(t){return e._getAllOrOneById(t,"fontStyle")},this.getFontWeight=function(t){return e._getAllOrOneById(t,"fontWeight")},this.getTextAlign=function(t){return e._getAllOrOneById(t,"textAlign")},this.getVerticalAlign=function(t){return e._getAllOrOneById(t,"verticalAlign")},this.getFontFamily=function(t){return e._getAllOrOneById(t,"fontFamily")},this.getStateSubKey=function(){return e.stateSubKey},this._getAllOrOneById=function(t,o){return void 0===t?e.columnFormattingContext.getAllFormattingProperty(e,o):e.columnFormattingContext.getFormattingProperty(e,t,o)},this._setAllOrOneById=function(t,o,r){"all"===t?e.columnFormattingContext.setAllFormattingProperty(e,o,r):e.columnFormattingContext.setFormattingProperty(e,t,o,r),e.columnFormattingContext.gridContext.getHeaderFormattingView().refreshHeader()}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartChildrenCountModel:()=>r});var r=function(t){var e=this;e.DEFAULT_MODEL=!0,e.stateManager=t.getStateManager(),e.childrenCountModel=!1,e.stateKey="hideChildrenCount",this.isChildrenCountHidden=function(){return e.childrenCountModel},this.toggleChildrenCountHidden=function(){e.childrenCountModel=!e.childrenCountModel,e._saveState()},this.setChildrenCountHidden=function(t){e.childrenCountContext=t,e._saveState()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.childrenCountModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);null==t&&(t=e.DEFAULT_MODEL),"0"===t?t=!1:"1"===t&&(t=!0),e.childrenCountModel=t},e._restoreState(),this.initModel=function(){}}},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o.r(e),o.d(e,{VitaraGridChartGrandTotalsModel:()=>n});var n=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="grandTotals",e.grandTotalsModel={},e.DEFAULT_MODEL={visible:!0,position:"bottom",text:"Grand Totals",grandTotalsText:{color:"",textDecoration:"",fontStyle:"",fontWeight:"",textAlign:"",fontFamily:"",fontSize:12,bgColor:"",verticalAlign:""},grandTotalsValue:{color:"",textDecoration:"",fontStyle:"",fontWeight:"",textAlign:"",fontFamily:"",fontSize:12,bgColor:"",verticalAlign:""}},e.grandTotalsValue=[],e.aggregationWrapperModel=t.getAggregationWrapperModel(),e.gridContext=t,e.eventManager=t.getEventDispatcher(),this.isGrandTotalsVisible=function(){return void 0===e.grandTotalsModel.visible?e.DEFAULT_MODEL.visible:e.grandTotalsModel.visible},this.getGrandTotalsPosition=function(){return void 0!==e.grandTotalsModel.position?e.grandTotalsModel.position:e.DEFAULT_MODEL.position},this.getGrandTotalsText=function(){return void 0!==e.grandTotalsModel.text?e.grandTotalsModel.text:e.DEFAULT_MODEL.text},this.getGrandTotalsTextColor=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.color?e.DEFAULT_MODEL.grandTotalsText.color:e.grandTotalsModel.grandTotalsText.color},this.getGrandTotalsTextBgColor=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.bgColor?e.DEFAULT_MODEL.grandTotalsText.bgColor:e.grandTotalsModel.grandTotalsText.bgColor},this.getGrandTotalsTextDecoration=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.textDecoration?e.DEFAULT_MODEL.grandTotalsText.textDecoration:e.grandTotalsModel.grandTotalsText.textDecoration},this.getGrandTotalsTextStyle=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.fontStyle?e.DEFAULT_MODEL.grandTotalsText.fontStyle:e.grandTotalsModel.grandTotalsText.fontStyle},this.getGrandTotalsTextWeight=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.fontWeight?e.DEFAULT_MODEL.grandTotalsText.fontWeight:e.grandTotalsModel.grandTotalsText.fontWeight},this.getGrandTotalsTextAlign=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.textAlign?e.DEFAULT_MODEL.grandTotalsText.textAlign:e.grandTotalsModel.grandTotalsText.textAlign},this.getGrandTotalsTextVerticalAlign=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.verticalAlign?e.DEFAULT_MODEL.grandTotalsText.verticalAlign:e.grandTotalsModel.grandTotalsText.verticalAlign},this.getGrandTotalsTextFamily=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.fontFamily?e.DEFAULT_MODEL.grandTotalsText.fontFamily:e.grandTotalsModel.grandTotalsText.fontFamily},this.getGrandTotalsTextSize=function(){return void 0===e.grandTotalsModel.grandTotalsText||void 0===e.grandTotalsModel.grandTotalsText.fontSize?e.DEFAULT_MODEL.grandTotalsText.fontSize:e.grandTotalsModel.grandTotalsText.fontSize},this.getGrandTotalsValueColor=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.color?e.DEFAULT_MODEL.grandTotalsValue.color:e.grandTotalsModel.grandTotalsValue.color},this.getGrandTotalsValueBgColor=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.bgColor?e.DEFAULT_MODEL.grandTotalsValue.bgColor:e.grandTotalsModel.grandTotalsValue.bgColor},this.getGrandTotalsValueDecoration=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.textDecoration?e.DEFAULT_MODEL.grandTotalsValue.textDecoration:e.grandTotalsModel.grandTotalsValue.textDecoration},this.getGrandTotalsValueStyle=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.fontStyle?e.DEFAULT_MODEL.grandTotalsValue.fontStyle:e.grandTotalsModel.grandTotalsValue.fontStyle},this.getGrandTotalsValueWeight=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.fontWeight?e.DEFAULT_MODEL.grandTotalsValue.fontWeight:e.grandTotalsModel.grandTotalsValue.fontWeight},this.getGrandTotalsValueAlign=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.textAlign?e.DEFAULT_MODEL.grandTotalsValue.textAlign:e.grandTotalsModel.grandTotalsValue.textAlign},this.getGrandTotalsValueVerticalAlign=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.verticalAlign?e.DEFAULT_MODEL.grandTotalsValue.verticalAlign:e.grandTotalsModel.grandTotalsValue.verticalAlign},this.getGrandTotalsValueFamily=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.fontFamily?e.DEFAULT_MODEL.grandTotalsValue.fontFamily:e.grandTotalsModel.grandTotalsValue.fontFamily},this.getGrandTotalsValueSize=function(){return void 0===e.grandTotalsModel.grandTotalsValue||void 0===e.grandTotalsModel.grandTotalsValue.fontSize?e.DEFAULT_MODEL.grandTotalsValue.fontSize:e.grandTotalsModel.grandTotalsValue.fontSize},this.isGrandTotalsTextUnderline=function(){return"underline"===e.getGrandTotalsTextDecoration()},this.isGrandTotalsTextItalic=function(){return"italic"===e.getGrandTotalsTextStyle()},this.isGrandTotalsTextBold=function(){return"bold"===e.getGrandTotalsTextWeight()},this.isGrandTotalsValueUnderline=function(){return"underline"===e.getGrandTotalsValueDecoration()},this.isGrandTotalsValueItalic=function(){return"italic"===e.getGrandTotalsValueStyle()},this.isGrandTotalsValueBold=function(){return"bold"===e.getGrandTotalsValueWeight()},this.useCustomGrandTotals=function(){var e=t.getMetricToRowsModel().isMetricToRows(),o=t.getMetricGroupingModel().isMetricGroupsPresent(),r=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal(),n=-1===r.indexOf("Metrics"),i=o&&-1!==r.indexOf(t.getMetricGroupingModel().getDefaultColId()),a=r.length>0;if(e){if(n)return a?"internal":"custom";if(i)return"internal"}return!1},this.createGrandTotalsData=function(){var o=void 0;t.getChartTypeModel().isMicroChart()&&(o="sum");var n=e.gridContext.gridOptions.columnApi.getAllDisplayedColumns(),i={};"internal"===e.useCustomGrandTotals()?i=e.aggregationWrapperModel.getGrandTotalsInternal():n.forEach((function(n){var a,l,s,u="";if(n.colDef.isMetric){var d=n.colDef.colId;if("custom"!==e.useCustomGrandTotals()||e.gridContext.aggregationWrapperModel.isClearAggregationFlag("Values"))void 0===(u=e.aggregationWrapperModel.getGrandTotals(n,o))&&(u="");else{u=0;var c=t.gridOptions.chartDataMapper.numAttributes,h=t.getTitles().slice(c);o="sum",h.forEach((function(t){u+=e.aggregationWrapperModel.getGrandTotals(t,o).v})),u={v:u,fv:t.getAggregationHelper().formatMetricHelper(u,n.colDef.headerName)}}i[d]=(a={value:u.fv||"",rawValue:u.v||""},l=d,s=u.v||"",(l=function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===r(e)?e:String(e)}(l))in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,a)}}));var a="ag-Grid-AutoColumn";if(0===e.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length){if(0===n.length)return[];a=n[0].colDef.colId}return 0===e.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length&&0!==e.gridContext.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length||(i[a]=e.getGrandTotalsText()),[i]},this.onGrandTotalsChange=function(){t.getAggregationWrapperModel()._initAggregation();var o=e.createGrandTotalsData();e.isGrandTotalsVisible()?"top"===e.getGrandTotalsPosition()?(e.gridContext.gridOptions.api.setPinnedBottomRowData([]),e.gridContext.gridOptions.api.setPinnedTopRowData(o)):(e.gridContext.gridOptions.api.setPinnedTopRowData([]),e.gridContext.gridOptions.api.setPinnedBottomRowData(o)):(delete o[0].groupedCol,e.gridContext.gridOptions.api.setPinnedTopRowData([]),e.gridContext.gridOptions.api.setPinnedBottomRowData([]))},this.setGrandTotalsShowHideByValue=function(t){e._setGrandTotalsModel("visible","show"===t)},this.setGrandTotalsShow=function(){e._setGrandTotalsModel("visible",!0)},this.setGrandTotalsHide=function(){e._setGrandTotalsModel("visible",!1)},this.setGrandTotalsPositionByValue=function(t){e._setGrandTotalsModel("position",t)},this.setGrandTotalsPositionTop=function(){e._setGrandTotalsModel("position","top")},this.setGrandTotalsPositionBottom=function(){e._setGrandTotalsModel("position","bottom")},this.setGrandTotalsText=function(t){e._setGrandTotalsModel("text",t)},this.setGrandTotalsTextColor=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.color=t,e._saveState()},this.setGrandTotalsTextDecoration=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.textDecoration=t,e._saveState()},this.setGrandTotalsTextStyle=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.fontStyle=t,e._saveState()},this.setGrandTotalsTextWeight=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.fontWeight=t,e._saveState()},this.setGrandTotalsTextAlign=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.textAlign=t,e._saveState()},this.setGrandTotalsTextVerticalAlign=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.verticalAlign=t,e._saveState()},this.setGrandTotalsTextFamily=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.fontFamily=t,e._saveState()},this.setGrandTotalsTextSize=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.fontSize=t,e._saveState()},this.setGrandTotalsTextBgColor=function(t){void 0===e.grandTotalsModel.grandTotalsText&&(e.grandTotalsModel.grandTotalsText={}),e.grandTotalsModel.grandTotalsText.bgColor=t,e._saveState()},this.setGrandTotalsValueColor=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.color=t,e._saveState()},this.setGrandTotalsValueDecoration=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.textDecoration=t,e._saveState()},this.setGrandTotalsValueStyle=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.fontStyle=t,e._saveState()},this.setGrandTotalsValueWeight=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.fontWeight=t,e._saveState()},this.setGrandTotalsValueAlign=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.textAlign=t,e._saveState()},this.setGrandTotalsValueVerticalAlign=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.verticalAlign=t,e._saveState()},this.setGrandTotalsValueFamily=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.fontFamily=t,e._saveState()},this.setGrandTotalsValueSize=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.fontSize=t,e._saveState()},this.setGrandTotalsValueBgColor=function(t){void 0===e.grandTotalsModel.grandTotalsValue&&(e.grandTotalsModel.grandTotalsValue={}),e.grandTotalsModel.grandTotalsValue.bgColor=t,e._saveState()},this._setGrandTotalsModel=function(t,o){e.grandTotalsModel[t]=o,e._saveState(),e.dispatchGrandTotalsChanged(),e.onGrandTotalsChange()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.grandTotalsModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0!==t&&"object"===r(t)||(t={visible:!0,position:"bottom"}),e.grandTotalsModel=t},e._restoreState(),e.eventManager.addEventListener("aggregationChanged",null,e.onGrandTotalsChange),e.eventManager.addEventListener("displayedColumnsChanged","gridOptions",e.onGrandTotalsChange),e.gridContext.gridOptions.api.addEventListener("displayedColumnsChanged",e.onGrandTotalsChange),e.eventManager.addEventListener("gridReady",null,e.onGrandTotalsChange),this.dispatchGrandTotalsChanged=function(){e.eventManager.createAndDispatchEvent("grandTotalsChanged",null)}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartSubTotalsModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="subTotals",e.subTotalsModel={},e.DEFAULT_MODEL={useBodyStyle:!0,metricTotals:!1,pivotMetricTotals:!1,pivotRowTotals:!1,pivotGroupTotals:!1,subTotalsText:{color:"",textDecoration:"",fontStyle:"",fontWeight:"bold",textAlign:"",fontFamily:"",fontSize:12,bgColor:"",verticalAlign:""},subTotalsValue:{color:"",textDecoration:"",fontStyle:"",fontWeight:"bold",textAlign:"",fontFamily:"",fontSize:12,bgColor:"",verticalAlign:""}},e.eventDispatcher=t.getEventDispatcher(),e.bodyFormatting=t.getColumnFormattingModel().columnBodyFormattingModel,this.isUseBodyStyle=function(){return void 0===e.subTotalsModel.useBodyStyle?e.DEFAULT_MODEL.useBodyStyle:e.subTotalsModel.useBodyStyle},this.isMetricTotals=function(){return void 0===e.subTotalsModel.metricTotals?e.DEFAULT_MODEL.metricTotals:e.subTotalsModel.metricTotals},this.isPivotMetricTotals=function(){return void 0===e.subTotalsModel.pivotMetricTotals?e.DEFAULT_MODEL.pivotMetricTotals:e.subTotalsModel.pivotMetricTotals},this.isPivotRowTotals=function(){return void 0===e.subTotalsModel.pivotRowTotals?e.DEFAULT_MODEL.pivotRowTotals:e.subTotalsModel.pivotRowTotals},this.isPivotGroupTotals=function(){return void 0===e.subTotalsModel.pivotGroupTotals?e.DEFAULT_MODEL.pivotGroupTotals:e.subTotalsModel.pivotGroupTotals},this.getSubTotalsTextColor=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.color?e.DEFAULT_MODEL.subTotalsText.color:e.subTotalsModel.subTotalsText.color},this.getSubTotalsTextBgColor=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.bgColor?e.DEFAULT_MODEL.subTotalsText.bgColor:e.subTotalsModel.subTotalsText.bgColor},this.getSubTotalsTextDecoration=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.textDecoration?e.DEFAULT_MODEL.subTotalsText.textDecoration:e.subTotalsModel.subTotalsText.textDecoration},this.getSubTotalsTextStyle=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.fontStyle?e.DEFAULT_MODEL.subTotalsText.fontStyle:e.subTotalsModel.subTotalsText.fontStyle},this.getSubTotalsTextWeight=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.fontWeight?e.DEFAULT_MODEL.subTotalsText.fontWeight:e.subTotalsModel.subTotalsText.fontWeight},this.getSubTotalsTextAlign=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.textAlign?e.DEFAULT_MODEL.subTotalsText.textAlign:e.subTotalsModel.subTotalsText.textAlign},this.getSubTotalsTextVerticalAlign=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.verticalAlign?e.DEFAULT_MODEL.subTotalsText.verticalAlign:e.subTotalsModel.subTotalsText.verticalAlign},this.getSubTotalsTextFamily=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.fontFamily?e.DEFAULT_MODEL.subTotalsText.fontFamily:e.subTotalsModel.subTotalsText.fontFamily},this.getSubTotalsTextSize=function(){return void 0===e.subTotalsModel.subTotalsText||void 0===e.subTotalsModel.subTotalsText.fontSize?e.DEFAULT_MODEL.subTotalsText.fontSize:e.subTotalsModel.subTotalsText.fontSize},this.getSubTotalsValueColor=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.color?e.DEFAULT_MODEL.subTotalsValue.color:e.subTotalsModel.subTotalsValue.color},this.getSubTotalsValueBgColor=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.bgColor?e.DEFAULT_MODEL.subTotalsValue.bgColor:e.subTotalsModel.subTotalsValue.bgColor},this.getSubTotalsValueDecoration=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.textDecoration?e.DEFAULT_MODEL.subTotalsValue.textDecoration:e.subTotalsModel.subTotalsValue.textDecoration},this.getSubTotalsValueStyle=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.fontStyle?e.DEFAULT_MODEL.subTotalsValue.fontStyle:e.subTotalsModel.subTotalsValue.fontStyle},this.getSubTotalsValueWeight=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.fontWeight?e.DEFAULT_MODEL.subTotalsValue.fontWeight:e.subTotalsModel.subTotalsValue.fontWeight},this.getSubTotalsValueAlign=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.textAlign?e.DEFAULT_MODEL.subTotalsValue.textAlign:e.subTotalsModel.subTotalsValue.textAlign},this.getSubTotalsValueVerticalAlign=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.verticalAlign?e.DEFAULT_MODEL.subTotalsValue.verticalAlign:e.subTotalsModel.subTotalsValue.verticalAlign},this.getSubTotalsValueFamily=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.fontFamily?e.DEFAULT_MODEL.subTotalsValue.fontFamily:e.subTotalsModel.subTotalsValue.fontFamily},this.getSubTotalsValueSize=function(){return void 0===e.subTotalsModel.subTotalsValue||void 0===e.subTotalsModel.subTotalsValue.fontSize?e.DEFAULT_MODEL.subTotalsValue.fontSize:e.subTotalsModel.subTotalsValue.fontSize},this.isSubTotalsTextUnderline=function(){return"underline"===e.getSubTotalsTextDecoration()},this.isSubTotalsTextItalic=function(){return"italic"===e.getSubTotalsTextStyle()},this.isSubTotalsTextBold=function(){return"bold"===e.getSubTotalsTextWeight()},this.isSubTotalsValueUnderline=function(){return"underline"===e.getSubTotalsValueDecoration()},this.isSubTotalsValueItalic=function(){return"italic"===e.getSubTotalsValueStyle()},this.isSubTotalsValueBold=function(){return"bold"===e.getSubTotalsValueWeight()},this.setUseBodyStyleByValue=function(t){e.subTotalsModel.useBodyStyle=t,e._saveState()},this.setMetricTotalsByValue=function(t){e.subTotalsModel.metricTotals=t,e._saveState()},this.setPivotMetricTotalsByValue=function(t){e.subTotalsModel.pivotMetricTotals=t,e._saveState()},this.setPivotRowTotalsByValue=function(t){e.subTotalsModel.pivotRowTotals=t,e._saveState()},this.setPivotGroupTotalsByValue=function(t){e.subTotalsModel.pivotGroupTotals=t,e._saveState()},this.setSubTotalsTextColor=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.color=t,e._saveState()},this.setSubTotalsTextDecoration=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.textDecoration=t,e._saveState()},this.setSubTotalsTextStyle=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.fontStyle=t,e._saveState()},this.setSubTotalsTextWeight=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.fontWeight=t,e._saveState()},this.setSubTotalsTextAlign=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.textAlign=t,e._saveState()},this.setSubTotalsTextVerticalAlign=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.verticalAlign=t,e._saveState()},this.setSubTotalsTextFamily=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.fontFamily=t,e._saveState()},this.setSubTotalsTextSize=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.fontSize=t,e._saveState()},this.setSubTotalsTextBgColor=function(t){void 0===e.subTotalsModel.subTotalsText&&(e.subTotalsModel.subTotalsText={}),e.subTotalsModel.subTotalsText.bgColor=t,e._saveState()},this.setSubTotalsValueColor=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.color=t,e._saveState()},this.setSubTotalsValueDecoration=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.textDecoration=t,e._saveState()},this.setSubTotalsValueStyle=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.fontStyle=t,e._saveState()},this.setSubTotalsValueWeight=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.fontWeight=t,e._saveState()},this.setSubTotalsValueAlign=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.textAlign=t,e._saveState()},this.setSubTotalsValueVerticalAlign=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.verticalAlign=t,e._saveState()},this.setSubTotalsValueFamily=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.fontFamily=t,e._saveState()},this.setSubTotalsValueSize=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.fontSize=t,e._saveState()},this.setSubTotalsValueBgColor=function(t){void 0===e.subTotalsModel.subTotalsValue&&(e.subTotalsModel.subTotalsValue={}),e.subTotalsModel.subTotalsValue.bgColor=t,e._saveState()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.subTotalsModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.subTotalsModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.subTotalsModel&&(e.subTotalsModel={})},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnGroupingView:()=>a});var r=o(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(i)?i:String(i)),r)}var i}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.gridOptions=e.gridOptions}var e,o;return e=t,(o=[{key:"showView",value:function(t){var e=this,o=this;this.cModel=this.gridContext.getColumnGrouping(),this.dataModel=[],this.cModel.getColumnGroupingModel().forEach((function(t,o){e.dataModel.push({name:t.headerName,group:o,columns:t.columns})}));var n=function(t){var e=[];return t&&Array.isArray(t)&&t.forEach((function(t){e.push({columns:t.columns,openColumn:t.columns[0],headerName:t.name})})),e},i=this.gridContext.getTitles();if(this.gridContext.getMetricToRowsModel().isMetricToRows()&&(i=i.slice(0,this.gridContext.gridOptions.chartDataMapper.numAttributes)),t){var a=[];r.each(this.dataModel,(function(t){a=a.concat(t.columns)}));var l=r.filter(t.columns,(function(t){return-1===a.indexOf(t)&&-1!==i.indexOf(t)}));if(l.length>0){var s=[{name:"Group "+this.dataModel.length,group:this.dataModel.length,columns:l}],u=this.dataModel.concat(s);o.cModel.setColumnGroupingModel(n(u)),o.dataModel=u}}var d={changeCallBack:function(){var t=this.getColumnDefinition(),e=n(t);o.cModel.setColumnGroupingModel(e),o.dataModel=e},deleteCallBack:function(t){if(null!=t){var e=this.getColumnDefinition(),i=r.findIndex(e,(function(e){return e.group===t}));e.splice(i,1);var a=n(e);o.cModel.setColumnGroupingModel(a),this.dataModel=e}else console.warn("ID not found")},moveUpCallback:function(t){if(null!=t){var e=this.getColumnDefinition(),i=r.findIndex(e,(function(e){return e.group===t}));if(e.length>1&&i>0){var a=e[i];e[i]=e[i-1],e[i-1]=a;var l=n(e);o.cModel.setColumnGroupingModel(l),this.dataModel=e}}else console.warn("ID not found")},moveDownCallback:function(t){if(null!=t){var e=this.getColumnDefinition(),i=r.findIndex(e,(function(e){return e.group===t}));if(e.length>1&&i<e.length-1){var a=e[i];e[i]=e[i+1],e[i+1]=a;var l=n(e);o.cModel.setColumnGroupingModel(l),this.dataModel=e}}else console.warn("ID not found")},onHideHandler:function(){this.gridContext.getColumnSelectionModel().setSelectedColumns([])},dataModel:o.dataModel,titles:i,gridContext:this.gridContext};this.gridContext.getDragDropManager(d).showPopup()}}])&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartThemeFormattingModel:()=>i});var r=o(274),n=o(275),i=function(t){var e=this;e.stateKey="themeFormatting",e.stateManager=t.getStateManager(),e.themeFormattingModel={},e.getThemeHeaderFormattingModel(),e.getThemeBodyFormattingModel(),e.gridContext=t,this.setFormattingProperty=function(t,o,r){var n=t.stateSubKey,i=e.themeFormattingModel;i[n]||(i[n]={}),i[n][o]=r,e.themeFormattingModel=i,e._saveState()},this.getFormattingProperty=function(t,o){var r=t.stateSubKey,n=e.themeFormattingModel;return void 0===n[r]||void 0===n[r][o]?e._getThemeDefaults(t,o):n[r][o]},this.clearThemeFormatting=function(t){void 0!==e.themeFormattingModel[t]&&(e.themeFormattingModel[t]=void 0),e._saveState()},this.setIndependentFormattingModel=function(t,o,r,n){void 0===e.themeBodyFormattingModel[t]&&(e.themeBodyFormattingModel[t]={}),e.themeBodyFormattingModel[t][o]=r,n||e._saveState()},this.getIndependentFormattingModel=function(t,o,r){var n=t.stateKey;return e.themeBodyFormattingModel[n]&&e.themeBodyFormattingModel[t][o]?e.themeBodyFormattingModel[t][o]:(void 0===r&&(r="bodyHeight"),t.DEFAULTS.height)},this._getThemeDefaults=function(t,o){return"headerStyles"===t.stateSubKey?e.getThemeHeaderFormattingModel().DEFAULTS[o]:e.getThemeBodyFormattingModel().DEFAULTS[o]},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.themeFormattingModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t={}),e.themeFormattingModel=t},e._restoreState()};vitaraJQ.extend(i.prototype,{getThemeHeaderFormattingModel:function(){return this.themeHeaderFormattingModel||(this.themeHeaderFormattingModel=new n.VitaraGridChartThemeHeaderFormattingModel(this)),this.themeHeaderFormattingModel},getThemeBodyFormattingModel:function(){return this.themeBodyFormattingModel||(this.themeBodyFormattingModel=new r.VitaraGridChartThemeBodyFormattingModel(this)),this.themeBodyFormattingModel}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartThemeBodyFormattingModel:()=>r});var r=function(t){var e=this;e.stateSubKey="bodyStyles",e.themeFormattingContext=t,e.DEFAULTS={fontSize:"",color:"",textDecoration:"",fontStyle:"",fontWeight:"",textAlign:"",fontFamily:"",height:25,groupedHeight:30,bgColor:"",verticalAlign:"",transparentBgColor:!1},this.setHeight=function(t){e._setValue("height",t)},this.setGroupedHeight=function(t){e._setValue("groupedHeight",t)},this.setFontSize=function(t){e._setValue("fontSize",t)},this.setFontColor=function(t){e._setValue("color",t)},this.setBgColor=function(o){e._setValue("bgColor",o),e._setValue("transparentBgColor",t.gridContext.isColorTransparent(o))},this.setTextDecoration=function(t){e._setValue("textDecoration",t)},this.setFontStyle=function(t){e._setValue("fontStyle",t)},this.setFontWeight=function(t){e._setValue("fontWeight",t)},this.setTextAlign=function(t){e._setValue("textAlign",t)},this.setVerticalAlign=function(t){e._setValue("verticalAlign",t)},this.setFontFamily=function(t){e._setValue("fontFamily",t)},this.setBold=function(){e.setFontWeight("bold")},this.unsetBold=function(){e.setFontWeight("normal")},this.isBold=function(){return"bold"===e.getFontWeight()},this.isBackgroundTransparent=function(){return e._getValue("transparentBgColor")},this.toggleBold=function(){e.isBold()?e.unsetBold():e.setBold()},this.setItalic=function(){e.setFontStyle("italic")},this.unsetItalic=function(){e.setFontStyle("none")},this.isItalic=function(){return"italic"===e.getFontStyle()},this.toggleItalic=function(){e.isItalic()?e.unsetItalic():e.setItalic()},this.setUnderline=function(){e.setTextDecoration("underline")},this.unsetUnderline=function(){e.setTextDecoration("none")},this.isUnderline=function(){return"underline"===e.getTextDecoration()},this.toggleUnderline=function(){e.isUnderline()?e.unsetUnderline():e.setUnderline()},this.getHeight=function(){return parseInt(e._getValue("height"))},this.getGroupedHeight=function(){return parseInt(e._getValue("groupedHeight"))},this.getFontSize=function(){return e._getValue("fontSize")},this.getFontColor=function(){return e._getValue("color")},this.getBgColor=function(){return e._getValue("bgColor")},this.getTextDecoration=function(){return e._getValue("textDecoration")},this.getFontStyle=function(){return e._getValue("fontStyle")},this.getFontWeight=function(){return e._getValue("fontWeight")},this.getTextAlign=function(){return e._getValue("textAlign")},this.getVerticalAlign=function(){return e._getValue("verticalAlign")},this.getFontFamily=function(){return e._getValue("fontFamily")},this.getStateSubKey=function(){return e.stateSubKey},this._getValue=function(t){return e.themeFormattingContext.getFormattingProperty(e,t)},this._setValue=function(t,o){e.themeFormattingContext.setFormattingProperty(e,t,o)}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartThemeHeaderFormattingModel:()=>r});var r=function(t){var e=this;e.stateSubKey="headerStyles",e.themeFormattingContext=t,e.DEFAULTS={fontSize:"",color:"",textDecoration:"",fontStyle:"",fontWeight:"",textAlign:"",fontFamily:"",height:"25",bgColor:"",verticalAlign:"",transparentBgColor:!1},this.setHeight=function(o){e._setValue("height",o),t.gridContext.gridOptions.api.setHeaderHeight(o),t.gridContext.gridOptions.api.setGroupHeaderHeight(o),t.gridContext.gridOptions.api.setPivotHeaderHeight(o),t.gridContext.gridOptions.api.setPivotGroupHeaderHeight(o)},this.setFontSize=function(t){e._setValue("fontSize",t)},this.setFontColor=function(t){e._setValue("color",t)},this.setBgColor=function(o){e._setValue("bgColor",o),e._setValue("transparentBgColor",t.gridContext.isColorTransparent(o))},this.setTextDecoration=function(t){e._setValue("textDecoration",t)},this.setFontStyle=function(t){e._setValue("fontStyle",t)},this.setFontWeight=function(t){e._setValue("fontWeight",t)},this.setTextAlign=function(t){e._setValue("textAlign",t)},this.setVerticalAlign=function(t){e._setValue("verticalAlign",t)},this.setFontFamily=function(t){e._setValue("fontFamily",t)},this.setBold=function(){e.setFontWeight("bold")},this.unsetBold=function(){e.setFontWeight("normal")},this.isBold=function(){return"bold"===e.getFontWeight()},this.isBackgroundTransparent=function(){return e._getValue("transparentBgColor")},this.toggleBold=function(){e.isBold()?e.unsetBold():e.setBold()},this.setItalic=function(){e.setFontStyle("italic")},this.unsetItalic=function(){e.setFontStyle("none")},this.isItalic=function(){return"italic"===e.getFontStyle()},this.toggleItalic=function(){e.isItalic()?e.unsetItalic():e.setItalic()},this.setUnderline=function(){e.setTextDecoration("underline")},this.unsetUnderline=function(){e.setTextDecoration("none")},this.isUnderline=function(){return"underline"===e.getTextDecoration()},this.toggleUnderline=function(){e.isUnderline()?e.unsetUnderline():e.setUnderline()},this.getHeight=function(){return parseInt(e._getValue("height"))},this.getFontSize=function(){return e._getValue("fontSize")},this.getFontColor=function(){return e._getValue("color")},this.getBgColor=function(){return e._getValue("bgColor")},this.getTextDecoration=function(){return e._getValue("textDecoration")},this.getFontStyle=function(){return e._getValue("fontStyle")},this.getFontWeight=function(){return e._getValue("fontWeight")},this.getTextAlign=function(){return e._getValue("textAlign")},this.getVerticalAlign=function(){return e._getValue("verticalAlign")},this.getFontFamily=function(){return e._getValue("fontFamily")},this.getStateSubKey=function(){return e.stateSubKey},this._getValue=function(t){return e.themeFormattingContext.getFormattingProperty(e,t)},this._setValue=function(t,o){e.themeFormattingContext.setFormattingProperty(e,t,o),e.themeFormattingContext.gridContext.getHeaderFormattingView().refreshHeader()}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartAggregationWrapperModel:()=>a});var r=o(234),n=(o(45),o(4));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=function(t){var e=this;e.gridContext=t,e.aggregationModel={},e.dataMapper=null,e.stateKey="aggregationModel",e.stateManager=t.getStateManager(),e.gridOptions=t.getGridOptions(),e.groupedValueAggForMetric={},e.DEFAULT_AGGREGATION="sum",e.CLEAR_AGGREGATION_KEY="clearAggregation",e.GROUP_COLUMNS_KEY="groupColumns",e.formatLookupDict={avg:"metricFormat",count:"default",first:"metricFormat",last:"metricFormat",sum:"metricFormat",max:"metricFormat",min:"metricFormat"},e.eventManager=t.getEventDispatcher(),this.clearAggregationModel=function(){var t={};t[e.CLEAR_AGGREGATION_KEY]=e.getClearAggregationMetrics(),e._setAggregationModel(t)},this.getValueColumnsAtLevel=function(o){if(void 0===o){var r=t.getColumnStateMaster().getAllMetrics();return e.getClearAggregationMetrics().forEach((function(t){r.splice(r.indexOf(t),1)})),r.slice()}try{return Object.keys(o).slice()}catch(t){return[]}},this.setAggregationAtLevel=function(o,r,n,i){var a="No Grouping";t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length>0&&(a=r),void 0===e.aggregationModel[a]&&(e.aggregationModel[a]={}),e.aggregationModel[a][o]=n,"choosecolumn"!==n&&null!==n&&t.getChooseColumnModel().removeChooseColumn(o,a),e.unsetClearAggregationFlag(o),void 0!==i?(i.muteSave||e._saveState(),i.muteRedraw||e.gridContext.redrawRows(),i.muteDispatchEvent||e.dispatchAggregationChanged()):(e._saveState(),e.gridContext.redrawRows(),e.dispatchAggregationChanged())},this.setAggregationAtAllLevels=function(o,r){var n={muteSave:!0,muteRedraw:!0,muteDispatchEvent:!0},i=e.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();i.unshift("No Grouping"),i.forEach((function(t){e.setAggregationAtLevel(o,t,r,n)})),e._saveState(),t.getColumnStateMaster().columnAggregationModel.setAggregation(o,r),e.dispatchAggregationChanged()},this.setClearAggregationFlag=function(o){e.isClearAggregationFlag(o)||(void 0===e.aggregationModel[e.CLEAR_AGGREGATION_KEY]&&(e.aggregationModel[e.CLEAR_AGGREGATION_KEY]=[]),t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().forEach((function(e){t.getChooseColumnModel().removeChooseColumn(o,e)})),e.aggregationModel[e.CLEAR_AGGREGATION_KEY].push(o),t.getColumnStateMaster().columnAggregationModel.setAggregation(o,"clearAggregation"),e._saveState())},this.unsetClearAggregationFlag=function(t){if(e.isClearAggregationFlag(t)){var o=e.aggregationModel[e.CLEAR_AGGREGATION_KEY].indexOf(t);o>-1&&(e.aggregationModel[e.CLEAR_AGGREGATION_KEY].splice(o,1),e._saveState())}},this.isClearAggregationFlag=function(t){return void 0!==e.aggregationModel[e.CLEAR_AGGREGATION_KEY]&&e.aggregationModel[e.CLEAR_AGGREGATION_KEY].indexOf(t)>-1},this.getAggregationAtLevel=function(o,r){if(e.isClearAggregationFlag(o))return"";if(void 0===e.aggregationModel[r]||void 0===e.aggregationModel[r][o]){var n=t.getColumnStateMaster().columnAggregationModel.getAggregation(o);return null==n||""===n?e.DEFAULT_AGGREGATION:n}return e.aggregationModel[r][o]},this.getClearAggregationMetrics=function(){return void 0===e.aggregationModel[e.CLEAR_AGGREGATION_KEY]?[]:e.aggregationModel[e.CLEAR_AGGREGATION_KEY]},this.getAllValueColumns=function(){var o=[];return t.gridOptions.columnApi.getAllGridColumns().forEach((function(t){t.colDef.isMetric&&!e.isClearAggregationFlag(t.colDef.colId)&&o.push(t)})),o},this.getAggregationValueInternal=function(t){var e,o,r,n={v:0,fv:""},i=(null===(e=t.column)||void 0===e?void 0:e.colDef.headerName)||t.colDef.headerName,a=(null===(o=t.data)||void 0===o?void 0:o[i])||(null===(r=t.node)||void 0===r||null===(r=r.aggData)||void 0===r?void 0:r[i]);return void 0===a||(n.v=a.rawValue,n.fv=a.value),n},this.getGrandTotalsInternal=function(){var e={},o=t.getColumnStateMaster().getAllMetrics();t.gridOptions.api.forEachNodeAfterFilter((function(t,r){var n=t.aggData?t.aggData:t.data,i=0===t.level;n&&i&&Object.keys(n).forEach((function(t){var r=t;n[t]&&Object.keys(n[t]).length>2&&(r=Object.keys(n[t])[0]),-1!==o.indexOf(r)&&(void 0===e[t]?e[t]=n[t].rawValue:e[t]+=n[t].rawValue)}))}));var r=t.getAggregationHelper().formatMetricHelper.bind(t.getAggregationHelper());return Object.keys(e).forEach((function(t){var o=r(e[t],t);e[t]={rawValue:e[t],value:o}})),e},this.getGrandTotals=function(o,r){var n;n="string"==typeof o?o:o.colDef.headerName,void 0===r&&(r="");var i,a="";i=0===t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length?"No Grouping":t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal()[0];var l=e.getAggregationAtLevel(n,i);if(null===l||"choosecolumn"===l)return e.getGrandTotals(e.gridContext.getChooseColumnModel().getChooseColumn(n,i));if(""===l&&(l=r),""!==l){var s={metric:n,aggFunction:l};if("ratio"===l){var u,d,c=t.getRatioAggregationModel().getRatioState()[n];if(c&&c.Numerator===n)s={metric:n,aggFunction:"sum"},u=e.dataMapper.getColumnAggregate(s);else{var h=e.getAggregationAtLevel(c.Numerator,i);s={metric:c.Numerator,aggFunction:h},u=e.dataMapper.getColumnAggregate(s)}if(c&&c.Denominator===n)s={metric:n,aggFunction:"sum"},d=e.dataMapper.getColumnAggregate(s);else{var g=e.getAggregationAtLevel(c.Denominator,i);s={metric:c.Denominator,aggFunction:g},d=e.dataMapper.getColumnAggregate(s)}var p,m="",f="";if(p=u.v/d.v,!isNaN(p)&&isFinite(p)){var v=+c.Precision;c.PercentageFormat&&(f="%",p*=100),m=p.toFixed(v)+f}else p="";a={fv:m,v:p}}else a=0===t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length?e.dataMapper.getColumnAggregate(s,{format:e._getFormatType(l)}):void 0===o.colDef?"":e.dataMapper.getGroupAggregate(o.colDef.pivotKeys,{metric:n,aggFunction:l},{format:e._getFormatType(l)})}return a},this._initAggregation=function(o){if(!e.gridOptions.chartDataMapper){e.dataMapper=null;var n=e.gridOptions.interface.getDataAsArray(),i=e.gridOptions.interface.getTitles(),a=e.gridOptions.interface.numAttributes,l=e.gridOptions.interface.data;e.gridOptions.chartDataMapper=new r.chartDataMapperBase(n,i,a,{data:l})}e.dataMapper||(e.dataMapper=e.gridOptions.chartDataMapper),e._cleanAggregationModel();var s=[];o&&o.detail?o.detail.forEach((function(t){s.push(t.colDef.colId)})):s=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();var u=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal();s=u.concat(s),e.dataMapper.groupByAttributes(s)},this._setAggregationModel=function(t){e.aggregationModel=t,e._saveState(),e.dispatchAggregationChanged()},this._getFormatType=function(t){return void 0===e.formatLookupDict[t]?"default":e.formatLookupDict[t]},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.aggregationModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t={}),e.aggregationModel=t},this._cleanAggregationModel=function(){for(var o=e.gridContext.getColumnStateMaster(),r=o.getAllAttributes(),n=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),i=0;i<n.length;i++)-1===r.indexOf(n[i])&&o.columnRowGroupingModel.ungroupRows()},e._restoreState(),this.dispatchAggregationChanged=function(){e.eventManager.createAndDispatchEvent("aggregationChanged",null)},this.getAllValuesAtDepthInternal=function(e,o){var r=[],i=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length>0,a=t.getMetricToRowsModel().isMetricToRows(),l=[];a&&i&&(l=t.getColumnStateMaster().columnPivotModel.getPivotResultMetricToRowColNames(e));var s="Metrics"===o?1:0;return t.gridOptions.api.forEachNodeAfterFilter((function(t){if(t.field===o){var u=t.group?t.aggData:t.data,d=!1;a&&(l.length>0?n.each(l,(function(t){u[t]&&r.push(u[t].rawValue)})):t.getGroupKeys().slice(0,t.level+s).indexOf(e)>-1&&(d=!0)),i&&0===l.length?Object.keys(u).forEach((function(t){var o=u[t];(Object.keys(o)[0]===e||d)&&r.push(o.rawValue)})):u&&u[e]?r.push(u[e].rawValue):d&&r.push(u.Values.rawValue)}})),r},this.getAllValuesOfColumn=function(e){var o=[],r=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length>0,n=t.getMetricToRowsModel().isMetricToRows();return t.gridOptions.api.forEachNodeAfterFilter((function(t){var i=t.group?t.aggData:t.data,a=!1;n&&t.getGroupKeys().indexOf(e)>-1&&(a=!0),r&&t.group?Object.keys(i).forEach((function(t){var r=i[t];(Object.keys(r)[0]===e||a)&&r.rawValue&&o.push(r.rawValue)})):i&&i[e]?o.push(i[e].rawValue):i&&i.Metrics===e&&o.push(i.Values.rawValue)})),o},this.getAllValuesAtDepth=function(o,r){for(var n=e.dataMapper.getGroupElements(""),i=[],a=t.getTitles().slice(0,t.gridOptions.chartDataMapper.numAttributes);a.indexOf(r)>-1&&n.length>=1&&n[0].attribute&&n[0].attribute!==r;){var l=[];n.forEach((function(t){l=l.concat(e.dataMapper.getGroupElements(t.path))})),n=l,Array.isArray(n[0].attribute)&&(n[0].attribute=n[0].attribute[0])}var s=[];n.forEach((function(t){var n,a=e.getAggregationAtLevel(o,r);i.push(a),""!==a&&null!==a||(a="sum"),n=e.dataMapper.getGroupAggregate(t.path,{metric:o,aggFunction:a}).v,s.push(n)}));for(var u=0;u<n.length;u++){var d=n[u],c=i[u];if("ratio"===c){var h=t.getRatioAggregationModel().getRatioState()[o],g=t.getColumnStateMaster().columnAggregationModel.getAggregation(h.Numerator),p=t.getColumnStateMaster().columnAggregationModel.getAggregation(h.Denominator);"ratio"!==g&&"choosecolumn"!==g&&null!=g||(g="sum"),"ratio"!==p&&"choosecolumn"!==p&&null!=p||(p="sum");var m=e.dataMapper.getGroupAggregate(d.path,{metric:h.Numerator,aggFunction:g}).v/e.dataMapper.getGroupAggregate(d.path,{metric:h.Denominator,aggFunction:p}).v;if(isNaN(m)||!isFinite(m))m=NaN;else{var f=Number(h.Precision);m=Number(m.toFixed(f)),h.PercentageFormat&&(m*=100,m=Number(m.toFixed(f)))}s[u]=m}else if("choosecolumn"===c){for(var v=t.getChooseColumnModel().getChooseColumn(o,r),C=v;""!==C;)""!==(C=t.getChooseColumnModel().getChooseColumn(C,r))&&(v=C);var T=t.getColumnStateMaster().columnAggregationModel.getAggregation(v);s[u]=e.dataMapper.getGroupAggregate(d.path,{metric:v,aggFunction:T}).v}}return s},this.extractValueFromObject=function(t,e){return"string"!=typeof t?(console.error("columnType expected string got",i(t)),""):null==e?(console.error("valueObject expected object got ",e),""):"attribute"!==t&&"metric"!==t?(console.error("columnType could be either attribute or metric but was ",t),""):"attribute"===t?e:void 0!==e.rawValue?e.rawValue:void console.error("ValueObject has incorrect structure")},this.getPercentileValue=function(t,e){var o=e/100*(t.length+1),r=o-Math.floor(o);return t[Math.floor(o)]+(t[Math.ceil(o)]-t[Math.floor(o)])*r},this.getMinMaxValueForTrendlines=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"No Grouping";if("string"!=typeof t||"string"!=typeof o)return console.warn("getMinMaxValueForTrendlines expected string, string got ",i(t),i(o)),{min:0,max:0};var r=e.gridContext.getScalingModel().getGroupName(t),n={},a=e.gridContext.getMicroChartTypeModel();if(null!==r)n=this.getMinMaxValueByScalingGroup(t,o);else{var l=this.getMinMaxValuesForGivenPair(t,o),s=e.getMetricValuesForGivenPair(t,o);"fixedvalue"===a.getChartStartAxis(t)?n.min=a.getChartStartAxisValue(t):"percentile"===a.getChartStartAxis(t)?n.min=this.getPercentileValue(s,a.getChartStartAxisValue(t)):n.min=l.min,"fixedvalue"===a.getChartEndAxis(t)?n.max=a.getChartEndAxisValue(t):"percentile"===a.getChartEndAxis(t)?n.max=this.getPercentileValue(s,a.getChartEndAxisValue(t)):n.max=l.max}return n},this.getMinMaxValueByScalingGroup=function(t,o){if("string"!=typeof t||"string"!=typeof o)return console.warn("getMinMaxValueByScalingGroup expected string, string got ",i(t),i(o)),{min:0,max:0};var r={min:null,max:null};return e.gridContext.getScalingModel().getColumnsInGroupByColumn(t).forEach((function(t){var n=e.getMetricValuesForGivenPair(t,o),i=Math.min.apply(null,n),a=Math.max.apply(null,n);(null===r.min||i<=r.min)&&(r.min=i),(null===r.max||a>r.max)&&(r.max=a)})),r},this.getMetricValuesForGivenPair=function(o,r){var n=[];if("root"===r)n=e.getAllValuesOfColumn(o,r);else if("Grand Totals"===r)n.push(e.getGrandTotals(o,void 0).v);else if("No Grouping"!==r)n=e.getAllValuesAtDepthInternal(o,r);else{var i="attribute";t.getTitles().indexOf(o)>=t.gridOptions.chartDataMapper.numAttributes&&(i="metric"),e.gridContext.getMetricToRowsModel().isMetricToRows()&&"Values"!==o&&"metric"===i?e.gridContext.gridOptions.api.forEachLeafNode((function(t){t.data.Metrics===o&&n.push(t.data.Values.rawValue)})):e.gridContext.gridOptions.api.forEachLeafNode((function(t){n.push(e.extractValueFromObject(i,t.data[o]))}))}return n},this.getMinMaxValuesForGivenPair=function(t,o){var r={min:0,max:0},n=void 0;return void 0===e.minValuePair&&(e.minValuePair={}),void 0===e.minValuePair[t]&&(e.minValuePair[t]={}),void 0===e.minValuePair[t][o]&&(void 0===n&&(n=e.getMetricValuesForGivenPair(t,o)),e.minValuePair[t][o]=Math.min.apply(null,n)),r.min=e.minValuePair[t][o],void 0===e.maxValuePair&&(e.maxValuePair={}),void 0===e.maxValuePair[t]&&(e.maxValuePair[t]={}),void 0===e.maxValuePair[t][o]&&(void 0===n&&(n=e.getMetricValuesForGivenPair(t,o)),e.maxValuePair[t][o]=Math.max.apply(null,n)),r.max=e.maxValuePair[t][o],r},this.getMetricValuesForGivenKey=function(t){if("string"==typeof t)return[];e.targetValues=[];var o=t.getThresholdSource(),r=t.getThresholdGroup();return e.getMetricValuesForGivenPair(o,r)},e.eventManager.addEventListener("columnRowGroupChanged","gridContext",e._initAggregation)}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridPropertyEditorMapper:()=>a});var r=o(4);function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}var a=function(t){var e=this;e.gridContext=t,this.getShowHideColumnState=function(){for(var t=e.gridContext.getColumnStateMaster().columnShowHideModel.getShowHideColumnState(),o=[],r=0;r<t.length;r++){var n={},i=t[r].headerName;n.label=i,n.id=i,n.name=i,n.value=i,n.checked=!t[r].hidden,"ag-Grid-AutoColumn"!==i&&o.push(n)}return o},this._sortingUiHelper=function(t,o){var r='<div class="col-md-12 margin-top-10 field_container">';return r+="</select>",""===t.metric?r+='<select class="form-control sorting-fixed-width-70" name="sortingAttribute" id="placeholderselect">':r+='<select class="form-control sorting-fixed-width-70" name="sortingAttribute" id="popupsortingAttribute">',r+='<option value="" selected></option>'+e.propertyEditorAttributeMetricHtml(t.metric,"")+"</select>",r+='<select class="form-control sorting-fixed-width-70" name="sortingField" id="popupsortingField">',"asc"===t.sort?r+=' <option value="asc" selected>Ascending</option>                                                        <option value="desc">Descending</option>':r+=' <option value="asc">Ascending</option>                                <option value="desc" selected>Descending</option>',r+="</select>",r+=o?'<select class="form-control sorting-fixed-width-70" name="sortingGroupField" id="popupsortingGroupField">':'<select class="form-control sorting-fixed-width-70" style="display:none;" name="sortingGroupField" id="popupsortingGroupField">',(r+=e.thresholdEditorGroupingHtml(t.grouping,!0)+"</select>")+'<span class="buttonset">                                <button type="button" name="sortingDelete" id="sortingDelete" class=" btn btn-default  sorting-fixed-width-10" data-value="sortingDelete">X</button>                            </span>                        </div>'},this.getAdvanceSortUI=function(o){var r=["Values"],n="";t.getMetricToRowsModel().isMetricToRows()||(r=t.getColumnStateMaster().getAllMetrics());var i=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();return o.forEach((function(t){var o=!1;0!==i.length&&r.indexOf(t.metric)>-1&&(o=!0),n+=e._sortingUiHelper(t,o)})),n+=e._sortingUiHelper({metric:"",grouping:"No Grouping"},0!==i.length)},this.thresholdEditorGroupingHtml=function(o,r){void 0===o&&(o="No Grouping");var n=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();return n.unshift("No Grouping"),n.indexOf("Metrics")>-1&&!r&&n.splice(n.indexOf("Metrics"),1),e._thresholdEditorSelectedHtmlGenerator(n,n,o)},this.setThresholdEditorGroupingOptions=function(o,n,i){void 0===n&&(n="No Grouping");var a=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),l=t.gridOptions.context.propMenu.getColDefinitions(),s=[];t.grandTotalsModel.isGrandTotalsVisible()&&a.unshift("Grand Totals"),t.getMetricToRowsModel().isMetricToRows()&&(a.unshift("Metrics"),t.getMetricGroupingModel().isMetricGroupsPresent()&&(a=r.filter(a,(function(e){return e!==t.getMetricGroupingModel().getGroupColHeading()})))),a.unshift("No Grouping"),a.indexOf("Metrics")>-1&&!i&&a.splice(a.indexOf("Metrics"),1),r.each(l,(function(t){var e=a.indexOf(t.headerName);-1!==e&&(s[e]={sId:t.columnId,value:t.headerName,text:t.headerName},t.headerName===n&&(s[e].selected="selected"))})),r.each(a,(function(t,e){s[e]||(s[e]={value:t,text:t},t===n&&(s[e].selected="selected"))})),e.setDropdownOptionsToElement(o,s,n,(function(t){return t}))},this.gridChartColumns=function(){var o=t.gridOptions.chartDataMapper.titles.slice();return e._thresholdEditorJSONGenerator(o,o)},this.propertyEditorAttributeMetricHtml=function(o){var r,i=t.getTitles().splice(0,t.gridOptions.chartDataMapper.numAttributes);return r=t.getMetricToRowsModel().isMetricToRows()?["Values"]:t.getColumnStateMaster().getAllMetrics(),i=[].concat(n(i),n(r)),e._thresholdEditorSelectedHtmlGenerator(i,i,o)},this.setThresholdEditorMetricsOptions=function(o,n){var i=t.gridOptions.context.propMenu.getColDefinitions(),a=[];r.each(i,(function(t){a.push({sId:t.columnId,value:t.headerName,text:t.headerName}),t.headerName===n&&(a[a.length-1].selected="selected")})),e.setDropdownOptionsToElement(o,a,n,(function(t){return t}))},this.setDropdownOptionsToElement=function(e,o,n,i){var a=[],l=t.gridOptions.context.propMenu;r.each(o,(function(t){a.push(i?i(t):{value:t,text:t}),n===t&&(a[a.length-1].selected="selected")})),l.setDropdownOptions(e,a,(function(t){return t}))},this.thresholdEditorConditionHtml=function(e,o,r){var n=this.gridContext.gridOptions.context.propMenu.getMenuElement("#popupthresholdColSelect").find(":selected").val();void 0===r&&(r="Select");var i=["Select","Equal To","Greater Than","Less Than","Greater Than Equal To","Less Than Equal To","Between","Top","Bottom","Top Percentage","Bottom Percentage","Between Percentage","Above Average","Below Average","n Scale Thresholds"],a=t.gridOptions.context.propMenu.getThresholdsUIManager().getThresholdConditionsBySourceType(n);a.length>0&&(i=[],a.forEach((function(t){i.push(t.text)}))),this.setDropdownOptionsToElement(vitaraJQ("#popupthresholdCondition"),i,r)},this.thresholdEditorTargetHtml=function(t){var o=["Cell","Row"];return e._thresholdEditorSelectedHtmlGenerator(o,o,t)},this._thresholdEditorJSONGenerator=function(t,e){var o=[];return t.forEach((function(t,r){o.push({text:t,value:e[r]})})),o},this._thresholdEditorSelectedHtmlGenerator=function(t,e,o){void 0===o&&(o=t[0]);for(var r="",n=0;n<t.length;n++)r+=t[n]===o?'<option value="'+e[n]+'" selected>'+t[n]+"</option>":'<option value="'+e[n]+'">'+t[n]+"</option>";return r}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartHeaderFormattingView:()=>r});var r=function(t){var e=this;e.eventDispatcher=t.getEventDispatcher(),this.applyHeaderBgColor=function(){var e=t.getThemeFormattingModel().themeHeaderFormattingModel.getBgColor();t.getThemeFormattingModel().themeHeaderFormattingModel.isBackgroundTransparent()?(vitaraJQ("#".concat(t.gridOptions.id," .ag-header")).addClass("vitara-transparent-bg"),vitaraJQ("#".concat(t.gridOptions.id," .ag-header-container")).addClass("vitara-transparent-bg")):(vitaraJQ("#".concat(t.gridOptions.id," .ag-header")).removeClass("vitara-transparent-bg"),vitaraJQ("#".concat(t.gridOptions.id," .ag-header-container")).removeClass("vitara-transparent-bg")),t.updateCssRule("#".concat(t.gridOptions.id," .ag-header-group-cell {background-color: ").concat(e," }"),"#".concat(t.gridOptions.id," .ag-header-group-cell"))},this.applyPivotHeaderColor=function(){t.updateCssRule("#".concat(t.gridOptions.id," .ag-header-group-cell {\n                display: flex;\n                justify-content: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getTextAlign(),";\n                background: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getBgColor(),";\n            }"),"#".concat(t.gridOptions.id," .ag-header-group-cell")),t.updateCssRule("#".concat(t.gridOptions.id," .ag-header-group-cell .ag-header-group-cell-label {\n                align-self: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getVerticalAlign(),";\n            }"),"#".concat(t.gridOptions.id," .ag-header-group-cell .ag-header-group-cell-label")),t.updateCssRule("#".concat(t.gridOptions.id," .ag-header-group-cell .ag-header-group-text {\n                font-size: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontSize()+"px",";\n                font-family: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontFamily(),";\n                color: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontColor(),";\n                font-weight: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontWeight(),";\n                font-style: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontStyle(),";\n                text-decoration: ").concat(t.getThemeFormattingModel().themeHeaderFormattingModel.getTextDecoration(),";\n            }"),"#".concat(t.gridOptions.id," .ag-header-group-cell .ag-header-group-text"))},this.applyHeaderClass=function(){vitaraJQ(".ag-header-group-cell-no-group",t.gridOptions.gridArea).addClass("vitara-header vitara-grid-grouped-header-cell")},this.wrap_header_content=function(){var e=t.getThemeFormattingModel().themeHeaderFormattingModel.getHeight();t.gridOptions.api.setHeaderHeight(e+3)},t.gridOptions.api.addEventListener("columnResized",(function(t){e.wrap_header_content()})),this.refreshHeader=function(){t.gridOptions.api.refreshHeader(),e.wrap_header_content(),e.applyHeaderColors()},this.applyHeaderColors=function(){e.applyHeaderClass(),e.applyHeaderBgColor(),e.applyPivotHeaderColor()},e.eventDispatcher.addEventListener("aggregationChanged",null,(function(e){t.gridOptions.api.setHeaderHeight(t.getThemeFormattingModel().getThemeHeaderFormattingModel().getHeight())}))}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartDefaultRenderer:()=>c});var r=o(280),n=o(45),i=o(283),a=o(4);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){d(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function d(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===l(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var c=function(t){var e=this;e.lp=null,this.DEFAULTS={fontSize:12,cellpadding:24,"icon-color":"#9fa3a8",textLabel:{start:5,limit:0,padding:15}},this.styleMapper={"font-size":"fontSize","text-decoration":"textDecoration","font-style":"fontStyle","font-family":"fontFamily","font-weight":"fontWeight","text-align":"textAlign",color:"color","background-color":"bgColor"},this.alignMapper={"flex-start":"left",center:"center","flex-end":"right"},this.grandTotalCellRendererHelper=function(){var e={},o=t.getGrandTotalsModel();return e["font-weight"]=o.getGrandTotalsValueWeight(),e["text-decoration"]=o.getGrandTotalsValueDecoration(),e["font-style"]=o.getGrandTotalsValueStyle(),e["font-family"]=o.getGrandTotalsValueFamily(),e["font-size"]=o.getGrandTotalsValueSize()+"px",e["justify-content"]=o.getGrandTotalsValueAlign(),e["text-align"]="flex-end"===o.getGrandTotalsValueAlign()?"right":"flex-start"===o.getGrandTotalsValueAlign()?"left":o.getGrandTotalsValueAlign(),e["align-items"]=o.getGrandTotalsValueVerticalAlign(),e.color=o.getGrandTotalsValueColor(),e},this.groupedCellRendererHelper=function(o,r){var n={},i=t.getSubTotalsModel();return i.isUseBodyStyle()?e.detailedCellRendererHelper(o,r):(r||(n.display="flex"),"ag-Grid-AutoColumn"===o.column.colDef.colId?(n["font-size"]=i.getSubTotalsTextSize()+"px",n["text-decoration"]=i.getSubTotalsTextDecoration(),n["font-style"]=i.getSubTotalsTextStyle(),n["font-family"]=i.getSubTotalsTextFamily(),n["font-weight"]=i.getSubTotalsTextWeight(),n["justify-content"]=i.getSubTotalsTextAlign(),n.color=i.getSubTotalsTextColor(),n["background-color"]=i.getSubTotalsTextBgColor(),n["align-items"]=i.getSubTotalsTextVerticalAlign(),n["text-align"]=this.alignMapper[n["justify-content"]]):(n["font-size"]=i.getSubTotalsValueSize()+"px",n["text-decoration"]=i.getSubTotalsValueDecoration(),n["font-style"]=i.getSubTotalsValueStyle(),n["font-family"]=i.getSubTotalsValueFamily(),n["font-weight"]=i.getSubTotalsValueWeight(),n["justify-content"]=i.getSubTotalsValueAlign(),n.color=i.getSubTotalsValueColor(),n["background-color"]=i.getSubTotalsValueBgColor(),n["align-items"]=i.getSubTotalsValueVerticalAlign(),n["text-align"]=this.alignMapper[n["justify-content"]]),n)},this.detailedCellRendererHelper=function(e,o){var r={},n=t.getColumnFormattingModel().columnBodyFormattingModel,i=e.column.colDef.headerName,l=t.getThemeFormattingModel().themeBodyFormattingModel.isBackgroundTransparent(),s=["center-cols-viewport","root-wrapper","floating-top-container","floating-bottom-container","floating-top","row"];return"ag-Grid-AutoColumn"===e.column.colDef.colId&&(i=e.column.colDef.colId),l?a.forEach(s,(function(e){vitaraJQ("#".concat(t.gridOptions.id," .ag-").concat(e)).addClass("vitara-transparent-bg")})):a.forEach(s,(function(e){vitaraJQ("#".concat(t.gridOptions.id," .ag-").concat(e)).removeClass("vitara-transparent-bg")})),o||(r.display="flex"),r["font-size"]=n.getFontSize(i)+"px",r["text-decoration"]=n.getTextDecoration(i),r["font-style"]=n.getFontStyle(i),r["font-family"]=n.getFontFamily(i),r["font-weight"]=n.getFontWeight(i),r["justify-content"]=n.getTextAlign(i),r["align-items"]=n.getVerticalAlign(i),r.color=n.getFontColor(i),r["background-color"]=n.getBgColor(i),r["text-align"]=this.alignMapper[r["justify-content"]],r},this.rendererSelector=function(o){var r=o.node.group,n=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();return"trendline"!==t.getPlotTypeSelectorModel().getPlotType(o.column.colDef.headerName)||"variance"!==t.getMicroChartTypeModel().getChartType(o.column.colDef.headerName)&&"variancepercentage"!==t.getMicroChartTypeModel().getChartType(o.column.colDef.headerName)?r&&t.getChartTypeModel().isGridChart()&&n.length>=1&&"trendline"===t.getPlotTypeSelectorModel().getPlotType(o.column.colDef.headerName)&&o.node.field===t.formatNames(n[0])&&!t.getAggregationWrapperModel().isClearAggregationFlag(o.column.colDef.headerName)?t.getTrendlineRenderer().collectAggValuesAndDrawChart(o):e.metricRenderer(o):e.varianceRenderer(o)},this.defaultCellStyles=function(t){e.applyStyleOnElement(t,{display:"inherit","align-items":"inherit",width:"inherit",height:"inherit","justify-content":"inherit"})},this.thresholdRendererHelper=function(o){var r=o.params,n=o.elementValue,i=o.element_fv,a=o.element,l=null,s=null,d={},c=r.column.colDef.headerName;if(t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length>0&&r.node.rowGroupIndex===t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length-1&&(s=t.getThresholdModel().getThresholdStyles(o.metricName,n,r.node.rowGroupIndex,o.rowData)),null!==s?l=s:(t.getMetricToRowsModel().isMetricToRows()&&"Values"===c&&(c=o.metricName),l=t.getThresholdModel().getThresholdStyles(c,n,r.node.rowGroupIndex,o.rowData)),l)if("Cell"===l.formatTarget){var h,g=document.createElement("span"),p=document.createElement("span");if(a=e.applyStyleOnElement(a,l.format),g=e.applyStyleOnElement(g,l.format),p.innerHTML=i||n,""!==l.format.icon.icon){var m=t.getThresholdModel().getIconClassName(l.format.icon),f=document.createElement("span");if("bar"===m){var v,C,T,M=null,y=l.model.source,S=null,b=y;t.getMetricToRowsModel().isMetricToRows()&&(y="Values"),r.column.primary||(y=(y=t.gridOptions.columnApi.getPivotResultColumn(r.column.colDef.pivotKeys,y)).colId),r.node.group?(M=null===(C=r.node.aggData[y])||void 0===C?void 0:C.rawValue,S=e.calculateBarWidth(M,b,r.node.field,r,!0)):(M=null===(T=r.node.data[y])||void 0===T?void 0:T.rawValue,S=e.calculateBarWidth(M,b,"No Grouping",r,!0));var x=!l.format.icon["icon-only"],w=l.format.icon["icon-color"];""===w&&(w=e.DEFAULTS["icon-color"]);var A={barPosition:S,color:w,chartType:"variance",floatLabel:!1,showLabel:x,showAxisLine:!1,params:r,formattedValue:i,labelColor:l.format.color,iconType:m},G=e.drawBar(A);f=G.barSvgContainer,v=G.barLabel,a.appendChild(f),p=v.firstChild,v.innerHTML="",d.barLabelWrapper=v,e.applyStyleOnElement(g,{"background-color":""})}else{var V;if(l.format.icon.customIcon){var O=e.getThresholdIcon(r,l);O&&f.appendChild(O)}else{vitaraJQ(f).addClass(m);var _=l.format.icon,E={color:_["icon-color"],"font-size":_.size+"px"};f=e.applyStyleOnElement(f,E)}null!==(V=l.format.icon)&&void 0!==V&&V["icon-only"]&&(p=void 0),g.appendChild(f)}}null!==(h=p)&&void 0!==h&&h.nodeType&&g.appendChild(p),d.wrapper=g,e.applyStyleOnElement(r.eParentOfValue,{"background-color":l.format["background-color"]})}else"Row"===l.formatTarget&&e.applyStyleOnElement(r.eGridCell.offsetParent,{"background-color":l.format["background-color"]});return u({element:a,elementValue:n},d)},this.getLabelProvider=function(){return e.lp||(e.lp=new i.labelProvider),e.lp},this.getCustomLabel=function(o){var r=o.params,n=o.data,i=o.colValue,a=o.colId,l=o.headerName,s=o.thresholdHtml;if(!i)return i;var u=t.getCustomFormatEditorModel().getCellCustomFormat(a||l,l||a),d=t.getCustomFormatEditor().getLabelDefaultMacros();if(!u)return i;var c,h=r.node,g=t.gridOptions.chartDataMapper,p=t.getCustomTooltipModel();h.group&&((c={})[h.field]=h.key,!r.value||!l||n&&n[l]||(c[l]=r.value),c=vitaraJQ.extend(c,n)),vitaraJQ.isEmptyObject(n)&&(n=h.data);var m=h?p.formDataRow(c||n,g):null;if(s&&m){var f=g.titles.indexOf(l);-1!==f&&m[f]&&(m[f].sf=s)}return e.getLabelProvider().getCreateGridCustomLabel(u,m,p.formDataPoint(s||i),d,g,p.formDataElement(r))},this.attributeRenderer=function(o){var r,n,i=t.isGrouped(o),a=document.createElement("div"),l=document.createElement("span"),s="",u=void 0,d="",c=o.node.group?o.node.aggData:o.node.data;if(!o.value||null!==(r=(n=o.value).startsWith)&&void 0!==r&&r.call(n,"<img")||!/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/.test(o.value)){var h;if(s=i?e.groupedCellRendererHelper(o):e.detailedCellRendererHelper(o),e.applyStyleOnElement(o.eParentOfValue,s),o.value&&(d=o.value,!o.node.group)){e.defaultCellStyles(a);var g={rowData:c,element:a,elementValue:d,params:o};d=(u=e.thresholdRendererHelper(g)).elementValue,a=u.element}var p=o.node.group?o.node.field:o.column.colId;"ag-Grid-AutoColumn"===o.column.colId&&(p=o.column.colDef.headerName)===t.gridOptions.localeTextFunc("Group","Group")&&(p="Group");var m={params:o,data:c,colValue:"number"!=typeof d||isNaN(d)?d:""+d,headerName:o.column.colDef.headerName,colId:p,thresholdHtml:null===(h=u)||void 0===h||null===(h=h.wrapper)||void 0===h?void 0:h.outerHTML};l.innerHTML=e.getCustomLabel(m),l.style.width="100%",a.appendChild(l)}else a=document.createElement("img"),d=o.value,a.src=d;return o.eParentOfValue.addEventListener("click",e.handleCellClick(o)),a},this.handleCellClick=function(e){var o=t;return function(t){t&&(t.stopPropagation(),void 0!==e.node.id&&e.node.id>=0&&void 0!==e.colDef.colId&&void 0!==e.value?void 0!==e.colDef.pivotValueColumn?o.gridOptions.cellClickCallback.call(t,e.node,e.colDef.pivotValueColumn.colId):o.gridOptions.cellClickCallback.call(t,e.node,e.colDef.colId):e.node.group&&e.node.key&&t.srcElement&&"img"!==t.srcElement.localName&&void 0!==e.node.field&&"Grand Total"!=e.node.key&&o.gridOptions.cellGroupClickCallback.call(t,e))}},this.getMetricName=function(e){var o=e.column.colDef.headerName;if(t.getMetricToRowsModel().isMetricToRows()){var r=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().indexOf("Metrics");if(void 0!==e.node.data&&void 0!==e.node.data.Metrics)o=e.node.data.Metrics;else if(r>-1&&e.node.level>=r){for(var n=e.node,i=e.node.level;i!==r;)n=n.parent,i-=1;o=n.key}else{var a=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().indexOf("Metrics");a>-1&&e.column.colDef.pivotKeys&&(o=e.column.colDef.pivotKeys[a])}}return o},this.getThresholdIcon=function(o,r){var n,i=o.node.group||"No Grouping",a=t.getAggregationWrapperModel().getMinMaxValuesForGivenPair(o.column.colDef.headerName,i),l={};return isNaN(a[0])||isNaN(a[1])?(n=0,l.infographicFillPercentage=100):n=e._getBarStartPositon(a.min,a.max),l.groupingLevel=o.node.group||"No Grouping",l.marker="vitaraCustomSVGFile",l.scaling="Fixed",l.markerColor=r.format.icon["icon-color"],l.fill=!0,l.fontSize=r.format.icon.size,l.fillMetric=o.column.colDef.headerName,l.markerCountMax=1,l.markerCountMin=1,l.infographicCustomSVGEnabled=!0,l.infographicCustomSVGPath=r.format.icon.icon,l.unfillColor="",l.isThresholdMarker=!0,e.markerRenderer(o,l,n,a,"customCellClass")},this._getRangeForBar=function(e,o,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.getMicroChartTypeModel().getChartType(n),a=2,l=98,s=0;return r&&(s=16,"variancepercentage"===i&&(s+=3)),e<0&&o>0?[a+s,l-s]:o<0?[a+s,l]:[a,l-s]},this._getBarStartPositon=function(t,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e._getRangeForBar(t,o,r);if(t>=0)return n[0];if(o<0)return n[1];var i=vitaraD3.scale.linear().domain([t,o]).range(n);return i(0)},this._getBarEndPosition=function(t,o,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=e._getRangeForBar(o,r,n,i),l=a[1],s=a[0],u=[1,l],d=[o,r];if(r===o)return l;if(r<0)u=[-l,-1];else if(o<0){var c=e._getBarStartPositon(o,r,n);t<0?(d=[o,0],u=[-c+s,0]):(d=[0,r],u=[0,l-c])}var h=vitaraD3.scale.linear().domain(d).range(u);return h(t)},this.calculateBarWidth=function(o,r,n,i,a){"Values"===r&&i&&i.node&&i.node.data&&(r=i.node.data.Metrics);var l=t.getAggregationWrapperModel().getMinMaxValueForTrendlines(r,"column"===t.getMicroChartTypeModel().getAxisSpecificity(r)?"root":n),s=l.min,u=l.max;return{origin:e._getBarStartPositon(s,u,a),barPosition:e._getBarEndPosition(o,s,u,a,r)}},this._barLabelRender=function(t,o,r){var i=r.origin,a=r.barWidth,l=r.originOffset,s=r.axisLine,u=t.formattedValue,d=t.floatLabel,c=t.showLabel,h=n.utils.createHTMLElement("span",{class:"text"}),g=n.utils.createHTMLElement("div",{}),p=function(t,o){return t&&t.textLabel&&void 0!==t.textLabel[o]?t.textLabel[o]:e.DEFAULTS.textLabel[o]},m=(p(t,"padding"),p(t,"limit"),p(t,"start"));if(h.text(u),g.css({display:"inherit",position:"absolute",width:"100%","justify-content":"inherit","align-items":"inherit"}),h.css({display:c?"inline-block":"none",position:"relative","z-index":1,padding:"0px 3px","text-decoration":o["text-decoration"]}),c)if(d){var f=a>0?.38*a:l,v=n.utils.createHTMLElement("span",{style:"display: inline-block; position: relative;"});if(t.data>=0){if("flex-start"===o["justify-content"]){var C=s+l;v.css("width","".concat(C,"%")),h.css("width","".concat(100-C,"%"))}else if("center"===o["justify-content"]){var T=s+f;v.css("width","".concat(T,"%")),h.css("width","".concat(100-T,"%"))}else{var M=i+a+l;v.css("width","".concat(M,"%")),h.css("width","".concat(100-M,"%"))}h.css("text-align","start"),g.append(v[0]),g.append(h[0])}else{if("flex-start"===o["justify-content"]){var y=s-l;h.css("width","".concat(y,"%")),v.css("width","".concat(100-y,"%"))}else if("center"===o["justify-content"]){var S=s-f;h.css("width","".concat(S,"%")),v.css("width","".concat(100-S,"%"))}else{var b=i-l;h.css("width","".concat(b,"%")),v.css("width","".concat(100-b,"%"))}h.css("text-align","end"),g.append(h[0]),g.append(v[0])}}else g.css({display:"block","text-align":o["justify-content"]}),h.css("margin-left","".concat(m,"%")),g.append(h[0]);return g[0]},this.drawBar=function(t){var o,r=t.params,n=document.createElement("div"),i=t.barPosition;e.defaultCellStyles(n);var a=document.createElement("div");a.classList.value="div-outer-div";var l=document.createElement("div");l.classList.value="div-percent-bar";var s={position:"relative",width:"100%",height:r.node.rowHeight+"px"},d={width:"".concat(100,"%")};e.applyStyleOnElement(a,d);var c=Math.abs(i.barPosition),h=i.origin,g=h;i.barPosition<0&&(g=(h=i.barPosition+i.origin)+c);var p,m=vitaraD3.select(l).append("svg"),f=m.append("g"),v=.75*r.node.rowHeight,C=.1*r.node.rowHeight,T=h-1,M=1;i.barPosition>=0&&(T=h+c-1),"variancepercentage"===t.chartType&&(v="4",C=.4*r.node.rowHeight,f.append("rect").attr("x","".concat(T,"%")).attr("y","".concat(C-3)).attr("width","10").attr("height","10").attr("fill","#000000"),M+=3),f.append("rect").attr("x","".concat(h,"%")).attr("y","".concat(C)).attr("width","".concat(c,"%")).attr("height","".concat(v)).attr("fill",t.color),t.showAxisLine&&f.append("line").style("stroke","black").attr("x1","".concat(g,"%")).attr("x2","".concat(g,"%")).attr("y1",0).attr("y2",100),p=null!=r&&null!==(o=r.node)&&void 0!==o&&o.rowPinned?e.grandTotalCellRendererHelper():e.detailedCellRendererHelper(r);var y=this._barLabelRender(t,p,{origin:h,barWidth:c,originOffset:M,axisLine:g}),S=u(u({},p),{},{"border-top":"0px","border-bottom":"0px"}),b={width:"100%",height:r.node.rowHeight+"px"};return e.applyStyleOnElement(r.eParentOfValue,S),e.applyStyleOnElement(m.node(),b),e.applyStyleOnElement(f.node(),b),e.applyStyleOnElement(l,s),r.eParentOfValue.style.padding="0%","variance"===t.chartType&&t.showAxisLine,a.appendChild(l),n.appendChild(a),{barSvgContainer:n,barLabel:y}},this.varianceRenderer=function(o){var r=o.column.colDef.headerName,n=document.createElement("div");e.defaultCellStyles(n);var i=e.getMetricValueFromParams(o),a=i.v;if(i.fv,null!=a&&""!==a){var l;l=o.node.group?e.calculateBarWidth(a,r,o.node.field,o,!0):e.calculateBarWidth(a,r,"No Grouping",o,!0);var s=t.getMicroChartTypeModel().getChartColor(r);a<0&&(s=t.getMicroChartTypeModel().getChartNegativeBarColor(r));var u=e.getMetricName(o),d=e.getMetricValueObject(i,u),c={headerName:r,barPosition:l,floatLabel:!0,showLabel:!0,showAxisLine:!0,data:a,chartType:t.getMicroChartTypeModel().getChartType(o.column.colDef.headerName),color:s,formattedValue:d.fv,params:o},h=e.drawBar(c),g=h.barSvgContainer,p=h.barLabel;return n.appendChild(g),n.appendChild(p),o.eParentOfValue.addEventListener("click",e.handleCellClick(o)),n}},this.getMetricValueFromParams=function(e){return e?e.value&&void 0!==e.value.rawValue?{v:e.value.rawValue,fv:e.value.value}:t.getAggregationWrapperModel().getAggregationValueInternal(e):{}},this.getMetricValueObject=function(e,o){var r=e.fv,n=e.v;return void 0===r&&(r=""),void 0===n&&(n=""),""!==n&&(n=Number(n)),t.getMetricToRowsModel().isMetricToRows()&&""!==r&&(r=t.getAggregationHelper().formatMetricHelper.bind(t.getAggregationHelper())(n,o)),{v:n,fv:r}},this.getPivotRowData=function(e){if(!t.getMetricToRowsModel().isMetricToRows()&&e.colDef.pivotKeys&&e.node.aggData&&"Total"!==e.colDef.headerName){for(var o=t.getGridOptions().chartDataMapper,r=o.numAttributes,n=o.numColumns,i={},a=r;a<n;a++){var l=e.columnApi.getPivotResultColumn(e.colDef.pivotKeys,o.titles[a]).colId;i[o.titles[a]]=e.node.aggData[l]}return i}},this.metricRenderer=function(o){var r,n,i=document.createElement("div"),a=document.createElement("span"),l="",s=e.getMetricValueFromParams(o),d=o.column.colDef.headerName,c=t.isGrouped(o),h=o.node.group?o.node.aggData:o.node.data,g=t.getColumnStateMaster().columnAggregationModel;if(c){var p=g.getAggregation(d);if("choosecolumn"===p){var m=o.node.aggData,f=o.node.field,v=t.getChooseColumnModel().getChooseColumn(d,f);""===v&&(v=d),o.column.primary||(v=(v=t.gridOptions.columnApi.getSecondaryPivotColumn(o.column.colDef.pivotKeys,v)).colId),void 0!==m[v].rawValue&&(s.v=m[v].rawValue),void 0!==m[v].value&&(s.fv=m[v].value)}else"clearAggregation"===p&&(s={v:0,fv:""})}var C=e.getMetricName(o),T=e.getMetricValueObject(s,C),M=T.fv,y=T.v;t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().length>0&&(h=this.getPivotRowData(o)),n=c?e.groupedCellRendererHelper(o):e.detailedCellRendererHelper(o),e.applyStyleOnElement(o.eParentOfValue,n),e.defaultCellStyles(i),l=M;var S="No Grouping";o.node.group&&(S=o.node.field);var b=t.getCustomMarkerModel().getMarker(C,S),x=null;if(""===b){var w,A={params:o,elementValue:y,element:i,rowData:h,element_fv:M,metricName:C};i=(x=e.thresholdRendererHelper(A)).element,""===x.elementValue&&(l=x.elementValue),null!==(w=x)&&void 0!==w&&w.barLabelWrapper&&(a=x.barLabelWrapper)}var G={params:o,colValue:l,colId:o.column.colId,headerName:d,data:h,thresholdHtml:null===(r=x)||void 0===r||null===(r=r.wrapper)||void 0===r?void 0:r.outerHTML};if(t.getMetricToRowsModel().isMetricToRows()){var V={};if(h)h[C]&&(V[C]=h[C],V[C][C]=y);else{var O={value:l};O[C]=y,V[C]=O}G=u(u({},G),{},{data:V,headerName:C})}a.innerHTML=e.getCustomLabel(G),a.style.width="100%";var _=null;if(""===b)i.appendChild(a);else{var E=t.getAggregationWrapperModel().getMinMaxValuesForGivenPair(o.column.colDef.headerName,S),D=e._getBarStartPositon(E.min,E.max);(_=e.markerRenderer(o,b,D,E,"customCellClass"))&&i.appendChild(_)}return o.eParentOfValue.appendChild(i),_&&b&&"AutoScale"!==b.scaling&&_.setAttribute("width","100%"),o.eParentOfValue.addEventListener("click",e.handleCellClick(o)),i},this.appendCustomSvgMarker=function(t,e,o,i,a,l,s){var u=l;return u.appendChild(n.utils.createSVGElement("svg")),u.children[0].setAttribute("width",o.toString()),u.children[0].setAttribute("height",i.toString()),u.style.padding="2px",(0,r.GridInfographicHelper)({svgOptions:{infoMarkerType:"vitaraCustomSVGFile",infographicCustomSVGEnable:a.svgOptions["custom-path"],infographicCustomSVGPath:a.svgOptions["infographic-path"]},trgBounds:{x:t,y:e,width:o,height:i},point:{id:(new Date).getTime()},container:u.children[0],id:"marker-custom",inverted:a.inverted}),u},this.markerRenderer=function(o,i,a,l,s){var u={},d=t.getTitles().indexOf(o.column.colDef.headerName)>=t.gridOptions.chartDataMapper.numAttributes;u.userOptions={};var c;c=o.node.group?t.getThemeFormattingModel().getThemeBodyFormattingModel().getGroupedHeight():t.getThemeFormattingModel().getThemeBodyFormattingModel().getHeight();var h,g=null,p=o.node.group?o.node.aggData:o.node.data;h=p[o.column.colDef.headerName];var m=i.maxNumber;m=void 0===m?l.max:+m;var f=i.fillMetric;void 0===f&&(f=o.column.colDef.headerName);var v=t.getAggregationWrapperModel().getMinMaxValuesForGivenPair(i.fillMetric,i.groupingLevel).min;p&&p[i.fillMetric]&&void 0!==p[i.fillMetric].rawValue&&(g=p[i.fillMetric].rawValue),g&&d||(g=0);var C,T="",M=0;h&&(void 0!==h.value&&(T=h.value),void 0!==h.rawValue&&(M=h.rawValue)),C=d?e._getBarEndPosition(M,l.min,l.max):0,(M<0||v<0)&&(C=a+C);var y=Math.abs(C-a)*o.column.actualWidth/100;u.shapeArgs={width:c,height:C-a==100?y-23:y},void 0===T&&(T=""),void 0===M&&(M=""),""!==M&&(M=Number(M)),u.id=s,u.userOptions.scalingType=i.scaling,u.userOptions.fill=i.fill,u.userOptions.fillMetric=i.fillMetric,u.userOptions.unfilledColor=i.unfillColor?i.unfillColor:"#ccc",u.userOptions.repeatMarker=!0,u.userOptions.unitsPerRow=1,u.userOptions.barStartPos=a*o.column.actualWidth/100,"Fixed"===i.scaling?u.userOptions.barEndPos=100:u.userOptions.barEndPos=C*o.column.actualWidth/100,u.userOptions.infoMarkerType=i.marker,u.userOptions.fillColor=i.markerColor,u.userOptions.cellWidth=o.column.actualWidth,u.userOptions.minMarkerCount=i.markerCountMin,u.userOptions.maxMarkerCount=i.markerCountMax,u.userOptions.minValue=v,u.userOptions.infographicUnfilledColor=i.unfillColor?i.unfillColor:"#ccc",u.userOptions.maxValue=m,u.userOptions.currentValue=g,u.userOptions.infographicFillPercentage=i.infographicFillPercentage,u.userOptions.isThresholdMarker=i.isThresholdMarker;var S=i.fontSize;""!==S&&void 0!==S||(S=t.getColumnFormattingModel().columnBodyFormattingModel.getFontSize(o.column.colDef.headerName)),o.node.group&&!t.getSubTotalsModel().isUseBodyStyle()&&(S=t.getSubTotalsModel().getSubTotalsValueSize()),S=""===S?e.DEFAULTS.fontSize:S,u.userOptions.fontSize=S,u.userOptions.infographicFillDirection="Left to Right",u.userOptions.mapDataToScale=i.mapDataToScale,u.userOptions.infographicCustomSVGEnabled=i.infographicCustomSVGEnabled,u.userOptions.infographicCustomSVGPath=i.infographicCustomSVGPath;var b=S;void 0!==b&&i.isThresholdMarker||(b=o.column.actualWidth-this.DEFAULTS.cellpadding/2),u.container=n.utils.createSVGElement("svg"),u.containerWidth=b;var x=(0,r.GridInfographicHelper)(u,[],!0);if(x)return x},this.applyStyleOnElement=function(t,e){if(t)return e&&e["font-family"]&&(e["font-family"]="'".concat(e["font-family"],"'")),Object.keys(e).forEach((function(o){t.style[o]=e[o]})),t}}},(t,e,o)=>{o.r(e),o.d(e,{GridInfographicHelper:()=>i});var r=o(281),n=o(282),i=function(t){var e=t.userOptions,o=r.default.createSVGElement("g"),i=e.infographicCustomSVGEnabled;if(r.default.createSVGIconDimensionMappingDict(i,e.infographicCustomSVGPath,e),(i||VitaraGlobal.vitaraSVGDimensionDict)&&(!i||"File Not Available"!==VitaraGlobal.vitaraCustomSVGDict[e.infographicCustomSVGPath]&&VitaraGlobal.vitaraCustomSVGDict&&VitaraGlobal.vitaraCustomSVGDict[e.infographicCustomSVGPath])){var l=r.default.getInfographicIconProperties(e.infoMarkerType,i,e.infographicCustomSVGPath);if(!vitaraJQ.isEmptyObject(l)){var s=e.infographicFillPercentage;void 0===s&&(s=r.default.getPercentageForSelectedMetric(e));var u=r.default.getDefaultFillOptions(e,s,l,t.id),d=l.Dimensions.width/l.Dimensions.height,c=parseFloat(e.fontSize),h=1.2*(c=isNaN(c)?12:c);if(e.scalingType&&"AutoScale"!==e.scalingType){var g=r.default.getIconsToDraw(e),p=Math.round(g)-parseInt(g);if(g=parseInt(g),"Fixed"===e.scalingType)for(var m=e.unitsPerRow?e.unitsPerRow:1,f=0;f<m;f++){var v=h/m,C=(h-3)/m,T=C/l.Dimensions.height,M=v*d,y=[],S=0;e.isThresholdMarker||(S=r.default.getUpdatedCurrentGridIconPosition(e,M));for(var b=0;b<e.maxMarkerCount;){var x="translate(".concat(S,",").concat((h-C)/2,")");x+="scale(".concat(T,")"),y[b]=a(l.path,x,0,S,e.fillColor,i),b<g?(y[b].setAttribute("fill",e.fillColor),y[b].setAttribute("stroke",e.fillColor),o.appendChild(y[b])):b===g&&p?((u=r.default.getDefaultFillOptions(e,50,l,t.id)).fillDirection=e.currentValue<0?"Right to Left":"Left to Right",(0,n.fillIconsUsingClipPath)(u,o,y[b],!0)):(y[b].setAttribute("fill",e.unfilledColor),y[b].setAttribute("stroke",e.unfilledColor),o.appendChild(y[b])),S+=M*(e.currentValue>=0?1:-1),b+=1}}else for(var w=e.unitsPerRow?e.unitsPerRow:1,A=0;A<w;A++){for(var G=h/w,V=(h-3)/w,O=V/l.Dimensions.height,_=G*d,E=[],D=r.default.getUpdatedCurrentGridIconPosition(e,_),F=0;F<g;){F+=1;var I="translate(".concat(D,",").concat((h-V)/2,")");I+="scale(".concat(O,")"),E[F]=a(l.path,I,0,D,e.fillColor,i),o.appendChild(E[F]),D+=_*(e.currentValue>=0?1:-1)}if(p){var k="translate(".concat(D,",").concat((h-V)/2,")");k+="scale(".concat(O,")"),E[F]=a(l.path,k,0,D,e.fillColor,i),u.fillPercentage=50,u.fillDirection=e.currentValue>=0?"Left to Right":"Right to Left",(0,n.clipIconsUsingClipPath)(u,o,E[F],!0)}}}else for(var R=e.unitsPerRow?e.unitsPerRow:1,P=0;P<R;P++){var B=h/R,L=(h-3)/R,N=L/l.Dimensions.height,H=B*d,J=[],Q=void 0,U=void 0,W=e.barStartPos;e.currentValue<0&&(W-=H);var j=0,z=parseInt(t.shapeArgs.height/H);if(1==+e.fill&&s<100){var K=100/z;Q=parseInt(s/K),U=s%K/K*100}for(;j<z;){var Z="translate(".concat(W,",").concat((h-L)/2,")");Z+="scale(".concat(N,")"),J[j]=a(l.path,Z,0,W,e.fillColor,i),1==+e.fill&&s<100?j<Q?(J[j].setAttribute("fill",e.fillColor),J[j].setAttribute("stroke",e.fillColor),o.appendChild(J[j])):j===Q&&U>0?(u=r.default.getDefaultFillOptions(e,U,l,t.id),(0,n.fillIconsUsingClipPath)(u,o,J[j],!0)):(J[j].setAttribute("fill",e.unfilledColor),J[j].setAttribute("stroke",e.unfilledColor),o.appendChild(J[j])):o.appendChild(J[j]),W+=H*(e.currentValue>=0?1:-1),j+=1}if(j>0){var Y="translate(".concat(W,",").concat((h-L)/2,")");Y+="scale(".concat(N,")"),J[j]=a(l.path,Y,0,W,e.fillColor,i);var q=t.shapeArgs.height%H/H*100;if(q){var X={fillDirection:"Left to Right",fillColor:e.fillColor,id:t.id,pathDimensions:l.Dimensions,fillPercentage:q};1==+e.fill&&s<100?(j<Q||(X.fillColor=e.unfilledColor),(0,n.clipIconsUsingClipPath)(X,o,J[j],!0)):o.appendChild(J[j])}}else{h-=3;var $=t.shapeArgs.height/l.Dimensions.width,tt=h/l.Dimensions.height,et={scale:{X:N=$>tt?tt:$,Y:N},path:l.path,fillColor:e.fillColor};e.minValue<0&&(et.translate={X:e.barStartPos,Y:0});var ot=r.default.getInfographicSVGICon(et,e.infographicCustomSVGEnabled);1==+e.fill&&s<100?(0,n.fillIconsUsingClipPath)(u,o,ot,!0):o.appendChild(ot)}}return o&&t.container?(t.container.appendChild(o),void 0!==t.containerWidth&&(t.container.setAttribute("height",h),t.container.setAttribute("width",t.containerWidth)),t.container):o}console.error("unable to reterive Icon Properties")}else console.error("Unable to create SVG dictionary")},a=function(t,e,o,n,i,a){var l;return a?(l=r.default.createSVGElement("g")).appendChild(vitaraJQ(t)[0].cloneNode(!0)):(l=r.default.createSVGElement("path")).setAttribute("d",t),l.setAttribute("transform",e),l.setAttribute("x",o),l.setAttribute("y",n),l.setAttribute("fill",i),l.setAttribute("stroke",i),l}},,(t,e,o)=>{o.r(e),o.d(e,{clipIconsUsingClipPath:()=>a,fillIconsUsingClipPath:()=>i});var r=o(45);const n=function(t,e,o,n){const i={"Bottom to top":{x:0,y:t.pathDimensions.height*(100-t.fillPercentage)/100,height:t.pathDimensions.height,width:t.pathDimensions.width},auto:{x:0,y:t.pathDimensions.height*(100-t.fillPercentage)/100,height:t.pathDimensions.height,width:t.pathDimensions.width},"Top to Bottom":{x:"bar"===n?o:0,y:"bar"!==n?o:0,height:t.pathDimensions.height*t.fillPercentage/100,width:t.pathDimensions.width},"Left to Right":{x:0,y:0,height:1.1*t.pathDimensions.height,width:t.pathDimensions.width*t.fillPercentage/100},"Right to Left":{x:t.pathDimensions.width*(100-t.fillPercentage)/100,y:0,height:1.1*t.pathDimensions.height,width:t.pathDimensions.width}}[t.fillDirection?t.fillDirection:"Bottom to top"];var a=r.utils.createSVGElement("clipPath");a.setAttribute("id",t.id);var l=r.utils.createSVGElement("rect");l.setAttribute("x",i.x),l.setAttribute("y",i.y),l.setAttribute("width",i.width),l.setAttribute("height",i.height),a.appendChild(l),e.appendChild(a)},i=function(t,e,o,r,i,a){r?n(t,e):n(t,vitaraJQ("defs")[0],a),o.setAttribute("fill",t.unfilledColor),o.setAttribute("stroke",t.unfilledColor),e.appendChild(o);const l=o.cloneNode(!0);r?(l.setAttribute("fill",t.fillColor),l.setAttribute("stroke",t.fillColor)):(l.removeAttribute("fill"),o.removeAttribute("stroke")),i&&o.setAttribute("clip-path",i),l.setAttribute("clip-path",`url(#${t.id})`),e.appendChild(l)},a=function(t,e,o,r){n(t,r?e:vitaraJQ("defs")[0]),r?(o.setAttribute("fill",t.fillColor),o.setAttribute("stroke",t.fillColor)):(o.removeAttribute("fill"),o.removeAttribute("stroke")),o.setAttribute("clip-path",`url(#${t.id})`),e.appendChild(o)}},,(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartThresholdModel:()=>d});var r=o(285),n=o(286),i=o(287),a=o(320),l=o(4);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var d=function(t,e){var o=this;o.thresholdModel=[],o.stateKey=e,o.stateManager=t.getStateManager(),o.thresholdObjects=[],o.thresholdMapper=o.getThresholdMapper(),o.eventDispatcher=t.getEventDispatcher(),o.gridContext=t,this.isThresholdModelCleared=function(){return 0===o.thresholdObjects.length},this.getThresholdCol=function(){return o.col||(o.col=new i.GridThresholdCollection),o.col},this.resolveThresholds=function(){var t=o.getThresholdCol();o.thresholdObjects.forEach((function(e){var r=t.getThreshold(e.getThresholdCondition(),o.getThresholdPropertyState(e)),n=o.getSourceIndex(e,o.gridContext.getTitles());r.compute(o.getAsDataArray(o.gridContext.getAggregationWrapperModel().getMetricValuesForGivenKey(e),n),n,o.getTargetIndex(null,e.getThresholdMetric()),o.getValueMarker(),o.gridContext.gridOptions.chartDataMapper),t.getThresholdIndexById(r.getModel().getID())>-1?t.update(r):t.add(r)}))},this.valueMarker="v",this.getValueMarker=function(){return o.valueMarker},this.getThresholdPropertyState=function(t){return{state:o.thresholdMapper.thresholdPropertyStateMapper(t)}},this.getAsDataArray=function(e,o){var r="t";if(o>=t.gridOptions.chartDataMapper.numAttributes&&(r="v"),"number"==typeof o){var n=[];return l.each(e,(function(t){var e=[];e[o]=u({},r,t),n.push(e)})),n}return l.map(e,(function(t){return[u({},r,t)]}))},this.getSourceIndex=function(t,e){var o=e.indexOf(t.getThresholdSource());return o>-1?o:0},this.getTargetIndex=function(e,o){return t.getTitles().indexOf(o)},this.getThresholdStyles=function(e,r,n,i){var a,l=void 0;void 0!==i&&(l={},Object.keys(i).forEach((function(t){"object"===s(i[t])?l[t]=i[t].rawValue:l[t]=i[t]})));var u="No Grouping";void 0!==n&&(u=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal()[n]),(null!=i&&i["ag-Grid-AutoColumn"]||"Grand Totals"===(null==i?void 0:i[null===(a=t.defaultColumnDef)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.colId]))&&(u="Grand Totals"),void 0===o.col&&o.resolveThresholds();var d=!1;t.getTitles().indexOf(e)>=t.gridOptions.chartDataMapper.numAttributes&&(d=!0),l&&t.getMetricToRowsModel().isMetricToRows()&&d&&(l[e]=l.Values);var c=o.col.getThresholdFormat({target:e,v:r,groupTarget:u,rowData:l});return void 0===c||void 0===c[e]?null:c[e]},this.getIconClassName=function(t){return"bar"===t.icon?t.icon:(void 0===o.vitaraMarker&&(o.vitaraMarker=a.VitaraMarker.getInstance()),"fa-"+o.vitaraMarker.getMarkerClass(t.icon))},this.filterThresholdsByGroupingTarget=function(t){return o._filterThresholdByKey("groupTarget",t)},this.filterThresholdByFormattingTarget=function(t){return o._filterThresholdByKey("formatTarget",t)},this.filterThresholdByCondition=function(t){return o._filterThresholdByKey("condition",t)},this.filterThresholdById=function(t){return o._filterThresholdByKey("ID",t)},this.filterThresholdsByGID=function(t){return o._filterThresholdByKey("gid",t)},this.filterThresholdByMetric=function(t){return o._filterThresholdByKey("metric",t)},this.getThresholdIndex=function(t){return o._getThresholdIndex(t.getThresholdID())},this._filterThresholdByKey=function(t,e){var r=[];return o.thresholdObjects.forEach((function(o){var n=o._getThresholdValueByKey(t);e===n&&r.push(o)})),r},this._getThresholdIndex=function(t){return l.findIndex(o.thresholdObjects,(function(e){return e.getThresholdID()===t}))},this.createThreshold=function(t,e,n){if(void 0===t.ID&&(t.ID="VCT-"+Math.random().toString(36).substring(2,12).toUpperCase()),0===o.filterThresholdById(t.ID).length){t.sourceType="metric";var i=new r.VitaraGridThreshold(o,t,e);return o.addThreshold(i),n||o._saveState(),i}},this.addThreshold=function(t){var e=t.getThresholdIndex();"number"==typeof e&&-1!==e?(t.setThresholdIndex(""),o.addThresholdAtIndex(t,e)):o.thresholdObjects.push(t)},this.addThresholdAtIndex=function(t,e){o.thresholdObjects.splice(e,0,t)},this.deleteThresholdById=function(t,e,r){o._deleteThresholdByKey("ID",t,e,r)},this.deleteThresholdByGID=function(t,e,r){o.filterThresholdsByGID(t).forEach((function(t){o._deleteThresholdByKey("ID",t.getThresholdID(),e,r)}))},this.deleteThresholdByGroupingTarget=function(t,e,r){o._deleteThresholdByKey("groupTarget",t,e,r)},this.deleteThresholdByMetric=function(t,e,r){o._deleteThresholdByKey("metric",t,e,r)},this.deleteThresholdExceptId=function(t,e){o._deleteThresholdByKey("ID",t,e,!0)},this.deleteThresholdExceptGroupingTarget=function(t,e){o._deleteThresholdByKey("groupTarget",t,e,!0)},this.deleteThresholdExceptMetric=function(t,e){o._deleteThresholdByKey("metric",t,e,!0)},this.clearThresholdModel=function(){o._deleteThresholdHelper(o.thresholdObjects),o.thresholdObjects=[],o._saveState()},this._deleteThresholdByKey=function(t,e,r,n){for(var i=[],a=[],l=0;l<o.thresholdObjects.length;l++){var s=!1,u=o.thresholdObjects[l]._getThresholdValueByKey(t);s=Array.isArray(e)?e.indexOf(u)>-1:u===e,n&&(s=!s),s?i.push(o.thresholdObjects[l]):a.push(o.thresholdObjects[l])}o.thresholdObjects=a,void 0!==r&&!0!==r||(o._deleteThresholdHelper(i),o._saveState(!0))},this._deleteThresholdHelper=function(t){t.forEach((function(t){var e=o.col.getThreshold(t.getThresholdCondition(),o.getThresholdPropertyState(t));o.col.remove(e)}))},this.thresholdSeriesCreator=function(t,e){var r=function(t,e){return Math.round(t*e*100)/100},n=+e.count;n||(n=5),""===t.iconSize&&(t.iconSize=9);var i=o.getThresholdCSRFromOptions(e,n);if(i){var a=(100/n).toFixed(2);t.condition="Between Percentage";for(var l=0;l<n;l++)this.data=vitaraJQ.extend(!0,{},t),i.colorRanges?this.data.values=[i.colorRanges[l],i.colorRanges[l+1]]:(this.data.values=[r(a,l),r(a,l+1)],l===n-1&&(this.data.values=[r(a,l),100])),i.colorScales&&i.colorScales[l]&&("Cell"===t.formatTarget?this.data.iconColor=i.colorScales[l]:this.data.backgroundColor=i.colorScales[l]),o.createThreshold(this.data),this.data={}}},this.thresholdGradientCreator=function(t,e){var r=function(t,e){return Math.round(t*e*100)/100},n=+e.count;n||(n=5),""===t.iconSize&&(t.iconSize=9);var i=o.getThresholdCSRFromOptions(e,n);if(i){t.gid="GID"+Math.random().toString(36).substring(2,12).toUpperCase();var a=(100/n).toFixed(2),l=!0;"number"==typeof t.thresholdIndex&&t.thresholdIndex>-1&&(l=!1);for(var s=0;s<n;s++)t.condition=0===s?"Bottom Percentage":s===n-1?"Top Percentage":"Between Percentage",t.ID=t.gid+"-"+s,this.data=vitaraJQ.extend(!0,{},t),l||(this.data.thresholdIndex+=s),i.colorRanges?(this.data.values=[i.colorRanges[s],i.colorRanges[s+1]],s!==n-1&&0!==s||(this.data.values=[i.colorRanges[s+1]-i.colorRanges[s]])):(this.data.values=[r(a,s),r(a,s+1)],s===n-1&&(this.data.values=[100-r(a,s)]),0===s&&(this.data.values=[r(a,s+1)-r(a,s)])),i.colorScales&&i.colorScales[s]&&("Cell"===t.formatTarget?"icon"===t.formatProperty?this.data.iconColor=i.colorScales[s]:"text"===t.formatProperty?this.data.formatColor=i.colorScales[s]:this.data.backgroundColor=i.colorScales[s]:this.data.backgroundColor=i.colorScales[s]),o.createThreshold(this.data),this.data={}}},this.getThresholdCSRFromOptions=function(t,e){if(1==+t.customGradientStops&&t.csr)return{colorScales:t.csr.colorScales,colorRanges:t.csr.colorRanges};if(""!==t.startClr&&""!==t.endClr){var o=d3Interpolate.interpolateLab(t.startClr,t.endClr);return{colorScales:d3Interpolate.quantize(o,+e)}}},this.getAllThresholds=function(){return o.thresholdObjects},this.notifyModelUpdate=function(){o._saveState()},this.getStateRepresentation=function(){var t={},e=[];return o.thresholdObjects.forEach((function(t){e.push(t.getThresholdModel())})),o.thresholdModel=e,t[o.stateKey]=o.thresholdModel,t},this._saveState=function(t){o.stateManager.saveSpecificState(o),t&&o.gridContext.redrawRows()},this._restoreState=function(){var t=o.stateManager.restoreSpecificState(o.stateKey);void 0===t&&(t=[]),o.thresholdModel=o._cleanState(t),void 0===o.thresholdCol&&(o.thresholdCol=o.getThresholdCol()),o.thresholdCol.setThresholds([])},this._cleanState=function(t){for(var e=[],o=0;o<t.length;o++){var r=t[o];void 0!==r.ID&&""!==r.ID&&e.push(r)}return e},this._initThresholds=function(){o.thresholdModel.forEach((function(t){o.thresholdObjects.push(new r.VitaraGridThreshold(o,t,!0))}))},this.updateThresholdStyle=function(t){var e=o.filterThresholdById(t.getThresholdID()),r=o.getThresholdCol();if(1===e.length){e=e[0];var n=r.getThreshold(e.getThresholdCondition(),o.getThresholdPropertyState(e));if(r.getThresholdByID(t.getThresholdID())){var i=r.getThresholdIndexById(n.getModel().getID());r.remove(n);var a=o.getSourceIndex(t,o.gridContext.getTitles());n.compute(o.getAsDataArray(o.gridContext.getAggregationWrapperModel().getMetricValuesForGivenKey(t),a),a,o.getTargetIndex(null,t.getThresholdMetric()),o.getValueMarker(),o.gridContext.gridOptions.chartDataMapper),r.add(n,i)}else o.resolveThresholds()}o._saveState(!0)},this.appendThresholdStyle=function(t){var e=o.getThresholdCol(),r=e.getThreshold(t.getThresholdCondition(),o.getThresholdPropertyState(t)),n=o.getSourceIndex(t,o.gridContext.getTitles());r.compute(o.getAsDataArray(o.gridContext.getAggregationWrapperModel().getMetricValuesForGivenKey(t),n),n,o.getTargetIndex(null,t.getThresholdMetric()),o.getValueMarker(),o.gridContext.gridOptions.chartDataMapper),e.add(r)},this.updateThresholdModel=function(){var e=t.getTitles();e.push("Total"),o.deleteThresholdExceptMetric(e,!1);var r=o.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();r.push("No Grouping","Grand Totals"),o.deleteThresholdExceptGroupingTarget(r,!0),o._saveState()},o._restoreState(),o._initThresholds(),o.updateThresholdModel(),o.resolveThresholds(),o.eventDispatcher.addEventListener("thresholdChanged",null,o.updateThresholdStyle),o.eventDispatcher.addEventListener("thresholdCreated",null,o.updateThresholdStyle),o.eventDispatcher.addEventListener("columnRowGroupChanged","gridOptions",o.updateThresholdModel),o.eventDispatcher.addEventListener("filterChanged","gridOptions",o.resolveThresholds),o.eventDispatcher.addEventListener("columnPivotChanged","gridOptions",o.resolveThresholds),o.eventDispatcher.addEventListener("columnRowGroupChanged","gridOptions",o.resolveThresholds),o.eventDispatcher.addEventListener("rowDataUpdated","gridOptions",o.resolveThresholds),o.eventDispatcher.addEventListener("aggregationChanged",null,o.resolveThresholds)};vitaraJQ.extend(d.prototype,{getThresholdMapper:function(){return this.thresholdMapper||(this.thresholdMapper=new n.VitaraGridThresholdMapper(this)),this.thresholdMapper}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridThreshold:()=>r});var r=function(t,e,o){var r=this;r.thresholdObject={},r.parentKey="threshold",r.eventDispatcher=t.gridContext.getEventDispatcher(),this.getThresholdGroup=function(){return r._getThresholdValueByKey("groupTarget")},this.getThresholdGroupID=function(){return r._getThresholdValueByKey("groupTargetId")},this.getThresholdID=function(){return r._getThresholdValueByKey("ID")},this.getThresholdGID=function(){return r._getThresholdValueByKey("gid")},this.getThresholdMetric=function(){return r._getThresholdValueByKey("metric")},this.getThresholdMetricID=function(){return r._getThresholdValueByKey("metricId")},this.getThresholdSource=function(){return r._getThresholdValueByKey("source")},this.getThresholdSourceID=function(){return r._getThresholdValueByKey("sourceId")},this.getSourceType=function(){return r._getThresholdValueByKey("sourceType")},this.getThresholdValues=function(){var t=r._getThresholdValueByKey("values");return Array.isArray(t)?t.slice():t},this.getThresholdFormatColor=function(){return r._getThresholdValueByKey("formatColor")},this.getThresholdFormatBackgroundColor=function(){return r._getThresholdValueByKey("backgroundColor")},this.getThresholdIcon=function(){return r._getThresholdValueByKey("icon")},this.getThresholdIconColor=function(){return r._getThresholdValueByKey("iconColor")},this.getThresholdIconSize=function(){return r._getThresholdValueByKey("iconSize")},this.getThresholdIconOnly=function(){return r._getThresholdValueByKey("iconOnly")},this.getThresholdFormattingTarget=function(){return r._getThresholdValueByKey("formatTarget")},this.getThresholdFormattingProperty=function(){return r._getThresholdValueByKey("formatProperty")},this.getThresholdCondition=function(){return r._getThresholdValueByKey("condition")},this.getThresholdColorsInvert=function(){return r._getThresholdValueByKey("invertColors")},this.getThresholdCustomStops=function(){return r._getThresholdValueByKey("customStops")},this.getThresholdIndex=function(){return r._getThresholdValueByKey("thresholdIndex")},this.getThresholdEnableMarker=function(){var t=r._getThresholdValueByKey("enableMarker");return void 0!==t&&t},this.isCustomIcon=function(){return r._getThresholdValueByKey("customIcon")},this.setThresholdGroup=function(t,e,o){r._setThresholdValueByKey("groupTarget",t,e),o&&r.checkout()},this.setThresholdGroupID=function(t,e,o){r._setThresholdValueByKey("groupTargetId",t,e),o&&r.checkout()},this.setThresholdID=function(t,e,o){r._setThresholdValueByKey("ID",t,e),o&&r.checkout()},this.setThresholdSource=function(e,o,n){r._setThresholdValueByKey("source",e,o);var i="attribute";t.gridContext.getTitles().indexOf(e)>=t.gridContext.gridOptions.chartDataMapper.numAttributes&&(i="metric"),r._setThresholdValueByKey("sourceType",i,o),n&&r.checkout()},this.setThresholdSourceID=function(t,e,o){r._setThresholdValueByKey("sourceId",t,e),o&&r.checkout()},this.setThresholdMetric=function(t,e,o){r._setThresholdValueByKey("metric",t,e),o&&r.checkout()},this.setThresholdMetricID=function(t,e,o){r._setThresholdValueByKey("metricId",t,e),o&&r.checkout()},this.setThresholdValues=function(t,e,o){r._setThresholdValueByKey("values",t,e),o&&r.checkout()},this.setThresholdFormatColor=function(t,e,o){r._setThresholdValueByKey("formatColor",t,e),o&&r.checkout()},this.setThresholdFormatBackgroundColor=function(t,e,o){r._setThresholdValueByKey("backgroundColor",t,e),o&&r.checkout()},this.setThresholdIcon=function(t,e,o){r._setThresholdValueByKey("customIcon",!1),r._setThresholdValueByKey("icon",t,e),o&&r.checkout()},this.setThresholdCustomIcon=function(t,e,o){r.setThresholdIcon(t,e,!1),r._setThresholdValueByKey("customIcon",!0),o&&r.checkout()},this.setThresholdIconColor=function(t,e,o){r._setThresholdValueByKey("iconColor",t,e),o&&r.checkout()},this.setThresholdIconSize=function(t,e,o){r._setThresholdValueByKey("iconSize",t,e),o&&r.checkout()},this.setThresholdIconOnly=function(t,e,o){r._setThresholdValueByKey("iconOnly",t,e),o&&r.checkout()},this.setThresholdFormattingTarget=function(t,e,o){r._setThresholdValueByKey("formatTarget",t,e),o&&r.checkout()},this.setThresholdFormattingProperty=function(t,e,o){r._setThresholdValueByKey("formatProperty",t,e),o&&r.checkout()},this.setThresholdCondition=function(t,e,o){r._setThresholdValueByKey("condition",t,e),o&&r.checkout()},this.setThresholdColorsInvert=function(t,e,o){r._setThresholdValueByKey("invertColors",t,e),o&&r.checkout()},this.setThresholdCustomStops=function(t,e,o){r._setThresholdValueByKey("customStops",t,e),o&&r.checkout()},this.setThresholdIndex=function(t,e,o){r._setThresholdValueByKey("thresholdIndex",t,e),o&&r.checkout()},this.setThresholdEnableMarker=function(t,e,o){r._setThresholdValueByKey("enableMarker",t,e),o&&r.checkout()},this.getThresholdModel=function(){return r.thresholdObject},this.removeField=function(t){r._setThresholdValueByKey(t,void 0,!0)},this.checkout=function(){"Row"===r.getThresholdFormattingTarget()&&["icon","iconOnly","iconColor","iconSize","formatColor"].forEach((function(t){r.removeField(t)}));var t=r.getThresholdCondition();if("Above Average"===t||"Below Average"===t)r.setThresholdValues([],!0);else if("Equal To"===t||"Top"===t||"Bottom"===t||"Top Percentage"===t||"Bottom Percentage"===t||"Greater Than"===t||"Less Than"===t||"Greater Than Equal To"===t||"Less Than Equal To"===t){var e=r.getThresholdValues();e=[e[0]],r.setThresholdValues(e,!0)}r.notifyModelUpdate()},this._initThresholdObject=function(){r.thresholdObject=e},this._setThresholdValueByKey=function(t,e,o){r.thresholdObject[t]=e,void 0!==o&&!1!==o||r.notifyModelUpdate()},this._getThresholdValueByKey=function(t){return void 0!==r.thresholdObject[t]?r.thresholdObject[t]:""},this.notifyModelUpdate=function(){t.updateThresholdStyle(r)},this.notifyModelCreated=function(){void 0!==o&&!1!==o||t.appendThresholdStyle(r)},r._initThresholdObject(),r.notifyModelCreated()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridThresholdMapper:()=>r});var r=function(t){this.thresholdPropertyStateArrayMapper=function(e){var o=[];return e.forEach((function(e){var r=t.thresholdPropertyStateMapper(e);o.push(r)})),o},this.thresholdPropertyStateMapper=function(t){var e={};return e.id=t.getThresholdID(),e.target=t.getThresholdMetric(),e.targetId=t.getThresholdMetricID(),e.source=t.getThresholdSource(),e.sourceId=t.getThresholdSourceID(),e.groupTarget=t.getThresholdGroup(),e.groupTargetId=t.getThresholdGroupID(),e.condition=t.getThresholdCondition(),e.values=t.getThresholdValues(),e.sourceType=t.getSourceType(),e.format={},e.format.color=t.getThresholdFormatColor(),e.format["background-color"]=t.getThresholdFormatBackgroundColor(),e.format.icon={},e.format.icon.icon=t.getThresholdIcon(),e.format.icon.customIcon=t.isCustomIcon(),e.format.icon["icon-color"]=t.getThresholdIconColor(),e.format.icon.size=t.getThresholdIconSize(),e.format.icon["icon-only"]=t.getThresholdIconOnly(),e.format.target=t.getThresholdFormattingTarget(),e}}},(t,e,o)=>{o.r(e),o.d(e,{GridThresholdCollection:()=>n});var r=o(288);class n extends r.ThresholdCollection{constructor(t){super(t),this.FORMAT_TARGET_MARKER="target",this.FORMAT_PRIORITY_ORDER_2=["Row","Cell"]}getStackedPriority(){return this.ENUM_STACKED_PRIORITY.LATEST}getThresholdFormatByPriority(t){if(!t||!t.getModel().getFormat())return;let e={format:t.getModel().getFormat(),model:t.getModel(),formatTarget:void 0};for(var o=0;o<this.FORMAT_PRIORITY_ORDER_2.length;o++)if(t.getModel().getFormat()[this.FORMAT_TARGET_MARKER]===this.FORMAT_PRIORITY_ORDER_2[o]){e.formatTarget=t.getModel().getFormat()[this.FORMAT_TARGET_MARKER];break}return e.formatTarget||console.log("failed to resolve threshold format priority for format - "+JSON.stringify(t.getModel().getFormat())),e}}},(t,e,o)=>{o.r(e),o.d(e,{ThresholdCollection:()=>_});var r=o(289),n=o(290),i=o(295),a=o(296),l=o(297),s=o(298),u=o(299),d=o(300),c=o(301),h=o(302),g=o(303),p=o(304),m=o(305),f=o(306),v=o(307),C=o(309),T=o(310),M=o(311),y=o(312),S=o(313),b=o(314),x=o(315),w=o(316),A=o(317),G=o(318),V=o(319),O=o(4);class _{constructor(t){this.TYPES=r.ENUM_THRESHOLD_TYPES,this.thresholds=[],this.THRESHOLD_PRIORITY_ORDER=[],this.FORMAT_PRIORITY_ORDER=[],this.ENUM_STACKED_PRIORITY={LATEST:"latest",FIRST:"first"},t&&void 0!==t.context&&this.setContext(t.context)}getStackedPriority(){return this.ENUM_STACKED_PRIORITY.LATEST}getContext(){return this.context}setContext(t){this.context=t}getThresholds(){return this.thresholds}setThresholds(t){this.thresholds=t}getThreshold(t,e){var o=null;switch(t){case this.TYPES.top:o=new i.TopThreshold(e);break;case this.TYPES.toppercentage:o=new a.TopPercentageThreshold(e);break;case this.TYPES.bottom:o=new l.BottomThreshold(e);break;case this.TYPES.bottompercentage:o=new s.BottomPercentageThreshold(e);break;case this.TYPES.greaterthan:o=new u.GreaterThanThreshold(e);break;case this.TYPES.lessthan:o=new d.LessThanThreshold(e);break;case this.TYPES.greaterthanequalto:o=new c.GreaterThanEqualToThreshold(e);break;case this.TYPES.lessthanequalto:o=new h.LessThanEqualToThreshold(e);break;case this.TYPES.aboveaverage:o=new g.AboveAverageThreshold(e);break;case this.TYPES.belowaverage:o=new p.BelowAverageThreshold(e);break;case this.TYPES.equalto:o=new m.EqualsThreshold(e);break;case this.TYPES.notequalto:o=new f.NotEqualsThreshold(e);break;case this.TYPES.between:o=new v.BetweenThreshold(e);break;case this.TYPES.betweenpercentage:o=new C.BetweenPercentageThreshold(e);break;case this.TYPES.contains:o=new T.ContainsThreshold(e);break;case this.TYPES.notcontains:o=new M.NotContainsThreshold(e);break;case this.TYPES.startswith:o=new y.StartsWithThreshold(e);break;case this.TYPES.notstartswith:o=new S.NotStartsWithThreshold(e);break;case this.TYPES.endswith:o=new b.EndsWithThreshold(e);break;case this.TYPES.notendswith:o=new x.NotEndsWithThreshold(e);break;case this.TYPES.fromdate:o=new w.FromDateThreshold(e);break;case this.TYPES.todate:o=new A.ToDateThreshold(e);break;case this.TYPES.betweendates:o=new G.BetweenDatesThreshold(e);break;case this.TYPES.notbetweendates:o=new V.NotBetweenDatesThreshold(e);break;default:o=new n.Threshold(e)}return o}add(t,e){if(t){if("number"==typeof e&&e>-1)return void this.thresholds.splice(e,0,t);this.thresholds.push(t)}}remove(t){t&&t.getModel().getID()&&O.remove(this.getThresholds(),(function(e){return e.getModel().getID()===t.getModel().getID()}))}getThresholdIndexById(t){return O.findIndex(this.getThresholds(),(function(e){return e.getModel().getID()===t}))}update(t){if(t&&t.getModel().getID()){var e=this.getThresholdIndexById(t.getModel().getID());e>-1&&this.getThresholds()[e]&&(this.getThresholds()[e]=t)}}updateCollection(t){t&&O.isArray(t)&&this.setThresholds(t)}getThresholdByID(t){return this.getThresholds()[this.getThresholdIndexById(t)]}getThresholdByGID(t){return this.getThresholds()[this.getThresholdIndexById(t)]}iterate(t){for(var e=0;e<this.thresholds.length;e++)t(this.thresholds[e])}getThresholdsByGroupTarget(t,e){return(e||this.getThresholds()).filter((function(e){return e.getModel().getGroupTarget()===t}))}getThresholdsByTarget(t,e){return(e||this.getThresholds()).filter((function(e){return e.getModel().getTarget()===t}))}getThresholdsByValue(t,e){let o=t.v;return(e||this.getThresholds()).filter((function(e){return t.rowData&&t.target===e.getModel().getTarget()&&(o=t.rowData[e.getModel().getSource()]),-1!==e.getComputeResults().indexOf(o)}))}getThresholdsByPriority(t){var e=[],o=this;if(!this.THRESHOLD_PRIORITY_ORDER||this.THRESHOLD_PRIORITY_ORDER.length<1)return t;for(var r=0;r<this.THRESHOLD_PRIORITY_ORDER.length&&!((e=(t||this.getThresholds()).filter((function(t){return t.getModel().getType()===o.THRESHOLD_PRIORITY_ORDER[r]}))).length>0);r++);return e.length<1&&(e=this.getResolveStackedThresholds(e)),e}getResolveStackedThresholds(t){var e;switch(t=t||this.getThresholds(),this.getStackedPriority()){case"latest":e=O.takeRight(t,1);break;case"first":e=O.take(t,1);break;default:e=O.take(t,1)}return e}getThresholdFormatByPriority(t){var e;if(t&&t.format){for(var o=0;o<this.FORMAT_PRIORITY_ORDER.length;o++)if(t.getModel().getFormat()[this.FORMAT_PRIORITY_ORDER[o]]){e={target:this.FORMAT_PRIORITY_ORDER[o],format:t.getModel().getFormat()[this.FORMAT_PRIORITY_ORDER[o]]};break}return e||(console.log("failed to resolve threshold format priority for format - "+JSON.stringify(t.getModel().getFormat())),e=t.getModel().getFormat()),e}}pickThreshold(t){var e,o=t.col||this.getThresholds();return void 0!==t.groupTarget&&(o=this.getThresholdsByGroupTarget(t.groupTarget,o)),void 0!==t.target&&(o=this.getThresholdsByTarget(t.target,o)),void 0!==t.v&&(o=this.getThresholdsByValue(t,o)),(e=this.getResolveStackedThresholds(this.getThresholdsByPriority(o)))&&e[0]?e[0]:null}getThresholdFormat(t){var e={},o=t.col||this.getThresholds();if(t&&o.length&&o.length>0){if(O.isArray(t))for(var r=0;r<t.length;r++)e[t[r].target]=this.getThresholdFormatByPriority(this.pickThreshold(t[r]));else e[t.target]=this.getThresholdFormatByPriority(this.pickThreshold(t));return e}}getThresholdsByGID(t,e){return t.filter((function(t){return t.thresholdObject.gid==e}))}getGrThresholdDisplayTitle(t){return this.getGrThresholdCount(t)+" Scale Threshold"}getGrThresholdCount(t){return t.length}getGrThresholdStartColor(t,e){return t.filter((function(t){return"Bottom Percentage"===t.thresholdObject.condition}))[0].thresholdObject[e]}getGrThresholdEndColor(t,e){return t.filter((function(t){return"Top Percentage"===t.thresholdObject.condition}))[0].thresholdObject[e]}getGrColors(t,e){return t.map((function(t){return t.thresholdObject[e]}))}getThresholdFormatProp(t){if("Row"===t[0].getThresholdFormattingTarget())return"backgroundColor";switch(t[0].getThresholdFormattingProperty()){case"text":return"formatColor";case"icon":return"iconColor";case"background":return"backgroundColor"}}getGrThresholdColorRanges(t,e){var o=[],r=[];return O.each(t,(function(t){o.push(t.thresholdObject[e]),"Bottom Percentage"===t.getThresholdCondition()?(r.push(0),r.push(t.getThresholdValues()[0])):"Top Percentage"===t.getThresholdCondition()?r.push(100):r.push(t.getThresholdValues()[1])})),{colorScales:o,colorRanges:r}}getGrThresholdProps(t,e){var o=this.getThresholdsByGID(t,e),r=this.getThresholdFormatProp(o);return{id:e,title:this.getGrThresholdDisplayTitle(o),startColor:this.getGrThresholdStartColor(o,r),endColor:this.getGrThresholdEndColor(o,r),colors:this.getGrColors(o,r),count:this.getGrThresholdCount(o),slice:o[0],customColorRanges:this.getGrThresholdColorRanges(o,r)}}deleteGrThresholds(t,e){for(var o in t)O.remove(t[o],(function(t){return t.gid==e}));return t}}},(t,e,o)=>{o.r(e),o.d(e,{ENUM_THRESHOLD_TYPES:()=>r});const r={equalto:"Equal To",notequalto:"Not Equal To",greaterthan:"Greater Than",lessthan:"Less Than",greaterthanequalto:"Greater Than Equal To",lessthanequalto:"Less Than Equal To",between:"Between",top:"Top",bottom:"Bottom",toppercentage:"Top Percentage",bottompercentage:"Bottom Percentage",betweenpercentage:"Between Percentage",aboveaverage:"Above Average",belowaverage:"Below Average",abovetheline:"Above The Line",belowtheline:"Below The Line",gradientthreshold:"Gradient Threshold",fivescalethreshold:"Five Scale Threshold",contains:"Contains",notcontains:"Not Contains",startswith:"Starts With",notstartswith:"Not Starts With",endswith:"Ends With",notendswith:"Not Ends With",fromdate:"From Date",todate:"To Date",betweendates:"Between Dates",notbetweendates:"Not Between Dates",nscalethreshold:"n Scale Thresholds"}},(t,e,o)=>{o.r(e),o.d(e,{Threshold:()=>u});var r=o(289),n=o(291),i=o(292),a=o(293),l=o(294),s=o(4);mstrmojo.plugins.VitaraCharts.v530159.helper.thresholds.types||(mstrmojo.plugins.VitaraCharts.v530159.helper.thresholds.types={});class u{constructor(t){t&&t.state&&this.getModel().setState(this.setCompatibleCondition(t.state))}setCompatibleCondition(t){return t&&t.condition&&(t.condition=s.findKey(r.ENUM_THRESHOLD_TYPES,(function(e){return e==t.condition}))),t}getContext(){return this.context}setContext(t){this.context=t}getModel(){return this.model||(this.model=new l.BaseModel),this.model}setModel(t){this.model=t}getComputeResults(){return this.results}setComputeResults(t){this.results=t}getThresholdHelper(t){return this.thresholdHelper||(this.thresholdHelper=new i.ThresholdHelper,this.setChartDataMapper(t)),this.thresholdHelper.getThresholdHelper()}getAttributeThresholdHelper(t){return this.attrThresholdHelper||(this.attrThresholdHelper=new a.default(t)),this.attrThresholdHelper}setChartDataMapper(t){this.thresholdHelper&&t&&this.thresholdHelper.setChartDataMapper(t),this.attrThresholdHelper&&t&&this.attrThresholdHelper.setChartDataMapper(t)}getThresholdState(){var t=this.getModel().getState();return t&&t.value&&(t.values=[t.value]),t}compute(t,e,o,r,i){var a=this.getThresholdState();return this.getModel().getSourceType()===n.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE?this.setComputeResults(this.getAttributeThresholdHelper(i).computeThreshold(a,e,o,r,t,!0)):this.setComputeResults(this.getThresholdHelper(i).computeThreshold(a,e,o,a.target,r,t)),this.getComputeResults()}}},(t,e,o)=>{o.r(e),o.d(e,{ENUM_THRESHOLD_SOURCE_TYPES:()=>r});var r={ATTRIBUTE:"attribute",METRIC:"metric",PLOT_LINE:"plotLine"}},,,(t,e,o)=>{o.r(e),o.d(e,{BaseModel:()=>r});class r{constructor(){}getID(){return this.id}setID(t){this.id=t}getTarget(){return this.target}setTarget(t){this.target=t}getGroupTarget(){return this.groupTarget}setGroupTarget(t){this.groupTarget=t}getSource(){return this.source}setSource(t){this.source=t}getSourceType(){return this.sourceType}setSourceType(t){this.sourceType=t}getType(){return this.type}setType(t){this.type=t}getValues(){return this.value}setValues(t){this.value=t}getFormat(){return this.format}setFormat(t){this.format=t}getState(){return{id:this.getID(),target:this.getTarget(),groupTarget:this.getGroupTarget(),source:this.getSource(),sourceType:this.getSourceType(),condition:this.getType(),values:this.getValues(),format:this.getFormat()}}setState(t){t&&(void 0!==t.id&&this.setID(t.id),void 0!==t.target&&this.setTarget(t.target),void 0!==t.groupTarget&&this.setGroupTarget(t.groupTarget),void 0!==t.source&&this.setSource(t.source),void 0!==t.sourceType&&this.setSourceType(t.sourceType),void 0!==t.condition&&this.setType(t.condition),void 0!==t.values&&this.setValues(t.values),void 0!==t.format&&this.setFormat(t.format))}}},(t,e,o)=>{o.r(e),o.d(e,{TopThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.top}}},(t,e,o)=>{o.r(e),o.d(e,{TopPercentageThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.toppercentage}}},(t,e,o)=>{o.r(e),o.d(e,{BottomThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.bottom}}},(t,e,o)=>{o.r(e),o.d(e,{BottomPercentageThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.bottompercentage}}},(t,e,o)=>{o.r(e),o.d(e,{GreaterThanThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.greaterthan}}},(t,e,o)=>{o.r(e),o.d(e,{LessThanThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.lessthan}}},(t,e,o)=>{o.r(e),o.d(e,{GreaterThanEqualToThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.greaterthanequalto}}},(t,e,o)=>{o.r(e),o.d(e,{LessThanEqualToThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.lessthanequalto}}},(t,e,o)=>{o.r(e),o.d(e,{AboveAverageThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.aboveaverage}}},(t,e,o)=>{o.r(e),o.d(e,{BelowAverageThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.belowaverage}}},(t,e,o)=>{o.r(e),o.d(e,{EqualsThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.equalto}}},(t,e,o)=>{o.r(e),o.d(e,{NotEqualsThreshold:()=>i});var r=o(290),n=o(289);class i extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.notequalto}}},(t,e,o)=>{o.r(e),o.d(e,{BetweenThreshold:()=>a});var r=o(290),n=o(289),i=o(308);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.between}getModel(){return this.model||(this.model=new i.RangeModel),this.model}}},(t,e,o)=>{o.r(e),o.d(e,{RangeModel:()=>r});class r{constructor(){}getID(){return this.id}setID(t){this.id=t}getTarget(){return this.target}setTarget(t){this.target=t}getGroupTarget(){return this.groupTarget}setGroupTarget(t){this.groupTarget=t}getSource(){return this.source}setSource(t){this.source=t}getSourceType(){return this.sourceType}setSourceType(t){this.sourceType=t}getType(){return this.type}setType(t){this.type=t}getStartValue(){return this.value}setStartValue(t){this.value=t}getEndValue(){return this.endValue}setEndValue(t){this.endValue=t}getFormat(){return this.format}setFormat(t){this.format=t}getState(){return{id:this.getID(),target:this.getTarget(),groupTarget:this.getGroupTarget(),source:this.getSource(),sourceType:this.getSourceType(),condition:this.getType(),values:[this.getStartValue(),this.getEndValue()]}}setState(t){t&&(void 0!==t.id&&this.setID(t.id),void 0!==t.target&&this.setTarget(t.target),void 0!==t.groupTarget&&this.setGroupTarget(t.groupTarget),void 0!==t.source&&this.setSource(t.source),void 0!==t.sourceType&&this.setSourceType(t.sourceType),void 0!==t.condition&&this.setType(t.condition),void 0!==t.values&&this.setStartValue(t.values[0]),void 0!==t.values&&this.setEndValue(t.values[1]),void 0!==t.format&&this.setFormat(t.format))}}},(t,e,o)=>{o.r(e),o.d(e,{BetweenPercentageThreshold:()=>a});var r=o(290),n=o(308),i=o(289);class a extends r.Threshold{constructor(t){super(t),this.type=i.ENUM_THRESHOLD_TYPES.betweenpercentage}getModel(){return this.model||(this.model=new n.RangeModel),this.model}}},(t,e,o)=>{o.r(e),o.d(e,{ContainsThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.contains,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{NotContainsThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.notcontains,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{StartsWithThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.startswith,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{NotStartsWithThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.notstartswith,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{EndsWithThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.endswith,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{NotEndsWithThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.notendswith,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{FromDateThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.fromdate,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{ToDateThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.todate,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{BetweenDatesThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.betweendates,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},(t,e,o)=>{o.r(e),o.d(e,{NotBetweenDatesThreshold:()=>a});var r=o(290),n=o(289),i=o(291);class a extends r.Threshold{constructor(t){super(t),this.type=n.ENUM_THRESHOLD_TYPES.notbetweendates,this.sourceType=i.ENUM_THRESHOLD_SOURCE_TYPES.ATTRIBUTE}}},,(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartEventDispatcher:()=>r});var r=function(t){var e=this;this.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o},this.createAndDispatchEvent=function(t,o,r){"function"!=typeof window.CustomEvent&&(e.CustomEvent.prototype=window.Event.prototype,window.CustomEvent=e.CustomEvent);var n=new CustomEvent(t,r);o=e._getPath(o||"gridContext");try{o.dispatchEvent(n)}catch(t){console.error("Wrong path specified, Unable to dispatch event ",n,"on ",o)}},this.addEventListener=function(t,o,r){if(o=e._getPath(o),"function"==typeof r)try{o.addEventListener(t,r)}catch(t){console.log("Something went wrong")}else console.error("Callback should be a valid function")},this._getPath=function(e){switch(e){case"window":return window;case"gridOptions":return t.gridOptions&&t.gridOptions.api;case"gridContext":default:var o=t.gridOptions&&t.gridOptions.gridArea&&t.gridOptions.gridArea.id;return document.getElementById(o)}}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartChooseColumnModel:()=>n});var r=o(4),n=function(t){var e=this;e.stateKey="chooseColumn",e.chooseColumnModel={},e.stateManager=t.getStateManager(),e.aggregationWrapper=t.getAggregationWrapperModel(),this.chooseColumnAggregation=function(){},this.setChooseColumn=function(o,r,n){var i=e.chooseColumnModel;void 0===i[o]&&(i[o]={}),i[o][n]=r,e.chooseColumnModel=i,e._saveState(),t.getAggregationWrapperModel().setAggregationAtAllLevels(o,"choosecolumn"),t.redrawRows()},this.removeChooseColumn=function(t,o){var r=e.chooseColumnModel;void 0!==r[t]&&void 0!==r[t][o]&&(r[t][o]="",e.chooseColumnModel=r,e._saveState())},this.getChooseColumn=function(o,n){var i=e.chooseColumnModel,a=[];t.gridOptions.columnApi.getRowGroupColumns().forEach((function(t){a.push(t.colDef.colId)})),a.reverse();for(var l=0;(void 0===i[o]||void 0===i[o][n])&&l<a.length;)n=a[l++];return void 0===i[o]||void 0===i[o][n]||-1===r.map(e.aggregationWrapper.getAllValueColumns(),(function(t){return t.colId})).indexOf(i[o][n])?"":i[o][n]},this.isChooseColumn=function(t,o,r){return o===e.getChooseColumn(t,r)},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.chooseColumnModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t={}),e.chooseColumnModel=t},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartThresholdView:()=>i}),o(45);var r=o(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t,e){var o=this;o.gridContext=t,o.eInterface=t.gridOptions.context.editorInterfaceRef,o.markerGrid=o.eInterface.propMenuHelper.markerGrid,o.value1="#popupthresholdValue1",o.value2="#popupthresholdValue2",o.thresholdColorPickers="#popupthresholdcolor",o.thresholdGroupingTarget="#popupgroupingTarget",o.thresholdBackgroundColor="#popupthresholdBackgroundColor",o.thresholdIcon="#popupgridThresholdIcon",o.thresholdIconColor="#popupthresholdIconColor",o.thresholdIconSize="#popupthresholdIconSize",o.thresholdIconOnly="#popupthresholdIconOnly",o.thresholdPanelColorPickers="#popupthresholdPanelColor",o.thresholdMarkerColorPickers="#popupthresholdMarkerColor",o.hre=".thresholdFields",o.thresholdFields=".thresholdFields",o.thresholdMarkerType="#popupthresholdMarkerType",o.thresholdEnableDataLabel="#popupthresholdEnableDataLabel",o.iconsets="#iconsets",o.thresholdCondition="#popupthresholdCondition",o.thresholdMetric="#popupthresholdMetric",o.thresholdTarget="#popupformattingTarget",o.btnAddNewThreshold="#btnAddNewThreshold",o.btnApplyThreshold="#btnApplyThreshold",o.btnCancelThreshold="#btnCancelThreshold",o.manageThresholds=".manage-thresholds",o.thresholdStartColor="#popupthresholdStartColor",o.thresholdEndColor="#popupthresholdEndColor",o.numOfThresholds="#popupthresholdCount",o.invertThresholdColors="#popupinvertGradientColors",o.customThresholdStops="#popupcustomGradientStops",o.customGradientSelector="#thresholdGradientSelector",o.thresholdFormatProperty="#popupformattingProperty",o.thresholdEnableMarker="#popupthresholdEnableMarker",o.thresholdEnableBarsMarker="#popupthresholdEnableBarsMarker",o.thresholdSource="#popupthresholdColSelect",this.getThresholdPropertyEditorHomeView=function(e){o._cleanView();var r=o.getThresholdRenderData(t.getThresholdModel().getAllThresholds()),n=o._getElement(".manage-thresholds table");o.gridContext.gridOptions.context.editorInterfaceRef.propMenuHelper.getThresholdsUIManager().setTableData(n,r,!0,"No threshold(s) found"),o._showAllWrapper([o.manageThresholds,o.btnAddNewThreshold]),e||o._hideAllWrapper(["#popupSourceValueRange"])},this.createRadioBtnOption=function(){o.isNScaleThreshold()?o._getElement("#popupthresholdEnableNoMarker").closest(".radio-inline").hide():o._getElement("#popupthresholdEnableNoMarker").closest(".radio-inline").show()},this.manageEnableMarkerUI=function(t){o.createRadioBtnOption();var e=[o.thresholdIcon,o.thresholdIconSize,o.thresholdIconOnly];this.isNScaleThreshold()||e.push(o.thresholdIconColor),t?e.forEach((function(t){o._getElement(t).closest(".row").show()})):e.forEach((function(t){o._getElement(t).closest(".row").hide()}))},this.isNScaleThreshold=function(){return"n Scale Thresholds"===o._getElement(o.thresholdCondition).val()},this.manageEnableBarsMarkerUI=function(t){o.isNScaleThreshold()?o._getElement("#popupthresholdEnableNoMarker").closest(".radio-inline").hide():o._getElement("#popupthresholdEnableNoMarker").closest(".radio-inline").show();var e=[o.thresholdIconOnly],r=[o.thresholdIconSize,o.thresholdIcon];this.isNScaleThreshold()||e.push(o.thresholdIconColor),t?(e.forEach((function(t){o._getElement(t).closest(".row").show()})),r.forEach((function(t){o._getElement(t).closest(".row").hide()}))):e.forEach((function(t){o._getElement(t).closest(".row").hide()}))},this.manageGroupingUI=function(e){if("string"==typeof e){var r=t.getTitles().indexOf(e)<t.gridOptions.chartDataMapper.numAttributes;o._getElement("#popupgroupingTarget").prop("disabled",r),r&&o._getElement("#popupgroupingTarget").val("No Grouping")}else console.error("targetName expected string was given ",n(e))},this.addEditThresholdMaster=function(){var e=this;return this.updateThresholdCondtions=function(t){o.gridContext.getVitaraGridPropertyEditorMapper().thresholdEditorConditionHtml(t),this.initThresholdView(),o.manageGroupingUI(t),o.addInputSuggestions(t)},this.addInputSuggestions=function(o){var n,i=t.gridOptions.chartDataMapper.getCategories(t.getTitles().indexOf(o));"number"===(null===(n=t.gridOptions.chartDataMapper.getMetaInfoForTitle(o))||void 0===n?void 0:n.type)&&(i=r.map(i,(function(t){return t+""}))),e.eInterface.propMenuHelper.getThresholdsUIManager().setInputSuggestions("#popupthresholdValue1",i)},this.appendThreshold=function(r){var n;e.thresholdGroupingValue=o._getValueById(o.thresholdGroupingTarget),e.thresholdGroupingId=o._getAttrValueById(o.thresholdGroupingTarget+" option:selected","sId"),e.thresholdMetricValue=o._getValueById(o.thresholdMetric),e.thresholdMetricId=o._getAttrValueById(o.thresholdMetric+" option:selected","sId"),e.thresholdSourceValue=o._getValueById(o.thresholdSource),e.thresholdSourceId=o._getAttrValueById(o.thresholdSource+" option:selected","sId"),e.thresholdConditionValue=o._getValueById(o.thresholdCondition),e.formatTargetValue=o._getValueById(o.thresholdTarget),e.thresholdFormatColorValue=o._getValueById(o.thresholdColorPickers),e.thresholdFormatBackgroundColorValue=o._getValueById(o.thresholdBackgroundColor),e.thresholdIconColorValue=o._getValueById(o.thresholdIconColor);var i="",a=!1;o._getElement(o.thresholdEnableMarker).is(":checked")&&("vitaraCustomSVGFile"===o._getElement(e.thresholdIcon).attr("selected-icon")?(a=!0,i=o._getElement(e.thresholdIcon).attr("infographic-path")):i=o._getElement(e.thresholdIcon+"> i")[0].className.split("fa-")[1]),e.isCustomMarker=a,e.thresholdEnableBarsMarkerValue=o._getElement(o.thresholdEnableBarsMarker).is(":checked"),e.thresholdEnableBarsMarkerValue&&(i="bar"),e.thresholdIconValue=i,e.thresholdIconSizeValue=o._getValueById(o.thresholdIconSize),e.thresholdIconOnlyValue=o._getElement(o.thresholdIconOnly).is(":checked"),e.thresholdEnableMarkerValue=o._getElement(o.thresholdEnableMarker).is(":checked"),e.thresholdFormatPropertyValue=o._getValueById(o.thresholdFormatProperty),e.valuesArr=[];var l="number"===(null===(n=t.gridOptions.chartDataMapper.getMetaInfoForTitle(e.thresholdSourceValue))||void 0===n?void 0:n.type);e.valuesArr.push(e._setThresholdValue(e.eInterface.propMenuHelper.sanitizeContent(o._getValueById(o.value1)),l)),e.valuesArr.push(e._setThresholdValue(e.eInterface.propMenuHelper.sanitizeContent(o._getValueById(o.value2)),l)),void 0===r?e.createThreshold():r.length?"n Scale Thresholds"===e.thresholdConditionValue?e.processGrThreshold(r):(t.getThresholdModel().deleteThresholdByGID(r[0].getThresholdGID()),e.createThreshold()):"n Scale Thresholds"===e.thresholdConditionValue?(r=t.getThresholdModel().deleteThresholdById(r.getThresholdID()),e.processGrThreshold(r)):e.editThreshold(r),o.getThresholdPropertyEditorHomeView()},this.editThreshold=function(t){t.setThresholdGroup(e.thresholdGroupingValue,!0),t.setThresholdGroupID(e.thresholdGroupingId,!0),t.setThresholdSource(e.thresholdSourceValue,!0),t.setThresholdSourceID(e.thresholdSourceId,!0),t.setThresholdMetric(e.thresholdMetricValue,!0),t.setThresholdMetricID(e.thresholdMetricId,!0),t.setThresholdCondition(e.thresholdConditionValue,!0),t.setThresholdFormattingTarget(e.formatTargetValue,!0),t.setThresholdFormatColor(e.thresholdFormatColorValue,!0),t.setThresholdFormatBackgroundColor(e.thresholdFormatBackgroundColorValue,!0),t.setThresholdValues(e.valuesArr,!0),e.isCustomMarker?t.setThresholdCustomIcon(e.thresholdIconValue,!0):t.setThresholdIcon(e.thresholdIconValue,!0),t.setThresholdIconColor(e.thresholdIconColorValue,!0),t.setThresholdIconSize(e.thresholdIconSizeValue,!0),t.setThresholdIconOnly(e.thresholdIconOnlyValue,!0),t.setThresholdEnableMarker(e.thresholdEnableMarkerValue,!0),t.checkout()},this.processGrThreshold=function(r){var n={};r&&(n.thresholdIndex=t.getThresholdModel().getThresholdIndex(r[0]),t.getThresholdModel().deleteThresholdByGID(r[0].getThresholdGID())),n.groupTarget=e.thresholdGroupingValue,n.groupTargetId=e.thresholdGroupingId,n.formatTarget=e.formatTargetValue,n.metric=e.thresholdMetricValue,n.metricId=e.thresholdMetricId,n.source=e.thresholdSourceValue,n.sourceId=e.thresholdSourceId,n.formatProperty=e.thresholdFormatPropertyValue,"icon"===n.formatProperty&&(n.customIcon=e.isCustomMarker,n.icon=e.thresholdIconValue,n.iconSize=e.thresholdIconSizeValue,n.iconOnly=e.thresholdIconOnlyValue),n.enableMarker=e.thresholdEnableMarkerValue;var i={};if(i.count=o._getValueById(o.numOfThresholds),i.startClr=o._getValueById(o.thresholdStartColor),i.endClr=o._getValueById(o.thresholdEndColor),i.invert=o._getPropertyById(o.invertThresholdColors,"checked"),i.customGradientStops=o._getPropertyById(o.customThresholdStops,"checked"),n.invertColors=i.invert,n.customStops=i.customGradientStops,1==+i.customGradientStops){var a=o.eInterface;i.csr=a.propMenuHelper.getThresholdsUIManager().getCustomGradientStops(+i.count)}t.getThresholdModel().thresholdGradientCreator(n,i)},this.createThreshold=function(){if("n Scale Thresholds"===e.thresholdConditionValue)e.processGrThreshold();else{var r=t.getThresholdModel().createThreshold({},!0);e.editThreshold(r)}o.gridContext.redrawRows()},this.addEditHelper=function(t){o._getElement("#popupthresholdUniqueId").val(t.getThresholdID()),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorMetricsOptions(o._getElement("#popupthresholdMetric"),t.getThresholdMetric()),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorMetricsOptions(o._getElement(o.thresholdSource),t.getThresholdSource()),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorGroupingOptions(o._getElement("#popupgroupingTarget"),t.getThresholdGroup()),o.gridContext.getVitaraGridPropertyEditorMapper().thresholdEditorConditionHtml(t.getThresholdSource(),t.getThresholdID(),t.getThresholdCondition()),o.addInputSuggestions(t.getThresholdSource()),o.manageGroupingUI(t.getThresholdSource());var e=t.getThresholdValues();e.length>0&&(e.length>=1&&o._getElement(o.value1).val(e[0]),e.length>1&&o._getElement(o.value2).val(e[1]));var r=t.getThresholdFormattingTarget(),n=t.getThresholdIconColor(),i=t.getThresholdFormatBackgroundColor(),a=t.getThresholdFormatColor(),l=o.eInterface;l.propMenuHelper.setVitaraColorPicker(o.thresholdBackgroundColor,i),"Cell"===r&&(l.propMenuHelper.setVitaraColorPicker(o.thresholdIconColor,n),l.propMenuHelper.setVitaraColorPicker(o.thresholdColorPickers,a));var s=t.getThresholdIconSize();o._getElement(o.thresholdIconOnly).prop("checked",t.getThresholdIconOnly()),o._getElement(o.thresholdIconSize).val(s);var u=o.gridContext.getVitaraGridPropertyEditorMapper().thresholdEditorTargetHtml(r);o._getElement(o.thresholdTarget).html(u),o._getElement(o.thresholdEnableMarker).prop("checked",t.getThresholdEnableMarker());var d=t.getThresholdIcon();"bar"!==d&&(t.isCustomIcon()?(o._getElement(o.thresholdIcon).attr("selected-icon","vitaraCustomSVGFile"),o._getElement(o.thresholdIcon).attr("custom-path","true"),o._getElement(o.thresholdIcon).attr("infographic-path",d),o._getElement(o.thresholdIcon+"> i").removeClass().addClass("svg-vitaraCustomSVGFile svg-vitaraCustomSVGFile-dims infoMarkerType")):(""===d&&(d="circle"),o._getElement(o.thresholdIcon+"> i").removeClass().addClass("fa-".concat(d)))),o._getElement(o.thresholdEnableBarsMarker).prop("checked","bar"===t.getThresholdIcon());var c=o._getElement(o.thresholdEnableMarker).prop("checked"),h=o._getElement(o.thresholdEnableBarsMarker).prop("checked");c?o.manageEnableMarkerUI(c):h?o.manageEnableBarsMarkerUI(h):(o.manageEnableBarsMarkerUI(h),o.manageEnableMarkerUI(c)),h||c||o._getElement("#popupthresholdEnableNoMarker").prop("checked",!0)},this.populateAddEditThresholdFields=function(r){if(void 0===r){o._getElement("#popupthresholdUniqueId").val("NA"),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorMetricsOptions(o._getElement("#popupthresholdMetric")),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorMetricsOptions(o._getElement(o.thresholdSource)),o.gridContext.getVitaraGridPropertyEditorMapper().setThresholdEditorGroupingOptions(o._getElement("#popupgroupingTarget"));var n=t.getTitles()[0];o.gridContext.getVitaraGridPropertyEditorMapper().thresholdEditorConditionHtml(n,"NA"),o.addInputSuggestions(n),o.manageGroupingUI(n),o._getElement(o.thresholdEnableMarker).prop("checked",!1),o._getElement(o.thresholdEnableBarsMarker).prop("checked",!1),o.manageEnableMarkerUI(!1),o.manageEnableBarsMarkerUI(!1),o.setGradientOptionsForThreshold(),o._getElement("#popupthresholdEnableNoMarker").prop("checked",!0)}else if(r.length){e.addEditHelper(r[0]),o.gridContext.getVitaraGridPropertyEditorMapper().thresholdEditorConditionHtml(r[0].getThresholdSource(),r[0].getThresholdID(),"n Scale Thresholds"),o.addInputSuggestions(r[0].getThresholdSource()),o._getElement("#popupthresholdUniqueId").val(r[0].getThresholdGID()),o._getElement(o.numOfThresholds).val(r.length);var i=t.getThresholdModel().col.getGrThresholdProps(r,r[0].getThresholdGID());o._getElement(o.invertThresholdColors).prop("checked",r[0].getThresholdColorsInvert()),o._getElement(o.customThresholdStops).prop("checked",r[0].getThresholdCustomStops());var a=o.eInterface;a.propMenuHelper.setVitaraColorPicker(o.thresholdStartColor,i.startColor),a.propMenuHelper.setVitaraColorPicker(o.thresholdEndColor,i.endColor),a.propMenuHelper.setCutomGradientStopsSelection({startColor:i.startColor,endColor:i.endColor,stops:i.count},i.customColorRanges),a.propMenuHelper.getThresholdsUIManager().setGradientCustomStopsLayout(r[0].getThresholdCustomStops())}else e.addEditHelper(r);o._getElement("#popupthresholdEnableMarker").change((function(t){o.manageEnableMarkerUI(t.target.checked)})),o._getElement("#popupthresholdEnableBarsMarker").change((function(t){o.manageEnableBarsMarkerUI(t.target.checked)})),o._getElement("#popupthresholdEnableNoMarker").change((function(t){o.manageEnableBarsMarkerUI(!1),o.manageEnableMarkerUI(!1)}))},this.initThresholdView=function(){o._cleanView();var t=[o.thresholdGroupingTarget,o.thresholdMetric,o.thresholdCondition,o.thresholdSource],r=[o.btnAddNewThreshold];o._hideAllShowAllWrapper(r,t,!1,!0),t=[o.btnApplyThreshold,o.btnCancelThreshold],o._showAllWrapper(t,!1),e.manipulateAddNewThresholdView()},this.manipulateAddNewThresholdView=function(){var e=o._getValue(o._getElement(o.thresholdGroupingTarget,!1)),n=o._getValue(o._getElement(o.thresholdMetric,!1)),i=o._getValue(o._getElement(o.thresholdCondition,!1)),a=o._getValue(o._getElement(o.thresholdTarget,!1)),l=t.getTitles().indexOf(n)>=t.gridOptions.chartDataMapper.numAttributes;if("Select"!==i&&l?o._getElement(o.thresholdEnableBarsMarker).closest("label").show():o._getElement(o.thresholdEnableBarsMarker).closest("label").hide(),"Select"===i){var s=[o.value1,o.value2,o.thresholdColorPickers,o.thresholdBackgroundColor,o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly,o.thresholdPanelColorPickers,o.thresholdMarkerColorPickers,o.hre,o.thresholdMarkerType,o.thresholdEnableDataLabel,o.iconsets,o.thresholdTarget,o.thresholdStartColor,o.thresholdEndColor,o.numOfThresholds,o.invertThresholdColors,o.customThresholdStops,o.thresholdFormatProperty,o.thresholdEnableMarker,o.thresholdEnableBarsMarker],u=[o.thresholdFields,o.hre];return o._hideAllShowAllWrapper(s,u,!0,!0),o._showElement("#btnApplyThreshold"),void o._getElement("#btnApplyThreshold").hide()}if(o._getElement("#btnApplyThreshold").show(),r.includes(i,"Between"))u=[o.thresholdTarget,o.value1,o.value2,o.thresholdBackgroundColor,o.thresholdColorPickers,o.thresholdEnableMarker,o.thresholdFields],s=[o.thresholdStartColor,o.thresholdEndColor,o.numOfThresholds,o.invertThresholdColors,o.customThresholdStops,o.thresholdFormatProperty],o._hideAllShowAllWrapper(s,u,!0,!0);else if("Above Average"===i||"Below Average"===i)u=[o.thresholdTarget,o.thresholdBackgroundColor,o.thresholdColorPickers,o.thresholdEnableMarker,o.thresholdFields],s=[o.value1,o.value2,o.thresholdStartColor,o.thresholdEndColor,o.numOfThresholds,o.invertThresholdColors,o.customThresholdStops,o.thresholdFormatProperty],o._hideAllShowAllWrapper(s,u,!0,!0);else{if("n Scale Thresholds"===i){u=[o.thresholdTarget,o.thresholdFields,o.numOfThresholds,o.thresholdStartColor,o.thresholdEndColor,o.invertThresholdColors,o.customThresholdStops],s=[o.value1,o.value2,o.thresholdBackgroundColor,o.thresholdColorPickers,o.customGradientSelector,o.thresholdFormatProperty,o.thresholdIconColor];var d=o._getElement(o.thresholdEnableMarker).prop("checked"),c=o._getElement(o.thresholdEnableBarsMarker).prop("checked");if(d||c||"Cell"===a&&(o._getElement(o.thresholdEnableMarker).prop("checked",!0),o.manageEnableMarkerUI()),"Row"===a)o._getElement("#popupthresholdEnableNoMarker").prop("checked",!0),u=[o.thresholdTarget,o.numOfThresholds,o.thresholdStartColor,o.thresholdEndColor,o.invertThresholdColors,o.customThresholdStops],s.push(o.thresholdColorPickers,o.thresholdFormatProperty,o.thresholdEnableMarker);else{var h=o._getValue(o._getElement(o.thresholdFormatProperty,!1));"text"===h||"background"===h?(o._getElement("#popupthresholdEnableNoMarker").prop("checked",!0),u=[o.thresholdTarget,o.thresholdFields,o.numOfThresholds,o.thresholdStartColor,o.thresholdEndColor,o.invertThresholdColors,o.customThresholdStops],s.push(o.thresholdEnableMarker,o.thresholdEnableBarsMarker,o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly)):(u=[o.thresholdEnableMarker,o.thresholdEnableBarsMarker,o.thresholdTarget,o.thresholdFields,o.numOfThresholds,o.thresholdStartColor,o.thresholdEndColor,o.invertThresholdColors,o.customThresholdStops],s.push(o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly)),o._getPropertyById(o.customThresholdStops,"checked")&&u.push(o.customGradientSelector),u.push(o.thresholdFormatProperty)}o._hideAllShowAllWrapper(s,u,!0,!0);var g=o._getElement(o.thresholdEnableMarker).prop("checked");g&&o.manageEnableMarkerUI(g);var p=o._getElement(o.thresholdEnableBarsMarker).prop("checked");return void(p&&o.manageEnableBarsMarkerUI(p))}u=[o.thresholdTarget,o.value1,o.thresholdTarget,o.thresholdBackgroundColor,o.thresholdColorPickers,o.thresholdFields,o.thresholdEnableMarker],s=[o.value2,o.thresholdStartColor,o.thresholdEndColor,o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly,o.numOfThresholds,o.invertThresholdColors,o.customThresholdStops,o.thresholdFormatProperty],o._hideAllShowAllWrapper(s,u,!0,!0)}if("Row"==a?(s=[o.thresholdColorPickers,o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly,o.thresholdEnableMarker],o._hideAllWrapper(s,!0)):"Cell"===a&&(u=[o.thresholdColorPickers],o._showAllWrapper(u,!0),o._getElement(o.thresholdEnableMarker).prop("checked")&&o.manageEnableMarkerUI(o._getElement(o.thresholdEnableMarker).prop("checked")),o._getElement(o.thresholdEnableBarsMarker).prop("checked")&&o.manageEnableBarsMarkerUI(o._getElement(o.thresholdEnableBarsMarker).prop("checked"))),""!==t.getCustomMarkerModel().getMarker(n,e)){var m=[o.thresholdEnableMarker,o.thresholdEnableBarsMarker];o._hideAllWrapper(m,!0)}o.createRadioBtnOption()},{populateAddEditThresholdFields:this.populateAddEditThresholdFields,manipulateAddNewThresholdView:this.manipulateAddNewThresholdView,initThresholdView:this.initThresholdView,appendThreshold:this.appendThreshold,updateThresholdCondtions:this.updateThresholdCondtions,onThresholdTargetUpdated:this.onThresholdTargetUpdated}},this.setGradientOptionsForThreshold=function(){var t=o.eInterface.propMenuHelper;o._setPropertyById(o.invertThresholdColors,"checked",!1),o._setPropertyById(o.customThresholdStops,"checked",!1),t.getThresholdsUIManager().setDefaultGradientColors(),t.setCutomGradientStopsSelection({startColor:t.getThresholdsUIManager().getGradientThresholdStartColor(),endColor:t.getThresholdsUIManager().getGradientThresholdEndColor(),stops:t.getThresholdsUIManager().getGradientThresholdsCount()})},this.setGradientFormatPropertyView=function(t){var e=[],r=[];"icon"===t?(e.push(o.thresholdEnableMarker,o.thresholdEnableBarsMarker),o.manageEnableMarkerUI(o._getElement(o.thresholdEnableMarker).prop("checked")),o.manageEnableBarsMarkerUI(o._getElement(o.thresholdEnableBarsMarker).prop("checked"))):"text"!==t&&"background"!==t||r.push(o.thresholdIcon,o.thresholdIconColor,o.thresholdIconSize,o.thresholdIconOnly,o.thresholdEnableMarker,o.thresholdEnableBarsMarker),o._hideAllShowAllWrapper(r,e,!0,!0)},this.getThresholdRenderData=function(t){var e=[],n=[];return r.each(t,(function(r){var i=r.getThresholdGID();i&&-1===n.indexOf(i)?(n.push(i),e.push(o._getThresholdGradientOptions(t,r))):i||e.push(o._getThresholdEditOptions(r))})),e},this._getThresholdGradientOptions=function(e,r){var n=o.eInterface,i=t.getThresholdModel().col.getGrThresholdProps(e,r.getThresholdGID());return[r.getThresholdMetric()+"-"+r.getThresholdGroup(),n.propMenuHelper.getThresholdsUIManager().getSvgGradientHtml(i),{"data-type":"threshold","data-thresholdid":r.getThresholdGID(),class:"gridGrThresholdEdit",href:"javascript:void(0);"},{"data-type":"threshold","data-thresholdid":r.getThresholdGID(),class:"gridGrThresholdDelete",href:"javascript:void(0);"}]},this._getThresholdEditOptions=function(t){var e=t.getThresholdMetric()+"-"+t.getThresholdGroup(),o="",r=t.getThresholdCondition();return o+=r,[e,o+="Above Average"===r||"Below Average"===r?"":"Between"===r||"Between Percentage"===r?":"+t.getThresholdValues()[0]+"-"+t.getThresholdValues()[1]:":"+t.getThresholdValues()[0],{"data-type":"threshold","data-thresholdid":t.getThresholdID(),class:"gridThresholdEdit",href:"javascript:void(0);"},{"data-type":"threshold","data-thresholdid":t.getThresholdID(),class:"gridThresholdDelete",href:"javascript:void(0);"}]},this._cleanView=function(){var t=["#popupthresholdMetric","#popupthresholdCondition","#popupthresholdValue1","#popupthresholdValue2","#popupformattingTarget","#popupthresholdIconSize","#popupthresholdIconOnly","#popupthresholdcolor","#popupthresholdBackgroundColor","#popupthresholdIconColor","#popupthresholdStartColor","#popupthresholdEndColor","#thresholdButton","#cancelThresholds","#addNewThresholds","#popupgroupingTarget",o.thresholdIcon,o.numOfThresholds,o.thresholdStartColor,o.thresholdEndColor,o.invertThresholdColors,o.customThresholdStops,o.customGradientSelector,o.thresholdFormatProperty,o.thresholdEnableMarker,o.thresholdEnableBarsMarker,o.thresholdSource];t.forEach((function(t){o._getElement(t).closest(".row").hide()})),(t=["#btnApplyThreshold","#btnAddNewThreshod","#btnCancelThreshold",".manage-thresholds"]).forEach((function(t){o._getElement(t).hide()}))},this._closestRows=function(t){return t.closest(".row")},this._getPropertyById=function(t,e){return o._getProperty(o._getElement(t),e)},this._getProperty=function(t,e){return t.prop(e)},this._setPropertyById=function(t,e,r){return o._setProperty(o._getElement(t),e,r)},this._setProperty=function(t,e,o){return t.prop(e,o)},this._getAttrValueById=function(t,e){return o._getAttrValue(o._getElement(t),e)},this._getAttrValue=function(t,e){return t.attr(e)},this._getValueById=function(t){return o._getValue(o._getElement(t))},this._getValue=function(t){return t.val()},this._getElement=function(t,e){return void 0===e||!1===e?o.eInterface.getMenuElement(t):o.eInterface.getMenuElement(t).closest(".row")},this._showElement=function(t,e){o._showHideHelper(t,!0,e)},this._hideElement=function(t,e){o._showHideHelper(t,!1,e)},this._showHideHelper=function(t,e,r){void 0===e&&(e=!0);var n=o._getElement(t,r);e?n.show():n.hide()},this._showAllWrapper=function(t,e){t.forEach((function(t){o._showElement(t,e)}))},this._hideAllWrapper=function(t,e){t.forEach((function(t){o._hideElement(t,e)}))},this._hideAllShowAllWrapper=function(t,e,r,n){null===n&&(n=r),o._hideAllWrapper(t,r),o._showAllWrapper(e,n)},this._setThresholdValue=function(t,e){return t&&!isNaN(t)&&e?Number(t):t},this.registerEventListeners=function(){vitaraJQ(o.eInterface.getPropMenuContainer()).off("click",".gridThresholdEdit").on("click",".gridThresholdEdit",(function(){var e=o._getElement(this).data("thresholdid"),r=t.getThresholdModel().filterThresholdById(e);r=r[0],o.addEditThresholdMaster().populateAddEditThresholdFields(r),o.addEditThresholdMaster().initThresholdView()})),vitaraJQ(o.eInterface.getPropMenuContainer()).off("click",".gridThresholdDelete").on("click",".gridThresholdDelete",(function(){var e=o._getElement(this).data("thresholdid");t.getThresholdModel().deleteThresholdById(e),o.getThresholdPropertyEditorHomeView()})),vitaraJQ(o.eInterface.getPropMenuContainer()).off("click",".gridGrThresholdEdit").on("click",".gridGrThresholdEdit",(function(){var e=o._getElement(this).data("thresholdid"),r=t.getThresholdModel().filterThresholdsByGID(e);o.addEditThresholdMaster().populateAddEditThresholdFields(r),o.addEditThresholdMaster().initThresholdView()})),vitaraJQ(o.eInterface.getPropMenuContainer()).off("click",".gridGrThresholdDelete").on("click",".gridGrThresholdDelete",(function(){var e=o._getElement(this).data("thresholdid");t.getThresholdModel().deleteThresholdByGID(e),o.getThresholdPropertyEditorHomeView()}))}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartRatioModel:()=>r});var r=function(t){var e=this;e.ratioModel={},e.stateKey="ratio",e.stateManager=t.getStateManager(),e.gridContext=t,this.ratioAggregation=function(t){return 1},this.getRatioState=function(){return vitaraJQ.extend(!0,{},e.ratioModel)},this.addRatioAggregation=function(o){var r=e.getRatioState(),n=Object.keys(o)[0];r.hasOwnProperty(n)||(r[n]={}),r[n].Numerator=o[n].Numerator,r[n].Denominator=o[n].Denominator,r[n].Precision=o[n].Precision,r[n].PercentageFormat=o[n].PercentageFormat,e._setRatioState(r),t.getAggregationWrapperModel().setAggregationAtAllLevels(n,"ratio"),e._saveState(),t.redrawRows()},this._setRatioState=function(t){e.ratioModel=t},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.ratioModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t={}),e.ratioModel=t},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartRatioView:()=>a});var r=o(326),n=o(45),i=o(4),a=function(t){var e=this;e.ratioModel=t.getRatioAggregationModel(),e.popupWindowManager=new r.PopupWindowManager,this.onLoadHandler=function(o){e.popupWindow=o;var r=e.params,n=e.getColumnsOptions(r);vitaraJQ("#ratioColSelect",e.popupWindow).html(n),vitaraJQ("#ratioNumerator",e.popupWindow).html(n),vitaraJQ("#ratioDenominator",e.popupWindow).html(n),e.addTextSpinner();var i=e.ratioModel.getRatioState();e.populateLabels(o),i&&i.hasOwnProperty(r.column.colId)&&(vitaraJQ("#ratioNumerator",e.popupWindow).val(i[r.column.colId].Numerator),vitaraJQ("#ratioDenominator",e.popupWindow).val(i[r.column.colId].Denominator),i[r.column.colId].Precision&&""!=i[r.column.colId].Precision&&vitaraJQ("#ratioPrecision",e.popupWindow).val(i[r.column.colId].Precision),i[r.column.colId].PercentageFormat&&vitaraJQ("#ratioFormat",e.popupWindow).attr("checked",!0)),vitaraJQ(e.popupWindow).off("change","#ratioColSelect").on("change","#ratioColSelect",(function(){})),vitaraJQ(e.popupWindow).off("change","#ratioNumerator").on("change","#optionsChartType",(function(){})),vitaraJQ(e.popupWindow).off("click","#ratioDenominator").on("click","#ratioDenominator",(function(){})),vitaraJQ(e.popupWindow).off("click","#ratioApply").on("click","#ratioApply",(function(){console.log("click, apply ratios");var o=vitaraJQ("#ratioColSelect").val(),r=vitaraJQ("#ratioNumerator").val(),n=vitaraJQ("#ratioDenominator").val(),i=vitaraJQ("#ratioPrecision").val(),a=vitaraJQ("#ratioFormat").prop("checked"),l={};l[o]={},l[o].Numerator=r,l[o].Denominator=n,l[o].Precision=i,l[o].PercentageFormat=a,e.ratioModel.addRatioAggregation(l),t.gridOptions.api.refreshClientSideRowModel("aggregate")}))},this.populateLabels=function(e){var o={"ratio-for":"Ratio For","select-column":"Select Column",numerator:"Numerator",denominator:"Denominator",precision:"Precision","show-ratio-as-percent":"Show Ratio as %",ratioApply:"Apply",ratioCancel:"Cancel"},r=t.gridOptions.localeTextFunc;Object.keys(o).forEach((function(t){vitaraJQ("#".concat(t),e).text(r(o[t],o[t]))}))},this.addTextSpinner=function(){var t=vitaraJQ(".vitara_text_spinner",e.popupWindow);t.length<1||i.each(t,(function(t){t.onkeypress=e.validateNumericInput,t.onpaste=e.validateNumericInput;var o=t.min?t.min:t.id.indexOf("Font")>-1?6:1;vitaraJQ(t).spinner({create:function(e,o){e.target.value&&vitaraJQ(t).spinner("value",parseInt(e.target.value))},min:o})}))},this.getColumnsOptions=function(e){var o="";for(var r in t.defaultColumnDef){var n=t.defaultColumnDef[r];if(null!=n&&""!=n&&void 0!==n&&n.isMetric){var i="";null!==e&&n.headerName===e.column.colDef.headerName&&(i=' selected="selected"'),o+='<option value="'+n.colId+'"'+i+">",o+=n.headerName,o+="</option>"}}return o},this.validateNumericInput=function(t){var e="keypress"==(t=t||event).type?String.fromCharCode(t.keyCode||t.which):(t.clipboardData||window.clipboardData).getData("Text");if(void 0===t.key){var o=t.which||t.keyCode;if(o>31&&o<48||o>57&&o<127)return!1}else if(1===t.key.length&&/[^\d][.\d]*/gi.test(e))return!1},this.removeTextSpinner=function(){vitaraJQ(".vitara_text_spinner",e.popupWindow).spinner("destroy")},this.initiateRatioPopupModal=function(t){e.params=t,e.popupWindowManager.createPopup({templatePath:n.utils.getHTMLTemplates().GRID_RATIO_VIEW,onLoadHandler:e.onLoadHandler})}}},(t,e,o)=>{o.r(e),o.d(e,{PopupWindowManager:()=>r});var r=function(){};vitaraJQ.extend(r.prototype,{CLASS_VITARA:"vitara",MENU_CONTAINER_ID_CLASS:"vitara-menu-container",SESSION_KEY:"VITARA_POPUP_DIMS",DEFAULT_OPTIONS:{width:"460px",height:"400px",maxHeight:"600px",top:"8%",left:"34%",popupClass:"my-wrapper",resizable:{minWidth:400,maxWidth:800,minHeight:200,maxHeight:700}},init:function(){this.createMenuContainer()},destroy:function(){this.removeMenuContainer()},getMenuContainer:function(){var t=vitaraJQ("#"+this.MENU_CONTAINER_ID_CLASS,vitaraJQ(document.body));return(!t||t.length<1)&&this.createMenuContainer(),vitaraJQ("#"+this.MENU_CONTAINER_ID_CLASS,vitaraJQ(document.body))},createMenuContainer:function(){vitaraJQ(document.body).append('<div id="'+this.MENU_CONTAINER_ID_CLASS+'" class="'+this.CLASS_VITARA+" "+this.MENU_CONTAINER_ID_CLASS+'"></div>')},removeMenuContainer:function(){vitaraJQ("#"+this.MENU_CONTAINER_ID_CLASS,vitaraJQ(document.body)).remove()},removePopupWindow:function(){this.getPopupWindow().remove()},getMenuElement:function(t){return vitaraJQ(t,this.getMenuContainer())},createPopupWindow:function(){vitaraJQ(this.getMenuContainer()).append('<div id="modalWindow'+this.getPopupID()+'" class="'+this.getPopupClass()+' modal fade in new_test" style="display:none;"></div>')},getPopupWindow:function(){return this.getMenuElement("#modalWindow"+this.getPopupID())},getPopupClass:function(){return this.getOptions().popupClass},getPopupID:function(){return this.getOptions().popupID||""},getTemplatePath:function(){return this.getOptions().templatePath||""},setOptions:function(t){this.options=vitaraJQ.extend(!0,{},this.DEFAULT_OPTIONS,t)},getOptions:function(){return this.options},cleanPopupWindow:function(){var t=this.getPopupWindow();t&&t[0]&&t.remove();var e=this.getMenuElement(".modal-backdrop");e&&e[0]&&e.remove()},setPopupPosition:function(){var t=this.getUserSessionInfo()||{height:this.getOptions().height,width:this.getOptions().width};this.getMenuElement(".modal-dialog").css({left:this.getOptions().left,top:this.getOptions().top}),this.getMenuElement(".modal-content").css({height:t.height,width:t.width}),this.getMenuElement(".modal-body").css({height:parseInt(t.height)-50})},setNonResizablePopupPosition:function(){this.getMenuElement(".modal-dialog").css({width:this.getOptions().width,left:this.getOptions().left,top:this.getOptions().top}),this.getMenuElement(".modal-content").css({height:this.getOptions().height,"max-height":this.getOptions().maxHeight})},getUserSessionInfo:function(){return JSON.parse(sessionStorage.getItem(this.SESSION_KEY))},setUserSessionInfo:function(t){return sessionStorage.setItem(this.SESSION_KEY,JSON.stringify(t))},setModalProperty:function(t,e){try{this.getPopupWindow().data("bs.modal").options[t]=e}catch(t){console.log(t)}},BS_MODAL_PROPS:{BACKDROP:"backdrop"},getPopUpWindowResizableOptions:function(){var t=this;return{minHeight:t.getOptions().resizable.minHeight,minWidth:t.getOptions().resizable.minWidth,maxHeight:t.getOptions().resizable.maxHeight,maxWidth:t.getOptions().resizable.maxWidth,handles:"se",start:function(){t.setModalProperty(t.BS_MODAL_PROPS.BACKDROP,"static")},resize:function(t,e){vitaraJQ(".modal-body").css({height:e.size.height-50})},stop:function(e,o){t.setUserSessionInfo({width:o.size.width,height:o.size.height}),setTimeout((function(){t.setModalProperty(t.BS_MODAL_PROPS.BACKDROP,!0)}),100)}}},setAsResizable:function(t,e){t&&t.resizable&&t.resizable(e)},isNotResizable:function(){return this.getMenuElement(".modal-dialog.not-resizable").length>0},createPopup:function(t){var e=this;this.setOptions(t),this.cleanPopupWindow(),function(o){e.createPopupWindow();var r=e.getPopupWindow();r.modal("show"),o(".modal-backdrop").appendTo(e.getMenuContainer()).addClass("my-wrapper"),r.append(e.getTemplatePath()),e.isNotResizable()?e.setNonResizablePopupPosition():e.setPopupPosition(),t.onLoadHandler&&"function"==typeof t.onLoadHandler&&t.onLoadHandler(r),o(".modal-dialog").draggable({}),e.isNotResizable()||e.setAsResizable(o(".modal-content"),e.getPopUpWindowResizableOptions()),r.on("hidden.bs.modal",(function(){t.onHideHandler&&"function"==typeof t.onHideHandler&&t.onHideHandler(r),e.removePopupWindow(),e.setOptions(null)})),o("body").removeClass(".modal-open")}(vitaraJQ)}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartRowGroupOpenedModel:()=>r});var r=function(t){var e=this;e.stateKey="rowGroupOpened",e.rowGroupOpenedModel={},e.stateManager=t.getStateManager(),e.eventDispatcher=t.getEventDispatcher(),this.cleanRowGroupOpenedModel=function(){var o=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumns(),r={};o.forEach((function(t){void 0!==e.rowGroupOpenedModel[t]&&(r[t]=e.rowGroupOpenedModel[t])})),e.rowGroupOpenedModel=r,e._saveState()},this.clearRowGroupOpenedModel=function(){e.rowGroupOpenedModel={},e._saveState()},this.getIsAnyRowGroupExpanded=function(){var t=Object.keys(e.rowGroupOpenedModel);if(0===t.length)return!1;for(var o=0;o<t.length;o++)if(e.rowGroupOpenedModel[t[o]].length>0)return!0;return!1},this.shouldHideBottomLeafRow=function(){var e=t.gridOptions.chartDataMapper.numAttributes;if(e>0){var o=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length,r=t.getMetricToRowsModel().isMetricToRows()?1:0;return o===e+r+(r&&t.getMetricGroupingModel().isMetricGroupsPresent()?1:0)}return!1},this.hideBottomLeafRow=function(){var o;o=e.shouldHideBottomLeafRow()?0:t.getThemeFormattingModel().themeBodyFormattingModel.getHeight(),t.gridOptions.api.forEachLeafNode((function(t,e){t.setRowHeight(o)}))},this.isRowGroupOpened=function(t,o,r){if(void 0===e.rowGroupOpenedModel[t])return!1;var n=e.rowGroupOpenedModel[t].indexOf(o);return-1!==n&&(!r||n)},this.isAnyRowOpened=function(t){var o=Object.keys(e.rowGroupOpenedModel);if(t)return o.indexOf(t)>-1&&e.rowGroupOpenedModel[t].length>0;for(var r=0;r<o.length;r++)if(e.rowGroupOpenedModel[o[r]].length>0)return!0;return!1},this.appendRowGroupOpened=function(t,o){e.isRowGroupOpened(t,o)||(void 0===e.rowGroupOpenedModel[t]&&(e.rowGroupOpenedModel[t]=[]),e.rowGroupOpenedModel[t].push(o),e._saveState())},this.removeRowGroupOpened=function(t,o){var r=e.isRowGroupOpened(t,o,!0);e.rowGroupOpenedModel[t]&&(1===e.rowGroupOpenedModel[t].length?delete e.rowGroupOpenedModel[t]:e.rowGroupOpenedModel[t].splice(r,1)),e._saveState()},this.getRowGroupOpenedModel=function(){return vitaraJQ.extend(!0,{},e.rowGroupOpenedModel)},this.onRowGroupOpened=function(o){"api"!==o.source&&t.gridOptions.context.enableDocumentStorage(),o.node.expanded?e.appendRowGroupOpened(o.node.field,o.node.key):e.removeRowGroupOpened(o.node.field,o.node.key),t.gridOptions.api.redrawRows()},this.drawRowGroupOpened=function(){"grid"===t.gridOptions.chartType?(t.gridOptions.api.forEachNode((function(e){t.getRowGroupOpenedModel().isRowGroupOpened(e.field,e.key)&&(e.expanded=!0)})),t.gridOptions.api.onGroupExpandedOrCollapsed()):t.gridOptions.api.forEachNode((function(e){t.getRowGroupOpenedModel().isRowGroupOpened(e.field,e.key)&&e.setExpanded(!0)}))},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.rowGroupOpenedModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t={}),e.rowGroupOpenedModel=t},e._restoreState(),t.gridOptions.api.addEventListener("rowGroupOpened",e.onRowGroupOpened),t.gridOptions.api.addEventListener("columnRowGroupChanged",e.cleanRowGroupOpenedModel),e.eventDispatcher.addEventListener("redrawRows",null,e.drawRowGroupOpened),this.initModel=function(){}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnResizeModel:()=>i});var r=o(329),n=o(330),i=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="columnResize",e.resizeModel={},e.eventDispatcher=t.getEventDispatcher(),e.gridContext=t,this.checkAndApplyResizing=function(o){e.getFitToGridWidthModel().isFitToGridWidth()?e.getFitToGridWidthModel().applyFitToGridWidth():e.getFitToContentModel().fitToContent(),t.getColumnStateMaster().columnWidthModel.setAutosizeWidths(o)},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.resizeModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState("fitToGridWidth"),o=e.stateManager.restoreSpecificState("fitToGridContent");void 0===t&&void 0===o&&e.getFitToGridWidthModel().setFitToGridWidth()},e._restoreState(),t.gridOptions.api.addEventListener("columnResized",(function(t){t.finished&&"uiColumnResized"===t.source&&(null===t.column?t.columns.forEach((function(t){e.getFitToContentModel().unsetColumnToContent(t.colDef.colId)})):e.getFitToContentModel().unsetColumnToContent(t.column.colDef.colId),e.getFitToGridWidthModel().unsetFitToGridWidth())})),t.gridOptions.api.addEventListener("columnRowGroupChanged",(function(t){e.checkAndApplyResizing()})),t.gridOptions.api.addEventListener("columnVisible",(function(t){e.checkAndApplyResizing()})),t.gridOptions.api.addEventListener("columnPivotChanged",(function(t){e.checkAndApplyResizing()})),t.eventDispatcher.addEventListener("aggregationChanged",null,e.checkAndApplyResizing)};vitaraJQ.extend(i.prototype,{getFitToContentModel:function(){return this.fitToContentModel||(this.fitToContentModel=new r.VitaraGridChartFitToContentModel(this.gridContext)),this.fitToContentModel},getFitToGridWidthModel:function(){return this.fitToGridWidthModel||(this.fitToGridWidthModel=new n.VitaraGridChartFitToGridWidthModel(this.gridContext)),this.fitToGridWidthModel}})},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartFitToContentModel:()=>r});var r=function(t){var e=this;e.gridContentModel={fit_all_to_content:!1,columns:[]},e.stateKey="fitToGridContent",e.stateManager=t.getStateManager(),e.eventDispatcher=t.getEventDispatcher(),e.gridContext=t,this.setColumnToContent=function(o,r,n){e.isColumnWidthToContent(o.colDef.headerName)||(e.gridContentModel.columns.push(o.colDef.headerName),n||e._saveState(),r||e.dispatchFitThisToContent()),t.gridOptions.columnApi.autoSizeColumns([o])},this.isColumnWidthToContent=function(t){return e.gridContentModel.columns.indexOf(t)>-1},this.getColumnWidthToContent=function(){return e.gridContentModel.columns.slice()},this.applyColumnToContent=function(e){t.gridOptions.columnApi.getAllGridColumns().forEach((function(o){o.colDef.headerName===e&&t.gridOptions.columnApi.autoSizeColumn(o)}))},this.setAllColumnsToContent=function(){var o=t.getColumnStateMaster().columnWidthModel;o.setAllowApiMutex();var r=t.gridOptions.columnApi.getAllGridColumns();e.gridContentModel.fit_all_to_content=!0,r.forEach((function(t){"ag-Grid-AutoColumn"!==t.colDef.colId&&-1===e.gridContentModel.columns.indexOf(t.colDef.headerName)&&e.gridContentModel.columns.push(t.colDef.headerName)})),e.applyToContentToDisplayedColumns(),o.unsetAllowApiMutex(),e._saveState(),e.dispatchFitAllToContent()},this.applyToContentToDisplayedColumns=function(){var o=t.gridOptions.columnApi.getAllDisplayedColumns(),r=[];e.gridContentModel.fit_all_to_content?r=o:o.forEach((function(t){e.gridContentModel.columns.indexOf(t.colDef.headerName)>-1&&r.push(t.colId)})),t.gridOptions.columnApi.autoSizeColumns(r)},this.isAllColumnWidthToContent=function(){return e.gridContentModel.fit_all_to_content},this.unsetColumnToContent=function(t,o,r){e.gridContentModel.columns.splice(e.gridContentModel.columns.indexOf(t),1),e.gridContentModel.fit_all_to_content=!1,r||e._saveState(),o||e.dispatchFitThisToContent()},this.unsetAllColumnsToContent=function(){e.gridContentModel.columns=[],e.gridContentModel.fit_all_to_content=!1,e._saveState()},this._updateContentColumns=function(){if(e.gridContentModel.fit_all_to_content){var t=e.gridContentModel.columns.indexOf("Group");t>-1&&e.gridContentModel.columns.splice(t,1);var o=e.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),r=e.gridContentModel.columns.indexOf("ag-Grid-AutoColumn");o.length>0?-1===r&&e.gridContentModel.columns.unshift("ag-Grid-AutoColumn"):r>-1&&e.gridContentModel.columns.splice(r,1),e.gridContext.gridOptions.columnApi.getAllGridColumns().forEach((function(t){"ag-Grid-AutoColumn"!==t.colId&&-1===e.gridContentModel.columns.indexOf(t.colDef.headerName)&&e.gridContentModel.columns.push(t.colDef.headerName)})),e._saveState()}},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.gridContentModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey),o=t;void 0===t?o={fit_all_to_content:!1,columns:[]}:Array.isArray(t)&&(o={fit_all_to_content:!1,columns:t}),e.gridContentModel=o},this.dispatchFitThisToContent=function(){e.eventDispatcher.createAndDispatchEvent("fitColumnToContent",null)},this.dispatchFitAllToContent=function(){e.eventDispatcher.createAndDispatchEvent("fitAllColumnsToContent",null)},this.fitToContent=e.applyToContentToDisplayedColumns,e.eventDispatcher.addEventListener("fitColumnToGridWidth",null,e.unsetAllColumnsToContent),t.gridOptions.api.addEventListener("virtualColumnsChanged",(function(){e._updateContentColumns(),e.fitToContent()})),t.gridOptions.api.addEventListener("columnRowGroupChanged",(function(){e._updateContentColumns(),e.fitToContent()})),e._restoreState(),e._updateContentColumns()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartFitToGridWidthModel:()=>r});var r=function(t){var e=this;e.gridWidthModel=!1,e.stateKey="fitToGridWidth",e.stateManager=t.getStateManager(),e.eventDispatcher=t.getEventDispatcher(),this.isFitToGridWidth=function(){return e.gridWidthModel},this.setFitToGridWidth=function(){e.gridWidthModel=!0,e.applyFitToGridWidth(),e._saveState(),e.dispatchFitToGridWidth()},this.unsetFitToGridWidth=function(){e.gridWidthModel=!1,e._saveState()},this.toggleFitToGridWidth=function(){e.isFitToGridWidth()?e.unsetFitToGridWidth():e.setFitToGridWidth()},this.applyFitToGridWidth=function(){var e=vitaraJQ("#"+t.gridOptions.gridArea.id);if(e&&e[0]){var o=e[0].scrollWidth-20;t.gridOptions.columnApi.sizeColumnsToFit(o)}},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.gridWidthModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t=!1),e.gridWidthModel=t},this.dispatchFitToGridWidth=function(){e.eventDispatcher.createAndDispatchEvent("fitColumnToGridWidth",null)},e.eventDispatcher.addEventListener("fitColumnToContent",null,e.unsetFitToGridWidth),e.eventDispatcher.addEventListener("fitAllColumnsToContent",null,e.unsetFitToGridWidth),e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartGridThemeView:()=>r});var r=function(t){var e=this;e.gridContext=t,this.populateThemeView=function(){var o=t.gridOptions.context.propMenu,r=t.gridOptions.context.propMenu.getPropMenuContainer(),n=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();vitaraJQ("#popupthemeFormat",r).html(e._getThemeFormatHtml()),vitaraJQ("#popupanimationCheckBox",r).prop("checked",t.getAnimationModel().isAnimated()),vitaraJQ("#popupshowDetailRows",r).prop("checked",t.getShowDetailRowsModel().isShowDetailRows()),0===n.length?(vitaraJQ("#popupgroupedRowHeight",r).closest("div").hide(),vitaraJQ("#popupshowHideGroupedChildren",r).closest("div").hide(),vitaraJQ("#popupgridCheckbox",r).closest(".row").hide()):(vitaraJQ("#popupgroupedRowHeight",r).closest("div").show(),vitaraJQ("#popupshowHideGroupedChildren",r).prop("checked",t.getChildrenCountModel().isChildrenCountHidden()),vitaraJQ("#popupshowHideGroupedChildren",r).closest("div").show(),vitaraJQ("#popupgridCheckbox",r).closest(".row").show());var i=t.getPivotDropZoneModel().isPivotDropZoneVisible(),a=t.getGroupingDropZoneModel().isGroupingDropZoneVisible(),l="hide";i&&a&&(l="show"),vitaraJQ("#popupgridGroupingPivotDropZone",r).val(l),vitaraJQ("#popuprowHeight",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getHeight()),vitaraJQ("#popupheaderHeight",r).val(t.getThemeFormattingModel().themeHeaderFormattingModel.getHeight()),vitaraJQ("#popupgroupedRowHeight",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getGroupedHeight()),vitaraJQ("#popupheaderFontFamily",r).val(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontFamily()),vitaraJQ("#popupheaderFontSize",r).val(t.getThemeFormattingModel().themeHeaderFormattingModel.getFontSize()),vitaraJQ("#popupheaderFontAlignment",r).val(t.getThemeFormattingModel().themeHeaderFormattingModel.getTextAlign()),vitaraJQ("#popupheaderFontVerticalAlignment",r).val(t.getThemeFormattingModel().themeHeaderFormattingModel.getVerticalAlign()),vitaraJQ("#popupbodyFontFamily",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getFontFamily()),vitaraJQ("#popupbodyFontSize",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getFontSize()),vitaraJQ("#popupbodyFontAlignment",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getTextAlign()),vitaraJQ("#popupbodyFontVerticalAlignment",r).val(t.getThemeFormattingModel().themeBodyFormattingModel.getVerticalAlign()),t.getChartTypeModel().isMicroChart()&&(vitaraJQ("#popupgridGroupingPivotDropZone",r).val("hide"),vitaraJQ("#popupgridGroupingPivotDropZone",r).prop("disabled",!0)),vitaraJQ("#popupgridCheckbox",r).prop("checked",t.getGridCheckboxModel().isGridCheckboxEnabled()),vitaraJQ(".headerFontBold",r).removeClass("active"),t.getThemeFormattingModel().themeHeaderFormattingModel.isBold()&&vitaraJQ(".headerFontBold",r).addClass("active"),vitaraJQ(".headerFontIalic",r).removeClass("active"),t.getThemeFormattingModel().themeHeaderFormattingModel.isItalic()&&vitaraJQ(".headerFontItalic",r).addClass("active"),vitaraJQ(".headerFontUnderline",r).removeClass("active"),t.getThemeFormattingModel().themeHeaderFormattingModel.isUnderline()&&vitaraJQ(".headerFontUnderline",r).addClass("active"),vitaraJQ(".bodyFontBold",r).removeClass("active"),t.getThemeFormattingModel().themeBodyFormattingModel.isBold()&&vitaraJQ(".bodyFontBold",r).addClass("active"),vitaraJQ(".bodyFontItalic",r).removeClass("active"),t.getThemeFormattingModel().themeBodyFormattingModel.isItalic()&&vitaraJQ(".headerFontItalic",r).addClass("active"),vitaraJQ(".bodyFontUnderline",r).removeClass("active"),t.getThemeFormattingModel().themeBodyFormattingModel.isUnderline()&&vitaraJQ(".bodyFontUnderline",r).addClass("active"),vitaraJQ("#popupheaderFontFamily",r).parent().parent().show(),vitaraJQ("#popupbodyFontFamily",r).parent().parent().show(),o.setVitaraColorPicker("#popupheaderFontColor",t.getThemeFormattingModel().themeHeaderFormattingModel.getFontColor()),o.setVitaraColorPicker("#popupheaderBgColor",t.getThemeFormattingModel().themeHeaderFormattingModel.getBgColor()),o.setVitaraColorPicker("#popupbodyFontColor",t.getThemeFormattingModel().themeBodyFormattingModel.getFontColor()),o.setVitaraColorPicker("#popupbodyBgColor",t.getThemeFormattingModel().themeBodyFormattingModel.getBgColor())},this._getThemeFormatHtml=function(){var e="<select>",o=t.getThemeModel().getGridThemeModel(),r=[];return Object.keys(t.getThemeModel().themeMap).forEach((function(t){r.push({value:t,text:t})})),r.forEach((function(t){var r="<option value='"+t.value+"'";t.value===o&&(r+="selected"),r+=">"+t.text+"</option>",e+=r})),e+="</select>"}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartFormatColumnView:()=>r});var r=function(t,e){var o=this;o.eInterface=t.gridOptions.context.editorInterfaceRef,this.getFormatColumnOptions=function(e){var o=[];void 0===e&&(e="--Select--");var r=t.getTitles();return r.unshift("--Select--"),r.forEach((function(t){var r={text:t,value:t};t===e&&(r.selected="selected"),o.push(r)})),o},this.populateFormatView=function(e){var r=o.eInterface,n=r.getMenuElement("#popupformatColSelect").val();r.getMenuElement("#popupformatColSelect").empty(),r.propMenuHelper.getSelectDropDown().addDropDownOptions(r.getMenuElement("#popupformatColSelect"),o.getFormatColumnOptions(n)),r.getMenuElement("#popupformatColSelect").parent().parent().show();var i=vitaraJQ("#popupformatType").val(),a=n,l=!1,s=!1,u=!1,d=void 0,c=void 0,h=void 0,g=void 0,p=void 0,m=void 0;if(""!==n&&""!==i){var f=t.getColumnFormattingModel().getColumnHeaderFormattingModel();"body"===i&&(f=t.getColumnFormattingModel().getColumnBodyFormattingModel()),l=f.isBold(a),s=f.isItalic(a),u=f.isUnderline(a),d=f.getFontFamily(a),c=f.getFontSize(a),h=f.getTextAlign(a),g=f.getFontColor(a),p=f.getBgColor(a),m=f.getVerticalAlign(a)}vitaraJQ(".formatFontBold").removeClass("active"),l&&vitaraJQ(".formatFontBold").addClass("active"),vitaraJQ(".formatFontItalic").removeClass("active"),s&&vitaraJQ(".formatFontItalic").addClass("active"),vitaraJQ(".formatFontUnderline").removeClass("active"),u&&vitaraJQ(".formatFontUnderline").addClass("active"),void 0!==d&&vitaraJQ("#popupformatFontFamily").val(d),void 0!==c&&vitaraJQ("#popupformatFontSize").val(c),void 0!==h&&vitaraJQ("#popupformatFontAlign").val(h),void 0!==m&&vitaraJQ("#popupformatVerticalAlign").val(m),o.eInterface.propMenuHelper.setVitaraColorPicker("#popupformatFontColor",g),o.eInterface.propMenuHelper.setVitaraColorPicker("#popupformatBgColor",p)}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartGridThemeModel:()=>r});var r=function(t){var e=this;e.stateKey="themeFormat",e.stateManager=t.getStateManager(),e.DEFAULT_THEME="Fresh",e.BASE_THEME="White",e.eventDispatcher=t.getEventDispatcher(),e.themeMap={Fresh:"ag-theme-balham",Dark:"ag-theme-balham-dark",Blue:"ag-theme-blue",White:"ag-theme-bootstrap"},this.prepare_base_theme=function(){var o=t.utils.getCustomProperties()["gridThemes.baseThemes"];void 0!==o&&o.split(",").forEach((function(t){void 0===e.themeMap[t]&&(e.themeMap[t]="ag-theme-bootstrap "+t)}))},this.load_custom_themes=function(){var o=t.utils.getCustomProperties()["gridThemes.themes"],r=t.utils.getCustomProperties()["gridThemes.baseThemes"];if(void 0!==o){var n="ag-theme-bootstrap ";void 0!==r&&(r=r.split(",")),o.split(",").forEach((function(t,o){void 0!==r&&(n=e.themeMap[r[o%r.length]]+" "),e.themeMap[t]=n+t}))}},this.load_default_themes=function(){var o=t.utils.getCustomProperties()["gridThemes.defaultTheme"];void 0!==o&&void 0!==e.themeMap[o]&&(e.DEFAULT_THEME=o),e.gridThemeModel=e.DEFAULT_THEME},this.setGridThemeModel=function(t){void 0===t&&(t=e.DEFAULT_THEME),e.gridThemeModel=t,e._applyTheme(),e._saveState()},this.getGridThemeModel=function(){return e.gridThemeModel},this._applyTheme=function(){for(var o=t.gridOptions.chartNode,r=t.gridOptions.gridArea,n=e.getGridThemeModel(),i=e.themeMap[n],a=Object.values(e.themeMap),l=0,s=["theme-fresh","theme-dark","theme-blue","theme-white"];l<s.length;l++){var u=s[l];if(null!=o&&o.classList.contains(u)){o.classList.remove(u);break}}for(var d=0,c=a;d<c.length;d++){var h=c[d];if(null!=r&&r.classList.contains(h)){r.classList.remove(h);break}}null==o||o.classList.add("theme-".concat(n.toLowerCase())),null==r||r.classList.add(i)},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.gridThemeModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0!==t&&void 0!==e.themeMap[t]||(t=e.DEFAULT_THEME),e.gridThemeModel=t},e.prepare_base_theme(),e.load_custom_themes(),e.load_default_themes(),e._restoreState(),e._applyTheme()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraMicroChartTypeModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.chartTypeModel={},e.DEFAULT_CHART_TYPE_MODEL={},e.stateKey="chartTypes",this.DEFAULT_CHART_TYPE="line",this.CHART_DEFAULTS={variance:{chartType:"variance",color:"#8BB400",negaBarColor:"#E52E2D",axisSpecificity:"cell"},variancepercentage:{chartType:"variancepercentage",color:"#8BB400",negaBarColor:"#E52E2D",axisSpecificity:"cell"},line:{chartType:"line",color:"#9fa3a8",spotColor:"#e79649",minSpotColor:!1,maxSpotColor:!1,axisSpecificity:"column"},bar:{chartType:"bar",color:"#9fa3a8",negaBarColor:"#E52E2D",axisSpecificity:"column"},bullet:{chartType:"bullet",spotColor:"#e79649",minSpotColor:!1,maxSpotColor:!1,color:"#8BB400",negaBarColor:"#E52E2D",axisSpecificity:"column",performanceColor:"#14526a",performanceAgg:"avg",targetAgg:"last",targetColor:"#000000",band1Color:"#b3b3b3",band1Agg:"min",band2Color:"#cac9c9",band2Agg:"avg",band3Color:"#ececec",band3Agg:"max",targetWidth:2}},this.setChartType=function(o,r){e._setChartValue(o,"chartType",r),t.getPlotTypeSelectorModel().setPlotType(o,"trendline")},this.getChartType=function(t,o){return e.chartTypeModel&&e.chartTypeModel[t]?e.chartTypeModel[t].chartType:o?void 0:this.DEFAULT_CHART_TYPE},this.setChartColor=function(t,o){e._setChartValue(t,"color",o)},this.getChartColor=function(t){return e._getChartValue(t,"color")},this.setChartSpotColor=function(t,o){e._setChartValue(t,"spotColor",o)},this.getChartSpotColor=function(t){return e._getChartValue(t,"spotColor")},this.setChartStartAxis=function(t,o){e._setChartValue(t,"startAxis",o)},this.getChartStartAxis=function(t){return e._getChartValue(t,"startAxis")},this.setChartEndAxis=function(t,o){e._setChartValue(t,"endAxis",o)},this.getChartEndAxis=function(t){return e._getChartValue(t,"endAxis")},this.setChartStartAxisValue=function(t,o){e._setChartValue(t,"startAxisValue",o)},this.getChartStartAxisValue=function(t){return e._getChartValue(t,"startAxisValue")},this.setChartEndAxisValue=function(t,o){e._setChartValue(t,"endAxisValue",o)},this.getChartEndAxisValue=function(t){return e._getChartValue(t,"endAxisValue")},this.setChartMinSpotColor=function(t,o){e._setChartValue(t,"minSpotColor",o)},this.getChartMinSpotColor=function(t){return e._getChartValue(t,"minSpotColor")},this.setChartMaxSpotColor=function(t,o){e._setChartValue(t,"maxSpotColor",o)},this.getChartMaxSpotColor=function(t){return e._getChartValue(t,"maxSpotColor")},this.setChartNegativeBarColor=function(t,o){e._setChartValue(t,"negaBarColor",o)},this.getChartNegativeBarColor=function(t){return e._getChartValue(t,"negaBarColor")},this.setTarget=function(t,o){e._setChartValue(t,"target",o)},this.getTarget=function(t){return e._getChartValue(t,"target")},this.setTargetAgg=function(t,o){e._setChartValue(t,"targetAgg",o)},this.getTargetAgg=function(t){return e._getChartValue(t,"targetAgg")},this.setPerformanceAgg=function(t,o){e._setChartValue(t,"performanceAgg",o)},this.getPerformanceAgg=function(t){return e._getChartValue(t,"performanceAgg")},this.setPerformanceColor=function(t,o){e._setChartValue(t,"performanceColor",o)},this.getPerformanceColor=function(t){return e._getChartValue(t,"performanceColor")},this.setTargetColor=function(t,o){e._setChartValue(t,"targetColor",o)},this.getTargetColor=function(t){return e._getChartValue(t,"targetColor")},this.setTargetWidth=function(t,o){e._setChartValue(t,"targetWidth",o)},this.getTargetWidth=function(t){return e._getChartValue(t,"targetWidth")},this.setBand1=function(t,o){e._setChartValue(t,"band1",o)},this.getBand1=function(o){var r=e._getChartValue(o,"band1");return-1===t.getTitles().indexOf(r)?o:r},this.setBand2=function(t,o){e._setChartValue(t,"band2",o)},this.getBand2=function(o){var r=e._getChartValue(o,"band2");return-1===t.getTitles().indexOf(r)?o:r},this.setBand3=function(t,o){e._setChartValue(t,"band3",o)},this.getBand3=function(o){var r=e._getChartValue(o,"band3");return-1===t.getTitles().indexOf(r)?o:r},this.setBand1Agg=function(t,o){e._setChartValue(t,"band1Agg",o)},this.getBand1Agg=function(t){return e._getChartValue(t,"band1Agg")},this.setBand2Agg=function(t,o){e._setChartValue(t,"band2Agg",o)},this.getBand2Agg=function(t){return e._getChartValue(t,"band2Agg")},this.setBand3Agg=function(t,o){e._setChartValue(t,"band3Agg",o)},this.getBand3Agg=function(t){return e._getChartValue(t,"band3Agg")},this.setBand1Color=function(t,o){e._setChartValue(t,"band1Color",o)},this.getBand1Color=function(t){return e._getChartValue(t,"band1Color")},this.setBand2Color=function(t,o){e._setChartValue(t,"band2Color",o)},this.getBand2Color=function(t){return e._getChartValue(t,"band2Color")},this.setBand3Color=function(t,o){e._setChartValue(t,"band3Color",o)},this.getBand3Color=function(t){return e._getChartValue(t,"band3Color")},this.setAxisSpecificity=function(t,o){e._setChartValue(t,"axisSpecificity",o)},this.getAxisSpecificity=function(t){return e._getChartValue(t,"axisSpecificity")},this.setAllChartValues=function(t,o){e._createEmptyModelIfUndefined(t),e.chartTypeModel[t]=o,e._saveState()},this._setChartValue=function(t,o,r){e._createEmptyModelIfUndefined(t),e.chartTypeModel[t][o]=r,e._saveState()},this._getChartValue=function(t,o){if("all"===o)return e.CHART_DEFAULTS[this.DEFAULT_CHART_TYPE];var r=this.getChartType(t),n="";return e.chartTypeModel&&e.chartTypeModel[t]&&void 0!==e.chartTypeModel[t][o]?n=e.chartTypeModel[t][o]:void 0===(n=e.CHART_DEFAULTS[r][o])&&(n=t),n},this._getChartValueForGivenMetric=function(t){if(void 0===e.chartTypeModel[t])return e._getChartValue(t,"all");var o=e.getChartType(t);return vitaraJQ.extend({},e.CHART_DEFAULTS[o],e.chartTypeModel[t])},this.getChartValueForGivenMetric=function(t){return e._getChartValueForGivenMetric(t)},this._createEmptyModelIfUndefined=function(t){void 0===e.chartTypeModel[t]&&(e.chartTypeModel[t]={})},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.chartTypeModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t=e.DEFAULT_CHART_TYPE_MODEL),e.chartTypeModel=t},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraMicroChartPlotTypeSelectorModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="selectorModel",e.parentKey="",e.selectorModel={},e.DEFAULT_MODEL={},e.eventDispatcher=t.getEventDispatcher(),e.aggregationWrapper=t.getAggregationWrapperModel(),this.setPlotType=function(o,r,n){t.getAggregationWrapperModel().isClearAggregationFlag(o)&&t.getAggregationWrapperModel().setAggregationAtAllLevels(o,"sum"),e.selectorModel[o]=r,n||e._saveState()},this.getPlotType=function(o){if(void 0===e.selectorModel[o]){if(void 0!==t.getMicroChartTypeModel().getChartType(o,!0))return e.setPlotType(o,"trendline"),"trendline";var r=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal()[0];return""!==t.getChooseColumnModel().getChooseColumn(o,r)?(e.setPlotType(o,"numeric"),"numeric"):e.aggregationWrapper.isClearAggregationFlag(o)?(e.setPlotType(o,"trendline"),"trendline"):(e.setPlotType(o,"numeric"),"numeric")}return e.selectorModel[o]},this.getDefaultModel=function(){var e=t.getColumnStateMaster().getAllMetrics(),o={},r="trendline";return t.getChartTypeModel().isGridChart()&&(r="numeric"),e.forEach((function(t){o[t]=r})),o},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.selectorModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=e.stateManager.restoreSpecificState(e.stateKey);void 0===t&&(t=e.getDefaultModel()),e.selectorModel=t},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartSimpleHeaderComponent:()=>i});var r=o(45),n=o(4);function i(){}i.prototype.enableDocumentStorage=function(){this.gridContext.getGridOptions().context.enableDocumentStorage()},i.prototype.init=function(t){var e,o;if(this.groupHeader=!1,"ag-Grid-AutoColumn"===t.column.colDef.colId&&(this.groupHeader=!0),this.agParams=t,this.eGui=document.createElement("div"),this.eGui.id="vitaraHeader",this.gridContext=this.agParams.column.gridOptionsService.gridOptions.headerComponentParams.gridContext,this.sortIcon=this.gridContext.getSortingView().getSortingIconForColumn(t.column.colDef.headerName),this.gridGenContenxt=this.agParams.api.gridOptionsService.gridOptions.context.renderedChart,this.filterModel=this.gridGenContenxt.filterModel,this.filterIcon="ag-hidden",this.headerName=this.agParams.column.colDef.headerName,this.colId=this.agParams.column.colDef.colId,this.groupHeader&&(this.rowGroups=this.gridContext.gridOptions.columnApi.getRowGroupColumns(),this.headerName=1===this.rowGroups.length?this.rowGroups[0].colDef.headerName:this.gridContext.gridOptions.localeTextFunc("Group","Group")),this.filterModel){var i=this.filterModel.filterThresholdByMetric(t.column.colDef.colId),a=this.gridContext.gridOptions.api.getFilterModel();0===i.length&&-1===Object.keys(a).indexOf(this.agParams.column.colDef.colId)?this.filterIcon="ag-hidden":this.filterIcon=""}this.headerFormatting=this.gridContext.getColumnFormattingModel().columnHeaderFormattingModel;var l="customHeaderMenuButton";this.agParams.context&&null!==(e=(o=this.agParams.context.platformContext).getResultContextMenuChecks)&&void 0!==e&&e.call(o)||(l+=" hidden");var s="ag-Grid-AutoColumn"===this.colId?"Group":this.agParams.column.colId,u=this.gridContext.getCustomFormatEditorModel().getHeaderCustomFormat(s,this.headerName)||this.headerName,d=n.get(t,"context.dataHelper.numMetrics"),c="customHeaderLabel";c=Boolean(n.includes(n.get(t,"column.colDef.colId"),"pivot"))&&1==d?c+" vitara-grid-label-hide":c,this.eGui.innerHTML='<span id = "agMenu" class="'+l+'"><span class="ag-icon ag-icon-menu"></span></span><span><span id = "sortIcon" class="ag-icon '+this.sortIcon+'"></span></span><span id="filterIcon"><span class="ag-icon ag-icon-filter '+this.filterIcon+'"></span></span><div id = "agCustomHeaderLabel"><span id="agHeaderCellLabel" class="'+c+'"><span class="agCustomFormatWrapper">'+u+"</span></span></div>",this.eMenuButton=this.eGui.querySelector(".customHeaderMenuButton"),this.eLabel=this.eGui.querySelector(".customHeaderLabel"),this.eHeaderLabel=this.eGui.querySelector("#agHeaderCellLabel"),this.icons=this.eGui.querySelector("#sortIcon"),this.priority=this.eGui.querySelector(".customPriorityNumber"),this.filter=this.eGui.querySelector("#filterIcon"),this.customHeaderLabel=this.eGui.querySelector("#agCustomHeaderLabel"),this.eMenuButton.style.float="right",this.filter.style.float="left",this.eHeaderLabel.style.whiteSpace="normal",this.customHeaderLabel.style.display="flex",this.icons.style.marginTop="5px",this.customHeaderLabel.style.paddingLeft="12px",this.eGui.style.width="100%",this.eGui.style.height="100%";var h=this.headerName;this.gridContext.getColumnSelectionModel().setHeaderSelection(this.headerName,this.agParams.eGridHeader),"ag-Grid-AutoColumn"===this.colId&&(h=this.colId),this.eGui.style.backgroundColor=this.gridContext.getColumnFormattingModel().columnHeaderFormattingModel.getBgColor(h);var g=this;this.customHeaderLabel.addEventListener("click",(function(t){g.gridContext.getColumnSelectionModel().setSelection(vitaraJQ(g.eGui.parentElement).closest(".vitara-header"),g.agParams.column,r.utils.isMultiEleSelect(t))&&g.gridContext.getSortingModel().isHeaderSortable()&&g.agParams.progressSort(t.shiftKey)})),this.vitaraHeader=this.eGui,this.eMenuButton.style.opacity=0,vitaraJQ(this.vitaraHeader).hover((function(){vitaraJQ(".customHeaderMenuButton",this)[0].style.opacity=1,vitaraJQ(".customHeaderMenuButton",this)[0].style.transition="opacity 0.2s ease 0s, border 0.2s ease 0s"}),(function(){vitaraJQ(".customHeaderMenuButton",this)[0].style.opacity=0,vitaraJQ(".customHeaderMenuButton",this)[0].style.transition="opacity 0.2s ease 0s, border 0.2s ease 0s"})),this.customHeaderLabel.style.overflow="hidden",this.customHeaderLabel.style.textOverflow="ellipsis",this.customHeaderLabel.style.lineHeight=1.4,this.eLabel.style.color=this.headerFormatting.getFontColor(this.agParams.column.colId),this.eLabel.style.fontSize=this.headerFormatting.getFontSize(this.agParams.column.colId)+"px",this.eLabel.style.fontFamily="'".concat(this.headerFormatting.getFontFamily(this.agParams.column.colId),"'"),this.eLabel.style.fontWeight=this.headerFormatting.getFontWeight(this.agParams.column.colId),this.eLabel.style.textDecoration=this.headerFormatting.getTextDecoration(this.agParams.column.colId),this.eLabel.style.fontStyle=this.headerFormatting.getFontStyle(this.agParams.column.colId),this.customHeaderLabel.style.height="100%",this.customHeaderLabel.style.justifyContent=this.headerFormatting.getTextAlign(this.agParams.column.colId),this.customHeaderLabel.style["text-align"]="flex-end"===this.customHeaderLabel.style.justifyContent?"right":this.customHeaderLabel.style.justifyContent,this.customHeaderLabel.style.alignItems=this.headerFormatting.getVerticalAlign(this.agParams.column.colId),this.eHeaderLabel.style.width="100%",this.icons.style.float="left",t.column.addEventListener("filterChanged",(function(){var t;null!==(t=g.agParams)&&void 0!==t&&t.column&&g.filter&&(g.agParams.column.isFilterActive()?g.filter.firstChild.classList.remove("ag-hidden"):g.filter.firstChild.classList.add("ag-hidden"))})),this.onMenuClickListener=this.onMenuClick.bind(this),this.eMenuButton.addEventListener("click",this.onMenuClickListener),this.onSortChangedListener=this.onSortChanged.bind(this),this.agParams.column.addEventListener("sortChanged",this.onSortChangedListener)},i.prototype.onSortChanged=function(){this.enableDocumentStorage();var t=this.agParams.column.colDef.headerName;"ag-Grid-AutoColumn"===this.agParams.column.colDef.colId&&(t="ag-Grid-AutoColumn"),this.gridContext.getSortingModel().isHeaderSortable()&&(this.agParams.column.isSortAscending()?(this.gridContext.getSortingModel().setSortClearForColumn(t),this.gridContext.getSortingModel().setSortAscendingForColumn(t)):this.agParams.column.isSortDescending()?this.gridContext.getSortingModel().setSortDescendingForColumn(t):this.agParams.column.isSortNone()&&this.gridContext.getSortingModel().setSortClearForColumn(t)),this.icons.className=this.gridContext.getSortingView().getSortingIconForColumn(t)},i.prototype.getGui=function(){return this.eGui},i.prototype.onMenuClick=function(){this.enableDocumentStorage(),this.agParams.showColumnMenu(this.eMenuButton)},i.prototype.onSortRequested=function(t,e){this.agParams.setSort(t,e.shiftKey)},i.prototype.destroy=function(){this.onMenuClickListener&&this.eMenuButton.removeEventListener("click",this.onMenuClickListener),this.agParams.column.removeEventListener("sortChanged",this.onSortChangedListener)}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartPivotDropZoneModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="pivotDropZone",e.pivotDropZoneModel=!0,e.DEFAULT_MODEL=!0,e.eventDispatcher=t.getEventDispatcher(),e.gridContext=t,this.setPivotDropZoneVisible=function(){e.setPivotDropZoneByValue(!0)},this.setPivotDropZoneInvisible=function(){e.setPivotDropZoneByValue(!1)},this.setPivotDropZoneByValue=function(t){void 0!==t&&(e.pivotDropZoneModel="string"==typeof t?"show"===t:t,e._saveState()),e.showPivotDropZone()},this.isPivotDropZoneVolatile=function(){return"volatile"===e.pivotDropZoneModel},this.isPivotDropZoneVisible=function(t){var o=e.pivotDropZoneModel;return t?!0===o?"always":"never":!e.isPivotDropZoneVolatile()&&e.pivotDropZoneModel},this.showPivotDropZone=function(){var o=vitaraJQ(".ag-column-drop-list[aria-label='Column Labels']",t.gridOptions.gridArea).parent(),r=vitaraJQ(".ag-column-drop-list[aria-label='Row Groups']",t.gridOptions.gridArea).parent();r.removeClass("ag-column-drop-horizontal-half-width"),o.removeClass("ag-column-drop-horizontal-half-width"),e.isPivotDropZoneVisible()?(r.removeClass("ag-column-drop-horizontal-half-width"),o.removeClass("ag-column-drop-horizontal-half-width"),o.removeClass("ag-hidden"),r.removeClass("ag-hidden")):(o.addClass("ag-hidden"),r.addClass("ag-hidden")),(isMSTRDashBoard()&&isMSTRStatePresentation()||t.getChartTypeModel().isMicroChart())&&(o.remove(),r.remove())},this.appendPivotDropZoneListener=function(){var o=vitaraJQ(".ag-column-drop-list[aria-label='Column Labels']",t.gridOptions.gridArea);o.parent().find(".ag-column-drop-list").bind("DOMNodeInserted DOMNodeRemoved",(function(r){o.has(".ag-column-drop-empty-message").length>0&&(t.gridOptions.columnApi.setPivotMode(!1),e.showPivotDropZone())}))},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.pivotDropZoneModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.pivotDropZoneModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.pivotDropZoneModel&&(e.pivotDropZoneModel=e.DEFAULT_MODEL)},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartGroupingDropZoneModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="groupingDropZone",e.groupingDropZoneModel=!0,e.DEFAULT_MODEL=!0,e.eventDispatcher=t.getEventDispatcher(),this.setGroupingDropZoneVisible=function(){e.setGroupingDropZoneByValue(!0)},this.setGroupingDropZoneInvisible=function(){e.setGroupingDropZoneByValue(!1)},this.setGroupingDropZoneByValue=function(o){void 0!==o&&(e.groupingDropZoneModel="string"==typeof o?"show"===o:o,e._saveState()),t.getPivotDropZoneModel().showPivotDropZone()},this.isGroupingDropZoneVolatile=function(){return"volatile"===e.groupingDropZoneModel},this.isGroupingDropZoneVisible=function(t){var o=e.groupingDropZoneModel;return t?!0===o?"always":"never":!e.isGroupingDropZoneVolatile()&&e.groupingDropZoneModel},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.groupingDropZoneModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.groupingDropZoneModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.groupingDropZoneModel&&(e.groupingDropZoneModel=e.DEFAULT_MODEL)},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartRowSelectedModel:()=>r});var r=function(t){var e=this;e.gridContext=t,e.stateManager=t.getStateManager(),e.stateKey="rowSelected",e.rowSelectionModel=[],e.DEFAULT_MODEL=[],e.eventDispatcher=t.getEventDispatcher(),this.setRowsSelected=function(){0!==e.rowSelectionModel.length&&t.gridOptions.api.forEachNode((function(t){e.isObjectSelected(t)&&t.setSelected(!0)}))},this.onRowSelectionChanged=function(){e.rowSelectionModel=t.gridOptions.api.getSelectedRows(),e._saveState(),t.redrawRows()},this.isObjectSelected=function(t){for(var o=0;o<e.rowSelectionModel.length;o++)if(JSON.stringify(t.data)===JSON.stringify(e.rowSelectionModel[o]))return!0;return!1},this.getStateRepresentation=function(){},this._saveState=function(){},this._restoreState=function(){},t.gridOptions.api.addEventListener("selectionChanged",e.onRowSelectionChanged),e.eventDispatcher.addEventListener("gridReady","gridContext",e.setRowsSelected)}},(t,e,o)=>{o.r(e),o.d(e,{VitaraChartTypeModel:()=>r});var r=function(t,e){var o=this;o.chartTypeModel="GridChart",o.DEFAULT_MODEL="GridChart",this.setChartType=function(t){o.chartTypeModel=void 0===t?o.DEFAULT_MODEL:t},this.getChartType=function(){return o.chartTypeModel},this.isGridChart=function(){return"GridChart"===o.getChartType()},this.isMicroChart=function(){return"MicroChart"===o.getChartType()},this.setGridChart=function(){o.setChartType("GridChart")},this.setMicroChart=function(){o.setChartType("MicroChart")},o.setChartType(e)}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartPropertyEditorRTLLayoutModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="propRtlLayout",e.rtlModel=void 0,e.eventDispatcher=t.getEventDispatcher(),this.setLayoutModel=function(o){void 0!==o&&"boolean"==typeof o?e.rtlModel=o:void 0!==o&&"string"==typeof o&&(e.rtlModel="right"===o),e._saveState(),t.gridOptions.context.rePlot()},this.setLayoutRight=function(){e.setLayoutModel("right")},this.setLayoutLeft=function(){e.setLayoutModel("left")},this.getLayoutModel=function(){return void 0===e.rtlModel?t.gridOptions.context.utils.isRTLMode():e.rtlModel},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.rtlModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.rtlModel=e.stateManager.restoreSpecificState(e.stateKey)},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartExportToCSV:()=>r});var r=function(t){var e=this;this.getExportParams=function(){return{skipHeader:!1,skipFooters:!1,skipGroups:!1,allColumns:!1,fileName:t.gridOptions.id+".csv",columnSeparator:","}},this.exportToCsv=function(){t.gridOptions.api.exportDataAsCsv(e.getExportParams())}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartFilterView:()=>n});var r=o(45),n=function(t){var e=this,o=t;this.filterViewPopup=function(t,n,i,a){!function(i){var l,s,u,d;vitaraJQ(t).append('<div id="modalWindowThreshold" class="modal fade in new_test" style="display:none;"></div>');var c,h,g,p=vitaraJQ("#modalWindowThreshold",t);p.modal("show"),vitaraJQ(".modal-backdrop").appendTo(t),p.append(r.utils.getHTMLTemplates().GRID_FILTER_VIEW),1===vitaraJQ(".modal-dialog").length?vitaraJQ(".modal-dialog").css({left:o.callPopupLeftPosition(400),top:"8%"}):vitaraJQ(".modal-dialog").css({left:o.callPopupLeftPosition(),top:"8%"}),vitaraJQ(".modal-content").css({height:"auto"}),l=document.getElementById("thresholdButton"),s=document.getElementById("thresholdFormat"),u=document.getElementById("addNewThresholds"),d=document.getElementById("cancelThresholdsFilter"),e.manageThresholdClick(n,a),vitaraJQ("#colId").val(""),vitaraJQ("#thresholdId").val("");for(var m=0;m<o.gridOptions.customIcons.length;m++){var f=o.gridOptions.customIcons[m];vitaraJQ("#iconsetFormat").append(vitaraJQ("<option>",{value:f.id,text:f.name})),vitaraJQ("#thresholdIconsetFormat").append(vitaraJQ("<option>",{value:f.id,text:f.name}))}var v=o.getFilterThreshold().getFilterThreshold(o).getThresholdColumns(n,!1);vitaraJQ("#thresholdColSelect").html(v);var C=o.getFilterThreshold().getFilterThreshold(o).getGroupedColumnsThreshold();if(vitaraJQ("#thresholdGroupColSelect").html(C),o.getFilterThreshold().getFilterThreshold(o).refreshManageThreshold(n,a,t),s.addEventListener("change",(function(){o.getFilterThreshold().getFilterThreshold(o).checkThresholds(s.value,a)})),d.addEventListener("click",(function(){e.manageThresholdClick(n,a)})),u.addEventListener("click",(function(){e.resettingThreshold(),o.getFilterThreshold().getFilterThreshold(o).addThresholdClick()})),vitaraJQ(t).off("change","#thresholdColSelect").on("change","#thresholdColSelect",(function(){o.getFilterThreshold().getFilterThreshold(o).refreshManageThreshold(n,a,t)})),vitaraJQ(t).off("change","#thresholdGroupColSelect").on("change","#thresholdGroupColSelect",(function(){o.getFilterThreshold().getFilterThreshold(o).refreshManageThreshold(n,a,t)})),a&&(vitaraJQ(t).find(".modal-header2 h4").text("Filters For"),vitaraJQ(t).find(".modal-header1").hide(),vitaraJQ("#thresholdFormat option[value='Icon Sets']").remove(),o.getFilterThreshold().getFilterThreshold(o).checkFilter(l,s,u,d,n,t,a)),1===vitaraJQ(".modal-dialog").length){var T=vitaraJQ(t).closest(".mstrmojo-UnitContainer"),M=vitaraJQ(t).closest(".mstrmojo-portlet-container");c=vitaraJQ(t).parent().parent().parent().css("z-index");var y=vitaraJQ(p).css("z-index");if(vitaraJQ(t).parent().parent().parent().css("z-index",y),T.length>0){h=T.css("z-index");var S=vitaraJQ(".mstrmojo-UnitContainer");S.css("z-index",1),S.find(".mstrmojo-UnitContainer-content").css("overflow","hidden"),T.css("z-index",9999),T.find(".mstrmojo-UnitContainer-content").css("overflow","visible");var b=vitaraJQ(t).closest(".mstrmojo-RootView-content");g=b.css("z-Index"),b.css("z-index",9999)}else if(M.length>0)h=M.css("z-index"),M.css("z-index",9999),M.find(".mstrmojo-portlet-content").css("overflow","visible");else{var x=vitaraJQ(t).closest(".custom-vis-layout");x.length>0&&(h=x.css("z-index"),x.css("z-index",9999),x.css("overflow","visible"))}}vitaraJQ(".modal-dialog").draggable(),e.IEFixforpopup(),p.on("hidden.bs.modal",(function(){if(1===vitaraJQ(".modal-dialog").length){vitaraJQ(t).parent().parent().parent().css("z-index",c);var r=vitaraJQ(t).closest(".mstrmojo-UnitContainer"),i=vitaraJQ(t).closest(".mstrmojo-portlet-container");if(r.length>0)r.css("z-index",h),r.find(".mstrmojo-UnitContainer-content").css("overflow","hidden"),vitaraJQ(t).closest(".mstrmojo-RootView-content").css("z-index",g);else if(i.length>0)i.css("z-index",h),i.find(".mstrmojo-portlet-content").css("overflow","hidden");else{var l=vitaraJQ(t).closest(".custom-vis-layout");l.length>0&&(l.css("z-index",h),l.css("overflow","hidden"))}}s.removeEventListener("change",(function(){o.getFilterThreshold().getFilterThreshold(o).checkThresholds(s.value,a)})),d.removeEventListener("click",(function(){e.manageThresholdClick(n,a)})),u.removeEventListener("click",(function(){e.resettingThreshold(),o.getFilterThreshold().getFilterThreshold(o).addThresholdClick()})),p.remove()})),vitaraJQ("body").removeClass(".modal-open")}(vitaraJQ)},this.manageThresholdClick=function(t,e){o.getFilterThreshold().getFilterThreshold(o).refreshManageThreshold(t,e,null),vitaraJQ(".manage-thresholds").show(),vitaraJQ(".add-edit-thresholds").hide(),vitaraJQ("#addNewThresholds").show(),vitaraJQ("#okThresholds").show(),vitaraJQ("#thresholdButton").hide(),vitaraJQ("#cancelThresholdsFilter").hide(),e&&(vitaraJQ("#thresholdColorPickers").hide(),vitaraJQ("#iconsets").hide())},this.IEFixforpopup=function(){(document.documentMode||window.StyleMedia)&&(navigator.pointerEnabled&&navigator.maxTouchPoints<2?vitaraJQ(".modal-content").on("pointerdown",(function(t){var e=vitaraJQ(this).offset();if(t.originalEvent.pageX-e.left>this.clientWidth)return!1})):navigator.msPointerEnabled&&navigator.msMaxTouchPoints<2&&vitaraJQ(".modal-content").on("MSPointerDown",(function(t){var e=vitaraJQ(this).offset();if(t.originalEvent.pageX-e.left>this.clientWidth)return!1})))},this.resettingThreshold=function(){vitaraJQ("#thresholdFormat").val(""),vitaraJQ("#colId").val(""),vitaraJQ("#thresholdId").val(""),o.setVitaraColorPicker("#thresholdBackground"),"dark"===o.themeFormat?o.setVitaraColorPicker("#thresholdcolor","#ccc"):o.setVitaraColorPicker("#thresholdcolor","#222222"),vitaraJQ("#thresholdValue1").val(""),vitaraJQ("#thresholdValue2").val(""),vitaraJQ("#thresholdIconsetFormat").val(""),o.setVitaraColorPicker("#thresholdiconcolor","#5cd536"),vitaraJQ("#thresholdiconsetSize").val("9"),vitaraJQ("#iconsetFormat").attr("selected",!0)}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnOrderModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="columnOrder",e.parentKey="",e.orderModel=[],e.DEFAULT_MODEL=null,e.eventDispatcher=t.getEventDispatcher(),e.gridContext=t,this.reorderAutocol=function(o){var r=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length>0,n=e.orderModel.indexOf("ag-Grid-AutoColumn");-1===n?r&&e.orderModel.unshift("ag-Grid-AutoColumn"):r?t.gridOptions.columnApi.moveColumn(0,n):e.orderModel.splice(n,1),o||e._saveState()},this.reorderTotalColumn=function(){var o=e.orderModel.indexOf("Total");-1!==o&&t.gridOptions.columnApi.moveColumn("Total",o)},this.getOrderedTitles=function(o){o.unshift("ag-Grid-AutoColumn"),t.getSubTotalsModel().isMetricTotals()&&o.push("Total");var r=e.orderModel;if(0===r.length)return o;var n=[],i=-1;return r.forEach((function(e){o.indexOf(e)>-1&&(n.push(e),t.isMetric(e)||(i=n.length-1),o.splice(o.indexOf(e),1))})),o.forEach((function(e){t.isMetric(e)?n.push(e):(n.splice(i+1,0,e),i+=1)})),e.orderModel=n,n},this.reorderAllColumns=function(){var t=e.gridContext.gridOptions.columnApi.getAllGridColumns(),o=[];t.forEach((function(t){o.push(t.colDef.colId)})),e.orderModel=o,e._saveState()},this.registerEventListeners=function(){t.gridOptions.api.addEventListener("columnMoved",(function(t){t&&"api"!==t.source&&e.gridContext.gridOptions.context.enableDocumentStorage(),e.reorderAllColumns()})),t.gridOptions.api.addEventListener("columnRowGroupChanged",(function(t){t&&"api"!==t.source&&e.gridContext.gridOptions.context.enableDocumentStorage(),e.reorderAutocol()}))},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.orderModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.orderModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.orderModel&&(e.orderModel=[])},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartMetricToRowsModel:()=>c});var r=o(346),n=o(4);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return l(t,void 0);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){d(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function d(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var c=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="metricToRows",e.metricModel={colDef:[],enabled:!1},e.defaultColId={varName:"Metrics",valName:"Values"},e.DEFAULT_MODEL={colDef:[],enabled:!1},e.eventDispatcher=t.getEventDispatcher(),e.gridContext=t,this.isMetricToRows=function(){return e.metricModel.enabled},this.moveToRows=function(o,r){this.attributeStates={},this.backupState=function(){this.attributeStates=t.getColumnStateMaster().getAllAttributeColumns()},this.applyNewDef=function(){e.setMetricToRows(o,r)},this.restoreState=function(){}},this.getUpdatedAttributeDefs=function(){var e=t.gridOptions.interface,o=t.getTitles().splice(0,e.getNumAttributes());return n.filter(t.getUpdatedColumnDefs(),(function(t){return o.indexOf(t.headerName)>-1}))},this.getMetricRowGroupDef=function(){if(!t.getMetricGroupingModel().isMetricGroupsPresent())return null;var e=t.getMetricGroupingModel().getGroupColHeading(),o=t.getMetricGroupingModel().getDefaultColId(),r=null,n=null,i=t.getColumnStateMaster().getColumnStateById(o);return i&&(r=i.rowGroupIndex,n=i.pivotIndex),{colId:o,headerName:e,isMetric:!1,hide:(null==i?void 0:i.hide)||!1,enableRowGroup:!0,enablePivot:!0,headerTooltip:e,field:e,aggFunc:null,cellRendererSelector:t.setCustomPinnedRowRenderer,rowGroupIndex:r,pivotIndex:n,filter:"agTextColumnFilter",resizable:!0,sortable:!0,width:(null==i?void 0:i.width)||200,tooltipField:e,menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"],cellRenderer:t.getDefaultRenderer().attributeRenderer}},this.getMetricToRowColDef=function(){var e=this.defaultColId,o=e.varName,r=e.valName,n=t.getColumnStateMaster().getColumnStateById(o),i=t.getColumnStateMaster().getColumnStateById(r),a=null,l=null,s=t.getAggregationHelper(),u=s.genericValueGetter.bind(s);return n&&(a=n.rowGroupIndex,l=n.pivotIndex),[{colId:o,headerName:o,isMetric:!1,hide:(null==n?void 0:n.hide)||!1,enableRowGroup:!0,enablePivot:!0,headerTooltip:o,field:o,aggFunc:null,cellRendererSelector:t.setCustomPinnedRowRenderer,rowGroupIndex:a,pivotIndex:l,filter:"agTextColumnFilter",resizable:!0,sortable:!0,width:(null==n?void 0:n.width)||200,tooltipField:o,menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"],cellRenderer:t.getDefaultRenderer().attributeRenderer},{colId:r,headerName:r,isMetric:!0,hide:(null==i?void 0:i.hide)||!1,enableRowGroup:!1,enablePivot:!1,headerTooltip:r,field:r+".rawValue",aggFunc:(null==i?void 0:i.aggFunc)||"sum",cellRendererSelector:t.setCustomPinnedRowRenderer,filter:"agNumberColumnFilter",filterValueGetter:function(t){var e,o;return null===(e=t.data)||void 0===e||null===(e=e[null===(o=t.column)||void 0===o?void 0:o.colId])||void 0===e?void 0:e.rawValue},resizable:!0,sortable:!0,width:(null==i?void 0:i.width)||200,tooltipField:"Values",valueGetter:u,menuTabs:["generalMenuTab","filterMenuTab","columnsMenuTab"],cellRenderer:t.getDefaultRenderer().rendererSelector}]},this.getAllMetricToRowCols=function(){var o=this.getMetricToRowColDef();t.getColumnGrouping().convertToRowMetricGrouping();var r=this.getMetricRowGroupDef();return null!==r&&o.unshift(r),e.metricModel.colDef=o,e.getUpdatedAttributeDefs().concat(o)},this.setMetricToRows=function(){e.metricModel.enabled=!0;var o=this.getAllMetricToRowCols();t.gridOptions.api.setColumnDefs([]),t.gridOptions.api.setColumnDefs(o),t.getColumnGrouping().isColumnGroupingCleared()||t.getColumnGrouping().ApplyGroupColDef(o);var r=e.getMoltenData();t.gridOptions.api.setRowData(r);var n=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal();if(n.length>0){var i=["Metrics"];t.getMetricGroupingModel().isMetricGroupsPresent()&&i.push(t.getMetricGroupingModel().getDefaultColId()),(i=i.filter((function(t){return!n.includes(t)}))).length>0&&(t.gridOptions.columnApi.addRowGroupColumns(i),t.gridOptions.columnApi.setColumnsVisible(i,!1),t.getColumnStateMaster().setStateFromDefaults("rowGroupIndex"),t.getColumnStateMaster().setStateFromDefaults("hide")),t.gridOptions.columnApi.setPivotMode(!0)}t.getColumnStateMaster().saveAggridState(),t.gridOptions.api.resetRowHeights(),e._saveState()},this.getMoltenData=function(){var o=t.gridOptions.chartDataMapper,n=(new r.VitaraDataMeltCast).melt,i=o.titles.slice(0,o.getNumAttributes()),a=t.getMetricGroupingModel().getAllMetricRowGroups(),l=u(u({data:e._dataTransformer(o,a),keepset:i},this.defaultColId),{},{groupHeader:t.getMetricGroupingModel().getGroupColHeading(),noAddId:!1});return i.push("selector"),n(l)},this._dataTransformer=function(t,e){for(var o=t.titles.slice(),r=[],n=0;n<t.getNumRows();n++){for(var i={},l=0;l<o.length;l++){var s=o[l],u=t.dataRows[n][l];if(i.selector=u.selector,l<t.getNumAttributes())i[s]=u.t;else{var d,c=a(e);try{for(c.s();!(d=c.n()).done;){var h=d.value;null!=h&&h.columns.includes(s)&&(i[s]={v:u.v,fv:u.fv,group:h.name})}}catch(t){c.e(t)}finally{c.f()}}}r.push(i)}return r},this.setMetricToColumns=function(){e.metricModel.enabled=!1,e._saveState(),t.gridOptions.context.rePlot()},this.overrideColumnSaveState=function(){},this.resetColumnSaveState=function(){},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.metricModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.metricModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.metricModel&&(e.metricModel=e.DEFAULT_MODEL)},this.initMetricModel=function(){e.isMetricToRows()&&e.setMetricToRows()},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraDataMeltCast:()=>r});var r=function(){var t=this;this.set=function(t){for(var e={},o=(t=t||[],0);o<t.length;o++)e[t[o]]=1;return e},this.extend=function(t,e){for(var o in e)t[o]=e[o];return t},this.melt=function(e){var o=e.data,r=e.varName,n=void 0===r?"variable":r,i=e.valName,a=void 0===i?"value":i,l=e.groupHeader,s=void 0===l?"mGroups":l,u=e.noAddId,d=[],c=t.set(e.keepset);return o.forEach((function(e,o){var r={},i=[],l=[],h=[];for(var g in e)c[g]?r[g]=e[g]:(i.push(g),h.push({value:e[g].fv,rawValue:e[g].v}),l.push(e[g].group));for(var p=0;p<i.length;p++){var m={};m[n]=i[p],m[a]=h[p],m[s]=l[p],u||(r.id=i.length*o+p),d.push(t.extend(m,r))}})),d},this.cast=function(e,o,r){var n=Array.prototype.slice.call(arguments,3),i={},a={};return e.forEach((function(e){var l={},s=o.map((function(t){return l[t]=e[t]})).join("\0");i[s]||(i[s]=t.extend({},l));var u=n.slice(0);u.unshift(e,i[s]),i[s]=r.apply(a,u)})),Object.keys(i).map((function(t){return i[t]}))},this.cast.sum=function(t,e,o,r){return this.sum||(this.sum=function(t,e){return void 0===r&&(r=o),"string"==typeof r&&(r=[r]),function(t,e,o,r){return e[o]=r.reduce((function(e,o){return e+t[o]}),e[o]||0),e}(t,e,o,r)}),this.sum(t,e)},this.cast.count=function(t,e,o){return e[o]||(e[o]=0),e[o]+=1,e}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartCustomTooltipModel:()=>n});var r=o(4),n=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="tooltipOptions",e.ctipModel={},e.eventDispatcher=t.getEventDispatcher(),this.setTooltipVisibility=function(t){e.ctipModel.tooltipEnable=t,e._saveState()},this.setTooltipBgColor=function(t){e.ctipModel.tooltipBgColor=t,e._saveState()},this.setTooltipFormat=function(t){e.ctipModel.tooltipCustomFormat=t,e._saveState()},this.getTooltipVisibility=function(){return 1===e.ctipModel.tooltipEnable},this.getTooltipBgColor=function(){return e.ctipModel.tooltipBgColor||"#ffffff"},this.getTooltipFormat=function(){return e.ctipModel.tooltipCustomFormat},this.setTooltipMacros=function(t){e.ctipModel.tooltipMacros=t,e._saveState()},this.getTooltipMacros=function(){return e.ctipModel.tooltipMacros},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.ctipModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.ctipModel=e.stateManager.restoreSpecificState(e.stateKey),e.ctipModel||(e.ctipModel={})},this.formDataElement=function(t){return{mName:t.column.colId}},this.formDataPoint=function(t){return"string"==typeof t?{value:t}:t&&"string"==typeof t.value?{value:t.value}:void 0},this.formDataRow=function(t,e){var o,n,i=[];return r.each(t,(function(t,r){if("Metrics"===r)o=e.titles.indexOf(t);else if("Values"===r)n={v:t.rawValue,fv:t.value};else{var a=e.titles.indexOf(r);-1!==a&&("string"==typeof t||"number"==typeof t?i[a]={t:t}:t&&"string"==typeof t.value&&(i[a]={v:t.rawValue,fv:t.value}))}})),"number"==typeof o&&(-1===o||i[o]||(i[o]=n)),i},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{CustomTooltip:()=>i});var r=o(283),n=o(4);function i(){}i.prototype.init=function(t){this.eGui=document.createElement("div"),this.chartContext=t.api.gridOptionsService.gridOptions.context.renderedChart,this.tooltipModel=this.chartContext.getCustomTooltipModel();var e=this.tooltipModel.getTooltipBgColor(),o=t.api.getDisplayedRowAtIndex(t.rowIndex);if(o){var r;if(o.group)for(r={},t.colDef&&"string"==typeof t.colDef.colId&&-1!==t.colDef.colId.indexOf("pivot")?(r.data={},t.colDef.headerName&&(r.data[t.colDef.headerName]=t.value)):r.data=vitaraJQ.extend({},o.aggData);o&&o.level>-1;)o.field&&(r.data[o.field]=o.key),o=o.parent;else r=void 0===o.id?o:t.api.getRowNode(o.id);this.tooltipModel.getTooltipVisibility()&&vitaraD3.select(this.eGui).html(this.formTooltip(r,t,this.tooltipModel.getTooltipFormat())).attr("class","custom-tooltip").attr("style","display: block; padding: 10px;  background:"+e+";z-index: 99999;color: black;text-align: left;border: 1px solid;border-radius: 2px;box-shadow: 2px 2px 2px rgba(0,0,0,0.2);box-sizing: border-box;word-wrap: break-word;")}},i.prototype.getGui=function(){return this.eGui},i.prototype.formTooltip=function(t,e,o){return o?this.formCustomTooltip(o,t,e):this.formDefaultTooltip(t,e)},i.prototype.formCustomTooltip=function(t,e,o){var n=this.chartContext.chartDataMapper;return(new r.labelProvider).getCreateGridCustomLabel(t,e?this.tooltipModel.formDataRow(e.data,n):null,this.tooltipModel.formDataPoint(o.value),this.tooltipModel.getTooltipMacros(),n,this.tooltipModel.formDataElement(o))},i.prototype.formDefaultTooltip=function(t,e){var o="",r="",i="",a=this.chartContext.chartDataMapper,l=this.chartContext.getMetricToRowsModel().isMetricToRows();return t&&t.data?(n.each(this.tooltipModel.formDataRow(t.data,a),(function(t,n){t&&("string"==typeof t.t?o+=""===o?t.t:", "+t.t:"string"==typeof t.fv&&(a.titles[n]===e.column.colId&&n>=a.numAttributes||a.titles.indexOf(e.column.colId)<a.numAttributes&&n===a.numAttributes&&!l?i="<b>"+a.titles[n]+": "+t.fv+"</b><hr>":r+=""===r?a.titles[n]+": "+t.fv:"<br>"+a.titles[n]+": "+t.fv))})),r=i+r,""===o?r:o+(""===r?"":"<br>"+r)):a.titles.indexOf(e.column.colId)>=a.numAttributes?"<b>"+e.column.colId+" : "+e.value+"</b>":e.value}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartTrendingModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="trending",e.trendingModel=null,e.DEFAULT_MODEL=null,e.dataMapper=t.gridOptions.chartDataMapper,e.eventDispatcher=t.getEventDispatcher(),this.isTrending=function(){return null!==e.trendingModel},this.getTrendingAttribute=function(){return t.getChartTypeModel().isMicroChart()?t.gridOptions.chartDataMapper.titles[1]:e.isTrending()?e.trendingModel:""},this.isTrendingBy=function(t){return e.getTrendingAttribute()===t},this.setTrendWrapper=function(){var o=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();if(o.length>=2)e.setTrendBy(o[1]);else if(0!==o.length){var r=t.getTitles().slice().splice(0,t.gridOptions.chartDataMapper.numAttributes);if(t.gridOptions.chartDataMapper.numAttributes>2)1===o.length?(t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().forEach((function(t){r.splice(r.indexOf(t),1)})),t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().forEach((function(t){r.splice(r.indexOf(t),1)})),t.getColumnStateMaster().columnShowHideModel.getHiddenColumns().forEach((function(t){r.splice(r.indexOf(t),1)})),r.length>0&&t.getColumnStateMaster().columnRowGroupingModel.groupBy(t.gridOptions.columnApi.getColumn(r[0])),e.setTrendBy(r[0])):e.removeTrendBy();else if(2===t.gridOptions.chartDataMapper.numAttributes){var n=(t.getTitles().slice().indexOf(o[0])+1)%2;e.setTrendBy(t.getTitles().slice()[n])}else e.removeTrendBy()}else e.removeTrendBy()},this.isColumnEligibleForTrending=function(o){var r=o.colDef.headerName;return!!e.isEligibleForTrending()&&"ag-Grid-AutoColumn"!==r&&!(t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().indexOf(r)>-1)&&!!t.getChartTypeModel().isGridChart()&&o.colDef.isMetric},this.isEligibleForTrending=function(){var e=t.gridOptions.chartDataMapper.numAttributes;if(t.getMetricToRowsModel().isMetricToRows()&&(e+=1),e<2)return!1;var o=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal(),r=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();if(2===e&&o.length>0)return!1;var n,i=t.getColumnStateMaster().columnShowHideModel.getHiddenColumns(),a=t.getTitles().splice(0,t.gridOptions.chartDataMapper.numAttributes);return t.getMetricToRowsModel().isMetricToRows()&&a.push("Metrics"),[o,r,i].forEach((function(t){t.forEach((function(t){a.indexOf(t)>-1&&a.splice(a.indexOf(t),1)}))})),n=a.length,(1!==r.length||0!==n)&&(0===o.length&&r.length>=1||o.length>0&&r.length>1)},this.setTrendBy=function(t,o){e.trendingModel=t,o||e._saveState()},this.setPlotting=function(e){var o=t.getTitles().slice().splice(t.gridOptions.chartDataMapper.numAttributes,t.getTitles().length),r="trendline";e&&(r="numeric"),o.forEach((function(e){var o=t.getMicroChartTypeModel().getChartType(e);"variance"!==o&&"variancepercentage"!==o&&t.getPlotTypeSelectorModel().setPlotType(e,r)}))},this.setNumeric=function(){e.setPlotting(!0)},this.removeTrendBy=function(){t.getChartTypeModel().isGridChart()&&(e.setTrendBy(null),e.setNumeric()),t.redrawRows()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.trendingModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.trendingModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.trendingModel||null===e.trendingModel?e.trendingModel=null:e.setTrendWrapper()},this.onGroupingPivotChanged=function(o){var r=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),n=t.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal(),i=t.gridOptions.chartDataMapper.numAttributes,a=t.getTitles().splice(0,i);0===r.length&&e.removeTrendBy(),1===r.length&&(2===t.gridOptions.chartDataMapper.numAttributes&&0===n.length?(a.splice(a.indexOf(r[0]),1),e.setTrendBy(a[0])):e.removeTrendBy()),r.length>=2&&e.setTrendBy(r[1])},t.gridOptions.api.addEventListener("columnRowGroupChanged",(function(t){e.onGroupingPivotChanged(t)})),t.gridOptions.api.addEventListener("columnPivotChanged",(function(t){e.onGroupingPivotChanged(t)})),e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartTrendlineRenderer:()=>n});var r=o(4),n=function(t){var e=this;e.gridContext=t,this.trendlineFormatting=function(e){var o=t.getDefaultRenderer().groupedCellRendererHelper(e,!0);t.getDefaultRenderer().applyStyleOnElement(e.eParentOfValue,o)},this.collectAggValuesAndDrawChart=function(o){e.params=o,e.trendlineFormatting(o);for(var r=o.colDef.colId,n=o.node.childrenAfterSort,i=[],a=[],l=[],s=[],u=[],d=[],c=[],h=[],g=[],p=[],m="",f=o.colDef.isMetric,v=t.getMicroChartTypeModel().getChartType(r),C=0;C<n.length;C++){var T="",M=!0;if(null!==n[C].data&&void 0!==n[C].data&&void 0!==n[C].data[r]&&null!==n[C].data[r]?T="data":null!==n[C].aggData&&void 0!==n[C].aggData&&void 0!==n[C].aggData[r]&&null!==n[C].aggData[r]?T="aggData":M=!1,M){var y=n[C][T][r];if(y&&(void 0!==y.value?y.toString=function(){return y.value}:void 0!==y.rawValue&&null!==y.rawValue&&(y.toString=function(){return y.rawValue.toString()})),"bullet"==v){c[C]=n[C][T][t.getMicroChartTypeModel().getTarget(r)];var S=t.getMicroChartTypeModel().getBand1(r);S&&(h[C]=n[C][T][S]),(S=t.getMicroChartTypeModel().getBand2(r))&&(g[C]=n[C][T][S]),(S=t.getMicroChartTypeModel().getBand3(r))&&(p[C]=n[C][T][S])}for(var b=t.gridOptions.chartDataMapper.numAttributes,x=t.gridOptions.columnDefs,w=[],A=0;A<b&&void 0!==x[A];A++)w.push(x[A].colId);for(var G=[],V=0;V<w.length;V++)G.push(n[C][T][w[V]]);var O,_=n[C][T][o.column.colDef.headerName];if(f&&("number"==typeof y&&(y={value:y.toString(),rawValue:y.toString()}),y=void 0!==y.rawValue?y.rawValue:y.value,"bullet"==t.getMicroChartTypeModel().getChartType(r))){var E=t.getMicroChartTypeModel().getTarget(r);E&&(void 0!==n[C][T][E]?"number"==typeof n[C][T][E]?c[C]=n[C][T][E]:c[C]=n[C][T][E].rawValue:c[C]=0);var D=t.getMicroChartTypeModel().getBand1(r);D&&(void 0!==n[C][T][D]?"number"==typeof n[C][T][D]?h[C]=n[C][T][D]:h[C]=n[C][T][D].rawValue:h[C]=0),(D=t.getMicroChartTypeModel().getBand2(r))&&(void 0!==n[C][T][D]?"number"==typeof n[C][T][D]?g[C]=n[C][T][D]:g[C]=n[C][T][D].rawValue:g[C]=0),(D=t.getMicroChartTypeModel().getBand3(r))&&(void 0!==n[C][T][D]?"number"==typeof n[C][T][D]?p[C]=n[C][T][D]:p[C]=n[C][T][D].rawValue:p[C]=0)}if(l[C]=n[C].key,void 0!==l[C]&&null!==l[C]||(l[C]=n[C].data[t.getTrendingModel().getTrendingAttribute()]),""!==_&&null!==_)a[C]=y,s[C]=G.join(","),u[C]=o.colDef.headerName,d[C]=(null===(O=n[C])||void 0===O||null===(O=O.data)||void 0===O?void 0:O.Metrics)||o.node.key||null,m=t.gridOptions.id+"-graph-"+o.rowIndex+"-"+t.removeSpecials(r);else if(null!=y){var F;a[C]=y,s[C]=G.join(","),u[C]=o.colDef.headerName,d[C]=(null===(F=n[C])||void 0===F||null===(F=F.data)||void 0===F?void 0:F.Metrics)||o.node.key||null,m=t.gridOptions.id+"-graph-"+o.rowIndex+"-"+t.removeSpecials(r)}}}if(""!=(m=t.gridOptions.id+"-graph-"+o.rowIndex+"-"+t.removeSpecials(r))){var I=t.getMicroChartTypeModel(),k=o.colDef.headerName,R=I.getTarget(k),P=I.getChartValueForGivenMetric(k);if(i[0]={},"bullet"==v){var B=I.getPerformanceAgg(k),L=t.getAggregationWrapperModel().dataMapper.getGroupAggregate([o.node.key],{metric:k,aggFunction:B},{format:B});L=L.v;var N=I.getTargetAgg(k),H=I.getTarget(k),J=t.getAggregationWrapperModel().dataMapper.getGroupAggregate([o.node.key],{metric:H,aggFunction:N},{format:N});J=J.v;var Q=[];(a=[])[0]=Number(J).toFixed(2),a[1]=Number(L).toFixed(2),u[0]=R,u[1]=k;var U="min",W=I.getBand1(k);I.getBand1Agg(k)&&(U=I.getBand1Agg(k)),W?(Q[0]=t.getAggregationWrapperModel().dataMapper.getGroupAggregate([o.node.key],{metric:W,aggFunction:U},{format:U}),Q[0]=Q[0].v):Q[0]=e.getAggregateValue(U,c),void 0===Q[0]&&(Q[0]=0);var j="avg";W=I.getBand2(k),I.getBand2Agg(k)&&(j=I.getBand2Agg(k)),W?(Q[1]=t.getAggregationWrapperModel().dataMapper.getGroupAggregate([o.node.key],{metric:W,aggFunction:j},{format:j}),Q[1]=Q[1].v):Q[1]=g?parseFloat(g):e.getAggregateValue(j,c),void 0===Q[1]&&(Q[1]=0);var z="max";W=I.getBand3(k),I.getBand3Agg(k)&&(z=I.getBand3Agg(k)),W?(Q[2]=t.getAggregationWrapperModel().dataMapper.getGroupAggregate([o.node.key],{metric:W,aggFunction:z},{format:z}),Q[2]=Q[2].v):Q[2]=p?parseFloat(p):e.getAggregateValue(z,c),void 0===Q[2]&&(Q[2]=0),a[4]=Q[0].toFixed(2),a[3]=Q[1].toFixed(2),a[2]=Q[2].toFixed(2),u[4]=I.getBand1(k),u[3]=I.getBand2(k),u[2]=I.getBand3(k)}var K={};try{var Z=t.getAggregationWrapperModel().getAggregationAtLevel(k,o.node.field);"choosecolumn"!==Z&&"ratio"!==Z||(Z="sum"),K=t.getAggregationWrapperModel().dataMapper.getAggregatedGroupElements(o.node.key,{aggFunction:Z,metric:k})}catch(t){K={}}var Y=l,q=[];o.node.childrenAfterSort.forEach((function(t){q.push(t.key)})),"bullet"!==v&&(0!==Object.keys(K).length&&(a=[],Object.keys(K).forEach((function(t){var e=K[t].v;a[q.indexOf(t)]=e,Y[q.indexOf(t)]=t}))),a.reverse()),"right"===t.getPropertyEditorRTLLayoutModel().getLayoutModel()&&(a.reverse(),Y.reverse()),i[0]={xaxis:l,yaxis:a,groupedKey:Y,colName:u,performance:k,target:R,metricToRowsColName:d};var X=t.gridOptions.columnApi.getColumnState().filter((function(t){return t.colId==o.column.colId}))[0],$=100;X&&($=X.width),k=t.getDefaultRenderer().getMetricName(o),e.chartDisplay(JSON.stringify(i),m,P,$,k)}return t.gridOptions.enableRtl?'<span class="displayChart reverseTrendline" id="'+m+'"></span>':'<span class="displayChart" id="'+m+'"></span>'},this.getAggregateValue=function(t,e){return""==t||"sum"==t?e.reduce((function(t,e){return t+e}),0):"avg"==t?e.reduce((function(t,e){return t+e}),0)/e.length:"count"==t?e.length:"min"==t?Math.min.apply(Math,e):"max"==t?Math.max.apply(Math,e):"last"==t?e[e.length-1]:"first"==t?e[0]:void 0},this.getParseChartData=function(t,e){var o=JSON.parse(t);return e&&o[0].yaxis.reverse(),o},this.isYAxisReversed=function(t){return"bar"==t||"line"==t},this.getTrendlineTooltipOptions=function(o){if(o)return{tooltipClassname:"jqstooltip",tooltipPrefix:"",tooltipFormatter:function(o,n,i){var a=r.isArray(i)?i[0].offset:i.offset,l=n.userOptions.tooltipValueLookups,s=l.metric[a];t.getMetricToRowsModel().isMetricToRows()&&(s=1===t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().indexOf("Metrics")?l.offset[a]:l.metricToRows[a]);var u=e.formatMetricValue(l.mValue[a],s),d=l.grouped[a],c=d?'<span style="color:'.concat(i.color,'">&#9679;</span> ').concat(d," <br>"):"";return"".concat(c," ").concat(l.metric[a],": ").concat(n.userOptions.tooltipPrefix).concat(u)},tooltipValueLookups:{offset:o.xaxis,grouped:o.groupedKey,metric:o.colName,metricToRows:o.metricToRowsColName,mValue:o.yaxis.slice()},tooltipContainer:vitaraJQ(t.gridOptions.gridArea).parent()}},this.formatMetricValue=function(e,o){var r=t.getTitles().indexOf(o);return-1===r&&(r=t.gridOptions.chartDataMapper.numAttributes),t.gridOptions.context.utils.formatMetricLike(e,t.gridOptions.chartDataMapper.getMetricFormatObject(r))},this.chartDisplay=function(t,o,r,n,i){var a=r.chartType,l=this.isYAxisReversed(a),s=this.getParseChartData(t,l),u=vitaraJQ.extend({height:"100%",width:"95%",type:a,fillColor:!1,numberFormatter:function(t){return e.formatMetricValue(t,i)}},e.getTrendlineTooltipOptions(s[0])),d=this.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal(),c=this.gridContext.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal(),h={min:0,max:100};if((0===c.length||c.length>0&&d.length>1)&&(d.push("No Grouping"),h=this.gridContext.getAggregationWrapperModel().getMinMaxValueForTrendlines(i,d[1])),"bar"==a){var g=n-30,p=s[0].yaxis.length,m=Math.round((g-1)/(2*p)),f=m=m>5?5:m;u.barColor=r.color,u.negBarColor=r.negaBarColor,u.barWidth=m,u.barSpacing=f,u.colorMap=r.colorMap,"column"!==r.axisSpecificity&&"min"===r.startAxis||(u.chartRangeMin=h.min),"column"!==r.axisSpecificity&&"max"===r.endAxis||(u.chartRangeMax=h.max)}else"line"==a?(u.lineColor=r.color,u.highlightLineColor=null,u.highlightSpotColor="#000000",u.spotColor=r.spotColor,u.minSpotColor=r.minSpotColor,u.maxSpotColor=r.maxSpotColor,u.valueSpots=r.valueSpots,u.tooltipFormat="{{offset:grouped}} <br> {{offset:metric}} : {{prefix}}{{y}}","column"!==r.axisSpecificity&&"min"===r.startAxis||(u.chartRangeMin=h.min),"column"!==r.axisSpecificity&&"max"===r.endAxis||(u.chartRangeMax=h.max)):"bullet"==a&&(u.targetWidth=3,u.targetColor=r.targetColor,u.performanceColor=r.performanceColor,u.rangeColors=[r.band3Color,r.band2Color,r.band1Color],u.tooltipValueLookups={fields:{p:s[0].performance,t:s[0].target,r:"Range"}},u.tooltipFormat="{{fieldkey:fields}} : {{prefix}}{{value}}",u.tooltipFormatter=void 0);u.chartRangeClip=!0,setTimeout((function(){void 0===this.sparklineElems&&(this.sparklineElems=[]),l&&vitaraJQ(vitaraJQ('[id="'+o+'"]')[0]).removeClass("reverseTrendline"),this.sparklineElems.push(vitaraJQ('[id="'+o+'"]').sparkline(s[0].yaxis,u))}))}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartAnimationModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="animation",e.parentKey="",e.animationModel=!0,e.DEFAULT_MODEL=!0,this.setAnimation=function(t){e.animationModel=t,e._saveState()},this.isAnimated=function(){return e.animationModel},this.setAnimationOn=function(){e.setAnimation(!0)},this.setAnimationOff=function(){e.setAnimation(!1)},this.toggleAnimation=function(){e.isAnimated()?e.setAnimationOff():e.setAnimationOn()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.animationModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.animationModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.animationModel&&(e.animationModel=e.DEFAULT_MODEL)},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartAllowURLsModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="allowUrlsToVisual",e.parentKey="",e.allowUrlsToVisualModel=!1,e.DEFAULT_MODEL=!1,this.setAllowUrlsToVisual=function(t){e.allowUrlsToVisualModel=t,e._saveState()},this.isAllowUrlsToVisual=function(){return e.allowUrlsToVisualModel},this.setAllowUrlsToVisualOn=function(){e.setAllowUrlsToVisual(!0)},this.setAllowUrlsToVisualOff=function(){e.setAllowUrlsToVisual(!1)},this.toggleAllowUrlsToVisual=function(){e.isAllowUrlsToVisual()?e.setAllowUrlsToVisualOff():e.setAllowUrlsToVisualOn()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.allowUrlsToVisualModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.allowUrlsToVisualModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.allowUrlsToVisualModel&&(e.allowUrlsToVisualModel=e.DEFAULT_MODEL)},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartCheckboxModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="gridFilterCheckbox",e.checkboxModel=!1,e.DEFAULT_MODEL=!1,this.isGridCheckboxEnabled=function(){return e.checkboxModel},this.enableGridCheckbox=function(){e.setGridCheckbox(!0)},this.disableGridCheckbox=function(){e.setGridCheckbox(!1)},this.toggleGridCheckbox=function(){e.isGridCheckboxEnabled()?e.disableGridCheckbox():e.enableGridCheckbox()},this.setGridCheckbox=function(t){e.checkboxModel=t,e._saveState()},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.checkboxModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){e.checkboxModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.checkboxModel&&(e.checkboxModel=e.DEFAULT_MODEL)},e._restoreState()}},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChartCustomMarkerModel:()=>i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.stateManager=e.getStateManager(),this.stateKey="customMarker",this.customMarkerState={},this.DEFAULT_STATE={},this._restoreState()}var e,o;return e=t,(o=[{key:"setMarkerForMetric",value:function(t){void 0===this.customMarkerState[t.metric]&&(this.customMarkerState[t.metric]={}),this.customMarkerState[t.metric][t.groupingLevel]={groupingLevel:t.groupingLevel,marker:t.marker,scaling:t.scaling,markerColor:t.markerColor,fill:t.fill,fillMetric:t.fillMetric,unfillColor:t.unfillColor,maxNumber:t.maxNumber,markerCountMax:t.markerCountMax,markerCountMin:t.markerCountMin,mapDataToScale:t.mapDataToScale,infographicCustomSVGPath:t.infographicCustomSVGPath,infographicCustomSVGEnabled:t.infographicCustomSVGEnabled},this._saveState(),this.gridContext.redrawRows()}},{key:"_editMarkerProperty",value:function(t,e,o,r){void 0!==this.customMarkerState[t]&&void 0!==this.customMarkerState[t][o]&&(this.customMarkerState[t][o][e]=r,this._saveState())}},{key:"editMarkerScale",value:function(t,e,o){this._editMarkerProperty(t,"scale",e,o)}},{key:"editMarkerFillPercentage",value:function(t,e,o){this._editMarkerProperty(t,"fillPercentage",e,o)}},{key:"editMarkerFillColor",value:function(t,e,o){this._editMarkerProperty(t,"fillColor",e,o)}},{key:"removeMarker",value:function(t){void 0!==this.customMarkerState[t]&&(this.customMarkerState[t]=void 0,this._saveState(),this.gridContext.redrawRows())}},{key:"removeMarkerAtGroupingLevel",value:function(t,e){void 0!==this.customMarkerState[t]&&(this.customMarkerState[t][e]=void 0,this._saveState(),this.gridContext.redrawRows())}},{key:"getMarker",value:function(t,e){return void 0===this.customMarkerState[t]||void 0===this.customMarkerState[t][e]?"":this.customMarkerState[t][e]}},{key:"_getMarkerProperty",value:function(t,e,o){return void 0===this.customMarkerState[t]||void 0===this.customMarkerState[t][e]?"":this.customMarkerState[t][o]}},{key:"getMarkerScale",value:function(t,e){return this._getMarkerProperty(t,e,"scale")}},{key:"getMarkerFillPercentage",value:function(t,e){return this._getMarkerProperty(t,e,"fillPercentage")}},{key:"getMarkerFillColor",value:function(t,e){return this._getMarkerProperty(t,e,"fillColor")}},{key:"getStateRepresentation",value:function(){var t={};return t[this.stateKey]=this.customMarkerState,t}},{key:"_saveState",value:function(){this.stateManager.saveSpecificState(this)}},{key:"_restoreState",value:function(){this.customMarkerState=this.stateManager.restoreSpecificState(this.stateKey),void 0===this.customMarkerState&&(this.customMarkerState=this.DEFAULT_STATE)}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartColumnGroupOpenedModel:()=>r});var r=function(t){var e=this;e.stateManager=t.getStateManager(),e.stateKey="columnGroupOpened",e.columnGroupOpenedModel=[],e.DEFAULT_MODEL=[],this.applyColumnGroupState=function(){t.gridOptions.columnApi.setColumnGroupState(e.columnGroupOpenedModel)},this.getStateRepresentation=function(){var t={};return t[e.stateKey]=e.columnGroupOpenedModel,t},this._saveState=function(){e.stateManager.saveSpecificState(e)},this._restoreState=function(){if(e.columnGroupOpenedModel=e.stateManager.restoreSpecificState(e.stateKey),void 0===e.columnGroupOpenedModel)e.columnGroupOpenedModel=e.DEFAULT_MODEL;else if(Array.isArray(e.columnGroupOpenedModel)&&0===e.columnGroupOpenedModel.length){var o=t.gridOptions.columnApi.getColumnGroupState();void 0!==o?(o.forEach((function(t){var e=t;null!==e.open&&(e.open=!0),o.push(e)})),e.columnGroupOpenedModel=o):e.columnGroupOpenedModel=e.DEFAULT_MODEL}},t.gridOptions.api.addEventListener("columnGroupOpened",(function(o){e.columnGroupOpenedModel=t.gridOptions.columnApi.getColumnGroupState(),e._saveState()})),t.gridOptions.api.addEventListener("columnPivotChanged",(function(o){e.columnGroupOpenedModel=t.gridOptions.columnApi.getColumnGroupState(),e._saveState()})),e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartSortingView:()=>n});var r=o(4),n=function(t){var e=this;e.eventDispatcher=t.getEventDispatcher(),e.SORT_ICON_ASCENDING="ag-icon ag-icon-asc",e.SORT_ICON_DESCENDING="ag-icon ag-icon-desc",e.SORT_ICON_NONE="ag-hidden",this.getSortingIconForColumn=function(o){var r=t.getSortingModel()._getRowGroupColumnsInternal(),n=r[r.length-1];t.getTitles().splice(0,t.gridOptions.chartDataMapper.numAttributes).indexOf(o)>-1&&(n="No Grouping");var i=t.getSortingModel().getSortingForColumn(o,n);return void 0===i?e.SORT_ICON_NONE:"asc"===i?e.SORT_ICON_ASCENDING:"desc"===i?e.SORT_ICON_DESCENDING:e.SORT_ICON_NONE},this.sortColumnChangeHandler=function(e){t.gridOptions.chartDataMapper;var o=["Values"];t.getMetricToRowsModel().isMetricToRows()||(o=t.getColumnStateMaster().getAllMetrics()),o.indexOf(e.target.value)>-1?1===t.getSortingModel()._getRowGroupColumnsInternal().length?e.target.parentElement.children[2].style.display="none":e.target.parentElement.children[2].style.display="inline":(e.target.parentElement.children[2].style.display="none",e.target.parentElement.children[2].value="No Grouping")},this.refreshEventListeners=function(){var t=vitaraJQ("[name='sortingAttribute']");r.each(t,(function(t){vitaraJQ(t).on("change",e.sortColumnChangeHandler)}))}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartTrendlineOptionsView:()=>a});var r=o(326),n=o(45),i=o(4),a=function(t){var e=this;e.popupWindowManager=new r.PopupWindowManager,this.onLoadHandler=function(o){var r=function(e){var o=function(t,e){return t.field.replace(".rawValue","")===e};return n.context.renderedChart.getColumnGrouping().isColumnGroupingCleared()?t.gridOptions.columnDefs.find((function(t){return o(t,e)})):t.gridOptions.columnDefs.flatMap((function(t){return t.children})).find((function(t){return o(t,e)}))},n=e.params;e.popupWindow=o,e.populateChartTypes(o),e.refreshTrendLineOptions(n),vitaraJQ(o).find(".modal-dialog").addClass("vitara-grid"),e.manageOptions({params:n,popupWindow:o}),e.populateChartLabels(o),vitaraJQ(o).off("change","#optionsColSelect").on("change","#optionsColSelect",(function(t){e.manageOptions({params:n,event:t,popupWindow:o})})),vitaraJQ(o).off("click","#remove-scaling").on("click","#remove-scaling",(function(r){var i=vitaraJQ("#optionsColSelect",o).val();t.getScalingModel().removeColumn(i),e.manageOptions({params:n,popupWindow:o})})),vitaraJQ(o).off("change","#optionsChartType").on("change","#optionsChartType",(function(){var t=vitaraJQ(this).val();e.checkChartType(t),e.applyColorPicker(n,t),e.manageAxisSpecificity(t,o)})),vitaraJQ(o).off("click","#optionsApply").on("click","#optionsApply",(function(){if(t.getTrendingModel().setTrendWrapper(),this.axisSpecificitySave=function(){var e=t.getMicroChartTypeModel();e.setAxisSpecificity(a,vitaraJQ("#axisSpecificity",o).val()),e.setChartStartAxis(a,vitaraJQ("#startValue",o).val()),e.setChartEndAxis(a,vitaraJQ("#endValue",o).val()),e.setChartStartAxisValue(a,+vitaraJQ("#startValueInput",o).val()),e.setChartEndAxisValue(a,+vitaraJQ("#endValueInput",o).val())},e.validateTrendLineApply(o)){var i=vitaraJQ("#optionsColSelect",o).val(),a=r(i).colId;if(t.getMicroChartTypeModel().setChartType(a,vitaraJQ("#optionsChartType",o).val()),"bullet"==t.getMicroChartTypeModel().getChartType(a)){var l=vitaraJQ("#optionsTarget",o).val();if(l){var s=r(l).field;s=s.replace(".rawValue",""),t.getMicroChartTypeModel().setTarget(a,s)}if(t.getMicroChartTypeModel().setTargetColor(a,vitaraJQ("#optionsTargetColor",o).val()),t.getMicroChartTypeModel().setTargetAgg(a,vitaraJQ("#optionsTargetAgg",o).val()),t.getMicroChartTypeModel().setPerformanceAgg(a,vitaraJQ("#optionsPerformanceAgg",o).val()),t.getMicroChartTypeModel().setPerformanceColor(a,vitaraJQ("#optionsPerformanceColor",o).val()),""!=vitaraJQ("#optionsBand1",o).val()){var u=vitaraJQ("#optionsBand1",o).val(),d=r(u).field;d=d.replace(".rawValue",""),t.getMicroChartTypeModel().setBand1(a,d),t.getMicroChartTypeModel().setBand1Agg(a,vitaraJQ("#optionsBand1Agg",o).val())}if(t.getMicroChartTypeModel().setBand1Color(a,vitaraJQ("#optionsBand1Color",o).val()),""!=vitaraJQ("#optionsBand2",o).val()){var c=vitaraJQ("#optionsBand2",o).val(),h=r(c).field;h=h.replace(".rawValue",""),t.getMicroChartTypeModel().setBand2(a,h),t.getMicroChartTypeModel().setBand2Agg(a,vitaraJQ("#optionsBand2Agg",o).val())}if(t.getMicroChartTypeModel().setBand2Color(a,vitaraJQ("#optionsBand2Color",o).val()),""!=vitaraJQ("#optionsBand3",o).val()){var g=vitaraJQ("#optionsBand3",o).val(),p=r(g).field;p=p.replace(".rawValue",""),t.getMicroChartTypeModel().setBand3(a,p),t.getMicroChartTypeModel().setBand3Agg(a,vitaraJQ("#optionsBand3Agg",o).val())}if(t.getMicroChartTypeModel().setBand3Color(a,vitaraJQ("#optionsBand3Color",o).val()),vitaraJQ("#optionsColorPalette",o).val()){var m=vitaraJQ("#optionsColorPalette",o).val(),f=t.gridOptions.fetchColors(m,!1);t.getMicroChartTypeModel().setTargetColor(a,f[0]),t.getMicroChartTypeModel().setPerformanceColor(a,f[1]),t.getMicroChartTypeModel().setBand1Color(a,f[2]),t.getMicroChartTypeModel().setBand2Color(a,f[3]),t.getMicroChartTypeModel().setBand3Color(a,f[4])}}else if("line"==t.getMicroChartTypeModel().getChartType(a)){if(t.getMicroChartTypeModel().setChartColor(a,vitaraJQ("#optionsColor",o).val()),t.getMicroChartTypeModel().setChartSpotColor(a,vitaraJQ("#optionsFinalSpotColor",o).val()),t.getMicroChartTypeModel().setChartMinSpotColor(a,!1),t.getMicroChartTypeModel().setChartMaxSpotColor(a,!1),this.axisSpecificitySave(),vitaraJQ("#optionsColorPalette",o).val()){var v=vitaraJQ("#optionsColorPalette",o).val(),C=t.gridOptions.fetchColors.fetchCallback(v,!1);t.getMicroChartTypeModel().setChartColor(a,C[0]),t.getMicroChartTypeModel().setChartSpotColor(a,C[1]),t.getMicroChartTypeModel().setChartMinSpotColor(a,!1),t.getMicroChartTypeModel().setChartMaxSpotColor(a,!1)}}else if(t.getMicroChartTypeModel().setChartColor(a,vitaraJQ("#optionsColor",o).val()),t.getMicroChartTypeModel().setChartNegativeBarColor(a,vitaraJQ("#optionsNegColor",o).val()),this.axisSpecificitySave(),vitaraJQ("#optionsColorPalette",o).val()){var T=vitaraJQ("#optionsColorPalette",o).val(),M=t.gridOptions.fetchColors(T,!1);t.getMicroChartTypeModel().setChartColor(a,M[0]),t.getMicroChartTypeModel().setChartNegativeBarColor(a,M[1])}e.manageOptions({params:n,popupWindow:o}),t.redrawRows()}})),vitaraJQ(o).off("change","#startValue").on("change","#startValue",(function(){e.manageValueInput("startValue","startValueInput",o)})),vitaraJQ(o).off("change","#endValue").on("change","#endValue",(function(){e.manageValueInput("endValue","endValueInput",o)}))},this.populateAxisOptions=function(e,o,r,n){r?(vitaraJQ("#".concat(e),o).empty(),i.each(r,(function(t){t.selected=t.value===n})),t.gridOptions.context.editorInterfaceRef.propMenuHelper.getSelectDropDown().addDropDownOptions(vitaraJQ("#".concat(e),o),r)):console.error("No options provided")},this.populateValueOptions=function(t,e,o){vitaraJQ("#".concat(t),e).val(o)},this.manageValueInput=function(t,e,o){var r=vitaraJQ("#".concat(t),o).val();vitaraJQ("#".concat(e),o).closest(".row").hide(),"percentile"!==r&&"fixedvalue"!==r||vitaraJQ("#".concat(e),o).closest(".row").show()},this.populateChartLabels=function(e){var o={"trendline-options-for":"Trend Line Options for","select-column":"Select Column","chart-type":"Chart Type",color:"Color","negative-color":"Negative Color","final-spot-color":"Final Spot Color",scale:"Scale","remove-scaling":"Remove","bullet-measure":"Measure","bullet-color":"Color","bullet-metric":"Metric","bullet-aggregation":"Aggregation",actual:"Actual",sum:"Sum",avg:"Avg",count:"Count",max:"Max",min:"Min",first:"First",last:"Last",target:"Target",band1:"Band 1",band2:"Band 2",band3:"Band 3",optionsOk:"OK",optionsApply:"Apply",optionsCancel:"Cancel","scaling-conflict-msg":"Scaling Conflict",line:"Line Chart",bar:"Bar Chart",bullet:"Bullet Chart",variance:"Horizontal Bars",variancepercentage:"Horizontal Pins",column:"Same across cells",cell:"Apply at each cell"},r=t.gridOptions.localeTextFunc;Object.keys(o).forEach((function(t){vitaraJQ("#".concat(t),e).text(r(o[t],o[t]))}))},this.populateChartTypes=function(e){var o=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length>0,r={variance:"Variance",variancepercentage:"Variance %"};o&&(r.line="Line Chart",r.bar="Bar Chart",r.bullet="Bullet Chart");var n="";Object.keys(r).forEach((function(t){n+='<option id="'.concat(t,'" value="').concat(t,'">').concat(r[t],"</option>")})),vitaraJQ("#optionsChartType",e).append(n)},this.moreOptionsPopup=function(t){e.params=t,e.popupWindowManager.createPopup({templatePath:n.utils.getHTMLTemplates().GRID_TREND_LINE_OPTS_VIEW,onLoadHandler:e.onLoadHandler,height:"450px"})},this.refreshTrendLineOptions=function(t){var o=e.getColumnsOptions(t);vitaraJQ("#optionsColSelect").html(o);var r=e.getColumnsOptions(null);vitaraJQ("#optionsTarget").html(r),o='<option value="">-- Column --</option>',o+=r,vitaraJQ("#optionsBand1").html(o),vitaraJQ("#optionsBand2").html(o),vitaraJQ("#optionsBand3").html(o)},this.getColumnsOptions=function(e){var o="";for(var r in t.defaultColumnDef){var n=t.defaultColumnDef[r];if(null!=n&&""!=n&&void 0!==n&&n.isMetric){var i="";null!==e&&n.headerName===e.column.colDef.headerName&&(i=' selected="selected"'),o+='<option value="'+n.field.replace(".rawValue","")+'"'+i+">",o+=n.headerName,o+="</option>"}}return o},this.scalingGroupDisable=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=["#axisSpecificity","#startValue","#endValue","#startValueInput","#endValueInput"];o.forEach((function(o){vitaraJQ(o,t).attr("disabled",e)})),e?vitaraJQ(".axis-specificity-message",t).show():vitaraJQ(".axis-specificity-message",t).hide()},this.manageOptions=function(o){var r=o.params,n=o.popupWindow,i=o.event,a=r.column.colDef.headerName;void 0!==i&&(a=i.target.value),vitaraJQ("#optionsPerformance").text(a);var l={},s=t.getMicroChartTypeModel();l.chartType=s.getChartType(a),l.color=s.getChartColor(a),l.spotColor=s.getChartSpotColor(a),l.minSpotColor=s.getChartMinSpotColor(a),l.maxSpotColor=s.getChartMaxSpotColor(a),l.target=s.getTarget(a),l.targetAgg=s.getTargetAgg(a),l.performanceAgg=s.getPerformanceAgg(a),l.performanceColor=s.getPerformanceColor(a),l.targetColor=s.getTargetColor(a),l.targetWidth=s.getTargetWidth(a),l.axisSpecificity=s.getAxisSpecificity(a),l.negaBarColor=s.getChartNegativeBarColor(a),l.startAxis=s.getChartStartAxis(a),l.startAxisValue=s.getChartStartAxisValue(a),l.endAxis=s.getChartEndAxis(a),l.endAxisValue=s.getChartEndAxisValue(a);var u=l.chartType;vitaraJQ("#optionsChartType",n).val(u),t.getScalingModel().getGroupName(a)?this.scalingGroupDisable(n,!0):this.scalingGroupDisable(n,!1),this.manageAxisSpecificity(u,n),t.setVitaraColorPicker("#optionsColor",n,l.color),"line"==u?(void 0!==l.spotColor&&t.setVitaraColorPicker("#optionsFinalSpotColor",n,l.spotColor),void 0!==l.minSpotColor&&t.setVitaraColorPicker("#optionsMinSpotColor",n,l.minSpotColor),void 0!==l.maxSpotColor&&t.setVitaraColorPicker("#optionsMaxSpotColor",n,l.maxSpotColor),void 0!==l.axisSpecificity&&vitaraJQ("#axisSpecificity").val(l.axisSpecificity)):"bullet"==u?(l.band1Color=s.getBand1Color(a),l.band1=s.getBand1(a),l.band1Agg=s.getBand1Agg(a),l.band2Color=s.getBand2Color(a),l.band2=s.getBand2(a),l.band2Agg=s.getBand2Agg(a),l.band3Color=s.getBand3Color(a),l.band3=s.getBand3(a),l.band3Agg=s.getBand3Agg(a),vitaraJQ("#optionsTarget",n).val(l.target),vitaraJQ("#optionsTargetAgg",n).val(l.targetAgg),vitaraJQ("#optionsPerformanceAgg",n).val(l.performanceAgg),void 0!==l.targetColor&&t.setVitaraColorPicker("#optionsTargetColor",n,l.targetColor),void 0!==l.performanceColor&&t.setVitaraColorPicker("#optionsPerformanceColor",n,l.performanceColor),void 0!==l.band1Color&&t.setVitaraColorPicker("#optionsBand1Color",n,l.band1Color),void 0!==l.band1Value&&vitaraJQ("#optionsBand1Value",n).val(l.band1Value),void 0!==l.band1?vitaraJQ("#optionsBand1",n).val(l.band1):(vitaraJQ("#optionsBand1",n).val(l.target),vitaraJQ("#optionsBand1Agg",n).val("min")),void 0!==l.band1Agg&&vitaraJQ("#optionsBand1Agg",n).val(l.band1Agg),void 0!==l.band2Color&&t.setVitaraColorPicker("#optionsBand2Color",n,l.band2Color),void 0!==l.band2Value&&vitaraJQ("#optionsBand2Value",n).val(l.band2Value),void 0!==l.band2?vitaraJQ("#optionsBand2",n).val(l.band2):(vitaraJQ("#optionsBand2",n).val(l.target),vitaraJQ("#optionsBand2Agg",n).val("avg")),void 0!==l.band2Agg&&vitaraJQ("#optionsBand2Agg",n).val(l.band2Agg),void 0!==l.band3Color&&t.setVitaraColorPicker("#optionsBand3Color",n,l.band3Color),void 0!==l.band3Value&&vitaraJQ("#optionsBand3Value",n).val(l.band3Value),void 0!==l.band3?vitaraJQ("#optionsBand3",n).val(l.band3):(vitaraJQ("#optionsBand3",n).val(l.target),vitaraJQ("#optionsBand3Agg",n).val("max")),void 0!==l.band3Agg&&vitaraJQ("#optionsBand3Agg",n).val(l.band3Agg)):"bar"!==u&&"variance"!==u&&"variancepercentage"!==u||(t.setVitaraColorPicker("#optionsColor",n,l.color),t.setVitaraColorPicker("#optionsNegColor",n,l.negaBarColor),void 0!==l.axisSpecificity&&vitaraJQ("#axisSpecificity",n).val(l.axisSpecificity));var d=[{text:"Min",value:"min"},{text:"Fixed Value",value:"fixedvalue"},{text:"Percentile",value:"percentile"}];e.populateAxisOptions("startValue",n,d,l.startAxis||"min"),d.splice(0,1),d.unshift({text:"Max",value:"max",selected:"max"===l.startAxis}),e.populateValueOptions("startValueInput",n,l.startAxisValue),e.populateAxisOptions("endValue",n,d,l.endAxis||"max"),e.populateValueOptions("endValueInput",n,l.endAxisValue),e.checkChartType(u,n),e.manageValueInput("startValue","startValueInput",n),e.manageValueInput("endValue","endValueInput",n),vitaraJQ(".manage-options",n).hide(),vitaraJQ(".add-edit-options",n).show(),vitaraJQ("#optionsApply",n).show(),vitaraJQ("#optionsOk",n).hide(),vitaraJQ("#optionsCancel",n).show()},this.checkChartType=function(t,e){"bullet"==t?(vitaraJQ(".line-chart",e).hide(),vitaraJQ(".bullet-chart",e).show(),vitaraJQ(".color-picker",e).hide(),vitaraJQ(".neg-color-picker",e).hide()):"line"==t?(vitaraJQ(".line-chart",e).show(),vitaraJQ(".bullet-chart",e).hide(),vitaraJQ(".color-picker",e).show(),vitaraJQ(".neg-color-picker",e).hide()):"bar"==t||"variance"===t||"variancepercentage"===t?(vitaraJQ(".line-chart",e).hide(),vitaraJQ(".bullet-chart",e).hide(),vitaraJQ(".bar-chart",e).show(),vitaraJQ(".color-picker",e).show(),vitaraJQ(".neg-color-picker",e).show()):(vitaraJQ(".line-chart",e).hide(),vitaraJQ(".bullet-chart",e).hide(),vitaraJQ(".neg-color-picker",e).hide(),vitaraJQ(".color-picker",e).show())},this.manageAxisSpecificity=function(t,e){vitaraJQ("#axisSpecificity",e).html('<option id="column" value="column">Same across cells</option><option id="cell" value="cell">Apply at each cell</option>')},this.applyColorPicker=function(o,r){var n=t.getMicroChartTypeModel().getChartValueForGivenMetric(o.column.colDef.headerName);n||(n={chartType:"variance"});var i=n.chartType;void 0!==r&&(i=r),t.setVitaraColorPicker("#optionsColor",e.popupWindow,n.color||"#9fa3a8"),"line"==i?t.setVitaraColorPicker("#optionsFinalSpotColor",e.popupWindow,n.spotColor||"#e79649"):"bullet"==i?(t.setVitaraColorPicker("#optionsTargetColor",e.popupWindow,n.targetColor||"#000000"),t.setVitaraColorPicker("#optionsPerformanceColor",e.popupWindow,n.performanceColor||"#14526a"),t.setVitaraColorPicker("#optionsBand1Color",e.popupWindow,n.band1Color||"#ececec"),t.setVitaraColorPicker("#optionsBand2Color",e.popupWindow,n.band2Color||"#cac9c9"),t.setVitaraColorPicker("#optionsBand3Color",e.popupWindow,n.band3Color||"#b3b3b3")):"bar"!=i&&"variance"!==i&&"variancepercentage"!==i||(t.setVitaraColorPicker("#optionsColor",e.popupWindow,n.color),t.setVitaraColorPicker("#optionsNegColor",e.popupWindow,n.negaBarColor))},this.validateTrendLineApply=function(t){var e=vitaraJQ("#optionsChartType",t).val();if(""==e)return vitaraJQ("#optionsChartType",t).focus(),!1;if("bullet"==e){if(""==vitaraJQ("#optionsTarget",t).val())return vitaraJQ("#optionsTarget",t).focus(),!1;if(""==vitaraJQ("#optionsTargetAgg",t).val())return vitaraJQ("#optionsTargetAgg",t).focus(),!1;if(""==vitaraJQ("#optionsPerformanceAgg",t).val())return vitaraJQ("#optionsPerformanceAgg",t).focus(),!1}return!0}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartGrandTotalsView:()=>r}),o(45);var r=function(t,e){var o=this;o.eInterface=t.gridOptions.context.editorInterfaceRef,o.menuContainer=o.eInterface.getPropMenuContainer();var r=o;r.elements={visibility:"popupgrandTotals",position:"popupgrandTotalsPosition",displayText:"popupgrandTotalsText",textFontAlign:"popupgrandTotalsTextFontAlign",textFontVerticalAlign:"popupgrandTotalsTextFontVerticalAlign",textFontFamily:"popupgrandTotalsTextFontFamily",textFontSize:"popupgrandTotalsTextFontSize",textFontBold:"grandTotalsTextFontBold",textFontItalic:"grandTotalsTextFontItalic",textFontUnderline:"grandTotalsTextFontUnderline",textColor:"popupgrandTotalsTextFontColor",textBgColor:"popupgrandTotalsTextBgColor",valueFontAlign:"popupgrandTotalsValueFontAlign",valueFontVerticalAlign:"popupgrandTotalsValueFontVerticalAlign",valueFontFamily:"popupgrandTotalsValueFontFamily",valueFontSize:"popupgrandTotalsValueFontSize",valueFontBold:"grandTotalsValueFontBold",valueFontItalic:"grandTotalsValueFontItalic",valueFontUnderline:"grandTotalsValueFontUnderline",valueBgColor:"popupgrandTotalsValueBgColor",valueColor:"popupgrandTotalsValueFontColor"},this.populateView=function(e){var r=o.eInterface.propMenuHelper,n=t.getGrandTotalsModel(),i="hide";n.isGrandTotalsVisible()&&(i="show"),vitaraJQ("#popupgrandTotals",e).val(i);var a=n.getGrandTotalsPosition();vitaraJQ("#popupgrandTotalsPosition",e).val(a),vitaraJQ("#popupgrandTotalsText",e).val(n.getGrandTotalsText()),vitaraJQ("#popupgrandTotalsTextFontAlign",e).val(n.getGrandTotalsTextAlign()),vitaraJQ("#".concat(o.elements.textFontVerticalAlign),e).val(n.getGrandTotalsTextVerticalAlign()),vitaraJQ("#popupgrandTotalsTextFontFamily",e).val(n.getGrandTotalsTextFamily()),vitaraJQ("#popupgrandTotalsTextFontSize",e).val(n.getGrandTotalsTextSize()),n.isGrandTotalsTextBold()?vitaraJQ(vitaraJQ("#grandTotalsTextFontBold",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsTextFontBold",e).parent().children()[0]).removeClass("active"),n.isGrandTotalsTextItalic()?vitaraJQ(vitaraJQ("#grandTotalsTextFontItalic",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsTextFontItalic",e).parent().children()[0]).removeClass("active"),n.isGrandTotalsTextUnderline()?vitaraJQ(vitaraJQ("#grandTotalsTextFontUnderline",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsTextFontUnderline",e).parent().children()[0]).removeClass("active"),vitaraJQ("#popupgrandTotalsValueFontAlign",e).val(n.getGrandTotalsValueAlign()),vitaraJQ("#".concat(o.elements.valueFontVerticalAlign),e).val(n.getGrandTotalsValueVerticalAlign()),vitaraJQ("#popupgrandTotalsValueFontFamily",e).val(n.getGrandTotalsValueFamily()),vitaraJQ("#popupgrandTotalsValueFontSize",e).val(n.getGrandTotalsValueSize()),n.isGrandTotalsValueBold()?vitaraJQ(vitaraJQ("#grandTotalsValueFontBold",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsValueFontBold",e).parent().children()[0]).removeClass("active"),n.isGrandTotalsValueItalic()?vitaraJQ(vitaraJQ("#grandTotalsValueFontItalic",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsValueFontItalic",e).parent().children()[0]).removeClass("active"),n.isGrandTotalsValueUnderline()?vitaraJQ(vitaraJQ("#grandTotalsValueFontUnderline",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#grandTotalsValueFontUnderline",e).parent().children()[0]).removeClass("active"),r.setVitaraColorPicker("#popupgrandTotalsTextFontColor",n.getGrandTotalsTextColor()),r.setVitaraColorPicker("#popupgrandTotalsTextBgColor",n.getGrandTotalsTextBgColor()),r.setVitaraColorPicker("#popupgrandTotalsValueFontColor",n.getGrandTotalsValueColor()),r.setVitaraColorPicker("#popupgrandTotalsValueBgColor",n.getGrandTotalsValueBgColor())},this.applyStyles=function(e,r){e.detail.value;var n=t.getGrandTotalsModel();n.setGrandTotalsPositionByValue(o._getValue("position",r).toLowerCase()),n.setGrandTotalsShowHideByValue(o._getValue("visibility",r).toLowerCase()),n.setGrandTotalsText(o.eInterface.propMenuHelper.sanitizeContent(o._getValue("displayText",r))),n.setGrandTotalsTextColor(o._getValue("textColor",r)),vitaraJQ("#grandTotalsTextFontUnderline",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsTextDecoration("underline"):n.setGrandTotalsTextDecoration("none"),vitaraJQ("#grandTotalsTextFontItalic",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsTextStyle("italic"):n.setGrandTotalsTextStyle("normal"),vitaraJQ("#grandTotalsTextFontBold",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsTextWeight("bold"):n.setGrandTotalsTextWeight("normal"),n.setGrandTotalsTextAlign(o._getValue("textFontAlign",r)),n.setGrandTotalsTextVerticalAlign(o._getValue("textFontVerticalAlign",r)),n.setGrandTotalsTextFamily(o._getValue("textFontFamily",r)),n.setGrandTotalsTextSize(o._getValue("textFontSize",r)),n.setGrandTotalsTextBgColor(o._getValue("textBgColor",r)),vitaraJQ("#grandTotalsValueFontUnderline",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsValueDecoration("underline"):n.setGrandTotalsValueDecoration("none"),vitaraJQ("#grandTotalsValueFontItalic",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsValueStyle("italic"):n.setGrandTotalsValueStyle("normal"),vitaraJQ("#grandTotalsValueFontBold",r).parent().children()[0].classList.contains("active")?n.setGrandTotalsValueWeight("bold"):n.setGrandTotalsValueWeight("normal"),n.setGrandTotalsValueAlign(o._getValue("valueFontAlign",r)),n.setGrandTotalsValueVerticalAlign(o._getValue("valueFontVerticalAlign",r)),n.setGrandTotalsValueFamily(o._getValue("valueFontFamily",r)),n.setGrandTotalsValueBgColor(o._getValue("valueBgColor",r)),n.setGrandTotalsValueSize(o._getValue("valueFontSize",r)),n.setGrandTotalsValueColor(o._getValue("valueColor",r)),t.redrawRows()},this._getValue=function(t,e){return vitaraJQ("#"+r.elements[t],e).val()}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartSubTotalsView:()=>r});var r=function(t,e){var o=this;o.eInterFace=t.gridOptions.context.editorInterfaceRef;var r=o;r.elements={textFontAlign:"popupsubTotalsTextFontAlign",textFontFamily:"popupsubTotalsTextFontFamily",textFontSize:"popupsubTotalsTextFontSize",textFontBold:"subTotalsTextFontBold",textFontItalic:"subTotalsTextFontItalic",textFontUnderline:"subTotalsTextFontUnderline",textBgColor:"popupsubTotalsTextBgColor",textColor:"popupsubTotalsTextFontColor",textVerticalAlign:"popupsubTotalsTextFontVerticalAlign",valueFontAlign:"popupsubTotalsValueFontAlign",valueFontFamily:"popupsubTotalsValueFontFamily",valueFontSize:"popupsubTotalsValueFontSize",valueFontBold:"subTotalsValueFontBold",valueFontItalic:"subTotalsValueFontItalic",valueFontUnderline:"subTotalsValueFontUnderline",valueBgColor:"popupsubTotalsValueBgColor",valueColor:"popupsubTotalsValueFontColor",valueVerticalAlign:"popupsubTotalsValueFontVerticalAlign"},this.populateView=function(e){var r=t.getSubTotalsModel(),n=o.eInterFace.propMenuHelper;vitaraJQ("#popupuseBodyStyleCheckbox",e).prop("checked",r.isUseBodyStyle()),vitaraJQ("#popupuseMetricTotalsCheckbox",e).prop("checked",r.isMetricTotals()),vitaraJQ("#popupshowPivotMetricTotals",e).prop("checked",r.isPivotMetricTotals()),vitaraJQ("#popupusePivotRowTotalsCheckbox",e).prop("checked",r.isPivotRowTotals()),vitaraJQ("#popupusePivotGroupTotalsCheckbox",e).prop("checked",r.isPivotGroupTotals());var i={detail:{}};i.detail.value=r.isUseBodyStyle()?1:0,o.useBodyStyleHelper(i,e),vitaraJQ("#popupsubTotalsTextFontAlign",e).val(r.getSubTotalsTextAlign()),vitaraJQ("#".concat(o.elements.textVerticalAlign),e).val(r.getSubTotalsTextVerticalAlign()),vitaraJQ("#popupsubTotalsTextFontFamily",e).val(r.getSubTotalsTextFamily()),vitaraJQ("#popupsubTotalsTextFontSize",e).val(r.getSubTotalsTextSize()),r.isSubTotalsTextBold()?vitaraJQ(vitaraJQ("#subTotalsTextFontBold",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsTextFontBold",e).parent().children()[0]).removeClass("active"),r.isSubTotalsTextItalic()?vitaraJQ(vitaraJQ("#subTotalsTextFontItalic",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsTextFontItalic",e).parent().children()[0]).removeClass("active"),r.isSubTotalsTextUnderline()?vitaraJQ(vitaraJQ("#subTotalsTextFontUnderline",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsTextFontUnderline",e).parent().children()[0]).removeClass("active"),vitaraJQ("#popupsubTotalsValueFontAlign",e).val(r.getSubTotalsValueAlign()),vitaraJQ("#".concat(o.elements.valueVerticalAlign),e).val(r.getSubTotalsValueVerticalAlign()),vitaraJQ("#popupsubTotalsValueFontFamily",e).val(r.getSubTotalsValueFamily()),vitaraJQ("#popupsubTotalsValueFontSize",e).val(r.getSubTotalsValueSize()),r.isSubTotalsValueBold()?vitaraJQ(vitaraJQ("#subTotalsValueFontBold",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsValueFontBold",e).parent().children()[0]).removeClass("active"),r.isSubTotalsValueItalic()?vitaraJQ(vitaraJQ("#subTotalsValueFontItalic",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsValueFontItalic",e).parent().children()[0]).removeClass("active"),r.isSubTotalsValueUnderline()?vitaraJQ(vitaraJQ("#subTotalsValueFontUnderline",e).parent().children()[0]).addClass("active"):vitaraJQ(vitaraJQ("#subTotalsValueFontUnderline",e).parent().children()[0]).removeClass("active"),n.setVitaraColorPicker("#popupsubTotalsTextFontColor",r.getSubTotalsTextColor()),n.setVitaraColorPicker("#popupsubTotalsTextBgColor",r.getSubTotalsTextBgColor()),n.setVitaraColorPicker("#popupsubTotalsValueFontColor",r.getSubTotalsValueColor()),n.setVitaraColorPicker("#popupsubTotalsValueBgColor",r.getSubTotalsValueBgColor()),t.gridOptions.columnApi.isPivotMode()?(this.togglePivotMetricTotals(r.isPivotGroupTotals()),r.isPivotMetricTotals()&&vitaraJQ("#popupusePivotGroupTotalsCheckbox",e).prop("disabled",!0),vitaraJQ("#popupuseMetricTotalsCheckbox",e).parent().hide(),vitaraJQ("#popupuseMetricTotalsCheckbox",e).prop("disabled",!0)):(vitaraJQ("#popupshowPivotMetricTotals",e).parent().hide(),vitaraJQ("#popupshowPivotMetricTotals",e).prop("disabled",!0),vitaraJQ("#popupusePivotRowTotalsCheckbox",e).parent().hide(),vitaraJQ("#popupusePivotRowTotalsCheckbox",e).prop("disabled",!0),vitaraJQ("#popupusePivotGroupTotalsCheckbox",e).parent().hide(),vitaraJQ("#popupusePivotGroupTotalsCheckbox",e).prop("disabled",!0))},this.togglePivotMetricTotals=function(e){var r=t.gridOptions.columnApi.getPivotColumns().length<2;vitaraJQ("#popupshowPivotMetricTotals",o.eInterFace.getPropMenuContainer()).prop("disabled",e||r)},this.applyStyles=function(e,r){var n=t.getSubTotalsModel();vitaraJQ("#subTotalsTextFontUnderline",r).parent().children()[0].classList.contains("active")?n.setSubTotalsTextDecoration("underline"):n.setSubTotalsTextDecoration("none"),vitaraJQ("#subTotalsTextFontItalic",r).parent().children()[0].classList.contains("active")?n.setSubTotalsTextStyle("italic"):n.setSubTotalsTextStyle("normal"),vitaraJQ("#subTotalsTextFontBold",r).parent().children()[0].classList.contains("active")?n.setSubTotalsTextWeight("bold"):n.setSubTotalsTextWeight("normal"),n.setSubTotalsTextAlign(o._getValue("textFontAlign",r)),n.setSubTotalsTextVerticalAlign(o._getValue("textVerticalAlign",r)),n.setSubTotalsTextFamily(o._getValue("textFontFamily",r)),n.setSubTotalsTextSize(o._getValue("textFontSize",r)),n.setSubTotalsTextBgColor(o._getValue("textBgColor",r)),n.setSubTotalsTextColor(o._getValue("textColor",r)),vitaraJQ("#subTotalsValueFontUnderline",r).parent().children()[0].classList.contains("active")?n.setSubTotalsValueDecoration("underline"):n.setSubTotalsValueDecoration("none"),vitaraJQ("#subTotalsValueFontItalic",r).parent().children()[0].classList.contains("active")?n.setSubTotalsValueStyle("italic"):n.setSubTotalsValueStyle("normal"),vitaraJQ("#subTotalsValueFontBold",r).parent().children()[0].classList.contains("active")?n.setSubTotalsValueWeight("bold"):n.setSubTotalsValueWeight("normal"),n.setSubTotalsValueAlign(o._getValue("valueFontAlign",r)),n.setSubTotalsValueVerticalAlign(o._getValue("valueVerticalAlign",r)),n.setSubTotalsValueFamily(o._getValue("valueFontFamily",r)),n.setSubTotalsValueSize(o._getValue("valueFontSize",r)),n.setSubTotalsValueColor(o._getValue("valueColor",r)),n.setSubTotalsValueBgColor(o._getValue("valueBgColor",r)),n.setUseBodyStyleByValue(vitaraJQ("#popupuseBodyStyleCheckbox",r).prop("checked")),n.setMetricTotalsByValue(vitaraJQ("#popupuseMetricTotalsCheckbox",r).prop("checked")),n.setPivotMetricTotalsByValue(vitaraJQ("#popupshowPivotMetricTotals",r).prop("checked")),n.setPivotRowTotalsByValue(vitaraJQ("#popupusePivotRowTotalsCheckbox",r).prop("checked")),n.setPivotGroupTotalsByValue(vitaraJQ("#popupusePivotGroupTotalsCheckbox",r).prop("checked")),t.gridOptions.context.rePlot()},this.useBodyStyleHelper=function(t,e){1===t.detail.value?Object.keys(o.elements).forEach((function(t){vitaraJQ("#"+o.elements[t],e).closest(".row").hide()})):Object.keys(o.elements).forEach((function(t){vitaraJQ("#"+o.elements[t],e).closest(".row").show()}))},this._getValue=function(t,e){return vitaraJQ("#"+r.elements[t],e).val()}}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartCustomMarkerView:()=>a});var r=o(326),n=o(361),i=o(45),a=function(t){var e,o,a,l,s,u,d,c,h,g,p,m,f,v,C,T,M,y,S,b,x,w,A=this,G=t.gridOptions.context;A.popupWindowManager=new r.PopupWindowManager,this.maxNumberHandler=function(){var e=t.getAggregationWrapperModel().getMinMaxValuesForGivenPair(y.val(),p.val()).max,o=t.getCustomMarkerModel().getMarker(g.val(),p.val()),r=o.maxNumber;void 0===r||o.fillMetric!==y.val()?"AutoScale"===C.val()&&(e<=1?e=1:e<=100&&(e=100)):e=r,S.val(e),"AutoScale"===C.val()&&T.prop("checked")?d.show():d.hide()},this.updateCustomMarker=function(e){var o=t.getCustomMarkerModel().getMarker(g.val(),p.val()),r="square";""===o?m.prop("checked",!1):(m.prop("checked",!0),C.val(o.scaling),b.val(o.markerCountMin),x.val(o.markerCountMax),T.prop("checked",o.fill),y.val(o.fillMetric),S.val(o.maxNumber?o.maxNumber:1),w.prop("checked",o.mapDataToScale),r=o.marker),t.setVitaraColorPicker("#markerColor",A.popupWindow,o.markerColor?o.markerColor:""),t.setVitaraColorPicker("#unfillColor",A.popupWindow,o.unfillColor?o.unfillColor:""),A.fillChecked(),A.maxNumberHandler();var i=vitaraJQ("#popupinfoMarkerType",A.popupWindow).attr("selected-icon"),a={ctx:this,iconToUpdate:r,popupWindowContext:A.popupWindow,currentIcon:i||"square"};(0,n.updateInfoMarkerIcon)(a),o.infographicCustomSVGEnabled?v.attr({"custom-Path":!0,"infographic-path":o.infographicCustomSVGPath}):v.removeAttr("custom-path"),A.onEnableMarkerShowHide()},this.onEnableMarkerShowHide=function(t){var r=[e,o,a,s,h,l,d,u,a,c];void 0===t&&(t=m.prop("checked")),t?(r.forEach((function(t){return t.show()})),A.fillChecked(),A.onScalingChanged(!0)):r.forEach((function(t){return t.hide()}))},this.fillChecked=function(t){void 0===t&&(t=T.prop("checked")),t?("AutoScale"===C.val()?u.show():(y.val(g.val()),u.hide()),h.show()):(y.val(g.val()),u.hide(),h.hide()),A.maxNumberHandler()},this.onScalingChanged=function(t){"AutoScale"===C.val()?(l.hide(),s.show(),c.hide()):"Fixed"===C.val()?(l.show(),s.hide(),x.hide(),c.show(),T.prop("checked",!0),t||b.val(5)):(l.show(),b.show(),x.show(),s.hide(),c.show(),T.prop("checked",!1),t||(b.val(1),x.val(5))),A.fillChecked()},this.populateLabels=function(e){var o={"custom-markers-options":"Custom Markers Options","grouping-level":"Grouping Level",metric:"Metric","enable-marker":"Enable Marker",marker:"Marker",color:"Color","scaling-label":"Scaling",auto:"Auto",fixed:"Fixed","fixed-range":"Fixed Range",count:"Count",fill:"Fill","fill-metric":"Fill Metric","max-number":"Max Number","map-data-to-scale":"Map data to scale","unfilled-color":"Unfilled Color",optionsApply:"Apply",optionsCancel:"Cancel"},r=t.gridOptions.localeTextFunc;Object.keys(o).forEach((function(t){vitaraJQ("#".concat(t),e).text(r(o[t],o[t]))}))},this.onLoadHandler=function(r){var n=this;A.popupWindow=r,e=vitaraJQ(".marker-controller",r),o=vitaraJQ(".color-controller",r),a=vitaraJQ(".scaling-controller",r),l=vitaraJQ(".count-controller",r),s=vitaraJQ(".fill-controller",r),u=vitaraJQ(".fill-metric-controller",r),d=vitaraJQ(".max-number-controller",r),c=vitaraJQ(".map-data-controller",r),h=vitaraJQ(".unfilled-color-controller",r),g=vitaraJQ("#metricNames",r),p=vitaraJQ("#groupingLevels",r),m=vitaraJQ("#enableMarker",r),f=vitaraJQ("#markerColor",r),v=vitaraJQ("#popupinfoMarkerType",r),C=vitaraJQ("#scaling",r),T=vitaraJQ("#fill",r),M=vitaraJQ("#unfillColor",r),y=vitaraJQ("#fillMetricNames",r),S=vitaraJQ("#maxNumber",r),b=vitaraJQ("#markercount1",r),x=vitaraJQ("#markercount2",r),w=vitaraJQ("#mapDataToScale",r),vitaraJQ(r).find(".modal-dialog").addClass("vitara-grid"),A.populateLabels(r),v.on("click",(function(e){G.editorInterfaceRef.propMenuHelper.getToggleMarkerType().call(n,{enableCustom:!0,selection:{"selected-icon":e.currentTarget.getAttribute("selected-icon"),"custom-path":e.currentTarget.getAttribute("custom-path"),"infographic-path":e.currentTarget.getAttribute("infographic-path")},context:A.popupWindow,baseFilePath:t.gridOptions.context.getBaseFilePath(),versionPackage:t.gridOptions.context.getVersionPackage()},(function(t){t["custom-path"]?vitaraJQ(e.target).removeClass().addClass("svg-vitaraCustomSVGFile svg-vitaraCustomSVGFile-dims infoMarkerType vitara-chart-editor-field").attr({"selected-icon":"vitaraCustomSVGFile","custom-path":!0,"infographic-path":t["infographic-path"]}):vitaraJQ(e.target).removeClass().addClass("infoMarkerType svg-".concat(t["selected-icon"]," svg-").concat(t["selected-icon"],"-dims vitara-chart-editor-field")).attr({"selected-icon":t["selected-icon"]}).removeAttr("custom-path")}))})),t.getTitles().slice(t.gridOptions.chartDataMapper.numAttributes).forEach((function(t){var e='<option value="'.concat(t,'">').concat(t,"</option>");t===A.params.column.colDef.headerName&&(e='<option value="'.concat(t,'" selected>').concat(t,"</option>")),g.append(e),y.append('<option value="'.concat(t,'">').concat(t,"</option>"))}));var i=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();(i=["No Grouping"].concat(i)).forEach((function(t){p.append('<option value="'.concat(t,'">').concat(t,"</option>"))})),T.on("click",(function(t){A.fillChecked(t.target.checked)})),m.on("click",(function(t){A.onEnableMarkerShowHide(t.target.checked)})),C.on("change",(function(t){A.onScalingChanged()})),A.updateCustomMarker(),y.on("change",A.maxNumberHandler),g.on("click",A.updateCustomMarker),p.on("click",A.updateCustomMarker),vitaraJQ("#optionsApply",A.popupWindow).on("click",(function(e){var o=m.prop("checked"),r=S.val(),n="true"===vitaraJQ("#popupinfoMarkerType").attr("custom-path"),i=vitaraJQ("#popupinfoMarkerType").attr("infographic-path");if(""===r){var a=t.getAggregationWrapperModel().getMinMaxValuesForGivenPair(g.val(),p.val()).max;"AutoScale"===C.val()&&(a<=1?a=1:a<=100&&(a=100)),r=a}var l=t.getCustomMarkerModel();o?l.setMarkerForMetric({metric:g.val(),groupingLevel:p.val(),markerColor:f.val(),marker:v.attr("selected-icon"),scaling:C.val(),fill:T.prop("checked"),fillMetric:y.val(),markerCountMin:Number(b.val()),markerCountMax:"Fixed"===C.val()?Number(b.val()):Number(x.val()),unfillColor:M.val(),maxNumber:r,mapDataToScale:w.prop("checked"),infographicCustomSVGPath:i,infographicCustomSVGEnabled:n}):l.removeMarkerAtGroupingLevel(g.val(),p.val());var s=t.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal()[0];p.val()===s&&(o?t.getPlotTypeSelectorModel().setPlotType(g.val(),"marker"):t.getPlotTypeSelectorModel().setPlotType(g.val(),"numeric"))})),A.onEnableMarkerShowHide()},this.customMarkerPopup=function(t){A.params=t,A.popupWindowManager.createPopup({templatePath:i.utils.getHTMLTemplates().GRID_CUSTOM_MARKER_VIEW,onLoadHandler:A.onLoadHandler})}}},(t,e,o)=>{o.r(e),o.d(e,{updateInfoMarkerIcon:()=>r});var r=function(t){var e=t.ctx;(t.popupWindowContext?vitaraJQ("#popupinfoMarkerType",t.popupWindowContext):e.getMenuElement("#popupinfoMarkerType")).removeClass(["svg-".concat(t.currentIcon),"svg-".concat(t.currentIcon,"-dims")]).addClass("svg-".concat(t.iconToUpdate," svg-").concat(t.iconToUpdate,"-dims")).attr("selected-icon",t.iconToUpdate)}},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChartAggregationHelper:()=>i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e}var e,o;return e=t,(o=[{key:"formatMetricHelper",value:function(t,e){var o=this.gridContext.gridOptions.chartDataMapper.titles.slice().map(this.gridContext.formatNames).indexOf(e);return-1===o&&(o=this.gridContext.gridOptions.chartDataMapper.numAttributes),t&&t.toString(),this.gridContext.gridOptions.context.utils.formatMetricLike(t,this.gridContext.gridOptions.chartDataMapper.getMetricFormatObject(o))}},{key:"ratioValueGetter",value:function(t){if(!t.node.group){var e=t.column.colDef.headerName,o=this.gridContext.getRatioAggregationModel().getRatioState()[e],r=o.Numerator,n=o.Denominator,i=1,a=1,l=0;return t.data[e]&&void 0!==t.data[e].rawValue&&(l=t.data[e].rawValue),void 0!==t.data[r]&&void 0!==t.data[r].rawValue&&(i=t.data[r].rawValue),void 0!==t.data[n]&&void 0!==t.data[n].rawValue&&(a=t.data[n].rawValue),this.createRatioValueObject(i,a,t,l)}}},{key:"createRatioValueObject",value:function(t,e,o,r){if(void 0===o)return{numerator:0,denominator:0,rawValue:0,value:"0"};var n=o.column.colDef.headerName,i=this.gridContext.getRatioAggregationModel().getRatioState()[n],a=i.Numerator,l=i.Denominator,s={},u=0,d="";if(void 0!==r)u=r,d=this.formatMetricHelper(u,n);else{u=t&&e?t/e:0;var c=Number(i.Precision);i.PercentageFormat?(d=(u*=100).toFixed(c)+"%",u=Number(u.toFixed(c))):(d=u.toFixed(c),u=Number(u.toFixed(c)))}return s[a]=t,s[l]=e,s.params=o,s.rawValue=u,s.value=d,s}},{key:"ratioAggregationFunction",value:function(t){var e=null==t?void 0:t.values;if(0!==e.length&&void 0!==e[0].params){var o=e[0].params,r=o.column.colDef.headerName,n=this.gridContext.getRatioAggregationModel().getRatioState()[r],i=n.Numerator,a=n.Denominator,l=[],s=[];e.forEach((function(t){l.push(t[i]),s.push(t[a])}));var u=this.getAggregation(i,!0),d=this.getAggregation(a,!0),c=this.gridContext.gridOptions.chartDataMapper,h=c.getAggregatedValue(l,u),g=c.getAggregatedValue(s,d);return this.createRatioValueObject(h,g,o)}return this.createRatioValueObject(0,0)}},{key:"genericValueGetter",value:function(t){var e=t.column.colDef.headerName;if("ratio"===this.getAggregation(e,!1))return this.ratioValueGetter(t);var o={};return void 0!==t.data&&void 0!==t.data[e]&&(o[e]=t.data[e].rawValue,o.rawValue=t.data[e].rawValue,o.value=t.data[e].value),o.grouping=0,o}},{key:"getAggregation",value:function(t,e){var o=this.gridContext.getColumnStateMaster().columnAggregationModel.getAggregation(t);return!e||"choosecolumn"!==o&&"ratio"!==o?o:"sum"}},{key:"sumAggregation",value:function(t){return this.simpleAggregation(t,"sum")}},{key:"meanAggregation",value:function(t){return this.simpleAggregation(t,"avg")}},{key:"firstAggregation",value:function(t){var e=this.getSortedValues(t);return this.simpleAggregation(e,"first")}},{key:"lastAggregation",value:function(t){var e=this.getSortedValues(t);return this.simpleAggregation(e,"last")}},{key:"minAggregation",value:function(t){return this.simpleAggregation(t,"min")}},{key:"maxAggregation",value:function(t){return this.simpleAggregation(t,"max")}},{key:"countAggregation",value:function(t){return this.simpleAggregation(t,"count")}},{key:"getMetricNameFromValues",value:function(t){var e="";if(t.length>0)try{for(var o=0;o<t.length&&""===(e=Object.keys(t[o])[0]);o++);}catch(t){console.error("Unable to get aggregation values")}return e}},{key:"getSortedValues",value:function(t){var e=this.getMetricNameFromValues(t),o=t,r="No Grouping";if(""!==e){var n=t[0].grouping;if(n>0){var i=this.gridContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();i.push("No Grouping"),i.reverse(),r=i[n-1]}var a=this.gridContext.getSortingModel().getSortingForColumn(e,r);void 0!==a&&(o=t.sort((function(t,e){return"asc"===a?t.rawValue-e.rawValue:e.rawValue-t.rawValue})))}return o}},{key:"getDataForAggregation",value:function(t){var e=[],o=this.getMetricNameFromValues(t);return t.forEach((function(t){void 0!==t.rawValue?e.push({v:t.rawValue,fv:t.value}):e.push({v:t[o],fv:null})})),e}},{key:"getAggregateFormattedValue",value:function(t,e,o,r){return"count"===o?null===t?"":t.toString():null!==e?e:this.formatMetricHelper(t,r)}},{key:"simpleAggregation",value:function(t,e){var o=this.gridContext.gridOptions.chartDataMapper,r=null==t?void 0:t.values,n={},i=null,a=null,l=this.getMetricNameFromValues(r),s=0;if(""!==l){void 0!==r[0].grouping&&(s=r[0].grouping+1);var u=this.getDataForAggregation(r);if(u.length>0){var d=o.getAggregatedValue(u,e);d&&void 0!==d.v?(i=d.v,a=d.fv):i=d}}return n[l]=i,n.rawValue=i,n.value=this.getAggregateFormattedValue(i,a,e,l),n.toString=function(){return n.value},n.grouping=s,n}},{key:"totalValueGetter",value:function(t){if(!t.node.group){var e={total:0},o=0;this.gridContext.getTitles().slice(this.gridContext.gridOptions.chartDataMapper.numAttributes).forEach((function(e){if(void 0!==t.data[e]&&void 0!==t.data[e].rawValue){var r=t.data[e].rawValue;o+=r}})),e.total=o;var r=this.formatMetricHelper(o,"Total");return e.rawValue=o,e.value=r,t.data.Total=e,e}}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraMicroChartShowDetailRowsModel:()=>i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.stateKey="showDetailRows",this.stateManager=e.getStateManager(),this.DEFAULT_MODEL=!0,this.showDetailRowsModel=this.DEFAULT_MODEL,this._restoreState(),this.applyShowDetailRows()}var e,o;return e=t,(o=[{key:"isShowDetailRows",value:function(){return this.showDetailRowsModel}},{key:"showDetailRows",value:function(){this.setShowDetailRows(!0)}},{key:"hideDetailRows",value:function(){this.setShowDetailRows(!1)}},{key:"toggleShowHideDetailRows",value:function(){this.setShowDetailRows(!this.isShowDetailRows())}},{key:"setShowDetailRows",value:function(t){this.showDetailRowsModel=t,this.applyShowDetailRows(),this._saveState()}},{key:"applyShowDetailRows",value:function(){this.showDetailRowsModel||this._closeAllGrouping()}},{key:"_closeAllGrouping",value:function(){this.gridContext.getRowGroupOpenedModel().clearRowGroupOpenedModel()}},{key:"getStateRepresentation",value:function(){var t={};return t[this.stateKey]=this.showDetailRowsModel,t}},{key:"_saveState",value:function(){this.stateManager.saveSpecificState(this)}},{key:"_restoreState",value:function(){var t=this.stateManager.restoreSpecificState(this.stateKey);void 0===t&&(t=this.DEFAULT_MODEL),this.showDetailRowsModel=t}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(i)?i:String(i)),n)}var i}o.r(e),o.d(e,{VitaraGridChartScalingModel:()=>i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.stateManager=e.getStateManager(),this.scalingModel={},this.stateKey="varianceScalingGroup",this._restoreState()}var e,o;return e=t,(o=[{key:"isScalingGroupCleared",value:function(){return 0===Object.keys(this.getScalingGroup()).length}},{key:"getScalingGroup",value:function(){return this.scalingModel?this.scalingModel:{}}},{key:"setScalingGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scalingModel=t,this.gridContext.redrawRows(),this._saveState()}},{key:"getAllScalingGroupNames",value:function(){return this.scalingModel?Object.keys(this.scalingModel):[]}},{key:"getAllColumnsInGroup",value:function(t){return"string"==typeof t?this.scalingModel[t]:(console.error("getAllColumnsInGroup expected string got ",r(t)),[])}},{key:"getGroupName",value:function(t){if("string"!=typeof t)return console.error("getGroupName was expecting string, got ",r(t)),null;var e;for(e in this.scalingModel)if(this.scalingModel[e].indexOf(t)>-1)return e;return null}},{key:"getColumnsInGroupByColumn",value:function(t){if("string"!=typeof t)return console.error("getColumnsInGroupByColumn was expecting string, got ",r(t)),null;var e=this.getGroupName(t);return null===e?[t]:this.scalingModel[e]}},{key:"addColumnToGroup",value:function(t,e){return"string"!=typeof t||"string"!=typeof e?(console.error("addColumnToGroup was expecting string, string got ",r(t),", ",r(e)),0):(void 0===this.scalingModel[e]&&(this.scalingModel[e]=[]),this.scalingModel[e].push(t),this.gridContext.redrawRows(),this._saveState(),1)}},{key:"removeColumnGroup",value:function(t){return"string"!=typeof t?(console.error("removeColumnGroup was expecting string got ",r(t)),0):(delete this.scalingModel[t],this.gridContext.redrawRows(),this._saveState(),1)}},{key:"removeColumn",value:function(t){if("string"!=typeof t)return console.error("removeColumn was expecting string got ",r(t)),0;var e=this.getGroupName(t);if(e){var o=this.scalingModel[e].indexOf(t);return this.scalingModel[e].splice(o,1),this.gridContext.redrawRows(),this._saveState(),1}return 0}},{key:"resetModel",value:function(){this.scalingModel={},this.gridContext.redrawRows(),this._saveState()}},{key:"getStateRepresentation",value:function(){var t={};return t[this.stateKey]=this.scalingModel,t}},{key:"_saveState",value:function(){this.stateManager.saveSpecificState(this)}},{key:"_restoreState",value:function(){var t=this.stateManager.restoreSpecificState(this.stateKey);void 0===t&&(t={}),this.scalingModel=t}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartScalingView:()=>a});var r=o(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(i)?i:String(i)),r)}var i}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.gridOptions=this.gridContext.gridOptions}var e,o;return e=t,(o=[{key:"showView",value:function(){var t=this,e=this;this.sModel=this.gridContext.getScalingModel(),this.dataModel=[],Object.keys(this.sModel.getScalingGroup()).forEach((function(o,r){e.dataModel.push({name:o,columns:t.sModel.getScalingGroup()[o],group:r})}));var o=function(t){var e={};return t&&Array.isArray(t)&&t.forEach((function(t){e[t.name]=t.columns})),e},n=this.gridContext.getTitles().splice(this.gridContext.gridOptions.chartDataMapper.numAttributes),i={changeCallBack:function(){var t=this.getColumnDefinition(),r=o(t);e.sModel.setScalingGroup(r),e.dataModel=r},deleteCallBack:function(t){if(null!=t){var n=this.getColumnDefinition(),i=r.findIndex(n,(function(e){return e.group===t}));n.splice(i,1);var a=o(n);e.sModel.setScalingGroup(a),this.dataModel=n}else console.warn("id not found")},moveUpCallback:function(t){if(null!=t){var n=this.getColumnDefinition(),i=r.findIndex(n,(function(e){return e.group===t}));if(n.length>1&&i>0){var a=n[i];n[i]=n[i-1],n[i-1]=a;var l=o(n);e.cModel.setColumnGroupingModel(l),this.dataModel=n}}else console.warn("ID not found")},moveDownCallback:function(t){if(null!=t){var n=this.getColumnDefinition(),i=r.findIndex(n,(function(e){return e.group===t}));if(n.length>1&&i<n.length-1){var a=n[i];n[i]=n[i+1],n[i+1]=a;var l=o(n);e.cModel.setColumnGroupingModel(l),this.dataModel=n}}else console.warn("ID not found")},dataModel:e.dataModel,titles:n,gridContext:this.gridContext};this.gridContext.getDragDropManager(i).showPopup()}}])&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartDragDropManager:()=>l});var r=o(326),n=o(45);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==i(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(n)?n:String(n)),r)}var n}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e.gridContext,this.dataModel=e.dataModel,this.titles=e.titles,this.changeCallBack=e.changeCallBack,this.moveUpCallback=e.moveUpCallback,this.moveDownCallback=e.moveDownCallback,this.deleteCallBack=e.deleteCallBack,this.gridOptions=this.gridContext.gridOptions,this.popupManager=new r.PopupWindowManager,this.popupWindow=null,this.headerInput=e.headerInput||!1,this.viewSuffix=e.viewSuffix||"Column",e.groupHeader&&(this.groupHeader=e.groupHeader)}var e,o;return e=t,(o=[{key:"_triggerModelChange",value:function(){this.changeCallBack.call(this)}},{key:"showPopup",value:function(){this.popupManager.createPopup({templatePath:n.utils.getHTMLTemplates().GRID_DRAG_DROP_GROUPING_VIEW,onLoadHandler:this.onLoadHandler.bind(this),height:"450px"})}},{key:"onLoadHandler",value:function(t){var e=this;e.popupWindow=t,e.gridContext.gridOptions.enableRtl&&vitaraJQ(t).find(".modal-content").addClass("rtl"),vitaraJQ(t).find(".modal-dialog").addClass("vitara-grid"),vitaraJQ(t).find(".modal-body").addClass("vitara-column-groupings"),vitaraJQ(".vitara-column-groupings",t)[0].innerHTML='<div class="panel-group '.concat(this.headerInput?"ddm-grouping-area":"",'" id="col-grouping-area"></div>'),e.getColumnGroupingPanels(t);var o=e.dataModel.length,r=function(){o+=1;var r=e.getColumnGroupCard(o);t.find(".panel-right").append(r),e.columnGroupListeners(t)};vitaraJQ(t).off("click",".col-grouping-remove").on("click",".col-grouping-remove",(function(o){var r=vitaraJQ(this).data("groupid");e.deleteCallBack.call(e,r),e.getColumnGroupingPanels(t)})),vitaraJQ(t).off("click",".move-group-up").on("click",".move-group-up",(function(){var o=vitaraJQ(this).data("groupid");e.moveUpCallback.call(e,o),e.getColumnGroupingPanels(t)})),vitaraJQ(t).off("click",".move-group-down").on("click",".move-group-down",(function(){var o=vitaraJQ(this).data("groupid");e.moveDownCallback.call(e,o),e.getColumnGroupingPanels(t)})),vitaraJQ(t).off("keyup",".col-group-heading").on("keyup",".col-group-heading",(function(){e._triggerModelChange()})),this.headerInput&&vitaraJQ(t).off("keyup",".ddm-group-heading .ddm-input").on("keyup",".ddm-group-heading .ddm-input",(function(){e._triggerModelChange()})),vitaraJQ(t).off("click","#addNewColGroup").on("click","#addNewColGroup",r),e.columnGroupListeners(t),0===o&&r()}},{key:"getColumnGroupCard",value:function(t,e,o){var r=e?e.columns.map((function(t){return o.splice(o.indexOf(t),1),'<li data-colid="'.concat(t,'">').concat(t,"</li>")})).join(""):"";return'<div class="column-grouping-inner-groups">\n            <div class="column-grouping-heading">\n                <div class="flex jc-space-between">\n                    <input id="groupheading'.concat(t,'" type="text" data-groupid="').concat(t,'" class="form-control col-group-heading" value="').concat(e?e.name:"Group "+t,'" />\n                    <a href="javascript:void(0);" data-groupid="').concat(t,'" class="col-grouping-remove">\n                        <i class="fa-trash"></i>\n                    </a>\n                </div>\n            </div>\n\n            <div class="flex jc-space-between ai-flex-start">\n                <div class="flex jc-space-between">\n                    <button class="move-group-up" data-groupid="').concat(t,'" title="Move up">\n                        <i class="fa-angle-up"></i>\n                    </button>\n                    <button class="move-group-down" data-groupid="').concat(t,'" title="Move down">\n                        <i class="fa-angle-down"></i>\n                    </button>\n                </div>\n\n                ','\n                <ul class="column-grouping-draggable droppable" data-groupid="').concat(t,'">').concat(r,"</ul>\n            </div>\n        </div>")}},{key:"getColumnGroupingPanels",value:function(t){var e=this,o=this.titles.slice(),r=this.dataModel,n='<div class="panel-right">\n            <div class="groups-header">\n                <h4>'.concat(this.viewSuffix,' groups</h4>\n                <button class="btn btn-primary btnCustom" id="addNewColGroup">\n                    ').concat(this.gridContext.gridOptions.localeTextFunc("Add New","Add New"),"\n                </button>\n            </div>\n            ").concat(r.map((function(t,r){return e.getColumnGroupCard(r,t,o)})).join(""),"\n        </div>"),i='<div class="panel-left">\n            <h4>Ungrouped '.concat(this.viewSuffix.toLowerCase(),'s</h4>\n            <ul class="column-grouping-draggable droppable">\n                ').concat(o.map((function(t){return'<li data-colid="'.concat(t,'">').concat(t,"</li>")})).join(""),"\n            </ul>\n        </div>"),a=this.getMetricGroupSection(i+n);vitaraJQ("#col-grouping-area",t)[0].innerHTML=a}},{key:"getMetricGroupSection",value:function(t){return this.headerInput?'\n                <div class="ddm-group-heading">\n                    <h5 class="ddm-label">Metric Groups Column heading:</h5>\n                    <input type="text" id="ddminput" class="form-control ddm-input" name="name" value="'.concat(this.groupHeader,'">\n                </div>\n                <div class="panel-group ddm_grouping_area">\n                    ').concat(t,"\n                </div>"):t}},{key:"columnGroupListeners",value:function(t){var e=this,o=vitaraJQ(t).find(".droppable");vitaraJQ(t).find("ul.column-grouping-draggable").sortable({connectWith:o,helper:"clone",placeholder:"placeholder",stop:function(t,o){e._triggerModelChange()}})}},{key:"getColumnDefinition",value:function(){var t=[],e=this.popupWindow,o=vitaraJQ("#groupColumnsWindow".concat(this.gridOptions.id),e)[0],r=vitaraJQ(".vitara-column-groupings",o)[0];return vitaraJQ(r).find("ul.column-grouping-draggable").length>0&&(t=[],vitaraJQ(r).find("ul.column-grouping-draggable").each((function(){var e=vitaraJQ(this).data("groupid");if(void 0!==e&&vitaraJQ(this).find("li").length>0){var o={group:e,name:n.utils.sanitizeContent(vitaraJQ(r).find("#groupheading"+e).val()),columns:[]};vitaraJQ(this).find("li").each((function(){var t=vitaraJQ(this).data("colid");o.columns.push(t)})),t.push(o)}}))),t}},{key:"getMetricRowGroupHeader",value:function(){var t=this.popupWindow,e=vitaraJQ("#groupColumnsWindow".concat(this.gridOptions.id),t)[0],o=vitaraJQ(".vitara-column-groupings",e)[0],r=vitaraJQ(o).find(".ddm-group-heading input.ddm-input");return r.length>0?r[0].value:"mGroups"}}])&&a(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridCustomFormattingEditor:()=>l}),o(368),o(369),o(370),o(371),o(372),o(373),o(374),o(375),o(376),o(377),o(378),o(379),o(380),o(381),o(382),o(383),o(384),o(385),o(386),o(387),o(388),o(389);var r=o(320),n=(o(390),o(391),o(392)),i=o(45),a=o(4),l=function(t){this.baseContext=t,this.options=null,this.selectedRange=null,this.activeTab="gridBody",this.eventDispatcher=t.getEventDispatcher(),this.customFormat={},this.stateKey="gridCustomFormatcolstate",this.stateManager=t.getStateManager(),this._restoreState()};vitaraJQ.extend(l.prototype,{getGridOptions:function(){return this.baseContext.gridOptions},getChartNode:function(){return this.getGridOptions().chartNode},getSelectedColumns:function(){return this.baseContext.getColumnSelectionModel().getSelectedColumns()},setEditorOptions:function(t){this.options=t},getEditorOptions:function(){return this.options},getSelector:function(){return this.getEditorOptions().selector},getSelectors:function(){return this.getEditorOptions().selectors},getHeaderSelector:function(){return this.getSelectors().gridHeader},getBodySelector:function(){return this.getSelectors().gridBody},getSelection:function(){return tinymce.get(this.getActiveSelector()).selection.getSel()},getActiveSelector:function(){return this.getSelectors()[this.activeTab]},addCustomFontOptions:function(t){if(!t)return t;var e=i.utils.getCustomFonts(),o="";return e&&e.length>0&&a.each(e,(function(t){if(t){var e=t.trim();o+="".concat(e,"=").concat(e,"; ")}})),t.font_family_formats=o+this.getEditorDefaultFonts(),t},getEditorDefaultFonts:function(){return"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Batang=Batang; Book Antiqua=book antiqua,palatino; Bookman Old Style=Bookman Old Style; Bookshelf Symbol 1='Bookshelf Symbol 1'; Bookshelf Symbol 2='Bookshelf Symbol 2'; Bookshelf Symbol 3='Bookshelf Symbol 3'; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Garamond=Garamond; Georgia=georgia,palatino; Haettenschweiler=Haettenschweiler; Helvetica=helvetica; Impact=impact,chicago; Lucida Console=Lucida Console; Lucida Sans Unicode=Lucida Sans Unicode; Map Symbols=Map Symbols; Marlett=Marlett; Monotype Corsiva=Monotype Corsiva; Monotype Sorts=Monotype Sorts; MS Gothic=MS Gothic; MS Outlook=MS Outlook; Microsoft Sans Serif=Microsoft Sans Serif; MT Extra=MT Extra; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats; Wingdings 2='Wingdings 2'; Wingdings 3='Wingdings 3'"},getUserOptions:function(t){var e=this.baseContext.gridOptions.context.getVersionPackage(),o={},r=(new Date).getTime().toString(),n=[vitaraChartsPath()+"style/".concat(e,"/tinymce.css?v=").concat(r),vitaraChartsPath()+"styles/".concat(e,"/custom/customStyles.css?v=").concat(r)];return o.selector="textarea#"+t,o.mentionsOption=this.getMentionOptions(),o.font_css=n,this.addCustomFontOptions(o)},hideEditor:function(){tinymce.get(this.getActiveSelector()).hide()},showEditor:function(){tinymce.get(this.getActiveSelector()).show()},getHeaderLabels:function(){return a.map(this.getGridOptions().columnDefs,(function(t){return{userId:t.colId,name:t.colId,id:t.colId,xuid:t.colId}}))},getCustomFormattingEditorHelper:function(){return this.formattingHelper||(this.formattingHelper=new n.default),this.formattingHelper},setLabelDefaultMacros:function(t){this.defaultMentions=t},getLabelDefaultMacros:function(){return this.defaultMentions},getMentionOptions:function(){var t=this.baseContext.getGridOptions().context,e=this.getCustomFormattingEditorHelper().getLabelMentions({fieldId:"gridCustomFormatEditor",propertyKey:"gridCustomFormat",colDefinitions:this.getGridOptions().columnDefs,genericMacros:t.getIncludeGenericMentions("gridCustomFormat"),getAttributeForms:t.getAttributeForms.bind(t),genericLabelMentions:t.getGenericLabelMentions("gridCustomFormat"),chartSpecificMentions:[]});this.setLabelDefaultMacros(e.macros),this._saveState();var o=this;return{mentionsList:a.map(e.macros,(function(t){return{userId:t.key,name:t.value,id:t.key,xuid:t.key}})),mentionsFilterOption:function(t,e){return"gridHeader"!==o.activeTab&&e.name.toLowerCase().includes(t.toLowerCase())}}},getCustomFormat:function(){return this.baseContext.getCustomFormatEditorModel().getCustomFormatForColumn(this.activeTab)},setCustomFormat:function(t){this.baseContext.getCustomFormatEditorModel().setFormat(t,this.activeTab)},setEditorContent:function(){tinymce.get(this.getActiveSelector()).setContent(this.getCustomFormat(),{format:"raw"})},setSelection:function(t){var e=this;if("mceToggleFormat"===t.command||"mceApplyTextcolor"===t.command||"FontName"===t.command||"FontSize"===t.command){var o=this.getSelection();"Caret"!==o.type&&0!==o.toString().length||(this.saveSelection(),tinymce.get(this.getActiveSelector()).execCommand("SelectAll"),setTimeout((function(){tinymce.get(e.getActiveSelector()).focus(),tinymce.get(e.getActiveSelector()).selection.select(tinymce.get(e.getActiveSelector()).getBody(),!0),tinymce.get(e.getActiveSelector()).selection.collapse(!1)}),1e3),setTimeout((function(){e.saveSelection()}),500))}},getCurrentRange:function(){var t=this.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)},saveSelection:function(){this.selectedRange=this.getCurrentRange()},restoreSelection:function(){var t=this.getSelection();if(this.selectedRange){try{t.removeAllRanges()}catch(t){document.body.createTextRange().select(),document.selection.empty()}t.addRange(this.selectedRange)}},addEditorHtml:function(){var t='<div id="'.concat(this.getSelector(),'" class="grid-custom-formatting-editor container-fluid hidden">\n                  <div class="hero-unit">\n                    <div class="editor-main">\n                      <div class="tab-switch-container">\n                        <button class="tab-switch tab-active" data="gridBody">Column Content</button>\n                        <button class="tab-switch" data="gridHeader">Header Content</button>\n                      </div>\n                      <div class="editor-box hidden">\n                        <textarea id="').concat(this.getBodySelector(),'"></textarea>\n                      </div>\n                      <div class="editor-box hidden">\n                        <textarea id="').concat(this.getHeaderSelector(),'"></textarea>\n                      </div>\n                    </div>\n                    <div id="eg-color-picker" class="text-small"></div>\n                    <button class="btn-filter submit-button" id="submitValue">Submit</button>\n                    <button class="btn-filter grouping-button" id="groupCol">Column Grouping</button>\n                  </div>\n                </div>');vitaraJQ(this.getChartNode()).prepend(t),this.addListeners()},addListeners:function(){var t=this;vitaraJQ(this.getChartNode()).off("click",".grid-custom-formatting-editor .tab-switch").on("click",".grid-custom-formatting-editor .tab-switch",function(e){vitaraJQ("#".concat(this.getActiveSelector())).parent().addClass("hidden"),t.activeTab=e.target.getAttribute("data"),vitaraJQ("#".concat(this.getActiveSelector())).parent().removeClass("hidden"),t.setEditorContent();for(var o=vitaraJQ(".grid-custom-formatting-editor .tab-switch"),r=0;r<o.length;r++)o[r].className=o[r].className.replace(" tab-active","");e.currentTarget.className+=" tab-active"}.bind(this)),vitaraJQ(this.getChartNode()).off("click",".grid-custom-formatting-editor .submit-button").on("click",".grid-custom-formatting-editor .submit-button",this.submitFormat.bind(this)),vitaraJQ(this.getChartNode()).off("click",".grid-custom-formatting-editor .grouping-button").on("click",".grid-custom-formatting-editor .grouping-button",this.groupColumns.bind(this)),this.eventDispatcher.addEventListener("columnSelectionChanged","gridContext",(function(e){t.setEditorView()}))},groupColumns:function(){var t=this.baseContext.getColumnSelectionModel().getSelectedColumnsAsArray();this.baseContext.getColumnSelectionModel().setSelectedColumns([]),this.baseContext.getColumnGroupingView().showView({columns:t})},insertColumn:function(){this.baseContext.getInsertColumnView().showView()},submitFormat:function(){var t=tinymce.get(this.getActiveSelector()).getContent(),e=t?tinymce.get(this.getActiveSelector()).getContent({format:"raw"}):t;if(e){var o=e.split("data-mce");if(o.length>1)for(var r=1;r<o.length;r++){var n=o[r].split(';"');if(n.length>1&&(n[0]="",n.length>2))for(var i=1;i<n.length-1;)n[i++]+=';"';o[r]=n.join("")}e=o.join("")}this.setCustomFormat(e)},destroyEditor:function(){a.each(this.getSelectors(),(function(t,e){var o=tinymce.get(t);o&&(o.destroy(),o.remove())}))},getMarkerObj:function(){return r.VitaraMarker.getInstance().getMarkersByTab()},createSelectors:function(t){this.options.selectors={gridHeader:"".concat(this.getSelector(),"Header"),gridBody:"".concat(this.getSelector(),"Body")}},initEditor:function(t){var e=this;this.setEditorOptions(t),this.createSelectors(t),this.destroyEditor(),this.addEditorHtml(),a.each(this.getSelectors(),(function(t,o){e.initializeEditor(t)}))},getPluginList:function(){return["advlist","autolink","lists","link","image","preview","searchreplace","visualblocks","fullscreen","media","table","code","wordcount","emoticons","mentions"]},getMenuList:function(){return{edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:""},insert:{title:"Insert",items:"image link addcomment pageembed template codesample inserttable | emoticons hr"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"}}},getToolBars:function(){return"emoticons| undo redo | blocks bold italic forecolor backcolor | fontfamily fontsizeinput | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent removeformat | table tabledelete"},initializeEditor:function(t){var e=this;tinymce.init(vitaraJQ.extend({height:300,ui_mode:"split",plugins:e.getPluginList(),extended_valid_elements:"span[class]",init_instance_callback:function(t){t.on("BeforeExecCommand",(function(t){e.setSelection(t)})),t.on("ExecCommand",(function(t){-1===["mceFocus","SelectAll"].indexOf(t.command)&&e.getSelectedColumns().length>1&&(e.getSelectedColumns(),e.submitFormat())}))},statusbar:!1,toolbar:e.getToolBars(),toolbar_mode:"floating",font_size_input_default_unit:"pt",menubar:"edit insert view format table",menu:e.getMenuList(),promotion:!1},this.getUserOptions(t)))},showHideEditorFields:function(t,e){var o=vitaraJQ("#"+t).closest(".editor-box"),r=o.find('div[class="tox-toolbar__primary"]'),n=r.children()[5],i=r.children()[8],a=r.children()[9],l=r.children()[10],s=r.children()[11],u=o.find('div[role="menubar"]'),d=this.getChartNode(),c=[n,i,a,l,s,u],h=[".submit-button","#insertLink-1","#icon_list_menu-1","#insertImage-1","#insertTable-1","#fontAwesome-1","#formatOL-1","#formatOLOptions-1","#formatUL-1","#formatULOptions-1","#inlineClass-1","#inlineStyle-1","#html-1"],g=[".grouping-button"];e?(vitaraJQ(".tox-tinymce",d).css("height",300),vitaraJQ(".tox-editor-container",d).css("flex","1 1 auto"),h.forEach((function(t){return vitaraJQ(t,d).removeClass("hidden")})),c.forEach((function(t){return vitaraJQ(t,d).removeClass("hidden")})),g.forEach((function(t){return vitaraJQ(t,d).addClass("hidden")}))):(vitaraJQ(".tox-tinymce",d).css("height",95),vitaraJQ(".tox-editor-container",d).css("flex","0 0 auto"),h.forEach((function(t){return vitaraJQ(t,d).addClass("hidden")})),c.forEach((function(t){return vitaraJQ(t,d).addClass("hidden")})),g.forEach((function(t){return vitaraJQ(t,d).removeClass("hidden")})))},setEditorView:function(){var t=this.getSelectedColumns(),e=vitaraJQ("#".concat(this.getSelector()));t.length?(this.baseContext.getGridOptions().context.enableDocumentStorage(),e.removeClass("hidden"),vitaraJQ("#".concat(this.getActiveSelector()),e).parent().removeClass("hidden"),this.showHideEditorFields(this.getActiveSelector(),!(t.length>1)),this.setEditorContent(),vitaraJQ(".tox-icon-text-color__color",this.getChartNode()).attr("fill","#000000"),vitaraJQ(".tox-icon-highlight-bg-color__color",this.getChartNode()).attr("fill","#000000"),vitaraJQ("button.tox-tbtn",this.getChartNode()).attr("aria-pressed","false"),vitaraJQ("button.tox-tbtn",this.getChartNode()).removeClass("tox-tbtn--enabled")):e.addClass("hidden")},getStateRepresentation:function(){var t={};return t[this.stateKey]=this.getLabelDefaultMacros(),t},_saveState:function(){this.stateManager.saveSpecificState(this)},_restoreState:function(){var t=this.stateManager.restoreSpecificState(this.stateKey);t&&(this.defaultMentions=t)}})},,,,,,,,,,,,,,,,,,,,,,,(t,e,o)=>{o.r(e);var r=o(320);window.tinymce.Resource.add("tinymce.plugins.emoticons",r.VitaraMarker.getInstance().getMarkersByTab())},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.editor=t,this.id=this.generateID(),this.renderContainer(),this.bindEvents()}return t.prototype.getId=function(){return this.id},t.prototype.bindEvents=function(){this.editor&&(this.editor.on("keydown",this.keydownProxy=this.handleKeydown.bind(this),!0),this.editor.on("keyup",this.keyupProxy=this.handleKeyup.bind(this)),this.editor.on("blur",this.blurProxy=this.clear.bind(this,!0)))},t.prototype.unbindEvents=function(){this.editor&&(this.editor.off("keydown",this.keydownProxy),this.editor.off("keyup",this.keyupProxy),this.editor.off("blur",this.blurProxy))},t.prototype.generateID=function(t){void 0===t&&(t=10);for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=o.length,n=0;n<t;n++)e+=o.charAt(Math.floor(Math.random()*r));return e},t.prototype.calcCurrentPosition=function(t,e){var o=this.editor.editorContainer.getBoundingClientRect(),r=t.getBoundingClientRect(),n=o.y+r.y+20,i=o.x+r.x,a=document.body.clientWidth,l=document.body.clientHeight,s=40*e.length+16>230?230:40*e.length+16;return n+s<l||(n=n-s-20),i+200<a||(i-=200),{top:n,left:i}},t.prototype.show=function(t,e,o){var r=this;if(this.editor&&e&&o){var n=this.calcCurrentPosition(o,t),i=n.top,a=n.left;if(this.dropdown){this.dropdown.setAttribute("style","top: ".concat(i,"px; left: ").concat(a,"px"));var l=document.createElement("ul");l.classList.add("oa-tinymce-mentions-list"),l.setAttribute("size",t.length),t&&t.length?t.forEach((function(t,e){var o=document.createElement("li");o.setAttribute("idx",e),o.setAttribute("id",t.userId),o.setAttribute("xuid",t.xuid),o.setAttribute("name",t.name),o.classList.add("oa-tinymce-mentions-item"),0===e&&o.classList.add("oa-tinymce-mentions-item-active"),o.addEventListener("mousedown",(function(){return r.selectActiveItem(o)})),o.innerText=t.name,l.appendChild(o)})):((u=document.createElement("li")).setAttribute("idx","0"),u.classList.add("oa-tinymce-mentions-item","_disabled"),u.innerText="Not Found",l.appendChild(u)),this.dropdown.innerHTML="",this.dropdown.appendChild(l)}else{var s=document.createElement("div");s.setAttribute("contenteditable","false"),s.setAttribute("style","top: ".concat(i,"px; left: ").concat(a,"px")),s.classList.add("oa-tinymce-mentions-container");var u,d=document.createElement("ul");d.classList.add("oa-tinymce-mentions-list"),d.setAttribute("size",t.length),t&&t.length?t.forEach((function(t,e){var o=document.createElement("li");o.setAttribute("idx",e),o.setAttribute("id",t.userId),o.setAttribute("xuid",t.xuid),o.setAttribute("name",t.name),o.classList.add("oa-tinymce-mentions-item"),0===e&&o.classList.add("oa-tinymce-mentions-item-active"),o.addEventListener("mousedown",(function(){return r.selectActiveItem(o)})),o.innerText=t.name,d.appendChild(o)})):((u=document.createElement("li")).setAttribute("idx","0"),u.classList.add("oa-tinymce-mentions-item","_disabled"),u.innerText="Not Found",d.appendChild(u)),s.appendChild(d),this.dropdown=s,document.body.appendChild(s)}}},t.prototype.clear=function(t){var e=this;void 0===t&&(t=!1),t?Promise.resolve().then((function(){e.unbindEvents(),e.hide()})):(this.unbindEvents(),this.hide())},t.prototype.hide=function(){this.dropdown&&(document.body.removeChild(this.dropdown),this.dropdown=null)},t.prototype.highlightPrevitem=function(){var t,e=this.dropdown.querySelector("ul.oa-tinymce-mentions-list"),o=this.dropdown.querySelector("li.oa-tinymce-mentions-item-active");if(o){o.classList.remove("oa-tinymce-mentions-item-active");var r=Number(o.getAttribute("idx")),n=Number(e.getAttribute("size"));t=e.childNodes[r-1<0?n-1:r-1]}else t=this.dropdown.querySelector("li.oa-tinymce-mentions-item");t&&t.classList.add("oa-tinymce-mentions-item-active")},t.prototype.highlightNextItem=function(){var t,e=this.dropdown.querySelector("ul.oa-tinymce-mentions-list"),o=this.dropdown.querySelector("li.oa-tinymce-mentions-item-active");if(o){o.classList.remove("oa-tinymce-mentions-item-active");var r=Number(o.getAttribute("idx")),n=Number(e.getAttribute("size"));t=e.childNodes[r+1>n-1?0:r+1]}else t=this.dropdown.querySelector("li.oa-tinymce-mentions-item");t&&t.classList.add("oa-tinymce-mentions-item-active")},t.prototype.handleKeydown=function(t){switch(t.key){case"Enter":case"Escape":t.preventDefault();break;case"ArrowUp":t.preventDefault(),this.highlightPrevitem();break;case"ArrowDown":t.preventDefault(),this.highlightNextItem();break;case"ArrowLeft":case"ArrowRight":t.preventDefault()}t.stopPropagation()},t.prototype.handleKeyup=function(t){switch(t.key){case"Shift":case"Control":case"Alt":case"ArrowUp":case"ArrowDown":t.preventDefault();break;case"ArrowLeft":case"ArrowRight":t.preventDefault(),this.handleArrow();break;case"Enter":var e=this.dropdown.querySelector("li.oa-tinymce-mentions-item-active");e?this.selectActiveItem(e):this.clear();break;case"Backspace":if(this.searchKey)this.lookup();else{var o=this.editor.dom.select("span#oa-tiny-search-"+this.id)[0];this.editor.dom.remove(o),this.clear()}break;case"Escape":this.clear();break;default:this.lookup()}},t.prototype.handleArrow=function(){var t=this.editor.dom.select("span#oa-tiny-search-"+this.id)[0];this.editor.dom.remove(t);var e=this.getDomValue(t).replace("\ufeff","");this.editor.execCommand("mceInsertContent",!1,e),this.clear()},t.prototype.getDomValue=function(t){var e=this,o="";return Array.from(t.childNodes).forEach((function(t){"#text"===t.nodeName?o+=t.nodeValue:"SPAN"===t.nodeName&&(o+=e.getDomValue(t))})),o},t.prototype.lookup=function(){var t=this.editor.selection.getRng(),e=t.startContainer.textContent||"",o=t.cloneRange();o.selectNodeContents(this.editor.selection.getSel().anchorNode),o.setEnd(t.endContainer,t.endOffset);var r=o.cloneContents().textContent.length,n=e.slice(0,r),i=n.lastIndexOf("&"),a=n.slice(i+1).replace("\ufeff","");if(this.searchKey=a,/^\s/.test(a)||a.match(/[^\u4e00-\u9fa5\w-]/))this.hide();else{var l=this.editor.getParam("mentionsOption"),s=l.mentionsList,u=l.mentionsFilterOption,d=s.filter((function(t){return u?u(a,t):t.value.includes(a)}));this.show(d,this.editor.selection.getSel(),t)}},t.prototype.selectActiveItem=function(t){var e=this.editor;if(t&&e){var o=t.getAttribute("id"),r=t.getAttribute("name"),n=t.getAttribute("xuid"),i=this.editor.dom.select("span.oa-tiny-search")[0];this.editor.dom.remove(i);var a='<span data-remind="'.concat(o,"-").concat(r,"-").concat(n,'" contenteditable="false" style="color: #2f68b4;outline: none !important;cursor: default !important;">&nbsp;&[').concat(r,"]&nbsp;</span>");e.execCommand("mceInsertContent",!1,a),this.clear()}},t.prototype.renderContainer=function(){var t='<span class="oa-tiny-search" id="oa-tiny-search-'+this.id+'">';t+='<span class="oa-tiny-text">',t+="\ufeff",t+="</span>",this.editor.execCommand("mceInsertContent",!1,t),this.editor.focus()},t}();tinymce.PluginManager.add("mentions",(function(t){var e;t.on("keydown",(function(r){if("&"===r.key||"Process"===r.key&&r.shiftKey&&"Digit2"===r.code){if(e){var n=t.dom.select("span#oa-tiny-search-"+e.getId())[0];if(n){var i=e.getDomValue(n).replace("\ufeff","");t.dom.remove(n),t.execCommand("mceInsertContent",!1,i)}}e=new o(t)}}))}))},(t,e,o)=>{o.r(e),o.d(e,{default:()=>n});var r=o(4);const n=class{constructor(){this.DEFAULT_OPTIONS={}}getOptions(){return this.editorOptions||this.setOptions(),this.editorOptions}setOptions(t){this.editorOptions=vitaraJQ.extend(!0,{},this.DEFAULT_OPTIONS,t)}getFieldID(){return this.getOptions().fieldId}getPropertyKey(){return this.getOptions().propertyKey}getColumnDefinitions(){return this.getOptions().colDefinitions}getGenericMacros(){return this.getOptions().genericMacros}getAttributeForms(t){return this.getOptions().getAttributeForms(t)}getGenericMentions(){return this.getOptions().genericLabelMentions}getChartSpecificMentions(){return this.getOptions().chartSpecificMentions}getLabelMentions(t){this.setOptions(t);var e=[],o=[],n=0;let i=["plLabel","variationLabel","stackTotalLabel","smChartTitle","customCategoryLabel"],a=(t,o,n,i,a)=>{if((-1!==n.indexOf(t)||-1===n.indexOf(t)&&i.isMetric)&&(e.push({key:i.colId.toString(),value:i.headerName}),!i.isMetric)){var l=this.getAttributeForms(i.headerName);r.each(l,(function(t,r){r&&(e.push({key:(a+o).toString(),value:i.headerName+"@"+r}),o++)}))}};if(this.getGenericMacros()){if(-1===i.indexOf(this.getPropertyKey())){let t=this.getFieldID(),e=this.getColumnDefinitions(),o=0,r=["gridCustomFormatEditor","customTooltipEditor","ibcsTitleEditor","chartTitleEditor","customLabelEditor","customCategoryLabelEditor"],i=e.length;for(let n=0;n<e.length;n++)if(e[n].children){i=0===n?this.getColumnDefinitions().reduce((t,e)=>{var o;return t+(null===(o=e.children)||void 0===o?void 0:o.length)},0):i;let l=e[n].children;for(let e=0;e<l.length;e++)a(t,o,r,l[e],i)}else a(t,o,r,e[n],i);n=i+o}r.each(this.getGenericMentions(),(function(t){o.push({key:(n++).toString(),value:t})}))}return r.each(this.getChartSpecificMentions(),(function(t){o.push({key:(n++).toString(),value:t})})),{defaults:o,macros:e.concat(o)}}}},(t,e,o)=>{o.r(e),o.d(e,{CustomFormattingEditorModel:()=>r});var r=function(t){this.baseContext=t,this.options=null,this.stateKey="customFormatModel",this.customFormat=null,this.multiSelectText="&amp;[value]",this.stateManager=t.getStateManager(),this.internalColIds=["Values","Group",this.getGridOptions().localeTextFunc("Group","Group"),"Metrics","Total",this.getGridOptions().localeTextFunc("Total","Total")],this._restoreState()};vitaraJQ.extend(r.prototype,{getGridOptions:function(){return this.baseContext.gridOptions},getSelectedColumns:function(){return this.baseContext.getColumnSelectionModel().getSelectedColumns()},setCustomFormat:function(t){this.customFormat=t},getCustomFormat:function(){return this.customFormat||{}},getColumnCustomFormat:function(t,e,o){var r=this.getCustomFormat()[t],n="";return r&&r[e]&&(r[e].content&&(n=r[e].content),r[e].style&&(n=(n=(n=n.split("<p>").join("")).split("</p>").join(""))||o,n=r[e].style.replace(this.multiSelectText,n))),n||o},getCellCustomFormat:function(t,e){return this.getColumnCustomFormat(t,"gridBody",this.getDefaultColFormat(e))},getHeaderCustomFormat:function(t,e){return this.getColumnCustomFormat(t,"gridHeader",e||"".concat(t))},updateInternalColIds:function(t,e){if(t!==e){var o=this.internalColIds.indexOf(e);o>-1&&this.internalColIds.splice(o,1),this.internalColIds.push(t)}},isAggregationEnabled:function(t){var e=this.baseContext.getColumnStateMaster().columnAggregationModel;return this.baseContext.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal().length>0&&this.baseContext.isMetric(t)&&e.getAggregation(t)},getDefaultColFormat:function(t){return-1!==this.internalColIds.indexOf(t)||-1!==t.indexOf("Metrics")&&-1!==t.indexOf("pivot")||this.isAggregationEnabled(t)?"&amp;[point.value]":"&amp;[".concat(t,"]")},setFormat:function(t,e){if(e){var o=this.getSelectedColumns(),r=this.getGridOptions(),n=this.getCustomFormat();if(o.forEach((function(r){n[r.field]||(n[r.field]={}),n[r.field][e]||(n[r.field][e]={}),o.length>1?n[r.field][e].style=t:(n[r.field][e].style="",n[r.field][e].content=t)})),this.setCustomFormat(n),o.length>=1&&"gridBody"===e);else if(o.length>=1&&"header"===e){var i=r.columnDefs;i.forEach((function(t){if(n[t.colId]&&n[t.colId][e]){var o=n[t.colId][e],r=o.content?o.content:"";r&&(t.headerName=r),r.onlyStyle&&(t.headerName=o.onlyStyle.replace("Your content here",t.headerName))}})),r.api.setColumnDefs(i),r.columnDefs=i}this._saveState(),"gridBody"===e?r.api.redrawRows():"gridHeader"===e&&r.headerComponentParams.gridContext.getHeaderFormattingView().refreshHeader()}},getCustomFormatForColumn:function(t){var e="",o=this.getSelectedColumns(),r="gridHeader"===t?"displayName":"header";return o.forEach((function(t,o){o>0&&(e+=", "),e+=t[r]})),o.length?o.length>1?this.multiSelectText:"gridHeader"===t?this.getHeaderCustomFormat(o[0].field,"".concat(e)):this.getCellCustomFormat(o[0].field,e):""},getStateRepresentation:function(){var t={};return t[this.stateKey]=this.customFormat,t},_saveState:function(){this.stateManager.saveSpecificState(this)},_restoreState:function(){var t=this.stateManager.restoreSpecificState(this.stateKey);t&&(this.customFormat=t)}})},(t,e,o)=>{o.r(e),o.d(e,{ColumnSelectionModel:()=>i});var r=o(45),n=o(4),i=function(t){this.baseContext=t,this.selectedColumns=[],this.removeGridClickListener()};vitaraJQ.extend(i.prototype,{getGridOptions:function(){return this.baseContext.gridOptions},getChartNode:function(){return this.getGridOptions().chartNode},getSelectedColumns:function(){return this.selectedColumns},getSelectedColumnsAsArray:function(){var t=[];return n.each(this.selectedColumns,(function(e){t.push(e.field)})),n.uniq(t)},setSelectedColumns:function(t){this.selectedColumns=t,this.baseContext.eventDispatcher.createAndDispatchEvent("columnSelectionChanged","gridContext")},removeGridClickListener:function(){vitaraJQ(this.getChartNode()).off("click",".vitara-grid"),this.getGridOptions().api.removeEventListener("columnRowGroupChanged",this.gridClickListener),this.getGridOptions().api.removeEventListener("columnPivotChanged",this.gridClickListener)},setGridClickListener:function(){this.gridClickListener||(this.gridClickListener=function(t){r.utils.isMultiEleSelect(t)||this.resetColumnSelection()}.bind(this)),vitaraJQ(this.getChartNode()).off("click",".vitara-grid").on("click",".vitara-grid",this.gridClickListener),this.getGridOptions().api.addEventListener("columnRowGroupChanged",this.gridClickListener),this.getGridOptions().api.addEventListener("columnPivotChanged",this.gridClickListener)},resetColumnSelection:function(){vitaraJQ(".ag-header-cell",this.getChartNode()).each((function(t,e){vitaraJQ(e).removeClass("selected-col")})),this.setSelectedColumns([]),this.removeGridClickListener()},setHeaderSelection:function(t,e){var o=this.getSelectedColumns();n.each(o,(function(o){if(o.field===t)return vitaraJQ(e).addClass("selected-col"),!1}))},setSelection:function(t,e,o){var r=e.colId,i=this.getSelectedColumns(),a=this.getGridOptions().context,l="ag-Grid-AutoColumn"===r;if(l&&(r=e.colDef.headerName,this.getGridOptions().localeTextFunc("Group","Group")===r&&(r="Group")),o&&a.platformContext.getResultPropMenuChecks()){if(this.setGridClickListener(),t.hasClass("selected-col"))t.removeClass("selected-col"),i=i.filter((function(t){return t.field!=r}));else{t.addClass("selected-col");var s=r;if(n.startsWith(n.toLower(r),"pivot")){var u=this.baseContext.getColumnStateMaster().columnPivotModel.getPivotColumnsInternal().indexOf("Metrics");s=u>-1&&e.colDef.pivotKeys&&e.colDef.pivotKeys[u]||e.colDef.headerName}var d=e.colDef.headerName;if(l){var c=e.gridOptionsService.columnApi.getRowGroupColumns();d=1===c.length?c[0].colDef.headerName:d}i.push({field:r,displayName:d,header:s})}this.setSelectedColumns(i)}else{if(!i.length)return!0;this.resetColumnSelection()}return!1}})},(t,e,o)=>{o.r(e),o.d(e,{CustomHeaderGroup:()=>a});var r=o(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(i)?i:String(i)),r)}var i}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,o;return e=t,(o=[{key:"init",value:function(t){this.params=t,this.gridContext=t.api.gridOptionsService.gridOptions.headerComponentParams.gridContext,this.eGui=document.createElement("div"),this.eGui.className="ag-header-group-cell-label";var e="";if(t.columnGroup.isExpandable()&&(e+='<span class="customExpandButton" style="cursor: pointer;"><span class="ag-icon ag-icon-contracted"></span></span>'),this.eGui.innerHTML='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation"><span ref="agLabel" class="ag-header-group-text" role="columnheader">'.concat(this.params.displayName,"</span>").concat(e,"</div>"),0!=+t.columnGroup.groupId){var o=this.params.columnGroup.gridOptionsService.gridOptions.headerComponentParams.gridContext.getColumnGrouping().getColumnGroupingModel();r.findIndex(o,(function(e){return e.headerName===t.displayName}))>-1&&(this.eGui.innerHTML+='<span class="customDeleteButton" style="cursor: pointer;"><span class="ag-icon ag-icon-cancel"></span></span>',this.onDeleteButtonClickedListener=this.deleteButton.bind(this),this.eDeleteButton=this.eGui.querySelector(".customDeleteButton"),this.eDeleteButton.addEventListener("click",this.onDeleteButtonClickedListener))}t.columnGroup.isExpandable()&&(this.onExpandButtonClickedListener=this.expandOrCollapse.bind(this),this.eExpandButton=this.eGui.querySelector(".customExpandButton"),this.eExpandButton.addEventListener("click",this.onExpandButtonClickedListener),this.onExpandChangedListener=this.syncExpandButtons.bind(this),this.params.columnGroup&&this.params.columnGroup.getProvidedColumnGroup().addEventListener("expandedChanged",this.onExpandChangedListener),this.syncExpandButtons())}},{key:"expandOrCollapse",value:function(){var t=this.params.columnGroup.isExpanded&&this.params.columnGroup.isExpanded();this.params.setExpanded(!t)}},{key:"syncExpandButtons",value:function(){var t,e;this.params.columnGroup.isExpanded&&this.params.columnGroup.isExpanded()?(e=this.eExpandButton).children[0].className=e.children[0].className.split(" ")[0]+" ag-icon-expanded":(t=this.eExpandButton).children[0].className=t.children[0].className.split(" ")[0]+" ag-icon-contracted"}},{key:"getGui",value:function(){return this.eGui}},{key:"deleteButton",value:function(){if(null!=this.params.columnGroup.groupId){var t=this.params.columnGroup.gridOptionsService.gridOptions.headerComponentParams.gridContext.getColumnGrouping(),e=[];t.getColumnGroupingModel().forEach((function(t,o){e.push({name:t.headerName,group:o,columns:t.columns})}));for(var o=e,r=void 0,n=0;n<o.length;n++)if(o[n].name===this.params.displayName){r=n;break}if(void 0!==r){this.gridContext.getGridOptions().context.enableDocumentStorage(),o.splice(r,1);var i=function(t){var e=[];return t&&Array.isArray(t)&&t.forEach((function(t){e.push({columns:t.columns,openColumn:t.columns[0],headerName:t.name})})),e}(o);t.setColumnGroupingModel(i)}}else console.warn("id not found")}},{key:"destroy",value:function(){var t,e;null===(t=this.eExpandButton)||void 0===t||t.removeEventListener("click",this.onExpandButtonClickedListener),null===(e=this.eDeleteButton)||void 0===e||e.removeEventListener("click",this.onDeleteButtonClickedListener)}}])&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},(t,e,o)=>{function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=i(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return l=t.done,t},e:function(t){s=!0,a=t},f:function(){try{l||null==o.return||o.return()}finally{if(s)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}o.r(e),o.d(e,{VitaraGridChartMetricGroupingModel:()=>l});var l=function(t){var e=this;e.gridContext=t,e.stateManager=t.getStateManager(),e.metricGroupingModel={heading:"mGroups",groups:[]},e.metricRowGroups=[],e.stateKey="metricGroupingModel",this.getDefaultColId=function(){return"mGroups"},this.isMetricGroupsPresent=function(){return this.getMetricGroups().length>0},this.getMetricGroups=function(){return this.metricGroupingModel?this.metricGroupingModel.groups:[]},this.setMetricGroupsColHeading=function(t){this.metricGroupingModel.heading=t},this.getGroupColHeading=function(){return this.metricGroupingModel.heading},this.getModel=function(){return this.metricGroupingModel},this.getAllMetricRowGroups=function(){var t,e,o,r=this.gridContext.gridOptions.chartDataMapper,a=r.getTitles().slice(r.getNumAttributes(),r.getNumColumns()),l=this.getMetricGroups(),s=[],u=[],d=n(a);try{for(d.s();!(t=d.n()).done;){var c,h=t.value,g=!1,p=-1,m=void 0,f=n(l.entries());try{for(f.s();!(c=f.n()).done;){var v=(e=c.value,o=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,n,i,a,l=[],s=!0,u=!1;try{if(i=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;s=!1}else for(;!(s=(r=i.call(o)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){u=!0,n=t}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,o)||i(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=v[0],T=v[1];if(T.columns.indexOf(h)>-1){g=!0,p=C,m=T.name;break}}}catch(t){f.e(t)}finally{f.f()}g?(void 0===s[p]&&(s[p]={}),s[p].name=m,void 0===s[p].columns&&(s[p].columns=[]),s[p].columns.push(h)):u.push(h)}}catch(t){d.e(t)}finally{d.f()}return u.length>0&&s.push({name:"Ungrouped",columns:u}),s.filter((function(t){return void 0!==t}))},this.setMetricGroup=function(t){this.metricGroupingModel.groups=t.groups,t.heading&&(this.gridContext.getCustomFormatEditorModel().updateInternalColIds(t.heading,this.getGroupColHeading()),this.setMetricGroupsColHeading(t.heading)),this._saveState()},this.convertToColumnGrouping=function(){var t=this.getMetricGroups();if(0!==t.length){var e,o=this.gridContext.getColumnGrouping().getColumnGroupingModel(),i=n(t);try{for(i.s();!(e=i.n()).done;){var a,l=e.value,s=!1,u=n(o);try{for(u.s();!(a=u.n()).done;){var d=a.value;if(l.name===d.headerName){s=!0,d.columns=r(new Set([].concat(r(l.columns),r(d.columns))));break}}}catch(t){u.e(t)}finally{u.f()}s||o.push({columns:l.columns,openColumn:l.columns[0],headerName:l.name})}}catch(t){i.e(t)}finally{i.f()}this.resetModel(),this.gridContext.getColumnGrouping().setColumnGroupingModel(o)}},this.ungroupMetrics=function(){this.resetModel(),this.gridContext.getMetricToRowsModel().setMetricToRows(),t.getColumnResizedModel().checkAndApplyResizing()},this.resetModel=function(){this.metricGroupingModel.groups=[],this._saveState()},this.getStateRepresentation=function(){var t={};return t[this.stateKey]=this.metricGroupingModel,t},this._saveState=function(){this.stateManager.saveSpecificState(e)},this._restoreState=function(){var t=this.stateManager.restoreSpecificState(this.stateKey);void 0===t&&(t={heading:"mGroups",groups:[]}),this.metricGroupingModel=t,this.gridContext.getCustomFormatEditorModel().updateInternalColIds(this.metricGroupingModel.heading,"")},e._restoreState()}},(t,e,o)=>{o.r(e),o.d(e,{VitaraGridChartMetricGroupingView:()=>a});var r=o(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(i)?i:String(i)),r)}var i}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gridContext=e,this.gridOptions=this.gridContext.gridOptions}var e,o;return e=t,(o=[{key:"showView",value:function(){var t=this;this.mgModel=this.gridContext.getMetricGroupingModel(),this.dataModel=[],this.groupHeader=this.mgModel.getGroupColHeading(),this.mgModel.getMetricGroups().forEach((function(e,o){t.dataModel.push({name:e.name,columns:e.columns,group:o})}));var e=function(t){var e=[];return t&&Array.isArray(t)&&t.forEach((function(t){e.push({name:t.name,columns:t.columns})})),e},o=this.gridContext.getTitles().splice(this.gridContext.gridOptions.chartDataMapper.numAttributes),n={changeCallBack:function(){var o=this.getColumnDefinition(),r=this.getMetricRowGroupHeader(),n=e(o);t.mgModel.setMetricGroup({heading:r,groups:n}),this.gridContext.getMetricToRowsModel().setMetricToRows(),this.gridContext.getColumnResizedModel().checkAndApplyResizing(),this.dataModel=n,this.groupHeader=r},deleteCallBack:function(o){if(null!=o){var n=this.getColumnDefinition(),i=r.findIndex(n,(function(t){return t.group===o}));n.splice(i,1);var a=e(n);t.mgModel.setMetricGroup({groups:a}),this.gridContext.getMetricToRowsModel().setMetricToRows(),this.gridContext.getColumnResizedModel().checkAndApplyResizing(),this.dataModel=a}else console.warn("id not found")},moveUpCallback:function(t){},moveDownCallback:function(t){},dataModel:t.dataModel,titles:o,gridContext:this.gridContext,headerInput:!0,viewSuffix:"Metric",groupHeader:t.groupHeader};this.gridContext.getDragDropManager(n).showPopup()}}])&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()}])]);mstrmojo.plugins.VitaraCharts.v530159[39] = mstrmojo.plugins.VitaraCharts.v530159[39] || {};
