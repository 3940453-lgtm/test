mstrmojo.requiresCls("mstrmojo.plugins.VitaraCharts.v530159.VitaraSimpleKPIChartInitializer"),(()=>{var t,i={5187:()=>{function t(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,o,a,l=[],s=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;s=!1}else for(;!(s=(n=o.call(i)).done)&&(l.push(n.value),l.length!==e);s=!0);}catch(t){h=!0,r=t}finally{try{if(!s&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(h)throw r}}return l}}(t,i)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var e,n={587:function(t,e,i){i.r(e),i.d(e,{setAttributeBasedBackgroundImage:function(){return o}});var n=i(283),r=i(45),o={isbgImageURLContainsMacros:function(t){return!(!t||t&&-1===t.indexOf("&["))},setBackgroundImageforAllNodes:function(t,e,i){if(1==e.enableBgImage&&null!=e.bgImagePath&&""!==e.bgImagePath&&isNaN(e.bgImagePath)){var o=vitaraJQ(t.parentNode);if(-1!==e.bgImagePath.indexOf("&[")){var a=t.id.replace("trellisElement",""),l=i.getTrellisData()[a].title.toLowerCase();l=this.RemoveSpecialCharactersFromString(l);var s="&["+i.getTrellisAttributes()[0]+"]";o=vitaraJQ(t),e.bgImagePath=n.labelProvider.prototype.replacePatternWithValue(e.bgImagePath,s,l)}vitaraJQ(".vitara_background_image",o).remove();var h=function(t,e){return"custom"===t?void 0===e||""===e||isNaN(e)?void 0:e+"px":t};o.append('<div class="vitara_background_image"></div>'),o.css("position","relative"),vitaraJQ(t).css("position","relative"),vitaraJQ(t).css("z-index","1");var u,c=vitaraJQ(".vitara_background_image",o);c.css("background-repeat","no-repeat"),c.css("width","100%"),c.css("height","100%"),c.css("z-index","-1"),c.css("position","absolute"),c.css("top","0px"),c.css("pointer-events","none");var p=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);u=e.bgImagePath.match(p)?e.bgImagePath:e.basePath+e.bgImagePath;var d=h(e.bgHAlign,e.bgHAlignValue)||"left",g=h(e.bgVAlign,e.bgVAlignValue)||"top",f=void 0===e.bgOpacity||isNaN(e.bgOpacity)?1:e.bgOpacity/100,m="auto";"fit"===e.bgScale?m="contain":"fill"===e.bgScale?m="cover":"custom"===e.bgScale&&void 0!==e.bgScaleValue&&""!==e.bgScaleValue&&(m=i.utils.isPercent(e.bgScaleValue)?e.bgScaleValue:e.bgScaleValue+"%"),c.css("background-image",'url("'+r.utils.sanitizeURL(u)+'")'),c.css("background-position-x",d),c.css("background-position-y",g),c.css("opacity",f),c.css("background-size",m)}},RemoveSpecialCharactersFromString:function(t){return t.replace(/[<>:\/|?*"+,]/g,"")}}},584:function(t,e,n){n.r(e),n.d(e,{VitaraSimpleKPIChartMixin:function(){return y}}),n(1);var r=n(585),o=n(398),a=n(586),l=n(468),s=n(587),h=n(4);function u(t){return(u="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=p(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,i){return(e=v(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(u,t);var e,i,n,o,l=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(n);if(o){var i=m(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return g(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),b(f(e=l.call(this,t)),"scriptClass","mstrmojo.plugins.VitaraCharts.v530159.VitaraSimpleKPIChart"),b(f(e),"cssClass","VitaraSimpleKPIChart"),b(f(e),"NAME","Vitara Simple KPI Chart"),b(f(e),"SMALL_MULTIPLE_OPTIONS",{legend:{enabled:!1}}),b(f(e),"FEATURES",[]),e.logEnvironmentInfo(),e}return e=u,(i=[{key:"validateMinCriteria",value:function(t,e){return{valid:e>0,message:"Include at least 1 metric to see the chart."}}},{key:"getExtPropsJSONParser",value:function(){return function(t){return t}}},{key:"getEditorName",value:function(){return"SimpleKPI"}},{key:"sharedCatAxisSupport",value:function(){return!1}},{key:"getMetricLabel",value:function(){return void 0===this.vizProps.label_simpleKPI?this.dataHelper.getTitle(this.dataHelper.getNumAttributes()):this.vizProps.label_simpleKPI}},{key:"isSeriesByMetric",value:function(){return!0}},{key:"getThresholdMapper",value:function(){return this.thresholdMapper||(this.thresholdMapper=new a.SimpleKPIThresholdMapper({context:this})),this.thresholdMapper}},{key:"getSeriesElements",value:function(){var t=[{name:"Main Label"},{name:"Sub Label"},{name:"Background"}];return this.isTrellisMode()&&t.push({name:"Title"}),t}},{key:"getThresholdFieldsToHide",value:function(t){return"Background"===t.target?["thresholdcolor","thresholdEnableMarker","thresholdMarkerType","thresholdMarkerSize","thresholdMarkerColor","thresholdMarkerHAlign"]:"Title"===t.target?["thresholdPanelColor","thresholdEnableMarker","thresholdMarkerType","thresholdMarkerSize","thresholdMarkerColor","thresholdMarkerHAlign"]:["thresholdPanelColor","thresholdMarkerType","thresholdMarkerSize","thresholdMarkerColor","thresholdMarkerHAlign"]}},{key:"getThresholdDefaultFields",value:function(t){return[{id:"thresholdEnableMarker",value:!1,isBoolean:!0}]}},{key:"getIncludeThresholdLevel",value:function(t){return!!this.isTrellisMode()||c(m(u.prototype),"getIncludeThresholdLevel",this).call(this)}},{key:"getPropMenuCustomEventHandler",value:function(){return this.propMenuCustomHandler||(this.propMenuCustomHandler=new SimpleKPICustomHandler),this.propMenuCustomHandler}},{key:"getPropMenuDefaults",value:function(){return h.extend(c(m(u.prototype),"getChartDimensions",this).call(this),{chartDimensions:this.getChartDimensions()})}},{key:"scaleFontSizeToViewport",value:function(t){var e=this.getChartDimensions(),i=this.vizProps.chartDimensions;return t&&0!=+t&&i&&e?Math.floor(t*e.width/i.width):t}},{key:"postTrellisRendering",value:function(){var t=vitaraJQ.extend({basePath:this.getBackgroundImagePath()},this.vizProps).bgImagePath;this.isTrellisMode()&&s.setAttributeBasedBackgroundImage.isbgImageURLContainsMacros(t)?this.setBackgroundImageForAllNodes():this.utils.setBackgroundImage(this.chartNode,vitaraJQ.extend({basePath:this.getBackgroundImagePath()},this.vizProps)),c(m(u.prototype),"postTrellisRendering",this).call(this)}},{key:"setBackgroundImageForAllNodes",value:function(){var t=this,e=this.getRenderedChartInstance();vitaraJQ(".vitara_background_image",t.domNode).remove(),e.forEach((function(e){s.setAttributeBasedBackgroundImage.setBackgroundImageforAllNodes(e.domNode,vitaraJQ.extend({basePath:t.getBackgroundImagePath()},t.vizProps),t)}))}},{key:"getDefaultTooltipFormat",value:function(){return"&[Metric Names]: &[Metric Values]"}},{key:"getGenericLabelMentions",value:function(){var t=this.getCategoryMacrosForDataLabel().concat(["point.value","point.metricName"]);return["Attribute Values","Metric Values","Metric Names"].concat(t)}},{key:"getUnitRenderer",value:function(){return r.renderSimpleKPI}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),u}(VitaraMix(o.default).with(l.default));window.VitaraSimpleKPIChartMixin=y},585:function(t,e,i){i.r(e),i.d(e,{renderSimpleKPI:function(){return p}});var n=i(45),r=i(436),o=i(234),a=i(320),l=i(283),s=i(435),h=i(505),u=i(582),c=i(4),p=function(t,e,i,n,o,a){r.hcCore.call(this,t,e,i,o),this.setDataRows(a)};vitaraJQ.extend(p.prototype,r.hcCore.prototype,l.labelProvider.prototype,s.renderGenericSeriesChart.prototype,u.tooltipProvider.prototype,{DEFAULT_FONT_SIZE:13,setRenderedHCChart:function(t){this.renderedHCChart=t},getRenderedHCChart:function(){return this.renderedHCChart},setVizProps:function(t){this.vizProps=t},getRenderOptions:function(){return this.renderOptions},setRenderOptions:function(t){this.renderOptions=t},scaleFontSize:function(t){return"function"==typeof this.context.scaleFontSizeToViewport?this.context.scaleFontSizeToViewport(t):t},getBackgroundFill:function(t,e){var i,n="transparent";for(i=0;i<7;i++)null!=t.vizProps["colorStopFillColor"+i]&&""!=t.vizProps["colorStopFillColor"+i]&&e>=Number(t.vizProps["colorStopStart"+i])&&e<=Number(t.vizProps["colorStopEnd"+i])&&(n=t.vizProps["colorStopFillColor"+i]);return n},getFontStyle:function(t){switch(t){case"":case void 0:return"normal";case"1":case 1:return"italic";default:return"normal"}},getFontWeight:function(t){switch(t){case"":case void 0:return"normal";case"1":case 1:return"bold";default:return"normal"}},getFontUnderline:function(t){switch(t){case"":case void 0:return"none";case"1":case 1:return"underline";default:return"normal"}},isSmallMultiplesEnabled:function(){if(this.context&&this.context.isTrellisMode)return this.context.isTrellisMode();if(isMSTRDashBoard()||isMSTRDesktop()){if(this.context.getChartDataMapper().numAttributes>0)return!0}else if(1==+this.vizProps.enableTrellis)return!0;return!1},getChartTitle:function(t){return this.isSmallMultiplesEnabled()?t.title?t.title.text:"":t.label_simpleKPI},getTitleProperties:function(){return{fontWeight:this.vizProps.labelItemStyleBold,fontColor:this.vizProps.labelItemStyleColor,fontFamily:this.vizProps.labelItemStyleFontName?"'".concat(this.vizProps.labelItemStyleFontName,"'"):"",fontSize:this.scaleFontSize(this.vizProps.simpleKPITextFontSize),fontStyle:this.vizProps.labelItemStyleItalic,fontUnderline:this.vizProps.labelItemStyleUnderline,align:this.vizProps.label_h_align_sKPI}},getLabelHeight:function(t,e,i,r){var o=n.utils.getTextDimensions(t,e+"px",i,this.domNode).height;return e?o:o*r},getLabelWidth:function(t,e,i,r){var o=n.utils.getTextDimensions(t,e?e+"px":e,i,this.domNode).width;return e?o:o*r},getResizedText:function(t,e,i){if(0===t.length)return t;var n=Math.floor(i*t.length/e-2);return n<1&&(n=1),t.substring(0,n)+(1===n?"":"..")},getLabelFontSize:function(t){return"number"==typeof+t&&0!=+t&&+t},createTextLabel:function(t,e,i,n,r,o){var a=this.getContainerDimensions(),l=this.getTextLabelFontProps(),s=this.getMainLabelFontProps(),h=this.getLabelContainer(),u=this.getLabelFontSize(s.fontSize),c=this.getSubLabelFontProps(),p=(this.getLabelFontSize(c.fontSize),""),d=this.getLabelFontSize(l.fontSize);d||(d=e&&u?Math.floor(u*n):Math.floor(this.DEFAULT_FONT_SIZE*n));var g=this.getFontPadding(d)||this.getLabelPadding();p+="font-size:"+d+"px;",h.append('<span class="labelSpan '+vitaraJQ(this.domNode).attr("id")+'-labelText" style="'+p+'"></span>');var f=this.getLabelWidth(t,d,l.fontFamily,n);a.width-2*g<f&&(t=this.getResizedText(t,f,a.width-2*g));var m=vitaraJQ(".labelSpan",this.domNode);p+="display:block;color:"+l.fontColor+";padding:"+g+"px;font-family:"+l.fontFamily+";font-style:"+l.fontStyle+";text-decoration:"+l.fontUnderline+";font-weight:"+l.fontWeight+";text-anchor:"+l.textAnchor+";alignment-baseline:middle;line-height:1;",m.text(t).attr("style",p),this.createTooltipLabel(m)},createMainLabel:function(t,e,i,n,r){var o,a=this,l=this.getMainLabelFontProps(),s=this.getMetricContainer(),h=this.getLabelFontSize(l.fontSize),u=this.getLabelFontSize(l.markerSize),c=function(t){var e="";"vitaraCustomSVGFile"===l.markerType?(u=a.getCustomSVGMarkerHeight(a.getMainLabelContainer()),a.appendCustomSvgMarker(void 0,void 0,u,u,{svgOptions:l.svgOptions},o,t)):(t?o.insert("span",":first-child"):o.append("span"),e="font-size:"+u+"px;font-family:fontello;"),o.select("span").attr("class","MLMarker fa-"+l.markerType+" "+vitaraJQ(a.domNode).attr("id")+"-mainTextMarker").attr("style",e+"color:"+l.markerColor+";text-anchor:"+l.textAnchor+";alignment-baseline:middle;display:inline-block;vertical-align:middle;width:fit-content;cursor:pointer;")};h||(h=Math.floor(this.DEFAULT_FONT_SIZE*e)),u=h;var p=this.getFontPadding(h)||this.getLabelPadding();o=s.append("div").attr("class","KPIMainLabel").attr("style","width:fit-content;white-space:nowrap;padding:"+p+"px;"),a.createTooltipLabel(vitaraJQ(o[0])),o.append("div").attr("class",vitaraJQ(this.domNode).attr("id")+"-mainText").text(t).attr("style","color:"+l.fontColor+";width:fit-content;font-size:"+h+"px;alignment-baseline:middle;display:inline-block;vertical-align:middle;font-family:"+l.fontFamily+";font-style:"+l.fontStyle+";text-decoration:"+l.fontUnderline+";font-weight:"+l.fontWeight+";text-anchor:"+l.textAnchor+";"),l.markerType&&"left"===l.markerHAlign&&c(!0),l.markerType&&"right"===l.markerHAlign&&c()},createSubLabel:function(t,e,i,n,r){var o=this,a=this.getChartDataMapper(),l=this.context.getZoneData(a),s=vitaraJQ(this.domNode).attr("id"),h=this.getMainLabelFontProps(),u=this.getSubLabelFontProps(),c=this.getLabelFontSize(u.fontSize),p=this.getMetricContainer(),d=this.getLabelFontSize(u.markerSize),g=this.getLabelFontSize(h.fontSize);l&&l.sublabel[0].name,c||(c=e&&g?g*i:d&&this.DEFAULT_FONT_SIZE*i<d?d:Math.floor(this.DEFAULT_FONT_SIZE*i)),d=c;var f=this.getFontPadding(c)||this.getLabelPadding(),m=p.append("div").attr("class","KPISubLabel").attr("style","width:fit-content;white-space:nowrap;padding:"+f+"px;");o.createTooltipLabel(vitaraJQ(m[0]));var b=function(t){var e="";"vitaraCustomSVGFile"===u.markerType?(d=o.getCustomSVGMarkerHeight(o.getSubLabelContainer()),o.appendCustomSvgMarker(void 0,void 0,d,d,{svgOptions:u.svgOptions},m,t)):(t?m.insert("span",":first-child"):m.append("span"),e="font-size:"+d+"px;font-family:fontello;"),m.select("span").attr("class","SLMarker fa-"+u.markerType+" "+vitaraJQ(o.domNode).attr("id")+"-mainTextMarker").attr("style",e+"color:"+u.markerColor+";text-anchor:"+u.textAnchor+";alignment-baseline:middle;vertical-align:middle;display:inline-block;width:fit-content;cursor:pointer;")};m.append("div").text(t).attr("class",s+"-subText").attr("style","color:"+u.fontColor+";alignment-baseline:middle;display:inline-block;vertical-align:middle;font-size:"+c+"px;font-family:"+u.fontFamily+";font-style:"+u.fontStyle+";text-decoration:"+u.fontUnderline+";font-weight:"+u.fontWeight+";text-anchor:"+u.textAnchor+";"),u.markerType&&"left"===u.markerHAlign&&b(!0),u.markerType&&"left"!==u.markerHAlign&&b()},getToolTipElement:function(){return vitaraD3.select(this.domNode).append("div").attr("class","ch-tooltip").attr("style","display:none")},getTooltipPosition:function(t,e){var i=n.utils.getElementDimensions(t.currentTarget),r={offsetX:i.left-this.domDimens.left+t.offsetX,offsetY:i.top-this.domDimens.top+t.offsetY};return this.domDimens.height-r.offsetY<100&&(r.offsetY-=100),n.utils.getTooltipPosition(r,this.domDimens,this.context.domNode,e[0],this.domNode)},isTooltipEnabled:function(t){return this.getTooltipOptions().enable},createTooltipLabel:function(t){var e={selection:t,isTooltipEnabled:this.isTooltipEnabled.bind(this),getTooltipText:this.getTooltipText.bind(this),getTooltipPosition:this.getTooltipPosition.bind(this)};this.renderTooltip(e)},addTooltipOnTrellisChart:function(t,e,i,r,o){var a=-1!==["SimpleKPITextGroup","trellisElement"].indexOf(t.parentNode.classList[0])?t.parentNode.offsetLeft:t.parentNode.parentNode.offsetLeft;i[0][0].style.left=a+o[0]+"px",i[0][0].style.top=r+"px",n.utils.isHTMLStringContainsLink(e)||i.style("pointer-events","none")},getMetricTitles:function(){if(this.dataHelper=this.data,this.dataHelper){var t=this.dataHelper.getTitles(),e=this.dataHelper.getNumAttributes();return t.slice(e,t.length)}return[]},getVizProps:function(){return this.vizProps},getTooltipText:function(t){var e,i,n,r,o=this,a=t.currentTarget,l="",s=this.chartDataMapper.getTitles(),h=this.getMetricTitles(),u=this.chartDataMapper.dataRows[0];vitaraJQ.each(o.chartDataMapper.dataRows[0],(function(t,h){var u,c;if(s[t]===a.textContent||h.fv===a.textContent)return e=s[t],i=h.fv,r=h.v,n=t+1,!1;null!=o&&null!==(u=o.context)&&void 0!==u&&null!==(c=u.isTrellisMode)&&void 0!==c&&c.call(u)&&h.t===a.textContent&&(l=null==h?void 0:h.t)}));var c={fv:i,mName:e,sName:e,xName:[l],y:r,rawVal:r,category:void 0,x:n};return o.getTooltipLabelHtml(c,h,u,c)},computeLabelDimens:function(t,e,i){var n,r={padding:0};e&&(r.padding=this.getFontPadding(e)+"px");var o=this.getLabelDimens(t,e,i.fontFamily,r);if(i.markerEnable)if("vitaraCustomSVGFile"===i.markerType)n={width:o.height,height:o.height};else{var l=e||this.DEFAULT_FONT_SIZE+5;r.padding=this.getFontPadding(l)+"px",n=this.getLabelDimens(a.VitaraMarker.getInstance().getMarkerIcon(i.markerType),l,"fontello",r)}return[o,n]},computeLabelScale:function(t,e,i){if(e.markerEnable){var n=this.getLabelDimens(a.VitaraMarker.getInstance().getMarkerIcon(e.markerType),e.markerSize||this.DEFAULT_FONT_SIZE+5,"fontello");return this.getAutoScaleFactor(lDimens,i,n,e.markerSize)}return this.getAutoScaleFactor(lDimens,i)},getHeightPercentage:function(t){return t?t.length?Math.max(t[0]?t[0].height:0,t[1]?t[1].height:0)/this.getContainerDimensions().height:dimen.height/this.getContainerDimensions().height:0},computeLabelHeight:function(t){var e=0;return t&&(e=t.length?Math.max(t[0]?t[0].height:0,t[1]?t[1].height:0):t.height),e},getLabelPercentageHeight:function(t,e,i){return t&&e&&i?[1,.7,.8]:t&&e?[1,.7,0]:t&&i?[1,0,.8]:e&&i?[0,1,8/7]:t?[1,0,0]:e?[0,1,0]:i?[0,0,1]:[0,0,0]},getFontScales:function(t,e,i){var n=this.getMainLabelFontProps(),r=this.getSubLabelFontProps(),o=this.getTextLabelFontProps(),a=this.getLabelFontSize(n.fontSize),l=this.getLabelFontSize(r.fontSize),s=this.getLabelFontSize(o.fontSize),h=this.computeLabelDimens(t,a||this.DEFAULT_FONT_SIZE,n),u=this.computeLabelDimens(e,l||this.DEFAULT_FONT_SIZE,r),c=this.computeLabelDimens(i,s||this.DEFAULT_FONT_SIZE,o),p=this.getContainerDimensions(),d=p.height,g=p.width,f=[2*d/5,1.4*d/5,1.6*d/5],m=[];if(t&&a)return this.getLabelPercentageHeight(t,e,i);if(!t||a||n.markerSize)if(t){var b=this.computeLabelHeight(h);a||b>f[0]?(d-=b>f[0]?f[0]:b,m.push(0)):m.push(1)}else m.push(0);else m.push(1);if(!e||l||r.markerSize)if(e){var v=this.computeLabelHeight(u);l||v>f[1]?(d-=v>f[1]?f[1]:v,m.push(0)):m.push(.7)}else m.push(0);else m.push(.7);!i||s?(i&&(d-=(P=this.computeLabelHeight(c))>f[2]?f[2]:P),m.push(0)):m.push(.8);var y=d/((m=this.getLabelPercentageHeight(m[0],m[1],m[2]))[0]+m[1]+m[2]);y/=1.1;var S=[1,1,1];if(m[0]){var T=m[0]*y;S[0]=this.getAutoScaleFactor({width:g,height:T},h[0],1,h[1],n.markerSize)}if(m[1]&&(v=m[1]*y,S[1]=this.getAutoScaleFactor({width:g,height:v},u[0],1,u[1],r.markerSize)),m[2]){var P=m[2]*y;S[2]=this.getAutoScaleFactor({width:g,height:P},c[0],1)}return S},computeFontSizeScale:function(t,e,i){var n=this.getMainLabelFontProps(),r=this.getSubLabelFontProps(),o=this.getTextLabelFontProps(),a=this.getLabelFontSize(n.fontSize),l=this.getLabelFontSize(r.fontSize),s=this.getLabelFontSize(o.fontSize),h=this.computeLabelDimens(t,n),u=this.computeLabelDimens(e,r),c=this.computeLabelDimens(i,o),p=this.getContainerDimensions(),d=this.getLabelPadding(),g=p.height,f=p.width,m=1,b=1,v=1,y=this.getLabelPercentageHeight(a?"":t,l?"":e,s?"":i);a&&(g-=this.computeLabelHeight(h)+2*d),l&&(g-=this.computeLabelHeight(u)+2*d),s&&(g-=this.computeLabelHeight(c)+2*d);var S={height:g,width:f};return t?(a||(m=this.getAutoScaleFactor(S,h[0],y[0],h[1],n.markerSize),e&&!l&&(b=this.getAutoScaleFactor(S,u[0],y[1],u[1],r.markerSize)),i&&!s&&(v=this.getAutoScaleFactor(S,c[0],y[2]))),[m,Math.min(.7*m,b),Math.min(.8*m,v)]):(e&&(l||(b=this.getAutoScaleFactor(S,u[0],y[1],u[1],r.markerSize))),i&&!s&&(v=this.getAutoScaleFactor(S,c[0],y[2])),[m,b,Math.min(7*b/8,v)])},getAutoScaleFactor:function(t,e,i,n,r){var o=1,a=this.getLabelPadding(),l=t.height*i-2*a,s=t.width-2*a,h=e.width,u=e.height;return n&&(r?s-=n.width:(h+=n.width,u=Math.max(u,n.height))),s<l?u*(o=s/h)>l&&(o=l/u):h*(o=l/u)>s&&(o=s/h),o/1.1},checkScaleFactor:function(t,e,i,n,r){var o=this.getLabelWidth(t,e,i,n);return!e&&o>r?n*(r-10)/o:n},getXposition:function(t,e,i){var n=t-e/2;return n<5&&"right"!==i&&(n=5),e/2+n>t&&"right"===i&&(n=t-e),n},getDataRows:function(){return this.dataRows},setDataRows:function(t){this.dataRows=t},getChartDataMapper:function(){return this.chartDataMapper||(this.chartDataMapper=new o.chartDataMapperBase(this.getDataRows()?this.getDataRows():this.data.getDataAsArray(),this.data.getTitles(),this.data.numAttributes,this)),this.chartDataMapper},formChartOptions:function(){this.setRenderOptions(this.vizProps)},renderChart:function(){this.formChartOptions(),this.renderChartOptions()},startReplot:function(){},replot:function(t){this.vizProps=t,this.startReplot(),this.renderChart()},renderChartOptions:function(){var t=this.getRenderOptions();vitaraD3.select(this.domNode).selectAll("*").remove();var e,i,n,r,o=this.data,a=o.getNumAttributes(),l=this.getContainerDimensions(),s=this.getToolTipElement(),h=this.getTooltipOptions(),u=this.getChartDataMapper(),c=this.getChartTitle(t),p=this.context.getZoneData(u);p?(p.toplabel&&(n=u.titles.indexOf(p.toplabel[0].name),e=u.dataRows[0]&&u.dataRows[0][n]?u.dataRows[0][n].fv:null,void 0===c&&(c=p.toplabel[0].name)),p.sublabel&&(r=u.titles.indexOf(p.sublabel[0].name),i=u.dataRows[0]&&u.dataRows[0][r]?u.dataRows[0][r].fv:null)):(n=a,r=a+1,e=u.dataRows[0]&&u.dataRows[0][a]?u.dataRows[0][a].fv:null,i=u.dataRows[0]&&u.dataRows[0][a+1]?u.dataRows[0][a+1].fv:null),0==+t.sKPITitleEnable&&(c=void 0),this.setInitialLabelProperties();var d="transparent",g=function(t){switch(t){case"Main Label":return n;case"Sub Label":return r}};if(t.thresholds){var f=this.context.getThresholdHelper();f.setChartDataMapper(u),u.seriesBy=u.MSTR_TYPE_METRIC,t.thresholds=this.convertThresholds(t.thresholds,n,r,f);var m,b=f.procThresholdsPreCleanUp(t.thresholds,u.getAllMetricsAsZones());for(var v in this.isSmallMultiplesEnabled()&&this.context&&this.context.getChartDataMapper&&(m=this.context.getChartDataMapper().dataRows),b){var y;if(-1!==(a=g(v))&&(y=o.getTitles()[a]),-1!=a&&b[v].length>0)for(var S=0;S<b[v].length;S++){this.setMetricIndexUsage(f,u,y,b[v][S],m);var T=this.getThresholdTargetMetricName(y,b[v][S]),P=f.processThreshold([u.dataRows[0].slice(0,u.numColumns)],T,b[v][S],u,null,1==+b[v][S].level?m:null);P&&("Main Label"!==v&&"Sub Label"!==v&&"Title"!==v||this.setThresholdProperties(P[0],v),"Background"===v&&(d=P[0].panelColor||d))}}}this.createBasicRender(d),this.setLabelCount(e,i,c);var M=this.getFontScales(e,i,c);c&&this.createTextLabel(c,e,i,M[2],s,h),e&&this.createMainLabel(e,M[0],c,s,h),i&&this.createSubLabel(i,e,M[1],s,h);var L=this.getLabelContainer(),C=this.getElementDimensions(L),I=this.getElementDimensions(this.getMainLabelContainer()),F=this.getElementDimensions(this.getSubLabelContainer());this.context.isTrellisMode&&this.context.isTrellisMode()?C.height+I.height+F.height>l.height-10?(L[0].style="overflow:hidden;height:0px;visibility:hidden",L.children()[0].style="overflow:hidden;height:0px;",vitaraJQ(".SimpleKPITextGroup",this.domNode).height(Math.floor(l.height))):(L.height(C.height),vitaraJQ(".SimpleKPITextGroup",this.domNode).height(Math.floor(l.height-C.height))):C.height+I.height+F.height>l.height-5?(L.height(C.height),vitaraJQ(".SimpleKPITextGroup",this.domNode).height(Math.floor(l.height-C.height))):(L.height(C.height),vitaraJQ(".SimpleKPITextGroup",this.domNode).height(Math.floor(l.height-C.height-5))),this.positionLabels(e,i,c),this.endChartRendering()},convertThresholds:function(t,e,i,n){var r,o,a=function(t){switch(t){case e:return"Main Label";case i:return"Sub Label"}};for(var l in t){var s=this.chartDataMapper.titles.indexOf(l);-1!==s&&(r||(r={}),r[a(s)]=t[l],c.each(r[a(s)],(function(t){t.panelColor&&(o||(o=[]),o.push({condition:t.condition,panelColor:t.panelColor,source:t.source,values:t.values,type:t.type})),t.markerEnable=1})))}return r?(o&&(r.Background||(r.Background=[]),c.each(o,(function(t){t.id=n.getNewUID(r),r.Background.push(t)}))),this.vizProps.thresholds=r,r):t},setMetricIndexUsage:function(t,e,i,n,r){var o=!1;"string"==typeof i&&(1==+n.level&&r&&1===r.length||1!=+n.level&&1===e.dataRows.length)&&(o=!0),t.setTargetIndexUsage(o)},getThresholdTargetMetricName:function(t,e){return"string"==typeof t?t:e.source},getLabelDimens:function(t,e,i,r){var o=r&&r.scaleFactor?r.scaleFactor:1,a=n.utils.getTextDimensions(t,e?e+"px":e,i,this.domNode,r);return e?a:{width:a.width*o,height:a.height*o}},validateScaleFactor:function(t,e,i,n,r){return!t&&e>i?n*(i-(r?2*r:10))/e:n},getLabelPadding:function(){var t=this.getDomDimensions(),e=5;return t&&t.width&&t.height&&(e=Math.round(Math.min(t.width,t.height)/100)),e>5?5:e},getCustomSVGMarkerHeight:function(t){var e=this.getElementDimensions(t).height;return e-this.getFontPadding(e)},getFontPadding:function(t){if(!t)return 0;var e=Math.floor(t/10);return e>5?5:e},getLabelMargin:function(t){return t&&t.width&&t.height?Math.min(t.width,t.height)/100:5},setLabelCount:function(t,e,i){this.labelCount=0,this.labelCount+=t?1:0,this.labelCount+=e?1:0,this.labelCount+=i?1:0},getLabelCount:function(){return this.labelCount},createBasicRender:function(t){var e=this.getContainerDimensions(),i=this.getTextLabelFontProps(),n=this.getLabelPadding();"bottom"!=this.vizProps.label_align_sKPI&&vitaraD3.select(this.domNode).append("div").attr("class","SimpleKPILabelGroup").attr("style","overflow:hidden;position:relative;width:"+e.width+"px;text-align:"+(i.hAlign||"center")+";padding:"+n+"px;"),vitaraD3.select(this.domNode).style("background",t).append("div").attr("class","SimpleKPITextGroup").attr("style","overflow:hidden;position:relative;width:"+e.width+"px;padding:"+n+"px;"),"bottom"==this.vizProps.label_align_sKPI&&vitaraD3.select(this.domNode).append("div").attr("class","SimpleKPILabelGroup").attr("style","overflow:hidden;position:relative;width:"+e.width+"px;text-align:"+(i.hAlign||"center")+";padding:"+n+"px;")},getDomDimensions:function(){return{width:parseInt(this.domNode.style.width),height:parseInt(this.domNode.style.height)}},getContainerDimensions:function(){var t=this.getDomDimensions(),e=2*this.getLabelPadding();return{width:t.width-5-e,height:t.height-5-e}},getLabelContainer:function(){return vitaraJQ(".SimpleKPILabelGroup",this.domNode)},getMetricContainer:function(){return vitaraD3.select(this.domNode).select(".SimpleKPITextGroup")},getMainLabelContainer:function(){return vitaraJQ(".KPIMainLabel",this.domNode)},getSubLabelContainer:function(){return vitaraJQ(".KPISubLabel",this.domNode)},getMainLabelMarker:function(){return vitaraJQ(".MLMarker",this.domNode)},getSubLabelMarker:function(){return vitaraJQ(".SLMarker",this.domNode)},getMainLabelHorizontalAlignment:function(){return this.vizProps.mainlabel_horizontal||"center"},getMainLabelVerticalAlignment:function(){return this.vizProps.mainlabel_vertical||"middle"},getLabelAnchorPosition:function(t){return{left:"start",center:"middle",right:"end",undefined:"middle","":"middle"}[t]},getSubLabelAnchorPosition:function(t){return{left:"start",center:"middle",right:"end",undefined:"start","":"start"}[t]},getElementDimensions:function(t){if(n.utils.isIE()&&t.children&&t.children()&&t.children().length>0){var e={width:0,height:0},i=parseInt(t[0].style.padding||this.getLabelPadding());return c.each(t.children(),(function(t){var n=t.getBoundingClientRect();e.width+=n.width+2*i,e.height=Math.max(e.height,n.height+2*i)})),e}return t.node?t.node().getBoundingClientRect():t[0]&&t[0].getBoundingClientRect?t[0].getBoundingClientRect():{width:0,height:0}},getMainLabelVerticalPosition:function(){return this.getLabelVerticalPosition(this.getMainLabelContainer(),this.getMainLabelVerticalAlignment())},getMainLabelHorizontalPosition:function(){return this.getLabelHorizontalPosition(this.getMainLabelContainer(),this.getMainLabelHorizontalAlignment())},getSubLabelVerticalPosition:function(){return this.getLabelVerticalPosition(this.getSubLabelContainer(),this.getMainLabelVerticalAlignment())},getSubLabelHorizontalPosition:function(){return this.getLabelHorizontalPosition(this.getSubLabelContainer(),this.getMainLabelHorizontalAlignment())},getLabelVerticalPosition:function(t,e){var i=this.getElementDimensions(t),n=this.getContainerDimensions();return{top:0,middle:n.height/2-i.height/2,bottom:n.height-i.height,undefined:n.height/2-i.height/2,"":n.height/2-i.height/2}[e]},getLabelHorizontalPosition:function(t,e){var i=this.getElementDimensions(t),n=this.getContainerDimensions();return{left:0,center:n.width/2-i.width/2,right:n.width-i.width,undefined:n.width/2-i.width/2,"":n.width/2-i.width/2}[e]},getTextLabelFormatProperties:function(){var t=this.getTitleProperties();return{fontStyle:this.getFontStyle(t.fontStyle),fontWeight:this.getFontWeight(t.fontWeight),fontUnderline:this.getFontUnderline(t.fontUnderline),fontColor:t.fontColor||"black",fontFamily:t.fontFamily||"inherit",fontSize:t.fontSize,align:this.vizProps.label_align_sKPI||"top",textAnchor:this.getLabelAnchorPosition(t.align),hAlign:t.align}},getMainLabelFormatProperties:function(){return{fontStyle:this.getFontStyle(this.vizProps.simpleKPIItalic),fontWeight:this.getFontWeight(this.vizProps.simpleKPIBold),fontUnderline:this.getFontUnderline(this.vizProps.simpleKPIUnderline),fontColor:this.vizProps.SimpleKPIFontColor||"black",fontFamily:this.vizProps.simpleKPIFontName?"'".concat(this.vizProps.simpleKPIFontName,"'"):"inherit",fontSize:this.scaleFontSize(this.vizProps.simpleKPIFontSize),textAnchor:this.getLabelAnchorPosition(this.getMainLabelHorizontalAlignment())}},getSubLabelFormatProperties:function(){return{fontStyle:this.getFontStyle(this.vizProps.simpleKPI2Italic),fontWeight:this.getFontWeight(this.vizProps.simpleKPI2Bold),fontUnderline:this.getFontUnderline(this.vizProps.simpleKPI2Underline),fontColor:this.vizProps.SimpleKPI2FontColor||"black",fontFamily:this.vizProps.simpleKPI2FontName?"'".concat(this.vizProps.simpleKPI2FontName,"'"):"inherit",fontSize:this.scaleFontSize(this.vizProps.simpleKPI2FontSize),textAnchor:this.getSubLabelAnchorPosition(this.vizProps.sublabel_horizontal)}},setThresholdProperties:function(t,e){var i=this.getFontProps(e);i.markerEnable=t.markerEnable,t.color&&(i.fontColor=t.color),t.markerType&&(i.markerType=a.VitaraMarker.getInstance().getMarkerClass(t.markerType),i.svgOptions=t.svgOptions),i.markerColor=t.markerColor||i.markerColor||"black",i.markerHAlign=t.markerHAlign||i.markerHAlign||"left",this.setFontProps(e,i)},getFontProps:function(t){return"Main Label"===t?this.getMainLabelFontProps():"Sub Label"===t?this.getSubLabelFontProps():this.getTextLabelFontProps()},setFontProps:function(t,e){"Main Label"===t?this.setMainLabelFontProps(e):"Sub Label"===t?this.setSubLabelFontProps(e):this.setTextLabelFontProps(e)},setTextLabelFontProps:function(t){this.textLabelFontProps=t},setMainLabelFontProps:function(t){this.mainLabelFontProps=t},setSubLabelFontProps:function(t){this.subLabelFontProps=t},getTextLabelFontProps:function(){return this.textLabelFontProps},getMainLabelFontProps:function(){return this.mainLabelFontProps},getSubLabelFontProps:function(){return this.subLabelFontProps},setInitialLabelProperties:function(){this.resetLabelProperties(),this.setTextLabelFontProps(this.getTextLabelFormatProperties()),this.setMainLabelFontProps(this.getMainLabelFormatProperties()),this.setSubLabelFontProps(this.getSubLabelFormatProperties())},resetLabelProperties:function(){this.setTextLabelFontProps(null),this.setMainLabelFontProps(null),this.setSubLabelFontProps(null)},positionLabels:function(t,e,i){this.getMainLabelFontProps();var n=this.getSubLabelFontProps(),r=this.getTextLabelFontProps(),o=this.getMetricContainer(),a=this.getMainLabelContainer(),l=this.getSubLabelContainer(),s=this.getLabelContainer(),h=a.attr("style"),u=this.getMainLabelVerticalPosition(),p=this.getMainLabelHorizontalPosition(),d=this.getElementDimensions(s),g=this.getElementDimensions(a),f=this.getElementDimensions(l),m=this.getElementDimensions(o),b=function(){return t?g.height:0},v=function(){return t?g.width:0},y=function(){return e?f.height:0},S=function(){return e?f.width:0},T=function(){return i?d.height:0};p<0&&(p=0),"middle"===this.getMainLabelVerticalAlignment()?(u-=y()/2,"top"===r.align&&(u-=T()),u<0&&(u=0),"bottom"===r.align&&u+b()+y()>m.height&&(u=m.height-b()-y())):"bottom"===this.getMainLabelVerticalAlignment()&&(u-=y(),u-=T()),u<=0&&(u=this.getLabelPadding()),0===p&&(p+=this.getLabelPadding()),h+="display:table-row;position:absolute;top:"+u+"px;left:"+p+"px;",a.attr("style",h),t?"middle"===n.textAnchor?p=p+v()/2-S()/2:"end"===n.textAnchor&&(p=p+v()-S()):p=this.getSubLabelHorizontalPosition();var P=l.attr("style");P+="display:table-row;position:absolute;top:"+(u+b())+"px;left:"+p+"px;",l.attr("style",P),a&&a.children&&a.children().length>0&&c.each(a.children(),(function(t){var e=t.getAttribute("style");t.setAttribute("style",e.split("inline-block").join("table-cell"))})),l&&l.children&&l.children().length>0&&c.each(l.children(),(function(t){var e=t.getAttribute("style");t.setAttribute("style",e.split("inline-block").join("table-cell"))}))},appendCustomSvgMarker:function(t,e,i,n,r,o,a){var l=a?o.insert("span",":first-child").append("svg").append("g"):o.append("span").append("svg").append("g");return o.select("svg").attr("width",i+0).attr("height",n+0),(0,h.InfographicHelper)({svgOptions:vitaraJQ.extend({infoMarkerType:"vitaraCustomSVGFile",infographicCustomSVGEnable:r.svgOptions["custom-path"],infographicCustomSVGPath:r.svgOptions["infographic-path"]},this.context.getCustomSVGFilePaths()),trgBounds:{x:t,y:e,width:i,height:n},point:{id:(new Date).getTime()},container:l[0][0],id:"marker-custom",inverted:r.inverted}),l}})},586:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e),n.d(e,{SimpleKPIThresholdMapper:function(){return u}});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,t);var e,i,n,r,u=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(r){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),u.apply(this,arguments)}return e=c,(i=[{key:"setThreshold",value:function(t,e,i,n,r){var o;if(o="aboveaverage"===i.condition||"belowaverage"===i.condition?r.targetIndex:n,i.color||i.markerType||i.markerSize||i.panelColor){var a=t.map((function(t){return-1!==vitaraJQ.inArray(t[o].v,e)&&(t.color=i.color,1==+i.markerEnable&&(t.markerType=i.markerType,t.markerEnable=i.markerEnable,t.markerSize=i.markerSize,t.markerHAlign=i.markerHAlign,t.markerColor=i.markerColor,t.svgOptions=i.svgOptions),t.panelColor=i.panelColor),t}));t=a}return t}}])&&a(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),c}(n(509).ThresholdMapperBase)},582:function(t,e,i){i.r(e),i.d(e,{tooltipProvider:function(){return r}});var n=i(45),r=function(t){this.context=t};vitaraJQ.extend(r.prototype,{getTooltipOptions:function(){return{enable:0!=this.vizProps.tooltipEnable,fontName:this.vizProps.toolTipStyleFontName||"Arial",fontSize:this.vizProps.toolTipStyleFontSize||13,color:this.vizProps.toolTipStyleColor||"black",weight:1==this.vizProps.toolTipStyleBold?"bold":"normal",style:1==this.vizProps.toolTipStyleItalic?"italic":"normal",decoration:1==this.vizProps.toolTipStyleUnderline?"underline":"none",bgColor:this.vizProps.toolTipBgColor||"white"}},getTooltipDelayStyles:function(){var t=this.getTooltipOptions();return"background: ".concat(t.bgColor,";\n\t\t\tcolor: ").concat(t.color,";\n\t\t\tfont-family: ").concat(t.fontName,";\n\t\t\tfont-size: ").concat(t.fontSize,"px;\n\t\t\tfont-weight: ").concat(t.weight,";\n\t\t\tfont-style: ").concat(t.style,";\n\t\t\ttext-decoration: ").concat(t.decoration,";\n\t\t").replace(/[\s]+/g," ")},hideTooltip:function(){vitaraJQ(".ch-tooltip",this.domNode).attr("style","display:none").html("")},renderTooltip:function(t){var e=this,i=vitaraJQ(".ch-tooltip",this.domNode),r=0,o=0,a=0,l=0;t.selection.on("mouseover",(function(s){var h,u,c="",p=vitaraD3.event||s,d=s.color||(null===(h=null==this?void 0:this.style)||void 0===h?void 0:h.color)||"";"function"==typeof t.getTooltipText&&(c=t.getTooltipText(s)),n.utils.isHTMLStringContainsLink(c)&&(r=500,o=1500,c=n.utils.appendTargetBlankToHTMLString(c)),clearTimeout(l),a=setTimeout(function(){var r,o;if("function"==typeof t.isTooltipEnabled&&t.isTooltipEnabled(s)){if(i.html(c).attr("style","display: block; border-color: ".concat(d,"; ").concat(e.getTooltipDelayStyles())),!n.utils.isHTMLStringContainsLink(c)){var a=vitaraD3.select(".vitara-tooltip");null==a||a.style("pointer-events","none"),i[0].style.pointerEvents="none"}e.domDimens||(e.domDimens=(null===(o=null===(r=null==e?void 0:e.context)||void 0===r?void 0:r.isTrellisMode)||void 0===o?void 0:o.call(r))?n.utils.getElementDimensions(e.context.domNode):n.utils.getElementDimensions(e.domNode)),u="function"==typeof t.getTooltipPosition?t.getTooltipPosition(p,i):n.utils.getTooltipPosition(p,e.domDimens,e.domNode,i[0],e.domNode),i[0].style.left=u.left+"px",i[0].style.top=u.top+"px"}}.bind(p),r)})),t.selection.on("mouseout",(function(){this.style.stroke&&this.style.strokeWidth&&(this.style.stroke="",this.style.strokeWidth=""),l=setTimeout((function(){e.hideTooltip()}),o),clearTimeout(a)}))}})}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=n,e=[],o.O=function(i,n,r,a){if(!n){var l=1/0;for(p=0;p<e.length;p++){for(var s=t(e[p],3),h=(n=s[0],r=s[1],a=s[2],!0),u=0;u<n.length;u++)(!1&a||l>=a)&&Object.keys(o.O).every((function(t){return o.O[t](n[u])}))?n.splice(u--,1):(h=!1,a<l&&(l=a));if(h){e.splice(p--,1);var c=r();void 0!==c&&(i=c)}}return i}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[n,r,a]},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":i(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==("undefined"==typeof window?"undefined":i(window)))return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var e={32:0};o.O.j=function(t){return 0===e[t]};var i=function(i,n){var r,a,l=t(n,3),s=l[0],h=l[1],u=l[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in h)o.o(h,r)&&(o.m[r]=h[r]);if(u)var p=u(o)}for(i&&i(n);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(p)},n=self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var a=o.O(void 0,[34,33,35,38,36,43],(function(){return o(584)}));a=o.O(a)}()},9749:(t,i,n)=>{"use strict";var r=n(6486),o=(n(764),n(5187),n(1095));const a={PLAY_AXIS:"Play Axis",CATEGORY:"Category Axis",CATEGORY_ZONE:"Category",COLOR_BY:"Color By",SLICE_BY:"Slice By",VALUE:"Value",HORIZONTAL_VALUES:"Horizontal Axis",VERTICAL:"Vertical Axis",BUBBLE_SIZE:"Bubble Size",START_VALUE:"Start Value",END_VALUE:"End Value",TOOLTIP:"Tooltip",SMALL_MULTIPLE:"Small Multiples",ATTRIBUTES:"Attributes",METRICS:"Metrics",BREAK_BY:"Break By",DRILL_TARGET:"Drill Target",INTER_VALUE:"Intermediate Value(s)",LAST_VALUE:"Last Value",GROUP_BY:"Group By",NUMERATOR:"Ratio - Numerator Value",DENOMINATOR:"Ratio - Denominator Value",RING_1:"Ring 1 Value",RING_2:"Ring 2 Value",RING_3:"Ring 3 Value",TIME:"Time",TREND_BY:"Trend By",BAR:"Bar",MARKERS:"Markers",DATE:"Date",TOP_LABEL:"Main Label",SUB_LABEL:"Sub Label",THRESHOLD_METRICS:"Threshold Metrics",STACK_BY:"Stack By"};var l=n(6486),s=mstrmojo.declare(null,null,{MSTR_TYPE:{ATTRIBUTE:"attribute",METRIC:"metric",ATTRIBUTE_OR_METRIC:"attributeOrMetric"},ENUM_ZONES:a,isDZSupport:function(){return isMSTRDashBoard()||isMSTRDesktop()},getZoneElements:function(t,e){for(var i=[],n=0;n<t.length;n++)i.push({name:t[n].n,type:e});return i},getZoneAttributes:function(t){return this.getZoneElements(t.items,this.MSTR_TYPE.ATTRIBUTE)},getZoneMetrics:function(t){return this.getZoneElements(t.items,this.MSTR_TYPE.METRIC)},getAttributeNameByID:function(t){for(var e=this.dataHelper.data.data.gsi.rows,i=0;i<e.length;i++)if(e[i].did==t)return this.dataHelper.parseMSTRText(e[i].n)},getMetricNameByID:function(t){for(var e=this.dataHelper.data.data.gsi.mx,i=0;i<e.length;i++)if(e[i].did==t)return this.dataHelper.parseMSTRText(e[i].n);if(isMSTRMobile()&&isMSTRDashBoard()){var n=this.dataHelper.data.getColTitles();if(n&&n.titles&&n.titles[0]){var r=n.titles[0].es||[];for(i=0;i<r.length;i++)if(r[i].oid===t)return this.dataHelper.parseMSTRText(r[i].n)}}},getZoneElementId:function(t,e){var i=t&&t.id;return this.dataHelper&&e===this.MSTR_TYPE.ATTRIBUTE?this.dataHelper.getCompatibleAttrId(i):i},createZoneElements:function(t,e,i){t=l.uniqWith(t,l.isEqual);for(var n=[],r=0;r<t.length;r++)n.push({name:i.call(this,t[r].id),type:e,id:this.getZoneElementId(t[r],e)});return n},getElementType:function(t){var e=t&&t[0]?t[0]:void 0;return e&&e.t&&4===e.t?this.MSTR_TYPE.METRIC:this.MSTR_TYPE.ATTRIBUTE},formAttributeOrMetricZoneData:function(t){return this.getElementType(t)===this.MSTR_TYPE.ATTRIBUTE?this.formAttributeZoneData(t):this.formMetricZoneData(t)},formAttributeZoneData:function(t){return this.createZoneElements(t,this.MSTR_TYPE.ATTRIBUTE,this.getAttributeNameByID)},formMetricZoneData:function(t){return this.createZoneElements(t,this.MSTR_TYPE.METRIC,this.getMetricNameByID)},getElementsFromZoneByName:function(t,e,i){if(t&&t.getDropZoneObjectsByName){var n=t.getDropZoneObjectsByName(e);if(n.length>0)return i==this.MSTR_TYPE.ATTRIBUTE_OR_METRIC?this.formAttributeOrMetricZoneData(n):i==this.MSTR_TYPE.ATTRIBUTE?this.formAttributeZoneData(n):this.formMetricZoneData(n)}},getZoneData:function(t,e,i){return{}},getDropZoneElements:function(t,e){if(this.dataHelper||(this.dataHelper=e),!this.dataHelper)return"";var i=this;try{if(!this.isDZSupport())return this.dataHelper.getTitles();if(!t)return"";var n={};return l.each(this.ZONES,(function(e,r){l.each(i.MSTR_TYPE,(function(r,o){if(!n[e]){var a=l.filter(i.getElementsFromZoneByName(t,e,r),(function(t){return t&&void 0!==t.name}));a&&a.length>0&&(n[e]=a)}}))})),n}catch(t){return"unable to retrieve drop zone data: "+t.message}}}),h=mstrmojo.declare(s,null,{scriptClass:"mstrmojo.plugins.VitaraCharts.v530159.VitaraSimpleKPIDropZoneReader",getZoneData:function(t,e,i,n){var r={},o=this.MSTR_TYPE;if(this.dataHelper=n,this.isDZSupport()){var a=t.getZones();for(var l in r.toplabel=this.getElementsFromZoneByName(t,a.TOP_LABEL,o.METRIC),r.sublabel=this.getElementsFromZoneByName(t,a.SUB_LABEL,o.METRIC),r.smallMultiple=this.getElementsFromZoneByName(t,a.SMALL_MULTIPLE,o.ATTRIBUTE),r.thresholdmetrics=this.getElementsFromZoneByName(t,a.THRESHOLD_METRICS,o.METRIC),r)void 0!==r[l]&&0!=r[l].length||delete r[l]}else 1==+i.enableTrellis&&(r.smallMultiple=e.getAttributeAtIndexAsZones(0)),e.numMetrics>0&&(r.toplabel=e.getFirstMetricAsZones()),e.numMetrics>1&&(r.sublabel=e.getMetricAtIndexAsZones(1)),e.numMetrics>2&&(r.thresholdmetrics=e.getAllMetricsAsZones().slice(2));return r}}),u=n(4089),c=n(9153),p=n(8397);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:String(e)}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=b(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=T(t);if(e){var r=T(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return S(this,i)}}function S(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(a,t);var i,n,r,o=y(a);function a(t,e){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i=o.call(this,t,e);var n=Object.getOwnPropertyNames(Object.getPrototypeOf(c.Z.prototype)),r={};return n.forEach((function(t){"function"==typeof c.Z.prototype[t]&&"constructor"!==t&&(r[t]=c.Z.prototype[t])})),Object.assign(a.prototype,r),i.setBaseContext(t),i.setEditorInterface(e),i}return i=a,(n=[{key:"setBaseContext",value:function(t){this.context=t}},{key:"setEditorInterface",value:function(t){this.eInterface=t}},{key:"onEnableTrellisChange",value:function(){this.getBaseContext().propMenuHelper.setSimpleKPITitleField(e.detail.value)}},{key:"onSKPIFontSizeChange",value:function(t){var e=this.getBaseContext();e.propMenuHelper.getStateManager().setProperty("chartDimensions",e.menuOptions.fetchCallback.fetchChartDimensions()),p.each(["simpleKPIFontSize","simpleKPI2FontSize","simpleKPITextFontSize","chartTitleFontSize"],(function(i){i!==t.detail.name&&e.propMenuHelper.getStateManager().setProperty(i,e.getMenuElement("#popup"+i).val())}))}},{key:"setCustomEventHandlers",value:function(){m(T(a.prototype),"setCustomEventHandlers",this).call(this),this.setEventHandler("onSKPIFontSizeChange",this.onSKPIFontSizeChange,this.saveAndEndBroadcast)}}])&&g(i.prototype,n),r&&g(i,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(c.Z);function M(t){t&&this.setContext(t)}Object.assign(M.prototype,u.Z.prototype,{getCustomFields:function(){return{thresholdFormat:{id:"thresholdFormat",type:"select",action:"none",name:"thresholdFormat",class:"thresholdFormat fullWidth",options:this.getFieldDefs().getOptions().thresholdFormatOptionsSet1}}},onPropMenuCreated:function(){isMSTRDashBoard()||isMSTRDesktop()?this.propMenuHelper.setSimpleKPITitleField(this.getChartContext().getChartDataMapper().numAttributes>0):this.propMenuHelper.setSimpleKPITitleField(),this.propMenuHelper.updateSimpleKPIFontSizes(this.getChartContext().scaleFontSizeToViewport.bind(this.getChartContext()))},getCustomEventHandler:function(t,e){return new P(t,e)},getCustomProperty:function(){return[this.AlignmentProperties(),this.BackgroundProperties(),this.LabelProperties,this.TooltipProperties(),this.ThresholdsPropertiesSimpleKPI(),this.GenericTrellisProperties({disableAxisProps:!0,disableTitleProps:!0}),this.SecurityProperties(),this.getAboutChartMenu()]},LabelProperties:{label:"Data Labels",id:"data_labels",containers:[{title:"",type:"collapsable",sections:[{header:"Title",data:[{label:"Show Title",fields:["sKPITitleEnable"]},{label:"Horizontal Position",fields:["label_h_align_sKPI"]},{label:"Vertical Position",fields:["label_align_sKPI"]},{label:"",fields:["labelItemStyleFontName","simpleKPITextFontSize","labelItemStyleBold","labelItemStyleItalic","labelItemStyleUnderline","labelItemStyleColor"]}]},{header:"Main Label",data:[{label:"Horizontal Position",fields:["mainlabel_horizontal"]},{label:"Vertical Position",fields:["mainlabel_vertical"]},{label:"",fields:["simpleKPIFontName","simpleKPIFontSize","simpleKPIBold","simpleKPIItalic","simpleKPIUnderline","SimpleKPIFontColor"]}]},{header:"Sub Label",data:[{label:"Horizontal Position",fields:["sublabel_horizontal"]},{label:"",fields:["simpleKPI2FontName","simpleKPI2FontSize","simpleKPI2Bold","simpleKPI2Italic","simpleKPI2Underline","SimpleKPI2FontColor"]}]}]}]}});var L=n(6486),C={getTargetDataFromEvent:function(t){var e=this,i=null!=t&&t.target?this._super(t):t;if(i||(i=this._super(this.getpointEvent(t))),i){var n,r,o,a,l,s=(null==this||null===(n=this.getRenderer())||void 0===n||null===(r=n.getChartDataMapper)||void 0===r||null===(r=r.call(n))||void 0===r?void 0:r.dataRows)||(null==this||null===(o=this.getRenderer())||void 0===o||null===(o=o.renderedChartInstance)||void 0===o||null===(a=o.getChartDataMapper)||void 0===a||null===(a=a.call(o))||void 0===a?void 0:a.dataRows)||this.dataHelper.getDataAsArray();i.dataRow=L.find(s,(function(t){if(L.forEach(t,(function(t){if(e.checkRowDataOption(i,t))return i.selectorFunc=t.selector,l=t.row,!1})),void 0!==l)return l}))}return i},checkRowDataOption:function(t,e){if(e)return t.mName===e.t||(null==t?void 0:t.fv)===(null==e?void 0:e.fv)||!1},getpointEvent:function(t){window.event||vitaraD3.event;var e={fv:this.getStrTextContent(t)||t.target.textContent,mName:this.getStrTextContent(t)||t.target.textContent};return t?(t.target.point=e,t):e},getGraphicModel:function(t){if(this.getDataHelper().getNumMetrics()&&this.getDataHelper().getNumAttributes())return this._super(t);if(!this.getGraphicModels||!t||!t.dataRow)return null;var e=this.getContextMenuSelector(t);return(e=t.dataRow.filter((function(e){if(t.fv===e.fv||t.mName===e.t)return e})))?this.getGraphicModels().children.filter((function(t){var i;if(L.isEqual(null==t?void 0:t.formattedValue,null===(i=e[0])||void 0===i?void 0:i.v))return t.getSelector()}))[0]:null},getStrTextContent:function(t){}};n.g.vitaraLD||(n.g.vitaraLD=r),mstrmojo.plugins.VitaraCharts.v530159.VitaraSimpleKPIChart=mstrmojo.declare(o.Z,[C],{scriptClass:"mstrmojo.plugins.VitaraCharts.v530159.VitaraSimpleKPIChart",cssClass:"VitaraSimpleKPIChart",getVisualInstance:function(){return this.visualInstance||(this.visualInstance=new VitaraSimpleKPIChartMixin(this),this.visualInstance.updateVisualProps=this.updateVisualProps),this.visualInstance},getEditorName:function(){return"SimpleKPI"},getEditor:function(t){return this.propsEditor||(this.propsEditor=new M(t)),this.propsEditor},getZoneReader:function(){return this.zoneReader||(this.zoneReader=new h),this.zoneReader},getSelectorObject:function(t,e){var i;return null===(i=this.getTargetDataFromEvent)||void 0===i?void 0:i.call(this,e)},validateMinCriteria:function(t,e){return{valid:e>0,message:"Include at least one metric to see the chart."}},getCustomContextMenuItems:function(){return["format"]},setTargetDataObject:function(t){if(vitaraJQ.isPlainObject(t))return""},getContextMenuCommonConfig:function(){return[{type:mstrmojo.DEFAULT_CONTEXT_MENU.GO_TO_TARGETS}]},processChartSpecificCompatabilityChecks:function(t){return this.getRenderer().isTrellisMode(t)?(r.each({chartTitleBold:"labelItemStyleBold",chartTitleColor:"labelItemStyleColor",chartTitleFontName:"labelItemStyleFontName",chartTitleFontSize:"simpleKPITextFontSize",chartTitleItalic:"labelItemStyleItalic",chartTitleUnderline:"labelItemStyleUnderline",titleAlignment:"label_h_align_sKPI"},(function(e,i){t[e]=t[i]||t[e],delete t[i]})),t):t}})}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return i[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=i,t=[],r.O=(e,i,n,o)=>{if(!i){var a=1/0;for(u=0;u<t.length;u++){for(var[i,n,o]=t[u],l=!0,s=0;s<i.length;s++)(!1&o||a>=o)&&Object.keys(r.O).every(t=>r.O[t](i[s]))?i.splice(s--,1):(l=!1,o<a&&(a=o));if(l){t.splice(u--,1);var h=n();void 0!==h&&(e=h)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[i,n,o]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={166:0};r.O.j=e=>0===t[e];var e=(e,i)=>{var n,o,[a,l,s]=i,h=0;if(a.some(e=>0!==t[e])){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(s)var u=s(r)}for(e&&e(i);h<a.length;h++)o=a[h],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(u)},i=self.webpackChunkVitaraCharts_MicroStrategy=self.webpackChunkVitaraCharts_MicroStrategy||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=r.O(void 0,[445,915,89],()=>r(9749));o=r.O(o)})();
