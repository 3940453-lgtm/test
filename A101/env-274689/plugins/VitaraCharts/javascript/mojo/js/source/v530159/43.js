"use strict";(self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[]).push([[43],{471:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var s=i(4);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!==n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s.key),"symbol"===n(r)?r:String(r)),s)}var r}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"getElementBounds",value:function(t){if(!t)return{};var e=t.getBoundingClientRect&&t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,bottom:e.bottom,left:e.left,right:e.right}}},{key:"computeAxisContainerBBox",value:function(t,e){if(t&&t.axes&&t.axes[e.index]&&t.axes[e.index].visible){var i=t.axes[e.index].labelsGroup&&t.axes[e.index].labelsGroup.element||t.axes[e.index].axisGroup&&t.axes[e.index].axisGroup.element,s=this.getElementBounds(i),n=t.axes[e.index].horiz,r=0,a=t.plotBox||{};return r=n?t.chartHeight-a.height:t.chartWidth-a.width,r+=t.axes[e.index].lineWidth?+t.axes[e.index].lineWidth:0,s.height=n?r:s.height,s.width=n?s.width:r,{bounds:s}}}},{key:"getAxisElementBounds",value:function(t,e){if(t&&t.axes&&t.axes[e.index]&&t.axes[e.index].visible){var i=t.axes[e.index].labelsGroup&&t.axes[e.index].labelsGroup.element||t.axes[e.index].axisGroup&&t.axes[e.index].axisGroup.element;return this.getElementBounds(i)}}},{key:"getAxesBounds",value:function(t,e){if(t&&t.axes){var i=this,n={xAxis:[],yAxis:[]},r={};if(s.times(t.axes.length,(function(a){switch(t.axes[a].coll){case"xAxis":n.xAxis.push(i.computeAxisContainerBBox(t,s.merge(e,{index:a})));break;case"yAxis":r[n.yAxis.length]=a,n.yAxis.push(i.computeAxisContainerBBox(t,s.merge(e,{index:a})))}})),n.yAxis.length>1){var a=i.getAxisElementBounds(t,s.merge(e,{index:r[0]})),o=i.getAxisElementBounds(t,s.merge(e,{index:r[1]}));a&&o&&(t.axes[r[0]].horiz?(n.yAxis[0].bounds.height-=o.height?+o.height:0,n.yAxis[1].bounds.height-=a.height?+a.height:0):(n.yAxis[0].bounds.width-=o.width?+o.width:0,n.yAxis[1].bounds.width-=a.width?+a.width:0))}return t.axes.length>3&&console.error("unhandled senario: more than 3 axis"),e&&e.isLegacy?this.getLegacyResult(t,n):n}}},{key:"getLegacyResult",value:function(t,e){var i={};function s(t,e){e.isHorizontal=t.horiz,e.opposite=t.opposite,e.reversed=t.reversed}return t.xAxis[0]&&t.xAxis[0].visible&&(i.xAxis=e.xAxis[0],s(t.xAxis[0],i.xAxis)),t.yAxis[0]&&t.yAxis[0].visible&&(i.yAxis=e.yAxis[0],s(t.yAxis[0],i.yAxis)),t.yAxis[1]&&t.yAxis[1].visible&&(i.sYAxis=e.yAxis[1],s(t.yAxis[1],i.sYAxis)),i}},{key:"getCategoryAxisMax",value:function(t){var e=0;return t&&function t(i){for(var s,n=i.length;n--;)(s=i[n]).categories?t(s.categories):e++}(t),e-1}},{key:"getXMax",value:function(t){return this.getCategoryAxisMax(t)}}])&&r(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.VitaraGlobal||(window.VitaraGlobal={}),VitaraGlobal.HCAxisUtils||(VitaraGlobal.HCAxisUtils=new a);const o=VitaraGlobal.HCAxisUtils},476:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={VERSION_DEFAULTS:{sharedCategoryAxis:"0"},getVersionDefaults:function(){return this.VERSION_DEFAULTS}}},475:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(45),n=i(4),r=function(){};vitaraJQ.extend(r.prototype,{COMPATIBLE_VERSIONS:[],FUNCTION_PREFIX:"getVersionDefaultForv",getVersionDefaults:function(t){var e=this.FUNCTION_PREFIX+t.split(".").join("_");return this[e]?this[e]():{}},isOlderVersion:function(t,e){return s.utils.isOlderVersion(t,e)},addVersionDefaults:function(t){if(!t||void 0===t.version)return t;for(var e={},i=0;i<this.COMPATIBLE_VERSIONS.length;i++)if(this.isOlderVersion(t,this.COMPATIBLE_VERSIONS[i])){console.log("adding defaults for versions prior to "+this.COMPATIBLE_VERSIONS[i]);var s=this.getVersionDefaults(this.COMPATIBLE_VERSIONS[i]);n.each(s,(function(i,s){void 0===t[s]&&(e[s]=i)}))}return vitaraJQ.extend(t,e)}});const a=r},474:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(45),n=i(475),r=function(){};vitaraJQ.extend(r.prototype,n.default.prototype,{isOlderVersion:function(t,e){return!(!t||!t.version)&&s.utils.isLowerVersion(e,t.version)}});const a=r},473:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(474),n=i(476),r=function(){};vitaraJQ.extend(r.prototype,s.default.prototype,{COMPATIBLE_VERSIONS:["4.8.3.900"],getVersionDefaultForv4_8_3_900:function(){return n.default.getVersionDefaults()}});const a=r},468:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var s=i(469),n=i(470),r=i(472),a=i(438),o=i(473),l=i(4);let h;const d=t=>class extends t{constructor(t){super(t),this._mixinName="mstrmojo.plugins.VitaraCharts.v530159.VitaraTrellisVizBase",this.ENUM_RENDER_MODE={TRELLIS:1,SINGLE:2},this.INVERTED_AXIS=!1,this.WAIT_THIRDPARTY_RENDER=!0,this.CACHE_KEYS={CHART_DATA_MAPPER:"trellisChartDataMapper",TRELLIS_DATA:"trellisData",TRELLIS_LAYOUT_DETAIL:"trellisLayoutDetail",VALUE_AXES_MIN_MAX:"trellisValueAxesMinMax",TRELLIS_CONFIG:"trellisConfig",VIEW_CONFIG:"viewConfig",METRIC_AVERAGE:"metricAverage",IBCS_ATTRIBUTE_VALUES:"ibcsAttributeValues",IBCS_PLANNED_VALUES:"ibcsPlannedValues",IBCS_FORECAST_VALUES:"ibcsForecastValues",IBCS_PLANNED_START_INDEX:"ibcsPlannedStartIndex",IBCS_LAYOUT_WEIGHTS:"ibcsLayoutWeights",AXES_VISIBILITY_INFO:"axesVisibilityInfo"},this.SMALL_MULTIPLE_OPTIONS={legend:{enabled:!0}},this.SMALL_MULTIPLES_ERROR_STR="Invalid Small Multiples criteria",this.DEF_SPLIT_MODE="auto",this.TRELLIS_INSTANCE_PREFIX="trellisElement",this.MIN_HORZ_WIDTH=80,this.MIN_VERT_HEIGHT=65,this.AXES_COL=["xAxis","yAxis"],console.log("contructor called from trellisVizBase"),h=a.default.getLogger(this.getInstanceId())}init(t){console.log("init called from trellisvizbase"),h=a.default.getLogger(this.getInstanceId())}getDefaultSplitMode(){return this.DEF_SPLIT_MODE}getRenderedMode(){return this.renderedMode}setRenderedMode(t){this.renderedMode=t}isDeltaViewsEnabled(){return!1}isIBCSHorizontalLayout(){return!0}getSecondaryLayoutWeight(){return.2*this.getDeltaUnitsCount()}getLayoutWeights(){}getChartCount(){return this.chartCount}setChartCount(t){this.chartCount=t}setInstanceID(t,e){t.instanceId=this.TRELLIS_INSTANCE_PREFIX+e}getVizDataInterface(){return this.dataHelper}getNodePosition(){return{width:this.getChartNodePosition().width-2,height:this.getChartNodePosition().height-2}}getDomNode(){return this.chartNode}getVizProps(){return this.vizProps}getPrevVizProps(){return this.prevVizProps}setPrevVizProps(t){this.prevVizProps=t}getExtraOptions(){return"function"==typeof this.getOptions?this.getOptions():{}}getLegendDims(){return this.legendDims}setLegendDims(t){return this.legendDims=t}getUnitRenderer(){return this.unitRenderer}sharedCatAxisSupport(){return!0}isSMCatAxisCompatibilityReq(t){return this.isTrellisMode(t)&&this.sharedCatAxisSupport()}addVersionCompatibleDefaults(t){t=super.addVersionCompatibleDefaults(t);let e=l.cloneDeep(this.vizProps);return this.vizProps=l.cloneDeep(t),this.isSMCatAxisCompatibilityReq(t)?(this.vizProps=e,(new o.default).addVersionDefaults(t)):(this.vizProps=e,t)}getTrellisLayoutHelper(){return this.trellisLayoutHelper||(this.trellisLayoutHelper=new n.trellisLayoutHelper),this.trellisLayoutHelper}getNewTrellisUnitRenderer(t,e,i,s,n,r,a){if(this.getUnitRenderer())return new(this.getUnitRenderer())(t,e,i,s,n,r,a)}setRenderedChartInstances(t){this.renderedChartInstances=t}setRenderedChartInstance(t){this.renderedChartInstances||(this.renderedChartInstances=[]),this.renderedChartInstances.push(t)}getRenderedChartInstance(t){return this.renderedChartInstances?void 0!==t?this.renderedChartInstances[t]:this.renderedChartInstances:null}getChartDimensions(){let t=this.getRenderedChartInstance(0);if(!t)return;let e=t.getChartNode();return e?{width:e.clientWidth,height:e.clientHeight}:void 0}getMetricValueRange(t,e){var i=super.getMetricValueRange(t,e);return!i&&this.getRenderedChartInstance&&this.getRenderedChartInstance()&&l.each(this.getRenderedChartInstance(),(function(e){if(e.chartDataMapper){var s=e.chartDataMapper.getMetricValueRange(t);i?(i.minVal>s.minVal&&(i.minVal=s.minVal),i.maxVal<s.maxVal&&(i.maxVal=s.maxVal)):i=s}})),i}setRenderedHCInstances(t){this.renderedHCInstances=t}setRenderedHCInstance(t){this.renderedHCInstances||(this.renderedHCInstances=[]),this.renderedHCInstances.push(t)}getRenderedHCInstance(t){return this.renderedHCInstances?void 0!==t?this.renderedHCInstances[t]:this.renderedHCInstances:null}getChartDataMapper(t){return!t&&this[this.CACHE_KEYS.CHART_DATA_MAPPER]||(this[this.CACHE_KEYS.CHART_DATA_MAPPER]=new s.default(this.getVizDataInterface().getDataAsArray(),this.getVizDataInterface().getTitles(),this.getVizDataInterface().numAttributes,this)),this[this.CACHE_KEYS.CHART_DATA_MAPPER]}getTrellisDropZoneItems(t){var e,i;if(isMSTRDashBoard()||isMSTRDesktop()||(i=this.getChartDataMapper()),(e=this.getZoneData(i,t))&&e.smallMultiple)return e.smallMultiple}getTrellisAttributes(){return[this.getTrellisDropZoneItems()[0].name]}getTrellisOptions(t,e,i){var s={},n=this.getLegendDims();return+this.getVizProps().trellisNumColumns?(s.cols=+this.getVizProps().trellisNumColumns,s.splitMode=this.getTrellisLayoutHelper().ENUM_SPLIT_MODE.ROWS_COLUMNS):s.splitMode=this.getDefaultSplitMode(),(this.getVizProps().trellisIndividualWidth||this.getVizProps().trellisIndividualHeight)&&(s.unit={minWidth:this.getVizProps().trellisIndividualWidth?Number(this.getVizProps().trellisIndividualWidth):void 0,minHeight:this.getVizProps().trellisIndividualHeight?Number(this.getVizProps().trellisIndividualHeight):void 0}),s.layout={width:Math.floor(Number(this.getNodePosition().width)),height:Math.floor(Number(this.getNodePosition().height))},this.isLegendEnabled()&&(s.layout.width=n&&n.includeLegendWidth?s.layout.width-n.width-5:s.layout.width,s.layout.height=n&&n.includeLegendHeight?s.layout.height-n.height-5:s.layout.height),s.layout.width-=10,s.layout.height-=10,s.parentElement=this.getDomNode(),s.trellisElems=t,s.layoutType=!this.isTypeIBCS()||this.isIBCSEnabledWithSmallMultiples&&this.isIBCSEnabledWithSmallMultiples()?this.getTrellisLayoutHelper().ENUM_LAYOUT_TYPES.REG:this.getTrellisLayoutHelper().ENUM_LAYOUT_TYPES.IBCS,s.layoutType===this.getTrellisLayoutHelper().ENUM_LAYOUT_TYPES.IBCS&&(s.secondaryElems=this.getDeltaUnitsCount()||0,s.isHorizontal=this.isIBCSHorizontalLayout(),s.secondaryLayoutWeight=this.getSecondaryLayoutWeight(),s.layoutWeights=i||this.getLayoutWeights()),vitaraJQ.extend(s,e)}isTrellisDZItemsPresent(t){var e=this.getTrellisDropZoneItems(t);return e&&e.length&&e.length>0}isTrellisMode(t){return this.isTrellisDZItemsPresent(t)}validateTrellisCriteria(){if(this.isTrellisMode()){if(this.isTrellisDZItemsPresent())return!0;throw new Error(this.SMALL_MULTIPLES_ERROR_STR)}}getTrellisElemTitle(t,e){if(t&&e)return t.title=e.name,t}getTrellisData(t){if(!this[this.CACHE_KEYS.TRELLIS_DATA]||t){if(!this.getChartDataMapper().groupByAttributes(this.getTrellisAttributes()))throw new Error("Error occured while grouping data");var e=this;this[this.CACHE_KEYS.TRELLIS_DATA]=[],l.each(e.getTrellisDataElements(),(function(t){e[e.CACHE_KEYS.TRELLIS_DATA].push(e.getVizDataInterface().computeMetaInfoForDataArray(e.getTrellisElemTitle(e.getChartDataMapper().getGroupRecords(t.path),t),e.getChartDataMapper().getMetricFormattingOptions()))}))}return this[this.CACHE_KEYS.TRELLIS_DATA]}initiateHC(){this.isHC&&this.setHighchartsDefaults()}getTrellisLayoutDetail(){return this[this.CACHE_KEYS.TRELLIS_LAYOUT_DETAIL]||(this[this.CACHE_KEYS.TRELLIS_LAYOUT_DETAIL]=this.getTrellisLayoutHelper().getLayoutDetail()),this[this.CACHE_KEYS.TRELLIS_LAYOUT_DETAIL]}validateFlexLayout(t,e){if(t.length<2)return!0;var i=this;return-1===l.findIndex(t,(function(t){return(e?vitaraJQ(t).width():vitaraJQ(t).height())<=(e?i.MIN_HORZ_WIDTH:i.MIN_VERT_HEIGHT)}))}getDistributeTail(t){var e=t.slice(0,t.length-1),i=t[t.length-1];return l.map(e,(function(t){return t+i/e.length}))}getLayoutUnitsLength(t){return l.filter(t,(function(t){return"number"==typeof t&&null!==t})).length}enableLayoutFlexMode(){return+this.getVizProps().ibcsLayoutAutoHide}initFlexTrellisLayout(t,e,i){this.destroyCaches([this.CACHE_KEYS.TRELLIS_LAYOUT_DETAIL]),t=(i=i||this.getLayoutWeights())&&i.length>0?this.getLayoutUnitsLength(i):t;var s=this.getTrellisOptions(t,e,i);if(this.layoutResult={units:this.getTrellisLayoutHelper().getCreateLayout(s),detail:this.getTrellisLayoutDetail()},this.enableLayoutFlexMode()&&!this.validateFlexLayout(this.layoutResult.units,s.isHorizontal)){var n=this.getDistributeTail(i);this.initFlexTrellisLayout(n.length,e,n)}return this.layoutResult}initTrellisLayout(t,e){return t=t||this.getChartCount(),this.destroyCaches([this.CACHE_KEYS.TRELLIS_LAYOUT_DETAIL]),{units:this.getTrellisLayoutHelper().getCreateLayout(this.getTrellisOptions(t,e)),detail:this.getTrellisLayoutDetail()}}getAxisOrientation(t){return t?{x:"yAxis",y:"xAxis"}:{x:"xAxis",y:"yAxis"}}setAxisVisibility(t,e,i,s){var n=this.isTypeIBCS();if(l.isArray(t[e])){if("number"==typeof s)return t[e][s]||(t[e][s]={labels:{}}),t[e][s].labels||(t[e][s].labels={}),void(n?t[e][s].visible=i:(0==+i&&(t[e][s].lineWidth=0),t[e][s].labels.enabled=i));l.each(t[e],(function(s,r){t[e][r]||(t[e][r]={labels:{}}),t[e][r].labels||(t[e][r].labels={}),n?t[e][r].visible=i:(0==+i&&(t[e][r].lineWidth=0),t[e][r].labels.enabled=i)}))}else t[e]||(t[e]={labels:{}}),t[e].labels||(t[e].labels={}),n?t[e].visible=i:(0==+i&&(t[e].lineWidth=0),t[e].labels.enabled=i)}setAxisLabelsEnabled(t,e,i,s){if(t[e])if(l.isArray(t[e])){if("number"==typeof s)return t[e][s].labels||(t[e][s].labels={}),t[e][s].labels.enabled=i,void(t[e][s].labels.reserveSpace=i);l.each(t[e],(function(s,n){t[e][n].labels||(t[e][n].labels={}),t[e][n].labels.enabled=i,t[e][n].labels.reserveSpace=i}))}else t[e].labels||(t[e].labels={}),t[e].labels.enabled=i,t[e].labels.reserveSpace=i}hideAxisProperties(t,e){l.isArray(t[e])?l.each(t[e],(function(t,e){t.title&&t.title.text&&(t.title.titleText=t.title.text,t.title.text=null)})):t[e].title&&t[e].title.text&&(t[e].title.titleText=t[e].title.text,t[e].title.text=null)}showAxisProperties(t,e,i){l.isArray(t[e])?"number"==typeof i&&t[e][i]?t[e][i].title&&t[e][i].title.titleText&&(t[e][i].title.text=t[e][i].title.titleText):l.each(t[e],(function(t,e){t.title&&t.title.titleText&&(t.title.text=t.title.titleText)})):t[e].title&&t[e].title.titleText&&(t[e].title.text=t[e].title.titleText)}isInvertedAxis(t){return Boolean(+t.invertedAxis)||this.INVERTED_AXIS}isAxisLabelsRequired(){}setTickInterval(t){t&&t.yAxis&&(t.yAxis.tickInterval=0)}setHCChartwidth(t,e){t&&e&&(t.chart||(t.chart={}),t.chart.width=e)}isIBCSTypeScalingReq(t,e){return vitaraJQ(t.getChartNode()).width()<e.maxElementWidth}getScaleBasedOnChartWidths(t){return t.maxElementWidth/t.minElementWidth}setScaledAxisLimits(t,e){t&&void 0!==e&&t.yAxis&&t.yAxis.min&&t.yAxis.max&&(t.yAxis.min=t.yAxis.min*(1/e),t.yAxis.max=t.yAxis.max*(1/e))}applyValueAxisLimits(t,e){var i=t&&t.getValueAxisLimits?t.getValueAxisLimits():this.getValueAxisLimits(t);this.setValueAxisLimits(e,i),this.validataValueAxisLimits(e),this.adjustValuAxisLimits(t,e)}validataValueAxisLimits(t){t.yAxis&&"number"==typeof t.yAxis.min&&"number"==typeof t.yAxis.max&&(t.yAxis.min===Number.MAX_SAFE_INTEGER&&(t.yAxis.min=0),t.yAxis.max===Number.MIN_SAFE_INTEGER&&(t.yAxis.max=0))}adjustAxisLimits(t){return l.isArray(t)?l.each(t,(function(e,i){"number"==typeof e.min&&"number"==typeof e.max&&(e.min>0&&!e.minLock&&(t[i].min=0),e.max<0&&!e.maxLock&&(t[i].max=0))})):"number"==typeof t.min&&"number"==typeof t.max&&(t.min>0&&!t.minLock&&(t.min=0),t.max<0&&!t.maxLock&&(t.max=0)),t}adjustValuAxisLimits(t,e){return l.isArray(e.yAxis)?l.each(e.yAxis,(function(t){"number"==typeof t.min&&"number"==typeof t.max&&(t.min>0&&!t.minLock&&(t.min=0),t.max<0&&!t.maxLock&&(t.max=0))})):"number"==typeof e.yAxis.min&&"number"==typeof e.yAxis.max&&(e.yAxis.min>0&&!e.yAxis.minLock&&(e.yAxis.min=0),e.yAxis.max<0&&!e.yAxis.maxLock&&(e.yAxis.max=0)),e}setValueAxisLabelFormatter(t){t.yAxis.length?(t.yAxis[0].labels.formatter||(t.yAxis[0].labels.formatter=this.getDefaultValueAxisFormatter()),t.yAxis[1].labels.formatter||(t.yAxis[1].labels.formatter=this.getDefaultValueAxisFormatter())):t.yAxis.labels.formatter||(t.yAxis.labels.formatter=this.getDefaultValueAxisFormatter())}getDefaultValueAxisFormatter(){var t=this;return function(){return t.utils.shortenNumber({rawVal:this.value,fv:this.axis.defaultLabelFormatter.call(this)})}}preProcessHCTrellisOptionsIBCS(t,e,i,s,n){var r=l.cloneDeep(t),a=r;return this.isHC&&(this.setAxisLabelsEnabled(r,"xAxis",!1),this.setAxisLabelsEnabled(r,"yAxis",!1),this.setAxisVisibility(r,"xAxis",!1),this.applyValueAxisLimits(n,r),this.setTickInterval(r),this.setValueAxisLabelFormatter(r)),e&&(r.title=vitaraJQ.extend(!0,r.title,{text:e||"",align:a.titleAlignment||"left"})),r.legend=r.legend||{},r.legend.enabled=!1,r}preProcessHCTrellisOptions(t,e,i,s,n){var r=l.cloneDeep(t),a=r,o=this.getAxisOrientation(this.isInvertedAxis(a));return this.isHC&&(this.setAxisLabelsEnabled(r,o.y,!1),this.setAxisLabelsEnabled(r,o.x,!1),+a.showAllCategoryLabels?this.setAxisLabelsEnabled(r,"xAxis",this.getAxisVisibility("xAxis")):this.hideAxisProperties(r,"xAxis"),this.isSharedValueAxis()?(this.hideAxisProperties(r,"yAxis"),this.setAxisLabelsEnabled(r,"yAxis",!1)):this.setAxisLabelsEnabled(r,"yAxis",this.getAxisVisibility("yAxis")),this.setValueAxisLimits(r),this.adjustValuAxisLimits(n,r),this.setValueAxisLabelFormatter(r),r.xAxis&&r.xAxis.isValueAxis&&(this.setAxisLimits("xAxis",r.xAxis),this.adjustAxisLimits(r.xAxis))),e&&(r.title=vitaraJQ.extend(!0,r.title,{text:e||"",align:a.titleAlignment||"left"})),r.legend=r.legend||{},r.legend.enabled=!1,r}getAssignedChartTitle(t,e){if(t&&e&&(!this.getVizProps||0!=+this.getVizProps().smChartTitleEnable))return t.getDataRows&&t.getDataRows()&&t.getDataRows().title?t.getDataRows().title:e&&e.title?e.title:""}preRenderTrellisNodes(){}getChartsToRenderByLayout(t,e){return e.length>=t.length?t:t.slice(0,e.length)}renderTrellisNodes(){var t,e,i,s=this,n=(this.reMapTrellisSeriesColors(),this.getTrellisData());this.isLegendEnabled()?(i=this.getLegendOptions(),this.renderLegend(i),this.setLegendDims(r.vitaraLegend.getDimensions())):this.setLegendDims(null),this.isTypeIBCS()?(this.preRenderTrellisNodes(),this.getExtraTrellisOptions((function(a){t=s.initFlexTrellisLayout(s.getChartCount(),a),e=t.detail,s.setChartCount(t&&t.units&&t.units.length?t.units.length:s.getChartCount()),l.each(s.getChartsToRenderByLayout(s.getRenderedChartInstance(),t.units),(function(i,r){t.units[r]&&(i.setChartNode(t.units[r]),"function"==typeof i.processOptionsPreTrellisRender&&i.setRenderOptions(i.processOptionsPreTrellisRender(i.getRenderOptions())),i.setRenderOptions(s.preProcessHCTrellisOptionsIBCS(i.getRenderOptions(),s.getAssignedChartTitle(i,n[r]),r,e,i)),setTimeout((function(){i.renderChartOptions()}),0))})),s.isLegendEnabled()&&r.vitaraLegend.resetLegendForTrellis(i,r.vitaraLegend.getLegendOffset(s.getLegendDims()),s.domNode,s.chartNode),s.renderExtraTrellisUnits(a)}))):this.getExtraTrellisOptions((function(a){t=s.initTrellisLayout(s.getChartCount(),a),e=t.detail,s.equalizeBoundsByPlotArea(t,(function(t){l.each(s.getRenderedChartInstance(),(function(i,r){i.setChartNode(t[r]),"function"==typeof i.processOptionsPreTrellisRender&&i.setRenderOptions(i.processOptionsPreTrellisRender(i.getRenderOptions())),i.setRenderOptions(s.preProcessHCTrellisOptions(i.getRenderOptions(),s.getAssignedChartTitle(i,n[r]),r,e,i)),setTimeout((function(){i.renderChartOptions()}),0)})),s.isLegendEnabled()&&r.vitaraLegend.resetLegendForTrellis(i,r.vitaraLegend.getLegendOffset(s.getLegendDims()),s.domNode,s.chartNode)})),s.renderExtraTrellisUnits(a)}))}getTrellisIBCSOptions(){return null}formChartRendererInstances(){var t=this;l.each(this.getTrellisData(),(function(e,i){var s=t.getNewTrellisUnitRenderer(t.getVizDataInterface(),t.getNodePosition(),null,t.getExtraOptions(),l.cloneDeep(t.getVizProps()),e,t.getTrellisIBCSOptions());t.setRenderedChartInstance(s),s.formChartOptions()}))}isCompositeMode(){return!1}isTypeIBCS(){return!1}isMultiViewRenderMode(){return this.isTrellisMode()||this.isCompositeMode()}initializeChartProperties(){this.drillingEnabled=!1,this.propsEditor=null}renderSmallMultiple(){if(this.runningCounter=void 0!==this.runningCounter?this.runningCounter+1:0,this.runningCounter>=this.getChartCount())return;0===this.runningCounter&&(this.smallMultipleColorOptions={});let t=this,e=this.getRenderedChartInstance(this.runningCounter);function i(){e.setChartNode(this.trellisLayout.units[this.runningCounter]),"function"==typeof e.processOptionsPreTrellisRender&&e.setRenderOptions(e.processOptionsPreTrellisRender(e.getRenderOptions())),e.setRenderOptions(this.preProcessHCTrellisOptions(e.getRenderOptions(),this.getAssignedChartTitle(e,this.getTrellisData()[this.runningCounter]),this.runningCounter,this.trellisLayoutDetail,e)),e.onCompleteHCRender=this.renderSmallMultiple.bind(this),e.renderChartOptions(),this.runningCounter===this.getChartCount()-1&&(this.isLegendEnabled()&&r.vitaraLegend.resetLegendForTrellis(this.getLegendOptions(),r.vitaraLegend.getLegendOffset(this.getLegendDims()),this.domNode,this.chartNode),this.renderExtraTrellisUnits(this.extraTrellisOptions))}0==this.runningCounter?(this.reMapTrellisSeriesColors(),this.isLegendEnabled()?(this.renderLegend(this.getLegendOptions(!0)),this.setLegendDims(r.vitaraLegend.getDimensions())):this.setLegendDims(null),this.getExtraTrellisOptions((function(e){t.extraTrellisOptions=e,t.trellisLayout=t.initTrellisLayout(t.getChartCount(),e),t.trellisLayoutDetail=t.trellisLayout.detail,i.call(t)}))):i.call(t)}freshPlot(){var t,e;try{if(h.log(h.LEVEL.INFO,"initiating fresh plot."),this.initializeChartProperties(),this.addTemporaryStyles(),this.destroyRenderedChartInstances(),this.destroyRenderedHCCharts(),this.destroyTrellisContainer(),this.isMultiViewRenderMode())h.log(h.LEVEL.INFO,"attempting to render multiple views."),this.setRenderedMode(this.ENUM_RENDER_MODE.TRELLIS),this.setChartCount(null===(t=this.getTrellisData())||void 0===t?void 0:t.length),this.runningCounter=void 0,this.isTypeIBCS()?(this.formChartRendererInstances(),this.renderTrellisNodes()):(this.formChartRendererInstances(),this.renderSmallMultiple());else{h.log(h.LEVEL.INFO,"attempting to render single view."),this.setRenderedMode(this.ENUM_RENDER_MODE.SINGLE);let t=(null===(e=this.getDataRowsWithRest)||void 0===e?void 0:e.call(this))||null;var i=this.getNewTrellisUnitRenderer(this.getVizDataInterface(),this.getNodePosition(),this.getDomNode(),this.getExtraOptions(),this.getVizProps(),t);this.setRenderedChartInstance(i),i.render(),this.setChartCount(1)}h.log(h.LEVEL.INFO,"end of fresh plot.")}catch(t){throw t}}validateRePlot(){return(this.isMultiViewRenderMode()?this.ENUM_RENDER_MODE.TRELLIS:this.ENUM_RENDER_MODE.SINGLE)===this.getRenderedMode()&&this.getPrevVizProps().trellisNumColumns===this.getVizProps().trellisNumColumns}updateChartRendererInstances(t){l.each(this.getRenderedChartInstance(),(function(e){e.setVizProps(l.cloneDeep(t)),e.formChartOptions()}))}vitaraRePlot(t){try{var e;h.log(h.LEVEL.INFO,"initiating rePlot."),this.isMultiViewRenderMode()?(h.log(h.LEVEL.INFO,"attempting to rePlot multiple views."),this.updateChartRendererInstances(t),this.renderTrellisNodes()):(h.log(h.LEVEL.INFO,"attempting to rePlot single view."),this.drillingEnabled?((e=this.getRenderedChartInstance(this.getRenderedChartInstance().length-1)).setChartNode(this.getDomNode()),e.replot(t),this.addDrillBackButton()):((e=this.getRenderedChartInstance(0)).setChartNode(this.getDomNode()),e.replot(t))),h.log(h.LEVEL.INFO,"end of rePlot.")}catch(t){throw t}}getCacheKeysToClear(){return[this.CACHE_KEYS.CHART_DATA_MAPPER,this.CACHE_KEYS.TRELLIS_DATA,this.CACHE_KEYS.VALUE_AXES_MIN_MAX,this.CACHE_KEYS.IBCS_LAYOUT_WEIGHTS,this.CACHE_KEYS.AXES_VISIBILITY_INFO]}vitaraPlot(t){try{h.log(h.LEVEL.INFO,"initiating vitaraPlot, replot="+Boolean(t)),this.LAST_RENDER_FAILED||!t||t&&!this.validateRePlot()?(h.log(h.LEVEL.INFO,"attempting to fresh plot."),this.initiateHC(),this.destroyCaches(this.getCacheKeysToClear()),this.freshPlot()):(h.log(h.LEVEL.INFO,"attempting to rePlot."),this.destroyRenderedHCCharts(),this.destroyRenderedChartInstances(!0),this.destroyCaches([this.CACHE_KEYS.VALUE_AXES_MIN_MAX,this.CACHE_KEYS.AXES_VISIBILITY_INFO]),this.vitaraRePlot(this.getVizProps())),this.setPrevVizProps(l.cloneDeep(this.getVizProps())),this.LAST_RENDER_FAILED=!1,h.log(h.LEVEL.INFO,"end of vitaraPlot.")}catch(t){this.LAST_RENDER_FAILED=!0,this.handleVizError(t)}}getRenderedTrellisUnitsCount(){return this.renderedTrellisUnitsCount||(this.renderedTrellisUnitsCount=0),this.renderedTrellisUnitsCount}setRenderedTrellisUnitsCount(t){this.renderedTrellisUnitsCount=t}adjustValueAxisExtremes(t){if(t.scriptClass&&"renderHCDeltaView"===t.scriptClass){var e,i=t.axes[1].getExtremes();i.min<i.dataMin&&(e=i.dataMin>0?i.min:i.min-i.dataMin,t.axes[1].setExtremes(i.min-e,i.max-e))}}updateVizPostHCRender(t){this.isTypeIBCS()&&this.adjustValueAxisExtremes(t)}processPostRenderUpdates(t){try{if(!this.isHC)return;t&&t.updateVizPostHCRender?t.updateVizPostHCRender():this.updateVizPostHCRender(t.renderedChart)}catch(t){console.log(t)}}processPostTrellisRenderUpdates(){try{if(!this.isHC)return;l.each(this.getRenderedChartInstance(),(function(t){t&&t.updateVizPostTrellisRender&&t.updateVizPostTrellisRender()}))}catch(t){console.log(t)}}postChartRendering(t){if(this.setRenderedTrellisUnitsCount(this.getRenderedTrellisUnitsCount()+1),this.isHC){t&&this.setRenderedHCInstance(t);var e=this.getRenderedChartInstance(this.getRenderedTrellisUnitsCount()-1);e&&e.plotThresholdBackground&&e.plotThresholdBackground(t)}this.processPostRenderUpdates(this.getRenderedChartInstance()[this.getRenderedTrellisUnitsCount()-1]),this.getRenderedTrellisUnitsCount()===this.getChartCount()&&(this.processPostTrellisRenderUpdates(),this.setTrellisContainerHeight(),this.reportReadyForExport(),this.postTrellisRendering&&this.postTrellisRendering(this.getRenderedChartInstance(),this.isHC?this.getRenderedHCInstance():null))}setTrellisContainerHeight(){if(this.isTrellisMode()){var t=vitaraJQ(".trellis_container",this.getDomNode());if(t&&t[0]&&!t[0].style.height){var e=t.attr("style"),i=this.utils.getElementDimensions(t[0]);i&&i.height&&t.attr("style",e+"height:"+i.height+"px;")}}}destroyRenderedHCCharts(){l.each(this.getRenderedHCInstance(),(function(t){try{t&&t.motion&&t.motion.pause&&t.motion.pause(),t&&t.destroy&&t.destroy()}catch(t){console.log(t)}})),this.setRenderedHCInstances(null)}destroyRenderedChartInstances(t){try{l.each(this.getRenderedChartInstance(),(function(e){e&&(e.destroyCustomStyles&&e.destroyCustomStyles(),e.playControlsContainer&&e.removePlayContainersAndResetChartNode(),e.destroy&&!t&&e.destroy())})),t||this.setRenderedChartInstances(null)}catch(t){console.log(t)}}destroyTrellisContainer(){try{vitaraJQ(".trellis_container",this.getDomNode()).remove()}catch(t){console.log(t)}}getLegendLabels(){var t=[];return l.each(this.getRenderedChartInstance(),(function(e){e.getRenderOptions()&&e.getRenderOptions().series&&l.each(e.getRenderOptions().series,(function(i,s){(void 0===i.showInLegend||i.showInLegend)&&t.push({label:i.name,color:i.color||e.getRenderOptions().colors[s%e.getRenderOptions().colors.length]})}))})),l.uniqWith(t,l.isEqual)}isLegendEnabled(){return+vitaraJQ.extend(!0,{},this.SMALL_MULTIPLE_OPTIONS.legend,this.getVizProps().legend).enabled}getLegendOptions(t){var e=[],i={};return e=this.getLegendLabels(),(i=vitaraJQ.extend(i,{enabled:!0,align:"center",layout:"horizontal",position:"relative",verticalAlign:"bottom",visibility:t?"hidden":"visible",options:{padding:5},containerWidth:this.getNodePosition().width-10,containerHeight:this.getNodePosition().height-10},this.SMALL_MULTIPLE_OPTIONS.legend,this.getVizProps().legend)).colors=e.map((function(t){return t.color})),i.labels=e.map((function(t){return t.label})),i}renderLegend(t,e){var i,s=this.getRenderedChartInstance()[0],n=s.getUniqueChartStyle("name");"middle"===t.verticalAlign&&"center"===t.align&&(t.verticalAlign="bottom"),i="text-align:"+t.align+";","vertical"===t.layout&&(i+="display:inline-block;","top"===t.verticalAlign&&(i+="vertical-align:top;")),"hidden"===t.visibility&&(i+="visibility: hidden;"),vitaraJQ(".vitara-legend",this.getDomNode()).remove(),s.processVitaraLegendItems(t),r.vitaraLegend.init(t,vitaraD3.select(this.domNode).select(".vitara-chart-container").append("div").attr("class",n+" vitara-legend").attr("id","vitara-legend").attr("style",i),this.getDomNode(),null,this.legendClickHandler.bind(this))}legendClickHandler(t){var e=this,i=!1;return l.each(this.getRenderedHCInstance(),(function(s){if(e.getTrellisLayoutHelper().isTellisContainer(s&&s.container&&s.container.parentNode)){var n=s.get(t);n&&(i=!n.visible,n.setVisible(i))}})),i}mapSeriesToEditableOptions(t,e){let i=[];if(!t||!t.options)return i;let s=this,n=t.options.chart.type;return l.each(e,(function(t){t.name&&"errorbar"!==t.type&&!1!==t.showInLegend&&!t.isAggregate&&(i.push({name:t.name,sId:t.sId,type:s.getSeriesType(t,n),yAxis:t.yAxis?Number(t.yAxis):0,color:t.color?t.color:"",connectNulls:t.connectNulls,pointWidth:t.pointWidth,ebEnabled:t.ebEnabled,ebHighSeries:t.ebHighSeries,ebLowSeries:t.ebLowSeries,ebColor:t.ebColor,deltaEnabled:t.deltaEnabled,deltaSeries:t.deltaSeries,deltaColorInvert:t.deltaColorInvert,deltaDataLabels:t.deltaDataLabels,deltaBarsWidth:t.deltaBarsWidth,repeatMarker:t.repeatMarker,unitsPerRow:t.unitsPerRow,maintainInfographicAspectRatio:t.maintainInfographicAspectRatio,infographicFill:t.infographicFill,infoMarkerType:t.infoMarkerType,infographicFillPercentageMetric:t.infographicFillPercentageMetric,infographicFillDirection:t.infographicFillDirection,infographicUnfilledColor:t.infographicUnfilledColor,infographicMaxValue:t.infographicMaxValue,dashStyle:t.dashStyle,fillPattern:t.fillPattern||"nofill",infographicCustomSVGEnable:t.infographicCustomSVGEnable,infographicCustomSVGPath:t.infographicCustomSVGPath,userAddedMetricSeries:t.userAddedMetricSeries,animation:t.animation,marker:t.marker,seriesLineSmooth:t.seriesLineSmooth,enableGradientColor:t.enableGradientColor,gradientColor:t.gradientColor,seriesColor:t.seriesColor,dataMarkerLink:t.dataMarkerLink,tooltip:t.tooltip?t.tooltip:void 0,dataLabels:t.dataLabels?s.mapSeriesDatalabelOptions(t.dataLabels):void 0,aggDataBy:void 0===t.aggDataBy?"default":t.aggDataBy}),t.marker&&"dataMarkers"==t.marker.aliasType&&(i[i.length-1].type=t.marker.aliasType,i[i.length-1].marker={}))})),l.uniqWith(i,l.isEqual)}mapSeriesDatalabelOptions(t){return t?{status:t.status,customLabels:t.customLabels}:t}getSeriesElements(t){var e=[],i=this;return l.each(this.getRenderedHCInstance()||t,(function(t){t&&t.options&&t.options.series&&t.options.series.length>0&&e.push(...i.mapSeriesToEditableOptions(t,t.options.series))})),l.uniqWith(e,l.isEqual)}isSharedValueAxis(){return void 0===this.getVizProps().sharedValueAxis||+this.getVizProps().sharedValueAxis}includeChartForMinMax(t){return!0}getMinMaxFromData(){if(!this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]||!this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].seriesLimits){var t=this,e=[];l.each(this.getRenderedChartInstance(),(function(i){t.includeChartForMinMax(i)&&(i.VALUE_MARKER,i.getRenderOptions().series&&("function"==typeof i.getMinMaxFromData?l.each(i.getMinMaxFromData(),(function(t,i){e[i]||(e[i]={}),e[i].min=Math.min(t.min,e[i].min?e[i].min:Number.MAX_SAFE_INTEGER),e[i].max=Math.max(t.max,e[i].max?e[i].max:Number.MIN_SAFE_INTEGER)})):e=t.getMinMaxFromSeries(i,e)))})),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]||(this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]={}),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].seriesLimits=e}return this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].seriesLimits}validateSeriesForMinMax(t){return!0}getMinMaxFromSeries(t,e,i,s){var n=this,r=i||t.VALUE_MARKER||"rawVal",a=s||"yAxis";return e||(e=[]),l.each(t.getRenderOptions().series,(function(t){if(n.validateSeriesForMinMax(t)&&t.data){var i=void 0!==t[a]?t[a]:0;e[i]=n.getMinMaxFromSeriesData(t,e[i],r)}})),e}getMinMaxFromSeriesData(t,e,i){return e||(e={}),i||(i="rawVal"),l.each(t.data,(function(t){t&&!isNaN(t[i])&&void 0!==t[i]&&null!==t[i]&&""!==t[i]&&(e.min=Math.min(t[i],e.min?e.min:Number.MAX_SAFE_INTEGER),e.max=Math.max(t[i],e.max?e.max:Number.MIN_SAFE_INTEGER))})),e}getTrellisValueAxisMinMax(){var t,e;return this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]&&this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].yAxisLimits||(l.each(this.getRenderedChartInstance(),(function(i){var s=i.getRenderOptions();s&&s.yAxis&&(t=s.yAxis,l.isArray(t)?(e=e||[{},{}],l.each(t,(function(t,i){void 0!==t.min&&(e[i].min=Math.min(t.min,void 0!==e[i].min?e[i].min:Number.MAX_SAFE_INTEGER)),void 0!==t.max&&(e[i].max=Math.max(t.max,void 0!==e[i].max?e[i].max:Number.MIN_SAFE_INTEGER))}))):(e=e||{},void 0!==t.min&&(e.min=Math.min(t.min,void 0!==e.min?e.min:Number.MAX_SAFE_INTEGER)),void 0!==t.max&&(e.max=Math.max(t.max,void 0!==e.max?e.max:Number.MIN_SAFE_INTEGER))))})),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]||(this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]={}),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].yAxisLimits=e),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX].yAxisLimits}getValueAxisLimits(t){if(!this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]){var e,i=this.getTrellisValueAxisMinMax(),s=l.isArray(i),n=s?l.filter(i,(function(t){return l.has(t,"min")&&l.has(t,"max")})).length<2:!l.has(i,"min")||!l.has(i,"max");this.isSharedValueAxis()&&n&&(e=this.getMinMaxFromData(),i=vitaraJQ.extend(!0,s?e:e[0],i)),this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]=i}return this[this.CACHE_KEYS.VALUE_AXES_MIN_MAX]}getAxisLimits(t,e){if(t&&e&&e.isValueAxis&&e.valueMarker){var i=this,s=[];return l.each(this.getRenderedChartInstance(),(function(n){n.getRenderOptions().series&&(s=i.getMinMaxFromSeries(n,s,e.valueMarker,t))})),s}}setAxisLimits(t,e){var i=this.getAxisLimits(t,e);if(i&&i[0])return e.min=i[0].min,e.max=i[0].max,e}isTypeOfPolarChart(t){return["pie","solidgauge"].indexOf(t)>-1}setValueAxisLimits(t,e){if(t&&t.yAxis&&!this.isTypeOfPolarChart(t&&t.chart?t.chart.type:""))return t.yAxis=vitaraJQ.extend(!0,t.yAxis,e||this.getValueAxisLimits()),t}destroyCaches(t){var e=this;l.each(t,(function(t){e[t]=null}))}reMapTrellisSeriesColorsPerNode(t,e){if(!this.isHC)return!1;let i=this.getRenderedChartInstance()[e];if(!i)return;let s=t.seriesColorMap||{},n=t.colorDetails||i.getColorDetails(i.getColorPalette()),r=i.getRenderOptions(),a=t.invertColors||Boolean(+this.getVizProps().invertColors);return void 0===n.usedIndices&&(n.usedIndices=0),n&&r&&(l.each(r.series,(function(t,e){s[t.name]||(s[t.name]=a?{colorIndex:n.startIndex+n.colors.length-1-n.usedIndices%n.colors.length,color:n.colors[n.colors.length-1-n.usedIndices%n.colors.length]}:{colorIndex:n.startIndex+n.usedIndices%n.colors.length,color:n.colors[n.usedIndices%n.colors.length]},n.usedIndices++),void 0===r.series[e].colorIndex||r.series[e].color||(r.series[e].colorIndex=s[t.name].colorIndex,r.series[e].color=s[t.name].color)})),i.setRenderOptions(r)),{seriesColorMap:s,colorDetails:n,invertColors:a}}reMapTrellisSeriesColors(){if(!this.isHC)return!1;var t,e,i={},s=Boolean(+this.getVizProps().invertColors);return l.each(this.getRenderedChartInstance(),(function(n,r){t||((t=n.getColorDetails(n.getColorPalette())).usedIndices=0),e=n.getRenderOptions(),t&&e&&(l.each(e.series,(function(n,r){i[n.name]||(i[n.name]=s?{colorIndex:t.startIndex+t.colors.length-1-t.usedIndices%t.colors.length,color:t.colors[t.colors.length-1-t.usedIndices%t.colors.length]}:{colorIndex:t.startIndex+t.usedIndices%t.colors.length,color:t.colors[t.usedIndices%t.colors.length]},t.usedIndices++),void 0===e.series[r].colorIndex||e.series[r].color||(e.series[r].colorIndex=i[n.name].colorIndex,e.series[r].color=i[n.name].color)})),n.setRenderOptions(e))})),i}equalizeBoundsByPlotArea(t,e){e(t.units)}getRenderedAxisProperties(t,e,i,s){var n=0,r=!!e&&e.opposite;return(!this.isTypeIBCS()&&this.isTrellisMode()||this.isIBCSEnabledWithSmallMultiples&&this.isIBCSEnabledWithSmallMultiples())&&(n=10),t||(t={}),e?(e.isHorizontal?("sYAxis"===i&&(!t.includeTopExtra||(r=!1)),r?(t.includeTopExtra=s,t.topExtraUnit={name:i,height:e.bounds.height+n,titleOffset:e.titleOffset}):(t.includeBottomExtra=s,t.bottomExtraUnit={name:i,height:e.bounds.height+n})):("sYAxis"===i&&(!t.includeRightExtra||(r=!1)),r?(t.includeRightExtra=s,t.rightExtraUnit={name:i,width:e.bounds?e.bounds.width+n:null,height:e.bounds?e.bounds.height:null,titleOffset:e.titleOffset}):(t.includeLeftExtra=s,t.leftExtraUnit={name:i,width:e.bounds?e.bounds.width+n:null,height:e.bounds?e.bounds.height:null})),t):t}getExtraTrellisOptions(t){var e=this,i=this.getExtraUnitHCOptionsSample();!this.isTypeOfPolarChart(i&&i.chart?i.chart.type:"")&&this.isHC?this.getTrellisLayoutHelper().getExtraUnitBounds(this.processSampleAxisOptions(this.formExtraUnitHCOptions(i)),this.getSampleUnitBounds(),(function(i){var s={};i&&(s=e.getRenderedAxisProperties(s,i.xAxis,"xAxis",!!e.isTypeIBCS()||1!=+e.getVizProps().showAllCategoryLabels),s=e.getRenderedAxisProperties(s,i.yAxis,"yAxis",!e.isCompositeMode()&&+e.isSharedValueAxis()),s=e.getRenderedAxisProperties(s,i.sYAxis,"sYAxis",!e.isCompositeMode()&&+e.isSharedValueAxis())),t(s)})):t()}processSampleAxisOptions(t){return t}getSampleUnitBounds(){return{width:Math.floor(this.getNodePosition().width),height:Math.floor(this.getNodePosition().height)}}getCategoryAxisMax(t){var e=0;return t&&function t(i){for(var s,n=i.length;n--;)(s=i[n]).categories?t(s.categories):e++}(t),e-1}getXMax(t){return this.getCategoryAxisMax(t)}formExtraUnitHCOptions(t){var e=l.cloneDeep(t);return e&&e.title&&(e.title.className="vitara-label-container-title"),this.setAxisLabelsEnabled(e,"xAxis",!0),l.isArray(e.xAxis)?(this.setAxisVisibility(e,"xAxis",this.getAxisVisibility("xAxis",0),0),this.setAxisVisibility(e,"xAxis",this.getAxisVisibility("xAxis",1),1)):this.setAxisVisibility(e,"xAxis",this.getAxisVisibility("xAxis")),this.setCategoryAxisLabelFormatter(e),this.setAxisLabelsEnabled(e,"yAxis",!0),l.isArray(e.yAxis)?(this.setAxisVisibility(e,"yAxis",this.getAxisVisibility("yAxis",0),0),this.setAxisVisibility(e,"yAxis",this.getAxisVisibility("yAxis",1),1)):this.setAxisVisibility(e,"yAxis",this.getAxisVisibility("yAxis")),l.isArray(e.xAxis)?(e.xAxis[0]&&(e.xAxis[0].labels.useHTML=!1),e.xAxis[1]&&(e.xAxis[1].labels.useHTML=!1)):e.xAxis.labels.indent?e.xAxis.labels.useHTML=!0:e.xAxis.labels.useHTML=!1,e.yAxis.length?(e.yAxis[0]&&(e.yAxis[0].labels.useHTML=!1),e.yAxis[1]&&(e.yAxis[1].labels.useHTML=!1)):e.yAxis.labels.useHTML=!1,e.yAxis.length?(delete e.yAxis[0].stackLabels,delete e.yAxis[0].plotLines,e.yAxis[1]&&delete e.yAxis[1].plotLines):(delete e.yAxis.stackLabels,delete e.yAxis.plotLines),delete e.tooltip,delete e.defs,e.legend&&(e.legend.enabled=!1),"column"===e.chart.type&&(l.isArray(e.xAxis)?(e.xAxis[0]&&(e.xAxis[0].labels.align="left"),e.xAxis[1]&&(e.xAxis[1].labels.align="left")):e.xAxis.labels.align="left"),this.removeAxisLabelTextOverflow(e),e}removeAxisLabelTextOverflow(t){const e=function(t){var e,i;(null===(i=null===(e=t.labels)||void 0===e?void 0:e.style)||void 0===i?void 0:i.textOverflow)&&delete t.labels.style.textOverflow};t.xAxisLabelTruncate&&(l.isArray(t.xAxis)?t.xAxis.forEach((function(t){e(t)})):e(t.xAxis)),t.yAxisLabelTruncate&&(l.isArray(t.yAxis)?t.yAxis.forEach((function(t){e(t)})):e(t.yAxis))}getAxisVisibility(t,e){return this.getAxesVisibility()[t]&&l.isArray(this.getAxesVisibility()[t])?this.getAxesVisibility()[t][e||0]:this.getAxesVisibility()[t]}getAxesVisibility(){if(!this[this.CACHE_KEYS.AXES_VISIBILITY_INFO]){var t=this,e={},i=this.getExtraUnitHCOptionsSample();l.each(this.AXES_COL,(function(s){i[s]&&(l.isArray(i[s])?e[s]=[t.getAxisVisibilityHCOptions(s,0,i),t.getAxisVisibilityHCOptions(s,1,i)]:e[s]=t.getAxisVisibilityHCOptions(s,void 0,i))})),this[this.CACHE_KEYS.AXES_VISIBILITY_INFO]=e}return this[this.CACHE_KEYS.AXES_VISIBILITY_INFO]}getAxisVisibilityHCOptions(t,e,i){if(i&&i[t]){var s=l.isArray(i[t])?i[t][e||0]:i[t],n=s.labels?s.labels.enabled:void 0;return void 0!==n?n:void 0!==s.visible?s.visible:this.getAxisVisibilityVizProps(t)}}getAxisVisibilityVizProps(t){return this.getVizProps()[t]&&this.getVizProps()[t].labels?0!=+this.getVizProps()[t].labels.enabled:void 0}formBottomExtraUnitHCOptions(t,e){return e.bottomExtraUnit?this.formExtraTrellisUnitOptions(t,e.bottomExtraUnit,!0,e.leftExtraUnit||e.rightExtraUnit):{}}formLeftExtraUnitHCOptions(t,e){return e.leftExtraUnit?this.formExtraTrellisUnitOptions(t,e.leftExtraUnit,!1,e.bottomExtraUnit||e.topExtraUnit):{}}formTopExtraUnitHCOptions(t,e){return e.topExtraUnit?this.formExtraTrellisUnitOptions(t,e.topExtraUnit,!0,e.leftExtraUnit||e.rightExtraUnit):{}}formRightExtraUnitHCOptions(t,e){return e.rightExtraUnit?this.formExtraTrellisUnitOptions(t,e.rightExtraUnit,!1,e.bottomExtraUnit||e.topExtraUnit):{}}setCategoryAxisLabelFormatter(t){return t}formExtraTrellisUnitOptions(t,e,i,s){var n=this.formExtraUnitHCOptions(t);return i?(delete n.chart.marginTop,delete n.chart.marginBottom):(delete n.chart.marginLeft,delete n.chart.marginRight),"xAxis"===e.name?(n.chart.type,n.series=[{}],n=this.setExtraXAxisProperties(n,e,i,s)):(n.series=[{}],n=this.setExtraYAxisProperties(n,e,i,s)),n}hasGroupedCategories(t){let e=this.getRenderedChartInstance()[0],i=e&&e.getChartDataMapper(),s=i&&i.xCategories?i.xCategories.length:void 0;return void 0!==s?s>1:t&&t.labels&&t.labels.groupedOptions}setExtraXAxisProperties(t,e,i,s){var n,r=!this.isTypeIBCS()&&!this.isSharedValueAxis();return this.setAxisLabelsEnabled(t,"yAxis",!1),this.setAxisVisibility(t,"yAxis",!1),this.setAxisTitleVisibility(t,"yAxis",!1),this.showAxisProperties(t,"xAxis"),t.xAxis.length?(n="xAxis"===e.name?0:1,t.xAxis[n].categories&&(t.xAxis[n].min=0,t.xAxis[n].max=this.getXMax(t.xAxis[n].categories)),this.setAxisLabelsEnabled(t,"xAxis",!1,"xAxis"===e.name?1:0),this.setAxisVisibility(t,"xAxis",!1,"xAxis"===e.name?1:0),t.xAxis[n]&&(t.xAxis[n].labels.useHTML=!0)):(this.hasGroupedCategories()||(t.xAxis.labels.useHTML=!0),t.xAxis.categories&&(t.xAxis.min=0,t.xAxis.max=this.getXMax(t.xAxis.categories))),i?(r&&s&&(t.yAxis.length&&(t.chart.marginRight=(t.chart.marginRight?t.chart.marginRight:0)+s.width),t.chart.marginLeft=(t.chart.marginLeft?t.chart.marginLeft:0)+s.width),l.isArray(t.xAxis)?t.xAxis[n]&&(t.xAxis[n].height=0,t.xAxis[n].labels.align="center",t.xAxis[n].labels.verticalAlign="bottom"):(t.xAxis.height=0,t.xAxis.labels.align="center",t.xAxis.labels.verticalAlign="bottom"),delete t.title):(r&&s&&(t.yAxis.length&&(t.chart.marginTop=(t.chart.marginTop?t.chart.marginTop:0)+s.height),t.chart.marginBottom=(t.chart.marginBottom?t.chart.marginBottom:0)+s.height),l.isArray(t.xAxis)?(e.titleOffset&&(t.xAxis[n].title.offset=e.width-e.titleOffset),t.xAxis[n].width=0):(e.titleOffset&&(t.xAxis.title.offset=e.width-e.titleOffset),t.xAxis.width=0)),t.title&&t.title.text&&(t.title.text=l.truncate(t.title.text,{length:3,omission:""})),r||delete t.yAxis,t}setAxisTitleVisibility(t,e,i,s){let n=this,r="";return void 0===s&&l.isArray(t[e])?(l.each(t[e],(function(s,r){n.setAxisTitleVisibility(t,e,i,r)})),t):(r=(void 0!==s?e+"["+s+"]":e)+".title.text",i||void 0===l.get(t,r)||l.set(t,r,""),t)}setExtraYAxisProperties(t,e,i,s){var n,r=!this.isTypeIBCS()&&this.getVizProps().showAllCategoryLabels;return this.setAxisLabelsEnabled(t,"xAxis",!1),this.setAxisVisibility(t,"xAxis",!1),this.setAxisTitleVisibility(t,"xAxis",!1),t.yAxis.length?(n="yAxis"===e.name?0:1,this.setAxisLabelsEnabled(t,"yAxis",!1,"yAxis"===e.name?1:0),this.setAxisVisibility(t,"yAxis",!1,"yAxis"===e.name?1:0),t.yAxis[n]&&(t.yAxis[n].labels.useHTML=!0)):t.yAxis.labels.useHTML=!0,this.showAxisProperties(t,"yAxis",n),i?(r&&s&&(t.chart.marginLeft=(t.chart.marginLeft?t.chart.marginLeft:0)+s.width),t.yAxis.length?t.yAxis[n].height=0:t.yAxis.height=0,t.title&&t.title.text&&(t.title={text:""})):(r&&s&&(t.chart.marginBottom=(t.chart.marginBottom?t.chart.marginBottom:0)+s.height),t.yAxis.length?t.yAxis[n].width=0:t.yAxis.width=0),t}getExtraUnitHCOptionsSample(){return this.getRenderedChartInstance()[0].getRenderOptions()}renderExtraTrellisUnits(t){var e=this,i=function(t){e.isHC&&e.setRenderedHCInstance(t)};l.each(this.getTrellisLayoutHelper().getLeftExtraTrellisUnits(),(function(s){Highcharts.chart(s,e.formLeftExtraUnitHCOptions(e.getExtraUnitHCOptionsSample(),t),i)})),l.each(this.getTrellisLayoutHelper().getBottomExtraTrellisUnits(),(function(s){Highcharts.chart(s,e.formBottomExtraUnitHCOptions(e.getExtraUnitHCOptionsSample(),t),i)})),l.each(this.getTrellisLayoutHelper().getRightExtraTrellisUnits(),(function(s){Highcharts.chart(s,e.formRightExtraUnitHCOptions(e.getExtraUnitHCOptionsSample(),t),i)})),l.each(this.getTrellisLayoutHelper().getTopExtraTrellisUnits(),(function(s){Highcharts.chart(s,e.formTopExtraUnitHCOptions(e.getExtraUnitHCOptionsSample(),t),i)}))}getTrellisDataElements(){return this.getChartDataMapper().getGroupElements()}postTrellisRendering(t,e){this.setRenderedTrellisUnitsCount(0),this.endChartRendering(!1,!0)}endChartRendering(t,e){(t||e)&&super.endChartRendering(t)}scaleRenderedChart(t){this.isTrellisMode()||super.scaleRenderedChart(t),l.each(this.getRenderedChartInstance(),(function(e){e.setRelativeScaling.call(e,t)}))}onBackgroundImageEnabled(t){if(super.onBackgroundImageEnabled(t),t&&t.className){var e=vitaraJQ(".labelElement",this.domNode);e&&e.length>0&&(e.hasClass(t.className)||e.addClass(t.className));var i=vitaraJQ(".vitara-legend",this.domNode);i&&i.length>0&&(i.hasClass(t.className)||i.addClass(t.className))}}}},469:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var s=i(234),n=i(4);class r extends s.chartDataMapperBase{constructor(t,e,i,s,n,r){super(t,e,i,s),this.setNumAttributes(i),this.setTitles(e),this.setDataRows(t),this.setContext(s),this.setTrellisZone(n),this.setCategoryZone(r)}getDataRows(){return this.dataRows}setDataRows(t){this.dataRows=t}getContext(){return this.context}setContext(t){this.context=t}getTitles(){return this.titles}setTitles(t){this.titles=t}getCategoryZone(){return this.categoryZone}setCategoryZone(t){this.categoryZone=t}getTrellisZone(){return this.trellisZone}setTrellisZone(t){this.trellisZone=t}getNumAttributes(){return this.numAttributes}setNumAttributes(t){this.numAttributes=t}getCategoryAxisTitles(){return n.difference(this.getTitles().slice(0,this.getNumAttributes()),[this.getTrellisAttribute()])}getUniqueCategories(){return this.trellisUniqueCategories||(this.sortAndReorderBasedOnColumns(n.map(this.getCategoryZone(),"name")),this.trellisUniqueCategories=this.extractUniqueAndReplaceWithIndex(n.map(this.getCategoryZone(),"name"),this.SERIES_INDEX_MARKER,!0),this.restoreOriginalOrder()),this.trellisUniqueCategories}getCategoriesByTitle(t){if(t&&t[0]&&t[0].name)return this.extractUniqueCategoriesByColumn(t[0].name)}getMetricFormattingOptions(){let t=[];for(let e=this.getNumAttributes();e<this.getNumColumns();e++){let i=this.getMetricFormatObject(e);t.push(i&&i.formatOptions)}return t}}const a=r},470:(t,e,i)=>{i.r(e),i.d(e,{trellisLayoutHelper:()=>a});var s=i(45),n=i(471),r=i(4),a=function(t){t&&(this.context=t.context?t.context:null,this.userOptions=t.options?t.options:null),this.options=vitaraJQ.extend(!0,{},this.getDefOptions(),this.userOptions)};vitaraJQ.extend(a.prototype,{CSS_ID:"trellisElement",CSS_ID2:"trellis_container",CSS_ID3:"trellis_last_row",CSS_ID4:"trellis_boundary_element",CSS_ID5:"trellisLabelElement",CSS_ID6:"labelElement",CSS_ID7:"leftLabelElement",CSS_ID8:"bottomLabelElement",CSS_ID9:"rightLabelElement",CSS_ID10:"topLabelElement",ENUM_SPLIT_MODE:{HORIZONTAL:1,VERTICAL:2,ROWS_COLUMNS:3},ENUM_LAYOUT_TYPES:{REG:0,IBCS:1},getLayoutType:function(){return this.isIBCSLayout()?this.ENUM_LAYOUT_TYPES.IBCS:this.ENUM_LAYOUT_TYPES.REG},getDefOptions:function(){return{splitMode:this.ENUM_SPLIT_MODE.VERTICAL,layout:{margin:2},unit:{minWidth:200,minHeight:120}}},getOptions:function(){return this.options},setOptions:function(t){this.options=vitaraJQ.extend(!0,{},this.getDefOptions(),t)},isIncludeLeftExtra:function(){return this.getOptions().includeLeftExtra},getLeftExtraUnitBounds:function(t){return t?vitaraJQ.extend({},t,{width:this.getOptions().leftExtraUnit.width}):this.getOptions().leftExtraUnit},isIncludeRightExtra:function(){return this.getOptions().includeRightExtra},getRightExtraUnitBounds:function(t){return t?vitaraJQ.extend({},t,{width:this.getOptions().rightExtraUnit.width}):this.getOptions().rightExtraUnit},isIncludeTopExtra:function(){return this.getOptions().includeTopExtra},getTopExtraUnitBounds:function(t){return t?vitaraJQ.extend({},t,{height:this.getOptions().topExtraUnit.height}):this.getOptions().topExtraUnit},isIncludeBottomExtra:function(){return this.getOptions().includeBottomExtra},getBottomExtraUnitBounds:function(t){return t?vitaraJQ.extend({},t,{height:this.getOptions().bottomExtraUnit.height}):this.getOptions().bottomExtraUnit},getLeftBottomExtraUnitBounds:function(){return{width:this.getOptions().leftExtraUnit.width,height:this.getOptions().bottomExtraUnit.height}},getLeftTopExtraUnitBounds:function(){return{width:this.getOptions().leftExtraUnit.width,height:this.getOptions().topExtraUnit.height}},getRightTopExtraUnitBounds:function(){return{width:this.getOptions().rightExtraUnit.width,height:this.getOptions().topExtraUnit.height}},getRightBottomExtraUnitBounds:function(){return{width:this.getOptions().rightExtraUnit.width,height:this.getOptions().bottomExtraUnit.height}},getParent:function(){return this.getOptions().parentElement},getSplitMode:function(){return this.getOptions().splitMode},getTrellisCount:function(){return this.getOptions().trellisElems},isIBCSLayout:function(){return this.getOptions().layoutType===this.ENUM_LAYOUT_TYPES.IBCS},getIBCSSecondaryUnitCount:function(){return this.getOptions().secondaryElems},getIBCSSecondaryLayoutWeight:function(){return this.getOptions().secondaryLayoutWeight},getIBCSLayoutWeights:function(){return this.getOptions().layoutWeights},isIBCSHorizantalLayout:function(){return this.getOptions().isHorizontal},computeBestFitForRows:function(t,e){for(var i=Math.ceil(e/t);e/(t*i)<1&&!(e/((t-1)*i)>1);)t--;return t},computeNumOfColsForBestFit:function(t,e,i){var s,n,r,a,o=Math.floor(t.width/e.width)||1;if(1==o)return o;for(s=o;s>1&&(a=s,n=Math.ceil(i/a),!(e.height*n>t.height));s--)r=s;return this.computeBestFitForRows(r||o,i)},getNumCols:function(){return this.getSplitMode()===this.ENUM_SPLIT_MODE.ROWS_COLUMNS?this.getOptions().cols:this.getSplitMode()===this.ENUM_SPLIT_MODE.VERTICAL?1:this.getSplitMode()===this.ENUM_SPLIT_MODE.HORIZONTAL?this.getTrellisCount():this.computeNumOfColsForBestFit(this.getParentBounds(),this.getUnitBounds(),this.getTrellisCount())},getLayout:function(){return this.getOptions().layout},getUnitBounds:function(){var t={};return this.getOptions().unit&&(t.width=this.getOptions().unit.minWidth,t.height=this.getOptions().unit.minHeight),t.width||t.height?t:null},getActualParentBounds:function(){var t={};return this.getOptions().layout&&(t.width=this.getOptions().layout.width,t.height=this.getOptions().layout.height,this.getOptions().layout.margin&&(t.width=t.width-this.getOptions().layout.margin,t.height=t.height-this.getOptions().layout.margin)),t.width||t.height?t:null},getParentWidthByUnits:function(t,e){var i=this.getParentBounds(),s=this.getActualParentBounds();return(r.isArray(t)?r.sum(r.map(t,(function(t){return t.width}))):t.width*e)+(s.width-i.width)},getTrellisUsableParentBounds:function(t){if(t)return this.isIncludeLeftExtra()&&this.getLeftExtraUnitBounds()&&(t.width=this.getLeftExtraUnitBounds().width?t.width-this.getLeftExtraUnitBounds().width:t.width),this.isIncludeBottomExtra()&&this.getBottomExtraUnitBounds()&&(t.height=this.getBottomExtraUnitBounds().height?t.height-this.getBottomExtraUnitBounds().height:t.height),this.isIncludeRightExtra()&&this.getRightExtraUnitBounds()&&(t.width=this.getRightExtraUnitBounds().width?t.width-this.getRightExtraUnitBounds().width:t.width),this.isIncludeTopExtra()&&this.getTopExtraUnitBounds()&&(t.height=this.getTopExtraUnitBounds().height?t.height-this.getTopExtraUnitBounds().height:t.height),t},getParentBounds:function(){return this.getTrellisUsableParentBounds(this.getActualParentBounds())},getComputedUnitSize:function(t,e,i,n){var r=Math.ceil(e/t),a={};if(s.utils.isIE()){var o=t*n.width>i.width,l=r*n.height>i.height;i.width=l?i.width-18:i.width,i.height=o?i.height-18:i.height}return a.width=n&&i.width/t<n.width?n.width:i.width/t,a.height=n&&i.height/r<n.height?n.height:i.height/r,a},getComputedParentSize:function(t,e){var i={width:t.width*e.numCols,height:t.height*e.numRows};return this.getOptions().layout.margin&&(i.width=i.width+this.getOptions().layout.margin,i.height=i.height+this.getOptions().layout.margin),i},getContainerID:function(){return this.getParent().id+"_"+this.CSS_ID},setTrellisUnits:function(t){this.trellisUnits=t},getTrellisUnits:function(){return this.trellisUnits},setExtraTrellisUnits:function(t){this.extraTrellisUnits=t},getExtraTrellisUnits:function(){return this.extraTrellisUnits},setLeftExtraTrellisUnits:function(t){this.leftExtraTrellisUnits=t},getLeftExtraTrellisUnits:function(){return this.leftExtraTrellisUnits},setBottomExtraTrellisUnits:function(t){this.bottomExtraTrellisUnits=t},getBottomExtraTrellisUnits:function(){return this.bottomExtraTrellisUnits},setRightExtraTrellisUnits:function(t){this.rightExtraTrellisUnits=t},getRightExtraTrellisUnits:function(){return this.rightExtraTrellisUnits},setTopExtraTrellisUnits:function(t){this.topExtraTrellisUnits=t},getTopExtraTrellisUnits:function(){return this.topExtraTrellisUnits},getMinAndMaxElementWidth:function(){var t=0,e=0;return r.each(this.getTrellisUnits(),(function(i){t=Math.max(t,vitaraJQ(i).width()),e=Math.min(t,vitaraJQ(i).width())})),{min:e,max:t}},getMinAndMaxElementHeight:function(){var t=0,e=0;return r.each(this.getTrellisUnits(),(function(i){t=Math.max(t,vitaraJQ(i).height()),e=Math.min(t,vitaraJQ(i).height())})),{min:e,max:t}},getLayoutDetail:function(){var t=this.getTrellisUnits(),e=this.getNumCols(),i=[],s=this,n=this.getMinAndMaxElementWidth();return r.forEach(r.chunk(t,e),(function(t){i[r.head(t).id.replace("trellisElement","")]={extremeLeft:!0};for(var e=0;e<t.length&&vitaraJQ(t[e]).hasClass(s.CSS_ID3);e++){var n=t[e].id.replace("trellisElement","");i[n]=i[n]?i[n]:{},i[n].isLastRow=!0}})),i.maxElementWidth=n.max,i.minElementWidth=n.min,i.numCols=e,i},getBorderStyle:function(t,e,i,s){var n=this.CSS_ID;return this.isIBCSLayout()||(n+=t===i-1?" "+this.CSS_ID3:"",e===s-1?t!==i-1&&(n+=" border_bottom"):n+=t===i-1?" border_right":" border_right border_bottom"),n},appendNewUnitNode:function(t,e,i,s,n){t.append("<div id='"+e+"' class='"+i+"' style='width:"+(s.width-n.width)+"px;height:"+(s.height-n.height)+"px;'></div>")},removeElementFromLayout:function(t){t.remove?t.remove():t.removeNode&&t.removeNode()},isTellisContainer:function(t){return vitaraJQ(t).hasClass(this.CSS_ID)},createLayout:function(t,e,i,s,n){var a=vitaraJQ("#"+this.getContainerID(),this.getParent()),o=0,l=0;if(this.removeElementFromLayout(vitaraJQ(a)),vitaraJQ(this.getParent()).append("<div id='"+this.getContainerID()+"' class='"+this.CSS_ID2+"'></div>"),(a=vitaraJQ("#"+this.getContainerID(),this.getParent())).width(t.width),this.isIncludeTopExtra())for(var h=0;h<i;h++)this.isIncludeLeftExtra()&&0===h&&(this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement label_element_border_style",this.getLeftTopExtraUnitBounds(),{width:0,height:0}),l++),this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement topLabelElement label_element_border_style",this.getTopExtraUnitBounds(r.isArray(n)?n[o-1]:n),{width:1,height:0}),l++,this.isIncludeRightExtra()&&h===i-1&&(this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement label_element_border_style",this.getRightTopExtraUnitBounds(),{width:0,height:0}),l++);for(var d=0;d<s;d++)for(h=0;h<i;h++)0===h&&this.isIncludeLeftExtra()&&(this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement leftLabelElement label_element_border_style",this.getLeftExtraUnitBounds(r.isArray(n)?n[o]:n),{width:0,height:1}),l++),o<e&&this.appendNewUnitNode(a,this.CSS_ID+o,this.getBorderStyle(d,h,s,i),r.isArray(n)?n[o]:n,{width:1,height:1}),h===i-1&&this.isIncludeRightExtra()&&(this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement rightLabelElement label_element_border_style",this.getRightExtraUnitBounds(r.isArray(n)?n[o]:n),{width:0,height:1}),l++),o++;if(this.isIncludeBottomExtra()){var u=o>e?o-e:0;for(h=0;h<i;h++)this.isIncludeLeftExtra()&&h===u&&(this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement label_element_border_style",this.getLeftBottomExtraUnitBounds(),{width:0,height:0}),l++),this.appendNewUnitNode(a,this.CSS_ID5+l,"labelElement bottomLabelElement label_element_border_style",this.getBottomExtraUnitBounds(r.isArray(n)?n[o-1]:n),{width:1,height:0}),o++,l++}this.setTrellisUnits(vitaraJQ("."+this.CSS_ID,a)),this.setLeftExtraTrellisUnits(vitaraJQ("."+this.CSS_ID7,a)),this.setBottomExtraTrellisUnits(vitaraJQ("."+this.CSS_ID8,a)),this.setRightExtraTrellisUnits(vitaraJQ("."+this.CSS_ID9,a)),this.setTopExtraTrellisUnits(vitaraJQ("."+this.CSS_ID10,a))},isVarViewLayout:function(){return this.getIBCSLayoutWeights()&&this.getIBCSLayoutWeights().length},getComputedUnitBoundsIbcsVarLayout:function(){var t=this,e=[];return r.each(this.getIBCSLayoutWeights(),(function(i){"undefined"!==i&&null!==i&&e.push(t.getComputedUnitSize(1,1,{width:Math.floor(t.isIBCSHorizantalLayout()?t.getParentBounds().width*i:t.getParentBounds().width),height:Math.floor(t.isIBCSHorizantalLayout()?t.getParentBounds().height:t.getParentBounds().height*i)},t.getUnitBounds()))})),e=this.isIBCSHorizantalLayout()?e:e.reverse()},getComputedUnitBoundsIbcsGenLayout:function(){var t=this.getTrellisCount()-this.getIBCSSecondaryUnitCount(),e=this.getIBCSSecondaryUnitCount(),i=this.getIBCSSecondaryLayoutWeight(),s=1-i,n=this.getComputedUnitSize(this.isIBCSHorizantalLayout()?t:1,t,{width:this.isIBCSHorizantalLayout()?this.getParentBounds().width*s:this.getParentBounds().width,height:this.isIBCSHorizantalLayout()?this.getParentBounds().height:this.getParentBounds().height*s},this.getUnitBounds()),a=this.getComputedUnitSize(this.isIBCSHorizantalLayout()?e:1,e,{width:this.isIBCSHorizantalLayout()?this.getParentBounds().width*i:this.getParentBounds().width,height:this.isIBCSHorizantalLayout()?this.getParentBounds().height:this.getParentBounds().height*i},this.getUnitBounds()),o=[];return this.isIBCSHorizantalLayout()?(r.times(t,(function(t){o.push(n)})),r.times(e,(function(t){o.push(a)}))):(r.times(e,(function(t){o.push(a)})),r.times(t,(function(t){o.push(n)}))),o},getComputedUnitBoundsIBCS:function(){return this.getOptions().unit.minWidth=50,this.getOptions().unit.minHeight=50,this.isVarViewLayout()?this.getComputedUnitBoundsIbcsVarLayout():this.getComputedUnitBoundsIbcsGenLayout()},getLayoutParams:function(t){var e={};switch(t){case this.ENUM_LAYOUT_TYPES.REG:e.numCharts=this.getTrellisCount(),e.numCols=this.getNumCols(),e.numRows=Math.ceil(e.numCharts/e.numCols),e.unitBounds=this.getComputedUnitSize(e.numCols,e.numCharts,this.getParentBounds(),this.getUnitBounds()),e.parentBounds=this.getActualParentBounds(),e.parentBounds.width=Math.max(e.parentBounds.width,this.getParentWidthByUnits(e.unitBounds,e.numCols));break;case this.ENUM_LAYOUT_TYPES.IBCS:e={numCharts:this.getTrellisCount(),numCols:this.isIBCSHorizantalLayout()?this.getTrellisCount():1,numRows:this.isIBCSHorizantalLayout()?1:this.getTrellisCount(),unitBounds:this.getComputedUnitBoundsIBCS(),parentBounds:this.getActualParentBounds()},this.isIBCSHorizantalLayout()&&(e.parentBounds.width=Math.max(e.parentBounds.width,this.getParentWidthByUnits(e.unitBounds)))}return e},getCreateLayout:function(t){if(t&&this.setOptions(t),this.options){var e=this.getLayoutParams(this.getLayoutType());return this.createLayout(e.parentBounds,e.numCharts,e.numCols,e.numRows,e.unitBounds),this.getTrellisUnits()}},getElementBounds:function(t){if(!t)return{};var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,bottom:e.bottom,left:e.left,right:e.right}},getRenderedLabelBounds:function(t){if(t&&t.axes){var e=t.xAxis&&t.xAxis[0]||null,i=t.yAxis&&t.yAxis[0]||null,n=t.yAxis&&t.yAxis[1]||null,r=t.xAxis&&t.xAxis[1]||null,a={};if((e||r)&&(i||n)){var o=this.getElementBounds(t.chartBackground.element);if(e&&e.visible&&(a.xAxis={bounds:s.utils.isIE()&&e.labelGroup&&e.labelGroup.element?this.getElementBounds(e.labelGroup.element):this.getElementBounds(e.axisGroup.element),isHorizontal:e.horiz,reversed:e.reversed,opposite:e.opposite},s.utils.isIE()&&(e.horiz?(a.xAxis.bounds.height=10+a.xAxis.bounds.height,e.titleOffset&&(a.xAxis.bounds.height+=e.titleOffset)):(a.xAxis.bounds.width=20+a.xAxis.bounds.width,e.titleOffset&&(a.xAxis.bounds.width+=10+e.titleOffset))),a.xAxis.bounds.height||(a.xAxis.bounds.height=e.horiz?e.opposite?a.xAxis.bounds.bottom-o.top:o.bottom-a.xAxis.bounds.bottom:a.xAxis.bounds.bottom-a.xAxis.bounds.top),a.xAxis.bounds.width||(a.xAxis.bounds.width=e.horiz?a.xAxis.bounds.right-a.xAxis.bounds.left:e.opposite?o.right-a.xAxis.bounds.right:a.xAxis.bounds.left),e.opposite&&(e.horiz?a.xAxis.titleOffset=e.titleOffset:a.xAxis.titleOffset=e.titleOffset+10)),i&&i.visible&&(a.yAxis={bounds:s.utils.isIE()&&i.labelGroup&&i.labelGroup.element?this.getElementBounds(i.labelGroup.element):this.getElementBounds(i.axisGroup.element),isHorizontal:i.horiz,reversed:i.reversed,opposite:i.opposite},i.opposite,s.utils.isIE()&&(i.horiz?(a.yAxis.bounds.height=10+a.yAxis.bounds.height,i.titleOffset&&(a.yAxis.bounds.height+=i.titleOffset)):(a.yAxis.bounds.width=20+a.yAxis.bounds.width,i.titleOffset&&(a.yAxis.bounds.width+=10+i.titleOffset))),a.yAxis.bounds.height||(a.yAxis.bounds.height=i.horiz?i.opposite?a.yAxis.bounds.bottom-o.top:o.bottom-a.yAxis.bounds.bottom:a.yAxis.bounds.bottom-a.yAxis.bounds.top),a.yAxis.bounds.width||(a.yAxis.bounds.width=i.horiz?a.yAxis.bounds.right-a.yAxis.bounds.left:i.opposite?o.right-a.yAxis.bounds.right:a.yAxis.bounds.left)),n&&n.visible){a.sYAxis={bounds:s.utils.isIE()&&n.labelGroup&&n.labelGroup.element?this.getElementBounds(n.labelGroup.element):this.getElementBounds(n.axisGroup.element),isHorizontal:n.horiz,reversed:n.reversed,opposite:n.opposite},s.utils.isIE()&&(n.horiz?(a.sYAxis.bounds.height=10+a.sYAxis.bounds.height,n.titleOffset&&(a.sYAxis.bounds.height+=n.titleOffset)):(a.sYAxis.bounds.width=20+a.sYAxis.bounds.width,n.titleOffset&&(a.sYAxis.bounds.width+=10+n.titleOffset))),a.sYAxis.bounds.height||(a.sYAxis.bounds.height=n.horiz?n.opposite?a.sYAxis.bounds.bottom-o.top:o.bottom-a.sYAxis.bounds.bottom:a.sYAxis.bounds.bottom-a.sYAxis.bounds.top);var l=n.opposite;a.sYAxis.bounds.width||(a.sYAxis.bounds.width=n.horiz?l?a.sYAxis.bounds.bottom-o.top:o.bottom-a.sYAxis.bounds.bottom:l?o.right-a.sYAxis.bounds.right:o.left)}if(r&&r.visible){a.sXAxis={bounds:s.utils.isIE()&&r.labelGroup&&r.labelGroup.element?this.getElementBounds(r.labelGroup.element):this.getElementBounds(r.axisGroup.element),isHorizontal:r.horiz,reversed:r.reversed,opposite:r.opposite},s.utils.isIE()&&(r.horiz?(a.sXAxis.bounds.height=10+a.sXAxis.bounds.height,r.titleOffset&&(a.sXAxis.bounds.height+=r.titleOffset)):(a.sXAxis.bounds.width=20+a.sXAxis.bounds.width,r.titleOffset&&(a.sXAxis.bounds.width+=10+r.titleOffset))),a.sXAxis.bounds.height||(a.sXAxis.bounds.height=r.horiz?r.opposite?a.sXAxis.bounds.bottom-o.top:o.bottom-a.sXAxis.bounds.bottom:a.sXAxis.bounds.bottom-a.sXAxis.bounds.top);var h=r.opposite;a.sXAxis.bounds.width||(a.sXAxis.bounds.width=r.horiz?h?a.sXAxis.bounds.bottom-o.top:o.bottom-a.sXAxis.bounds.bottom:h?o.right-a.sXAxis.bounds.right:o.left),r.opposite&&(r.horiz?a.sXAxis.titleOffset=r.titleOffset:a.sXAxis.titleOffset=r.titleOffset+10)}return a}}},getXMax:function(t){return t?t.length-1:null},getSampleHCOptionsForExtraUnitBounds:function(t){var e=r.cloneDeep(t);return e.xAxis.min=0,e.xAxis.max=this.getXMax(e.xAxis.categories),e.xAxis.wfOptions={series:[e.series[0]]},e.series=[{}],e.title&&e.title&&(e.title.className="vitara-label-container-title"),delete e.yAxis,e},getExtraUnitBounds:function(t,e,i){if(Highcharts&&t&&e&&i){var s=this,a=document.createElement("div");a.id="vtr_label_area_identifier",a.style.cssText="width:"+e.width+"px; height:"+e.height+"px;",t.yAxis&&t.yAxis[1]&&(t.yAxis[1].opposite=!0),t.xAxis&&t.xAxis.categories&&(void 0===t.xAxis.min&&(t.xAxis.min=0),void 0===t.xAxis.max&&(t.xAxis.max=n.default.getXMax(t.xAxis.categories))),t.title&&t.title.text&&(t.title.text=r.truncate(t.title.text,{length:3,omission:""})),Highcharts.chart(a,t,(function(t){var e=n.default.getAxesBounds(t,{isLegacy:!0});t&&(t.destroy(),t=null),s.removeElementFromLayout(a),a=null,i(e)}))}},plotSampleHCChartForPlotAreaBounds:function(t,e,i){if(t&&e){var s={chart:{type:t.chart.type},xAxis:t.xAxis,yAxis:t.yAxis};s.xAxis.min=0,s.xAxis.max=this.getXMax(s.xAxis.categories),s.xAxis.labels.enabled=!0,s.yAxis.labels.enabled=!0;var n=document.createElement("div");n.id="vtrsamplehcnode",n.style="width:"+vitaraJQ(e).width()+"px;height:"+vitaraJQ(e).height()+"px;",Highcharts.chart(n,t,(function(t){i(t,n)}))}},getHCPlotAreaBoundsForTrellisUnit:function(t,e,i){if(t){var s=this;this.plotSampleHCChartForPlotAreaBounds(t,e,(function(t,n){t||(this.plotAreaBounds=e),t.plotWidth,t.plotHeight;var r=s.getRenderedLabelBounds(t);t.destroy(),t=null,vitaraJQ(n).remove(),i(r)}))}},equalizeBoundsByPlotArea:function(t,e,i){this.getHCPlotAreaBoundsForTrellisUnit(e,t.units[0],(function(e){if(e&&e.width&&e.height){var s=(vitaraJQ(t.units[0]).width()-e.width)/t.detail.numCols;r.each(t.units,(function(e,i){t.detail[i]&&t.detail[i].extremeLeft?vitaraJQ(t.units[i]).width(vitaraJQ(e).width()+s*(t.detail.numCols-1)):vitaraJQ(t.units[i]).width(vitaraJQ(e).width()-s)}))}i(t.units)}))},equalizeBounds:function(t,e,i,s){this.getHCPlotAreaBoundsForTrellisUnit(e,t.units[0],(function(e){if(e&&e.xAxis&&e.yAxis,s&&s.width&&s.height){var n=(vitaraJQ(t.units[0]).width()-s.width)/t.detail.numCols;r.each(t.units,(function(e,i){t.detail[i]&&t.detail[i].extremeLeft?vitaraJQ(t.units[i]).width(vitaraJQ(e).width()+n*(t.detail.numCols-1)):vitaraJQ(t.units[i]).width(vitaraJQ(e).width()-n)}))}i(t.units)}))}})}}]);mstrmojo.plugins.VitaraCharts.v530159[43] = mstrmojo.plugins.VitaraCharts.v530159[43] || {};
