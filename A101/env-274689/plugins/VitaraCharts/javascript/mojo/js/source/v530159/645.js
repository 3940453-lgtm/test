"use strict";(self.webpackChunkVitaraCharts_MicroStrategy=self.webpackChunkVitaraCharts_MicroStrategy||[]).push([[645],{5675:(e,t,n)=>{n.d(t,{Z:()=>C});var o=n(9153),r=n(8397);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:String(t)}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=s(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,n,a,l=g(s);function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=l.call(this,e,t);var r=Object.getOwnPropertyNames(Object.getPrototypeOf(o.Z.prototype)),a={};return r.forEach((function(e){"function"==typeof o.Z.prototype[e]&&"constructor"!==e&&(a[e]=o.Z.prototype[e])})),n.setBaseContext(e),n.setEditorInterface(t),Object.assign(s.prototype,a),n}return t=s,(n=[{key:"setBaseContext",value:function(e){this.context=e}},{key:"setEditorInterface",value:function(e){this.eInterface=e}},{key:"onHeaderFontBoldChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().toggleBold()}},{key:"onHeaderFontItalicChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().toggleItalic()}},{key:"onHeaderFontUnderlineChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().toggleUnderline()}},{key:"onHeaderFontFamilyChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setFontFamily(e.detail.value)}},{key:"onHeaderFontAlignmentChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setTextAlign(e.detail.value)}},{key:"onHeaderFontVerticalAlignmentChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setVerticalAlign(e.detail.value)}},{key:"onHeaderFontSizeChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setFontSize(e.detail.originalEvent.target.value)}},{key:"onHeaderFontColorChange",value:function(e){""!==e.detail.value?this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setFontColor(e.detail.value):this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setFontColor(void 0)}},{key:"onHeaderBgColorChange",value:function(e){""!==e.detail.value?this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setBgColor(e.detail.value):this.getAppContext().renderedChart.getThemeFormattingModel().getThemeHeaderFormattingModel().setBgColor(void 0)}},{key:"onBodyFontBoldChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().toggleBold(),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontItalicChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().toggleItalic(),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontUnderlineChange",value:function(){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().toggleUnderline(),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontFamilyChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setFontFamily(e.detail.value),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontAlignmentChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setTextAlign(e.detail.value),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontVerticalAlignmentChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setVerticalAlign(e.detail.value),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontSizeChange",value:function(e){this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setFontSize(e.detail.originalEvent.target.value),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyFontColorChange",value:function(e){""!==e.detail.value?this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setFontColor(e.detail.value):this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setFontColor(void 0),this.getAppContext().renderedChart.redrawRows()}},{key:"onBodyBgColorChange",value:function(e){""!==e.detail.value?this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setBgColor(e.detail.value):this.getAppContext().renderedChart.getThemeFormattingModel().getThemeBodyFormattingModel().setBgColor(void 0),this.getAppContext().renderedChart.redrawRows()}},{key:"onFormatColSelectChange",value:function(e){this.getAppContext().renderedChart.getFormatColumnView(this).populateFormatView()}},{key:"onFormatButtonClicked",value:function(){var e=this.getBaseContext().getMenuElement("#popupformatColSelect").val(),t=this.getBaseContext().getMenuElement("#popupformatType").val(),n=this.getAppContext().renderedChart.getColumnFormattingModel().getColumnHeaderFormattingModel();if(""!==e&&""!==t){"body"===t&&(n=this.getAppContext().renderedChart.getColumnFormattingModel().getColumnBodyFormattingModel());var o=this.getAppContext().renderedChart.getColumnStateMaster().headerIdMapper(e,!1),r=this.getBaseContext().getMenuElement(".formatFontBold").hasClass("active"),a=this.getBaseContext().getMenuElement(".formatFontItalic").hasClass("active"),i=this.getBaseContext().getMenuElement(".formatFontUnderline").hasClass("active"),l=this.getBaseContext().getMenuElement("#popupformatFontFamily").val(),d=this.getBaseContext().getMenuElement("#popupformatFontSize").val(),s=this.getBaseContext().getMenuElement("#popupformatFontAlign").val(),h=this.getBaseContext().getMenuElement("#popupformatFontVerticalAlign").val(),g=this.getBaseContext().getMenuElement("#popupformatFontColor").val(),p=this.getBaseContext().getMenuElement("#popupformatBgColor").val();r?n.setBold(o):n.unsetBold(o),a?n.setItalic(o):n.unsetItalic(o),i?n.setUnderline(o):n.unsetUnderline(o),""!==l?n.setFontFamily(o,l):n.setFontFamily(o,void 0),""!==d?n.setFontSize(o,d):n.setFontSize(o,void 0),""!==s?n.setTextAlign(o,s):n.setTextAlign(o,void 0),""!==h?n.setVerticalAlign(o,h):n.setVerticalAlign(o,void 0),n.setFontColor(o,g),n.setBgColor(o,p),"body"===t&&this.getAppContext().renderedChart.redrawRows()}}},{key:"onClickClearSorting",value:function(){this.getAppContext().renderedChart.getSortingModel().clearSorting(),this.getAppContext().renderedChart.getSortingModel()._setPseudoState(),vitaraJQ('[data-value="clearSorting"]').prop("disabled",!0),this.getAppContext().renderedChart.getHeaderFormattingView().refreshHeader()}},{key:"onClickClearThresholds",value:function(){this.getAppContext().renderedChart.getThresholdModel().clearThresholdModel(),vitaraJQ('[data-value="clearThresholds"]').prop("disabled",!0),this.getAppContext().renderedChart.redrawRows()}},{key:"onClickClearFilters",value:function(){this.getAppContext().renderedChart.getFilterModel().clearThresholdModel(),vitaraJQ('[data-value="clearFilters"]').prop("disabled",!0),this.getAppContext().renderedChart.gridOptions.api.onFilterChanged(),this.getAppContext().renderedChart.redrawRows()}},{key:"onClickClearPinnedColumns",value:function(){this.getAppContext().renderedChart.getColumnStateMaster().columnPinningModel.unpinAllColumns(),vitaraJQ('[data-value="clearPinnedColumns"]').prop("disabled",!0)}},{key:"onClickClearGrouping",value:function(){this.getAppContext().renderedChart.getColumnStateMaster().columnRowGroupingModel.ungroupRows(),vitaraJQ('[data-value="clearGrouping"]').prop("disabled",!0)}},{key:"onClickClearColumnGrouping",value:function(){this.getAppContext().renderedChart.getColumnGrouping().ungroupColumns(),vitaraJQ('[data-value="clearColumnGrouping"]').prop("disabled",!0)}},{key:"onClickClearScalingGrouping",value:function(){this.getAppContext().renderedChart.getScalingModel().resetModel(),vitaraJQ('[data-value="clearScalingGrouping"]').prop("disabled",!0)}},{key:"onClickClearMetricRowGrouping",value:function(){this.getAppContext().renderedChart.getMetricGroupingModel().ungroupMetrics(),vitaraJQ('[data-value="clearMetricRowGrouping"]').prop("disabled",!0)}},{key:"onShowHideColumnsChange",value:function(e){var t=e.detail.originalEvent.detail.originalEvent.target.id,n=e.detail.originalEvent.detail.originalEvent.target.checked;this.getAppContext().renderedChart.getColumnStateMaster().columnShowHideModel.setColumnHiddenValue(t,!n),this.getAppContext().renderedChart.getChartTypeModel().isMicroChart()&&this.getAppContext().renderedChart.hideMicroAttribute()}},{key:"onHideChildrenCount",value:function(){this.getAppContext().renderedChart.getChildrenCountModel().toggleChildrenCountHidden(),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onEditorViewCreated",value:function(e){if(void 0!==this.getAppContext().renderedChart){this.getAppContext().renderedChart.getPropertyEditorRTLLayoutModel().getLayoutModel()?(vitaraJQ("#popuprtlLayout").prop("checked",!0),vitaraJQ(".propertymenu").addClass("rtl")):(vitaraJQ("#popuprtlLayout").prop("checked",!1),vitaraJQ(".propertymenu").removeClass("rtl"));var t=this.getAppContext().renderedChart.getGridThemeView(this.context);this.getAppContext().renderedChart.setEditorContext(this.context.propMenuHelper),t.populateThemeView()}}},{key:"saveAdvanceSorting",value:function(e){var t=this.getAppContext().renderedChart.getSortingModel();t.clearSorting();var n=vitaraJQ("[name='sortingGroupField']"),o=vitaraJQ("[id='popupsortingField']"),a=vitaraJQ("[name='sortingAttribute']"),i=0;r.each(n,(function(e,r){r<n.length-1&&(t.setSortingForColumnAtLevel(a[r].value,e.value,o[r].value,!0),i++)})),0===i?(t._setPseudoState(),t.allowHeaderSortable()):(t.disallowHeaderSortable(),t._setPseudoState()),t._setColumnSortingState(),this.getAppContext().renderedChart.getHeaderFormattingView().refreshHeader()}},{key:"onMenuSelected",value:function(e){if(void 0!==this.getAppContext().renderedChart){var t=this;if("Auto Size"===e.detail.name)vitaraJQ("#popupfitAllColumnsToContent").prop("checked",this.getAppContext().renderedChart.getColumnResizedModel().getFitToContentModel().isAllColumnWidthToContent()),vitaraJQ("#popupfitAllColumnsToGridWidth").prop("checked",this.getAppContext().renderedChart.getColumnResizedModel().getFitToGridWidthModel().isFitToGridWidth()),this.getAppContext().renderedChart.getPropertyEditorRTLLayoutModel().getLayoutModel()?(vitaraJQ("#popuprtlLayout").prop("checked",!0),vitaraJQ(".propertymenu").addClass("rtl")):(vitaraJQ("#popuprtlLayout").prop("checked",!1),vitaraJQ(".propertymenu").removeClass("rtl"));else if("Reset Columns"===e.detail.name){var n={};n.clearSorting=this.getAppContext().renderedChart.getSortingModel().isSortingCleared(),n.clearThresholds=this.getAppContext().renderedChart.getThresholdModel().isThresholdModelCleared(),n.clearFilters=this.getAppContext().renderedChart.getFilterModel().isThresholdModelCleared(),n.clearPinnedColumns=this.getAppContext().renderedChart.getColumnStateMaster().columnPinningModel.isPinningCleared(),n.clearGrouping=this.getAppContext().renderedChart.getColumnStateMaster().columnRowGroupingModel.isRowGroupingCleared(),n.clearColumnGrouping=this.getAppContext().renderedChart.getColumnGrouping().isColumnGroupingCleared(),n.clearScalingGrouping=this.getAppContext().renderedChart.getScalingModel().isScalingGroupCleared(),n.clearMetricRowGrouping=!this.getAppContext().renderedChart.getMetricGroupingModel().isMetricGroupsPresent();for(var o=0;o<Object.keys(n).length;o++){var a=Object.keys(n)[o];vitaraJQ('[data-value="'+a+'"]').removeClass("toggle-button"),vitaraJQ('[data-value="'+a+'"]').prop("disabled",n[a])}}else if("Format Column"===e.detail.name)this.onFormatColSelectChange();else if("Appearance"===e.detail.name)this.getAppContext().renderedChart.getGridThemeView().populateThemeView();else if("Sorting"===e.detail.name){var i='<div class="col-md-12 container_title">'+this.context.translateText("Advance Sorting")+'</div><div class="col-md-12 margin-top-10 field_container"></div>';vitaraJQ(vitaraJQ(".advanceSort")[0].children[0].children[0].children[0].children).remove(),vitaraJQ(vitaraJQ(".advanceSort")[0].children[0].children[0].children).append(i);var l=this.getAppContext().renderedChart.getSortingModel().getFlatSortingModel(),d=this.getAppContext().renderedChart.getVitaraGridPropertyEditorMapper().getAdvanceSortUI(l);vitaraJQ(vitaraJQ(".advanceSort")[0].children[0].children[0].children).append(d);var s='<div id="saveClearSortContainer" class="col-md-12 margin-top-10 field_container">                <span id="saveButton" class="buttonset">                    <button type="button"                        name="sortingSaveButton"                         id="saveButtons"                         class="vitara-chart-editor-field btn btn-default"                         data-value="sortingSaveButton">                            Save                    </button>                <span id="sortingClearButton" class="buttonset">                    <button type="button"                         name="sortingClearButton"                         id="clearSortings"                         class="vitara-chart-editor-field btn btn-default"                         data-value="sortingClearButton">                            Clear All                    </button>                </span>                </span>                </div>';vitaraJQ(vitaraJQ(".advanceSort")[0].children[0].children[0].children).append(s),r.each(vitaraJQ("[name = 'sortingDelete']"),(function(e){e.addEventListener("click",(function(e){e.stopPropagation(),""!==e.target.parentElement.parentElement.firstElementChild.value&&vitaraJQ(e.target.parentElement.parentElement).remove()}))}));var h=function(e){this.saveAdvanceSorting(e)},g=function(){this.onClickClearSorting(),vitaraJQ("#advanceSort").click()},p=this.getAppContext().renderedChart.getColumnStateMaster().columnRowGroupingModel.getRowGroupColumnsInternal();vitaraJQ("#sortingClearButton").on("click",g.bind(this)),vitaraJQ("#saveButton").on("click",h.bind(this)),vitaraJQ("#placeholderselect").on("change",function e(n){var o=vitaraJQ("[name='sortingAttribute']"),a=0;r.each(o,(function(e){0===e.selectedIndex&&(a+=1)})),""!==n.target.value&&0===a&&(vitaraJQ("#saveButton").off("click",h.bind(this)),vitaraJQ("#sortingClearButton").off("click",g.bind(this)),vitaraJQ("#saveClearSortContainer").remove(),vitaraJQ(n.currentTarget.parentElement.parentElement).append(t.getAppContext().renderedChart.getVitaraGridPropertyEditorMapper()._sortingUiHelper({metric:"",grouping:"No Grouping"},0!==p.length)),vitaraJQ(vitaraJQ(".advanceSort")[0].children[0].children[0].children).append(s),vitaraJQ("#placeholderselect").removeAttr("id"),vitaraJQ(n.currentTarget).off("change",e.bind(this)),vitaraJQ("#placeholderselect").on("change",e.bind(this)),vitaraJQ("#saveButton").on("click",h.bind(this)),vitaraJQ("#sortingClearButton").on("click",g.bind(this)),this.getAppContext().renderedChart.getSortingView().refreshEventListeners(),r.each(vitaraJQ("[name = 'sortingDelete']"),(function(e){e.addEventListener("click",(function(e){e.stopPropagation(),""!==e.target.parentElement.parentElement.firstElementChild.value&&vitaraJQ(e.target.parentElement.parentElement).remove()}))})))}.bind(this)),this.getAppContext().renderedChart.getSortingView().refreshEventListeners()}else"Grand Totals"===e.detail.name?this.getAppContext().renderedChart.getGrandTotalsView(this).populateView(this.getBaseContext().getPropMenuContainer()):"Thresholds"===e.detail.name?(this.getAppContext().renderedChart.getThresholdView(this).getThresholdPropertyEditorHomeView(!0),this.getAppContext().renderedChart.getThresholdView(this).registerEventListeners()):"SubTotals"===e.detail.name&&this.getAppContext().renderedChart.getSubTotalsView(this).populateView(this.getBaseContext().getPropMenuContainer())}}},{key:"onApplyGrandTotalsClicked",value:function(e){this.getAppContext().renderedChart.getGrandTotalsView(this).applyStyles(e,this.getBaseContext().getPropMenuContainer())}},{key:"onApplySubTotalsClicked",value:function(e){this.getAppContext().renderedChart.getSubTotalsView(this).applyStyles(e,this.getBaseContext().getPropMenuContainer())}},{key:"onUseBodyStyleCheckboxChange",value:function(e){this.getAppContext().renderedChart.getSubTotalsView(this).useBodyStyleHelper(e)}},{key:"onFormattingTargetChange",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).manipulateAddNewThresholdView()}},{key:"onThresholdSourceChange",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).updateThresholdCondtions(e.target.value)}},{key:"onThresholdConditionChange",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).initThresholdView()}},{key:"onThresholdMetricChange",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).initThresholdView()}},{key:"onBtnAddNewThresholdsClicked",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).populateAddEditThresholdFields(),this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).initThresholdView(),this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).manipulateAddNewThresholdView()}},{key:"onBtnApplyThresholdsClicked",value:function(e){var t=vitaraJQ("#popupthresholdUniqueId",this.getBaseContext().getPropMenuContainer()).val();if("NA"===t)this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).appendThreshold();else{var n=this.getAppContext().renderedChart.getThresholdModel(),o=n.filterThresholdById(t);o=o[0],t&&!o&&(o=n.filterThresholdsByGID(t)),this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).appendThreshold(o)}}},{key:"onBtnCancelThresholdsClicked",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).getThresholdPropertyEditorHomeView()}},{key:"onGridThresholdFormatPropChange",value:function(e){this.getAppContext().renderedChart.getThresholdView(this).addEditThresholdMaster(this.getBaseContext().getPropMenuContainer()).manipulateAddNewThresholdView()}},{key:"onRowHeightChange",value:function(e){var t=e.detail.value,n=this.getAppContext().renderedChart.getThemeFormattingModel().themeBodyFormattingModel;isNaN(t)&&(t=n.DEFAULTS.height),n.setHeight(t),this.getAppContext().renderedChart.gridOptions.api.resetRowHeights()}},{key:"onGroupedRowHeightChange",value:function(e){var t=e.detail.value,n=this.getAppContext().renderedChart.getThemeFormattingModel().themeBodyFormattingModel;isNaN(t)&&(t=n.DEFAULTS.groupedHeight),n.setGroupedHeight(t),this.getAppContext().renderedChart.gridOptions.api.resetRowHeights()}},{key:"onHeaderHeightChange",value:function(e){var t=e.detail.value,n=this.getAppContext().renderedChart.getThemeFormattingModel().themeHeaderFormattingModel;isNaN(t)&&(t=n.DEFAULTS.height),n.setHeight(t)}},{key:"onThemeFormatChange",value:function(e){this.getAppContext().renderedChart.getThemeModel().setGridThemeModel(e.detail.value)}},{key:"onFitAllColumnsToGridWidth",value:function(){this.getAppContext().renderedChart.getColumnResizedModel().getFitToGridWidthModel().setFitToGridWidth(),vitaraJQ("#popupfitAllColumnsToContent").prop("checked",!1),vitaraJQ("#popupfitAllColumnsToGridWidth").prop("checked",!0)}},{key:"onFitAllColumnsToContent",value:function(){this.getAppContext().renderedChart.getColumnResizedModel().getFitToContentModel().setAllColumnsToContent(),vitaraJQ("#popupfitAllColumnsToContent").prop("checked",!0),vitaraJQ("#popupfitAllColumnsToGridWidth").prop("checked",!1)}},{key:"onGridPivotDropZoneChange",value:function(e){this.getAppContext().renderedChart.getPivotDropZoneModel().setPivotDropZoneByValue(e.detail.value),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onGridGroupingDropZoneChange",value:function(e){this.getAppContext().renderedChart.getGroupingDropZoneModel().setGroupingDropZoneByValue(e.detail.value),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onGridGroupingPivotDropZoneChange",value:function(e){this.getAppContext().renderedChart.getPivotDropZoneModel().setPivotDropZoneByValue(e.detail.value),this.getAppContext().renderedChart.getGroupingDropZoneModel().setGroupingDropZoneByValue(e.detail.value),this.getAppContext().renderedChart.getPivotDropZoneModel().showPivotDropZone()}},{key:"onTooltipVisibiltyChange",value:function(e){this.getAppContext().renderedChart.getCustomTooltipModel().setTooltipVisibility(e.detail.value)}},{key:"onTooltipBackgroundChange",value:function(e){this.getAppContext().renderedChart.getCustomTooltipModel().setTooltipBgColor(e.detail.value)}},{key:"onCustomFormatChange",value:function(e){var t=e.target.id.replace("apply",""),n=this.getBaseContext().getCustomLabelMacros.bind(this.getBaseContext().getCustomEditor()),o=this.getBaseContext().propMenuHelper.getCustomFormatFromEditor.bind(this.getBaseContext().propMenuHelper);this.getAppContext().renderedChart.getCustomTooltipModel().setTooltipMacros(n(t)),this.getAppContext().renderedChart.getCustomTooltipModel().setTooltipFormat(o(t))}},{key:"onAnimationStateChange",value:function(e){this.getAppContext().renderedChart.getAnimationModel().setAnimation(e.target.checked),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onAllowUrlsToVisualStateChange",value:function(e){this.getAppContext().renderedChart.getAllowUrlsToVisualModel().setAllowUrlsToVisual(e.detail.value),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onShowDetailRowsChange",value:function(e){var t=this.getAppContext().renderedChart;t.getShowDetailRowsModel().setShowDetailRows(e.target.checked),t.gridOptions.context.rePlot()}},{key:"onGridCheckboxChange",value:function(e){this.getAppContext().renderedChart.getGridCheckboxModel().setGridCheckbox(e.target.checked),this.getAppContext().renderedChart.gridOptions.context.rePlot()}},{key:"onRTLLayoutChange",value:function(e){var t=this.getAppContext().renderedChart.getPropertyEditorRTLLayoutModel();vitaraJQ(e.target).prop("checked")?(vitaraJQ(".propertymenu").addClass("rtl"),t.setLayoutRight()):(vitaraJQ(".propertymenu").removeClass("rtl"),t.setLayoutLeft())}},{key:"onUsePivotGroupTotalsCheckboxChange",value:function(e){var t=vitaraJQ(e.target).prop("checked");t?this.getAppContext().getMenuElement("#popupshowPivotMetricTotals").prop("disabled",t):this.getAppContext().renderedChart.getSubTotalsView().togglePivotMetricTotals(t)}},{key:"onShowPivotMetricTotalsCheckboxChange",value:function(e){var t=vitaraJQ(e.target).prop("checked");this.getBaseContext().getMenuElement("#popupusePivotGroupTotalsCheckbox").prop("disabled",t)}},{key:"setCustomEventHandlers",value:function(){d(u(s.prototype),"setCustomEventHandlers",this).call(this),this.setEventHandler("onHeaderFontBoldChange",this.onHeaderFontBoldChange),this.setEventHandler("onHeaderFontItalicChange",this.onHeaderFontItalicChange),this.setEventHandler("onHeaderFontUnderlineChange",this.onHeaderFontUnderlineChange),this.setEventHandler("onHeaderFontFamilyChange",this.onHeaderFontFamilyChange),this.setEventHandler("onHeaderFontAlignmentChange",this.onHeaderFontAlignmentChange),this.setEventHandler("onHeaderFontVerticalAlignmentChange",this.onHeaderFontVerticalAlignmentChange),this.setEventHandler("onHeaderFontSizeChange",this.onHeaderFontSizeChange),this.setEventHandler("onHeaderFontColorChange",this.onHeaderFontColorChange),this.setEventHandler("onHeaderBgColorChange",this.onHeaderBgColorChange),this.setEventHandler("onBodyFontBoldChange",this.onBodyFontBoldChange),this.setEventHandler("onBodyFontItalicChange",this.onBodyFontItalicChange),this.setEventHandler("onBodyFontUnderlineChange",this.onBodyFontUnderlineChange),this.setEventHandler("onBodyFontFamilyChange",this.onBodyFontFamilyChange),this.setEventHandler("onBodyFontAlignmentChange",this.onBodyFontAlignmentChange),this.setEventHandler("onBodyFontVerticalAlignmentChange",this.onBodyFontVerticalAlignmentChange),this.setEventHandler("onBodyFontSizeChange",this.onBodyFontSizeChange),this.setEventHandler("onBodyFontColorChange",this.onBodyFontColorChange),this.setEventHandler("onBodyBgColorChange",this.onBodyBgColorChange),this.setEventHandler("onFormatColSelectChange",this.onFormatColSelectChange),this.setEventHandler("onFormatTypeChange",this.onFormatColSelectChange),this.setEventHandler("onFormatButtonClicked",this.onFormatButtonClicked),this.setEventHandler("onGridPivotDropZoneChange",this.onGridPivotDropZoneChange),this.setEventHandler("onGridGroupingDropZoneChange",this.onGridGroupingDropZoneChange),this.setEventHandler("onGridGroupingPivotDropZoneChange",this.onGridGroupingPivotDropZoneChange),this.setEventHandler("onClickClearSorting",this.onClickClearSorting),this.setEventHandler("onClickClearThresholds",this.onClickClearThresholds),this.setEventHandler("onClickClearFilters",this.onClickClearFilters),this.setEventHandler("onClickClearPinnedColumns",this.onClickClearPinnedColumns),this.setEventHandler("onClickClearGrouping",this.onClickClearGrouping),this.setEventHandler("onClickClearColumnGrouping",this.onClickClearColumnGrouping),this.setEventHandler("onClickClearScalingGrouping",this.onClickClearScalingGrouping),this.setEventHandler("onClickClearMetricRowGrouping",this.onClickClearMetricRowGrouping),this.setEventHandler("onShowHideColumnsChange",this.onShowHideColumnsChange),this.setEventHandler("onHideChildrenCount",this.onHideChildrenCount),this.setEventHandler("onRowHeightChange",this.onRowHeightChange),this.setEventHandler("onGroupedRowHeightChange",this.onGroupedRowHeightChange),this.setEventHandler("onHeaderHeightChange",this.onHeaderHeightChange),this.setEventHandler("onThresholdSourceChanged",this.onThresholdSourceChange),this.setEventHandler("onThresholdMetricChange",this.onThresholdMetricChange),this.setEventHandler("onThresholdConditionChange",this.onThresholdConditionChange),this.setEventHandler("onBtnAddNewThresholdsClicked",this.onBtnAddNewThresholdsClicked),this.setEventHandler("onBtnApplyThresholdsClicked",this.onBtnApplyThresholdsClicked),this.setEventHandler("onBtnCancelThresholdsClicked",this.onBtnCancelThresholdsClicked),this.setEventHandler("onGridThresholdFormatPropChange",this.onGridThresholdFormatPropChange),this.setEventHandler("onFormattingTargetChange",this.onFormattingTargetChange),this.setEventHandler("onThemeFormatChange",this.onThemeFormatChange),this.setEventHandler("onGridThresholdIconChanged",(function(){})),this.setEventHandler("onFitAllColumnsToGridWidth",this.onFitAllColumnsToGridWidth),this.setEventHandler("onFitAllColumnsToContent",this.onFitAllColumnsToContent),this.setEventHandler("onAnimationStateChange",this.onAnimationStateChange),this.setEventHandler("onShowDetailRowsChange",this.onShowDetailRowsChange),this.setEventHandler("onGridCheckboxChange",this.onGridCheckboxChange),this.setEventHandler("onApplyGrandTotalsClicked",this.onApplyGrandTotalsClicked),this.setEventHandler("onApplySubTotalsClicked",this.onApplySubTotalsClicked),this.setEventHandler("onUseBodyStyleCheckboxChange",this.onUseBodyStyleCheckboxChange),this.setEventHandler("onUsePivotGroupTotalsCheckboxChange",this.onUsePivotGroupTotalsCheckboxChange),this.setEventHandler("onShowPivotMetricTotalsCheckboxChange",this.onShowPivotMetricTotalsCheckboxChange)}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}(o.Z)},6432:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(749);const r={getEditorName:function(){return"GridChart"},getEditor:function(e){return this.propsEditor||(this.propsEditor=new o.Z(e)),this.propsEditor},getExtPropsJSONParser:function(){return this.vizParser.getGridOptionsFromJSON},getPropMenuSupportData:function(e){return e},getCustomContextMenuItems:function(){return["Auto Size","Reset Columns","Thresholds","Advance Sorting","Grid Theme","Group/Pivot Dropzones","Show/Hide Columns","Grand Totals"]},isMSTRContextMenuSupported:function(){return"function"==typeof this.handleContextMenuSelection&&isMSTRDashBoard()},showMSTRContextMenu:function(){return this.isMSTRContextMenuSupported()},addContextMenu:function(){var e=this;e.mRendererInstance.renderedChart.gridOptions.api.addEventListener("cellContextMenu",(function(t){var n=t.event,o=null;o=t.node.group?e.mRendererInstance.getCellGroupSelector(t):e.mRendererInstance.getCellSelector(t);var r=e.getGraphicModel({selector:o});e.handleContextMenuSelection(n,r?vitaraJQ.extend(!0,{},r,{targetData:null}):r)})),vitaraJQ(".vitara-context-menu-target",this.domNode).off("contextmenu").on("contextmenu",(function(t){t.preventDefault(),vitaraJQ(t.target).closest(".vitara-context-menu-target").hasClass("ag-cell")||(t.stopPropagation(),t.e&&(t=t.e),e.handleContextMenuSelection(t))}))},getCustomContextMenuTypes:function(e,t,n){var o=this.mRendererInstance.renderedChart.getColumnMenu();switch(e){case"Auto Size":return o.getAutoSizeColumnMenu();case"Reset Columns":return o.getResetColumnsColumnMenu();case"Thresholds":return o.getThresholdColumnMenu();case"Advance Sorting":return o.getAdvanceSortingColumnMenu();case"Grid Theme":return o.getGridThemeColumnMenu();case"Group/Pivot Dropzones":return o.getGridDropZoneColumnMenu();case"Show/Hide Columns":return o.getShowHideColumnMenu();case"Grand Totals":return o.getGrandTotalsColumnMenu()}},updateColumnTitlesInGridState:function(e){return e},processBackwardsCompatibility:function(e,t){return e=this.vizParser.processGridThresholds(e),e=this.updateColumnTitlesInGridState(e),this.updateChartSavedState(e),e},isAnimationFrameEnabled:function(){return!1},updateVisualProps:function(e){if(this.propMenuPropertyState=this.processSaveData(e),this.propMenuPropertyState.currentDrillLevel=void 0,!isExporting()&&this.setProperty){this.setSaveInfoToState(this.propMenuPropertyState);var t=this.vizParser.getCustomTooltipWithIds(this.propMenuPropertyState),n=this;setTimeout((function(){try{n.getUtils().logMessage("saving to document storage.");var e=JSON.stringify(t)||"";n.setProperty(n.saveStatePeristanceKey,n.getUtils().btoa(e),{suppressData:!0})}catch(e){console.error("error saving to document chart-state")}}),1)}this.updatePropsToSessionStorage(this.propMenuPropertyState),this.updateVizPropertiesFromMenuState(this.propMenuPropertyState),this.setParentProps(this.propMenuPropertyState),this.restoreEditorState&&(this.restoreEditorState=!1)}}},8260:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(6486);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const a={getColumnTileIDMapForCompatibility:function(e){var t=this.dataHelper;if(t&&e){t.getDataSetId();var n=t.getMstrDataSetInfo(),r=(e.lastSaveInfo&&e.lastSaveInfo.dataSetId,t.getLastSavedMstrDataInfoFromState(e));if(n&&r&&!o.isEqual(r.columnTitles,n.columnTitles)){var a={};return o.each(r.columnTitles,(function(e,n){a[e]=t.getColumnTitleById(r.columns[n])||e})),a}if(n&&n.columnTitles){var i={};if(o.each(n.columnTitles,(function(e){var t=e.replace(/([.])+/g,"_").replace(/^(_)+|(_)+$/g,"_"),n=function(e){return e.replace(/([])+/g,"_").replace(/^(_)+|(_)+$/g,"_")}(e);t!==n&&(i[t]=n)})),0!==o.keys(i).length)return i}}},updateColumnTitlesInGridState:function(e){var t=this.getColumnTileIDMapForCompatibility(e);if(!t)return e;var n=function(e){return"string"!=typeof e?e:void 0!==t[e]?t[e]:e};if(o.each(["columnFormatting","rowGroupOpened","selectorModel","chartTypes"],(function(t){e[t]&&(e[t]=function(t){var r={};return o.each(e[t],(function(e,t){r[n(t)]=e})),r}(t))})),e.columnOrder&&o.each(e.columnOrder,(function(t,o){e.columnOrder[o]=n(t)})),e.columnState&&o.each(e.columnState,(function(e){e.colId=n(e.colId),e.headerName&&(e.headerName=n(e.headerName))})),e.fitToGridContent&&e.fitToGridContent.columns){var a=[];o.each(e.fitToGridContent.columns,(function(e,t){a[t]=n(e)})),e.fitToGridContent.columns=a}if(e.sortModel){var i={};o.each(e.sortModel,(function(e,t){var a=n(t);if("object"===r(e)){var l={};o.each(e,(function(e,t){l[n(t)]=e})),i[a]=l}else i[a]=e})),e.sortModel=i}if(e.aggregationModel){var l={};o.each(e.aggregationModel,(function(e,t){var r;o.isArray(e)?(r=[],o.each(e,(function(e,t){r[t]=n(e)}))):(r={},o.each(e,(function(e,t){r[n(t)]=e}))),l[n(t)]=r})),e.aggregationModel=l}if(e.chooseColumn){var d={};o.each(e.chooseColumn,(function(e,t){var r={};o.each(e,(function(e,t){r[n(t)]=n(e)})),d[n(t)]=r})),e.chooseColumn=d}if(e.customMarker){var s={};o.each(e.customMarker,(function(e,t){var r={};o.each(e,(function(e,t){e.groupingLevel=n(e.groupingLevel),e.fillMetric=n(e.fillMetric),r[n(t)]=e})),s[n(t)]=r})),e.customMarker=s}if(e.ratio){var h={};o.each(e.ratio,(function(e,t){e.Denominator=n(e.Denominator),e.Numerator=n(e.Numerator),h[n(t)]=e})),e.ratio=h}if(e.groupedColumns){var g=[];o.each(e.groupedColumns,(function(e,t){o.each(e.columns,(function(t,o){e.columns[o]=n(t)})),e.openColumn=n(e.openColumn),g[t]=e})),e.groupedColumns=g}if(e.metricGroupingModel){var p=[];o.each(e.metricGroupingModel.groups,(function(e,t){o.each(e.columns,(function(t,o){e.columns[o]=n(t)})),p[t]=e})),e.metricGroupingModel.groups=p}if(e.customFormatModel){var u={};o.each(e.customFormatModel,(function(e,r){var a=n(r),i=e;void 0!==e.gridBody&&o.each(o.keys(t),(function(t,o){var r="&amp;["+t+"]",a="&amp;["+n(t)+"]";i.gridBody.content=e.gridBody.content.split(r).join(a)})),void 0!==e.gridHeader&&(i.gridHeader.content=e.gridHeader.content.split(r).join(a)),u[a]=i})),e.customFormatModel=u}if(e.varianceScalingGroup){var C={};o.each(e.varianceScalingGroup,(function(e,t){o.each(e,(function(t,o){e[o]=n(t)})),C[t]=e})),e.varianceScalingGroup=C}return e.tooltipOptions&&(e.tooltipOptions.tooltipCustomFormat&&o.each(o.keys(t),(function(t,o){var r="&amp;["+t+"]",a="&amp;["+n(t)+"]";e.tooltipOptions.tooltipCustomFormat=e.tooltipOptions.tooltipCustomFormat.split(r).join(a)})),e.tooltipOptions.tooltipMacros&&o.each(e.tooltipOptions.tooltipMacros,(function(e){e.value=n(e.value)}))),e}}}}]);mstrmojo.plugins.VitaraCharts.v530159[645] = mstrmojo.plugins.VitaraCharts.v530159[645] || {};
