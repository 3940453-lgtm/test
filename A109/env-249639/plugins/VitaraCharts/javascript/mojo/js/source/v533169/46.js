"use strict";(self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[]).push([[46],{524:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});const a={VERSION_DEFAULTS:{forceOutlierLabelsOutside:1},getVersionDefaults:function(){return this.VERSION_DEFAULTS}}},518:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});var a=i(4);const s=t=>class extends t{constructor(t){super(t),this._mixinName="mstrmojo.plugins.VitaraCharts.v533169.MultiTierIBCSLegendLabelingHelper"}isLegendLabelReq(t){return!(void 0!==t.visible&&!1===t.visible||void 0!==t.isOutlier&&!0===t.isOutlier)}getLegendLabelOptions(t,e,i,a,s,r,n){var o={enabled:!0,inside:!0,allowOverlap:!0,crop:!1,overflow:"allow",format:"{point.legendLabel}",formatter:void 0},l=t&&e?0:t&&!e?1:!t&&e?2:t||e?null:3;switch(l=a?t&&s?4:t&&!s?6:5:l,l=a&&r?7:l){case 0:o=vitaraJQ.extend(!0,{},o,{x:void 0,y:n?22:i?-22:-18,inside:!i,align:i?"left":"center",verticalAlign:"top"});break;case 1:o=vitaraJQ.extend(!0,{},o,{x:void 0,y:i?20:-18,inside:!i,align:i?"left":"center",verticalAlign:"bottom"});break;case 2:o=vitaraJQ.extend(!0,{},o,{x:i?-30:-25,y:void 0,inside:!i,align:"left",verticalAlign:i?"bottom":"middle"});break;case 3:o=vitaraJQ.extend(!0,{},o,{x:i?30:25,y:void 0,inside:!i,align:"right",verticalAlign:i?"bottom":"middle"});break;case 4:o=vitaraJQ.extend(!0,{},o,{x:void 0,y:-37,align:"center",verticalAlign:"top"});break;case 5:o=vitaraJQ.extend(!0,{},o,{x:s?-50:-35,y:void 0,align:"left",verticalAlign:"middle"});break;case 6:o=vitaraJQ.extend(!0,{},o,{x:void 0,y:i?-25:-22,align:"center",verticalAlign:"top"});break;case 7:o=vitaraJQ.extend(!0,{},o,{x:void 0,y:i?-25:-20,align:i?"right":"center",verticalAlign:"top"})}return o}isLegendLabelOnTop(t){return!t.isAggregate&&t.ibcsDataType===this.PRIMARY_SERIES_INDICATORS[0]}isLegendLabelFirstToPoint(t){return!(t.isAggregate&&this.isPrimarySeries(t)||0!==this.getlegendLabelPointIndex(t))}getlegendLabelPointIndex(t){return t.ibcsDataType===this.PRIMARY_SERIES_INDICATORS[1]?t.data.length-1:0}isPrimarySeries(t){return t.ibcsDataType===this.PRIMARY_SERIES_INDICATORS[0]||t.ibcsDataType===this.PRIMARY_SERIES_INDICATORS[1]}isDeltaSeries(t){return t.isDelta||t.isDeltaPercentage}isWFDeltaSeries(t){return t.isDelta&&t.isWFDelta}procOptionsCstm(t){if(!t)return t;var e=a.cloneDeep(t);return e.padding&&(e.padding=0),e}getDefDataLabelOptionsForLegendLabelling(t,e,i){return t.plotOptions&&t.plotOptions.series&&t.plotOptions.series.dataLabels?t.plotOptions.series.dataLabels:void 0}postProcessLabels(t){return t}setLegendLabel(t,e,i,s){if(!t||!t.data||!e)return t;var r=this.isDeltaSeries(t),n=this.isWFDeltaSeries(t),o=this.getDefDataLabelOptionsForLegendLabelling(e,"legend",t.isDelta),l=this.getDefDataLabelOptionsForLegendLabelling(e,"dataLabel",t.isDelta),h="column"!==e.chart.type,d=this.isLegendLabelFirstToPoint(t),u=this.isLegendLabelOnTop(t),c=t.isDeltaPercentage;return t.data[i]&&this.isIBCSMode()?(u=t.data[i].y===s,t.data[i].dataLabels=t.data[i].dataLabels?t.data[i].dataLabels:[],t.data[i].legendLabel=t.legendLabel||t.ibcsDataType,a.isArray(t.data[i].dataLabels)||(t.data[i].dataLabels=[t.data[i].dataLabels]),t.data[i].dataLabels.push(vitaraJQ.extend(!0,{},o,this.getLegendLabelOptions(h,d,u,r,c,n,t.isAggregate))),t.data[i].dataLabels.push(vitaraJQ.extend(!0,{},l,t.dataLabels||{},this.getDefaultLabelAlignmentOptions(e,!h&&!r))),t.data[i].dataLabels=this.postProcessLabels(t.data[i].dataLabels),t):t}getDefaultLabelAlignmentOptions(t,e){var i,a,s;let r={};if(e){r.verticalAlign="bottom";let e=null===(s=null===(a=null===(i=null==t?void 0:t.plotOptions)||void 0===i?void 0:i.series)||void 0===a?void 0:a.dataLabels)||void 0===s?void 0:s.align;e&&"right"!==e||(r.align="center")}return r}setLegendLabelsIBCSStyle(t){if(!t)return t;let e=this,i=[],s={},r={};return a.each(t.series,(function(t,a){t&&e.isLegendLabelReq(t)&&t.data&&(i.push(a),s[a]=e.getlegendLabelPointIndex(t))})),a.each(i,(function(e){var i;if(t.series[e].isAggregate)return!1;let a=s[e],n=null===(i=t.series[e].data[a])||void 0===i?void 0:i.y;(void 0===r[a]||r[a]<n)&&(r[a]=n)})),a.each(i,(function(i){t.series[i]=e.setLegendLabel(t.series[i],t,s[i],r[s[i]])})),t}}},516:(t,e,i)=>{i.r(e),i.d(e,{renderHCDeltaView:()=>h});var a=i(436),s=i(234),r=i(447),n=i(517),o=i(283),l=i(4);const h=function(t,e,i,s,r,n,o,l){a.hcCore.call(this,t,e,i,r),this.setVizProps(r),this.setExtraOptions(s),this.setViewType(o?o.chartType:null),this.setSeriesTemplate(l),this.setWFColors(this.DEFAULT_COLORS),this.setIBCSOptions(o),this.setTrellisDataRows(n)};vitaraJQ.extend(h.prototype,a.hcCore.prototype,o.labelProvider.prototype,n.waterfallStyledModeRenderer.prototype,{scriptClass:"renderHCDeltaView",VIEW_TYPES:{DELTA_VIEW:0,DELTA_PERCENTAGE_VIEW:1,DELTA_WATERFALL:2},DEFAULT_COLORS:["#8bb400","#e52e2d"],DEFAULT_DELTA_SERIES_TYPE:"bar",isDeltaView:function(){return this.getViewType()===this.VIEW_TYPES.DELTA_VIEW||this.getViewType()===this.VIEW_TYPES.DELTA_WATERFALL},isPercentageDeltaView:function(){return this.getViewType()===this.VIEW_TYPES.DELTA_PERCENTAGE_VIEW},isWaterfallDeltaView:function(){return this.getViewType()===this.VIEW_TYPES.DELTA_WATERFALL},setIBCSOptions:function(t){this.IBCSOptions=t},getIBCSOptions:function(){return this.IBCSOptions},updateWFColorsFromVizProps:function(){},setWFColors:function(t){this.WFColors=t},getWFColors:function(){return this.WFColors},getDataRows:function(){return this.dataRows},setDataRows:function(t){this.dataRows=t},setTrellisDataRows:function(t){this.trellisDataRows=t},getTrellisDataRows:function(t){return this.trellisDataRows},getSeriesTemplate:function(){return this.seriesTemplate},setSeriesTemplate:function(t){this.seriesTemplate=t},getExtraOptions:function(){return this.extraOptions},setExtraOptions:function(t){this.extraOptions=t},setVizProps:function(t){this.vizProps=t},getVizProps:function(){return this.vizProps},getMetricSignDefinitions:function(t){if("waterfall"===this.context.vitara_chart_type)return!0;if(!this.metricSignsDefs){this.metricSignsDefs={};var e=this,i=[],a=e.getChartDataMapper().titles.slice(e.getChartDataMapper().numAttributes);l.each(e.context.utils.getNegativeMetrics(),(function(t){if(0===(s=t).indexOf("[")&&s.indexOf("]")===s.length-1)try{var e=new RegExp(t.slice(1,t.length-1));l.each(a,(function(t){t.match(e)&&i.push(t)}))}catch(e){console.log("Invalid Regular Expression: "+t)}else-1!==a.indexOf(t)&&i.push(t);var s})),l.each(a,(function(t){e.metricSignsDefs[t]=-1===i.indexOf(t)}))}return this.metricSignsDefs[t]},isNegativeMetricData:function(t){if(t){if(+t.subtrahend)return!0;if(t.mName)return!this.getMetricSignDefinitions(t.mName)}return!1},getChartOptionsForDeltaView:function(){return this.context&&this.context.getXAxisFromRenderOptions?{xAxis:this.context.getXAxisFromRenderOptions()}:{xAxis:this.context.getRenderedChartInstance()[0].getRenderOptions().xAxis}},parseSeriesData(t,e){return this.context&&this.context.parseSeriesData?this.context.parseSeriesData(t,e):l.map(t,(function(t){return t&&void 0!==t.high&&void 0!==t.low?{v:t.high-t.low,point:t}:null}))},getDataForDeltaView:function(){if(this.context&&this.context.getDataForDeltaView)return this.context.getDataForDeltaView(this.getTrellisDataRows(),this.getIBCSOptions());if(this.context&&this.context.getRenderedChartInstance){if(this.context.getWaterfallUnitsCount()<2)throw new Error("Delta view can only be rendered with two views");var t=[this.parseSeriesData(this.context.getRenderedChartInstance()[0].getRenderOptions().series[0].data),this.parseSeriesData(this.context.getRenderedChartInstance()[1].getRenderOptions().series[0].data)];return t.metaInfo={0:{metricFormat:this.getChartDataMapper().getMetricFormatObject(this.getChartDataMapper().getMetricIndex(this.context.getRenderedChartInstance()[0].getRenderOptions().series[0].name))},1:{metricFormat:this.getChartDataMapper().getMetricFormatObject(this.getChartDataMapper().getMetricIndex(this.context.getRenderedChartInstance()[1].getRenderOptions().series[0].name))}},t.metaInfo.invalid=!0,t}},getMetricFormat:function(t){return this.getDataRows()&&this.getDataRows().metaInfo&&this.getDataRows().metaInfo[0]?this.getDataRows().metaInfo[0].metricFormat:t&&t.mName?this.getChartDataMapper().getMetricFormatObject(this.getChartDataMapper().getMetricIndex(t.mName)):void 0},getIBCSFormattedLabel:function(t,e){var i=this.context.utils.shortenNumber({rawVal:t,fv:this.context.utils.formatMetricLike(t,this.getMetricFormat(e))},this.getVizProps().dataLabelDisplayFormat),a="";return this.isIBCSEnabledWithSmallMultiples()&&this.getTrellisDataRows()&&this.getTrellisDataRows().metaInfo&&"average"===this.getTrellisDataRows().metaInfo.dataType?a+=i:a=(t<0?"":String.fromCharCode(43))+i,e&&e.isTotal?"<b>"+a+"</b>":a},deltaFormattedDataLabel:function(t,e){var i=void 0!==e.point.actualVal?e.point.actualVal:t.v;return this.getIBCSFormattedLabel(i,e.point.wfPoint?e.point.wfPoint.point:e.point.wfPoint)},deltaFormattedTooltip:function(t){var e=t.point.options.wfPoint;return e&&e.dataRow?this.getTooltip(e,[],e.dataRow,t.point):this.deltaFormattedDataLabel({v:t.y},t)},isTypeIBCS:function(){return this.context.isTypeIBCS&&this.context.isTypeIBCS()},hasPlannedDataType:function(t){if(t){var e=!1;return l.each(t,(function(t){"PL"===t.dataType&&(e=!0)})),e}},getChartTitleX:function(t,e){var i;return this.getDataRows()&&this.getDataRows().metaInfo&&this.getDataRows().metaInfo[0]&&(i=this.getDataRows().metaInfo[0].dataType),!i&&this.context&&this.context.getDeltaViewTitle&&(i=this.context.getDeltaViewTitle()),(t||"")+(i||"")+(e||"")},getChartTitle:function(t,e){var i;return this.getDataRows()&&this.getDataRows().metaInfo&&(i=this.getDataRows().metaInfo[0].dataType),this.context&&this.context.getChartTitle?this.context.getChartTitle(i,this.getTrellisDataRows(),t,e):(t||"")+(i||"")+(e||"")},isTypeIBCSPlanned:function(){return this.getDataRows()&&this.getDataRows().metaInfo&&!this.getDataRows().metaInfo.invalid?this.hasPlannedDataType(this.getDataRows().metaInfo):this.getIBCSOptions().hasPlannedview},getHCDefaultDeltaOptions:function(){var t=this,e={chart:{type:"bar",inverted:!0,zoomType:void 0},title:{text:t.getChartTitle(String.fromCharCode(916)),align:this.getVizProps().titleAlignment||"left"},yAxis:{visible:!0,labels:{enabled:!1},gridLineWidth:0,lineWidth:0,plotLines:[],tickPositioner:function(){t.redrawPlannedDualPlotLines(this)}},plotOptions:{series:{maxPointWidth:20,grouping:!1,dataLabels:{enabled:void 0===this.getVizProps().labelsEnable||+this.getVizProps().labelsEnable,inside:!1,crop:!1,overflow:"allow",style:{color:"black"},formatter:t.getDataLabelFormatter()},marker:{inverted:!0}}},tooltip:{enabled:!0,formatter:function(){return"scatter"!==this.series.type&&t.deltaFormattedTooltip(this)}},legend:{enabled:!1}};return+this.isTypeIBCSPlanned()?e.yAxis.plotLines.push({dashStyle:"solid",color:"#808080",isDualLine:!0,width:2,value:0,className:"vitara-delta-axis-line",useHorzBreaks:this.getIBCSOptions().useHorzBreaks}):e.yAxis.plotLines.push({dashStyle:"solid",color:"#808080",width:5,value:0,className:"vitara-delta-axis-line",useHorzBreaks:this.getIBCSOptions().useHorzBreaks}),e},getPlotLineStroke:function(){return this.getIBCSOptions()&&this.getIBCSOptions().extraOptions&&this.getIBCSOptions().extraOptions.chart&&"column"===this.getIBCSOptions().extraOptions.chart.type?"url(#vitaraHDoubleLines)":"url(#vitaraVDoubleLines)"},addSmallMultipleDefaults:function(t){return t.yAxis.plotLines.push({dashStyle:"solid",color:"#c3c3c3",width:1,value:0,className:"vitara-delta-axis-line"}),t},getHCPercentageDeltaDefaults:function(){var t=this;return{chart:{events:{load:function(){t.setOutlierStyles(this)}}},title:{text:this.getChartTitle(String.fromCharCode(916),"%")},plotOptions:{series:{marker:{enabled:!0,symbol:"stop",radius:9}},column:{pointWidth:5,dataLabels:{enabled:!0,padding:12}},bar:{pointWidth:5,dataLabels:{enabled:!0,padding:12}},scatter:{dataLabels:{enabled:!1}}}}},formDataElement:function(t,e,i){return{x:e,y:t,wfPoint:i,className:this.getDataPointClassName(t,i),fv:Math.round(t)}},getDataPointClassName:function(t,e){return"vitara-point ibcs-data "+(e.className?e.className+" ":"")+(this.addDeltaClassToPoint()?this.getStyleByValIBCSDelta(t,e.point?e.point:e):"")},formLineSeriesForData:function(t){var e=[];return l.each(t,(function(t){e.push({x:t.x,y:0,className:t.y<0?this.getNegativeDataClassName():this.getPositiveDataClassName()}),e.push({x:t.x,y:t.y,className:t.y<0?this.getNegativeDataClassName():this.getPositiveDataClassName()}),e.push(null)})),{name:"connectorLinesSeries",type:"line",data:e}},formScatterSeries:function(t){var e=this;return l.map(t,(function(t){return t?t.isOutlier?null:{x:t.x,y:t.y,marker:t.wfPoint?e.addMarkerClassForScatter(t.wfPoint):e.addMarkerClassForScatter({})}:t}))},addMarkerClassForScatter:function(t){return t.point&&"FC"===t.point.ibcsDataType&&(t.marker||(t.marker={}),t.marker.className="forecast-data"),t.marker},getChartDataMapper:function(){return this.chartDataMapper||(this.chartDataMapper=new s.chartDataMapperBase(null,this.data.getTitles(),this.data.numAttributes,this)),this.chartDataMapper},getAxisBreakHelper:function(){return this.axisBreakHelper||(this.axisBreakHelper=new r.default),this.axisBreakHelper},setOutlierMarkerUpdate:function(t){this.outlierMarkerStyleDirty=t},isOutlierMarkerUpdateReq:function(){return this.outlierMarkerStyleDirty},getVScaleByRef:function(t,e){if(t&&e)return(e.v!==t.v?e.bounds.height/e.v*t.v:e.bounds.height)/t.v*(t.v/t.bounds.height)},getHScaleByRef:function(t,e){if(t&&e)return(e.v!==t.v?e.bounds.width/e.v*t.v:e.bounds.width)/t.v*(t.v/t.bounds.width)},getScaleByRef:function(t,e,i){return i&&"column"===i?this.getVScaleByRef(t,e):this.getHScaleByRef(t,e)},getPointIndex:function(t){var e=t.map((function(t,e){return{v:t,i:e}})).sort((function(t,e){return e.v-t.v}))[0];return e&&e.i&&-1!==e.i?e.i:0},mapSecondarySeries:function(t){if(t&&!(t.length<2)){var e=t[1].data,i=t[0].data;l.each(i,(function(t){t.update({y:e[t.x].y},!1)}))}},rescaleDeltaViewValueAxis:function(t,e){t.sort((function(t,e){return t-e})),t[0],t[t.length-1];var i,a=this.renderedChart.axes[1],s=a.getExtremes(),r="height";a.horiz&&(r="width");var n=s.max-s.min,o=a[r]*e;return i=o-n,0!==s.max&&0!==s.min?this.renderedChart.axes[1].setExtremes(s.min-i/2,o+s.min-i/2):0===s.max?this.renderedChart.axes[1].setExtremes(i-o,s.max):this.renderedChart.axes[1].setExtremes(s.min,o-i),!0},rescaleValueAxisExtremes:function(t,e){t.sort((function(t,e){return t-e})),t[0],t[t.length-1];var i=this.renderedChart.axes[1].getExtremes(),a=(i.max-i.min)/e;return this.renderedChart.axes[1].setExtremes(i.min,a-i.min),!0},adjustValueAxisExtremes:function(t){t.sort((function(t,e){return t-e}));var e,i=t[0],a=t[t.length-1],s=this.renderedChart.axes[1].getExtremes();i<s.min?(e=s.min-i,this.renderedChart.axes[1].setExtremes(s.min-e,s.max-e)):a>s.max&&(e=a-s.max,this.renderedChart.axes[1].setExtremes(s.min+e,s.max+e))},getRefScale:function(){return this.refScale},setRefScale:function(t){this.refScale=t},getTargetSeriesIndex:function(){return this.renderedChart.series.length>1?1:0},targetSeriesParser:function(t){return t.map((function(t){return t.y}))},getRefChartSeries:function(t){return t.series[l.findIndex(t.series,(function(t){return void 0!==typeof t.visible&&t.visible}))]},getScaleRefChartInstance:function(){return this.context&&this.context.getScaleRefChartInstance?this.context.getScaleRefChartInstance():this.context.getRenderedChartInstance()[1]},getRefChartType:function(){return this.getScaleRefChartInstance()&&this.getScaleRefChartInstance().renderedChart?this.getScaleRefChartInstance().renderedChart.userOptions.chart.type:null},computeRelativeScale:function(){var t=this.renderedChart.series[this.getTargetSeriesIndex()],e=this.targetSeriesParser(t.data),i=this.getPointIndex(e),a={v:Math.abs(e[i]),bounds:t.data[i].graphic.element.getBoundingClientRect()},s=this.getRefChartSeries(this.getScaleRefChartInstance().renderedChart),r=this.parseSeriesData(s.data).map((function(t){return t.v})),n=this.getPointIndex(r),o={v:Math.abs(r[n]),bounds:s.data[n].graphic.element.getBoundingClientRect()};return this.setRefScale(this.getScaleByRef(a,o,this.getRefChartType())),this.getRefScale()},updateSeriesScale:function(t,e){var i=!1;return l.each(e.data,(function(e){e&&!e.isOutlier&&(i=!0,e.update({actualVal:e.y,isOutlier:!1,y:e.y*t},!1))})),i},getIBCSChartType:function(){return this.getIBCSOptions().chartType},setRelativeScaling:function(t){if(this.renderedChart){var e,i=this.computeChartScale();if("number"==typeof i&&!isNaN(i)){var a=this.renderedChart.series[this.getTargetSeriesIndex()],s=this.targetSeriesParser(a.data),r=!1;if(this.getIBCSChartType()===this.VIEW_TYPES.DELTA_VIEW||this.getIBCSChartType()===this.VIEW_TYPES.DELTA_WATERFALL){if(t&&t.scale){if(t.scale===i)return;e=i/t.scale,r=this.isIBCSEnabledWithSmallMultiples()?this.rescaleValueAxisExtremes(s,e):this.rescaleDeltaViewValueAxis(s,e)}else{var n=this.getScaleRefChartInstance().computeChartScale();r=this.rescaleDeltaViewValueAxis(s,n)}r&&(this.renderedChart.isDirtyBox=!0,this.renderedChart.redraw())}}}},redrawPlannedDualPlotLines:function(t){if(t&&t.plotLinesAndBands.length>0){var e=l.findIndex(t.plotLinesAndBands,(function(t){return t.options.isDualLine})),i=1/(t.toPixels(1)-t.toPixels(0));if(-1!==e){var a=-4*i/2,s=4*i/2;0===t.max&&0!==t.min&&(s=-Math.abs(2*s),a=0),0===t.min&&0!==t.max&&(s=Math.abs(2*s),a=0),t.plotLinesAndBands[e].destroy(),t.addPlotLine({value:a,useHorzBreaks:this.getIBCSOptions().useHorzBreaks}),t.addPlotLine({value:s,useHorzBreaks:this.getIBCSOptions().useHorzBreaks})}}},computeChartScale:function(){if(!this.renderedChart||!this.renderedChart.series)return 0;var t=this.renderedChart.series[this.getTargetSeriesIndex()],e=this.targetSeriesParser(t.data),i=this.getPointIndex(e),a={v:Math.abs(e[i]),bounds:t.data[i].graphic?t.data[i].graphic.element.getBoundingClientRect():null};return this.getValueAxisRangeScale(a)},getValueAxisRangeScale:function(t){if(this.renderedChart){var e=this.renderedChart.yAxis[0],i="height";e.horiz&&(i="width");var a=e.max-e.min;if("number"==typeof a&&"number"==typeof e[i])return a/e[i];if(t.bounds)return t.v/t.bounds[i]}return 1},getSeriesFlatDataOnOutlierStyling:function(){var t=[];return l.each(this.renderedChart.series,(function(e){t=t.concat(e.data.map((function(t){return t.y})))})),t},setOutlierStyles:function(t){try{if(!t||!t.series)return;var e=this,i={type:"scatter",data:[],dataLabels:{enabled:!1},allowPointSelect:!1,enableMouseTracking:!1,isSecondary:!0},a=t.series.length>1?t.series[1]:t.series[0];l.each(a.data,(function(t){if(!t.isOutlier)return;let s=t.graphic.element.getBBox(),r=t.dataLabel?t.dataLabel.element.getBBox():{},n=((null==a?void 0:a.type)||e.DEFAULT_DELTA_SERIES_TYPE)===e.DEFAULT_DELTA_SERIES_TYPE?s.height:s.width,o=t.y/n,l=o*r.width,h=t.y+l+20*o;i.data.push({x:t.x,y:h,className:t.className,marker:{inverted:!0,radius:12,symbol:t.y>=0?"rightdir":"leftdir"}})}));var s=t.series[0].userOptions,r=t.series[1].userOptions;t.series[0].destroy(),t.series[0].destroy(),t.addSeries(s,!1,!1),t.addSeries(r,!1,!1),t.addSeries(i,!1,!1),t.isDirtyBox=!0,t.redraw(!1)}catch(t){console.error(t)}},updateVizPostHCRender:function(){try{if(!this.renderedChart)return;this.getViewType()!==this.VIEW_TYPES.DELTA_PERCENTAGE_VIEW&&this.setRelativeScaling()}catch(t){console.error(t)}},mapOutliersToBoundaryValues:function(t){if(t&&t.data){var e=t.data.map((function(t){return t.y})),i=this.getAxisBreakHelper().getMajorOutliers(e),a=this.getAxisBreakHelper().getBoundaryValues(e,i);if(i&&a)return a.p=a.p+2*Math.abs(a.p)/100,a.n=a.n-2*Math.abs(a.n)/100,i&&i.length>0&&this.setOutlierMarkerUpdate(!0),l.each(i,(function(e){var i=l.findIndex(t.data,(function(t){return t.y===e}));-1!==i&&(t.data[i].actualVal=t.data[i].y,t.data[i].isOutlier=!0,t.data[i].y=e>=0?a.p:a.n)})),t}},setLegendLabels:function(t){if(t&&t.series){var e=this;return l.each(t.series,(function(i,a){i.isSecondary||(t.series[a].isPrimary=!0,e.isDeltaView()?(t.series[a].isDelta=!0,t.series[a].isWFDelta=e.isWaterfallDeltaView(),t.series[a].legendLabel=void 0!==e.getVizProps().ibcsPrimaryDeltaViewTitle?e.getVizProps().ibcsPrimaryDeltaViewTitle:e.getChartTitleX(String.fromCharCode(916))):e.isPercentageDeltaView()&&(t.series[a].isDeltaPercentage=!0,t.series[a].legendLabel=void 0!==e.getVizProps().ibcsSecondaryDeltaViewTitle?e.getVizProps().ibcsSecondaryDeltaViewTitle:e.getChartTitleX(String.fromCharCode(916),"%")))})),t}},processChartOptions:function(t){return this.setLegendLabels(t)},setViewType:function(t){this.viewType=t},getViewType:function(){return this.viewType},isIBCSEnabledWithSmallMultiples:function(){return!(!this.context||!this.context.isIBCSEnabledWithSmallMultiples)&&this.context.isIBCSEnabledWithSmallMultiples()},isSMDeltaView:function(){return this.getIBCSOptions().smIBCSView||!1},addDeltaClassToPoint:function(){return!this.isIBCSEnabledWithSmallMultiples()||!this.isSMDeltaView()},getValueAxisLimits:function(){return this.getViewType()!==this.VIEW_TYPES.DELTA_PERCENTAGE_VIEW||this.isIBCSEnabledWithSmallMultiples()?this.isIBCSEnabledWithSmallMultiples()?void 0:this.getMinMaxFromData()[0]:{min:void 0,max:void 0}},includeAggregatePlaceHolder:function(t){return this.getDataRows()&&this.getDataRows().metaInfo?(this.getDataRows().metaInfo[0]&&this.getDataRows().metaInfo[0].hasAggData&&(t.data[t.data.length-1].x+=1),t):t},formHCDeltaViewOptions(t,e,i,a){var s=this,r={series:[]};if(!t)throw new Error("Invalid data");switch(e||(e=0),e){case s.VIEW_TYPES.DELTA_VIEW:(r=Highcharts.merge(this.getHCDefaultDeltaOptions(),i||{})).series=this.getChartDataMapper().formSeriesByAbsoluteDelta(t[0],t[1],this.formDataElement.bind(this)),this.isIBCSEnabledWithSmallMultiples()?r.plotOptions.series=l.extend({},r.plotOptions.series,{column:{pointPadding:.1}}):r.series[0]=this.includeAggregatePlaceHolder(r.series[0]);break;case s.VIEW_TYPES.DELTA_PERCENTAGE_VIEW:(r=Highcharts.merge(this.getHCDefaultDeltaOptions(),this.getHCPercentageDeltaDefaults(),i||{})).series=this.getChartDataMapper().formSeriesByRelativeDelta(t[0],t[1],this.formDataElement.bind(this)),this.isIBCSEnabledWithSmallMultiples()||(r.series[0]=this.includeAggregatePlaceHolder(r.series[0]),l.each(r.series,(function(t,e){r.series[e]=s.mapOutliersToBoundaryValues(t)}))),r.series.unshift({data:s.formScatterSeries(r.series[0].data),type:"scatter",color:"#404040",className:"vitara-waterfall-delta-marker ibcs-data",colorIndex:"undefined",isSecondary:!0,dataLabels:{enabled:!1}})}return r=this.processChartOptions(r)},renderChart:function(){this.renderChartNew()},getRenderOptions:function(){return this.renderOptions},setRenderOptions:function(t){this.renderOptions=t},renderChartOptions:function(){this.renderHCNode(this.getRenderOptions())},processIBCSOptions:function(t,e){if(e&&t)return this.setWFColors(l.merge([],e.colors)),vitaraJQ.extend(!0,t,e.extraOptions)},formChartOptions:function(){this.setDataRows(this.getDataForDeltaView()),this.setExtraOptions(this.getChartOptionsForDeltaView());var t=this.formHCDeltaViewOptions(this.getDataRows(),this.getViewType(),this.getExtraOptions(),this.getSeriesTemplate());t=this.processChartOptions(t),t=this.processIBCSOptions(t,this.getIBCSOptions()),this.processStyleMode(t,this.getVizProps()),this.setRenderOptions(t)},renderChartNew:function(){this.formChartOptions(),this.renderChartOptions()},getMinMaxFromData:function(){var t=[];if(this.getRenderOptions().series){var e=l.cloneDeep(this.getRenderOptions().series[0]);if(e&&e.data){var i=void 0!==e.yAxis?e.yAxis:0;t[i]||(t[i]={}),l.each(e.data,(function(e){e&&void 0!==e.y&&null!==e.y&&""!==e.y&&!isNaN(e.y)&&(t[i].min=Math.min(e.y,t[i].min?t[i].min:Number.MAX_SAFE_INTEGER),t[i].max=Math.max(e.y,t[i].max?t[i].max:Number.MIN_SAFE_INTEGER))}))}}return t},getLabelPointInfo:function(t){return{v:void 0!==t.point.actualVal?t.point.actualVal:t.y,opts:t.point&&t.point.wfPoint&&t.point.wfPoint.point?t.point.wfPoint.point:t.point&&t.point.wfPoint?t.point.wfPoint:{}}},getMetricLabel:function(t,e){var i=this.getLabelPointInfo(t),a=this.context.utils.shortenNumber({rawVal:i.v,fv:this.context.utils.formatMetricLike(i.v,this.getMetricFormat(i.opts))},e),s="";return this.isIBCSEnabledWithSmallMultiples()&&this.getTrellisDataRows()&&this.getTrellisDataRows().metaInfo&&"average"===this.getTrellisDataRows().metaInfo.dataType?s+=a:s=(i.v<0?"":String.fromCharCode(43))+a,i.opts&&i.opts.isTotal?"<b>"+s+"</b>":s},getDataLabelFormatter:function(){var t=this;return function(){return t.getDataLabel(this)}},getLabelCustomFormat:function(t){return t.deltaViewLabel||this.getDataLabelCustomFormat(t)},getDataLabelCustomFormat:function(t){return this.getVizProps().deltaViewLabel},getDataLabelMentions:function(t){return this.getCustomDataLabelMentions(t)},getCustomDataLabelMentions:function(t){return this.getVizProps().deltaViewLabelcolstate},getCategoryLabel:function(t){return""},forceOutlierLabelsOutside:function(){return 1==+this.getVizProps().forceOutlierLabelsOutside}})},517:(t,e,i)=>{i.r(e),i.d(e,{waterfallStyledModeRenderer:()=>n});var a=i(441),s=i(44),r=i(4);const n=function(t){a.styledModeRendererBase.call(this,t)};vitaraJQ.extend(n.prototype,a.styledModeRendererBase.prototype,{getPointColorStyleCSS:function(t,e,i){return t+" "+"{stroke: strokeColor !important; fill: fillColor}".replace(/strokeColor/g,i).replace(/fillColor/g,e)},COLOR_NONE:"#ffffff00",isEmptyBars:function(){return!1},mapSeriesColors:function(t){var e=this;r.each(t.series,(function(t){t&&t.ibcsDataType&&(t.colorIndex="undefined",t.className=e.getIBCSClassNameForSeries(t,"actual-data"))})),this.processWaterfallStyles(t),r.each(e.getWfCustomStyles(),(function(t){e.insertRule(e.getUniqueChartStyle()+" ."+t.className+" {stroke:"+t.color+"; fill:"+t.color+";}")}))},setLineSeriesProperties:function(t){this.insertRule(".vitara-waterfall-connector-line > path {stroke: hexvalue; stroke-width:1;stroke-dasharray:1,5;}".replace(/hexvalue/g,"#b2b2b2"),this.ENUM_STYLE_SCOPE.GLOBAL)},getWfCustomStyles:function(){return this.wfCustomStyles||(this.wfCustomStyles=[]),this.wfCustomStyles},addWfCustomStyle:function(t){this.getWfCustomStyles().push(t)},getStyleByTitle:function(t){return this.getWfCustomStyles().filter((function(e){return e.title===t}))[0]||{}},getStyleByVal:function(t,e){return+e.nonAdditive?"vitara-waterfall-total":+e.subtrahend?t.high-t.low>0?"data-negative":"data-positive":t.high>t.low?"data-positive":t.high<t.low?"data-negative":void 0},getStyleByValIBCS:function(t,e){return+e.subtrahend?"vitara-point ibcs-data "+(t.high-t.low>0?"data-negative":"data-positive"):"vitara-point ibcs-data "+(t.high>t.low?"data-positive":"data-negative")},getStyleByValIBCSDelta:function(t,e){return this.getViewType()===this.VIEW_TYPES.DELTA_VIEW&&e&&e.ibcsDataType&&"FC"===e.ibcsDataType?"forecast-data "+this.getIBCSDeltaStyle(t,e):this.getIBCSDeltaStyle(t,e)},getIBCSDeltaStyle:function(t,e){return t<0?this.getNegativeDataClassName(e):this.getPositiveDataClassName(e)},getPointStyle:function(t,e){var i;if(t&&e){if(e.color){var a=this.getStyleByTitle(e.title);return a&&a.id||(a.title=e.title,a.id=s.utils.getMD5Hash(e.title),a.className="vitara-series-"+a.id,a.color=e.color,this.addWfCustomStyle(a)),a.className}return(null===(i=this.context)||void 0===i?void 0:i.isTypeIBCS())?this.getStyleByValIBCS(t,e):this.getStyleByVal(t,e)}},setPointColor:function(t,e){if(t)return t.className="vitara-point "+this.getPointStyle(t,e),t}})}}]);mstrmojo.plugins.VitaraCharts.v533169[46] = mstrmojo.plugins.VitaraCharts.v533169[46] || {};
