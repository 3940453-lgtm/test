mstrmojo.requiresCls("mstrmojo.plugins.VitaraCharts.v533169.VitaraHCSankeyChartInitializer"),(()=>{var t,e={8933:()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=o.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,n=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function n(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:String(e)}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=s(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}}).apply(this,arguments)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=p(t);if(e){var n=p(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return c(this,r)}}function c(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";var e,i={548:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var i=r(234),n=(r(44),r(4));function o(t){return(o="function"==typeof Symbol&&"symbol"==d(Symbol.iterator)?function(t){return d(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":d(t)})(t)}function a(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===o(e)?e:String(e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(p,t);var e,r,i,o,l=(i=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(i);if(o){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function p(t,e,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(n=l.call(this,t,e,r,i)).ENUM_NODE={SOURCE:0,TARGET:1},n.DEF_GROUP="DEF",n}return e=p,(r=[{key:"getMetricTitles",value:function(){return this.titles.slice(this.numAttributes)}},{key:"initZoneData",value:function(t){this.xaxis=t.xaxis,this.value=t.yaxis}},{key:"getColumnIndices",value:function(t){return{source:this.titles.indexOf(t.source),target:this.titles.indexOf(t.target),linkBy:this.titles.indexOf(t.linkBy),groupBy:this.titles.indexOf(t.groupBy),depthBy:this.titles.indexOf(t.depthBy),value:this.titles.indexOf(this.value&&this.value.length?this.value[0].name:void 0)}}},{key:"findNodeIndex",value:function(t){return n.findIndex(this.nodes,(function(e){return e.id===t}))}},{key:"updateTargetNode",value:function(t,e,r){this.nodes[t].sources[r[e.source].t]||(this.nodes[t].sources[r[e.source].t]=[]),this.nodes[t].sources[r[e.source].t].push(r[e.value].v)}},{key:"updateSourceNode",value:function(t,e,r){this.nodes[t].linkLabel=-1!==e.linkBy?r[e.linkBy].t:void 0,this.nodes[t].targets[r[e.target].t]||(this.nodes[t].targets[r[e.target].t]=[]),this.nodes[t].targets[r[e.target].t].push(r[e.value].v)}},{key:"isDepthMode",value:function(t){return-1!==t.depthBy}},{key:"getElementDepth",value:function(t,e,r){return void 0===this.depthMap[t[e.depthBy].t]&&(this.depthMap[t[e.depthBy].t]=Object.keys(this.depthMap).length),r.type===this.ENUM_NODE.SOURCE?this.depthMap[t[e.depthBy].t]:1+this.depthMap[t[e.depthBy].t]}},{key:"getNodeId",value:function(t,e,r,i){var n=-1!==e.groupBy?t[e.groupBy].t:this.DEF_GROUP;return this.isDepthMode(e)&&(n=this.getElementDepth(t,e,i)),n+"-"+t[r].t}},{key:"getObjNode",value:function(t,e,r,i,n){return{id:this.getNodeId(t,r,e,n),eid:t[e].id,t:t[e].t,sources:n.type===this.ENUM_NODE.TARGET?a({},t[r.source].t,[t[r.value].v]):{},targets:n.type===this.ENUM_NODE.SOURCE?a({},t[r.target].t,[t[r.value].v]):{},pathIndex:i,linkLabel:-1!==r.linkBy?t[r.linkBy].t:void 0,group:-1!==r.groupBy?t[r.groupBy].t:this.DEF_GROUP,attributeTitle:this.titles[e],attrIndex:e,metricTitle:this.titles[r.value],mtrIndex:r.value,row:t}}},{key:"checkCyclic",value:function(t,e){var r={isCyclic:!1};return void 0!==this.nodes[t].targets[this.nodes[e].t]&&void 0!==this.nodes[e].sources[this.nodes[t].t]?(r.isLinked=!0,r):(r.srcPathIndex=this.getPathIndex(t,this.ENUM_NODE.SOURCE),r.trgPathIndex=this.getPathIndex(e,this.ENUM_NODE.TARGET),r.srcPathIndex===r.trgPathIndex&&r.srcPathIndex!==this.sPaths.length&&(r.isCyclic=!0),r)}},{key:"getFirstTargetPositionForNode",value:function(t){return n.findIndex(this.sPaths,(function(e){return 0===e.indexOf(t)}))}},{key:"getFirstSourcePositionForNode",value:function(t){return n.findIndex(this.sPaths,(function(e){return e.indexOf(t)===e.length-1}))}},{key:"getPathIndex",value:function(t,e){var r;return-1===(r=e===this.ENUM_NODE.SOURCE?this.getFirstSourcePositionForNode(t):this.getFirstTargetPositionForNode(t))?this.sPaths.length:r}},{key:"formLinkElement",value:function(t,e){return{from:t.t,to:e.t,weight:self.sum(n.flatMap(t.targets[e.t]))}}},{key:"formNodeElement",value:function(t,e){return{id:t.id,name:t.t}}},{key:"formHCOptions",value:function(t){return{xAxis:{},yAxis:{},series:[t]}}},{key:"sum",value:function(t){return this.getSeriesSum(t)}},{key:"getLinkMetrics",value:function(t,e){return{weight:this.sum(t.node.targets[e.node.t]),percentage:100*this.sum(t.node.targets[e.node.t])/this.sum(n.flatMap(t.node.targets))}}},{key:"getNodeMetrics",value:function(t,e){var r=this,i=function(t){return Object.keys(t.sources).length?t.sources:t.targets},o=this.nodes.filter((function(t){return t.depth===e})),a=r.sum(o.map((function(t){return r.sum(n.flatMap(i(t)))})));return{weight:r.sum(n.flatMap(i(t))),percentage:100*r.sum(n.flatMap(i(t)))/a}}},{key:"getNodeDepth",value:function(t){return n.max(this.sPaths.map((function(e){return e.indexOf(t)})))}},{key:"markNodeDepths",value:function(){var t=this;this.nodes.map((function(e,r){return e.depth=t.getNodeDepth(r),e}))}},{key:"formSankeySeriesOptions",value:function(){var t,e=this,r=[];this.markNodeDepths(),t=this.nodes.map((function(t,r){var i=e.getNodeMetrics(t,t.depth);return e.context.formNodeElement?e.context.formNodeElement(t,t.depth,i):e.formNodeElement(t,t.depth,i)}));for(var i=0;i<this.sPaths.length;i++)for(var n=0;n<this.sPaths[i].length-1;n++)if(!(this.sPaths[i][n].length<2)){var o=this.getLinkMetrics(t[this.sPaths[i][n]],t[this.sPaths[i][n+1]]);r.push(this.context.formLinkElement?this.context.formLinkElement(t[this.sPaths[i][n]],t[this.sPaths[i][n+1]],o):this.formLinkElement(t[this.sPaths[i][n]],t[this.sPaths[i][n+1]],o))}return{nodes:t,data:r}}},{key:"computeNodeWeights",value:function(){this.nodes.map()}},{key:"formNetworkData",value:function(t){var e=this.getColumnIndices(t),r=this.dataRows;this.sPaths=[],this.nodes=[],this.isDepthMode(e)&&(this.depthMap={});for(var i=0;i<r.length;i++){var n=r[i],o=this.findNodeIndex(this.getNodeId(n,e,e.source,{type:this.ENUM_NODE.SOURCE})),a=this.findNodeIndex(this.getNodeId(n,e,e.target,{type:this.ENUM_NODE.TARGET})),s=this.nodes[o],l=this.nodes[a];if(s&&l){var u=this.checkCyclic(o,a);u.isCyclic&&this.sPaths[this.getPathIndex(a,this.ENUM_NODE.TARGET)].push(a),u.isLinked||u.srcPathIndex!==this.sPaths.length&&u.trgPathIndex!==this.sPaths.length||this.sPaths.push([o,a]),this.updateSourceNode(o,e,n),this.updateTargetNode(a,e,n)}else if(s||l){var h=void 0;s?(h=this.getPathIndex(o,this.ENUM_NODE.SOURCE),this.nodes.push(this.getObjNode(n,e.target,e,h,{type:this.ENUM_NODE.TARGET})),this.updateSourceNode(o,e,n),this.sPaths[h]?this.sPaths[h].push(this.nodes.length-1):this.sPaths[h]=[o,this.nodes.length-1]):(h=this.getPathIndex(a,this.ENUM_NODE.TARGET),this.nodes.push(this.getObjNode(n,e.source,e,h,{type:this.ENUM_NODE.SOURCE})),this.updateTargetNode(a,e,n),this.sPaths[h]?this.sPaths[h].unshift(this.nodes.length-1):this.sPaths.push([this.nodes.length-1,a]))}else this.nodes.push(this.getObjNode(n,e.source,e,this.sPaths.length,{type:this.ENUM_NODE.SOURCE})),this.nodes.push(this.getObjNode(n,e.target,e,this.sPaths.length,{type:this.ENUM_NODE.TARGET})),this.sPaths.push([this.nodes.length-2,this.nodes.length-1])}}},{key:"formSeriesOptions",value:function(t){return this.formNetworkData(t),this.formHCOptions(this.formSankeySeriesOptions())}}])&&s(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),p}(i.chartDataMapperBase)},546:function(t,e,i){i.r(e),i.d(e,{VitaraHCSankeyChartMixin:function(){return f}}),i(1);var o=i(478),s=i(547),u=i(399),c=i(550),d=i(4),f=function(t){l(i,t);var e=h(i);function i(t){var n;return r(this,i),(n=e.call(this,t)).scriptClass="mstrmojo.plugins.VitaraCharts.v533169.VitaraHCSankeyChart",n.cssClass="VitaraHCSankeyChart",n.NAME="Vitara Sankey Chart",n.enablePlayByAttribute=!1,n.logEnvironmentInfo(),n}return n(i,[{key:"getEditorName",value:function(){return"SankeyEditor"}},{key:"getThresholdMapper",value:function(){return this.thresholdMapper||(this.thresholdMapper=new c.SankeyThresholdMapper),this.thresholdMapper}},{key:"transformAlign",value:function(t){return this.vizParser.flipAlignValue(t)}},{key:"getSeriesElements",value:function(t){return[{name:"Links"},{name:"Nodes"}]}},{key:"isSeriesByMetric",value:function(){return!0}},{key:"getMetricValueRange",value:function(t,e){var r=null;return this.renderedChartInstance&&(r=this.renderedChartInstance.getMetricValueRange(t,e)),r}},{key:"getDataLabelTypes",value:function(){return[]}},{key:"getCustomLabelEditorOptions",value:function(){return[{value:"customLabel",text:"Links"},{value:"nodeLabel",text:"Nodes"}]}},{key:"getDefaultLabelFormat",value:function(t){return-1!==t.indexOf("customLabel")?"&[link.source] - &[link.target]":"&[point.value]"}},{key:"getChartSpecificMentions",value:function(t){return"customLabel"===t?["link.source","link.target"]:"customTooltip"===t?["node.source","node.target"]:[]}},{key:"getPropMenuDefaults",value:function(){return{sankeyLinkColor:"#d7d7d7",sankeyEnableNodeLabels:1,sankeyEndToEndHighlight:1}}},{key:"getSeriesObjects",value:function(){var t=[];return d.each(this.renderedChartInstance.getRenderOptions().series[0].nodes,(function(e,r){t.push({name:e.name,id:e.id,type:"Node",color:e.color?e.color:"",offsetVertical:e.offsetVertical?parseInt(e.offsetVertical):void 0,offsetHorizontal:e.offsetHorizontal?parseInt(e.offsetHorizontal):void 0})})),t}},{key:"getIncludeThresholdLevel",value:function(t){return!(!t||"Links"!==t.target)||a(p(i.prototype),"getIncludeThresholdLevel",this).call(this)}},{key:"getOptions",value:function(t){return{chart:{type:"sankey"},plotOptions:{series:{states:{hover:{lineWidthPlus:0}},dataLabels:{style:{color:"black",textOutline:null},overflow:"justify"}}},legend:{enabled:!0},xAxis:{crosshair:{width:2,color:t.sparklineColors[1]}},colors:t.lineColors,series:[]}}},{key:"freshPlot",value:function(){try{this.renderedChartInstance=new s.default(this.dataHelper,this.position,this.chartNode,this.getOptions(u.default),this.vizProps),this.renderedChartInstance.render()}catch(t){this.handleVizError(t)}}},{key:"getDataMarkerOpts",value:function(){return this.dataHelper&&this.dataHelper.getTitles?this.dataHelper.getTitles().slice(0,this.dataHelper.numAttributes):[]}},{key:"getDataMarkerUserOpts",value:function(){return this.renderedChartInstance&&this.renderedChartInstance.getNetworkDataOptions?this.renderedChartInstance.getNetworkDataOptions():{}}},{key:"getFetchCalls",value:function(){var t=this;return{getDataMarkerUserOpts:function(){return t.getDataMarkerUserOpts()},getDataMarkerOpts:function(){return t.getDataMarkerOpts()}}}}]),i}(VitaraMix(o.default).with());window.VitaraHCSankeyChartMixin=f},549:function(t,e,r){r.r(e),r.d(e,{renderHCSankey:function(){return a}});var i=r(44),n=r(435),o=r(4),a=function(t,e,r,i,o){n.renderGenericSeriesChart.call(this,t,e,r,i,o)};vitaraJQ.extend(a.prototype,n.renderGenericSeriesChart.prototype,{readDataForSeriesAndCategories:function(t){var e=void 0===t?this.getChartDataMapper():t;return e.initZoneData(this.getZoneData(e)),this.groupByAndFormSeries()},getLinkColorDetails:function(t){this.linkStyle&&!t||(this.linkStyle={customLinkColor:!1,linkColorIndex:0,linkColor:"#d7d7d7"},this.linkStyle.linkColor=this.vizProps.sankeyLinkColorSelect?this.vizProps.sankeyLinkColorSelect:this.vizProps.sankeyLinkColor||"#d7d7d7","source"!==this.linkStyle.linkColor&&"target"!==this.linkStyle.linkColor&&(this.linkStyle.customLinkColor=!0,this.linkStyle.linkColorIndex=this.getColorSpaceAllocation(1).startIndex))},getNodeSelectorByAttributeName:function(t,e){var r={};return t?"string"!=typeof e?this.getSelectorByAttributeName(t):(o.each(this.getSelectorByAttributeName(t),(function(t,i){-1!==e.indexOf(i)&&(r[i]=t)})),r):r},getSelectorByAttributeName:function(t){if(this.getChartDataMapper().getFilterHandler())return this.getChartDataMapper().getFilterHandler().getAttributeSelectorByName(t)},groupByAndFormSeries:function(){var t={xAxis:{},yAxis:{},series:[]},e=this.getColorDetails(this.getColorPalette());if(this.chartDataMapper.groupByAttributes(this.chartDataMapper.titles.slice(0,this.chartDataMapper.numAttributes))){var r,n=this;this.linkToNodes=[],this.getLinkColorDetails(!0);for(var a={format:this.vizProps.dataLabelDisplayFormat},s=[],l={nodes:[],links:[]},u=this.chartDataMapper.numColumns-1;u>this.chartDataMapper.numAttributes-1;u--){var h,c,p=[],d=null,f={},g={},y=[],v={},m={},b={},k={},D={metric:this.chartDataMapper.titles[u],aggFunction:"modSum"},M={metric:this.chartDataMapper.titles[u]},C={minVal:1/0,maxVal:-1/0},O=this.chartDataMapper.getGroupAggregate("",D,a),E=i.utils.getPrecision(O.fv),N=0;do{d?(h=d,d=[]):(h=this.chartDataMapper.getGroupElements(),d=[]);for(var S=0;S<h.length;S++){var T=h[S].name;void 0!==T&&""!==T&&null!==T||(T=k[h[S].path.join(",")])||(T="Blank_"+(Object.keys(k).length+1),k[h[S].path.join(",")]=T);var x=T+"_"+h[S].attribute,P=this.chartDataMapper.getGroupAggregate(h[S].path,M),w=this.chartDataMapper.getGroupAggregate(h[S].path,D);if(f[x])f[x].push(h[S].path),y[v[x]].aggWeight+=w.v,y[v[x]].rawAggWeight+=P.v,y[v[x]].percentage=100*y[v[x]].aggWeight/O.v;else{var A=T||void 0,L="Node_"+x.split(" ").join("_"),_="style_"+i.utils.getMD5Hash(L);m[x]=[],v[x]=y.length,r=+n.context.vizProps.invertColors?e.startIndex+((e.colors.length-v[x]-1)%e.colors.length+e.colors.length)%e.colors.length:e.startIndex+v[x]%e.colors.length,b[x]&&(o.each(b[x],(function(t){p[t].colorIndex=r,"target"===n.linkStyle.linkColor&&(p[t].className="vitara-point "+_)})),b[x]=null),y.push({id:x,name:A,className:"vitara-point "+_,style:_,aggWeight:w.v,rawAggWeight:P.v,percentage:w.v/O.v*100,precision:E,xName:[T],level:N,mName:D.metric,sName:D.metric,attribute:h[S].attribute,selector:o.cloneDeep(n.getNodeSelectorByAttributeName(h[S].selMapId,h[S].elemId)),colorIndex:r,forms:h[S].forms}),f[x]=[h[S].path]}for(var I=this.chartDataMapper.getGroupElements(h[S].path,{selMapId:h[S].selMapId}),B=0;B<I.length;B++){var R=this.chartDataMapper.getGroupAggregate(I[B].path,D,a),j=this.chartDataMapper.getGroupAggregate(I[B].path,M,a);if(I[B].path){var F=I[B].name;void 0!==F&&""!==F&&null!==F||(F=k[I[B].path.join(",")])||(F="Blank_"+(Object.keys(k).length+1),k[I[B].path.join(",")]=F);var V=F+"_"+I[B].attribute;d.push(I[B]);var U="Link_"+x.split(" ").join("_")+"_"+V.split(" ").join("_"),H="style_"+i.utils.getMD5Hash(U),Z=I[B].path.slice(0,2).join("_");g[Z]||(g[Z]="Hover_"+i.utils.getMD5Hash(x.split(" ").join("_")+"_"+V.split(" ").join("_"))),"source"===this.linkStyle.linkColor?(this.linkStyle.linkColorIndex=y[v[x]].colorIndex,H=y[v[x]].style):"target"===this.linkStyle.linkColor&&(y[v[V]]?(r=y[v[V]].colorIndex,H=y[v[V]].style):b[V]?b[V].push(p.length):b[V]=[p.length]);var G=R.v;(Object.values(k).includes(T)||Object.values(k).includes(F))&&(G=0),p.push({id:V,from:x,to:V,from_node:T,to_node:F,weight:G,rawWeight:j.v,fv:R.fv,rawfv:j.fv,percentage:R.v/O.v*100,percentageOfNode:R.v/w.v*100,index:p.length,xName:[T+" → "+F],mName:D.metric,sName:D.metric,selector:n.getSelectorByAttributeName(I[B].selMapId),className:"vitara-point "+H+" "+g[Z],style:H,hStyle:g[Z],colorIndex:this.linkStyle.linkColorIndex,rowIndex:I[B].rowIndex}),u===this.chartDataMapper.numAttributes?(l.links[p.length-1]=this.appendTooltipAttr(l.links[p.length-1],T,h[S].attribute,h[S].forms),l.links[p.length-1]=this.appendTooltipAttr(l.links[p.length-1],I[B].name,I[B].attribute,I[B].forms),l.links[p.length-1]=this.appendTooltip(l.links[p.length-1],D.metric,R.fv,u),p[p.length-1].datarow=l.links[p[p.length-1].index],p[p.length-1].tooltip=function(t,e,r){return this.formCompleteTooltip(t,this.chartDataMapper.titles.slice(this.chartDataMapper.numAttributes),l.links[t.index],t,e,r)}.bind(this)):l.links[p.length-1]=this.appendTooltip(l.links[p.length-1],D.metric,R.fv,u),m[x].push(p[p.length-1])}}}N+=1}while(d.length>0);c=this.computeNodeDepths(y,m),u===this.chartDataMapper.numAttributes?o.each(y,(function(t,e){n.setMinMax(C,t.aggWeight);var r=t.aggWeight===Math.abs(t.rawAggWeight)?t.rawAggWeight:t.aggWeight;t.fv=i.utils.formatLabel(r,n.chartDataMapper.getMetricFormatObject(u),a.format),n.setNegativeValueColor(t,m,y,r),l.nodes[e]=n.appendTooltipAttr(l.nodes[e],t.name,t.attribute,t.forms),l.nodes[e]=n.appendTooltip(l.nodes[e],D.metric,t.fv,u),t.tooltip=function(t,r,i){return n.formCompleteTooltip(t,n.chartDataMapper.titles.slice(n.chartDataMapper.numAttributes),l.nodes[e],t,r,i)}.bind(n),t.datarow=l.nodes[e],c&&(t.column=c[t.id]||0)})):o.each(y,(function(t,e){n.setMinMax(C,t.aggWeight);var r=t.aggWeight===Math.abs(t.rawAggWeight)?t.rawAggWeight:t.aggWeight,o=i.utils.formatLabel(r,n.chartDataMapper.getMetricFormatObject(u),a.format);n.setNegativeValueColor(t,m,y,r),l.nodes[e]=n.appendTooltip(l.nodes[e],D.metric,o,u),c&&(t.column=c[t.id]||0)})),p.sort((function(t,e){return t.rowIndex-e.rowIndex})),s.push({data:p,name:D.metric,id:D.metric,paths:f,nodes:y,visible:u===this.chartDataMapper.numAttributes,minMax:C}),this.linkToNodes.push(m)}}return s=s.reverse(),this.linkToNodes=this.linkToNodes.reverse(),t.series=this.processSeriesObjs(s),Highcharts.seriesTypes.sankey.prototype.pointAttribs=function(t,e){"source"===t.color&&(t.color=t.fromNode.color),"target"===t.color&&(t.color=t.toNode.color);var r=this.options.linkOpacity,i=t.color;return e&&(r=this.options.states[e].linkOpacity||r,i=this.options.states[e].color||t.color),{fill:t.isNode?i:Highcharts.color(i).setOpacity(r).get()}},t},setNegativeValueColor:function(t,e,r,i){1==+this.vizProps.showNegativeValueColor&&(i<0&&(t.className=t.className+" vitara-negative-value-color"),o.each(e[t.id],(function(t){r.find((function(e){return e.id==t.to})),t.weight===Math.abs(t.rawWeight)&&t.rawWeight<0&&(t.className=t.className+" vitara-negative-value-color",t.fv=t.rawfv)})))},computeNodeDepths:function(t,e){if(this.checkForLoop(t,e))return null;var r,i,n,o={};for(r=t,i=[],n=0;n<t.length;++n,r=i,i=[])r.forEach((function(t){o[t.id||t]=n,e[t.id||t].forEach((function(t){i.indexOf(t.to)<0&&i.push(t.to)}))}));return o},checkForLoop:function(t,e){var r=function t(r,i,n){if(n[r])return!0;if(i[r])return!1;for(var o in i[r]=!0,n[r]=!0,e[r])if(t(e[r][o].to,i,n))return!0;return n[r]=!1,!1};return function(){for(var e={},i={},n=0;n<t.length;n++)if(r(t[n].id,e,i))return!0;return!1}()},setMinMax:function(t,e){t.minVal>e&&(t.minVal=e),t.maxVal<e&&(t.maxVal=e)},getMetricValueRange:function(t,e){return"Links"===e?this.chartDataMapper.getMetricValueRange(t):this.renderedChart.series[this.chartDataMapper.titles.indexOf(t)-this.chartDataMapper.numAttributes].userOptions.minMax},setThresholdProperties:function(t,e,r){return t.thresholds?this.processThreshold(e,t.thresholds):e},processThreshold:function(t,e){var r=this;r.context.getThresholdHelper().setChartDataMapper(r.chartDataMapper);var i=r.context.getThresholdHelper().procThresholdsPreCleanUp(e,t);return o.each(i,(function(e,i){if(e&&e.length)for(var n=0;n<e.length;n++){var o;if(o="attribute"===e[n].type?0:r.chartDataMapper.titles.indexOf(e[n].source)-r.chartDataMapper.numAttributes,1==e[n].level)for(var a=0;a<t[0].nodes.length;a++)t[0].nodeData=r.linkToNodes[0][t[0].nodes[a].id],t[o].nodeData=r.linkToNodes[o][t[o].nodes[a].id],t[0]=r.context.getThresholdHelper().processThreshold(t[0],i,e[n],r.chartDataMapper,r.getThresholdOptions(i,e[n].level,t[0].nodes[a].id),t[o]);else t[0]=r.context.getThresholdHelper().processThreshold(t[0],i,e[n],r.chartDataMapper,r.getThresholdOptions(i),t[o])}})),t},getThresholdOptions:function(t,e,r){var i={};return"Nodes"===t?(i.datakey="nodes",i.valueMarker="rawAggWeight"):(i.datakey="data",i.valueMarker="rawWeight",1==e&&(i.datakey="nodeData",i.valueMarker="percentageOfNode",i.id=r)),i},appendTooltip:function(t,e,r,i){return void 0===t&&(t=[]),t[i]={metric:e,fv:r},t},appendTooltipAttr:function(t,e,r,i){return void 0===t&&(t=[]),t[this.chartDataMapper.titles.indexOf(r)]={t:e,forms:i},t},getLinkSource:function(t){return t.isNode?"":t.from_node},getLinkTarget:function(t){return t.isNode?"":t.to_node},processChartSpecificMacros:function(t,e){return(t=t.split("&amp;[link.source]").join(this.getLinkSource(e))).split("&amp;[link.target]").join(this.getLinkTarget(e))},getCategoryLabel:function(t){return t.isNode?t.name+" ":t.from_node+" - "+t.to_node+" "},getMetricLabel:function(t,e){return t.fv},getTooltipFormatter:function(){return function(){return this.tooltip?this.tooltip(this):this.point.tooltip(this.point)}},setToolTipFormatter:function(t){var e=this;return t.tooltip||(t.tooltip={}),t.tooltip.headerFormat="",t.tooltip.pointFormatter=t.tooltip.nodeFormatter=this.getTooltipFormatter(),t.plotOptions.series.dataLabels.nodeFormatter=t.plotOptions.series.dataLabels.formatter,0!=+this.vizProps.sankeyEnableNodeLabels&&(t.plotOptions.series.dataLabels.enabled=!0),t.plotOptions.series.point={events:{mouseOver:function(){if(this.isNode){var t=this.color;o.each(this.linksFrom,(function(e){e.oColor=e.color,e.color=t,e.setState("hover")}))}else e.highlightSankeyLinks.call(e,this,"hover")},mouseOut:function(){this.isNode?o.each(this.linksFrom,(function(t){t.color=t.oColor,t.setState("")})):e.highlightSankeyLinks.call(e,this,"")}}},t},highlightLinkPath:function(t,e){var r=1;t.setState(e),function t(i){if(i&&i.linksFrom){var n=[];o.each(i.linksFrom,(function(t){r++,n.push(t.toNode),t.setState(e)})),o.each(n,(function(e){if(r>300)return!1;t(e)}))}}(t.toNode)},highlightSankeyLinks:function(t,e){if(0!=+this.getVizProps().sankeyEndToEndHighlight)if(void 0!==t.hStyle){var r=t.hStyle;o.each(t.series.points,(function(t){r===t.hStyle&&t.setState(e)}))}else this.highlightLinkPath(t,e)},getPercentageLabelForTooltip:function(t){return t.isNode?" ("+t.percentage.toFixed(t.precision)+"%)":" ("+t.percentageOfNode.toFixed(t.fromNode.precision)+"%)"},getCreateDefaultLabel:function(t){var e="";return t.xName&&(e+=t.xName.join(", "),e+=t.sName!==t.mName?", "+t.sName:"",e+="<br/>"),t.yName&&(e+=t.yName.join(", ")+"<br/>"),t.mName&&(e+=t.mName+" : <b>"+this.getFormattedValueForMetric({v:t.rawVal,fv:t.fv})+"</b>",e+=this.getPercentageLabelForTooltip(t)),e},getDataLabelCustomFormat:function(t){return t.isNode?this.vizProps.nodeLabel:this.vizProps.customLabel},getCustomDataLabelMentions:function(t){return t.isNode?this.vizProps.nodeLabelcolstate:this.vizProps.customLabelcolstate},isLabelRequired:function(t){return!!this.isLabelEnabledByThreshold(t)||!(t.isNode||!+this.vizProps.labelsEnable)||!(!t.isNode||0==+this.vizProps.sankeyEnableNodeLabels)},postChartRendering:function(){var t;this.context&&this.context.postChartRendering(this.renderedChart),this.context&&(null===(t=this.context.platformContext)||void 0===t?void 0:t.initContextMenu)&&this.context.platformContext.initContextMenu()},mapSeriesColors:function(t){if(t||t.series||t.series[0]){var e=this,r=this.getColorDetails(this.getColorPalette());return t.series[0].nodes.forEach((function(t,i){t.color?(t.colorIndex="undefined",e.insertRule(e.getUniqueChartStyle()+" ."+t.style+" {fill:"+t.color+";stroke:"+t.color+";}"),e.insertRule(e.getUniqueChartStyle()+" ."+t.className+" {fill:"+t.color+";stroke:"+t.color+";}")):isNaN(t.colorIndex)&&(+e.context.vizProps.invertColors||+e.getVizProps().invertColors?t.colorIndex=r.startIndex+((r.colors.length-i-1)%r.colors.length+r.colors.length)%r.colors.length:t.colorIndex=r.startIndex+i%r.colors.length)})),t.series}},processChartSpecificStyledModeOptions:function(t){return this.linkStyle&&this.linkStyle.customLinkColor&&this.insertRule(this.getUniqueChartStyle()+" .highcharts-color-"+this.linkStyle.linkColorIndex+" {fill:"+this.linkStyle.linkColor+";}"),this.getVizProps().sankeyLinkHoverColor&&this.insertRule(this.getUniqueChartStyle()+" .highcharts-sankey-series .highcharts-link.vitara-point.highcharts-point-hover {fill:"+this.getVizProps().sankeyLinkHoverColor+";}"),t},pointClickHandler:function(t){if(t&&t.target){var e=vitaraJQ(this.getUniqueChartStyle());t.reset?(vitaraJQ(".vitara-point-select",e).removeClass("vitara-point-select"),vitaraJQ(e).removeClass("vitara-point-selection-active")):(this.addClassJQ(e,"vitara-point-selection-active"),t.multiSelect?vitaraJQ(t.target,e).hasClass("vitara-point-select")?vitaraJQ(t.target,e).removeClass("vitara-point-select"):this.addClassJQ(t.target,"vitara-point-select"):(vitaraJQ(".vitara-point-select",e).removeClass("vitara-point-select"),this.addClassJQ(t.target,"vitara-point-select")))}},processStyleMode:function(t){return this.init(),this.processChartSpecificStyledModeOptions(t),this.processGlobalStyledModeOptions(t),t},extendWithSeriesOptions:function(t){if(this.vizProps.series){var e=this.preCleanSeriesOptions(t[0].nodes,this.vizProps.series);o.each(t[0].nodes,(function(r,i){var n=o.find(e,(function(t){return r.id===t.id}));t[0].nodes[i]=vitaraJQ.extend(!0,t[0].nodes[i],n)}))}return t},preRenderProcessChartOptions:function(t){if((t=n.renderGenericSeriesChart.prototype.preRenderProcessChartOptions.call(this,t))&&t.series&&t.series[0]){if(t.sankeyNodePadding)t.series[0].nodePadding=parseInt(t.sankeyNodePadding),t.series[0].curveFactor=.33;else{var e=this.calcNodePadding(t);t.series[0].nodePadding=e,t.series[0].curveFactor=this.calcCurveFactor(e)}t.sankeyNodeWidth&&(t.series[0].nodeWidth=t.sankeyNodeWidth)}return t.chart.inverted=this.isChartInverted(),t},isChartInverted:function(){return 1==+this.vizProps.invertedAxis}})},547:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var i=r(548),n=r(549),o=r(44),a=r(4),s=function(t,e,r,i,o){n.renderHCSankey.call(this,t,e,r,i,o)};vitaraJQ.extend(s.prototype,n.renderHCSankey.prototype,{ENUM_DATA_MODE:{LEGACY:0,NEW:1},DEF_NODE_PADDING:10,DEF_CURVE_FACTOR:.3,getDataInterface:function(){return this.data},destroyCaches:function(){this.networkDataMapper=void 0,this.chartDataMapper=void 0,this.sankeyDataModel=void 0,this.linkStyle=void 0},getNetworkGraphDataMapper:function(){return this.networkDataMapper||(this.networkDataMapper=new i.default(this.getDataInterface().getDataAsArray(),this.getDataInterface().getTitles(),this.getDataInterface().numAttributes,this)),this.chartDataMapper||(this.chartDataMapper=this.networkDataMapper),this.networkDataMapper},isValidDataOption:function(t){return-1!==a.indexOf(this.getNetworkGraphDataMapper().titles,t)},getNetworkDataOptions:function(){var t={depthBy:this.getVizProps().ndDepthBy,linkBy:this.getVizProps().ndLinkBy,groupBy:this.getVizProps().ndGroupBy,source:this.getVizProps().ndSource,target:this.getVizProps().ndTarget};for(var e in t)t[e]=this.isValidDataOption(t[e])?t[e]:void 0;return t},hasValidNetworkDataOptions:function(t){return void 0!==t.source&&void 0!==t.target},formSeriesByNewDataModel:function(){this.sankeyDataModel=this.ENUM_DATA_MODE.NEW;var t,e=this.getNetworkGraphDataMapper();return e.initZoneData(this.getZoneData(e)),this.getLinkColorDetails(!0),(t=e.formSeriesOptions(this.getNetworkDataOptions())).series=this.processSeriesObjs(t.series),t},formSeriesByLegacyModel:function(t){this.sankeyDataModel=this.ENUM_DATA_MODE.LEGACY;var e=void 0===t?this.getChartDataMapper():t;return e.initZoneData(this.getZoneData(e)),this.groupByAndFormSeries()},readDataForSeriesAndCategories:function(t){return this.sankeyDataModel!==this.ENUM_DATA_MODE.NEW||this.hasValidNetworkDataOptions(this.getNetworkDataOptions())||this.destroyCaches(),this.hasValidNetworkDataOptions(this.getNetworkDataOptions())?this.formSeriesByNewDataModel():this.formSeriesByLegacyModel(t)},getMetricLabel:function(t,e){return t.fv?t.fv:t&&t.getSum?t.getSum():""},getSeriesColorIndex:function(t){return this.colorDetails&&0!=t||(this.colorDetails=this.getColorDetails(this.getColorPalette())),+this.context.vizProps.invertColors?this.colorDetails.startIndex+((this.colorDetails.colors.length-t-1)%this.colorDetails.colors.length+this.colorDetails.colors.length)%this.colorDetails.colors.length:this.colorDetails.startIndex+t%this.colorDetails.colors.length},getLinkColorIndex:function(t,e){return this.linkStyle||this.getLinkColorDetails(),"source"===this.linkStyle.linkColor?t.colorIndex:"target"===this.linkStyle.linkColor?e.colorIndex:this.linkStyle.linkColorIndex},getMetricFormattedValue:function(t){return o.utils.formatLabel(t,this.getNetworkGraphDataMapper().getMetricFormat(this.getNetworkGraphDataMapper().numAttributes),this.getVizProps().dataLabelDisplayFormat)},formLinkElement:function(t,e,r){var i=this.getMetricFormattedValue(r.weight),n="Link_"+t.name.split(" ").join("_")+"_"+e.name.split(" ").join("_"),a="style_"+o.utils.getMD5Hash(n);return{from:t.id,to:e.id,weight:r.weight,fv:i,linkLabel:t.node.linkLabel,colorIndex:this.getLinkColorIndex(t,e),selector:this.getSelectorByAttributeName([t.eid,e.eid]),id:t.id+"-"+e.id,precision:o.utils.getPrecision(i),from_node:t.name,to_node:e.name,percentageOfNode:r.percentage,xName:[t.name+" → "+e.name],mName:t.node.metricTitle,sName:t.node.metricTitle,className:"vitara-point "+a,style:a,datarow:t.node.row}},formNodeElement:function(t,e,r){var i=this.getMetricFormattedValue(r.weight),n="Node_"+t.t.split(" ").join("_"),a="style_"+o.utils.getMD5Hash(n);return{id:t.id,group:t.group,eid:t.eid,name:t.t,colorIndex:this.getSeriesColorIndex(e),depth:e,node:t,className:"vitara-point "+a,style:a,aggWeight:r.weight,fv:i,percentage:r.percentage,precision:o.utils.getPrecision(i),xName:[t.t],mName:t.metricTitle,sName:t.metricTitle,attribute:t.attributeTitle,selector:t.row[t.attrIndex].selector(),forms:t.row[t.attrIndex].forms,datarow:t.row}},getTooltipFormatter:function(){if(this.sankeyDataModel===this.ENUM_DATA_MODE.LEGACY)return n.renderHCSankey.prototype.getTooltipFormatter.call(this);var t=this;return function(){return t.formCompleteTooltip(this,t.getNetworkGraphDataMapper().getMetricTitles(),this.datarow,this)}},getCategoryLabel:function(t){return this.sankeyDataModel===this.ENUM_DATA_MODE.LEGACY?n.renderHCSankey.prototype.getCategoryLabel.call(this,t):t.isNode?t.name+" ":void 0!==this.getNetworkDataOptions().depthBy?t.from_node===t.to_node?this.getNetworkDataOptions().depthBy+": "+t.toNode.depth+", "+t.from_node:this.getNetworkDataOptions().depthBy+": "+t.toNode.depth+", "+t.from_node+" - "+t.to_node+" ":t.linkLabel?t.linkLabel:t.from_node+" - "+t.to_node+" "},getMaxNodesAtLevel:function(t){var e=0,r=0,i=[];return a.each(t,(function(t){e=Math.max(e,t.length)})),a.times(e,(function(e){var r=a.map(t,(function(t){return t[e]}));i.push(a.uniq(r))})),a.each(i,(function(t){r=Math.max(r,t.length)})),r},calcNodePadding:function(t){var e,r,i=this.DEF_NODE_PADDING,n=this.context&&this.context.getPosition&&this.context.getPosition();if(!n||!n.height)return this.DEF_NODE_PADDING;r=this.sankeyDataModel===this.ENUM_DATA_MODE.LEGACY?t&&t.series&&t.series[0]&&t.series[0].paths:this.getNetworkGraphDataMapper()&&this.getNetworkGraphDataMapper().sPaths,e=this.getMaxNodesAtLevel(r);var o=.2*n.height,a=e+2;return a*i<o?i:Math.floor(o/a)},calcCurveFactor:function(t){return t===this.DEF_NODE_PADDING?this.DEF_CURVE_FACTOR:Number((t/3*.1).toFixed(1))},processChartSpecificMacros:function(t,e){return e.isNode&&(t=(t=t.split("&amp;[node.source]").join(this.getNodeSource(e))).split("&amp;[node.target]").join(this.getNodeTarget(e))),n.renderHCSankey.prototype.processChartSpecificMacros.call(this,t,e)},getNodeSource:function(t){return this.getNearbyNodeNames(t,"linksTo","from_node")},getNodeTarget:function(t){return this.getNearbyNodeNames(t,"linksFrom","to_node")},getNearbyNodeNames:function(t,e,r){return a.map(t[e],(function(t){return t[r]}))}});var l=s},550:function(t,e,i){i.r(e),i.d(e,{SankeyThresholdMapper:function(){return o}});var o=function(t){l(i,t);var e=h(i);function i(t){return r(this,i),e.call(this,t)}return n(i,[{key:"setThreshold",value:function(t,e,r,i,n,o){var a=this.getAttributeValueMarker(r)||n.valueMarker,s="attribute"===r.type;if(r.color||r.enableDataLabel){var l=this;r.source!==t.name?o[n.datakey].map((function(o,u){-1!==(s&&o.datarow&&o.datarow[i]?vitaraJQ.inArray(o.datarow[i][a],e):vitaraJQ.inArray(o[a],e))&&(n.id?n.id===o.from&&(t[n.datakey][u].color=r.color,l.setCustomDataLabel(t[n.datakey][u],r.customLabel),l.setDataLabel(t[n.datakey][u],{enabled:r.enableDataLabel,style:r.dataLabelStyle}),l.setCssStyles(t[n.datakey][u],r)):(t[n.datakey][u].color=r.color,l.setCustomDataLabel(t[n.datakey][u],r.customLabel),l.setDataLabel(t[n.datakey][u],{enabled:r.enableDataLabel,style:r.dataLabelStyle}),l.setCssStyles(t[n.datakey][u],r)))})):t[n.datakey]=t[n.datakey].map((function(t){return-1!==(s&&t.datarow&&t.datarow[i]?vitaraJQ.inArray(t.datarow[i][a],e):vitaraJQ.inArray(t[a],e))&&(n.id?n.id===t.from&&(t.color=r.color,l.setCustomDataLabel(t,r.customLabel),l.setDataLabel(t,{enabled:r.enableDataLabel,style:r.dataLabelStyle}),l.setCssStyles(t,r)):(t.color=r.color,l.setCustomDataLabel(t,r.customLabel),l.setDataLabel(t,{enabled:r.enableDataLabel,style:r.dataLabelStyle}),l.setCssStyles(t,r))),t}))}return t}}]),i}(i(510).ThresholdMapperBase)}},o={};function s(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={id:t,loaded:!1,exports:{}};return i[t].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=i,e=[],s.O=function(r,i,n,o){if(!i){var a=1/0;for(p=0;p<e.length;p++){for(var l=t(e[p],3),u=(i=l[0],n=l[1],o=l[2],!0),h=0;h<i.length;h++)(!1&o||a>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[h])}))?i.splice(h--,1):(u=!1,o<a&&(a=o));if(u){e.splice(p--,1);var c=n();void 0!==c&&(r=c)}}return r}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[i,n,o]},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,{a:e}),e},s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":d(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==("undefined"==typeof window?"undefined":d(window)))return window}}(),s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var e={21:0};s.O.j=function(t){return 0===e[t]};var r=function(r,i){var n,o,a=t(i,3),l=a[0],u=a[1],h=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in u)s.o(u,n)&&(s.m[n]=u[n]);if(h)var p=h(s)}for(r&&r(i);c<l.length;c++)o=l[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(p)},i=self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[];i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i))}();var u=s.O(void 0,[34,42,33,35,38,41],(function(){return s(546)}));u=s.O(u)}()},4225:(t,e,r)=>{"use strict";var i=r(6486),n=(r(764),r(8933),r(6819));const o={PLAY_AXIS:"Play Axis",CATEGORY:"Category Axis",CATEGORY_ZONE:"Category",COLOR_BY:"Color By",SLICE_BY:"Slice By",VALUE:"Value",HORIZONTAL_VALUES:"Horizontal Axis",VERTICAL:"Vertical Axis",BUBBLE_SIZE:"Bubble Size",START_VALUE:"Start Value",END_VALUE:"End Value",TOOLTIP:"Tooltip",SMALL_MULTIPLE:"Small Multiples",ATTRIBUTES:"Attributes",METRICS:"Metrics",BREAK_BY:"Break By",DRILL_TARGET:"Drill Target",INTER_VALUE:"Intermediate Value(s)",LAST_VALUE:"Last Value",GROUP_BY:"Group By",NUMERATOR:"Ratio - Numerator Value",DENOMINATOR:"Ratio - Denominator Value",RING_1:"Ring 1 Value",RING_2:"Ring 2 Value",RING_3:"Ring 3 Value",TIME:"Time",TREND_BY:"Trend By",BAR:"Bar",MARKERS:"Markers",DATE:"Date",TOP_LABEL:"Main Label",SUB_LABEL:"Sub Label",THRESHOLD_METRICS:"Threshold Metrics",STACK_BY:"Stack By"};var a=r(6486),s=mstrmojo.declare(null,null,{MSTR_TYPE:{ATTRIBUTE:"attribute",METRIC:"metric",ATTRIBUTE_OR_METRIC:"attributeOrMetric"},ENUM_ZONES:o,isDZSupport:function(){return isMSTRDashBoard()||isMSTRDesktop()},getZoneElements:function(t,e){for(var r=[],i=0;i<t.length;i++)r.push({name:t[i].n,type:e});return r},getZoneAttributes:function(t){return this.getZoneElements(t.items,this.MSTR_TYPE.ATTRIBUTE)},getZoneMetrics:function(t){return this.getZoneElements(t.items,this.MSTR_TYPE.METRIC)},getAttributeNameByID:function(t){for(var e=this.dataHelper.data.data.gsi.rows,r=0;r<e.length;r++)if(e[r].did==t)return this.dataHelper.parseMSTRText(e[r].n)},getMetricNameByID:function(t){for(var e=this.dataHelper.data.data.gsi.mx,r=0;r<e.length;r++)if(e[r].did==t)return this.dataHelper.parseMSTRText(e[r].n);if(isMSTRMobile()&&isMSTRDashBoard()){var i=this.dataHelper.data.getColTitles();if(i&&i.titles&&i.titles[0]){var n=i.titles[0].es||[];for(r=0;r<n.length;r++)if(n[r].oid===t)return this.dataHelper.parseMSTRText(n[r].n)}}},getZoneElementId:function(t,e){var r=t&&t.id;return this.dataHelper&&e===this.MSTR_TYPE.ATTRIBUTE?this.dataHelper.getCompatibleAttrId(r):r},createZoneElements:function(t,e,r){t=a.uniqWith(t,a.isEqual);for(var i=[],n=0;n<t.length;n++)i.push({name:r.call(this,t[n].id),type:e,id:this.getZoneElementId(t[n],e)});return i},getElementType:function(t){var e=t&&t[0]?t[0]:void 0;return e&&e.t&&4===e.t?this.MSTR_TYPE.METRIC:this.MSTR_TYPE.ATTRIBUTE},formAttributeOrMetricZoneData:function(t){return this.getElementType(t)===this.MSTR_TYPE.ATTRIBUTE?this.formAttributeZoneData(t):this.formMetricZoneData(t)},formAttributeZoneData:function(t){return this.createZoneElements(t,this.MSTR_TYPE.ATTRIBUTE,this.getAttributeNameByID)},formMetricZoneData:function(t){return this.createZoneElements(t,this.MSTR_TYPE.METRIC,this.getMetricNameByID)},getElementsFromZoneByName:function(t,e,r){if(t&&t.getDropZoneObjectsByName){var i=t.getDropZoneObjectsByName(e);if(i.length>0)return r==this.MSTR_TYPE.ATTRIBUTE_OR_METRIC?this.formAttributeOrMetricZoneData(i):r==this.MSTR_TYPE.ATTRIBUTE?this.formAttributeZoneData(i):this.formMetricZoneData(i)}},getZoneData:function(t,e,r){return{}},getDropZoneElements:function(t,e){if(this.dataHelper||(this.dataHelper=e),!this.dataHelper)return"";var r=this;try{if(!this.isDZSupport())return this.dataHelper.getTitles();if(!t)return"";var i={};return a.each(this.ZONES,(function(e,n){a.each(r.MSTR_TYPE,(function(n,o){if(!i[e]){var s=a.filter(r.getElementsFromZoneByName(t,e,n),(function(t){return t&&void 0!==t.name}));s&&s.length>0&&(i[e]=s)}}))})),i}catch(t){return"unable to retrieve drop zone data: "+t.message}}}),l=mstrmojo.declare(s,null,{scriptClass:"mstrmojo.plugins.VitaraCharts.v533169.VitaraBasicSeriesDropZoneReader",getZoneData:function(t,e,r,i){var n={},o=this.MSTR_TYPE;if(this.dataHelper=i,this.isDZSupport()){var a=t.getZones();for(var s in n.xaxis=this.getElementsFromZoneByName(t,a.CATEGORY_ZONE,o.ATTRIBUTE),n.yaxis=this.getElementsFromZoneByName(t,a.VALUE,o.METRIC),n)void 0!==n[s]&&0!=n[s].length||delete n[s]}else n.xaxis=e.getAllAttributesAsZones(),n.yaxis=e.getAllMetricsAsZones();return n}}),u=r(4089),h=r(9153),c=r(8397);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,D(i.key),i)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=g(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}}).apply(this,arguments)}function g(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=k(t);if(e){var n=k(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return m(this,r)}}function m(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:String(e)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(o,t);var e,r,i,n=v(o);function o(t,e){var r,i,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=n.call(this,t,e),i=b(r),s={source:"#popupndSource",target:"#popupndTarget",depthBy:"#popupndDepthBy",groupBy:"#popupndGroupBy",linkBy:"#popupndLinkBy"},(a=D(a="DataMarkerFields"))in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s;var l=Object.getOwnPropertyNames(Object.getPrototypeOf(h.Z.prototype)),u={};return l.forEach((function(t){"function"==typeof h.Z.prototype[t]&&"constructor"!==t&&(u[t]=h.Z.prototype[t])})),Object.assign(o.prototype,u),r.setBaseContext(t),r.setEditorInterface(e),r}return e=o,(r=[{key:"disableOption",value:function(t,e){var r=this;c.each(e,(function(e){r.getBaseContext().getMenuElement("select"+e+" option:contains('"+t+"')").attr("disabled","disabled")}))}},{key:"enableOption",value:function(t,e){var r=this;c.each(e,(function(e){r.getBaseContext().getMenuElement("select"+e+" option:contains('"+t+"')").removeAttr("disabled")}))}},{key:"setUserDataMarkerOptions",value:function(t){var e=this.getBaseContext().menuOptions.fetchCallback.chartSpecificFetch().getDataMarkerUserOpts();this.getBaseContext().getMenuElement(this.DataMarkerFields.source).val(e.source||""),this.updateDropDownSelections("ndSource",e.source||"",this.DataMarkerFields.source),this.getBaseContext().getMenuElement(this.DataMarkerFields.target).val(e.target||""),this.updateDropDownSelections("ndTarget",e.target||"",this.DataMarkerFields.target),this.getBaseContext().getMenuElement(this.DataMarkerFields.depthBy).val(e.depthBy||""),this.updateDropDownSelections("ndDepthBy",e.depthBy||"",this.DataMarkerFields.depthBy),this.getBaseContext().getMenuElement(this.DataMarkerFields.groupBy).val(e.groupBy||""),this.updateDropDownSelections("ndGroupBy",e.groupBy||"",this.DataMarkerFields.groupBy),this.getBaseContext().getMenuElement(this.DataMarkerFields.linkBy).val(e.linkBy||""),this.updateDropDownSelections("ndLinkBy",e.linkBy||"",this.DataMarkerFields.linkBy)}},{key:"setDataMarkerOptions",value:function(t){var e=this.getBaseContext().menuOptions.fetchCallback.chartSpecificFetch().getDataMarkerOpts(),r=this.getBaseContext().propMenuHelper;r.setDropdownOptions(this.getBaseContext().getMenuElement(this.DataMarkerFields.source),r.getAsDropDownOptionsCustom(e)),r.setDropdownOptions(this.getBaseContext().getMenuElement(this.DataMarkerFields.target),r.getAsDropDownOptionsCustom(e)),r.setDropdownOptions(this.getBaseContext().getMenuElement(this.DataMarkerFields.depthBy),r.getAsDropDownOptionsCustom(e)),r.setDropdownOptions(this.getBaseContext().getMenuElement(this.DataMarkerFields.groupBy),r.getAsDropDownOptionsCustom(e)),r.setDropdownOptions(this.getBaseContext().getMenuElement(this.DataMarkerFields.linkBy),r.getAsDropDownOptionsCustom(e))}},{key:"onMenuSelected",value:function(t){f(k(o.prototype),"onMenuSelected",this).call(this,t),"Sankey"===t.detail.name&&(this.setDataMarkerOptions(t),this.setUserDataMarkerOptions(t))}},{key:"updateDropDownSelections",value:function(t,e,r,i){var n=this.getBaseContext().getChartContext().getVizProps()[t];if(n||e){var o=c.flatMap(this.DataMarkerFields);o.splice(o.indexOf(r),1),n&&i&&this.enableOption(n,o),e&&this.disableOption(e,o)}}},{key:"onSankeyDataMarkerChange",value:function(t){this.updateDropDownSelections(t.detail.name,t.detail.value,t.target.id,!0)}},{key:"setCustomEventHandlers",value:function(t){f(k(o.prototype),"setCustomEventHandlers",this).call(this,t),this.setEventHandler("onSankeyDataMarkerChange",this.onSankeyDataMarkerChange,this.saveAndEndBroadcast)}}])&&d(e.prototype,r),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(h.Z);function C(t){t&&this.setContext(t)}Object.assign(C.prototype,u.Z.prototype,{getCustomProperty:function(){return[this.AppearanceProperties(),this.BackgroundProperties(),this.DataLabelsProperties,this.TooltipProperties(),this.seriesPropertiesType3(),this.ThresholdsPropertiesSankey(),this.SankeyProperties,this.SecurityProperties(),this.getAboutChartMenu()]},getCustomEventHandler:function(t,e){return new M(t,e)},SankeyProperties:{label:"Sankey",id:"SankeyProperties",containers:[{title:"Render Options",data:[{label:"Link Color",fields:["sankeyLinkColorSelect"]},{label:"Color",fields:["sankeyLinkColor"]},{label:"Node Padding",fields:["sankeyNodePadding"]},{label:"Node Width",fields:["sankeyNodeWidth"]},{label:"Show Negative Value Color",fields:["showNegativeValueColor"]}]},{title:"Hover Options",data:[{label:"Highlight End to End",fields:["sankeyEndToEndHighlight"]},{label:"Link Color",fields:["sankeyLinkHoverColor"]}]},{title:"Configuration attributes",data:[{label:"Source",fields:["ndSource"]},{label:"Target",fields:["ndTarget"]},{label:"Depth/Direction",fields:["ndDepthBy"]}]}]},DataLabelsProperties:{label:"Data Labels",id:"data_labels",containers:[{title:"",data:[{label:"Enable Node Labels",fields:["sankeyEnableNodeLabels"]},{label:"Enable Link Labels",fields:["labelsEnable"]},{label:"Wrap Text",fields:["labelsWrapText"]},{label:"Show Overlapping Labels",fields:["labelsEnableOverlap"]},{label:"Horizontal Position",fields:["labelsAlign"]},{label:"Vertical Position",fields:["labelsVAlign"]},{label:"Label Display Format",fields:["dataLabelsDisplayStyle"]},{label:"Metric Format",fields:["dataLabelDisplayFormat"]}]},{title:"Format",data:[{label:"Label",fields:["customLabelEditorSelect"]},{label:"",fields:["customLabelEditor"]},{label:"",fields:["applycustomLabel"]},{label:"",fields:["nodeLabelEditor"]},{label:"",fields:["applynodeLabel"]}]}]},getExtraAppearanceProps:function(){return[{label:"Invert Axes",fields:["invertedAxis"]}]},onPropMenuCreated(){this.propMenuHelper.setSankeyLinkColorFields("popupsankeyLinkColor",this.getChartContext().vizProps.sankeyLinkColorSelect)}}),r.g.vitaraLD||(r.g.vitaraLD=i),mstrmojo.plugins.VitaraCharts.v533169.VitaraHCSankeyChart=mstrmojo.declare(n.Z,[],{scriptClass:"mstrmojo.plugins.VitaraCharts.v533169.VitaraHCSankeyChart",cssClass:"VitaraHCSankeyChart",getVisualInstance:function(){return this.visualInstance||(this.visualInstance=new VitaraHCSankeyChartMixin(this),this.visualInstance.updateVisualProps=this.updateVisualProps),this.visualInstance},getEditorName:function(){return"SankeyEditor"},getEditor:function(t){return this.propsEditor||(this.propsEditor=new C(t)),this.propsEditor},getZoneReader:function(){return this.zoneReader||(this.zoneReader=new l),this.zoneReader},validateMinCriteria:function(t,e){var r="Include at least two attributes and one metric to see the chart.";if(this.getZoneReader().isDZSupport()){var i=this.zonesModel.getZones();0==this.zonesModel.getDropZoneObjectsByName(i.VALUE).length&&(e=0),r="Include at least two attributes and one metric to see the chart. Include additional metrics in tooltip"}return{valid:e>0&&t>1,message:r}},getCustomContextMenuItems:function(){return["tooltip","datalabel","separator","format","separator","palette"]}})}},r={};function i(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,t=[],i.O=(e,r,n,o)=>{if(!r){var a=1/0;for(h=0;h<t.length;h++){for(var[r,n,o]=t[h],s=!0,l=0;l<r.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every(t=>i.O[t](r[l]))?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(h--,1);var u=n();void 0!==u&&(e=u)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[r,n,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={10:0};i.O.j=e=>0===t[e];var e=(e,r)=>{var n,o,[a,s,l]=r,u=0;if(a.some(e=>0!==t[e])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)var h=l(i)}for(e&&e(r);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(h)},r=self.webpackChunkVitaraCharts_MicroStrategy=self.webpackChunkVitaraCharts_MicroStrategy||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var n=i.O(void 0,[445,272,89],()=>i(4225));n=i.O(n)})();
