"use strict";(self.webpackChunkwebpack_latest=self.webpackChunkwebpack_latest||[]).push([[36],{473:(t,e,i)=>{i.r(e),i.d(e,{vitaraLegend:()=>f});var n=i(44),a=i(4),r=Number(4),l=(Number(2),0),o=0,h=!1,s=!1,g=!1,d=!1,c=null,u=null,m=null,p=null,v=function(){};vitaraJQ.extend(v.prototype,{createLegendContainers:function(){m=c.append("svg").attr("class","graph-legend").attr("width",document.body.clientWidth).attr("height",document.body.clientHeight),p=m.append("g").attr("id","element-container")},setPadding:function(t,e){var i=e/2,n=e/2;i="right"===this.getData().align?-i:i,this.translateElement(p,i,n)},getContainerDimensions:function(t){var e=p.node().getBBox();0===e.width&&0===e.height&&(e=this.getContainerBBox(p),"horizontal"===this.getData().layout?this.getRows()>1?((e=this.getContainerBBox(p.node().childNodes[0])).width=this.getParentDimensions().width,e.height=(this.getRows()+1)*e.height):e.width+=(r+this.getOptions().elemGap)*p.node().childNodes.length+this.getOptions().padding:(e.width+=2*(r+t),e.height+=2*this.getOptions().padding*p.node().childNodes.length)),l=Number(e.width)+2*Number(t),o=Number(e.height)+2*Number(t)},setContainerDimensions:function(t){this.getContainerDimensions(t),m.attr("width",l),m.attr("height",o),this.setPadding(p,t)},setTextElementPositions:function(t){for(var e=0,i=0;i<t.length;i++)e+=this.getNodeBBox(t[i]).height,t[i].attr("x","20").attr("y",e),e+=20},setElementcontainerPositions:function(t){for(var e=0,i=0;i<t.length;i++)e+=this.getNodeBBox(t[i]).height,t[i].attr("x","20").attr("y",e),e+=20},setLegendOptions:function(t){var e,i,n,a,r={enabled:t.enabled,align:t.align?t.align:"left",verticalAlign:t.verticalAlign?t.verticalAlign:"top",layout:t.layout?t.layout:"horizontal",itemStyle:{color:t.itemStyle.color,fontFamily:t.itemStyle.fontFamily,fontSize:t.itemStyle.fontSize,fontWeight:t.itemStyle.fontWeight,fontStyle:t.itemStyle.fontStyle,textDecoration:t.itemStyle.textDecoration},options:{markWidth:(null===(e=t.itemStyle)||void 0===e?void 0:e.fontSize)?.8*this.pInt(null===(i=t.itemStyle)||void 0===i?void 0:i.fontSize):"11",markHeight:(null===(n=t.itemStyle)||void 0===n?void 0:n.fontSize)?.8*this.pInt(null===(a=t.itemStyle)||void 0===a?void 0:a.fontSize):"11",elemGap:(null==t?void 0:t.itemDistance)||20,padding:t.options&&t.options.padding?t.options.padding:"8"},labels:t.labels,seriesIds:t.seriesIds,colors:t.colors,dimensions:{width:t.containerWidth,height:t.containerHeight},rows:0,columns:0};this.setData(r)},setContainer:function(t){c=t},getContainer:function(){return c},getG:function(){return p},setData:function(t){u=t},getData:function(){return u},getLabels:function(){return u.labels},getSeriesIds:function(){return u.seriesIds},getColors:function(){return u.colors},getOptions:function(){return u.options},getStyle:function(){return u.itemStyle},getVertexForCenterAlign:function(t,e){return t/2-e/2},getRows:function(){return u.rows},setRows:function(t){u.rows=t},setColumns:function(t){u.columns=t},getColumns:function(){return u.columns},getParentDimensions:function(){return u.dimensions},pInt:function(t,e){return parseInt(t,e||10)},getLineHeight:function(t){return(t=t?this.pInt(t,10):12)<24?t+3:Math.round(1.2*t)},appendLableMark:function(t,e,i){return t.append("rect").attr("width",i.markWidth).attr("height",i.markHeight).attr("rx",.75*+i.markWidth).attr("ry",.75*+i.markWidth).attr("fill",e)},appendLableText:function(t,e,i,a,l){var o,h=this.getTextDimension(e,i.fontSize,i.fontFamily,null,a);let s="http://www.w3.org/2000/svg";i.fontSize&&i.fontSize.toString().indexOf("px")<0&&(i.fontSize=i.fontSize+"px");var g=t.append("text").attr("class",a).attr("alignment-baseline","middle").attr("y",0).attr("width",h.width).attr("height",h.height);let d=document.createElementNS(s,"tspan");if(d.appendChild(document.createTextNode(n.utils.decodeStringValue(e))),g[0][0].appendChild(d),l.itemWidth)if("ellipsis"===(null===(o=l.itemStyle)||void 0===o?void 0:o.textOverflow))this.labelTextTruncate(d,e,void 0,0,Math.max(0,l.itemWidth-parseInt(i.fontSize||12,10)),(function(t,e){return t.substring(0,e)+"â€¦"})),g.append("title").text(n.utils.decodeStringValue(e));else{let n=this.getElementWidth(t.select("rect"))+r,a=this.getLineHeight(i.fontSize),o=e.replace(/([^\^])-/g,"$1- ").split(" "),h=0;for(;o.length;)o.length&&h>0&&(d=document.createElementNS(s,"tspan"),d.setAttribute("x",n),d.setAttribute("dy",a),d.appendChild(document.createTextNode(o.join(" ").replace(/- /g,"-"))),g[0][0].appendChild(d)),this.labelTextTruncate(d,null,o,0,l.itemWidth,(function(t,e){return o.slice(0,e).join(" ").replace(/- /g,"-")})),h++}return g},labelTextTruncate:function(t,e,i,n,a,r){var l,o,h=0,s=(h=i?1:0,(e||i).length),g=s,d=[],c=function(e,a){var r=a||e;if(void 0===d[r]&&t.getSubStringLength)try{d[r]=n+t.getSubStringLength(0,i?r+1:r)}catch(t){}return d[r]},u=function(e){t.firstChild&&t.removeChild(t.firstChild),e&&t.appendChild(document.createTextNode(e))};if(o=c(t.textContent.length),n+o>a){for(;h<=s;)g=Math.ceil((h+s)/2),i&&(l=r(i,g)),o=c(g,l&&l.length-1),h===s?h=s+1:o>a?s=g-1:h=g;0===s?u(""):e&&s===e.length-1||u(l||r(e||i,g))}i&&i.splice(0,g)},createLegendElements:function(t,e,i,n){for(var a=[],r=this.getStyle(),l=this.getOptions(),o=0;o<t.length;o++){var h=p.append("g").attr("cursor","pointer").attr("class","vitara-legend-item").attr("id",t[o]);e&&h.attr("data-series-id",e[o]),this.appendLableMark(h,i[o],l),this.appendLableText(h,t[o],r,"vitara-legend-text",n),a.push(h)}return a},getX:function(t){return t.attr("x")},getY:function(t){return t.attr("y")},setX:function(t,e){t.attr("x",e)},setY:function(t,e){t.attr("y",e)},setHeight:function(t,e){t.attr("height",e)},translateElement:function(t,e,i){t.attr("transform","translate("+e+","+i+")")},setElementsPositionsInContainers:function(t){let e=u.itemStyle.fontSize;for(var i=0;i<t.length;i++){var n=this.getElementWidth(t[i].select("rect")),a=this.getElementHeight(t[i].select("rect"));a=this.getElementHeight(t[i].select("text"))-parseInt(this.getOptions().padding),this.setX(t[i].select("text"),n+r),(document.documentMode||window.StyleMedia)&&this.setY(t[i].select("text"),a/2),this.setY(t[i].select("rect"),-(e?.8*this.pInt(e):10))}},getMaxElementHeight:function(t){var e=t.select("text").node().getBBox().height,i=t.select("rect").node().getBBox().height;return e>i?e:i},getMaxElementWidth:function(t){var e=t.select("text").node().getBBox().width,i=t.select("rect").node().getBBox().width;return e>i?e:i},getElementWidth:function(t){return this.getNodeBBox(t).width},getElementHeight:function(t){return this.getNodeBBox(t).height},getNodeBBox:function(t){var e=n.utils.getElementDimensions(t);return 0===e.height&&0===e.width?t.node().childNodes.length>1?this.getContainerBBox(t):{width:Number(t.attr("width")),height:Number(t.attr("height"))}:e},getContainerBBox:function(t){var e=this,i=0,n=0;return NodeList.prototype.forEach=Array.prototype.forEach,t[0]&&(t=t.node()),t.childNodes.forEach((function(t){if(t[0])if(t.node().childNodes.length>1){var a=e.getContainerBBox(t);"horizontal"===e.getData().layout?(i+=a.width,n=n>a.height?n:a.height):(i=i>a.width?i:a.width,n+=a.height/2)}else"horizontal"===e.getData().layout?(i+=t.attr("width"),n=n>t.attr("height")?n:t.attr("height")):(n+=t.attr("height")/2,i=i>t.attr("width")?i:t.attr("width"));else t.childNodes.length>1?(a=e.getContainerBBox(t),"horizontal"===e.getData().layout?(i+=a.width,n=n>a.height?n:a.height):(i=i>a.width?i:a.width,n+=a.height/2)):"horizontal"===e.getData().layout?(i+=Number(t.getAttribute("width")),n=n>Number(t.getAttribute("height"))?n:Number(t.getAttribute("height"))):(n+=Number(t.getAttribute("height"))/2,i=i>Number(t.getAttribute("width"))?i:Number(t.getAttribute("width")))})),{width:i,height:n}},getTextDimension:function(t,e,i,n,a){var r=document.createElement("tspan");e?r.style.fontSize=e:r.setAttribute("class",a),r.style.fontFamily=i,r.innerHTML=t,n?n.appendChild(r):document.body.appendChild(r);var l=r.offsetWidth,o=r.offsetHeight;return n?n.removeChild(r):document.body.removeChild(r),{width:l,height:o}},alignElementsVertical:function(t,e,i){let n=this.getData();for(var a=parseInt(this.getOptions().padding)/2,r=parseInt(this.getOptions().padding)/2,l=a,o=.7*this.pInt(n.itemStyle.fontSize||"13")+r,h=0;h<t.length;h++)0===h?this.translateElement(t[0],l,o):this.translateElement(t[h],l,o),o+=this.getElementHeight(t[h])+parseInt(this.getOptions().padding)},alignElementsHorizontal:function(t,e,i){var n=0;let a=this.getData();var r=parseInt(this.getOptions().padding)/2,l=parseInt(this.getOptions().padding)/2;let o,h;for(var s=this.getRows(),g=0;g<t.length;g++)0===g?(n++,l+=.7*this.pInt(a.itemStyle.fontSize||"13"),o=this.getElementHeight(t[g]),this.translateElement(t[0],r,l)):((r+=this.getElementWidth(t[g-1])+Number(e))+(this.getElementWidth(t[g])+Number(e)+2*parseInt(this.getOptions().padding))>i&&n>0&&(n=0,r=parseInt(this.getOptions().padding)/2,l+=o,o=0,s++),h=this.getElementHeight(t[g]),h>o&&(o=h),n++,this.translateElement(t[g],r,l));this.setRows(s)},setElementsLayout:function(t,e,i){var n=this.getOptions();"vertical"===e?this.alignElementsVertical(t,n.elemGap,i.height):this.alignElementsHorizontal(t,n.elemGap,i.width)},setLegendYPosition:function(t,e,i,n){var a=t.node().getBBox().x,r=0;"top"===n?r=0:"middle"===n?r=e/2-i/2:"bottom"===n&&(r=e-i),this.setY(t,r),this.setX(t,a)},getXYFromTranslate:function(t){return t.attr("transform").split("(")[1].split(")")[0].split(",")},getXY:function(t){var e=[];return e[0]=t.attr("x"),e[1]=t.attr("y"),e},setLegendXPosition:function(t,e,i,n){var a=t.attr("y"),r=0;"left"===n?r=0:"center"===n?r=e/2-i/2:"right"===n&&(r=e-i),this.setY(t,a),this.setX(t,r)},getStyleWidthHeight:function(t){var e={};return e.width=t.style("width"),e.height=t.style("height"),e.width=e.width.substring(0,e.width.length-2),e.height=e.height.substring(0,e.height.length-2),e},setLegendPosition:function(t,e,i,n,a){if(t){var l=this.getStyleWidthHeight(t);if(""===l.width&&""===l.height)if(a)l=a;else{var o=t.attr("style").split(";");l.width=isNaN(parseFloat(o[0].split(":")[1]))?0:parseInt(o[0].split(":")[1]),l.height=isNaN(parseFloat(o[1].split(":")[1]))?0:parseInt(o[1].split(":")[1])}var h=l.width,s=l.height,g=e.node().getBBox();0===g.width&&0===g.height&&(g=this.getContainerBBox(e),"horizontal"===this.getData().layout?this.getRows()>1?((g=this.getContainerBBox(e.node().childNodes[0])).width=this.getParentDimensions().width,g.height=(this.getRows()+1)*g.height):g.width+=(r+this.getOptions().elemGap)*e.node().childNodes.length+this.getOptions().padding:(g.width+=2*(r+this.getOptions().padding),g.height+=2*this.getOptions().padding*e.node().childNodes.length));var d=g.width+parseInt(this.getOptions().padding),c=g.height+parseInt(this.getOptions().padding);this.setLegendYPosition(m,s,c,n),this.setLegendXPosition(m,h,d,i)}},resetLegend:function(t){this.getData&&this.getData()&&this.getData().enabled&&this.setLegendPosition(this.getContainer(),this.getG(),this.getData().align,this.getData().verticalAlign,t)},getElementStyle:function(t,e){return vitaraJQ(t,e).attr("style")?vitaraJQ(t,e).attr("style"):""},setElementStyle:function(t,e,i){vitaraJQ(t,e).attr("style",i)},getWidthOfElement:function(t,e){return vitaraJQ(t,e).width()},setWidthOfElement:function(t,e,i){vitaraJQ(t,e).width(i)},moveDiv:function(t,e,i){var n=document.createDocumentFragment();n.appendChild(vitaraJQ(t,i)[0]),vitaraJQ(e,i)[0].appendChild(n)},getPositionOffsets:function(){var t=this.getDimensions();return{y:t.includeLegendHeight?t.height:0,x:t.includeLegendWidth?t.width:0,width:t.width,height:t.height}},getLegendOffset:function(t){return{y:t.includeLegendHeight?t.height:0,x:t.includeLegendWidth?t.width:0,width:t.width,height:t.height}},resetLegendForTrellis:function(t,e,i,a){var r=function(t){return vitaraJQ(t,i).attr("style")?vitaraJQ(t,i).attr("style"):""},l=function(t,e){vitaraJQ(t,i).attr("style",e)},o=function(t){return vitaraJQ(t,i).width()},h=r(".vitara-legend"),s=r(".trellis_container");h+="position:relative;"+function(t,e,i){if("vertical"===t){if("left"===e||"right"===e)return"display:inline-block;"}else if("middle"===i)return"display:inline-block;";return"display:block !important;"}(t.layout,t.align,t.verticalAlign),s+=function(t,e,i){if("vertical"===t){if("left"===e||"right"===e)return"display:inline-block;"}else if("middle"===i)return"display:inline-block;";return""}(t.layout,t.align,t.verticalAlign);var g,d,c=vitaraJQ(".vitara-legend",i).children()[0];if(o(".trellis_container")?"horizontal"===t.layout&&"middle"!==t.verticalAlign&&(h+="width:"+o(".trellis_container")+"px;"):(".trellis_container",g=o(i)-e.x-20,vitaraJQ(".trellis_container",i).width(g)),"top"===t.verticalAlign){let t=n.utils.getElementDimensions(c);t&&t.height&&(h+="height:"+t.height+"px;")}if("bottom"===t.verticalAlign&&("horizontal"===t.layout||"vertical"===t.layout&&"center"===t.align)){let t=n.utils.getElementDimensions(c);t&&t.height&&(h+="height:"+t.height+"px;")}if(("horizontal"===t.layout&&"top"!==t.verticalAlign||"vertical"===t.layout&&"center"===t.align&&"bottom"===t.verticalAlign)&&this.moveDiv(".vitara-legend",a,i),"vertical"===t.layout?"center"===t.align?h+="width:"+o(".trellis_container")+"px;":"middle"===t.verticalAlign?(d=(vitaraJQ(i).height()-e.height)/2)>0&&(h+="transform:translate(0,"+d+"px);"):"bottom"===t.verticalAlign&&(h+="vertical-align:bottom;"):"center"!==t.align&&"middle"===t.verticalAlign&&(d=(vitaraJQ(i).height()-e.height)/2)>0&&(h+="transform:translate(0,"+d+"px);"),l(".vitara-legend",h),l(".trellis_container",s),"visible"===t.visibility&&vitaraJQ("#vitara-legend",i).css("visibility","visible"),"middle"===t.verticalAlign||"vertical"===t.layout&&"center"!==t.align){var u="";u+="width:"+(o(".trellis_container")+e.width+10)+"px;",vitaraJQ(a).append("<div class='chart_container' style='"+u+"'></div>"),"left"===t.align&&this.moveDiv(".vitara-legend",".chart_container",i),this.moveDiv(".trellis_container",".chart_container",i),"right"===t.align&&this.moveDiv(".vitara-legend",".chart_container",i)}},repositionLegend:function(t,e,i,a,r){var l=this.getData(),o=this.getPositionOffsets(),h=l.dimensions.width;h||(h=this.getWidthOfElement(i,t)?this.getWidthOfElement(i,t):this.getWidthOfElement(t)-(r||0)),vitaraJQ(i,t).insertAfter(vitaraJQ(".vitara-legend",t));var s,g,d=this.getElementStyle(".vitara-legend",t),c=this.getElementStyle(i,t);if(this.getWidthOfElement(i,t)?"horizontal"===l.layout&&"middle"!==l.verticalAlign&&(d+="width:"+h+"px;"):this.setWidthOfElement(i,t,h-o.x),("horizontal"===l.layout&&"top"!==l.verticalAlign||"vertical"===l.layout&&"center"===l.align&&"bottom"===l.verticalAlign)&&this.moveDiv(".vitara-legend",e,t),"vertical"===l.layout?(c+="display:inline-block;","center"===l.align?d+="width:"+h+"px;":"middle"===l.verticalAlign?((s=(vitaraJQ(t).height()-o.height)/2)>0&&(d+="transform:translate(0,"+s+"px);"),c+="vertical-align:top;"):"bottom"===l.verticalAlign&&(d+="vertical-align:bottom;")):"center"!==l.align&&"middle"===l.verticalAlign&&((s=(vitaraJQ(t).height()-o.height)/2)>0&&(d+="transform:translate(0,"+s+"px);"),d+="display:inline-block;",c+="display:inline-block;",c+="vertical-align:top;"),"top"===l.verticalAlign&&((g=n.utils.getElementDimensions(vitaraJQ(".graph-legend",vitaraJQ(".vitara-legend",t))[0]))&&g.height&&(d+="height:"+g.height+"px;"),"horizontal"===l.layout?d+="display:inline-block;":"vertical"===l.layout&&"center"===l.align&&(d+="display:block !important;")),"bottom"===l.verticalAlign&&("horizontal"===l.layout||"vertical"===l.layout&&"center"===l.align)&&(g=n.utils.getElementDimensions(vitaraJQ(".graph-legend",vitaraJQ(".vitara-legend",t))[0]))&&g.height&&(d+="height:"+g.height+"px;"),this.setElementStyle(".vitara-legend",t,d),this.setElementStyle(i,t,c),"middle"===l.verticalAlign||"vertical"===l.layout&&"center"!==l.align){var u="";a&&(u+="width:"+(h+o.width+(r||0))+"px;"),vitaraJQ(e,t).append("<div class='chart_container' style='"+u+"'></div>"),"left"===l.align&&this.moveDiv(".vitara-legend",".chart_container",t),this.moveDiv(i,".chart_container",t),"right"===l.align&&this.moveDiv(".vitara-legend",".chart_container",t)}},getDimensions:function(){var t=u&&u.enabled?u.verticalAlign+u.align+u.layout:"";switch(h=!1,s=!1,g=!1,d=!1,t){case"toplefthorizontal":s=!0,d=!0;break;case"topleftvertical":h=!0,g=!0;break;case"toprighthorizontal":s=!0,d=!0;break;case"toprightvertical":h=!0;break;case"topcenterhorizontal":case"topcentervertical":s=!0,d=!0;break;case"bottomlefthorizontal":s=!0;break;case"bottomleftvertical":h=!0,g=!0;break;case"bottomrighthorizontal":s=!0;break;case"bottomrightvertical":h=!0;break;case"bottomcenterhorizontal":case"bottomcentervertical":s=!0;break;case"middleleftvertical":case"middlelefthorizontal":h=!0,g=!0;break;case"middlerighthorizontal":case"middlerightvertical":h=!0}return{width:l,height:o,xPos:g,yPos:d,includeLegendWidth:h,includeLegendHeight:s}},getGraphDimension:function(t,e,i){return e=e>l||h?e:l,i=i>o||s?i:o,this.rePosGraphContainer(t),{width:e,height:i}},rePosGraphContainer:function(t){var e=g?l:0,i=d?o:0;t.attr("x",e),t.attr("y",i)},getLegendClickHandler:function(t){var e=this;return function(){var i=this.getAttribute("id"),n=this.getAttribute("data-series-id"),a=t&&t(i,n);e.colorLegendElementOnClick(this.childNodes,a)}},createClickHandler:function(t,e){vitaraJQ(".vitara-legend-item",t).on("click",e)},colorLegendElementOnClick:function(t,e){a.each(t,(function(t){t.style.fill=e?"":"#ccc"}))},init:function(t,e,i,n,a){try{if(!t)return;if(this.setLegendOptions(t),!t.enabled)return;this.setContainer(e),this.createLegendContainers();var r=this.createLegendElements(this.getLabels(),this.getSeriesIds(),this.getColors(),t);i&&a&&this.createClickHandler(i,this.getLegendClickHandler(a)),this.setElementsPositionsInContainers(r);var l=this.getData();this.setElementsLayout(r,l.layout,l.dimensions),this.setContainerDimensions(this.getOptions().padding),this.setLegendPosition(c,p,l.align,l.verticalAlign),n&&"function"==typeof n&&n()}catch(t){console.log(t.message)}}});var f=new v}}]);mstrmojo.plugins.VitaraCharts.v533169[36] = mstrmojo.plugins.VitaraCharts.v533169[36] || {};
