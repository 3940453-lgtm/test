/*! For license information please see ImageEnhancedKPI.js.LICENSE.txt */
(()=>{var t={486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",l="__lodash_placeholder__",u=32,c=128,s=1/0,d=9007199254740991,f=NaN,p=4294967295,h=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],m="[object Arguments]",v="[object Array]",y="[object Boolean]",g="[object Date]",_="[object Error]",b="[object Function]",I="[object GeneratorFunction]",E="[object Map]",A="[object Number]",S="[object Object]",M="[object Promise]",w="[object RegExp]",C="[object Set]",T="[object String]",N="[object Symbol]",O="[object WeakMap]",D="[object ArrayBuffer]",x="[object DataView]",j="[object Float32Array]",P="[object Float64Array]",L="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",F="[object Uint8Array]",V="[object Uint8ClampedArray]",z="[object Uint16Array]",U="[object Uint32Array]",B=/\b__p \+= '';/g,Y=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,G=RegExp(W.source),$=RegExp(H.source),q=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,st=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,It="\\ud800-\\udfff",Et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",At="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",wt="\\ufe0e\\ufe0f",Ct="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tt="["+It+"]",Nt="["+Ct+"]",Ot="["+Et+"]",Dt="\\d+",xt="["+At+"]",jt="["+St+"]",Pt="[^"+It+Ct+Dt+At+St+Mt+"]",Lt="\\ud83c[\\udffb-\\udfff]",Rt="[^"+It+"]",kt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Mt+"]",zt="\\u200d",Ut="(?:"+jt+"|"+Pt+")",Bt="(?:"+Vt+"|"+Pt+")",Yt="(?:['’](?:d|ll|m|re|s|t|ve))?",Kt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+Ot+"|"+Lt+")?",Ht="["+wt+"]?",Gt=Ht+Wt+"(?:"+zt+"(?:"+[Rt,kt,Ft].join("|")+")"+Ht+Wt+")*",$t="(?:"+[xt,kt,Ft].join("|")+")"+Gt,qt="(?:"+[Rt+Ot+"?",Ot,kt,Ft,Tt].join("|")+")",Qt=RegExp("['’]","g"),Zt=RegExp(Ot,"g"),Xt=RegExp(Lt+"(?="+Lt+")|"+qt+Gt,"g"),Jt=RegExp([Vt+"?"+jt+"+"+Yt+"(?="+[Nt,Vt,"$"].join("|")+")",Bt+"+"+Kt+"(?="+[Nt,Vt+Ut,"$"].join("|")+")",Vt+"?"+Ut+"+"+Yt,Vt+"+"+Kt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,$t].join("|"),"g"),te=RegExp("["+zt+It+Et+wt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[j]=ie[P]=ie[L]=ie[R]=ie[k]=ie[F]=ie[V]=ie[z]=ie[U]=!0,ie[m]=ie[v]=ie[D]=ie[y]=ie[x]=ie[g]=ie[_]=ie[b]=ie[E]=ie[A]=ie[S]=ie[w]=ie[C]=ie[T]=ie[O]=!1;var oe={};oe[m]=oe[v]=oe[D]=oe[x]=oe[y]=oe[g]=oe[j]=oe[P]=oe[L]=oe[R]=oe[k]=oe[E]=oe[A]=oe[S]=oe[w]=oe[C]=oe[T]=oe[N]=oe[F]=oe[V]=oe[z]=oe[U]=!0,oe[_]=oe[b]=oe[O]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},le=parseFloat,ue=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,se="object"==typeof self&&self&&self.Object===Object&&self,de=ce||se||Function("return this")(),fe=e&&!e.nodeType&&e,pe=fe&&t&&!t.nodeType&&t,he=pe&&pe.exports===fe,me=he&&ce.process,ve=function(){try{return pe&&pe.require&&pe.require("util").types||me&&me.binding&&me.binding("util")}catch(t){}}(),ye=ve&&ve.isArrayBuffer,ge=ve&&ve.isDate,_e=ve&&ve.isMap,be=ve&&ve.isRegExp,Ie=ve&&ve.isSet,Ee=ve&&ve.isTypedArray;function Ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Se(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Te(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ne(t,e){return!(null==t||!t.length)&&Ve(t,e,0)>-1}function Oe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function De(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function xe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function je(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Pe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Re=Ye("length");function ke(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function Fe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Fe(t,Ue,n)}function ze(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ue(t){return t!=t}function Be(t,e){var n=null==t?0:t.length;return n?He(t,e)/n:f}function Ye(t){return function(e){return null==e?i:e[t]}}function Ke(t){return function(e){return null==t?i:t[e]}}function We(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function He(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Ge(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $e(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function qe(t){return function(e){return t(e)}}function Qe(t,e){return De(e,function(e){return t[e]})}function Ze(t,e){return t.has(e)}function Xe(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var tn=Ke({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=Ke({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+ae[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function an(t,e){return function(n){return t(e(n))}}function ln(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==l||(t[n]=l,o[i++]=n)}return o}function un(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function sn(t){return rn(t)?function(t){for(var e=Xt.lastIndex=0;Xt.test(t);)++e;return e}(t):Re(t)}function dn(t){return rn(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var pn=Ke({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function t(e){var n,r=(e=null==e?de:hn.defaults(de.Object(),e,hn.pick(de,ne))).Array,it=e.Date,It=e.Error,Et=e.Function,At=e.Math,St=e.Object,Mt=e.RegExp,wt=e.String,Ct=e.TypeError,Tt=r.prototype,Nt=Et.prototype,Ot=St.prototype,Dt=e["__core-js_shared__"],xt=Nt.toString,jt=Ot.hasOwnProperty,Pt=0,Lt=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Rt=Ot.toString,kt=xt.call(St),Ft=de._,Vt=Mt("^"+xt.call(jt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=he?e.Buffer:i,Ut=e.Symbol,Bt=e.Uint8Array,Yt=zt?zt.allocUnsafe:i,Kt=an(St.getPrototypeOf,St),Wt=St.create,Ht=Ot.propertyIsEnumerable,Gt=Tt.splice,$t=Ut?Ut.isConcatSpreadable:i,qt=Ut?Ut.iterator:i,Xt=Ut?Ut.toStringTag:i,te=function(){try{var t=uo(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=e.clearTimeout!==de.clearTimeout&&e.clearTimeout,ce=it&&it.now!==de.Date.now&&it.now,se=e.setTimeout!==de.setTimeout&&e.setTimeout,fe=At.ceil,pe=At.floor,me=St.getOwnPropertySymbols,ve=zt?zt.isBuffer:i,Re=e.isFinite,Ke=Tt.join,mn=an(St.keys,St),vn=At.max,yn=At.min,gn=it.now,_n=e.parseInt,bn=At.random,In=Tt.reverse,En=uo(e,"DataView"),An=uo(e,"Map"),Sn=uo(e,"Promise"),Mn=uo(e,"Set"),wn=uo(e,"WeakMap"),Cn=uo(St,"create"),Tn=wn&&new wn,Nn={},On=ko(En),Dn=ko(An),xn=ko(Sn),jn=ko(Mn),Pn=ko(wn),Ln=Ut?Ut.prototype:i,Rn=Ln?Ln.valueOf:i,kn=Ln?Ln.toString:i;function Fn(t){if(tl(t)&&!Ya(t)&&!(t instanceof Bn)){if(t instanceof Un)return t;if(jt.call(t,"__wrapped__"))return Fo(t)}return new Un(t)}var Vn=function(){function t(){}return function(e){if(!Ja(e))return{};if(Wt)return Wt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function zn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Bn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new Kn(t);this.size=e.size}function $n(t,e){var n=Ya(t),r=!n&&Ba(t),i=!n&&!r&&Ga(t),o=!n&&!r&&!i&&ul(t),a=n||r||i||o,l=a?Ge(t.length,wt):[],u=l.length;for(var c in t)!e&&!jt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,u))||l.push(c);return l}function qn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Qn(t,e){return xo(wi(t),or(e,0,t.length))}function Zn(t){return xo(wi(t))}function Xn(t,e,n){(n!==i&&!Va(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Jn(t,e,n){var r=t[e];jt.call(t,e)&&Va(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Va(t[n][0],e))return n;return-1}function er(t,e,n,r){return sr(t,function(t,i,o){e(r,t,n(t),o)}),r}function nr(t,e){return t&&Ci(e,Ol(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),l=null==t;++n<o;)a[n]=l?i:Ml(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var l,u=1&e,c=2&e,s=4&e;if(n&&(l=o?n(t,r,o,a):n(t)),l!==i)return l;if(!Ja(t))return t;var d=Ya(t);if(d){if(l=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&jt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return wi(t,l)}else{var f=fo(t),p=f==b||f==I;if(Ga(t))return bi(t,u);if(f==S||f==m||p&&!o){if(l=c||p?{}:ho(t),!u)return c?function(t,e){return Ci(t,so(t),e)}(t,function(t,e){return t&&Ci(e,Dl(e),t)}(l,t)):function(t,e){return Ci(t,co(t),e)}(t,nr(l,t))}else{if(!oe[f])return o?t:{};l=function(t,e,n){var r,i=t.constructor;switch(e){case D:return Ii(t);case y:case g:return new i(+t);case x:return function(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case j:case P:case L:case R:case k:case F:case V:case z:case U:return Ei(t,n);case E:return new i;case A:case T:return new i(t);case w:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new i;case N:return r=t,Rn?St(Rn.call(r)):{}}}(t,f,u)}}a||(a=new Gn);var h=a.get(t);if(h)return h;a.set(t,l),ol(t)?t.forEach(function(r){l.add(ar(r,e,n,r,t,a))}):el(t)&&t.forEach(function(r,i){l.set(i,ar(r,e,n,i,t,a))});var v=d?i:(s?c?eo:to:c?Dl:Ol)(t);return Me(v||t,function(r,i){v&&(r=t[i=r]),Jn(l,i,ar(r,e,n,i,t,a))}),l}function lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=St(t);r--;){var o=n[r],a=e[o],l=t[o];if(l===i&&!(o in t)||!a(l))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Ct(o);return To(function(){t.apply(i,n)},e)}function cr(t,e,n,r){var i=-1,o=Ne,a=!0,l=t.length,u=[],c=e.length;if(!l)return u;n&&(e=De(e,qe(n))),r?(o=Oe,a=!1):e.length>=200&&(o=Ze,a=!1,e=new Hn(e));t:for(;++i<l;){var s=t[i],d=null==n?s:n(s);if(s=r||0!==s?s:0,a&&d==d){for(var f=c;f--;)if(e[f]===d)continue t;u.push(s)}else o(e,d,r)||u.push(s)}return u}Fn.templateSettings={escape:q,evaluate:Q,interpolate:Z,variable:"",imports:{_:Fn}},Fn.prototype=zn.prototype,Fn.prototype.constructor=Fn,Un.prototype=Vn(zn.prototype),Un.prototype.constructor=Un,Bn.prototype=Vn(zn.prototype),Bn.prototype.constructor=Bn,Yn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Yn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yn.prototype.get=function(t){var e=this.__data__;if(Cn){var n=e[t];return n===a?i:n}return jt.call(e,t)?e[t]:i},Yn.prototype.has=function(t){var e=this.__data__;return Cn?e[t]!==i:jt.call(e,t)},Yn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cn&&e===i?a:e,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Gt.call(e,n,1),--this.size,0))},Kn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Kn.prototype.has=function(t){return tr(this.__data__,t)>-1},Kn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(An||Kn),string:new Yn}},Wn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return ao(this,t).get(t)},Wn.prototype.has=function(t){return ao(this,t).has(t)},Wn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Hn.prototype.add=Hn.prototype.push=function(t){return this.__data__.set(t,a),this},Hn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!An||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var sr=Oi(gr),dr=Oi(_r,!0);function fr(t,e){var n=!0;return sr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],l=e(a);if(null!=l&&(u===i?l==l&&!ll(l):n(l,u)))var u=l,c=a}return c}function hr(t,e){var n=[];return sr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=mo),i||(i=[]);++o<a;){var l=t[o];e>0&&n(l)?e>1?mr(l,e-1,n,r,i):xe(i,l):r||(i[i.length]=l)}return i}var vr=Di(),yr=Di(!0);function gr(t,e){return t&&vr(t,e,Ol)}function _r(t,e){return t&&yr(t,e,Ol)}function br(t,e){return Te(e,function(e){return Qa(t[e])})}function Ir(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Ro(e[n++])];return n&&n==r?t:i}function Er(t,e,n){var r=e(t);return Ya(t)?r:xe(r,n(t))}function Ar(t){return null==t?t===i?"[object Undefined]":"[object Null]":Xt&&Xt in St(t)?function(t){var e=jt.call(t,Xt),n=t[Xt];try{t[Xt]=i;var r=!0}catch(t){}var o=Rt.call(t);return r&&(e?t[Xt]=n:delete t[Xt]),o}(t):function(t){return Rt.call(t)}(t)}function Sr(t,e){return t>e}function Mr(t,e){return null!=t&&jt.call(t,e)}function wr(t,e){return null!=t&&e in St(t)}function Cr(t,e,n){for(var o=n?Oe:Ne,a=t[0].length,l=t.length,u=l,c=r(l),s=1/0,d=[];u--;){var f=t[u];u&&e&&(f=De(f,qe(e))),s=yn(f.length,s),c[u]=!n&&(e||a>=120&&f.length>=120)?new Hn(u&&f):i}f=t[0];var p=-1,h=c[0];t:for(;++p<a&&d.length<s;){var m=f[p],v=e?e(m):m;if(m=n||0!==m?m:0,!(h?Ze(h,v):o(d,v,n))){for(u=l;--u;){var y=c[u];if(!(y?Ze(y,v):o(t[u],v,n)))continue t}h&&h.push(v),d.push(m)}}return d}function Tr(t,e,n){var r=null==(t=Mo(t,e=vi(e,t)))?t:t[Ro(qo(e))];return null==r?i:Ae(r,t,n)}function Nr(t){return tl(t)&&Ar(t)==m}function Or(t,e,n,r,o){return t===e||(null==t||null==e||!tl(t)&&!tl(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var l=Ya(t),u=Ya(e),c=l?v:fo(t),s=u?v:fo(e),d=(c=c==m?S:c)==S,f=(s=s==m?S:s)==S,p=c==s;if(p&&Ga(t)){if(!Ga(e))return!1;l=!0,d=!1}if(p&&!d)return a||(a=new Gn),l||ul(t)?Xi(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new Bt(t),new Bt(e)));case y:case g:case A:return Va(+t,+e);case _:return t.name==e.name&&t.message==e.message;case w:case T:return t==e+"";case E:var l=on;case C:var u=1&r;if(l||(l=un),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var s=Xi(l(t),l(e),r,i,o,a);return a.delete(t),s;case N:if(Rn)return Rn.call(t)==Rn.call(e)}return!1}(t,e,c,n,r,o,a);if(!(1&n)){var h=d&&jt.call(t,"__wrapped__"),b=f&&jt.call(e,"__wrapped__");if(h||b){var I=h?t.value():t,M=b?e.value():e;return a||(a=new Gn),o(I,M,n,r,a)}}return!!p&&(a||(a=new Gn),function(t,e,n,r,o,a){var l=1&n,u=to(t),c=u.length;if(c!=to(e).length&&!l)return!1;for(var s=c;s--;){var d=u[s];if(!(l?d in e:jt.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var h=!0;a.set(t,e),a.set(e,t);for(var m=l;++s<c;){var v=t[d=u[s]],y=e[d];if(r)var g=l?r(y,v,d,e,t,a):r(v,y,d,t,e,a);if(!(g===i?v===y||o(v,y,n,r,a):g)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(h=!1)}return a.delete(t),a.delete(e),h}(t,e,n,r,o,a))}(t,e,n,r,Or,o))}function Dr(t,e,n,r){var o=n.length,a=o,l=!r;if(null==t)return!a;for(t=St(t);o--;){var u=n[o];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],s=t[c],d=u[1];if(l&&u[2]){if(s===i&&!(c in t))return!1}else{var f=new Gn;if(r)var p=r(s,d,c,t,e,f);if(!(p===i?Or(d,s,3,r,f):p))return!1}}return!0}function xr(t){return!(!Ja(t)||(e=t,Lt&&Lt in e))&&(Qa(t)?Vt:mt).test(ko(t));var e}function jr(t){return"function"==typeof t?t:null==t?nu:"object"==typeof t?Ya(t)?Fr(t[0],t[1]):kr(t):du(t)}function Pr(t){if(!Io(t))return mn(t);var e=[];for(var n in St(t))jt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t,e){return t<e}function Rr(t,e){var n=-1,i=Wa(t)?r(t.length):[];return sr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function kr(t){var e=lo(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function Fr(t,e){return go(t)&&Eo(e)?Ao(Ro(t),e):function(n){var r=Ml(n,t);return r===i&&r===e?wl(n,t):Or(e,r,3)}}function Vr(t,e,n,r,o){t!==e&&vr(e,function(a,l){if(o||(o=new Gn),Ja(a))!function(t,e,n,r,o,a,l){var u=wo(t,n),c=wo(e,n),s=l.get(c);if(s)Xn(t,n,s);else{var d=a?a(u,c,n+"",t,e,l):i,f=d===i;if(f){var p=Ya(c),h=!p&&Ga(c),m=!p&&!h&&ul(c);d=c,p||h||m?Ya(u)?d=u:Ha(u)?d=wi(u):h?(f=!1,d=bi(c,!0)):m?(f=!1,d=Ei(c,!0)):d=[]:rl(c)||Ba(c)?(d=u,Ba(u)?d=vl(u):Ja(u)&&!Qa(u)||(d=ho(c))):f=!1}f&&(l.set(c,d),o(d,c,r,a,l),l.delete(c)),Xn(t,n,d)}}(t,e,l,n,Vr,r,o);else{var u=r?r(wo(t,l),a,l+"",t,e,o):i;u===i&&(u=a),Xn(t,l,u)}},Dl)}function zr(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:i}function Ur(t,e,n){e=e.length?De(e,function(t){return Ya(t)?function(e){return Ir(e,1===t.length?t[0]:t)}:t}):[nu];var r=-1;e=De(e,qe(oo()));var i=Rr(t,function(t,n,i){var o=De(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return function(t){var e=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,l=n.length;++r<a;){var u=Ai(i[r],o[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)});e--;)t[e]=t[e].value;return t}(i)}function Br(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],l=Ir(t,a);n(l,a)&&Qr(o,vi(a,t),l)}return o}function Yr(t,e,n,r){var i=r?ze:Ve,o=-1,a=e.length,l=t;for(t===e&&(e=wi(e)),n&&(l=De(t,qe(n)));++o<a;)for(var u=0,c=e[o],s=n?n(c):c;(u=i(l,s,u,r))>-1;)l!==t&&Gt.call(l,u,1),Gt.call(t,u,1);return t}function Kr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?Gt.call(t,i,1):ui(t,i)}}return t}function Wr(t,e){return t+pe(bn()*(e-t+1))}function Hr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=pe(e/2))&&(t+=t)}while(e);return n}function Gr(t,e){return No(So(t,e,nu),t+"")}function $r(t){return qn(Vl(t))}function qr(t,e){var n=Vl(t);return xo(n,or(e,0,n.length))}function Qr(t,e,n,r){if(!Ja(t))return t;for(var o=-1,a=(e=vi(e,t)).length,l=a-1,u=t;null!=u&&++o<a;){var c=Ro(e[o]),s=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=l){var d=u[c];(s=r?r(d,c,u):i)===i&&(s=Ja(d)?d:vo(e[o+1])?[]:{})}Jn(u,c,s),u=u[c]}return t}var Zr=Tn?function(t,e){return Tn.set(t,e),t}:nu,Xr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Jl(e),writable:!0})}:nu;function Jr(t){return xo(Vl(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return sr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ll(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,nu,n)}function ri(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var l=(e=n(e))!=e,u=null===e,c=ll(e),s=e===i;o<a;){var d=pe((o+a)/2),f=n(t[d]),p=f!==i,h=null===f,m=f==f,v=ll(f);if(l)var y=r||m;else y=s?m&&(r||p):u?m&&p&&(r||!h):c?m&&p&&!h&&(r||!v):!h&&!v&&(r?f<=e:f<e);y?o=d+1:a=d}return yn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],l=e?e(a):a;if(!n||!Va(l,u)){var u=l;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:ll(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Ya(t))return De(t,ai)+"";if(ll(t))return kn?kn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Ne,o=t.length,a=!0,l=[],u=l;if(n)a=!1,i=Oe;else if(o>=200){var c=e?null:Hi(t);if(c)return un(c);a=!1,i=Ze,u=new Hn}else u=e?[]:l;t:for(;++r<o;){var s=t[r],d=e?e(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue t;e&&u.push(d),l.push(s)}else i(u,d,n)||(u!==l&&u.push(d),l.push(s))}return l}function ui(t,e){return null==(t=Mo(t,e=vi(e,t)))||delete t[Ro(qo(e))]}function ci(t,e,n,r){return Qr(t,e,n(Ir(t,e)),r)}function si(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function di(t,e){var n=t;return n instanceof Bn&&(n=n.value()),je(e,function(t,e){return e.func.apply(e.thisArg,xe([t],e.args))},n)}function fi(t,e,n){var i=t.length;if(i<2)return i?li(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var l=t[o],u=-1;++u<i;)u!=o&&(a[o]=cr(a[o]||l,t[u],e,n));return li(mr(a,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,a=e.length,l={};++r<o;){var u=r<a?e[r]:i;n(l,t[r],u)}return l}function hi(t){return Ha(t)?t:[]}function mi(t){return"function"==typeof t?t:nu}function vi(t,e){return Ya(t)?t:go(t,e)?[t]:Lo(yl(t))}var yi=Gr;function gi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var _i=ae||function(t){return de.clearTimeout(t)};function bi(t,e){if(e)return t.slice();var n=t.length,r=Yt?Yt(n):new t.constructor(n);return t.copy(r),r}function Ii(t){var e=new t.constructor(t.byteLength);return new Bt(e).set(new Bt(t)),e}function Ei(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ll(t),l=e!==i,u=null===e,c=e==e,s=ll(e);if(!u&&!s&&!a&&t>e||a&&l&&c&&!u&&!s||r&&l&&c||!n&&c||!o)return 1;if(!r&&!a&&!s&&t<e||s&&n&&o&&!r&&!a||u&&n&&o||!l&&o||!c)return-1}return 0}function Si(t,e,n,i){for(var o=-1,a=t.length,l=n.length,u=-1,c=e.length,s=vn(a-l,0),d=r(c+s),f=!i;++u<c;)d[u]=e[u];for(;++o<l;)(f||o<a)&&(d[n[o]]=t[o]);for(;s--;)d[u++]=t[o++];return d}function Mi(t,e,n,i){for(var o=-1,a=t.length,l=-1,u=n.length,c=-1,s=e.length,d=vn(a-u,0),f=r(d+s),p=!i;++o<d;)f[o]=t[o];for(var h=o;++c<s;)f[h+c]=e[c];for(;++l<u;)(p||o<a)&&(f[h+n[l]]=t[o++]);return f}function wi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ci(t,e,n,r){var o=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var u=e[a],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?rr(n,u,c):Jn(n,u,c)}return n}function Ti(t,e){return function(n,r){var i=Ya(n)?Se:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ni(t){return Gr(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,l=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,l&&yo(n[0],n[1],l)&&(a=o<3?i:a,o=1),e=St(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e})}function Oi(t,e){return function(n,r){if(null==n)return n;if(!Wa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=St(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Di(t){return function(e,n,r){for(var i=-1,o=St(e),a=r(e),l=a.length;l--;){var u=a[t?l:++i];if(!1===n(o[u],u,o))break}return e}}function xi(t){return function(e){var n=rn(e=yl(e))?dn(e):i,r=n?n[0]:e.charAt(0),o=n?gi(n,1).join(""):e.slice(1);return r[t]()+o}}function ji(t){return function(e){return je(Ql(Bl(e).replace(Qt,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vn(t.prototype),r=t.apply(n,e);return Ja(r)?r:n}}function Li(t){return function(e,n,r){var o=St(e);if(!Wa(e)){var a=oo(n,3);e=Ol(e),n=function(t){return a(o[t],t,o)}}var l=t(e,n,r);return l>-1?o[a?e[l]:l]:i}}function Ri(t){return Ji(function(e){var n=e.length,r=n,a=Un.prototype.thru;for(t&&e.reverse();r--;){var l=e[r];if("function"!=typeof l)throw new Ct(o);if(a&&!u&&"wrapper"==ro(l))var u=new Un([],!0)}for(r=u?r:n;++r<n;){var c=ro(l=e[r]),s="wrapper"==c?no(l):i;u=s&&_o(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?u[ro(s[0])].apply(u,s[3]):1==l.length&&_o(l)?u[c]():u.thru(l)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ya(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function ki(t,e,n,o,a,l,u,s,d,f){var p=e&c,h=1&e,m=2&e,v=24&e,y=512&e,g=m?i:Pi(t);return function c(){for(var _=arguments.length,b=r(_),I=_;I--;)b[I]=arguments[I];if(v)var E=io(c),A=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,E);if(o&&(b=Si(b,o,a,v)),l&&(b=Mi(b,l,u,v)),_-=A,v&&_<f){var S=ln(b,E);return Ki(t,e,ki,c.placeholder,n,b,S,s,d,f-_)}var M=h?n:this,w=m?M[t]:t;return _=b.length,s?b=function(t,e){for(var n=t.length,r=yn(e.length,n),o=wi(t);r--;){var a=e[r];t[r]=vo(a,n)?o[a]:i}return t}(b,s):y&&_>1&&b.reverse(),p&&d<_&&(b.length=d),this&&this!==de&&this instanceof c&&(w=g||Pi(w)),w.apply(M,b)}}function Fi(t,e){return function(n,r){return function(t,e,n,r){return gr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function zi(t){return Ji(function(e){return e=De(e,qe(oo())),Gr(function(n){var r=this;return t(e,function(t){return Ae(t,r,n)})})})}function Ui(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Hr(e,t):e;var r=Hr(e,fe(t/sn(e)));return rn(e)?gi(dn(r),0,t).join(""):r.slice(0,t)}function Bi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=fl(e),n===i?(n=e,e=0):n=fl(n),function(t,e,n,i){for(var o=-1,a=vn(fe((e-t)/(n||1)),0),l=r(a);a--;)l[i?a:++o]=t,t+=n;return l}(e,n,o=o===i?e<n?1:-1:fl(o),t)}}function Yi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ml(e),n=ml(n)),t(e,n)}}function Ki(t,e,n,r,o,a,l,c,s,d){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?a:i,f?l:i,f?i:a,f?i:l,c,s,d],h=n.apply(i,p);return _o(t)&&Co(h,p),h.placeholder=r,Oo(h,t,e)}function Wi(t){var e=At[t];return function(t,n){if(t=ml(t),(n=null==n?0:yn(pl(n),292))&&Re(t)){var r=(yl(t)+"e").split("e");return+((r=(yl(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Hi=Mn&&1/un(new Mn([,-0]))[1]==s?function(t){return new Mn(t)}:lu;function Gi(t){return function(e){var n=fo(e);return n==E?on(e):n==C?cn(e):function(t,e){return De(e,function(e){return[e,t[e]]})}(e,t(e))}}function $i(t,e,n,a,s,d,f,p){var h=2&e;if(!h&&"function"!=typeof t)throw new Ct(o);var m=a?a.length:0;if(m||(e&=-97,a=s=i),f=f===i?f:vn(pl(f),0),p=p===i?p:pl(p),m-=s?s.length:0,64&e){var v=a,y=s;a=s=i}var g=h?i:no(t),_=[t,e,n,a,s,v,y,d,f,p];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var s=t[3];t[3]=s?Si(s,u,e[4]):u,t[4]=s?ln(t[3],l):e[4]}(u=e[5])&&(s=t[5],t[5]=s?Mi(s,u,e[6]):u,t[6]=s?ln(t[5],l):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(_,g),t=_[0],e=_[1],n=_[2],a=_[3],s=_[4],!(p=_[9]=_[9]===i?h?0:t.length:vn(_[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Pi(t);return function a(){for(var l=arguments.length,u=r(l),c=l,s=io(a);c--;)u[c]=arguments[c];var d=l<3&&u[0]!==s&&u[l-1]!==s?[]:ln(u,s);return(l-=d.length)<n?Ki(t,e,ki,a.placeholder,i,u,d,i,i,n-l):Ae(this&&this!==de&&this instanceof a?o:t,this,u)}}(t,e,p):e!=u&&33!=e||s.length?ki.apply(i,_):function(t,e,n,i){var o=1&e,a=Pi(t);return function e(){for(var l=-1,u=arguments.length,c=-1,s=i.length,d=r(s+u),f=this&&this!==de&&this instanceof e?a:t;++c<s;)d[c]=i[c];for(;u--;)d[c++]=arguments[++l];return Ae(f,o?n:this,d)}}(t,e,n,a);else var b=function(t,e,n){var r=1&e,i=Pi(t);return function e(){return(this&&this!==de&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Oo((g?Zr:Co)(b,_),t,e)}function qi(t,e,n,r){return t===i||Va(t,Ot[n])&&!jt.call(r,n)?e:t}function Qi(t,e,n,r,o,a){return Ja(t)&&Ja(e)&&(a.set(e,t),Vr(t,e,i,Qi,a),a.delete(e)),t}function Zi(t){return rl(t)?i:t}function Xi(t,e,n,r,o,a){var l=1&n,u=t.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var s=a.get(t),d=a.get(e);if(s&&d)return s==e&&d==t;var f=-1,p=!0,h=2&n?new Hn:i;for(a.set(t,e),a.set(e,t);++f<u;){var m=t[f],v=e[f];if(r)var y=l?r(v,m,f,e,t,a):r(m,v,f,t,e,a);if(y!==i){if(y)continue;p=!1;break}if(h){if(!Le(e,function(t,e){if(!Ze(h,e)&&(m===t||o(m,t,n,r,a)))return h.push(e)})){p=!1;break}}else if(m!==v&&!o(m,v,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Ji(t){return No(So(t,i,Ko),t+"")}function to(t){return Er(t,Ol,co)}function eo(t){return Er(t,Dl,so)}var no=Tn?function(t){return Tn.get(t)}:lu;function ro(t){for(var e=t.name+"",n=Nn[e],r=jt.call(Nn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(jt.call(Fn,"placeholder")?Fn:t).placeholder}function oo(){var t=Fn.iteratee||ru;return t=t===ru?jr:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function lo(t){for(var e=Ol(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Eo(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return xr(n)?n:i}var co=me?function(t){return null==t?[]:(t=St(t),Te(me(t),function(e){return Ht.call(t,e)}))}:hu,so=me?function(t){for(var e=[];t;)xe(e,co(t)),t=Kt(t);return e}:hu,fo=Ar;function po(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var a=Ro(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Xa(i)&&vo(a,i)&&(Ya(t)||Ba(t))}function ho(t){return"function"!=typeof t.constructor||Io(t)?{}:Vn(Kt(t))}function mo(t){return Ya(t)||Ba(t)||!!($t&&t&&t[$t])}function vo(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!Ja(n))return!1;var r=typeof e;return!!("number"==r?Wa(n)&&vo(e,n.length):"string"==r&&e in n)&&Va(n[e],t)}function go(t,e){if(Ya(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ll(t))||J.test(t)||!X.test(t)||null!=e&&t in St(e)}function _o(t){var e=ro(t),n=Fn[e];if("function"!=typeof n||!(e in Bn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(En&&fo(new En(new ArrayBuffer(1)))!=x||An&&fo(new An)!=E||Sn&&fo(Sn.resolve())!=M||Mn&&fo(new Mn)!=C||wn&&fo(new wn)!=O)&&(fo=function(t){var e=Ar(t),n=e==S?t.constructor:i,r=n?ko(n):"";if(r)switch(r){case On:return x;case Dn:return E;case xn:return M;case jn:return C;case Pn:return O}return e});var bo=Dt?Qa:mu;function Io(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function Eo(t){return t==t&&!Ja(t)}function Ao(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in St(n))}}function So(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=vn(i.length-e,0),l=r(a);++o<a;)l[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(l),Ae(t,this,u)}}function Mo(t,e){return e.length<2?t:Ir(t,ti(e,0,-1))}function wo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Co=Do(Zr),To=se||function(t,e){return de.setTimeout(t,e)},No=Do(Xr);function Oo(t,e,n){var r=e+"";return No(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Me(h,function(n){var r="_."+n[0];e&n[1]&&!Ne(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(lt):[]}(r),n)))}function Do(t){var e=0,n=0;return function(){var r=gn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function xo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Wr(n,o),l=t[a];t[a]=t[n],t[n]=l}return t.length=e,t}var jo,Po,Lo=(jo=ja(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,function(t,n,r,i){e.push(r?i.replace(st,"$1"):n||t)}),e},function(t){return 500===Po.size&&Po.clear(),t}),Po=jo.cache,jo);function Ro(t){if("string"==typeof t||ll(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ko(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fo(t){if(t instanceof Bn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=wi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Gr(function(t,e){return Ha(t)?cr(t,mr(e,1,Ha,!0)):[]}),zo=Gr(function(t,e){var n=qo(e);return Ha(n)&&(n=i),Ha(t)?cr(t,mr(e,1,Ha,!0),oo(n,2)):[]}),Uo=Gr(function(t,e){var n=qo(e);return Ha(n)&&(n=i),Ha(t)?cr(t,mr(e,1,Ha,!0),i,n):[]});function Bo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:pl(n);return i<0&&(i=vn(r+i,0)),Fe(t,oo(e,3),i)}function Yo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=pl(n),o=n<0?vn(r+o,0):yn(o,r-1)),Fe(t,oo(e,3),o,!0)}function Ko(t){return null!=t&&t.length?mr(t,1):[]}function Wo(t){return t&&t.length?t[0]:i}var Ho=Gr(function(t){var e=De(t,hi);return e.length&&e[0]===t[0]?Cr(e):[]}),Go=Gr(function(t){var e=qo(t),n=De(t,hi);return e===qo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Cr(n,oo(e,2)):[]}),$o=Gr(function(t){var e=qo(t),n=De(t,hi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Cr(n,i,e):[]});function qo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Qo=Gr(Zo);function Zo(t,e){return t&&t.length&&e&&e.length?Yr(t,e):t}var Xo=Ji(function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Kr(t,De(e,function(t){return vo(t,n)?+t:t}).sort(Ai)),r});function Jo(t){return null==t?t:In.call(t)}var ta=Gr(function(t){return li(mr(t,1,Ha,!0))}),ea=Gr(function(t){var e=qo(t);return Ha(e)&&(e=i),li(mr(t,1,Ha,!0),oo(e,2))}),na=Gr(function(t){var e=qo(t);return e="function"==typeof e?e:i,li(mr(t,1,Ha,!0),i,e)});function ra(t){if(!t||!t.length)return[];var e=0;return t=Te(t,function(t){if(Ha(t))return e=vn(t.length,e),!0}),Ge(e,function(e){return De(t,Ye(e))})}function ia(t,e){if(!t||!t.length)return[];var n=ra(t);return null==e?n:De(n,function(t){return Ae(e,i,t)})}var oa=Gr(function(t,e){return Ha(t)?cr(t,e):[]}),aa=Gr(function(t){return fi(Te(t,Ha))}),la=Gr(function(t){var e=qo(t);return Ha(e)&&(e=i),fi(Te(t,Ha),oo(e,2))}),ua=Gr(function(t){var e=qo(t);return e="function"==typeof e?e:i,fi(Te(t,Ha),i,e)}),ca=Gr(ra),sa=Gr(function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ia(t,n)});function da(t){var e=Fn(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var pa=Ji(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Bn&&vo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Un(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(i),t})):this.thru(o)}),ha=Ti(function(t,e,n){jt.call(t,n)?++t[n]:rr(t,n,1)}),ma=Li(Bo),va=Li(Yo);function ya(t,e){return(Ya(t)?Me:sr)(t,oo(e,3))}function ga(t,e){return(Ya(t)?we:dr)(t,oo(e,3))}var _a=Ti(function(t,e,n){jt.call(t,n)?t[n].push(e):rr(t,n,[e])}),ba=Gr(function(t,e,n){var i=-1,o="function"==typeof e,a=Wa(t)?r(t.length):[];return sr(t,function(t){a[++i]=o?Ae(e,t,n):Tr(t,e,n)}),a}),Ia=Ti(function(t,e,n){rr(t,n,e)});function Ea(t,e){return(Ya(t)?De:Rr)(t,oo(e,3))}var Aa=Ti(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Sa=Gr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Ur(t,mr(e,1),[])}),Ma=ce||function(){return de.Date.now()};function wa(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,$i(t,c,i,i,i,i,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new Ct(o);return t=pl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ta=Gr(function(t,e,n){var r=1;if(n.length){var i=ln(n,io(Ta));r|=u}return $i(t,r,e,n,i)}),Na=Gr(function(t,e,n){var r=3;if(n.length){var i=ln(n,io(Na));r|=u}return $i(e,r,t,n,i)});function Oa(t,e,n){var r,a,l,u,c,s,d=0,f=!1,p=!1,h=!0;if("function"!=typeof t)throw new Ct(o);function m(e){var n=r,o=a;return r=a=i,d=e,u=t.apply(o,n)}function v(t){var n=t-s;return s===i||n>=e||n<0||p&&t-d>=l}function y(){var t=Ma();if(v(t))return g(t);c=To(y,function(t){var n=e-(t-s);return p?yn(n,l-(t-d)):n}(t))}function g(t){return c=i,h&&r?m(t):(r=a=i,u)}function _(){var t=Ma(),n=v(t);if(r=arguments,a=this,s=t,n){if(c===i)return function(t){return d=t,c=To(y,e),f?m(t):u}(s);if(p)return _i(c),c=To(y,e),m(s)}return c===i&&(c=To(y,e)),u}return e=ml(e)||0,Ja(n)&&(f=!!n.leading,l=(p="maxWait"in n)?vn(ml(n.maxWait)||0,e):l,h="trailing"in n?!!n.trailing:h),_.cancel=function(){c!==i&&_i(c),d=0,r=s=a=c=i},_.flush=function(){return c===i?u:g(Ma())},_}var Da=Gr(function(t,e){return ur(t,1,e)}),xa=Gr(function(t,e,n){return ur(t,ml(e)||0,n)});function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ja.Cache||Wn),n}function Pa(t){if("function"!=typeof t)throw new Ct(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Wn;var La=yi(function(t,e){var n=(e=1==e.length&&Ya(e[0])?De(e[0],qe(oo())):De(mr(e,1),qe(oo()))).length;return Gr(function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ae(t,this,r)})}),Ra=Gr(function(t,e){var n=ln(e,io(Ra));return $i(t,u,i,e,n)}),ka=Gr(function(t,e){var n=ln(e,io(ka));return $i(t,64,i,e,n)}),Fa=Ji(function(t,e){return $i(t,256,i,i,i,e)});function Va(t,e){return t===e||t!=t&&e!=e}var za=Yi(Sr),Ua=Yi(function(t,e){return t>=e}),Ba=Nr(function(){return arguments}())?Nr:function(t){return tl(t)&&jt.call(t,"callee")&&!Ht.call(t,"callee")},Ya=r.isArray,Ka=ye?qe(ye):function(t){return tl(t)&&Ar(t)==D};function Wa(t){return null!=t&&Xa(t.length)&&!Qa(t)}function Ha(t){return tl(t)&&Wa(t)}var Ga=ve||mu,$a=ge?qe(ge):function(t){return tl(t)&&Ar(t)==g};function qa(t){if(!tl(t))return!1;var e=Ar(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rl(t)}function Qa(t){if(!Ja(t))return!1;var e=Ar(t);return e==b||e==I||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Za(t){return"number"==typeof t&&t==pl(t)}function Xa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function Ja(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function tl(t){return null!=t&&"object"==typeof t}var el=_e?qe(_e):function(t){return tl(t)&&fo(t)==E};function nl(t){return"number"==typeof t||tl(t)&&Ar(t)==A}function rl(t){if(!tl(t)||Ar(t)!=S)return!1;var e=Kt(t);if(null===e)return!0;var n=jt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xt.call(n)==kt}var il=be?qe(be):function(t){return tl(t)&&Ar(t)==w},ol=Ie?qe(Ie):function(t){return tl(t)&&fo(t)==C};function al(t){return"string"==typeof t||!Ya(t)&&tl(t)&&Ar(t)==T}function ll(t){return"symbol"==typeof t||tl(t)&&Ar(t)==N}var ul=Ee?qe(Ee):function(t){return tl(t)&&Xa(t.length)&&!!ie[Ar(t)]},cl=Yi(Lr),sl=Yi(function(t,e){return t<=e});function dl(t){if(!t)return[];if(Wa(t))return al(t)?dn(t):wi(t);if(qt&&t[qt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[qt]());var e=fo(t);return(e==E?on:e==C?un:Vl)(t)}function fl(t){return t?(t=ml(t))===s||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function pl(t){var e=fl(t),n=e%1;return e==e?n?e-n:e:0}function hl(t){return t?or(pl(t),0,p):0}function ml(t){if("number"==typeof t)return t;if(ll(t))return f;if(Ja(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ja(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=ht.test(t);return n||vt.test(t)?ue(t.slice(2),n?2:8):pt.test(t)?f:+t}function vl(t){return Ci(t,Dl(t))}function yl(t){return null==t?"":ai(t)}var gl=Ni(function(t,e){if(Io(e)||Wa(e))Ci(e,Ol(e),t);else for(var n in e)jt.call(e,n)&&Jn(t,n,e[n])}),_l=Ni(function(t,e){Ci(e,Dl(e),t)}),bl=Ni(function(t,e,n,r){Ci(e,Dl(e),t,r)}),Il=Ni(function(t,e,n,r){Ci(e,Ol(e),t,r)}),El=Ji(ir),Al=Gr(function(t,e){t=St(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],l=Dl(a),u=-1,c=l.length;++u<c;){var s=l[u],d=t[s];(d===i||Va(d,Ot[s])&&!jt.call(t,s))&&(t[s]=a[s])}return t}),Sl=Gr(function(t){return t.push(i,Qi),Ae(jl,i,t)});function Ml(t,e,n){var r=null==t?i:Ir(t,e);return r===i?n:r}function wl(t,e){return null!=t&&po(t,e,wr)}var Cl=Fi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),t[e]=n},Jl(nu)),Tl=Fi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),jt.call(t,e)?t[e].push(n):t[e]=[n]},oo),Nl=Gr(Tr);function Ol(t){return Wa(t)?$n(t):Pr(t)}function Dl(t){return Wa(t)?$n(t,!0):function(t){if(!Ja(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=Io(t),n=[];for(var r in t)("constructor"!=r||!e&&jt.call(t,r))&&n.push(r);return n}(t)}var xl=Ni(function(t,e,n){Vr(t,e,n)}),jl=Ni(function(t,e,n,r){Vr(t,e,n,r)}),Pl=Ji(function(t,e){var n={};if(null==t)return n;var r=!1;e=De(e,function(e){return e=vi(e,t),r||(r=e.length>1),e}),Ci(t,eo(t),n),r&&(n=ar(n,7,Zi));for(var i=e.length;i--;)ui(n,e[i]);return n}),Ll=Ji(function(t,e){return null==t?{}:function(t,e){return Br(t,e,function(e,n){return wl(t,n)})}(t,e)});function Rl(t,e){if(null==t)return{};var n=De(eo(t),function(t){return[t]});return e=oo(e),Br(t,n,function(t,n){return e(t,n[0])})}var kl=Gi(Ol),Fl=Gi(Dl);function Vl(t){return null==t?[]:Qe(t,Ol(t))}var zl=ji(function(t,e,n){return e=e.toLowerCase(),t+(n?Ul(e):e)});function Ul(t){return ql(yl(t).toLowerCase())}function Bl(t){return(t=yl(t))&&t.replace(gt,tn).replace(Zt,"")}var Yl=ji(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Kl=ji(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Wl=xi("toLowerCase"),Hl=ji(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Gl=ji(function(t,e,n){return t+(n?" ":"")+ql(e)}),$l=ji(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ql=xi("toUpperCase");function Ql(t,e,n){return t=yl(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Zl=Gr(function(t,e){try{return Ae(t,i,e)}catch(t){return qa(t)?t:new It(t)}}),Xl=Ji(function(t,e){return Me(e,function(e){e=Ro(e),rr(t,e,Ta(t[e],t))}),t});function Jl(t){return function(){return t}}var tu=Ri(),eu=Ri(!0);function nu(t){return t}function ru(t){return jr("function"==typeof t?t:ar(t,1))}var iu=Gr(function(t,e){return function(n){return Tr(n,t,e)}}),ou=Gr(function(t,e){return function(n){return Tr(t,n,e)}});function au(t,e,n){var r=Ol(e),i=br(e,r);null!=n||Ja(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=br(e,Ol(e)));var o=!(Ja(n)&&"chain"in n&&!n.chain),a=Qa(t);return Me(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=wi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,xe([this.value()],arguments))})}),t}function lu(){}var uu=zi(De),cu=zi(Ce),su=zi(Le);function du(t){return go(t)?Ye(Ro(t)):function(t){return function(e){return Ir(e,t)}}(t)}var fu=Bi(),pu=Bi(!0);function hu(){return[]}function mu(){return!1}var vu,yu=Vi(function(t,e){return t+e},0),gu=Wi("ceil"),_u=Vi(function(t,e){return t/e},1),bu=Wi("floor"),Iu=Vi(function(t,e){return t*e},1),Eu=Wi("round"),Au=Vi(function(t,e){return t-e},0);return Fn.after=function(t,e){if("function"!=typeof e)throw new Ct(o);return t=pl(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=wa,Fn.assign=gl,Fn.assignIn=_l,Fn.assignInWith=bl,Fn.assignWith=Il,Fn.at=El,Fn.before=Ca,Fn.bind=Ta,Fn.bindAll=Xl,Fn.bindKey=Na,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ya(t)?t:[t]},Fn.chain=da,Fn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:vn(pl(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,l=0,u=r(fe(o/e));a<o;)u[l++]=ti(t,a,a+=e);return u},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return xe(Ya(n)?wi(n):[n],mr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?De(t,function(t){if("function"!=typeof t[1])throw new Ct(o);return[n(t[0]),t[1]]}):[],Gr(function(n){for(var r=-1;++r<e;){var i=t[r];if(Ae(i[0],this,n))return Ae(i[1],this,n)}})},Fn.conforms=function(t){return function(t){var e=Ol(t);return function(n){return lr(n,t,e)}}(ar(t,1))},Fn.constant=Jl,Fn.countBy=ha,Fn.create=function(t,e){var n=Vn(t);return null==e?n:nr(n,e)},Fn.curry=function t(e,n,r){var o=$i(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.curryRight=function t(e,n,r){var o=$i(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Fn.debounce=Oa,Fn.defaults=Al,Fn.defaultsDeep=Sl,Fn.defer=Da,Fn.delay=xa,Fn.difference=Vo,Fn.differenceBy=zo,Fn.differenceWith=Uo,Fn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:pl(e))<0?0:e,r):[]},Fn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:pl(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?si(t,oo(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?si(t,oo(e,3),!0):[]},Fn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=pl(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:pl(r))<0&&(r+=o),r=n>r?0:hl(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Fn.filter=function(t,e){return(Ya(t)?Te:hr)(t,oo(e,3))},Fn.flatMap=function(t,e){return mr(Ea(t,e),1)},Fn.flatMapDeep=function(t,e){return mr(Ea(t,e),s)},Fn.flatMapDepth=function(t,e,n){return n=n===i?1:pl(n),mr(Ea(t,e),n)},Fn.flatten=Ko,Fn.flattenDeep=function(t){return null!=t&&t.length?mr(t,s):[]},Fn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:pl(e)):[]},Fn.flip=function(t){return $i(t,512)},Fn.flow=tu,Fn.flowRight=eu,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:br(t,Ol(t))},Fn.functionsIn=function(t){return null==t?[]:br(t,Dl(t))},Fn.groupBy=_a,Fn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Fn.intersection=Ho,Fn.intersectionBy=Go,Fn.intersectionWith=$o,Fn.invert=Cl,Fn.invertBy=Tl,Fn.invokeMap=ba,Fn.iteratee=ru,Fn.keyBy=Ia,Fn.keys=Ol,Fn.keysIn=Dl,Fn.map=Ea,Fn.mapKeys=function(t,e){var n={};return e=oo(e,3),gr(t,function(t,r,i){rr(n,e(t,r,i),t)}),n},Fn.mapValues=function(t,e){var n={};return e=oo(e,3),gr(t,function(t,r,i){rr(n,r,e(t,r,i))}),n},Fn.matches=function(t){return kr(ar(t,1))},Fn.matchesProperty=function(t,e){return Fr(t,ar(e,1))},Fn.memoize=ja,Fn.merge=xl,Fn.mergeWith=jl,Fn.method=iu,Fn.methodOf=ou,Fn.mixin=au,Fn.negate=Pa,Fn.nthArg=function(t){return t=pl(t),Gr(function(e){return zr(e,t)})},Fn.omit=Pl,Fn.omitBy=function(t,e){return Rl(t,Pa(oo(e)))},Fn.once=function(t){return Ca(2,t)},Fn.orderBy=function(t,e,n,r){return null==t?[]:(Ya(e)||(e=null==e?[]:[e]),Ya(n=r?i:n)||(n=null==n?[]:[n]),Ur(t,e,n))},Fn.over=uu,Fn.overArgs=La,Fn.overEvery=cu,Fn.overSome=su,Fn.partial=Ra,Fn.partialRight=ka,Fn.partition=Aa,Fn.pick=Ll,Fn.pickBy=Rl,Fn.property=du,Fn.propertyOf=function(t){return function(e){return null==t?i:Ir(t,e)}},Fn.pull=Qo,Fn.pullAll=Zo,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Yr(t,e,oo(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Yr(t,e,i,n):t},Fn.pullAt=Xo,Fn.range=fu,Fn.rangeRight=pu,Fn.rearg=Fa,Fn.reject=function(t,e){return(Ya(t)?Te:hr)(t,Pa(oo(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Kr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new Ct(o);return Gr(t,e=e===i?e:pl(e))},Fn.reverse=Jo,Fn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:pl(e),(Ya(t)?Qn:qr)(t,e)},Fn.set=function(t,e,n){return null==t?t:Qr(t,e,n)},Fn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},Fn.shuffle=function(t){return(Ya(t)?Zn:Jr)(t)},Fn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:pl(e),n=n===i?r:pl(n)),ti(t,e,n)):[]},Fn.sortBy=Sa,Fn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=yl(t))&&("string"==typeof e||null!=e&&!il(e))&&!(e=ai(e))&&rn(t)?gi(dn(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new Ct(o);return e=null==e?0:vn(pl(e),0),Gr(function(n){var r=n[e],i=gi(n,0,e);return r&&xe(i,r),Ae(t,this,i)})},Fn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:pl(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:pl(e)))<0?0:e,r):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?si(t,oo(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?si(t,oo(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ct(o);return Ja(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oa(t,e,{leading:r,maxWait:e,trailing:i})},Fn.thru=fa,Fn.toArray=dl,Fn.toPairs=kl,Fn.toPairsIn=Fl,Fn.toPath=function(t){return Ya(t)?De(t,Ro):ll(t)?[t]:wi(Lo(yl(t)))},Fn.toPlainObject=vl,Fn.transform=function(t,e,n){var r=Ya(t),i=r||Ga(t)||ul(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ja(t)&&Qa(o)?Vn(Kt(t)):{}}return(i?Me:gr)(t,function(t,r,i){return e(n,t,r,i)}),n},Fn.unary=function(t){return wa(t,1)},Fn.union=ta,Fn.unionBy=ea,Fn.unionWith=na,Fn.uniq=function(t){return t&&t.length?li(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?li(t,oo(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?li(t,i,e):[]},Fn.unset=function(t,e){return null==t||ui(t,e)},Fn.unzip=ra,Fn.unzipWith=ia,Fn.update=function(t,e,n){return null==t?t:ci(t,e,mi(n))},Fn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,mi(n),r)},Fn.values=Vl,Fn.valuesIn=function(t){return null==t?[]:Qe(t,Dl(t))},Fn.without=oa,Fn.words=Ql,Fn.wrap=function(t,e){return Ra(mi(e),t)},Fn.xor=aa,Fn.xorBy=la,Fn.xorWith=ua,Fn.zip=ca,Fn.zipObject=function(t,e){return pi(t||[],e||[],Jn)},Fn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Qr)},Fn.zipWith=sa,Fn.entries=kl,Fn.entriesIn=Fl,Fn.extend=_l,Fn.extendWith=bl,au(Fn,Fn),Fn.add=yu,Fn.attempt=Zl,Fn.camelCase=zl,Fn.capitalize=Ul,Fn.ceil=gu,Fn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ml(n))==n?n:0),e!==i&&(e=(e=ml(e))==e?e:0),or(ml(t),e,n)},Fn.clone=function(t){return ar(t,4)},Fn.cloneDeep=function(t){return ar(t,5)},Fn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Fn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Fn.conformsTo=function(t,e){return null==e||lr(t,e,Ol(e))},Fn.deburr=Bl,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=_u,Fn.endsWith=function(t,e,n){t=yl(t),e=ai(e);var r=t.length,o=n=n===i?r:or(pl(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Fn.eq=Va,Fn.escape=function(t){return(t=yl(t))&&$.test(t)?t.replace(H,en):t},Fn.escapeRegExp=function(t){return(t=yl(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Fn.every=function(t,e,n){var r=Ya(t)?Ce:fr;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Fn.find=ma,Fn.findIndex=Bo,Fn.findKey=function(t,e){return ke(t,oo(e,3),gr)},Fn.findLast=va,Fn.findLastIndex=Yo,Fn.findLastKey=function(t,e){return ke(t,oo(e,3),_r)},Fn.floor=bu,Fn.forEach=ya,Fn.forEachRight=ga,Fn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),Dl)},Fn.forInRight=function(t,e){return null==t?t:yr(t,oo(e,3),Dl)},Fn.forOwn=function(t,e){return t&&gr(t,oo(e,3))},Fn.forOwnRight=function(t,e){return t&&_r(t,oo(e,3))},Fn.get=Ml,Fn.gt=za,Fn.gte=Ua,Fn.has=function(t,e){return null!=t&&po(t,e,Mr)},Fn.hasIn=wl,Fn.head=Wo,Fn.identity=nu,Fn.includes=function(t,e,n,r){t=Wa(t)?t:Vl(t),n=n&&!r?pl(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),al(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:pl(n);return i<0&&(i=vn(r+i,0)),Ve(t,e,i)},Fn.inRange=function(t,e,n){return e=fl(e),n===i?(n=e,e=0):n=fl(n),function(t,e,n){return t>=yn(e,n)&&t<vn(e,n)}(t=ml(t),e,n)},Fn.invoke=Nl,Fn.isArguments=Ba,Fn.isArray=Ya,Fn.isArrayBuffer=Ka,Fn.isArrayLike=Wa,Fn.isArrayLikeObject=Ha,Fn.isBoolean=function(t){return!0===t||!1===t||tl(t)&&Ar(t)==y},Fn.isBuffer=Ga,Fn.isDate=$a,Fn.isElement=function(t){return tl(t)&&1===t.nodeType&&!rl(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Wa(t)&&(Ya(t)||"string"==typeof t||"function"==typeof t.splice||Ga(t)||ul(t)||Ba(t)))return!t.length;var e=fo(t);if(e==E||e==C)return!t.size;if(Io(t))return!Pr(t).length;for(var n in t)if(jt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return Or(t,e)},Fn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Or(t,e,i,n):!!r},Fn.isError=qa,Fn.isFinite=function(t){return"number"==typeof t&&Re(t)},Fn.isFunction=Qa,Fn.isInteger=Za,Fn.isLength=Xa,Fn.isMap=el,Fn.isMatch=function(t,e){return t===e||Dr(t,e,lo(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,lo(e),n)},Fn.isNaN=function(t){return nl(t)&&t!=+t},Fn.isNative=function(t){if(bo(t))throw new It("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=nl,Fn.isObject=Ja,Fn.isObjectLike=tl,Fn.isPlainObject=rl,Fn.isRegExp=il,Fn.isSafeInteger=function(t){return Za(t)&&t>=-9007199254740991&&t<=d},Fn.isSet=ol,Fn.isString=al,Fn.isSymbol=ll,Fn.isTypedArray=ul,Fn.isUndefined=function(t){return t===i},Fn.isWeakMap=function(t){return tl(t)&&fo(t)==O},Fn.isWeakSet=function(t){return tl(t)&&"[object WeakSet]"==Ar(t)},Fn.join=function(t,e){return null==t?"":Ke.call(t,e)},Fn.kebabCase=Yl,Fn.last=qo,Fn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=pl(n))<0?vn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Fe(t,Ue,o,!0)},Fn.lowerCase=Kl,Fn.lowerFirst=Wl,Fn.lt=cl,Fn.lte=sl,Fn.max=function(t){return t&&t.length?pr(t,nu,Sr):i},Fn.maxBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Sr):i},Fn.mean=function(t){return Be(t,nu)},Fn.meanBy=function(t,e){return Be(t,oo(e,2))},Fn.min=function(t){return t&&t.length?pr(t,nu,Lr):i},Fn.minBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Lr):i},Fn.stubArray=hu,Fn.stubFalse=mu,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Iu,Fn.nth=function(t,e){return t&&t.length?zr(t,pl(e)):i},Fn.noConflict=function(){return de._===this&&(de._=Ft),this},Fn.noop=lu,Fn.now=Ma,Fn.pad=function(t,e,n){t=yl(t);var r=(e=pl(e))?sn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ui(pe(i),n)+t+Ui(fe(i),n)},Fn.padEnd=function(t,e,n){t=yl(t);var r=(e=pl(e))?sn(t):0;return e&&r<e?t+Ui(e-r,n):t},Fn.padStart=function(t,e,n){t=yl(t);var r=(e=pl(e))?sn(t):0;return e&&r<e?Ui(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(yl(t).replace(rt,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fl(t),e===i?(e=t,t=0):e=fl(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=bn();return yn(t+o*(e-t+le("1e-"+((o+"").length-1))),e)}return Wr(t,e)},Fn.reduce=function(t,e,n){var r=Ya(t)?je:We,i=arguments.length<3;return r(t,oo(e,4),n,i,sr)},Fn.reduceRight=function(t,e,n){var r=Ya(t)?Pe:We,i=arguments.length<3;return r(t,oo(e,4),n,i,dr)},Fn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:pl(e),Hr(yl(t),e)},Fn.replace=function(){var t=arguments,e=yl(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var r=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Ro(e[r])];a===i&&(r=o,a=n),t=Qa(a)?a.call(t):a}return t},Fn.round=Eu,Fn.runInContext=t,Fn.sample=function(t){return(Ya(t)?qn:$r)(t)},Fn.size=function(t){if(null==t)return 0;if(Wa(t))return al(t)?sn(t):t.length;var e=fo(t);return e==E||e==C?t.size:Pr(t).length},Fn.snakeCase=Hl,Fn.some=function(t,e,n){var r=Ya(t)?Le:ei;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},Fn.sortedIndex=function(t,e){return ni(t,e)},Fn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Va(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Va(t[n],e))return n}return-1},Fn.startCase=Gl,Fn.startsWith=function(t,e,n){return t=yl(t),n=null==n?0:or(pl(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Fn.subtract=Au,Fn.sum=function(t){return t&&t.length?He(t,nu):0},Fn.sumBy=function(t,e){return t&&t.length?He(t,oo(e,2)):0},Fn.template=function(t,e,n){var r=Fn.templateSettings;n&&yo(t,e,n)&&(e=i),t=yl(t),e=bl({},e,r,qi);var o,a,l=bl({},e.imports,r.imports,qi),u=Ol(l),c=Qe(l,u),s=0,d=e.interpolate||_t,f="__p += '",p=Mt((e.escape||_t).source+"|"+d.source+"|"+(d===Z?dt:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),h="//# sourceURL="+(jt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(p,function(e,n,r,i,l,u){return r||(r=i),f+=t.slice(s,u).replace(bt,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),l&&(a=!0,f+="';\n"+l+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=u+e.length,e}),f+="';\n";var m=jt.call(e,"variable")&&e.variable;if(m){if(ct.test(m))throw new It("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(B,""):f).replace(Y,"$1").replace(K,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zl(function(){return Et(u,h+"return "+f).apply(i,c)});if(v.source=f,qa(v))throw v;return v},Fn.times=function(t,e){if((t=pl(t))<1||t>d)return[];var n=p,r=yn(t,p);e=oo(e),t-=p;for(var i=Ge(r,e);++n<t;)e(n);return i},Fn.toFinite=fl,Fn.toInteger=pl,Fn.toLength=hl,Fn.toLower=function(t){return yl(t).toLowerCase()},Fn.toNumber=ml,Fn.toSafeInteger=function(t){return t?or(pl(t),-9007199254740991,d):0===t?t:0},Fn.toString=yl,Fn.toUpper=function(t){return yl(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=yl(t))&&(n||e===i))return $e(t);if(!t||!(e=ai(e)))return t;var r=dn(t),o=dn(e);return gi(r,Xe(r,o),Je(r,o)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=yl(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=ai(e)))return t;var r=dn(t);return gi(r,0,Je(r,dn(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=yl(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=dn(t);return gi(r,Xe(r,dn(e))).join("")},Fn.truncate=function(t,e){var n=30,r="...";if(Ja(e)){var o="separator"in e?e.separator:o;n="length"in e?pl(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=yl(t)).length;if(rn(t)){var l=dn(t);a=l.length}if(n>=a)return t;var u=n-sn(r);if(u<1)return r;var c=l?gi(l,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(l&&(u+=c.length-u),il(o)){if(t.slice(u).search(o)){var s,d=c;for(o.global||(o=Mt(o.source,yl(ft.exec(o))+"g")),o.lastIndex=0;s=o.exec(d);)var f=s.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Fn.unescape=function(t){return(t=yl(t))&&G.test(t)?t.replace(W,pn):t},Fn.uniqueId=function(t){var e=++Pt;return yl(t)+e},Fn.upperCase=$l,Fn.upperFirst=ql,Fn.each=ya,Fn.eachRight=ga,Fn.first=Wo,au(Fn,(vu={},gr(Fn,function(t,e){jt.call(Fn.prototype,e)||(vu[e]=t)}),vu),{chain:!1}),Fn.VERSION="4.17.21",Me(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Fn[t].placeholder=Fn}),Me(["drop","take"],function(t,e){Bn.prototype[t]=function(n){n=n===i?1:vn(pl(n),0);var r=this.__filtered__&&!e?new Bn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Bn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Me(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Bn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Me(["head","last"],function(t,e){var n="take"+(e?"Right":"");Bn.prototype[t]=function(){return this[n](1).value()[0]}}),Me(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Bn.prototype[t]=function(){return this.__filtered__?new Bn(this):this[n](1)}}),Bn.prototype.compact=function(){return this.filter(nu)},Bn.prototype.find=function(t){return this.filter(t).head()},Bn.prototype.findLast=function(t){return this.reverse().find(t)},Bn.prototype.invokeMap=Gr(function(t,e){return"function"==typeof t?new Bn(this):this.map(function(n){return Tr(n,t,e)})}),Bn.prototype.reject=function(t){return this.filter(Pa(oo(t)))},Bn.prototype.slice=function(t,e){t=pl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Bn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=pl(e))<0?n.dropRight(-e):n.take(e-t)),n)},Bn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Bn.prototype.toArray=function(){return this.take(p)},gr(Bn.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Fn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Fn.prototype[e]=function(){var e=this.__wrapped__,l=r?[1]:arguments,u=e instanceof Bn,c=l[0],s=u||Ya(e),d=function(t){var e=o.apply(Fn,xe([t],l));return r&&f?e[0]:e};s&&n&&"function"==typeof c&&1!=c.length&&(u=s=!1);var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,m=u&&!p;if(!a&&s){e=m?e:new Bn(this);var v=t.apply(e,l);return v.__actions__.push({func:fa,args:[d],thisArg:i}),new Un(v,f)}return h&&m?t.apply(this,l):(v=this.thru(d),h?r?v.value()[0]:v.value():v)})}),Me(["pop","push","shift","sort","splice","unshift"],function(t){var e=Tt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ya(i)?i:[],t)}return this[n](function(n){return e.apply(Ya(n)?n:[],t)})}}),gr(Bn.prototype,function(t,e){var n=Fn[e];if(n){var r=n.name+"";jt.call(Nn,r)||(Nn[r]=[]),Nn[r].push({name:e,func:n})}}),Nn[ki(i,2).name]=[{name:"wrapper",func:i}],Bn.prototype.clone=function(){var t=new Bn(this.__wrapped__);return t.__actions__=wi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=wi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=wi(this.__views__),t},Bn.prototype.reverse=function(){if(this.__filtered__){var t=new Bn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Bn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ya(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,l=o.end,u=l-a,c=r?l:a-1,s=this.__iteratees__,d=s.length,f=0,p=yn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return di(t,this.__actions__);var h=[];t:for(;u--&&f<p;){for(var m=-1,v=t[c+=e];++m<d;){var y=s[m],g=y.iteratee,_=y.type,b=g(v);if(2==_)v=b;else if(!b){if(1==_)continue t;break t}}h[f++]=v}return h},Fn.prototype.at=pa,Fn.prototype.chain=function(){return da(this)},Fn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=dl(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=Fo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Bn){var e=t;return this.__actions__.length&&(e=new Bn(this)),(e=e.reverse()).__actions__.push({func:fa,args:[Jo],thisArg:i}),new Un(e,this.__chain__)}return this.thru(Jo)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,qt&&(Fn.prototype[qt]=function(){return this}),Fn}();de._=hn,(r=function(){return hn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});const t={LIGHT:{AREA:"AUTO",TREND:"AUTO",TREND_OPACITY:"40",FONT:"#35383A",AREA_FILL_OPACITY:10,IMG_FILL_COLOR:"AUTO",IMG_FILL_OPACITY:100,SECONDARY_VALUE_FONT_COLOR:"#727679"},NIGHT:{AREA:"#313855",TREND:"#539CAE",TREND_OPACITY:"100",FONT:"#FFFFFF"},DESERT:{AREA:"#606060",TREND:"#FFD333",TREND_OPACITY:"100",FONT:"#FFFFFF"},OCEAN:{AREA:"#5181D7",TREND:"#83C8F4",TREND_OPACITY:"100",FONT:"#FFFFFF"}},e={INCREASE:"#20A76C",DECREASE:"#D9232E",CONSTANT:"#575A5D"},r={LIGHT:"#FFFFFF",NIGHT:"#4D4D4D"},i="#CA3D40",o="#A9ADB1";mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var a={METRICS:0,TREND:1,BREAK_BY:2},l={METRICS:0,COMPARE_WITH:1,BREAK_BY:2,TREND:3},u=function(t){return 0===t?a:l};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var c="N/A",s="1",d="referenceLineLabel",f="previousValueLabel",p="removeWidgetString",h="card-vertical-with-trend-graph",m="card-vertical-no-trend-graph",v="card-vertical-no-trend",y="card-horizontal-with-trend-graph",g="card-horizontal-no-trend-graph",_="card-horizontal-no-trend";function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function A(t,e,n){return(e=function(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var S={TEXT_CONTENT_TYPE:{ALL:"all",LABEL:"label",PRIMARY_VALUE:"primaryValue",SECONDARY_VALUE:"secondaryValue",INDICATOR:"indicator"},TREND_SHAPE:{AREA:"area",BAR:"bar",LINE:"line",NONE:"none"},AXIS_SCALE:{GLOBAL:"global",SYNCED_METRIC:"synced",SYNCED_ALL:"syncedAll"},CARD_ALIGNMENT:{LEFT:"left",MIDDLE:"middle",RIGHT:"right"},TREND_INDICATOR_SHAPE:{BADGE:"badge",ARROW:"arrow"},TREND_INDICATOR_VALUE_TYPE:{PERCENT:"percentValue",NUMERIC:"numericValue"},SELECTED_REFERENCE_LINE_SHAPE:{DOTTED_LINE_TYPE:"1pt dotted",DASHED_LINE_TYPE:"1pt dashed",THIN_LINE_TYPE:"1pt solid",THICK_LINE_TYPE:"2pt solid"},REFERENCE_LINE_DEFAULT_VALUES:{font:{fontFamily:"Open Sans",style:[!1,!1,!1,!1],size:9,color:"#35383A"},line:{shape:"1pt dashed",color:"#4D4D4D"}},LAYOUT_TYPES:{GRID:0,STACKED:1,HORIZONTAL:2,VERTICAL:3},TEXT_SIZE_TYPE:{UNIFIED:0,FIT_TO_CONTAINER:1,FIXED:2},FIRST_CARD_INDEX:1},M={fontFamily:"Open Sans",fontStyle:[!1,!1,!1,!1],fontSteps:0,fontSize:""},w={HIDEABLE_SECTION_TEMPLATE:{name:"hideableSectionTemplate",defaultValue:null},CARD_STYLE:{name:"cardStyle",defaultValue:0},HIDEABLE_SECTION_LAYOUT:{name:"hideableSectionLayout",defaultValue:null},LAYOUT_TYPE:{name:"layoutType",defaultValue:S.LAYOUT_TYPES.GRID},GRID_LAYOUT_PROPERTIES:{name:"gridLayoutProperties",defaultValue:null},GRID_COLUMN_COUNT:{name:"gridColumnCount",defaultValue:4},GRID_FIX_CARD_HEIGHT:{name:"gridFixCardHeight",defaultValue:null},GRID_FIX_CARD_HEIGHT_ENABLED:{name:"gridFixCardHeightEnabled",defaultValue:!1},STACKED_LAYOUT_PROPERTIES:{name:"stackedLayoutProperties",defaultValue:null},STACKED_AUTO_PLAY:{name:"stackedAutoPlay",defaultValue:!0},SHOW_METRIC_NAME:{name:"showMetricName",defaultValue:null},SECONDARY_VALUE_LAYOUT:{name:"secondaryValueLayout",defaultValue:null},SECONDARY_METRIC_NAME:{name:"secondaryMetricName",defaultValue:""},TREND_INDICATOR_LAYOUT:{name:"trendIndicatorLayout",defaultValue:null},TREND_INDICATOR_ENABLED:{name:"trendIndicatorEnabled",defaultValue:!0},TREND_INDICATOR_ENABLED_LABEL:{name:"trendIndicatorEnabledLabel",defaultValue:""},COMPARISON_INDICATOR_ENABLED:{name:"comparisonIndicatorEnabled",defaultValue:!0},COMPARISON_INDICATOR_ENABLED_LABEL:{name:"comparisonIndicatorEnabledLabel",defaultValue:""},TREND_INDICATOR_VALUE_TYPE:{name:"trendIndicatorValueType",defaultValue:S.TREND_INDICATOR_VALUE_TYPE.PERCENT},ENTIRE_CHART_SECTION:{name:"entireKPIChartSection",defaultValue:null},TEXT_SIZE_TYPE:{name:"textSizeType",defaultValue:S.TEXT_SIZE_TYPE.UNIFIED},SHAPE_SECTION:{name:"shapeSection",defaultValue:null},SHAPE_TYPE:{name:"shapeType",defaultValue:0},BACKGROUND_SHAPE_AREA_SECTION:{name:"backgroundShapeAreaSection",defaultValue:null},THRESHOLDS_SECTION:{name:"colorThresholdsSection",defaultValue:{thresholds:[]}},TEXT_CONTENT_TYPE:{name:"textContentType",defaultValue:S.TEXT_CONTENT_TYPE.ALL},TEXT_CONTENT_TYPE_COMPARISON:{name:"textContentTypeComparison",defaultValue:S.TEXT_CONTENT_TYPE.ALL},FONT_FAMILY:{name:"fontFamily",defaultValue:M.fontFamily},FONT_STYLE:{name:"fontStyle",defaultValue:[!1,!1,!1,!1]},FONT_STEPS:{name:"fontSteps",defaultValue:0},FONT_SIZE:{name:"fontSize",defaultValue:""},FONT_COLOR:{name:"fontColor",defaultValue:t.LIGHT.FONT},TEXT_ALL_FONT_OPTIONS:{name:"allFontOptions",defaultValue:E(E({},M),{},{fontColor:"INDETERMINATE"})},TEXT_LABEL_FONT_OPTIONS:{name:"labelFontOptions",defaultValue:E(E({},M),{},{fontColor:t.LIGHT.FONT,fontWeight:500})},TEXT_PRIMARY_VALUE_FONT_OPTIONS:{name:"primaryValueFontOptions",defaultValue:E(E({},M),{},{fontColor:t.LIGHT.FONT,fontStyle:[!0,!1,!1,!1]})},TEXT_SECONDARY_VALUE_FONT_OPTIONS:{name:"secondaryValueFontOptions",defaultValue:E(E({},M),{},{fontStyle:[!1,!1,!1,!1],fontColor:t.LIGHT.SECONDARY_VALUE_FONT_COLOR})},TEXT_INDICATOR_FONT_OPTIONS:{name:"indicatorFontOptions",defaultValue:E({},M)},AREA_FILL_COLOR:{name:"areaFillColor",defaultValue:t.LIGHT.AREA},AREA_FILL_COLOR_WITH_TREND:{name:"areaFillColorWithTrend",defaultValue:t.LIGHT.AREA},AREA_FILL_COLOR_WITH_NO_TREND:{name:"areaFillColorWithNoTrend",defaultValue:t.LIGHT.AREA},AREA_FILL_OPACITY:{name:"areaFillOpacity",defaultValue:t.LIGHT.AREA_FILL_OPACITY},TREND_FILL_COLOR:{name:"trendFillColor",defaultValue:t.LIGHT.TREND},TREND_FILL_OPACITY:{name:"trendFillOpacity",defaultValue:t.LIGHT.TREND_OPACITY},TREND_INCREASE_BACKGROUND_COLOR:{name:"trendIncreaseBackgroundColor",defaultValue:e.INCREASE},TREND_DECREASE_BACKGROUND_COLOR:{name:"trendDecreaseBackgroundColor",defaultValue:e.DECREASE},HIDEABLE_SECTION_TREND_SHAPE:{name:"hideableSectionTrendShape",defaultValue:null},TREND_SHAPE:{name:"trendShape",defaultValue:S.TREND_SHAPE.AREA},AXIS_SCALE:{name:"axisScale",defaultValue:S.AXIS_SCALE.GLOBAL},AXIS_SCALE_COMPARISON:{name:"axisScaleComparison",defaultValue:S.AXIS_SCALE.GLOBAL},EMPTY_VIZ_WARNING_MESSAGE:{name:"emptyVizWarningMessage",defaultValue:null},DATA_RETRIEVAL_PAUSED_MSG:{name:"dataRetrievalPausedMessage",defaultValue:null},VIZ_FIRST_TAB_SECTION:{name:"vizFirstTabSection",defaultValue:null},VIZ_SECOND_TAB_SECTION:{name:"vizSecondTabSection",defaultValue:null},CARD_ALIGNMENT:{name:"cardAlignment",defaultValue:""},TREND_INDICATOR_SHAPE_LAYOUT:{name:"trendIndicatorShapeLayout",defaultValue:""},TREND_INDICATOR_SHAPE:{name:"trendIndicatorShape",defaultValue:S.TREND_INDICATOR_SHAPE.ARROW},TREND_CONSTANT_BACKGROUND_COLOR:{name:"trendConstantBackgroundColor",defaultValue:e.CONSTANT},DOSSIER_FONT:{name:"dossierFont",defaultValue:""},HIDEABLE_SECTION_REFERENCE_LINES:{name:"hideableSectionReferenceLines",defaultValue:null},SELECTED_REFERENCE_LINE:{name:"selectedReferenceLine",defaultValue:""},REFERENCE_LINE_CONSTANT_VALUE:{name:"referenceLineConstantValue",defaultValue:""},REFERENCE_LINE_LABEL:{name:"referenceLineLabel",defaultValue:""},CREATED_REFERENCE_LINES:{name:"createdReferenceLines",defaultValue:{}},REFERENCE_LINE_CONSTANT_VALUE_WARNING:{name:"referenceLineConstantValueWarning",defaultValue:null},REFERENCE_LINES_SECTION:{name:"referenceLinesSection",defaultValue:null},TEXT_AND_FORM_DROPDOWN_WITH_REFERENCE_LINES:{name:"textAndFormDropdownWithReferenceLines",defaultValue:0},TEXT_AND_FORM_DROPDOWN_WITHOUT_REFERENCE_LINES:{name:"textAndFormDropdownWithoutReferenceLines",defaultValue:0},SELECTED_REFERENCE_LINE_TEXT_AND_FORM:{name:"selectedReferenceLineTextAndForm",defaultValue:""},SELECTED_REFERENCE_LINE_FONT_NAME:{name:"selectedReferenceLineFontName",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.font.fontFamily},SELECTED_REFERENCE_LINE_FONT_STYLE:{name:"selectedReferenceLineFontStyle",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.font.style},SELECTED_REFERENCE_LINE_FONT_SIZE:{name:"selectedReferenceLineFontSize",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.font.size},SELECTED_REFERENCE_LINE_FONT_COLOR:{name:"selectedReferenceLineFontColor",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.font.color},SELECTED_REFERENCE_LINE_COLOR:{name:"selectedReferenceLineColor",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.line.color},SELECTED_REFERENCE_LINE_SHAPE:{name:"selectedReferenceLineShape",defaultValue:S.REFERENCE_LINE_DEFAULT_VALUES.line.shape},ACTIVE_CARD_INDEX:{name:"activeCardIndex",defaultValue:S.FIRST_CARD_INDEX},SECONDARY_METRIC_NAME_LABEL:{name:"secondaryMetricNameLabel",defaultValue:null},SECONDARY_METRIC_NAME_LABEL_COMPARISON:{name:"secondaryMetricNameLabelComparison",defaultValue:null},TREND_INCREASE_BACKGROUND_COLOR_LABEL:{name:"trendIncreaseBackgroundColorLabel",defaultValue:null},TREND_DECREASE_BACKGROUND_COLOR_LABEL:{name:"trendDecreaseBackgroundColorLabel",defaultValue:null},HIDEABLE_SECTION_IMAGE:{name:"hideableSectionImage",defaultValue:null},IMAGE_PROP_GALLERY:{name:"gallery",defaultValue:null},IMAGE_PROP_BROWSE:{name:"browse",defaultValue:null},IMAGE_PROP_EDIT_URL:{name:"editUrl",defaultValue:null},IMAGE_PROP_NAME:{name:"imageName",defaultValue:""},IMAGE_PROP_URL:{name:"imageSrc",defaultValue:""},IMAGE_FILL_COLOR:{name:"imgFillColor",defaultValue:t.LIGHT.IMG_FILL_COLOR},IMAGE_FILL_OPACITY:{name:"imgFillOpacity",defaultValue:t.LIGHT.IMG_FILL_OPACITY},IMAGE_SHAPE_FILL_COLOR:{name:"imgShapeFillColor",defaultValue:"AUTO"},IMAGE_SHAPE_FILL_OPACITY:{name:"imgShapeFillOpacity",defaultValue:100},IMAGE_SEARCH_ICON:{name:"searchIcon",defaultValue:null},SELECTED_CARD_IMAGE:{name:"selectedCardImage",defaultValue:null},ICON_SHAPE_ENABLED:{name:"iconShapeEnabled",defaultValue:!0},ICON_SHAPE_RADIUS:{name:"iconShapeRadius",defaultValue:50},HIDEABLE_SECTION_DESCRIPTION:{name:"hideableSectionDescription",defaultValue:null},METRIC_TOOLTIP_ENABLED:{name:"metricTooltipEnabled",defaultValue:!0},SELECTED_CARD_APPEARANCE:{name:"selectedCardAppearance",defaultValue:null},CARD_PADDING_SECTION:{name:"cardPaddingSection",defaultValue:null},CARD_PADDING:{name:"cardPadding",defaultValue:8}};function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var T={};function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}Object.entries(w).forEach(function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1].name;T[i]=o}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var O="properties",D=[O],x=function(t){"object"===N(t)?Object.values(t).forEach(function(t){x(t)}):Array.isArray(t)?t.forEach(function(t){x(t)}):D.push(t)};function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e,n){return(e=function(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}x(T),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var L=P(P(P(P(P(P({},h,{LABEL:"max(7cqmin, 8px)",PRIMARY_VALUE:"max(16cqmin, 12px)",SECONDARY_VALUE:"max(6.5cqmin, 8px)",TREND_INDICATOR:"max(6.5cqmin, 8px)"}),y,{LABEL:"max(min(9cqh, 6cqw), 8px)",PRIMARY_VALUE:"max(min(19.25cqh, 14.25cqw), 12px)",SECONDARY_VALUE:"max(8cqmin, 8px)",TREND_INDICATOR:"max(7.5cqmin, 8px)"}),_,{LABEL:"max(12cqmin, 8px)",PRIMARY_VALUE:"max(26cqmin, 12px)",SECONDARY_VALUE:null,TREND_INDICATOR:null}),v,{LABEL:"max(10cqmin, 8px)",PRIMARY_VALUE:"max(22.5cqmin, 12px)",SECONDARY_VALUE:null,TREND_INDICATOR:null}),m,{LABEL:"max(8cqmin, 8px)",PRIMARY_VALUE:"max(20cqmin, 12px)",SECONDARY_VALUE:"max(8cqmin, 8px)",TREND_INDICATOR:"max(7.5cqmin, 8px)"}),g,{LABEL:"max(10cqmin, 8px)",PRIMARY_VALUE:"max(24cqmin, 12px)",SECONDARY_VALUE:"max(11cqmin, 8px)",TREND_INDICATOR:"max(7.5cqmin, 8px)"});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.requiresCls("mstrmojo.css","mstrmojo.VisUtility","mstrmojo.HTMLSanitizeUtil");var R=function(t,e,n){var r=n.cardWidth,i=n.cardHeight,o=mstrmojo.css.getComputedStyle(t),a="width"===e||"maxWidth"===e?parseFloat(r):parseFloat(i);return function(t,e){if("none"!==t)return t.indexOf("px")>0?parseFloat(t):e*parseFloat(t)/100}(o[e],a-2)},k=function(t,e){return e?"max(calc("+t+" + "+e+"px), 0px)":t},F=n(486);function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function z(t,e,n){return(e=function(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||W(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function K(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=W(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function W(t,e){if(t){if("string"==typeof t)return H(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var G=function(t){if(!Array.isArray(t))return 0;var e,n=new Set,r=K(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;null!=i&&i.id&&n.add(i.id)}}catch(t){r.e(t)}finally{r.f()}return n.size},$=function(t,e){return t.zonesModel.getDropZoneObjectsByIndex(e).length>0},q=function(t,e){return t.zonesModel.getDropZoneObjectsByIndex(e).length},Q=function(t){var e,n=u(t.KPIType);return null===(e=t.zonesModel.getDropZoneObjectsByIndex(n.BREAK_BY))||void 0===e?void 0:e[0]},Z=function(t){var e=t.partialValue,n=t.totalValue;return mstrmojo.num.format(4,1,"",Math.abs(e/n))},X=function(t,e,n,r){var i,o=t.fontFamily,a=t.fontColor,l=t.fontSize,u=t.fontStyle,c=J(e),s=e.getProperty(w.DOSSIER_FONT.name),d=!1;s&&s!==c&&(d=!0);var f,p,h,m,v,y,g=d?c:o,_=e.isIOS&&"Open Sans"===g?"Helvetica":g,b=(null==L||null===(i=L[n])||void 0===i?void 0:i[r])||"16px";return l&&"string"==typeof l&&l.indexOf("px")>0?b=l:l&&(b="".concat(et(l),"px")),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(e){z(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({fontSize:b,fontFamily:_,color:a},(p=(f=U(u,4))[0],h=f[1],m=f[2],v=f[3],y=[],m&&y.push("underline"),v&&y.push("line-through"),{fontWeight:p?"bold":"normal",fontStyle:h?"italic":"normal",textDecoration:y.join(" ")||"none currentcolor solid"}))},J=function(t){var e,n=null===(e=t.controller.model)||void 0===e?void 0:e.defmts.find(function(t){return"Text"===t.n});return(null==n?void 0:n.props.FormattingFont.Name)||t.getProperty(w.FONT_FAMILY.name)},tt=function(t,e){var n=e<=1?e:e/100;return"rgba(".concat(parseInt(t.slice(1,3),16),",").concat(parseInt(t.slice(3,5),16),",").concat(parseInt(t.slice(5,7),16),", ").concat(n,")")},et=function(t){return 1.328147*t},nt=function(t){var e=t.container,n=t.maxTextWidth,r=t.textData,i=t.fontSize,o=t.fontStyle,a=r.label,l=r.value,u=r.connector,c=a+u+l;if(e.title=c,e.style.fontSize="".concat(i,"px"),""===a)return e.textContent=l,{truncatedLabelAndValue:l,truncatedLabel:""};var d,f,p="...".concat(u);if(f=a[0]+p,dt(d+s,o,o.bonus)>=n)e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.textContent=l,f="";else{for(var h=2;h<a.length;h++)if(d=a.substring(0,h)+p+l,dt(d+s,o,o.bonus)>=n){f=a.substring(0,h-1)+p;break}d=h===a.length?a+u+l:f+l,e.textContent=d}return{truncatedLabelWithValue:e.textContent,truncatedLabel:f}},rt=function(t){return.75292857248934*t},it=function(t,e){var n=t.textContent,r=ot(t,e);return mstrmojo.VisUtility.measureTextSize(n+s,r,0)},ot=function(t,e){var n=mstrmojo.css.getComputedStyle(t);return{fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontSize:"".concat(parseInt(e),"px"),fontWeight:n.fontWeight,lineHeight:1,bonus:parseInt(n.paddingLeft)+parseInt(n.paddingRight)}},at=function(t,e,n){t.forEach(function(t){t.style[e]=n})},lt=function(t){setTimeout(function(){var e,n;null===(e=(n=window).syncDossierFormatPanel)||void 0===e||e.call(n,t)},0)},ut=function(t){var e=u(t.KPIType);if($(t,e.BREAK_BY)&&t.dataInterface.data.gsi.mx.length){var n,r,i,o=null===(n=Q(t))||void 0===n?void 0:n.id,a=null===(r=t.dataInterface.data.gts)||void 0===r||null===(i=r.row)||void 0===i?void 0:i.find(function(t){return t.id===o});return!!a&&(0===t.KPIType?G(a.es)*t.dataInterface.data.gsi.mx.length:G(a.es))>100}return!1},ct=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=t.replace("#",""),r=3===n.length?n.split("").map(function(t){return t+t}).join(""):n,i=U([0,2,4].map(function(t){return parseInt(r.substr(t,2),16)}),3),o=i[0],a=i[1],l=i[2],u=parseFloat(e.toString().replace("%",""))/100;return"rgba(".concat(o,", ").concat(a,", ").concat(l,", ").concat(u,")")},st=/images\/material-symbols\/400\/rounded\//,dt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>5?arguments[5]:void 0,i=document.createElement("canvas"),o=i.getContext("2d"),a=e.fontSize||"16px",l=e.fontFamily||"Arial",u=e.fontWeight||"normal",c=e.fontStyle||"normal";o.font="".concat(c," ").concat(u," ").concat(a," ").concat(l);var s=t;r||(s=t.replace(/\s+/g," "));var d=o.measureText(s).width;return d+=n,i.remove(),Math.ceil(d)},ft=function(t,e,n,r,i){var o,a,l,u,c,s,d,f,p=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6?arguments[6]:void 0,m=e.getBoundingClientRect().width,v=t.querySelector(".card__secondary-value"),y=t.querySelector(".card__trend-indicator"),g=Math.min(.08*m,30),_="vertical-card"===(null==n||null===(o=n.cardProperties)||void 0===o?void 0:o.cssModifiers).cardDirection?m-2*g:m-2*g-((null==y?void 0:y.clientWidth)||0),b=null===(a=e.querySelector(".card__secondary-value"))||void 0===a?void 0:a.secondaryValueData;if(0!==(null==n||null===(l=n.properties)||void 0===l||null===(u=l.secondaryValueFontOptions)||void 0===u?void 0:u.fontSteps)){var I=k(getComputedStyle(v).fontSize,n.properties.secondaryValueFontOptions.fontSteps);!h&&v.style.setProperty("font-size",I)}if(0!==(null==n||null===(c=n.properties)||void 0===c||null===(s=c.indicatorFontOptions)||void 0===s?void 0:s.fontSteps)){var E=k(getComputedStyle(y).fontSize,n.properties.indicatorFontOptions.fontSteps);!h&&y.style.setProperty("font-size",E)}var A=nt({container:v,maxTextWidth:_,textData:{label:null!==(d=null==b?void 0:b.labelTitle)&&void 0!==d?d:"",value:null!==(f=null==b?void 0:b.labelValue)&&void 0!==f?f:"",connector:": "},fontSize:parseFloat(getComputedStyle(v).fontSize),fontStyle:ot(v,parseFloat(getComputedStyle(v).fontSize))}).truncatedLabelWithValue;if(v.textContent=A,p){var S,M,w,C,T,N;if(0!==(null==n||null===(S=n.properties)||void 0===S||null===(M=S.secondaryValueFontOptions)||void 0===M?void 0:M.fontSteps)){var O=k(i.minSecondaryFontSize+"px",n.properties.secondaryValueFontOptions.fontSteps);!h&&v.style.setProperty("font-size",O)}if(0!==(null==n||null===(w=n.properties)||void 0===w||null===(C=w.indicatorFontOptions)||void 0===C?void 0:C.fontSteps)){var D=k(i.minTrendIndicatorFontSize+"px",n.properties.indicatorFontOptions.fontSteps);!h&&y.style.setProperty("font-size",D)}var x=nt({container:v,maxTextWidth:_,textData:{label:null!==(T=null==b?void 0:b.labelTitle)&&void 0!==T?T:"",value:null!==(N=null==b?void 0:b.labelValue)&&void 0!==N?N:"",connector:": "},fontSize:parseFloat(i.minSecondaryFontSize+"px"),fontStyle:ot(v,i.minSecondaryFontSize+"px")}).truncatedLabelWithValue;!h&&(v.textContent=x)}else i.minSecondaryFontSize=Math.min(i.minSecondaryFontSize,parseFloat(getComputedStyle(v).fontSize)),i.minTrendIndicatorFontSize=Math.min(i.minTrendIndicatorFontSize,parseFloat(getComputedStyle(y).fontSize))};function pt(){var t,e,n,r;return!(null!==(t=mstrmojo)&&void 0!==t&&null!==(e=t.imageUtils)&&void 0!==e&&null!==(n=e.isInStrictImageMode)&&void 0!==n&&n.call(e)||null===(r=mstrApp)||void 0===r||!r.enableEmbeddedImages)}var ht=function(t){var e=new Uint8Array(t),n=e.length;if(n<3)return null;var r=e[0],i=e[1],o=e[2],a="image/png";255==r&&216==i?a="image/jpeg":71==r&&73==i&&70==o?a="image/gif":82===r&&73===i?a="image/webp":66===r&&77===i&&(a="image/bmp");for(var l="",u=0;u<n;u++)l+=String.fromCharCode(e[u]);return"data:"+a+";base64,"+window.btoa(l)};function mt(t,e){return"transparent"===t||null==e||e<0||e>=100?t:mstrmojo.color.rgb2rgba(t,e)}function vt(t,e,n){var r=[];return e&&t&&"object"===Y(t)?Array.isArray(t)||"object"!==Y(t)||void 0===t[e]||void 0!==n&&t[e]!==n?(Array.isArray(t)?t.forEach(function(t){var i=vt(t,e,n);r.push.apply(r,B(i))}):"object"===Y(t)&&Object.values(t).forEach(function(t){var i=vt(t,e,n);r.push.apply(r,B(i))}),r):[t]:[]}function yt(t,e){var n=t*Math.PI/180;return{x:Math.round(e*Math.cos(n)),y:Math.round(e*Math.sin(n))}}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),T.EMPTY_VIZ_WARNING_MESSAGE,T.DATA_RETRIEVAL_PAUSED_MSG;var gt=function(t){var e=u(t.KPIType);return t.isComparisonKPI&&$(t,e.COMPARE_WITH)};function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var bt=function(t,e){for(var n={},r=function(){var r,a,l=(r=o[i],a=1,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(r,a)||function(t,e){if(t){if("string"==typeof t)return _t(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],c=t[l],s=u(e.KPIType);switch(l){case w.SHOW_METRIC_NAME.name:if(null===c){var p=$(e,s.BREAK_BY),h=q(e,s.METRICS)>1;c=!p||h,e.showMetricName=c,lt([l])}break;case w.CARD_ALIGNMENT.name:if(!c){var m=$(e,s.TREND);c=m?S.CARD_ALIGNMENT.LEFT:S.CARD_ALIGNMENT.MIDDLE,e.cardAlignment=c,lt([l])}break;case w.SECONDARY_METRIC_NAME.name:var v,y,g=e.isComparisonKPI,_=e.isRealTime,b=e.timestampIndex,I=e.timeFilter,E=e.dataInterface,A=e.data,M=null==E||null===(v=E.data)||void 0===v||null===(y=v.wdgstrs)||void 0===y?void 0:y[f];if(c&&_&&g&&($(e,s.COMPARE_WITH)||(c=null)),M&&!e.labelsEditState[l]&&(c=M,n[l]=c),!c){var C=g&&$(e,s.COMPARE_WITH),N=$(e,s.TREND);if(C){var O=_?E.data.gsi.mx[1].n:E.getColHeaders(0).getHeader(1).getName();c="".concat(mstrmojo.descP("IMGKPI.","39","Compare with")," ").concat(O)}else if(N)if(_)if(I.isMoreDataThanFilter)c="".concat(I.filterLabel," ago");else{var D=new Date(A[0].cells[b].v).toTimeString().split(" ").shift();c="Compare to ".concat(D)}else c="".concat(mstrmojo.descP("IMGKPI.","36","Previous")," ").concat(e.dataInterface.getRowTitles().getTitle(0).getName());e.secondaryMetricName=c,lt([l])}break;case w.CREATED_REFERENCE_LINES.name:if(!c)break;var x=function(t,e){var n=e[T.SELECTED_REFERENCE_LINE];if(!n)try{var r,i,o=null===(r=t.dataInterface.getColTitles().titles[0])||void 0===r?void 0:r.es.map(function(t){return{n:t.n,dssid:t.oid}});null!=o&&o.find(function(t){return t.dssid===n})&&!t.isComparisonKPI||(n=null==o||null===(i=o[0])||void 0===i?void 0:i.dssid)}catch(t){}return n}(e,t),j=w.REFERENCE_LINE_LABEL.name;Object.keys(c).forEach(function(r){var i=function(t,e,n){var r,i;return null===(r=t.model.data.gsi.mx.find(function(t){return t.did===e}))||void 0===r||null===(i=r.wdgstrs)||void 0===i?void 0:i[n]}(e,r,d);i&&!e.labelsEditState[r]&&(c[r].label=i,n[l]=c,x===r&&(t[j]=i,n[j]=i))})}t[l]=c},i=0,o=Object.entries(t);i<o.length;i++)r();return Object.keys(n).length&&function(t,e){var n=JSON.parse(t.getProperty(O));Object.keys(e).forEach(function(t){n[t]=e[t]}),t.getProperties()[O]=JSON.stringify(n)}(e,n),t};function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function At(t,e,n){return(e=function(t){var e=function(t){if("object"!=It(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});function St(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||Mt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){if(t){if("string"==typeof t)return wt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Ct=function(t){if(!t)return!0;var e=t.color,n=t.range;return!(e||null!=n&&n.value)},Tt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return t.forEach(function(t){var r=t.nfs,i=t.id,o=(r||"General").split(";").map(function(t){return function(t){var e,n=["black","blue","cyan","green","magenta","red","white","yellow"],r={range:{check:function(t){return!0}},color:void 0,formatString:t.slice(t.lastIndexOf("]")+1)},i=(e=t.matchAll(/\[([A-Za-z0-9<>=-]+)\]/g),function(t){if(Array.isArray(t))return wt(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||Mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t){return t[1]});return i&&i.forEach(function(t){if(n.includes(t.toLowerCase()))r.color=t.toLowerCase();else{var e=Number.parseFloat(t.split(/[^0-9-,.]/).join(""));r.range.value=e,0===t.search(">")?(r.range.compareType=0,1===t.search("=")?r.range.check=function(t){return t>=e}:r.range.check=function(t){return t>e}):0===t.search("<")?(r.range.compareType=1,1===t.search("=")?r.range.check=function(t){return t<=e}:r.range.check=function(t){return t<e}):0===t.search("=")&&(r.range.check=function(t){return t===e})}}),r}(t)}),a=i;!function(t){t.length>1&&void 0===t[0].range.value&&(t[0].range={value:0,check:function(t){return t>=0}},t[1]&&void 0===t[1].range.value&&(t[1].range={value:0,check:function(t){return t<0}}),t[2]&&void 0===t[2].range.value&&(t[2].range={value:0,check:function(t){return 0===t}},t[0].range={check:function(t){return t>0}}))}(o),o.forEach(function(t){t.rules=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=mstrmojo.locales.number,r=n.THOUSANDSEPARATOR,i={thousandSeparator:"",decimalSeparator:n.DECIMALSEPARATOR,minimalIntegerLength:1,maximalFractionLength:0,minimalFractionLength:0,divisor:1,prefix:"",suffix:"",shouldLeadingZeroBeOmitted:!1},o=/"(.*?)"/g.exec(t);if(o){var a=t.search(/[#0]/);if(0!==o.length){if(o.index<a){var l=St(o,2);i.prefix=l[1]}else{var u=St(o,2);i.suffix=u[1]}o.forEach(function(e){t=t.replace(e,"")})}}for("%"===t.slice(-1)&&(i.divisor*=.01,i.suffix+=e?"%":"pp",t=t.slice(0,-1));","===t.slice(-1);)i.divisor*=1e3,t=t.slice(0,-1);t.includes(",")&&(i.thousandSeparator=r),t.includes("(")&&t.includes(")")?(i.prefix="(".concat(i.prefix),i.suffix+=")","%)"===t.slice(-2)&&(t=t.slice(0,-2),t+=")",i.divisor*=.01,i.suffix+="pp")):t.includes("-")&&(i.prefix="-".concat(i.prefix));var c=t.split(".");if(2===c.length){var s,d,f=St(c,2),p=f[0],h=f[1],m=p.match(/[0]/g);m&&(i.minimalIntegerLength=m.length),i.maximalFractionLength=(null===(s=h.match(/[0#]/g))||void 0===s?void 0:s.length)||0,i.minimalFractionLength=(null===(d=h.match(/[0]/g))||void 0===d?void 0:d.length)||0,1===p.length&&"#"===p&&(i.shouldLeadingZeroBeOmitted=!0)}return i}(t.formatString,e)}),n[a]=o}),n},Nt=function(t,e,n){var r=Number.isNaN(Number(t))?0:Number(t);return function(t,e){var n=e.color,r=e.rules,i=r.maximalFractionLength,o=r.minimalIntegerLength,a=r.minimalFractionLength,l=r.thousandSeparator,u=r.decimalSeparator,c=r.prefix,s=r.suffix,d=r.shouldLeadingZeroBeOmitted,f=r.divisor,p=t<0,h=Math.abs(t)/f,m=function(t,e,n){if(e===n)return e;var r=parseFloat(Number(t).toFixed(n)).toString().split(".")[1];return r&&r.length>e?r.length:e}(t,a,i),v=h.toFixed(m);if(d&&h<1)v=v.slice(1);else{var y=Math.pow(10,o);h<y-1&&(v=(parseFloat(v)+y).toFixed(m).slice(1))}var g=v.split(".");return g[0]=g[0].replace(/\B(?=(\d{3})+(?!\d))/g,l),v=g.join(u),!p||r.prefix.includes("(")||r.prefix.includes("-")||(v="-".concat(v)),{formattedValue:"".concat(c).concat(v).concat(s),color:n}}(r,function(t,e){var n=e.filter(function(e){return e.range.check(t)});return n.length>1?function(t,e){if(t>=0)return!1;if(e.length<=1)return!1;var n=e.filter(function(t){return!Ct(t)});return n.length>0&&n.every(function(t){var e;return 1===(null===(e=t.range)||void 0===e?void 0:e.compareType)})}(t,n)?n.find(function(t){return!Ct(t)}):n.reduce(function(t,e){return e.range.value&&t.range.value?e.range.value>t.range.value?e:t:e.range.value?e:t}):n[0]}(r,n[e]))};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Dt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach(function(e){Pt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Pt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var kt=function(t){if(!Array.isArray(t)||0===t.length)return null;var e=t.map(function(t){return t.name}).join(" "),n=t.map(function(t){return t.attributeSelector.n}).join(" "),r=t[0];return jt(jt({},r),{},{name:e,attributeSelector:jt(jt({},r.attributeSelector),{},{n})})},Ft=function(t,e){var n=e.isComparisonKPI,r=e.dataInterface.data.realtimeQueryInfo.columns,i={};r.forEach(function(t,e){i[t.id]=e});var o=-1,a=[],l=[],c={},s={},d=u(e.KPIType);if(e.zonesModel.getDropZoneObjectsByIndex(d.TREND).forEach(function(e){var n=i[e.id];o=n,c[e.id]=t[n].v,s[e.id]={}}),e.zonesModel.getDropZoneObjectsByIndex(d.BREAK_BY).forEach(function(e){var n=i[e.id];o=n,c[e.id]=t[n].v,s[e.id]={}}),o>=0){var f=r[o].id,p=t[o].v,h="".concat(p,";").concat(f);a.push({name:p,attributeSelector:{n:p,tid:f,eid:h,isSelectAttr:!0}})}var m,v=e.zonesModel.getDropZoneObjectsByIndex(d.METRICS);return n&&gt(e)&&v.push(null===(m=e.zonesModel)||void 0===m?void 0:m.getDropZoneObjectsByIndex(d.COMPARE_WITH)[0]),e.getDocModel(),v.forEach(function(n,r){var o=i[n.id];c[n.id]=Nt(t[o].v,n.id,e.metricFormattingRules).formattedValue;var a=e.dataInterface.data.gsi.mx[r].n;l.push({v:c[n.id],rv:t[o].v,id:n.id,name:a})}),{headers:a,values:l,idValueMapping:c,metricSelector:s}},Vt=function(t){var e=t.dataInterface.data.realtimeQueryInfo.columns,n=[];return e.forEach(function(t){-1===t.bfid&&n.push(t.id)}),Object.keys(n).reduce(function(t,e){return t[n[e]]=parseInt(e),t},{})},zt=function(t,e,n){var r=e.colorThresholdsSection.thresholds,i=Dt(t).sort(function(t,e){return t.primaryValue.raw-e.primaryValue.raw}),o=Dt(t).sort(function(t,e){return e.primaryValue.raw-t.primaryValue.raw}),a=r.map(function(t){t.skip=!1;var e=t.advancedThreshold;if(e&&2===e.thresholdType){var n,r=null!==(n=e.rank)&&void 0!==n?n:"0",a=2===e.rankOption?i:o,l=function(t,e){return"%"===t.slice(-1)?Number(t.slice(0,-1))*e*.01:Number(t)}(r,a.length);if(l<1)return jt(jt({},t),{},{skip:!0});var u=function(t,e,n){var r=[];return t.forEach(function(t,n){if(n<=e-1){var i=t.trendChartData;r.push(i[i.length-1].raw)}}),2===n?{minValue:r[0],maxValue:r[r.length-1]}:{minValue:r[r.length-1],maxValue:r[0]}}(a,l,e.rankOption),c=u.minValue,s=u.maxValue;return jt(jt({},t),{},{min:c,max:s})}return t.min||t.max?t:jt(jt({},t),{},{min:0,max:0})}),l=function(t){return"%"==="".concat(t).slice(-1)?.01*Number(t.slice(0,-1)):t},u=function(e,r){var i=Pt(Pt(Pt(Pt(Pt(Pt(Pt({},2,null),3,null),4,null),5,null),6,null),7,null),8,null);return a.filter(function(i){var o=i.enabled,a=i.skip,u=i.advancedThreshold;if(!o)return!1;if(u&&3===u.thresholdType)return function(e,r){if(!n)return!1;var i=function(e){return Dt(t).filter(function(t){if(t.indicator){var n=Math.sign(t.indicator.differenceBetweenPrimaryAndSecondary);return 1===e?n>0:n<0}return!1})}(e);return 0!==i.length&&i.some(function(t){return t.graphicModel.cardId===r})}(u.indicator,r);var c=parseFloat(l(i.min)||Number.NEGATIVE_INFINITY),s=parseFloat(l(i.max)||Number.POSITIVE_INFINITY);return c<=e&&s>=e&&!a}).reverse().forEach(function(t){var e=t.advancedThreshold,n=t.color;if(e){var r=e.selector,o=e.colors;1===r&&function(t,e,n,r){var i,o,a,l,u=void 0===n[1]||"INDETERMINATE"===n[1]?null:n[1];t[2]=jt(jt({},e),{},{color:null!==(i=null!=u?u:n[2])&&void 0!==i?i:r}),t[3]=jt(jt({},e),{},{color:null!==(o=null!=u?u:n[3])&&void 0!==o?o:r}),t[4]=jt(jt({},e),{},{color:null!==(a=null!=u?u:n[4])&&void 0!==a?a:r}),t[5]=jt(jt({},e),{},{color:null!==(l=null!=u?u:n[5])&&void 0!==l?l:r})}(i,t,void 0===o?{}:o,n),i[r]=t}else i[3]=t}),i};return t.map(function(t){var e=t.trendChartData,n=t.graphicModel,r=e[e.length-1].raw;return t.thresholdTarget=u(r,n.cardId),t})},Ut=function(t,e,n,r){var i=new mstrmojo.customviz.GraphicModel,o=function(t,e){var n={};return Object.keys(t).filter(function(t){return e.includes(t)}).forEach(function(e){n[e]=t[e]}),n}(e,[].concat(Dt(n),[r]));return i.setSelector(t,t.isSelectAttr),i.idValueMapping=o,i},Bt=function(t,e,n,r,i){n.cardsIds||(n.cardIds=[]);var o=new mstrmojo.customviz.GraphicModel;return t?(o.setSelector(t,t.isSelectAttr),o.setCustomProperties({metricId:e,cardId:"".concat(n.id,"-").concat(e,"-").concat(t.eid)}),o.setGroupOptions([r.headers[0]]),o.setDrillOptions(t,[{dropZoneIndex:i.BREAK_BY,keepParent:!1}]),n.cardIds.push("".concat(n.id,"-").concat(e,"-").concat(t.eid))):(n.metricId=e,o.setCustomProperties({metricId:e,cardId:"".concat(n.id,"-").concat(e)}),n.cardIds.push("".concat(n.id,"-").concat(e))),o.idValueMapping=Kt(r.headers),o},Yt=function(t){return t.headers.some(function(t){var e;return null===(e=t.headerObj)||void 0===e?void 0:e.h.stt})},Kt=function(t){return Object.fromEntries(t.map(function(t){var e=t.attributeSelector;return[e.tid,e.n]}).slice(0,-1))};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Wt={SANITIZE_NAMED_PROPS:!0,RETURN_DOM_FRAGMENT:!0,ADD_ATTR:["target"]};function Ht(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var $t=function(t){var e,n,r,i,o,a=t.tag,l=void 0===a?"div":a,u=t.classes,c=void 0===u?[]:u,s=t.content,d=void 0===s?"":s,f=t.style,p=void 0===f?{}:f,h=t.otherAttributes,m=void 0===h?{}:h,v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=document.createElement(l);((e=g.classList).add.apply(e,function(t){if(Array.isArray(t))return Gt(t)}(o=c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||Ht(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),!mstrmojo.HTMLSanitizeUtil.shouldEncodeHtmlContent()&&v&&y)?n=function(t,e){var n="",r=function(t){"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener noreferrer"),n+=t.outerHTML},i=function(t){var e;t.nodeType===Node.ELEMENT_NODE?"IMG"===(e=t).tagName?n+="":"A"===e.tagName?r(e):e.childNodes?e.childNodes.forEach(i):n+=e.textContent:o(t)},o=function(t){n+=e?mstrmojo.string.encodeHtmlString(t.textContent):t.textContent};return t instanceof Node&&(null==t||t.childNodes.forEach(i)),n}((r=d,i=Wt,window.DOMPurify?DOMPurify.sanitize(r,i):r),v):n=v?mstrmojo.string.encodeHtmlString(d):d;return g.innerHTML=n,Object.assign(g.style,p),Object.entries(m).forEach(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],r=e[1];g.setAttribute(n,mstrmojo.string.encodeHtmlString(r))}),g};function qt(){}function Qt(t){return null==t?qt:function(){return this.querySelector(t)}}function Zt(){return[]}function Xt(t){return null==t?Zt:function(){return this.querySelectorAll(t)}}function Jt(t){return function(){return this.matches(t)}}function te(t){return function(e){return e.matches(t)}}var ee=Array.prototype.find;function ne(){return this.firstElementChild}var re=Array.prototype.filter;function ie(){return Array.from(this.children)}function oe(t){return new Array(t.length)}function ae(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function le(t,e,n,r,i,o){for(var a,l=0,u=e.length,c=o.length;l<c;++l)(a=e[l])?(a.__data__=o[l],r[l]=a):n[l]=new ae(t,o[l]);for(;l<u;++l)(a=e[l])&&(i[l]=a)}function ue(t,e,n,r,i,o,a){var l,u,c,s=new Map,d=e.length,f=o.length,p=new Array(d);for(l=0;l<d;++l)(u=e[l])&&(p[l]=c=a.call(u,u.__data__,l,e)+"",s.has(c)?i[l]=u:s.set(c,u));for(l=0;l<f;++l)c=a.call(t,o[l],l,o)+"",(u=s.get(c))?(r[l]=u,u.__data__=o[l],s.delete(c)):n[l]=new ae(t,o[l]);for(l=0;l<d;++l)(u=e[l])&&s.get(p[l])===u&&(i[l]=u)}function ce(t){return t.__data__}function se(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function de(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ae.prototype={constructor:ae,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var fe="http://www.w3.org/1999/xhtml";const pe={svg:"http://www.w3.org/2000/svg",xhtml:fe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function he(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),pe.hasOwnProperty(e)?{space:pe[e],local:t}:t}function me(t){return function(){this.removeAttribute(t)}}function ve(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ye(t,e){return function(){this.setAttribute(t,e)}}function ge(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _e(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function be(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ie(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ee(t){return function(){this.style.removeProperty(t)}}function Ae(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Se(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Me(t,e){return t.style.getPropertyValue(e)||Ie(t).getComputedStyle(t,null).getPropertyValue(e)}function we(t){return function(){delete this[t]}}function Ce(t,e){return function(){this[t]=e}}function Te(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ne(t){return t.trim().split(/^|\s+/)}function Oe(t){return t.classList||new De(t)}function De(t){this._node=t,this._names=Ne(t.getAttribute("class")||"")}function xe(t,e){for(var n=Oe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function je(t,e){for(var n=Oe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Pe(t){return function(){xe(this,t)}}function Le(t){return function(){je(this,t)}}function Re(t,e){return function(){(e.apply(this,arguments)?xe:je)(this,t)}}function ke(){this.textContent=""}function Fe(t){return function(){this.textContent=t}}function Ve(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ze(){this.innerHTML=""}function Ue(t){return function(){this.innerHTML=t}}function Be(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ye(){this.nextSibling&&this.parentNode.appendChild(this)}function Ke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function We(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fe&&e.documentElement.namespaceURI===fe?e.createElement(t):e.createElementNS(n,t)}}function He(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ge(t){var e=he(t);return(e.local?He:We)(e)}function $e(){return null}function qe(){var t=this.parentNode;t&&t.removeChild(this)}function Qe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ze(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xe(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Je(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function tn(t,e,n){var r=Ie(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function en(t,e){return function(){return tn(this,t,e)}}function nn(t,e){return function(){return tn(this,t,e.apply(this,arguments))}}De.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var rn=[null];function on(t,e){this._groups=t,this._parents=e}function an(){return new on([[document.documentElement]],rn)}on.prototype=an.prototype={constructor:on,select:function(t){"function"!=typeof t&&(t=Qt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,l=e[i],u=l.length,c=r[i]=new Array(u),s=0;s<u;++s)(o=l[s])&&(a=t.call(o,o.__data__,s,l))&&("__data__"in o&&(a.__data__=o.__data__),c[s]=a);return new on(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):Xt(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,l=e[o],u=l.length,c=0;c<u;++c)(a=l[c])&&(r.push(t.call(a,a.__data__,c,l)),i.push(a));return new on(r,i)},selectChild:function(t){return this.select(null==t?ne:function(t){return function(){return ee.call(this.children,t)}}("function"==typeof t?t:te(t)))},selectChildren:function(t){return this.selectAll(null==t?ie:function(t){return function(){return re.call(this.children,t)}}("function"==typeof t?t:te(t)))},filter:function(t){"function"!=typeof t&&(t=Jt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],l=a.length,u=r[i]=[],c=0;c<l;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new on(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ce);var n,r=e?ue:le,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,l=new Array(a),u=new Array(a),c=new Array(a),s=0;s<a;++s){var d=i[s],f=o[s],p=f.length,h=se(t.call(d,d&&d.__data__,s,i)),m=h.length,v=u[s]=new Array(m),y=l[s]=new Array(m);r(d,f,v,y,c[s]=new Array(p),h,e);for(var g,_,b=0,I=0;b<m;++b)if(g=v[b]){for(b>=I&&(I=b+1);!(_=y[I])&&++I<m;);g._next=_||null}}return(l=new on(l,i))._enter=u,l._exit=c,l},enter:function(){return new on(this._enter||this._groups.map(oe),this._parents)},exit:function(){return new on(this._exit||this._groups.map(oe),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),u=0;u<a;++u)for(var c,s=n[u],d=r[u],f=s.length,p=l[u]=new Array(f),h=0;h<f;++h)(c=s[h]||d[h])&&(p[h]=c);for(;u<i;++u)l[u]=n[u];return new on(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=de);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,l=n[o],u=l.length,c=i[o]=new Array(u),s=0;s<u;++s)(a=l[s])&&(c[s]=a);c.sort(e)}return new on(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,l=o.length;a<l;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=he(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ve:me:"function"==typeof e?n.local?be:_e:n.local?ge:ye)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ee:"function"==typeof e?Se:Ae)(t,e,null==n?"":n)):Me(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?we:"function"==typeof e?Te:Ce)(t,e)):this.node()[t]},classed:function(t,e){var n=Ne(t+"");if(arguments.length<2){for(var r=Oe(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Re:e?Pe:Le)(n,e))},text:function(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?Ve:Fe)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ze:("function"==typeof t?Be:Ue)(t)):this.node().innerHTML},raise:function(){return this.each(Ye)},lower:function(){return this.each(Ke)},append:function(t){var e="function"==typeof t?t:Ge(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Ge(t),r=null==e?$e:"function"==typeof e?e:Qt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(qe)},clone:function(t){return this.select(t?Ze:Qe)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(l=e?Je:Xe,r=0;r<a;++r)this.each(l(o[r],e,n));return this}var l=this.node().__on;if(l)for(var u,c=0,s=l.length;c<s;++c)for(r=0,u=l[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?nn:en)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const ln=an;var un={value:()=>{}};function cn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new sn(r)}function sn(t){this._=t}function dn(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function fn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=un,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}sn.prototype=cn.prototype={constructor:sn,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,l=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=o[a]).type)i[n]=fn(i[n],t.name,e);else if(null==e)for(n in i)i[n]=fn(i[n],t.name,null);return this}for(;++a<l;)if((n=(t=o[a]).type)&&(n=dn(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new sn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const pn=cn;var hn,mn,vn=0,yn=0,gn=0,_n=0,bn=0,In=0,En="object"==typeof performance&&performance.now?performance:Date,An="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Sn(){return bn||(An(Mn),bn=En.now()+In)}function Mn(){bn=0}function wn(){this._call=this._time=this._next=null}function Cn(t,e,n){var r=new wn;return r.restart(t,e,n),r}function Tn(){bn=(_n=En.now())+In,vn=yn=0;try{!function(){Sn(),++vn;for(var t,e=hn;e;)(t=bn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vn}()}finally{vn=0,function(){for(var t,e,n=hn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:hn=e);mn=t,On(r)}(),bn=0}}function Nn(){var t=En.now(),e=t-_n;e>1e3&&(In-=e,_n=t)}function On(t){vn||(yn&&(yn=clearTimeout(yn)),t-bn>24?(t<1/0&&(yn=setTimeout(Tn,t-En.now()-In)),gn&&(gn=clearInterval(gn))):(gn||(_n=En.now(),gn=setInterval(Nn,1e3)),vn=1,An(Tn)))}function Dn(t,e,n){var r=new wn;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}wn.prototype=Cn.prototype={constructor:wn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Sn():+n)+(null==e?0:+e),this._next||mn===this||(mn?mn._next=this:hn=this,mn=this),this._call=t,this._time=n,On()},stop:function(){this._call&&(this._call=null,this._time=1/0,On())}};var xn=pn("start","end","cancel","interrupt"),jn=[];function Pn(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,s,d,f;if(1!==n.state)return l();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return Dn(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Dn(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,s=-1;c<d;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++s]=f);r.length=s+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Cn(function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:xn,tween:jn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ln(t,e){var n=kn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Rn(t,e){var n=kn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function kn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Fn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Vn,zn=180/Math.PI,Un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bn(t,e,n,r,i,o){var a,l,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*zn,skewX:Math.atan(u)*zn,scaleX:a,scaleY:l}}function Yn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var l=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,l){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);l.push({i:u-4,x:Fn(t,i)},{i:u-2,x:Fn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,l,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Fn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,l,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Fn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,l,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var l=o.push(i(o)+"scale(",null,",",null,")");a.push({i:l-4,x:Fn(t,n)},{i:l-2,x:Fn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,l,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)l[(e=u[n]).i]=e.x(t);return l.join("")}}}var Kn=Yn(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Un:Bn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Wn=Yn(function(t){return null==t?Un:(Vn||(Vn=document.createElementNS("http://www.w3.org/2000/svg","g")),Vn.setAttribute("transform",t),(t=Vn.transform.baseVal.consolidate())?Bn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Un)},", ",")",")");function Hn(t,e){var n,r;return function(){var i=Rn(this,t),o=i.tween;if(o!==n)for(var a=0,l=(r=n=o).length;a<l;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Gn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Rn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=l;break}u===c&&i.push(l)}o.tween=i}}function $n(t,e,n){var r=t._id;return t.each(function(){var t=Rn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return kn(t,r).value[e]}}function qn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zn(){}var Xn=.7,Jn=1/Xn,tr="\\s*([+-]?\\d+)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rr=/^#([0-9a-f]{3,8})$/,ir=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),or=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),ar=new RegExp(`^rgba\\(${tr},${tr},${tr},${er}\\)$`),lr=new RegExp(`^rgba\\(${nr},${nr},${nr},${er}\\)$`),ur=new RegExp(`^hsl\\(${er},${nr},${nr}\\)$`),cr=new RegExp(`^hsla\\(${er},${nr},${nr},${er}\\)$`),sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function pr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?hr(e):3===n?new yr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?mr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?mr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ir.exec(t))?new yr(e[1],e[2],e[3],1):(e=or.exec(t))?new yr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ar.exec(t))?mr(e[1],e[2],e[3],e[4]):(e=lr.exec(t))?mr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ur.exec(t))?Ar(e[1],e[2]/100,e[3]/100,1):(e=cr.exec(t))?Ar(e[1],e[2]/100,e[3]/100,e[4]):sr.hasOwnProperty(t)?hr(sr[t]):"transparent"===t?new yr(NaN,NaN,NaN,0):null}function hr(t){return new yr(t>>16&255,t>>8&255,255&t,1)}function mr(t,e,n,r){return r<=0&&(t=e=n=NaN),new yr(t,e,n,r)}function vr(t,e,n,r){return 1===arguments.length?((i=t)instanceof Zn||(i=pr(i)),i?new yr((i=i.rgb()).r,i.g,i.b,i.opacity):new yr):new yr(t,e,n,null==r?1:r);var i}function yr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function gr(){return`#${Er(this.r)}${Er(this.g)}${Er(this.b)}`}function _r(){const t=br(this.opacity);return`${1===t?"rgb(":"rgba("}${Ir(this.r)}, ${Ir(this.g)}, ${Ir(this.b)}${1===t?")":`, ${t})`}`}function br(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ir(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Er(t){return((t=Ir(t))<16?"0":"")+t.toString(16)}function Ar(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mr(t,e,n,r)}function Sr(t){if(t instanceof Mr)return new Mr(t.h,t.s,t.l,t.opacity);if(t instanceof Zn||(t=pr(t)),!t)return new Mr;if(t instanceof Mr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,u=(o+i)/2;return l?(a=e===o?(n-r)/l+6*(n<r):n===o?(r-e)/l+2:(e-n)/l+4,l/=u<.5?o+i:2-o-i,a*=60):l=u>0&&u<1?0:a,new Mr(a,l,u,t.opacity)}function Mr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function wr(t){return(t=(t||0)%360)<0?t+360:t}function Cr(t){return Math.max(0,Math.min(1,t||0))}function Tr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Nr(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}qn(Zn,pr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Sr(this).formatHsl()},formatRgb:fr,toString:fr}),qn(yr,vr,Qn(Zn,{brighter(t){return t=null==t?Jn:Math.pow(Jn,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Xn:Math.pow(Xn,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yr(Ir(this.r),Ir(this.g),Ir(this.b),br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gr,formatHex:gr,formatHex8:function(){return`#${Er(this.r)}${Er(this.g)}${Er(this.b)}${Er(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_r,toString:_r})),qn(Mr,function(t,e,n,r){return 1===arguments.length?Sr(t):new Mr(t,e,n,null==r?1:r)},Qn(Zn,{brighter(t){return t=null==t?Jn:Math.pow(Jn,t),new Mr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Xn:Math.pow(Xn,t),new Mr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yr(Tr(t>=240?t-240:t+120,i,r),Tr(t,i,r),Tr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Mr(wr(this.h),Cr(this.s),Cr(this.l),br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=br(this.opacity);return`${1===t?"hsl(":"hsla("}${wr(this.h)}, ${100*Cr(this.s)}%, ${100*Cr(this.l)}%${1===t?")":`, ${t})`}`}}));const Or=t=>()=>t;function Dr(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Or(isNaN(t)?e:t)}const xr=function t(e){var n=function(t){return 1===(t=+t)?Dr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Or(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=vr(t)).r,(e=vr(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Dr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function jr(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),l=new Array(i);for(n=0;n<i;++n)r=vr(e[n]),o[n]=r.r||0,a[n]=r.g||0,l[n]=r.b||0;return o=t(o),a=t(a),l=t(l),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=l(t),r+""}}}jr(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,l=r<e-1?t[r+2]:2*o-i;return Nr((n-r/e)*e,a,i,o,l)}}),jr(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],l=t[(r+2)%e];return Nr((n-r/e)*e,i,o,a,l)}});var Pr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lr=new RegExp(Pr.source,"g");function Rr(t,e){var n,r,i,o=Pr.lastIndex=Lr.lastIndex=0,a=-1,l=[],u=[];for(t+="",e+="";(n=Pr.exec(t))&&(r=Lr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,u.push({i:a,x:Fn(n,r)})),o=Lr.lastIndex;return o<e.length&&(i=e.slice(o),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)l[(n=u[r]).i]=n.x(t);return l.join("")})}function kr(t,e){var n;return("number"==typeof e?Fn:e instanceof pr?xr:(n=pr(e))?(e=n,xr):Rr)(t,e)}function Fr(t){return function(){this.removeAttribute(t)}}function Vr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zr(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Ur(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Br(t,e,n){var r,i,o;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(l=u+"")?null:a===r&&l===i?o:(i=l,o=e(r=a,u));this.removeAttribute(t)}}function Yr(t,e,n){var r,i,o;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(l=u+"")?null:a===r&&l===i?o:(i=l,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Kr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Wr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Hr(t,e){return function(){Ln(this,t).delay=+e.apply(this,arguments)}}function Gr(t,e){return e=+e,function(){Ln(this,t).delay=e}}function $r(t,e){return function(){Rn(this,t).duration=+e.apply(this,arguments)}}function qr(t,e){return e=+e,function(){Rn(this,t).duration=e}}var Qr=ln.prototype.constructor;function Zr(t){return function(){this.style.removeProperty(t)}}var Xr=0;function Jr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ti(){return++Xr}var ei=ln.prototype;Jr.prototype=function(t){return ln().transition(t)}.prototype={constructor:Jr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Qt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l,u,c=r[a],s=c.length,d=o[a]=new Array(s),f=0;f<s;++f)(l=c[f])&&(u=t.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,Pn(d[f],e,n,f,d,kn(l,n)));return new Jr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Xt(t));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var u,c=r[l],s=c.length,d=0;d<s;++d)if(u=c[d]){for(var f,p=t.call(u,u.__data__,d,c),h=kn(u,n),m=0,v=p.length;m<v;++m)(f=p[m])&&Pn(f,e,n,m,p,h);o.push(p),a.push(u)}return new Jr(o,a,e,n)},selectChild:ei.selectChild,selectChildren:ei.selectChildren,filter:function(t){"function"!=typeof t&&(t=Jt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],l=a.length,u=r[i]=[],c=0;c<l;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Jr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var u,c=e[l],s=n[l],d=c.length,f=a[l]=new Array(d),p=0;p<d;++p)(u=c[p]||s[p])&&(f[p]=u);for(;l<r;++l)a[l]=e[l];return new Jr(a,this._parents,this._name,this._id)},selection:function(){return new Qr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ti(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,l=r[o],u=l.length,c=0;c<u;++c)if(a=l[c]){var s=kn(a,e);Pn(a,t,n,c,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Jr(r,this._parents,t,n)},call:ei.call,nodes:ei.nodes,node:ei.node,size:ei.size,empty:ei.empty,each:ei.each,on:function(t,e){var n=this._id;return arguments.length<2?kn(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Ln:Rn;return function(){var a=o(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=he(t),r="transform"===n?Wn:kr;return this.attrTween(t,"function"==typeof e?(n.local?Yr:Br)(n,r,$n(this,"attr."+t,e)):null==e?(n.local?Vr:Fr)(n):(n.local?Ur:zr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=he(t);return this.tween(n,(r.local?Kr:Wr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Kn:kr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Me(this,t),a=(this.style.removeProperty(t),Me(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Zr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Me(this,t),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(t),u=l=Me(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,l))}}(t,r,$n(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,l="end."+a;return function(){var u=Rn(this,t),c=u.on,s=null==u.value[a]?o||(o=Zr(e)):void 0;c===n&&i===s||(r=(n=c).copy()).on(l,i=s),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Me(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}($n(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=kn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Hn:Gn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Hr:Gr)(e,t)):kn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?$r:qr)(e,t)):kn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Rn(this,t).ease=e}}(e,t)):kn(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Rn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},u={value:function(){0===--i&&o()}};n.each(function(){var n=Rn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),n.on=e}),0===i&&o()})},[Symbol.iterator]:ei[Symbol.iterator]};var ni={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ri(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ln.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},ln.prototype.transition=function(t){var e,n;t instanceof Jr?(e=t._id,t=t._name):(e=ti(),(n=ni).time=Sn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,l=r[o],u=l.length,c=0;c<u;++c)(a=l[c])&&Pn(a,t,e,c,l,n||ri(a,e));return new Jr(r,this._parents,t,e)};const{abs:ii,max:oi,min:ai}=Math;function li(t){return{type:t}}function ui(t){return"string"==typeof t?new on([[document.querySelector(t)]],[document.documentElement]):new on([[t]],rn)}function ci(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(li),["n","s"].map(li),["n","w","e","s","nw","ne","sw","se"].map(li);const si={passive:!1},di={capture:!0,passive:!1};function fi(t){t.stopImmediatePropagation()}function pi(t){t.preventDefault(),t.stopImmediatePropagation()}const hi=t=>()=>t;function mi(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:l,dx:u,dy:c,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:s}})}function vi(t){return!t.ctrlKey&&!t.button}function yi(){return this.parentNode}function gi(t,e){return null==e?{x:t.x,y:t.y}:e}function _i(){return navigator.maxTouchPoints||"ontouchstart"in this}function bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}mi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};class Ii extends Map{constructor(t,e=Ai){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ei(this,t))}has(t){return super.has(Ei(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,t))}}function Ei({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ai(t){return null!==t&&"object"==typeof t?t.valueOf():t}Set;const Si=Symbol("implicit");function Mi(){var t=new Ii,e=[],n=[],r=Si;function i(i){let o=t.get(i);if(void 0===o){if(r!==Si)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Ii;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Mi(e,n).unknown(r)},bi.apply(i,arguments),i}function wi(){var t,e,n=Mi().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,l=!1,u=0,c=0,s=.5;function d(){var n=r().length,d=a<o,f=d?a:o,p=d?o:a;t=(p-f)/Math.max(1,n-u+2*c),l&&(t=Math.floor(t)),f+=(p-f-t*(n-u))*s,e=t*(1-u),l&&(f=Math.round(f),e=Math.round(e));var h=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(n).map(function(e){return f+t*e});return i(d?h.reverse():h)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),d()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,d()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,l=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(l=!!t,d()):l},n.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),d()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),d()):u},n.paddingOuter=function(t){return arguments.length?(c=+t,d()):c},n.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),d()):s},n.copy=function(){return wi(r(),[o,a]).round(l).paddingInner(u).paddingOuter(c).align(s)},bi.apply(d(),arguments)}const Ci=Math.sqrt(50),Ti=Math.sqrt(10),Ni=Math.sqrt(2);function Oi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ci?10:o>=Ti?5:o>=Ni?2:1;let l,u,c;return i<0?(c=Math.pow(10,-i)/a,l=Math.round(t*c),u=Math.round(e*c),l/c<t&&++l,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,l=Math.round(t/c),u=Math.round(e/c),l*c<t&&++l,u*c>e&&--u),u<l&&.5<=n&&n<2?Oi(t,e,2*n):[l,u,c]}function Di(t,e,n){return Oi(t=+t,e=+e,n=+n)[2]}function xi(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ji(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pi(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=xi,n=(e,n)=>xi(t(e),n),r=(e,n)=>t(e)-n):(e=t===xi||t===ji?t:Li,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Li(){return 0}const Ri=Pi(xi),ki=Ri.right,Fi=(Ri.left,Pi(function(t){return null===t?NaN:+t}).center,ki);function Vi(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Yi(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function zi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ui(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Yi(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Bi(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Yi(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?Or(e):("number"===i?Fn:"string"===i?(n=pr(e))?(e=n,xr):Rr:e instanceof pr?xr:e instanceof Date?zi:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Vi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ui:Fn:Bi))(t,e)}function Ki(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Wi(t){return+t}var Hi=[0,1];function Gi(t){return t}function $i(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function qi(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=$i(i,r),o=n(a,o)):(r=$i(r,i),o=n(o,a)),function(t){return o(r(t))}}function Qi(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=$i(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Fi(t,e,1,r)-1;return o[n](i[n](e))}}var Zi,Xi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ji(t){if(!(e=Xi.exec(t)))throw new Error("invalid format: "+t);var e;return new to({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function to(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function eo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function no(t){return(t=eo(Math.abs(t)))?t[1]:NaN}function ro(t,e){var n=eo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ji.prototype=to.prototype,to.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const io={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ro(100*t,e),r:ro,s:function(t,e){var n=eo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Zi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+eo(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oo(t){return t}var ao,lo,uo,co=Array.prototype.map,so=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fo(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?Oi(e,t,n):Oi(t,e,n);if(!(o>=i))return[];const l=o-i+1,u=new Array(l);if(r)if(a<0)for(let t=0;t<l;++t)u[t]=(o-t)/-a;else for(let t=0;t<l;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<l;++t)u[t]=(i+t)/-a;else for(let t=0;t<l;++t)u[t]=(i+t)*a;return u}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Di(e,t,n):Di(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Ji(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(no(e)/3)))-no(Math.abs(t)))}(o,a))||(r.precision=i),uo(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,no(e)-no(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-no(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return lo(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,l=o.length-1,u=o[a],c=o[l],s=10;for(c<u&&(i=u,u=c,c=i,i=a,a=l,l=i);s-- >0;){if((i=Di(u,c,n))===r)return o[a]=u,o[l]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function po(){var t=function(){var t,e,n,r,i,o,a=Hi,l=Hi,u=Yi,c=Gi;function s(){var t,e,n,u=Math.min(a.length,l.length);return c!==Gi&&(t=a[0],e=a[u-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=u>2?Qi:qi,i=o=null,d}function d(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),l,u)))(t(c(e)))}return d.invert=function(n){return c(e((o||(o=r(l,a.map(t),Fn)))(n)))},d.domain=function(t){return arguments.length?(a=Array.from(t,Wi),s()):a.slice()},d.range=function(t){return arguments.length?(l=Array.from(t),s()):l.slice()},d.rangeRound=function(t){return l=Array.from(t),u=Ki,s()},d.clamp=function(t){return arguments.length?(c=!!t||Gi,s()):c!==Gi},d.interpolate=function(t){return arguments.length?(u=t,s()):u},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,r){return t=n,e=r,s()}}()(Gi,Gi);return t.copy=function(){return e=t,po().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},bi.apply(t,arguments),fo(t)}function ho(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function mo(t){return function(){return t}}function vo(t){this._context=t}function yo(t){return new vo(t)}ao=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?oo:(e=co.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(t.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?oo:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(co.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Ji(t)).fill,n=t.align,d=t.sign,f=t.symbol,p=t.zero,h=t.width,m=t.comma,v=t.precision,y=t.trim,g=t.type;"n"===g?(m=!0,g="g"):io[g]||(void 0===v&&(v=12),y=!0,g="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?o:/[%p]/.test(g)?u:"",I=io[g],E=/[defgprs%]/.test(g);function A(t){var i,o,u,f=_,A=b;if("c"===g)A=I(t)+A,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:I(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0===+t&&"+"!==d&&(S=!1),f=(S?"("===d?d:c:"-"===d||"("===d?"":d)+f,A=("s"===g?so[8+Zi/3]:"")+A+(S&&"("===d?")":""),E)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){A=(46===u?a+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var M=f.length+t.length+A.length,w=M<h?new Array(h-M+1).join(e):"";switch(m&&p&&(t=r(w+t,w.length?h-A.length:1/0),w=""),n){case"<":t=f+t+A+w;break;case"=":t=f+w+t+A;break;case"^":t=w.slice(0,M=w.length>>1)+f+t+A+w.slice(M);break;default:t=w+f+t+A}return l(t)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),A.toString=function(){return t+""},A}return{format:d,formatPrefix:function(t,e){var n=d(((t=Ji(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(no(e)/3))),i=Math.pow(10,-r),o=so[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),lo=ao.format,uo=ao.formatPrefix,Array.prototype.slice,vo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const go=Math.PI,_o=2*go,bo=1e-6,Io=_o-bo;function Eo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Ao{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Eo:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Eo;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=n-t,u=r-e,c=o-t,s=a-e,d=c*c+s*s;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>bo)if(Math.abs(s*l-u*c)>bo&&i){let f=n-o,p=r-a,h=l*l+u*u,m=f*f+p*p,v=Math.sqrt(h),y=Math.sqrt(d),g=i*Math.tan((go-Math.acos((h+d-m)/(2*v*y)))/2),_=g/y,b=g/v;Math.abs(_-1)>bo&&this._append`L${t+_*c},${e+_*s}`,this._append`A${i},${i},0,0,${+(s*f>c*p)},${this._x1=t+b*l},${this._y1=e+b*u}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),l=n*Math.sin(r),u=t+a,c=e+l,s=1^o,d=o?r-i:i-r;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>bo||Math.abs(this._y1-c)>bo)&&this._append`L${u},${c}`,n&&(d<0&&(d=d%_o+_o),d>Io?this._append`A${n},${n},0,1,${s},${t-a},${e-l}A${n},${n},0,1,${s},${this._x1=u},${this._y1=c}`:d>bo&&this._append`A${n},${n},0,${+(d>=go)},${s},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function So(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Ao(e)}function Mo(t){return t[0]}function wo(t){return t[1]}function Co(t,e){var n=mo(!0),r=null,i=yo,o=null,a=So(l);function l(l){var u,c,s,d=(l=ho(l)).length,f=!1;for(null==r&&(o=i(s=a())),u=0;u<=d;++u)!(u<d&&n(c=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(c,u,l),+e(c,u,l));if(s)return o=null,s+""||null}return t="function"==typeof t?t:void 0===t?Mo:mo(t),e="function"==typeof e?e:void 0===e?wo:mo(e),l.x=function(e){return arguments.length?(t="function"==typeof e?e:mo(+e),l):t},l.y=function(t){return arguments.length?(e="function"==typeof t?t:mo(+t),l):e},l.defined=function(t){return arguments.length?(n="function"==typeof t?t:mo(!!t),l):n},l.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),l):i},l.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),l):r},l}function To(t,e,n){var r=null,i=mo(!0),o=null,a=yo,l=null,u=So(c);function c(c){var s,d,f,p,h,m=(c=ho(c)).length,v=!1,y=new Array(m),g=new Array(m);for(null==o&&(l=a(h=u())),s=0;s<=m;++s){if(!(s<m&&i(p=c[s],s,c))===v)if(v=!v)d=s,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),f=s-1;f>=d;--f)l.point(y[f],g[f]);l.lineEnd(),l.areaEnd()}v&&(y[s]=+t(p,s,c),g[s]=+e(p,s,c),l.point(r?+r(p,s,c):y[s],n?+n(p,s,c):g[s]))}if(h)return l=null,h+""||null}function s(){return Co().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?Mo:mo(+t),e="function"==typeof e?e:mo(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?wo:mo(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:mo(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:mo(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:mo(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:mo(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:mo(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:mo(+t),c):n},c.lineX0=c.lineY0=function(){return s().x(t).y(e)},c.lineY1=function(){return s().x(t).y(n)},c.lineX1=function(){return s().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:mo(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(l=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=l=null:l=a(o=t),c):o},c}function No(t){return t<0?-1:1}function Oo(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(o*i+a*r)/(r+i);return(No(o)+No(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function Do(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function xo(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,a-l*n,o,a)}function jo(t){this._context=t}function Po(t){this._context=t}function Lo(t){return new jo(t)}function Ro(t,e,n){this.k=t,this.x=e,this.y=n}function ko(t){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(t)}function Fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Vo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fo(Object(n),!0).forEach(function(e){zo(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function zo(t,e,n){return(e=function(t){var e=function(t){if("object"!=ko(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ko(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xo(this,this._t0,Do(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,xo(this,Do(this,n=Oo(this,t,e)),n);break;default:xo(this,this._t0,n=Oo(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new Po(t)}.prototype=Object.create(jo.prototype)).point=function(t,e){jo.prototype.point.call(this,e,t)},Po.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Ro.prototype={constructor:Ro,scale:function(t){return 1===t?this:new Ro(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ro(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Ro(1,0,0),Ro.prototype,mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Uo=function(t,e,n,r){var i=t.xScale,o=t.yScale,a=Co().curve(Lo).x(function(t){return i(t.index)}).y(function(t){return o(t.value)});e.append("path").datum(n).attr("fill","none").attr("stroke",r).attr("stroke-width",.75).attr("d",a)},Bo=function(t,e,n){t.attr("width",0).transition().duration(n).attr("width",e)},Yo=function(t,e,n,r){var o=e.xScale,a=e.yScale,l=t.append("circle").attr("class","trend-graph__tooltip-marker").attr("fill",i);return{tooltipHandler:function(t){var e,i=t.detail,u=i.evt,c=i.returnObject,s=u.e.offsetX||u.layerX||0,d=Math.round(o.invert(s));parseFloat(l.attr("cx"))!==o(d)&&l.attr("cx",o(d)).attr("cy",a(n[d].value)).attr("r",0).transition().duration(300).attr("r",5),c.graphicModel=null===(e=r[d])||void 0===e?void 0:e.graphicModel},resetHighlight:function(){l.transition().duration(0).attr("r",0)}}};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Ko=function(t,e,n,r){var i=e.xBarScale,o=t.selectAll(".trend__bar"),a=i.step();return{tooltipHandler:function(t){var e,i,l,u,c=t.detail,s=c.evt,d=c.returnObject,f=(u=(null===(l=(i=s).e)||void 0===l?void 0:l.offsetX)||i.layerX,Math.floor(u/a));o.attr("fill-opacity",n),ui(o.nodes()[f]).attr("fill-opacity",.4*n),d.graphicModel=null===(e=r[f])||void 0===e?void 0:e.graphicModel},resetHighlight:function(){o.attr("fill-opacity",n)}}};function Wo(t){return function(t){if(Array.isArray(t))return Ho(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ho(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Go=S.TREND_SHAPE,$o=Go.LINE,qo=Go.AREA,Qo=Go.BAR;var Zo=function(t,e,n,r,i,o,a){var l=t.cardDimensions,u=l.cardWidth,c=l.cardHeight,s=a.minValue,d=a.maxValue,f=(n?24:28)/100,p=Math.min(.08*Math.min(u,c),30),h=r/100,m=(c-2*p-2)*f,v=i===Qo?.01*m:5,y=u-2*p-2,g=null!=o&&o.value?Math.min(s,o.value):s,_=function(t,e,n,r,i,o){var a=po().domain([0,t.length-1]).range([0,e]),l=po().domain([n,r>=0?r:0]).range([i-o,o]),u=wi().domain(t.map(function(t,e){return e})).range([0,e]).padding(.1).align(.5);return{xScale:a,yScale:l,xBarScale:u,heightScale:function(t){return Math.abs(l(0)-l(t))},barYScale:function(t){return l(t>=0?t:0)}}}(e,y,g,null!=o&&o.value?Math.max(d,o.value):d,m,v);return{scales:_,graphData:e.map(function(t,e){return{index:e,value:t.raw}}),trendFillOpacityFraction:h,trendWidth:y,scaledMinValue:g,trendVerticalMargin:v,SVGHeight:m}};function Xo(t){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(t)}function Jo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(n),!0).forEach(function(e){ea(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ea(t,e,n){return(e=function(t){var e=function(t){if("object"!=Xo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var na=function(t,e,n,r){var i=t.sourceEvent||t;if(!e.isAndroid||!i.target.classList.contains("trend__body")){ca(e);var o=e.selectedCardsGraphicModels;if(e.clearSelections(),e.isIOS&&(e.handleContextMenuSelection(i),e.trendSVGs.forEach(function(t){return t.dispatch("mouseout")})),o=la(i,o,n),e.selectedCardsGraphicModels=o,ua(e),"A"===(null==r?void 0:r.tagName)&&window.open(r.href,"_blank"),o.length>0){var a,l=u(e.KPIType),c=$(e,l.TREND),s=$(e,l.BREAK_BY);if(!((c||s)&&ra(e,o),1!==o.length||null!==(a=e._isConsumeMode)&&void 0!==a&&a.call(e))){var d,f,p=null===(d=e.controller)||void 0===d||null===(f=d.getViPanel)||void 0===f?void 0:f.call(d,"propertiesPanel");if(p&&p.getOpenStatus()){var h,m=null==e?void 0:e.getCardItems(),v=Object.keys(e.cardComponentReferences||{}).indexOf(o[0].cardId),y=null==m||null===(h=m[v])||void 0===h?void 0:h.dssid;if(y){e.properties.selectedCardImage=y;var g=JSON.parse(y);e.selectedKPICard={image:g,appearance:ta({},g)},syncDossierFormatPanel([w.SELECTED_CARD_IMAGE.name,w.SELECTED_CARD_APPEARANCE.name])}}}}else ia(e,n)}},ra=function(t,e){t.isIOS?e.forEach(function(t){var e=t.getSelector();e.messageType="selection",window.webkit.messageHandlers.selectionDataJSONString.postMessage(e)}):t.applySelection(e.map(function(t){return t.getSelector()}))},ia=function(t,e){if(t.isIOS){var n=e.getSelector();n.messageType="deselection",window.webkit.messageHandlers.selectionDataJSONString.postMessage(n)}else t.clearSelections(),t.endSelections()},oa=function(t){var e=t.cardId;return document.getElementById(mstrmojo.string.encodeHtmlString(e))},aa=function(t){null==t||t.classList.remove("card--selected"),null==t||t.classList.remove("card--unselected"),null==t||t.classList.remove("card--selected-no-hover")},la=function(t,e,n){var r=e.map(function(t){return t.cardId}),i=r.indexOf(n.cardId);if(!0===t.ctrlKey||!0===t.metaKey)-1!==i?e.splice(i,1):e.push(n);else{var o=-1===i||r.length>1&&-1!==i;e.length=0,o&&e.push(n)}return e},ua=function(t,e){var n=t.selectedCardsGraphicModels,r=t.isSingleCardDisplayed;if(null!=e&&e.length&&(n=e),t.getGraphicModels().forEach(function(t){var e=oa(t);r?null==e||e.classList.add("card--no-hover"):null==e||e.classList.remove("card--no-hover")}),0!==n.length){var i=n.map(function(t){return t.cardId});t.getGraphicModels().forEach(function(t){var e=oa(t);i.includes(t.cardId)?null!=e&&e.classList.contains("card--selected-context-menu")||function(t,e){null==t||t.classList.add(e?"card--selected-no-hover":"card--selected"),null==t||t.classList.remove("card--unselected")}(e,r):function(t,e){null==t||t.classList.remove("card--selected"),e||null==t||t.classList.add("card--unselected")}(e,r)})}else t.getGraphicModels().forEach(function(t){var e=oa(t);aa(e)})},ca=function(t){t.contextMenuCardsGraphicModels.forEach(function(t){var e=oa(t);null==e||e.classList.remove("card--selected-context-menu")}),t.contextMenuCardsGraphicModels=[]};function sa(t){return function(t){if(Array.isArray(t))return da(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return da(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?da(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var fa=function(t,e){return{tag:"button",content:"•",classes:["controls__dot-indicator"],style:{color:e},otherAttributes:{id:t}}},pa=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{tag:"button",classes:["controls__".concat(t,"-arrow")].concat(sa(n),sa(r)),content:e}};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var ha="imagesmode.svg",ma="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQzIDdDNDUuMjA5MSA3IDQ3IDguNzkwODYgNDcgMTFWMzdDNDcgMzkuMjA5MSA0NS4yMDkxIDQxIDQzIDQxSDI2LjA2OTNMMTQuMTY4OSA3SDQzWiIgZmlsbD0iI0UzRTNFMyIvPgo8cGF0aCBkPSJNMTguMTMzOCAxOC4zMjUyQzE5LjE4MTcgMTguMjgxOCAyMC4yNDAzIDE4LjY0OTMgMjEuMDUxOCAxOS40MThMMjYuMDE3NiAyNC4xMjExQzI3LjIxMzQgMjUuMjUzOSAyOC45ODEzIDI1LjUzODMgMzAuNDcxNyAyNC44MzY5TDM0LjAyMTUgMjMuMTY2QzM1LjUxNTMgMjIuNDYzIDM3LjI4NzggMjIuNzUwMiAzOC40ODM0IDIzLjg4ODdMNDcgMzJWMzdDNDcgMzkuMjA5MSA0NS4yMDkxIDQxIDQzIDQxSDI2LjA2OTNMMTguMTMzOCAxOC4zMjUyWk0zNyAxMkMzOC42NTY5IDEyIDQwIDEzLjM0MzEgNDAgMTVDNDAgMTYuNjU2OSAzOC42NTY5IDE4IDM3IDE4QzM1LjM0MzEgMTggMzQgMTYuNjU2OSAzNCAxNUMzNCAxMy4zNDMxIDM1LjM0MzEgMTIgMzcgMTJaIiBmaWxsPSIjOTQ5NDk0IiBmaWxsLW9wYWNpdHk9IjAuMyIvPgo8cGF0aCBkPSJNMjIuOTUwMiA0NEg3QzQuNzkwODYgNDQgMyA0Mi4yMDkxIDMgNDBWMTRDMyAxMS43OTA5IDQuNzkwODYgMTAgNyAxMEgxMS4wNDk4TDIyLjk1MDIgNDRaIiBmaWxsPSIjRTNFM0UzIi8+CjxwYXRoIGQ9Ik0yMi45NTAyIDQ0SDdDNC43OTA4NiA0NCAzIDQyLjIwOTEgMyA0MFYzMUwxMy45MDgyIDIyLjExMTNDMTQuMjYxMSAyMS44MjM4IDE0LjY1MTIgMjEuNjA2NSAxNS4wNTk2IDIxLjQ1N0wyMi45NTAyIDQ0WiIgZmlsbD0iIzk0OTQ5NCIgZmlsbC1vcGFjaXR5PSIwLjMiLz4KPHBhdGggZD0iTTI0LjUyNTQgNDQuODQxOEMyNC42MTI3IDQ0LjU3OTggMjQuODk2MiA0NC40MzgxIDI1LjE1ODIgNDQuNTI1NEMyNS40MjAxIDQ0LjYxMjcgMjUuNTYxOSA0NC44OTYyIDI1LjQ3NDYgNDUuMTU4MkwyNC40NzQ2IDQ4LjE1ODJDMjQuMzg3MSA0OC40MiAyNC4xMDM3IDQ4LjU2MDkgMjMuODQxOCA0OC40NzM2QzIzLjU4MDEgNDguMzg2MyAyMy40MzgzIDQ4LjEwMzYgMjMuNTI1NCA0Ny44NDE4TDI0LjUyNTQgNDQuODQxOFpNMjcuMTA5NCA0NC42ODc1QzI3LjI4MTggNDQuNDcyMiAyNy41OTcgNDQuNDM3MyAyNy44MTI1IDQ0LjYwOTRMMzAuMzEyNSA0Ni42MDk0QzMwLjUyNzggNDYuNzgxNyAzMC41NjI2IDQ3LjA5NiAzMC4zOTA2IDQ3LjMxMTVDMzAuMjE4MSA0Ny41MjcxIDI5LjkwMzEgNDcuNTYzMSAyOS42ODc1IDQ3LjM5MDZMMjcuMTg3NSA0NS4zOTA2QzI2Ljk3MjIgNDUuMjE4MiAyNi45MzcyIDQ0LjkwMyAyNy4xMDk0IDQ0LjY4NzVaTTcuNjQ2NDggMi42NDY0OEM3Ljg0MTc1IDIuNDUxMjIgOC4xNTgyNSAyLjQ1MTIyIDguMzUzNTIgMi42NDY0OEwxMC44NTM1IDUuMTQ2NDhDMTEuMDQ4NSA1LjM0MTc3IDExLjA0ODcgNS42NTgzNiAxMC44NTM1IDUuODUzNTJDMTAuNjU4NCA2LjA0ODY3IDEwLjM0MTggNi4wNDg0NyAxMC4xNDY1IDUuODUzNTJMNy42NDY0OCAzLjM1MzUyQzcuNDUxMjIgMy4xNTgyNSA3LjQ1MTIzIDIuODQxNzUgNy42NDY0OCAyLjY0NjQ4Wk0xMy41OTc3IDEuMDA5NzdDMTMuODY4MyAxLjA2MzkgMTQuMDQ0MiAxLjMyNyAxMy45OTAyIDEuNTk3NjZMMTMuNDkwMiA0LjA5NzY2QzEzLjQzNjEgNC4zNjgzIDEzLjE3MyA0LjU0NDEyIDEyLjkwMjMgNC40OTAyM0MxMi42MzE2IDQuNDM2MDggMTIuNDU1NiA0LjE3MjE1IDEyLjUwOTggMy45MDEzN0wxMy4wMDk4IDEuNDAyMzRDMTMuMDYzOSAxLjEzMTY3IDEzLjMyNyAwLjk1NTgxOSAxMy41OTc3IDEuMDA5NzdaIiBmaWxsPSIjOTQ5NDk0IiBmaWxsLW9wYWNpdHk9IjAuMiIvPgo8L3N2Zz4K";mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var va=function(t,e){var n=$t({tag:"div",classes:["trend-indicator__icon-wrapper"]}),r=$t({tag:"div",classes:["trend-indicator__icon"]});return r.style.maskImage="url(".concat(1===e?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMiAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS4yMTE3IDMuNzAxNThDMTEuMTYxMiAzLjU3OTA4IDExLjA2MzcgMy40ODE1OCAxMC45NDEyIDMuNDMxMDhDMTAuODgwMiAzLjQwNTU4IDEwLjgxNTIgMy4zOTI1OCAxMC43NTAyIDMuMzkyNThIOC4yOTU3QzguMDE5MiAzLjM5MjU4IDcuNzk1NyAzLjYxNjA4IDcuNzk1NyAzLjg5MjU4QzcuNzk1NyA0LjE2OTA4IDguMDE5MiA0LjM5MjU4IDguMjk1NyA0LjM5MjU4SDkuNTQyN0w2Ljg2MzcgNy4wNzA1Nkw1LjE3MjIgNS4zNzg1NkM0Ljk4NDY5IDUuMTkxMDggNC42NTMxOSA1LjE5MTA4IDQuNDY1MTkgNS4zNzg1NkwxLjM5NjE5IDguNDQ5MDZDMS4yMDExOSA4LjY0NDU2IDEuMjAxMTkgOC45NjEwNiAxLjM5NjY5IDkuMTU2MDZDMS40OTQxOSA5LjI1MzU2IDEuNjIyMTkgOS4zMDI1NiAxLjc1MDE5IDkuMzAyNTZDMS44NzgxOSA5LjMwMjU2IDIuMDA2MTkgOS4yNTM1NiAyLjEwMzY5IDkuMTU2MDZMNC44MTg2OSA2LjQzOTU2TDYuNTA5NyA4LjEzMTA2QzYuNzA1MiA4LjMyNjU2IDcuMDIxNyA4LjMyNjU2IDcuMjE3MiA4LjEzMTA2TDEwLjI1MDIgNS4wOTkwOFY2LjM0NzU2QzEwLjI1MDIgNi42MjQwNiAxMC40NzM3IDYuODQ3NTYgMTAuNzUwMiA2Ljg0NzU2QzExLjAyNjcgNi44NDc1NiAxMS4yNTAyIDYuNjI0MDYgMTEuMjUwMiA2LjM0NzU2VjMuODkyNThDMTEuMjUwMiAzLjgyNzU4IDExLjIzNjcgMy43NjI1OCAxMS4yMTE3IDMuNzAxNThaIiBmaWxsPSIjMjBBNzZDIi8+Cjwvc3ZnPgo=":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI1IiB2aWV3Qm94PSIwIDAgOCA1IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMDU1NTggNC4wMzk3OUM3LjAyMjUzIDQuMTE5OTYgNi45NTg3MyA0LjE4Mzc2IDYuODc4NTYgNC4yMTY4MUM2LjgzODY0IDQuMjMzNSA2Ljc5NjExIDQuMjQyIDYuNzUzNTcgNC4yNDJINS4xNDczNEM0Ljk2NjQgNC4yNDIgNC44MjAxNCA0LjA5NTc1IDQuODIwMTQgMy45MTQ4QzQuODIwMTQgMy43MzM4NiA0Ljk2NjQgMy41ODc2IDUuMTQ3MzQgMy41ODc2SDUuOTYzMzhMNC4yMTAyNCAxLjgzNTEzTDMuMTAzMzIgMi45NDIzN0MyLjk4MDYxIDMuMDY1MDYgMi43NjM2NyAzLjA2NTA2IDIuNjQwNjUgMi45NDIzN0wwLjYzMjI4NyAwLjkzMzAzM0MwLjUwNDY3OCAwLjgwNTA5NyAwLjUwNDY3OCAwLjU5Nzk3OSAwLjYzMjYxNCAwLjQ3MDM3MUMwLjY5NjQxOCAwLjQwNjU2NiAwLjc4MDE4MSAwLjM3NDUwMSAwLjg2Mzk0NSAwLjM3NDUwMUMwLjk0NzcwOCAwLjM3NDUwMSAxLjAzMTQ3IDAuNDA2NTY2IDEuMDk1MjggMC40NzAzNzFMMi44NzE5OCAyLjI0ODA1TDMuOTc4NTggMS4xNDExM0M0LjEwNjUxIDEuMDEzMiA0LjMxMzYzIDEuMDEzMiA0LjQ0MTU3IDEuMTQxMTNMNi40MjYzNyAzLjEyNTI3VjIuMzA4MjZDNi40MjYzNyAyLjEyNzMyIDYuNTcyNjMgMS45ODEwNiA2Ljc1MzU3IDEuOTgxMDZDNi45MzQ1MSAxLjk4MTA2IDcuMDgwNzcgMi4xMjczMiA3LjA4MDc3IDIuMzA4MjZWMy45MTQ4QzcuMDgwNzcgMy45NTczNCA3LjA3MTk0IDMuOTk5ODggNy4wNTU1OCA0LjAzOTc5WiIgZmlsbD0iI0Q5MjMyRSIvPgo8L3N2Zz4K",")"),r.style.maskSize="100%",r.style.maskRepeat="no-repeat",r.style.maskPosition="center",r.style.maskColor=t,r.style.background=t,n.appendChild(r),n.outerHTML},ya=function(t,e,n,r){var i,o=e.trendIncreaseBackgroundColor,a=e.trendDecreaseBackgroundColor,l=e.trendConstantBackgroundColor,u=e.trendIndicatorShape,s=e.trendIndicatorValueType,d=S.TREND_INDICATOR_SHAPE.BADGE,f=S.TREND_INDICATOR_VALUE_TYPE.NUMERIC,p=null===(i=r[5])||void 0===i?void 0:i.color;return 0===t?{indicatorColor:null!=p?p:l,valueSign:"",arrowType:null}:t<0?{indicatorColor:null!=p?p:a,valueSign:n===c||s===f?"":"-",arrowType:-1}:{indicatorColor:null!=p?p:o,valueSign:n===c||u!==d?"":"+",arrowType:1}};function ga(t){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(t)}function _a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_a(Object(n),!0).forEach(function(e){Ia(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ia(t,e,n){return(e=function(t){var e=function(t){if("object"!=ga(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ga(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ga(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ea(t){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ea(t)}function Aa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Sa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Aa(Object(n),!0).forEach(function(e){Ma(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ma(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ea(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ea(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var wa=function(t,e,n){var r,i,a,l,u;if(null!==(r=mstrApp)&&void 0!==r&&null!==(i=r.supportFeature)&&void 0!==i&&i.call(r,mstrmojo.vi.enums.EnumFeatures.SUPPORT_MULTIPLE_CARDS_ENHANCED_KPI)){var c,s,d=null==n?void 0:n.imageId;if(d)if(mstrApp.isExporting){var f,p=null===(f=t.node.data.images)||void 0===f?void 0:f[d];if(p){p=atob(p);for(var h=[],m=0;m<p.length;m++)h.push(255&p.charCodeAt(m));u=ht(h)}else u=ma}else u=ma,t.fetchImage(d).then(function(t){if(t){var e=E.querySelector(".icon-img");e.style.background="url(".concat(t,")"),e.style.backgroundSize=S.style.maskSize,e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.maskImage="",e.style.maskSize="",e.style.maskRepeat="",e.style.maskPosition="",e.style.backgroundColor=""}});else u=(null==n||null===(c=n.formatConfig)||void 0===c?void 0:c.imageSrc)||(null==n||null===(s=n.formatConfig)||void 0===s?void 0:s.searchIcon)||e.imgSrc}else u=e.imgSrc;var v=e.imgFillColor,y=e.imgFillOpacity,g=e.iconShapeEnabled,_=e.iconShapeRadius,b=e.imgShapeFillColor,I=e.imgShapeFillOpacity,E=document.createElement("div");E.classList.add("card__img-wrapper");var A=document.createElement("div");A.classList.add("card__img-container"),E.appendChild(A);var S=document.createElement("div");S.classList.add("icon-img"),g&&(E.style.borderRadius="".concat(_,"%"),E.style.background=ct(b,I));var M,w,C=u||ha,T=null!==(a=mstrApp)&&void 0!==a&&a.isWSLiveMode?"".concat(mstrApp.dossierServerBaseUrl,"style"):"".concat(mstrmojo.getStyleRoot());return w=C,st.test(w)?C="".concat(T,"/mstr").concat(C):null!==(l=C)&&void 0!==l&&l.startsWith("http")||(M=C)&&(M.startsWith("data:image/svg+xml;base64,")||M.startsWith("data:image/png;base64,")||M.startsWith("data:image/jpeg;base64,")||M.startsWith("data:image/gif;base64,")||M.startsWith("data:image/webp;base64,")||M.startsWith("data:image/bmp;base64,"))||(C="".concat(T,"/mstr/images/material-symbols/400/rounded/").concat(C)),function(t){return!!t&&(t.endsWith(".svg")||function(t){if(!t)return!1;if(t.endsWith(".svg"))return!0;if(t.startsWith("data:image/svg+xml;base64,"))return!0;if(t.match(/^data:image\/(jpeg|jpg|png|gif|webp|bmp);base64,/))return!1;try{var e=t.replace(/^data:image\/[^;]+;base64,/,""),n=atob(e).trim().toLowerCase();return n.startsWith("<svg")||n.includes("<svg")}catch(t){return!1}}(t))}(C)?(S.style.maskImage="url(".concat(C,")"),S.style.maskSize=g?"60%":"contain",S.style.maskRepeat="no-repeat",S.style.maskPosition="center",S.style.backgroundColor=C===ha?ct(o,100):ct(v,y)):(S.style.background="url(".concat(C,")"),S.style.backgroundSize=g?"60%":"contain",S.style.backgroundRepeat="no-repeat",S.style.backgroundPosition="center"),A.appendChild(S),E},Ca=function(t,e,n,r){var i,o,a,l,u,c,d,f,p,h,m,v,y,g,_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],b=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],I=arguments.length>6?arguments[6]:void 0,E=arguments.length>7?arguments[7]:void 0,A=e.isComparisonKPI,M=e.isRealTime,w=e.cardProperties,C=e.isTrendAttributeAdded,T=t.trendChartData,N=t.graphicModel,O=t.referenceLine,D=t.thresholdTarget,x=t.trendAttributeFormType,j=t.metricFormType,P=n.secondaryValueFontOptions,L=n.trendIndicatorEnabled,R=n.comparisonIndicatorEnabled,k=w.cssModifiers,F=w.isTrendIndicatorOnTop,V=w.showSecondaryValue,z=w.isComparisonMetricAdded,U=N.cardId,B=[],Y=C&&!(null!=t&&t.trend),K=null==t?void 0:t.trend,W=null==t?void 0:t.secondaryValue,H=null==t?void 0:t.indicator;if(Y){var G,$,q,Q=e.parsedData.filter(function(t){return(null==t?void 0:t.trend)&&(null==t?void 0:t.secondaryValue)&&(null==t?void 0:t.indicator)});Q.length>0?(K=null===(G=Q[0])||void 0===G?void 0:G.trend,W=null===($=Q[0])||void 0===$?void 0:$.secondaryValue,H=null===(q=Q[0])||void 0===q?void 0:q.indicator):Y=!1}if(W&&V&&_)if(o=function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0,u=t.label,c=t.value;i&&(c+=" ");var s=u?"".concat(u,": ").concat(c):c,d=X(n,r,l,"SECONDARY_VALUE"),f=$t(function(t,e,n,r){var i=n.cardElementsModifier,o=n.indicatorPosition,a=n.cardAlignment,l=n.cardDirection;return r[4]&&(t.color=r[4].color),{classes:["card__secondary-value","card__secondary-value--".concat(i),"card__secondary-value--".concat(o),"card__secondary-value--".concat(a),"card__secondary-value--".concat(l)],content:e,style:t}}(d,s,e,o),!0,a);return f.secondaryValueData={labelTitle:u,labelValue:c,wholeLabel:s,shouldSanitizeSecondaryValue:a},f}(W,k,P,e,z,D,x===(null!==(p=null===(h=mstrmojo)||void 0===h||null===(m=h.chart)||void 0===m||null===(v=m.model)||void 0===v||null===(y=v.enums)||void 0===y||null===(g=y.EnumDSSBaseFormType)||void 0===g?void 0:g.DssBaseFormHTMLTag)&&void 0!==p?p:7)||void 0!==j,I),e.components.cardSecondaryValues.push(o),M&&(e.parsedData[r].secondaryValueComponentIndex=e.components.cardSecondaryValues.length-1,e.isSecondaryLabelUpdated=!0),z){var Z=$t((c=(u=k).cardAlignment,d=u.cardDirection,{tag:"div",classes:["card__secondary-value-with-indicator-wrapper","card__secondary-value-with-indicator-wrapper--".concat(c),"card__secondary-value-with-indicator-wrapper--".concat(d)]}));Z.append(o),B.push(Z),e.components.cardSecondaryValueWithIndicatorWrappers.push(Z),R&&(l=function(t,e,n,r){var i=e.indicatorFontOptions,o=e.trendIndicatorValueType,a=t.differenceBetweenPrimaryAndSecondary,l=t[o],u=ya(a,e,l,r),c=u.indicatorColor,s=u.valueSign,d=X(i,n),f=$t(function(t,e){return{tag:"div",classes:["card__comparison-indicator"],content:e,style:t}}(ba(ba({},d),{},{color:c}),o===S.TREND_INDICATOR_VALUE_TYPE.PERCENT?"(".concat(s).concat(l,")"):"".concat(s).concat(l)));return f}(H,n,e,D),Z.append(l),e.components.cardIndicators.push(l),e.cardComponentReferences[U].trendIndicator={cssModifiers:k,indicator:H})}else{var J=$t({tag:"div",classes:["secondary-value-indicator-wrapper"]});if(Y&&J.classList.add("mocked-secondary-value-indicator-wrapper"),J.appendChild(o),L){a=function(t,e,n,r,i,o){var a,l=n.trendIndicatorValueType,u=(n.trendIndicatorShape,n.indicatorFontOptions),c=(S.TREND_INDICATOR_VALUE_TYPE.NUMERIC,e.differenceBetweenPrimaryAndSecondary),s=mstrmojo.string.encodeHtmlString(e[l]),d=s,f=ya(c,n,d,{}),p=f.arrowType,h=f.indicatorColor,m=(f.valueSign,X(u,r,o,"TREND_INDICATOR")),v=null===(a=i[8])||void 0===a?void 0:a.color,y=p?va(h,p):"",g="".concat(y,' <span class="trend-indicator__value---with-icon">').concat(s,"</span>");return m.color=null!=v?v:h,m.background=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=t.trim().replace(/^#/,""),r=3===n.length?n.split("").map(function(t){return t+t}).join(""):n.slice(0,6),i=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),a=parseInt(r.slice(4,6),16),l=e,u=function(t){return Math.round(255*(1-l)+l*t)},c=u(i),s=u(o),d=u(a);return"#".concat(c.toString(16).padStart(2,"0")).concat(s.toString(16).padStart(2,"0")).concat(d.toString(16).padStart(2,"0")).toUpperCase()}(h),$t(function(t,e,n,r,i){var o=e.indicatorPosition,a=e.cardElementsModifier,l=e.cardAlignment,u=e.cardDirection;return i[5]&&(t.color=i[5].color),{classes:["card__trend-indicator","card__trend-indicator--".concat(a),"card__trend-indicator--".concat(o),"card__trend-indicator--".concat(l),"card__trend-indicator--".concat(u)],content:r,style:t,otherAttributes:{title:n}}}(m,t,d,g,i),!1)}(k,H,n,e,D,I);var et="horizontal-card"===k.cardDirection;F&&!et?e.cardComponentReferences[U].cardBody.append(a):J.appendChild(a),e.components.cardIndicators.push(a),M&&(e.parsedData[r].trendIndicatorComponentIndex=e.components.cardIndicators-1),e.cardComponentReferences[U].trendIndicator={cssModifiers:k,indicator:H}}B.push(J)}if(!E&&W&&K&&b){f=$t(function(t){var e=t.indicatorPosition,n=t.cardDirection;return{classes:["card__trend-graph","card__trend-graph--".concat(e),"card__trend-graph--".concat(n)]}}(k)),Y&&f.classList.add("mocked-trend-graph");var rt=function(t,e,n,r,i,o,a,l){var u,c=n.minValue,d=n.maxValue,f=o.trendShape,p=o.trendFillColor,h=o.trendFillOpacity;l[6]&&(p=l[6].color,h=null!==(u=l[6].opacity)&&void 0!==u?u:100);var m,v=Zo(a,e,r,h,f,i,{minValue:c,maxValue:d}),y=v.scales,g=v.graphData,_=v.trendFillOpacityFraction,b=v.trendWidth,I=v.scaledMinValue,E=v.trendVerticalMargin,A=v.SVGHeight,M=ui(t).append("svg");switch(M.attr("width",b).attr("height",A),f){case $o:Uo(y,M,g,tt(p,h)),Bo(M,b,a.animationDuration),m=Yo(M,y,g,e);break;case qo:!function(t,e,n,r,i,o,a){var l=t.xScale,u=t.yScale,c="area-gradient-".concat(Math.random().toString(36).substring(7)),s=e.append("defs").append("linearGradient").attr("id",c).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");s.append("stop").attr("offset","0%").attr("stop-color",r).attr("stop-opacity",i),s.append("stop").attr("offset","100%").attr("stop-color",r).attr("stop-opacity","0");var d=To().curve(Lo).x(function(t){return l(t.index)}).y1(function(t){return u(t.value)}).y0(o>=0?u(o)+a:u(0));e.append("path").datum(n).attr("fill","url(#".concat(c,")")).attr("stroke","none").attr("d",d)}(y,M,g,p,_,I,E),Uo(y,M,g,p),Bo(M,b,a.animationDuration),m=Yo(M,y,g,e);break;case Qo:!function(t,e,n,r,i,o){var a=e.xBarScale,l=e.heightScale,u=e.barYScale;t.selectAll("bars").data(n).enter().append("rect").attr("class","trend__bar").attr("x",function(t){return a(t.index)}).attr("y",function(){return u(0)}).attr("width",a.bandwidth()).attr("fill",r).attr("fill-opacity",i).attr("stroke",r).attr("stroke-width",1.5).attr("height",0).transition().duration(o).attr("y",function(t){return u(t.value)}).attr("height",function(t){return l(t.value)})}(M,y,g,p,_,a.animationDuration),m=Ko(M,y,_,e)}i&&function(t,e,n,r,i){var o,a=t.line,l=a.color,u=a.shape,c=t.value,d=t.formattedValue,f=t.label,p=t.font,h=X(p,i),m=e.yScale,v=S.SELECTED_REFERENCE_LINE_SHAPE,y=u===v.THICK_LINE_TYPE?2:1;switch(u){case v.DOTTED_LINE_TYPE:o="1 1";break;case v.DASHED_LINE_TYPE:o="3 3";break;case v.THIN_LINE_TYPE:case v.THICK_LINE_TYPE:o="1 0"}n.append("line").attr("stroke",l).attr("x1",0).attr("x2",r).attr("y1",m(c)).attr("y2",m(c)).attr("stroke-width",y).attr("stroke-dasharray",o);var g=f?"".concat(f," ").concat(d):d,_=mstrmojo.VisUtility.measureTextWidth(g+s,Vo(Vo({},h),{},{lineHeight:1})),b=parseFloat(h.fontSize),I=n.append("text").attr("x",Math.max(r-_-2,2)).attr("y",m(c)-4-b>0?m(c)-4:m(c)+4+b);I.attr("class","card__reference-line-label").text(g).attr("font-family",h.fontFamily).attr("fill",h.color).attr("font-weight",h.fontWeight).attr("font-style",h.fontStyle).attr("text-decoration",h.textDecoration).attr("font-size",h.fontSize);var E=document.createElement("span");if(_>r){var A=nt({container:E,maxTextWidth:r-4,textData:{label:f,value:d,connector:" "},fontSize:parseInt(h.fontSize),fontStyle:h}).truncatedLabelWithValue;I.text(A)}E.remove()}(i,y,M,b,a),M.append("rect").attr("x",0).attr("y",0).attr("height",A).attr("width",b).style("fill","transparent").attr("class","trend__body");var w=m,C=w.tooltipHandler,T=w.resetHighlight;return M.on("tooltip",C).on("mouseout",function(){T(),a.tooltipInfo={isVisible:!1,isPositionFixed:!1,position:{},graphicModel:{}},a.hideTooltip(!1)}),M}(f,T,K,F,O,n,e,D);e.trendSVGs.push(rt),B.push(f),M&&(e.parsedData[r].trendComponentIndex=e.trendSVGs.length-1)}var it=$t("div");return it.classList.add("overlay-fill"),e.isMobile||it.classList.add("overlay-fill--not-mobile"),B.push(it),(i=e.cardComponentReferences[U].cardComponent).append.apply(i,B),_&&(a=A&&z?l:a,e.cardComponentReferences[U]=Sa(Sa({},e.cardComponentReferences[U]),{},{cardSecondaryValue:o,cardIndicator:a})),b&&(e.cardComponentReferences[U]=Sa(Sa({},e.cardComponentReferences[U]),{},{cardTrendGraph:f,cardTrendGraphData:{trendChartData:[],trend:K,isTrendIndicatorOnTop:F,referenceLine:O,properties:n}})),e.cardComponentReferences[U].cardComponent},Ta=function(t,e,n,r,i){var o,a,l,u,c,s,d,f,p,b,I,E,A,M,w,C,T,N,O=null!==(o=null===(a=mstrmojo)||void 0===a||null===(l=a.chart)||void 0===l||null===(u=l.model)||void 0===u||null===(c=u.enums)||void 0===c||null===(s=c.EnumDSSBaseFormType)||void 0===s?void 0:s.DssBaseFormHTMLTag)&&void 0!==o?o:7,D=t.label,x=t.primaryValue,j=t.graphicModel,P=t.thresholdTarget,L=t.breakByAttributeFormType,R=t.metricFormType,k=(t.trend,t.metricDescription),V=e.showMetricName,z=e.primaryValueFontOptions,U=e.labelFontOptions,B=e.trendShape,Y=e.iconShapeEnabled,K=e.iconShapeRadius,W=e.metricTooltipEnabled,H=e.imageSrc,G=e.searchIcon,$=n.cardDimensions,q=$.cardWidth,Q=$.cardHeight,Z=n.cardProperties,J=n.isTrendAttributeAdded,et=Z.cssModifiers,nt=Z.isStackedLayout,rt=function(t,e){var n,r,i,o=(null==t||null===(n=t.model)||void 0===n||null===(r=n.docModel)||void 0===r||null===(i=r.getCurrentPaletteColors)||void 0===i?void 0:i.call(r))||[];if(o.length>0){var a=o.map(function(t){var e,n,r;return null===(e=mstrmojo)||void 0===e||null===(n=e.color)||void 0===n||null===(r=n.decodeColor)||void 0===r?void 0:r.call(n,t)});return a[e%a.length]}return"#000000"}(n,r),it=B===S.TREND_SHAPE.NONE||Q<150,ot=J&&0===(null===(d=(null==n||null===(f=n.parsedData)||void 0===f||null===(p=f.filter)||void 0===p?void 0:p.call(f,function(t){return null==t?void 0:t.trend}))||[])||void 0===d?void 0:d.length),at=!J||ot,lt=t.epmv,ut=Sa({},e);ut.areaFillColor=(null==lt||null===(b=lt.formatConfig)||void 0===b?void 0:b.areaFillColor)||e.areaFillColor,ut.areaFillOpacity=(null==lt||null===(I=lt.formatConfig)||void 0===I?void 0:I.areaFillOpacity)||e.areaFillOpacity,ut.imgFillColor=(null==lt||null===(E=lt.formatConfig)||void 0===E?void 0:E.imgFillColor)||e.imgFillColor,ut.imgFillOpacity=(null==lt||null===(A=lt.formatConfig)||void 0===A?void 0:A.imgFillOpacity)||e.imgFillOpacity,ut.imgShapeFillColor=(null==lt||null===(M=lt.formatConfig)||void 0===M?void 0:M.imgShapeFillColor)||e.imgShapeFillColor,ut.imgShapeFillOpacity=(null==lt||null===(w=lt.formatConfig)||void 0===w?void 0:w.imgShapeFillOpacity)||e.imgShapeFillOpacity,ut.trendFillColor=(null==lt||null===(C=lt.formatConfig)||void 0===C?void 0:C.trendFillColor)||e.trendFillColor,ut.trendFillOpacity=(null==lt||null===(T=lt.formatConfig)||void 0===T?void 0:T.trendFillOpacity)||e.trendFillOpacity,"AUTO"===ut.imgFillColor&&(ut.imgFillColor=Y?"#ffffff":rt),"AUTO"===ut.areaFillColor&&at&&(ut.areaFillColor=rt),"AUTO"===ut.trendFillColor&&(ut.trendFillColor=rt),"AUTO"===ut.imgShapeFillColor&&(ut.imgShapeFillColor=rt);var ct={imgFillColor:ut.imgFillColor,imgFillOpacity:ut.imgFillOpacity,iconShapeEnabled:Y,iconShapeRadius:K,imgShapeFillColor:ut.imgShapeFillColor,imgShapeFillOpacity:ut.imgShapeFillOpacity,imgSrc:H||G},st=wa(n,ct,lt),dt=mstrmojo.string.encodeHtmlString(V?D.withMetricName:D.withoutMetricName),ft="<div class='card__label-text'><span title='".concat(dt,"'>").concat(dt,"</span></div>"),pt=[],ht=j.cardId,mt=function(t,e,n,r){var i=["card"];return t?(e||(i.push(_),1===r&&i.push("card-horizontal-no-trend-single-card")),e&&!n&&i.push(y),e&&n&&i.push(g)):(e||i.push(v),e&&!n&&i.push(h),e&&n&&i.push(m)),i}("horizontal-card"===et.cardDirection,!at,it,i),vt=nt?"".concat(q,"px"):"auto",yt=P[7]?tt(P[7].color,null!==(N=P[7].opacity)&&void 0!==N?N:100):tt(ut.areaFillColor,ut.areaFillOpacity),gt=$t(function(t,e,n,r,i){return{tag:"article",classes:i,style:{height:e,width:n,background:t},otherAttributes:{id:r}}}(yt,"".concat(Q,"px"),vt,ht,mt));n.cardComponentReferences[ht]={},gt.addEventListener("click",function(t){return na(t,n,j)});var _t=X(U,n,mt[1],"LABEL"),bt=L?L===O:void 0!==R,It=$t(function(t,e,n,r){var i=r.indicatorPosition,o=r.cardAlignment,a=r.cardElementsModifier,l=r.cardDirection;return n[2]&&(t.color=n[2].color),{tag:"header",classes:["card__label","card__label--".concat(o),"card__label--".concat(i),"card__label--".concat(a),"card__label--".concat(l)],content:e,style:t}}(_t,ft,P,et),!1,bt);if(W&&!L&&!(0,F.isEmpty)(k)){It.classList.add("card__label--with-info-icon");var Et=document.createElement("span");Et.classList.add("card__label-info-icon"),Et.addEventListener("mouseenter",function(t){var e;t.stopPropagation();var r={x:t.pageX,y:t.pageY};tu.call(n),null===(e=n.metricDescTooltip)||void 0===e||e.showDossierTtp([{n:"",v:k}],r)}),Et.addEventListener("mouseleave",function(t){var e;t.stopPropagation(),null===(e=n.metricDescTooltip)||void 0===e||e.unrender()});var At=It.querySelector(".card__label-text");At&&At.appendChild(Et)}var St=$t(function(t){var e=t.indicatorPosition,n=t.cardAlignment,r=t.cardElementsModifier,i=t.cardDirection;return{tag:"div",classes:["card__body","card__body--".concat(e),"card__body--".concat(n),"card__body--".concat(r),"card__body--".concat(i)],content:null}}(et)),Mt=X(z,n,mt[1],"PRIMARY_VALUE"),wt=void 0!==R,Ct=$t(function(t,e,n,r){var i=r.cardElementsModifier,o=r.comparisonIndicator,a=r.cardDirection;return e.color&&(t.color=e.color),n[3]&&(t.color=n[3].color),{classes:["card__primary-value","card__primary-value--".concat(i),"card__primary-value--".concat(o),"card__primary-value--".concat(a)],content:e.formatted,style:t,otherAttributes:{title:e.formatted}}}(Mt,x,P,et),!0,wt);St.append(Ct);var Tt=$t("div");if(Tt.appendChild(It),Tt.appendChild(St),Tt.classList.add("card__label-body-wrapper"),n.components.cardBodies.push(St),n.components.cardLabels.push(It),n.components.cardPrimaryValues.push(Ct),at)pt.push(st),pt.push(Tt);else{var Nt=$t({tag:"div",classes:["img-primary-label-wrapper"]});Nt.appendChild(st),Nt.appendChild(Tt),pt.push(Nt)}var Ot=$t("div");Ot.classList.add("overlay-fill"),n.isMobile||Ot.classList.add("overlay-fill--not-mobile"),pt.push(Ot),gt.append.apply(gt,pt),n.cardComponentReferences[ht]=Sa(Sa({},n.cardComponentReferences[ht]),{},{cardLabel:It,cardPrimaryValue:Ct,cardBody:St,cardComponent:gt,cardImgWrapper:st}),Ca(t,n,ut,r,void 0,void 0,mt[1],it),null!=t&&t.isCardOld&&gt.classList.add("card--old-card");var Dt=$t({tag:"div",classes:["card-wrapper"],style:{height:"".concat(Q,"px"),width:vt}});return Dt.appendChild(gt),Dt};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Na="slider--sliding",Oa="controls__dot-indicator--active",Da="prev",xa="next",ja="arrow",Pa=["ArrowLeft","ArrowRight","Delete","Enter","Backspace","End","Home"],La="small",Ra="medium",ka="large",Fa="-dot-indicator";mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Va=function(t){var e=t.sliderState,n=t.controlsLayout,i=t.vizHeight,o=t.cardWidth,a=t.cardsCount,l=t.elementRefs,u=t.properties,c=t.slideCard,s=1===u.cardStyle?r.LIGHT:r.NIGHT;return l.controlsContainer=$t({classes:["controls"]}),n===ja?function(t,e,n,r,i,o,a){var l=function(t){return t===xa?'<svg width="18" height="16" viewBox="0 0 18 16"><polygon id="Fill-3" fill="'.concat(o,'" points="5 16 13 9 5 2"></polygon></svg>'):'\n\t\t\t<svg width="18px" height="16px" viewBox="0 0 18 16"><polygon id="Fill-3" fill="'.concat(o,'" transform="translate(9.000000, 9.000000) scale(-1, 1) translate(-9.000000, -9.000000) " points="5 16 13 9 5 2"></polygon></svg>\n\t\t')},u=n<150||e<100?La:n>300&&e>300?ka:Ra;u===ka?i.controlsContainer.classList.add("controls--arrow-indicators"):i.controlsContainer.classList.add("controls--smaller");var c=["controls__arrow"];u!==ka&&c.push("controls__arrow--smaller");var s=u===La?["controls__prev-arrow--smaller"]:[];i.prevArrowControl=i.controlsContainer.appendChild($t(pa(Da,l(Da),c,s),!1)),u!==La&&function(t,e,n,r,i,o){var a=function(t){var e=t.target,r=t.key,i=e.textContent,o=n.toString().length;"ENTER"===r?e.blur():i.length>o&&(e.textContent=i.substring(0,o))},l=t.activeCardIndex,u=["controls__text-indicators"];e===Ra&&u.push("controls__text-indicators--smaller"),r.textIndicator=r.controlsContainer.appendChild($t({classes:u,style:{color:i}})),r.activeCardTextIndicator=r.textIndicator.appendChild($t({classes:["controls__active-card"],content:l,style:{borderBottom:"1px solid ".concat(i)},otherAttributes:{contentEditable:""}})),r.activeCardTextIndicator.addEventListener("keydown",function(e){var n=t.sliding,r=e.key,i=e.shiftKey;isNaN(parseInt(r))&&!Pa.includes(r)||i||n?e.preventDefault():a(e)}),r.activeCardTextIndicator.addEventListener("keyup",a),r.activeCardTextIndicator.addEventListener("blur",function(e){var r=t.activeCardIndex,i=e.target,a=parseInt(i.textContent);a>n?i.textContent=r:o(a)}),r.textIndicator.appendChild($t({classes:["controls__slash"],content:"/"})),r.textIndicator.appendChild($t({classes:["controls__total-cards"],content:n}))}(t,u,r,i,o,a),i.nextArrowControl=i.controlsContainer.appendChild($t(pa(xa,l(xa),c),!1)),i.prevArrowControl.addEventListener("click",function(){return a(t.activeCardIndex-1)}),i.nextArrowControl.addEventListener("click",function(){return a(t.activeCardIndex+1)})}(e,i,o,a,l,s,c):function(t,e,n,r,i){var o=S.FIRST_CARD_INDEX,a=t.activeCardIndex;n.controlsContainer.classList.add("controls--dot-indicators");for(var l=o;l<=e;l++){var u="".concat(l).concat(Fa),c=n.controlsContainer.appendChild($t(fa(u,r)));l===a&&c.classList.add(Oa)}n.controlsContainer.addEventListener("click",function(e){var n=t.activeCardIndex,r=e.target;if(r.classList.contains("controls__dot-indicator")){var o=parseInt(r.id);if(o===n)return;i(o)}})}(e,a,l,s,c),l.controlsContainer};function za(t){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},za(t)}function Ua(t,e,n){return(e=function(t){var e=function(t){if("object"!=za(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==za(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Ba={CARD_LABELS:"cardLabels",CARD_PRIMARY_VALUES:"cardPrimaryValues",CARD_SECONDARY_VALUES:"cardSecondaryValues",CARD_BODIES:"cardBodies",CARD_INDICATORS:"cardIndicators",CARD_SECONDARY_VALUE_WITH_INDICATOR_WRAPPERS:"cardSecondaryValueWithIndicatorWrappers"},Ya=Ua(Ua(Ua(Ua({},Ba.CARD_LABELS,"labelFontOptions"),Ba.CARD_PRIMARY_VALUES,"primaryValueFontOptions"),Ba.CARD_SECONDARY_VALUES,"secondaryValueFontOptions"),Ba.CARD_INDICATORS,"indicatorFontOptions");function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ha(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ga(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ha(Object(n),!0).forEach(function(e){$a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $a(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ka(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ka(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ba.CARD_LABELS,Ba.CARD_PRIMARY_VALUES,Ba.CARD_SECONDARY_VALUES,Ba.CARD_INDICATORS,mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var qa=function(t,e,n,r,i,o){var a=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=c.sliding,i=c.activeCardIndex,a=o.intervalAutoPlayId;r||e===i||(!n&&a&&(clearInterval(a),o.intervalAutoPlayId=null),c.sliding=!0,c.activeCardIndex=e,s.slider.classList.add(Na),s.slider.style.transform="translate(-".concat(t*e,"px)"))},l=function(){o.intervalAutoPlayId=setInterval(function(){var t=o.tooltipInfo,e=o.autoPlayEnabled,n=c.sliding;!e||n||t.isVisible||a(c.activeCardIndex+1,!0)},3400)},u=i.activeCardIndex,c={activeCardIndex:o.activeCardIndex||u,sliding:!1},s={vizContainer:null,slider:null,clonedFirstCard:null,clonedLastCard:null,controlsContainer:null,prevArrowControl:null,nextArrowControl:null,textIndicator:null,activeCardTextIndicator:null};c.activeCardIndex>n&&(c.activeCardIndex=n);var d=30*n>t?ja:"dot";return i.stackedAutoPlay&&l(),s.vizContainer=$t({tag:"div",classes:["stacked-container"],style:{width:"".concat(t,"px")}}),s.vizContainer.append(function(t,e,n,r,i,o,a){var l,u,c,s,d=S.FIRST_CARD_INDEX,f=30*r>n?ja:"dot",p=function(){var o=t.activeCardIndex;e.slider.classList.remove(Na),0===o?(o=r,e.slider.style.transform="translate(-".concat(n*o,"px)")):o===i.length+1&&(o=d,e.slider.style.transform="translate(-".concat(n*o,"px)")),t.activeCardIndex=o},h=function(){var n=t.activeCardIndex,r=e.activeCardTextIndicator;r&&(r.innerHTML="".concat(n))},m=function(){var n=t.activeCardIndex;e.controlsContainer.querySelector(".".concat(Oa)).classList.remove(Oa),document.getElementById("".concat(n).concat(Fa)).classList.add(Oa)},v=function(t,e){[{selector:".card__label",componentPropertyName:Ba.CARD_LABELS},{selector:".card__primary-value",componentPropertyName:Ba.CARD_PRIMARY_VALUES},{selector:".card__body",componentPropertyName:Ba.CARD_BODIES},{selector:".card__trend-indicator",componentPropertyName:Ba.CARD_INDICATORS},{selector:".card__secondary-value",componentPropertyName:Ba.CARD_SECONDARY_VALUES}].forEach(function(n){var r=n.selector,i=n.componentPropertyName,a=t.querySelector(r);if(a){if(i===Ba.CARD_SECONDARY_VALUES){var l=o.components[i][e].secondaryValueData;a.secondaryValueData=l}o.components[i].push(a)}})};return u=t.activeCardIndex,c=n*(r+2),e.slider=e.vizContainer.appendChild($t({tag:"section",classes:["slider"],style:{width:"".concat(c,"px")}})),e.clonedFirstCard=i[0].cloneNode(!0),v(e.clonedFirstCard,0),e.clonedLastCard=i[i.length-1].cloneNode(!0),v(e.clonedLastCard,i.length-1),(l=e.slider).append.apply(l,function(t){if(Array.isArray(t))return Wa(t)}(s=i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||function(t,e){if(t){if("string"==typeof t)return Wa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wa(t,e):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e.slider.insertAdjacentElement("afterbegin",e.clonedLastCard),e.slider.append(e.clonedFirstCard),e.slider.addEventListener("transitionend",function(){var e=t.activeCardIndex,n=o.autoPlayEnabled,r=o.intervalAutoPlayId;t.sliding=!1,p(),f===ja?h():m(),o.activeCardIndex=e;var i=JSON.parse(o.getProperty(O));n||o.setProperty(O,JSON.stringify(Ga(Ga({},i),{},$a({},w.ACTIVE_CARD_INDEX.name,e))),{suppressData:!0,clientUndoRedoCallback:function(){return o.refresh()}}),n&&!r&&a()}),e.slider.style.transform="translate(-".concat(n*u,"px)"),e.slider}(c,s,t,n,r,o,l)),s.vizContainer.append(Va({sliderState:c,controlsLayout:d,vizHeight:e,cardWidth:t,cardsCount:n,elementRefs:s,properties:i,slideCard:a})),s.vizContainer};function Qa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Za=function(t,e,n){var r,i,o=n.gridFixCardHeightEnabled,a=n.layoutType,l=n.cardAlignment,c=n.noTrendGraph,s=S.LAYOUT_TYPES,d=t.domNode,f=d.clientWidth,p=d.clientHeight;p-=2,f-=2;var h=n.cardPadding,m=e.length,v=Xa(n,m),y=o?0:p,g=a===s.STACKED?f:f/v+h/v-h,_=Ja(n,p,m,v,h,t);t.gridFixCardHeight=_,t.cardDimensions={cardWidth:g,cardHeight:_};var b,I,E=t.isComparisonMetricAdded,A=E,M=u(t.KPIType),w=$(t,M.TREND),C=m>1?g:f,T=m>1?_:p,N=E||w,O={cssModifiers:(I=(b={isTrendIndicatorOnTop:A,showSecondaryValue:N,isTrendPopulatedInDropZone:w,cardAlignment:l,isComparisonMetricAdded:E,isCardVertical:w&&!c?T>C:T/C>2/3}).showSecondaryValue?"with-secondary":"no-trend",{cardAlignment:"left-alignment",cardElementsModifier:I=b.isTrendPopulatedInDropZone?"with-trend":I,indicatorPosition:b.isTrendIndicatorOnTop?"kpi-on-top":"kpi-on-bottom",comparisonIndicator:b.isComparisonMetricAdded?"with-comparison":"no-comparison",cardDirection:b.isCardVertical?"vertical-card":"horizontal-card"}),isTrendIndicatorOnTop:A,cardAlignment:l,showSecondaryValue:N,isComparisonMetricAdded:E,isStackedLayout:a===s.STACKED};t.cardProperties=O,t.cardComponentReferences={};var D,x,j,P=e.map(function(e,r){return Ta(e,n,t,r,m)});if(a===s.STACKED&&m>1)D=qa(g,p,m,P,n,t);else{var L,R=["container"];a===s.HORIZONTAL?R.push("container--horizontal"):a===s.VERTICAL&&R.push("container--vertical"),(D=$t((x=y,{tag:"section",classes:R,style:{gridTemplateColumns:"repeat(".concat(v,", 1fr)"),minHeight:"".concat(x,"px"),border:"1px solid transparent"}}))).style.setProperty("--grid-gap","".concat(n.cardPadding,"px")),a===s.HORIZONTAL?D.style.setProperty("--grid-column-gap","".concat(n.cardPadding,"px")):a===s.VERTICAL&&D.style.setProperty("--grid-row-gap","".concat(n.cardPadding,"px")),(L=D).append.apply(L,function(t){if(Array.isArray(t))return Qa(t)}(j=P)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(j)||function(t,e){if(t){if("string"==typeof t)return Qa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(t,e):void 0}}(j)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}var k=t.getFormats();if(D.style.setProperty("--card-border",k.border),D.style.setProperty("--card-border-radius","".concat(k.radius,"px")),null!==(r=mstrApp)&&void 0!==r&&null!==(i=r.supportFeature)&&void 0!==i&&i.call(r,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)){var F,V,z,U,B,Y=k["shadow-color"],K=yt(null!==(F=k["shadow-angle"])&&void 0!==F?F:0,null!==(V=k["shadow-distance"])&&void 0!==V?V:0),W="".concat(K.x,"px ").concat(K.y,"px ").concat(null!==(z=k["shadow-size"])&&void 0!==z?z:0,"px 0px ").concat(Y?mt(Y,k["shadow-opacity"]):"transparent"),H="".concat(K.x,"px ").concat(K.y,"px 10px 0px ").concat(mt(Y&&"transparent"!==Y?Y:"#9A9B9C",60));D.style.setProperty("--card-box-shadow",W),D.style.setProperty("--card-box-shadow-hover",H);var G=null===(U=t.parent)||void 0===U||null===(B=U.domNode)||void 0===B?void 0:B.querySelector(".mstrmojo-UnitContainer-CustomShadow");G&&(G.style.setProperty("--card-border-radius","".concat(k.radius,"px")),G.style.setProperty("--card-box-shadow",W),G.style.setProperty("--card-box-shadow-hover",H))}return D},Xa=function(t,e){var n=t.gridColumnCount,r=t.layoutType,i=S.LAYOUT_TYPES;switch(r){case i.GRID:return Math.min(e,n);case i.HORIZONTAL:return e;case i.VERTICAL:return 1}},Ja=function(t,e,n,r,i,o){var a=S.LAYOUT_TYPES,l=t.gridFixCardHeight,u=t.gridFixCardHeightEnabled;switch(t.layoutType){case a.GRID:var c=Math.ceil(n/r);return u?l:Math.max((e-i*(c-1))/c,75);case a.HORIZONTAL:case a.STACKED:return e;case a.VERTICAL:return e/n-i*(n-1)/n}};function tl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return el(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?el(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var nl=function(t,e,n){var r=e.trendIndicatorShape,i=t.cardDimensions,o=t.components,a=t.isComparisonMetricAdded,l=Ba.CARD_BODIES,u=Ba.CARD_INDICATORS,c=(Ba.CARD_SECONDARY_VALUES,Ba.CARD_SECONDARY_VALUE_WITH_INDICATOR_WRAPPERS),s=o.cardBodies,d=o.cardSecondaryValueWithIndicatorWrappers;at(s,"height","100%"),at(s,"width","100%"),at(d,"height","100%");for(var f=function(){var n=tl(h[p],2),o=n[0],s=n[1];if([l,c].includes(o))return 0;if(!1===t.shouldFontBeChanged[o])return 0;var d=o===u;s.forEach(function(t){var n,l,c,s,f,p=d&&r===S.TREND_INDICATOR_SHAPE.ARROW&&null!==t.querySelector(".trend-indicator__icon");if(e[Ya[o]].fontSteps,o===u&&a){var h=t.closest(".card").querySelector(".card__secondary-value").offsetWidth,m=i.cardWidth,v=.16*m,y=Math.floor((l=(n={partialValue:m-h-v,totalValue:m}).partialValue,c=n.totalValue,100*Math.abs(l/c)));t.style.width="".concat(y,"%"),t.style.maxWidth="".concat(y,"%")}if(p){var g=t.querySelector(".trend-indicator__icon"),_=(s=t.style.fontSize,(f=parseInt(s)/Math.sqrt(2))+.1*f),b=parseInt(t.style.width);g.style.width="".concat(_,"px"),g.style.height="".concat(_,"px"),t.style.padding=0,t.style.textAlign="left",t.style.width="".concat(b+_,"px")}})},p=0,h=Object.entries(o);p<h.length;p++)f();at(s,"height","auto"),at(s,"width","84%"),at(d,"height","auto")},rl=function(t){var e=t.cardDimensions,n=t.components,r=Ba.CARD_BODIES,i=Ba.CARD_SECONDARY_VALUE_WITH_INDICATOR_WRAPPERS,o=Ba.CARD_PRIMARY_VALUES,a=Ba.CARD_LABELS,l=n.cardBodies,u=n.cardSecondaryValueWithIndicatorWrappers;at(l,"height","100%"),at(l,"width","100%"),at(u,"height","100%");for(var c={},s={},d=function(){var n,l,u=tl(p[f],2),d=u[0],h=u[1];if([r,i].includes(d))return 0;var m=[];if(0===h.length)return 0;var v=R(h[0],"width",e),y=R(h[0],"height",e);if(s[d]={width:v,height:y},h.forEach(function(t){t.style.fontSize="".concat(t.style.fontSize,"px");var e=parseInt(t.style.fontSize),n=it(t,e);m.push(n.width),l||(l=n.height)}),m.sort(function(t,e){return t-e}),void 0===t.shouldFontBeChanged[d]&&0!==t.shouldFontBeChanged.length)return 0;n=d===o?m[m.length-1]:d===a?m[Math.ceil(.75*m.length)-1]:m.reduce(function(t,e){return t+e},0)/m.length,c[d]={width:n,height:l}},f=0,p=Object.entries(n);f<p.length;f++)d();return at(l,"height","auto"),at(l,"width","84%"),at(u,"height","auto"),{dimensionsOfText:c,dimensionsOfContainer:s}};function il(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||al(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=al(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function al(t,e){if(t){if("string"==typeof t)return ll(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ll(t,e):void 0}}function ll(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var ul=function(t){var e,n=0,r=ol(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=parseInt(i.style.fontSize)}}catch(t){r.e(t)}finally{r.f()}return n/t.length},cl=function(t){return Math.min.apply(Math,function(t){if(Array.isArray(t))return ll(t)}(e=t.map(function(t){var e=t.style;return parseInt(e.fontSize)}))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||al(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var e},sl=function(t){var e=t.length,n=t.map(function(t){return t.textContent});n.sort(function(t,e){return t.length-e.length});var r=n[Math.ceil(.75*e)-1],i=t.find(function(t){return t.textContent===r});return parseInt(i.style.fontSize)},dl=function(t,e){for(var n=t.components,r=Ba.CARD_BODIES,i=Ba.CARD_PRIMARY_VALUES,o=Ba.CARD_LABELS,a=Ba.CARD_INDICATORS,l=Ba.CARD_SECONDARY_VALUES,u={},c=null,s=0,d=Object.entries(n);s<d.length;s++){var f=il(d[s],2),p=f[0],h=f[1];if(p!==r&&!1!==t.shouldFontBeChanged[p]){var m=void 0;p===i?m=cl(h):p===o?m=sl(h):p===l?c=m=ul(h):m=p===a&&null!==c?c:ul(h),u[p]=rt(m);var v,y=ol(h);try{for(y.s();!(v=y.n()).done;)v.value.style.fontSize="".concat(m,"px")}catch(t){y.e(t)}finally{y.f()}}}if(n[a]&&n[l]&&null===c){var g=n[l];if(g&&g.length>0){var _,b=ul(g),I=ol(n[a]);try{for(I.s();!(_=I.n()).done;)_.value.style.fontSize="".concat(b,"px")}catch(t){I.e(t)}finally{I.f()}u[a]=rt(b)}}return nl(t,e),u};function fl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pl(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pl(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});function hl(t,e,n){var r=this;setTimeout(function(){r.savePropertyAndUpdateWidget(t,e,n)})}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var ml="second",vl="minute",yl="hour",gl="day",_l={};_l[ml]=1e3,_l[vl]=60*_l[ml],_l[yl]=60*_l[vl],_l[gl]=24*_l[yl],_l.week=7*_l[gl],_l.month=30*_l[gl],_l.year=365*_l[gl],mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});function bl(t){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(t)}function Il(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,El(r.key),r)}}function El(t){var e=function(t){if("object"!=bl(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bl(e)?e:e+""}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var Al=new(function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pendingList=new Set,this.actions=[],this.flushCallback=e},e=[{key:"start",value:function(t){this.pendingList.add(t)}},{key:"finish",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.pendingList.has(t)&&(this.pendingList.delete(t),e&&this.actions.push(e)),setTimeout(function(){var t;0===n.pendingList.size&&n.actions.length>0&&(null===(t=n.flushCallback)||void 0===t||t.call(n,n.actions,r),n.actions=[])},0)}}],e&&Il(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}())(function(t,e){var n,r,i,o=null===(n=mstrApp)||void 0===n||null===(r=n.rootCtrl)||void 0===r||null===(i=r.docCtrl)||void 0===i?void 0:i.model;if(o){var a=!1,l={success:function(t){a=!0;try{var e=vt(t.data,"epm"),n=[];if(e.forEach(function(e){var r;if(null!==(r=t.pukeys)&&void 0!==r&&r.includes(e.k)){var i,a;n.push(e.k);var l=o.getVisualizationByKey(e.k);null!=l&&null!==(i=l.boxContent)&&void 0!==i&&null!==(a=i.dataInterface)&&void 0!==a&&a.data&&(l.boxContent.dataInterface.data.epm=e.epm,l.boxContent.plot())}}),0===n.length)return;o.updateDataCache(t.data,n.join(""))}catch(t){console.info("IconicVizUpdateQueue - failed to process server response",t)}},complete:function(){var t;null===(t=mstrApp)||void 0===t||t.hideWait(),a&&!e&&function(){var t;if(null!=o&&null!==(t=o.controller)&&void 0!==t&&t.cmdMgr){var e=o.controller.cmdMgr.pos,n=e-1;if(e>0){var r=o.controller.cmdMgr.cmds[n],i={};r&&Object.prototype.hasOwnProperty.call(r,"urInfo")&&(i.urInfo=r.urInfo),r&&Object.prototype.hasOwnProperty.call(r,"skipUIState")&&(i.skipUIState=r.skipUIState),o.controller.cmdMgr.combineMultipleCMDs(n,e,i)}else 0===e&&o.controller.cmdMgr.reset()}}()}};if(e){var u={taskId:"mojoRWManipulation",params:JSON.stringify({actions:t,style:{params:{treesToRender:2},name:"RWIVEMojoStyle"}}),messageId:mstrApp.getMsgID(),styleName:"RWIVEMojoStyle",rwb:mstrApp.rootCtrl.docCtrl.model.bs};mstrApp.serverRequest(u,l)}else try{var c;if(2===(null===(c=o.controller.cmdMgr)||void 0===c?void 0:c.state))return;o.controller.submitUndoRedoUpdates(t,null,l,{style:{params:{treesToRender:2}}})}catch(t){console.info("IconicVizUpdateQueue - failed to submitUndoRedoUpdates",t)}}});const Sl=Al;var Ml=["id","n"];function wl(t){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(t)}function Cl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Nl(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Tl(t){return function(t){if(Array.isArray(t))return Ol(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(t,e){if(t){if("string"==typeof t)return Ol(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ol(t,e):void 0}}function Ol(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Dl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dl(Object(n),!0).forEach(function(e){jl(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function jl(t,e,n){return(e=function(t){var e=function(t){if("object"!=wl(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=wl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wl(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pl(){var t,e;return null===(t=mstrApp)||void 0===t||null===(e=t.supportFeature)||void 0===e?void 0:e.call(t,mstrmojo.vi.enums.EnumFeatures.SUPPORT_MULTIPLE_CARDS_ENHANCED_KPI)}function Ll(t){var e,n,r,i,o,a,l,u,c=this;if(c.getDocModel()&&Pl()&&!ut(c)&&(null===(e=mstrApp)||void 0===e||null===(n=e.isWSLocalMode)||void 0===n||!n.call(e))){var s=null!==(r=null==t||null===(i=t.info)||void 0===i?void 0:i.ignoreUndoRedo)&&void 0!==r&&r,d=mstrApp.isDossier||c.isMobile;if(!d||c.dataInterface.data.epm){var f=c.dataInterface.data.dz,p=c.dataInterface.data.gts,h=(null==p||null===(o=p.col[0])||void 0===o?void 0:o.es)||[];if(0!==h.length){var m=null===(a=f.BreakBy.TemplateUnit)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.id,v=null===(u=p.row)||void 0===u?void 0:u.find(function(t){return t.id===m}),y=v?xl({},v):null,g=h.length>=3||!y;y&&(y.es=Object.values((y.es||[]).reduce(function(t,e){var n=e.id,r=e.n,i=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,Ml);return t[n]||(t[n]=xl({id:n,n:""},i)),t[n].n+=(t[n].n?" ":"")+r,t},{})));var _={contexts:[]};g?h.forEach(function(t){var e=t.n;e&&!c.searchResultMapping[e]&&_.contexts.push({name:e})}):y.es.forEach(function(t){var e=t.n;e&&!c.searchResultMapping[e]&&_.contexts.push({name:e})}),Sl.start(c.k),function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n)if(t&&t.contexts&&0!==t.contexts.length){if(!mstrApp.fetchRestApi&&!mstrApp.fetchRestApiWithoutProjectAsync)return console.error("Required libraries or APIs are not available"),void n(null);var i=mstrmojo.hash.walk("rootCtrl.docCtrl.model.mid",mstrApp),o=!1,a=function(t){o&&mstrApp.hideWait(),i===mstrmojo.hash.walk("rootCtrl.docCtrl.model.mid",mstrApp)&&n(t)};try{var l="/searches/recommendation/icons",u=new AbortController,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:u.signal},s=setTimeout(function(){u.abort()},e);r||(mstrApp.showWait(),o=!0);var d=function(t){clearTimeout(s),a(t)},f=function(t){clearTimeout(s),console.error("Error during searchIcons call:",t),a(null)};mstrApp.fetchRestApi?mstrApp.fetchRestApi(l,!1,c).then(d,f):mstrApp.fetchRestApiWithoutProjectAsync?(c.body=t,c.headers={},mstrApp.fetchRestApiWithoutProjectAsync(l,c,{success:d,failure:f})):(console.error("No suitable fetch API available"),a(null))}catch(t){console.error("search icon run into failure",t),a(null)}}else n(null)}(_,2e4,function(t){var e=t&&t.contexts?Object.fromEntries(t.contexts.map(function(t){return[t.name,t.icons[0]]})):{};if(c.getDocModel()){c.searchResultMapping=xl(xl({},c.searchResultMapping),e);var n=function(t,e,n,r){var i=[],o=[],a=[{epmk:i,epmv:o}],l=null==n?void 0:n.id,u=t.dataInterface.data.epm;u||(t.dataInterface.data.epm=a);var c=null==u?void 0:u.find(function(t){var e=t.epmk.map(function(t){return t.ob.did}),r=e.filter(function(t){return""===t}).length>0;return!(n||!r||1!==e.length)||!!(n&&e.includes(l)&&r&&2===e.length)});return i.push({ob:{did:"",tp:4}}),n&&i.push({ob:{did:l,tp:n.otp}}),e.forEach(function(e){var i,a=null===(i=mstrmojo.VisUtility.isDerivedMetric)||void 0===i?void 0:i.call(t,e.oid),u=null!=a&&a.isDM?a.id:e.oid;if(n)n.es.forEach(function(i){var s=r?t.searchResultMapping[e.n]:t.searchResultMapping[i.n],d=t.isMobile&&i.oid||i.id,f=Fl(l,d,e.oid,(null==c?void 0:c.epmv)||[]),p=[{eid:u,tp:4,isDM:null==a?void 0:a.isDM},{eid:i.id,tid:l,tp:n.otp}];f?Rl(p,f,s,o):kl(p,s,o,c)});else{var s=Fl(void 0,void 0,e.oid,(null==c?void 0:c.epmv)||[]),d=t.searchResultMapping[e.n],f=[{eid:u,tp:4,isDM:null==a?void 0:a.isDM}];s?Rl(f,s,d,o):kl(f,d,o,c)}}),o.length>0?a:null}(c,h,y,g),r=void 0;n&&(c.plot(),d||(r=function(t,e){return{act:"updateElementsPropertiesMap",epm:e,nodeKey:t,partialRetrieval:{nodes:[t]},partialUpdate:{nodes:[t]}}}(c.k,n))),Sl.finish(c.k,r,s)}},d)}}}}function Rl(t,e,n,r){var i=e.v.format_config?JSON.parse(e.v.format_config):{};if(!e.v.image_id&&!i.imageSrc&&(i.searchIcon||"")!==(n||"")){var o=Vl(t);e.k={chn:o},i.searchIcon=n,e.v.format_config=JSON.stringify(i),r.push(e)}}function kl(t,e,n,r){if(e){var i=Vl(t),o={};o.k={chn:i},o.v={};var a,l={};l.searchIcon=e,o.v.format_config=JSON.stringify(l),o.v.image_id="",n.push(o),r&&(null===(a=r.epmv)||void 0===a||a.push(o))}}function Fl(t,e,n,r){return Array.isArray(r)&&r.find(function(r){var i,o=(null===(i=r.k)||void 0===i?void 0:i.chn)||[];if(o.length!==(t?2:1))return!1;var a=o.some(function(t){var e;return(null===(e=t.mt)||void 0===e?void 0:e.did)===n}),l=!t||o.some(function(n){var r,i;return((null===(r=n.at)||void 0===r?void 0:r.did)===t||(null===(i=n.ei)||void 0===i?void 0:i.includes(t)))&&n.ei===e});return a&&l})||null}function Vl(t){var e=[];return t.forEach(function(t){var n=t.tp,r=t.tid;4===n?t.isDM?e.push({emt:2,ei:t.eid}):e.push({emt:2,mt:{did:t.eid,tp:4,ql:0}}):e.push({emt:1,ei:t.eid,at:{did:r,tp:t.tp,ql:0}})}),e}function zl(){var t,e,n,r=null===(t=this.parent)||void 0===t||null===(e=t.domNode)||void 0===e?void 0:e.querySelector(".mstrmojo-UnitContainer-CustomShadow");r&&"hidden"!==r.style.visibility&&(r.style.visibility="hidden"),null===(n=this.domNode)||void 0===n||n.classList.add("img-kpi-scrolling")}function Ul(){var t,e,n,r=null===(t=this.parent)||void 0===t||null===(e=t.domNode)||void 0===e?void 0:e.querySelector(".mstrmojo-UnitContainer-CustomShadow");r&&""!==r.style.visibility&&(r.style.visibility=""),null===(n=this.domNode)||void 0===n||n.classList.remove("img-kpi-scrolling")}function Bl(){var t,e=this;(null===(t=e.properties)||void 0===t?void 0:t.layoutType)!==S.LAYOUT_TYPES.STACKED&&e.scrollNode.classList.contains("hasVertical")&&(e.isScrolling||(e.isScrolling=!0,zl.call(e)),e.scrollEndTimer&&clearTimeout(e.scrollEndTimer),e.scrollEndTimer=setTimeout(function(){e.isScrolling=!1,Ul.call(e)},e.SCROLL_END_DELAY))}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.requiresCls("mstrmojo.CustomVisBase","mstrmojo.ui._HasScroller","mstrmojo._SupportRealtimeStreaming");var Yl=function(t){var e=!1,n=t.updatedCategory,r=t.isBreakByAttributeAdded,i=t.isOnlyPrimaryValueRendered;t.parsedData.forEach(function(o,a){var l=o.graphicModel.cardId;(!r||o.breakByAttributeName===n)&&(function(t,e,n,r){var i=t.cardComponentReferences,o=t.isComparisonKPI,a=t.isComparisonMetricAdded,l=t.isTrendAttributeAdded,u=i[r],c=u.cardTrendGraphData,s=u.cardPrimaryValue,d=u.cardIndicator,f=c.isTrendIndicatorOnTop,p=c.referenceLine,h=c.properties,m=e.trendChartData,v=e.trend,y=e.indicator,g=e.trendComponentIndex,_=e.thresholdTarget;if(s.textContent=e.primaryValue.formatted,(l||o&&a)&&1!==m.length&&(function(t,e,n){var r,i,o=null!==(r=t.secondaryValueComponentIndex)&&void 0!==r?r:e,a=null===(i=t.secondaryValue)||void 0===i?void 0:i.value,l=n.components.cardSecondaryValues[o].secondaryValueData,u=l.labelTitle;l.labelValue=a,l.labelTitle=t.secondaryValue.label,n.isSecondaryLabelUpdated=u!==(null==l?void 0:l.labelTitle),n.secondaryMetricName=l.labelTitle,n.isComparisonMetricAdded&&(l.labelValue+=" "),0===n.truncatedLabels.length&&(n.components.cardSecondaryValues[o].textContent="".concat(l.labelTitle,": ").concat(l.labelValue))}(e,n,t),function(t,e,n,r,i){var o=t.isComparisonKPI,a=t.isComparisonMetricAdded;(!o&&t.properties.trendIndicatorEnabled||o&&t.properties.comparisonIndicatorEnabled)&&(e.indicatorFontOptions.fontSize=n.style.fontSize,a?function(t,e,n,r){var i=n.trendIndicatorValueType,o=e.differenceBetweenPrimaryAndSecondary,a=e[i],l=ya(o,n,a,r),u=l.indicatorColor,c=l.valueSign,s=i===S.TREND_INDICATOR_VALUE_TYPE.PERCENT?"(".concat(c).concat(a,")"):"".concat(c).concat(a);t.textContent=s,t.style.color=u}(n,r,e,i):function(t,e,n){var r=n.trendIndicatorValueType,i=n.trendIndicatorShape,o=S.TREND_INDICATOR_VALUE_TYPE.NUMERIC,a=e.differenceBetweenPrimaryAndSecondary,l=mstrmojo.string.encodeHtmlString(e[r]),u=ya(a,n,l,{}),c=u.arrowType,s=u.indicatorColor,d=u.valueSign;if(i===S.TREND_INDICATOR_SHAPE.ARROW){var f=c?va(s,c,!0):"";t.firstChild.innerHTML=f,t.lastChild.textContent=r===o?"".concat(d).concat(l):"".concat(d," ").concat(l),t.style.color=s}else l=r===o?"".concat(d).concat(l):"".concat(d," ").concat(l),t.textContent=l,t.style.backgroundColor=s}(n,r,e))}(t,h,d,y,_),l)){var b=null!=g?g:n;!function(t,e,n,r,i,o,a,l){var u=a.trendShape,c=a.trendFillColor,s=a.trendFillOpacity,d=a.axisScale,f=l.minValue,p=l.maxValue,h=r.isBreakByAttributeAdded,m=r.updatedCategory,v=r.cardDetails;if(d!==S.AXIS_SCALE.GLOBAL){var y=d===S.AXIS_SCALE.SYNCED_ALL?r.parsedData:r.parsedData.filter(function(t){return t.metricId===n});f=Math.min.apply(Math,Wo(y.map(function(t){var e;return(null===(e=t.trend)||void 0===e?void 0:e.minValue)||t.trendChartData[0].raw}))),p=Math.max.apply(Math,Wo(y.map(function(t){var e;return(null===(e=t.trend)||void 0===e?void 0:e.maxValue)||t.trendChartData[0].raw})))}h&&v.forEach(function(t){t.breakByAttributeName===m&&(t.trend[n]=l)});var g,_=Zo(r,e,i,s,u,o,{minValue:f,maxValue:p}),b=_.scales,I=_.graphData,E=_.trendFillOpacityFraction,A=_.trendWidth,M=_.trendVerticalMargin;g=u===$o?function(t,e,n,r){var i=e.xScale,o=e.yScale,a=Co().curve(Lo).x(function(t){return i(t.index)}).y(function(t){return o(t.value)});return t.selectAll(".trend-graph__tooltip-marker").remove(),t.select("path").datum(n).attr("d",a),Yo(t,e,n,r)}(t,b,I,e):u===qo?function(t,e,n,r,i,o){var a=e.xScale,l=e.yScale,u=To().curve(Lo).x(function(t){return a(t.index)}).y1(function(t){return l(t.value)}).y0(i>=0?l(i)+o:l(0));return t.selectAll(".trend-graph__tooltip-marker").remove(),t.selectAll("path").datum(n).attr("d",u),Yo(t,e,n,r)}(t,b,I,e,f,M):function(t,e,n,r,i,o){var a=e.xBarScale,l=e.barYScale,u=e.heightScale,c=t.selectAll(".trend__bar").data(n);return c.enter().append("rect").attr("class","trend__bar").merge(c).style("fill",i).attr("fill-opacity",o).attr("stroke",i).attr("stroke-width",1.5).attr("x",function(t){return a(t.index)}).attr("width",a.bandwidth()).attr("y",function(t){return l(t.value)}).attr("height",function(t){return u(t.value)}),Ko(t,e,o,r)}(t,b,I,e,c,E),o&&function(t,e,n,r,i){var o=n.value,a=n.font,l=e.yScale;t.select("line").attr("x1",0).attr("x2",i).attr("y1",l(o)).attr("y2",l(o)).raise();var u=X(a,r),c=parseFloat(u.fontSize),s=l(o)-4,d=l(o)+4,f=s-c>0?s:d+c;t.select("text").attr("y",f).raise()}(t,b,o,r,A);var w=g,C=w.tooltipHandler,T=w.resetHighlight;t.on("tooltip",C).on("mouseout",function(){T(),r.tooltipInfo={isVisible:!1,isPositionFixed:!1,position:{},graphicModel:{}},r.hideTooltip(!1)})}(t.trendSVGs[b],m,e.metricId,t,f,p,h,v)}}(t,o,a,l),e=e||o.trendChartData.length>1&&o.primaryValue.formatted.length!==o.trendChartData.at(-2).formatted.length||!i&&function(t,e){var n,r,i,o,a,l,u=e.properties,c=e.truncatedLabels,s=e.isSecondaryLabelUpdated,d=e.components,f=u.trendIndicatorValueType,p=S.TREND_INDICATOR_VALUE_TYPE.NUMERIC,h=null===(n=t.secondaryValue)||void 0===n?void 0:n.value,m=f===p?null===(r=t.previousIndicator)||void 0===r?void 0:r.numericValue:null===(i=t.previousIndicator)||void 0===i?void 0:i.percentValue,v=f===p?null===(o=t.indicator)||void 0===o?void 0:o.numericValue:null===(a=t.indicator)||void 0===a?void 0:a.percentValue;return h&&(null===(l=t.previousSecondaryValue)||void 0===l?void 0:l.length)!==(null==h?void 0:h.length)||h&&s||(null==m?void 0:m.length)!==v.length||0===c.length||c.length!==d.cardSecondaryValues.length}(o,t)),o.isCardOld&&t.cardComponentReferences[l].cardComponent.classList.add("card--old-card")}),t.truncatedLabels.length>0&&t.truncatedLabels.length!==t.components.cardSecondaryValues.length&&(t.isSecondaryLabelUpdated=!0),e&&function(t,e){var n=e.isSecondaryLabelUpdated;switch(t.textSizeType){case S.TEXT_SIZE_TYPE.FIXED:""===t.labelFontOptions.fontSize?(nl(e,t),dl(e,t),e.componentsUnifiedFontSizesInPt=dl(e,t)):nl(e,t);break;case S.TEXT_SIZE_TYPE.UNIFIED:0!==e.shouldFontBeChanged.length||n||(nl(e,t),dl(e,t));var r={};r.oldDimensions=rl(e),nl(e,t),r.newDimensions=rl(e),Object.keys(r.newDimensions.dimensionsOfText).length!==Object.keys(r.oldDimensions.dimensionsOfText).length?Object.keys(r.newDimensions.dimensionsOfText).forEach(function(t){e.shouldFontBeChanged[t]=!0}):function(t){var e=t.oldDimensions,n=t.newDimensions,r=e.dimensionsOfText,i=n.dimensionsOfText,o=n.dimensionsOfContainer,a={};Object.values(i).forEach(function(t){if(r[t])if(i[t].width===r[t].width)a[t]=!1;else if(i[t].width>1*o[t].width)a[t]=!0;else if(i[t].width<=1*o[t].width&&i[t].width>=1*r[t].width)a[t]=!1;else{var e=Math.max(i[t].width/o[t].width*1,i[t].height/o[t].height*1);a[t]=!(e>=.9)}else a[t]=!0})}(r);var i=Ba.CARD_SECONDARY_VALUES;n&&(e.shouldFontBeChanged[i]=!0),!0===e.shouldFontBeChanged[i]&&(e.truncatedLabels=[]),nl(e,t),dl(e,t);break;case S.TEXT_SIZE_TYPE.FIT_TO_CONTAINER:nl(e,t)}for(var o=e.components,a=0,l=Object.entries(o);a<l.length;a++){var u=fl(l[a],2),c=u[0],s=u[1];[Ba.CARD_BODIES,Ba.CARD_SECONDARY_VALUE_WITH_INDICATOR_WRAPPERS].includes(c)||(at(s,"maxWidth","none"),s.forEach(function(t){it(t,t.style.fontSize).width<=parseInt(t.style.width)&&(t.style.overflow="visible")}))}}(t.properties,t),function(t){var e=t.parsedData,n=t.truncatedLabels,r=t.isBreakByAttributeAdded,i=t.updatedCategory,o=t.components;e.forEach(function(e,a){if(t.isComparisonMetricAdded&&(e.secondaryValue.value+=" "),!(0===n.length||r&&e.breakByAttributeName!==i)){var l,u=null!==(l=e.secondaryValueComponentIndex)&&void 0!==l?l:a;o.cardSecondaryValues[u].textContent="".concat(n[u]).concat(e.secondaryValue.value)}})}(t)};function Kl(t,e,n,r,i){var o=t.isComparisonMetricAdded,a=t.isTrendAttributeAdded,l=t.isBreakByAttributeAdded,u=t.isComparisonKPI,c=t.updatedCategory,s=t.metricFormattingRules,d=!a&&u?e.at(-1).v:function(t,e,n,r,i){var o=t.isComparisonMetricAdded,a=t.timeFilter,l=t.properties.secondaryMetricName,u=i.trend,c=i.trendChartData,s=i.primaryValue,d=Object.keys(n.metricSelector),f=new Date(r),p=Ut(n.headers[0].attributeSelector,n.idValueMapping,d,i.metricId);c.push({raw:s.raw,formatted:s.formatted,graphicModel:p,timestamp:r,timestampDate:f}),!i.isMoreDataThanFilter&&c[0].timestampDate<=a.timeRangeStart&&(i.isMoreDataThanFilter=!0,i.cardSecondaryLabel=l);var h=Wl(a,c);return i.trend=function(t,e,n,r){var i=n?Math.min(n.minValue,r):Math.min(r,t[0].raw),o=n?Math.max(n.maxValue,r):Math.max(r,t[0].raw);return{minValue:i=i===o&&i>0?0:i,maxValue:o}}(c,0,u,s.raw),i.trendChartData=h,o?e.at(-1).v:h[0].raw}(t,e,n,r,i);!function(t,e,n){var r=t.primaryValue.raw-e,i=Z({partialValue:r,totalValue:e}),o=null!=t&&t.compareMetricId?t.compareMetricId:t.metricId,a={numericValue:Nt(r,o,n).formattedValue,percentValue:i,differenceBetweenPrimaryAndSecondary:r};t.previousIndicator=t.indicator,t.indicator=a}(i,d,s),function(t,e,n,r){var i=t.trendChartData,o=n?Nt(e,t.compareMetricId,r).formattedValue:i[0].formatted;t.secondaryValue?(t.previousSecondaryValue=t.secondaryValue.value,t.secondaryValue.value=o,t.previousSecondaryLabel=t.secondaryValue.label,t.secondaryValue.label=t.cardSecondaryLabel):t.secondaryValue={value:o,label:t.cardSecondaryLabel}}(i,d,o,s),l&&t.cardDetails.forEach(function(t){t.breakByAttributeName===c&&(t.cardSecondaryLabel=i.cardSecondaryLabel)})}function Wl(t,e){var n;if(e[0].timestampDate>t.timeRangeStart)return e;t.isMoreDataThanFilter=!0;var r=null!==(n=t.firstIndexInFilterRange)&&void 0!==n?n:e.findIndex(function(e){return e.timestampDate>t.timeRangeStart});return e.slice(r)}function Hl(t,e){var n={breakByAttributeName:t.breakByAttributeName,cardSecondaryLabel:t.cardSecondaryLabel,firstTimestamp:t.trendChartData[0],trend:{}};return n.trend[t.metricId]=t.trend,n.isCardOld=!!e&&t.isCardOld,n.lastUpdateTimestamp=e?t.lastUpdateTimestamp:null,n}function Gl(t,e,n,r,i,o){0===e.length?function(t,e,n,r){t.forEach(function(t){if(r.find(function(e){return e.breakByAttributeName===t.breakByAttributeName}))r.forEach(function(e){e.breakByAttributeName===t.breakByAttributeName&&(e.trend[t.metricId]=t.trend)});else{var i;t.isCardOld=t.trendChartData.at(-1).timestampDate<n.timeRangeStart;var o=null!==(i=t.lastUpdateTimestamp)&&void 0!==i?i:e.at(-1).timestampDateFormat;t.lastUpdateTimestamp=t.isCardOld?o:null;var a=Hl(t,!0);r.push(a)}})}(t,r,n,e):function(t,e,n,r){var i=r.axisScale;t.forEach(function(o){var a=e.find(function(t){return t.breakByAttributeName===o.breakByAttributeName});if(a){var l;null!=o&&o.cardSecondaryLabel&&(o.cardSecondaryLabel=n?r.secondaryMetricName:a.cardSecondaryLabel,null!=o&&null!==(l=o.secondaryValue)&&void 0!==l&&l.label&&(o.secondaryValue.label=o.cardSecondaryLabel)),o.isCardOld=a.isCardOld,o.lastUpdateTimestamp=a.lastUpdateTimestamp,function(t,e,n,r){if(t===S.AXIS_SCALE.GLOBAL)n.trend=e.trend[n.metricId];else{var i=t===S.AXIS_SCALE.SYNCED_ALL?r:r.filter(function(t){return t.metricId===n.metricId}),o=Math.min.apply(Math,Tl(i.map(function(t){var e;return(null===(e=t.trend)||void 0===e?void 0:e.minValue)||t.trendChartData[0].raw}))),a=Math.max.apply(Math,Tl(i.map(function(t){var e;return(null===(e=t.trend)||void 0===e?void 0:e.maxValue)||t.trendChartData[0].raw})));n.trend={minValue:o,maxValue:a}}}(i,a,o,t)}else{var u=Hl(o,!1);e.push(u)}})}(t,e,o,i)}function $l(t,e){var n,r=this,i=t.mxOid,o=t.mxId,a=t.elemId,l=t.attrId,u=t.attrOtp,c=r.hasBreakbyAttribute(),s=[],d=[],f={v:{format_config:JSON.stringify(e.formatConfig||{}),image_id:e.embeddedImageId||""}},p=[f];s.push({epmk:d,epmv:p}),d.push({ob:{did:"",tp:4}}),c&&d.push({ob:{did:l,tp:u}});var h=[];f.k={chn:h};var m=null===(n=mstrmojo.VisUtility.isDerivedMetric)||void 0===n?void 0:n.call(r,i);return null!=m&&m.isDM?h.push({emt:2,ei:o}):h.push({emt:2,mt:{did:i,tp:4,ql:0}}),c&&h.push({emt:1,ei:a,at:{did:l,tp:u,ql:0}}),{act:"updateElementsPropertiesMap",epm:s,nodeKey:r.k,partialRetrieval:{nodes:[r.k]},partialUpdate:{nodes:[r.k]}}}function ql(t,e,n){var r,i,o,a,l,u,c,s=null==this||null===(r=this.node)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.epm;if(!s||!s.length)return null;var d=e&&n;if(d){var f,p=Cl(s);try{for(p.s();!(f=p.n()).done;){var h,m=f.value;if((null===(h=m.epmk[1])||void 0===h?void 0:h.ob.did)===e){c=m.epmv;break}}}catch(t){p.e(t)}finally{p.f()}}else{var v,y=Cl(s);try{for(y.s();!(v=y.n()).done;){var g=v.value;if(1===g.epmk.length){c=g.epmv;break}}}catch(t){y.e(t)}finally{y.f()}}if(!c)return null;var _,b=Cl(c);try{for(b.s();!(_=b.n()).done;){var I,E=_.value,A=E.k.chn;if((null===(I=A[0].mt)||void 0===I?void 0:I.did)===t&&(!d||A[1].ei===n)){u=E.v;break}}}catch(t){b.e(t)}finally{b.f()}return{formatConfig:JSON.parse((null===(o=u)||void 0===o?void 0:o.format_config)||"{}"),imageId:null===(a=u)||void 0===a||null===(l=a.image_id)||void 0===l?void 0:l.did}}function Ql(t,e,n){var r=this;if(!0!==(mstrApp.isDossier||r.isMobile)){var i={taskId:"getRWEmbeddedImage",oid:t,msgID:mstrApp.getMsgID(),hasUserDefinedMimeType:!0},o={success:function(t){if(t){var r;if(null!==(r=mstrApp)&&void 0!==r&&r.isWSLiveMode)return void e(t.imageData);try{for(var i=[],o=0;o<t.length;o++)i.push(255&t.charCodeAt(o));e(ht(i))}catch(t){window.console.error("getRWEmbeddedImage:",t),n&&n(t)}}},failure:function(t){n&&n(t)},canceled:function(){n&&n()},textResponse:!0};mstrApp.serverRequest(i,o,{silent:!0})}else{var a=function(i){r.fetchRestApi("/dossier/".concat(i,"/images/").concat(t),!0,{headers:{Accept:"application/json"}}).then(function(t){return e("data:"+t.contentType+";base64,"+atob(t.imageData))},function(t){n&&n(t)})};if(mstrApp.isDisplayOnMobile&&mstrApp.populateCustomVizContext)mstrApp.populateCustomVizContext().then(function(){var t,e=null===(t=r.getDocModel)||void 0===t?void 0:t.call(r).oid;a(e)});else{var l,u,c=null===(l=r.controller)||void 0===l||null===(u=l.model)||void 0===u?void 0:u.oid;a(c)}}}function Zl(t){var e=this;return new Promise(function(n,r){Ql.call(e,t,n,r)})}function Xl(t){var e,n,r,i=this,o=t.propertyName,a=i.getFormats();if("borderColor"===o)null===(e=i.domNode)||void 0===e||null===(n=e.firstChild)||void 0===n||null===(r=n.firstChild)||void 0===r||r.style.setProperty("--card-border",a.border);else if("shadowColor"===o||"shadowOpacity"===o||"shadowSize"===o||"shadowAngle"===o||"shadowDistance"===o){var l,u,c,s,d,f,p,h,m,v,y,g=a["shadow-color"],_=yt(null!==(l=a["shadow-angle"])&&void 0!==l?l:0,null!==(u=a["shadow-distance"])&&void 0!==u?u:0),b="".concat(_.x,"px ").concat(_.y,"px ").concat(null!==(c=a["shadow-size"])&&void 0!==c?c:0,"px 0px ").concat(g?mt(g,a["shadow-opacity"]):"transparent"),I="".concat(_.x,"px ").concat(_.y,"px 10px 0px ").concat(mt(g&&"transparent"!==g?g:"#9A9B9C",60));null===(s=i.domNode)||void 0===s||null===(d=s.firstChild)||void 0===d||null===(f=d.firstChild)||void 0===f||f.style.setProperty("--card-box-shadow",b),null===(p=i.domNode)||void 0===p||null===(h=p.firstChild)||void 0===h||null===(m=h.firstChild)||void 0===m||m.style.setProperty("--card-box-shadow-hover",I);var E=null===(v=i.parent)||void 0===v||null===(y=v.domNode)||void 0===y?void 0:y.querySelector(".mstrmojo-UnitContainer-CustomShadow");E&&(E.style.setProperty("--card-box-shadow",b),E.style.setProperty("--card-box-shadow-hover",I))}}function Jl(){var t,e,n,r,i,o,a,l;if(null!==(t=mstrApp)&&void 0!==t&&null!==(e=t.supportFeature)&&void 0!==e&&e.call(t,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)){var u=this,c=null===(n=this.parent)||void 0===n||null===(r=n.domNode)||void 0===r?void 0:r.querySelector(".mstrmojo-UnitContainer-CustomShadow");if(c){var s=null===(i=c.offsetParent)||void 0===i?void 0:i.getBoundingClientRect();if(s){var d=this.domNode.querySelectorAll(".card-wrapper"),f=d.length;if(0!==f){c.style.display="none",c.innerHTML="",c.style.position="absolute";var p=document.createDocumentFragment(),h=null===(o=u.properties)||void 0===o?void 0:o.layoutType,m=parseInt(null!==(a=null===(l=u.properties)||void 0===l?void 0:l.cardPadding)&&void 0!==a?a:w.CARD_PADDING.defaultValue),v=h===S.LAYOUT_TYPES.STACKED,y=h===S.LAYOUT_TYPES.HORIZONTAL,g=h===S.LAYOUT_TYPES.VERTICAL,_=d[0]?d[0].getBoundingClientRect():{width:0,height:0};if(y||g){var b,I,E,A=_.height;g&&(A=null!==(b=null===(I=d[0].firstChild)||void 0===I||null===(E=I.getBoundingClientRect())||void 0===E?void 0:E.height)&&void 0!==b?b:A);for(var M=0;M<d.length;M++){var C=d[M];null==C||C.classList.add("hide-itself-box-shadow");var T=document.createElement("div");T.className="img-kpi-card-shadow",T.setAttribute("data-card-index",M);var N=_.top-s.top+(g?(_.height+m)*M:0);if(g&&N>s.height)break;Object.assign(T.style,{left:"".concat(_.left-s.left+(g?0:(_.width+m)*M),"px"),top:"".concat(N,"px"),width:"".concat(_.width,"px"),height:"".concat(A,"px")}),p.appendChild(T)}}else if(v){var O;1===f&&(null===(O=d[0])||void 0===O||O.classList.add("hide-itself-box-shadow"));var D=document.createElement("div");D.className="img-kpi-card-shadow",D.setAttribute("data-card-index",0),Object.assign(D.style,{left:0,top:0,width:"".concat(s.width-2,"px"),height:"".concat(s.height-2,"px")}),p.appendChild(D)}else for(var x,j,P,L,R,k,F=Math.min(f,parseInt(null!==(x=null===(j=u.properties)||void 0===j?void 0:j.gridColumnCount)&&void 0!==x?x:w.GRID_COLUMN_COUNT.defaultValue)),V=null!==(P=null===(L=this.scrollNode)||void 0===L?void 0:L.getBoundingClientRect())&&void 0!==P?P:s,z=u.getFormats(),U=yt(null!==(R=z["shadow-angle"])&&void 0!==R?R:0,null!==(k=z["shadow-distance"])&&void 0!==k?k:0),B=0!==U.x||0!==U.y,Y=Math.ceil(f/F),K=this.scrollNode.scrollTop,W=Math.floor(K/(_.height+m)),H=Math.ceil(V.height/(_.height+m))+1,G=W*F,$=d[G]?d[G].getBoundingClientRect():{top:0,left:0},q=W;q<W+H&&q<Y;q++)for(var Q=0;Q<F;Q++){var Z=q*F+Q;if(Z>=f)break;var X=$.left+Q*(_.width+m)-s.left,J=$.top+(q-W)*(_.height+m)-s.top,tt={left:X,top:J,right:X+_.width,bottom:J+_.height,width:_.width,height:_.height},et=d[Z].classList.contains("hide-itself-box-shadow"),nt=tt.top<0,rt=tt.bottom>V.height,it=!nt&&!rt,ot=0===Q||Q===F-1||q===W||Math.abs(tt.bottom-V.height)<=3;if(!it||ot||B){et||d[Z].classList.add("hide-itself-box-shadow");var at=document.createElement("div");at.className="img-kpi-card-shadow",at.setAttribute("data-card-index",Z),Object.assign(at.style,{left:Math.ceil(1e3*tt.left)/1e3+"px",top:Math.ceil(1e3*tt.top)/1e3+"px",width:Math.floor(100*tt.width)/100+"px",height:"".concat(tt.height-.01,"px")});var lt=-80+U.y,ut=-80-U.x,ct=-80-U.y,st=-80+U.x;nt&&(lt=-tt.top),rt&&(ct=tt.bottom-V.height),at.style.clipPath="inset(".concat(lt,"px ").concat(ut,"px ").concat(ct,"px ").concat(st,"px)"),p.appendChild(at)}else et&&d[Z].classList.remove("hide-itself-box-shadow")}c.appendChild(p),mstrmojo.dom.attachEvent(u.domNode,"mouseover",u.shadowLayerMouseHandler),mstrmojo.dom.attachEvent(u.domNode,"mouseout",u.shadowLayerMouseHandler),c.classList.add("ImageEnhancedKPIShadow"),c.style.display=""}}}}}function tu(){var t=this;t.metricDescTooltip=t.addDisposable(new mstrmojo.NewVisTooltip({visId:t.id,widgetClass:"image-enhanced-kpi-metric-descrition"})),t.metricDescTooltip.render()}function eu(t){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(t)}function nu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ru(t,e,n){return(e=function(t){var e=function(t){if("object"!=eu(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=eu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eu(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={});var iu,ou,au,lu,uu,cu,su,du,fu=mstrmojo,pu=fu.DEFAULT_CONTEXT_MENU,hu=fu.CUSTOM_CONTEXT_MENU,mu=function(t){return[".card__label-text",".card__primary-value",".card__trend-indicator",".card__secondary-value",".card__reference-line-label"].map(function(e){return vu(t,e)}).filter(function(t){return!!t}).join("\t")},vu=function(t,e){var n=t.querySelector(e);return n&&(n.title||n.getAttribute("title")||n.textContent)};mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.plugins.ImageEnhancedKPI||(mstrmojo.plugins.ImageEnhancedKPI={}),mstrmojo.descriptors["IMGKPI.1"]||mstrmojo.requiresDescsWPrefix("IMGKPI.",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42),mstrmojo.requiresCls("mstrmojo.num","mstrmojo.CustomVisBase","mstrmojo.ui._HasScroller","mstrmojo._SupportRealtimeStreaming","mstrmojo.func"),window.KPIEmbeddedImageRequesting=window.KPIEmbeddedImageRequesting||{},window.KPIEmbeddedImageCache=window.KPIEmbeddedImageCache||{};var yu,gu=null===(iu=mstrApp)||void 0===iu||null===(ou=iu.supportFeature)||void 0===ou?void 0:ou.call(iu,mstrmojo.vi.enums.EnumFeatures.SUPPORT_MULTIPLE_CARDS_ENHANCED_KPI);mstrmojo.plugins.ImageEnhancedKPI.ImageEnhancedKPI=mstrmojo.declare(mstrmojo.CustomVisBase,[mstrmojo.ui._HasScroller,mstrmojo._SupportRealtimeStreaming],{scriptClass:"mstrmojo.plugins.ImageEnhancedKPI.ImageEnhancedKPI",cssClass:"ImageEnhancedKPI",errorMessage:mstrmojo.descP("IMGKPI.","7","Either there is not enough data to display the visualization or the visualization configuration is incomplete."),errorDetails:(yu=gu?mstrmojo.descP("IMGKPI.","56","Add 1+ #metrics####"):mstrmojo.descP("IMGKPI.","63","Add 1 #metric####"),yu.replace(/####/g,"</span>").replace("#",'<span class="ghost-vis-txt-metric">')),useRichTooltip:!1,reuseDOMNode:!1,draggable:!0,supportNEE:!0,supportPagination:!0,isIOS:mstrApp.isDisplayOnMobile,isAndroid:/(android)/i.test(navigator.userAgent),isMobile:mstrApp.isDisplayOnMobile||/(android)/i.test(navigator.userAgent),isInChatbot:null===(au=(lu=mstrApp).isInAIBotOrAutoAnswer)||void 0===au?void 0:au.call(lu),isWSLocalMode:mstrApp.isWSLocalMode&&mstrApp.isWSLocalMode(),isConsumption:!1,labelsEditState:{},components:{},componentsUnifiedFontSizesInPt:null,graphicModels:[],contextMenuCardsGraphicModels:[],selectedCardsGraphicModels:[],trendSVGs:[],autoPlayEnabled:!1,tooltipInfo:{isVisible:!1,isPositionFixed:!1,position:{},graphicModel:{}},intervalAutoPlayId:null,KPIType:0,isSingleCardDisplayed:null,isComparisonKPI:!1,isImageEnhancedKPI:!0,animationDuration:0,iterator:0,init:function(t){var e,n,r;this._super(t);var i=this,o=window.mstrApp.isExporting;i.animationDuration=o?0:1500,i.selectedKPICard={},function(t){t.savePropertyAndUpdateWidgetAsync=hl}(i);var a,l,u,c=(a={},Object.values(w).forEach(function(t){var e=t.name,n=t.defaultValue;a[e]=n}),At({},O,JSON.stringify(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach(function(e){At(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},a))));if(i.setDefaultPropertyValues(c),i.selectedCardsGraphicModels=[],i.contextMenuCardsGraphicModels=[],i.searchResultMapping={},i.attachEventListener("iconicVizDropZoneModified",i.id,function(){i.selectedKPICard={}}),!o&&pt()){var s,d,f=(l=null==i||null===(s=i.node)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.epm,u={},l&&Array.isArray(l)?(l.forEach(function(t){Array.isArray(t.epmv)&&t.epmv.forEach(function(t){var e,n,r,i,o,a,l,c,s,d,f=Array.isArray(null==t||null===(e=t.k)||void 0===e?void 0:e.chn)?t.k.chn:[],p=null==t||null===(n=t.v)||void 0===n||null===(r=n.image_id)||void 0===r?void 0:r.did;p&&(u[p]||(u[p]=[]),u[p].push({mxOid:null===(i=f[0])||void 0===i||null===(o=i.mt)||void 0===o?void 0:o.did,attrId:null===(a=f[1])||void 0===a||null===(l=a.at)||void 0===l?void 0:l.did,attrOtp:null===(c=f[1])||void 0===c||null===(s=c.at)||void 0===s?void 0:s.tp,elemId:null===(d=f[1])||void 0===d?void 0:d.ei}))})}),u):u);Object.keys(f).length>0&&Object.keys(f).forEach(function(t){i.fetchImage(t)})}i.containerPropChangedListener=i.attachEventListener("kpiContainerPropertyChanged",i.id,Xl.bind(i));var p=null===(e=i.controller)||void 0===e||null===(n=e.model)||void 0===n||null===(r=n.getDocVIVisualizationsMainPanel)||void 0===r?void 0:r.call(n);p&&(i.pageSwitchListener=p.attachEventListener("panelDisplaying",i.id,function(t){setTimeout(function(){Jl.call(i)})}))},destroy:function(t){var e,n,r=this;if(r.isWSLocalMode||function(t){var e,n,r,i,o,a;if(null!==(e=mstrApp)&&void 0!==e&&null!==(n=e.rootCtrl)&&void 0!==n&&null!==(r=n.docCtrl)&&void 0!==r&&null!==(i=r.model)&&void 0!==i&&i.bs&&null!==(o=t.model)&&void 0!==o&&o.data&&!t.isWSLocalMode&&!t.isConsumption){var l=t.dataInterface.data.gsi.mx.map(function(e){var n;return null!==(n=e.wdgstrs)&&void 0!==n&&n[d]?{act:p,nodeKey:t.k,skey:d,objectId:e.did,objectType:4}:null}).filter(function(t){return t});(null===(a=t.model.data.wdgstrs)||void 0===a?void 0:a[f])&&l.push({act:p,nodeKey:t.k,skey:f}),l.length&&function(t,e){var n={taskId:"mojoRWManipulation",params:JSON.stringify({actions:e,style:{params:{treesToRender:2},name:"RWIVEMojoStyle"}}),nodeKey:t.k,suppressData:!0,messageId:mstrApp.getMsgID(),styleName:"RWIVEMojoStyle",rwb:mstrApp.rootCtrl.docCtrl.model.bs};mstrApp.serverRequest(n)}(t,l)}}(r),r.containerPropChangedListener&&(r.detachEventListener(r.containerPropChangedListener),r.containerPropChangedListener=null),null!==(e=mstrApp)&&void 0!==e&&null!==(n=e.supportFeature)&&void 0!==n&&n.call(e,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)&&(mstrmojo.dom.detachEvent(r.domNode,"mouseover",r.shadowLayerMouseHandler),mstrmojo.dom.detachEvent(r.domNode,"mouseout",r.shadowLayerMouseHandler)),r.pageSwitchListener){var i,o,a,l=null===(i=r.controller)||void 0===i||null===(o=i.model)||void 0===o||null===(a=o.getDocVIVisualizationsMainPanel)||void 0===a?void 0:a.call(o);null==l||l.detachEventListener(r.pageSwitchListener),r.pageSwitchListener=null}this._super(t)},onmousemove:function(t){var e=this,n=e.tooltipInfo,r={x:t.e.pageX,y:t.e.pageY},i={graphicModel:void 0};if(ui(t.getTarget().parentNode).dispatch("tooltip",{detail:{evt:t,returnObject:i}}),i.graphicModel){if(n.isPositionFixed&&e.tooltipWin.isVisible())return;e.tooltipInfo={isVisible:!0,isPositionFixed:!1,position:r,graphicModel:i.graphicModel},this.showTooltip(i.graphicModel,r)}else e.tooltipInfo={isVisible:!1,isPositionFixed:!1,position:{},graphicModel:{}},this.hideTooltip(!1)},oncontextmenu:function(t){var e=t.e.target;"container"!==e.className&&function(t,e,n){var r=n.closest(".card"),i=n.closest(".card__trend-graph"),o=e.getGraphicModels().find(function(t){return mstrmojo.string.encodeHtmlString(t.cardId)===r.id}),a=e.selectedCardsGraphicModels,l=e.contextMenuCardsGraphicModels;if(ua(e,a),null==l||l.forEach(function(t){var e=oa(t);null==e||e.classList.remove("card--selected-context-menu")}),e.isIOS&&e.trendSVGs.forEach(function(t){return t.dispatch("mouseout")}),e.isMobile&&i){e.contextMenuCardsGraphicModels=[];var u={graphicModel:void 0};ui(i.querySelector("svg")).dispatch("tooltip",{detail:{evt:t,returnObject:u}}),e.handleContextMenuSelection(t,u.graphicModel)}else if(r.classList.contains("card--selected")&&a.length>1){e.clearSelections();var c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nu(Object(n),!0).forEach(function(e){ru(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t);c.ctrlKey=!0,c.metaKey=!0;var s=[];a.forEach(function(t){e.handleSelection(c,t),s.push(t)}),e.contextMenuCardsGraphicModels=s,e.handleContextMenuSelection(t,o)}else e.clearSelections(),e.contextMenuCardsGraphicModels=[o],e.handleContextMenuSelection(t,o);e.contextMenuCardsGraphicModels.forEach(function(t){oa(t).classList.add("card--selected-context-menu")})}(t,this,e)},getContextMenuConfig:function(){var t=function(t){if(0===t.contextMenuCardsGraphicModels.length)return{commonConfig:[],customConfig:[]};var e=u(t.KPIType);return{commonConfig:$(t,e.BREAK_BY)?[{type:pu.CHANGE_VISUALIZATION},{type:pu.COPY_PASTE_FORMAT},{type:pu.KEEP_ONLY},{type:pu.EXCLUDE},{type:pu.DRILL},{type:pu.GROUP},{type:pu.CALCULATION},{type:pu.SHOW_DATA},{type:pu.GO_TO_TARGETS}]:[{type:pu.CHANGE_VISUALIZATION},{type:pu.COPY_PASTE_FORMAT}],customConfig:[t.isMobile?{}:{type:hu.NORMAL,name:mstrmojo.descP("IMGKPI.","12","Copy Text"),onClick:function(){!function(t){var e=t.map(function(t){return mu(t)}).join("\n"),n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}(t.contextMenuCardsGraphicModels.map(function(t){return oa(t)}))}}]}}(this);return{common:t.commonConfig,custom:t.customConfig}},getGraphicModelsBySelector:function(t,e){var n=this,r=[],i={attribute:mstrmojo.customviz.PICKED_TYPE.BOTH,metric:mstrmojo.customviz.PICKED_TYPE.BOTH},o=function(t){mstrmojo.array.forEach(n.getGraphicModels(),function(o){o.getSelector()&&n.canPickGraphicModel(t,e,o,i)&&r.push(o)})};return t.length>1?t.forEach(o):o(t),0===r.length&&(function(t,e){e.getGraphicModels().forEach(function(t){var e=oa(t);e&&aa(e)})}(0,this),n.selectedCardsGraphicModels=[],n.contextMenuCardsGraphicModels=[]),r},updateHighlight:function(){var t=this,e=this,n=[];e.getGraphicModels().forEach(function(e){t.graphicNeedsHighlight(e,!1)&&n.push(e)}),e.contextMenuCardsGraphicModels.length||ua(e,n)},resetComponents:function(){this.components={cardLabels:[],cardPrimaryValues:[],cardBodies:[],cardSecondaryValues:[],cardSecondaryValueWithIndicatorWrappers:[],cardIndicators:[]}},clearDomNode:function(){this.domNode.innerHTML=""},addMojoScrollbar:function(){var t,e,n=this,r=n.domNode;n.containerNode=r.firstChild.firstChild,n.scrollNode=r.firstChild,n.isIOS?n.scrollbarHostNode=r.firstChild:n.scrollbarHostNode=r,n.scrollBarNodes={};var i=n.domNode.style,o=i.height,a=i.width;n.scrollNode.style.maxHeight=o,o=parseFloat(o)-2,a=parseFloat(a)-2,n.containerNode.style.width="".concat(a,"px"),n.updateScrollbars(),n.addScrollNodeProperties(),null!==(t=mstrApp)&&void 0!==t&&null!==(e=t.supportFeature)&&void 0!==e&&e.call(t,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)&&(n.scrollNode.addEventListener("wheel",Bl.bind(n),{passive:!0}),n.scrollNode.addEventListener("scroll",function(){var t=n.scrollNode;null!=t&&t.classList.contains("hasVertical")&&Jl.call(n),Bl.call(n)},{passive:!0}))},rerenderVisualization:function(t,e){var n=this;!function(t,e,n){var r=t.isComparisonMetricAdded,i=t.isTrendAttributeAdded,o=t.isBreakByAttributeAdded,a=t.isComparisonKPI,l=t.updatedCategory,u=t.metricFormattingRules,c=t.data.at(-1).cells,s=Ft(c,t),d=!(i||a&&r);t.cardDataToUpdate=t.parsedData.find(function(t){return t.breakByAttributeName===l}),t.parsedData.forEach(function(r){if(!o||r.breakByAttributeName===l){var i=r.trendChartData,a=e[t.mappedIndexes[r.metricId]].v,f=Nt(a,r.metricId,u).formattedValue;r.primaryValue.raw=a,r.primaryValue.formatted=f,d?i.push({raw:a,formatted:f}):Kl(t,c,s,n,r)}})}(n,t,e),function(t){var e=t.isComparisonMetricAdded,n=t.isBreakByAttributeAdded,r=t.components,i=t.cardDataToUpdate,o=t.data,a=t.updatedCategory,l=t.properties,u=!e&&(!r.cardSecondaryValues[0]&&1!==o.length||n&&void 0===i.secondaryValueComponentIndex),c=e&&(!n&&2===o.length&&void 0===t.parsedData[0].trendComponentIndex||n&&void 0===i.trendComponentIndex);(u||c)&&t.parsedData.forEach(function(n,r){var i=null==n||!n.breakByAttributeName||n.breakByAttributeName===a;Ca(n,t,l,r,!e&&i,i)})}(n),Yl(n)},checkTimeFilter:function(){var t=this;t.updateFrequency=t.getRealtimeUpdateFrequency();var e=t.getRealtimeFilterInfo();if(t.timeFilter={},e){var n,r,i=e.curre,o=e.lastt,a=e.lastti,l=e.timef;if(t.timeFilter.typeOfTimeFilter=l,1===l)n=1===a?o:60*o;else{switch(i){case 1..KEY:n=1..TIME_IN_SECONDS;break;case 2..KEY:n=2..TIME_IN_SECONDS;break;case 3..KEY:n=3..TIME_IN_SECONDS;break;default:n=4..TIME_IN_SECONDS}t.timeFilter.currentSelection=i}r=n<=60?"".concat(n).concat("s"):n<=3600?"".concat(n/60).concat("mins"):n<=86400?"".concat(n/3600).concat("h"):"".concat(n/86400).concat("day"),t.timeFilter.filterTimeInSeconds=n,t.timeFilter.filterLabel=r}else{t.timeFilter={typeOfTimeFilter:1,filterTimeInSeconds:7200,filterLabel:"".concat(7200).concat("s")}}},updateTimeFilterRanges:function(t){var e=this.timeFilter,n="string"==typeof t?new Date(t):t;1===e.typeOfTimeFilter?e.timeRangeStart=new Date(n-e.filterTimeInSeconds*_l[ml]):2===e.typeOfTimeFilter&&(e.timeRangeStart=function(t,e){var n,r={year:(n=t).getFullYear(),month:n.getMonth(),day:n.getDate(),hour:n.getHours(),minute:n.getMinutes()},i=r.year,o=r.month,a=r.day,l=r.hour,u=r.minute;switch(e){case 1..KEY:return u<15?new Date(i,o,a,l,0):u<30?new Date(i,o,a,l,15):u<45?new Date(i,o,a,l,30):new Date(i,o,a,l,45);case 2..KEY:return u<30?new Date(i,o,a,l,0):new Date(i,o,a,l,30);case 3..KEY:return new Date(i,o,a,l,0);default:return new Date(i,o,a,0)}}(n,e.currentSelection))},applyFilterOnTrendData:Wl,plot:function(){var t,e,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=this,a=o.isRealtimeStreamingEnabled&&o.isRealtimeStreamingEnabled();if(o.isConsumption=!(null!==(t=(e=mstrApp).supportFeature)&&void 0!==t&&t.call(e,"show-react-dossier-format")),null!==(n=mstrApp)&&void 0!==n&&null!==(r=n.isWSLocalMode)&&void 0!==r&&r.call(n))throw new Error(mstrmojo.descP("IMGKPI.","64","Iconic KPI is not enabled in local mode."));if(!a&&ut(o)){var l,s,d,f,p,h=null===(l=Q(o))||void 0===l?void 0:l.id,m=null==o||null===(s=o.dataInterface)||void 0===s||null===(d=s.data)||void 0===d||null===(f=d.gts)||void 0===f||null===(p=f.row)||void 0===p?void 0:p.find(function(t){return t.id===h}),v=(null==m?void 0:m.n)||"";throw new Error(mstrmojo.descP("IMGKPI.","49","The attribute ## has too many elements. Please filter the data to display the KPIs.").replace("##",v))}for(var y=Tt(o.model.data.nf),g=!1,_=0;_<o.model.data.nf.length&&!g&&o.formattingModel;_++){var b;g=o.model.data.nf[_].id!==(null===(b=o.formattingModel.model[_])||void 0===b?void 0:b.id)||o.model.data.nf[_].nfs!==o.formattingModel.model[_].nfs}o.metricFormattingRules=y,o.formattingModel={model:o.model.data.nf,didMetricFormattingRuleChange:g},o.trendSVGs=[],o.shouldFontBeChanged=[],o.cardIds=[],o.graphicModels=[],o.truncatedLabels=[],o.isRealTime=a,o.isComparisonMetricAdded=gt(o);var I=u(o.KPIType);if(a&&(o.isBreakByAttributeAdded=$(o,I.BREAK_BY),o.isTrendAttributeAdded=$(o,I.TREND),function(t){var e,n,r=t.isBreakByAttributeAdded;r&&(n=0),t.isTrendAttributeAdded&&(e=r?1:0),t.timestampIndex=e,t.breakByIndex=n}(o)),!a||o.data&&o.data.length){o.currentInterval&&clearInterval(o.currentInterval);var E=function(){var t=function(t){var e,n,r=u(t.KPIType),i=!$(t,r.METRICS),o=mstrApp.isDisplayOnMobile||mstrApp.isDossier||/(android)/i.test(navigator.userAgent),a=!window.mstrApp.isExporting&&!o&&!window.mstrApp.features["show-react-dossier-format"],l=t.isComparisonKPI,c=null===(e=mstrApp)||void 0===e||null===(n=e.supportFeature)||void 0===n?void 0:n.call(e,mstrmojo.vi.enums.EnumFeatures.SUPPORT_MULTIPLE_CARDS_ENHANCED_KPI);if(a)throw t.errorMessage=l?mstrmojo.descP("IMGKPI.","11","Comparison KPI is supported only on environments 11.3.1 or higher"):mstrmojo.descP("IMGKPI.","10","Multi-Metric KPI is supported only on environments 11.3.1 or higher"),t.errorDetails="",new Error("No react-format-panel");if(i){var s=document.createElement("div");s.classList.add("warning-container");var d=document.createElement("div");d.classList.add("icon"),d.style.backgroundPosition=l?"0 -90px":"unset";var f=t.domNode,p=f.clientWidth,h=f.clientHeight;(p<640||h<600)&&(d.style.width="60px",d.style.height="60px",d.style.backgroundPosition=l?"-90px -90px":"unset",!l&&(d.style.backgroundSize="contain")),s.appendChild(d);var m=document.createElement("div");m.classList.add("title");var v=document.createTextNode(l?mstrmojo.descP("IMGKPI.","41","Comparison KPI"):mstrmojo.descP("IMGKPI.","52","Iconic KPI"));m.appendChild(v),s.appendChild(m);var y=document.createElement("div");y.classList.add("description"),y.innerHTML=l?mstrmojo.descP("IMGKPI.","9","Add 2 #metrics####").replace("####","").replace("#","<svg class='metric-icon'></svg>"):mstrmojo.descP("IMGKPI.",c?"56":"63",c?"Add 1+ #metrics####":"Add 1 #metric####").replace("####","").replace("#","<svg class='metric-icon'></svg>"),s.appendChild(y),t.domNode.appendChild(s)}return a||i}(o);if(t)o.raiseEvent({name:"renderFinished",id:o.k});else{var e,n=o.intervalAutoPlayId;if(n&&clearInterval(n),o.addUseAsFilterMenuItem(),i)e=bt(i,o);else{var r=JSON.parse(o.getProperty(O));e=bt(r,o)}o.properties=e;var a=function(){var t,n,r,i,a,l,s,d,f,p,h=function(t,e){var n=t.model.data.nf,r=Tt(n,!0),i=n.map(function(t){return t.id}),o={};return i.forEach(function(t){var n=e[t]||{},i=n.value,a=n.font;if(i&&!isNaN(i)){var l=Nt(i,t,r).formattedValue;o[t]=e[t],o[t].formattedValue=l,o[t].font={fontColor:a.color,fontSize:a.size,fontFamily:a.fontFamily,fontStyle:a.style}}}),o}(o,e.createdReferenceLines);o.resetComponents(),o.trendSVGs=[],o.clearDomNode(),function(){var t=o.isRealTime,n=o.isBreakByAttributeAdded,r=o.isComparisonMetricAdded,i=o.cardsOrder,a=o.breakByIndex,l=o.timeFilter,s=o.data,d=o.getCardItems(),f=t?s:function(t){var e=mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT.ROWS_ADV;return t.dataInterface.getRawData(e,{hasSelection:!0,hasTitleName:!0,minAttribute:0})}(o);t&&n&&i&&f.sort(function(t,e){return i.findIndex(function(e){return e===t.cells[a].v})-i.findIndex(function(t){return t===e.cells[a].v})});var p,m=function(t,e,n,r,i){var o,a,l=u(e.KPIType),s=function(t,e,n){if(e.isRealTime){t=t.map(function(t){return Ft(t.cells,e)});var r=Vt(e);e.mappedIndexes=r}var i=$(e,n.TREND),o=$(e,n.BREAK_BY),a=t[0].values.map(function(){return o?new Map:[]}),l=e.isComparisonKPI,u=e.timestampIndex,c=e.isRealTime,s=e.model;return t.forEach(function(t,r){var d,f,p,h,m,v,y;if(!Yt(t)){var g=!o&&i,_=o&&i;if(o&&!i){var b,I,E,A,S=kt(t.headers);d=S.attributeSelector,f=d.eid,p=S.name,h=null==S||null===(b=S.headerObj)||void 0===b||null===(I=b.t)||void 0===I||null===(E=I.fs)||void 0===E||null===(A=E[0])||void 0===A?void 0:A.bftp}if(g){var M,w,C,T,N=t.headers[0];d=N.attributeSelector,m=null==N||null===(M=N.headerObj)||void 0===M||null===(w=M.t)||void 0===w||null===(C=w.fs)||void 0===C||null===(T=C[0])||void 0===T?void 0:T.bftp}if(_){var O,D,x,j,P,L,R,k,F=t.headers[0],V=F.attributeSelector.eid,z=t.headers.filter(function(t){return t.attributeSelector.eid!==V}),U=kt(z);d=U.attributeSelector,f=d.eid,p=U.name,h=null==U||null===(O=U.headerObj)||void 0===O||null===(D=O.t)||void 0===D||null===(x=D.fs)||void 0===x||null===(j=x[0])||void 0===j?void 0:j.bftp,m=null==F||null===(P=F.headerObj)||void 0===P||null===(L=P.t)||void 0===L||null===(R=L.fs)||void 0===R||null===(k=R[0])||void 0===k?void 0:k.bftp}t.values.forEach(function(g,_){var b,I,E,A,S,M,w,C,T,N,O,D,x,j,P=g.name,L=g.rv,R=g.v,k=g.id;if(1!==_||!l){v=(null==s||null===(b=s.getFullObjectInfo)||void 0===b||null===(I=b.call(s,k))||void 0===I?void 0:I.mft)||(null==s||null===(E=s.docModel)||void 0===E||null===(A=E.getObjectInfo)||void 0===A||null===(S=A.call(E,k))||void 0===S?void 0:S.mft)||(null==s||null===(M=s.getObjectInfo)||void 0===M||null===(w=M.call(s,k))||void 0===w?void 0:w.mft),y=(null==s||null===(C=s.getFullObjectInfo)||void 0===C||null===(T=C.call(s,k))||void 0===T?void 0:T.dsc)||(null==s||null===(N=s.docModel)||void 0===N||null===(O=N.getObjectInfo)||void 0===O||null===(D=O.call(N,k))||void 0===D?void 0:D.dsc)||(null==s||null===(x=s.getObjectInfo)||void 0===x||null===(j=x.call(s,k))||void 0===j?void 0:j.dsc);var F,V,z=o?a[_].get(f):a[_][0];if(l&&(V=(F=t.values[1]||null)?{raw:F.rv,formatted:F.v}:null),z){if(i){var U=Object.keys(t.metricSelector),B={raw:L,formatted:R,graphicModel:Ut(d,t.idValueMapping,U,k)};c&&(B.timestamp=e.data[r].cells[u].v,B.timestampDate=new Date(B.timestamp)),z.trendChartData.push(B)}l&&(z.compareMetricValue=V)}else{var Y;if(i){var K=Object.keys(t.metricSelector);Y=[{raw:L,formatted:R,graphicModel:Ut(d,t.idValueMapping,K,k)}],c&&(Y[0].timestamp=e.data[r].cells[u].v,Y[0].timestampDate=new Date(Y[0].timestamp))}else Y=[{raw:L,formatted:R}];var W,H={metricId:k,graphicModel:Bt(d,k,e,t,n),label:{withMetricName:p?"".concat(P," - ").concat(p):P,withoutMetricName:p||""},trendChartData:Y,breakByAttributeName:p,breakByAttributeFormType:h,trendAttributeFormType:m,metricFormType:v,metricDescription:y};l&&(H.compareMetricId=(null===(W=F)||void 0===W?void 0:W.id)||null,H.compareMetricValue=V),o?a[_].set(f,H):a[_].push(H)}}})}}),o?a.map(function(t){return function(t){return B(t.values())}(t)}):a}(t,e,l),d=function(t,e){var n=Tt(e.model.data.nf);return t.forEach(function(t){t.forEach(function(t){var e=t.trendChartData[t.trendChartData.length-1].raw,r=t.trendChartData[t.trendChartData.length-1].formatted,i=Nt(e,t.metricId,n).color;t.primaryValue={raw:e,formatted:r,color:i}})}),t}(s,e),f=(o=function(t,e,n,r){var i=$(e,r.TREND),o={min:null,max:null};if(!i)return[t,o];var a=e.isComparisonKPI,l=e.isRealTime,u=n.axisScale,c=n.axisScaleComparison;return a&&(u=c),t.forEach(function(t){var e=null,n=null,r=t.map(function(t){return t.trendChartData.map(function(t){return t.raw})});if(u!==S.AXIS_SCALE.GLOBAL){var i=r.flat();n=i.reduce(function(t,e){return Math.min(t,e)},0),e=i.reduce(function(t,e){return Math.max(t,e)},Number.NEGATIVE_INFINITY),o.min=Math.min(0,o.min,n),o.max=Math.max(o.max,e)}t.forEach(function(t,i){if(t.trendChartData.length<=1)t.trend=null;else{var o,a=r[i].reduce(function(t,e){return Math.max(t,e)},Number.NEGATIVE_INFINITY),u=null!==(o=e)&&void 0!==o?o:a,c=function(t,e,n,r,i){if(null!==r)return r;var o=e[n],a=t?o.reduce(function(t,e){return Math.min(t,e)},Number.POSITIVE_INFINITY):o.reduce(function(t,e){return Math.min(t,e)},0);return a>=0&&a===i?0:a}(l,r,i,n,u);t.trend={minValue:c,maxValue:u}}})}),[t,o]}(d,e,n,l),a=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(o,a)||Lt(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],h=f[1],m=function(t,e,n,r){var i=e.isComparisonKPI,o=e.isRealTime,a=e.isBreakByAttributeAdded,l=e.timeFilter,u=n.secondaryMetricName,s=$(e,r.TREND);e.isTrendAttributeAdded=s;var d=0===e.KPIType,f=i?$(e,r.COMPARE_WITH):null,p=$(e,r.METRICS)&&f;if(d&&!s||i&&!p&&!s)return t;var h=Tt(e.model.data.nf);return e.metricFormattingRules=h,e.metricId=t[0][0].metricId,t.forEach(function(t){t.forEach(function(t){if(o&&(t.cardSecondaryLabel=function(t,e,n,r,i){if(t<=e.timeRangeStart||n||!r&&e.isMoreDataThanFilter)return i;var o=t.toTimeString().split(" ").shift();return"Compare to ".concat(o)}(t.trendChartData[0].timestampDate,l,p,a,u)),null!==t.trend||p){var e,n,r,i={label:o?t.cardSecondaryLabel:u};r=o?0:t.trendChartData.length-2,p?(i.value=t.compareMetricValue.formatted,e=t.compareMetricValue.raw,n=t.compareMetricId):(i.value=t.trendChartData[r].formatted,e=t.trendChartData[r].raw,n=t.metricId);var s=t.primaryValue.raw-e,d=S.TREND_INDICATOR_VALUE_TYPE,f=Nt(s,n,h).formattedValue,m=Pt(Pt(Pt({},d.NUMERIC,f),d.PERCENT,[0,""].includes(e)?c:Z({partialValue:s,totalValue:e})),"differenceBetweenPrimaryAndSecondary",s);t.secondaryValue=i,t.indicator=m}else t.secondaryValue=null,t.indicator=null})}),t}(p,e,n,l).flat(),v=function(t,e,n,r){var i=n.axisScale,o=n.axisScaleComparison;return r.isComparisonKPI&&(i=o),i===S.AXIS_SCALE.SYNCED_ALL&&null!==e.min&&null!==e.max?t.map(function(t){return t.trend={minValue:e.min,maxValue:e.max},t}):t}(zt(m,n,e.isTrendAttributeAdded),h,n,e),y=function(t,e){return t.map(function(t){return t.referenceLine=e[t.metricId],t})}(v,r);return y.forEach(function(t,n){var r=i.map(function(t){return JSON.parse(t.dssid)})[n];if(r){var o=e.findVInEpm(r.mxOid,r.attrId,r.elemId);t.epmv=o}}),y}(f,o,e,h,d);m.forEach(function(t){o.graphicModels.push(t.graphicModel)}),t&&n&&(o.cardDetails=null!==(p=o.cardDetails)&&void 0!==p?p:[],Gl(m,o.cardDetails,l,s,e,r)),o.isSingleCardDisplayed=1===m.length||e.layoutType===S.LAYOUT_TYPES.STACKED,function(t,e){var n,r=u(t.KPIType),i=null===(n=t.gridData.gsi.sorts)||void 0===n?void 0:n[0],o=!(null==i||!i.length),a=$(t,r.BREAK_BY);if(o&&a&&e[0].graphicModel.getSelector().tid===i[0].key.split("!")[1]){var l={};e.forEach(function(t,e){t in l||(l[t.breakByAttributeName]=e)}),e.sort(function(t,e){return l[t.breakByAttributeName]-l[e.breakByAttributeName]})}}(o,m),o.parsedData=m}();var m=o.domNode,v=o.parsedData,y=o.isMobile,g=o.isInChatbot,_=m.appendChild($t({},!1)),b=Za(o,v,e);_.appendChild(b);var I=Array.from(e.layoutType===S.LAYOUT_TYPES.STACKED&&v.length>1?null==b||null===(t=b.querySelector(".slider"))||void 0===t?void 0:t.children:null==b?void 0:b.children),E=2===(null===(n=o.properties)||void 0===n?void 0:n.textSizeType),A=0===(null===(r=o.properties)||void 0===r?void 0:r.textSizeType),M={minPrimaryFontSize:Number.MAX_SAFE_INTEGER,minLabelFontSize:Number.MAX_SAFE_INTEGER,minSecondaryFontSize:Number.MAX_SAFE_INTEGER,minTrendIndicatorFontSize:Number.MAX_SAFE_INTEGER};null==I||null===(i=I.forEach)||void 0===i||i.call(I,function(t,e){var n,r,i,a,l=null===(n=t.querySelector)||void 0===n?void 0:n.call(t,".card__label-body-wrapper"),u=null===(r=t.querySelector)||void 0===r?void 0:r.call(t,".secondary-value-indicator-wrapper"),c=null===(i=t.querySelector)||void 0===i?void 0:i.call(t,".card__img-wrapper");(function(t,e,n,r,i){var o=t.getBoundingClientRect(),a=o.left,l=o.right,u=o.width,c=e.getBoundingClientRect(),s=c.right,d=c.width,f=Math.min(.08*d,30),p=t.querySelector(".card__primary-value"),h=t.querySelector(".card__label"),m=getComputedStyle(p),v=getComputedStyle(h),y={fontSize:m.fontSize,fontFamily:m.fontFamily,fontWeight:m.fontWeight,fontStyle:m.fontStyle},g={fontSize:v.fontSize,fontFamily:v.fontFamily,fontWeight:v.fontWeight,fontStyle:v.fontStyle},_=a+dt(p.textContent,y)>s-f,b=t.scrollWidth>t.clientWidth;if(!_&&!b||i){var I,E,A,S;if(0!==(null==n||null===(I=n.properties)||void 0===I||null===(E=I.primaryValueFontOptions)||void 0===E?void 0:E.fontSteps)){var M=k(y.fontSize,n.properties.primaryValueFontOptions.fontSteps);!i&&p.style.setProperty("font-size",M)}if(0!==(null==n||null===(A=n.properties)||void 0===A||null===(S=A.labelFontOptions)||void 0===S?void 0:S.fontSteps)){var w=k(g.fontSize,n.properties.labelFontOptions.fontSteps);!i&&h.style.setProperty("font-size",w)}r.minPrimaryFontSize=Math.min(r.minPrimaryFontSize,parseFloat(m.fontSize)),r.minLabelFontSize=Math.min(r.minLabelFontSize,parseFloat(getComputedStyle(h).fontSize))}else{var C,T,N=_?u-(l-s)-f:t.clientWidth,O=Math.max(parseFloat(function(t,e,n,r,i,o,a,l,u){if(!t||""===t)return null;if(l=l||1,u=u||200,(e-=i=i||0)<=0)return null;var c=$HASH.copy(n||{}),s=c.fontSize,d=!0;s?"string"==typeof s&&-1!==s.indexOf("pt")&&(d=!1):($DOM.isIE||$DOM.isIEW3C)&&(d=!1);var f=function(n){return c.fontSize=n+(d?"px":"pt"),dt(t,c,0,r,void 0,void 0)<=e};if(!f(l))return null;if(f(u))return u+(d?"px":"pt");for(var p=l,h=u,m=l;h-p>.1;){var v=(p+h)/2;f(v)?(m=v,p=v):h=v}return(m=Math.floor(10*m)/10)+(d?"px":"pt")}(p.textContent,N,y,m.height)),12);if(0!==n.properties.primaryValueFontOptions.fontSteps){var D=k(O+"px",n.properties.primaryValueFontOptions.fontSteps);p.style.setProperty("font-size",D)}else p.style.setProperty("font-size",O+"px");var x=Math.min(O/parseFloat(m.fontSize),1);12===O&&(p.style.setProperty("width",N+"px"),p.style.setProperty("overflow","hidden"),p.style.setProperty("text-overflow","ellipsis"));var j=Math.max(x*parseFloat(getComputedStyle(h).fontSize),8);if(0!==(null==n||null===(C=n.properties)||void 0===C||null===(T=C.labelFontOptions)||void 0===T?void 0:T.fontSteps)){var P=k(j+"px",n.properties.labelFontOptions.fontSteps);h.style.setProperty("font-size",P)}else h.style.setProperty("font-size",j+"px");r.minLabelFontSize=Math.min(r.minLabelFontSize,j),r.minPrimaryFontSize=Math.min(r.minPrimaryFontSize,O)}})(l,t,o,M,E),u&&ft(u,t,o,e,M,!1,E),"vertical-card"===(null==o||null===(a=o.cardProperties)||void 0===a?void 0:a.cssModifiers).cardDirection&&(function(t,e,n){if(t&&e&&n){var r=t.querySelector(".card__label-text").parentNode.getBoundingClientRect(),i=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i.bottom,l=r.top;if(l<=a){var u=a-l+Math.min(.03*o.height,5),c=o.height,s="".concat((u/c*100).toFixed(2),"cqh");n.style.setProperty("--label-icon-gap",s),t.style.marginTop=s}}}(l,c,t),function(t,e){var n=t.cardDimensions.cardHeight;t.isTrendAttributeAdded&&n<100&&e.style.setProperty("display","none")}(o,c)),function(t,e){var n,r=e.cardDimensions.cardHeight,i=t.querySelector(".card__label-text");r<100&&"horizontal-card"===(null==e||null===(n=e.cardProperties)||void 0===n?void 0:n.cssModifiers).cardDirection&&e.isTrendAttributeAdded&&(i.style.setProperty("white-space","nowrap"),i.parentNode.style.setProperty("min-block-size","1lh"))}(l,o),setTimeout(function(){return function(t){var e;if(t&&t.domNode){var n=t.domNode,r=(75-n.clientHeight)/2,i=n.querySelector(".card-wrapper"),o=null==i||null===(e=i.parentElement)||void 0===e?void 0:e.parentElement;o&&(o.scrollTop+=r)}}(o)},0)}),(A||E)&&I.forEach(function(t,e){var n,r,i=null===(n=t.querySelector)||void 0===n?void 0:n.call(t,".card__label-body-wrapper"),a=null===(r=t.querySelector)||void 0===r?void 0:r.call(t,".secondary-value-indicator-wrapper");!function(t,e,n){var r,i,o,a,l=t.querySelector(".card__primary-value"),u=t.querySelector(".card__label");if(0!==(null==n||null===(r=n.properties)||void 0===r||null===(i=r.primaryValueFontOptions)||void 0===i?void 0:i.fontSteps)){var c=k(e.minPrimaryFontSize+"px",n.properties.primaryValueFontOptions.fontSteps);l.style.setProperty("font-size",c)}else l.style.setProperty("font-size",e.minPrimaryFontSize+"px");if(0!==(null==n||null===(o=n.properties)||void 0===o||null===(a=o.labelFontOptions)||void 0===a?void 0:a.fontSteps)){var s=k(e.minLabelFontSize+"px",n.properties.labelFontOptions.fontSteps);u.style.setProperty("font-size",s)}else u.style.setProperty("font-size",e.minLabelFontSize+"px")}(i,M,o),a&&ft(a,t,o,e,M,!0)}),o.visualizationNode=_,mstrApp.isDisplayOnMobile&&(null==o||null===(a=o.visualizationNode)||void 0===a||null===(l=a.parentElement)||void 0===l||null===(s=l.classList)||void 0===s||null===(d=s.add)||void 0===d||d.call(s,"scroll-track-ios"));var w=_.appendChild(document.createElement("div"));w.classList.add("font-size-measure-div"),w.remove(),e.layoutType===S.LAYOUT_TYPES.GRID&&o.addMojoScrollbar(),Jl.call(o),y||g||e.layoutType===S.LAYOUT_TYPES.STACKED||function(t){var e,n,r,i,o=t.domNode,a=o.clientWidth,l=o.clientHeight,c=ui(o),s=c.append("div").attr("class","selection-tool").style("visibility","hidden");c.call(function(){var t,e,n,r,i=vi,o=yi,a=gi,l=_i,u={},c=pn("start","drag","end"),s=0,d=0;function f(t){t.on("mousedown.drag",p).filter(l).on("touchstart.drag",v).on("touchmove.drag",y,si).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,l){if(!r&&i.call(this,a,l)){var u=_(this,o.call(this,a,l),a,l,"mouse");u&&(ui(a.view).on("mousemove.drag",h,di).on("mouseup.drag",m,di),function(t){var e=t.document.documentElement,n=ui(t).on("dragstart.drag",pi,di);"onselectstart"in e?n.on("selectstart.drag",pi,di):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(a.view),fi(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function h(r){if(pi(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>d}u.mouse("drag",r)}function m(t){ui(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=ui(t).on("dragstart.drag",null);e&&(r.on("click.drag",pi,di),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),pi(t),u.mouse("end",t)}function v(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,l=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=_(this,l,t,e,a[n].identifier,a[n]))&&(fi(t),r("start",t,a[n]))}}function y(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(pi(t),n("drag",t,r[e]))}function g(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<o;++e)(n=u[i[e].identifier])&&(fi(t),n("end",t,i[e]))}function _(t,e,n,r,i,o){var l,d,p,h=c.copy(),m=ci(o||n,e);if(null!=(p=a.call(t,new mi("beforestart",{sourceEvent:n,target:f,identifier:i,active:s,x:m[0],y:m[1],dx:0,dy:0,dispatch:h}),r)))return l=p.x-m[0]||0,d=p.y-m[1]||0,function n(o,a,c){var v,y=m;switch(o){case"start":u[i]=n,v=s++;break;case"end":delete u[i],--s;case"drag":m=ci(c||a,e),v=s}h.call(o,t,new mi(o,{sourceEvent:a,subject:p,target:f,identifier:i,active:v,x:m[0]+l,y:m[1]+d,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:h}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:hi(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:hi(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:hi(t),f):a},f.touchable=function(t){return arguments.length?(l="function"==typeof t?t:hi(!!t),f):l},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,f):Math.sqrt(d)},f}().on("start",function(a){var l,u,d=t.tooltipInfo;i=a.sourceEvent.target,d.isVisible&&null!==(l=t.model)&&void 0!==l&&null!==(u=l.data)&&void 0!==u&&u.doslinkinfo&&(t.showTooltip(d.graphicModel,d.position,!0),d.isPositionFixed=!0),(r=c.selectAll("article")).each(function(t,e,n){n[e].style.pointerEvents="none"}),e=o.scrollTop;var f={y:a.y,x:a.x};n=f,s.style("visibility","visible").style("left","".concat(n.x,"px")).style("top","".concat(n.y+e,"px")).style("width","0px").style("height","0px")}).on("drag",function(t){var r={y:t.y,x:t.x},i=a-n.x-2,o=l-n.y-2,u=r.x-n.x,c=r.y-n.y;u<0&&(s.style("left","".concat(Math.max(0,r.x),"px")),i=n.x),c<0&&(s.style("top","".concat(Math.max(0,r.y+e),"px")),o=n.y);var d=Math.min(i,Math.abs(u)),f=Math.min(o,Math.abs(c));s.style("width","".concat(d,"px")).style("height","".concat(f,"px"))}).on("end",function(n){var o={xMin:parseInt(s.style("left")),xMax:parseInt(s.style("left"))+parseInt(s.style("width")),yMin:parseInt(s.style("top")),yMax:parseInt(s.style("top"))+parseInt(s.style("height"))};s.style("visibility","hidden");var a=function(t,e,n,r){var i=n.xMin,o=n.xMax,a=n.yMin,l=n.yMax,u=t.node().getBoundingClientRect(),c=u.x,s=u.y,d=[];return e.each(function(t,e,n){var u=n[e],f=u.getBoundingClientRect(),p=f.x,h=f.y,m=f.width,v=f.height,y=p-c,g=h-s+r;!(i>y+m||o<y||l<g||a>g+v)&&d.push(u)}),d}(c,r,o,e);(function(t,e,n,r){var i=!!e.contextMenuCardsGraphicModels.length;if(ca(e),n.length>1){e.selectedCardsGraphicModels=n.map(function(t){return e.getGraphicModels().find(function(e){return mstrmojo.string.encodeHtmlString(e.cardId)===t.id})}),e.clearSelections(),ua(e);var o=u(e.KPIType),a=$(e,o.TREND),l=$(e,o.BREAK_BY);(a||l)&&e.applySelection(e.selectedCardsGraphicModels.map(function(t){return t.getSelector()}))}else if(1===n.length){var c=e.getGraphicModels().find(function(t){return mstrmojo.string.encodeHtmlString(t.cardId)===n[0].id});na(t,e,c,r)}else i||(e.selectedCardsGraphicModels=[],e.clearSelections(),ua(e),e.handleSelection(t))})(n,t,a,i),r.each(function(t,e,n){n[e].style.pointerEvents="auto"})}).filter(function(t){return!("mstrmojo-scrollbar vertical"===t.target.className||2===t.button)}))}(o),o.animationDuration=0,e.stackedAutoPlay?o.autoPlayEnabled=!0:o.autoPlayEnabled=!1;var C=null===(f=o.getSelectionCache)||void 0===f||null===(p=f.call(o))||void 0===p?void 0:p._viSelections;C&&o.highlight("att",C,!0),o.raiseEvent({name:"renderFinished",id:o.k})};!function(t,e,n,r){var i=[t.allFontOptions,t.labelFontOptions,t.primaryValueFontOptions,t.secondaryValueFontOptions,t.indicatorFontOptions].map(function(t){return{name:t.fontFamily,isItalic:t.fontStyle[1],isBold:t.fontStyle[0]}}).reduce(function(t,e){return t.find(function(t){return t.name===e.name&&t.isItalic===e.isItalic&&t.isBold===e.isBold})?t:t.concat([e])},[]);mstrmojo.util.FontLoader.load(e.id,i,{success:n,failure:r})&&n()}(e,o,a,a)}},A="".concat(o.cssClass,"stylesheet");if(mstrApp.isWorkstation&&!Tl(document.styleSheets).some(function(t){var e;return null===(e=t.href)||void 0===e?void 0:e.includes(o.cssClass)})){var M=document.getElementById(A);if(M){var w=M.onload;M.onload=function(){w(),E()}}else{var C=document.head,T=document.createElement("link");T.type="text/css",T.onload=E,T.id=A,T.rel="stylesheet",T.href="../plugins/".concat(o.cssClass,"/style/global.css"),C.appendChild(T)}}else E()}},renderRealtimeData:function(t){var e,n=this,r=n.timestampIndex,i=n.breakByIndex,o=n.isBreakByAttributeAdded,a=n.isTrendAttributeAdded;n.cardsOrder=null!==(e=n.cardsOrder)&&void 0!==e?e:[],o&&!n.cardsOrder.find(function(e){return e===t[0].cells[i].v})&&n.cardsOrder.push(t[0].cells[i].v),a&&(t[0].cells[r].v=t[0].cells[r].v.replace("T"," ").slice(0,-1),t[0].timestampDateFormat=new Date(t[0].cells[r].v)),n.data?n.data.push(t[0]):n.data=t,0===n.parsedData.length?(this.checkTimeFilter(),a&&(this.updateTimeFilterRanges(t[0].cells[r].v),this.timeFilter.isMoreDataThanFilter=!1),this.plot()):this.updateCardsAndRenderVisualization(t)},onRealtimeTopicChanged:function(){this.data=[],this.rawData=[],this.parsedData=[],this.trendSVGs=[]},updateCardsAndRenderVisualization:function(t){var e,n=this,r=n.isBreakByAttributeAdded,i=n.timestampIndex,o=n.breakByIndex,a=n.isTrendAttributeAdded;n.updatedCategory=r?t[0].cells[o].v:null,a?(e=t[0].cells[i].v,n.updateTimeFilterRanges(e),n.data=function(t){var e,n,r=t.timeFilter,i=t.data,o=t.breakByIndex,a=t.updatedCategory,l=t.isBreakByAttributeAdded,u=t.isComparisonMetricAdded;if(!l||u){var c=i.findIndex(function(t){return t.timestampDateFormat>r.timeRangeStart});e=i.slice(c),r.firstIndexInFilterRange=c}else e=i.filter(function(t){return t.cells[o].v!==a||t.timestampDateFormat>r.timeRangeStart});return!r.isMoreDataThanFilter&&i[0].timestampDateFormat<=r.timeRangeStart&&(r.isMoreDataThanFilter=!0,null!==(n=t.properties)&&void 0!==n&&n.secondaryMetricName&&function(t){var e=t.timeFilter,n=t.properties,r=t.components;if(2===e.typeOfTimeFilter){var i="Since ".concat(e.timeRangeStart.toLocaleTimeString());n.secondaryMetricName=i,r.cardSecondaryValues.forEach(function(t){t.secondaryValueData.labelTitle=i})}else{var o=bt({secondaryMetricName:""},t);n.secondaryMetricName=o.secondaryMetricName}}(t)),e}(n)):e=t[0].timestamp;var l=n.parsedData.map(function(t){return t.breakByAttributeName}).filter(function(t){return t}),u=!!r&&function(t,e){var n=e.updateFrequency,r=e.updatedCategory,i=e.timeFilter,o=e.parsedData,a=new Date(t-n*_l[ml]),l=o.filter(function(t){var e=t.isCardOld&&t.breakByAttributeName!==r&&t.lastUpdateTimestamp<a,n=t.breakByAttributeName===r&&t.trendChartData.at(-1).timestampDate<=i.timeRangeStart;return e||n}),u=l.length>0;return u&&function(t,e){t.forEach(function(t){e.cardsOrder=t.breakByAttributeName!==e.updatedCategory?e.cardsOrder.filter(function(e){return e!==t.breakByAttributeName}):e.cardsOrder,e.data=e.data.filter(function(n){return n.cells[e.breakByIndex].v!==t.breakByAttributeName||n.cells[e.breakByIndex].v===e.updatedCategory}),e.cardDetails=e.cardDetails.filter(function(e){return e.breakByAttributeName!==t.breakByAttributeName})})}(l,e),function(t,e){var n=e.updatedCategory,r=e.timeFilter,i=e.parsedData,o=e.cardDetails;i.forEach(function(e){var i;e.isCardOld=e.trendChartData.at(-1).timestampDate<r.timeRangeStart&&e.breakByAttributeName!==n;var a=null!==(i=e.lastUpdateTimestamp)&&void 0!==i?i:t;e.lastUpdateTimestamp=e.isCardOld?a:null,o.forEach(function(t){t.breakByAttributeName===e.breakByAttributeName&&(t.isCardOld=e.isCardOld,t.lastUpdateTimestamp=e.lastUpdateTimestamp)})})}(t,e),u}(t[0].timestampDateFormat,n),c=!r&&1===n.data.length&&n.parsedData[0].trendChartData.length>1;if(u||c||0!==l.length&&t.some(function(t){return!l.includes(t.cells[o].v)}))this.plot();else{var s=n.dataInterface.data.realtimeQueryInfo.columns,d=[];t.forEach(function(t){s.forEach(function(e,n){-1===e.bfid&&d.push(t.cells[n])})}),this.rerenderVisualization(d,e)}},localImageAdded:function(t){var e=this;if(!Pl()){var n=JSON.parse(e.getProperty(O));return n[w.IMAGE_PROP_NAME.name]=t.imageName,n[w.IMAGE_PROP_URL.name]=t.base64Str,e.savePropertyAndUpdateWidgetAsync(O,JSON.stringify(n)),void e.plot(n)}var r={success:function(n){if(n&&n.imageId){var r,i=(null===(r=e.selectedKPICard)||void 0===r?void 0:r.image)||{},o=i.mxOid,a=(i.mxId,i.elemId),l=i.attrId,u=(i.attrOtp,o&&ql.call(e,o,l,a));e.updateCardConfig(i,{formatConfig:xl(xl({},null==u?void 0:u.formatConfig),{},jl(jl({},w.IMAGE_PROP_NAME.name,t.imageName),w.IMAGE_PROP_URL.name,"")),embeddedImageId:n.imageId})}},complete:function(){mstrApp.hideWait()}},i={};i.vizKey=e.k,i.imageName=t.imageName,i.imageSize=t.imageSize,i.base64Str=t.base64Str,i.imageData=t.imageData,mstrApp.showWait({message:mstrmojo.desc(12963,"Uploading File...")}),e.model.controller.uploadImageToServer(i,r)},urlImageAdded:function(t){var e=this,n=function(t){syncDossierFormatPanel([w.IMAGE_PROP_NAME.name]),mstrmojo.alert(t?mstrmojo.desc(25021,"Only HTTPS URL schemes are allowed."):mstrmojo.desc(20905,"Please ensure that the URL points to a valid image file."),null,mstrmojo.desc(12068,"Invalid URL"))};mstrmojo.imageUtils.isURLValid(t)?(mstrApp.showWait({message:mstrmojo.desc(1212,"Processing...")}),mstrmojo.imageUtils.isImageAccessible(t,{success:function(){var n,r,i,o,a,l,u;mstrApp.hideWait(),i=(r=(null===(n=e.selectedKPICard)||void 0===n?void 0:n.image)||{}).mxOid,r.mxId,o=r.elemId,a=r.attrId,l=r.attrOtp,u=i&&ql.call(e,i,o,a,l),e.updateCardConfig(r,{formatConfig:xl(xl({},null==u?void 0:u.formatConfig),{},jl(jl({},w.IMAGE_PROP_NAME.name,t),w.IMAGE_PROP_URL.name,t)),embeddedImageId:null})},failure:function(){mstrApp.hideWait(),n(!1)}})):n(!0)},updateCardConfig:function(t,e,n,r){var i=this,o=i.getDocModel(),a=o.getTargetDefn(i.k),l=$l.call(i,t,e),u={success:function(t){o.partialUpdate(t.data,a),n&&n(t)},complete:function(){mstrApp.hideWait()},failure:function(t){r&&r(t)}};o.execute({execute:function(){var t=o.getDataService().newUpdate();t.add(l,u,{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.DATA}}),this.submitUpdate(t)},urInfo:{callback:{success:function(t){o.partialUpdate(t.data,a)}}}})},getCardItems:function(t){var e=this,n=[];try{var r,i,o=null===(r=e.dataInterface.getColTitles().titles[0])||void 0===r?void 0:r.es,a=1===o.length,l=e.dataInterface.getRowTitles(),u=Q(e),c=[];u&&(c=function(t){if(!Array.isArray(t))return[];var e,n=new Map,r=K(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i&&"object"===Y(i)){var o=i.id;if(null!=o){var a=String(o);if(n.has(a)){var l=n.get(a),u=void 0!==i.n&&null!==i.n?String(i.n):"";l.names.push(u)}else{var c=(0,F.cloneDeep)(i);c.n=void 0!==i.n&&null!==i.n?String(i.n):"",n.set(a,{entry:c,names:[c.n]})}}}}}catch(t){r.e(t)}finally{r.f()}var s,d=[],f=K(n.values());try{for(f.s();!(s=f.n()).done;){var p=s.value,h=p.entry,m=p.names;h.n=m.filter(function(t){return t.trim().length>0}).join(" "),d.push(h)}}catch(t){f.e(t)}finally{f.f()}return d}((null===(i=l.titles.find(function(t){return t.id===u.id}))||void 0===i?void 0:i.es)||[])),o.forEach(function(t){c.length?c.forEach(function(e){n.push({n:a?"".concat(e.n):"".concat(t.n," - ").concat(e.n),dssid:JSON.stringify({mxOid:t.oid,mxId:t.id,elemId:mstrApp.isDisplayOnMobile?e.oid:e.id,attrId:u.id,attrOtp:u.t})})}):n.push({n:"".concat(t.n),dssid:JSON.stringify({mxOid:t.oid,mxId:t.id})})}),t&&n.unshift({n:mstrmojo.desc(2058,"All"),dssid:"u;"})}catch(t){}return n},hasBreakbyAttribute:function(){var t=u(this.KPIType);return $(this,t.BREAK_BY)},hasMultipleMetrics:function(){var t=u(this.KPIType);return q(this,t.METRICS)>1},findVInEpm:ql,fetchImage:function(t){if(window.KPIEmbeddedImageCache[t])return Promise.resolve(window.KPIEmbeddedImageCache[t]);if(window.KPIEmbeddedImageRequesting[t])return window.KPIEmbeddedImageRequesting[t];if(pt()){var e=Zl.call(this,t).then(function(e){return window.KPIEmbeddedImageCache[t]=e,window.KPIEmbeddedImageRequesting[t]=null,e}).catch(function(e){console.error("Failed to load embedded image ".concat(t,":"),e),window.KPIEmbeddedImageRequesting[t]=null});return window.KPIEmbeddedImageRequesting[t]=e,e}return Promise.resolve(ma)},getCleanAllCardAppearancePropertiesAction:function(t){var e,n,r,i,o,a,l=this;if(null!=l&&null!==(e=l.node)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.epm&&(null==l||null===(r=l.isEmpty)||void 0===r||!r.call(l))){var u=JSON.parse(JSON.stringify(null==l||null===(i=l.node)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.epm)),c=Q(l),s=null===(a=l.dataInterface.getColTitles().titles[0])||void 0===a?void 0:a.es;if(s.length){var d=Object.fromEntries(s.map(function(t){var e,n;return[t.oid,{isDM:null===(e=mstrmojo.VisUtility.isDerivedMetric)||void 0===e||null===(n=e.call(l,t.oid))||void 0===n?void 0:n.isDM,id:t.id}]})),f=c?u.find(function(t){var e;return(null===(e=t.epmk[1])||void 0===e?void 0:e.ob.did)===c.id}):u.find(function(t){return 1===t.epmk.length});if(f)return f.epmk=f.epmk.map(function(t){return""===t.ob.did?{ob:{did:"",tp:4}}:{ob:{did:t.ob.did,tp:t.ob.tp}}}),f.epmv=f.epmv.filter(function(t){return t.k.chn[0].mt.did in d}),f.epmv.forEach(function(e){var n;e.k={chn:e.k.chn.map(function(t,e){var n,r,i,o,a,l,u;return 0===e?null!==(u=d[t.mt.did])&&void 0!==u&&u.isDM?{emt:2,ei:d[t.mt.did].id}:{emt:2,mt:{did:t.mt.did,tp:4,ql:0}}:{emt:1,ei:t.ei,at:{did:null===(n=f.epmk)||void 0===n||null===(r=n[1])||void 0===r||null===(i=r.ob)||void 0===i?void 0:i.did,tp:null===(o=f.epmk)||void 0===o||null===(a=o[1])||void 0===a||null===(l=a.ob)||void 0===l?void 0:l.tp,ql:0}}})};var r=e.v;delete r.vv,r.image_id=(null===(n=r.image_id)||void 0===n?void 0:n.did)||"";var i=JSON.parse((null==r?void 0:r.format_config)||"{}");i&&i.hasOwnProperty(t)&&(delete i[t],r.format_config=JSON.stringify(i))}),{act:"updateElementsPropertiesMap",epm:[f],nodeKey:l.k,partialRetrieval:{nodes:[l.k]},partialUpdate:{nodes:[l.k]}}}}},validateTarget:function(t,e,n){return!t},update:function(t){this._super(t),mstrApp.isExporting||Ll.bind(this)()},postBuildRendering:function(){var t,e,n,r,i=this.getFormats(),o=(null==i?void 0:i["background-color"])||"#ffffff",a=null==i?void 0:i["background-opacity"];null===(t=this.parent)||void 0===t||null===(e=t.contentNode)||void 0===e||e.style.setProperty("--imgkpi-container-bg-color",mt(o,a)),null===(n=this.parent)||void 0===n||null===(r=n.containerNode)||void 0===r||r.classList.add("ImageEnhancedKPIContainer"),this._super()},isScrolling:!1,scrollEndTimer:null,SCROLL_END_DELAY:120,prescroll:null!==(uu=mstrApp)&&void 0!==uu&&null!==(cu=uu.supportFeature)&&void 0!==cu&&cu.call(uu,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)?Bl:void 0,onScrollEnd:null!==(su=mstrApp)&&void 0!==su&&null!==(du=su.supportFeature)&&void 0!==du&&du.call(su,mstrmojo.vi.enums.EnumFeatures.SUPPORT_CONTAINER_SHADOW)?Bl:void 0,shadowLayerMouseHandler:function(t){var e;if(this.contains(t.target)){var n=mstrmojo.dom.findWidget(this);if(n){var r=-1;if((null===(e=n.properties)||void 0===e?void 0:e.layoutType)===S.LAYOUT_TYPES.STACKED)r=0;else{var i=t.target.closest(".card");i&&(r=Array.from(this.querySelectorAll(".card")).indexOf(i))}if(-1!==r){var o,a,l=null==n||null===(o=n.parent)||void 0===o||null===(a=o.domNode)||void 0===a?void 0:a.querySelector(".mstrmojo-UnitContainer-CustomShadow"),u=null==l?void 0:l.querySelector('.img-kpi-card-shadow[data-card-index="'+r+'"]');u&&("mouseover"===t.type?u.classList.add("img-kpi-card-shadow-hover"):"mouseout"===t.type&&u.classList.remove("img-kpi-card-shadow-hover"))}}}}})})()})();